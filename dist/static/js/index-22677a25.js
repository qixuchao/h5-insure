import{d as e,a4 as a,a5 as l,h as n,i as t,j as i,k as o,z as s,a6 as d,E as r,a7 as u,O as c,o as v,c as p,u as _,b as m,F as I,a as f,m as C,f as O,w as b,a8 as h,p as y,a9 as g,aa as E,ab as L,ac as j}from"./index-09fafbfe.js";import{i as k,q as w,s as A}from"./trial-2798f6b5.js";import{a as P,b as T}from"./product-6f2eb37e.js";import{_ as S}from"./TrialButton-aab80089.js";import{q as x}from"./createProposal-03e640d0.js";import{u as N}from"./useOrder-946e904a.js";import{p as R,d as V}from"./utils-3de2c0b9.js";import"./index-ec662e30.js";import"./format-31cde443.js";import"./utils-d6f93036.js";import"./infoCollection-cc3fac95.js";import"./trial-f78ae2e0.js";const B={key:0},F={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},D={class:"info"},U={key:1,class:"preview-placeholder"},q=f("br",null,null,-1),M=f("div",{id:"insureButton"},null,-1),G=f("div",{id:"xinaoDialog"},null,-1),z=e({name:"InsuranceLong"}),H=e({...z,setup(e){const z=a((()=>l((()=>import("./index-7a457fc5.js")),["static/js/index-7a457fc5.js","static/css/index-c23f272e.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css"]))),H=a((()=>l((()=>import("./index-70c79ee7.js")),["static/js/index-70c79ee7.js","static/css/index-79104747.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css","static/js/infoCollection-cc3fac95.js"]))),J=a((()=>l((()=>import("./index-75f202a7.js")),["static/js/index-75f202a7.js","static/css/index-491cbbd3.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css"])));a((()=>l((()=>import("./index-1b56c168.js")),["static/js/index-1b56c168.js","static/css/index-50785b3e.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css","static/js/cloneDeep-968bfb84.js","static/js/TrialButton-aab80089.js","static/css/TrialButton-dea42d8e.css","static/js/index-ec662e30.js","static/css/index-bbfdd7ec.css","static/js/format-31cde443.js","static/js/trial-2798f6b5.js","static/js/config-98e8d477.js","static/js/isNaN-6c83bc6f.js","static/js/useOrder-946e904a.js"])));const W=a((()=>l((()=>import("./index-f319ad85.js")),["static/js/index-f319ad85.js","static/css/index-ebb5282b.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css"]))),X=a((()=>l((()=>import("./Video-4958f515.js")),["static/js/Video-4958f515.js","static/css/Video-20262b6f.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css"]))),Y=a((()=>l((()=>import("./index-8a304148.js")),["static/js/index-8a304148.js","static/css/index-a34f0b1b.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css","static/js/jsbridgePromise-1a7f0ae2.js","static/js/utils-d6f93036.js","static/js/infoCollection-cc3fac95.js","static/js/trial-f78ae2e0.js"]))),$=a((()=>l((()=>import("./index-21f0cbd0.js")),["static/js/index-21f0cbd0.js","static/css/index-b01c516e.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css","static/js/product-6f2eb37e.js","static/js/useThread-637a02aa.js","static/js/jsbridgePromise-1a7f0ae2.js"]))),K=a((()=>l((()=>import("./index-bb26caf8.js")),["static/js/index-bb26caf8.js","static/css/index-fa4edf2a.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css","static/js/theme-94cf7d00.js","static/js/index-ec662e30.js","static/css/index-bbfdd7ec.css","static/js/utils-d6f93036.js","static/js/infoCollection-cc3fac95.js","static/js/trial-f78ae2e0.js"]))),Q=a((()=>l((()=>import("./index-91e32b14.js")),["static/js/index-91e32b14.js","static/css/index-eabeb59f.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css"]))),Z=a((()=>l((()=>import("./index-510a511b.js")),["static/js/index-510a511b.js","static/css/index-bf024e9b.css","static/js/index-09fafbfe.js","static/css/index-f1c5cfcb.css"]))),ee=n(),ae=t(),{productCode:le="",tenantId:ne,agentCode:te="",agencyCode:ie,saleChannelId:oe,proposalId:se,proposalInsuredId:de,extraInfo:re,orderNo:ue,insurerCode:ce,preview:ve,trialPreview:pe}=ae.query;let _e={};try{_e=JSON.parse(decodeURIComponent(re))}catch(ze){}const{openId:me,saTenantId:Ie=""}=_e;i();const fe=i(),Ce=i(),Oe=i(!1),be=i({}),he=i({}),ye=i(!1),ge=i(0),Ee=i(!1);i({});const Le=i(!0);i(!0);const je=i(!0),ke=i(""),we=i({}),Ae=i({}),Pe=i([]),Te=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Se=i({});o((()=>!!ve||!!pe));const xe=o((()=>!!pe));i();const Ne=()=>{g("premiumTrial",ae.query)},Re=N(),Ve=i(!1);s((()=>Se.value.planCode),(e=>{we.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Be=()=>{fe.value.handleClickTab()("insureButton")};i(""),i(0);const Fe=e=>{we.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},De=()=>{ye.value=!1,Le.value=!0},Ue=()=>{ye.value=!1,Le.value=!0},qe=i([]),Me=async()=>{var e,a;const{code:l,data:n}=await w({calcProductFactorList:[{productCode:le}]});if("10000"===l){Object.assign(Re.value,n);(e=>{T(e).then((({code:e,data:a})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:l}=V(a);qe.value=e.concat(l)}}))})(R(null==(a=null==(e=n.insuredList)?void 0:e[0])?void 0:a.productList))}},Ge=async()=>{const{code:e,data:a}=await A(Re.value);"10000"===e&&ee.push({path:E.questionNotice,query:{...ae.query,orderNo:a}})};return s((()=>we.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:l}=we.value;Se.value.planCode=e,Ae.value=(l||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),r((()=>{u(Ce,(([{isIntersecting:e}],a)=>{Oe.value=!0}))})),c((()=>{je.value=!0,se||Me(),(async()=>{!xe.value&&P({productCode:le}).then((({data:e,code:a})=>{if("10000"===a){be.value=e;const{wxShareConfig:a,showWXShare:l,title:n,desc:t,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};l?Object.assign(Te.value,{...a,imgUrl:a.image,isShare:l}):Object.assign(Te.value,{title:n,desc:t,imgUrl:i,isShare:l})}})),ue||se||(Ve.value=!0),se&&x({id:se,tenantId:Ie||ne}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:l}=a,n=(le||"").split(",");Object.assign(Re.value,{renewFlag:"",holder:e,tenantId:ne,proposalId:se,insuredList:(l||[]).filter((e=>e.id===+de)).map((e=>({...e,productList:e.productList.filter((e=>n.includes(e.productCode)))})))}),Ve.value=!0}})),await k({productCode:le,isTenant:!1}).then((({data:e,code:a})=>{var l;"10000"===a&&(Oe.value=!0,Ee.value=!0,he.value=e,we.value=null==(l=e.productPlanInsureVOList)?void 0:l[0],Pe.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),je.value=!1})(),setTimeout((async()=>{ke.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var l,n,t,i,o,s,d,r,u,c,g,E,k,w,A,P,T,x,N,R;const V=L,ee=j;return v(),p(I,null,[_(je)?(v(),p("div",B)):(v(),p("div",F,[m(V),_(xe)?(v(),p("div",U,[h("当前页面仅用于保费试算预览"),q,h("不展示其他产品相关配置信息")])):(v(),p(I,{key:0},[f("div",D,[1==(null==(n=null==(l=_(be))?void 0:l.BASIC_INFO)?void 0:n.bannerType)&&(null==(i=null==(t=_(be))?void 0:t.BASIC_INFO)?void 0:i.banner.length)?(v(),C(_(J),{key:0,"data-skeleton-type":"img",images:null==(s=null==(o=_(be))?void 0:o.BASIC_INFO)?void 0:s.banner},null,8,["images"])):O("",!0),2==(null==(r=null==(d=_(be))?void 0:d.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=_(be))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),C(_(X),{key:1,"data-skeleton-type":"img",src:null==(g=_(be))?void 0:g.BASIC_INFO.video[0]},null,8,["src"])):O("",!0),(null==(w=null==(k=null==(E=_(be))?void 0:E.BASIC_INFO)?void 0:k.bannerMove)?void 0:w.length)?(v(),C(_(J),{key:2,url:null==(T=null==(P=null==(A=_(be))?void 0:A.BASIC_INFO)?void 0:P.bannerMove)?void 0:T[0],onClick:Be},null,8,["url"])):O("",!0),f("div",{ref_key:"observeRef",ref:Ce},null,512)]),m(_(z),{"data-source":null==(x=_(be))?void 0:x.BASIC_INFO},null,8,["data-source"]),(null==(N=_(be))?void 0:N.GUARANTEE)?(v(),C(_(Y),{key:0,"show-service-config":"","data-source":_(be),"plan-list":_(Pe),onUpdateActivePlan:Fe},null,8,["data-source","plan-list"])):O("",!0),f("div",{class:"trial-text-btn",onClick:Ne},"算一算保费"),m(_(W),{"data-source":null==(R=_(be))?void 0:R.ISSUE_CONDITION},null,8,["data-source"]),m(_(H),{ref_key:"detailScrollRef",ref:fe,"data-source":_(be)},null,8,["data-source"]),m(ee,null,{default:b((()=>{var e,a,l;return[(null==(e=_(be).SIGNATURE)?void 0:e.inscribedContent)?(v(),C(_(Q),{key:0,"inscribed-content":null==(l=null==(a=_(be))?void 0:a.SIGNATURE)?void 0:l.inscribedContent},null,8,["inscribed-content"])):O("",!0)]})),_:1}),m(ee,null,{default:b((()=>{var e;return[(null==(e=_(qe))?void 0:e.length)?(v(),C(_(Z),{key:0,"attachment-list":_(qe),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{ge.value=e,ye.value=!0})(e))},null,8,["attachment-list"])):O("",!0)]})),_:1})],64)),M,m(S,{onHandleClick:Ge})])),m(ee,null,{default:b((()=>[_(Ee)&&!_(xe)?(v(),C(_($),{key:0,"product-detail":_(be)},null,8,["product-detail"])):O("",!0)])),_:1}),G,m(ee,null,{default:b((()=>[_(ye)?(v(),C(_(K),{key:0,show:_(ye),"onUpdate:show":a[1]||(a[1]=e=>y(ye)?ye.value=e:null),"content-list":_(Le)?_(qe):[],"is-only-view":_(Le),"active-index":_(ge),text:_(Le)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,onSubmit:De,onOnCloseFilePreviewByMask:Ue},null,8,["show","content-list","is-only-view","active-index","text"])):O("",!0)])),_:1})],64)}}});export{H as default};

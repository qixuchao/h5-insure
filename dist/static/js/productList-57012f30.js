import{_ as e,d as a,t as s,r as t,o,c as l,a as r,b as d,u as i,e as c,n as u,f as n,g as p,I as m,h as v,i as g,j as f,k as h,l as C,m as y,p as L,w as k,q as b,F as w,s as _,P as I,v as P,T as x}from"./index-0b6bfadc.js";import{P as j}from"./index-16ca8e7b.js";import{L as T}from"./index-220c0301.js";import{_ as V}from"./index-56e236d5.js";import{S as N}from"./index-9ab68968.js";import{_ as U}from"./empty-ae586b6c.js";import{q as M}from"./product-a64d20cd.js";import{P as z}from"./trial-ebe446ca.js";const F={class:"com-product-item"},S={class:"content-wrap"},q={class:"product-image"},B={class:"company-name"},O={class:"product-info"},R={class:"title"},D={class:"description"},W={class:"price-item"},E={class:"price"};var G=e(a({__name:"productItem",props:{productInfo:{default:()=>({})},errorMsg:{default:""}},setup(e){const a=e,{productInfo:v}=s(a),g=t({checked:!1});return s(g),(e,a)=>{var s;const t=m;return o(),l("div",F,[r("div",S,[r("div",q,[d(t,{src:i(v).image},null,8,["src"]),r("div",B,c(null==(s=i(v).insurerName)?void 0:s.slice(0,6)),1),i(v).label?(o(),l("div",{key:0,class:u({tag:!0,news:"新品"===i(v).label,push:"推荐"===i(v).label})},c(i(v).label),3)):n("",!0)]),r("div",O,[r("p",R,c(i(v).productFullName),1),r("p",D,c(i(v).desc),1),r("p",W,[r("span",E,c(i(v).price),1),r("span",null,c(i(v).amountUnit),1)])]),p(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-2ef5a5b8"]]);const $={class:"search-wrap"},A={class:"article-tag"},H=["onClick"],J={class:"page-proposal-list"},K=a({name:"productList"});var Q=e(a({...K,setup(e){const a=v();g();const p=t({searchValue:"",tagLists:[],loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],productCategory:"",productTotal:0,checked:"",productCode:void 0,proposalList:[],showFooter:!0,productName:"",productCodeList:[],errorMsgMap:{},excludeProductCodeList:[],isCreateProposal:!1,selectedProductList:[],firstLoading:!0}),m=f(),{searchValue:F,tagLists:S,loading:q,finished:B,refreshing:O,productList:R,selectProduct:D,insurerCodeList:W,productCategory:E,productTotal:K,showFooter:Q}=s(p),X=()=>{p.firstLoading&&x.loading("加载中..."),M({keyword:F.value,insurerCodeList:W.value,productCategory:E.value,pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:t}=e;"10000"===a&&(R.value=s,K.value=t)})).finally((()=>{x.clear(),p.firstLoading=!1}))},Y=e=>{X()},Z=f(0),ee=()=>{var e;O.value&&(R.value=[],O.value=!1),X(),q.value=!1,K.value===(null==(e=R.value)?void 0:e.length)&&(B.value=!0)},ae=h((()=>{var e;return(null==(e=R.value)?void 0:e.length)>0})),se=()=>{B.value=!0,q.value=!0,ee()};return C((()=>{setTimeout((async()=>{m.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,s)=>{const t=N,v=V,g=T,f=j,h=y("ProPageWrap");return o(),L(h,{class:"page-proposal"},{default:k((()=>[r("div",$,[d(t,{modelValue:i(F),"onUpdate:modelValue":s[0]||(s[0]=e=>b(F)?F.value=e:null),placeholder:"请输入产品名称进行搜索",shape:"round",class:"search","clear-trigger":"always","show-action":"",clearable:"",onSearch:Y},null,8,["modelValue"]),r("div",A,[(o(!0),l(w,null,_(i(I),((e,a)=>(o(),l("div",{key:a,class:u(["tag-item",{checked:i(Z)===a}]),onClick:s=>((e,a)=>{Z.value=a,E.value=e,X()})(e.value,a)},[r("div",{class:u(["tag-out",{checked:i(Z)==a}])},[r("div",{class:u(["tag-item-text",{checked:i(Z)==a}])},c(e.label),3)],2)],10,H)))),128))])]),d(f,{modelValue:i(O),"onUpdate:modelValue":s[2]||(s[2]=e=>b(O)?O.value=e:null),onRefresh:se},{default:k((()=>[i(ae)||i(p).firstLoading?n("",!0):(o(),L(v,{key:0,"empty-img":i(U),title:"暂无产品","empty-class":"empty-select"},null,8,["empty-img"])),r("div",J,[d(g,{loading:i(q),"onUpdate:loading":s[1]||(s[1]=e=>b(q)?q.value=e:null),finished:i(B),"finished-text":i(ae)?"- 已经到底了哦 -":"",onLoad:ee},{default:k((()=>[(o(!0),l(w,null,_(i(R),(e=>(o(),L(G,{key:e.id,"product-info":e,"error-msg":i(p).errorMsgMap[e.productCode],onClick:s=>(async e=>{let s=P.premiumTrial;const{insurerCode:t="",productCode:o="",templateId:l,productClass:r}=e;[z.SINGLE_PRODUCT,z.TWO_PRODUCT].includes(r)&&(s=P.productInfo),a.push({path:s,query:{insurerCode:t,productCode:o,tenantId:9991000011,templateId:l,iseeBizNo:m}})})(e)},null,8,["product-info","error-msg","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-2ab1574a"]]);export{Q as default};

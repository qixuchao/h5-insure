import{E as e,d as t,c as n,y as a,i as o,w as r,f as s,R as i,U as l,z as d,g as c,e as u,V as p,bf as f,W as m,X as I,u as v,x as y,r as h,K as O,Y as P,o as _,b as j,h as b,aw as g,k as L,j as V,P as w,a9 as C,aS as x}from"./index-2d842534.js";import{t as k}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-2dff19f2.js";/* empty css              */import"./bankCard-7cdef5f5.js";import{_ as R}from"./PayInfo-bc280958.js";import{c as T,i as E}from"./trial-49d69061.js";import{n as N}from"./nextStep-716e9628.js";import{u as S}from"./useAttachment-53eab87d.js";import{a as D,q as U}from"./product-88b44517.js";import{g as A}from"./utils-247a517d.js";import{u as q}from"./useOrder-2cdfd9fe.js";import{p as F}from"./pageJump-5c5e251c.js";import{B as $,P as W}from"./constants-7afb7c3d.js";import{P as B}from"./index-93836dc1.js";import"./infoCollection-267e9288.js";import{P as Y}from"./index-b867a2b9.js";import{I as J,P as z,b as H}from"./trial-acc7211d.js";import"./pdfh5-008ca364.js";import"./phoneVerify-3e3faf04.js";import"./keysIn-3ff85984.js";import"./isObjectLike-a9798079.js";import"./index-c0742e31.js";import"./debounce-eed12388.js";import"./index-a74ebae8.js";import"./core-f7e61596.js";import"./constant-c3f28a3b.js";import"./cloneDeep-91e31c47.js";const M={class:"com-insured-part-wrapper"},G={class:"content-wrapper"};var K=e(t({__name:"InsureInfo",props:{productData:{default:()=>({})}},setup(e){const t=(e,t)=>-1!==t.indexOf("$")?t.replace("$",`${e}`):`${e||""}${t}`;return(m,I)=>{const v=p,y=f;return n(),a("div",M,[o(y,{title:"保障信息"},{default:r((()=>{var r;return[s("div",G,[(n(!0),a(i,null,l((null==(r=e.productData)?void 0:r.tenantOrderRiskList)||[],((r,p)=>(n(),a("div",{key:p,class:"risk-item"},[s("p",null,d(r.riskName),1),o(v,{title:"保障期间",content:t(r.insurancePeriodValue,c(J)[r.insurancePeriodType])},null,8,["content"]),o(v,{title:"交费期间",content:t(r.paymentPeriod,c(z)[r.paymentPeriodType])},null,8,["content"]),o(v,{title:"交费方式",content:c(H)[r.paymentFrequency]},null,8,["content"]),(n(!0),a(i,null,l(r.liabilityDetails,((e,t)=>(n(),u(v,{key:t,title:e.liabilityName,content:"投保"},null,8,["title"])))),128)),o(v,{title:"保障金额",content:(r.currentAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(v,{title:"首期保费",class:"price",content:(e.productData.premium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])))),128))])]})),_:1})])}}}),[["__scopeId","data-v-3733d720"]]);const Q={class:"long-info-preview"},X={class:"footer-btn"},Z=s("span",null,"分享",-1),ee=t({__name:"infoPreview",setup(e){m((()=>I((()=>import("./index-9aa8d2be.js")),["static/js/index-9aa8d2be.js","static/css/index-fa4edf2a.css","static/js/index-2d842534.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js","static/js/index-b867a2b9.js","static/css/index-827a8544.css","static/js/utils-247a517d.js","static/js/infoCollection-267e9288.js","static/js/trial-acc7211d.js"]))),m((()=>I((()=>import("./index-0e751585.js")),["static/js/index-0e751585.js","static/css/index-3329e46f.css","static/js/index-2d842534.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js"])));const t=v(),a=q(),{productCode:i="",tenantId:l,agentCode:d="",agencyCode:p,saleChannelId:f,orderNo:J,extraInfo:z,insurerCode:H,preview:M}=t.query;let G={};try{G=JSON.parse(decodeURIComponent(z))}catch(me){}const ee=y({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),te=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,ne=h({imgUrl:"",desc:"",title:"",link:te}),ae=h(),oe=h(),re=h({}),se=h({}),ie=h([]),le=h(),de=h({});h(!1),h(!1),h(0),h(!0),S(de,le),h(!1);const ce=h(!1);h({}),h(!1),h([{}]),h(""),h(0),h(!1),h(),h(),h(),O((()=>{var e,t;const{insureProductRiskVOList:n}=(null==(t=null==(e=se.value)?void 0:e.productPlanInsureVOList)?void 0:t[0])||{};return(n||[]).find((e=>e.mainRiskFlag===P.YES))})),h(0),h({});const ue=async()=>{Object.assign(a.value,{extInfo:{...a.value.extInfo,buttonCode:$.INFO_PREVIEW,pageCode:W.INFO_PREVIEW}}),N(a.value,((e,n)=>{n===w.JUMP_PAGE&&F(e.nextPageCode,t.query)}))},pe=y({tenantOrderPayInfoList:[]}),fe=async()=>{D({productCode:i,tenantId:l,isTenant:!M}).then((({data:e,code:t})=>{var n;if("10000"===t){re.value=e,document.title=e.BASIC_INFO.title||"";let t={};if(null==(n=null==e?void 0:e.PRODUCT_LIST)?void 0:n.wxShareConfig){const{title:n,desc:a,image:o}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{},[r=""]=o||[];t={title:n,desc:a,image:r}}else{const{title:n,desc:a,image:o}=(null==e?void 0:e.PRODUCT_LIST)||{};t={title:n,desc:a,image:o}}Object.assign(ne.value,t)}})),T({orderNo:J,tenantId:l}).then((({code:e,data:t})=>{"10000"===e&&(pe.tenantOrderPayInfoList=t.tenantOrderPayInfoList,Object.assign(a.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),(()=>{const e={},{tenantOrderHolder:t,tenantOrderInsuredList:n}=a.value;e.holder={personVO:{...t,...t.extInfo}},e.insuredVOList=(n||[]).map((e=>({personVO:{...e,...e.extInfo,beneficiaryList:e.tenantOrderBeneficiaryList.map((e=>({personVO:e})))}}))),Object.assign(ee.personalInfo,e)})(),ce.value=!0)})),U({productCode:i}).then((({code:e,data:t})=>{var n,a,o,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:s}=t;le.value=e||[];const{basicInfo:{questionnaireType:i},questions:l,questionnaireName:d}=(null==(n=null==s?void 0:s[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};i&&(ie.value=2===i?[{attachmentName:d,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(a=null==l?void 0:l[0])?void 0:a.content,attachmentType:A(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(r=null==l?void 0:l[0])?void 0:r.content)}])}})),await E({productCode:i,isTenant:!M}).then((({data:e,code:t})=>{var n,a;if("10000"===t){se.value=e,de.value=(null==(n=e.productPlanInsureVOList)?void 0:n[0])||{};const{payInfo:t}=k((null==(a=de.value)?void 0:a.productFactor)||{});ee.payInfo={...ee.payInfo,...t}}}))};return _((()=>{fe()})),(e,t)=>{const i=C,l=x,d=j("ProPageWrap");return n(),u(d,null,{default:r((()=>{var d,p,f,m,I;return[s("div",Q,[o(K,{"product-data":null==(f=null==(p=null==(d=c(a).tenantOrderInsuredList)?void 0:d[1])?void 0:p.tenantOrderProductList)?void 0:f[0]},null,8,["product-data"]),(null==(m=c(de))?void 0:m.productFactor)?(n(),u(c(B),{key:0,ref_key:"personalInfoRef",ref:oe,modelValue:c(ee).personalInfo,"onUpdate:modelValue":t[0]||(t[0]=e=>c(ee).personalInfo=e),"product-factor":null==(I=c(de))?void 0:I.productFactor,"is-view":""},null,8,["modelValue","product-factor"])):b("",!0),c(ee).payInfo.schema.length?(n(),u(c(R),{key:1,ref_key:"payInfoRef",ref:ae,modelValue:c(pe).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>c(pe).tenantOrderPayInfoList=e),schema:c(ee).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):b("",!0),s("div",X,[o(l,g(c(ne),{class:"share-btn"}),{default:r((()=>[o(i,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),Z])),_:1},16),o(Y,{shadow:!1,onClick:ue},{default:r((()=>[L(e.$slots,"default",{},(()=>[V("下一步")]))])),_:3})])])]})),_:3})}}});export{ee as default};

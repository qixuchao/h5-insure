import{E as e,d as t,aV as a,c as n,y as r,z as o,h as d,g as l,k as s,f as i,K as u,i as c,w as p,R as v,U as f,e as m,V as y,bf as I,u as C,a as g,r as k,a0 as b,m as h,B as _,b as L,a8 as N,cm as O,v as P,ab as D,cC as S,j as Y,bs as T,D as j,T as R,cE as $,O as w,cD as x}from"./index-f446481e.js";import{d as E}from"./order-7f1d788f.js";import{f as G}from"./trial-b35c4adc.js";import{g as q,h as A}from"./infoCollection-901cda15.js";import{R as M,I as U,P as B,b as H}from"./trial-52409642.js";import{p as V}from"./pageJump-484970f7.js";import"./pdfh5-008ca364.js";const W={class:"com-field-info"},J={key:0,class:"label"},K={class:"content"};var X=e(t({__name:"fieldInfo",props:{label:{type:String,default:""},content:{type:String,default:""}},setup(e){const t=a();return(a,u)=>(n(),r("div",W,[e.label?(n(),r("div",J,o(e.label),1)):d("",!0),l(t).label?s(a.$slots,"label",{key:1},void 0,!0):d("",!0),i("div",K,o(e.content),1),l(t).content?s(a.$slots,"content",{key:2},void 0,!0):d("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const Z={class:"com-insured-part-wrapper"},z={class:"content-wrapper"},F={class:"product-name"},Q={class:"risk-item"};var ee=e(t({__name:"InsuredPart",props:{productData:{default:()=>({})}},setup(e){const t=e,a=u((()=>{var e,a;const n={riderRiskList:[],amount:0},r=null==(e=t.productData)?void 0:e.tenantOrderRiskList.find((e=>e.riskType===M.MAIN_RISK));return Object.assign(n,r),null==(a=t.productData)||a.tenantOrderRiskList.forEach((e=>{n.riderRiskList.push(e.riskName||"")})),n})),d=(e,t)=>-1!==t.indexOf("$")?t.replace("$",`${e}`):`${e||""}${t}`;return(t,s)=>{const u=y,C=I;return n(),r("div",Z,[c(C,{title:"保障信息"},{default:p((()=>[i("div",z,[i("div",F,o(e.productData.productName),1),i("div",Q,[c(u,{title:"保障期间",content:d(l(a).insurancePeriodValue,l(U)[l(a).insurancePeriodType])},null,8,["content"]),c(u,{title:"交费期间",content:d(l(a).paymentPeriod,l(B)[l(a).paymentPeriodType])},null,8,["content"]),c(u,{title:"交费方式",content:l(H)[l(a).paymentFrequency]},null,8,["content"]),(n(!0),r(v,null,f(l(a).riderRiskList,((e,t)=>(n(),m(u,{key:t,title:e,content:"投保"},null,8,["title"])))),128)),c(u,{title:"首期保费",class:"price",content:e.productData.premium.toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])])),_:1})])}}}),[["__scopeId","data-v-620b42ef"]]);const te={key:0,class:"page-order-detail"},ae={class:"card"},ne={class:"header"},re={class:"product-name"},oe={class:"company-name"},de={class:"status"},le={key:0,class:"footer-button"},se={key:1,class:"footer-button"},ie={key:2,class:"footer-button"};var ue=e(t({__name:"index",setup(e){const t=C(),a=g(),s=k(),{query:{orderNo:u,agentCode:y,tenantId:I,abbreviation:M,productCategory:U}}=t,B=()=>{j.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{s.value&&E(s.value.id,s.value.orderStatus).then((e=>{const{code:t,data:a}=e;"10000"===t&&R.success("删除成功")}))}))},H=()=>{var e,t;if(!s.value)return!1;const{agencyId:n,saleChannelId:r,orderTopStatus:o}=s.value,d=null==(t=null==(e=s.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;if(!(S.PENDING!==o&&S.PAYING!==o||d!==x.ZXYS&&d!==x.BWYL)){const e={[x.ZXYS]:"/internet/productDetail/package",[x.BWYL]:"/internet/productDetail"};return a.push({path:e[d],query:{productCode:d,saleChannelId:r,agentCode:y,tenantId:I,agencyCode:n,orderNo:u}}),!0}return!1},W=k(!1),J=()=>{var e,t;if(s.value){if(H())return;const{id:n,extInfo:{templateId:r,pageCode:o,extraInfo:d},agencyId:l,venderCode:i,orderStatus:u}=s.value,c={insurerCode:i,productCode:null==(t=null==(e=s.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode,tenantId:s.value.tenantId,agencyCode:s.value.agencyId,agentCode:s.value.agentCode,saleChannelId:null==d?void 0:d.saleChannelId};W.value=!0,G(c).then((e=>{if("10000"===e.code)if([q.LONG,q.NIANJIN].includes(A(`${r}`))){const t=e.data.split("?")[1];a.push({path:$[u],query:w.parse(t)}),window.location.href=e.data}else window.location.href=e.data}))}},K=()=>{var e,t;if(s.value){if(H())return;const{id:a,saleUserId:n,extInfo:{templateId:r},agencyId:o,venderCode:d}=s.value,l=null==(t=null==(e=s.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;V("payInfo",{productCode:l,orderNo:u,orderId:a,saleUserId:n,templateId:r,tenantId:I,productCategory:U,insurerCode:d,agencyCode:o})}};return b((()=>{h({orderNo:u,agentCode:y,tenantId:I}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(s.value=a)}))})),(e,t)=>{const a=_,u=L("ProPageWrap"),y=N("loading");return n(),m(u,null,{default:p((()=>{var e,t,u,I,C,g,k,b,h,_,L;return[l(s)?(n(),r("div",te,[i("div",ae,[c(X,null,{label:p((()=>{var e,t,a,n;return[i("div",ne,[i("div",re,o(null==(a=null==(t=null==(e=l(s))?void 0:e.tenantOrderInsuredList[0])?void 0:t.tenantOrderProductList[0])?void 0:a.productName),1),i("div",oe,o(((null==(n=l(s))?void 0:n.abbreviation)||"").substring(0,6)),1)])]})),content:p((()=>{var e;return[i("div",de,o(l(s)?l(O)[null==(e=l(s))?void 0:e.orderStatus]:""),1)]})),_:1}),c(X,{label:"投保单号",content:null==(e=l(s))?void 0:e.orderNo},null,8,["content"]),c(X,{label:"创建时间",content:l(P)(null==(t=l(s))?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),c(X,{label:"投保人",content:null==(I=null==(u=l(s))?void 0:u.tenantOrderHolder)?void 0:I.name},null,8,["content"]),(n(!0),r(v,null,f((null==(C=l(s))?void 0:C.tenantOrderInsuredList)||[],((e,t)=>(n(),m(X,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),c(ee,{"product-data":null==(b=null==(k=null==(g=l(s))?void 0:g.tenantOrderInsuredList[0])?void 0:k.tenantOrderProductList)?void 0:b[0],class:"insure-info"},null,8,["product-data"]),D((n(),r("div",null,[(null==(h=l(s))?void 0:h.orderTopStatus)===l(S).PENDING?(n(),r("div",le,[c(a,{type:"primary",onClick:T(B,["stop"])},{default:p((()=>[Y("删除")])),_:1},8,["onClick"]),c(a,{type:"primary",onClick:T(J,["stop"])},{default:p((()=>[Y("去处理")])),_:1},8,["onClick"])])):d("",!0),(null==(_=l(s))?void 0:_.orderTopStatus)===l(S).PAYING?(n(),r("div",se,[c(a,{type:"primary",onClick:T(B,["stop"])},{default:p((()=>[Y("删除")])),_:1},8,["onClick"]),c(a,{type:"primary",onClick:T(K,["stop"])},{default:p((()=>[Y("去支付")])),_:1},8,["onClick"])])):d("",!0),(null==(L=l(s))?void 0:L.orderTopStatus)===l(S).TIMEOUT?(n(),r("div",ie,[c(a,{type:"primary",onClick:T(B,["stop"])},{default:p((()=>[Y("删除")])),_:1},8,["onClick"])])):d("",!0)])),[[y,l(W)]])])):d("",!0)]})),_:1})}}}),[["__scopeId","data-v-5a7ab847"]]);export{ue as default};

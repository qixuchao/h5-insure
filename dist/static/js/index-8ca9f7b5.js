import{h as L,aa as Y,k as U,m as v,s as F,B as t,L as m,C as D,d as G,t as g,p as C,ac as T,x as P,G as k,D as W,T as w,a5 as H,a6 as V,r as b,A as $,$ as j,j as q,n as x,H as X,F as Z}from"./vendor-902054a7.js";import{_ as O,b as A,ae as f,k as z,s as J}from"./index-3a9ce3bd.js";import{d as K,g as Q}from"./order-91e74f2d.js";import{O as ee,b as S}from"./order-8ab91333.js";const M=e=>(H("data-v-b27e4180"),e=e(),V(),e),te={class:"com-order-item"},ae={class:"header"},se={class:"product-name"},oe={class:"company-name"},de={class:"status"},ne={class:"info"},ue={class:"info-item"},ie=M(()=>t("div",{class:"label"},"\u6295\u4FDD\u4EBA",-1)),re={class:"desc"},le={class:"info-item"},ce=M(()=>t("div",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),_e={class:"desc"},pe={class:"footer"},ve={class:"fee"},he=k(" \u4FDD\u8D39\uFF1A"),me={class:"money"},fe={key:0,class:"buttons"},ge=k("\u5220\u9664"),Ce=k("\u53BB\u5904\u7406"),ye={key:1,class:"buttons"},Ie=k("\u53BB\u652F\u4ED8"),De={key:2,class:"buttons"},be=k("\u5220\u9664"),Se=L({props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup(e,{emit:y}){const s=e,_=Y(),I=()=>{W.confirm({title:"",message:"\u786E\u8BA4\u8981\u5220\u9664\u8BE5\u8BA2\u5355\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{K(s.detail.id,s.detail.orderStatus).then(o=>{const{code:a,data:d}=o;a==="10000"&&(w.success("\u5220\u9664\u6210\u529F"),y("afterDelete"))})})},l=()=>{const{goodsCode:o,orderNo:a,id:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyId:i,saleChannelId:h,orderTopStatus:N}=s.detail;if((S.PENDING===N||S.PAYING===N)&&[f.ZXYS,f.BWYL,f.BWYLUP].includes(o)){const R={[f.ZXYS]:"/internet/productDetail/package",[f.BWYL]:"/internet/productDetail",[f.BWYLUP]:"/internet/guaranteeUpgrade"};return _.push({path:R[o],query:{productCode:o,saleChannelId:h,agentCode:p,tenantId:n,agencyCode:i,orderNo:a}}),!0}return!1},B=()=>{const{goodsCode:o,orderNo:a,id:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyId:i}=s.detail;l()||_.push({path:A.payInfo,query:{productCode:o,orderNo:a,orderId:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyCode:i}})},E=()=>{const{goodsCode:o,orderNo:a,id:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyId:i,saleChannelId:h,orderStatus:N}=s.detail;l()||_.push({path:A[s.detail.pageCode],query:{productCode:o,orderNo:a,orderId:d,agentCode:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyCode:i,isFromOrderList:"1"}})};return(o,a)=>{const d=U("van-button");return v(),F("div",te,[t("div",ae,[t("div",se,m(e.detail.goodsName),1),t("div",oe,m(e.detail.abbreviation),1),t("div",de,m(D(ee)[e.detail.orderStatus]),1)]),t("div",ne,[t("div",ue,[ie,t("div",re,m(e.detail.policyHolder),1)]),t("div",le,[ce,t("div",_e,m(D(G)(e.detail.orderStartDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),t("div",pe,[t("div",ve,[he,t("span",me,"\uFFE5"+m(e.detail.prem),1)]),e.detail.orderTopStatus===D(S).PENDING?(v(),F("div",fe,[g(d,{class:"button",onClick:T(I,["stop"])},{default:C(()=>[ge]),_:1},8,["onClick"]),g(d,{class:"button primary",onClick:T(E,["stop"])},{default:C(()=>[Ce]),_:1},8,["onClick"])])):P("",!0),e.detail.orderTopStatus===D(S).PAYING?(v(),F("div",ye,[g(d,{class:"button primary",onClick:T(B,["stop"])},{default:C(()=>[Ie]),_:1},8,["onClick"])])):P("",!0),e.detail.orderTopStatus===D(S).TIMEOUT?(v(),F("div",De,[g(d,{class:"button",onClick:T(I,["stop"])},{default:C(()=>[be]),_:1},8,["onClick"])])):P("",!0)])])}}});var Fe=O(Se,[["__scopeId","data-v-b27e4180"]]);const ke={class:"page-order"},Be=L({setup(e){Y();const y=b(0),s=b(1),_=b(!1),I=b(!1),l=b([]),B=[{title:"\u5168\u90E8",status:""},{title:"\u5F85\u5904\u7406",status:"-1"},{title:"\u5F85\u652F\u4ED8",status:"0"},{title:"\u5DF2\u5B8C\u6210",status:"1"},{title:"\u5DF2\u5931\u6548",status:"2"}],E=$(()=>B[y.value].status),o=r=>{const{orderNo:n,saleUserId:u,tenantId:c,abbreviation:i,productCategory:h}=r;J("orderDetail",{orderNo:n,agentCode:u,tenantId:c,abbreviation:i,productCategory:h})},a=()=>{_.value=!0,Q({condition:{orderTopStatus:E.value},pageSize:10,pageNum:s.value}).then(r=>{_.value=!1;const{code:n,data:u}=r;n==="10000"&&(s.value===1?l.value=u.datas:l.value=[...l.value,...u.datas]),I.value=l.value.length>=u.total})},d=()=>{s.value+=1,a()},p=()=>{s.value=1,a()};return j(E,()=>{s.value=1,a()}),q(()=>{a()}),(r,n)=>{const u=U("van-list"),c=U("ProPageWrap");return v(),x(c,{"main-class":"page-order-list"},{default:C(()=>[t("div",ke,[g(z,{active:y.value,"onUpdate:active":n[0]||(n[0]=i=>y.value=i),list:B,"small-gap":"",class:"tab"},null,8,["active"]),g(u,{class:"body",loading:_.value,finished:I.value,onLoad:d},{default:C(()=>[(v(!0),F(Z,null,X(l.value,(i,h)=>(v(),x(Fe,{key:h,detail:i,onClick:N=>o(i),onAfterDelete:p},null,8,["detail","onClick"]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var Ue=O(Be,[["__scopeId","data-v-5f493360"]]);export{Ue as default};

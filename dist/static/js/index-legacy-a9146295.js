!function(){var e=document.createElement("style");e.innerHTML=".com-body[data-v-6d26f650]{height:100%;padding:.42667rem .53333rem .21333rem}.com-body .header[data-v-6d26f650]{display:flex;justify-content:space-between;border:none;height:.56rem;font-size:.4rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#333;line-height:.56rem;align-items:center;margin-bottom:.4rem}.com-body .risk-name[data-v-6d26f650]{font-weight:600}.com-body .container[data-v-6d26f650]{height:90%;padding-bottom:2rem;overflow-y:auto}.com-body .container[data-v-6d26f650]::-webkit-scrollbar{display:none}.com-body .container[data-v-6d26f650] .risk-select-field{display:inline-flex;padding:0;align-items:center;font-weight:600}.com-body .container[data-v-6d26f650] .risk-select-field :deep(.van-field__label){color:#000}.com-body .container[data-v-6d26f650] .com-pro-field,.com-body .container[data-v-6d26f650] .com-van-field{padding-left:0;padding-right:0}.com-body .container[data-v-6d26f650] .com-pro-field:after,.com-body .container[data-v-6d26f650] .com-van-field:after{left:0;right:0}.benefit-table{overflow-y:hidden}.benefit-container[data-v-2cf800e4]{widows:100%;background:#ffffff;border-radius:.21333rem;margin-bottom:.26667rem;padding:0 .26667rem .4rem}.benefit-container .common-title[data-v-2cf800e4]{padding-top:.45333rem;margin-bottom:.4rem;font-weight:500;color:#333}.benefit-container .benefit[data-v-2cf800e4]{border-top:1px solid #EEEFF4}.benefit-container .benefit-title[data-v-2cf800e4]{margin-top:.48rem;font-size:.37333rem;font-weight:600;color:#393d46}.benefit-container .benefit .box[data-v-2cf800e4]{width:8.4rem;margin:0 auto;background:#fafafa;border:1px solid #9fb3d2;padding:.53333rem 0;border-radius:.26667rem;margin-top:.53333rem}.benefit-container .benefit .box-title[data-v-2cf800e4]{padding:0 .21333rem;font-size:.42667rem;font-weight:500;color:#333;text-align:center;display:flex;align-items:center;justify-content:center}.benefit-container .benefit .box-title img[data-v-2cf800e4]{width:.54667rem;height:.38667rem}.benefit-container .benefit .box-title span[data-v-2cf800e4]{color:var(--zaui-price, #ff5840)}.benefit-container .benefit .box-title.box-title-chart[data-v-2cf800e4]{margin:.53333rem 0}.benefit-container .benefit .box-price[data-v-2cf800e4]{margin-top:.53333rem;display:flex;justify-content:space-between;align-items:center;text-align:center;flex-wrap:wrap}.benefit-container .benefit .box-price .text1[data-v-2cf800e4]{font-size:.37333rem;line-height:.50667rem;font-weight:500;color:var(--zaui-price, #ff5840);font-family:Arial-BoldMT,Arial}.benefit-container .benefit .box-price .text2[data-v-2cf800e4]{font-size:.32rem;font-weight:400;color:#393d46}.benefit-container .benefit .tl[data-v-2cf800e4]{margin-right:.13333rem}.benefit-container .benefit .tr[data-v-2cf800e4]{margin-left:.13333rem}.benefit-container .benefit .transform-z180[data-v-2cf800e4]{transform:rotate(180deg)}.benefit-container .benefit .slider[data-v-2cf800e4]{display:flex;align-items:center;margin-top:.4rem}.benefit-container .benefit .slider .opt[data-v-2cf800e4]{color:var(--van-primary-color);font-size:.53333rem}.benefit-container .benefit .slider .lf[data-v-2cf800e4]{margin-right:.66667rem;display:flex;align-items:center}.benefit-container .benefit .slider .rg[data-v-2cf800e4]{margin-left:.66667rem}.benefit-container .benefit .slider .custom-button[data-v-2cf800e4]{width:1.38667rem;height:.61333rem;background:var(--van-primary-color, var(--zaui-brand));box-shadow:0 .02667rem .08rem rgba(0,0,0,.1);border-radius:.37333rem;border:.06667rem solid var(--van-primary-color-light05);font-size:.32rem;font-weight:600;color:#fff;text-align:center}.benefit-container .benefit .slider-dec[data-v-2cf800e4]{font-size:.32rem;font-weight:400;color:#99a9c0;text-align:center;margin:.26667rem 0 .53333rem}.benefit-container .benefit .btn-two[data-v-2cf800e4]{display:flex;padding:.26667rem 0;justify-content:center}.benefit-container .benefit .btn-two .btn[data-v-2cf800e4]{max-width:7.46667rem;height:.8rem;margin-right:.13333rem}.benefit-container .benefit .btn-two .btn[data-v-2cf800e4] .van-button__text{font-size:.29333rem}.trial-button[data-v-66310a28]{padding:.4rem;text-align:right;background-color:#fff}.com-body[data-v-66310a28]{height:100%}.com-body .header[data-v-66310a28]{padding:0 .4rem;display:flex;justify-content:space-between;border:none;height:1.46667rem;font-size:.48rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#333;line-height:.53333rem;align-items:center;border-bottom:1px solid #eeeeee}.com-body .header i[data-v-66310a28]{font-size:.53333rem}.com-body .header span[data-v-66310a28]{width:8rem;text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.com-body .container[data-v-66310a28]{padding:0 .4rem;overflow-y:scroll}.com-body .container .empty[data-v-66310a28]{width:100%;height:2.4rem}.com-body .container[data-v-66310a28]::-webkit-scrollbar{display:none}.com-body .container[data-v-66310a28] .risk-select-field{display:inline-flex;padding:0;align-items:center}.com-body .container[data-v-66310a28] .risk-select-field :deep(.van-field__label){color:#000}.com-body .container[data-v-66310a28] .com-pro-field,.com-body .container[data-v-66310a28] .com-van-field{padding-left:0;padding-right:0}.com-body .container[data-v-66310a28] .com-pro-field:after,.com-body .container[data-v-66310a28] .com-van-field:after{left:0;right:0}\n",document.head.appendChild(e),System.register(["./index-legacy-4dcffa94.js","./ProAddress.vue_vue_type_style_index_0_scoped_true_lang-legacy-c25a2af7.js","./index-legacy-30815648.js","./index-legacy-be724e42.js","./index-legacy-9afd966b.js","./index-legacy-80668c24.js","./trial-legacy-cb11a97d.js","./TrialButton-legacy-e71984cc.js","./index-legacy-d44a591a.js","./box-title-legacy-5ed484c4.js","./index-legacy-764dd15a.js","./Table-legacy-7c073b05.js","./pdfh5-legacy-9f98dc45.js","./cloneDeep-legacy-06534257.js","./keysIn-legacy-e771016d.js","./isObjectLike-legacy-c9ae9091.js","./index-legacy-3c0adb45.js","./empty-legacy-7d56bad5.js","./echarts-legacy-dec3ace5.js"],(function(e){"use strict";var i,t,a,n,o,r,l,s,d,c,u,m,f,p,v,g,k,b,y,h,I,V,O,x,C,R,w,L,S,_,P,T,F,j,D,z,E,M,N,A,q,U,B,H,W,K,$,G,J,X,Y;return{setters:[function(e){i=e._,t=e.d,a=e.a,n=e.r,o=e.J,r=e.E,l=e.cd,s=e.an,d=e.c,c=e.h,u=e.f,m=e.g,f=e.F,p=e.i,v=e.e,g=e.aE,k=e.G,b=e.w,y=e.k,h=e.y,I=e.A,V=e.j,O=e.n,x=e.t,C=e.a4,R=e.bB,w=e.a7,L=e.V,S=e.B,_=e.bE,P=e.bF,T=e.X,F=e.Y,j=e.cE,D=e.b4,z=e.a8},function(e){E=e.l},function(){},function(e){M=e.I,N=e.P},function(e){A=e.c,q=e.t,U=e._},function(e){B=e.S},function(e){H=e.p,W=e.f},function(e){K=e._},function(e){$=e._},function(e){G=e.S,J=e._},function(e){X=e._},function(e){Y=e.T},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const Z=t({__name:"PersonalInfo",props:{productFactor:{default:()=>({})},modelValue:{default:()=>({})}},emits:["update:modelValue","trailChange"],setup(e,{expose:i,emit:t}){const g=e,{query:{insurerCode:k}={}}=a(),b=n(null),y=n(null),h=o({validated:!1,holder:{personVO:{},schema:[],trialFactorCodes:[],config:{occupation:{dictCode:A(k)}}},insured:{schema:[],trialFactorCodes:[],config:{occupation:{dictCode:A(k)}},insuredVOList:[{personVO:{}}]}}),I=r((()=>l(h.holder.schema)!==l(h.insured.schema))),V=()=>{var e,i;const t=null===(e=y.value)||void 0===e?void 0:e.map((e=>null==e?void 0:e.validate()));return Promise.all([null===(i=b.value)||void 0===i?void 0:i.validate(),...t])};return s((()=>g.productFactor),(()=>{const[e,i]=q(g.productFactor,!0);Object.assign(h.holder,e),Object.assign(h.insured,i)}),{deep:!0,immediate:!0}),s([()=>h.holder.personVO,()=>h.insured.insuredVOList],(()=>{const e={holder:h.holder.personVO,insuredVOList:h.insured.insuredVOList};t("update:modelValue",e),(()=>{const e=!!l(h.holder.trialFactorCodes)&&h.holder.trialFactorCodes.some((e=>{const i=h.holder.personVO[e];return E.exports.isNil(i)||""===i})),i=!!l(h.insured.trialFactorCodes)&&h.insured.trialFactorCodes.some((e=>h.insured.insuredVOList.some((i=>{const t=i.personVO[e];return E.exports.isNil(t)||""===t}))));return e||i})()||V().then((()=>{h.validated=!0,t("trailChange",e)})).catch((()=>{h.validated=!1}))}),{deep:!0}),i({validate:V}),(e,i)=>(d(),c(f,null,[u(m(U),{ref_key:"holderInfoRef",ref:b,title:m(I)?"":"投保人信息",class:"trail-personal-info",model:m(h).holder.personVO,schema:m(h).holder.schema,config:m(h).holder.config},null,8,["title","model","schema","config"]),(d(!0),c(f,null,p(m(h).insured.insuredVOList,((e,i)=>(d(),v(m(U),{ref_for:!0,ref_key:"insuredFormRef",ref:y,key:i,class:"trail-personal-info",title:m(I)?"":"被保人信息",model:e.personVO,schema:m(h).insured.schema,config:m(h).insured.config},null,8,["title","model","schema","config"])))),128))],64))}});var Q=i(Z,[["__scopeId","data-v-a2c06736"]]);const ee={key:0},ie={key:0,class:"risk2-field"},te=t({__name:"index",props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:""})},showMainRisk:{type:Boolean,default:()=>!0}},emits:["trialChange"],setup(e,{emit:i}){const t=e;console.log("pop data source = ",t.dataSource);const a=o({loading:!1,show:!0,select:{},list:[],userData:{},riskIsInsure:{},submitData:{},disabledRiskInfo:[]}),n=e=>{const i=[];return e.riskLiabilityInfoVOList.map((e=>(1!=+e.showFlag&&i.push({...e}),[]))),i},r=(e,n)=>{a.riskIsInsure[n].data=e;const o=[...a.disabledRiskInfo];t.dataSource.insureProductRiskVOList.forEach((e=>{if(1!==e.mainRiskFlag){const i=a.riskIsInsure[e.riskId];i.data&&Object.keys(i.data).length>0&&!i.isDisabled&&o.push(i.data)}})),i("trialChange",o)};return g((()=>{(()=>{a.riskIsInsure={},a.disabledRiskInfo=[];let e=null;t.dataSource.insureProductRiskVOList.forEach((i=>{const n=1!==i.mainRiskFlag?t.dataSource.productRiskRelationVOList.find((e=>e.collocationRiskId===i.riskId)):{};1===i.mainRiskFlag&&(e=i),a.riskIsInsure[i.riskId]={selected:"2",data:null,relation:n,isMust:!1}})),e&&t.dataSource.productRiskRelationVOList.filter((i=>i.riskId===e.riskId)).forEach((e=>{if(2===e.collocationType){a.riskIsInsure[e.collocationRiskId].selected="1",a.riskIsInsure[e.collocationRiskId].isMust=!0;const v=t.dataSource.insureProductRiskVOList.find((i=>e.collocationRiskId===i.riskId));if(v&&1!==v.factorDisPlayFlag&&v.riskLiabilityInfoVOList.every((e=>1!==e.showFlag))){var i,o,r;a.riskIsInsure[e.collocationRiskId].isDisabled=!0;const t={riskCategory:v.riskCategory,riskCode:v.riskCode,riskName:v.riskName,riskId:v.riskId,riskType:v.riskType,mainRiskId:v.mainRiskId,mainRiskCode:v.mainRiskCode,liabilityVOList:n(v)};t.chargePeriod=(null==v||null===(i=v.paymentPeriodValueList)||void 0===i?void 0:i.length)>0&&(null==v?void 0:v.paymentPeriodValueList[0].code),t.coveragePeriod=(null==v||null===(o=v.insurancePeriodValueList)||void 0===o?void 0:o.length)>0&&(null==v?void 0:v.insurancePeriodValueList[0].code),t.paymentFrequency=(null==v||null===(r=v.paymentFrequencyList)||void 0===r?void 0:r.length)>0&&(null==v?void 0:v.paymentFrequencyList[0].code);let g=0;var l,s;if(1===v.amountPremiumConfigVO.displayType)g=(null==v||null===(l=v.amountPremiumConfigVO)||void 0===l?void 0:l.minStepValue)>0?null==v||null===(s=v.amountPremiumConfigVO)||void 0===s?void 0:s.minStepValue:0;else if(3===v.amountPremiumConfigVO.displayType&&2===v.amountPremiumConfigVO.requireCopies){var d,c,u;g=(null==v||null===(d=v.amountPremiumConfigVO)||void 0===d||null===(c=d.displayValues)||void 0===c?void 0:c.length)>0?null==v||null===(u=v.amountPremiumConfigVO)||void 0===u?void 0:u.displayValues[0].value:0}else if(3===v.amountPremiumConfigVO.displayType&&1===v.amountPremiumConfigVO.requireCopies){var m,f,p;g=(null==v||null===(m=v.amountPremiumConfigVO)||void 0===m||null===(f=m.displayValues)||void 0===f?void 0:f.length)>0?null==v||null===(p=v.amountPremiumConfigVO)||void 0===p?void 0:p.displayValues[0].value:0,t.copy=v.amountPremiumConfigVO.minCopiesValue}else 2===v.amountPremiumConfigVO.displayType&&(t.copy=v.amountPremiumConfigVO.minCopiesValue);1===v.amountPremiumConfigVO.saleMethod?t.amount=g:t.premium=g,a.disabledRiskInfo.push(t)}}3===e.collocationType&&(a.riskIsInsure[e.collocationRiskId].selected="2",a.riskIsInsure[e.collocationRiskId].isMust=!0)}))})()})),k((()=>{a.loading=!0})),s((()=>a.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(i,n)=>{const o=B,l=h;return d(!0),c(f,null,p(e.dataSource.insureProductRiskVOList,(i=>(d(),c(f,{key:i.riskCode},[(!e.showMainRisk&&1!==i.mainRiskFlag||e.showMainRisk)&&m(a).riskIsInsure[i.riskId].relation?(d(),c("div",ee,[u(l,{modelValue:m(a).riskIsInsure[i.riskId].selected,"onUpdate:modelValue":e=>m(a).riskIsInsure[i.riskId].selected=e,label:i.riskName,name:"selected","label-width":"50%",border:!1,class:"risk-select-field risk-name"},{input:b((()=>[u(o,{modelValue:m(a).riskIsInsure[i.riskId].selected,"onUpdate:modelValue":e=>m(a).riskIsInsure[i.riskId].selected=e,"active-value":"1","inactive-value":"2",size:"26px",disabled:m(a).riskIsInsure[i.riskId].isMust,style:{"margin-right":"8px"},onChange:e=>{return n=e,o=i,t.dataSource.productRiskRelationVOList.forEach((e=>{1!==e.collocationType&&(o.riskId===e.riskId?(a.riskIsInsure[o.riskId]&&a.riskIsInsure[o.riskId].selected,2===e.collocationType&&a.riskIsInsure[e.collocationRiskId]&&(a.riskIsInsure[e.collocationRiskId].selected=n),3===e.collocationType&&a.riskIsInsure[e.collocationRiskId]&&(a.riskIsInsure[e.collocationRiskId].selected="1"===n?"2":"1")):o.riskId===e.collocationRiskId&&(3===e.collocationType&&a.riskIsInsure[e.riskId]&&(a.riskIsInsure[e.riskId].selected="1"===n?"2":"1"),2===e.collocationType&&a.riskIsInsure[e.riskId]&&(a.riskIsInsure[e.riskId].selected=n)))})),"2"===n&&r({},o.riskId),void console.log(a.riskIsInsure);var n,o}},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"]),"1"===m(a).riskIsInsure[i.riskId].selected?(d(),c("div",ie,[u(M,{modelValue:m(a).riskIsInsure[i.riskId].data,"onUpdate:modelValue":e=>m(a).riskIsInsure[i.riskId].data=e,"origin-data":i,"product-factor":e.dataSource.productFactor,onTrialChange:e=>r(e,i.riskId)},null,8,["modelValue","onUpdate:modelValue","origin-data","product-factor","onTrialChange"])])):y("",!0)])):y("",!0)],64)))),128)}}});var ae=i(te,[["__scopeId","data-v-6d26f650"]]);const ne={class:"benefit-table"},oe=t({__name:"Table",props:{dataSource:null},setup(e){const i=e,t=r((()=>{const e=i.dataSource.headers.length,t=12*i.dataSource.headers.join("").length+20*i.dataSource.headers.length;return i.dataSource.headers.map(((i,a)=>{const n=t>320?12*i.length+20:Math.max(12*i.length+20,320/e);return console.log("totalWordWidth:",t,"titleWidth:",n,"word-width:",12*i.length+20),{title:i,key:`header_${a}`,fixed:a<2,minWidth:n}}))})),a=r((()=>i.dataSource.dataList.map((e=>{const i={};return e.forEach(((e,t)=>{i[`header_${t}`]=e})),i}))));return k((()=>{})),(e,i)=>(d(),c("div",ne,[u(Y,{"top-height":400,columns:m(t),data:m(a),"is-clone":!0},null,8,["columns","data"])]))}});const re=e=>(T("data-v-2cf800e4"),e=e(),F(),e),le={key:0,class:"benefit-container"},se={key:0,class:"benefit"},de=re((()=>V("div",{class:"line"},null,-1))),ce={class:"box-title box-title-chart"},ue=re((()=>V("img",{class:"tl",src:J,alt:""},null,-1))),me=re((()=>V("img",{class:"transform-z180 tr",src:J,alt:""},null,-1))),fe={key:0},pe={class:"box"},ve={class:"box-title"},ge=re((()=>V("img",{class:"tl",src:J,alt:""},null,-1))),ke=re((()=>V("img",{class:"transform-z180 tr",src:J,alt:""},null,-1))),be={class:"box-price"},ye={class:"text1"},he={class:"text2"},Ie={key:1},Ve={key:2,style:{width:"100%, minWidth: 338px"}},Oe={class:"slider"},xe={style:{flex:"1",margin:"0px 5px"}},Ce={class:"custom-button"},Re=re((()=>V("p",{class:"slider-dec"},"拖动按钮查看不同年龄保障",-1))),we={class:"btn-two"},Le={key:1};var Se=i(t({__name:"index",props:{dataSource:{default:()=>({showTypeList:["1"]})}},setup(e){var i;const t=e,a="1",o="2",r="3",l=n(0),g=n(0),k=n(0),h=n(),T=n(0),F=n(null===(i=t.dataSource.showTypeList)||void 0===i?void 0:i[0]),j=n(),D=e=>{if(null==e||!e.benefitRiskResultVOList)return;const i=null==e?void 0:e.benefitRiskResultVOList[l.value];g.value=i.ageBegin+1,T.value=i.ageBegin+1,k.value=i.ageEnd},z=()=>{var e,i,a,n,o,r;const s=null===(e=t.dataSource)||void 0===e||null===(i=e.benefitRiskResultVOList)||void 0===i?void 0:i[l.value];j.value=null===(a=t.dataSource)||void 0===a||null===(n=a.benefitRiskResultVOList)||void 0===n||null===(o=n[l.value].benefitRiskTableResultVOList)||void 0===o?void 0:o[0];const{a:d,year:c}=((e,i)=>{const t=[],a=[];for(let n=e,o=0;n<=i;n++,o++)t.push(n.toString()),a.push(o+1);return{a:t,year:a}})(g.value,k.value),u={index:d.indexOf(T.value.toString()),age:d,year:c,result:null==s||null===(r=s.benefitRiskItemResultVOList)||void 0===r?void 0:r[0]};h.value=u},E=()=>{T.value>k.value-1||(T.value+=1,z())},M=()=>{T.value>g.value&&(T.value-=1,z())},N=e=>{l.value=e.name,D(t.dataSource),z()};return s((()=>t.dataSource),(e=>{var i;e&&(D(e),z(),F.value=null===(i=e.showTypeList)||void 0===i?void 0:i[0])}),{deep:!0,immediate:!0}),s(T,(()=>{z()})),(i,n)=>{var s;const D=L,z=G,A=S,q=_,U=P,B=$;return null!==(s=e.dataSource)&&void 0!==s&&s.benefitRiskResultVOList?(d(),c("div",le,[u(U,{active:m(l),onClickTab:N},{default:b((()=>{var e;return[(d(!0),c(f,null,p(null===(e=t.dataSource)||void 0===e?void 0:e.benefitRiskResultVOList,((e,i)=>(d(),v(q,{key:i,name:i,title:e.riskName},{default:b((()=>{var e,s,L,S,_,P,N,q,U,B,H,W,K,$,G,J;return[i==m(l)?(d(),c("div",se,[de,I(V("p",ce,[ue,O(" 保单年度"),V("span",null,x(null===(e=m(h))||void 0===e||null===(s=e.year)||void 0===s?void 0:s[null===(L=m(h))||void 0===L?void 0:L.index]),1),O("年度，被保人"),V("span",null,x(null===(S=m(h))||void 0===S||null===(_=S.age)||void 0===_?void 0:_[null===(P=m(h))||void 0===P?void 0:P.index]),1),O("岁时 "),me],512),[[C,m(F)===o]]),m(F)===a?(d(),c("div",fe,[V("div",pe,[V("p",ve,[ge,O(" 保单年度"),V("span",null,x(null===(N=m(h))||void 0===N||null===(q=N.year)||void 0===q?void 0:q[null===(U=m(h))||void 0===U?void 0:U.index]),1),O("年度，被保人"),V("span",null,x(null===(B=m(h))||void 0===B||null===(H=B.age)||void 0===H?void 0:H[null===(W=m(h))||void 0===W?void 0:W.index]),1),O("岁时 "),ke]),V("div",be,[(d(!0),c(f,null,p(null===(K=m(h))||void 0===K||null===($=K.result)||void 0===$?void 0:$.headers,((e,i)=>{var t,a,n,o,r,l,s,u,f,p;return d(),c("div",{key:i,style:{width:"33%"}},[V("p",ye,x("0"==(null===(t=m(h))||void 0===t||null===(a=t.result)||void 0===a||null===(n=a.dataList)||void 0===n||null===(o=n[null===(r=m(h))||void 0===r?void 0:r.index])||void 0===o?void 0:o[i])?"0":m(R)(Number(null===(l=m(h))||void 0===l||null===(s=l.result)||void 0===s||null===(u=s.dataList)||void 0===u||null===(f=u[null===(p=m(h))||void 0===p?void 0:p.index])||void 0===f?void 0:f[i]))),1),V("p",he,x(e)+"(元）",1)])})),128))])])])):y("",!0),m(F)===r?(d(),c("div",Ie,[u(oe,{"data-source":m(j)},null,8,["data-source"])])):y("",!0),m(F)==o?(d(),c("div",Ve,[u(X,{min:m(g),max:m(k),current:m(T),data:null===(G=m(h))||void 0===G||null===(J=G.result)||void 0===J?void 0:J.benefitRiskItemList},null,8,["min","max","current","data"])])):y("",!0),m(F)!=r?(d(),c(f,{key:3},[V("div",Oe,[V("div",{class:"opt lf",onClick:M},[u(D,{name:"minus"})]),V("div",xe,[m(g)?(d(),v(z,{key:0,modelValue:m(T),"onUpdate:modelValue":n[0]||(n[0]=e=>w(T)?T.value=e:null),min:m(g),max:m(k),"bar-height":"8px"},{button:b((()=>[V("div",Ce,x(m(T))+" 岁",1)])),_:1},8,["modelValue","min","max"])):y("",!0)]),V("div",{class:"opt rg",onClick:E},[u(D,{name:"plus"})])]),Re],64)):y("",!0),V("div",we,[t.dataSource.showTypeList.includes(a)?(d(),v(A,{key:0,round:"",plain:m(F)!==a,type:"primary",class:"btn",onClick:n[1]||(n[1]=e=>F.value=a)},{default:b((()=>[O("图表展示")])),_:1},8,["plain"])):y("",!0),t.dataSource.showTypeList.includes(o)?(d(),v(A,{key:1,round:"",plain:m(F)!==o,type:"primary",class:"btn",onClick:n[2]||(n[2]=e=>F.value=o)},{default:b((()=>[O("趋势展示")])),_:1},8,["plain"])):y("",!0),t.dataSource.showTypeList.includes(r)?(d(),v(A,{key:2,round:"",plain:m(F)!==r,type:"primary",class:"btn",onClick:n[3]||(n[3]=e=>F.value=r)},{default:b((()=>[O("表格展示")])),_:1},8,["plain"])):y("",!0)])])):y("",!0)]})),_:2},1032,["name","title"])))),128))]})),_:1},8,["active"])])):(d(),c("div",Le,[u(B,{title:"试算前请完善投保信息","empty-class":"empty-select"})]))}}}),[["__scopeId","data-v-2cf800e4"]]);const _e=e=>(T("data-v-66310a28"),e=e(),F(),e),Pe={class:"trial-button"},Te={class:"com-body"},Fe={class:"header"},je=_e((()=>V("span",null,"算一算保费",-1))),De={class:"container"},ze=_e((()=>V("div",{class:"empty"},null,-1))),Ee=t({__name:"index",props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:"",insurerCode:"",tenantId:""})},tenantProductDetail:{type:Object,default:()=>{}}},setup(e,{expose:i}){const t=e,a=n(null);console.log("pop data source = ",t.dataSource);const r=o({loading:!1,show:!1,select:{},list:[],userData:{},riskIsInsure:{},submitData:{},riskVOList:[{}],mainRiskVO:{},ifPersonalInfoSuccess:!1,trialMsg:"",trialResult:0,isAniShow:!1}),l=()=>{var e;null===(e=a.value)||void 0===e||e.validate().then((()=>{console.log("---- validate success ----")})),r.loading=!1,r.show=!0,r.isAniShow=!0},p=()=>{r.show=!1,r.loading=!1},h=n({});n({tenantId:"9991000007",productCode:"BDFZCHUN",holder:{personVO:{extInfo:{},certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456"}},insuredVOList:[{insuredCode:"",relationToHolder:"1",personVO:{extInfo:{hasSocialInsurance:"1"},relationToHolder:"1",certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456",socialFlag:"1"},productPlanVOList:[{insurerCode:"zhongan",planCode:"",riskVOList:[{amount:"6000000",chargePeriod:"year_5",copy:1,coveragePeriod:"to_68",paymentFrequency:"2",riskCategory:4,riskCode:"CBE00CHUN",riskName:"(勿动)利益演示测试",riskId:10325,riskType:1}]}]}]});const I=()=>{var e,i;r.riskIsInsure={},null==t||null===(e=t.dataSource)||void 0===e||null===(i=e.insureProductRiskVOList)||void 0===i||i.forEach((e=>{const i=t.dataSource.productRiskRelationVOList.find((i=>i.collocationRiskId===e.riskId));r.riskIsInsure[e.riskCode]={selected:"2",data:null,relation:i}}))},x=E.exports.debounce((()=>{r.ifPersonalInfoSuccess&&(r.submitData.productCode=t.productInfo.productCode,r.submitData.tenantId=t.productInfo.tenantId,r.riskVOList=r.riskVOList.map((e=>(e=>{const i=t.dataSource.insureProductRiskVOList.find((i=>e.riskId===i.riskId));if(i&&1!==i.mainRiskFlag){var a,n;const o=null===(a=t.dataSource)||void 0===a||null===(n=a.productRiskRelationVOList)||void 0===n?void 0:n.find((e=>e.collocationRiskId===i.riskId));if(o){const t=r.riskVOList.find((e=>e.riskId===o.riskId));N.forEach((a=>{a.ruleKey&&i.productRiskInsureLimitVO&&1===i.productRiskInsureLimitVO[a.ruleKey]&&t&&(e[a.valueKey]=t[a.valueKey])}))}}return e})(e))),r.submitData.insuredVOList[0].productPlanVOList=[{insurerCode:t.productInfo.insurerCode,planCode:t.dataSource.planCode,riskVOList:r.riskVOList}],console.log(">>>数据构建<<<",r.submitData),r.trialMsg="试算中...",r.trialResult=0,r.loading=!0,H(r.submitData).then((e=>{e.data&&e.code===j&&(r.trialMsg="",r.trialResult=e.data.premium)})).finally((()=>{r.loading=!1})),W(r.submitData).then((e=>{e.data&&e.code===j&&(h.value=e.data)})).finally((()=>{r.loading=!1})))}),300),C=e=>{const{holder:i,insuredVOList:t}=e;i&&(r.submitData.holder={personVO:i}),t&&t.length>0&&t.forEach(((e,i)=>{r.submitData.insuredVOList&&r.submitData.insuredVOList.length>i?r.submitData.insuredVOList[i].personVO=e.personVO:r.submitData.insuredVOList=[{personVO:e.personVO}]})),r.ifPersonalInfoSuccess=!0,console.log("投被保人的信息回传 ",r.submitData,e),x()},R=e=>{r.mainRiskVO=e,r.riskVOList.length>0&&(r.riskVOList[0]=e),console.log("标准险种的信息回传",e),x()},w=e=>{r.riskVOList=[r.mainRiskVO,...e],console.log("附加险列表数据回传",e),x()},L=()=>{console.log("--after"),r.isAniShow=!1};return g((()=>{I()})),k((()=>{r.loading=!0})),s((()=>r.show),(e=>{e&&I()})),i({open:()=>{r.show=!0,r.isAniShow=!0}}),s((()=>r.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(i,n)=>{const o=S,s=D,g=z;return d(),c(f,null,[V("div",Pe,[u(o,{type:"primary",onClick:n[0]||(n[0]=e=>m(r).show=!0)},{default:b((()=>[O("立即投保")])),_:1})]),m(r).isAniShow||m(r).show?(d(),v(g,{key:0,class:"com-trial-wrap",show:m(r).show,closeable:!1,onClose:p,onClosed:L},{default:b((()=>[V("div",Te,[V("div",Fe,[je,u(s,{name:"cross",onClick:n[1]||(n[1]=e=>m(r).show=!1)})]),V("div",De,[u(Se,{"data-source":h.value,"show-type-list":h.value.showTypList},null,8,["data-source","show-type-list"]),e.dataSource.productFactor?(d(),v(m(Q),{key:0,ref:"personalInfoRef",modelValue:m(r).userData,"onUpdate:modelValue":n[2]||(n[2]=e=>m(r).userData=e),"product-factor":e.dataSource.productFactor,onTrailChange:C},null,8,["modelValue","product-factor"])):y("",!0),u(M,{ref_key:"insureInfosRef",ref:a,"origin-data":e.dataSource.insureProductRiskVOList[0],"product-factor":e.dataSource.productFactor,onTrialChange:R},null,8,["origin-data","product-factor"]),u(ae,{"data-source":e.dataSource,"show-main-risk":!1,onTrialChange:w},null,8,["data-source"]),ze]),u(K,{"is-share":!1,premium:m(r).trialResult,"loading-text":m(r).trialMsg,"plan-code":t.dataSource.planCode,"payment-frequency":m(r).mainRiskVO.paymentFrequency+"","tenant-product-detail":e.tenantProductDetail,onClick:l},{default:b((()=>[O("立即投保")])),_:1},8,["premium","loading-text","plan-code","payment-frequency","tenant-product-detail"])])])),_:1},8,["show"])):y("",!0)],64)}}});e("default",i(Ee,[["__scopeId","data-v-66310a28"]]))}}}))}();

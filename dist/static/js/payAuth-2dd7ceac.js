import{_ as e,d as a,i as l,h as d,j as s,k as o,ah as n,l as t,o as r,c,a as u,b as i,e as m,u as v,p,w as h,f as b,v as y,d1 as f,bi as k,y as w,d2 as V,T as g,cS as C,bL as I,cC as q,cD as x,b3 as N,bo as T,bp as B,d3 as _,d4 as U}from"./index-d6f6d527.js";import{g as j}from"./trial-57d9822d.js";const z={class:"page-pay-auth-wrap"},A={class:"header"},L={class:"content"},R={class:"bank-card"},W={class:"card-content"},D={class:"main"},E={class:"bank-name"},K={class:"bank-no"},O={class:"bank-card-type"},P=(e=>(T("data-v-ac855410"),e=e(),B(),e))((()=>u("p",{class:"desc"},"实时单笔限额5W 实时单日限额5W",-1))),S={class:"footer-button"},F=a({name:"payAuth"});var G=e(a({...F,setup(e){const a=l(),T=d(),{orderNo:B,tenantId:F}=a.query,G=s(),H=s(),J=s({}),M=s(!1),Q=o((()=>H.value.holder.certType===n.CERT?"身份证号":"证件号")),X=(e,l)=>{f(H.value).then((({code:e,data:d})=>{"10000"===e?null==l||l():k.confirm({confirmButtonText:"银行卡修改",message:"当前暂不支持该银行，建议更换银行卡"}).then((()=>{T.push({path:w.updateBankInfo,query:a.query})}))}))},Y=async(e,a)=>{const{code:l}=await V(H.value);return"10000"===l&&(g("短信验证成功"),null==a||a(),!0)},Z=()=>{M.value=!0,G.value.validate().then((e=>{T.back(),M.value=!1})).catch((e=>{M.value=!1,console.log("e",e)}))},$=s(),ee=async()=>{await j({orderNo:B,tenantId:F}).then((({code:e,data:a})=>{"10000"===e&&(H.value=a,J.value=a.tenantOrderPayInfoList.find((e=>1===e.payInfoType)),(async e=>{var a;const l=await _(U("BANK"))||[];$.value=null==(a=l.find((a=>a.code===e)))?void 0:a.name})(J.value.payBank))}))};t((()=>{ee()}));const ae=s();return t((()=>{setTimeout((async()=>{ae.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const l=C,d=I,s=q,o=x,n=N;return r(),c("div",z,[u("div",A,[i(l,{type:"warning",content:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。"})]),u("div",L,[u("div",R,[u("div",W,[u("div",D,[u("span",E,m(v($)),1),u("span",K,m(v(J).bankCardNo),1)]),u("p",O,m(v(J).bankCardType||"储蓄卡"),1),P])]),v(H)?(r(),p(o,{key:0,ref_key:"formRef",ref:G,model:v(H).holder},{default:h((()=>[i(d,{modelValue:v(H).holder.name,"onUpdate:modelValue":a[0]||(a[0]=e=>v(H).holder.name=e),label:"姓名",name:"name",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),i(d,{modelValue:v(H).holder.certNo,"onUpdate:modelValue":a[1]||(a[1]=e=>v(H).holder.certNo=e),label:v(Q),name:"certNo",maxlength:"18","is-view":"",required:""},null,8,["modelValue","label"]),i(d,{modelValue:v(H).holder.mobile,"onUpdate:modelValue":a[2]||(a[2]=e=>v(H).holder.mobile=e),label:"银行预留手机",name:"mobile",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),i(s,{modelValue:v(H).holder.verifyCode,"onUpdate:modelValue":a[3]||(a[3]=e=>v(H).holder.verifyCode=e),label:"验证码",maxlength:"6",name:"verifyCode","related-name":"mobile","send-s-m-s-code":X,"check-s-m-s-code":Y,required:""},null,8,["modelValue"])])),_:1},8,["model"])):b("",!0)]),u("div",S,[i(n,{type:"primary",disabled:v(M),onClick:Z},{default:h((()=>[y("提交")])),_:1},8,["disabled"])])])}}}),[["__scopeId","data-v-ac855410"]]);export{G as default};

var $e=Object.defineProperty,He=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var _e=(r,m,o)=>m in r?$e(r,m,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[m]=o,M=(r,m)=>{for(var o in m||(m={}))qe.call(m,o)&&_e(r,o,m[o]);if(pe)for(var o of pe(m))Ye.call(m,o)&&_e(r,o,m[o]);return r},$=(r,m)=>He(r,Re(m));import{g as X,Q as ye,E as P,y as W,j as v,n as F,z as c,J as S,p as s,L as Fe,A as t,B as Ke,a4 as we,a5 as Ee,F as U,G as H,k as R,C as q,t as j,M as Ce,_ as re,r as k,m as y,a9 as ze,O as Je,h as We,af as je,H as Ge,T as Qe,l as Xe}from"./vendor-667a94d7.js";import{_ as Z,u as Ze,q as Ve,a2 as oe,x as ae,l as ne,y as he,G as et,z as tt,Q as ve,A as ot,a3 as De}from"./index-d1b6875c.js";import{m as at,P as nt}from"./modal-bg-82dd49c0.js";import{P as lt}from"./index-f25152cc.js";import{p as Ie,i as st,s as rt,a as ut,u as it,b as dt}from"./trial-1ddcd031.js";import{p as ct}from"./product-ec4495ba.js";import{a as le}from"./order-b675ac95.js";import{a as ue,S as ge,R as mt,f as se}from"./infoCollection-242da9b6.js";import{A as ft}from"./bankCard-b0679059.js";import{a as ie,v as pt}from"./validator-c950a803.js";import{g as _t,l as ht,b as be,t as vt,a as Dt}from"./logo-6462268c.js";import"./trial-3714344b.js";const It=r=>(we("data-v-47f4f4ca"),r=r(),Ee(),r),gt={class:"com-question-item"},bt={class:"question"},yt=It(()=>c("div",{class:"icon"},S("?"),-1)),Ft={class:"title"},wt=X({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(r){const[m,o]=ye(!1),w=P(),e=()=>{o()},T=W(()=>m.value?Ze(w.value):0);return(Y,x)=>(v(),F("div",gt,[c("div",bt,[yt,c("div",Ft,S(r.question),1),s(Ve,{name:"down",class:Fe(["arrow-icon",{show:t(m)}]),onClick:e},null,8,["class"])]),c("div",{ref_key:"answerDom",ref:w,class:"answer",style:Ke({height:`${t(T)}px`})},S(r.answer),5)]))}});var Et=Z(wt,[["__scopeId","data-v-47f4f4ca"]]);const Ct={class:"com-question"},Vt=X({props:{list:{type:Array,default:()=>[]}},setup(r){const m=r,[o,w]=ye(!1),e=()=>{w()},T=W(()=>m.list.length<=4||o.value?m.list:m.list.slice(0,4));return(Y,x)=>(v(),F("div",Ct,[(v(!0),F(U,null,H(t(T),(L,K)=>(v(),R(Et,{key:K,question:L.title,answer:L.desc},null,8,["question","answer"]))),128)),r.list.length>4?(v(),F("div",{key:0,class:"show-more",onClick:e},[q(S(t(o)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),s(Ve,{name:"down",class:Fe(["icon",{showMore:t(o)}])},null,8,["class"])])):j("",!0)]))}});var Bt=Z(Vt,[["__scopeId","data-v-40dd0994"]]);const de=r=>(we("data-v-acb6e144"),r=r(),Ee(),r),Pt=de(()=>c("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),Ot=de(()=>c("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),Tt=de(()=>c("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),Nt={class:"attachment-list"},At={class:"product-attachment-list"},St=q(" \u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),xt={key:0,class:"dun-hao"},Lt={class:"rate-attachment-list"},kt=q(" *\u4FDD\u8D39\u4E0E\u88AB\u4FDD\u4EBA\u5E74\u9F84\u3001\u533B\u4FDD\u60C5\u51B5\u76F8\u5173\uFF0C\u8BE6\u89C1 "),Ut={key:0,class:"dun-hao"},Mt=X({props:{disable:{type:Boolean,default:!1},holderDisable:{type:Boolean,default:!1},paymentMethodDisable:{type:Boolean,default:!1},premium:{default:0},productDetail:{default:{}},formInfo:{default:()=>({})}},setup(r,{expose:m}){const o=r,w=P({}),e=Ce({insureDisable:!0,formInfo:o.formInfo}),T=D=>ie(D)?!0:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u59D3\u540D",Y=W(()=>{var D,a;return(a=(D=o.productDetail)==null?void 0:D.tenantProductInsureVO)==null?void 0:a.attachmentVOList.filter(I=>I.attachmentName==="\u8D39\u7387\u8868")}),x=W(()=>{var D,a;return((a=(D=o.productDetail)==null?void 0:D.tenantProductInsureVO)==null?void 0:a.attachmentVOList.filter(I=>I.attachmentName!=="\u8D39\u7387\u8868"))||[]}),L=()=>new Promise((D,a)=>{w==null||w.value.validate().then(()=>{D("")},()=>{a()})}),K=()=>{o.disable||(e.formInfo.renewalDK=!e.formInfo.renewalDK)};return re(()=>e.formInfo.insured.relationToHolder,(D,a)=>{o.disable||D!==a&&(D.toString()===ue.SELF?(e.formInfo.insured={certNo:e.formInfo.holder.certNo,name:e.formInfo.holder.name,socialFlag:e.formInfo.holder.socialFlag,relationToHolder:D},e.insureDisable=!0):(e.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:D},e.insureDisable=!1))}),re(()=>e.formInfo.holder,()=>{e.formInfo.insured.relationToHolder===ue.SELF&&Object.assign(e.formInfo.insured,e.formInfo.holder)},{deep:!0,immediate:!0}),m({validateForm:L}),(D,a)=>{const I=k("ProField"),z=k("ProRadioButton"),V=k("ProPicker"),ee=k("ProTabButton"),J=k("ProPDFviewer"),G=k("ProForm");return v(),R(G,{ref_key:"formRef",ref:w},{default:y(()=>[c("div",null,[Pt,s(I,{modelValue:t(e).formInfo.holder.name,"onUpdate:modelValue":a[0]||(a[0]=n=>t(e).formInfo.holder.name=n),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",maxlength:"10",rules:[{validator:T}],"is-view":o.holderDisable||o.disable},null,8,["modelValue","rules","is-view"]),s(I,{modelValue:t(e).formInfo.holder.certNo,"onUpdate:modelValue":a[1]||(a[1]=n=>t(e).formInfo.holder.certNo=n),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[t(oe).ID_CARD],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),s(I,{modelValue:t(e).formInfo.holder.mobile,"onUpdate:modelValue":a[2]||(a[2]=n=>t(e).formInfo.holder.mobile=n),label:"\u624B\u673A\u53F7",name:"mobile",required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",maxlength:"11","validate-type":[t(oe).PHONE],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),s(I,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=n=>t(e).formInfo.holder.socialFlag=n),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:y(()=>[s(z,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":a[3]||(a[3]=n=>t(e).formInfo.holder.socialFlag=n),disabled:o.disable,options:t(ge)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),s(ae),c("div",null,[Ot,s(I,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[6]||(a[6]=n=>t(e).formInfo.insured.relationToHolder=n),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:y(()=>[s(z,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[5]||(a[5]=n=>t(e).formInfo.insured.relationToHolder=n),disabled:o.disable,options:t(mt)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"]),s(I,{modelValue:t(e).formInfo.insured.name,"onUpdate:modelValue":a[7]||(a[7]=n=>t(e).formInfo.insured.name=n),label:"\u59D3\u540D",name:"name",required:"",maxlength:"10",rules:[{validator:T}],"is-view":t(e).insureDisable||o.disable},null,8,["modelValue","rules","is-view"]),s(I,{modelValue:t(e).formInfo.insured.certNo,"onUpdate:modelValue":a[8]||(a[8]=n=>t(e).formInfo.insured.certNo=n),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[t(oe).ID_CARD],"is-view":t(e).insureDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),s(I,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":a[10]||(a[10]=n=>t(e).formInfo.insured.socialFlag=n),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:y(()=>[s(z,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":a[9]||(a[9]=n=>t(e).formInfo.insured.socialFlag=n),disabled:o.disable||t(e).insureDisable,options:t(ge)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),s(ae),c("div",null,[Tt,s(I,{label:"\u6BCF\u6708\u4FDD\u8D39","is-view":!0},{input:y(()=>[q(S(o.premium)+" /\u6708 \u517112\u671F",1)]),_:1}),s(V,{modelValue:t(e).formInfo.paymentMethod,"onUpdate:modelValue":a[11]||(a[11]=n=>t(e).formInfo.paymentMethod=n),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":t(ft),"is-view":o.disable||t(e).formInfo.paymentMethodDisable,required:""},null,8,["modelValue","data-source","is-view"]),s(I,{label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9",border:!1},{input:y(()=>[s(ee,{disabled:o.allDisabled,title:"\u514D\u8D39\u5F00\u901A",active:t(e).formInfo.renewalDK,onClick:K},null,8,["disabled","active"])]),_:1}),c("div",Nt,[c("div",At,[St,(v(!0),F(U,null,H(t(x),(n,_)=>(v(),R(J,{key:_,class:"file-name",title:`\u300A${n.attachmentName}\u300B`,content:n.attachmentUri,type:"pdf"},{default:y(()=>{var B,E;return[_!==(((E=(B=r.productDetail)==null?void 0:B.tenantProductInsureVO)==null?void 0:E.attachmentVOList)||[]).length-1?(v(),F("span",xt,"\u3001")):j("",!0)]}),_:2},1032,["title","content"]))),128))]),c("div",Lt,[kt,(v(!0),F(U,null,H(t(Y),(n,_)=>(v(),R(J,{key:_,class:"file-name",title:`\u300A${n.attachmentName}\u300B`,content:n.attachmentUri,type:"pdf"},{default:y(()=>{var B,E;return[_!==(((E=(B=r.productDetail)==null?void 0:B.tenantProductInsureVO)==null?void 0:E.attachmentVOList)||[]).length-1?(v(),F("span",Ut,"\u3001")):j("",!0)]}),_:2},1032,["title","content"]))),128))])])]),s(ae)]),_:1},512)}}});var $t=Z(Mt,[["__scopeId","data-v-acb6e144"]]),Ht="/static/assets/up-btn.e0edd882.png";const Rt={class:"page-product-detail"},qt={class:"info"},Yt=["src"],Kt=["src"],zt={class:"guarantee-list"},Jt={key:0,class:"basic"},Wt={class:"tab-1"},jt=["src"],Gt={class:"footer-button"},Qt={class:"price"},Xt=q(" \u603B\u4FDD\u8D39"),Zt={class:"guarantee-list"},eo={class:"title"},to={class:"content"},oo=X({setup(r){const m=ze(),o=Je(),{productCode:w="BWYL2021",tenantId:e,extInfo:T,orderId:Y}=o.query,x=_t(T),{phoneNo:L,saleChannelId:K,paymentMethod:D,certNo:a,name:I,orderId:z}=x,V=Y||z,ee=P([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),J=P(),G=P(0),n=P(!1),_=P(),B=P(),E=P(),Be=!!(I&&a&&L),Pe=!!V,b=Ce({holder:{certNo:a,certType:ve.CERT,mobile:L,name:I,socialFlag:se.HAS},insured:{certNo:a,certType:ve.CERT,name:I,socialFlag:se.HAS,relationToHolder:ue.SELF},paymentMethod:D,paymentMethodDisable:!!D,renewalDK:!0}),te=P(!1),Oe=()=>{te.value=!1},Te=()=>{m.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:$(M({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify($(M({},x),{orderId:V}))})})},Ne=()=>{n.value=!0},Q=W(()=>{var f,i,d,p,h,g,l;return((d=(i=(f=_.value)==null?void 0:f.tenantProductInsureVO)==null?void 0:i.guaranteeList)==null?void 0:d.length)?(h=(p=_.value)==null?void 0:p.tenantProductInsureVO)==null?void 0:h.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(l=(g=_.value)==null?void 0:g.tenantProductInsureVO)==null?void 0:l.titleAndDescVOS}]}),ce=()=>{const{holder:{certNo:f,mobile:i,name:d,socialFlag:p},insured:{certNo:h,name:g,socialFlag:l,relationToHolder:u},paymentMethod:C}=b,O=De(f)&&pt(i)&&ie(d)&&!!p,N=De(h)&&ie(g)&&!!l&&!!u;return!!(O&&N&&!!C)},Ae=async f=>{try{const i=await it(f),{code:d}=i;if(d==="10000"){const p=await dt({id:f.id,tenantId:e}),{data:h}=p;window.location.href=h}}catch{}},Se=f=>`https://planet-h5-insure-test.zhongan.io/chuangxin/baigebao/productDetail?tenantId=${e}&productCode=${w}&orderId=${f}`,xe=async f=>{const i=Dt({tenantId:e,saleChannelId:K,detail:_.value,paymentMethod:b.paymentMethod,renewalDK:b.renewalDK?"Y":"N",successJumpUrl:"",premium:E.value,holder:b.holder,insured:b.insured,tenantOrderRiskList:f,orderStatus:le.UP_PROCESSING,orderTopStatus:"-1"}),d=await rt(i),{code:p,data:h}=d;p==="10000"&&(Qe.loading({forbidClick:!0,message:"\u6838\u4FDD\u4E2D..."}),Ae($(M({},i),{id:h.data,extInfo:{extraInfo:{renewalDK:b.renewalDK||"N",paymentMethod:b.paymentMethod,successJumpUrl:Se(h.data)}}})))},me=async()=>{const{calcData:f,riskVOList:i}=be({holder:b.holder,insured:b.insured,tenantId:e,productDetail:_.value,insureDetail:B.value}),d=async()=>{const p=await Ie(f),{code:h,data:g}=p;return h==="10000"?(E.value=g.premium,{condition:i,data:g}):{}};d(),Xe.exports.debounce(d,500,{trailing:!0})},Le=()=>new Promise(f=>{var i,d;(d=(i=J.value)==null?void 0:i.validateForm)==null||d.call(i).then(async()=>{const{calcData:p,riskVOList:h}=be({holder:b.holder,insured:b.insured,tenantId:e,productDetail:_.value,insureDetail:B.value}),g=await Ie(p),{code:l,data:u}=g;l==="10000"&&(E.value=u.premium,f({condition:h,data:u})),f({})})}),ke=async()=>{var g;if(V){m.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:$(M({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify($(M({},x),{orderId:V}))})});return}const{condition:f,data:i}=await Le(),d={},p=(l=[])=>{(l||[]).forEach(u=>{var C;d[u.riskCode]=u,((C=u.riskPremiumDetailVOList)==null?void 0:C.length)&&p(u.riskPremiumDetailVOList)})};p(i.riskPremiumDetailVOList);const h=vt({tenantId:e,riskList:f,riskPremium:d,productId:(g=_.value)==null?void 0:g.id});xe(h)};re(()=>b,()=>{_.value&&B.value&&!V&&ce()&&me()},{deep:!0,immediate:!0});const Ue=async()=>{var p,h,g,l,u,C,O;const f=await ut({id:V,tenantId:e}),{code:i,data:d}=f;if(i==="10000"){const{tenantOrderHolder:N,tenantOrderInsuredList:A,extInfo:fe}=d;b.holder={certNo:N.certNo,certType:N.certType,mobile:N.mobile,name:N.name,socialFlag:se.HAS},b.insured={certNo:A==null?void 0:A[0].certNo,certType:(p=A[0])==null?void 0:p.certType,name:(h=A[0])==null?void 0:h.name,socialFlag:(l=(g=A[0])==null?void 0:g.extInfo)==null?void 0:l.hasSocialInsurance,relationToHolder:(u=A[0])==null?void 0:u.relationToHolder},b.paymentMethod=fe.extraInfo.paymentMethod,E.value=(O=(C=A[0])==null?void 0:C.tenantOrderProductList[0])==null?void 0:O.premium,b.renewalDK=fe.extraInfo.renewalDK==="Y",(d.orderStatus===le.ACCEPT_POLICY||d.orderStatus===le.PAYMENT_SUCCESS)&&(te.value=!0)}},Me=async()=>{const f=ct({productCode:w,withInsureInfo:!0}),i=st({productCode:w});await Promise.all([f,i]).then(([d,p])=>{d.code==="10000"&&(_.value=d.data),p.code==="10000"&&(B.value=p.data)}),V?Ue():ce()&&me()};return We(()=>{Me(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(f,i)=>{var h,g;const d=k("van-button"),p=je("dompurify-html");return v(),F(U,null,[c("div",null,[c("div",Rt,[c("div",qt,[c("img",{class:"logo",src:t(ht)},null,8,Yt),c("img",{src:(g=(h=_.value)==null?void 0:h.tenantProductInsureVO)==null?void 0:g.banner[0],class:"banner"},null,8,Kt),c("div",zt,[s(ne,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:Ne},{default:y(()=>{var l,u,C;return[_.value&&((l=_.value)==null?void 0:l.tenantProductInsureVO)?(v(),F("div",Jt,[(v(!0),F(U,null,H((C=(u=t(Q))==null?void 0:u[G.value])==null?void 0:C.titleAndDescVOS,(O,N)=>(v(),R(ot,{key:N,class:"guarantee-item",title:O.title,content:O.desc,border:!1},null,8,["title","content"]))),128))])):j("",!0)]}),_:1})])]),s(he,{class:"tabs",list:ee.value,sticky:"",scrollspy:""},{tab1:y(()=>[s($t,{ref_key:"formRef",ref:J,"holder-disable":Be,disable:Pe,"form-info":t(b),premium:E.value,"product-detail":_.value},null,8,["form-info","premium","product-detail"])]),tab2:y(()=>{var l,u;return[c("div",Wt,[(v(!0),F(U,null,H(((u=(l=_.value)==null?void 0:l.tenantProductInsureVO)==null?void 0:u.spec)||[],(C,O)=>(v(),F("img",{key:O,src:C,class:"detail-img"},null,8,jt))),128))])]}),tab3:y(()=>[s(ne,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:y(()=>{var l,u;return[s(lt,{list:(u=(l=_.value)==null?void 0:l.tenantProductInsureVO)==null?void 0:u.settlementProcessList},null,8,["list"])]}),_:1}),s(ne,{title:"\u5E38\u89C1\u95EE\u9898"},{default:y(()=>{var l,u;return[s(Bt,{list:(u=(l=_.value)==null?void 0:l.tenantProductInsureVO)==null?void 0:u.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),c("div",Gt,[c("div",Qt,[Xt,c("span",null,"\uFFE5"+S(t(et)(E.value))+"/\u6708",1)]),s(d,{type:"primary",class:"right",onClick:ke},{default:y(()=>[q(S(t(V)?"\u5347\u7EA7\u4FDD\u969C":"\u7ACB\u5373\u6295\u4FDD"),1)]),_:1})])])]),s(tt,{show:n.value,"onUpdate:show":i[0]||(i[0]=l=>n.value=l),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:y(()=>[t(Q).length>1?(v(),R(he,{key:0,list:t(Q).map((l,u)=>({title:l.guaranteeType,slotName:`guarantee-${u}`})),class:"tab"},null,8,["list"])):j("",!0),c("div",Zt,[(v(!0),F(U,null,H(t(Q)[G.value].titleAndDescVOS,(l,u)=>(v(),F("div",{key:u,class:"guarantee-item"},[c("div",eo,S(l.title),1),Ge(c("div",to,null,512),[[p,l.content]])]))),128))])]),_:1},8,["show"]),s(nt,{"is-show":te.value,bg:t(at),"btn-bg":t(Ht),onOnConfirm:Te,onOnClose:Oe},null,8,["is-show","bg","btn-bg"])],64)}}});var vo=Z(oo,[["__scopeId","data-v-277acdbf"]]);export{vo as default};

import{al as e,am as a,an as t,y as l,C as o,ao as i,Y as r,O as n,ap as s,S as d,d as u,aq as m,ar as c,r as p,as as f,G as v,N as y,at as h,b,g as V,w as g,f as N,c as _,a4 as w,U as C,h as S,ae as E,a6 as T,ag as A,T as I,au as D,av as R,aw as O,ax as k,ay as M,$ as P,az as $,aA as x,R as j,aB as L,e as B,i as F,aC as U,aD as Y,aE as H,j as K,aF as G,aG as Z,a0 as z,aH as q,o as W,aI as X,V as J,aJ as Q,aK as ee,aL as ae,aM as te,aN as le,aO as oe,a1 as ie,a9 as re,aP as ne,aQ as se,aR as de,aS as ue,aT as me,aU as ce,aV as pe,aW as fe,aX as ve,B as ye,a2 as he,aa as be,aY as Ve}from"./index-be39512e.js";import{m as ge}from"./merge-c5599fa4.js";import{M as Ne,e as _e,U as we,a as Ce,d as Se,S as Ee,f as Te,r as Ae,s as Ie}from"./keysIn-a287568b.js";import{S as De,i as Re,a as Oe,b as ke}from"./isObjectLike-a9798079.js";import{g as Me,a as Pe}from"./_getTag-7f09858e.js";import{d as $e}from"./debounce-6981b306.js";import{s as xe}from"./phoneVerify-66be3f65.js";import{S as je}from"./index-9210e69a.js";import{u as Le}from"./useDicData-46a318f3.js";import{B as Be,P as Fe,a as Ue}from"./bankCard-74e03549.js";var Ye=Object.freeze(Object.defineProperty({__proto__:null,get ProRenderForm(){return kt},get ProFieldV2(){return xt},get ProRadioV2(){return Bt},get ProPickerV2(){return Gt},get ProSwitchV2(){return Zt},get ProCalendarV2(){return Wt},get ProCascaderV2(){return Xt},get ProBaseUpload(){return el},get ProUploadV2(){return ol},get ProIDCardUploadV2(){return pl},get ProBankUpload(){return yl},get ProDatePickerV2(){return hl},get ProSMSCode(){return bl},get ProBank(){return gl},get ProAddress(){return Nl},get ProOccupation(){return El},get ProRenderFormWithCard(){return Tl}},Symbol.toStringTag,{value:"Module"}));const He=(()=>{const e=(window.location.search.match(/&insurerCode=([^&]*)&/)||[])[1]||"";return a=>`${e?`${e.toUpperCase()}_`:""}${a}`})(),Ke=async({mobile:e},a)=>{const t=await xe(e),{code:l}=t;"10000"===l&&"function"==typeof a&&a()},Ge="ProFieldV2",Ze="ProDatePickerV2",ze="ProPickerV2",qe="ProRadioV2",We="ProCheckboxV2",Xe="ProSwitchV2",Je="ProCascaderV2",Qe="ProBank",ea="ProAddress",aa="ProUploadV2",ta="ProStepperV2",la="ProSMSCode",oa="ProOccupation",ia="ProIDCardUploadV2",ra="ProBankUpload",na=18,sa=20,da=50,ua="name",ma="external",ca="email",pa="zipCode",fa="tel",va="mobile",ya="zhCN",ha="notZhCN",ba="normalChar",Va="alphabetNumber",ga="cert",Na="houseHold",_a="birth",wa="passport",Ca="otherCert",Sa="militaryCard",Ea="solider",Ta="hongkongMacao",Aa="taiwanTravel",Ia="foreignPermanent",Da="HKMacaoResidencePermit",Ra="taiwanResidencePermit",Oa="socialCreditCode",ka="OCC",Ma="businessLicense",Pa="bandCard",$a={NAME:{maxlength:25,ruleType:ua},MOBILE:{type:"digit",ruleType:va,maxlength:11},AGE:{type:"digit",maxlength:3},HEIGHT_WEIGHT:{type:"number",precision:1,maxlength:5},INCOME:{type:"number",precision:2,unit:"万元",isPrecisionCompleted:!0},ZIP_CODE:{type:"digit",ruleType:pa,maxlength:6},CONTENT:{maxlength:200},GAS_NUMBER:{maxlength:sa},BANK:{type:"digit",maxlength:sa},ADDRESS:{dictCode:He(t.NATIONAL_REGION_CODE),customFieldName:{text:"name",value:"code",children:"children"}},COUNTRY:{dictCode:t.NATIONALITY,customFieldName:{text:"name",value:"code",children:"children"}}},xa=[{code:"input",name:"单行文本",value:1,componentName:Ge},{code:"textarea",name:"多行文本",value:2,type:"textarea",componentName:Ge},{code:"number",name:"数字输入框",value:3,componentName:Ge},{code:"date",name:"日期",value:4,componentName:Ze},{code:"select",name:"下拉框",value:5,componentName:ze},{code:"radio",name:"单选框",value:6,componentName:qe},{code:"checkbox",name:"多选框",value:7,componentName:We},{code:"switch",name:"switch开关",value:8,componentName:Xe},{code:"cascader",name:"级联选择",value:9,componentName:Je},{code:"bank",name:"银行卡",value:10,componentName:Qe},{code:"address",name:"地址",value:11,componentName:ea},{code:"upload",name:"文件上传",value:12,componentName:aa},{code:"stepper",name:"步进器",value:13,componentName:ta}],ja={BANK_CARD_NO:"bankCardNo",ACCOUNT_NAME:"accountName",PAY_BANK:"payBank",BANK_CARD_IMAGE:"bankCardImage",MOBILE:"mobile",VERIFICATION_CODE:"verificationCode"},La=Object.values(ja),Ba={bankCardNo:{...$a.BANK,name:ja.BANK_CARD_NO,componentName:Ge},accountName:{...$a.NAME,name:ja.ACCOUNT_NAME,componentName:Ge},payBank:{name:ja.PAY_BANK,dictCode:He(t.BANK),componentName:ze},bankCardImage:{maxCount:2,subLabel:"（需上传正反两面）",name:ja.BANK_CARD_IMAGE,componentName:ra},mobile:{...$a.MOBILE,name:ja.MOBILE,componentName:Ge},verificationCode:{...$a.ZIP_CODE,sendSMSCode:Ke,name:ja.VERIFICATION_CODE,relatedName:ja.MOBILE,componentName:la}},Fa={certType:{[o.CERT]:[ga],[o.HOUSE_HOLD]:[Na],[o.MILITARY_CARD]:[Sa],[o.PASSPORT]:[wa],[o.HONGKONG_MACAO]:[Ta],[o.OTHER]:[Ca],[o.SOLIDER]:[Ea],[o.BIRTH]:[_a],[o.TAIWAN_TRAVEL]:[Aa],[o.FOREIGN_PERMANENT]:[Ia],[o.HK_MACAO_RESIDENCE_PERMIT]:[Da],[o.TAIWAN_RESIDENCE_PERMIT]:[Ra],[o.SOCIAL_CREDIT_CODE]:[Oa]}},Ua={INSURE_AREA:"insureArea",RESIDENCE:"residence",LONG_AREA:"longArea",WORK_ADDRESS:"workAddress"};Object.values(Ua);const Ya=[{key:Ua.INSURE_AREA},{key:Ua.RESIDENCE},{key:Ua.LONG_AREA},{key:Ua.WORK_ADDRESS}].reduce(((e,{key:a})=>(e[a]=$a.ADDRESS,e)),{}),Ha={name:$a.NAME,certNo:{relatedName:"certType",maxlength:na},certType:{relatedName:"certNo"},birthday:{relatedName:"age"},mobile:$a.MOBILE,age:$a.AGE,height:{...$a.HEIGHT_WEIGHT,unit:"cm"},weight:{...$a.HEIGHT_WEIGHT,unit:"kg"},email:{ruleType:ca},personalAnnualIncome:$a.INCOME,familyAnnualIncome:$a.INCOME,workZipCode:$a.ZIP_CODE,homePostalCode:$a.ZIP_CODE,workContent:$a.CONTENT,gasNumberCollection:{...$a.GAS_NUMBER,ruleType:ha},verificationCode:{sendSMSCode:Ke,componentName:la,...$a.ZIP_CODE},...Ya,nationalityCode:{...$a.COUNTRY},certEndDate:{minDate:new Date,maxDate:l().add(100,"year").toDate()},companyName:{maxlength:da},occupationCodeList:{componentName:oa,dictCode:He("OCCUPATION")},certImage:{componentName:ia},benefitRate:{...$a.AGE,unit:"%"}},Ka=2,Ga={1:"holder",2:"insured",3:"beneficiary",4:"payInfo",5:"signInfo"},Za=Symbol("VAN_PRO_FORM_KEY"),za=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/,qa=e=>{if(!za.test(e))return!1;if(18!==e.length)return!1;const a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];let t=0;for(let i=0;i<17;i++)t+=e.substring(i,i+1)*a[i];const l=t%11,o=e.substring(17);return 2===l?"X"===o.toUpperCase():Number(o)===[1,0,10,9,8,7,6,5,4,3,2][l]},Wa={isName:e=>/^[\u4e00-\u9fa5a-z].{0,23}[\u4e00-\u9fa5a-z]/i.test(e),isExternal:e=>/^(https?:|mailto:|tel:)/.test(e),isEmail:e=>/^[A-Za-z0-9]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(e),isZipCode:e=>/^[0-9]{6,6}$/.test(e),isTel:e=>/0\d{2,3}-\d{7,8}/.test(e),isPhone:e=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(e),isZhCN:e=>/^[\u4e00-\u9fa5]+$/.test(e),isNotZhCN:e=>/^[^\u4e00-\u9fa5]+$/.test(e),isCommonChar:e=>/^[\w_]{6,20}$/.test(e),isNormalChar:e=>/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(e),isAlphabetNumber:e=>/^[a-z0-9]+$/i.test(e),isAlphabetNumberOrSpecial:e=>/^[a-z0-9`~!@#$%^&*()_\-+=<>?:"{}|,./;'\\[\]·~！@#￥¥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]+$/i.test(e),isIdCardNo:e=>qa(e),isHouseHold:e=>qa(e),isBirthType:e=>/^[a-zA-Z]\d{9}$/.test(e),isPassword:e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,20}$/.test(e),isPassportType:e=>e.length>=5&&/^[^\u4e00-\u9fa5]+$/.test(e),isMilitaryCard:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isSolider:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isHongkongMacaoTravel:e=>/^[C]\d{8}$|^[C][a-hA-Hj-nJ-Np-zP-Z][0-9]{7}$/.test(e),isTaiwanTravel:e=>/^[L]\d{8}$/.test(e),isForeignPermanent:e=>/^[A-Z]{3}[0-9]{12}$/.test(e),isHKMacaoResidencePermit:e=>/^8[12]0000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isTaiwanResidencePermit:e=>/^830000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isUSCC:e=>/^[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}$/.test(e),isUSCCPolicy:e=>/^[A-Z0-9]{18}$/.test(e),isOCC:e=>/^[A-Z0-9]{8}-[A-Z0-9]{1}$/.test(e),isBusinessLicense:e=>/(^\d{15}$)|(^[A-Z0-9]{18}$)/.test(e),isBandcard:e=>/^\d{12,20}$/g.test(e),isOtherCert:e=>/^.{1,18}$/.test(e)},Xa={[ua]:[Wa.isName],[ma]:[Wa.isExternal],[ca]:[Wa.isEmail],[pa]:[Wa.isZipCode],[fa]:[Wa.isTel],[va]:[Wa.isPhone],[ya]:[Wa.isZhCN],[ha]:[Wa.isNotZhCN],[ba]:[Wa.isNormalChar],[Va]:[Wa.isAlphabetNumber],[ga]:[Wa.isIdCardNo],[Na]:[Wa.isHouseHold],[_a]:[Wa.isBirthType],[wa]:[Wa.isPassportType],[Sa]:[Wa.isMilitaryCard],[Ea]:[Wa.isSolider],[Ta]:[Wa.isHongkongMacaoTravel],[Aa]:[Wa.isTaiwanTravel],[Ia]:[Wa.isForeignPermanent],[Da]:[Wa.isHKMacaoResidencePermit],[Ra]:[Wa.isTaiwanResidencePermit],[Oa]:[Wa.isUSCCPolicy],[ka]:[Wa.isOCC],[Ma]:[Wa.isBusinessLicense],[Pa]:[Wa.isBandcard],[Ca]:[Wa.isOtherCert]};function Ja(e){return null==e}const Qa=["v-model","label","name","id","type","size","maxlength","placeholder","border","disabled","readonly","colon","required","center","clearable","clear-icon","clear-trigger","clickable","is-link","autofocus","show-word-limit","error","error-message","error-message-align","formatter","format-trigger","arrow-direction","label-class","label-width","label-align","input-align","autosize","left-icon","right-icon","icon-prefix","rules","autocomplete","enterkeyhint","visible"],et=["label","input","left-icon","right-icon","button","error-message","extra","value-view"],at={autocomplete:"off"},tt=e=>console.log(`%c🔥 ${e}`,"color:#1989fa;background:#5e4;padding:3px 5px;"),lt=e=>{const{trialFactorCodes:a,personVO:t}=e||{};return!i(a)||!a.some((e=>{const a=t[e];return Ja(a)||""===a||Array.isArray(a)&&!a.length}))},ot=(e,a,t)=>{var l;return t&&!i(a)?Promise.resolve():null==(l=e.value)?void 0:l.validate(t?a:void 0)},it=(e,a="children")=>i(e)?e.map((({[`${a}`]:e,...t})=>{const l={};return i(e)&&(l.children=it(e)),{...t,...l}})):[],rt=(e,a,t={})=>{const l=Object.keys(e);return i(l)?l.reduce(((t,l)=>{const o=a.includes(l);return t[Number(!o)][l]=e[l],t}),[{...t},{}]):[{...t},{}]},nt=e=>{if("certType"!==(null==e?void 0:e.name))return!1;const{columns:a,title:t}=e||{};return i(a)&&1===a.length&&a.findIndex((e=>e.code===o.CERT))>-1},st=e=>i(e)&&e.some((e=>"birthday"===(e.code||e.name))),dt=(e,a)=>{let t=[];const l=[];if(i(e)){const a=st(e);t=e.map((e=>{const{code:t,name:o,value:i,componentName:n,...d}=xa.find((a=>`${a.value}`==`${e.displayType}`))||{};e.isCalculationFactor===r.YES&&l.push(e.code);const u={},{componentName:m,...c}=Ha[e.code]||{},p=m||n||"ProFieldV2";2===e.moduleType&&(u.isSelfInsuredNeed=e.isSelfInsuredNeed),"age"===e.code&&(u.visible=!a);const f={...d,...u,customFieldName:{text:"value",value:"code",children:"children"},label:e.title,name:e.code,componentName:p,required:1===e.isMustInput,nanoid:s(),...c},v={...f,attributeValueList:e.attributeValueList,columns:f.dictCode?[]:e.attributeValueList||[]};return nt(v)&&(v.visible=!1),v}))}return a.push(...l),{schema:t,trialFactorCodes:l}},ut=(e,a={isTrial:!1})=>{const t={};if(!e)return t;const l=Object.keys(e)||[];if(!i(l))return t;const o=[],n=a.multiInsuredSupportFlag===r.YES,s={hasTrialFactorCodes:!1,isSpouseInsured:!1,multiInsuredSupportFlag:n,multiInsuredMaxNum:n?a.multiInsuredNum||Number.MAX_SAFE_INTEGER:1,multiInsuredMinNum:1,multiBeneficiaryMaxNum:a.multiBeneficiaryMaxNum||5},d=l.reduce(((t,l)=>(t[Ga[l]]=i(e[l])?e[l].filter((e=>{const{subModuleType:t,code:l,attributeValueList:o}=e;if(t===Ka&&"relationToMainInsured"===l){i(o)&&1===o.length&&o.findIndex((e=>"2"===e.code))>-1&&Object.assign(s,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0})}return!a.isTrial||1===e.isCalculationFactor})):[],t)),{}),u=((e,a)=>{if(!i(e.insured))return[];const t=i(e.holder)?e.holder.map((e=>e.code)):[];return e.insured.reduce(((e,l)=>{const{code:o,subModuleType:r,attributeValueList:n}=l;return r===Ka?("relationToMainInsured"===o&&i(n)&&1===n.length&&n.findIndex((e=>"2"===e.code))>-1&&Object.assign(a,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0}),e[1].push({...l,isSelfInsuredNeed:!t.includes(o)})):e[0].push({...l,isSelfInsuredNeed:!t.includes(o)}),e}),[[],[]]).filter((e=>i(e)))})(d,s),m=Object.keys(d).reduce(((e,t)=>{if("insured"!==t){const l=d[t],r="holder"===t;e[t]=dt(r&&i(a.holderFactorCodes)?l.filter((e=>a.holderFactorCodes.includes(e.code))):l,o)}else e[t]=i(u)?u.map((e=>dt(i(a.insuredFactorCodes)?e.filter((e=>a.insuredFactorCodes.includes(e.code))):e,o))):[];return e}),{});return m.config={...s,hasTrialFactorCodes:i(o)},m},mt=(e=!1)=>a=>{if("string"==typeof a&&a){const t=["toLowerCase","toUpperCase"][Number(e)];return`${a[0][t]()}${a.substring(1)}`}return""},ct=mt(!0),pt=mt(),ft=(e,a={})=>Object.keys(e).reduce(((e,t)=>(e[a[t]||t]=t,e)),{}),vt=e=>{const a=new Date,t=new Date(e);let l=a.getFullYear()-t.getFullYear();const o=a.getMonth()-t.getMonth();return(o<0||0===o&&a.getDate()<t.getDate())&&(l-=1),l},yt=(e,a=(e=>!0))=>{if(!e)return{};return Object.keys(e).filter((e=>"function"!=typeof a||a(e))).reduce(((a,t)=>(a[t]={Object:{},Array:[]}[Object.prototype.toString.call(e[t]).slice(8,-1)]||null,a)),{})},ht=(e,a)=>{const t=![o.CERT,o.HOUSE_HOLD].includes(String(e)),l=st(a)?{age:{visible:!1}}:{};return{...["gender","birthday","age"].reduce(((e,a)=>(e[a]={visible:t},e)),{}),...l}},bt=(e,a)=>{const t={},{relationToHolder:l,certType:o}=a||{},i="3"===String(l),r=null==e?void 0:e.find((e=>"certType"===e.name)),n=nt(r||{});return n&&(t.certNo={label:"身份证号"+(i?"\n(户口簿)":"")}),r&&ge(t,ht(o,e)),[n,t]},Vt={certNo:{onChangeEffect:(e,a)=>{Object.assign(a.formData,{certNo:null,gender:null,birthday:null,age:null}),n((()=>{ge(a.config,ht(a.formData.certType,a.schema))}))}},certType:{extraAttrs:{4:{maxlength:10}},onChangeEffect:(e,a)=>{if([o.CERT,o.HOUSE_HOLD].includes(String(a.formData.certType))){const t=(e=>{const a={gender:null,birthday:null,age:null};if("string"==typeof e&&e&&qa(e)){const t={15:[6,12],18:[6,14]};a.birthday=e.slice(...t[e.length]).replace(/(.{4})(.{2})/,"$1-$2-"),a.gender=[d.FEMALE,d.MALE][Number(e.slice(-2,-1))%2],a.age=a.birthday&&`${vt(a.birthday)}`}return a})(e);Object.assign(a.formData,t)}}},age:{onChangeEffect:(e,a)=>{if(![o.CERT,o.HOUSE_HOLD].includes(String(a.formData.certType))){const t=e?vt(e):null;Object.assign(a.formData,{age:t})}}}};function gt(e){var a=-1,t=null==e?0:e.length;for(this.__data__=new Ne;++a<t;)this.add(e[a])}function Nt(e,a){for(var t=-1,l=null==e?0:e.length;++t<l;)if(a(e[t],t,e))return!0;return!1}gt.prototype.add=gt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},gt.prototype.has=function(e){return this.__data__.has(e)};function _t(e,a,t,l,o,i){var r=1&t,n=e.length,s=a.length;if(n!=s&&!(r&&s>n))return!1;var d=i.get(e),u=i.get(a);if(d&&u)return d==a&&u==e;var m=-1,c=!0,p=2&t?new gt:void 0;for(i.set(e,a),i.set(a,e);++m<n;){var f=e[m],v=a[m];if(l)var y=r?l(v,f,m,a,e,i):l(f,v,m,e,a,i);if(void 0!==y){if(y)continue;c=!1;break}if(p){if(!Nt(a,(function(e,a){if(r=a,!p.has(r)&&(f===e||o(f,e,t,l,i)))return p.push(a);var r}))){c=!1;break}}else if(f!==v&&!o(f,v,t,l,i)){c=!1;break}}return i.delete(e),i.delete(a),c}function wt(e){var a=-1,t=Array(e.size);return e.forEach((function(e,l){t[++a]=[l,e]})),t}function Ct(e){var a=-1,t=Array(e.size);return e.forEach((function(e){t[++a]=e})),t}var St=De?De.prototype:void 0,Et=St?St.valueOf:void 0;var Tt=Object.prototype.hasOwnProperty;var At="[object Object]",It=Object.prototype.hasOwnProperty;function Dt(e,a,t,l,o,i){var r=Ce(e),n=Ce(a),s=r?"[object Array]":Pe(e),d=n?"[object Array]":Pe(a),u=(s="[object Arguments]"==s?At:s)==At,m=(d="[object Arguments]"==d?At:d)==At,c=s==d;if(c&&Se(e)){if(!Se(a))return!1;r=!0,u=!1}if(c&&!u)return i||(i=new Ee),r||Te(e)?_t(e,a,t,l,o,i):function(e,a,t,l,o,i,r){switch(t){case"[object DataView]":if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=a.byteLength||!i(new we(e),new we(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return _e(+e,+a);case"[object Error]":return e.name==a.name&&e.message==a.message;case"[object RegExp]":case"[object String]":return e==a+"";case"[object Map]":var n=wt;case"[object Set]":var s=1&l;if(n||(n=Ct),e.size!=a.size&&!s)return!1;var d=r.get(e);if(d)return d==a;l|=2,r.set(e,a);var u=_t(n(e),n(a),l,o,i,r);return r.delete(e),u;case"[object Symbol]":if(Et)return Et.call(e)==Et.call(a)}return!1}(e,a,s,t,l,o,i);if(!(1&t)){var p=u&&It.call(e,"__wrapped__"),f=m&&It.call(a,"__wrapped__");if(p||f){var v=p?e.value():e,y=f?a.value():a;return i||(i=new Ee),o(v,y,t,l,i)}}return!!c&&(i||(i=new Ee),function(e,a,t,l,o,i){var r=1&t,n=Me(e),s=n.length;if(s!=Me(a).length&&!r)return!1;for(var d=s;d--;){var u=n[d];if(!(r?u in a:Tt.call(a,u)))return!1}var m=i.get(e),c=i.get(a);if(m&&c)return m==a&&c==e;var p=!0;i.set(e,a),i.set(a,e);for(var f=r;++d<s;){var v=e[u=n[d]],y=a[u];if(l)var h=r?l(y,v,u,a,e,i):l(v,y,u,e,a,i);if(!(void 0===h?v===y||o(v,y,t,l,i):h)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var b=e.constructor,V=a.constructor;b==V||!("constructor"in e)||!("constructor"in a)||"function"==typeof b&&b instanceof b&&"function"==typeof V&&V instanceof V||(p=!1)}return i.delete(e),i.delete(a),p}(e,a,t,l,o,i))}function Rt(e,a,t,l,o){return e===a||(null==e||null==a||!Re(e)&&!Re(a)?e!=e&&a!=a:Dt(e,a,t,l,Rt,o))}function Ot(e,a){return Rt(e,a)}var kt=A(u({__name:"ProRenderForm",props:{validateMethod:{default:"show-error"},model:{default:()=>({})},isView:{type:Boolean,default:!1},schema:{default:()=>[]},config:{default:()=>({})},markRequired:{type:Boolean,default:!0},extraProvision:{}},emits:["failed"],setup(t,{expose:l,emit:o}){const r=t,n=m(),d=c({config:{},formData:{},schema:[],nameList:[],dictCodeList:[]}),u=p({});f(Za,{formState:d,formRef:u,markRequired:r.markRequired&&!r.isView,...r.extraProvision});const A=v((()=>Object.keys(n).filter((e=>"default"!==e)))),P=v((()=>i(r.schema))),$=v((()=>{const[e,a]={toast:[!1,!1],"show-error":[!1,!0],"show-error-message":[!0,!1]}[r.validateMethod];return{"show-error-message":e,"show-error":a}})),x=({values:e,errors:a})=>{if("toast"===r.validateMethod){const e=a.reduce(((e,a)=>(e[a.name]=a,e)),{}),t=Object.keys(e);if(t.length){const a=d.nameList.reduce(((e,a)=>(t.includes(a)&&e.push(a),e)),[]),{message:l}=e[a[0]]||{};I({message:l})}}console.log("failed errors",a),o("failed",{values:e,errors:a})};return y([()=>r.schema,()=>d.config],(([e,a])=>{P.value&&(d.schema=e.map((e=>({...e,componentName:Ye[e.componentName]?D(Ye[e.componentName]):e.componentName,...a[e.name],nanoid:s()}))).filter((e=>!e.hidden)))}),{immediate:!0,deep:!0}),y((()=>r.config),(e=>{d.config=e}),{immediate:!0,deep:!0}),y((()=>d.dictCodeList),$e((t=>{t&&(async t=>{const l=e(),{dictMap:o}=a(l);"string"==typeof t?(await l.getDict([t]),o.value[t]):(await l.getDict(t),t.map((e=>o.value[e])))})(t)}),500),{immediate:!0,deep:!0}),y((()=>r.model),((e,a)=>{Ot(e,a)||(d.formData=e)}),{immediate:!0,deep:!0}),y((()=>d.schema),(e=>{d.dictCodeList=[...new Set([...d.dictCodeList,...d.schema.reduce(((e,a)=>(a.dictCode&&e.push(a.dictCode),e)),[])])]}),{immediate:!0,deep:!0}),l({...["submit","getValues","validate","resetValidation","getValidationStatus","scrollToField"].reduce(((e,a)=>(e[a]=(...e)=>{var t;return null==(t=u.value)?void 0:t[a](...e)},e)),{})}),(e,a)=>{const t=h;return b(),V(t,T({ref_key:"formRef",ref:u,class:"com-van-form"},{...N($),...e.$attrs},{onFailed:x}),{default:g((()=>[N(P)?(b(!0),_(C,{key:0},w(d.schema,((a,t)=>(b(),V(R(a.componentName),T({key:`${a.nanoid}_${t}`},a,{modelValue:d.formData[a.name],"onUpdate:modelValue":e=>d.formData[a.name]=e,"is-view":"boolean"==typeof a.isView?a.isView:e.isView}),O({_:2},[w(N(A),(a=>({name:a,fn:g((t=>[E(e.$slots,a,k(M(t||{})),void 0,!0)]))})))]),1040,["modelValue","onUpdate:modelValue","is-view"])))),128)):S("",!0),E(e.$slots,"default",{},void 0,!0)])),_:3},16)}}}),[["__scopeId","data-v-694dbbaf"]]);const Mt={class:"value-view-wrap"};var Pt=A(u({__name:"ValueView",props:{value:{type:String,default:""},isView:{type:Boolean,default:!1}},setup:e=>(a,t)=>(b(),_("span",Mt,P(e.value||"-"),1))}),[["__scopeId","data-v-505dc7b6"]]);const $t={class:"com-van-field-unit"},xt=u({inheritAttrs:!1,__name:"ProFieldV2",props:{ruleType:{type:String,default:""},modelValue:{type:[String,Number,Object,Array,Boolean],default:""},isView:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:Array,default:()=>[]},relatedName:{type:String,default:""},precision:{type:Number,default:0},isPrecisionCompleted:{type:Boolean,default:!1},unit:{type:String,default:""}},emits:["update:model-value","blur"],setup(e,{emit:a}){const t=e,l=$(),o=m(),{formState:r,markRequired:n}=x(Za)||{},s=c({modelValue:""}),d=v((()=>{const e=ft(o,l.slots),{extra:a,...i}=e;return t.unit?i:e})),u=v((()=>l.placeholder||`请输入${l.label||""}`)),p=v((()=>`${s.modelValue||""}`)),f=v((()=>{var e,a;if(t.ruleType)return t.ruleType;if(t.relatedName){const l=null==(e=null==r?void 0:r.formData)?void 0:e[t.relatedName];if(l)return null==(a=Fa[t.relatedName])?void 0:a[l]}return""})),h=e=>Ja(e)||""===e||Array.isArray(e)&&!e.length||Oe(e)&&Object.keys(e).some((e=>h(e))),_=v((()=>i(t.rules)?t.rules:[{required:t.required,validator:e=>{if(t.required&&h(e))return l.placeholder;if(f.value){const[a]=Xa[f.value]||[];if("function"!=typeof a)return console.warn(`%c 字段 ${l.label} 的规则 ${f} 校验函数不存在，请先确认～`,"color: #3e7;"),"";if(!h(e)&&!a(e))return`请输入正确的${l.label}`}return""}}])),C=v((()=>"number"===l.type&&t.precision)),S=e=>C.value&&e?e.replace(/^(0)\d+$/g,"$1").replace(new RegExp(`^(\\d+\\.\\d{${t.precision}})\\d+$`,"g"),"$1"):e,A=v((()=>{var e;if(t.relatedName){const{extraAttrs:a}=Vt[t.relatedName]||{},l=null==(e=null==r?void 0:r.formData)?void 0:e[t.relatedName];if(a&&!Ja(l)&&""!==l)return a[l]||{}}return{}})),I=(e,a)=>{if(t.relatedName&&e){const l=(Vt[t.relatedName]||{})[`${e}Effect`];"function"==typeof l&&l(a,r)}},D=e=>{I("onChange",e),s.modelValue=e,a("update:model-value",e)},R=e=>{let l=s.modelValue;C.value&&l&&t.isPrecisionCompleted&&(l=Number(l).toFixed(t.precision),D(l)),I("onBlur",l),a("blur",e)};return y((()=>t.modelValue),(e=>{s.modelValue=e}),{immediate:!0,deep:!0}),j((()=>{l.name&&(null==r?void 0:r.nameList)&&r.nameList.push(l.name)})),(a,t)=>{const o=L;return b(),V(o,T({"model-value":N(s).modelValue,class:`com-van-field ${N(n)?"":"field-mark--hidden"} ${!1===N(l).visible?"com-van-field--hidden":""}`,autocomplete:"off",formatter:S},{maxlength:25,...a.$attrs,placeholder:N(u),required:e.required,rules:N(_),...N(A)},{onBlur:R,"onUpdate:modelValue":D}),O({_:2},[e.isView?{name:"input",fn:g((()=>[B(Pt,{value:N(p)},null,8,["value"])])),key:"0"}:void 0,w(Object.keys(N(d)),(e=>({name:e,fn:g((t=>{var l;return[E(a.$slots,null==(l=N(d))?void 0:l[e],k(M(t||{})))]}))}))),e.unit?{name:"extra",fn:g((()=>[F("div",$t,P(e.unit),1)])),key:"1"}:void 0]),1040,["model-value","class"])}}}),jt={input:"请输入",select:"请选择"};function Lt({placeholderType:e}={placeholderType:"select"}){const a=$(),t=m(),l=c({filedAttrs:{},filedSlots:{},attrs:{},slots:{}});return y((()=>a),(()=>{const[t,o]=(e=>rt(e,Qa,at))(a);l.filedAttrs={...t,placeholder:a.placeholder||`${jt[e]}${a.label||""}`},l.attrs={title:`请选择${t.label}`,...o}}),{deep:!0,immediate:!0}),y([()=>t,()=>a.slots],(e=>{const[o,i]=(e=>rt(e,et))(ft(t,a.slots));l.filedSlots=o||{},l.slots=i||{}}),{deep:!0,immediate:!0}),l}var Bt=A(u({inheritAttrs:!1,__name:"ProRadioV2",props:{type:{type:String,default:"button"},modelValue:{type:[String,Number],default:""},columns:{type:Array,default:()=>[]},isDefaultSelected:{type:Boolean,default:!0},isView:{type:Boolean,default:!1},customFieldName:{type:Object,default:()=>({text:"label",value:"value",children:"children"})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:a}){const t=e,{filedAttrs:l,attrs:o}=U(Lt()),{formState:r}=x(Za)||{},n=c({modelValue:"",columns:[]}),s=v((()=>"button"===t.type)),d=v((()=>(n.columns.find((e=>String(e.value)===String(n.modelValue)))||{}).text||"")),u=e=>{n.modelValue=e,a("update:modelValue",e),a("change",e)};return y((()=>t.modelValue),(e=>{n.modelValue=e}),{immediate:!0}),y((()=>{var e;return null==(e=r.formData)?void 0:e[l.value.name]}),(e=>{void 0===e&&void 0!==n.modelValue||(n.modelValue=e)}),{immediate:!0,deep:!0}),y((()=>t.columns),((e=[])=>{if(i(e)){n.columns=e.map((e=>({...e,text:e[t.customFieldName.text],value:e[t.customFieldName.value]})));const[{disabled:a,value:l}]=n.columns;!t.isDefaultSelected||a||!Ja(t.modelValue)&&""!==t.modelValue||u(l)}}),{deep:!0,immediate:!0}),(a,i)=>{const r=G,m=Y,c=H;return b(),V(xt,T({class:"com-van-radio-wrap"},N(l),{"model-value":N(n).modelValue,disabled:e.disabled}),{input:g((()=>[e.isView?(b(),V(Pt,{key:0,value:N(d)},null,8,["value"])):(b(),_(C,{key:1},[N(s)?(b(!0),_(C,{key:0},w(N(n).columns,(a=>(b(),V(r,{key:a.value,label:a.text,disabled:a.disabled||e.disabled,activated:N(n).modelValue==a.value,"icon-name":a.iconName,onClick:e=>(({disabled:e,value:a})=>{o.value.disabled||e||t.disabled||u(a)})(a)},null,8,["label","disabled","activated","icon-name","onClick"])))),128)):(b(),V(c,T({key:1,modelValue:N(n).modelValue,"onUpdate:modelValue":i[0]||(i[0]=e=>N(n).modelValue=e)},N(o),{disabled:e.disabled}),{default:g((()=>[(b(!0),_(C,null,w(N(n).columns,(a=>(b(),V(m,T({key:a.value,name:a.value},a,{disabled:e.disabled}),{default:g((()=>[K(P(a.label),1)])),_:2},1040,["name","disabled"])))),128))])),_:1},16,["modelValue","disabled"]))],64))])),_:1},16,["model-value","disabled"])}}}),[["__scopeId","data-v-0e1c30d9"]]);const Ft={class:"custom-input-wrap"},Ut={key:1,class:"placeholder"},Yt=u({inheritAttrs:!1,__name:"CustomInput",props:{fieldValueView:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const a=e;return $(),x(Za),Z((()=>a.modelValue)),(a,t)=>(b(),_("div",Ft,[e.fieldValueView||e.isView?E(a.$slots,"value-view",{key:0,value:e.fieldValueView},(()=>[B(Pt,{value:e.fieldValueView},null,8,["value"])])):(b(),_("span",Ut,P(a.$attrs.placeholder),1))]))}});const Ht=u({name:"ProFormItem"}),Kt=u({...Ht,props:{fieldValueView:{type:String,default:""},name:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const a=m(),t=v((()=>Object.keys(a).filter((e=>"value-view"!==e))));return(a,l)=>(b(),V(xt,{class:z({"com-form-item":!0,"com-form-item--view":e.isView}),"is-link":!e.isView},O({input:g((()=>[B(Yt,{name:e.name,"model-value":e.modelValue,"is-view":e.isView,"field-value-view":e.fieldValueView,placeholder:a.$attrs.placeholder},{"value-view":g((e=>[E(a.$slots,"value-view",k(M(e||{})))])),_:3},8,["name","model-value","is-view","field-value-view","placeholder"])])),_:2},[w(N(t),(e=>({name:e,fn:g((t=>[E(a.$slots,e,k(M(t||{})))]))})))]),1032,["class","is-link"]))}});const Gt=u({inheritAttrs:!1,__name:"ProPickerV2",props:{relatedName:{type:String,default:""},columns:{type:Array,default:()=>[]},dictCode:{type:String,default:""},modelValue:{type:[String,Number],default:""},isDefaultSelected:{type:Boolean,default:!0},isView:{type:Boolean,default:!1},customFieldName:{type:Object,default:()=>({text:"label",value:"value",children:"children"})}},emits:["update:show","confirm","cancel","update:modelValue"],setup(t,{emit:l}){const o=t,r=e(),{dictMap:n}=a(r),{filedAttrs:s,filedSlots:d,attrs:u,slots:m}=U(Lt()),{formState:p}=x(Za)||{},[f,h]=q(!1),V=c({fieldValue:"",columns:[]}),S=e=>{((e,a)=>{if(o.relatedName&&e){const t=(Vt[o.relatedName]||{})[`${e}Effect`];"function"==typeof t&&t(a,p)}})("onChange",e),V.fieldValue=e,l("update:modelValue",e)},A=e=>{const{value:a}=e||{};let t="";Ja(a)||(t=a),h(!1),S(t),l("confirm",e)},I=()=>{h(!1)},D=v((()=>{let e=[];i(o.columns)&&(e=o.columns);const a=n.value[o.dictCode];return o.dictCode&&i(a)&&(e=a),it(i(t=e)?t.map((e=>({...e,text:e[o.customFieldName.text],value:e[o.customFieldName.value]}))):[]);var t})),R=v((()=>V.fieldValue?o.columns.findIndex((e=>{var a;return String(e[null==(a=o.customFieldName)?void 0:a.value])===String(V.fieldValue)})):"")),P=v((()=>{if(i(D.value)){const e=D.value.find((e=>String(e.value)===String(V.fieldValue)))||{};return(null==e?void 0:e.text)||V.fieldValue}return V.fieldValue}));return y((()=>o.modelValue),(e=>{V.fieldValue=e}),{deep:!0,immediate:!0}),y(D,((e=[])=>{if(i(e)&&1===e.length){const[{disabled:e,value:a}]=D.value;!o.isDefaultSelected||e||!Ja(o.modelValue)&&""!==o.modelValue||S(a)}}),{deep:!0,immediate:!0}),W((()=>{o.dictCode&&!p.dictCodeList.includes(o.dictCode)&&p.dictCodeList.push(o.dictCode)})),(e,a)=>{const l=X,o=Q;return b(),_(C,null,[B(Kt,T({"model-value":N(V).fieldValue,class:""+(!1===N(s).visible?"com-van-field--hidden":"")},N(s),{"field-value-view":N(P),"is-view":t.isView,onClick:a[0]||(a[0]=e=>!t.isView&&(f.value=!0))}),O({_:2},[w(Object.keys(N(d)),(a=>({name:a,fn:g((t=>[E(e.$slots,a,k(M(t||{})))]))})))]),1040,["model-value","class","field-value-view","is-view"]),B(o,{show:N(f),"onUpdate:show":a[1]||(a[1]=e=>J(f)?f.value=e:null),height:40,closeable:!1},{default:g((()=>[B(l,T({columns:N(D),"default-index":N(R)},N(u),{onCancel:I,onConfirm:A}),O({_:2},[w(Object.keys(e.$slots),(a=>({name:a,fn:g((t=>[E(e.$slots,a,k(M(t||{})))]))})))]),1040,["columns","default-index"])])),_:3},8,["show"])],64)}}});var Zt=A(u({inheritAttrs:!1,__name:"ProSwitchV2",props:{modelValue:{type:[String,Number],default:""},isView:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,{filedAttrs:l,attrs:o}=U(Lt()),{formState:i}=x(Za)||{},r=c({modelValue:null});y((()=>t.modelValue),(e=>{r.modelValue=e}),{immediate:!0});const n=e=>{a("update:modelValue",e)},s=v((()=>["否","是"][Number(r.modelValue===o["active-value"])]));return y((()=>{var e;return null==(e=i.formData)?void 0:e[l.value.name]}),(e=>{r.modelValue=e}),{immediate:!0,deep:!0}),(a,t)=>{const i=je;return b(),V(xt,T({class:"com-van-switch-wrap"},N(l),{"model-value":N(r).modelValue}),{input:g((()=>[e.isView?(b(),V(Pt,{key:0,value:N(s)},null,8,["value"])):(b(),V(i,T({key:1,"model-value":N(r).modelValue},N(o),{onChange:n}),null,16,["model-value"]))])),_:1},16,["model-value"])}}}),[["__scopeId","data-v-2b00e630"]]);var zt=Ae&&Ae.isDate,qt=zt?Ie(zt):function(e){return Re(e)&&"[object Date]"==ke(e)};const Wt=u({inheritAttrs:!1,__name:"ProCalendarV2",props:{type:{type:String,default:"single"},valueType:{type:String,default:"date"},modelValue:{type:[String,Date],default:""},isView:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,{filedAttrs:o,filedSlots:r,attrs:n,slots:s}=U(Lt()),d=c({fieldValue:"",defaultDate:null}),[u,m]=q(!1),p={date:"YYYY-MM-DD",datehour:"YYYY-MM-DD HH",datetime:"YYYY-MM-DD HH:mm"},f=v((()=>p[t.valueType]||"YYYY-MM-DD")),h=v((()=>i(d.fieldValue)?d.fieldValue.join("range"===t.type?"~":","):"string"==typeof d.fieldValue?d.fieldValue:"")),V=e=>{let o;o="single"===t.type?l(e).format(f.value):i(e)?e.map((e=>l(e).format(f.value))):[],d.fieldValue=o,a("update:modelValue",o),m(!1)};return y((()=>t.modelValue),(e=>{"single"===t.type?"string"==typeof e&&e&&(d.defaultDate=l(e).toDate()):d.defaultDate=i(e)?e.map((e=>l(e).toDate())):null,d.fieldValue=(e=>"single"===t.type?qt(e)?l(e).format(f.value):e||"":i(e)?e:[])(e)}),{immediate:!0,deep:!0}),(a,t)=>{const l=ee;return b(),_(C,null,[B(Kt,T({"model-value":N(d).fieldValue},N(o),{"field-value-view":N(h),onClick:t[0]||(t[0]=a=>!e.isView&&(u.value=!0))}),O({_:2},[w(Object.keys(N(r)),(e=>({name:e,fn:g((t=>[E(a.$slots,e,k(M(t||{})))]))})))]),1040,["model-value","field-value-view"]),B(l,T({show:N(u),"onUpdate:show":t[1]||(t[1]=e=>J(u)?u.value=e:null),type:e.type,"default-date":N(d).defaultDate},N(n),{onConfirm:V}),O({_:2},[w(Object.keys(N(s)),(e=>({name:e,fn:g((t=>[E(a.$slots,e,k(M(t||{})))]))})))]),1040,["show","type","default-date"])],64)}}});const Xt=u({inheritAttrs:!1,__name:"ProCascaderV2",props:{showFullValue:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object],default:""},columns:{type:Array,default:()=>[]},dictCode:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"name",value:"code",children:"children"})},level:{type:Number,default:0},isView:{type:Boolean,default:!1},selfValueViewFn:{type:Function,default:()=>{}}},emits:["update:modelValue","update:fullValue"],setup(t,{emit:l}){const o=t,r=e(),{dictMap:n}=a(r),{filedAttrs:s,filedSlots:d,attrs:u,slots:m}=U(Lt()),[p,f]=q(!1),h=c({columns:[],modelValue:"",fieldValue:""}),V=()=>{o.isView||f(!0)},S=()=>{f(!1)},A=v((()=>{let e=[];i(o.columns)&&(e=o.columns);const a=n.value[o.dictCode];return o.dictCode&&i(a)&&(e=a),((e,a=0,t="children")=>{const l=(e,o=1)=>i(e)?e.map((({[`${t}`]:e,...r})=>{const n={};return(!a||a&&a>o)&&i(e)&&(n.children=l(e,o+1)),{...r,...n}})):[];return l(e)})(e,o.level)})),I=v((()=>((e,a)=>{const t=[],{value:l,children:r}=o.customFieldName,n=(e,o=0)=>!!i(e)&&e.some(((e,s)=>{const{[r]:d,...u}=e;return t[o]=u,e[l]===a||!!i(d)&&n(d,o+1)}));return i(e)&&!n(e)?[]:t})(A.value,h.modelValue))),D=v((()=>{if(!i(I.value))return"";const{selfValueViewFn:e,showFullValue:a,customFieldName:t}=o,l=I.value.map((e=>e[t.text])),r="function"==typeof e?e(I.value):"";return r||(a?l.join("/"):l[l.length-1])})),R=({value:e,selectedOptions:a})=>{h.modelValue=e,l("update:modelValue",e),S()};return y((()=>o.modelValue),(e=>{h.modelValue=e}),{immediate:!0,deep:!0}),y((()=>I.value),(e=>{l("update:fullValue",e)}),{deep:!0,immediate:!0}),(e,a)=>{const l=ae,o=Q;return b(),_(C,null,[B(Kt,T({"model-value":N(h).modelValue},N(s),{"is-view":t.isView,"field-value-view":N(D),onClick:V}),O({_:2},[w(Object.keys(N(d)),(a=>({name:a,fn:g((t=>[E(e.$slots,a,k(M(t||{})))]))})))]),1040,["model-value","is-view","field-value-view"]),B(o,{show:N(p),"onUpdate:show":a[0]||(a[0]=e=>J(p)?p.value=e:null),height:60,closeable:!1,class:"com-cascader-popup"},{default:g((()=>[B(l,T({options:N(A),"field-names":t.customFieldName,"model-value":N(h).modelValue},N(u),{onClose:S,onFinish:R}),O({_:2},[w(Object.keys(N(m)),(a=>({name:a,fn:g((t=>[E(e.$slots,a,k(M(t||{})))]))})))]),1040,["options","field-names","model-value"])])),_:3},8,["show"])],64)}}});const Jt={class:"com-image-upload"},Qt={class:"upload-item"};var el=A(u({__name:"ProBaseUpload",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},uploadType:{type:String,default:te.OTHER},category:{type:Number,default:null},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","update:ossKeyList","onUploaded"],setup(e,{emit:a}){const t=e,{slots:l}=U(Lt()),{objectType:o}=x(Za)||{},r=v((()=>Object.keys(l).filter((e=>"default"!==e)))),n=c({modelValue:[],ossKeyList:[]}),s=e=>{le(e.file,t.uploadType).then((e=>{const{code:l,data:i}=e||{};"10000"===l&&i.url&&(n.modelValue.push({url:i.url,category:t.category,objectType:t.objectType||o}),n.ossKeyList.push(i.ossKey),a("onUploaded",i))}))},d=(e,a)=>{const{index:t}=a;n.modelValue.splice(t,1),n.ossKeyList.splice(t,1)};return y((()=>n.ossKeyList),(e=>{a("update:ossKeyList",e)}),{deep:!0,immediate:!0}),y((()=>t.modelValue),(e=>{console.log("1111111cest"),i(e)?n.modelValue=e:n.modelValue=[]}),{deep:!0,immediate:!0}),(a,t)=>{const l=oe;return b(),_("div",Jt,[B(l,{"model-value":N(n).modelValue,"after-read":s,"max-count":e.maxCount,"before-delete":d,disabled:e.isView},O({default:g((()=>[E(a.$slots,"default",{},(()=>[F("div",Qt,[B(ie,{name:"image-upload",class:"icon"})])]),!0)])),_:2},[w(N(r),(e=>({name:e,fn:g((t=>[E(a.$slots,e,k(M(t||{})),void 0,!0)]))})))]),1032,["model-value","max-count","disabled"])])}}}),[["__scopeId","data-v-bad4730a"]]);const al={class:"sub-label"},tl={class:"com-image-upload"},ll={class:"upload-item"};var ol=A(u({__name:"ProUploadV2",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},subLabel:{type:String,default:""},uploadType:{type:String,default:te.OTHER},category:{type:Number,default:re.OTHER},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","onUploaded"],setup(e,{emit:a}){const t=e,{filedAttrs:l,filedSlots:o,attrs:i,slots:r}=U(Lt()),{formState:n,objectType:s,objectId:d}=x(Za)||{},u=v((()=>Object.keys(r).filter((e=>"default"!==e)))),m=c({modelValue:[]}),p=v((()=>(m.modelValue||[]).map((({uri:e})=>({url:e})))));Z((()=>m.modelValue));const f=e=>{le(e.file,t.uploadType).then((e=>{const{code:l,data:o}=e||{};"10000"===l&&o.url&&(m.modelValue.push({objectId:d,uri:o.url,category:t.category,objectType:t.objectType||s}),a("onUploaded",o))}))},h=(e,a)=>{const{index:t}=a;m.modelValue.splice(t,1)};return y((()=>m.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),y((()=>t.modelValue),(e=>{Array.isArray(m.modelValue)&&(m.modelValue=e)}),{deep:!0,immediate:!0}),(a,t)=>{const o=oe,i=Kt;return b(),V(i,{class:z({"com-van-upload-wrap":!0,"com-van-upload-wrap-view":e.isView}),"model-value":N(m).modelValue},O({input:g((()=>[F("div",tl,[B(o,{"model-value":N(p),"after-read":f,"max-count":e.maxCount,"before-delete":h,disabled:e.isView},O({default:g((()=>[E(a.$slots,"default",{},(()=>[F("div",ll,[B(ie,{name:"image-upload",class:"icon"})])]),!0)])),_:2},[w(N(u),(e=>({name:e,fn:g((t=>[E(a.$slots,e,k(M(t||{})),void 0,!0)]))})))]),1032,["model-value","max-count","disabled"])])])),_:2},[e.subLabel?{name:"label",fn:g((()=>[K(P(N(l).label),1),F("span",al,P(e.subLabel),1)])),key:"0"}:void 0]),1032,["class","model-value"])}}}),[["__scopeId","data-v-64d27f69"]]);const il=["onClick"],rl=["src"],nl=["src"],sl={key:1,class:"text"},dl={key:0,class:"upload-item cover"},ul=(e=>(ce("data-v-2003ce89"),e=e(),pe(),e))((()=>F("div",{class:"bg"},null,-1))),ml=["src"],cl={class:"text"};var pl=A(u({inheritAttrs:!1,__name:"ProIDCardUploadV2",props:{modelValue:{type:Array,default:()=>[]},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","ocr"],setup(e,{emit:a}){const t=e,l=[{uploadType:te.ID_CARD_FRONT,category:re.OBVERSE_CERT,title:"上传人像面",imgSrc:ne},{uploadType:te.ID_CARD_BACK,category:re.REVERSE_CERT,title:"上传国徽面",imgSrc:se}],{filedAttrs:o}=U(Lt()),{formState:r,objectType:s,objectId:d}=x(Za)||{},u=p(),m=c({currentIndex:null,modelValue:[],ossKeyList:[]}),f=v((()=>m.modelValue.map((e=>[{url:e.uri}]))));Z((()=>m.modelValue));const h=(e,a)=>{const{uploadType:i,title:n,category:u}=l[a];le(e.file,i).then((e=>{const{code:l,data:i}=e||{};"10000"===l&&i.url&&(m.modelValue[a]={...m.modelValue[a],objectId:d,uri:i.url,category:u,name:n,objectType:t.objectType||s},m.ossKeyList[a]=i.ossKey,r.formData&&o.value.name&&(r.formData[o.value.name]=m.modelValue))}))},E=e=>{t.isView||(m.currentIndex=e,n((()=>{var e;null==(e=u.value)||e.chooseFile()})))};return y((()=>m.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),y((()=>t.modelValue),(e=>{Array.isArray(e)&&e.length&&(m.modelValue=e)}),{deep:!0,immediate:!0}),y((()=>m.ossKeyList),(e=>{i(e)&&2===e.length&&de({ossKey:e,imageType:me.ID_CARD}).then((e=>{const{data:t,code:l}=e;if("10000"===l&&t&&t.idCardOcrVO){const{personName:e,personIdCard:l,validDateEnd:o,validDateStart:i,...r}=t.idCardOcrVO||{};a("ocr",{name:e,certNo:l,certEndDate:o,certStartDate:i,...r})}}))}),{deep:!0}),(a,t)=>{const i=oe;return b(),V(Kt,T({class:"com-van-id-card-upload-wrap","model-value":N(m).modelValue},N(o)),{input:g((()=>[(b(),_(C,null,w(l,((a,t)=>B(i,{key:a.uploadType,"max-count":1,deletable:!1,"preview-full-image":e.isView,disabled:e.isView,"model-value":N(f)[t],"after-read":e=>h(e,t),onClickPreview:e=>E(t)},{"preview-cover":g((()=>[e.isView?S("",!0):(b(),_("div",dl,[ul,F("img",{src:N(ue),class:"icon"},null,8,ml),F("div",cl,P(a.title),1)]))])),default:g((()=>[F("div",{class:"upload-item",onClick:()=>E(t)},[F("img",{src:a.imgSrc,class:"bg"},null,8,rl),e.isView?S("",!0):(b(),_("img",{key:0,src:N(ue),class:"icon"},null,8,nl)),e.isView?S("",!0):(b(),_("div",sl,P(a.title),1))],8,il)])),_:2},1032,["preview-full-image","disabled","model-value","after-read","onClickPreview"]))),64)),B(i,{ref_key:"tempUploaderRef",ref:u,class:"temp-uploader","max-count":1,"after-read":e=>h(e,N(m).currentIndex)},null,8,["after-read"])])),_:1},16,["model-value"])}}}),[["__scopeId","data-v-2003ce89"]]);const fl={class:"sub-label"},vl={class:"upload-item"};var yl=A(u({inheritAttrs:!1,__name:"ProBankUpload",props:{modelValue:{type:Array,default:()=>[]},subLabel:{type:String,default:""},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","ocr"],setup(e,{emit:a}){const t=e,l=[{category:re.OBVERSE_BANK_CARD,title:"银行卡正面照"},{category:re.REVERSE_BANK_CARD,title:"银行卡反面照"}],o=Le("BANK"),{filedAttrs:r}=U(Lt()),{objectType:n,objectId:s}=x(Za)||{},d=c({currentIndex:null,modelValue:[],ossKeyList:[]});Z((()=>d.modelValue));const u=v((()=>d.modelValue.map((e=>e?[{url:e.uri}]:[]))));return y((()=>d.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),y((()=>t.modelValue),(e=>{d.modelValue=e||[]}),{deep:!0,immediate:!0}),y((()=>d.ossKeyList),(e=>{i(e)&&2===e.length&&de({ossKey:e,imageType:me.BANK_CARD}).then((e=>{var t;const{data:l,code:i}=e;if("10000"===i&&l&&l.bankCardOcrVO){const{cardNo:e,bankName:i}=l.bankCardOcrVO,{code:r}=(null==(t=o.value)?void 0:t.find((e=>e.name===i)))||{};a("ocr",{bankName:i,payBank:r,bankCardNo:e})}}))}),{deep:!0}),(a,o)=>{const i=ie,m=oe;return b(),V(Kt,T({class:"com-van-bank-upload-wrap","model-value":N(d).modelValue},N(r)),O({input:g((()=>[(b(),_(C,null,w(l,((o,r)=>F("div",{key:o.title,class:"com-image-upload"},[B(m,{"max-count":1,"preview-full-image":e.isView,disabled:e.isView,deletable:!e.isView,"model-value":N(u)[r],"before-delete":()=>(e=>{d.modelValue[e]=null})(r),"after-read":e=>((e,a)=>{const{title:o,category:i}=l[a];le(e.file,te.BANK_CARD).then((e=>{const{code:l,data:r}=e||{};"10000"===l&&r.url&&(d.modelValue[a]={...d.modelValue[a],objectId:s,uri:r.url,category:i,name:o,objectType:t.objectType||n},d.ossKeyList[a]=r.ossKey)}))})(e,r)},{default:g((()=>[E(a.$slots,"default",{},(()=>[F("div",vl,[B(i,{name:"image-upload",class:"icon"})])]),!0)])),_:2},1032,["preview-full-image","disabled","deletable","model-value","before-delete","after-read"])]))),64))])),_:2},[e.subLabel?{name:"label",fn:g((()=>[K(P(N(r).label),1),F("span",fl,P(e.subLabel),1)])),key:"0"}:void 0]),1040,["model-value"])}}}),[["__scopeId","data-v-40d84558"]]);var hl=A(u({inheritAttrs:!1,__name:"ProDatePickerV2",props:{relatedName:{type:String,default:""},type:{type:String,default:"date"},modelValue:{type:[String,Date],default:""},isView:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]}},emits:["update:modelValue","cancel"],setup(e,{emit:a}){const t=e,{filedAttrs:o,filedSlots:i,attrs:r,slots:n}=U(Lt()),{formState:s}=x(Za)||{},[d,u]=q(!1),m=v((()=>!["time","month-day"].includes(t.type))),p=v((()=>m.value?new Date:null)),f=c({fieldValue:"",date:p.value}),h={datetime:"YYYY-MM-DD HH:mm",date:"YYYY-MM-DD","year-month":"YYYY-MM","month-day":"MM-DD",datehour:"YYYY-MM-DD HH",time:"mm:ss"},V=v((()=>({minDate:new Date(1900,0,1),maxDate:new Date}))),S=v((()=>h[t.type]||"YYYY-MM-DD HH:mm")),A=e=>{const o=qt(e)?l(e).format(S.value):e;((e,a)=>{if(t.relatedName&&e){const l=(Vt[t.relatedName]||{})[`${e}Effect`];"function"==typeof l&&l(a,s)}})("onChange",o),f.fieldValue=o,a("update:modelValue",f.fieldValue),u(!1)},I=()=>{u(!1),a("cancel")},D=e=>{qt(e)?(f.date=e,f.fieldValue=l(e).format(S.value)):"string"==typeof e&&(f.fieldValue=e,m.value?f.date=l(e,S.value).isValid()?l(e,S.value).toDate():p.value:f.date=e)};return y((()=>t.modelValue),(e=>{D(e)}),{immediate:!0,deep:!0}),y((()=>{var e;return null==(e=s.formData)?void 0:e[o.value.name]}),(e=>{D(e)}),{immediate:!0,deep:!0}),(a,t)=>{const l=fe,s=Q;return b(),_(C,null,[B(Kt,T({"model-value":N(f).fieldValue},N(o),{"is-view":e.isView,class:`${!1===N(o).visible?"com-van-field--hidden":""} ${a.$attrs.class}`,"field-value-view":N(f).fieldValue,onClick:t[0]||(t[0]=a=>!e.isView&&(d.value=!0))}),O({_:2},[w(Object.keys(N(i)),(e=>({name:e,fn:g((t=>[E(a.$slots,e,k(M(t||{})),void 0,!0)]))})))]),1040,["model-value","is-view","class","field-value-view"]),B(s,{show:N(d),"onUpdate:show":t[1]||(t[1]=e=>J(d)?d.value=e:null),height:40,closeable:!1},{default:g((()=>[B(l,T({type:e.type,"model-value":N(f).date},{...N(V),...N(r)},{onConfirm:A,onCancel:I}),O({_:2},[w(Object.keys(N(n)),(e=>({name:e,fn:g((t=>[E(a.$slots,e,k(M(t||{})),void 0,!0)]))})))]),1040,["type","model-value"])])),_:3},8,["show"])],64)}}}),[["__scopeId","data-v-0fa4d998"]]);var bl=A(u({__name:"ProSMSCode",props:{time:{type:Number,default:60},smsText:{type:String,default:"验证码"},relatedName:{type:String,default:"mobile"},isView:{type:Boolean,default:!1},sendSMSCode:{type:Function,default:e=>{"function"==typeof e&&e()}}},setup(e){const a=e,{formState:t,formRef:l}=x(Za)||{},o=c({isCountdowning:!1}),{current:i,start:r,reset:n}=ve({time:1e3*a.time,onFinish(){o.isCountdowning=!1}}),s=()=>{o.isCountdowning||l.value.validate(a.relatedName).then((()=>{a.sendSMSCode({mobile:t.formData[a.relatedName]},(()=>{o.isCountdowning=!0,I({message:"短信发送成功，请查收"}),n(),r()}))})).catch((()=>{}))},d=v((()=>{const{seconds:e}=i.value||{};return 0===e?a.smsText:o.isCountdowning?`${e}s`:a.smsText}));return(a,t)=>{const l=ye;return e.isView?S("",!0):(b(),V(xt,T({key:0,class:"com-pro-sms-code",type:"digit"},a.$attrs,{"is-view":e.isView}),{extra:g((()=>[B(l,{class:"extra-button",size:"small",plain:"",type:"primary",onClick:s},{default:g((()=>[K(P(N(d)),1)])),_:1})])),_:1},16,["is-view"]))}}}),[["__scopeId","data-v-ad3198f2"]]);var Vl=A(u({__name:"SchemaRenderField",props:{schema:{default:()=>[]},model:{default:()=>({})},config:{default:()=>({})},isView:{type:Boolean}},setup(e){const a=e,t=m(),l=c({config:{},formData:{},schema:[],isView:!1}),o=v((()=>Object.keys(t).filter((e=>"default"!==e))));return y([()=>a.schema,()=>l.config],(([e,a])=>{l.schema=e.map((e=>({...e,componentName:Ye[e.componentName]?D(Ye[e.componentName]):e.componentName,...a[e.name],nanoid:s()}))).filter((e=>!e.hidden))}),{immediate:!0,deep:!0}),y((()=>a.model),(e=>{e&&(l.formData=e)}),{immediate:!0,deep:!0}),y((()=>a.config),(e=>{l.config=e}),{immediate:!0,deep:!0}),(e,a)=>(b(!0),_(C,null,w(N(l).schema,((a,t)=>(b(),V(R(a.componentName),T({key:`${a.nanoid}_${t}`,modelValue:N(l).formData[a.name],"onUpdate:modelValue":e=>N(l).formData[a.name]=e},a,{"is-view":e.isView}),O({_:2},[w(N(o),(a=>({name:a,fn:g((t=>[E(e.$slots,a,k(M(t||{})),void 0,!0)]))})))]),1040,["modelValue","onUpdate:modelValue","is-view"])))),128))}}),[["__scopeId","data-v-367b1ee2"]]);const gl=u({inheritAttrs:!1,__name:"ProBank",props:{required:{type:Boolean,default:!1},attributeValueList:{type:Array,default:()=>[]},isView:{type:Boolean,default:!1}},setup(e){const a=e,{formState:t,markRequired:l}=x(Za)||{},o=v((()=>i(a.attributeValueList)?a.attributeValueList.map((e=>({...Ba[e.code],isView:a.isView,required:a.required,label:e.value}))):[]));return(a,l)=>(b(),V(Vl,{schema:N(o),model:N(t).formData,"is-view":e.isView},null,8,["schema","model","is-view"]))}}),Nl=u({inheritAttrs:!1,__name:"ProAddress",props:{modelValue:{type:Object,default:()=>({})},name:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"name",value:"code",children:"children"})},valuePrefix:{type:String,default:""},isView:{type:Boolean,default:!1},attributeValueList:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,l=c({address:{detail:""}}),o=v((()=>{if(!t.valuePrefix)return l.address;return Object.keys(l.address).reduce(((e,a)=>(e[(e=>"string"==typeof e&&e?t.valuePrefix?`${t.valuePrefix}${ct(e)}`:e:"")(a)]=l.address[a],e)),{})})),r=v((()=>{if(i(t.attributeValueList)){let e=0,a=!1;return t.attributeValueList.forEach((t=>{Number(t.code)>e&&"4"!==String(t.code)&&(e=Number(t.code)),"4"===String(t.code)&&(a=!0)})),{level:e&&e+1,showDetail:a}}return{level:0,showDetail:!0}})),n=v((()=>{var e;const{level:a}=r.value,t=["province","city","area"][0===a?"area":a-2];return null==(e=l.address)?void 0:e[t]})),s=(e=[])=>{let a={};if(i(e)){const{text:l,value:o}=t.customFieldName;a=["province","city","area"].slice(0,Number(r.value.level||3)).reduce(((a,t,i)=>{const r=e[i+1]||{};return a[t]=r[o],a[`${t}Name`]=r[l],a}),{})}l.address={...l.address,...a}};return y((()=>l.address),(()=>{a("update:modelValue",l.address)}),{deep:!0}),y((()=>t.modelValue),(e=>{l.address=e||{}}),{immediate:!0,deep:!0}),(a,t)=>{const i=xt;return b(),_(C,null,[B(Kt,{class:"com-van-field--hidden",name:e.name,"model-value":N(o),rules:a.$attrs.rules,required:a.$attrs.required},null,8,["name","model-value","rules","required"]),B(Xt,T({"show-full-value":"","custom-field-name":e.customFieldName},a.$attrs,{"model-value":N(n),"is-view":e.isView,level:N(r).level,"onUpdate:fullValue":s}),null,16,["custom-field-name","model-value","is-view","level"]),N(r).showDetail?(b(),V(i,{key:0,modelValue:N(l).address.detail,"onUpdate:modelValue":t[0]||(t[0]=e=>N(l).address.detail=e),"is-view":e.isView,type:"textarea",label:`${a.$attrs.label}详细地址`,required:a.$attrs.required,maxlength:50},null,8,["modelValue","is-view","label","required"])):S("",!0)],64)}}});const _l={class:"occupation-view"},wl={key:0,class:"class-tips"},Cl={class:"occupation-view"},Sl={key:0,class:"class-tips"};var El=A(u({inheritAttrs:!1,__name:"ProOccupation",props:{name:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"value",value:"code",children:"children"})},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,{formState:l}=x(Za)||{},o="name",r=c({modelValue:[],text:"",occupationClass:""}),n=(e=[])=>{var a;let n=[];if(i(e)){n=e.map((e=>e[t.customFieldName.value]));const{[null==(a=null==t?void 0:t.customFieldName)?void 0:a.text]:i,[o]:s}=e[e.length-1];r.text=i,r.occupationClass=s,(null==l?void 0:l.formData)&&(l.formData.occupationClass=s)}r.modelValue=n},s=v((()=>i(r.modelValue)?r.modelValue[r.modelValue.length-1]:null));return y((()=>t.modelValue),(e=>{r.modelValue=e}),{deep:!0,immediate:!0}),y((()=>r.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),(a,t)=>(b(),_(C,null,[B(Kt,{modelValue:N(r).modelValue,"onUpdate:modelValue":t[0]||(t[0]=e=>N(r).modelValue=e),class:"com-van-field--hidden",name:e.name,rules:a.$attrs.rules,required:a.$attrs.required},null,8,["modelValue","name","rules","required"]),B(Xt,T({"custom-field-name":e.customFieldName},a.$attrs,{"model-value":N(s),"onUpdate:fullValue":n}),{"value-view":g((()=>[F("span",_l,[K(P(N(r).text),1),N(r).occupationClass?(b(),_("span",wl,P(N(r).occupationClass)+"类",1)):S("",!0)])])),option:g((({option:a={}})=>{var t;return[F("span",Cl,[K(P(null==a?void 0:a[null==(t=e.customFieldName)?void 0:t.text]),1),(null==a?void 0:a[o])?(b(),_("span",Sl,P(null==a?void 0:a[o])+"类",1)):S("",!0)])]})),_:1},16,["custom-field-name","model-value"])],64))}}),[["__scopeId","data-v-3447de66"]]);var Tl=A(u({inheritAttrs:!1,__name:"ProRenderFormWithCard",props:{title:{type:String,default:""},class:{type:String,default:""}},setup(e,{expose:a}){const t=e,l=p(null),o=m(),i=v((()=>Object.keys(o).filter((e=>"cardTitleExtra"!==e))));return a({...["submit","getValues","validate","resetValidation","getValidationStatus","scrollToField"].reduce(((e,a)=>(e[a]=(...e)=>{var t;return null==(t=l.value)?void 0:t[a](...e)},e)),{})}),(a,o)=>{const r=he;return b(),V(r,{class:z(`com-pro-form-with-card com-card-body-no-padding ${t.class}`),"show-divider":!1,title:e.title},{extra:g((()=>[E(a.$slots,"cardTitleExtra",{},void 0,!0)])),default:g((()=>[B(kt,T({ref_key:"renderFormRef",ref:l},a.$attrs),O({_:2},[w(N(i),(e=>({name:e,fn:g((t=>[E(a.$slots,e,k(M(t||{})),void 0,!0)]))})))]),1040)])),_:3},8,["class","title"])}}}),[["__scopeId","data-v-dc30f30c"]]);const Al=u({__name:"PayInfo",props:{schema:{default:()=>[]},config:{default:()=>[]},modelValue:{default:()=>[]},isView:{type:Boolean,default:!1},userData:{default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:a,emit:t}){const l=e,o="1",r=p(null),n=["cardType","bankCard"],d=["orderId","tenantId","id"],u={paymentType:"1",paymentMethod:"1",expiryMethod:"1",cardType:Be.DEBIT},m=[...Object.keys(u),"paymentGenre"],f=[{title:"首期支付",schema:[],payInfoType:Fe.FIRST_TERM,formData:{},config:{cardType:{isView:!0}},objectType:be.INIT_SIGN},{title:"续期支付",schema:[],payInfoType:Fe.RENEW_TERM,formData:{paymentGenre:String(Ue.FIRST_SAME)},config:{cardType:{isView:!0}},objectType:be.RENEWAL_SIGN},{title:"年金领取银行卡",schema:[],payInfoType:Fe.REPRISE,formData:{paymentMethod:"1",paymentGenre:String(Ue.FIRST_SAME)},config:{},objectType:be.ANNUAL_SIGN}].map((e=>({...e,nanoid:s()}))),h=[["initialPaymentMethod","initialCardType","initialBankCard","initialPaymentType"],["renewalPaymentGenre","renewalPaymentMethod","renewalCardType","renewalBankCard","renewalPaymentType","expiryMethod"],["annuityPaymentGenre","annuityBankCard"]],g=c({schemaList:[]}),S=v((()=>{var e,a;return(null==(a=null==(e=l.userData.insuredList)?void 0:e[0])?void 0:a.name)||null})),E=v((()=>{var e,a;return(null==(a=null==(e=l.userData)?void 0:e.holder)?void 0:a.name)||null})),T=v((()=>["FIRST_TERM","RENEW_TERM","REPRISE"].reduce(((e,a)=>{const t=(l=a,g.schemaList.findIndex((e=>String(e.payInfoType)===String(Fe[l]))));var l;return t>-1&&(e[a]=t),e}),{}))),A=(e,a)=>{var t,l;return e>-1&&(null==(l=null==(t=g.schemaList[e])?void 0:t.formData)?void 0:l.paymentGenre)===`${Ue[a]}`},I=v((()=>{const e=g.schemaList.map((e=>`${e.payInfoType}`));return f.filter((a=>e.includes(String(a.payInfoType))))})),D=(e,a)=>{var t;const{formData:l}=g.schemaList[a]||{},{paymentGenre:o,id:r,...n}=l||{},s={...n,bankCardImage:i(n.bankCardImage)?n.bankCardImage.map((a=>{var t,l;return{...a,objectType:null==(l=null==(t=I.value)?void 0:t[e])?void 0:l.objectType}})):[]};Object.assign(null==(t=g.schemaList[e])?void 0:t.formData,s)};return y((()=>g.schemaList.map((e=>{var a,t;return[null==(a=null==e?void 0:e.formData)?void 0:a.paymentMethod,null==(t=null==e?void 0:e.formData)?void 0:t.paymentGenre]}))),((e,a)=>{tt("支付方式/支付类型变动"),g.schemaList.forEach(((e,a)=>{const{formData:t,schema:l}=e||{},i=o===String(null==t?void 0:t.paymentMethod),r=[Ue.FIRST_SAME,Ue.RENEW_SAME].includes(Number(null==t?void 0:t.paymentGenre));l.forEach((e=>{e.hidden=(r||!i)&&((e,a=!1)=>{if(e){const t=[...n];return a&&t.push("paymentMethod"),t.includes(e)}return!1})(e.name,r)})),e.nanoid=s()}))}),{deep:!0,immediate:!0}),y((()=>{var e;return{...null==(e=g.schemaList[T.value.FIRST_TERM])?void 0:e.formData}}),((e,a)=>{if(l.isView||Ot(e,a))return!1;const{REPRISE:t,RENEW_TERM:o}=T.value;tt("首期数据变动"),A(o,"FIRST_SAME")&&D(o,T.value.FIRST_TERM),A(t,"FIRST_SAME")&&D(t,o)}),{deep:!0}),y((()=>{var e;return null==(e=g.schemaList[T.value.RENEW_TERM])?void 0:e.formData}),((e,a)=>{if(l.isView||Ot(e,a))return!1;tt("续期数据变动");const{REPRISE:t,RENEW_TERM:o}=T.value;A(t,"RENEW_SAME")&&D(t,o)}),{deep:!0}),y((()=>g.schemaList.map((e=>{var a;return null==(a=null==e?void 0:e.formData)?void 0:a.paymentMethod}))),((e,a)=>{JSON.stringify(e)!==JSON.stringify(a)&&g.schemaList.forEach(((t,l)=>{const o=e[l],i=a[l],r=o&&i&&String(o)!==String(i);t.payInfoType!==Fe.REPRISE&&r&&"1"!==String(o)&&ge(t.formData,{...yt(t.formData,(e=>La.includes(e))),bankCardImage:null})}))}),{deep:!0}),y((()=>{var e,a;return null==(a=null==(e=g.schemaList[T.value.RENEW_TERM])?void 0:e.formData)?void 0:a.paymentGenre}),(e=>{var a,t;if(l.isView)return!1;tt("续期支付类型变动");const{FIRST_TERM:o,RENEW_TERM:i}=T.value;String(e)===String(Ue.FIRST_SAME)?D(i,o):g.schemaList[i]&&(ge(g.schemaList[i].formData,{...yt(g.schemaList[i].formData,(e=>!d.includes(e))),...null==(t=null==(a=I.value)?void 0:a[i])?void 0:t.formData,accountName:E.value,paymentGenre:e}),g.schemaList[i].nanoid=s())})),y((()=>{var e,a;return null==(a=null==(e=g.schemaList[T.value.REPRISE])?void 0:e.formData)?void 0:a.paymentGenre}),((e,a)=>{var t,o;if(l.isView||!e||!a||e===a)return!1;const{FIRST_TERM:i,RENEW_TERM:r,REPRISE:n}=T.value,u=[Ue.FIRST_SAME,Ue.RENEW_SAME].includes(Number(e));if(tt("年金支付类型变动"),u){const a=String(e)===String(Ue.FIRST_SAME)?i:r;D(n,a)}else g.schemaList[n]&&(ge(g.schemaList[n].formData,{...yt(g.schemaList[n].formData,(e=>!d.includes(e))),...null==(o=null==(t=I.value)?void 0:t[n])?void 0:o.formData,accountName:S.value,paymentGenre:e}),g.schemaList[n].nanoid=s())}),{immediate:!0}),y([()=>l.schema,()=>l.config],(()=>{let e=[];g.schemaList=l.schema.reduce(((a,t)=>{const l=h.findIndex((e=>e.includes(t.name)));if("paymentDrawType"===t.name&&(e=t.columns.map((e=>e.code))),l>-1){const e=(e=>{if("string"!=typeof e||!e)return"";const[a,t]=e.match(/^(?:initial|renewal|annuity)(.*)$/)||[];return t?pt(t):e})(t.name);if(m.includes(e)){const o=(({name:e,columns:a},t)=>{if(i(a)){const l={...t,...u},o=i(a)&&a.find((a=>`${a.code}`==`${l[e]}`));return{[e]:o?l[e]:null}}return{}})({name:e,columns:t.columns},f[l].formData);ge(a[l].formData,o),ge(f[l].formData,o)}a[l].schema.push({...t,name:e,payInfoType:f[l].payInfoType})}return a}),Ve(f)).map(((e,a)=>({...e,config:{...e.config,...l.config[a]||{}},nanoid:s()}))).filter((({schema:a,...t})=>e.includes(`${t.payInfoType}`)&&i(a)))}),{deep:!0,immediate:!0}),y((()=>l.modelValue),(e=>{i(e)&&g.schemaList.forEach(((a,t)=>{ge(a.formData,e[t])}))}),{deep:!0,immediate:!0}),y((()=>{var e;return null==(e=g.schemaList)?void 0:e.map((e=>e.formData))}),(e=>{i(e)&&t("update:modelValue",e.map(((e,a)=>{const{payInfoType:t}=g.schemaList[a];return{...e,payInfoType:t}})))}),{deep:!0,immediate:!0}),y((()=>[E.value,S.value]),(([e,a])=>{(e||a)&&g.schemaList.forEach((t=>{const l=t.payInfoType===Fe.REPRISE;t.formData.accountName=l?a:e}))}),{deep:!0}),a({validate:e=>{var a;return Promise.all(r.value?null==(a=r.value)?void 0:a.map((e=>null==e?void 0:e.validate())):[])}}),(e,a)=>(b(!0),_(C,null,w(N(g).schemaList,((a,t)=>(b(),V(N(Tl),{ref_for:!0,ref_key:"payInfoFormRef",ref:r,key:`${a.nanoid}_${t}`,schema:a.schema,model:a.formData,config:a.config,title:a.title,"is-view":e.isView,"extra-provision":{objectType:a.objectType,objectId:a.formData.id}},null,8,["schema","model","config","title","is-view","extra-provision"])))),128))}});export{Tl as P,Al as _,ot as a,xt as b,tt as c,hl as d,Bt as e,kt as f,bt as g,Gt as h,Ot as i,bl as j,Nl as k,yt as r,ut as t,lt as v};

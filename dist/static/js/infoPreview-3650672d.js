import{G as e,d as t,c as n,A as a,i as o,w as r,f as s,U as i,V as l,E as d,g as c,e as u,W as p,bl as f,X as m,Y as I,u as y,z as v,r as h,L as O,Z as b,o as P,b as _,h as j,aI as g,aJ as V,a9 as L,by as C,k as w,j as x,P as k,n as E,p as S,a3 as N,aa as R}from"./index-655f425b.js";import{t as A}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-d2d058c0.js";/* empty css              */import"./bankCard-d97010dd.js";import{_ as T}from"./PayInfo-5f5bad4b.js";import{g as q,i as F}from"./trial-2de6224d.js";import{n as U}from"./nextStep-d9062bc0.js";import{u as D}from"./useAttachment-74cf0693.js";import{a as $,q as W}from"./product-c793fd41.js";import{g as B}from"./utils-bc4d0c77.js";import{u as J}from"./useOrder-2c54ca32.js";import{P as Y,B as G}from"./constants-7afb7c3d.js";import{P as M}from"./index-f4d83aba.js";import"./infoCollection-e004c5a6.js";import{P as z}from"./index-2deb78d4.js";import{I as H,P as X,d as Q}from"./trial-a9922483.js";import"./pdfh5-008ca364.js";import"./phoneVerify-256bb25d.js";import"./_initCloneObject-0663309f.js";import"./isObjectLike-a9798079.js";import"./debounce-eed12388.js";import"./index-2bc1b096.js";import"./index-3413e731.js";import"./core-05f5b046.js";import"./constant-8927d485.js";import"./cloneDeep-1de8e9b0.js";const Z={class:"com-insured-part-wrapper"},K={class:"content-wrapper"};var ee=e(t({__name:"InsureInfo",props:{productData:{default:()=>({})}},setup(e){const t=(e,t)=>-1!==t.indexOf("$")?t.replace("$",`${e}`):`${e||""}${t}`;return(m,I)=>{const y=p,v=f;return n(),a("div",Z,[o(v,{title:"保障信息"},{default:r((()=>{var r;return[s("div",K,[(n(!0),a(i,null,l((null==(r=e.productData)?void 0:r.tenantOrderRiskList)||[],((e,r)=>(n(),a("div",{key:r,class:"risk-item"},[s("p",null,d(e.riskName),1),o(y,{title:"保障期间",content:t(e.insurancePeriodValue,c(H)[e.insurancePeriodType])},null,8,["content"]),o(y,{title:"交费期间",content:t(e.paymentPeriod,c(X)[e.paymentPeriodType])},null,8,["content"]),o(y,{title:"交费方式",content:c(Q)[e.paymentFrequency]},null,8,["content"]),(n(!0),a(i,null,l(e.liabilityDetails,((e,t)=>(n(),u(y,{key:t,title:e.liabilityName,content:"投保"},null,8,["title"])))),128)),o(y,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(y,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])))),128))])]})),_:1})])}}}),[["__scopeId","data-v-4bdbacf9"]]);const te={class:"long-info-preview"},ne={class:"footer-btn"},ae=s("span",null,"分享",-1),oe=t({__name:"infoPreview",setup(e){m((()=>I((()=>import("./index-b01ba080.js")),["static/js/index-b01ba080.js","static/css/index-fa4edf2a.css","static/js/index-655f425b.js","static/css/index-f9ad39f9.css","static/js/pdfh5-008ca364.js","static/js/index-2deb78d4.js","static/css/index-827a8544.css","static/js/utils-bc4d0c77.js","static/js/infoCollection-e004c5a6.js","static/js/trial-a9922483.js"]))),m((()=>I((()=>import("./index-2e2cc662.js")),["static/js/index-2e2cc662.js","static/css/index-3329e46f.css","static/js/index-655f425b.js","static/css/index-f9ad39f9.css","static/js/pdfh5-008ca364.js"])));const t=y(),a=J(),{productCode:i="",tenantId:l,agentCode:d="",agencyCode:p,saleChannelId:f,isShare:H,orderNo:X,extraInfo:Q,insurerCode:Z,preview:K}=t.query;let oe={};try{oe=JSON.parse(decodeURIComponent(Q))}catch(Pe){}const re=v({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),se=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,ie=h({imgUrl:"",desc:"",title:"",link:se}),le=h(),de=h(),ce=h({}),ue=h({}),pe=h([]),fe=h(),me=h({});h(!1),h(!1),h(0),h(!0),D(me,fe),h(!1);const Ie=h(!1);h(),O((()=>{var e,t;const{insureProductRiskVOList:n}=(null==(t=null==(e=ue.value)?void 0:e.productPlanInsureVOList)?void 0:t[0])||{};return(n||[]).find((e=>e.mainRiskFlag===b.YES))}));const ye=h(),ve=()=>{U(a.value,((e,t)=>{t===k.JUMP_PAGE&&ye.value.handleShare()}))},he=async()=>{K?E(Y.INFO_PREVIEW,t.query):(Object.assign(a.value,{extInfo:{...a.value.extInfo,buttonCode:G.INFO_PREVIEW,pageCode:Y.INFO_PREVIEW}}),U(a.value,((e,n)=>{n===k.JUMP_PAGE&&S(e.nextPageCode,t.query)})))},Oe=v({tenantOrderPayInfoList:[]}),be=async()=>{$({productCode:i,tenantId:l}).then((({data:e,code:t})=>{if("10000"===t){ce.value=e;const{wxShareConfig:t,showWXShare:n,title:a,desc:o,image:r}=(null==e?void 0:e.PRODUCT_LIST)||{};n?Object.assign(ie.value,{...t,isShare:n}):Object.assign(ie.value,{title:a,desc:o,image:r,isShare:n}),N(e.BASIC_INFO.themeType)}})),X&&q({orderNo:X,tenantId:l}).then((({code:e,data:t})=>{"10000"===e&&(Oe.tenantOrderPayInfoList=t.tenantOrderPayInfoList,Object.assign(a.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),(()=>{const e={},{tenantOrderHolder:t,tenantOrderInsuredList:n}=a.value;e.holder={personVO:{...t,...t.extInfo}},e.insuredVOList=(n||[]).map((e=>({personVO:{...e,...e.extInfo,beneficiaryList:e.tenantOrderBeneficiaryList.map((e=>({personVO:e})))}}))),re.personalInfo=e})(),Ie.value=!0)})),W({productCode:i}).then((({code:e,data:t})=>{var n,a,o,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:s}=t;fe.value=e||[];const{basicInfo:{questionnaireType:i},questions:l,questionnaireName:d}=(null==(n=null==s?void 0:s[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};i&&(pe.value=2===i?[{attachmentName:d,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(a=null==l?void 0:l[0])?void 0:a.content,attachmentType:B(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(r=null==l?void 0:l[0])?void 0:r.content)}])}})),await F({productCode:i,isTenant:!K}).then((({data:e,code:t})=>{var n,a;if("10000"===t){ue.value=e,me.value=(null==(n=e.productPlanInsureVOList)?void 0:n[0])||{};const{payInfo:t}=A(null==(a=me.value)?void 0:a.productFactor);re.payInfo={...re.payInfo,...t}}}))};return P((()=>{be()})),(e,t)=>{const i=R,l=_("ProPageWrap");return n(),u(l,null,{default:r((()=>{var l,d,p,f,m,I;return[s("div",te,[o(ee,{"product-data":null==(p=null==(d=null==(l=c(a).tenantOrderInsuredList)?void 0:l[0])?void 0:d.tenantOrderProductList)?void 0:p[0]},null,8,["product-data"]),(null==(f=c(me))?void 0:f.productFactor)?(n(),u(c(M),{key:0,ref_key:"personalInfoRef",ref:de,modelValue:c(re).personalInfo,"onUpdate:modelValue":t[0]||(t[0]=e=>c(re).personalInfo=e),"product-factor":null==(m=c(me))?void 0:m.productFactor,"multi-insured-config":null==(I=c(me))?void 0:I.multiInsuredConfigVO,"is-view":""},null,8,["modelValue","product-factor","multi-insured-config"])):j("",!0),c(re).payInfo.schema.length?(n(),u(c(T),{key:1,ref_key:"payInfoRef",ref:le,modelValue:c(Oe).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>c(Oe).tenantOrderPayInfoList=e),schema:c(re).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):j("",!0),s("div",ne,[!c(H)&&c(ie).isShare&&c(g)()?(n(),u(V,L({key:0},c(ie),{class:"share-btn",onClick:C(ve,["stop"])}),{default:r((()=>[o(i,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ae])),_:1},16,["onClick"])):j("",!0),o(z,{shadow:!1,onClick:he},{default:r((()=>[w(e.$slots,"default",{},(()=>[x("下一步")]))])),_:3})])])]})),_:3})}}});export{oe as default};

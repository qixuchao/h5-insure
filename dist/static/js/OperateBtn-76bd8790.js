import{d as e,h as a,i as r,k as o,aj as t,o as n,c as d,u as s,p as i,w as l,a8 as c,cZ as p,f as u,_ as m,aa as y,a6 as f,aN as h,cw as C,cx as N,cy as I,e8 as g}from"./index-7888b407.js";import{c as k}from"./order-965d9fc4.js";const $={class:"operate-wrap"},z=e({name:"operateBtn"});var B=m(e({...z,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:m}){const z=e,B=a(),S=r(),{tenantId:w,nextPageCode:x,isShare:F}=S.query,_=o((()=>{const{orderTopStatus:e,productClassFlag:a,orderStatus:r}=z.detail;return!("-1"!==e||y.orderList!==S.path||"underWritingFailed"===r&&a===f.YES||["manualUnderWriting","offlinePayment","paymentFailed"].includes(r))})),P=o((()=>{const{policyNo:e,applicationNo:a,orderStatus:r}=z.detail;return!e&&a&&"cancel"!==r})),j=o((()=>{const{orderStatus:e}=z.detail;return["offlinePayment","manualUnderWriting","paymentFailed"].includes(e)})),q=()=>{const{orderStatus:e,orderNo:a,insurerCode:r,underwriteFlag:o,templateId:t,iseeBizNo:n}=z.detail;let d=y.sign;("collectInfo"===e||"underWritingFailed"===e&&o===f.NO)&&(d=y.infoCollection),B.push({path:d,query:{...S.query,tenantId:w,orderNo:a,insurerCode:r,templateId:t,iseeBizNo:n}})},W=()=>{const{orderNo:e,orderId:a}=z.detail;F?h.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{m("handleCancel")})):k({tenantId:w,orderNo:e,type:1}).then((({code:e,data:a})=>{"10000"===e&&h.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:a,holderGender:r,orderId:o,orderNo:t,insurerCode:n,iseeBizNo:d}=z.detail||{},s=a,i=`${C[r]}士`;N({shareType:0,title:`${I.cancel.title}`,desc:I.cancel.desc.replace("{name}",`${s}${i},`),url:`${window.location.href}&objectType=${e}&insurerCode=${n}&isShare=1&orderNo=${t}&iseeBizNo=${d}&orderId=${o}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:g})})("holder")}))}))},b=()=>{const{orderNo:e,orderId:a,insurerCode:r,iseeBizNo:o}=z.detail;B.push({path:y.updateBankInfo,query:{tenantId:w,orderNo:e,orderId:a,insurerCode:r,nextPageCode:"orderDetail",iseeBizNo:o}})};return(e,a)=>{const r=t;return n(),d("div",$,[s(_)?(n(),i(r,{key:0,type:"primary",size:"small",onClick:p(q,["stop"])},{default:l((()=>[c("去处理")])),_:1},8,["onClick"])):u("",!0),s(P)?(n(),i(r,{key:1,type:"primary",plain:"",size:"small",onClick:p(W,["stop"])},{default:l((()=>[c("撤单")])),_:1},8,["onClick"])):u("",!0),s(j)?(n(),i(r,{key:2,plain:"",size:"small",onClick:p(b,["stop"])},{default:l((()=>[c("银行卡修改")])),_:1},8,["onClick"])):u("",!0)])}}}),[["__scopeId","data-v-231066af"]]);export{B as O};

var $e=Object.defineProperty,Ne=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var Pe=(o,n,I)=>n in o?$e(o,n,{enumerable:!0,configurable:!0,writable:!0,value:I}):o[n]=I,G=(o,n)=>{for(var I in n||(n={}))Se.call(n,I)&&Pe(o,I,n[I]);if(Re)for(var I of Re(n))Ye.call(n,I)&&Pe(o,I,n[I]);return o},K=(o,n)=>Ne(o,Me(n));import{g as M,L as S,X as x,r as R,h as y,m as B,n as E,k as L,y as O,z as t,a1 as xe,a2 as Te,a5 as X,C as U,x as $,d as H,j as A,s as P,I as w,a6 as je,a4 as z,o as we,F as Q,E as J,ae as Ge,af as Ke,B as Ue,D as He}from"./vendor-4dbfa310.js";import{g as We}from"./index-cff3571e.js";import{S as j,_ as Y,b as qe}from"./index-21ff2934.js";const Xe=[{label:"\u7537",value:"1"},{label:"\u5973",value:"2"}],ze=[{label:"\u6709",value:"1"},{label:"\u65E0",value:"2"}],Qe=[{value:1,label:"\u7B2C5\u4E2A\u4FDD\u5355\u5468\u5E74\u65E5"},{value:2,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8455\u5468\u5C81"},{value:3,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8460\u5468\u5C81"},{value:4,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8465\u5468\u5C81"},{value:5,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8470\u5468\u5C81"},{value:6,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8475\u5468\u5C81"}],Je=[{value:1,label:"\u5E74\u9886"},{value:2,label:"\u6708\u9886"}],W=[{label:"\u8DB8\u4EA4",value:"1"},{label:"\u5E74\u4EA4",value:"2"},{label:"\u534A\u5E74\u4EA4",value:"3"},{label:"\u5B63\u4EA4",value:"4"},{label:"\u6708\u4EA4",value:"5"}],Ze=[{name:"\u540C\u4E3B\u9669\u671F\u95F4\u51CF1",value:"3"},{name:"\u65E0\u9650\u5236",value:"2"}],Oe=[{label:"\u8FD4\u4FDD\u989D",value:"1"},{label:"\u8FD4\u4FDD\u8D39",value:"2"}],et=[{label:"\u6295\u4FDD",value:"0"},{label:"\u4E0D\u6295\u4FDD",value:"-1"}],Mt={1:"\u5929",2:"\u6708",3:"\u5E74",4:"\u81F3$\u5C81",5:"\u81F3\u7EC8\u8EAB",day:1,month:2,year:3,to:4,to_life:5},St={1:"\u8DB8\u4EA4",2:"$\u5E74\u4EA4",3:"\u81F3$\u5C81",single:1,year:2,to:3};new j({source:"sessionStorage"});const _e=new j({source:"localStorage"}),tt=new j({source:"cookie"}),Yt=()=>tt||new j({source:"cookie"});const it=o=>(xe("data-v-4b261f8d"),o=o(),Te(),o),at={class:"com-occupational-wrapper"},ot=it(()=>O("div",{class:"popup-title"},"\u9009\u62E9\u804C\u4E1A",-1)),nt={class:"popup-content"},ut=M({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(o,{emit:n}){const I=o,C=S({show:I.show,options:[],currentValue:""}),b=()=>{n("close")},i=({value:D,selectedOptions:k})=>{const p=(k||[]).map(m=>m.value).join("/"),c=+k[k.length-1].name;n("update:modelValue",c),n("finish",p),b()},v=D=>{const k=D,p=c=>{c.forEach(m=>{const g=m;g.children.length?p(g.children):g.children=null})};return p(k),k},h=(D="")=>{var c;const k=`${(c=D==null?void 0:D.toLocaleUpperCase)==null?void 0:c.call(D)}_OCCUPATION`,p=_e.get("occupational")||{};if(p[k]){C.options=p[k];return}We({dictCodeList:[k]}).then(({code:m,data:g})=>{var s;if(m==="10000"){const e=v(((s=g==null?void 0:g[0])==null?void 0:s.dictItemList)||[]);C.options=e,p[k]=e,_e.set("occupational",p)}})};return x(()=>I,()=>{h(I.insuredCode)},{deep:!0,immediate:!0}),x(()=>I.modelValue,D=>{},{deep:!0,immediate:!0}),(D,k)=>{const p=R("van-cascader"),c=R("VanPopup");return y(),B("div",at,[E(c,{show:t(C).show,"onUpdate:show":k[1]||(k[1]=m=>t(C).show=m),"show-footer":"",position:"bottom",closeable:"",onClose:b},{default:L(()=>[ot,O("div",nt,[E(p,{modelValue:t(C).currentValue,"onUpdate:modelValue":k[0]||(k[0]=m=>t(C).currentValue=m),title:"\u8BF7\u9009\u62E9\u804C\u4E1A","show-header":!1,placeholder:"\u8BF7\u9009\u62E9",options:t(C).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:i},null,8,["modelValue","options"])])]),_:1},8,["show"])])}}});var lt=Y(ut,[["__scopeId","data-v-4b261f8d"]]);const rt={class:"com-personal-info-wrapper"},st={key:0,class:"placeholder"},dt={key:1},mt=M({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(o,{expose:n}){const I=o,[C,b]=X(),[i,v]=X(),h=U(),D=S({formInfo:I.formInfo,occupationalText:""}),k=s=>{D.occupationalText=s},p=()=>{v(!1)},c=()=>new Promise((s,e)=>{h==null||h.value.validate().then(()=>{s("")},()=>{e()})}),m=s=>{const e=s||[];for(let a=0;a<e.length;a++)for(let l=a+1;l<e.length;l++){const r=e[a].split("_"),u=e[l].split("_"),f=e[a];r[0]===u[0]?r>u&&(e[a]=e[l],e[l]=f):r[0]==="age"&&(e[a]=e[l],e[l]=f)}return e},g=$(()=>{const s=m(I==null?void 0:I.ageRange),e=(f="")=>{const V=+f.split("_")[1],N=f.split("_")[0];return[V,N]},a=e(s[0]),l=e(s[s.length-1]),r=H().subtract(a[0],a[1]==="age"?"year":"day").format("YYYY-MM-DD"),u=H().subtract(l[0],l[1]==="age"?"year":"day").format("YYYY-MM-DD");return{minAge:new Date(u),maxAge:new Date(r)}});return n({validateForm:c}),(s,e)=>{const a=R("VanField"),l=R("ProRadioButton"),r=R("VanForm"),u=R("van-datetime-picker"),f=R("van-popup");return y(),B("div",rt,[E(r,{ref_key:"formRef",ref:h,"input-align":"right","error-message-align":"right"},{default:L(()=>[o.factorList.includes("APPLICANT.AGE")||o.factorList.includes("AGE")||o.factorList.includes("DAY")||o.factorList.includes("APPLICANT.DAY")?(y(),A(a,{key:0,modelValue:t(D).formInfo.birthday,"onUpdate:modelValue":e[0]||(e[0]=V=>t(D).formInfo.birthday=V),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F",class:"isLink",readonly:"","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[1]||(e[1]=V=>t(b)(!0))},null,8,["modelValue"])):P("",!0),o.factorList.includes("APPLICANT.GENDER")||o.factorList.includes("GENDER")?(y(),A(a,{key:1,modelValue:t(D).formInfo.gender,"onUpdate:modelValue":e[3]||(e[3]=V=>t(D).formInfo.gender=V),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},{input:L(()=>[E(l,{modelValue:t(D).formInfo.gender,"onUpdate:modelValue":e[2]||(e[2]=V=>t(D).formInfo.gender=V),options:t(Xe)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),o.factorList.includes("SOCIAL_INS")?(y(),A(a,{key:2,modelValue:t(D).formInfo.socialSecurity,"onUpdate:modelValue":e[5]||(e[5]=V=>t(D).formInfo.socialSecurity=V),name:"socialSecurity",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u793E\u4FDD"}]},{input:L(()=>[E(l,{modelValue:t(D).formInfo.socialSecurity,"onUpdate:modelValue":e[4]||(e[4]=V=>t(D).formInfo.socialSecurity=V),options:t(ze)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),o.factorList.includes("OCCUPATION_CATEGORY")?(y(),A(a,{key:3,modelValue:t(D).formInfo.occupationalClass,"onUpdate:modelValue":e[6]||(e[6]=V=>t(D).formInfo.occupationalClass=V),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u804C\u4E1A\u7C7B\u578B"}],name:"occupationalClass",label:"\u804C\u4E1A\u7C7B\u578B","is-link":"",readonly:"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[7]||(e[7]=V=>t(v)(!0))},{input:L(()=>[t(D).occupationalText?(y(),B("div",dt,w(t(D).occupationalText),1)):(y(),B("span",st,"\u8BF7\u9009\u62E9"))]),_:1},8,["modelValue"])):P("",!0)]),_:1},512),E(f,{show:t(C),"onUpdate:show":e[10]||(e[10]=V=>je(C)?C.value=V:null),position:"bottom"},{default:L(()=>[E(u,{type:"date","min-date":t(g).minAge,"max-date":t(g).maxAge,onConfirm:e[8]||(e[8]=V=>{t(D).formInfo.birthday=t(H)(V).format("YYYY-MM-DD"),t(b)(!1)}),onCancel:e[9]||(e[9]=V=>t(b)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"]),t(i)?(y(),A(lt,{key:0,modelValue:t(D).formInfo.occupationalClass,"onUpdate:modelValue":e[11]||(e[11]=V=>t(D).formInfo.occupationalClass=V),show:t(i),"insured-code":o.insuredCode,onFinish:k,onClose:p},null,8,["modelValue","show","insured-code"])):P("",!0)])}}});var jt=Y(mt,[["__scopeId","data-v-14e8e8a8"]]);const ct={class:"com-risk-card-wrapper part-card"},ft={class:"custom-field"},pt={class:"field-tip"},yt={class:"custom-field"},Dt={class:"field-tip"},gt={class:"custom-field"},Vt={class:"field-tip"},kt={key:0},It={key:9,class:"liab-desc"},vt=M({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(o){const n=o,I=U({}),C=z("premium")||{};I.value=z("enumList")||{};const b=U({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),i=S({formInfo:n.formInfo}),v=e=>typeof e!="boolean"&&!e||Array.isArray(e)&&!e.length?!0:{}.toString.call(e)==="object Object"?Object.keys(e).length:!1,h=(e,a,l={})=>{let r=a;return Array.isArray(a)||(r=[`${r}`]),(e||[]).filter(u=>r.includes(`${u.value}`)||r.includes(u.value))},D=$(()=>{var e,a,l,r,u;return((e=n.originData)==null?void 0:e.riskType)===1?h(n.enums.RISK_INSURANCE_PERIOD,((a=n.originData.riskInsureLimitVO)==null?void 0:a.insurancePeriodValueList)||[]):((l=n.originData)==null?void 0:l.periodType)===2?h([{value:"year_1",label:"1\u5E74"}],["year_1"]):h((r=n.enums)==null?void 0:r.RISK_INSURANCE_PERIOD,((u=n.mainRiskData.riskInsureLimitVO)==null?void 0:u.insurancePeriodValueList)||[])}),k=$(()=>{var e,a,l,r,u,f,V,N;return((e=n.originData)==null?void 0:e.riskType)===1?h((a=n==null?void 0:n.enums)==null?void 0:a.RISK_PAYMENT_PERIOD,((l=n.originData.riskInsureLimitVO)==null?void 0:l.paymentPeriodValueList)||[]):((r=n.originData)==null?void 0:r.exemptFlag)===1?h(Ze,[`${(f=(u=n==null?void 0:n.originData)==null?void 0:u.riskInsureLimitVO)==null?void 0:f.paymentPeriodRule}`]):((V=n.originData)==null?void 0:V.periodType)===2?h([{value:"year_1",name:"1\u5E74\u4EA4"}],["year_1"]):h(n.enums.RISK_PAYMENT_PERIOD,((N=n.mainRiskData.riskInsureLimitVO)==null?void 0:N.paymentPeriodValueList)||[])}),p=$(()=>{var e,a,l,r,u;return((e=n.originData)==null?void 0:e.riskType)===1?h(W,((a=n.originData.riskInsureLimitVO)==null?void 0:a.paymentFrequencyList)||[]):((l=n.originData.riskInsureLimitVO)==null?void 0:l.paymentTypeRule)===1?h(W,((r=n.mainRiskData.riskInsureLimitVO)==null?void 0:r.paymentFrequencyList)||[]):h(W,((u=n.mainRiskData.riskInsureLimitVO)==null?void 0:u.paymentFrequencyList)||[])}),c=$(()=>{var l,r;let e=0,a=0;return(((r=(l=n.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.paymentMethodLimitList)||[]).forEach((u,f)=>{f===0&&(e=u.minAmount,a=u.maxAmount),e>u.minAmount&&(e=u.minAmount),a<u.maxAmount&&(a=u.maxAmount)}),i.formInfo.amount=e,{min:e,max:a}}),m=$(()=>{var l,r;let e=0,a=0;return(((r=(l=n.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.paymentMethodLimitList)||[]).forEach((u,f)=>{f===0&&(e=u.minPremium,a=u.maxPremium),e>u.minPremium&&(e=u.minPremium),a<u.maxPremium&&(a=u.maxPremium)}),i.formInfo.premium=e,{min:e,max:a}}),g=$(()=>{var l,r,u,f;const e=((r=(l=n.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.minCopy)||1,a=(f=(u=n.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:f.maxCopy;return i.formInfo.copy=`${e||1}`,{min:e,max:a}}),s=(e,a)=>{var r,u;const l=((u=(r=n.originData)==null?void 0:r.riskCalcMethodInfoVO)==null?void 0:u.increaseDecreaseNum)||1;return+e%l===0?"":`\u91D1\u989D\u5FC5\u987B\u662F${l}\u7684\u500D\u6570`};return we(()=>{var a,l;const e={riskType:n.originData.riskType,riskId:n.originData.id,riskName:n.originData.riskName,riskCode:n.originData.riskCode,mainRiskCode:(a=n==null?void 0:n.mainRiskData)==null?void 0:a.riskCode,mainRiskId:(l=n==null?void 0:n.mainRiskData)==null?void 0:l.id,riskCategory:n.originData.riskCategory,liabilityVOList:(n.originData.riskLiabilityInfoVOList||[]).map(r=>K(G({},r),{liabilityAttributeCode:r.liabilityAttributeType,liabilityCode:r.liabilityCode,liabilityRateType:r.liabilityRateType}))};Object.assign(i==null?void 0:i.formInfo,e)}),x(()=>{var e;return(e=i.formInfo)==null?void 0:e.paymentFrequency},(e=0)=>{var a,l,r;[3,4].includes(((a=n.originData.riskCalcMethodInfoVO)==null?void 0:a.saleMethod)||0)&&(((r=(l=n.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.paymentMethodLimitList)||[]).forEach(u=>{+u.paymentFrequency==+e&&Object.assign(i.formInfo,{amount:u.perCopyAmount,premium:u.perCopyPremium})}),+e==1&&i.formInfo.chargePeriod!=="single"&&(i.formInfo.chargePeriod="single")}),x(()=>{var e;return(e=i.formInfo)==null?void 0:e.chargePeriod},e=>{e==="single"&&+(i.formInfo.paymentFrequency||0)!=1&&(i.formInfo.paymentFrequency=1)}),x(()=>n==null?void 0:n.mainRiskInfo,e=>{var a,l,r,u,f,V;e&&n.originData.riskType===2&&(((l=(a=n.originData)==null?void 0:a.riskInsureLimitVO)==null?void 0:l.insurancePeriodRule)===1&&(e.coveragePeriod?b.value.coveragePeriod.disabled=!0:b.value.coveragePeriod.prevent=!0,i.formInfo.coveragePeriod=e.coveragePeriod||""),((u=(r=n.originData)==null?void 0:r.riskInsureLimitVO)==null?void 0:u.paymentPeriodRule)===1&&(e.chargePeriod?b.value.chargePeriod.disabled=!0:b.value.chargePeriod.prevent=!0,i.formInfo.chargePeriod=e.chargePeriod||""),((V=(f=n.originData)==null?void 0:f.riskInsureLimitVO)==null?void 0:V.paymentTypeRule)===1&&(e.paymentFrequency?b.value.paymentFrequency.disabled=!0:b.value.paymentFrequency.prevent=!0,i.formInfo.paymentFrequency=e.paymentFrequency||0))},{immediate:!0,deep:!0}),(e,a)=>{var Z,ee,te,ie,ae,oe,ne,ue,le,re,se,de,me,ce,fe,pe,ye,De,ge,Ve,ke,Ie,ve,be,Fe,Le,he,Ee,Ce,Ae;const l=R("ProSvg"),r=R("ProTitle"),u=R("VanStepper"),f=R("VanField"),V=R("ProRadioButton"),N=R("ProExpand");return y(),B("div",ct,[E(r,{"risk-type":o.originData.riskType,title:o.originData.riskName},{default:L(()=>[o.removeRiskList.includes(o.originData.id)?(y(),B("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=d=>o.removeRisk(o.originData.id))},[E(l,{name:"delete",color:"#0d6efe"})])):P("",!0)]),_:1},8,["risk-type","title"]),((Z=o.originData.riskCalcMethodInfoVO)==null?void 0:Z.saleMethod)===1&&o.originData.exemptFlag===2?(y(),A(f,{key:0,modelValue:t(i).formInfo.amount,"onUpdate:modelValue":a[2]||(a[2]=d=>t(i).formInfo.amount=d),label:"\u4FDD\u989D",name:"amount",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:s}]},{input:L(()=>{var d,F;return[O("div",ft,[E(u,{modelValue:t(i).formInfo.amount,"onUpdate:modelValue":a[1]||(a[1]=_=>t(i).formInfo.amount=_),"input-width":"64px",min:t(c).min,step:((d=o.originData.riskCalcMethodInfoVO)==null?void 0:d.increaseDecreaseNum)||1,max:t(c).max},null,8,["modelValue","min","step","max"]),O("span",pt,w(`\u91D1\u989D\u6700\u4F4E${t(c).min}\u5143\uFF0C\u4E3A${((F=o.originData.riskCalcMethodInfoVO)==null?void 0:F.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((te=(ee=o.originData)==null?void 0:ee.riskCalcMethodInfoVO)==null?void 0:te.saleMethod)===2?(y(),A(f,{key:1,modelValue:t(i).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=d=>t(i).formInfo.premium=d),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:s}]},{input:L(()=>{var d,F,_,T;return[O("div",yt,[E(u,{modelValue:t(i).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=q=>t(i).formInfo.premium=q),step:((F=(d=o.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:F.increaseDecreaseNum)||1,min:t(m).min,"input-width":"64px",max:t(m).max},null,8,["modelValue","step","min","max"]),O("span",Dt,w(`\u91D1\u989D\u6700\u4F4E${t(m).min}\u5143\uFF0C\u4E3A${((T=(_=o.originData)==null?void 0:_.riskCalcMethodInfoVO)==null?void 0:T.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((ae=(ie=o.originData)==null?void 0:ie.riskCalcMethodInfoVO)==null?void 0:ae.saleMethod)===3||((ne=(oe=o.originData)==null?void 0:oe.riskCalcMethodInfoVO)==null?void 0:ne.saleMethod)===4&&(((le=(ue=o.originData)==null?void 0:ue.riskCalcMethodInfoVO)==null?void 0:le.minCopy)||((se=(re=o.originData)==null?void 0:re.riskCalcMethodInfoVO)==null?void 0:se.maxCopy))?(y(),A(f,{key:2,modelValue:t(i).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=d=>t(i).formInfo.copy=d),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:L(()=>[O("div",gt,[E(u,{modelValue:t(i).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=d=>t(i).formInfo.copy=d),step:1,min:t(g).min,max:t(g).max},null,8,["modelValue","min","max"]),O("span",Vt,w(`${t(g).min}\u4EFD\u8D77\u8D2D\uFF0C\u6700\u591A\u8D2D\u4E70${t(g).max}\u4EFD`),1)])]),_:1},8,["modelValue"])):P("",!0),(![1,4].includes(((de=o.originData.riskCalcMethodInfoVO)==null?void 0:de.saleMethod)||0)||((me=o.originData)==null?void 0:me.exemptFlag)===1)&&((fe=t(C))==null?void 0:fe[(ce=o.originData)==null?void 0:ce.riskCode])?(y(),A(f,{key:3,label:"\u4FDD\u989D"},{input:L(()=>{var d,F,_;return[O("div",null,w((_=(F=t(C))==null?void 0:F[(d=o.originData)==null?void 0:d.riskCode])==null?void 0:_.amount),1)]}),_:1})):P("",!0),!v((ye=(pe=o.originData)==null?void 0:pe.riskInsureLimitVO)==null?void 0:ye.insurancePeriodValueList)||!v((ge=(De=o.originData)==null?void 0:De.riskInsureLimitVO)==null?void 0:ge.insurancePeriodRule)?(y(),A(f,{key:4,modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":a[8]||(a[8]=d=>t(i).formInfo.coveragePeriod=d),label:"\u4FDD\u969C\u671F\u95F4",name:"coveragePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4FDD\u969C\u671F\u95F4"}]},{input:L(()=>[E(V,{modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":a[7]||(a[7]=d=>t(i).formInfo.coveragePeriod=d),disabled:b.value.coveragePeriod.disabled,prevent:b.value.coveragePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4FDD\u969C\u671F\u95F4":"",options:t(D),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!v((ke=(Ve=o.originData)==null?void 0:Ve.riskInsureLimitVO)==null?void 0:ke.paymentPeriodValueList)||!v((ve=(Ie=o.originData)==null?void 0:Ie.riskInsureLimitVO)==null?void 0:ve.paymentPeriodRule)?(y(),A(f,{key:5,modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":a[10]||(a[10]=d=>t(i).formInfo.chargePeriod=d),label:"\u4EA4\u8D39\u671F\u95F4",name:"chargePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u671F\u95F4"}]},{input:L(()=>[E(V,{modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":a[9]||(a[9]=d=>t(i).formInfo.chargePeriod=d),disabled:b.value.chargePeriod.disabled,prevent:b.value.chargePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u671F\u95F4":"",options:t(k),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!v((be=o.originData.riskInsureLimitVO)==null?void 0:be.paymentFrequencyList)||!v((Fe=o.originData.riskInsureLimitVO)==null?void 0:Fe.paymentPeriodRule)?(y(),A(f,{key:6,modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=d=>t(i).formInfo.paymentFrequency=d),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u65B9\u5F0F"}]},{input:L(()=>[E(V,{modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=d=>t(i).formInfo.paymentFrequency=d),disabled:b.value.paymentFrequency.disabled,prevent:b.value.paymentFrequency.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u65B9\u5F0F":"",options:t(p)},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),v((he=(Le=o.originData)==null?void 0:Le.riskInsureLimitVO)==null?void 0:he.annuityDrawTypeList)?P("",!0):(y(),A(f,{key:7,modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=d=>t(i).formInfo.annuityDrawDate=d),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65F6\u95F4"}]},{input:L(()=>{var d;return[E(V,{modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=F=>t(i).formInfo.annuityDrawDate=F),options:h(t(Qe),((d=o.originData.riskInsureLimitVO)==null?void 0:d.annuityDrawTypeList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),v((Ce=(Ee=o.originData)==null?void 0:Ee.riskInsureLimitVO)==null?void 0:Ce.annuityDrawFrequencyList)?P("",!0):(y(),A(f,{key:8,modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=d=>t(i).formInfo.annuityDrawType=d),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65B9\u5F0F"}]},{input:L(()=>{var d;return[E(V,{modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=F=>t(i).formInfo.annuityDrawType=F),options:h(t(Je),((d=o.originData.riskInsureLimitVO)==null?void 0:d.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),(y(!0),B(Q,null,J(o.originData.riskLiabilityInfoVOList||[],(d,F)=>(y(),B("div",{key:F},[d.optionalFlag===1?(y(),A(f,{key:0,modelValue:t(i).formInfo.liabilityVOList[F].liabilityAttributeValue,"onUpdate:modelValue":_=>t(i).formInfo.liabilityVOList[F].liabilityAttributeValue=_,label:d.liabilityName,name:"liabilityAttributeValue",rules:[{required:d.liabilityAttributeValue,message:`\u8BF7\u9009\u62E9${d.liabilityName}`}]},{input:L(()=>{var _,T;return[O("div",null,[v(d.liabilityAttributeValueList)?(y(),B("span",kt,"50\u4E07")):(y(),A(V,{key:1,modelValue:t(i).formInfo.liabilityVOList[F].liabilityAttributeValue,"onUpdate:modelValue":q=>t(i).formInfo.liabilityVOList[F].liabilityAttributeValue=q,options:h(t(Oe),(T=(_=o.originData.riskLiabilityInfoVOList)==null?void 0:_[F])==null?void 0:T.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(y(),A(f,{key:1,modelValue:t(i).formInfo.liabilityVOList[F].liabilityAttributeValue,"onUpdate:modelValue":_=>t(i).formInfo.liabilityVOList[F].liabilityAttributeValue=_,label:d.liabilityName,name:"liabilityAttributeValue"},{input:L(()=>{var _,T;return[O("div",null,[v(d.liabilityAttributeValueList)?(y(),A(V,{key:0,modelValue:t(i).formInfo.liabilityVOList[F].liabilityAttributeValue,"onUpdate:modelValue":q=>t(i).formInfo.liabilityVOList[F].liabilityAttributeValue=q,options:t(et)},null,8,["modelValue","onUpdate:modelValue","options"])):(y(),A(V,{key:1,modelValue:t(i).formInfo.liabilityVOList[F].liabilityAttributeValue,"onUpdate:modelValue":q=>t(i).formInfo.liabilityVOList[F].liabilityAttributeValue=q,options:h(t(Oe),(T=(_=o.originData.riskLiabilityInfoVOList)==null?void 0:_[F])==null?void 0:T.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label"]))]))),128)),((Ae=o.originData)==null?void 0:Ae.relationDesc)?(y(),B("div",It,[E(N,{title:"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E"},{default:L(()=>[O("div",null,w(o.originData.relationDesc),1)]),_:1})])):P("",!0)])}}});var Be=Y(vt,[["__scopeId","data-v-afd6265a"]]);const bt=o=>(xe("data-v-1f13cbe8"),o=o(),Te(),o),Ft={class:"com-risk-list-wrapper"},Lt=bt(()=>O("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),ht={class:"risk-list"},Et={class:"cell-title"},Ct={class:"title"},At={class:"footer-bar"},Rt=Ue("\u786E\u8BA4"),Pt=M({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(o,{emit:n}){const I=o,C=U([]),b=U([]),i=U([...I.disabled]),v=S({show:I.show,currentChecked:[...I.modelValue]}),h=(c,m)=>{if(!I.collocationList.length){if(m){v.currentChecked=[];return}v.currentChecked.push(c);return}let g=v.currentChecked,s=i.value;m?(I.collocationList.forEach(e=>{c===e.riskId&&(e.collocationType===2?g=g.filter(a=>a!==e.collocationRiskId||a!==c):e.collocationType===3?(g=g.filter(a=>a!==c),s=s.filter(a=>a!==e.collocationRiskId)):g=g.filter(a=>a!==c))}),v.currentChecked=g,i.value=s):(I.collocationList.forEach(e=>{c===e.riskId&&(m||(e.collocationType===2?g.push(e.collocationRiskId):e.collocationType===3&&s.push(e.collocationRiskId),g.push(c)))}),v.currentChecked.push(...g),i.value=s)},D=c=>{var g,s,e;if(i.value.includes(c))return;const m=v.currentChecked.includes(c);h(c,m),(e=(s=(g=C==null?void 0:C.value)==null?void 0:g[c])==null?void 0:s.toggle)==null||e.call(s)},k=()=>{n("close")},p=()=>{const c=I.riskList.filter(m=>v.currentChecked.includes(m.id));n("update:modelValue",[...new Set(b.value)]),n("finished",c,i.value),n("close")};return Ge(()=>{C.value=[]}),x(()=>v.currentChecked,c=>{b.value=c},{deep:!0,immediate:!0}),x(()=>I.modelValue,c=>{b.value=c||[],i.value.push(...c||[])},{deep:!0,immediate:!0}),(c,m)=>{const g=R("van-checkbox"),s=R("VanCell"),e=R("van-cell-group"),a=R("van-checkbox-group"),l=R("VanButton"),r=R("VanPopup");return y(),B("div",Ft,[E(r,{show:t(v).show,"onUpdate:show":m[1]||(m[1]=u=>t(v).show=u),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",round:"",position:"bottom",closeable:"",onClose:k},{default:L(()=>[Lt,O("div",ht,[E(a,{modelValue:b.value,"onUpdate:modelValue":m[0]||(m[0]=u=>b.value=u)},{default:L(()=>[E(e,{inset:""},{default:L(()=>[(y(!0),B(Q,null,J(o.riskList,u=>(y(),A(s,{key:u.id,title:u.riskName,disabled:i.value.includes(u.id),onClick:f=>D(u.id)},{"right-icon":L(()=>[E(g,{ref_for:!0,ref:f=>C.value[u.id]=f,shape:"square",disabled:i.value.includes(u.id),name:u.id,onClick:Ke(f=>D(u.id),["stop"])},null,8,["disabled","name","onClick"])]),title:L(()=>[O("div",Et,[O("div",Ct,w(u.riskName),1)])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),O("div",At,[E(l,{type:"primary",disabled:!t(v).currentChecked.length,block:"",onClick:p},{default:L(()=>[Rt]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var Ot=Y(Pt,[["__scopeId","data-v-1f13cbe8"]]);const _t={class:"risk-list-wrapper"},Bt={key:1,class:"add-rider-risk"},xt={class:"left-part"},Tt=Ue("+ \u9644\u52A0\u9669"),wt=M({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(o){var D;const n=o,I=z("source")||"",[C,b]=X(!1);U(null),U(null);const i=S({mainRiskInfo:n.riskInfo,riderRiskInfo:((D=n.riskInfo)==null?void 0:D.riderRiskVOList)||[],requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),v=(k,p)=>{i.requiredRiderRiskData=i.requiredRiderRiskData.concat(k),i.disabledList=p},h=k=>{He.confirm({message:"\u786E\u5B9A\u8981\u5220\u9664\u9644\u52A0\u9669\u4E48\uFF1F"}).then(()=>{var c;const p=[k];(((c=i.mainRiskData)==null?void 0:c.collocationVOList)||[]).forEach(m=>{k===m.riskId&&(m.collocationType===2||m.collocationType===3)&&p.push(m.collocationRiskId)});debugger;i.checkedList=i.checkedList.filter(m=>!p.includes(m)),i.requiredRiderRiskData=i.requiredRiderRiskData.filter(m=>!p.includes(m.id)),i.disabledList=i.disabledList.filter(m=>!p.includes(m)),Object.assign(i.riderRiskInfo,{[k]:void 0})}).catch(()=>{})};return we(()=>{i.requiredRiderRiskData}),x(()=>i.requiredRiderRiskData,k=>{const p=[i.mainRiskData,...k];let c=[],m=[];const g=[];p.forEach((s,e)=>{var l,r,u;const a=((l=s==null?void 0:s.riskCalcMethodInfoVO)==null?void 0:l.riskFactorRelationList)||[];c=c.concat(a.filter(f=>f.factorObject==="insured").map(f=>f.factorCode)),m=m.concat(a.filter(f=>f.factorObject==="holder").map(f=>f.factorCode)),g.push((r=s==null?void 0:s.riskInsureLimitVO)==null?void 0:r.minHolderAge,(u=s==null?void 0:s.riskInsureLimitVO)==null?void 0:u.maxHolderAge)}),(k||[]).forEach(s=>{var a;const e={riskType:s.riskType,riskId:s.id,riskCode:s.riskCode,riskName:s.riskName,mainRiskCode:i.mainRiskData.riskCode,mainRiskId:(a=i.mainRiskData)==null?void 0:a.id,riskCategory:s.riskCategory,liabilityVOList:(s.riskLiabilityInfoVOList||[]).map(l=>K(G({},l),{liabilityAttributeCode:l.liabilityAttributeType,liabilityCode:l.liabilityCode,liabilityRateType:l.liabilityRateType}))};Object.assign(i.riderRiskInfo,{[s.id]:e})}),n.pickFactor({insuredFactorList:[...new Set(c)],holderFactorList:[...new Set(m)],ageRange:g})},{deep:!0,immediate:!0}),x(()=>n.originData,k=>{(k||[]).forEach(p=>{p.riskType===1?(i.mainRiskData=p,i.requiredRiderRiskData=p.requiredRiderRiskVOList||[],i.riderRiskList=p.optionalRiderRiskVOList):i.riderRiskList.push(p)})},{deep:!0,immediate:!0}),(k,p)=>{var m,g,s;const c=R("ProCheckButton");return y(),B("div",_t,[t(i).mainRiskData?(y(),A(Be,{key:0,enums:o.enums,"form-info":t(i).mainRiskInfo,"origin-data":t(i).mainRiskData},null,8,["enums","form-info","origin-data"])):P("",!0),(y(!0),B(Q,null,J(t(i).requiredRiderRiskData,(e,a)=>(y(),A(Be,{key:e.id,"form-info":t(i).riderRiskInfo[e.id],index:a,enums:o.enums,"main-risk-data":t(i).mainRiskData,"main-risk-info":t(i).mainRiskInfo,"origin-data":e,"remove-risk":h,"remove-risk-list":t(i).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"]))),128)),t(I)!=="proposal"&&((m=t(i).riderRiskList)==null?void 0:m.length)-((g=t(i).checkedList)==null?void 0:g.length)?(y(),B("div",Bt,[O("span",xt,w(`\u5171\u6709${t(i).riderRiskList.length-t(i).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),E(c,{activated:"",onClick:p[0]||(p[0]=e=>t(b)(!0))},{default:L(()=>[Tt]),_:1})])):P("",!0),t(C)?(y(),A(Ot,{key:2,modelValue:t(i).checkedList,"onUpdate:modelValue":p[1]||(p[1]=e=>t(i).checkedList=e),show:t(C),disabled:t(i).disabledList,"risk-list":t(i).riderRiskList,"collocation-list":((s=t(i).mainRiskData)==null?void 0:s.collocationVOList)||[],onFinished:v,onClose:p[2]||(p[2]=e=>t(b)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):P("",!0)])}}});var Gt=Y(wt,[["__scopeId","data-v-bc6c5424"]]);const Kt=(o={})=>qe.post("/api/app/insure/product/insureProductDetail",o),Ht=o=>qe.post("/api/app/insure/insurance/premiumCalc",o);export{Mt as I,jt as P,Gt as R,St as a,Ot as b,Kt as i,Ht as p,Yt as u};

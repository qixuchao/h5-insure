import{aR as e,aS as a,_ as t,d as l,U as o,r as d,i,aT as s,j as r,aA as u,z as n,aU as m,aM as c,o as f,l as p,w as v,u as V,c as y,F as b,n as g,aV as h,a0 as w,aW as _,f as D,aX as S,aY as C,q as k,T as j,aZ as N,t as x,aK as A,a8 as Y,e as P,aG as $,ao as O,ar as M,a_ as F,av as B,a$ as R,b as T,m as L,as as I,al as E,b0 as U,b1 as q,b2 as K,b3 as H,b4 as z,b5 as W,b6 as G,b7 as X,a as Z,b8 as J,b9 as Q,E as ee,ba as ae,ae as te,bb as le,at as oe,au as de,bc as ie,aw as se,bd as re,be as ue,am as ne,p as me,aE as ce}from"./index-b7b909b3.js";import{M as fe,e as pe,U as ve,a as Ve,d as ye,S as be,f as ge,s as he,t as we}from"./keysIn-131bbce9.js";import{S as _e,i as De,b as Se}from"./isObjectLike-a9798079.js";import{d as Ce,c as ke}from"./_getTag-0507d0b1.js";import{d as je}from"./debounce-6981b306.js";import{V as Ne,u as xe,i as Ae,b as Ye,_ as Pe,d as $e,e as Oe,f as Me,h as Fe,P as Be,j as Re,k as Te,l as Le}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-6a9ab8dc.js";/* empty css              */import{S as Ie}from"./index-b55a66af.js";import{u as Ee}from"./useDicData-93afb491.js";var Ue=Object.freeze(Object.defineProperty({__proto__:null,get ProRenderForm(){return la},get ProFieldV2(){return Pe},get ProRadioV2(){return oa},get ProPickerV2(){return da},get ProSwitchV2(){return ia},get ProCalendarV2(){return ua},get ProCascaderV2(){return na},get ProBaseUpload(){return Te},get ProUploadV2(){return Le},get ProIDCardUploadV2(){return ba},get ProBankUpload(){return wa},get ProDatePickerV2(){return _a},get ProValidateDate(){return Da},get ProSMSCode(){return Sa},get ProBank(){return ka},get ProAddress(){return ja},get ProOccupation(){return Pa},get ProRenderFormWithCard(){return $a}},Symbol.toStringTag,{value:"Module"}));function qe(e){var a=-1,t=null==e?0:e.length;for(this.__data__=new fe;++a<t;)this.add(e[a])}function Ke(e,a){for(var t=-1,l=null==e?0:e.length;++t<l;)if(a(e[t],t,e))return!0;return!1}qe.prototype.add=qe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},qe.prototype.has=function(e){return this.__data__.has(e)};function He(e,a,t,l,o,d){var i=1&t,s=e.length,r=a.length;if(s!=r&&!(i&&r>s))return!1;var u=d.get(e),n=d.get(a);if(u&&n)return u==a&&n==e;var m=-1,c=!0,f=2&t?new qe:void 0;for(d.set(e,a),d.set(a,e);++m<s;){var p=e[m],v=a[m];if(l)var V=i?l(v,p,m,a,e,d):l(p,v,m,e,a,d);if(void 0!==V){if(V)continue;c=!1;break}if(f){if(!Ke(a,(function(e,a){if(i=a,!f.has(i)&&(p===e||o(p,e,t,l,d)))return f.push(a);var i}))){c=!1;break}}else if(p!==v&&!o(p,v,t,l,d)){c=!1;break}}return d.delete(e),d.delete(a),c}function ze(e){var a=-1,t=Array(e.size);return e.forEach((function(e,l){t[++a]=[l,e]})),t}function We(e){var a=-1,t=Array(e.size);return e.forEach((function(e){t[++a]=e})),t}var Ge=_e?_e.prototype:void 0,Xe=Ge?Ge.valueOf:void 0;var Ze=Object.prototype.hasOwnProperty;var Je="[object Object]",Qe=Object.prototype.hasOwnProperty;function ea(e,a,t,l,o,d){var i=Ve(e),s=Ve(a),r=i?"[object Array]":ke(e),u=s?"[object Array]":ke(a),n=(r="[object Arguments]"==r?Je:r)==Je,m=(u="[object Arguments]"==u?Je:u)==Je,c=r==u;if(c&&ye(e)){if(!ye(a))return!1;i=!0,n=!1}if(c&&!n)return d||(d=new be),i||ge(e)?He(e,a,t,l,o,d):function(e,a,t,l,o,d,i){switch(t){case"[object DataView]":if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=a.byteLength||!d(new ve(e),new ve(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return pe(+e,+a);case"[object Error]":return e.name==a.name&&e.message==a.message;case"[object RegExp]":case"[object String]":return e==a+"";case"[object Map]":var s=ze;case"[object Set]":var r=1&l;if(s||(s=We),e.size!=a.size&&!r)return!1;var u=i.get(e);if(u)return u==a;l|=2,i.set(e,a);var n=He(s(e),s(a),l,o,d,i);return i.delete(e),n;case"[object Symbol]":if(Xe)return Xe.call(e)==Xe.call(a)}return!1}(e,a,r,t,l,o,d);if(!(1&t)){var f=n&&Qe.call(e,"__wrapped__"),p=m&&Qe.call(a,"__wrapped__");if(f||p){var v=f?e.value():e,V=p?a.value():a;return d||(d=new be),o(v,V,t,l,d)}}return!!c&&(d||(d=new be),function(e,a,t,l,o,d){var i=1&t,s=Ce(e),r=s.length;if(r!=Ce(a).length&&!i)return!1;for(var u=r;u--;){var n=s[u];if(!(i?n in a:Ze.call(a,n)))return!1}var m=d.get(e),c=d.get(a);if(m&&c)return m==a&&c==e;var f=!0;d.set(e,a),d.set(a,e);for(var p=i;++u<r;){var v=e[n=s[u]],V=a[n];if(l)var y=i?l(V,v,n,a,e,d):l(v,V,n,e,a,d);if(!(void 0===y?v===V||o(v,V,t,l,d):y)){f=!1;break}p||(p="constructor"==n)}if(f&&!p){var b=e.constructor,g=a.constructor;b==g||!("constructor"in e)||!("constructor"in a)||"function"==typeof b&&b instanceof b&&"function"==typeof g&&g instanceof g||(f=!1)}return d.delete(e),d.delete(a),f}(e,a,t,l,o,d))}function aa(e,a,t,l,o){return e===a||(null==e||null==a||!De(e)&&!De(a)?e!=e&&a!=a:ea(e,a,t,l,aa,o))}function ta(e,a){return aa(e,a)}var la=t(l({__name:"ProRenderForm",props:{validateMethod:{default:"show-error"},model:{default:()=>({})},isView:{type:Boolean,default:!1},schema:{default:()=>[]},config:{default:()=>({})},markRequired:{type:Boolean,default:!0},extraProvision:null},emits:["failed"],setup(t,{expose:l,emit:x}){const A=t,Y=o(),P=d({config:{},formData:{},schema:[],nameList:[],dictCodeList:[]}),$=i({});s(Ne,{formState:P,formRef:$,markRequired:A.markRequired&&!A.isView,...A.extraProvision});const O=r((()=>Object.keys(Y).filter((e=>"default"!==e)))),M=r((()=>u(A.schema))),F=r((()=>{const[e,a]={toast:[!1,!1],"show-error":[!1,!0],"show-error-message":[!0,!1]}[A.validateMethod];return{"show-error-message":e,"show-error":a}})),B=({values:e,errors:a})=>{if("toast"===A.validateMethod){const e=a.reduce(((e,a)=>(e[a.name]=a,e)),{}),t=Object.keys(e);if(t.length){const a=P.nameList.reduce(((e,a)=>(t.includes(a)&&e.push(a),e)),[]),{message:l}=e[a[0]]||{};j({message:l})}}console.log("failed errors",a),x("failed",{values:e,errors:a})};return n([()=>A.schema,()=>P.config],(([e,a])=>{M.value&&(P.schema=e.map((e=>({...e,componentName:Ue[e.componentName]?m(Ue[e.componentName]):e.componentName,...a[e.name],nanoid:c()}))).filter((e=>!e.hidden)))}),{immediate:!0,deep:!0}),n((()=>A.config),(e=>{P.config=e}),{immediate:!0,deep:!0}),n((()=>P.dictCodeList),je((t=>{t&&(async t=>{const l=e(),{dictMap:o}=a(l);"string"==typeof t?(await l.getDict([t]),o.value[t]):(await l.getDict(t),t.map((e=>o.value[e])))})(t)}),500),{immediate:!0,deep:!0}),n((()=>A.model),((e,a)=>{ta(e,a)||(P.formData=e)}),{immediate:!0,deep:!0}),n((()=>P.schema),(e=>{P.dictCodeList=[...new Set([...P.dictCodeList,...P.schema.reduce(((e,a)=>(a.dictCode&&e.push(a.dictCode),e)),[])])]}),{immediate:!0,deep:!0}),l({...["submit","getValues","validate","resetValidation","getValidationStatus","scrollToField"].reduce(((e,a)=>(e[a]=(...e)=>{var t;return null==(t=$.value)?void 0:t[a](...e)},e)),{})}),(e,a)=>{const l=N;return f(),p(l,w({ref_key:"formRef",ref:$,class:"com-van-form"},{...V(F),...e.$attrs},{onFailed:B}),{default:v((()=>[V(M)?(f(!0),y(b,{key:0},g(P.schema,((a,l)=>(f(),p(h(a.componentName),w({key:`${a.nanoid}_${l}`},a,{modelValue:P.formData[a.name],"onUpdate:modelValue":e=>P.formData[a.name]=e,"is-view":"boolean"==typeof a.isView?a.isView:t.isView}),_({_:2},[g(V(O),(a=>({name:a,fn:v((t=>[D(e.$slots,a,S(C(t||{})),void 0,!0)]))})))]),1040,["modelValue","onUpdate:modelValue","is-view"])))),128)):k("",!0),D(e.$slots,"default",{},void 0,!0)])),_:3},16)}}}),[["__scopeId","data-v-1d2375ae"]]);var oa=t(l({inheritAttrs:!1,__name:"ProRadioV2",props:{type:{type:String,default:"button"},modelValue:{type:[String,Number],default:""},columns:{type:Array,default:()=>[]},isDefaultSelected:{type:Boolean,default:!0},isView:{type:Boolean,default:!1},customFieldName:{type:Object,default:()=>({text:"label",value:"value",children:"children"})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{emit:a}){const t=e,{filedAttrs:l,attrs:o}=x(xe()),{formState:i}=A(Ne)||{},s=d({modelValue:"",columns:[]}),m=r((()=>"button"===t.type)),c=r((()=>(s.columns.find((e=>String(e.value)===String(s.modelValue)))||{}).text||"")),h=e=>{s.modelValue=e,a("update:modelValue",e),a("change",e)};return n((()=>t.modelValue),(e=>{s.modelValue=e}),{immediate:!0}),n((()=>{var e;return null==(e=i.formData)?void 0:e[l.value.name]}),(e=>{void 0===e&&void 0!==s.modelValue||(s.modelValue=e)}),{immediate:!0,deep:!0}),n((()=>t.columns),((e=[])=>{if(u(e)){s.columns=e.map((e=>({...e,text:e[t.customFieldName.text],value:e[t.customFieldName.value]})));const[{disabled:a,value:l}]=s.columns;!t.isDefaultSelected||a||!Ae(t.modelValue)&&""!==t.modelValue||h(l)}}),{deep:!0,immediate:!0}),(a,d)=>{const i=$,r=O,u=M;return f(),p(Pe,w({class:"com-van-radio-wrap"},V(l),{"model-value":V(s).modelValue,disabled:e.disabled}),{input:v((()=>[e.isView?(f(),p(Ye,{key:0,value:V(c)},null,8,["value"])):(f(),y(b,{key:1},[V(m)?(f(!0),y(b,{key:0},g(V(s).columns,(a=>(f(),p(i,{key:a.value,label:a.text,disabled:a.disabled||e.disabled,activated:V(s).modelValue==a.value,"icon-name":a.iconName,onClick:e=>(({disabled:e,value:a})=>{o.value.disabled||e||t.disabled||h(a)})(a)},null,8,["label","disabled","activated","icon-name","onClick"])))),128)):(f(),p(u,w({key:1,modelValue:V(s).modelValue,"onUpdate:modelValue":d[0]||(d[0]=e=>V(s).modelValue=e)},V(o),{disabled:e.disabled}),{default:v((()=>[(f(!0),y(b,null,g(V(s).columns,(a=>(f(),p(r,w({key:a.value,name:a.value},a,{disabled:e.disabled}),{default:v((()=>[Y(P(a.label),1)])),_:2},1040,["name","disabled"])))),128))])),_:1},16,["modelValue","disabled"]))],64))])),_:1},16,["model-value","disabled"])}}}),[["__scopeId","data-v-0e1c30d9"]]);const da=l({inheritAttrs:!1,__name:"ProPickerV2",props:{relatedName:{type:String,default:""},columns:{type:Array,default:()=>[]},dictCode:{type:String,default:""},modelValue:{type:[String,Number],default:""},isDefaultSelected:{type:Boolean,default:!0},isView:{type:Boolean,default:!1},customFieldName:{type:Object,default:()=>({text:"label",value:"value",children:"children"})}},emits:["update:show","confirm","cancel","update:modelValue"],setup(t,{emit:l}){const o=t,i=e(),{dictMap:s}=a(i),{filedAttrs:m,filedSlots:c,attrs:p,slots:h}=x(xe()),{formState:k}=A(Ne)||{},[j,N]=F(!1),Y=d({fieldValue:"",columns:[]}),P=e=>{((e,a)=>{if(o.relatedName&&e){const t=(Me[o.relatedName]||{})[`${e}Effect`];"function"==typeof t&&t(a,k)}})("onChange",e),Y.fieldValue=e,l("update:modelValue",e)},$=e=>{const{value:a}=e||{};let t="";Ae(a)||(t=a),N(!1),P(t),l("confirm",e)},O=()=>{N(!1)},M=r((()=>{let e=[];u(o.columns)&&(e=o.columns);const a=s.value[o.dictCode];return o.dictCode&&u(a)&&(e=a),$e(u(t=e)?t.map((e=>({...e,text:e[o.customFieldName.text],value:e[o.customFieldName.value]}))):[]);var t})),E=r((()=>Y.fieldValue?o.columns.findIndex((e=>{var a;return String(e[null==(a=o.customFieldName)?void 0:a.value])===String(Y.fieldValue)})):"")),U=r((()=>{if(u(M.value)){const e=M.value.find((e=>String(e.value)===String(Y.fieldValue)))||{};return(null==e?void 0:e.text)||Y.fieldValue}return Y.fieldValue}));return n((()=>o.modelValue),(e=>{Y.fieldValue=e}),{deep:!0,immediate:!0}),n(M,((e=[])=>{if(u(e)&&1===e.length){const[{disabled:e,value:a}]=M.value;!o.isDefaultSelected||e||!Ae(o.modelValue)&&""!==o.modelValue||P(a)}}),{deep:!0,immediate:!0}),B((()=>{o.dictCode&&!k.dictCodeList.includes(o.dictCode)&&k.dictCodeList.push(o.dictCode)})),(e,a)=>{const l=R,o=I;return f(),y(b,null,[T(Oe,w({"model-value":V(Y).fieldValue,class:""+(!1===V(m).visible?"com-van-field--hidden":"")},V(m),{"field-value-view":V(U),"is-view":t.isView,onClick:a[0]||(a[0]=e=>!t.isView&&(j.value=!0))}),_({_:2},[g(Object.keys(V(c)),(a=>({name:a,fn:v((t=>[D(e.$slots,a,S(C(t||{})))]))})))]),1040,["model-value","class","field-value-view","is-view"]),T(o,{show:V(j),"onUpdate:show":a[1]||(a[1]=e=>L(j)?j.value=e:null),height:40,closeable:!1},{default:v((()=>[T(l,w({columns:V(M),"default-index":V(E)},V(p),{onCancel:O,onConfirm:$}),_({_:2},[g(Object.keys(e.$slots),(a=>({name:a,fn:v((t=>[D(e.$slots,a,S(C(t||{})))]))})))]),1040,["columns","default-index"])])),_:3},8,["show"])],64)}}});var ia=t(l({inheritAttrs:!1,__name:"ProSwitchV2",props:{modelValue:{type:[String,Number],default:""},isView:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,{filedAttrs:l,attrs:o}=x(xe()),{formState:i}=A(Ne)||{},s=d({modelValue:null});n((()=>t.modelValue),(e=>{s.modelValue=e}),{immediate:!0});const u=e=>{a("update:modelValue",e)},m=r((()=>["否","是"][Number(s.modelValue===o["active-value"])]));return n((()=>{var e;return null==(e=i.formData)?void 0:e[l.value.name]}),(e=>{s.modelValue=e}),{immediate:!0,deep:!0}),(a,t)=>{const d=Ie;return f(),p(Pe,w({class:"com-van-switch-wrap"},V(l),{"model-value":V(s).modelValue}),{input:v((()=>[e.isView?(f(),p(Ye,{key:0,value:V(m)},null,8,["value"])):(f(),p(d,w({key:1,"model-value":V(s).modelValue},V(o),{onChange:u}),null,16,["model-value"]))])),_:1},16,["model-value"])}}}),[["__scopeId","data-v-2b00e630"]]);var sa=he&&he.isDate,ra=sa?we(sa):function(e){return De(e)&&"[object Date]"==Se(e)};const ua=l({inheritAttrs:!1,__name:"ProCalendarV2",props:{type:{type:String,default:"single"},valueType:{type:String,default:"date"},modelValue:{type:[String,Date],default:""},isView:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,{filedAttrs:l,filedSlots:o,attrs:i,slots:s}=x(xe()),m=d({fieldValue:"",defaultDate:null}),[c,p]=F(!1),h={date:"YYYY-MM-DD",datehour:"YYYY-MM-DD HH",datetime:"YYYY-MM-DD HH:mm"},k=r((()=>h[t.valueType]||"YYYY-MM-DD")),j=r((()=>u(m.fieldValue)?m.fieldValue.join("range"===t.type?"~":","):"string"==typeof m.fieldValue?m.fieldValue:"")),N=e=>{let l;l="single"===t.type?E(e).format(k.value):u(e)?e.map((e=>E(e).format(k.value))):[],m.fieldValue=l,a("update:modelValue",l),p(!1)};return n((()=>t.modelValue),(e=>{"single"===t.type?"string"==typeof e&&e&&(m.defaultDate=E(e).toDate()):m.defaultDate=u(e)?e.map((e=>E(e).toDate())):null,m.fieldValue=(e=>"single"===t.type?ra(e)?E(e).format(k.value):e||"":u(e)?e:[])(e)}),{immediate:!0,deep:!0}),(a,t)=>{const d=U;return f(),y(b,null,[T(Oe,w({"model-value":V(m).fieldValue},V(l),{"field-value-view":V(j),onClick:t[0]||(t[0]=a=>!e.isView&&(c.value=!0))}),_({_:2},[g(Object.keys(V(o)),(e=>({name:e,fn:v((t=>[D(a.$slots,e,S(C(t||{})))]))})))]),1040,["model-value","field-value-view"]),T(d,w({show:V(c),"onUpdate:show":t[1]||(t[1]=e=>L(c)?c.value=e:null),type:e.type,"default-date":V(m).defaultDate},V(i),{onConfirm:N}),_({_:2},[g(Object.keys(V(s)),(e=>({name:e,fn:v((t=>[D(a.$slots,e,S(C(t||{})))]))})))]),1040,["show","type","default-date"])],64)}}}),na=l({inheritAttrs:!1,__name:"ProCascaderV2",props:{showFullValue:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object],default:""},columns:{type:Array,default:()=>[]},dictCode:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"name",value:"code",children:"children"})},level:{type:Number,default:0},isView:{type:Boolean,default:!1},selfValueViewFn:{type:Function,default:()=>{}}},emits:["update:modelValue","update:fullValue"],setup(t,{emit:l}){const o=t,i=e(),{dictMap:s}=a(i),{filedAttrs:m,filedSlots:c,attrs:p,slots:h}=x(xe()),[k,j]=F(!1),N=d({columns:[],modelValue:"",fieldValue:""}),A=()=>{o.isView||j(!0)},Y=()=>{j(!1)},P=r((()=>{let e=[];u(o.columns)&&(e=o.columns);const a=s.value[o.dictCode];return o.dictCode&&u(a)&&(e=a),Fe(e,o.level)})),$=r((()=>((e,a)=>{const t=[],{value:l,children:d}=o.customFieldName,i=(e,o=0)=>!!u(e)&&e.some(((e,s)=>{const{[d]:r,...n}=e;return t[o]=n,e[l]===a||!!u(r)&&i(r,o+1)}));return u(e)&&!i(e)?[]:t})(P.value,N.modelValue))),O=r((()=>{if(!u($.value))return"";const{selfValueViewFn:e,showFullValue:a,customFieldName:t}=o,l=$.value.map((e=>e[t.text])),d="function"==typeof e?e($.value):"";return d||(a?l.join("/"):l[l.length-1])})),M=({value:e,selectedOptions:a})=>{N.modelValue=e,l("update:modelValue",e),Y()};return n((()=>o.modelValue),(e=>{N.modelValue=e}),{immediate:!0,deep:!0}),n((()=>$.value),(e=>{l("update:fullValue",e)}),{deep:!0,immediate:!0}),(e,a)=>{const l=q,o=I;return f(),y(b,null,[T(Oe,w({"model-value":V(N).modelValue},V(m),{"is-view":t.isView,"field-value-view":V(O),onClick:A}),_({_:2},[g(Object.keys(V(c)),(a=>({name:a,fn:v((t=>[D(e.$slots,a,S(C(t||{})))]))})))]),1040,["model-value","is-view","field-value-view"]),T(o,{show:V(k),"onUpdate:show":a[0]||(a[0]=e=>L(k)?k.value=e:null),height:60,closeable:!1,class:"com-cascader-popup"},{default:v((()=>[T(l,w({options:V(P),"field-names":t.customFieldName,"model-value":V(N).modelValue},V(p),{onClose:Y,onFinish:M}),_({_:2},[g(Object.keys(V(h)),(a=>({name:a,fn:v((t=>[D(e.$slots,a,S(C(t||{})))]))})))]),1040,["options","field-names","model-value"])])),_:3},8,["show"])],64)}}}),ma=["onClick"],ca=["src"],fa={key:1,class:"text"},pa={key:0,class:"upload-item cover"},va=(e=>(oe("data-v-47c4c708"),e=e(),de(),e))((()=>Z("div",{class:"bg"},null,-1))),Va=["src"],ya={class:"text"};var ba=t(l({inheritAttrs:!1,__name:"ProIDCardUploadV2",props:{modelValue:{type:Array,default:()=>[]},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","ocr"],setup(e,{emit:a}){const t=e,l=[{uploadType:K.ID_CARD_FRONT,category:H.OBVERSE_CERT,title:"上传人像面",imgSrc:z},{uploadType:K.ID_CARD_BACK,category:H.REVERSE_CERT,title:"上传国徽面",imgSrc:W}],{filedAttrs:o}=x(xe()),{formState:s,objectType:m,objectId:c}=A(Ne)||{},h=i(),_=d({currentIndex:null,modelValue:[],ossKeyList:[]}),D=r((()=>_.modelValue.map((e=>[{url:e.uri}]))));G((()=>_.modelValue));const S=(e,a)=>{const{uploadType:d,title:i,category:r}=l[a];Q(e.file,d).then((e=>{const{code:l,data:d}=e||{};"10000"===l&&d.url&&(_.modelValue[a]={..._.modelValue[a],objectId:c,uri:d.url,category:r,name:i,objectType:t.objectType||m},_.ossKeyList[a]=d.ossKey,s.formData&&o.value.name&&(s.formData[o.value.name]=_.modelValue))}))},C=e=>{t.isView||(_.currentIndex=e,ee((()=>{var e;null==(e=h.value)||e.chooseFile()})))};return n((()=>_.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),n((()=>t.modelValue),(e=>{Array.isArray(e)&&e.length&&(_.modelValue=e)}),{deep:!0,immediate:!0}),n((()=>_.ossKeyList),(e=>{u(e)&&2===e.length&&X({ossKey:e,imageType:ae.ID_CARD}).then((e=>{const{data:t,code:l}=e;if("10000"===l&&t&&t.idCardOcrVO){const{personName:e,personIdCard:l,validDateEnd:o,validDateStart:d,...i}=t.idCardOcrVO||{};a("ocr",{name:e,certNo:l,certEndDate:o,certStartDate:d,...i})}}))}),{deep:!0}),(a,t)=>{const d=te,i=le;return f(),p(Oe,w({class:"com-van-id-card-upload-wrap","model-value":V(_).modelValue},V(o)),{input:v((()=>[(f(),y(b,null,g(l,((a,t)=>T(i,{key:a.uploadType,"max-count":1,deletable:!1,"preview-full-image":e.isView,disabled:e.isView,"model-value":V(D)[t],"after-read":e=>S(e,t),onClickPreview:e=>C(t)},{"preview-cover":v((()=>[e.isView?k("",!0):(f(),y("div",pa,[va,Z("img",{src:V(J),class:"icon"},null,8,Va),Z("div",ya,P(a.title),1)]))])),default:v((()=>[Z("div",{class:"upload-item",onClick:()=>C(t)},[T(d,{name:"idCard-front",class:"bg",color:"var(--van-primary-color)"}),e.isView?k("",!0):(f(),y("img",{key:0,src:V(J),class:"icon"},null,8,ca)),e.isView?k("",!0):(f(),y("div",fa,P(a.title),1))],8,ma)])),_:2},1032,["preview-full-image","disabled","model-value","after-read","onClickPreview"]))),64)),T(i,{ref_key:"tempUploaderRef",ref:h,class:"temp-uploader","max-count":1,"after-read":e=>S(e,V(_).currentIndex)},null,8,["after-read"])])),_:1},16,["model-value"])}}}),[["__scopeId","data-v-47c4c708"]]);const ga={class:"sub-label"},ha={class:"upload-item"};var wa=t(l({inheritAttrs:!1,__name:"ProBankUpload",props:{modelValue:{type:Array,default:()=>[]},subLabel:{type:String,default:""},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","ocr"],setup(e,{emit:a}){const t=e,l=[{category:H.OBVERSE_BANK_CARD,title:"银行卡正面照"},{category:H.REVERSE_BANK_CARD,title:"银行卡反面照"}],o=Ee("BANK"),{filedAttrs:i}=x(xe()),{objectType:s,objectId:m}=A(Ne)||{},c=d({currentIndex:null,modelValue:[],ossKeyList:[]});G((()=>c.modelValue));const h=r((()=>c.modelValue.map((e=>e?[{url:e.uri}]:[]))));return n((()=>c.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),n((()=>t.modelValue),(e=>{c.modelValue=e||[]}),{deep:!0,immediate:!0}),n((()=>c.ossKeyList),(e=>{u(e)&&2===e.length&&X({ossKey:e,imageType:ae.BANK_CARD}).then((e=>{var t;const{data:l,code:d}=e;if("10000"===d&&l&&l.bankCardOcrVO){const{cardNo:e,bankName:d}=l.bankCardOcrVO,{code:i}=(null==(t=o.value)?void 0:t.find((e=>e.name===d)))||{};a("ocr",{bankName:d,payBank:i,bankCardNo:e})}}))}),{deep:!0}),(a,o)=>{const d=te,r=le;return f(),p(Oe,w({class:"com-van-bank-upload-wrap","model-value":V(c).modelValue},V(i)),_({input:v((()=>[(f(),y(b,null,g(l,((o,i)=>Z("div",{key:o.title,class:"com-image-upload"},[T(r,{"max-count":1,"preview-full-image":e.isView,disabled:e.isView,deletable:!e.isView,"model-value":V(h)[i],"before-delete":()=>(e=>{c.modelValue[e]=null})(i),"after-read":e=>((e,a)=>{const{title:o,category:d}=l[a];Q(e.file,K.BANK_CARD).then((e=>{const{code:l,data:i}=e||{};"10000"===l&&i.url&&(c.modelValue[a]={...c.modelValue[a],objectId:m,uri:i.url,category:d,name:o,objectType:t.objectType||s},c.ossKeyList[a]=i.ossKey)}))})(e,i)},{default:v((()=>[D(a.$slots,"default",{},(()=>[Z("div",ha,[T(d,{name:"image-upload",class:"icon"})])]),!0)])),_:2},1032,["preview-full-image","disabled","deletable","model-value","before-delete","after-read"])]))),64))])),_:2},[e.subLabel?{name:"label",fn:v((()=>[Y(P(V(i).label),1),Z("span",ga,P(e.subLabel),1)])),key:"0"}:void 0]),1040,["model-value"])}}}),[["__scopeId","data-v-40d84558"]]);var _a=t(l({inheritAttrs:!1,__name:"ProDatePickerV2",props:{relatedName:{type:String,default:""},type:{type:String,default:"date"},modelValue:{type:[String,Date],default:""},isView:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]}},emits:["update:modelValue","cancel"],setup(e,{emit:a}){const t=e,{filedAttrs:l,filedSlots:o,attrs:i,slots:s}=x(xe()),{formState:u}=A(Ne)||{},[m,c]=F(!1),p=r((()=>!["time","month-day"].includes(t.type))),h=r((()=>p.value?new Date:null)),k=d({fieldValue:"",date:h.value}),j={datetime:"YYYY-MM-DD HH:mm",date:"YYYY-MM-DD","year-month":"YYYY-MM","month-day":"MM-DD",datehour:"YYYY-MM-DD HH",time:"mm:ss"},N=r((()=>({minDate:new Date(1900,0,1),maxDate:new Date}))),Y=r((()=>j[t.type]||"YYYY-MM-DD HH:mm")),P=e=>{const l=ra(e)?E(e).format(Y.value):e;((e,a)=>{if(t.relatedName&&e){const l=(Me[t.relatedName]||{})[`${e}Effect`];"function"==typeof l&&l(a,u)}})("onChange",l),k.fieldValue=l,a("update:modelValue",k.fieldValue),c(!1)},$=()=>{c(!1),a("cancel")},O=e=>{ra(e)?(k.date=e,k.fieldValue=E(e).format(Y.value)):"string"==typeof e&&(k.fieldValue=e,p.value?k.date=E(e,Y.value).isValid()?E(e,Y.value).toDate():h.value:k.date=e)};return n((()=>t.modelValue),(e=>{O(e)}),{immediate:!0,deep:!0}),n((()=>{var e;return null==(e=u.formData)?void 0:e[l.value.name]}),(e=>{O(e)}),{immediate:!0,deep:!0}),(a,t)=>{const d=ie,r=I;return f(),y(b,null,[T(Oe,w({"model-value":V(k).fieldValue},V(l),{"is-view":e.isView,class:`${!1===V(l).visible?"com-van-field--hidden":""} ${a.$attrs.class}`,"field-value-view":V(k).fieldValue,onClick:t[0]||(t[0]=a=>!e.isView&&(m.value=!0))}),_({_:2},[g(Object.keys(V(o)),(e=>({name:e,fn:v((t=>[D(a.$slots,e,S(C(t||{})),void 0,!0)]))})))]),1040,["model-value","is-view","class","field-value-view"]),T(r,{show:V(m),"onUpdate:show":t[1]||(t[1]=e=>L(m)?m.value=e:null),height:40,closeable:!1},{default:v((()=>[T(d,w({type:e.type,"model-value":V(k).date},{...V(N),...V(i)},{onConfirm:P,onCancel:$}),_({_:2},[g(Object.keys(V(s)),(e=>({name:e,fn:v((t=>[D(a.$slots,e,S(C(t||{})),void 0,!0)]))})))]),1040,["type","model-value"])])),_:3},8,["show"])],64)}}}),[["__scopeId","data-v-0fa4d998"]]);var Da=t(l({inheritAttrs:!1,__name:"ProValidateDate",props:{relatedName:{type:String,default:""},type:{type:String,default:"date"},modelValue:{type:[String,Date],default:""},isView:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]}},emits:["update:modelValue","cancel"],setup(e,{emit:a}){const t=e,{filedAttrs:l,filedSlots:o,attrs:s,slots:u}=x(xe()),{formState:m}=A(Ne)||{},[c,p]=F(!1),h=i(!1),j=r((()=>!["time","month-day"].includes(t.type))),N=r((()=>j.value?new Date:null)),P=d({fieldValue:"",date:N.value}),$={datetime:"YYYY-MM-DD HH:mm",date:"YYYY-MM-DD","year-month":"YYYY-MM","month-day":"MM-DD",datehour:"YYYY-MM-DD HH",time:"mm:ss"},O=r((()=>({minDate:new Date(1900,0,1),maxDate:new Date}))),M=r((()=>$[t.type]||"YYYY-MM-DD HH:mm")),B=e=>{const l=ra(e)?E(e).format(M.value):e;((e,a)=>{if(t.relatedName&&e){const l=(Me[t.relatedName]||{})[`${e}Effect`];"function"==typeof l&&l(a,m)}})("onChange",l),P.fieldValue=l,a("update:modelValue",P.fieldValue),p(!1)},R=()=>{p(!1),a("cancel")},U=e=>{ra(e)?(P.date=e,P.fieldValue=E(e).format(M.value)):"string"==typeof e&&(P.fieldValue=e,j.value?P.date=E(e,M.value).isValid()?E(e,M.value).toDate():N.value:P.date=e)};return n((()=>t.modelValue),(e=>{U(e)}),{immediate:!0,deep:!0}),n((()=>h.value),(e=>{B(e?"9999-12-31":"")})),n((()=>{var e;return null==(e=m.formData)?void 0:e[l.value.name]}),(e=>{U(e)}),{immediate:!0,deep:!0}),(a,t)=>{const d=re,i=ie,r=I;return f(),y(b,null,[T(Oe,w({"model-value":V(P).fieldValue},V(l),{"is-view":e.isView||V(h),class:`${!1===V(l).visible?"com-van-field--hidden":""} ${a.$attrs.class}`,"field-value-view":V(P).fieldValue,onClick:t[2]||(t[2]=a=>!e.isView&&!V(h)&&(c.value=!0))}),_({extra:v((()=>[e.isView?k("",!0):(f(),y("div",{key:0,class:"wrap",onClick:t[1]||(t[1]=se((()=>{}),["stop"]))},[T(d,{modelValue:V(h),"onUpdate:modelValue":t[0]||(t[0]=e=>L(h)?h.value=e:null)},{default:v((()=>[Y("长期")])),_:1},8,["modelValue"])]))])),_:2},[g(Object.keys(V(o)),(e=>({name:e,fn:v((t=>[D(a.$slots,e,S(C(t||{})),void 0,!0)]))})))]),1040,["model-value","is-view","class","field-value-view"]),T(r,{show:V(c),"onUpdate:show":t[3]||(t[3]=e=>L(c)?c.value=e:null),height:40,closeable:!1},{default:v((()=>[T(i,w({type:e.type,"model-value":V(P).date},{...V(O),...V(s)},{onConfirm:B,onCancel:R}),_({_:2},[g(Object.keys(V(u)),(e=>({name:e,fn:v((t=>[D(a.$slots,e,S(C(t||{})),void 0,!0)]))})))]),1040,["type","model-value"])])),_:3},8,["show"])],64)}}}),[["__scopeId","data-v-661ddb23"]]);var Sa=t(l({__name:"ProSMSCode",props:{time:{type:Number,default:60},smsText:{type:String,default:"验证码"},relatedName:{type:String,default:"mobile"},isView:{type:Boolean,default:!1},sendSMSCode:{type:Function,default:e=>{"function"==typeof e&&e()}}},setup(e){const a=e,{formState:t,formRef:l}=A(Ne)||{},o=d({isCountdowning:!1}),{current:i,start:s,reset:u}=ue({time:1e3*a.time,onFinish(){o.isCountdowning=!1}}),n=()=>{o.isCountdowning||l.value.validate(a.relatedName).then((()=>{a.sendSMSCode({mobile:t.formData[a.relatedName]},(()=>{o.isCountdowning=!0,j({message:"短信发送成功，请查收"}),u(),s()}))})).catch((e=>{console.log(e)}))},m=r((()=>{const{seconds:e}=i.value||{};return 0===e?a.smsText:o.isCountdowning?`${e}s`:a.smsText}));return(a,t)=>{const l=ne;return e.isView?k("",!0):(f(),p(Pe,w({key:0,class:"com-pro-sms-code",type:"digit"},a.$attrs,{"is-view":e.isView}),{extra:v((()=>[T(l,{class:"extra-button",size:"small",plain:"",type:"primary",onClick:n},{default:v((()=>[Y(P(V(m)),1)])),_:1})])),_:1},16,["is-view"]))}}}),[["__scopeId","data-v-53e9ba0a"]]);var Ca=t(l({__name:"SchemaRenderField",props:{schema:{default:()=>[]},model:{default:()=>({})},config:{default:()=>({})},isView:{type:Boolean}},setup(e){const a=e,t=o(),l=d({config:{},formData:{},schema:[],isView:!1}),i=r((()=>Object.keys(t).filter((e=>"default"!==e))));return n([()=>a.schema,()=>l.config],(([e,a])=>{l.schema=e.map((e=>({...e,componentName:Ue[e.componentName]?m(Ue[e.componentName]):e.componentName,...a[e.name],nanoid:c()}))).filter((e=>!e.hidden))}),{immediate:!0,deep:!0}),n((()=>a.model),(e=>{e&&(l.formData=e)}),{immediate:!0,deep:!0}),n((()=>a.config),(e=>{l.config=e}),{immediate:!0,deep:!0}),(a,t)=>(f(!0),y(b,null,g(V(l).schema,((t,o)=>(f(),p(h(t.componentName),w({key:`${t.nanoid}_${o}`,modelValue:V(l).formData[t.name],"onUpdate:modelValue":e=>V(l).formData[t.name]=e},t,{"is-view":e.isView}),_({_:2},[g(V(i),(e=>({name:e,fn:v((t=>[D(a.$slots,e,S(C(t||{})),void 0,!0)]))})))]),1040,["modelValue","onUpdate:modelValue","is-view"])))),128))}}),[["__scopeId","data-v-367b1ee2"]]);const ka=l({inheritAttrs:!1,__name:"ProBank",props:{required:{type:Boolean,default:!1},attributeValueList:{type:Array,default:()=>[]},isView:{type:Boolean,default:!1}},setup(e){const a=e,{formState:t,markRequired:l}=A(Ne)||{},o=r((()=>u(a.attributeValueList)?a.attributeValueList.map((e=>({...Be[e.code],isView:a.isView,required:a.required,label:e.value}))):[]));return(a,l)=>(f(),p(Ca,{schema:V(o),model:V(t).formData,"is-view":e.isView},null,8,["schema","model","is-view"]))}}),ja=l({inheritAttrs:!1,__name:"ProAddress",props:{modelValue:{type:Object,default:()=>({})},name:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"name",value:"code",children:"children"})},valuePrefix:{type:String,default:""},isView:{type:Boolean,default:!1},attributeValueList:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,l=d({address:{detail:""}}),o=r((()=>{if(!t.valuePrefix)return l.address;return Object.keys(l.address).reduce(((e,a)=>(e[(e=>"string"==typeof e&&e?t.valuePrefix?`${t.valuePrefix}${Re(e)}`:e:"")(a)]=l.address[a],e)),{})})),i=r((()=>{if(u(t.attributeValueList)){let e=0,a=!1;return t.attributeValueList.forEach((t=>{Number(t.code)>e&&"4"!==String(t.code)&&(e=Number(t.code)),"4"===String(t.code)&&(a=!0)})),{level:e&&e+1,showDetail:a}}return{level:0,showDetail:!0}})),s=r((()=>{var e;const{level:a}=i.value,t=["province","city","area"][0===a?"area":a-2];return null==(e=l.address)?void 0:e[t]})),m=(e=[])=>{let a={};if(u(e)){const{text:l,value:o}=t.customFieldName;a=["province","city","area"].slice(0,Number(i.value.level||3)).reduce(((a,t,d)=>{const i=e[d+1]||{};return a[t]=i[o],a[`${t}Name`]=i[l],a}),{})}l.address={...l.address,...a}};return n((()=>l.address),(()=>{a("update:modelValue",l.address)}),{deep:!0}),n((()=>t.modelValue),(e=>{l.address=e||{}}),{immediate:!0,deep:!0}),(a,t)=>{const d=Pe;return f(),y(b,null,[T(Oe,{class:"com-van-field--hidden",name:e.name,"model-value":V(o),rules:a.$attrs.rules,required:a.$attrs.required},null,8,["name","model-value","rules","required"]),T(na,w({"show-full-value":"","custom-field-name":e.customFieldName},a.$attrs,{"model-value":V(s),"is-view":e.isView,level:V(i).level,"onUpdate:fullValue":m}),null,16,["custom-field-name","model-value","is-view","level"]),V(i).showDetail?(f(),p(d,{key:0,modelValue:V(l).address.detail,"onUpdate:modelValue":t[0]||(t[0]=e=>V(l).address.detail=e),"is-view":e.isView,type:"textarea",label:`${a.$attrs.label}详细地址`,required:a.$attrs.required,maxlength:50},null,8,["modelValue","is-view","label","required"])):k("",!0)],64)}}}),Na={class:"occupation-view"},xa={key:0,class:"class-tips"},Aa={class:"occupation-view"},Ya={key:0,class:"class-tips"};var Pa=t(l({inheritAttrs:!1,__name:"ProOccupation",props:{name:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"value",value:"code",children:"children"})},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,{formState:l}=A(Ne)||{},o="name",i=d({modelValue:[],text:"",occupationClass:""}),s=(e=[])=>{var a;let d=[];if(u(e)){d=e.map((e=>e[t.customFieldName.value]));const{[null==(a=null==t?void 0:t.customFieldName)?void 0:a.text]:s,[o]:r}=e[e.length-1];i.text=s,i.occupationClass=r,(null==l?void 0:l.formData)&&(l.formData.occupationClass=r)}i.modelValue=d},m=r((()=>u(i.modelValue)?i.modelValue[i.modelValue.length-1]:null));return n((()=>t.modelValue),(e=>{i.modelValue=e}),{deep:!0,immediate:!0}),n((()=>i.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),(a,t)=>(f(),y(b,null,[T(Oe,{modelValue:V(i).modelValue,"onUpdate:modelValue":t[0]||(t[0]=e=>V(i).modelValue=e),class:"com-van-field--hidden",name:e.name,rules:a.$attrs.rules,required:a.$attrs.required},null,8,["modelValue","name","rules","required"]),T(na,w({"custom-field-name":e.customFieldName},a.$attrs,{"model-value":V(m),"onUpdate:fullValue":s}),{"value-view":v((()=>[Z("span",Na,[Y(P(V(i).text),1),V(i).occupationClass?(f(),y("span",xa,P(V(i).occupationClass)+"类",1)):k("",!0)])])),option:v((({option:a={}})=>{var t;return[Z("span",Aa,[Y(P(null==a?void 0:a[null==(t=e.customFieldName)?void 0:t.text]),1),(null==a?void 0:a[o])?(f(),y("span",Ya,P(null==a?void 0:a[o])+"类",1)):k("",!0)])]})),_:1},16,["custom-field-name","model-value"])],64))}}),[["__scopeId","data-v-03763090"]]);var $a=t(l({inheritAttrs:!1,__name:"ProRenderFormWithCard",props:{title:{type:String,default:""},class:{type:String,default:""}},setup(e,{expose:a}){const t=e,l=i(null),d=o(),s=r((()=>Object.keys(d).filter((e=>"cardTitleExtra"!==e))));return a({...["submit","getValues","validate","resetValidation","getValidationStatus","scrollToField"].reduce(((e,a)=>(e[a]=(...e)=>{var t;return null==(t=l.value)?void 0:t[a](...e)},e)),{})}),(a,o)=>{const d=ce;return f(),p(d,{class:me(`com-pro-form-with-card com-card-body-no-padding ${t.class}`),"show-divider":!1,title:e.title},{extra:v((()=>[D(a.$slots,"cardTitleExtra",{},void 0,!0)])),default:v((()=>[T(la,w({ref_key:"renderFormRef",ref:l},a.$attrs),_({_:2},[g(V(s),(e=>({name:e,fn:v((t=>[D(a.$slots,e,S(C(t||{})),void 0,!0)]))})))]),1040)])),_:3},8,["class","title"])}}}),[["__scopeId","data-v-dc30f30c"]]);export{$a as P,da as _,Sa as a,la as b,_a as c,oa as d,ja as e,ta as i};

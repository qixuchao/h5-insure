import{g as b,L as I,C as y,v as R,af as T,r as v,h as g,j as S,k as d,n as l,z as C,a6 as U,y as p,m as k,E as q,F as z,I as x,B as h,D as M,T as W}from"./vendor-50171071.js";import{_ as j,y as H}from"./index-1e64972f.js";import{P as O}from"./index-5ae7102e.js";import{h as G,d as J}from"./proposalList-d7234384.js";const K=_=>{const s=_,[r,a]=s.split("_"),n={year:"\u5E74",month:"\u6708",day:"\u5929",to:"\u5C81"};return s==="to_life"?"\u4FDD\u7EC8\u751F":`${a}${n[r]}`},Q=_=>{const s=_,[r,a]=s.split("_"),n={year:"\u5E74\u4EA4",month:"\u6708\u4EA4",day:"\u5929",to:"\u5C81"};return s==="single"?"\u8DB8\u7F34":n[r]==="to"?`\u4EA4\u81F3${a}\u5C81`:`${a}${n[r]}`};const X={class:"proposal-content"},Y={class:"title"},Z={class:"premium"},w=h(" \u4FDD\u8D39\uFF1A"),ee={class:"operate-btn"},te=h("\u5220\u9664"),ae=h("\u7F16\u8F91"),oe=h("\u9884\u89C8"),se=b({setup(_){const s=[{title:"\u9669\u79CD\u540D\u79F0",dataIndex:"riskName",width:180},{title:"\u4FDD\u969C\u671F\u95F4",dataIndex:"coveragePeriod",render:e=>K(e==null?void 0:e.coveragePeriod)},{title:"\u7F34\u8D39\u671F\u95F4",dataIndex:"chargePeriod",width:110,render:e=>Q(e==null?void 0:e.chargePeriod)},{title:"\u4FDD\u8D39",dataIndex:"premium",width:120}],r=I({historyList:[],searchValue:""}),a=y(!1),n=y(!1),m=y(1),{historyList:i,searchValue:c}=R(r),D=T(),f=()=>{G({name:c.value,pageNum:m.value,pageSize:20,relationUserType:2}).then(e=>{const{code:o,data:u}=e;o==="10000"&&(m.value===1?i.value=u.datas||[]:i.value=i.value.concat(u.datas),m.value+=1,a.value=!1,n.value=i.value.length>=u.total)})},E=()=>{f()},B=e=>{c.value=e,m.value=1,f()},A=e=>{M.confirm({message:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BA1\u5212\u4E66\uFF1F"}).then(()=>{J(e).then(o=>{const{code:u}=o;u==="10000"&&(W.success("\u5220\u9664\u6210\u529F"),f())})}).catch(()=>{})},L=e=>{D.push({path:"compositionProposal",query:{id:e}})},V=e=>{D.push({path:"/proposal/createProposal",query:{id:e}})};return(e,o)=>{const u=v("van-search"),F=v("van-button"),$=v("van-list"),N=v("ProPageWrap");return g(),S(N,{class:"page-history-proposal"},{default:d(()=>[l(u,{modelValue:C(c),"onUpdate:modelValue":o[0]||(o[0]=t=>U(c)?c.value=t:null),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",shape:"round",class:"search",onSearch:B},null,8,["modelValue"]),p("div",X,[l($,{loading:a.value,"onUpdate:loading":o[1]||(o[1]=t=>a.value=t),finished:n.value,"finished-text":"- \u6CA1\u6709\u66F4\u591A\u4E86 -",onLoad:E},{default:d(()=>[(g(!0),k(z,null,q(C(i),t=>(g(),k("div",{key:t.id,class:"proposal-item"},[p("div",Y,x(t.proposalName),1),p("p",Z,[w,p("span",null,"\xA5"+x(C(H)(t.totalPremium)),1)]),l(O,{columns:s,class:"table","data-source":t.proposalProductRiskVOList},null,8,["data-source"]),p("div",ee,[l(F,{plain:"",round:"",type:"primary",class:"del-btn",onClick:P=>A(t.id)},{default:d(()=>[te]),_:2},1032,["onClick"]),l(F,{plain:"",round:"",type:"primary",onClick:P=>V(t.id)},{default:d(()=>[ae]),_:2},1032,["onClick"]),l(F,{plain:"",round:"",type:"primary",onClick:P=>L(t.id)},{default:d(()=>[oe]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var ie=j(se,[["__scopeId","data-v-0787724e"]]);export{ie as default};

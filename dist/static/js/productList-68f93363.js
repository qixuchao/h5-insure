import{d as e,t as a,r as s,o as t,c as o,a as r,b as l,u as d,e as c,f as i,_ as u,I as n,g as p,h as m,i as v,j as g,k as f,l as h,w as C,m as L,F as y,n as P,P as k,p as _,q as x,s as I,T as w}from"./index-f919c47f.js";import{P as j}from"./index-3e6ece43.js";import{L as V}from"./index-ad0f731b.js";import{_ as T}from"./index-ea1d3a43.js";import{S as b}from"./index-7c787ccb.js";import{_ as U}from"./empty-ae586b6c.js";import{q as M}from"./product-6a7e7612.js";import{P as F}from"./trial-33474385.js";const N={class:"com-product-item"},S={class:"content-wrap"},q={class:"product-image"},O={class:"product-info"},R={class:"title"},A={class:"description"},D={class:"price-item"},W={class:"price"};var z=u(e({__name:"productItem",props:{productInfo:{default:()=>({})},errorMsg:{default:""}},setup(e){const u=e,{productInfo:p}=a(u),m=s({checked:!1});return a(m),(e,a)=>{const s=n;return t(),o("div",N,[r("div",S,[r("div",q,[l(s,{src:d(p).image},null,8,["src"])]),r("div",O,[r("p",R,c(d(p).productFullName),1),r("p",A,c(d(p).desc),1),r("p",D,[r("span",W,c(d(p).price),1),r("span",null,c(d(p).amountUnit),1)])]),i(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-69e3f256"]]);const E={class:"search-wrap"},G={class:"article-tag"},$=["onClick"],B={class:"page-proposal-list"},H=e({name:"productList"});var J=u(e({...H,setup(e){const i=p();m();const u=s({searchValue:"",tagLists:[],loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productCode:void 0,proposalList:[],showFooter:!0,productName:"",productCodeList:[],errorMsgMap:{},excludeProductCodeList:[],isCreateProposal:!1,selectedProductList:[],firstLoading:!0}),{searchValue:n,tagLists:N,loading:S,finished:q,refreshing:O,productList:R,selectProduct:A,insurerCodeList:D,showCategory:W,productTotal:H,showFooter:J}=a(u),K=()=>{const{excludeProductCodeList:e}=u;u.firstLoading&&w.loading("加载中..."),M({title:n.value,insurerCodeList:D.value,showCategory:W.value,excludeProductCodeList:Array.isArray(e)?e:[],pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:t}=e;"10000"===a&&(R.value=s,H.value=t)})).finally((()=>{w.clear(),u.firstLoading=!1}))},Q=e=>{K()},X=v(0),Y=()=>{var e;O.value&&(R.value=[],O.value=!1),K(),S.value=!1,H.value===(null==(e=R.value)?void 0:e.length)&&(q.value=!0)},Z=g((()=>{var e;return(null==(e=R.value)?void 0:e.length)>0})),ee=()=>{q.value=!0,S.value=!0,Y()};return(e,a)=>{const s=b,p=T,m=V,v=j,g=f("ProPageWrap");return t(),h(g,{class:"page-proposal"},{default:C((()=>[r("div",E,[l(s,{modelValue:d(n),"onUpdate:modelValue":a[0]||(a[0]=e=>L(n)?n.value=e:null),placeholder:"请输入产品名称进行搜索",shape:"round",class:"search","clear-trigger":"always","show-action":"",clearable:"",onSearch:Q},null,8,["modelValue"]),r("div",G,[(t(!0),o(y,null,P(d(k),((e,a)=>(t(),o("div",{key:a,class:_(["tag-item",{checked:d(X)===a}]),onClick:s=>((e,a)=>{X.value=a,W.value=e,K()})(e.value,a)},[r("div",{class:_(["tag-out",{checked:d(X)==a}])},[r("div",{class:_(["tag-item-text",{checked:d(X)==a}])},c(e.label),3)],2)],10,$)))),128))])]),d(Z)||d(u).firstLoading?x("",!0):(t(),h(p,{key:0,"empty-img":d(U),title:"暂无产品","empty-class":"empty-select"},null,8,["empty-img"])),r("div",B,[l(v,{modelValue:d(O),"onUpdate:modelValue":a[2]||(a[2]=e=>L(O)?O.value=e:null),onRefresh:ee},{default:C((()=>[l(m,{loading:d(S),"onUpdate:loading":a[1]||(a[1]=e=>L(S)?S.value=e:null),finished:d(q),"finished-text":d(Z)?"- 已经到底了哦 -":"",onLoad:Y},{default:C((()=>[(t(!0),o(y,null,P(d(R),(e=>(t(),h(z,{key:e.id,"product-info":e,"error-msg":d(u).errorMsgMap[e.productCode],onClick:a=>(async e=>{let a=I.premiumTrial;const{insurerCode:s="",productCode:t="",templateId:o,productClass:r}=e;[F.SINGLE_PRODUCT,F.TWO_PRODUCT].includes(r)&&(a=I.productInfo),i.push({path:a,query:{insurerCode:s,productCode:t,tenantId:9991000011,templateId:o}})})(e)},null,8,["product-info","error-msg","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])])])),_:1})}}}),[["__scopeId","data-v-9d894e42"]]);export{J as default};

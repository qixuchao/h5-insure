!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.page-verify .card .people[data-v-5ed1f3b2]{flex:1;margin-left:.53333rem;display:flex;align-items:center}.page-verify .card .people .name[data-v-5ed1f3b2]{font-size:.4rem;font-weight:600;color:#393d46}.page-verify .card .people .status[data-v-5ed1f3b2]{margin-left:.26667rem;text-align:center;width:1.2rem;height:.53333rem;line-height:.53333rem;border-radius:.05333rem;border:1px solid #99a9c0;font-size:.32rem;color:#99a9c0}.page-verify .card .people .status.verified[data-v-5ed1f3b2]{color:#0d6efe;border-color:#0d6efe}.page-verify .card .verify-item[data-v-5ed1f3b2]{display:flex;align-items:center;height:1.41333rem;line-height:1.41333rem;font-size:.4rem;color:#393d46}.page-verify .card .verify-item .no[data-v-5ed1f3b2]{margin-left:.64rem}.page-verify .card .verify-item .action[data-v-5ed1f3b2]{flex:1;display:flex;align-items:center;justify-content:flex-end;color:#99a9c0}.page-verify .card .verify-item .action .icon[data-v-5ed1f3b2]{margin-left:.13333rem;color:#99a9c0;font-size:.32rem}.page-verify .sign-card .resign[data-v-5ed1f3b2]{font-size:.37333rem;color:#0d6efe}.page-verify .sign-card .sign-body[data-v-5ed1f3b2]{padding-bottom:.4rem}.page-verify .sign-card .sign-body .date[data-v-5ed1f3b2]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-verify .sign-card .sign-body .file[data-v-5ed1f3b2]{margin-top:.21333rem;font-size:.37333rem;color:#393d46;line-height:.53333rem}.page-verify .sign-card .sign-body .file .file-name[data-v-5ed1f3b2]{color:#0d6efe}.page-verify .sign-card .sign-body .file .file-name .dun-hao[data-v-5ed1f3b2]{color:#393d46}.page-verify .footer[data-v-5ed1f3b2]{position:static;justify-content:space-between}.page-verify .footer .refresh-btn[data-v-5ed1f3b2]{width:.66667rem;border:none;color:#0d6efe;font-size:.26667rem;line-height:.37333rem;text-align:center}.page-verify .footer .refresh-btn .text[data-v-5ed1f3b2]{margin-top:.13333rem}.page-verify .footer .submit-btn[data-v-5ed1f3b2]{flex:1}\n',document.head.appendChild(e),System.register(["./vendor-legacy-388e7174.js","./index-legacy-a1d66b6e.js","./index-legacy-8707f6ce.js","./verify-legacy-a1acca54.js","./index-legacy-71c63e34.js"],(function(e){"use strict";var a,t,i,l,n,r,o,d,s,c,v,f,u,g,p,m,y,b,h,x,I,N,C,k,w,O,_,D,E,j,L,U,R,H,S,z,$,P;return{setters:[function(e){a=e.g,t=e.r,i=e.p,l=e.ad,n=e.o,r=e.i,o=e.j,d=e.J,s=e.O,c=e.a1,v=e.H,f=e.$,u=e.v,g=e.K,p=e.d,m=e.A,y=e.E,b=e.B,h=e.t,x=e.k,I=e.F,N=e.G,C=e.P,k=e.Q,w=e.T,O=e.D},function(e){_=e._,D=e.S,E=e.g,j=e.N,L=e.P},function(e){U=e.P},function(e){R=e.g,H=e.f,S=e.s,z=e.a},function(e){$=e.a,P=e.n}],execute:function(){const T={class:"com-sign-wrapper"},B={key:0,class:"placeholder"};var A=_(a({props:{options:{type:Object,default:()=>{}},placeholder:{type:String,default:"请输入"}},setup(e,{expose:a}){const c=e,v=t(),f=t(),u=t(),g=t(!0);t({options:{penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(255,255,255)",...c.options},disabled:!1});const p=()=>{var e;null===(e=v.value)||void 0===e||e.clear(),g.value=!0};return i((()=>{f.value&&u.value&&(f.value.width=u.value.getBoundingClientRect().width,f.value.height=u.value.getBoundingClientRect().height,v.value=new l(f.value),v.value.addEventListener("beginStroke",(()=>{g.value=!1})))})),a({save:(e="image/png",a=.8)=>{var t,i;return null===(t=v.value)||void 0===t||null===(i=t.toDataURL)||void 0===i?void 0:i.call(t,e,a)},isEmpty:()=>{var e;return null===(e=v.value)||void 0===e?void 0:e.isEmpty()},clear:p,setDataURL:(e,a={ratio:1})=>{var t;p(),null===(t=v.value)||void 0===t||t.fromDataURL(e,a),g.value=!1},lockSign:()=>{var e;null===(e=v.value)||void 0===e||e.off()},unlockSign:()=>{var e;null===(e=v.value)||void 0===e||e.off()}}),(a,t)=>(n(),r("div",T,[o("div",{ref_key:"container",ref:u,class:"sign-container"},[g.value?(n(),r("div",B,d(e.placeholder),1)):s("",!0),o("canvas",{ref_key:"canvas",ref:f,class:"canvas"},null,512)],512)]))}}),[["__scopeId","data-v-2d04db05"]]);const M={key:0,class:"message-title"},Y={class:"message-content"};var Q=_(a({props:{type:{default:"warning"},title:{default:""},content:{default:""}},setup:e=>(a,t)=>(n(),r("div",{class:f(`com-message-wrapper ${e.type}`)},[e.title?(n(),r("div",M,[c(a.$slots,"title",{},(()=>[v(d(e.title),1)]),!0)])):s("",!0),o("div",Y,[c(a.$slots,"content",{},(()=>[v(d(e.content),1)]),!0)])],2))}),[["__scopeId","data-v-b66f4d6a"]]);const q=e=>(C("data-v-5ed1f3b2"),e=e(),k(),e),F={class:"page-verify"},G={class:"people"},J={class:"name"},K={class:"verify-item"},W=q((()=>o("div",{class:"label"},"身份证号码",-1))),V={class:"no"},X=v(" 去认证 "),Z={class:"sign-body"},ee={class:"date"},ae={class:"file"},te=v(" 签名将被用于以下文件："),ie={key:0,class:"dun-hao"},le={class:"people"},ne={class:"name"},re={class:"verify-item"},oe=q((()=>o("div",{class:"label"},"身份证号码",-1))),de={class:"no"},se=["onClick"],ce=v(" 去认证 "),ve=["onClick"],fe={class:"sign-body"},ue={class:"date"},ge={class:"file"},pe=v(" 签名将被用于以下文件："),me={key:0,class:"dun-hao"},ye={class:"footer-button footer"},be=v("提交"),he=a({setup(e){const a=u(),l=g(),{orderNo:c="2022072810590219649",saleUserId:C="D1234567-1",tenantId:k="9991000007",templateId:_=1,productCode:T="CQ75CQ76"}=a.query,B=new D({source:"localStorage"}),M=t([]),Y=t(),q=t(),he=[],xe=p().format("YYYY-MM-DD"),Ie=()=>{var e;null===(e=q.value)||void 0===e||e.clear()},Ne=(e,a)=>{z({callbackUrl:window.location.href,certiNo:e,faceAuthMode:"TENCENT",userName:a,tenantId:9991000007}).then((t=>{const{code:i,data:l}=t;if("10000"===i){const{originalUrl:t,serialNo:i}=l;window.location.href=t,B.set("verifyData",{serialNo:i,certNo:e,name:a})}}))},Ce=e=>{var a,t,i,l;-1===e?Ne(null===(a=Y.value.tenantOrderHolder)||void 0===a?void 0:a.certNo,null===(t=Y.value.tenantOrderHolder)||void 0===t?void 0:t.name):Ne(null===(i=Y.value.tenantOrderInsuredList[e])||void 0===i?void 0:i.certNo,null===(l=Y.value.tenantOrderInsuredList[e])||void 0===l?void 0:l.name)},ke=e=>{e&&he.every((a=>a!==e))&&he.push(e)},we=()=>{var e;(null===(e=q.value)||void 0===e?void 0:e.isEmpty())?w.fail("请投保人签名"):he.some((e=>e.isEmpty()))?w.fail("请被保人签名"):O.confirm({title:"提示",message:"请确认信息填写无误后，再进行支付"}).then((()=>{var e,a;const t=null===(e=q.value)||void 0===e?void 0:e.save();Promise.all([S("HOLDER",t,null===(a=Y.value)||void 0===a?void 0:a.id,`${k}`),...he.map((e=>{var a;return S("INSURED",e.save(),null===(a=Y.value)||void 0===a?void 0:a.id,`${k}`)}))]).then((()=>{P({...Y.value,pageCode:"sign",operateOption:{withSignInfo:!0},extInfo:{pageCode:"sign",templateId:_}}).then((e=>{const{code:a,data:t}=e;"10000"===a&&t.success&&l.push({path:L[t.pageAction.data.nextPageCode],query:{orderNo:c,saleUserId:C,tenantId:k}})}))}))}))};return i((()=>{$({orderNo:c,saleUserId:C,tenantId:k}).then((e=>{const{code:a,data:t}=e;if("10000"===a){Y.value=t;let e=0;t.tenantOrderAttachmentList.forEach((a=>{21===a.category&&(2===a.objectType?q.value.setDataURL(a.fileBase64):1===a.objectType&&(he[e].setDataURL(a.fileBase64),e+=1))}))}})),R({orderNo:c,productCode:T,tenantId:k}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(M.value=t||[])}));const e=B.get("verifyData");if(e){const{serialNo:a,certNo:t,name:i}=e;H({certiNo:t,orderNo:c,serialNo:a,tenantId:k,userName:i}).then((e=>{B.remove("verifyData")}))}})),(e,a)=>{const t=m("van-button"),i=m("ProPageWrap");return n(),y(i,null,{default:b((()=>{var e;return[o("div",F,[h(Q,{type:"warning",title:"尊敬的客户，本次投保需要进行身份认证",content:"本产品投保需要对投保人、被保人进行实名认证，您购买本产品的累计总保费已超过20万，按监管要求，需要提供投保人、被保人、指定受益人证件影像，本产品非本人投保且带身故责任、需对投保人、被保人（成人）的投保意愿进行签字确认。"}),h(U,{title:"投保人",class:"card"},{extra:b((()=>{var e,a,t,i,l,n,r,s;return[o("div",G,[o("div",J,d(null===(e=Y.value)||void 0===e||null===(a=e.tenantOrderHolder)||void 0===a?void 0:a.name),1),o("div",{class:f(["status",{verified:null===(t=Y.value)||void 0===t||null===(i=t.tenantOrderHolder)||void 0===i||null===(l=i.extInfo)||void 0===l?void 0:l.isCert}])},d(null!==(n=Y.value)&&void 0!==n&&null!==(r=n.tenantOrderHolder)&&void 0!==r&&null!==(s=r.extInfo)&&void 0!==s&&s.isCert?"已认证":"待认证"),3)])]})),default:b((()=>{var e,t,i,l,c;return[o("div",K,[W,o("div",V,d(null===(e=Y.value)||void 0===e||null===(t=e.tenantOrderHolder)||void 0===t?void 0:t.certNo),1),null!==(i=Y.value)&&void 0!==i&&null!==(l=i.tenantOrderHolder)&&void 0!==l&&null!==(c=l.extInfo)&&void 0!==c&&c.isCert?s("",!0):(n(),r("div",{key:0,class:"action",onClick:a[0]||(a[0]=e=>Ce(-1))},[X,h(E,{name:"right_arrow",class:"icon"})]))])]})),_:1}),h(U,{title:"投保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:b((()=>[o("div",{class:"resign",onClick:Ie},"重签")])),default:b((()=>[h(A,{ref_key:"holderSign",ref:q,class:"sign"},null,512),o("div",Z,[o("div",ee,"签名日期： "+d(x(xe)),1),o("div",ae,[te,(n(!0),r(N,null,I(M.value.filter((e=>e.noticeObject===x(j).HOLDER)),((e,a)=>(n(),r("span",{key:a,class:"file-name"},[v(d(`《${e.materialName}》`),1),a!==M.value.filter((e=>e.noticeObject===x(j).HOLDER)).length-1?(n(),r("span",ie,"、")):s("",!0)])))),128))])])])),_:1}),(n(!0),r(N,null,I(null===(e=Y.value)||void 0===e?void 0:e.tenantOrderInsuredList,((e,a)=>(n(),r("div",{key:a},[h(U,{title:"被保人",class:"card"},{extra:b((()=>{var a,t;return[o("div",le,[o("div",ne,d(e.name),1),o("div",{class:f(["status",{verified:null===(a=e.extInfo)||void 0===a?void 0:a.isCert}])},d(null!==(t=e.extInfo)&&void 0!==t&&t.isCert?"已认证":"待认证"),3)])]})),default:b((()=>{var t;return[o("div",re,[oe,o("div",de,d(e.certNo),1),null!==(t=e.extInfo)&&void 0!==t&&t.isCert?s("",!0):(n(),r("div",{key:0,class:"action",onClick:e=>Ce(a)},[ce,h(E,{name:"right_arrow",class:"icon"})],8,se))])]})),_:2},1024),h(U,{title:"被保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:b((()=>[o("div",{class:"resign",onClick:e=>(e=>{he[e].clear()})(a)},"重签",8,ve)])),default:b((()=>[h(A,{ref_for:!0,ref:ke,class:"sign"}),o("div",fe,[o("div",ue,"签名日期： "+d(x(xe)),1),o("div",ge,[pe,(n(!0),r(N,null,I(M.value.filter((e=>e.noticeObject===x(j).INSURED)),((e,a)=>(n(),r("span",{key:a,class:"file-name"},[v(d(`《${e.materialName}》`),1),a!==M.value.filter((e=>e.noticeObject===x(j).INSURED)).length-1?(n(),r("span",me,"、")):s("",!0)])))),128))])])])),_:2},1024)])))),128)),o("div",ye,[h(t,{type:"primary",class:"submit-btn",onClick:we},{default:b((()=>[be])),_:1})])])]})),_:1})}}});e("default",_(he,[["__scopeId","data-v-5ed1f3b2"]]))}}}))}();

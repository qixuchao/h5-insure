import{d as a,i as e,d3 as s,j as t,aX as o,l as r,m as n,bj as c,o as d,p as l,w as i,b as u,u as m,c as p,f as v,a as f,aa as h}from"./index-2cd6533c.js";import{u as w,c as b,e as g}from"./core-4be363af.js";import{u as y}from"./useThread-637a02aa.js";const x={key:0,class:"wait-loading"},_={key:1,class:"result-view"},j={class:"content-box"},k=f("div",{class:"content"},"开通成功，正在为您生成保单...",-1),I=f("div",{class:"tip"},"请勿返回或退出",-1),N=a({__name:"payCheck",setup(a){const N=e().query,C=s(),T=t(!1),$=t(!1),P=t(""),q=t(!0);let B;const D=()=>{b({tenantId:N.tenantId,orderNo:N.orderNo}).then((a=>{const{code:e,data:s}=a;"10000"===e&&(q.value=!1);const t=s.redirectUrl||`/baseInsurance/orderDetail?orderNo=${N.businessTradeNo}&tenantId=${N.tenantId}&productCode=${N.productCode}`;1==+s.status?($.value=!0,B.stop(),window.location.href=t):1==+N.from_wxpay?T.value=!0:g(N)})).catch()};return B=y({start:()=>{console.log("开始轮询"),D()},stop:()=>{console.log("结束轮询"),$.value||o.alert({title:"提示",message:"未查到支付成功状态，请检查是否已支付完成",confirmButtonText:"好的，我知道了"}).then((()=>{window.location.href=P.value}))},time:2e3,number:5}),w(),r((()=>{1==+N.from_wxpay?(T.value=!0,B.run()):D()})),(a,e)=>{const s=h,t=n("ProPageWrap"),o=c;return d(),l(o,{"theme-vars":m(C)},{default:i((()=>[u(t,{"main-class":"page-pay-check"},{default:i((()=>[m(q)&&!m(T)?(d(),p("div",x,"加载中，请稍候...")):v("",!0),!m(q)&&m(T)?(d(),p("div",_,[f("div",j,[u(s,{name:"checked",class:"large-icon"}),k,I])])):v("",!0)])),_:1})])),_:1},8,["theme-vars"])}}});export{N as default};

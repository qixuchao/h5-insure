import{_ as a,d as e,j as t,i as r,h as o,k as s,dm as n,O as d,dn as l,o as u,c,b as i,a as m,e as p,u as v,F as y,w as N,a8 as f,m as I,aI as S,aa as h,ag as C,aC as E,aD as A}from"./index-77d3984c.js";import{g as _}from"./trial-1aadec53.js";import{P as k}from"./constants-62d1c4af.js";import{I as L}from"./infoItem-17ae5e89.js";import{j as P}from"./verify-9256c1e5.js";const g={class:""},j={class:"page-insure-result-wrap"},T={class:"header"},b={class:"content"},D={class:"content-header"},q={class:"product-name"},O=(a=>(E("data-v-3daa3074"),a=a(),A(),a))((()=>m("span",null,"保障中",-1))),U={class:"footer-button"},w=e({name:"OrderResult"});var F=a(e({...w,setup(a){const e={paymentFailed:"支付失败",paymentSuccess:"恭喜你完成投保",acceptingPolicy:"承保中"},E=t({orderNo:"",holderName:"",orderAmount:"",orderStatus:""}),A=r(),w=o(),{orderNo:F="",preview:R,saleUserId:Y="",tenantId:x="",templateId:M=1}=A.query,B=t({});s((a=>E.value&&[n.SUCCESS,n.PAYMENT_SUCCESS,n.ACCEPT_POLICY].some((a=>{var e;return a===(null==(e=E.value)?void 0:e.orderStatus)}))));const G=s((a=>E.value&&[n.PAYMENT_FAILED,n.INSURER_REJECT,n.TIMEOUT,n.FAILED,n.CANCELED].some((a=>{var e;return a===(null==(e=E.value)?void 0:e.orderStatus)}))));s((()=>E.value.orderStatus===n.PAYING));const J=()=>{w.push({path:k.orderList,query:A.query})},$=()=>{w.push({path:k.updateBankInfo,query:A.query})},z=()=>{S.confirm({title:"投保提示",message:"选择转批扣后将对该笔订单进行转换批次扣款，提交后将无法操作变更卡号，再次划款",cancelButtonText:"返回重选"}).then((async()=>{await P({orderNo:F,tenantId:x})}))};return d((()=>{R||_({orderNo:F,tenantId:x}).then((a=>{var e,t,r;const{code:o,data:s}=a;if("10000"===o){const{holder:{name:a},policyNo:o,insuredList:n}=s;B.value=s,null==(e=s.tenantOrderPaymentInfoList)||e[0];const{productName:d,riskList:u}=(null==(r=null==(t=null==n?void 0:n[0])?void 0:t.productList)?void 0:r[0])||{};E.value={holderName:a,productName:d,policyNo:o,validateDate:"",coverage:null==u?void 0:u[0].coverage,orderStatusDesc:l[s.orderStatus],orderStatus:s.orderStatus,orderNo:s.orderNo,orderAmount:`￥${s.orderAmount}`}}}))})),(a,t)=>{const r=h,o=C;return u(),c("div",g,[i(r),m("div",j,[m("div",T,p(e[v(B).orderStatus]),1),m("div",b,[m("div",D,[m("h4",q,p(v(E).productName),1),O]),i(L,{label:"投保人",content:v(E).holderName,line:""},null,8,["content"]),i(L,{label:"保单号",content:v(E).policyNo,line:""},null,8,["content"]),i(L,{label:"保费",content:v(E).orderAmount,line:""},null,8,["content"])]),m("div",U,[v(G)?(u(),c(y,{key:0},[i(o,{type:"primary",plain:"",onClick:$},{default:N((()=>[f("变更卡号")])),_:1}),i(o,{type:"primary",onClick:z},{default:N((()=>[f("线下扣款")])),_:1})],64)):(u(),I(o,{key:1,block:"",type:"primary",onClick:J},{default:N((()=>[f("返回")])),_:1}))])])])}}}),[["__scopeId","data-v-3daa3074"]]);export{F as default};

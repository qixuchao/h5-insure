import{g as R,M as T,E as f,x as $,a9 as S,y as U,r as d,j as p,k as D,m as i,p as u,A as n,R as q,z as c,n as C,G as z,J as k,F as M,t as W,C as m,D as Z,T as j}from"./vendor-2cbdc914.js";import{_ as G,$ as H}from"./index-3d63a4f2.js";import{Z as J,e as O}from"./empty-4d9bf2f6.js";import{P as K}from"./index-4db09cac.js";import{d as Q,h as X}from"./proposalList-78de644f.js";import{a as Y,b as w,t as ee}from"./format-99418f69.js";const te={class:"proposal-content"},ae={class:"title"},se={class:"premium"},oe=m(" \u4FDD\u8D39\uFF1A"),ue={class:"operate-btn"},ne=m("\u5220\u9664"),le=m("\u7F16\u8F91"),re=m("\u9884\u89C8"),ie=R({setup(ce){const x=[{title:"\u9669\u79CD\u540D\u79F0",dataIndex:"riskName",width:180},{title:"\u4FDD\u969C\u671F\u95F4",dataIndex:"coveragePeriod",render:e=>Y(e==null?void 0:e.coveragePeriod)},{title:"\u7F34\u8D39\u671F\u95F4",dataIndex:"chargePeriod",width:110,render:e=>w(e==null?void 0:e.chargePeriod)},{title:"\u4FDD\u8D39",dataIndex:"premium",width:120,render:e=>ee(e==null?void 0:e.premium)}],A=T({historyList:[],searchValue:""}),_=f(!1),g=f(!1),l=f(1),{historyList:o,searchValue:r}=$(A),y=S(),v=()=>{X({name:r.value,pageNum:l.value,pageSize:20,relationUserType:2}).then(e=>{const{code:a,data:s}=e;a==="10000"&&(l.value===1?o.value=s.datas||[]:o.value=o.value.concat(s.datas),l.value+=1,_.value=!1,g.value=o.value.length>=s.total)})},B=()=>{v()},F=U(()=>o.value.length>0),E=e=>{r.value=e,l.value=1,v()},V=e=>{Z.confirm({message:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BA1\u5212\u4E66\uFF1F"}).then(()=>{Q(e).then(a=>{const{code:s}=a;s==="10000"&&(j.success("\u5220\u9664\u6210\u529F"),l.value=1,v())})}).catch(()=>{})},b=e=>{y.push({path:"compositionProposal",query:{id:e}})},L=e=>{y.push({path:"/proposal/createProposal",query:{id:e}})};return(e,a)=>{const s=d("van-search"),h=d("van-button"),N=d("van-list"),I=d("ProPageWrap");return p(),D(I,{class:"page-history-proposal"},{default:i(()=>[u(s,{modelValue:n(r),"onUpdate:modelValue":a[0]||(a[0]=t=>q(r)?r.value=t:null),placeholder:"\u8BF7\u8F93\u5165\u88AB\u4FDD\u4EBA\u59D3\u540D/\u8BA1\u5212\u4E66\u540D\u79F0",shape:"round",class:"search",onSearch:E},null,8,["modelValue"]),c("div",te,[u(N,{loading:_.value,"onUpdate:loading":a[1]||(a[1]=t=>_.value=t),finished:g.value,"finished-text":n(F)?"- \u6CA1\u6709\u66F4\u591A\u4E86 -":"",onLoad:B},{default:i(()=>[(p(!0),C(M,null,z(n(o),t=>(p(),C("div",{key:t.id,class:"proposal-item"},[c("div",ae,k(t.proposalName)+"\u8BA1\u5212\u4E66",1),c("p",se,[oe,c("span",null,"\xA5"+k(n(H)(t.totalPremium)),1)]),u(K,{columns:x,class:"table","data-source":t.proposalProductRiskVOList},null,8,["data-source"]),c("div",ue,[u(h,{plain:"",round:"",type:"primary",class:"del-btn",onClick:P=>V(t.id)},{default:i(()=>[ne]),_:2},1032,["onClick"]),u(h,{plain:"",round:"",type:"primary",onClick:P=>L(t.id)},{default:i(()=>[le]),_:2},1032,["onClick"]),u(h,{plain:"",round:"",type:"primary",onClick:P=>b(t.id)},{default:i(()=>[re]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["loading","finished","finished-text"])]),n(F)?W("",!0):(p(),D(J,{key:0,"empty-img":n(O),title:"\u6682\u65E0\u5386\u53F2\u8BA1\u5212\u4E66","empty-class":"empty-select"},null,8,["empty-img"]))]),_:1})}}});var fe=G(ie,[["__scopeId","data-v-b6d7e812"]]);export{fe as default};

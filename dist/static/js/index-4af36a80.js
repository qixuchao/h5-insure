import{ac as e,_ as n,d as a,r as o,J as t,am as r,E as l,S as i,ag as s,aI as u,aK as c,c as d,g as m,f,w as p,i as v,m as I,j as D,F as y,t as k,b5 as Y,n as b,l as V,V as S,bT as g,B as w,bi as h,a7 as E,X as L,Y as O,e as M,a2 as C}from"./index-5239afda.js";import{m as _,n as N}from"./infoCollection-2434be00.js";import"./trial-04861e1a.js";import"./pdfh5-008ca364.js";const x=(n,a="YYYY-MM-DD")=>e(n).format(a),P=(n,a=0,o="day",t="YYYY-MM-DD")=>e(n).add(a,o).format(t),U=(n,a=0,o="day",t="YYYY-MM-DD")=>e(n).subtract(a,o).format(t);const T=e=>(L("data-v-003d209e"),e=e(),O(),e),R={class:"com-period-cell"},$={key:0,class:"period-custom-cell period-check-btn-cell"},F=T((()=>v("div",{class:"period-cell-label"},"保障期间",-1))),q={class:"period-cell-content"},A=T((()=>v("div",{class:"period-cell-label"},"生效日期",-1))),j={class:"period-cell-content period-custom-cell-content"},H=T((()=>v("div",{class:"period-cell-label"},"保障期限",-1))),X={class:"period-cell-content period-custom-cell-content"},B={key:2,class:"period-custom-cell period-common-cell"},J=T((()=>v("div",{class:"period-cell-label"},"保障期限",-1))),K={class:"period-cell-content"},z=T((()=>v("div",{class:"picker-custom-title"},"保险开始生效日期",-1))),G=b("确 定");var Q=n(a({props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})}},emits:["onReset","onUpdate","onVerify"],setup(n,{expose:a,emit:b}){const L=n;o({});const O=(e,n)=>"year"===e?`${n}年`:"month"===e?`${n}月`:"day"===e?`${n}日`:n,M=o(new Date),C=t({formInfo:L.formInfo}),T=o(!0),Q=o();o([]),r((()=>C.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(M.value=new Date(e))}));const W=l((()=>{var e;const{insurancePeriodValueList:n=[]}=(null==(e=L.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n.length?(C.formInfo.coveragePeriod||(C.formInfo.coveragePeriod=n[0].code),n):[]})),Z=l((()=>{var e;const{insuranceStartType:n}=(null==(e=L.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),ee=l((()=>{var e;const{insuranceEndType:n}=(null==(e=L.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),[ne,ae]=i(!1),oe=()=>{T.value&&ae(!0)},te=l((()=>{var e,n;if(Z.value===_.CUSTOM_DAY){const a=null==(n=null==(e=L.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(a&&a.indexOf(",")){const[e,n]=a.split(",");return new Date(P(new Date,Number(e),"day"))}}return new Date(P(new Date,1,"day"))})),re=l((()=>{var e,n;if(Z.value===_.CUSTOM_DAY){const a=null==(n=null==(e=L.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(!a)return new Date;if(a.indexOf(",")){const[e,n]=a.split(",");return new Date(P(new Date,Number(n),"day"))}const o=P(new Date,Number(a),"day");return new Date(o)}return new Date})),le=e=>{C.formInfo.insuranceStartDate=`${x(e)} 00:00:00`,ae(!1)},ie=()=>{ae(!1)};return r((()=>L.riskInfo),(()=>{const{productRiskInsureLimitVO:e}=L.riskInfo||{};if(e){const{amountPremiumConfigVO:n,insurancePeriodValueList:a,paymentFrequencyList:o=[],paymentPeriodValueList:t}=e||{};W.value=a}}),{deep:!0,immediate:!0}),r([()=>Z.value,()=>C.formInfo.coveragePeriod,()=>C.formInfo.insuranceStartDate,()=>Q.value],(()=>{var n,a;if(!C.formInfo.coveragePeriod)return;const[o,t]=C.formInfo.coveragePeriod.split("_");if(!C.formInfo.insuranceStartDate)if(Z.value===_.CUSTOM_DAY){const e=null==(a=null==(n=L.riskInfo)?void 0:n.productRiskInsureLimitVO)?void 0:a.maxInsuranceDay;if(e)if(e.indexOf(",")){const[n,a]=e.split(",");C.formInfo.insuranceStartDate=`${P(new Date,Number(n),"day")} 00:00:00`,T.value=n!==a}else C.formInfo.insuranceStartDate=`${P(new Date,e,"day")} 00:00:00`;else C.formInfo.insuranceStartDate=`${P(new Date,1,"day")} 00:00:00`}else Z.value===_.NEXT_DAY?C.formInfo.insuranceStartDate=`${P(new Date,1,"day")} 00:00:00`:C.formInfo.insuranceStartDate=`${x(new Date)} 00:00:00`;if("to"!==o)U(C.formInfo.insuranceStartDate,1,"day"),ee.value===N.CURRENT_DAY?C.formInfo.insuranceEndDate=`${e(new Date(C.formInfo.insuranceStartDate)).add(Number(t),o).subtract(1,"day")} 23:59:59`:C.formInfo.insuranceEndDate=`${P(C.formInfo.insuranceStartDate,Number(t),o)} 00:00:00`;else{let e=C.formInfo.tenantOrderInsuredList[0].birthday;C.formInfo.tenantOrderInsuredList[0].certType===s.CERT&&C.formInfo.tenantOrderInsuredList[0].certNo&&u(C.formInfo.tenantOrderInsuredList[0].certNo)&&(e=c(C.formInfo.tenantOrderInsuredList[0].certNo));const n=`${U(e,1,"day")} 00:00:00`;"single"===t&&(C.formInfo.insuranceEndDate="9999-99-99 23:59:59"),ee.value===N.CURRENT_DAY?C.formInfo.insuranceEndDate=`${P(n,Number(t),o)} 23:59:59`:C.formInfo.insuranceEndDate=`${P(e,Number(t),o)} 00:00:00`}}),{immediate:!0}),a({}),(e,n)=>{const a=V,o=S,t=g,r=w,l=h,i=E;return d(),m(y,null,[f(t,null,{default:p((()=>[v("div",R,[I(W).length>1?(d(),m("div",$,[F,v("div",q,[f(a,{modelValue:I(C).formInfo.coveragePeriod,"onUpdate:modelValue":n[0]||(n[0]=e=>I(C).formInfo.coveragePeriod=e),prop:{label:"value",value:"code"},options:I(W)},null,8,["modelValue","options"])])])):D("",!0),I(Z)===I(_).CUSTOM_DAY?(d(),m("div",{key:1,class:"period-custom-cell period-common-cell",onClick:oe},[T.value?(d(),m(y,{key:0},[A,v("div",j,[v("span",null,k(I(C).formInfo.insuranceStartDate?I(x)(I(C).formInfo.insuranceStartDate,"YYYY.MM.DD HH:mm:ss"):""),1),f(o,{class:"custom--arrow-right",name:"arrow-right"})])],64)):(d(),m(y,{key:1},[H,v("div",X,[v("span",null,k(I(C).formInfo.insuranceStartDate?I(x)(I(C).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+k(I(C).formInfo.insuranceEndDate?I(x)(I(C).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])],64))])):D("",!0),I(Z)!==I(_).CUSTOM_DAY?(d(),m("div",B,[J,v("div",K,k(I(C).formInfo.insuranceStartDate?I(x)(I(C).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+k(I(C).formInfo.insuranceEndDate?I(x)(I(C).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])):D("",!0)])])),_:1}),f(i,{show:I(ne),"onUpdate:show":n[3]||(n[3]=e=>Y(ne)?ne.value=e:null),height:340,closeable:!0},{default:p((()=>[f(l,{modelValue:M.value,"onUpdate:modelValue":n[2]||(n[2]=e=>M.value=e),type:"date",title:"保险开始生效日期","min-date":I(te),"max-date":I(re),formatter:O,"visible-item-count":5,class:"custom-date-picker",onConfirm:le,onCancel:ie},{cancel:p((()=>[])),title:p((()=>[z])),confirm:p((()=>[f(r,{type:"primary",round:"",block:"",class:"linear-btn custom-picker-btn",onClick:n[1]||(n[1]=e=>ne.value=!1)},{default:p((()=>[G])),_:1})])),_:1},8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-003d209e"]]);const W=e=>(L("data-v-cfd68946"),e=e(),O(),e),Z={class:"com-payment-type"},ee={class:"title"},ne={key:0,class:"custom-cell check-btn-cell"},ae=W((()=>v("div",{class:"cell-label"},"保障方案",-1))),oe={class:"cell-content"},te={key:1,class:"custom-cell check-btn-cell"},re=W((()=>v("div",{class:"cell-label"},"交费方式",-1))),le={class:"cell-content"},ie={key:2,class:"custom-cell check-btn-cell"},se=W((()=>v("div",{class:"cell-label"},"交费期间",-1))),ue={class:"cell-content"};var ce=n(a({props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})},tenantProductDetail:{default:()=>({})},planList:{default:()=>[]}},setup(e){const n=e;o({});const a=t({formInfo:n.formInfo}),i=o(),s=o();o([]);const u=o([]),c=o([]),y=l((()=>{var e;return!!(null==(e=n.planList)?void 0:e.length)}));l((()=>{var e;return"1"===String(null==(e=i.value)?void 0:e.paymentFrequencyFlag)}));const Y=l((()=>{if(s){const{premiumExplain:e,premiumExplainViewName:n,premiumExplainUri:a}=s.value||{};return{premiumExplain:e,premiumExplainUri:a,premiumExplainViewName:n}}return null}));l((()=>Y.value&&Y.value.premiumExplain&&Y.value.premiumExplainViewName));const b=l((()=>{var e;if(i.value&&i.value.paymentFrequency){return((null==(e=i.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1})),S=e=>{a.formInfo.planCode=e};return r((()=>n.riskInfo),(()=>{var e,o;const{productRiskInsureLimitVO:t}=n.riskInfo||{};if(t){const{paymentFrequencyList:n=[],paymentPeriodValueList:r}=t||{};a.formInfo.paymentFrequency=null==(e=null==n?void 0:n[0])?void 0:e.code,a.formInfo.chargePeriod=null==(o=null==r?void 0:r[0])?void 0:o.code,u.value=r,c.value=n}}),{deep:!0,immediate:!0}),(n,o)=>{const t=V,r=C,l=g;return d(),M(l,null,{default:p((()=>[v("div",Z,[v("div",ee,k(I(b)?"交费方式":"保障计划"),1),I(y)?(d(),m("div",ne,[ae,v("div",oe,[f(t,{modelValue:I(a).formInfo.planCode,"onUpdate:modelValue":o[0]||(o[0]=e=>I(a).formInfo.planCode=e),options:e.planList,prop:{value:"planCode",label:"planName"},onChange:S},null,8,["modelValue","options"])])])):D("",!0),c.value.length>1?(d(),m("div",te,[re,v("div",le,[f(t,{modelValue:I(a).formInfo.paymentFrequency,"onUpdate:modelValue":o[1]||(o[1]=e=>I(a).formInfo.paymentFrequency=e),prop:{label:"value",value:"code"},options:c.value},null,8,["modelValue","options"])])])):D("",!0),u.value.length>1?(d(),m("div",ie,[se,v("div",ue,[f(t,{modelValue:I(a).formInfo.chargePeriod,"onUpdate:modelValue":o[2]||(o[2]=e=>I(a).formInfo.chargePeriod=e),prop:{label:"value",value:"code"},options:u.value},null,8,["modelValue","options"])])])):D("",!0),f(Q,{"form-info":I(a).formInfo,"risk-info":e.riskInfo},null,8,["form-info","risk-info"])]),f(r)])),_:1})}}}),[["__scopeId","data-v-cfd68946"]]);export{ce as default};

!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-occupational-wrapper .popup-title[data-v-1e1e74de]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-occupational-wrapper .popup-content[data-v-1e1e74de]{height:13.84rem}.com-occupational-wrapper .footer-bar[data-v-1e1e74de]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.com-risk-card-wrapper.part-card[data-v-cc1825f8]{background-color:#fff;margin-bottom:.26667rem}.com-risk-list-wrapper .popup-title[data-v-24ac5988]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-risk-list-wrapper .risk-list[data-v-24ac5988]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper .footer-bar[data-v-24ac5988]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.risk-list-wrapper[data-v-7d19d870]{margin-bottom:3.13333rem}.risk-list-wrapper .add-rider-risk[data-v-7d19d870]{background-color:#fff;margin-top:-.26667rem;height:1.41333rem;display:flex;align-items:center;justify-content:space-between;padding:var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding)}.risk-list-wrapper .add-rider-risk .left-part[data-v-7d19d870]{font-weight:400;color:#99a9c0;font-size:.4rem}@charset "UTF-8";.page-trial-wrapper[data-v-5c35ab58]{padding-bottom:2rem;background-color:#f2f5fc}.page-trial-wrapper .part-card[data-v-5c35ab58]{background-color:#fff;margin-bottom:.26667rem}.page-trial-wrapper .plan-risk[data-v-5c35ab58] .van-tabs__nav.van-tabs__nav--card{border:0!important}.page-trial-wrapper .plan-risk[data-v-5c35ab58] .van-tabs__nav.van-tabs__nav--card .van-tab.van-tab--card{margin:0 .16rem;background-color:#f7f6ff;border-right:0;color:var(--zaui-text-title);border-radius:.13333rem}.page-trial-wrapper .plan-risk[data-v-5c35ab58] .van-tabs__nav.van-tabs__nav--card .van-tab.van-tab--card.van-tab--active{background-color:var(--van-primary-color);color:#fff}.page-trial-wrapper .footer-bar[data-v-5c35ab58]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:.4rem;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #efeff4}.page-trial-wrapper .footer-bar .trial-result[data-v-5c35ab58]{width:5.86667rem;color:#ff5840;font-size:.32rem;font-weight:600}.page-trial-wrapper .footer-bar .trial-result .result-num[data-v-5c35ab58]{font-size:.61333rem;font-weight:500;margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate button[data-v-5c35ab58]{width:3.73333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-5c35ab58]{position:absolute;z-index:122;height:.56rem;border-radius:1.33333rem;background-color:#ff5840;font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC,sans-serif;font-weight:400;color:#fff;line-height:.49333rem;padding:.04rem .28rem .02667rem .26667rem;right:.4rem;top:-.56rem;display:flex;align-items:center}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip .close-icon[data-v-5c35ab58]{margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-5c35ab58]:after{content:" ";position:absolute;z-index:11;width:0;height:0;border:.13333rem solid transparent;border-top:.13333rem solid #ff5840;border-right:.13333rem solid #ff5840;right:.49333rem;bottom:-.26667rem}\n',document.head.appendChild(e),System.register(["./vendor-legacy-9ea73bc7.js","./index-legacy-2baf4ef3.js","./index-legacy-1697b2ff.js"],(function(e){"use strict";var i,a,l,o,r,t,n,d,u,s,m,c,p,v,f,y,k,b,g,V,h,I,L,D,O,R,C,_,w,A,q,x,P,T,F,U;return{setters:[function(e){i=e.g,a=e.L,l=e.o,o=e.a1,r=e.r,t=e.k,n=e.m,d=e.n,u=e.j,s=e.y,m=e.z,c=e.a2,p=e.a3,v=e.a4,f=e.C,y=e.x,k=e.d,b=e.h,g=e.s,V=e.I,h=e.a5,I=e.a6,L=e.F,D=e.E,O=e.a7,R=e.a8,C=e.B,_=e.D,w=e.Q,A=e.a9},function(e){q=e.P,x=e.a},function(e){P=e.b,T=e.S,F=e._,U=e.P}],execute:function(){const j=[{label:"男",value:"1"},{label:"女",value:"2"}],M=[{label:"有",value:"1"},{label:"无",value:"2"}],Y=[{value:1,label:"第5个保单周年日"},{value:2,label:"起始领取年龄55周岁"},{value:3,label:"起始领取年龄60周岁"},{value:4,label:"起始领取年龄65周岁"},{value:5,label:"起始领取年龄70周岁"},{value:6,label:"起始领取年龄75周岁"}],E=[{value:1,label:"年领"},{value:2,label:"月领"}],S=[{label:"趸交",value:"1"},{label:"年交",value:"2"},{label:"半年交",value:"3"},{label:"季交",value:"4"},{label:"月交",value:"5"}],N=[{label:"趸交",value:"single"},{label:"1年交",value:"year_1"},{label:"5年交",value:"year_5"},{label:"10年交",value:"year_10"},{label:"15年交",value:"year_15"},{label:"20年交",value:"year_20"},{label:"25年交",value:"year_25"},{label:"30年交",value:"year_30"},{label:"35年交",value:"year_35"}],B=[{label:"7天",value:"day_7"},{label:"14天",value:"day_14"},{label:"30天",value:"day_30"},{label:"1年",value:"year_1"},{label:"3年",value:"year_3"},{label:"5年",value:"year_5"},{label:"10年",value:"year_10"},{label:"15年",value:"year_15"},{label:"20年",value:"year_20"},{label:"25年",value:"year_25"},{label:"30年",value:"year_30"},{label:"35年",value:"year_35"},{label:"终身",value:"to_life"}],z=[{label:"同主险期间减1",value:"3"},{label:"无限制",value:"2"}],$=[{label:"返保额",value:"1"},{label:"返保费",value:"2"}],G=[{label:"投保",value:"0"},{label:"不投保",value:"-1"}];new T({source:"sessionStorage"});const H=new T({source:"localStorage"});new T({source:"cookie"});const Q={class:"com-occupational-wrapper"},W=(e=>(c("data-v-1e1e74de"),e=e(),p(),e))((()=>s("div",{class:"popup-title"},"选择职业",-1))),X={class:"popup-content"},Z=i({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(e,{emit:i}){const c=e,p=a({show:c.show,options:[],currentValue:""}),v=()=>{i("close")},f=({value:e,selectedOptions:a})=>{const l=(a||[]).map((e=>e.value)).join("/");i("update:modelValue",e),i("finish",l),v()},y=()=>{var e,i;const a=`${null===(e=c.insurerCode)||void 0===e||null===(i=e.toLocaleUpperCase)||void 0===i?void 0:i.call(e)}_OCCUPATION`,l=H.get("occupational")||{};l[a]?p.options=l[a]:((e={})=>P.post("/api/gateway/system/dict/v2/queryDictInfo",e))({dictCodeList:[a]}).then((({code:e,data:i})=>{if("10000"===e){var o;const e=(e=>{const i=e,a=e=>{e.forEach((e=>{const i=e;i.children.length?a(i.children):i.children=null}))};return a(i),i})((null==i||null===(o=i[0])||void 0===o?void 0:o.dictItemList)||[]);p.options=e,l[a]=e,H.set("occupational",l)}}))};return l((()=>{y()})),o((()=>c.modelValue),(e=>{}),{deep:!0,immediate:!0}),(e,i)=>{const a=r("van-cascader"),l=r("VanPopup");return t(),n("div",Q,[d(l,{show:m(p).show,"onUpdate:show":i[1]||(i[1]=e=>m(p).show=e),"show-footer":"",position:"bottom",closeable:"",onClose:v},{default:u((()=>[W,s("div",X,[d(a,{modelValue:m(p).currentValue,"onUpdate:modelValue":i[0]||(i[0]=e=>m(p).currentValue=e),title:"请选择职业","show-header":!1,placeholder:"请选择",options:m(p).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:f},null,8,["modelValue","options"])])])),_:1},8,["show"])])}}});var J=F(Z,[["__scopeId","data-v-1e1e74de"]]);const K={class:"com-personal-info-wrapper"},ee=i({props:{formInfo:{type:Object,required:!0,default:()=>{}},insuredCode:{type:String,required:!0,default:""},factorList:{type:Array,required:!0,default:()=>[]},ageRange:{type:Array,required:!0,default:()=>[]}},setup(e,{expose:i}){const l=e,[o,c]=v(),[p,I]=v(),L=f(),D=a({formInfo:null==l?void 0:l.formInfo,occupationalText:""}),O=e=>{D.occupationalText=e},R=()=>{I(!1)};return y((()=>{const e=(e="")=>[+e.split("_")[1],e.split("_")[0]],i=e((null==l?void 0:l.ageRange)[1]),a=e((null==l?void 0:l.ageRange)[0]);return{minAge:new Date(k().subtract(i[0],i[1])),maxAge:new Date(k().subtract(a[0],a[1]))}})),i({validateForm:()=>new Promise(((e,i)=>{null==L||L.value.validate().then((()=>{e("")}),(()=>{i()}))}))}),(i,a)=>{const l=r("VanField"),v=r("VanForm"),f=r("van-datetime-picker"),y=r("van-popup");return t(),n("div",K,[d(v,{ref_key:"formRef",ref:L,"input-align":"right","error-message-align":"right"},{default:u((()=>[e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")?(t(),b(l,{key:0,modelValue:m(D).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>m(D).formInfo.birthday=e),rules:[{required:!0,message:"请选择"}],name:"birth",label:"出生日期","is-link":"",placeholder:"请选择",onClick:a[1]||(a[1]=e=>m(c)(!0))},null,8,["modelValue"])):g("",!0),e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER")?(t(),b(l,{key:1,modelValue:m(D).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>m(D).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(q,{modelValue:m(D).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>m(D).formInfo.gender=e),options:m(j)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):g("",!0),e.factorList.includes("SOCIAL_INS")?(t(),b(l,{key:2,modelValue:m(D).formInfo.socialSecurity,"onUpdate:modelValue":a[5]||(a[5]=e=>m(D).formInfo.socialSecurity=e),name:"socialSecurity",label:"社保",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(q,{modelValue:m(D).formInfo.socialSecurity,"onUpdate:modelValue":a[4]||(a[4]=e=>m(D).formInfo.socialSecurity=e),options:m(M)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):g("",!0),e.factorList.includes("OCCUPATION_CATEGORY")?(t(),b(l,{key:3,modelValue:m(D).formInfo.occupationalClass,"onUpdate:modelValue":a[6]||(a[6]=e=>m(D).formInfo.occupationalClass=e),rules:[{required:!0,message:"请选择"}],name:"occupationalClass",label:"职业类型","is-link":"",placeholder:"请选择",onClick:a[7]||(a[7]=e=>m(I)(!0))},{input:u((()=>[s("div",null,V(m(D).occupationalText),1)])),_:1},8,["modelValue"])):g("",!0)])),_:1},512),d(y,{show:m(o),"onUpdate:show":a[10]||(a[10]=e=>h(o)?o.value=e:null),position:"bottom"},{default:u((()=>[d(f,{type:"date","min-date":new Date("1900-01-01"),"max-date":new Date,onConfirm:a[8]||(a[8]=e=>{m(D).formInfo.birthday=m(k)(e).format("YYYY-MM-DD"),m(c)(!1)}),onCancel:a[9]||(a[9]=e=>m(c)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"]),m(p)?(t(),b(J,{key:0,modelValue:m(D).formInfo.occupationalClass,"onUpdate:modelValue":a[11]||(a[11]=e=>m(D).formInfo.occupationalClass=e),show:m(p),"insured-code":"insuredCode",onFinish:O,onClose:R},null,8,["modelValue","show"])):g("",!0)])}}});const ie=e=>(c("data-v-cc1825f8"),e=e(),p(),e),ae={class:"com-risk-card-wrapper part-card"},le=ie((()=>s("div",{class:"delete-risk"},null,-1))),oe={key:0},re={key:9,class:"liab-desc"},te=ie((()=>s("div",{class:"title"},"责任投保说明",-1))),ne=i({props:{originData:{type:Object,required:!0,default:()=>{}},formInfo:{type:Object,required:!0,default:()=>{}},mainRiskData:{type:Object,default:()=>{}},mainRiskInfo:{type:Object,required:!1,default:()=>{}},index:{type:[Number,String],default:0,required:!0},removeRisk:{type:Function,default:()=>{}},ageRange:{type:Array,required:!0,default:()=>["",""]}},setup(e){const i=e,c=I("premium")||{},p=a({formInfo:i.formInfo}),v=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"object Object"==={}.toString.call(e)&&Object.keys(e).length),f=(e,i)=>{let a=i;return Array.isArray(i)||(a=[`${a}`]),(e||[]).filter((e=>a.includes(`${e.value}`)||a.includes(e.value)))},k=y((()=>{var e,a,l,o,r,t;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?f(B,null==i||null===(r=i.originData)||void 0===r||null===(t=r.riskInsureLimitVO)||void 0===t?void 0:t.insurancePeriodValueList):2===(null===(a=i.originData)||void 0===a?void 0:a.periodType)?f([{value:"year_1",label:"1年"}],["year_1"]):f(B,null==i||null===(l=i.mainRiskData)||void 0===l||null===(o=l.riskInsureLimitVO)||void 0===o?void 0:o.insurancePeriodValueList)})),h=y((()=>{var e,a,l,o,r,t,n,d,u;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?f(N,null==i||null===(t=i.originData)||void 0===t||null===(n=t.riskInsureLimitVO)||void 0===n?void 0:n.paymentPeriodValueList):1===(null===(a=i.originData)||void 0===a?void 0:a.exemptFlag)?f(z,null==i||null===(d=i.originData)||void 0===d||null===(u=d.riskInsureLimitVO)||void 0===u?void 0:u.paymentPeriodRule):2===(null===(l=i.originData)||void 0===l?void 0:l.periodType)?f([{value:"year_1",label:"1年交"}],["year_1"]):f(N,null==i||null===(o=i.mainRiskData)||void 0===o||null===(r=o.riskInsureLimitVO)||void 0===r?void 0:r.paymentPeriodValueList)})),O=y((()=>{var e,a,l,o,r;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?f(S,null==i||null===(o=i.originData)||void 0===o||null===(r=o.riskInsureLimitVO)||void 0===r?void 0:r.paymentFrequencyList):f(S,null==i||null===(a=i.mainRiskData)||void 0===a||null===(l=a.riskInsureLimitVO)||void 0===l?void 0:l.paymentFrequencyList)})),R=y((()=>{var e,a;let l=0,o=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minAmount,o=e.maxAmount),l>e.minAmount&&(l=e.minAmount),o<e.maxAmount&&(o=e.maxAmount)})),p.formInfo.sumInsured=l,{min:l,max:o}})),C=y((()=>{var e,a;let l=0,o=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minPremium,o=e.maxPremium),l>e.minPremium&&(l=e.minPremium),o<e.maxPremium&&(o=e.maxPremium)})),p.formInfo.premium=l,{min:l,max:o}})),_=y((()=>{var e,a,l,o;const r=(null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.minCopy)||1,t=null===(l=i.originData)||void 0===l||null===(o=l.riskCalcMethodInfoVO)||void 0===o?void 0:o.maxCopy;return p.formInfo.copy=r,{min:r,max:t}}));return l((()=>{var e,a;const l={riskType:i.originData.riskType,riskId:i.originData.id,riskCode:i.originData.riskCode,mainRiskCode:null==i||null===(e=i.mainRiskData)||void 0===e?void 0:e.riskCode,mainRiskId:null==i||null===(a=i.mainRiskData)||void 0===a?void 0:a.id,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityId:e.id,liabilityRateType:e.liabilityRateType})))};Object.assign(null==p?void 0:p.formInfo,l)})),o((()=>{var e;return null===(e=p.formInfo)||void 0===e?void 0:e.paymentFrequency}),(e=>{var a,l,o,r;[3,4].includes(null===(a=i.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.saleMethod)&&((null===(o=i.originData)||void 0===o||null===(r=o.riskCalcMethodInfoVO)||void 0===r?void 0:r.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(p.formInfo,{sumInsured:i.perCopyAmount,premium:i.perCopyPremium})}))})),o((()=>null==i?void 0:i.mainRiskInfo),(e=>{var a,l,o,r,t,n;e&&2===i.originData.riskType&&(1===(null===(a=i.originData)||void 0===a||null===(l=a.riskInsureLimitVO)||void 0===l?void 0:l.insurancePeriodRule)&&(p.formInfo.coverageYear=e.coverageYear),1===(null===(o=i.originData)||void 0===o||null===(r=o.riskInsureLimitVO)||void 0===r?void 0:r.paymentPeriodRule)&&(p.formInfo.paymentYear=e.paymentYear),1===(null===(t=i.originData)||void 0===t||null===(n=t.riskInsureLimitVO)||void 0===n?void 0:n.paymentTypeRule)&&(p.formInfo.paymentFrequency=e.paymentFrequency))}),{immediate:!0,deep:!0}),(i,a)=>{var l,o,y,I,w,A,x,P,T,F,U,j,M,S,N,B,z,H,Q,W,X,Z,J,K,ee,ie,ne,de,ue,se,me,ce,pe,ve,fe,ye,ke,be,ge;const Ve=r("ProTitle"),he=r("RiskName"),Ie=r("VanStepper"),Le=r("VanField");return t(),n("div",ae,[d(Ve,{"risk-type":null===(l=e.originData)||void 0===l?void 0:l.riskType,title:null===(o=e.originData)||void 0===o?void 0:o.riskName},{default:u((()=>[le])),_:1},8,["risk-type","title"]),d(he,{"risk-type":null===(y=e.originData)||void 0===y?void 0:y.riskType,name:null===(I=e.originData)||void 0===I?void 0:I.riskName,onClick:a[0]||(a[0]=i=>{var a;return e.removeRisk(null===(a=e.originData)||void 0===a?void 0:a.id)})},null,8,["risk-type","name"]),1===(null===(w=e.originData)||void 0===w||null===(A=w.riskCalcMethodInfoVO)||void 0===A?void 0:A.saleMethod)?(t(),b(Le,{key:0,modelValue:m(p).formInfo.sumInsured,"onUpdate:modelValue":a[2]||(a[2]=e=>m(p).formInfo.sumInsured=e),label:"保额",name:"sumInsured",rules:[{required:!0,message:"请填写"}]},{input:u((()=>{var i,l;return[d(Ie,{modelValue:m(p).formInfo.sumInsured,"onUpdate:modelValue":a[1]||(a[1]=e=>m(p).formInfo.sumInsured=e),min:m(R).min,step:(null===(i=e.originData)||void 0===i||null===(l=i.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,max:m(R).max},null,8,["modelValue","min","step","max"])]})),_:1},8,["modelValue"])):g("",!0),2===(null===(x=e.originData)||void 0===x||null===(P=x.riskCalcMethodInfoVO)||void 0===P?void 0:P.saleMethod)?(t(),b(Le,{key:1,modelValue:m(p).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>m(p).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"}]},{input:u((()=>{var i,l;return[d(Ie,{modelValue:m(p).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>m(p).formInfo.premium=e),step:(null===(i=e.originData)||void 0===i||null===(l=i.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,min:m(C).min,max:m(C).max},null,8,["modelValue","step","min","max"])]})),_:1},8,["modelValue"])):g("",!0),3===(null===(T=e.originData)||void 0===T||null===(F=T.riskCalcMethodInfoVO)||void 0===F?void 0:F.saleMethod)||4===(null===(U=e.originData)||void 0===U||null===(j=U.riskCalcMethodInfoVO)||void 0===j?void 0:j.saleMethod)&&(null!==(M=e.originData)&&void 0!==M&&null!==(S=M.riskCalcMethodInfoVO)&&void 0!==S&&S.minCopy||null!==(N=e.originData)&&void 0!==N&&null!==(B=N.riskCalcMethodInfoVO)&&void 0!==B&&B.maxCopy)?(t(),b(Le,{key:2,modelValue:m(p).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>m(p).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:u((()=>[d(Ie,{modelValue:m(p).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>m(p).formInfo.copy=e),step:1,min:m(_).min,max:m(_).max},null,8,["modelValue","min","max"])])),_:1},8,["modelValue"])):g("",!0),1!==(null===(z=e.originData)||void 0===z||null===(H=z.riskCalcMethodInfoVO)||void 0===H?void 0:H.saleMethod)&&null!==(Q=m(c))&&void 0!==Q&&Q[null===(W=e.originData)||void 0===W?void 0:W.riskCode]?(t(),b(Le,{key:3,label:"保额"},{input:u((()=>{var i,a,l;return[s("div",null,V(null===(i=m(c))||void 0===i||null===(a=i[null===(l=e.originData)||void 0===l?void 0:l.riskCode])||void 0===a?void 0:a.amount),1)]})),_:1})):g("",!0),v(null===(X=e.originData)||void 0===X||null===(Z=X.riskInsureLimitVO)||void 0===Z?void 0:Z.insurancePeriodValueList)&&v(null===(J=e.originData)||void 0===J||null===(K=J.riskInsureLimitVO)||void 0===K?void 0:K.insurancePeriodRule)?g("",!0):(t(),b(Le,{key:4,modelValue:m(p).formInfo.coverageYear,"onUpdate:modelValue":a[8]||(a[8]=e=>m(p).formInfo.coverageYear=e),label:"保障期间",name:"coverageYear",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(q,{modelValue:m(p).formInfo.coverageYear,"onUpdate:modelValue":a[7]||(a[7]=e=>m(p).formInfo.coverageYear=e),options:m(k)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),v(null===(ee=e.originData)||void 0===ee||null===(ie=ee.riskInsureLimitVO)||void 0===ie?void 0:ie.paymentPeriodValueList)&&v(null===(ne=e.originData)||void 0===ne||null===(de=ne.riskInsureLimitVO)||void 0===de?void 0:de.paymentPeriodRule)?g("",!0):(t(),b(Le,{key:5,modelValue:m(p).formInfo.paymentYear,"onUpdate:modelValue":a[10]||(a[10]=e=>m(p).formInfo.paymentYear=e),label:"交费期间",name:"paymentYear",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(q,{modelValue:m(p).formInfo.paymentYear,"onUpdate:modelValue":a[9]||(a[9]=e=>m(p).formInfo.paymentYear=e),options:m(h)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),v(null===(ue=e.originData)||void 0===ue||null===(se=ue.riskInsureLimitVO)||void 0===se?void 0:se.paymentFrequencyList)&&v(null===(me=e.originData)||void 0===me||null===(ce=me.riskInsureLimitVO)||void 0===ce?void 0:ce.paymentTypeRule)?g("",!0):(t(),b(Le,{key:6,modelValue:m(p).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>m(p).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(q,{modelValue:m(p).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>m(p).formInfo.paymentFrequency=e),options:m(O)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),v(null===(pe=e.originData)||void 0===pe||null===(ve=pe.riskInsureLimitVO)||void 0===ve?void 0:ve.annuityDrawTypeList)?g("",!0):(t(),b(Le,{key:7,modelValue:m(p).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>m(p).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate",rules:[{required:!0,message:"请选择"}]},{input:u((()=>{var i,l;return[d(q,{modelValue:m(p).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>m(p).formInfo.annuityDrawDate=e),options:f(m(Y),null===(i=e.originData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawTypeList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),v(null===(fe=e.originData)||void 0===fe||null===(ye=fe.riskInsureLimitVO)||void 0===ye?void 0:ye.annuityDrawFrequencyList)?g("",!0):(t(),b(Le,{key:8,modelValue:m(p).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>m(p).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType",rules:[{required:!0,message:"请选择"}]},{input:u((()=>{var i,l;return[d(q,{modelValue:m(p).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>m(p).formInfo.annuityDrawType=e),options:f(m(E),null===(i=e.originData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawFrequencyList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),(t(!0),n(L,null,D((null===(ke=e.originData)||void 0===ke?void 0:ke.riskLiabilityInfoVOList)||[],((i,a)=>(t(),n("div",{key:a},[1===i.optionalFlag?(t(),b(Le,{key:0,modelValue:m(p).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(p).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:"请选择"}]},{input:u((()=>{var l,o,r;return[s("div",null,[v(i.liabilityAttributeValueList)?(t(),n("span",oe,"50万")):(t(),b(q,{key:1,modelValue:m(p).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(p).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:f(m($),null===(l=e.originData)||void 0===l||null===(o=l.riskLiabilityInfoVOList)||void 0===o||null===(r=o[a])||void 0===r?void 0:r.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(t(),b(Le,{key:1,modelValue:m(p).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(p).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:u((()=>{var l,o,r;return[s("div",null,[v(i.liabilityAttributeValueList)?(t(),b(q,{key:0,modelValue:m(p).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(p).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:m(G)},null,8,["modelValue","onUpdate:modelValue","options"])):(t(),b(q,{key:1,modelValue:m(p).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(p).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:f(m($),null===(l=e.originData)||void 0===l||null===(o=l.riskLiabilityInfoVOList)||void 0===o||null===(r=o[a])||void 0===r?void 0:r.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"]))])))),128)),null!==(be=e.originData)&&void 0!==be&&be.relationDesc?(t(),n("div",re,[te,s("div",null,V(null===(ge=e.originData)||void 0===ge?void 0:ge.relationDesc),1)])):g("",!0)])}}});var de=F(ne,[["__scopeId","data-v-cc1825f8"]]);const ue={class:"com-risk-list-wrapper"},se=(e=>(c("data-v-24ac5988"),e=e(),p(),e))((()=>s("div",{class:"popup-title"},"选择附加险",-1))),me={class:"risk-list"},ce={class:"footer-bar"},pe=C("确认"),ve=i({props:{riskList:{type:Array,required:!0,default:()=>[]},show:{type:Boolean,required:!0,default:!1},collocationList:{type:Array,default:()=>[]},disabled:{type:Array,required:!0,default:()=>[]},modelValue:{type:Array,required:!0,default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const l=e,c=f([]),p=f([]),v=f(l.disabled),y=a({show:l.show,currentChecked:[]}),k=e=>{var i,a,o;((e,i)=>{if(!l.collocationList.length)return i?void(y.currentChecked=[]):void y.currentChecked.push(e);l.collocationList.forEach((a=>{e===a.riskId&&(i?1===a.collocationType?y.currentChecked=y.currentChecked.filter((i=>!(i===a.collocationRiskId||i===e))):3===a.collocationType&&v.value.filter((e=>e!==a.collocationRiskId)):1===a.collocationType?y.currentChecked.push(a.collocationRiskId,e):3===a.collocationType&&v.value.push(a.collocationRiskId))}))})(e,y.currentChecked.includes(e)),null==c||null===(i=c.value)||void 0===i||null===(a=i[e])||void 0===a||null===(o=a.toggle)||void 0===o||o.call(a)},g=()=>{i("close")},V=()=>{const e=l.riskList.filter((e=>y.currentChecked.includes(e.id)));i("update:modelValue",p),i("finished",e),i("close")};return O((()=>{c.value=[]})),o((()=>l.modelValue),(e=>{p.value=e,v.value=e}),{deep:!0,immediate:!0}),(i,a)=>{const l=r("van-checkbox"),o=r("VanCell"),f=r("van-cell-group"),h=r("van-checkbox-group"),I=r("VanButton"),O=r("VanPopup");return t(),n("div",ue,[d(O,{show:m(y).show,"onUpdate:show":a[2]||(a[2]=e=>m(y).show=e),title:"选择附加险","show-footer":"",position:"bottom",closeable:"",onClose:g},{default:u((()=>[se,s("div",me,[d(h,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e)},{default:u((()=>[d(f,{inset:""},{default:u((()=>[(t(!0),n(L,null,D(e.riskList,(e=>(t(),b(o,{key:e.id,title:e.riskName,onClick:i=>k(e.id)},{"right-icon":u((()=>[d(l,{ref_for:!0,ref:i=>c.value[e.id]=i,disabled:v.value.includes(e.id),shape:"square",name:e.id,onClick:a[0]||(a[0]=R((()=>{}),["stop"]))},null,8,["disabled","name"])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),s("div",ce,[d(I,{type:"primary",disabled:!m(y).currentChecked.length,block:"",onClick:V},{default:u((()=>[pe])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var fe=F(ve,[["__scopeId","data-v-24ac5988"]]);const ye={class:"risk-list-wrapper"},ke={key:0,class:"add-rider-risk"},be={class:"left-part"},ge=C("+ 附加险"),Ve=i({props:{riskInfo:{type:Object,required:!0,default:()=>{}},originData:{type:Object,required:!0,default:()=>{}},pickFactor:{type:Function,required:!0,default:()=>{}}},setup(e){var i;const r=e,[c,p]=v(!1);f(null),f(null);const y=a({mainRiskInfo:r.riskInfo,riderRiskInfo:null===(i=r.riskInfo)||void 0===i?void 0:i.riderRiskVOList,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),k=(e,i)=>{(e||[]).forEach((e=>{Object.assign(y.riderRiskInfo,{[e.id]:{}})})),y.disabledList=i,y.requiredRiderRiskData=y.requiredRiderRiskData.concat(e)},h=e=>{var i;const a=[e];((null===(i=y.mainRiskData)||void 0===i?void 0:i.collocationVOList)||[]).forEach((i=>{e===i.riskId&&1===i.collocationType&&a.push(i.collocationRiskId)})),_.confirm({message:"确定要删除附加险么？"}).then((()=>{y.requiredRiderRiskData=y.requiredRiderRiskData.filter((e=>!a.includes(e.id))),Object.assign(y.riderRiskInfo,{[e]:void 0})})).catch((()=>{}))},I=(e,i)=>{const a=e.split("_"),l=i.split("_");return a[0]===l[0]?+a[1]>+l[1]?[i,e]:[e,i]:"age"===a[0]?[e,i]:[i,e]};return l((()=>{y.requiredRiderRiskData})),o((()=>y.mainRiskInfo),(e=>{}),{deep:!0,immediate:!0}),o((()=>y.riderRiskInfo),(()=>{}),{deep:!0,immediate:!0}),o((()=>y.requiredRiderRiskData),(e=>{const i=[y.mainRiskData,...e];let a=[],l=[],o=[];i.forEach(((e,i)=>{var r;const t=(null==e||null===(r=e.riskCalcMethodInfoVO)||void 0===r?void 0:r.riskFactorRelationList)||[];if(a=a.concat(t.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),l=l.concat(t.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),0===i){var n,d;o[0]=(null==e||null===(n=e.riskInsureLimitVO)||void 0===n?void 0:n.minHolderAge)||"",o[1]=null==e||null===(d=e.riskInsureLimitVO)||void 0===d?void 0:d.maxHolderAge}else{var u,s;const i=I(o[0],null==e||null===(u=e.riskInsureLimitVO)||void 0===u?void 0:u.minHolderAge)[0],a=I(o[1],null==e||null===(s=e.riskInsureLimitVO)||void 0===s?void 0:s.maxHolderAge)[1];o=[i,a]}})),(e||[]).forEach((e=>{Object.assign(y.riderRiskInfo,{[e.id]:{}})})),r.pickFactor({insuredFactorList:[...new Set(a)],holderFactorList:[...new Set(l)],ageRange:o})}),{deep:!0,immediate:!0}),o((()=>r.originData),(e=>{(e||[]).forEach((e=>{1===e.riskType?(y.mainRiskData=e,y.requiredRiderRiskData=(null==e?void 0:e.requiredRiderRiskVOList)||[],y.riderRiskList=null==e?void 0:e.optionalRiderRiskVOList):y.riderRiskList.push(e)}))}),{deep:!0,immediate:!0}),o((()=>r.riskInfo),(()=>{}),{immediate:!0,deep:!0}),(e,i)=>{var a,l,o,r,v;return t(),n("div",ye,[d(de,{"form-info":m(y).mainRiskInfo,"origin-data":m(y).mainRiskData},null,8,["form-info","origin-data"]),(t(!0),n(L,null,D(m(y).requiredRiderRiskData,((e,i)=>(t(),b(de,{key:e.id,"form-info":m(y).riderRiskInfo[e.id],index:i,"main-risk-data":m(y).mainRiskData,"main-risk-info":m(y).mainRiskInfo,"origin-data":e,"remove-risk":h},null,8,["form-info","index","main-risk-data","main-risk-info","origin-data"])))),128)),(null===(a=m(y))||void 0===a||null===(l=a.riderRiskList)||void 0===l?void 0:l.length)-(null===(o=m(y))||void 0===o||null===(r=o.checkedList)||void 0===r?void 0:r.length)?(t(),n("div",ke,[s("span",be,V(`共有${m(y).riderRiskList.length-m(y).checkedList.length}款附加险可以添加`),1),d(x,{activied:"",onClick:i[0]||(i[0]=e=>m(p)(!0))},{default:u((()=>[ge])),_:1})])):g("",!0),m(c)?(t(),b(fe,{key:1,modelValue:m(y).checkedList,"onUpdate:modelValue":i[1]||(i[1]=e=>m(y).checkedList=e),show:m(c),disabled:m(y).disabledList,"risk-list":m(y).riderRiskList,"collocation-list":(null===(v=m(y).mainRiskData)||void 0===v?void 0:v.collocationVOList)||[],onFinished:k,onClose:i[2]||(i[2]=e=>m(p)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):g("",!0)])}}});var he=F(Ve,[["__scopeId","data-v-7d19d870"]]);const Ie={key:0,class:"part-card"},Le={key:1,class:"part-card"},De={class:"risk-content"},Oe={key:0,class:"risk"},Re={key:1,class:"plan-risk"},Ce={class:"footer-bar"},_e={class:"trial-result"},we={class:"result-num"},Ae=C(" 元起 "),qe={class:"trial-operate"},xe={key:0,class:"retrial-tip"},Pe=C(" 条件更改后，需要重新试算 "),Te=C("去试算"),Fe=C("立即投保"),Ue=i({setup(e){const{id:i=115}=w().query,c=f({personVO:{}}),p=f({insuredCode:"",personVO:{}}),v=f({}),y=f({}),k=f({}),h=f({}),I=f({});A("premium",I.value);const O=a({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0,retrialTip:!1,ageRange:[]}),R=()=>{O.retrialTip=!1},C=()=>{var e;const i=Object.values(v.value[O.currentPlan].riderRiskVOList).map((e=>{const i=e;if("3"===i.paymentYear){const e=(v.value[O.currentPlan].paymentYear||"").split("_");e[1]&&(e[1]-=1),i.paymentYear=e.join("_")}return i.liabilityVOList=i.liabilityVOList.filter((e=>!["-1"].includes(e.liabilityAttributeValue))).map((e=>{const i=e;return"0"===i.liabilityAttributeValue&&(i.liabilityAttributeValue=""),i})),i})),a={...v.value[O.currentPlan]};a.liabilityVOList=a.liabilityVOList.filter((e=>!["-1"].includes(e.liabilityAttributeValue))).map((e=>{const i=e;return"0"===i.liabilityAttributeValue&&(i.liabilityAttributeValue=""),i}));((e={})=>P.post("/api/insurance/premiumCalc",e))({...{holder:{personVO:{...c.value.personVO,birthday:c.value.personVO.birthday&&`${c.value.personVO.birthday} 00:00:00`}},productCode:null==O||null===(e=O.riskBaseInfo)||void 0===e?void 0:e.productCode,insuredVOList:[{...p.value,personVO:{...p.value.personVO,birthday:p.value.personVO.birthday&&`${p.value.personVO.birthday} 00:00:00`},productPlanVOList:[{planCode:O.currentPlan||"",riskVOList:[{...a,riderRiskVOList:i}]}]}]}}).then((({code:e,data:i})=>{if("10000"===e){O.trialResult=i,O.canTrial=!1;const e={};(i.riskPremiumDetailVOList||[]).forEach((i=>{e[i.riskCode]=i})),Object.assign(I.value,e)}}))},_=()=>{var e,i,a,l,o;Promise.all([null==y||null===(e=y.value)||void 0===e||null===(i=e.validateForm)||void 0===i?void 0:i.call(e),null==k||null===(a=k.value)||void 0===a||null===(l=a.validateForm)||void 0===l?void 0:l.call(a),null==h||null===(o=h.value)||void 0===o?void 0:o.validate()]).then((()=>{C()}))},q=()=>{((e={})=>P.get(`/api/product/insureProductDetail/${null==e?void 0:e.productId}`,e))({productId:i}).then((({code:e,data:i})=>{"10000"===e&&(O.riskBaseInfo=null==i?void 0:i.productBasicInfoVO,((null==i?void 0:i.productRelationPlanVOList)||(null==i?void 0:i.riskDetailVOList)||[]).forEach(((e,i)=>{0===i&&(O.currentPlan=e.planCode||0),Object.assign(v.value,{[e.planCode||i]:{liabilityVOList:[],riderRiskVOList:{}}})})),O.riskData=(null==i?void 0:i.riskDetailVOList)||[],O.riskPlanData=(null==i?void 0:i.productRelationPlanVOList)||[])})).finally((()=>{}))},x=e=>{O.holderFactor=e.holderFactorList,O.insuredFactor=e.insuredFactorList,O.ageRange=e.ageRange};return o([()=>v.value,()=>c.value,()=>p.value],(e=>{e&&!O.canTrial&&(O.canTrial=!0,O.retrialTip=!0)}),{deep:!0}),l((()=>{q()})),(e,i)=>{const a=r("VanForm"),l=r("VanTab"),o=r("VanTabs"),f=r("VanButton"),I=r("ZaPageWrap");return t(),b(I,{class:"page-trial-wrapper"},{default:u((()=>{var e,r,I,C;return[m(O).holderFactor.length?(t(),n("div",Ie,[d(U,{title:"投保人"}),d(ee,{ref_key:"holderRef",ref:y,"insured-code":null===(e=m(O).riskBaseInfo)||void 0===e?void 0:e.insuredCode,"form-info":c.value.personVO,"factor-list":m(O).holderFactor,"age-range":m(O).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):g("",!0),m(O).insuredFactor.length?(t(),n("div",Le,[d(U,{title:"被保人"}),d(ee,{ref_key:"insuredRef",ref:k,"insured-code":null===(r=m(O).riskBaseInfo)||void 0===r?void 0:r.insuredCode,"form-info":p.value.personVO,"factor-list":m(O).insuredFactor,"age-range":m(O).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):g("",!0),s("div",De,[m(O).riskData.length?(t(),n("div",Oe,[d(a,{ref_key:"riskFormRef",ref:h,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(he,{"risk-info":v.value[0],"origin-data":m(O).riskData,"pick-factor":x},null,8,["risk-info","origin-data"])])),_:1},512)])):g("",!0),m(O).riskPlanData.length?(t(),n("div",Re,[d(a,{ref_key:"riskFormRef",ref:h,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(o,{modelValue:m(O).currentPlan,"onUpdate:modelValue":i[0]||(i[0]=e=>m(O).currentPlan=e)},{default:u((()=>[(t(!0),n(L,null,D(m(O).riskPlanData,(e=>(t(),b(l,{key:e.planCode,name:e.planCode,title:e.planName},{default:u((()=>[e.planCode===m(O).currentPlan?(t(),b(he,{key:0,"risk-info":v.value[e.planCode],"origin-data":e.riskDetailVOList,"pick-factor":x},null,8,["risk-info","origin-data"])):g("",!0)])),_:2},1032,["name","title"])))),128))])),_:1},8,["modelValue"])])),_:1},512)])):g("",!0)]),s("div",Ce,[s("span",_e,[s("span",we,V(((null===(I=m(O))||void 0===I||null===(C=I.trialResult)||void 0===C?void 0:C.premium)||0).toLocaleString()),1),Ae]),s("div",qe,[m(O).retrialTip?(t(),n("div",xe,[Pe,s("span",{class:"close-icon",onClick:R},"X")])):g("",!0),m(O).canTrial?(t(),b(f,{key:1,type:"primary",onClick:_},{default:u((()=>[Te])),_:1})):(t(),b(f,{key:2,type:"primary",onClick:_},{default:u((()=>[Fe])),_:1}))])])]})),_:1})}}});e("default",F(Ue,[["__scopeId","data-v-5c35ab58"]]))}}}))}();

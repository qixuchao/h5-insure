import{d as t,i as e,r as a,o as n,c as o,a as l,e as i,b as d,w as s,F as r,n as c,l as u,u as m,m as v,_ as p,co as f,h as I,g as h,O as y,dA as g,an as b,b7 as C,cW as N,a8 as k,al as _,q as x,V as A,dx as L,aw as w,c2 as j,a9 as O,bT as D,bk as T,ae as V,at as P,au as Y,aA as S,T as G,bG as M,dB as U}from"./index-0bb786f6.js";import{C as E}from"./index-33beccd3.js";import{_ as H}from"./index-c57608b2.js";import{_ as q}from"./box-title-70dc1627.js";import{d as F}from"./order-266b7261.js";import{i as J,o as Q}from"./trial-07cd8d4e.js";import{f as R,g as W}from"./infoCollection-2c314413.js";import{g as $,s as B}from"./core-938079de.js";import{I as z}from"./infoItem-25f75bbf.js";import{C as K}from"./index-8bced66d.js";import"./PayInfo-15e83218.js";import"./bankCard-978540a1.js";const X={class:"insurance-notification-information"},Z={class:"insurance-notification-information-title"},tt={class:"insurance-notification-information-collapse"},et={class:"insurance-notification-information-content"};var at=p(t({__name:"insuranceNotificationInformation",props:{title:{default:""},data:{default:()=>[]}},setup(t){const p=e([]);return a({text:"",occupationClass:""}),(t,e)=>{const a=E,f=K;return n(),o("div",X,[l("div",Z,i(t.title),1),l("div",tt,[d(f,{modelValue:m(p),"onUpdate:modelValue":e[0]||(e[0]=t=>v(p)?p.value=t:null)},{default:s((()=>[(n(!0),o(r,null,c(t.data,((t,e)=>(n(),u(a,{key:e,title:t.title,name:e},{default:s((()=>[l("div",et,i(t.content),1)])),_:2},1032,["title","name"])))),128))])),_:1},8,["modelValue"])])])}}}),[["__scopeId","data-v-84b9fd0c"]]);const nt=t=>(P("data-v-5673d048"),t=t(),Y(),t),ot={class:"page-order-detail"},lt=nt((()=>l("div",{class:"card-item-name"},"订单进度",-1))),it={class:"card-item-icon"},dt={class:"card card-list"},st=nt((()=>l("p",{class:"card-list-title"},"健利保倍享版",-1))),rt={class:"card card-list"},ct={class:"card-list-head"},ut=nt((()=>l("div",{class:"card-list-title"},"险种信息",-1))),mt={class:"card-list-premium"},vt={class:"card"},pt=nt((()=>l("div",{class:"policy-options"},[k("保单选项 "),l("span",{class:"policy-options-content"},"纸质保单和电子保单")],-1))),ft={class:"card"},It=nt((()=>l("div",{class:"tenantOrderAttachmentList-title"},"投保人资料",-1))),ht={class:"tenantOrderAttachmentList-img"},yt=["src"],gt=nt((()=>l("div",{class:"tenantOrderAttachmentList-title"},"银行卡信息",-1))),bt={class:"tenantOrderAttachmentList-img"},Ct=[nt((()=>l("img",{src:q,alt:""},null,-1)))],Nt=nt((()=>l("div",{class:"tenantOrderAttachmentList-title"},"被保人资料",-1))),kt={class:"tenantOrderAttachmentList-img"},_t=["src"],xt={class:"insurance-notification-information card"},At={key:0,class:"footer-button"},Lt={key:1,class:"footer-button"},wt={key:2,class:"footer-button"};var jt=p(t({__name:"index",setup(t){const p=f(),P=I(),Y=h(),q=e(),X=e([]),Z=e([]),tt=e({}),et=[{title:"险种名称",dataIndex:"riskName",width:200},{title:"保险金额/份数",dataIndex:"regularPremium",width:180,render:(t,e)=>t.regularPremium/t.copy},{title:"保障期间",dataIndex:"coveragePeriodDesc",width:180},{title:"交费期间",dataIndex:"chargePeriodDesc",width:180},{title:"首期保费",dataIndex:"initialPremium",width:180,render:(t,e)=>t.initialPremium}],nt=a({customerQuestions:[],payInfo:{schema:[],config:[],formData:[]}}),{query:{orderNo:jt,agentCode:Ot,tenantId:Dt,abbreviation:Tt,productCategory:Vt,applicationNo:Pt,orderId:Yt}}=P,St=()=>{O("orderTrajectory",{orderNo:jt,agentCode:Ot,tenantId:Dt,abbreviation:Tt,productCategory:Vt,applicationNo:Pt})},Gt=()=>{S.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{q.value&&F(q.value.id,q.value.orderStatus).then((t=>{const{code:e,data:a}=t;"10000"===e&&G.success("删除成功")}))}))},Mt=e(!1),Ut=()=>{var t,e,a,n,o;if(q.value){const{id:l,extInfo:{templateId:i,pageCode:d,extraInfo:s},agencyId:r,insurerCode:c,orderStatus:u}=q.value,m={insurerCode:c,productCode:null==(a=null==(e=null==(t=q.value.insuredList)?void 0:t[0])?void 0:e.productList[0])?void 0:a.productCode,tenantId:q.value.tenantId,agencyCode:q.value.agencyId,agentCode:q.value.saleUserId,saleChannelId:null==s?void 0:s.saleChannelId,extraMap:{...null==(o=null==(n=q.value)?void 0:n.extInfo)?void 0:o.extraInfo,orderNo:q.value.orderNo}};Mt.value=!0,Q(m).then((t=>{if(console.log("投保链接==",t.data),"10000"===t.code)if([R.LONG,R.NIANJIN].includes(W(`${i}`))){const e=t.data.split("?")[1],a=M.parse(e);Y.push({path:U[u],query:{...a,extraInfo:a.extraInfo,orderNo:jt,templateId:i}})}else window.location.href=t.data}))}},Et=()=>{if(q.value){const{extInfo:{templateId:t}}=q.value;[R.LONG,R.NIANJIN].includes(W(`${t}`))?Ut():$(q.value).then((({code:t,data:e})=>{"10000"===t&&B(e)}))}};return y((()=>{J({productCode:"111",isTenant:!1}).then((({data:t,code:e})=>{var a,n;if("10000"===e){tt.value=(null==(a=t.productPlanInsureVOList)?void 0:a[0])||{};const{payInfo:e}=T(null==(n=tt.value)?void 0:n.productFactor);nt.payInfo={...nt.payInfo,...e}}})),console.log(jt,"orderNo================"),D({orderNo:jt,orderId:Yt,tenantId:Dt}).then((t=>{const{code:e,data:a}=t;"10000"===e&&(nt.customerQuestions=a)})),g({orderNo:jt,orderId:Yt,applicationNo:Pt,agentCode:Ot,tenantId:Dt}).then((t=>{const{code:e,data:a}=t;"10000"===e&&(q.value=a)}))})),(t,e)=>{const a=V,f=H,I=E,h=K,y=b,g=C,O=N("loading");return n(),u(g,{"theme-vars":m(p)},{default:s((()=>{var t,p,g,b,C,N,D,T,V,P,Y,S,G;return[l("div",ot,[l("div",{class:"card card-head",onClick:St},[lt,l("div",it,[k(i(null==(t=m(q))?void 0:t.orderStepDesc)+" ",1),d(a,{name:"arrow-right"})])]),l("div",dt,[st,d(z,{label:"订单号",content:null==(p=m(q))?void 0:p.orderNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),d(z,{label:"投保单号",content:null==(g=m(q))?void 0:g.applicationNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),d(z,{label:"创建时间",content:m(_)(null==(b=m(q))?void 0:b.gmtCreated).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),d(z,{label:"投保时间",content:m(_)(null==(C=m(q))?void 0:C.orderDate).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),d(z,{label:"投保保费",content:null==(N=m(q))?void 0:N.orderAmount,line:"","min-width":"other"},null,8,["content"]),d(z,{label:"承保保费",content:null==(D=m(q))?void 0:D.realAmount,line:"","min-width":"other"},null,8,["content"])]),l("div",rt,[l("div",ct,[ut,l("div",mt,[k(" 首年保费："),l("span",null,i(null==(T=m(q))?void 0:T.orderAmount),1)])]),(null==(V=m(q))?void 0:V.riskList.length)>0?(n(),u(f,{key:0,columns:et,class:"table","data-source":null==(P=m(q))?void 0:P.riskList},null,8,["data-source"])):x("",!0)]),l("div",vt,[d(h,{modelValue:m(X),"onUpdate:modelValue":e[0]||(e[0]=t=>v(X)?X.value=t:null)},{default:s((()=>[d(I,{title:"投保告知信息",name:"1"},{default:s((()=>[pt])),_:1})])),_:1},8,["modelValue"])]),l("div",ft,[d(h,{modelValue:m(Z),"onUpdate:modelValue":e[1]||(e[1]=t=>v(Z)?Z.value=t:null)},{default:s((()=>[d(I,{title:"影像信息",name:"1"},{default:s((()=>{var t,e,a,i;return[It,l("div",ht,[(n(!0),o(r,null,c(null==(e=null==(t=m(q))?void 0:t.tenantOrderAttachmentList)?void 0:e.filter((t=>"2"==t.objectType)),((t,e)=>(n(),o("div",{key:e},[l("img",{src:t.uri,alt:""},null,8,yt)])))),128))]),gt,l("div",bt,[(n(),o(r,null,c(10,((t,e)=>l("div",{key:e,class:"tenantOrderAttachmentList-img-content"},Ct))),64))]),Nt,l("div",kt,[(n(!0),o(r,null,c(null==(i=null==(a=m(q))?void 0:a.tenantOrderAttachmentList)?void 0:i.filter((t=>"3"==t.objectType)),((t,e)=>(n(),o("div",{key:e},[l("img",{src:t.uri,alt:""},null,8,_t)])))),128))])]})),_:1})])),_:1},8,["modelValue"])]),l("div",xt,[d(at,{title:"投保告知信息",data:[{title:"《万能风险告知问卷》",content:"12345556789"},{title:"《被保人健康告知》",content:"12345556789"}]},null,8,["data"])]),A((n(),o("div",null,[(null==(Y=m(q))?void 0:Y.orderTopStatus)===m(L).PENDING?(n(),o("div",At,[d(y,{type:"primary",onClick:w(Gt,["stop"])},{default:s((()=>[k("删除")])),_:1},8,["onClick"]),m(j).UNDERWRITING_FAILED!==m(q).orderStatus?(n(),u(y,{key:0,type:"primary",onClick:w(Ut,["stop"])},{default:s((()=>[k("去处理")])),_:1},8,["onClick"])):x("",!0)])):x("",!0),(null==(S=m(q))?void 0:S.orderTopStatus)===m(L).PAYING?(n(),o("div",Lt,[d(y,{type:"primary",onClick:w(Gt,["stop"])},{default:s((()=>[k("删除")])),_:1},8,["onClick"]),d(y,{type:"primary",onClick:w(Et,["stop"])},{default:s((()=>[k("去支付")])),_:1},8,["onClick"])])):x("",!0),(null==(G=m(q))?void 0:G.orderTopStatus)===m(L).TIMEOUT?(n(),o("div",wt,[d(y,{type:"primary",onClick:w(Gt,["stop"])},{default:s((()=>[k("删除")])),_:1},8,["onClick"])])):x("",!0)])),[[O,m(Mt)]])])]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-5673d048"]]);export{jt as default};

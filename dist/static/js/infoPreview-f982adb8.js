import{Y as e,_ as t,q as o,u as n,H as a,I as r,b as u,j as c,p as i,v as l}from"./index-deb4ddfb.js";import{defineAsyncComponent as s,reactive as d,ref as m,onBeforeMount as V}from"vue";import{_ as p,t as f}from"./PayInfo-e8550347.js";import{g as v,i as I}from"./trial-90e504aa.js";import{n as h}from"./nextStep-0d38f4c6.js";import{u as y}from"./useAttachment-3dae9e30.js";import{a as g,q as k}from"./product-c166a0f6.js";import{g as N}from"./utils-f063477c.js";import{u as C}from"./useOrder-d6d1fc9b.js";import{P,B as j}from"./constants-7afb7c3d.js";import{a as _}from"./index-9ba6d482.js";import{P as b}from"./index-593ee4c8.js";import{R as B,b as E}from"./trial-a75330fd.js";import"./pdfh5-e588f83d.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";import"./_getTag-d5b47d26.js";import"./debounce-6981b306.js";import"./phoneVerify-8d7afc24.js";import"./useDicData-48f91541.js";/* empty css              */import"./bankCard-1cedc592.js";import"./core-5f3b09dd.js";import"./constant-8927d485.js";import"./infoCollection-f930e52f.js";import"./cloneDeep-6abacc69.js";const O={class:"com-insured-part-wrapper"},w={class:"content-wrapper"};var S=t(Vue.defineComponent({__name:"InsureInfo",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup:t=>(t,o)=>{const n=Vue.resolveComponent("ProCell"),a=Vue.resolveComponent("ProCard");return Vue.openBlock(),Vue.createElementBlock("div",O,[Vue.createVNode(a,{title:"保障信息"},{default:Vue.withCtx((()=>{var o;return[Vue.createElementVNode("div",w,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList((null==(o=t.productData)?void 0:o.riskList)||[],((t,o)=>{var a;return Vue.openBlock(),Vue.createElementBlock("div",{key:o,class:"risk-item"},[t.riskType===Vue.unref(B).MAIN_RISK?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createElementVNode("p",null,Vue.toDisplayString(t.riskName),1),Vue.createVNode(n,{title:"保障期间",content:t.coveragePeriodDesc},null,8,["content"]),Vue.createVNode(n,{title:"交费期间",content:t.chargePeriodDesc},null,8,["content"])],64)):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createVNode(n,{title:t.riskName,content:"投保"},null,8,["title"]),t.exemptFlag===Vue.unref(e).YES?(Vue.openBlock(),Vue.createBlock(n,{key:0,title:"交费期间",content:t.chargePeriodDesc},null,8,["content"])):(null==(a=t.liabilityList)?void 0:a.length)?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createVNode(n,{title:"保障期间",content:t.coveragePeriodDesc},null,8,["content"]),Vue.createVNode(n,{title:"交费期间",content:t.chargePeriodDesc},null,8,["content"]),Vue.createVNode(n,{title:"交费方式",content:Vue.unref(E)[t.paymentFrequency]},null,8,["content"])],64)):Vue.createCommentVNode("",!0)],64)),Vue.createVNode(n,{title:"保障金额",content:(t.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),Vue.createVNode(n,{title:"首期保费",class:"price",content:(t.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])})),128)),Vue.createVNode(n,{title:"首期总保费",class:"price",content:(t.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])]})),_:1})])}}),[["__scopeId","data-v-92348b0c"]]);const x={class:"long-info-preview"},L={class:"footer-btn"},D=Vue.createElementVNode("span",null,"分享",-1),A=Vue.defineComponent({__name:"infoPreview",setup(e){s((()=>o((()=>import("./index-52712cf2.js")),["static/js/index-52712cf2.js","static/css/index-fa4edf2a.css","static/js/index-deb4ddfb.js","static/css/index-5064de6f.css","static/js/pdfh5-e588f83d.js","static/js/theme-65292714.js","static/js/index-593ee4c8.js","static/css/index-827a8544.css","static/js/utils-f063477c.js","static/js/infoCollection-f930e52f.js","static/js/trial-a75330fd.js"]))),s((()=>o((()=>import("./index-3ccd2494.js")),["static/js/index-3ccd2494.js","static/css/index-4640d9aa.css"])));const t=n(),B=C(),{productCode:E="",tenantId:O,agentCode:w="",agencyCode:A,saleChannelId:F,isShare:T,orderNo:R,extraInfo:q,insurerCode:U,preview:M}=t.query;let Y={};try{Y=JSON.parse(decodeURIComponent(q))}catch(ue){}const W=d({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),J=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,$=m({imgUrl:"",desc:"",title:"",link:J}),G=m(),H=m(),z=m({}),K=m({}),Q=m([]),X=m(),Z=m({});m(!1),m(!1),m(0),m(!0),y(Z,X),m(!1);const ee=m(!1),te=m(),oe=()=>{h(B.value,((e,t)=>{t===u.JUMP_PAGE&&te.value.handleShare()}))},ne=async()=>{M?c(P.INFO_PREVIEW,t.query):(Object.assign(B.value,{extInfo:{...B.value.extInfo,buttonCode:j.INFO_PREVIEW,pageCode:P.INFO_PREVIEW}}),h(B.value,((e,o)=>{o===u.JUMP_PAGE&&i(e.nextPageCode,t.query)})))};d({tenantOrderPayInfoList:[]});const ae=m(),re=async()=>{g({productCode:E,tenantId:O}).then((({data:e,code:t})=>{if("10000"===t){z.value=e;const{wxShareConfig:t,showWXShare:o,title:n,desc:a,image:r}=(null==e?void 0:e.PRODUCT_LIST)||{};o?Object.assign($.value,{...t,imgUrl:t.image,isShare:o}):Object.assign($.value,{title:n,desc:a,imgUrl:r,isShare:o}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&l(e.BASIC_INFO.themeType)}})),R&&v({orderNo:R,tenantId:O}).then((({code:e,data:t})=>{"10000"===e&&(Object.assign(B.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),ae.value=t,ee.value=!0)})),k({productCode:E}).then((({code:e,data:t})=>{var o,n,a,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:u}=t;X.value=e||[];const{basicInfo:{questionnaireType:c},questions:i,questionnaireName:l}=(null==(o=null==u?void 0:u[0])?void 0:o.questionnaireDetailResponseVO)||{basicInfo:{}};c&&(Q.value=2===c?[{attachmentName:l,attachmentUri:i,attachmentType:"question"}]:[{attachmentName:l,attachmentUri:null==(n=null==i?void 0:i[0])?void 0:n.content,attachmentType:N(String(null==(a=null==i?void 0:i[0])?void 0:a.textType),null==(r=null==i?void 0:i[0])?void 0:r.content)}])}})),await I({productCode:E,isTenant:!M}).then((({data:e,code:t})=>{var o,n;if("10000"===t){K.value=e,Z.value=(null==(o=e.productPlanInsureVOList)?void 0:o[0])||{};const{payInfo:t}=f(null==(n=Z.value)?void 0:n.productFactor);W.payInfo={...W.payInfo,...t}}}))};return V((()=>{re()})),(e,t)=>{var o,n,u,c,i,l;const s=Vue.resolveComponent("ProNavigator"),d=Vue.resolveComponent("ProSvg");return Vue.openBlock(),Vue.createElementBlock("div",x,[Vue.createVNode(s),Vue.createVNode(S,{"product-data":null==(u=null==(n=null==(o=Vue.unref(B).insuredList)?void 0:o[0])?void 0:n.productList)?void 0:u[0],"total-premium":Vue.unref(B).orderAmount},null,8,["product-data","total-premium"]),(null==(c=Vue.unref(Z))?void 0:c.productFactor)?(Vue.openBlock(),Vue.createBlock(Vue.unref(_),{key:0,ref_key:"personalInfoRef",ref:H,modelValue:Vue.unref(ae),"onUpdate:modelValue":t[0]||(t[0]=e=>Vue.isRef(ae)?ae.value=e:null),"product-factor":null==(i=Vue.unref(Z))?void 0:i.productFactor,"multi-insured-config":null==(l=Vue.unref(Z))?void 0:l.multiInsuredConfigVO,"is-view":""},null,8,["modelValue","product-factor","multi-insured-config"])):Vue.createCommentVNode("",!0),Vue.unref(W).payInfo.schema.length?(Vue.openBlock(),Vue.createBlock(Vue.unref(p),{key:1,ref_key:"payInfoRef",ref:G,modelValue:Vue.unref(B).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>Vue.unref(B).tenantOrderPayInfoList=e),schema:Vue.unref(W).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",L,[!Vue.unref(T)&&Vue.unref($).isShare&&Vue.unref(a)()?(Vue.openBlock(),Vue.createBlock(r,Vue.mergeProps({key:0},Vue.unref($),{class:"share-btn",onClick:Vue.withModifiers(oe,["stop"])}),{default:Vue.withCtx((()=>[Vue.createVNode(d,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),D])),_:1},16,["onClick"])):Vue.createCommentVNode("",!0),Vue.createVNode(b,{shadow:!1,onClick:ne},{default:Vue.withCtx((()=>[Vue.renderSlot(e.$slots,"default",{},(()=>[Vue.createTextVNode("下一步")]))])),_:3})])])}}});export{A as default};

import{aG as e,d as a,r as l,L as u,aH as i,aI as t,R as o,aJ as n,i as s,ag as r,as as d,a9 as m,aK as v,aL as p,aM as c,aN as y,aO as g,aP as V,$ as f,aQ as k,aR as h,aS as b,aT as D,aU as C,G as x,z as K,a1 as I,c as S,A as P,w,f as R,g as _,e as L,E as T,h as U,U as O,aV as M,aC as A,aD as N,V as F,aW as B}from"./index-4b076a64.js";import{l as E,R as $}from"./index-954ec861.js";import{a as j}from"./infoCollection-e956dd81.js";const[J,q]=e("stepper"),z=(e,a)=>String(e)===String(a);const W=C(a({name:J,props:{min:p(1),max:p(1/0),name:p(""),step:p(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:c,showMinus:c,showInput:c,longPress:c,allowEmpty:Boolean,modelValue:y,inputWidth:y,buttonSize:y,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:p(1),decimalLength:y},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:a}){const p=a=>{const{min:l,max:u,allowEmpty:i,decimalLength:t}=e;return i&&""===a||(a=""===(a=g(String(a),!e.integer))?0:+a,a=Number.isNaN(a)?+l:a,a=Math.max(Math.min(+u,a),+l),V(t)&&(a=a.toFixed(+t))),a};let c;const y=l(),C=l((()=>{var l;const u=null!=(l=e.modelValue)?l:e.defaultValue,i=p(u);return z(i,e.modelValue)||a("update:modelValue",i),i})()),x=u((()=>e.disabled||e.disableMinus||C.value<=+e.min)),K=u((()=>e.disabled||e.disablePlus||C.value>=+e.max)),I=u((()=>({width:i(e.inputWidth),height:i(e.buttonSize)}))),S=u((()=>t(e.buttonSize))),P=a=>{e.beforeChange?b(e.beforeChange,{args:[a],done(){C.value=a}}):C.value=a},w=()=>{if("plus"===c&&K.value||"minus"===c&&x.value)return void a("overlimit",c);const l="minus"===c?-e.step:+e.step,u=p(D(+C.value,l));P(u),a(c)},R=a=>{const l=a.target,{value:u}=l,{decimalLength:i}=e;let t=g(String(u),!e.integer);if(V(i)&&t.includes(".")){const e=t.split(".");t=`${e[0]}.${e[1].slice(0,+i)}`}e.beforeChange?l.value=String(C.value):z(u,t)||(l.value=t);const o=t===String(+t);P(o?+t:t)},_=l=>{var u;e.disableInput?null==(u=y.value)||u.blur():a("focus",l)},L=e=>{const l=e.target,u=p(l.value);l.value=String(u),C.value=u,f((()=>{a("blur",e),k()}))};let T,U;const O=()=>{U=setTimeout((()=>{w(),O()}),200)},M=a=>{e.longPress&&(clearTimeout(U),T&&h(a))},A=a=>{e.disableInput&&h(a)},N=a=>({onClick:e=>{h(e),c=a,w()},onTouchstartPassive:()=>{c=a,e.longPress&&(T=!1,clearTimeout(U),U=setTimeout((()=>{T=!0,w(),O()}),600))},onTouchend:M,onTouchcancel:M});return o((()=>[e.max,e.min,e.integer,e.decimalLength]),(()=>{const e=p(C.value);z(e,C.value)||(C.value=e)})),o((()=>e.modelValue),(e=>{z(e,C.value)||(C.value=p(e))})),o(C,(l=>{a("update:modelValue",l),a("change",l,{name:e.name})})),n((()=>e.modelValue)),()=>s("div",{role:"group",class:q([e.theme])},[r(s("button",m({type:"button",style:S.value,class:[q("minus",{disabled:x.value}),{[v]:!x.value}],"aria-disabled":x.value||void 0},N("minus")),null),[[d,e.showMinus]]),r(s("input",{ref:y,type:e.integer?"tel":"text",role:"spinbutton",class:q("input"),value:C.value,style:I.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":C.value,onBlur:L,onInput:R,onFocus:_,onMousedown:A},null),[[d,e.showInput]]),r(s("button",m({type:"button",style:S.value,class:[q("plus",{disabled:K.value}),{[v]:!K.value}],"aria-disabled":K.value||void 0},N("plus")),null),[[d,e.showPlus]])])}})),Y=[{name:"年金领取期间",type:"checkbox",configKey:["annuityDrawValueList"],valueKey:"annuityDrawDate"},{name:"领取频率",type:"checkbox",configKey:["annuityDrawFrequencyList"],valueKey:"annuityDrawType"},{name:"交费方式",type:"checkbox",configKey:["paymentFrequencyList"],valueKey:"paymentFrequency",ruleKey:"paymentTypeRule"},{name:"交费期间",type:"checkbox",configKey:["paymentPeriodValueList"],valueKey:"chargePeriod",ruleKey:"paymentPeriodRule",ruleValueKey:"chargePeriod"},{name:"保障期间",type:"checkbox",configKey:["insurancePeriodValueList"],valueKey:"coveragePeriod",ruleKey:"insurancePeriodRule",ruleValueKey:"chargePeriod"}],G={key:0},H={class:"custom-field"},Q={key:1,class:"flex-field"},X={class:"pro-radio-wrap"},Z={key:2},ee={class:"pro-radio-wrap"},ae={class:"custom-field"},le={key:1},ue={key:3},ie={class:"custom-field"},te={key:1},oe={class:"custom-field"},ne={key:0},se={key:1},re={key:4};var de=x(a({__name:"index",props:{originData:{default:()=>({})},modelValue:{default:()=>({})},defalutValue:{default:()=>({})},trialResult:{default:()=>({})}},emits:["update:modelValue","trialChange"],setup(e,{emit:a}){const i=e,t=K({hadSetDefault:!1}),n=l(i.originData),r=l({}),d=l(1),m=()=>2===n.value.saleMethod?{label:"保费",key:"premium"}:{label:"保额",key:"amount"},v=()=>{switch(`${n.value.displayUnit}`){case j.YUAN:return"元";case j.MONTH_SALARY:return"倍月薪";case j.MILLION:return"万元";case j.COPY:return"份"}return""},p=u((()=>2===n.value.saleMethod?{label:"保费",key:"premium"}:{label:"保额",key:"amount"})),c=(...e)=>{if(1===d.value){const e=r.value[p.value.key],a=i.originData.minStepValue,l=i.originData.maxStepValue,u=i.originData.stepValue;if(+e>=+l)r.value[p.value.key]=l;else if(+e<=+a)r.value[p.value.key]=a;else{const l=+e-+a,i=Math.floor(l/+u);l%+u!=0&&(r.value[p.value.key]=+a+i*+u)}}return!0},y=()=>{const{displayType:e,requireCopies:a}=n.value,l=m().key,u=!r.value.riskCode;1===e?d.value=1:3===e&&2===a?(d.value=2,n.value.displayValues.length>=1&&u&&!r.value[l]&&(r.value[l]=n.value.displayValues[0].code||n.value.displayValues[0].value)):3===e&&1===a?(d.value=3,n.value.minCopiesValue===n.value.maxCopiesValue&&u&&!r.value.copy&&(r.value.copy=n.value.minCopiesValue),n.value.displayValues.length>=1&&u&&!r.value[l]&&(r.value[l]=n.value.displayValues[0].code||n.value.displayValues[0].value)):2===e&&(d.value=4,n.value.minCopiesValue===n.value.maxCopiesValue&&u&&!r.value.copy&&(r.value.copy=n.value.minCopiesValue),u&&!r.value.amount&&(r.value.amount=n.value.copiesAmount))},g=u((()=>{if(n.value.displayValues){const e=m().key;return 1!==n.value.displayValues.length||r.value.riskCode||(r.value[e]=n.value.displayValues[0].code),n.value.displayValues.map((e=>({label:e.value,value:e.code})))}return[]})),V=()=>{};return I((()=>{y(),a("update:modelValue",r.value)})),o((()=>n),(e=>{y()}),{deep:!0}),o((()=>i.defalutValue),(e=>{(null==e?void 0:e.riskCode)&&!t.hadSetDefault&&(t.hadSetDefault=!0,Object.keys(r.value).forEach((a=>{r.value[a]=e[a]||r.value[a]})))}),{deep:!0,immediate:!0}),o((()=>r.value),(e=>{(()=>{if(1===d.value){const e=r.value[p.value.key],a=i.originData.minStepValue,l=i.originData.maxStepValue,u=i.originData.stepValue;if(+e>+l)return!1;if(+e<+a)return!1;if((+e-+a)%+u!=0)return!1}return!0})()&&(a("update:modelValue",e),a("trialChange",e))}),{deep:!0,immediate:!0}),o(i.modelValue,(e=>{console.log("---------modelValueChange = ",e)}),{deep:!0,immediate:!0}),(a,l)=>{const u=W,i=M,t=A,o=N;return S(),P(O,null,[1===d.value?(S(),P("div",G,[s(i,{label:`基本${_(p).label}`,name:_(p).key,class:"risk-select-field"},{input:w((()=>[R("div",H,[s(u,{modelValue:r.value[_(p).key],"onUpdate:modelValue":l[0]||(l[0]=e=>r.value[_(p).key]=e),"input-width":"80px","default-value":e.originData.minStepValue,min:e.originData.minStepValue,step:e.originData.stepValue,max:e.originData.maxStepValue,onBlur:c},null,8,["modelValue","default-value","min","step","max"])])])),_:1},8,["label","name"])])):2===d.value?(S(),P("div",Q,[s(o,{modelValue:r.value[_(p).key],"onUpdate:modelValue":l[2]||(l[2]=e=>r.value[_(p).key]=e),label:`基本${_(p).label}`,name:_(p).key,class:"risk-select-field"},{input:w((()=>[R("div",X,[s(t,{modelValue:r.value[_(p).key],"onUpdate:modelValue":l[1]||(l[1]=e=>r.value[_(p).key]=e),options:_(g),onclick:V},null,8,["modelValue","options"])])])),_:1},8,["modelValue","label","name"])])):3===d.value?(S(),P("div",Z,[s(o,{modelValue:r.value[_(p).key],"onUpdate:modelValue":l[4]||(l[4]=e=>r.value[_(p).key]=e),label:`基本${_(p).label}`,name:_(p).key,class:"risk-select-field"},{input:w((()=>[R("div",ee,[s(t,{modelValue:r.value[_(p).key],"onUpdate:modelValue":l[3]||(l[3]=e=>r.value[_(p).key]=e),options:_(g),onclick:V},null,8,["modelValue","options"])])])),_:1},8,["modelValue","label","name"]),R("div",null,[s(i,{modelValue:r.value.copy,"onUpdate:modelValue":l[6]||(l[6]=e=>r.value.copy=e),label:"份数",name:"copy",class:"risk-select-field"},{input:w((()=>[R("div",ae,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(S(),L(u,{key:0,modelValue:r.value.copy,"onUpdate:modelValue":l[5]||(l[5]=e=>r.value.copy=e),"input-width":"80px","default-value":e.originData.minCopiesValue,min:e.originData.minCopiesValue||1,step:1,max:e.originData.maxCopiesValue},null,8,["modelValue","default-value","min","max"])):(S(),P("span",le,T(e.originData.minCopiesValue),1))])])),_:1},8,["modelValue"])])])):4===d.value?(S(),P("div",ue,[s(i,{modelValue:r.value.copy,"onUpdate:modelValue":l[8]||(l[8]=e=>r.value.copy=e),label:"份数",name:"copy",class:"risk-select-field"},{input:w((()=>[R("div",ie,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(S(),L(u,{key:0,modelValue:r.value.copy,"onUpdate:modelValue":l[7]||(l[7]=e=>r.value.copy=e),"input-width":"64px","default-value":e.originData.minCopiesValue,min:e.originData.minCopiesValue||1,step:1,max:e.originData.maxCopiesValue},null,8,["modelValue","default-value","min","max"])):(S(),P("span",te,T(e.originData.minCopiesValue),1))])])),_:1},8,["modelValue"]),s(i,{label:_(p).label,name:"copyAmount",class:"risk-select-field"},{input:w((()=>[R("div",oe,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(S(),P("span",ne,T(+e.originData.copiesAmount*+r.value.copy+v()),1)):(S(),P("span",se,T(+e.originData.minCopiesValue*+e.originData.copiesAmount+v()),1))])])),_:1},8,["label"])])):U("",!0),2===n.value.saleMethod&&e.trialResult&&e.trialResult.amount>0?(S(),P("div",re,[s(i,{label:"保额",class:"risk-select-field"},{input:w((()=>[R("span",null,T(e.trialResult.amount),1)])),_:1})])):U("",!0)],64)}}}),[["__scopeId","data-v-5d73ff32"]]);const me={class:"pro-radio-wrap"};var ve=x(a({__name:"index",props:{originData:{default:()=>({})},modelValue:{default:()=>({})},riskInfo:{default:()=>({})},defaultValue:{default:()=>({})}},emits:["trialChange","inputChange"],setup(e,{emit:a}){const u=e,i=l(u.originData),t=l(u.modelValue);l(1);const n=e=>{const a=E.exports.get(u.originData,e),l=E.exports.get(u.originData,e);return a.map((e=>{const a=l?l.find((a=>a.code===e.code)):null;return{label:e.value,value:e.code,disabled:!(!a||null===a.useFlag||void 0===a.useFlag)&&1!==a.useFlag}}))},r=()=>{Y.forEach((e=>{const a=E.exports.get(u.originData,e.configKey);"checkbox"===e.type&&a&&a.length>0&&!t.value.riskCode&&(t.value[e.valueKey]=a[0].code)}))};return I((()=>{r()})),o((()=>u.defaultValue),(e=>{(null==e?void 0:e.riskCode)&&(t.value=e)}),{deep:!0,immediate:!0}),o((()=>i.value),(e=>{r()}),{deep:!0,immediate:!0}),o((()=>JSON.stringify(t.value)),((e,l)=>{const i=e&&JSON.parse(e)||{},t=l&&JSON.parse(l)||{};let o=null;Y.forEach((e=>{i[e.valueKey]&&t[e.valueKey]&&i[e.valueKey]!==t[e.valueKey]&&(o||(o={key:e.valueKey,oldValue:t[e.valueKey],newValue:i[e.valueKey],riskCode:u.riskInfo.riskCode}))})),e&&a("trialChange",JSON.parse(e),o)}),{deep:!0,immediate:!0}),(a,l)=>{const u=A,i=N;return S(!0),P(O,null,F(_(Y),(a=>(S(),P(O,null,[_(E.exports.get)(e.originData,a.configKey)&&(1===e.riskInfo.mainRiskFlag||a.ruleKey&&2===_(E.exports.get)(e.originData,a.ruleKey)||!a.ruleKey)?(S(),P("div",{key:e.riskInfo.riskCode+"_"+a.name},["checkbox"===a.type?(S(),L(i,{key:0,modelValue:t.value[a.valueKey],"onUpdate:modelValue":e=>t.value[a.valueKey]=e,label:a.name,name:a.valueKey,class:"risk-select-field"},{input:w((()=>[R("div",me,[s(u,{modelValue:t.value[a.valueKey],"onUpdate:modelValue":[e=>t.value[a.valueKey]=e,e=>((e,a)=>{console.log("-------change",e,a)})(e,a.valueKey)],options:n(a.configKey)},null,8,["modelValue","onUpdate:modelValue","options"])])])),_:2},1032,["modelValue","onUpdate:modelValue","label","name"])):U("",!0)])):U("",!0)],64)))),256)}}}),[["__scopeId","data-v-18462dcc"]]);function pe(e){return Object.keys(e)}var ce=x(a({__name:"index",props:{originData:{default:()=>({})},modelValue:{default:()=>({})},defaultValue:{default:()=>({})},trialResult:{default:()=>({})}},emits:["trialChange"],setup(e,{expose:a,emit:u}){const i=e,t=l(null),n=l({}),r=l({}),d=K({personalInfo:{},basicsAmount:"",basicsPremium:"",defaultValues:i.defaultValue,changeData:null,sValues:n.value});B("premium"),r.value=B("enumList")||{},I((()=>{}));const m=e=>{i.originData.mainRiskFlag,n.value.riskCategory=i.originData.riskCategory,n.value.riskCode=i.originData.riskCode,n.value.riskId=i.originData.riskId,n.value.riskType=i.originData.riskType,n.value.riskName=i.originData.riskName,n.value.riskType=i.originData.riskType,n.value.mainRiskCode=i.originData.mainRiskCode,n.value.mainRiskId=i.originData.mainRiskId,e?u("trialChange",n.value,e):u("trialChange",n.value)},v=(e,a)=>{pe(e).forEach((a=>{n.value[a]=e[a]})),m(a)},p=e=>{var a,l;1==+(null==(l=null==(a=i.originData)?void 0:a.productRiskInsureLimitVO)?void 0:l.amountPremiumConfigVO.saleMethod)?d.basicsAmount=null==e?void 0:e.amount:d.basicsAmount=null==e?void 0:e.premium,pe(e).forEach((a=>{n.value[a]=e[a]})),m()},c=e=>{n.value.liabilityVOList=e,console.log(">>>handleRiskLiabilityChange = ",n.value),m()};return o((()=>i.defaultValue),(e=>{e&&(d.defaultValues=e,n.value={...e})}),{deep:!0,immediate:!0}),o((()=>n.value),(e=>{d.sValues=e}),{deep:!0,immediate:!0}),a({validate:async()=>{var e;await(null==(e=t.value)?void 0:e.validate())}}),(a,l)=>{var u,i,t,o,r,m;return 1===(null==(u=e.originData)?void 0:u.factorDisPlayFlag)?(S(),P(O,{key:0},[s(_(de),{"v-model":_(d).sValues,"origin-data":null==(t=null==(i=e.originData)?void 0:i.productRiskInsureLimitVO)?void 0:t.amountPremiumConfigVO,"defalut-value":_(d).defaultValues,"trial-result":e.trialResult,onTrialChange:p},null,8,["v-model","origin-data","defalut-value","trial-result"]),s(_(ve),{"v-model":_(n),"origin-data":e.originData.productRiskInsureLimitVO,"risk-info":e.originData,"default-value":_(d).defaultValues,onTrialChange:v},null,8,["v-model","origin-data","risk-info","default-value"]),s(_($),{"data-source-folmulate":_(n),"data-source":e.originData,params:{amountUnit:null==(r=null==(o=e.originData)?void 0:o.productRiskInsureLimitVO)?void 0:r.amountPremiumConfigVO.displayUnit,basicsAmount:_(d).basicsAmount,basicsPremium:_(d).basicsPremium,riskId:null==(m=e.originData)?void 0:m.riskId},"default-value":_(d).defaultValues,onTrialChange:c},null,8,["data-source-folmulate","data-source","params","default-value"])],64)):U("",!0)}}}),[["__scopeId","data-v-c02f87ec"]]);export{ce as I,Y as P,W as S};

System.register(["./vendor-legacy-c308286a.js","./useStorage-legacy-78efbdca.js","./infoCollection-legacy-4d78a1f8.js","./trial-legacy-7f5e30ba.js","./index-legacy-3a4a46f5.js"],(function(e){"use strict";var i,r,t,n,a,o,d,s;return{setters:[function(){},function(e){i=e.l},function(e){r=e.R,t=e.g},function(e){n=e.R,a=e.i,o=e.b,d=e.a},function(e){s=e.a6}],execute:function(){e("t",(e=>{const{tenantId:i,riskList:r,riskPremium:t,productId:n}=e;return r.map((e=>({tenantId:i,amountUnit:1,annuityDrawFrequency:e.annuityDrawDate,annuityDrawType:e.annuityDrawType,paymentFrequency:e.paymentFrequency,paymentPeriod:e.chargePeriod.split("_")[1],paymentPeriodType:o[e.chargePeriod.split("_")[0]],insurancePeriodType:d["to_life"===e.coveragePeriod?"to_life":e.coveragePeriod.split("_")[0]],insurancePeriodValue:Number.isNaN(+e.coveragePeriod.split("_")[1])?0:e.coveragePeriod.split("_")[1],riskCode:e.riskCode,riskType:e.riskType,riskName:e.riskName,extInfo:{riskId:e.riskId,copy:e.copy},initialPremium:t[e.riskCode]?.premium,liabilityDetails:e.liabilityVOList?.map((e=>({liabilityCode:e.liabilityCode,liabilityName:e.liabilityName,refundMethod:e.liabilityAttributeValue})))||[],productId:n,currentAmount:e.amount,initialAmount:e.amount})))})),e("r",(e=>s(e).map((e=>(e.riskDetailVOList.find((e=>e.riskType===n.MAIN_RISK)),(e.riskDetailVOList||[]).map((e=>{const{riskCategory:i,riskCode:r,riskType:t,id:n,riskInsureLimitVO:a,riskCalcMethodInfoVO:o}=e,{annuityDrawFrequencyList:d,annuityDrawValueList:s,insurancePeriodValueList:u,paymentFrequencyList:y,paymentPeriodValueList:l}=a,{minCopy:c,maxCopy:p,fixedAmount:m,singeAmount:I}=o;return{amount:m||I,annuityDrawDate:s?.[0],annuityDrawFrequency:d?.[0],chargePeriod:l?.[0],copy:c||p||0,coveragePeriod:u?.[0],liabilityVOList:e.riskLiabilityInfoVOList,paymentFrequency:y?.[0],riderRisk:!0,riderRiskVOList:[],riskCategory:i,riskCode:r,riskId:n,riskType:t}}))))).flat()));const u=(e,i,r=[],o=t.YEAR,d=!1)=>{const s=e.filter((e=>{try{return!!e.extraInfo&&(!JSON.parse(e.extraInfo).packageCode||!!r.includes(e.id))}catch(i){return!1}})),u=s.find((e=>e.riskType===n.MAIN_RISK));return s.map((e=>{const{riskInsureLimitVO:r,riskCategory:o,id:d,riskType:s,riskName:y,riskCode:l,extraInfo:c,riskLiabilityInfoVOList:p,riskCalcMethodInfoVO:m}=e,{insurancePeriodType:I,insurancePeriodValueList:k,paymentFrequencyList:f,paymentPeriodValueList:P,paymentPeriodType:C,annuityDrawFrequencyList:L,annuityDrawValueList:g,insurancePeriodRule:O,paymentPeriodRule:D}=r,{fixedAmount:b,minCopy:V}=m,N={amount:b,riskCode:l,riskId:d,riskName:y,paymentFrequency:f?.[0]||t.YEAR,extraInfo:c,chargePeriod:P?.[0],annuityDrawDate:g?.[0],riskType:s,annuityDrawFrequency:L?.[0],copy:V,coveragePeriod:k?.[0],insuredCode:i?.insurerCode,liabilityVOList:p,riskCategory:o};return s===n.MAIN_RISK?N:(O===a.ONE_YEAR&&(N.coveragePeriod="year_1"),D===a.ONE_YEAR&&(N.chargePeriod="year_1"),{...N,mainRiskId:u?.id,mainRiskCode:u?.riskCode})}))},y=e=>{const{tenantId:i,riskList:r,riskPremium:t,productId:n}=e;return r.map((e=>{var r;return{tenantId:i,amountUnit:1,annuityDrawFrequency:e.annuityDrawDate,annuityDrawType:e.annuityDrawType,paymentFrequency:e.paymentFrequency,paymentPeriod:0,paymentPeriodType:o?.[e.chargePeriod],insurancePeriodType:d["to_life"===e.coveragePeriod?"to_life":e.coveragePeriod?.split("_")?.[0]],insurancePeriodValue:(r=e.coveragePeriod,!r||Number.isNaN(+r.split("_")[1])?0:r?.split("_")[1]),riskCode:e.riskCode,riskType:e.riskType,riskName:e.riskName,extInfo:{riskId:e.riskId,copy:e.copy},initialPremium:t[e.riskCode]?.premium,liabilityDetails:e.liabilityVOList?.map((e=>({liabilityCode:e.liabilityCode,liabilityName:e.liabilityName,refundMethod:e.liabilityAttributeValue}))),productId:n,currentAmount:e.amount,initialAmount:e.amount}}))},l=(e("f",(e=>({orderAmount:0,tenantId:e.tenantId,venderCode:e.insureDetail.productBasicInfoVO.insurerCode,orderDataSource:"1",saleUserId:e.saleUserId,saleChannelId:e.saleChannelId,orderCategory:"1",tenantOrderHolder:{tenantId:e.tenantId,certType:e.order.tenantOrderHolder.certEndType,...e.order.tenantOrderHolder},extInfo:{...e.extraInfo,buttonCode:e.buttonCode,pageCode:e.pageCode,iseeBizNo:e.iseeBizNo},tenantOrderInsuredList:[{...e.order.tenantOrderInsuredList[0],tenantId:e.tenantId,certType:e.order.tenantOrderInsuredList[0].certEndType,mobile:e.order.tenantOrderInsuredList[0].relationToHolder===r.SELF?e.order.tenantOrderHolder.mobile:"",tenantOrderProductList:[{tenantId:e.tenantId,productCode:e.insureDetail?.productBasicInfoVO.productCode,productName:e.insureDetail?.productBasicInfoVO.productName,premium:0,tenantOrderRiskList:y({tenantId:e.tenantId,riskList:u(e.insureDetail.productRiskVoList[0].riskDetailVOList,e.detail),riskPremium:{},productId:e.detail?.id})}]}],operateOption:e.order?.operateOption}))),e("c",((e,i)=>-1!==i.indexOf("$")?i.replace("$",`${e}`):`${e||""}${i}`)),e("P","PREVIEW_FILE_INFO"));e("o",(e=>{const{origin:r}=window.location;i.set(l,JSON.stringify(e));const t=`${r}/template/filePreview`;window.open(t)}))}}}));

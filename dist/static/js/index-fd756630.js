import{t as E}from"./theme-775c7ab9.js";import{h as I,G as c,z as x,$ as R,r,k as v,m as p,n as f,s as g,v as U,A as C,B as i,E as k,L as V}from"./vendor-4d9de129.js";const H={class:"item"},L={class:"footer"},J=I({props:{show:{type:Boolean,default:!1},contentList:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},text:{type:String,default:""},beforeReadOverText:{type:String,default:"\u540C\u610F\uFF0C\u4E0B\u4E00\u6761"},forceReadCound:{type:Number,default:0}},emits:["update:show","submit","onCloseFilePreview"],setup(b,{emit:m}){const e=b,u=c(e.show),o=c(e.contentList.map((a,s)=>({...a,disabled:!0,readDisabled:!0}))),t=c(e.activeIndex),_=c(0),w=c(null),y=x(()=>{var a,s;return(s=(a=o.value)==null?void 0:a[t.value])==null?void 0:s.attachmentUri}),d=x(()=>{var a;return(a=o.value[t.value])==null?void 0:a.readDisabled}),n=x(()=>t.value>=e.forceReadCound-1||_.value>=e.forceReadCound?!1:_.value<e.forceReadCound?t.value!==e.forceReadCound-1:!1),$=()=>{t.value+=1},B=()=>{m("update:show",!1),m("submit")};R(()=>e,()=>{u.value=e.show,t.value=e.activeIndex},{deep:!0,immediate:!0});const P=a=>{a&&Math.floor(a.target.scrollHeight-a.target.scrollTop)===a.target.clientHeight&&o.value[t.value].readDisabled&&(o.value[t.value].disabled=!1,o.value[t.value].readDisabled=!1,o.value[t.value+1].disabled=!1,_.value+=1)};return R(()=>t.value,()=>{e.show&&(_.value>=e.forceReadCound&&o.value.forEach(a=>{a.disabled=!1,a.readDisabled=!1}),w.value&&(w.value.scrollTop=0))},{immediate:!0}),(a,s)=>{const l=r("ProTab"),F=r("ProFilePreview"),N=r("VanButton"),A=r("van-config-provider"),D=r("ProPopup");return v(),p(D,{show:u.value,"onUpdate:show":s[1]||(s[1]=h=>u.value=h),class:"file-preview-popup-wrap",closeable:!1,onClose:s[2]||(s[2]=h=>m("onCloseFilePreview"))},{default:f(()=>[g(A,{"theme-vars":i(E),class:"custom-provider"},{default:f(()=>[u.value?(v(),p(l,{key:0,active:t.value,"onUpdate:active":s[0]||(s[0]=h=>t.value=h),list:o.value.map((h,T)=>({title:h.attachmentName,disabled:T==t.value?!1:h.disabled||!1,slotName:`guarantee-${T}`})),class:"tab"},null,8,["active","list"])):U("",!0),C("div",{ref_key:"previewRef",ref:w,class:"list",onScroll:P},[C("div",H,[(v(),p(F,{key:i(y),content:i(y),type:"pdf","forbid-click":!0},null,8,["content"]))])],544),C("div",L,[i(n)?(v(),p(N,{key:0,disabled:i(d),type:"primary",block:"",round:"",onClick:$},{default:f(()=>[k(V(`${b.beforeReadOverText}(${t.value+1}/${b.forceReadCound})`),1)]),_:1},8,["disabled"])):(v(),p(N,{key:1,disabled:i(d),type:"primary",block:"",round:"",onClick:B},{default:f(()=>[k(V(e.text),1)]),_:1},8,["disabled"]))])]),_:1},8,["theme-vars"])]),_:1},8,["show"])}}});const S={class:"list"},M={class:"item"},O={class:"footer"},z=k("\u90E8\u5206\u4E3A\u662F"),G=k("\u5168\u90E8\u4E3A\u5426"),K=I({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth","onCloseHealth"],setup(b,{emit:m}){const e=b,u=c(e.show),o=c(e.activeIndex),t=x(()=>{var d;return(d=e.contentList[o.value])==null?void 0:d.attachmentUri}),_=c(!0),w=d=>{_.value=!1,m("update:show",!1),m("onConfirmHealth",d)},y=()=>{_.value&&m("onCloseHealth")};return R(()=>e,()=>{u.value=e.show,o.value=e.activeIndex},{deep:!0,immediate:!0}),(d,n)=>{const $=r("ProTab"),B=r("ProFilePreview"),P=r("VanButton"),a=r("van-config-provider"),s=r("ProPopup");return v(),p(s,{show:u.value,"onUpdate:show":n[3]||(n[3]=l=>u.value=l),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:n[4]||(n[4]=l=>y())},{default:f(()=>[g(a,{"theme-vars":i(E),class:"custom-provider"},{default:f(()=>[u.value?(v(),p($,{key:0,active:o.value,"onUpdate:active":n[0]||(n[0]=l=>o.value=l),list:b.contentList.map((l,F)=>({title:l.attachmentName,slotName:`guarantee-${F}`})),class:"tab"},null,8,["active","list"])):U("",!0),C("div",S,[C("div",M,[(v(),p(B,{key:i(t),content:i(t),type:"pdf"},null,8,["content"]))])]),C("div",O,[g(P,{type:"primary",block:"",round:"",onClick:n[1]||(n[1]=l=>w("N"))},{default:f(()=>[z]),_:1}),g(P,{type:"primary",plain:"",block:"",round:"",onClick:n[2]||(n[2]=l=>w("allFalse"))},{default:f(()=>[G]),_:1})])]),_:1},8,["theme-vars"])]),_:1},8,["show"])}}});export{J as _,K as a};

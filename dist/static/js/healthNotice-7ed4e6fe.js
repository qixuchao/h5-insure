import{ref as e,onBeforeMount as t}from"vue";import{u as o,a as n,P as a,D as s,c as r,g as i,j as u,b as c,p as d}from"./index-d66a20d8.js";import{q as l}from"./product-d1af8bd8.js";import{g as p}from"./utils-57fec98c.js";import{P as v}from"./index-88613e6f.js";import{n as m}from"./nextStep-3971c3a9.js";import{u as f}from"./useOrder-d2812e23.js";import{P as j,B as I}from"./constants-7afb7c3d.js";import"./pdfh5-e588f83d.js";import"./infoCollection-e6a8a0ee.js";import"./trial-b3f7bf73.js";/* empty css              */import"./core-15eeb464.js";import"./constant-8927d485.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";const N=1;const q={class:"long-health-notice-wrap"},y={class:"footer-btn"},C=vue.defineComponent({__name:"healthNotice",setup(C){const b=o(),h=n(),x=f();console.log("route",b);const{productCode:T,orderNo:g,templateId:O,tenantId:V,preview:k,questionnaireId:E}=b.query,_=e({}),w=e(),P=e(),B=()=>{s.confirm({title:"",message:`${P.value||""}不符合当前产品投保条件，请选择其他产品`}).then((()=>{r()})).catch((()=>{}))},$=()=>{w.value?h.push({path:`${b.path}/${w.value}`,query:{...b.query,questionnaireId:w.value}}):k?u(j.QUESTION_NOTICE,b.query):m(x.value,((e,t)=>{t===c.JUMP_PAGE&&d(e.nextPageCode,b.query)}))};return t((()=>{!k&&(async()=>{const{code:e,data:t}=await i({orderNo:g,tenantId:V});"10000"===e&&Object.assign(x.value,t,{extInfo:{...t.extInfo,templateId:O,pageCode:j.QUESTION_NOTICE,buttonCode:I.QUESTION_NOTICE}})})(),(async()=>{var e;const{code:t,data:o}=await l({productCode:T});if("10000"===t){const{productQuestionnaireVOList:t}=o||{};let n=t[0]||{};if((null==t?void 0:t.length)>1)if(E){const e=t.findIndex((e=>`${e.id}`===E));t[e]&&(n=t[e]),t[e+1]&&(w.value=t[e+1].id)}else w.value=null==(e=t[1])?void 0:e.id;const{questionnaireDetailResponseVO:a,questionnaireId:s,questionnaireName:r}=n||{},{questions:i,basicInfo:u}=a||{},{objectType:c,questionnaireType:d}=u||{};if(P.value=c,d===N){const{content:e,textType:t}=(null==i?void 0:i[0])||{};_.value={content:e,contentType:p(`${t}`,e),questionnaireId:s,questionnaireName:r}}else _.value={content:i,contentType:"question",questionnaireId:s,questionnaireName:r}}})()})),(e,t)=>{const o=vue.resolveComponent("ProNavigator"),n=vue.resolveComponent("VanButton");return vue.openBlock(),vue.createElementBlock("div",q,[vue.createVNode(o),vue.unref(_).content?(vue.openBlock(),vue.createBlock(a,{key:0,type:vue.unref(_).contentType,content:vue.unref(_).content},null,8,["type","content"])):vue.createCommentVNode("",!0),vue.createElementVNode("div",y,[vue.createVNode(n,{onClick:B},{default:vue.withCtx((()=>[vue.createTextVNode("部分为是")])),_:1}),vue.createVNode(v,{shadow:!1,onClick:$},{default:vue.withCtx((()=>[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createTextVNode("以上皆否")]))])),_:3})])])}}});export{C as default};

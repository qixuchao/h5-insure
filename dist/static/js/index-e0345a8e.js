import{d as e,aV as a,aW as l,h as n,i as t,j as i,k as o,E as s,aY as d,M as r,aZ as u,l as c,o as v,c as p,u as _,b as m,F as I,a as f,p as b,f as C,w as O,v as y,q as j,a_ as g,y as h,a$ as L,aX as E}from"./index-3bde63a3.js";import{i as k,q as P,s as T}from"./trial-80646c8f.js";import{a as w,b as A}from"./product-498b6b7b.js";import{_ as x}from"./TrialButton-abb3c3b7.js";import{q as S}from"./createProposal-634df243.js";import{u as N}from"./useOrder-bd476c49.js";import{p as R,d as V}from"./utils-27624fea.js";import{g as B,c as D}from"./util-15055688.js";import"./index-d148eda7.js";import"./format-31cde443.js";import"./utils-52e2cdee.js";import"./trial-b156ea1c.js";import"./PolicyInfo-93f5105d.js";import"./cloneDeep-79a5a11c.js";import"./utils-4cd2b682.js";import"./infoCollection-71f8c805.js";const F={key:0},U={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},q={class:"info"},M={key:1,class:"preview-placeholder"},G=f("br",null,null,-1),z=f("div",{id:"insureButton"},null,-1),H=f("span",null,null,-1),W=f("div",{id:"xinaoDialog"},null,-1),X=e({name:"InsuranceLong"}),Y=e({...X,setup(e){const X=a((()=>l((()=>import("./index-bbeeb7c3.js")),["static/js/index-bbeeb7c3.js","static/css/index-c23f272e.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css"]))),Y=a((()=>l((()=>import("./index-dea12398.js")),["static/js/index-dea12398.js","static/css/index-79104747.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css","static/js/infoCollection-71f8c805.js"]))),$=a((()=>l((()=>import("./index-7d747580.js")),["static/js/index-7d747580.js","static/css/index-491cbbd3.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css"])));a((()=>l((()=>import("./index-81d71ca9.js")),["static/js/index-81d71ca9.js","static/css/index-50785b3e.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css","static/js/cloneDeep-79a5a11c.js","static/js/TrialButton-abb3c3b7.js","static/css/TrialButton-dea42d8e.css","static/js/index-d148eda7.js","static/css/index-bbfdd7ec.css","static/js/format-31cde443.js","static/js/useOrder-bd476c49.js","static/js/utils-52e2cdee.js","static/js/createProposal-634df243.js","static/js/trial-b156ea1c.js","static/js/PolicyInfo-93f5105d.js","static/css/PolicyInfo-8aa982e6.css"])));const J=a((()=>l((()=>import("./index-b5c68851.js")),["static/js/index-b5c68851.js","static/css/index-ebb5282b.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css"]))),Z=a((()=>l((()=>import("./Video-73024a3b.js")),["static/js/Video-73024a3b.js","static/css/Video-20262b6f.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css"]))),K=a((()=>l((()=>import("./index-eb1006c2.js")),["static/js/index-eb1006c2.js","static/css/index-2acebd53.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css","static/js/index-cfb3f230.js","static/css/index-f9ad8602.css","static/js/index-53847aef.js","static/js/utils-4cd2b682.js","static/js/infoCollection-71f8c805.js","static/js/trial-b156ea1c.js"]))),Q=a((()=>l((()=>import("./index-a8a64de6.js")),["static/js/index-a8a64de6.js","static/css/index-755aef09.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css","static/js/product-498b6b7b.js","static/js/useThread-637a02aa.js"]))),ee=a((()=>l((()=>import("./index-4f4b0f1e.js")),["static/js/index-4f4b0f1e.js","static/css/index-fa4edf2a.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css","static/js/theme-94cf7d00.js","static/js/index-d148eda7.js","static/css/index-bbfdd7ec.css","static/js/utils-4cd2b682.js","static/js/infoCollection-71f8c805.js","static/js/trial-b156ea1c.js"]))),ae=a((()=>l((()=>import("./index-2f0a9a39.js")),["static/js/index-2f0a9a39.js","static/css/index-eabeb59f.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css"]))),le=a((()=>l((()=>import("./index-ed3fa5cf.js")),["static/js/index-ed3fa5cf.js","static/css/index-4822eb94.css","static/js/index-3bde63a3.js","static/css/index-53ee4d9d.css"]))),ne=n(),te=t(),{productCode:ie="",tenantId:oe,agentCode:se="",agencyCode:de,saleChannelId:re,proposalId:ue,proposalInsuredId:ce,extraInfo:ve,orderNo:pe,insurerCode:_e,preview:me,trialPreview:Ie}=te.query;let fe={};try{fe=JSON.parse(decodeURIComponent(ve))}catch(Xe){}const{openId:be,saTenantId:Ce=""}=fe;i();const Oe=i(),ye=i(),je=i(!1),ge=i({}),he=i({}),Le=i(!1),Ee=i(0),ke=i(!1);i({});const Pe=i(!0);i(!0);const Te=i(!0),we=i(""),Ae=i({}),xe=i({}),Se=i([]),Ne=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Re=i({});o((()=>!!me||!!Ie));const Ve=o((()=>!!Ie));i();const Be=()=>{g("premiumTrial",te.query)},De=N(),Fe=i(!1);s((()=>Re.value.planCode),(e=>{Ae.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Ue=()=>{Oe.value.handleClickTab()("insureButton")};i(""),i(0);const qe=e=>{Ae.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},Me=()=>{Le.value=!1,Pe.value=!0},Ge=()=>{Le.value=!1,Pe.value=!0},ze=i([]),He=async()=>{var e,a,l;const{code:n,data:t}=await P({calcProductFactorList:[{productCode:ie}]});if("10000"===n){const n=B();Object.assign(De.value,t,{insuredList:[{...null==(e=t.insuredList)?void 0:e[0],...n}]}),D();(e=>{A(e).then((({code:e,data:a})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:l}=V(a);ze.value=e.concat(l)}}))})(R(null==(l=null==(a=t.insuredList)?void 0:a[0])?void 0:l.productList))}},We=async()=>{De.value.extInfo&&(De.value.extInfo.iseeBizNo=we.value);const{code:e,data:a}=await T(De.value);"10000"===e&&ne.push({path:h.questionNotice,query:{...te.query,orderNo:a}})};return s((()=>Ae.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:l}=Ae.value;Re.value.planCode=e,xe.value=(l||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),r((()=>{u(ye,(([{isIntersecting:e}],a)=>{je.value=!0}))})),c((()=>{Te.value=!0,ue||He(),(async()=>{!Ve.value&&w({productCode:ie}).then((({data:e,code:a})=>{if("10000"===a){ge.value=e;const{wxShareConfig:a,showWXShare:l,title:n,desc:t,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};l?Object.assign(Ne.value,{...a,imgUrl:a.image,isShare:l}):Object.assign(Ne.value,{title:n,desc:t,imgUrl:i,isShare:l})}})),pe||ue||(Fe.value=!0),ue&&S({id:ue,tenantId:Ce||oe}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:l}=a,n=(ie||"").split(",");Object.assign(De.value,{renewFlag:"",holder:e,tenantId:oe,proposalId:ue,insuredList:(l||[]).filter((e=>e.id===+ce)).map((e=>({...e,relationToHolder:null,productList:e.productList.filter((e=>n.includes(e.productCode)))})))}),Fe.value=!0}})),await k({productCode:ie,isTenant:!1}).then((({data:e,code:a})=>{var l;"10000"===a&&(je.value=!0,ke.value=!0,he.value=e,Ae.value=null==(l=e.productPlanInsureVOList)?void 0:l[0],Se.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),Te.value=!1})(),setTimeout((async()=>{we.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var l,n,t,i,o,s,d,r,u,c,g,h,k,P,T,w,A,S,N,R;const V=L,B=E;return v(),p(I,null,[_(Te)?(v(),p("div",F)):(v(),p("div",U,[m(V),_(Ve)?(v(),p("div",M,[y("当前页面仅用于保费试算预览"),G,y("不展示其他产品相关配置信息")])):(v(),p(I,{key:0},[f("div",q,[1==(null==(n=null==(l=_(ge))?void 0:l.BASIC_INFO)?void 0:n.bannerType)&&(null==(i=null==(t=_(ge))?void 0:t.BASIC_INFO)?void 0:i.banner.length)?(v(),b(_($),{key:0,"data-skeleton-type":"img",images:null==(s=null==(o=_(ge))?void 0:o.BASIC_INFO)?void 0:s.banner},null,8,["images"])):C("",!0),2==(null==(r=null==(d=_(ge))?void 0:d.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=_(ge))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),b(_(Z),{key:1,"data-skeleton-type":"img",src:null==(g=_(ge))?void 0:g.BASIC_INFO.video[0]},null,8,["src"])):C("",!0),(null==(P=null==(k=null==(h=_(ge))?void 0:h.BASIC_INFO)?void 0:k.bannerMove)?void 0:P.length)?(v(),b(_($),{key:2,url:null==(A=null==(w=null==(T=_(ge))?void 0:T.BASIC_INFO)?void 0:w.bannerMove)?void 0:A[0],onClick:Ue},null,8,["url"])):C("",!0),f("div",{ref_key:"observeRef",ref:ye},null,512)]),m(_(X),{"data-source":null==(S=_(ge))?void 0:S.BASIC_INFO},null,8,["data-source"]),(null==(N=_(ge))?void 0:N.GUARANTEE)?(v(),b(_(K),{key:0,"show-service-config":"","data-source":_(ge),"plan-list":_(Se),onUpdateActivePlan:qe},null,8,["data-source","plan-list"])):C("",!0),f("div",{class:"trial-text-btn",onClick:Be},"算一算保费"),m(_(J),{"data-source":null==(R=_(ge))?void 0:R.ISSUE_CONDITION},null,8,["data-source"]),m(_(Y),{ref_key:"detailScrollRef",ref:Oe,"data-source":_(ge)},null,8,["data-source"]),m(B,null,{default:O((()=>{var e,a,l;return[(null==(e=_(ge).SIGNATURE)?void 0:e.inscribedContent)?(v(),b(_(ae),{key:0,"inscribed-content":null==(l=null==(a=_(ge))?void 0:a.SIGNATURE)?void 0:l.inscribedContent},null,8,["inscribed-content"])):C("",!0)]})),_:1}),m(B,null,{default:O((()=>{var e;return[(null==(e=_(ze))?void 0:e.length)?(v(),b(_(le),{key:0,"attachment-list":_(ze),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{Ee.value=e,Le.value=!0})(e))},null,8,["attachment-list"])):C("",!0)]})),_:1})],64)),z,m(x,{onHandleClick:We},{label:O((()=>[H])),_:1})])),m(B,null,{default:O((()=>[_(ke)&&!_(Ve)?(v(),b(_(Q),{key:0,"product-detail":_(ge)},null,8,["product-detail"])):C("",!0)])),_:1}),W,m(B,null,{default:O((()=>[_(Le)?(v(),b(_(ee),{key:0,show:_(Le),"onUpdate:show":a[1]||(a[1]=e=>j(Le)?Le.value=e:null),"content-list":_(Pe)?_(ze):[],"is-only-view":_(Pe),"active-index":_(Ee),text:_(Pe)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,onSubmit:Me,onOnCloseFilePreviewByMask:Ge},null,8,["show","content-list","is-only-view","active-index","text"])):C("",!0)])),_:1})],64)}}});export{Y as default};

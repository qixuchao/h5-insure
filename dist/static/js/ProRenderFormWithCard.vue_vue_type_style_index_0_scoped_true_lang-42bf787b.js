import{bf as e,al as a,ah as t,aA as o,a6 as l,E as r,aM as s,ak as n,_ as i,d,o as u,c,e as m,bg as p,U as f,aK as y,r as b,j as N,z as g,O as C,l as h,aW as v,w as A,b as E,u as T,f as O,n as I,aX as V,aY as _,a as S,a0 as $,a1 as w,b6 as R,p as P,b2 as x,t as M,b9 as k,bb as D,ae as B,b3 as L,a8 as j}from"./index-a3c15377.js";import{a as H}from"./isObjectLike-a9798079.js";import{s as F}from"./phoneVerify-0c603305.js";import{m as U}from"./merge-e7788e50.js";const Z=(()=>{const e=(window.location.search.match(/&insurerCode=([^&]*)&/)||[])[1]||"";return a=>`${e?`${e.toUpperCase()}_`:""}${a}`})(),K=async({mobile:e},a)=>{const t=await F(e),{code:o}=t;"10000"===o&&"function"==typeof a&&a()},z="ProFieldV2",G="ProDatePickerV2",Y="ProPickerV2",W="ProRadioV2",q="ProCheckboxV2",X="ProSwitchV2",J="ProCascaderV2",Q="ProBank",ee="ProAddress",ae="ProUploadV2",te="ProStepperV2",oe="ProSMSCode",le="ProOccupation",re="ProIDCardUploadV2",se="ProBankUpload",ne=18,ie=20,de=50,ue="name",ce="external",me="email",pe="zipCode",fe="tel",ye="mobile",be="zhCN",Ne="notZhCN",ge="normalChar",Ce="alphabetNumber",he="cert",ve="houseHold",Ae="birth",Ee="passport",Te="otherCert",Oe="militaryCard",Ie="solider",Ve="hongkongMacao",_e="taiwanTravel",Se="foreignPermanent",$e="HKMacaoResidencePermit",we="taiwanResidencePermit",Re="socialCreditCode",Pe="OCC",xe="businessLicense",Me="bandCard",ke={NAME:{maxlength:25,ruleType:ue},MOBILE:{type:"digit",ruleType:ye,maxlength:11},AGE:{type:"digit",maxlength:3},HEIGHT_WEIGHT:{type:"number",precision:1,maxlength:5},INCOME:{type:"number",precision:2,unit:"万元",isPrecisionCompleted:!0},ZIP_CODE:{type:"digit",ruleType:pe,maxlength:6},CONTENT:{maxlength:200},GAS_NUMBER:{maxlength:ie},BANK:{type:"digit",maxlength:ie},ADDRESS:{dictCode:Z(e.NATIONAL_REGION_CODE),customFieldName:{text:"name",value:"code",children:"children"}},COUNTRY:{dictCode:e.NATIONALITY,customFieldName:{text:"name",value:"code",children:"children"}}},De=[{code:"input",name:"单行文本",value:1,componentName:z},{code:"textarea",name:"多行文本",value:2,type:"textarea",componentName:z},{code:"number",name:"数字输入框",value:3,componentName:z},{code:"date",name:"日期",value:4,componentName:G},{code:"select",name:"下拉框",value:5,componentName:Y},{code:"radio",name:"单选框",value:6,componentName:W},{code:"checkbox",name:"多选框",value:7,componentName:q},{code:"switch",name:"switch开关",value:8,componentName:X},{code:"cascader",name:"级联选择",value:9,componentName:J},{code:"bank",name:"银行卡",value:10,componentName:Q},{code:"address",name:"地址",value:11,componentName:ee},{code:"upload",name:"文件上传",value:12,componentName:ae},{code:"stepper",name:"步进器",value:13,componentName:te}],Be={BANK_CARD_NO:"bankCardNo",ACCOUNT_NAME:"accountName",PAY_BANK:"payBank",BANK_CARD_IMAGE:"bankCardImage",MOBILE:"mobile",VERIFICATION_CODE:"verificationCode"},Le=Object.values(Be),je={bankCardNo:{...ke.BANK,name:Be.BANK_CARD_NO,componentName:z},accountName:{...ke.NAME,name:Be.ACCOUNT_NAME,componentName:z},payBank:{name:Be.PAY_BANK,dictCode:Z(e.BANK),componentName:Y},bankCardImage:{maxCount:2,subLabel:"（需上传正反两面）",name:Be.BANK_CARD_IMAGE,componentName:se},mobile:{...ke.MOBILE,name:Be.MOBILE,componentName:z},verificationCode:{...ke.ZIP_CODE,sendSMSCode:K,name:Be.VERIFICATION_CODE,relatedName:Be.MOBILE,componentName:oe}},He={certType:{[t.CERT]:[he],[t.HOUSE_HOLD]:[ve],[t.MILITARY_CARD]:[Oe],[t.PASSPORT]:[Ee],[t.HONGKONG_MACAO]:[Ve],[t.OTHER]:[Te],[t.SOLIDER]:[Ie],[t.BIRTH]:[Ae],[t.TAIWAN_TRAVEL]:[_e],[t.FOREIGN_PERMANENT]:[Se],[t.HK_MACAO_RESIDENCE_PERMIT]:[$e],[t.TAIWAN_RESIDENCE_PERMIT]:[we],[t.SOCIAL_CREDIT_CODE]:[Re]}},Fe={INSURE_AREA:"insureArea",RESIDENCE:"residence",LONG_AREA:"longArea",WORK_ADDRESS:"workAddress"};Object.values(Fe);const Ue=[{key:Fe.INSURE_AREA},{key:Fe.RESIDENCE},{key:Fe.LONG_AREA},{key:Fe.WORK_ADDRESS}].reduce(((e,{key:a})=>(e[a]=ke.ADDRESS,e)),{}),Ze={name:ke.NAME,certNo:{relatedName:"certType",maxlength:ne},certType:{relatedName:"certNo"},birthday:{relatedName:"age"},mobile:ke.MOBILE,age:ke.AGE,height:{...ke.HEIGHT_WEIGHT,unit:"cm"},weight:{...ke.HEIGHT_WEIGHT,unit:"kg"},email:{ruleType:me},personalAnnualIncome:ke.INCOME,familyAnnualIncome:ke.INCOME,workZipCode:ke.ZIP_CODE,homePostalCode:ke.ZIP_CODE,workContent:ke.CONTENT,gasNumberCollection:{...ke.GAS_NUMBER,ruleType:Ne},verificationCode:{sendSMSCode:K,componentName:oe,...ke.ZIP_CODE},...Ue,nationalityCode:{...ke.COUNTRY},certEndDate:{minDate:new Date,maxDate:a().add(100,"year").toDate()},companyName:{maxlength:de},occupationCodeList:{componentName:le,dictCode:Z("OCCUPATION")},certImage:{componentName:re},benefitRate:{...ke.AGE,unit:"%"}},Ke=2,ze={1:"holder",2:"insured",3:"beneficiary",4:"payInfo",5:"signInfo",8:"guardian"},Ge=Symbol("VAN_PRO_FORM_KEY"),Ye=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/,We=e=>{if(!Ye.test(e))return!1;if(18!==e.length)return!1;const a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];let t=0;for(let r=0;r<17;r++)t+=e.substring(r,r+1)*a[r];const o=t%11,l=e.substring(17);return 2===o?"X"===l.toUpperCase():Number(l)===[1,0,10,9,8,7,6,5,4,3,2][o]},qe={isName:e=>/^[\u4e00-\u9fa5a-z].{0,23}[\u4e00-\u9fa5a-z]/i.test(e),isExternal:e=>/^(https?:|mailto:|tel:)/.test(e),isEmail:e=>/^[A-Za-z0-9]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(e),isZipCode:e=>/^[0-9]{6,6}$/.test(e),isTel:e=>/0\d{2,3}-\d{7,8}/.test(e),isPhone:e=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(e),isZhCN:e=>/^[\u4e00-\u9fa5]+$/.test(e),isNotZhCN:e=>/^[^\u4e00-\u9fa5]+$/.test(e),isCommonChar:e=>/^[\w_]{6,20}$/.test(e),isNormalChar:e=>/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(e),isAlphabetNumber:e=>/^[a-z0-9]+$/i.test(e),isAlphabetNumberOrSpecial:e=>/^[a-z0-9`~!@#$%^&*()_\-+=<>?:"{}|,./;'\\[\]·~！@#￥¥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]+$/i.test(e),isIdCardNo:e=>We(e),isHouseHold:e=>We(e),isBirthType:e=>/^[a-zA-Z]\d{9}$/.test(e),isPassword:e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,20}$/.test(e),isPassportType:e=>e.length>=5&&/^[^\u4e00-\u9fa5]+$/.test(e),isMilitaryCard:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isSolider:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isHongkongMacaoTravel:e=>/^[C]\d{8}$|^[C][a-hA-Hj-nJ-Np-zP-Z][0-9]{7}$/.test(e),isTaiwanTravel:e=>/^[L]\d{8}$/.test(e),isForeignPermanent:e=>/^[A-Z]{3}[0-9]{12}$/.test(e),isHKMacaoResidencePermit:e=>/^8[12]0000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isTaiwanResidencePermit:e=>/^830000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isUSCC:e=>/^[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}$/.test(e),isUSCCPolicy:e=>/^[A-Z0-9]{18}$/.test(e),isOCC:e=>/^[A-Z0-9]{8}-[A-Z0-9]{1}$/.test(e),isBusinessLicense:e=>/(^\d{15}$)|(^[A-Z0-9]{18}$)/.test(e),isBandcard:e=>/^\d{12,20}$/g.test(e),isOtherCert:e=>/^.{1,18}$/.test(e)},Xe={[ue]:[qe.isName],[ce]:[qe.isExternal],[me]:[qe.isEmail],[pe]:[qe.isZipCode],[fe]:[qe.isTel],[ye]:[qe.isPhone],[be]:[qe.isZhCN],[Ne]:[qe.isNotZhCN],[ge]:[qe.isNormalChar],[Ce]:[qe.isAlphabetNumber],[he]:[qe.isIdCardNo],[ve]:[qe.isHouseHold],[Ae]:[qe.isBirthType],[Ee]:[qe.isPassportType],[Oe]:[qe.isMilitaryCard],[Ie]:[qe.isSolider],[Ve]:[qe.isHongkongMacaoTravel],[_e]:[qe.isTaiwanTravel],[Se]:[qe.isForeignPermanent],[$e]:[qe.isHKMacaoResidencePermit],[we]:[qe.isTaiwanResidencePermit],[Re]:[qe.isUSCCPolicy],[Pe]:[qe.isOCC],[xe]:[qe.isBusinessLicense],[Me]:[qe.isBandcard],[Te]:[qe.isOtherCert]};function Je(e){return null==e}const Qe=["v-model","label","name","id","type","size","maxlength","placeholder","border","disabled","readonly","colon","required","center","clearable","clear-icon","clear-trigger","clickable","is-link","autofocus","show-word-limit","error","error-message","error-message-align","formatter","format-trigger","arrow-direction","label-class","label-width","label-align","input-align","autosize","left-icon","right-icon","icon-prefix","rules","autocomplete","enterkeyhint","visible"],ea=["label","input","left-icon","right-icon","button","error-message","extra","value-view"],aa={autocomplete:"off"},ta=e=>console.log(`%c🔥 ${e}`,"color:#1989fa;background:#5e4;padding:3px 5px;"),oa=e=>{const{trialFactorCodes:a,personVO:t}=e||{};return!o(a)||!a.some((e=>{const a=t[e];return Je(a)||""===a||Array.isArray(a)&&!a.length}))},la=(e,a,t)=>{var l;return t&&!o(a)?Promise.resolve():null==(l=e.value)?void 0:l.validate(t?a:void 0)},ra=(e,a="children")=>o(e)?e.map((({[`${a}`]:e,...t})=>{const l={};return o(e)&&(l.children=ra(e)),{...t,...l}})):[],sa=(e,a=0,t="children")=>{const l=(e,r=1)=>o(e)?e.map((({[`${t}`]:e,...s})=>{const n={};return(!a||a&&a>r)&&o(e)&&(n.children=l(e,r+1)),{...s,...n}})):[];return l(e)},na=(e,a,t={})=>{const l=Object.keys(e);return o(l)?l.reduce(((t,o)=>{const l=a.includes(o);return t[Number(!l)][o]=e[o],t}),[{...t},{}]):[{...t},{}]},ia=e=>{if("certType"!==(null==e?void 0:e.name))return!1;const{columns:a,title:l}=e||{};return o(a)&&1===a.length&&a.findIndex((e=>e.code===t.CERT))>-1},da=e=>o(e)&&e.some((e=>"birthday"===(e.code||e.name))),ua=(e,a)=>{let t=[];const r=[];if(o(e)){const a=da(e);t=e.map((e=>{const{code:t,name:o,value:n,componentName:i,...d}=De.find((a=>`${a.value}`==`${e.displayType}`))||{};e.isCalculationFactor===l.YES&&r.push(e.code);const u={},{componentName:c,...m}=Ze[e.code]||{},p=c||i||"ProFieldV2";2===e.moduleType&&(u.isSelfInsuredNeed=e.isSelfInsuredNeed),"age"===e.code&&(u.visible=!a);const f={...d,...u,customFieldName:{text:"value",value:"code",children:"children"},label:e.title,name:e.code,remark:e.remark,componentName:p,required:1===e.isMustInput,nanoid:s(),...m},y={...f,attributeValueList:e.attributeValueList,columns:f.dictCode?[]:e.attributeValueList||[]};return ia(y)&&(y.visible=!1),y}))}return a.push(...r),{schema:t,trialFactorCodes:r}},ca=(e,a={isTrial:!1})=>{const t={};if(!e)return t;const r=Object.keys(e)||[];if(!o(r))return t;const s=[],n=a.multiInsuredSupportFlag===l.YES,i={hasTrialFactorCodes:!1,isSpouseInsured:!1,multiInsuredSupportFlag:n,multiInsuredMaxNum:n?a.multiInsuredNum||Number.MAX_SAFE_INTEGER:1,multiInsuredMinNum:1,multiBeneficiaryMaxNum:a.multiBeneficiaryMaxNum||5},d=r.reduce(((t,l)=>(t[ze[l]]=o(e[l])?e[l].filter((e=>{const{subModuleType:t,code:l,attributeValueList:r}=e;if(t===Ke&&"relationToMainInsured"===l){o(r)&&1===r.length&&r.findIndex((e=>"2"===e.code))>-1&&Object.assign(i,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0})}return!a.isTrial||1===e.isCalculationFactor})):[],t)),{}),u=((e,a)=>{if(!o(e.insured))return[];const t=o(e.holder)?e.holder.map((e=>e.code)):[];return e.insured.reduce(((e,l)=>{const{code:r,subModuleType:s,attributeValueList:n}=l;return s===Ke?("relationToMainInsured"===r&&o(n)&&1===n.length&&n.findIndex((e=>"2"===e.code))>-1&&Object.assign(a,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0}),e[1].push({...l,isSelfInsuredNeed:!t.includes(r)})):e[0].push({...l,isSelfInsuredNeed:!t.includes(r)}),e}),[[],[]]).filter((e=>o(e)))})(d,i),c=Object.keys(d).reduce(((e,t)=>{if("insured"!==t){const l=d[t],r="holder"===t;e[t]=ua(r&&o(a.holderFactorCodes)?l.filter((e=>a.holderFactorCodes.includes(e.code))):l,s)}else e[t]=o(u)?u.map((e=>ua(o(a.insuredFactorCodes)?e.filter((e=>a.insuredFactorCodes.includes(e.code))):e,s))):[];return e}),{});return c.config={...i,hasTrialFactorCodes:o(s)},c},ma=(e=!1)=>a=>{if("string"==typeof a&&a){const t=["toLowerCase","toUpperCase"][Number(e)];return`${a[0][t]()}${a.substring(1)}`}return""},pa=ma(!0),fa=ma(),ya=(e,a={})=>Object.keys(e).reduce(((e,t)=>(e[a[t]||t]=t,e)),{}),ba=e=>{const a=new Date,t=new Date(e);let o=a.getFullYear()-t.getFullYear();const l=a.getMonth()-t.getMonth();return(l<0||0===l&&a.getDate()<t.getDate())&&(o-=1),o},Na=(e,a=(e=>!0))=>{if(!e)return{};return Object.keys(e).filter((e=>"function"!=typeof a||a(e))).reduce(((a,t)=>(a[t]={Object:{},Array:[]}[Object.prototype.toString.call(e[t]).slice(8,-1)]||null,a)),{})},ga=(e,a)=>{const o=![t.CERT,t.HOUSE_HOLD].includes(String(e)),l=da(a)?{age:{visible:!1}}:{};return{...["gender","birthday","age"].reduce(((e,a)=>(e[a]={visible:o},e)),{}),...l}},Ca=(e,a)=>{const t={},{relationToHolder:o,certType:l}=a||{},r="3"===String(o),s=null==e?void 0:e.find((e=>"certType"===e.name)),n=ia(s||{});return n&&(t.certNo={label:"身份证号"+(r?"\n(户口簿)":"")}),s&&U(t,ga(l,e)),[n,t]},ha={certNo:{onChangeEffect:(e,a)=>{Object.assign(a.formData,{certNo:null,gender:null,birthday:null,age:null}),r((()=>{U(a.config,ga(a.formData.certType,a.schema))}))}},certType:{extraAttrs:{4:{maxlength:10}},onChangeEffect:(e,a)=>{if([t.CERT,t.HOUSE_HOLD].includes(String(a.formData.certType))){const t=(e=>{const a={gender:null,birthday:null,age:null};if("string"==typeof e&&e&&We(e)){const t={15:[6,12],18:[6,14]};a.birthday=e.slice(...t[e.length]).replace(/(.{4})(.{2})/,"$1-$2-"),a.gender=[n.FEMALE,n.MALE][Number(e.slice(-2,-1))%2],a.age=a.birthday&&`${ba(a.birthday)}`}return a})(e);Object.assign(a.formData,t)}}},age:{onChangeEffect:(e,a)=>{if(![t.CERT,t.HOUSE_HOLD].includes(String(a.formData.certType))){const t=e?ba(e):null;Object.assign(a.formData,{age:t})}}}};const va={class:"value-view-wrap"};var Aa=i(d({__name:"ValueView",props:{value:{type:String,default:""},isView:{type:Boolean,default:!1}},setup:e=>(a,t)=>(u(),c("span",va,m(e.value||"-"),1))}),[["__scopeId","data-v-505dc7b6"]]);const Ea={class:"com-van-field-unit"},Ta=d({inheritAttrs:!1,__name:"ProFieldV2",props:{ruleType:{type:String,default:""},modelValue:{type:[String,Number,Object,Array,Boolean],default:""},isView:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:Array,default:()=>[]},relatedName:{type:String,default:""},precision:{type:Number,default:0},isPrecisionCompleted:{type:Boolean,default:!1},unit:{type:String,default:""}},emits:["update:model-value","blur"],setup(e,{emit:a}){const t=e,l=p(),r=f(),{formState:s,markRequired:n}=y(Ge)||{},i=b({modelValue:""}),d=N((()=>{const e=ya(r,l.slots),{extra:a,...o}=e;return t.unit?o:e})),c=N((()=>l.placeholder||`请输入${l.label||""}`)),R=N((()=>`${i.modelValue||""}`)),P=N((()=>{var e,a;if(t.ruleType)return t.ruleType;if(t.relatedName){const o=null==(e=null==s?void 0:s.formData)?void 0:e[t.relatedName];if(o)return null==(a=He[t.relatedName])?void 0:a[o]}return""})),x=e=>Je(e)||""===e||Array.isArray(e)&&!e.length||H(e)&&Object.keys(e).some((e=>x(e))),M=N((()=>o(t.rules)?t.rules:[{required:t.required,validator:e=>{if(t.required&&x(e))return l.placeholder;if(P.value){const[a]=Xe[P.value]||[];if("function"!=typeof a)return console.warn(`%c 字段 ${l.label} 的规则 ${P} 校验函数不存在，请先确认～`,"color: #3e7;"),"";if(!x(e)&&!a(e))return`请输入正确的${l.label}`}return""}}])),k=N((()=>"number"===l.type&&t.precision)),D=e=>k.value&&e?e.replace(/^(0)\d+$/g,"$1").replace(new RegExp(`^(\\d+\\.\\d{${t.precision}})\\d+$`,"g"),"$1"):e,B=N((()=>{var e;if(t.relatedName){const{extraAttrs:a}=ha[t.relatedName]||{},o=null==(e=null==s?void 0:s.formData)?void 0:e[t.relatedName];if(a&&!Je(o)&&""!==o)return a[o]||{}}return{}})),L=(e,a)=>{if(t.relatedName&&e){const o=(ha[t.relatedName]||{})[`${e}Effect`];"function"==typeof o&&o(a,s)}},j=e=>{L("onChange",e),i.modelValue=e,a("update:model-value",e)},F=e=>{let o=i.modelValue;k.value&&o&&t.isPrecisionCompleted&&(o=Number(o).toFixed(t.precision),j(o)),L("onBlur",o),a("blur",e)};return g((()=>t.modelValue),(e=>{i.modelValue=e}),{immediate:!0,deep:!0}),C((()=>{l.name&&(null==s?void 0:s.nameList)&&s.nameList.push(l.name)})),(a,t)=>{var o;const s=w;return u(),h(s,$({"model-value":T(i).modelValue,class:`com-van-field ${T(n)?"":"field-mark--hidden"} ${!1===T(l).visible?"com-van-field--hidden":""}`,autocomplete:"off",formatter:D},{maxlength:25,...a.$attrs,placeholder:T(c),required:e.required,rules:T(M),...T(B)},{onBlur:F,"onUpdate:modelValue":j}),v({_:2},[e.isView?{name:"input",fn:A((()=>[E(Aa,{value:T(R)},null,8,["value"])])),key:"0"}:void 0,(null==(o=T(r))?void 0:o.customer)&&"name"===T(P)?{name:"right-icon",fn:A((()=>[O(a.$slots,"customer")])),key:"1"}:void 0,I(Object.keys(T(d)),(e=>({name:e,fn:A((t=>{var o;return[O(a.$slots,null==(o=T(d))?void 0:o[e],V(_(t||{})))]}))}))),e.unit?{name:"extra",fn:A((()=>[S("div",Ea,m(e.unit),1)])),key:"2"}:void 0]),1040,["model-value","class"])}}}),Oa={input:"请输入",select:"请选择"};function Ia({placeholderType:e}={placeholderType:"select"}){const a=p(),t=f(),o=b({filedAttrs:{},filedSlots:{},attrs:{},slots:{}});return g((()=>a),(()=>{const[t,l]=(e=>na(e,Qe,aa))(a);o.filedAttrs={...t,placeholder:a.placeholder||`${Oa[e]}${a.label||""}`},o.attrs={title:`请选择${t.label}`,...l}}),{deep:!0,immediate:!0}),g([()=>t,()=>a.slots],(e=>{const[l,r]=(e=>na(e,ea))(ya(t,a.slots));o.filedSlots=l||{},o.slots=r||{}}),{deep:!0,immediate:!0}),o}const Va={class:"custom-input-wrap"},_a={key:1,class:"placeholder"},Sa=d({inheritAttrs:!1,__name:"CustomInput",props:{fieldValueView:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const a=e;return p(),y(Ge),R((()=>a.modelValue)),(a,t)=>(u(),c("div",Va,[e.fieldValueView||e.isView?O(a.$slots,"value-view",{key:0,value:e.fieldValueView},(()=>[E(Aa,{value:e.fieldValueView},null,8,["value"])])):(u(),c("span",_a,m(a.$attrs.placeholder),1))]))}});const $a=d({name:"ProFormItem"}),wa=d({...$a,props:{fieldValueView:{type:String,default:""},name:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const a=f(),t=N((()=>Object.keys(a).filter((e=>"value-view"!==e))));return(a,o)=>(u(),h(Ta,{class:P({"com-form-item":!0,"com-form-item--view":e.isView}),"is-link":!e.isView},v({input:A((()=>[E(Sa,{name:e.name,"model-value":e.modelValue,"is-view":e.isView,"field-value-view":e.fieldValueView,placeholder:a.$attrs.placeholder},{"value-view":A((e=>[O(a.$slots,"value-view",V(_(e||{})))])),_:3},8,["name","model-value","is-view","field-value-view","placeholder"])])),_:2},[I(T(t),(e=>({name:e,fn:A((t=>[O(a.$slots,e,V(_(t||{})))]))})))]),1032,["class","is-link"]))}});const Ra={class:"com-image-upload"},Pa={class:"upload-item"};var xa=i(d({__name:"ProBaseUpload",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},uploadType:{type:String,default:x.OTHER},category:{type:Number,default:null},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","update:ossKeyList","onUploaded"],setup(e,{emit:a}){const t=e,{slots:l}=M(Ia()),{objectType:r}=y(Ge)||{},s=N((()=>Object.keys(l).filter((e=>"default"!==e)))),n=b({modelValue:[],ossKeyList:[]}),i=e=>{k(e.file,t.uploadType).then((e=>{const{code:o,data:l}=e||{};"10000"===o&&l.url&&(n.modelValue.push({url:l.url,category:t.category,objectType:t.objectType||r}),n.ossKeyList.push(l.ossKey),a("onUploaded",l))}))},d=(e,a)=>{const{index:t}=a;n.modelValue.splice(t,1),n.ossKeyList.splice(t,1)};return g((()=>n.ossKeyList),(e=>{a("update:ossKeyList",e)}),{deep:!0,immediate:!0}),g((()=>t.modelValue),(e=>{console.log("1111111cest"),o(e)?n.modelValue=e:n.modelValue=[]}),{deep:!0,immediate:!0}),(a,t)=>{const o=D;return u(),c("div",Ra,[E(o,{"model-value":T(n).modelValue,"after-read":i,"max-count":e.maxCount,"before-delete":d,disabled:e.isView},v({default:A((()=>[O(a.$slots,"default",{},(()=>[S("div",Pa,[E(B,{name:"image-upload",class:"icon"})])]),!0)])),_:2},[I(T(s),(e=>({name:e,fn:A((t=>[O(a.$slots,e,V(_(t||{})),void 0,!0)]))})))]),1032,["model-value","max-count","disabled"])])}}}),[["__scopeId","data-v-bad4730a"]]);const Ma={class:"sub-label"},ka={class:"com-image-upload"},Da={class:"upload-item"};var Ba=i(d({__name:"ProUploadV2",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},subLabel:{type:String,default:""},uploadType:{type:String,default:x.OTHER},category:{type:Number,default:L.OTHER},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","onUploaded"],setup(e,{emit:a}){const t=e,{filedAttrs:o,filedSlots:l,attrs:r,slots:s}=M(Ia()),{formState:n,objectType:i,objectId:d}=y(Ge)||{},c=N((()=>Object.keys(s).filter((e=>"default"!==e)))),p=b({modelValue:[]}),f=N((()=>(p.modelValue||[]).map((({uri:e})=>({url:e})))));R((()=>p.modelValue));const C=e=>{k(e.file,t.uploadType).then((e=>{const{code:o,data:l}=e||{};"10000"===o&&l.url&&(p.modelValue.push({objectId:d,uri:l.url,category:t.category,objectType:t.objectType||i}),a("onUploaded",l))}))},$=(e,a)=>{const{index:t}=a;p.modelValue.splice(t,1)};return g((()=>p.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),g((()=>t.modelValue),(e=>{Array.isArray(p.modelValue)&&(p.modelValue=e)}),{deep:!0,immediate:!0}),(a,t)=>{const l=D,r=wa;return u(),h(r,{class:P({"com-van-upload-wrap":!0,"com-van-upload-wrap-view":e.isView}),"model-value":T(p).modelValue},v({input:A((()=>[S("div",ka,[E(l,{"model-value":T(f),"after-read":C,"max-count":e.maxCount,"before-delete":$,disabled:e.isView},v({default:A((()=>[O(a.$slots,"default",{},(()=>[S("div",Da,[E(B,{name:"image-upload",class:"icon"})])]),!0)])),_:2},[I(T(c),(e=>({name:e,fn:A((t=>[O(a.$slots,e,V(_(t||{})),void 0,!0)]))})))]),1032,["model-value","max-count","disabled"])])])),_:2},[e.subLabel?{name:"label",fn:A((()=>[j(m(T(o).label),1),S("span",Ma,m(e.subLabel),1)])),key:"0"}:void 0]),1032,["class","model-value"])}}}),[["__scopeId","data-v-64d27f69"]]);export{Le as B,je as P,qe as R,Ge as V,Ta as _,la as a,Aa as b,ta as c,ra as d,wa as e,ha as f,Ca as g,sa as h,Je as i,pa as j,xa as k,Ba as l,fa as m,Na as r,K as s,ca as t,Ia as u,oa as v};

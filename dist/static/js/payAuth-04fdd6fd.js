import{_ as a,d as e,i as l,h as s,j as d,k as n,ah as o,l as t,o as r,c,a as u,b as i,e as m,u as v,p,w as h,f as y,v as f,cM as b,aX as k,y as w,cN as V,T as g,cB as I,bs as N,cl as q,cm as x,aI as B,b1 as C,b2 as T,cO as _,cP as U}from"./index-1a2f17f4.js";import{g as j}from"./trial-a735adfa.js";const z={class:"page-pay-auth-wrap"},A={class:"header"},O={class:"content"},P={class:"bank-card"},R={class:"card-content"},W={class:"main"},E={class:"bank-name"},K={class:"bank-no"},L={class:"bank-card-type"},M=(a=>(C("data-v-ac855410"),a=a(),T(),a))((()=>u("p",{class:"desc"},"实时单笔限额5W 实时单日限额5W",-1))),X={class:"footer-button"},D=e({name:"payAuth"});var F=a(e({...D,setup(a){const e=l(),C=s(),{orderNo:T,tenantId:D}=e.query,F=d(),G=d(),H=d({}),J=d(!1),Q=n((()=>G.value.holder.certType===o.CERT?"身份证号":"证件号")),S=(a,l)=>{b(G.value).then((({code:a,data:s})=>{"10000"===a?null==l||l():k.confirm({confirmButtonText:"银行卡修改",message:"当前暂不支持该银行，建议更换银行卡"}).then((()=>{C.push({path:w.updateBankInfo,query:e.query})}))}))},Y=async(a,e)=>{const{code:l}=await V(G.value);return"10000"===l&&(g("短信验证成功"),null==e||e(),!0)},Z=()=>{J.value=!0,F.value.validate().then((a=>{C.back(),J.value=!1})).catch((a=>{J.value=!1,console.log("e",a)}))},$=d(),aa=async()=>{await j({orderNo:T,tenantId:D}).then((({code:a,data:e})=>{"10000"===a&&(G.value=e,H.value=e.tenantOrderPayInfoList.find((a=>1===a.payInfoType)),(async a=>{var e;const l=await _(U("BANK"))||[];$.value=null==(e=l.find((e=>e.code===a)))?void 0:e.name})(H.value.payBank))}))};t((()=>{aa()}));const ea=d();return t((()=>{setTimeout((async()=>{ea.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(a,e)=>{const l=I,s=N,d=q,n=x,o=B;return r(),c("div",z,[u("div",A,[i(l,{type:"warning",content:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。"})]),u("div",O,[u("div",P,[u("div",R,[u("div",W,[u("span",E,m(v($)),1),u("span",K,m(v(H).bankCardNo),1)]),u("p",L,m(v(H).bankCardType||"储蓄卡"),1),M])]),v(G)?(r(),p(n,{key:0,ref_key:"formRef",ref:F,model:v(G).holder},{default:h((()=>[i(s,{modelValue:v(G).holder.name,"onUpdate:modelValue":e[0]||(e[0]=a=>v(G).holder.name=a),label:"姓名",name:"name",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),i(s,{modelValue:v(G).holder.certNo,"onUpdate:modelValue":e[1]||(e[1]=a=>v(G).holder.certNo=a),label:v(Q),name:"certNo",maxlength:"18","is-view":"",required:""},null,8,["modelValue","label"]),i(s,{modelValue:v(G).holder.mobile,"onUpdate:modelValue":e[2]||(e[2]=a=>v(G).holder.mobile=a),label:"银行预留手机",name:"mobile",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),i(d,{modelValue:v(G).holder.verifyCode,"onUpdate:modelValue":e[3]||(e[3]=a=>v(G).holder.verifyCode=a),label:"验证码",maxlength:"6",name:"verifyCode","related-name":"mobile","send-s-m-s-code":S,"check-s-m-s-code":Y,required:""},null,8,["modelValue"])])),_:1},8,["model"])):y("",!0)]),u("div",X,[i(o,{type:"primary",disabled:v(J),onClick:Z},{default:h((()=>[f("提交")])),_:1},8,["disabled"])])])}}}),[["__scopeId","data-v-ac855410"]]);export{F as default};

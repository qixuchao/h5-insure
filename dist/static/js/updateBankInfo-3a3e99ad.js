import{_ as e,d as a,i as t,h as s,j as o,az as n,l as r,o as d,c as i,u as l,p as u,q as c,f as p,a as m,b as f,w as v,a8 as y,ax as I,aG as h,a9 as g,cX as _,ay as b,bA as j,aj as P,cx as w,cy as x,cz as C}from"./index-06dd3669.js";import{_ as N}from"./PolicyInfo-d5905ef6.js";import{u as k}from"./useOrder-c00b579c.js";import{p as A}from"./utils-e67273ac.js";import{g as B,m as O}from"./trial-56d36b55.js";import{n as $}from"./nextStep-0a67484d.js";import"./utils-1863d62d.js";import"./infoCollection-44187492.js";import"./trial-6cebe3a7.js";import"./core-87f1e03b.js";const E={class:"bank-info-wrap"},G={class:"footer-button"},L=a({name:"updateBankInfo"});var T=e(a({...L,setup(e){const a=t(),L=s(),{orderNo:T,isShare:U,tenantId:z,nextPageCode:D}=a.query,S=k(),q=o({schema:[],config:[],formData:[]}),V=o(!!U),F=o(),M=o(),R=()=>{L.back()},J=()=>{F.value&&F.value.validate(!1).then((e=>{e&&(S.value.tenantOrderPayInfoList=M,U?(S.value.extInfo.buttonCode=I.UPDATE_BANK_INFO_HOLDER,$(S.value,((e,t)=>{t===h.JUMP_PAGE&&g(e.nextPageCode,a.query)}),a)):(S.value.extInfo.buttonCode=I.UPDATE_BANK_INFO_AGENT,$(S.value,((e,a)=>{a===h.JUMP_PAGE&&((e,a)=>{const{holder:t,insured:s}=S.value;let o={name:t.name,gender:`${w[t.gender]}士`};"insured"===e&&(o={name:null==s?void 0:s[0].name,gender:`${w[null==s?void 0:s[0].gender]}士`}),x({shareType:0,title:`${C[a].title}`,desc:C[a].desc.replace("{name}",`${o.name}${o.gender},`),url:`${window.location.href}&objectType=${e}&isShare=1&nextPageCode=updateBankInfo`.replace("/updateBankInfo","/phoneVerify"),imageUrl:"https://aquarius-v100-test.oss-cn-hangzhou.aliyuncs.com/MyPicture/asdad.png"})})("holder","pay")}),a)))}))};n((()=>{(async()=>{let e={};_({orderNo:T,tenantId:z}).then((({code:e,data:a})=>{"10000"===e&&(M.value=a.tenantOrderPayInfoList)}));const{code:a,data:t}=await B({orderNo:T,tenantId:z});"10000"===a&&(Object.assign(S.value,t,{extInfo:{...t.extInfo,buttonCode:I.SIGN,pageCode:b.SIGN}}),e=A(t.insuredList[0].productList)),O(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:t}=e,{payInfo:s}=j(t);q.value={...q.value,...s}}}))})()}));const K=o();return r((()=>{setTimeout((async()=>{K.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const t=P;return d(),i("div",E,[l(q).schema.length&&l(M)?(d(),u(N,{key:0,ref_key:"payInfoRef",ref:F,modelValue:l(M),"onUpdate:modelValue":a[0]||(a[0]=e=>c(M)?M.value=e:null),schema:l(q).schema,"is-view":l(V),"user-data":l(S)},null,8,["modelValue","schema","is-view","user-data"])):p("",!0),m("div",G,[f(t,{type:"primary",plain:"",onClick:R},{default:v((()=>[y("取消")])),_:1}),f(t,{type:"primary",onClick:J},{default:v((()=>[y("确认")])),_:1})])])}}}),[["__scopeId","data-v-4e10f640"]]);export{T as default};

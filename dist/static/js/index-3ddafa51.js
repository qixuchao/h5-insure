import{_ as a,d as e,j as l,k as n,E as t,ag as s,dz as i,o,c as u,a as d,b as r,w as v,e as p,u as c,F as m,s as f,n as C,f as y,p as g,aL as k,q as h,aR as S,aS as _}from"./index-40f79e3d.js";import{C as j}from"./index-0cd565cc.js";import{o as w}from"./utils-42760887.js";import{C as x}from"./index-c6709dd2.js";import"./infoCollection-0e7a5302.js";import"./trial-d1e89390.js";const L={class:"guarantee-list"},U={key:0,class:"plan-list"},A=["onClick"],V={class:"guarantee-detail"},$={class:"content"},E={key:1,class:"feerate-view"},b=e({name:"guarantee"});var q=a(e({...b,props:{dataSource:{default:()=>({})},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{default:5},planList:{default:()=>[]}},emits:["updateActivePlan"],setup(a,{emit:e}){var b,q;const F=a;l("");const R=l((null==(q=null==(b=F.planList)?void 0:b[0])?void 0:q.planCode)||void 0),B=l(),I=l([]);l([]);const N=l(),P=n((()=>!!F.planList.length)),T=l(null),z=l([]),G=n((()=>{var a,e;return(null==(a=z.value)?void 0:a.length)===(null==(e=I.value)?void 0:e.length)})),O=()=>{var a,e;null==(e=null==(a=T.value)?void 0:a.toggleAll)||e.call(a,!G.value)};t([()=>F.dataSource,()=>R.value],(()=>{var a,e;I.value=((null==(e=((null==(a=F.dataSource)?void 0:a.GUARANTEE)||[]).find((a=>a.planCode===R.value)))?void 0:e.data)||[]).filter((a=>a.isShowOn===`${s.YES}`))}),{immediate:!0,deep:!0});const Y=n((()=>{var a;return(null==(a=F.dataSource)?void 0:a.rateUri)||""})),D=n((()=>!!(N.value&&N.value.paymentFrequencyValue&&N.value.premiumUnit&&Y))),H=()=>{w({fileType:"pdf",fileUri:Y.value})};return(a,l)=>{var n,t;const s=_,w=j,b=x,q=i("dompurify-html");return o(),u(m,null,[d("div",L,[r(s,{title:"保障详情","show-line":!1,"show-divider":!1},{extra:v((()=>[d("span",{onClick:O},p(c(G)?"收起全部":"展开全部"),1)])),_:1}),c(P)?(o(),u("div",U,[(o(!0),u(m,null,f(a.planList,((a,l)=>(o(),u("div",{key:`${a.planCode}_${l}`,class:C("plan-list-item "+(a.planCode===c(R)?"plan-list-item-active":"")),onClick:l=>{return n=a.planCode,R.value=n,B.value=F.planList.findIndex((a=>a.planCode===n)),void e("updateActivePlan",n);var n}},[d("span",null,p(a.planName),1)],10,A)))),128))])):y("",!0),d("div",V,[r(b,{ref_key:"collapseRef",ref:T,modelValue:c(z),"onUpdate:modelValue":l[0]||(l[0]=a=>h(z)?z.value=a:null),border:!1},{default:v((()=>[(o(!0),u(m,null,f(c(I),((a,e)=>(o(),g(w,{key:e,title:a.title,value:a.desc,name:e,border:!1,class:"guarantee-item"},{default:v((()=>[k(d("div",$,null,512),[[q,a.tips]])])),_:2},1032,["title","value","name"])))),128))])),_:1},8,["modelValue"])]),c(D)?(o(),u("div",E,[d("span",null,p(`${(null==(n=c(N))?void 0:n.paymentFrequencyValue)||""}${(null==(t=c(N))?void 0:t.premiumUnit)||""}`),1),c(Y)?(o(),u("span",{key:0,onClick:H},"查看保费")):y("",!0)])):y("",!0)]),r(S)],64)}}}),[["__scopeId","data-v-6fa4fef0"]]);export{q as default};

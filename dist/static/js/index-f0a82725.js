import{_ as e,d as a,aD as s,z as l,b as o,c as t,h as r,j as n,f as i,g as u,t as d,F as c,i as p,aC as v,r as h,x as m,aE as f,y as g,aF as y,B as k,aG as I,k as C,w as L,aH as b,X as P,n as _,J as w,K as x,L as V,aa as S,e as j,l as U,G as F,u as q,a as O,aI as $}from"./index-d7f8e361.js";import{Z as D}from"./index-1ab13101.js";import{_ as B}from"./empty-5ce2b62b.js";import{u as N,P as T}from"./index-cc7a1b4c.js";import{P as z}from"./index-183d07e7.js";import{q as A}from"./proposalList-c8c896fe.js";import"./pdfh5-008ca364.js";import"./index-871ec8b4.js";import"./trial-7025d71d.js";import"./useDicData-32aab44f.js";import"./trial-ea1befa0.js";const G={class:"com-product-item"},E={class:"content-wrap"},H={class:"product-image"},J={class:"insure-name"},K={class:"product-info"},R={class:"title"},W={class:"description"},X={class:"tags"};var Z=e(a({__name:"productItem",props:{productInfo:{default:()=>({})}},setup(e){const a=e,{productInfo:h}=s(a),m=l({checked:!1});return s(m),(e,a)=>{const s=o("van-image");return t(),r("div",G,[n("div",E,[n("div",H,[i(s,{src:u(h).showConfig.fileUrl},null,8,["src"]),n("p",J,d((u(h).insurerName||"").substring(0,6)),1)]),n("div",K,[n("p",R,d(u(h).showConfig.title),1),n("p",W,d(u(h).showConfig.text),1),n("p",X,[(t(!0),r(c,null,p(u(h).showConfig.tags,((e,a)=>(t(),r("span",{key:a,class:"tag"},d(e),1)))),128))])]),v(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-0e747840"]]);const M=["xlink:href"],Q=a({__name:"index",props:{name:{type:String,required:!0},color:{type:String,default:""}},setup(e){const a=e,s=m((()=>`#icon-${a.name}`)),l=m((()=>a.name?`svg-icon icon-${a.name}`:"svg-icon"));return(a,o)=>(t(),r("svg",f({class:u(l)},a.$attrs,{style:{color:e.color}}),[n("use",{"xlink:href":u(s)},null,8,M)],16))}});const Y=e=>(x("data-v-397146ec"),e=e(),V(),e),ee={class:"com-tab-filter"},ae={class:"article-mid"},se={class:"article-tag"},le=["onClick"],oe={class:"trianele-out"},te=Y((()=>n("span",null,null,-1))),re={class:"popup-inner"},ne=Y((()=>n("div",{class:"popup-title"},"保险公司",-1))),ie={class:"footer-button"};var ue=e(a({__name:"insureFilter",props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(e,{emit:a}){const{isPopShow:v,openPop:m,closePop:f}=function(e=!1){const a=h(e);return{isPopShow:a,openPop:e=>{e instanceof Function&&e(),a.value=!0},closePop:e=>{a.value=!1,e instanceof Function&&e()}}}(!1),x=l({insureList:[],checkedInsure:[]}),{insureList:V,checkedInsure:S}=s(x),j=h(""),U=()=>{S.value=[]},F=()=>{a("onSelectInsure",{selectInsureCode:S.value,selectCategory:j.value}),f()};return g((()=>{y().then((e=>{const{code:a,data:s}=e;"10000"===a&&(V.value=null==s?void 0:s.map((e=>({label:e.abbreviation,value:e.insurerCode}))))}))})),(s,l)=>{const h=o("van-button"),g=o("van-popup");return t(),r("div",ee,[n("div",ae,[n("div",se,[(t(!0),r(c,null,p(u(I),((e,s)=>(t(),r("div",{key:s,class:k(["tag-item",{checked:u(j)==e.value}]),onClick:s=>((e,s)=>{j.value=s,a("onSelectInsure",{selectInsureCode:S.value,selectCategory:j.value})})(null==e||e.value,e.value)},[n("div",{class:k(["tag-out",{checked:u(j)==e.value}])},[n("div",{class:k(["tag-item-text",{checked:u(j)==e.value}])},d(e.label),3)],2),n("div",oe,[n("div",{class:k({triangle:u(j)==e.value})},null,2)])],10,le)))),128))]),e.filter?(t(),r("div",{key:0,class:"filter",onClick:l[0]||(l[0]=(...e)=>u(m)&&u(m)(...e))},[te,n("div",{class:k(["text",{"has-select-condition":u(S).length>0}])},"筛选",2),i(Q,{name:"filter"})])):C("",!0),i(g,{show:u(v),position:"right","close-on-click-overlay":"",style:w(e.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:u(f)},{default:L((()=>[n("div",re,[ne,i(b,{modelValue:u(S),"onUpdate:modelValue":l[1]||(l[1]=e=>P(S)?S.value=e:null),options:u(V)},null,8,["modelValue","options"])]),n("div",ie,[i(h,{plain:"",type:"primary",onClick:U},{default:L((()=>[_("重置")])),_:1}),i(h,{type:"primary",onClick:F},{default:L((()=>[_("确定")])),_:1})])])),_:1},8,["show","style","onClickOverlay"])])])}}}),[["__scopeId","data-v-397146ec"]]);const de={class:"com-trial-product-wrapper"},ce={class:"container"},pe=(e=>(x("data-v-1cf5306a"),e=e(),V(),e))((()=>n("span",{class:"title"}," 已选产品 ",-1))),ve={class:"popup-body"},he={class:"cell-title"},me={class:"title"};var fe=e(a({__name:"index",props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(e,{emit:a}){const s=e,l=h([]),v=h([]),m=h({isShow:s.isShow}),f=()=>{a("close")},g=()=>{v.value=[],a("checked",[])},y=e=>{var s,o,t;null==(t=null==(o=null==(s=null==l?void 0:l.value)?void 0:s[e])?void 0:o.toggle)||t.call(o),a("checked",v.value)};return S((()=>s.isShow),(e=>{m.value.isShow=e})),S((()=>s.modalValue),((e=[])=>{v.value=e}),{deep:!0,immediate:!0}),(a,s)=>{const h=o("van-checkbox"),k=o("VanCell"),I=o("van-cell-group"),C=o("van-checkbox-group"),b=o("VanPopup");return t(),r("div",de,[i(b,{show:u(m).isShow,"onUpdate:show":s[1]||(s[1]=e=>u(m).isShow=e),position:"bottom",onClose:f},{default:L((()=>[n("div",ce,[n("div",{class:"popup-header"},[n("span",{class:"clear-all",onClick:g}," 清空选项 "),pe,n("span",{class:"close",onClick:f})]),n("div",ve,[i(C,{modelValue:u(v),"onUpdate:modelValue":s[0]||(s[0]=e=>P(v)?v.value=e:null)},{default:L((()=>[i(I,{inset:""},{default:L((()=>[(t(!0),r(c,null,p(e.proposalList,(e=>(t(),j(k,{key:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:e.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:a=>y(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":L((()=>[i(h,{ref_for:!0,ref:a=>u(l)[e.proposalInsuredList[0].proposalInsuredProductList[0].productId]=a,shape:"square",name:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:U((a=>y(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)),["stop"])},null,8,["name","onClick"])])),title:L((()=>[n("div",he,[n("div",me,d(e.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-1cf5306a"]]);const ge={class:"search-wrap"},ye={class:"page-proposal-list"},ke={class:"check-button"},Ie={key:1,class:"van-sticky"},Ce={class:"add-plan"},Le={class:"has-select-product"},be=(e=>(x("data-v-a09b1840"),e=e(),V(),e))((()=>n("span",{class:"icon"},null,-1)));var Pe=e(a({__name:"index",props:{isCreateProposal:{type:Boolean,default:!0}},setup(e){const a=l({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0}),{searchValue:v,tagLists:f,isOpen:g,loading:y,finished:k,refreshing:I,productList:b,selectProduct:w,insurerCodeList:x,showCategory:V,productTotal:S,showFooter:U}=s(a),[G,E]=F(),[H,J]=F(),K=N(),R=q(),W=O(),{isCreateProposal:X}=W.query,M=h(X?"repeatAdd":"add"),Q=()=>{A({title:v.value,insurerCodeList:x.value,showCategory:V.value,excludeProductIdList:K.$state.excludeProduct||[],pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:l}=e;"10000"===a&&(b.value=null==s?void 0:s.datas,S.value=l)}))},Y=e=>{Q()},ee=e=>{const{selectInsureCode:a,selectCategory:s}=e;x.value=a,V.value=s,Q()},ae=()=>{I.value&&(b.value=[],I.value=!1),Q(),y.value=!1,S.value===b.value.length&&(k.value=!0)},se=()=>{R.push({path:"historyProposalList"})},le=m((()=>{var e;const{birthday:a,gender:s}=(null==(e=K.$state.proposalInfo.proposalInsuredList)?void 0:e[0])||{};return{birthday:a,gender:s}})),oe=m((()=>b.value.length>0)),te=e=>{a.selectProduct=e},re=()=>{const e=a.proposalList.filter((e=>a.selectProduct.includes(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)));K.setTrialData(e),R.push({path:"/proposal/createProposal"})},ne=()=>{E(!1)},ie=e=>{if(X)return a.proposalList.push(e),U.value=!0,a.selectProduct.push(e.proposalInsuredList[0].proposalInsuredProductList[0].productId),void E(!1);K.setTrialData([e]),E(!1),R.push({path:"/proposal/createProposal",query:W.query})},de=()=>{k.value=!0,y.value=!0,ae()};return(e,s)=>{const l=o("van-search"),h=o("van-checkbox"),m=o("van-checkbox-group"),f=o("van-list"),x=o("van-pull-refresh"),V=o("van-button"),S=o("ProPageWrap");return t(),r(c,null,[i(S,{class:"page-proposal"},{default:L((()=>[n("div",ge,[i(l,{modelValue:u(v),"onUpdate:modelValue":s[0]||(s[0]=e=>P(v)?v.value=e:null),placeholder:"搜索计划书",shape:"round",class:"search",onSearch:Y},null,8,["modelValue"]),u(oe)?(t(),j(ue,{key:0,filter:u(g),"onUpdate:filter":s[1]||(s[1]=e=>P(g)?g.value=e:null),"filter-class":"filter-area",onOnSelectInsure:ee},null,8,["filter"])):C("",!0)]),n("div",ye,[i(x,{modelValue:u(I),"onUpdate:modelValue":s[4]||(s[4]=e=>P(I)?I.value=e:null),onRefresh:de},{default:L((()=>[i(f,{loading:u(y),"onUpdate:loading":s[3]||(s[3]=e=>P(y)?y.value=e:null),finished:u(k),"finished-text":u(oe)?"- 已经到底了哦 -":"",onLoad:ae},{default:L((()=>[(t(!0),r(c,null,p(u(b),(e=>(t(),j(Z,{key:e.id,"product-info":e,onClick:s=>{return l=e,U.value=!1,a.productId=l.productId,void E(!0);var l}},$({_:2},[u(X)?{name:"checkedProduct",fn:L((()=>[n("div",ke,[i(m,{modelValue:u(w),"onUpdate:modelValue":s[2]||(s[2]=e=>P(w)?w.value=e:null)},{default:L((()=>[i(h,{name:e.productId,shape:"square"},null,8,["name"])])),_:2},1032,["modelValue"])])])),key:"0"}:void 0]),1032,["product-info","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])]),u(oe)?C("",!0):(t(),j(D,{key:0,"empty-img":u(B),title:"没有找到相关内容~","empty-class":"empty-select"},null,8,["empty-img"])),u(X)&&u(U)?(t(),r("div",Ie,[n("div",Ce,[n("p",{class:"has-select",onClick:s[5]||(s[5]=e=>u(J)(!u(H)))},[_(" 已选"),n("span",Le,d(u(w).length),1),_("款产品 "),be]),i(V,{type:"primary",disabled:!u(w).length,onClick:re},{default:L((()=>[_("添加计划书")])),_:1},8,["disabled"])])])):C("",!0),i(fe,{modelValue:u(w),"onUpdate:modelValue":s[6]||(s[6]=e=>P(w)?w.value=e:null),"proposal-list":u(a).proposalList,"is-show":u(H),onClose:s[7]||(s[7]=e=>u(J)(!1)),onChecked:te},null,8,["modelValue","proposal-list","is-show"]),u(G)?(t(),j(T,{key:2,"is-show":u(G),type:u(M),insured:u(le),"product-id":u(a).productId,onClose:ne,onFinished:ie},null,8,["is-show","type","insured","product-id"])):C("",!0)])),_:1}),u(X)?C("",!0):(t(),j(z,{key:0,"button-image":u("/static/assets/lishijihuashu.b3e3552e.png"),onClick:se},null,8,["button-image"]))],64)}}}),[["__scopeId","data-v-a09b1840"]]);export{Pe as default};

!function(){var e=document.createElement("style");e.innerHTML=".com-navigator .btn[data-v-4959b745]{position:fixed;width:.8rem;height:2.4rem;right:0;top:50%;margin-top:-1.2rem}.com-navigator .navigation-popup .list .item[data-v-4959b745]{line-height:1.28rem;padding-left:.42667rem;font-size:.37333rem;color:#393d46}.com-navigator .navigation-popup .list .item.active[data-v-4959b745]{font-weight:500;color:#006aff}.page-verify .card .people[data-v-ab7a6660]{flex:1;margin-left:.53333rem;display:flex;align-items:center}.page-verify .card .people .name[data-v-ab7a6660]{font-size:.4rem;font-weight:600;color:#393d46}.page-verify .card .people .status[data-v-ab7a6660]{margin-left:.26667rem;text-align:center;width:1.2rem;height:.53333rem;line-height:.53333rem;border-radius:.05333rem;border:1px solid #99a9c0;font-size:.32rem;color:#99a9c0}.page-verify .card .people .status.verified[data-v-ab7a6660]{color:#0d6efe;border-color:#0d6efe}.page-verify .card .verify-item[data-v-ab7a6660]{display:flex;align-items:center;height:1.41333rem;line-height:1.41333rem;font-size:.4rem;color:#393d46}.page-verify .card .verify-item .no[data-v-ab7a6660]{margin-left:.64rem}.page-verify .card .verify-item .action[data-v-ab7a6660]{flex:1;display:flex;align-items:center;justify-content:flex-end;color:#99a9c0}.page-verify .card .verify-item .action .icon[data-v-ab7a6660]{margin-left:.13333rem;color:#99a9c0;font-size:.32rem}.page-verify .sign-card .resign[data-v-ab7a6660]{font-size:.37333rem;color:#0d6efe}.page-verify .sign-card .sign-body[data-v-ab7a6660]{padding-bottom:.4rem}.page-verify .sign-card .sign-body .date[data-v-ab7a6660]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-verify .sign-card .sign-body .file[data-v-ab7a6660]{margin-top:.21333rem;font-size:.37333rem;color:#393d46;line-height:.53333rem}.page-verify .sign-card .sign-body .file .file-name[data-v-ab7a6660]{color:#0d6efe}.page-verify .sign-card .sign-body .file .file-name .dun-hao[data-v-ab7a6660]{color:#393d46}.page-verify .footer[data-v-ab7a6660]{position:static;justify-content:space-between}.page-verify .footer .refresh-btn[data-v-ab7a6660]{width:.66667rem;border:none;color:#0d6efe;font-size:.26667rem;line-height:.37333rem;text-align:center}.page-verify .footer .refresh-btn .text[data-v-ab7a6660]{margin-top:.13333rem}.page-verify .footer .submit-btn[data-v-ab7a6660]{flex:1}\n",document.head.appendChild(e),System.register(["./vendor-legacy-fc9bbab5.js","./index-legacy-3943ca39.js","./index-legacy-a0a9bfb4.js","./verify-legacy-6a120859.js"],(function(e){"use strict";var a,t,i,r,n,o,l,d,s,c,v,u,f,g,m,p,y,h,b,C,I,x,N,w,O,k,_,D,j,E,L,H,U,z,S,P,T,R,Q,q,A,F;return{setters:[function(e){a=e.g,t=e.Q,i=e.a5,r=e.E,n=e.h,o=e.y,l=e.r,d=e.j,s=e.n,c=e.z,v=e.A,u=e.p,f=e.m,g=e.F,m=e.G,p=e.L,y=e.J,h=e.a6,b=e.aj,C=e.d,I=e.k,x=e.t,N=e.a1,w=e.a2,O=e.C,k=e.T,_=e.D},function(e){D=e.b,j=e.n,E=e.a},function(e){L=e._,H=e.P,U=e.S,z=e.E,S=e.p,P=e.l,T=e.F,R=e.N},function(e){Q=e.g,q=e.f,A=e.s,F=e.a}],execute:function(){const M={class:"com-navigator"},Y=["src"],$={class:"list"},B=a({setup(e){const a=t(),{saleUserId:b="D1234567-1",tenantId:C="9991000007",templateId:I=1,productCode:x="CQ75CQ76",insurerCode:N="ancheng",productCategory:w="1"}=a.query,[O,k]=i(!1),_=r([]),j=()=>{k(!0)};n((()=>{D({productCategory:w,venderCode:N,navbarFlag:1}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(_.value=t.templatePageList)}))}));const E=o((()=>Object.keys(H).find((e=>H[e]===a.path.replace("/","")))));return(e,a)=>{const t=l("van-popup");return d(),s("div",M,[c("img",{class:"btn",src:v("/static/assets/sidenav.5031dada.png"),onClick:j},null,8,Y),u(t,{show:v(O),"onUpdate:show":a[0]||(a[0]=e=>h(O)?O.value=e:null),position:"right",style:{width:"50%",height:"100%"},"safe-area-inset-top":"",class:"navigation-popup"},{default:f((()=>[c("div",$,[(d(!0),s(g,null,m(_.value,((e,a)=>(d(),s("div",{key:a,class:p(["item",{active:e.pageCode===v(E)}])},y(e.pageName),3)))),128))])])),_:1},8,["show"])])}}});var G=L(B,[["__scopeId","data-v-4959b745"]]);const J=e=>(N("data-v-ab7a6660"),e=e(),w(),e),W={class:"page-verify"},K={class:"people"},V={class:"name"},X={class:"verify-item"},Z=J((()=>c("div",{class:"label"},"身份证号码",-1))),ee={class:"no"},ae=O(" 去认证 "),te={class:"sign-body"},ie={class:"date"},re={class:"file"},ne=O(" 签名将被用于以下文件： "),oe={class:"people"},le={class:"name"},de={class:"verify-item"},se=J((()=>c("div",{class:"label"},"身份证号码",-1))),ce={class:"no"},ve=["onClick"],ue=O(" 去认证 "),fe=["onClick"],ge={class:"sign-body"},me={class:"date"},pe={class:"file"},ye=O(" 签名将被用于以下文件： "),he={class:"footer-button footer"},be=O("提交"),Ce=a({setup(e){const a=1,i=t(),o=b(),{saleUserId:h="D1234567-1",tenantId:N="9991000007",templateId:w=1,productCode:O="CQ75CQ76",insurerCode:D="ancheng"}=i.query;let{orderNo:L}=i.query;"object"==typeof L&&(L=(L||[])[0]);const M=new U({source:"localStorage"}),Y=r([]),$=r(),B=r(),J=[],Ce=C().format("YYYY-MM-DD"),Ie=()=>{var e;null===(e=B.value)||void 0===e||e.clear()},xe=(e,a)=>{F({callbackUrl:window.location.href,certiNo:e,faceAuthMode:"TENCENT",userName:a,tenantId:9991000007}).then((t=>{const{code:i,data:r}=t;if("10000"===i){const{originalUrl:t,serialNo:i}=r;window.location.href=t,M.set("verifyData",{serialNo:i,certNo:e,name:a})}}))},Ne=e=>{var a,t,i,r;-1===e?xe(null===(a=$.value.tenantOrderHolder)||void 0===a?void 0:a.certNo,null===(t=$.value.tenantOrderHolder)||void 0===t?void 0:t.name):xe(null===(i=$.value.tenantOrderInsuredList[e])||void 0===i?void 0:i.certNo,null===(r=$.value.tenantOrderInsuredList[e])||void 0===r?void 0:r.name)},we=e=>{e&&J.every((a=>a!==e))&&J.push(e)},Oe=()=>{var e,t,i,r;(null===(e=B.value)||void 0===e?void 0:e.isEmpty())?k.fail("请投保人签名"):J.some((e=>e.isEmpty()))?k.fail("请被保人签名"):(null===(t=$.value.tenantOrderHolder)||void 0===t||null===(i=t.extInfo)||void 0===i?void 0:i.isCert)===a?null!==(r=$.value.tenantOrderInsuredList)&&void 0!==r&&r.some((e=>{var t;return(null===(t=e.extInfo)||void 0===t?void 0:t.isCert)!==a}))?k.fail("请被保人去认证"):_.confirm({title:"提示",message:"请确认信息填写无误后，再进行支付"}).then((()=>{var e,a;const t=null===(e=B.value)||void 0===e?void 0:e.save();Promise.all([A("HOLDER",t,null===(a=$.value)||void 0===a?void 0:a.id,`${N}`),...J.map((e=>{var a;return A("INSURED",e.save(),null===(a=$.value)||void 0===a?void 0:a.id,`${N}`)}))]).then((()=>{j({...$.value,pageCode:"sign",operateOption:{withSignInfo:!0},extInfo:{pageCode:"sign",templateId:w},venderCode:"ancheng"}).then((e=>{const{code:a,data:t}=e;"10000"===a&&t.success&&o.push({path:H[t.pageAction.data.nextPageCode],query:{orderNo:L,saleUserId:h,tenantId:N}})}))}))})):k.fail("请投保人去认证")},ke=()=>{E({orderNo:L,saleUserId:h,tenantId:N}).then((e=>{const{code:a,data:t}=e;"10000"===a&&($.value=t,setTimeout((()=>{let e=0;t.tenantOrderAttachmentList.forEach((a=>{21===a.category&&(2===a.objectType?(B.value.clear(),B.value.setDataURL(a.fileBase64)):1===a.objectType&&(J[e].clear(),J[e].setDataURL(a.fileBase64),e+=1))}))})))}))};return n((()=>{ke(),Q({orderNo:L,productCode:O,tenantId:N}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(Y.value=t||[])}));const e=M.get("verifyData");if(e){const{serialNo:a,certNo:t,name:i}=e;q({certiNo:t,orderNo:L,serialNo:a,tenantId:N,userName:i}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(M.remove("verifyData"),ke())}))}})),(e,t)=>{const i=l("ProPDFviewer"),r=l("van-button"),n=l("ProPageWrap");return d(),I(n,null,{default:f((()=>{var e;return[c("div",W,[u(z,{type:"warning",title:"尊敬的客户，本次投保需要进行身份认证",content:"本产品投保需要对投保人、被保人进行实名认证，您购买本产品的累计总保费已超过20万，按监管要求，需要提供投保人、被保人、指定受益人证件影像，本产品非本人投保且带身故责任、需对投保人、被保人（成人）的投保意愿进行签字确认。"}),u(P,{title:"投保人",class:"card"},{extra:f((()=>{var e,t,i,r,n,o,l,d;return[c("div",K,[c("div",V,y(null===(e=$.value)||void 0===e||null===(t=e.tenantOrderHolder)||void 0===t?void 0:t.name),1),c("div",{class:p(["status",{verified:(null===(i=$.value)||void 0===i||null===(r=i.tenantOrderHolder)||void 0===r||null===(n=r.extInfo)||void 0===n?void 0:n.isCert)===a}])},y((null===(o=$.value)||void 0===o||null===(l=o.tenantOrderHolder)||void 0===l||null===(d=l.extInfo)||void 0===d?void 0:d.isCert)===a?"已认证":"待认证"),3)])]})),default:f((()=>{var e,i,r,n,o;return[c("div",X,[Z,c("div",ee,y(null===(e=$.value)||void 0===e||null===(i=e.tenantOrderHolder)||void 0===i?void 0:i.certNo),1),(null===(r=$.value)||void 0===r||null===(n=r.tenantOrderHolder)||void 0===n||null===(o=n.extInfo)||void 0===o?void 0:o.isCert)!==a?(d(),s("div",{key:0,class:"action",onClick:t[0]||(t[0]=e=>Ne(-1))},[ae,u(S,{name:"right_arrow",class:"icon"})])):x("",!0)])]})),_:1}),u(P,{title:"投保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:f((()=>[c("div",{class:"resign",onClick:Ie},"重签")])),default:f((()=>[u(T,{ref_key:"holderSign",ref:B,class:"sign"},null,512),c("div",te,[c("div",ie,"签名日期： "+y(v(Ce)),1),c("div",re,[ne,(d(!0),s(g,null,m(Y.value.filter((e=>e.noticeObject===v(R).HOLDER)),((e,a)=>(d(),I(i,{key:a,class:"file",title:`《${e.materialName}》`,url:e.materialSource},null,8,["title","url"])))),128))])])])),_:1}),(d(!0),s(g,null,m(null===(e=$.value)||void 0===e?void 0:e.tenantOrderInsuredList,((e,t)=>(d(),s("div",{key:t},[u(P,{title:"被保人",class:"card"},{extra:f((()=>{var t,i;return[c("div",oe,[c("div",le,y(e.name),1),c("div",{class:p(["status",{verified:(null===(t=e.extInfo)||void 0===t?void 0:t.isCert)===a}])},y((null===(i=e.extInfo)||void 0===i?void 0:i.isCert)===a?"已认证":"待认证"),3)])]})),default:f((()=>{var i;return[c("div",de,[se,c("div",ce,y(e.certNo),1),(null===(i=e.extInfo)||void 0===i?void 0:i.isCert)!==a?(d(),s("div",{key:0,class:"action",onClick:e=>Ne(t)},[ue,u(S,{name:"right_arrow",class:"icon"})],8,ve)):x("",!0)])]})),_:2},1024),u(P,{title:"被保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:f((()=>[c("div",{class:"resign",onClick:e=>(e=>{J[e].clear()})(t)},"重签",8,fe)])),default:f((()=>[u(T,{ref_for:!0,ref:we,class:"sign"}),c("div",ge,[c("div",me,"签名日期： "+y(v(Ce)),1),c("div",pe,[ye,(d(!0),s(g,null,m(Y.value.filter((e=>e.noticeObject===v(R).INSURED)),((e,a)=>(d(),I(i,{key:a,class:"file",title:`《${e.materialName}》`,url:e.materialSource},null,8,["title","url"])))),128))])])])),_:2},1024)])))),128)),c("div",he,[u(r,{type:"primary",class:"submit-btn",onClick:Oe},{default:f((()=>[be])),_:1})])]),u(G)]})),_:1})}}});e("default",L(Ce,[["__scopeId","data-v-ab7a6660"]]))}}}))}();

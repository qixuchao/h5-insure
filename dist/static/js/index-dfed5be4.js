import{g as G,a0 as V,C as d,L as C,x as j,M as z,d as p,m as h,n as f,j as F,y as t,G as l,H as i,F as D,r as A,k as _,z as e,I as E,E as P,J as W,h as Z,a2 as q,a3 as H,B as S}from"./vendor-e9263418.js";import{g as J,_ as O}from"./target-1dc74256.js";import{_ as w}from"./index-e4c11be9.js";import{r as R,a as U}from"./detailList-ff721244.js";import{S as K,u as Q}from"./index-b8742a0a.js";import{_ as X}from"./plugin-vue_export-helper-46f75680.js";const m=g=>(q("data-v-614aa8c1"),g=g(),H(),g),tt={class:"top"},st={class:"title"},et=["src"],at=m(()=>t("div",null,"\u4E2A\u4EBA\u76EE\u6807",-1)),ot={class:"small-title"},ct=m(()=>t("div",{class:"icon"},null,-1)),lt={class:"text"},it=m(()=>t("div",{class:"divider"},null,-1)),nt={class:"bottom"},ut={class:"title"},rt=["src"],dt=m(()=>t("div",null,"\u8BF7\u9009\u62E9\u9002\u5408\u60A8\u7684\u4E2A\u4EBA\u76EE\u6807",-1)),_t={key:0,class:"target-list"},mt=["onClick"],gt={class:"item-left"},vt={class:"target-name"},pt={class:"name"},ht={class:"tag-out"},ft=m(()=>t("div",{class:"tag-text"},"\u6211\u7684\u76EE\u6807",-1)),Et=[ft],yt={class:"target-date"},Yt={class:"item-right"},xt=S(" \u67E5\u770B "),It=["src"],Tt={class:"more-area"},kt={class:"text"},Bt=["src"],Ct={class:"footer-all-out"},Ft={class:"footer-out"},Dt=S("\u56E2\u961F\u6D3B\u52A8\u91CF\u76EE\u6807"),At=G({setup(g){const M=new K({source:"localStorage"}),{getIconUrl:c}=Q(),Y=V(),n=d(!1),y=d(!1),x=C([]),I=d([]),v=C([]),u=d(""),T=d(""),L=()=>{n.value=!n.value},$=s=>{Y.push({path:"./targetDetail",query:{tplGoalId:s.goalId,goalId:T.value||"",setting:s.setting}})},b=()=>{console.log("111"),Y.push("/teamTarget")},k=j(()=>n.value?v||[]:v.slice(0,3));return z(async()=>{const s=M.get("userInfo");(s==null?void 0:s.userType)==="I"||(s==null?void 0:s.userType)==="O"&&(s==null?void 0:s.agentLevel)<=80?y.value=!0:y.value=!1;const B=await J({effectiveTime:`${p().format("YYYY")}-01-01 00:00:00`,expriyTime:`${p().format("YYYY")}-12-31 23:59:59`}),{goalDetailList:o,goalTplList:r}=B.data.data;v.push(...r),r&&r.forEach(a=>{a.setting&&(u.value=a.name)}),o&&o.length>0&&(T.value=o[0].goalId),I.value=R(o),x.push({title:"\u76EE\u6807\u9879",dataIndex:"code"},...U(o))}),(s,B)=>{const o=A("ZaPageWrap"),r=A("van-button");return _(),h(D,null,[f(o,{"main-class":"page-person-target","footer-class":"person-target-footer"},{default:F(()=>[t("div",tt,[t("div",st,[t("img",{src:e(c)("target.piconImg"),alt:""},null,8,et),at]),l(t("div",ot,[ct,t("div",lt,E(u.value),1)],512),[[i,u.value]]),l(f(O,{columns:e(x),"data-source":I.value},null,8,["columns","data-source"]),[[i,u.value]]),l(f(w,{"empty-img":e(c)("target.emptyImg"),title:"\u60A8\u6682\u65F6\u8FD8\u672A\u8BBE\u7F6E\u4E2A\u4EBA\u76EE\u6807","empty-class":"empty-class"},null,8,["empty-img"]),[[i,!u.value]])]),it,t("div",nt,[t("div",ut,[t("img",{src:e(c)("target.ciconImg"),alt:""},null,8,rt),dt]),e(k).length>0?(_(),h("div",_t,[(_(!0),h(D,null,P(e(k),(a,N)=>(_(),h("div",{key:N,class:"target-item",onClick:wt=>$(a)},[t("div",gt,[t("div",vt,[t("div",pt,E(a.name),1),l(t("div",ht,Et,512),[[i,a.setting]])]),t("div",yt,E(`\u6709\u6548\u671F ${e(p)(a.effectiveTime).format("YYYY-MM-DD")} \u81F3
                ${e(p)(a.expriyTime).format("YYYY-MM-DD")}`),1)]),t("div",Yt,[xt,t("img",{src:e(c)("target.rightImg"),alt:""},null,8,It)])],8,mt))),128)),l(t("div",Tt,[t("div",{class:"more-out",onClick:L},[t("div",kt,E(n.value?"\u6536\u8D77":"\u66F4\u591A"),1),t("img",{src:e(c)("target.moreImg"),alt:"",class:W({showMore:n.value})},null,10,Bt)])],512),[[i,e(v).length>3]])])):(_(),Z(w,{key:1,"empty-img":e(c)("target.emptyImg"),title:"\u6682\u65E0\u6570\u636E","empty-class":"empty-class"},null,8,["empty-img"]))])]),_:1}),t("div",Ct,[l(t("div",Ft,[f(r,{round:"",type:"primary",class:"btn",onClick:b},{default:F(()=>[Dt]),_:1})],512),[[i,y.value]])])],64)}}});var Gt=X(At,[["__scopeId","data-v-614aa8c1"]]);export{Gt as default};

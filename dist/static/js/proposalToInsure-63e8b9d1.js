import{d as a,aV as e,aW as s,i as t,h as o,j as r,l as i,o as d,c as n,b as l,w as u,u as c,y as p,aX as f}from"./index-616b3e40.js";import{q as m,s as I}from"./trial-a30a7487.js";import{u as v}from"./useOrder-2cce4e12.js";import{q as j}from"./createProposal-f1997a5b.js";import"./utils-8bd2cdd4.js";import"./trial-fbfe4aa8.js";import"./PolicyInfo-c8cd0205.js";import"./cloneDeep-34a4a9cb.js";const w=a({name:"proposalToInsure"}),y=a({...w,setup(a){const w=e((()=>s((()=>import("./index-054018a1.js")),["static/js/index-054018a1.js","static/css/index-3515e551.css","static/js/index-616b3e40.js","static/css/index-76b4550a.css","static/js/product-0460fbc4.js","static/js/useThread-637a02aa.js"]))),y=t(),b=o(),L=v(),h=r(),{proposalId:q,productCode:_,tenantId:g,proposalInsuredId:x}=y.query,C=r(),O=async()=>{q&&j({id:q,tenantId:g}).then((({code:a,data:e})=>{if("10000"===a){const{holder:a,insuredList:s}=e,t=(_||"").split(",");Object.assign(L.value,{renewFlag:"",holder:a,tenantId:g,proposalId:q,insuredList:(s||[]).filter((a=>a.id===+x)).map((a=>({...a,relationToHolder:null,productList:a.productList.filter((a=>t.includes(a.productCode)))})))}),(async()=>{L.value.extInfo&&(L.value.extInfo.iseeBizNo=C.value);const{code:a,data:e}=await I(L.value);"10000"===a&&(h.value=e)})()}}))},P=()=>{h.value&&b.push({path:p.questionNotice,query:{...y.query,orderNo:h.value}})};return i((()=>{q||(async()=>{var a;const{code:e,data:s}=await m({calcProductFactorList:[{productCode:_}]});"10000"===e&&Object.assign(L.value,s,{insuredList:[{...null==(a=s.insuredList)?void 0:a[0]}]})})(),O(),setTimeout((async()=>{C.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(a,e)=>{const s=f;return d(),n("div",null,[l(s,null,{default:u((()=>[l(c(w),{"product-detail":{insurerCode:"lianlife"},onClose:P})])),_:1})])}}});export{y as default};

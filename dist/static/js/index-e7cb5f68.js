var Be=Object.defineProperty,Me=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var Oe=(n,a,g)=>a in n?Be(n,a,{enumerable:!0,configurable:!0,writable:!0,value:g}):n[a]=g,Q=(n,a)=>{for(var g in a||(a={}))$e.call(a,g)&&Oe(n,g,a[g]);if(Re)for(var g of Re(a))we.call(a,g)&&Oe(n,g,a[g]);return n},W=(n,a)=>Me(n,Ne(a));import{g as G,E as N,M as K,aa as qe,_ as M,r as P,j as I,n as _,p as h,m as C,z as F,F as S,G as J,k as R,ab as Ye,J as q,A as e,a4 as Pe,a5 as Te,C as xe,Q as _e,a7 as j,y as w,d as Y,t as E,R as Se,o as je,D as Ge}from"./vendor-c3c577f2.js";import{S as Ke,d as He,e as Qe,f as z,A as We,g as ze,L as Ee,h as Je}from"./trial-d18e3c55.js";import{_ as H,K as Xe,R as Ze}from"./index-96b72703.js";import{u as ei}from"./useDicData-84634f91.js";const ii=n=>(Pe("data-v-7d3c3028"),n=n(),Te(),n),ti={class:"com-risk-list-wrapper"},oi=ii(()=>F("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),ai={class:"risk-list"},ni={class:"cell-title"},ri={class:"title"},ui={class:"footer-button"},li=xe("\u786E\u8BA4"),si=G({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(n,{emit:a}){const g=n,x=N([]),v=N([]),i=N([...g.disabled]),D=K({show:g.show,currentChecked:[...g.modelValue]}),k=(p,s)=>{if(!g.collocationList.length){if(s){D.currentChecked=[];return}D.currentChecked.push(p);return}let V=D.currentChecked,c=i.value;s?(g.collocationList.forEach(r=>{p===r.riskId&&(r.collocationType===2?V=V.filter(t=>t!==r.collocationRiskId||t!==p):r.collocationType===3?(V=V.filter(t=>t!==p),c=c.filter(t=>t!==r.collocationRiskId)):V=V.filter(t=>t!==p))}),D.currentChecked=V,i.value=c):(g.collocationList.forEach(r=>{p===r.riskId&&(s||(r.collocationType===2?V.push(r.collocationRiskId):r.collocationType===3&&c.push(r.collocationRiskId),V.push(p)))}),D.currentChecked.push(...V),i.value=c)},L=p=>{var V,c,r;if(i.value.includes(p))return;const s=D.currentChecked.includes(p);k(p,s),(r=(c=(V=x==null?void 0:x.value)==null?void 0:V[p])==null?void 0:c.toggle)==null||r.call(c)},A=()=>{a("close")},y=()=>{const p=g.riskList.filter(s=>D.currentChecked.includes(s.id));a("update:modelValue",[...new Set(v.value)]),a("finished",p,i.value),a("close")};return qe(()=>{x.value=[]}),M(()=>D.currentChecked,p=>{v.value=p},{deep:!0,immediate:!0}),M(()=>g.modelValue,p=>{v.value=p||[],i.value.push(...p||[])},{deep:!0,immediate:!0}),(p,s)=>{const V=P("van-checkbox"),c=P("VanCell"),r=P("van-cell-group"),t=P("van-checkbox-group"),o=P("VanButton"),d=P("VanPopup");return I(),_("div",ti,[h(d,{show:e(D).show,"onUpdate:show":s[1]||(s[1]=u=>e(D).show=u),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",round:"",position:"bottom",closeable:"",onClose:A},{default:C(()=>[oi,F("div",ai,[h(t,{modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=u=>v.value=u)},{default:C(()=>[h(r,{inset:""},{default:C(()=>[(I(!0),_(S,null,J(n.riskList,u=>(I(),R(c,{key:u.id,title:u.riskName,disabled:i.value.includes(u.id),onClick:l=>L(u.id)},{"right-icon":C(()=>[h(V,{ref_for:!0,ref:l=>x.value[u.id]=l,shape:"square",disabled:i.value.includes(u.id),name:u.id,onClick:Ye(l=>L(u.id),["stop"])},null,8,["disabled","name","onClick"])]),title:C(()=>[F("div",ni,[F("div",ri,q(u.riskName),1)])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),F("div",ui,[h(o,{type:"primary",disabled:!e(D).currentChecked.length,block:"",onClick:y},{default:C(()=>[li]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var di=H(si,[["__scopeId","data-v-7d3c3028"]]);const mi={class:"com-personal-info-wrapper"},fi={class:"pro-radio-wrap"},ci={class:"pro-radio-wrap"},pi=G({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(n,{expose:a}){var s,V;const g=n,x=ei(`${(V=(s=g.insuredCode)==null?void 0:s.toLocaleUpperCase)==null?void 0:V.call(s)}_OCCUPATION`),[v,i]=_e(),D=N(),k=j("source")||{},L=K({formInfo:g.formInfo,occupationalText:"",occupationCodeList:[]}),A=()=>new Promise((c,r)=>{var t;(t=D.value)==null||t.validate().then(()=>{c("")},o=>{var d;(d=D.value)==null||d.scrollToField(o==null?void 0:o[0].name),r()})}),y=c=>{const r=c||[];for(let t=0;t<r.length;t++)for(let o=t+1;o<r.length;o++){const d=r[t].split("_"),u=r[o].split("_"),l=r[t];d[0]===u[0]?d>u&&(r[t]=r[o],r[o]=l):d[0]==="age"&&(r[t]=r[o],r[o]=l)}return r},p=w(()=>{const c=y(g==null?void 0:g.ageRange),r=(l="")=>{const m=+l.split("_")[1],O=l.split("_")[0];return[m,O]},t=r(c[0]),o=r(c[c.length-1]),d=Y().subtract(t[0],t[1]==="age"?"year":"day").format("YYYY-MM-DD");let u=Y().subtract(o[0],o[1]==="age"?"year":"day").format("YYYY-MM-DD");return Y(u).subtract(1,"year").isBefore(d)&&(u=Y(u).subtract(1,"year").add(1,"day").format("YYYY-MM-DD")),{minAge:new Date(u),maxAge:new Date(d)}});return a({validateForm:A,ageRangeObj:p.value}),(c,r)=>{const t=P("VanField"),o=P("ProRadioButton"),d=P("VanForm"),u=P("van-datetime-picker"),l=P("van-popup");return I(),_("div",mi,[h(d,{ref_key:"formRef",ref:D,"input-align":"right","error-message-align":"right"},{default:C(()=>[e(k).type==="proposal"&&(e(k).type==="add"||e(k).type==="repeatAdd")||e(k).type!=="proposal"&&(n.factorList.includes("APPLICANT.AGE")||n.factorList.includes("AGE")||n.factorList.includes("DAY")||n.factorList.includes("APPLICANT.DAY"))?(I(),R(t,{key:0,modelValue:e(L).formInfo.birthday,"onUpdate:modelValue":r[0]||(r[0]=m=>e(L).formInfo.birthday=m),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F",class:"isLink",readonly:"","is-link":"",formatter:m=>m&&e(Y)(m).format("YYYY-MM-DD"),placeholder:"\u8BF7\u9009\u62E9",onClick:r[1]||(r[1]=m=>e(i)(!0))},null,8,["modelValue","formatter"])):E("",!0),e(k).type==="proposal"&&(e(k).type==="add"||e(k).type==="repeatAdd")||e(k).type!=="proposal"&&(n.factorList.includes("APPLICANT.GENDER")||n.factorList.includes("GENDER"))?(I(),R(t,{key:1,modelValue:e(L).formInfo.gender,"onUpdate:modelValue":r[3]||(r[3]=m=>e(L).formInfo.gender=m),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},{input:C(()=>[F("div",fi,[h(o,{modelValue:e(L).formInfo.gender,"onUpdate:modelValue":r[2]||(r[2]=m=>e(L).formInfo.gender=m),options:e(Xe)},null,8,["modelValue","options"])])]),_:1},8,["modelValue"])):E("",!0),n.factorList.includes("SOCIAL_INS")||n.factorList.includes("APPLICANT.SOCIAL_INS")?(I(),R(t,{key:2,modelValue:e(L).formInfo.socialFlag,"onUpdate:modelValue":r[5]||(r[5]=m=>e(L).formInfo.socialFlag=m),name:"socialFlag",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u793E\u4FDD"}]},{input:C(()=>[F("div",ci,[h(o,{modelValue:e(L).formInfo.socialFlag,"onUpdate:modelValue":r[4]||(r[4]=m=>e(L).formInfo.socialFlag=m),options:e(Ke)},null,8,["modelValue","options"])])]),_:1},8,["modelValue"])):E("",!0),n.factorList.includes("OCCUPATION_CATEGORY")||n.factorList.includes("APPLICANT.OCCUPATION_CATEGORY")?(I(),R(Ze,{key:3,modelValue:e(L).formInfo.occupationCodeList[0],"onUpdate:modelValue":r[6]||(r[6]=m=>e(L).formInfo.occupationCodeList[0]=m),field0:e(L).formInfo.occupationCodeList[0],"onUpdate:field0":r[7]||(r[7]=m=>e(L).formInfo.occupationCodeList[0]=m),field1:e(L).formInfo.occupationCodeList[1],"onUpdate:field1":r[8]||(r[8]=m=>e(L).formInfo.occupationCodeList[1]=m),field2:e(L).formInfo.occupationCodeList[2],"onUpdate:field2":r[9]||(r[9]=m=>e(L).formInfo.occupationCodeList[2]=m),required:"",name:"occupationCodeList",label:"\u804C\u4E1A\u7C7B\u578B","data-source":e(x),mapping:{label:"value",value:"code",children:"children"},"show-full-value":"","need-key":"name"},null,8,["modelValue","field0","field1","field2","data-source"])):E("",!0)]),_:1},512),h(l,{show:e(v),"onUpdate:show":r[12]||(r[12]=m=>Se(v)?v.value=m:null),position:"bottom"},{default:C(()=>[h(u,{type:"date","min-date":e(p).minAge,"max-date":e(p).maxAge,onConfirm:r[10]||(r[10]=m=>{e(L).formInfo.birthday=e(Y)(m).format("YYYY-MM-DD"),e(i)(!1)}),onCancel:r[11]||(r[11]=m=>e(i)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"])])}}});var ji=H(pi,[["__scopeId","data-v-81fcd45e"]]);const yi={class:"com-risk-card-wrapper part-card"},gi={class:"custom-field"},Ii={class:"field-tip"},Vi={class:"custom-field"},Di={class:"field-tip"},ki={class:"custom-field"},Li={class:"field-tip"},bi={class:"pro-radio-wrap"},vi={class:"pro-radio-wrap"},Fi={class:"pro-radio-wrap"},Ci={class:"pro-radio-wrap"},hi={class:"pro-radio-wrap"},Ai={key:0},Ri={key:1,class:"pro-radio-wrap"},Oi={key:9,class:"liab-desc"},Ei=G({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(n){const a=n,g=N({}),x=j("premium")||{};g.value=j("enumList")||{};const v=N({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),i=K({formInfo:a.formInfo}),D=t=>typeof t!="boolean"&&!t||Array.isArray(t)&&!t.length?!0:{}.toString.call(t)==="[object Object]"?Object.keys(t).length:!1,k=(t,o,d={})=>{let u=o;return Array.isArray(o)||(u=[`${u}`]),(t||[]).filter(l=>u.includes(`${l.value}`)||u.includes(l.value))},L=w(()=>{var t,o,d,u,l,m,O,U;return((t=a.originData)==null?void 0:t.riskType)===1?k(a.enums.RISK_INSURANCE_PERIOD,((o=a.originData.riskInsureLimitVO)==null?void 0:o.insurancePeriodValueList)||[]):((d=a.originData)==null?void 0:d.periodType)===2?k([{value:"year_1",name:"1\u5E74"}],["year_1"]):((u=a.originData)==null?void 0:u.exemptFlag)===1?k(He,[`${(m=(l=a==null?void 0:a.originData)==null?void 0:l.riskInsureLimitVO)==null?void 0:m.insurancePeriodRule}`]):k((O=a.enums)==null?void 0:O.RISK_INSURANCE_PERIOD,((U=a.mainRiskData.riskInsureLimitVO)==null?void 0:U.insurancePeriodValueList)||[])}),A=w(()=>{var t,o,d,u,l,m,O,U;return((t=a.originData)==null?void 0:t.riskType)===1?k((o=a==null?void 0:a.enums)==null?void 0:o.RISK_PAYMENT_PERIOD,((d=a.originData.riskInsureLimitVO)==null?void 0:d.paymentPeriodValueList)||[]):((u=a.originData)==null?void 0:u.exemptFlag)===1?k(Qe,[`${(m=(l=a==null?void 0:a.originData)==null?void 0:l.riskInsureLimitVO)==null?void 0:m.paymentPeriodRule}`]):((O=a.originData)==null?void 0:O.periodType)===2?k([{value:"year_1",name:"1\u5E74\u4EA4"}],["year_1"]):k(a.enums.RISK_PAYMENT_PERIOD,((U=a.mainRiskData.riskInsureLimitVO)==null?void 0:U.paymentPeriodValueList)||[])}),y=w(()=>{var t,o,d,u,l;return((t=a.originData)==null?void 0:t.riskType)===1?k(z,((o=a.originData.riskInsureLimitVO)==null?void 0:o.paymentFrequencyList)||[]):((d=a.originData.riskInsureLimitVO)==null?void 0:d.paymentTypeRule)===1?k(z,((u=a.mainRiskData.riskInsureLimitVO)==null?void 0:u.paymentFrequencyList)||[]):k(z,((l=a.mainRiskData.riskInsureLimitVO)==null?void 0:l.paymentFrequencyList)||[])}),p=w(()=>{var d,u;let t=0,o=0;return(((u=(d=a.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:u.paymentMethodLimitList)||[]).forEach((l,m)=>{m===0&&(t=l.minAmount,o=l.maxAmount),t>l.minAmount&&(t=l.minAmount),o<l.maxAmount&&(o=l.maxAmount)}),i.formInfo.amount=i.formInfo.amount||t,{min:t,max:o||1/0}}),s=w(()=>{var d,u;let t=0,o=0;return(((u=(d=a.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:u.paymentMethodLimitList)||[]).forEach((l,m)=>{m===0&&(t=l.minPremium,o=l.maxPremium),t>l.minPremium&&(t=l.minPremium),o<l.maxPremium&&(o=l.maxPremium)}),i.formInfo.premium=i.formInfo.premium||t,{min:t,max:o||1/0}}),V=w(()=>{var d,u,l,m;const t=((u=(d=a.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:u.minCopy)||1,o=(m=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:m.maxCopy;return i.formInfo.copy=`${i.formInfo.copy||t||1}`,{min:t,max:o}}),c=(t,o,d)=>{var l,m;const u=((m=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:m.increaseDecreaseNum)||1;if(d==="sumInsured"){if(p.value.max&&+t>p.value.max)return`\u91D1\u989D\u6700\u5927${p.value.max}\u5143`;if(+t<p.value.min)return`\u91D1\u989D\u6700\u5C0F${p.value.min}\u5143`}else{if(s.value.max&&+t>s.value.max)return`\u91D1\u989D\u6700\u5927${s.value.max}\u5143`;if(+t<s.value.min)return`\u91D1\u989D\u6700\u5C0F${s.value.min}\u5143`}return+t%u===0?"":`\u91D1\u989D\u5FC5\u987B\u662F${u}\u7684\u500D\u6570`},r=t=>{var d;const o=(((d=i.formInfo)==null?void 0:d.liabilityVOList)||[]).find(u=>u.liabilityCode===t.liabilityCode);return o?o.liabilityAttributeValue?o.liabilityAttributeValue:t.optionalFlag!==1?"0":"-1":""};return je(()=>{var o,d;const t={riskType:a.originData.riskType,riskId:a.originData.id,riskName:a.originData.riskName,riskCode:a.originData.riskCode,mainRiskCode:a.originData.riskType!==1?(o=a.mainRiskData)==null?void 0:o.riskCode:void 0,mainRiskId:a.originData.riskType!==1?(d=a.mainRiskData)==null?void 0:d.id:void 0,exemptFlag:a.originData.exemptFlag,exemptType:a.originData.exemptType,riskCategory:a.originData.riskCategory,liabilityVOList:(a.originData.riskLiabilityInfoVOList||[]).map(u=>W(Q({},u),{liabilityAttributeCode:u.liabilityAttributeType,liabilityCode:u.liabilityCode,liabilityRateType:u.liabilityRateType,liabilityAttributeValue:r(u)}))};Object.assign(i.formInfo,t)}),M(()=>{var t;return(t=i.formInfo)==null?void 0:t.paymentFrequency},(t=0)=>{var o,d,u;[3].includes(((o=a.originData.riskCalcMethodInfoVO)==null?void 0:o.saleMethod)||0)&&(((u=(d=a.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:u.paymentMethodLimitList)||[]).forEach(l=>{+l.paymentFrequency==+t&&Object.assign(i.formInfo,{amount:l.perCopyAmount,premium:l.perCopyPremium})}),+t==1&&i.formInfo.chargePeriod!=="single"&&(i.formInfo.chargePeriod="single")}),M(()=>{var t;return(t=i.formInfo)==null?void 0:t.copy},t=>{var o,d;((o=a.originData.riskCalcMethodInfoVO)==null?void 0:o.saleMethod)===4&&(i.formInfo.amount=(d=a.originData.riskCalcMethodInfoVO)==null?void 0:d.fixedAmount)}),M(()=>{var t;return(t=i.formInfo)==null?void 0:t.chargePeriod},t=>{t==="single"&&+(i.formInfo.paymentFrequency||0)!=1&&(i.formInfo.paymentFrequency=1)}),M(()=>i.formInfo,()=>{console.log("state.formInfo",i.formInfo)},{deep:!0,immediate:!0}),M(()=>a==null?void 0:a.mainRiskInfo,t=>{var o,d,u,l,m,O;t&&a.originData.riskType===2&&(((d=(o=a.originData)==null?void 0:o.riskInsureLimitVO)==null?void 0:d.insurancePeriodRule)===1&&(t.coveragePeriod?v.value.coveragePeriod.disabled=!0:v.value.coveragePeriod.prevent=!0,i.formInfo.coveragePeriod=t.coveragePeriod||""),((l=(u=a.originData)==null?void 0:u.riskInsureLimitVO)==null?void 0:l.paymentPeriodRule)===1&&(t.chargePeriod?v.value.chargePeriod.disabled=!0:v.value.chargePeriod.prevent=!0,i.formInfo.chargePeriod=t.chargePeriod||""),((O=(m=a.originData)==null?void 0:m.riskInsureLimitVO)==null?void 0:O.paymentTypeRule)===1&&(t.paymentFrequency?v.value.paymentFrequency.disabled=!0:v.value.paymentFrequency.prevent=!0,i.formInfo.paymentFrequency=t.paymentFrequency||0))},{immediate:!0,deep:!0}),(t,o)=>{var X,Z,ee,ie,te,oe,ae,ne,re,ue,le,se,de,me,fe,ce,pe,ye,ge,Ie,Ve,De,ke,Le,be,ve,Fe,Ce,he,Ae;const d=P("ProSvg"),u=P("ProTitle"),l=P("VanStepper"),m=P("VanField"),O=P("ProRadioButton"),U=P("ProField"),Ue=P("ProExpand");return I(),_("div",yi,[h(u,{"risk-type":n.originData.riskType,title:n.originData.riskName},{default:C(()=>[n.removeRiskList.includes(n.originData.id)?(I(),_("div",{key:0,class:"delete-risk",onClick:o[0]||(o[0]=f=>n.removeRisk(n.originData.id))},[h(d,{name:"img-lajitong",color:"#0d6efe"})])):E("",!0)]),_:1},8,["risk-type","title"]),((X=n.originData.riskCalcMethodInfoVO)==null?void 0:X.saleMethod)===1&&n.originData.exemptFlag===2?(I(),R(m,{key:0,modelValue:e(i).formInfo.amount,"onUpdate:modelValue":o[2]||(o[2]=f=>e(i).formInfo.amount=f),label:"\u4FDD\u989D",name:"amount",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...f)=>c(...f,"sumInsured")}]},{input:C(()=>{var f,b;return[F("div",gi,[h(l,{modelValue:e(i).formInfo.amount,"onUpdate:modelValue":o[1]||(o[1]=T=>e(i).formInfo.amount=T),"input-width":"64px",min:e(p).min,step:((f=n.originData.riskCalcMethodInfoVO)==null?void 0:f.increaseDecreaseNum)||1,max:e(p).max},null,8,["modelValue","min","step","max"]),F("span",Ii,q(`\u91D1\u989D\u6700\u4F4E${e(p).min}\u5143\uFF0C\u4E3A${((b=n.originData.riskCalcMethodInfoVO)==null?void 0:b.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):E("",!0),((ee=(Z=n.originData)==null?void 0:Z.riskCalcMethodInfoVO)==null?void 0:ee.saleMethod)===2?(I(),R(m,{key:1,modelValue:e(i).formInfo.premium,"onUpdate:modelValue":o[4]||(o[4]=f=>e(i).formInfo.premium=f),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...f)=>c(...f,"premium")}]},{input:C(()=>{var f,b,T,B;return[F("div",Vi,[h(l,{modelValue:e(i).formInfo.premium,"onUpdate:modelValue":o[3]||(o[3]=$=>e(i).formInfo.premium=$),step:((b=(f=n.originData)==null?void 0:f.riskCalcMethodInfoVO)==null?void 0:b.increaseDecreaseNum)||1,min:e(s).min,"input-width":"64px",max:e(s).max},null,8,["modelValue","step","min","max"]),F("span",Di,q(`\u91D1\u989D\u6700\u4F4E${e(s).min}\u5143\uFF0C\u4E3A${((B=(T=n.originData)==null?void 0:T.riskCalcMethodInfoVO)==null?void 0:B.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):E("",!0),((te=(ie=n.originData)==null?void 0:ie.riskCalcMethodInfoVO)==null?void 0:te.saleMethod)===3||((ae=(oe=n.originData)==null?void 0:oe.riskCalcMethodInfoVO)==null?void 0:ae.saleMethod)===4&&(((re=(ne=n.originData)==null?void 0:ne.riskCalcMethodInfoVO)==null?void 0:re.minCopy)||((le=(ue=n.originData)==null?void 0:ue.riskCalcMethodInfoVO)==null?void 0:le.maxCopy))?(I(),R(m,{key:2,modelValue:e(i).formInfo.copy,"onUpdate:modelValue":o[6]||(o[6]=f=>e(i).formInfo.copy=f),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:C(()=>[F("div",ki,[h(l,{modelValue:e(i).formInfo.copy,"onUpdate:modelValue":o[5]||(o[5]=f=>e(i).formInfo.copy=f),step:1,min:e(V).min,max:e(V).max},null,8,["modelValue","min","max"]),F("span",Li,q(`${e(V).min}\u4EFD\u8D77\u8D2D\uFF0C\u6700\u591A\u8D2D\u4E70${e(V).max}\u4EFD`),1)])]),_:1},8,["modelValue"])):E("",!0),(![1].includes(((se=n.originData.riskCalcMethodInfoVO)==null?void 0:se.saleMethod)||0)||((de=n.originData)==null?void 0:de.exemptFlag)===1)&&(n.originData.riskCalcMethodInfoVO.fixedAmount||((fe=e(x))==null?void 0:fe[(me=n.originData)==null?void 0:me.riskCode]))?(I(),R(m,{key:3,label:"\u4FDD\u989D"},{input:C(()=>{var f,b,T,B;return[F("div",null,q(((f=n.originData.riskCalcMethodInfoVO)==null?void 0:f.fixedAmount)||((B=(T=e(x))==null?void 0:T[(b=n.originData)==null?void 0:b.riskCode])==null?void 0:B.amount)),1)]}),_:1})):E("",!0),!D((pe=(ce=n.originData)==null?void 0:ce.riskInsureLimitVO)==null?void 0:pe.insurancePeriodValueList)||!D((ge=(ye=n.originData)==null?void 0:ye.riskInsureLimitVO)==null?void 0:ge.insurancePeriodRule)?(I(),R(U,{key:4,modelValue:e(i).formInfo.coveragePeriod,"onUpdate:modelValue":o[8]||(o[8]=f=>e(i).formInfo.coveragePeriod=f),label:"\u4FDD\u969C\u671F\u95F4",name:"coveragePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4FDD\u969C\u671F\u95F4"}]},{input:C(()=>[F("div",bi,[h(O,{modelValue:e(i).formInfo.coveragePeriod,"onUpdate:modelValue":o[7]||(o[7]=f=>e(i).formInfo.coveragePeriod=f),disabled:v.value.coveragePeriod.disabled,prevent:v.value.coveragePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4FDD\u969C\u671F\u95F4":"",options:e(L),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])]),_:1},8,["modelValue"])):E("",!0),!D((Ve=(Ie=n.originData)==null?void 0:Ie.riskInsureLimitVO)==null?void 0:Ve.paymentPeriodValueList)||!D((ke=(De=n.originData)==null?void 0:De.riskInsureLimitVO)==null?void 0:ke.paymentPeriodRule)?(I(),R(U,{key:5,modelValue:e(i).formInfo.chargePeriod,"onUpdate:modelValue":o[10]||(o[10]=f=>e(i).formInfo.chargePeriod=f),label:"\u4EA4\u8D39\u671F\u95F4",name:"chargePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u671F\u95F4"}]},{input:C(()=>[F("div",vi,[h(O,{modelValue:e(i).formInfo.chargePeriod,"onUpdate:modelValue":o[9]||(o[9]=f=>e(i).formInfo.chargePeriod=f),disabled:v.value.chargePeriod.disabled,prevent:v.value.chargePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u671F\u95F4":"",options:e(A),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])]),_:1},8,["modelValue"])):E("",!0),!D((Le=n.originData.riskInsureLimitVO)==null?void 0:Le.paymentFrequencyList)||!D((be=n.originData.riskInsureLimitVO)==null?void 0:be.paymentPeriodRule)?(I(),R(U,{key:6,modelValue:e(i).formInfo.paymentFrequency,"onUpdate:modelValue":o[12]||(o[12]=f=>e(i).formInfo.paymentFrequency=f),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u65B9\u5F0F"}]},{input:C(()=>[F("div",Fi,[h(O,{modelValue:e(i).formInfo.paymentFrequency,"onUpdate:modelValue":o[11]||(o[11]=f=>e(i).formInfo.paymentFrequency=f),disabled:v.value.paymentFrequency.disabled,prevent:v.value.paymentFrequency.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u65B9\u5F0F":"",options:e(y)},null,8,["modelValue","disabled","prevent","options"])])]),_:1},8,["modelValue"])):E("",!0),D((Fe=(ve=n.originData)==null?void 0:ve.riskInsureLimitVO)==null?void 0:Fe.annuityDrawValueList)?E("",!0):(I(),R(U,{key:7,modelValue:e(i).formInfo.annuityDrawDate,"onUpdate:modelValue":o[14]||(o[14]=f=>e(i).formInfo.annuityDrawDate=f),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate"},{input:C(()=>{var f;return[F("div",Ci,[h(O,{modelValue:e(i).formInfo.annuityDrawDate,"onUpdate:modelValue":o[13]||(o[13]=b=>e(i).formInfo.annuityDrawDate=b),options:k(e(We),((f=n.originData.riskInsureLimitVO)==null?void 0:f.annuityDrawValueList)||[])},null,8,["modelValue","options"])])]}),_:1},8,["modelValue"])),D((he=(Ce=n.originData)==null?void 0:Ce.riskInsureLimitVO)==null?void 0:he.annuityDrawFrequencyList)?E("",!0):(I(),R(U,{key:8,modelValue:e(i).formInfo.annuityDrawType,"onUpdate:modelValue":o[16]||(o[16]=f=>e(i).formInfo.annuityDrawType=f),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType"},{input:C(()=>{var f;return[F("div",hi,[h(O,{modelValue:e(i).formInfo.annuityDrawType,"onUpdate:modelValue":o[15]||(o[15]=b=>e(i).formInfo.annuityDrawType=b),options:k(e(ze),((f=n.originData.riskInsureLimitVO)==null?void 0:f.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])])]}),_:1},8,["modelValue"])),(I(!0),_(S,null,J(n.originData.riskLiabilityInfoVOList||[],(f,b)=>(I(),_(S,{key:b},[f.optionalFlag===1&&!D(f.liabilityAttributeValueList)?(I(),R(m,{key:0,modelValue:e(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":T=>e(i).formInfo.liabilityVOList[b].liabilityAttributeValue=T,label:f.liabilityName,name:"liabilityAttributeValue",rules:[{required:f.liabilityAttributeValue,message:`\u8BF7\u9009\u62E9${f.liabilityName}`}]},{input:C(()=>{var T,B;return[F("div",null,[D(f.liabilityAttributeValueList)?(I(),_("span",Ai,"50\u4E07")):(I(),_("div",Ri,[h(O,{modelValue:e(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":$=>e(i).formInfo.liabilityVOList[b].liabilityAttributeValue=$,options:k(e(Ee),(B=(T=n.originData.riskLiabilityInfoVOList)==null?void 0:T[b])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"])]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):E("",!0),f.optionalFlag!==1?(I(),R(m,{key:1,modelValue:e(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":T=>e(i).formInfo.liabilityVOList[b].liabilityAttributeValue=T,label:f.liabilityName,name:"liabilityAttributeValue"},{input:C(()=>{var T,B;return[F("div",null,[D(f.liabilityAttributeValueList)?(I(),R(O,{key:0,modelValue:e(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":$=>e(i).formInfo.liabilityVOList[b].liabilityAttributeValue=$,options:e(Je)},null,8,["modelValue","onUpdate:modelValue","options"])):(I(),R(O,{key:1,modelValue:e(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":$=>e(i).formInfo.liabilityVOList[b].liabilityAttributeValue=$,options:k(e(Ee),(B=(T=n.originData.riskLiabilityInfoVOList)==null?void 0:T[b])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label"])):E("",!0)],64))),128)),((Ae=n.originData)==null?void 0:Ae.relationDesc)?(I(),_("div",Oi,[h(Ue,{title:"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E"},{default:C(()=>[F("div",null,q(n.originData.relationDesc),1)]),_:1})])):E("",!0)])}}});var Pi=H(Ei,[["__scopeId","data-v-4a954db9"]]);const Ti=n=>(Pe("data-v-4b309d85"),n=n(),Te(),n),xi={class:"risk-list-wrapper"},_i={key:0,class:"add-rider-risk"},Ui={class:"left-part"},Bi=Ti(()=>F("span",{class:"btn-plus"},"+",-1)),Mi=xe(" \u9644\u52A0\u9669"),Ni=G({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(n){const a=n,g=j("source")||{},[x,v]=_e(!1);N(null),N(null);const i=K({mainRiskInfo:a.riskInfo,riskInfo:a.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),D=(A,y)=>{i.currentRiskList=i.currentRiskList.concat(A),i.disabledList=y},k=A=>{Ge.confirm({message:"\u786E\u5B9A\u8981\u5220\u9664\u9644\u52A0\u9669\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{var p;const y=[A];(((p=i.mainRiskData)==null?void 0:p.collocationVOList)||[]).forEach(s=>{A===s.riskId&&(s.collocationType===2||s.collocationType===3)&&y.push(s.collocationRiskId)}),i.checkedList=i.checkedList.filter(s=>!y.includes(s)),i.currentRiskList=i.currentRiskList.filter(s=>y.includes(s.id)?(Object.assign(i.riskInfo,{[s.id]:void 0}),!1):!0),i.disabledList=i.disabledList.filter(s=>!y.includes(s))}).catch(()=>{})},L=(A,y)=>{var s,V;const p=(((V=(s=i.riskInfo)==null?void 0:s[y])==null?void 0:V.liabilityVOList)||[]).find(c=>c.liabilityCode===A.liabilityCode);return p?p.liabilityAttributeValue?p.liabilityAttributeValue:A.optionalFlag!==1?"0":"-1":""};return M(()=>i.currentRiskList,A=>{const y=[i.mainRiskData,...A];let p=[],s=[];const V=[];y.forEach((c,r)=>{var o,d,u;const t=((o=c==null?void 0:c.riskCalcMethodInfoVO)==null?void 0:o.riskFactorRelationList)||[];p=p.concat(t.filter(l=>l.factorObject==="insured").map(l=>l.factorCode)),s=s.concat(t.filter(l=>l.factorObject==="holder").map(l=>l.factorCode)),V.push((d=c==null?void 0:c.riskInsureLimitVO)==null?void 0:d.minHolderAge,(u=c==null?void 0:c.riskInsureLimitVO)==null?void 0:u.maxHolderAge)}),(A||[]).forEach(c=>{var t,o;const r={riskType:c.riskType,riskId:c.id,riskCode:c.riskCode,riskName:c.riskName,mainRiskCode:c.riskType!==1?(t=i.mainRiskData)==null?void 0:t.riskCode:void 0,mainRiskId:c.riskType!==1?(o=i.mainRiskData)==null?void 0:o.id:void 0,riskCategory:c.riskCategory,exemptFlag:a.originData.exemptFlag,exemptType:a.originData.exemptType,liabilityVOList:(c.riskLiabilityInfoVOList||[]).map(d=>W(Q({},d),{liabilityAttributeCode:d.liabilityAttributeType,liabilityCode:d.liabilityCode,liabilityRateType:d.liabilityRateType,liabilityAttributeValue:L(d,c.id)}))};i.riskInfo[c.id]||Object.assign(i.riskInfo,{[c.id]:r})}),a.pickFactor({insuredFactorList:[...new Set(p)],holderFactorList:[...new Set(s)],ageRange:V})},{deep:!0,immediate:!0}),M(()=>a.riskInfo,A=>{i.mainRiskInfo=Object.values(A||{}).find(y=>(y==null?void 0:y.riskType)===1)||{}},{deep:!0,immediate:!0}),M(()=>a.originData,A=>{let y=[];const p=[];g.origin==="proposal"&&!(g.type==="add"||g.type==="repeatAdd")?((A||[]).forEach(s=>{s.riskType===1&&(i.mainRiskData=s),y.push(s)}),y=y.filter(s=>g.showRiskList.includes(s.id))):(A||[]).forEach(s=>{s.riskType===1?(i.mainRiskData=s,y.push(s)):s.collocationType===2?y.push(s):p.push(s)}),i.riderRiskList=p,i.currentRiskList=y},{deep:!0,immediate:!0}),(A,y)=>{var s,V,c;const p=P("ProCheckButton");return I(),_("div",xi,[(I(!0),_(S,null,J(e(i).currentRiskList,(r,t)=>(I(),R(Pi,{key:r.id,"form-info":e(i).riskInfo[r.id],index:t,enums:n.enums,"main-risk-data":e(i).mainRiskData,"main-risk-info":e(i).mainRiskInfo,"origin-data":r,"remove-risk":k,"remove-risk-list":e(i).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"]))),128)),((s=e(i).riderRiskList)==null?void 0:s.length)-((V=e(i).checkedList)==null?void 0:V.length)&&e(g).origin!=="proposal"?(I(),_("div",_i,[F("span",Ui,q(`\u5171\u6709${e(i).riderRiskList.length-e(i).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),h(p,{activated:"",class:"btn-rider-risk",onClick:y[0]||(y[0]=r=>e(v)(!0))},{default:C(()=>[Bi,Mi]),_:1})])):E("",!0),e(x)?(I(),R(di,{key:1,modelValue:e(i).checkedList,"onUpdate:modelValue":y[1]||(y[1]=r=>e(i).checkedList=r),show:e(x),disabled:e(i).disabledList,"risk-list":e(i).riderRiskList,"collocation-list":((c=e(i).mainRiskData)==null?void 0:c.collocationVOList)||[],onFinished:D,onClose:y[2]||(y[2]=r=>e(v)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):E("",!0)])}}});var Gi=H(Ni,[["__scopeId","data-v-4b309d85"]]);export{ji as P,di as R,Gi as a};

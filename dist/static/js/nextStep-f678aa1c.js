import{bl as e,bm as t,aB as r,T as a,bn as n,ay as o,ai as s}from"./index-49d4fa1c.js";import{s as u}from"./core-2f4c0b97.js";import{P as i}from"./constants-fe95ef6f.js";const{VITE_BASE:d}={VITE_BASE:"/",VITE_API_BASEURL:"/",VITE_APP_TITLE:"投保流程",VITE_THEME_COLOR:"#C41E21",VITE_APP_DESCRIPTION:"一种互联网投保的快速落地实现方案",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},I=async(I,c,l)=>{var p,E;const T=I,{extInfo:_,orderNo:A,tenantOrderInsuredList:y,tenantId:m}=T||{},{iseeBizNo:f,templateId:R}=_||{};if(A){const{productCode:e}=(null==(E=null==(p=null==y?void 0:y[0])?void 0:p.tenantOrderProductList)?void 0:E[0])||{};let t=`${window.location.origin}${d}baseInsurance/orderDetail?orderNo=${A}&tenantId=${m}&ISEE_BIZ=${f}&productCode=${e}`;R>200&&(t=`${window.location.origin}${d}baseInsurance/long/result?orderNo=${A}&templateId=${R}&tenantId=${m}&ISEE_BIZ=${f}&productCode=${e}`),T.extInfo.redirectUrl=t}const h=e();if(h.ext)try{T.ext=h.ext}catch($){console.error("ext 参数格式错误",h.ext,$)}const{code:L,data:P}=await t(T);if("10000"===L){const{pageAction:e,message:t,data:d}=P.pageAction||{};null==c||c(d,e),e===r.ALERT&&a(t),e===r.JUMP_URL&&u(null==d?void 0:d.paymentUrl),e===r.JUMP_ALERT&&(d.alertType===n.PAY_AUTH?o.confirm({title:"投保提示",message:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。",confirmButtonText:"去鉴权"}).then((()=>{s.push({path:i.payAuth,query:l.query})})):d.alertType===n.SIGN_FAIL?s.push({path:i.underWriteResult,query:{...l.query,underwriteStatus:n.SIGN_FAIL}}):d.alertType===n.PAY_FAIL?s.push({path:i.updateBankInfo,query:l.query}):d.alertType===n.QUESTIONNAIRE?o.confirm({confirmButtonText:"返回修改",message:"当前投被保人年龄、性别不符合健康告知规则，请修改健康告知"}).then((()=>{s.push({path:i.premiumTrial,query:l.query})})):d.alertType===n.UNDER_WRITE_FAIL&&s.push({path:i.underWriteResult,query:{...l.query,underwriteStatus:n.UNDER_WRITE_FAIL}}))}};export{I as n};

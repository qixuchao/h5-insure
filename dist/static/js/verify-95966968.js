import{d as a,r as e,v as l,b as s,c as u,f as t,h as n,i as o,Z as i,e as d,w as r,g as c,x as p,ak as v,ad as m,W as f,al as g,B as b,am as y,an as h,l as w,ao as k}from"./index-3300826d.js";const C={class:"sign-wrap"},S=["src"],_={class:"popup-body"},V={class:"sign-container-wrap"},I={class:"operate-bar"},T={class:"btns"},x=a({name:"sign"}),O=a({...x,props:{option:{default:{}},modelValue:{default:""}},emits:["update:modelValue","submitSign"],setup(a,{expose:w,emit:k}){const x=a,O=e(!1),R=e(),j=e(""),z=e(!0),N=()=>{var a;O.value=!0,null==(a=R.value)||a.clear(),setTimeout((()=>{var a;null==(a=R.value)||a.setDataURL(j.value),x.modelValue?z.value=!1:z.value=!0}))},B=()=>{g({images:[j.value],className:"customer-sign-preview"})},E=()=>{O.value=!1},L=()=>{var a,e;null==(e=null==(a=R.value)?void 0:a.clear)||e.call(a),j.value="",z.value=!0,k("update:modelValue","")},P=()=>{var a;j.value=null==(a=R.value)?void 0:a.save(),k("update:modelValue",j.value),k("submitSign",j.value),O.value=!1};return l((()=>x.modelValue),(()=>{j.value=x.modelValue}),{immediate:!0}),w({rewrite:L,openSign:N}),(a,e)=>{const l=b,g=y,w=h;return s(),u(f,null,[t("div",C,[n(a.$slots,"signImg",{data:o(j)},(()=>[o(j)?(s(),u("img",{key:0,class:"preview-sign",src:o(j),alt:"",onClick:B},null,8,S)):i("",!0),d(l,{type:"primary",round:"",size:"small",onClick:N},{default:r((()=>[c(p(o(j)?"重新签名":"点击签字"),1)])),_:1})]))]),d(w,{show:o(O),"onUpdate:show":e[1]||(e[1]=a=>m(O)?O.value=a:null),position:"bottom",style:{height:"100%",overflow:"hidden"}},{default:r((()=>[t("div",_,[t("div",V,[d(v,{ref_key:"signRef",ref:R,placeholder:"请在此处签名",onStroke:e[0]||(e[0]=a=>z.value=!1)},null,512),t("div",I,[t("span",null,[d(g,{name:"info",color:"#ffaf22"}),c(" 请投保人正楷签署您的签名:")]),t("div",T,[d(l,{type:"default",class:"btn",onClick:E},{default:r((()=>[c("返回")])),_:1}),d(l,{type:"default",class:"btn",onClick:L},{default:r((()=>[c("重写")])),_:1}),d(l,{type:"primary",class:"btn",disabled:o(z),onClick:P},{default:r((()=>[c("确定签字")])),_:1},8,["disabled"])])])])])])),_:1},8,["show"])],64)}}}),R=a=>w({url:"/api/app/insure/insurance/customerFace",method:"POST",data:a}),j=(a,e,l,s,u)=>{const t={bizObjectType:a,bizObjectId:u,docCategory:"ELECTRIC_SIGN",docType:"png",fileBase64:e,docName:`${k[a]}电子签名`,orderId:l,tenantId:s};return w({url:"/api/app/insure/insurance/saveCustomerSignResult",method:"POST",data:t})};export{O as _,R as f,j as s};

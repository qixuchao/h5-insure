!function(){var e=document.createElement("style");e.innerHTML=".image-wrap[data-v-bb02bba6]{display:flex;justify-content:flex-start;width:9.2rem}.com-bank-card-info .field-title .sub-title[data-v-bb02bba6]{font-size:.34667rem;color:#99a9c0}.page-bank-card[data-v-7a52b3b4] .com-card-wrap .body{padding:0}.page-bank-card .reprise-card .reprise-card-list[data-v-7a52b3b4]{padding:0 .4rem;height:1.41333rem;display:flex;justify-content:space-between;align-items:center}.page-bank-card .reprise-card .reprise-card-list .reprise-card-item[data-v-7a52b3b4]{text-align:center;width:2.88rem;height:.8rem;line-height:.8rem;background:#f6f7fc;border-radius:.10667rem;color:#393d46;font-size:.34667rem}.page-bank-card .reprise-card .reprise-card-list .reprise-card-item.selected[data-v-7a52b3b4]{background:rgba(13,110,254,.1);border:1px solid var(--van-primary-color, var(--zaui-brand));color:var(--van-primary-color, var(--zaui-brand))}.page-bank-card .agree[data-v-7a52b3b4]{height:1.41333rem;display:flex;align-items:center;font-size:.37333rem;color:#393d46;background:var(--zaui-global-bg, #f2f5fc);padding:0 .4rem}.page-bank-card .agree .checkbox[data-v-7a52b3b4]{margin-right:.29333rem}.page-bank-card .agree .file[data-v-7a52b3b4]{color:var(--van-primary-color, var(--zaui-brand))}.page-bank-card .footer[data-v-7a52b3b4]{position:static;justify-content:space-between}.page-bank-card .footer .refresh-btn[data-v-7a52b3b4]{width:.93333rem;border:none;color:var(--van-primary-color, var(--zaui-brand));font-size:.4rem;line-height:.37333rem;text-align:center}.page-bank-card .footer .refresh-btn .text[data-v-7a52b3b4]{margin-top:.13333rem;font-size:.32rem}.page-bank-card .footer[data-v-7a52b3b4] .com-share{flex:1;margin-left:.26667rem}.page-bank-card .footer .submit-btn[data-v-7a52b3b4]{flex:1}\n",document.head.appendChild(e),System.register(["./index-legacy-dee7ea74.js","./bankCard-legacy-eb9aed69.js","./useDicData-legacy-8b445045.js","./order-legacy-444cc39e.js","./pdfh5-legacy-9f98dc45.js"],(function(e){"use strict";var a,t,l,n,d,r,o,i,u,c,s,m,p,b,y,v,g,f,k,I,h,E,_,N,T,R,A,V,D,C,S,B,M,O,x,U,j,L,w,P,K,q,z,F,G,W,H,Y,$,X,Z,J,Q,ee,ae,te,le,ne,de;return{setters:[function(e){a=e._,t=e.d,l=e.r,n=e.x,d=e.aa,r=e.c,o=e.h,i=e.e,u=e.g,c=e.ab,s=e.k,m=e.ac,p=e.w,b=e.j,y=e.f,v=e.ad,g=e.ae,f=e.Z,k=e.af,I=e.ag,h=e.K,E=e.L,_=e.n,N=e.a,T=e.u,R=e.y,A=e.O,V=e.b,D=e.P,C=e.ah,S=e.F,B=e.i,M=e.B,O=e.t,x=e.X,U=e.ai,j=e.W,L=e.a3,w=e.aj,P=e.p,K=e.a5,q=e.T,z=e.a7,F=e.a8,G=e.C,W=e.N,H=e.D,Y=e.a9},function(e){$=e.B,X=e.a,Z=e.P,J=e.E,Q=e.b,ee=e.c,ae=e.d,te=e.e,le=e.f},function(e){ne=e.u},function(e){de=e.a},function(){}],execute:function(){const re={class:"com-bank-card-info"},oe=(e=>(h("data-v-bb02bba6"),e=e(),E(),e))((()=>b("span",{class:"field-title"},[_("银行卡照片 "),b("span",{class:"sub-title"},"(需上传正反两面)")],-1))),ie={class:"image-wrap"};var ue=a(t({__name:"index",props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""},factor:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,h=ne("BANK"),E=l({bankCardType:$.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),_=e=>t.factor&&t.factor[e]&&t.factor[e].isDisplay===f.YES,N=e=>!(!e||2!==e.length)||"请上传银行卡正反面照片",T=n((()=>h.value.map((e=>({label:e.name,value:e.code}))))),R=e=>{k({ossKey:[e],imageType:I.BANK_CARD}).then((e=>{const{data:a,code:t}=e;if("10000"===t&&a&&a.bankCardOcrVO){E.value.bankCardNo=a.bankCardOcrVO.cardNo;const e=T.value.find((e=>e.label===a.bankCardOcrVO.bankName));e&&(E.value.payBank=e.value)}}))};return d((()=>t.modelValue),(e=>{E.value=e}),{immediate:!0}),d(E,(e=>{a("update:modelValue",e)})),(a,t)=>(r(),o("div",re,[_("cardType")?(r(),i(c,{key:0,modelValue:u(E).bankCardType,"onUpdate:modelValue":t[0]||(t[0]=e=>u(E).bankCardType=e),label:"卡片类型",name:"bankCardType","data-source":u(X),"is-view":""},null,8,["modelValue","data-source"])):s("",!0),_("bankCardNumber")?(r(),i(m,{key:1,modelValue:u(E).bankCardNo,"onUpdate:modelValue":t[1]||(t[1]=e=>u(E).bankCardNo=e),label:"银行卡号",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"])):s("",!0),_("cardHolder")?(r(),i(m,{key:2,"model-value":e.holderName,label:"持卡人",name:"accountName","is-view":""},null,8,["model-value"])):s("",!0),_("bank")?(r(),i(c,{key:3,modelValue:u(E).payBank,"onUpdate:modelValue":t[2]||(t[2]=e=>u(E).payBank=e),name:"payBank",label:"开户银行","data-source":u(T),required:""},null,8,["modelValue","data-source"])):s("",!0),_("bankCardAttachment")?(r(),i(m,{key:4,label:"银行卡照片",block:"","label-width":"100%",name:"images",rules:[{validator:N}]},{label:p((()=>[oe])),input:p((()=>[b("div",ie,[y(v,{modelValue:u(E).images,"onUpdate:modelValue":t[3]||(t[3]=e=>u(E).images=e),"max-count":2,"upload-type":u(g).BANK_CARD,onOnUploadFinished:R},null,8,["modelValue","upload-type"])])])),_:1},8,["rules"])):s("",!0),_("bankPreMobile")?(r(),i(m,{key:5,modelValue:u(E).mobile,"onUpdate:modelValue":t[4]||(t[4]=e=>u(E).mobile=e),label:"预留手机号",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])):s("",!0)]))}}),[["__scopeId","data-v-bb02bba6"]]);const ce={class:"page-bank-card"},se={class:"reprise-card-list"},me=["onClick"],pe={class:"agree"},be={class:"footer-button footer"},ye=(e=>(h("data-v-7a52b3b4"),e=e(),E(),e))((()=>b("div",{class:"text"},"刷新",-1))),ve=t({__name:"index",setup(e){const a=N(),t=T(),{orderNo:d="2022072710380711215",agentCode:v="D1234567-1",tenantId:g="9991000007",templateId:k=1,isShare:I,insurerCode:h="kunlunhealth"}=a.query,E={bankCardType:$.DEBIT};let X={};const ne=l(""),re=l({payMethod:Z.REAL_TIME,bankData:{...E,imagesId:[],images:[]}}),oe=l({payMethod:Z.REAL_TIME,expiryMethod:J.AUTOMATIC_PADDING,bankData:{...E,imagesId:[],images:[]},payInfoType:Q.FIRST_SAME}),ie=l({bankData:{...E,imagesId:[],images:[]}}),ve=l(Q.FIRST_SAME),ge=l({}),fe=l(!1),ke=l(),Ie=l(),he=l(),Ee=l({}),_e=(e,a)=>ge.value&&ge.value[a]&&ge.value[a][e]&&ge.value[a][e].isDisplay===f.YES,Ne=()=>{P({orderNo:d,saleUserId:v,tenantId:g}).then((e=>{const{code:l,data:n}=e;"10000"===l&&([de.PENDING,de.PAYMENT_FAILED,de.UNDER_WRITING_SUCCESS].includes(n.orderStatus)?Promise.all([ke.value?.validate(),Ie.value?.validate(),he.value?.validate()]).then((e=>{if(!fe.value)return void q.fail("请勾选同意银行转账授权");const l=[{...e[0],id:re.value.id,paymentType:le.FIRST_TERM},{...e[1],id:oe.value.id,paymentType:le.RENEW_TERM},{...e[2],id:ie.value.id,paymentType:le.REPRISE,payInfoType:ve.value}],n=[{category:z.OBVERSE_BANK_CARD,name:"首期签约银行卡正面",objectType:F.INIT_SIGN,type:"png",uri:e[0].images[0],id:re.value.bankData.imagesId[0]},{category:z.REVERSE_BANK_CARD,name:"首期签约银行卡背面",objectType:F.INIT_SIGN,type:"png",uri:e[0].images[1],id:re.value.bankData.imagesId[1]}];oe.value.payInfoType===Q.OTHER&&(n.push({category:z.OBVERSE_BANK_CARD,name:"续期签约银行卡正面",objectType:F.RENEWAL_SIGN,type:"png",uri:e[1].images[0],id:oe.value.bankData.imagesId[0]}),n.push({category:z.REVERSE_BANK_CARD,name:"续期签约银行卡正面",objectType:F.RENEWAL_SIGN,type:"png",uri:e[1].images[1],id:oe.value.bankData.imagesId[1]})),ve.value===Q.OTHER&&(n.push({category:z.OBVERSE_BANK_CARD,name:"年金签约银行卡正面",objectType:F.ANNUAL_SIGN,type:"png",uri:e[2].images[0],id:ie.value.bankData.imagesId[0]}),n.push({category:z.REVERSE_BANK_CARD,name:"年金签约银行卡背面",objectType:F.ANNUAL_SIGN,type:"png",uri:e[2].images[1],id:ie.value.bankData.imagesId[1]})),G({...X,pageCode:"payInfo",tenantOrderPayInfoList:l,extInfo:{...X.extInfo,templateId:k,pageCode:"payInfo",shareFlag:I?"Y":"N",buttonCode:W.payInfo},operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:n}).then((e=>{const{code:l,data:n}=e;"10000"===l&&n.success&&t.push({path:H[n.pageAction.data.nextPageCode],query:a.query})}))})):K("paymentResult",a.query))}))},Te=n((()=>{const e={...a.query,isShare:1,sharePageCode:"payInfo"};return`${window.location.origin}/phoneVerify?${Y.stringify(e)}`})),Re=(e=!1)=>{P({orderNo:d,saleUserId:v,tenantId:g}).then((a=>{const{code:t,data:l}=a;"10000"===t&&l&&(X=l,ne.value=l.tenantOrderHolder.name,l.tenantOrderPayInfoList.forEach((e=>{e.paymentType===le.FIRST_TERM?(re.value=e,re.value.bankData={...E,...e,images:[],imagesId:[]}):e.paymentType===le.RENEW_TERM?(oe.value=e,oe.value.bankData={...e,images:[],imagesId:[]}):e.paymentType===le.REPRISE&&(ie.value=e,ie.value.bankData={...e,images:[],imagesId:[]},ve.value=e.payInfoType)})),l.tenantOrderAttachmentList.forEach((e=>{e.objectType===F.INIT_SIGN?(e.category===z.OBVERSE_BANK_CARD&&(re.value.bankData.images[0]=e.uri,re.value.bankData.imagesId[0]=e.id),e.category===z.REVERSE_BANK_CARD&&(re.value.bankData.images[1]=e.uri,re.value.bankData.imagesId[1]=e.id)):e.objectType===F.RENEWAL_SIGN?(e.category===z.OBVERSE_BANK_CARD&&(oe.value.bankData.images[0]=e.uri,oe.value.bankData.imagesId[0]=e.id),e.category===z.REVERSE_BANK_CARD&&(oe.value.bankData.images[1]=e.uri,oe.value.bankData.imagesId[1]=e.id)):e.objectType===F.ANNUAL_SIGN&&(e.category===z.OBVERSE_BANK_CARD&&(ie.value.bankData.images[0]=e.uri,ie.value.bankData.imagesId[0]=e.id),e.category===z.REVERSE_BANK_CARD&&(ie.value.bankData.images[1]=e.uri,ie.value.bankData.imagesId[1]=e.id))})),e&&(l.tenantOrderPayInfoList.find((e=>e.paymentType===le.FIRST_TERM&&e.bankCardNo))||q("用户未完成银行卡信息填写")))}))},Ae=()=>{Re(!0)};return R((()=>{w({insureCode:h,objectType:4,tenantId:g,orderNo:d}).then((({code:e,data:a})=>{"10000"===e&&(Ee.value=a)})),A({pageCode:"payInfo",templateId:k}).then((e=>{const{code:a,data:t}=e;if("10000"===a){const e={};t.productInsureFactorList.forEach((a=>{e[a.moduleType]||(e[a.moduleType]={}),e[a.moduleType][a.code]=a})),ge.value=e}})),Re()})),(e,a)=>{const t=V("van-switch"),l=V("van-checkbox"),n=V("ProSvg"),d=V("van-button"),v=V("ProPageWrap");return r(),i(v,null,{default:p((()=>[b("div",ce,[y(D,{title:"首期支付"},{default:p((()=>[y(C,{ref_key:"form1",ref:ke},{default:p((()=>[_e("paymentMethod","INIT")?(r(),i(c,{key:0,modelValue:u(re).payMethod,"onUpdate:modelValue":a[0]||(a[0]=e=>u(re).payMethod=e),name:"payMethod",required:"",label:"支付方式","is-link":"",placeholder:"请选择","data-source":u(ee)},null,8,["modelValue","data-source"])):s("",!0),y(ue,{modelValue:u(re).bankData,"onUpdate:modelValue":a[1]||(a[1]=e=>u(re).bankData=e),"holder-name":u(ne),factor:u(ge).INIT},null,8,["modelValue","holder-name","factor"])])),_:1},512)])),_:1}),y(D,{title:"续期支付"},{default:p((()=>[y(C,{ref_key:"form2",ref:Ie},{default:p((()=>[_e("sameAsInit","RENEWAL")?(r(),i(m,{key:0,label:"同首期",name:"payInfoType"},{input:p((()=>[y(t,{modelValue:u(oe).payInfoType,"onUpdate:modelValue":a[2]||(a[2]=e=>u(oe).payInfoType=e),size:"22","active-value":u(Q).FIRST_SAME,"inactive-value":u(Q).OTHER},null,8,["modelValue","active-value","inactive-value"])])),_:1})):s("",!0),_e("paymentMethod","RENEWAL")?(r(),i(c,{key:1,modelValue:u(oe).payMethod,"onUpdate:modelValue":a[3]||(a[3]=e=>u(oe).payMethod=e),name:"payMethod",label:"支付方式","is-link":"",placeholder:"请选择","data-source":u(ee),required:""},null,8,["modelValue","data-source"])):s("",!0),_e("overduePayment","RENEWAL")?(r(),i(c,{key:2,modelValue:u(oe).expiryMethod,"onUpdate:modelValue":a[4]||(a[4]=e=>u(oe).expiryMethod=e),name:"expiryMethod",label:"保费逾期未支付","is-link":"",placeholder:"请选择","data-source":u(ae),required:"","label-width":"200"},null,8,["modelValue","data-source"])):s("",!0),u(oe).payInfoType!==u(Q).FIRST_SAME?(r(),i(ue,{key:3,modelValue:u(oe).bankData,"onUpdate:modelValue":a[5]||(a[5]=e=>u(oe).bankData=e),"holder-name":u(ne),factor:u(ge).RENEWAL},null,8,["modelValue","holder-name","factor"])):s("",!0)])),_:1},512)])),_:1}),y(D,{title:"年金领取银行卡",class:"reprise-card","show-divider":!1},{default:p((()=>[b("div",se,[(r(!0),o(S,null,B(u(te),((e,a)=>(r(),o("div",{key:a,class:M(["reprise-card-item",{selected:u(ve)===e.value}]),onClick:a=>{return t=e.value,void(ve.value=t);var t}},O(e.label),11,me)))),128))]),y(C,{ref_key:"form3",ref:he},{default:p((()=>[u(ve)===u(Q).OTHER?(r(),i(ue,{key:0,modelValue:u(ie).bankData,"onUpdate:modelValue":a[6]||(a[6]=e=>u(ie).bankData=e),"holder-name":u(ne),factor:u(ge).ANNUITY},null,8,["modelValue","holder-name","factor"])):s("",!0)])),_:1},512)])),_:1}),b("div",pe,[y(l,{modelValue:u(fe),"onUpdate:modelValue":a[7]||(a[7]=e=>x(fe)?fe.value=e:null),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),_(" 投保人阅读并接受 "),y(U,{class:"file",title:"《银行转账授权》",content:u(Ee).materialContent,type:u(j)(u(Ee).materialContent,u(Ee).materialSource+"")},null,8,["content","type"])]),b("div",be,[u(I)?s("",!0):(r(),o("div",{key:0,class:"refresh-btn",onClick:Ae},[b("div",null,[y(n,{name:"refresh"})]),ye])),u(I)?s("",!0):(r(),i(L,{key:1,title:"邀请您填写银行卡信息",desc:"邀请您填写银行卡信息",link:u(Te),"-":""},{default:p((()=>[y(d,{plain:"",type:"primary"},{default:p((()=>[_("分享")])),_:1})])),_:1},8,["link"])),y(d,{type:"primary",class:"submit-btn",onClick:Ne},{default:p((()=>[_("下一步")])),_:1})])])])),_:1})}}});e("default",a(ve,[["__scopeId","data-v-7a52b3b4"]]))}}}))}();

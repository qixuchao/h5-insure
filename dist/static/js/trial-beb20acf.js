var we=Object.defineProperty,Ue=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var Re=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var Oe=(a,n,V)=>n in a?we(a,n,{enumerable:!0,configurable:!0,writable:!0,value:V}):a[n]=V,K=(a,n)=>{for(var V in n||(n={}))Me.call(n,V)&&Oe(a,V,n[V]);if(Re)for(var V of Re(n))Ne.call(n,V)&&Oe(a,V,n[V]);return a},H=(a,n)=>Ue(a,$e(n));import{g as q,L as S,X as w,r as O,h as g,m as T,n as C,k as h,y as x,z as t,a1 as _e,a2 as Te,a5 as z,C as $,a4 as G,x as N,d as W,j as R,s as P,I as U,a6 as qe,o as Se,F as Q,E as J,ag as Ye,ah as je,B as Be,D as Ge}from"./vendor-d47732e4.js";import{S as Ke,a as He,R as We,b as X,A as Xe,c as ze,L as Pe,d as Qe}from"./trial-b99fae95.js";import{g as Je}from"./index-253f1749.js";import{l as xe}from"./useStorage-0cc7d8b3.js";import{_ as Y,b as Z}from"./index-a2c45247.js";const Ze=a=>(_e("data-v-4b261f8d"),a=a(),Te(),a),et={class:"com-occupational-wrapper"},tt=Ze(()=>x("div",{class:"popup-title"},"\u9009\u62E9\u804C\u4E1A",-1)),it={class:"popup-content"},ot=q({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(a,{emit:n}){const V=a,A=S({show:V.show,options:[],currentValue:""}),v=()=>{n("close")},i=({value:f,selectedOptions:r})=>{const I=(r||[]).map(p=>p.value).join("/"),l=+r[r.length-1].name;n("update:modelValue",l),n("finish",I),v()},D=f=>{const r=f,I=l=>{l.forEach(p=>{const m=p;m.children.length?I(m.children):m.children=null})};return I(r),r},F=(f="")=>{var l;const r=`${(l=f==null?void 0:f.toLocaleUpperCase)==null?void 0:l.call(f)}_OCCUPATION`,I=xe.get("occupational")||{};if(I[r]){A.options=I[r];return}Je({dictCodeList:[r]}).then(({code:p,data:m})=>{var k;if(p==="10000"){const o=D(((k=m==null?void 0:m[0])==null?void 0:k.dictItemList)||[]);A.options=o,I[r]=o,xe.set("occupational",I)}})};return w(()=>V,()=>{F(V.insuredCode)},{deep:!0,immediate:!0}),w(()=>V.modelValue,f=>{},{deep:!0,immediate:!0}),(f,r)=>{const I=O("van-cascader"),l=O("VanPopup");return g(),T("div",et,[C(l,{show:t(A).show,"onUpdate:show":r[1]||(r[1]=p=>t(A).show=p),"show-footer":"",position:"bottom",closeable:"",onClose:v},{default:h(()=>[tt,x("div",it,[C(I,{modelValue:t(A).currentValue,"onUpdate:modelValue":r[0]||(r[0]=p=>t(A).currentValue=p),title:"\u8BF7\u9009\u62E9\u804C\u4E1A","show-header":!1,placeholder:"\u8BF7\u9009\u62E9",options:t(A).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:i},null,8,["modelValue","options"])])]),_:1},8,["show"])])}}});var at=Y(ot,[["__scopeId","data-v-4b261f8d"]]);const nt={class:"com-personal-info-wrapper"},ut={key:0,class:"placeholder"},lt={key:1},rt=q({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(a,{expose:n}){const V=a,[A,v]=z(),[i,D]=z(),F=$(),f=G("source")||{},r=S({formInfo:V.formInfo,occupationalText:""}),I=o=>{r.occupationalText=o},l=()=>{D(!1)},p=()=>new Promise((o,e)=>{F==null||F.value.validate().then(()=>{o("")},()=>{e()})}),m=o=>{const e=o||[];for(let d=0;d<e.length;d++)for(let s=d+1;s<e.length;s++){const u=e[d].split("_"),y=e[s].split("_"),E=e[d];u[0]===y[0]?u>y&&(e[d]=e[s],e[s]=E):u[0]==="age"&&(e[d]=e[s],e[s]=E)}return e},k=N(()=>{const o=m(V==null?void 0:V.ageRange),e=(E="")=>{const L=+E.split("_")[1],j=E.split("_")[0];return[L,j]},d=e(o[0]),s=e(o[o.length-1]),u=W().subtract(d[0],d[1]==="age"?"year":"day").format("YYYY-MM-DD"),y=W().subtract(s[0],s[1]==="age"?"year":"day").format("YYYY-MM-DD");return console.log("ageRangeObj",new Date(y),new Date(u)),{minAge:new Date(y),maxAge:new Date(u)}});return n({validateForm:p,ageRangeObj:k.value}),(o,e)=>{const d=O("VanField"),s=O("ProRadioButton"),u=O("VanForm"),y=O("van-datetime-picker"),E=O("van-popup");return g(),T("div",nt,[C(u,{ref_key:"formRef",ref:F,"input-align":"right","error-message-align":"right"},{default:h(()=>[t(f).type==="proposal"&&(t(f).type==="add"||t(f).type==="repeatAdd")||t(f).type!=="proposal"&&(a.factorList.includes("APPLICANT.AGE")||a.factorList.includes("AGE")||a.factorList.includes("DAY")||a.factorList.includes("APPLICANT.DAY"))?(g(),R(d,{key:0,modelValue:t(r).formInfo.birthday,"onUpdate:modelValue":e[0]||(e[0]=L=>t(r).formInfo.birthday=L),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F",class:"isLink",readonly:"","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[1]||(e[1]=L=>t(v)(!0))},null,8,["modelValue"])):P("",!0),t(f).type==="proposal"&&(t(f).type==="add"||t(f).type==="repeatAdd")||t(f).type!=="proposal"&&(a.factorList.includes("APPLICANT.GENDER")||a.factorList.includes("GENDER"))?(g(),R(d,{key:1,modelValue:t(r).formInfo.gender,"onUpdate:modelValue":e[3]||(e[3]=L=>t(r).formInfo.gender=L),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},{input:h(()=>[C(s,{modelValue:t(r).formInfo.gender,"onUpdate:modelValue":e[2]||(e[2]=L=>t(r).formInfo.gender=L),options:t(Ke)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),a.factorList.includes("SOCIAL_INS")?(g(),R(d,{key:2,modelValue:t(r).formInfo.socialSecurity,"onUpdate:modelValue":e[5]||(e[5]=L=>t(r).formInfo.socialSecurity=L),name:"socialSecurity",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u793E\u4FDD"}]},{input:h(()=>[C(s,{modelValue:t(r).formInfo.socialSecurity,"onUpdate:modelValue":e[4]||(e[4]=L=>t(r).formInfo.socialSecurity=L),options:t(He)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),a.factorList.includes("OCCUPATION_CATEGORY")?(g(),R(d,{key:3,modelValue:t(r).formInfo.occupationalClass,"onUpdate:modelValue":e[6]||(e[6]=L=>t(r).formInfo.occupationalClass=L),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u804C\u4E1A\u7C7B\u578B"}],name:"occupationalClass",label:"\u804C\u4E1A\u7C7B\u578B","is-link":"",readonly:"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[7]||(e[7]=L=>t(D)(!0))},{input:h(()=>[t(r).occupationalText?(g(),T("div",lt,U(t(r).occupationalText),1)):(g(),T("span",ut,"\u8BF7\u9009\u62E9"))]),_:1},8,["modelValue"])):P("",!0)]),_:1},512),C(E,{show:t(A),"onUpdate:show":e[10]||(e[10]=L=>qe(A)?A.value=L:null),position:"bottom"},{default:h(()=>[C(y,{type:"date","min-date":t(k).minAge,"max-date":t(k).maxAge,onConfirm:e[8]||(e[8]=L=>{t(r).formInfo.birthday=t(W)(L).format("YYYY-MM-DD"),t(v)(!1)}),onCancel:e[9]||(e[9]=L=>t(v)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"]),t(i)?(g(),R(at,{key:0,modelValue:t(r).formInfo.occupationalClass,"onUpdate:modelValue":e[11]||(e[11]=L=>t(r).formInfo.occupationalClass=L),show:t(i),"insured-code":a.insuredCode,onFinish:I,onClose:l},null,8,["modelValue","show","insured-code"])):P("",!0)])}}});var qt=Y(rt,[["__scopeId","data-v-7b008a27"]]);const st={class:"com-risk-card-wrapper part-card"},dt={class:"custom-field"},mt={class:"field-tip"},ct={class:"custom-field"},ft={class:"field-tip"},pt={class:"custom-field"},yt={class:"field-tip"},gt={key:0},Vt={key:9,class:"liab-desc"},kt=q({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(a){const n=a,V=$({}),A=G("premium")||{};V.value=G("enumList")||{};const v=$({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),i=S({formInfo:n.formInfo}),D=o=>typeof o!="boolean"&&!o||Array.isArray(o)&&!o.length?!0:{}.toString.call(o)==="[object Object]"?Object.keys(o).length:!1,F=(o,e,d={})=>{let s=e;return Array.isArray(e)||(s=[`${s}`]),(o||[]).filter(u=>s.includes(`${u.value}`)||s.includes(u.value))},f=N(()=>{var o,e,d,s,u;return((o=n.originData)==null?void 0:o.riskType)===1?F(n.enums.RISK_INSURANCE_PERIOD,((e=n.originData.riskInsureLimitVO)==null?void 0:e.insurancePeriodValueList)||[]):((d=n.originData)==null?void 0:d.periodType)===2?F([{value:"year_1",name:"1\u5E74"}],["year_1"]):F((s=n.enums)==null?void 0:s.RISK_INSURANCE_PERIOD,((u=n.mainRiskData.riskInsureLimitVO)==null?void 0:u.insurancePeriodValueList)||[])}),r=N(()=>{var o,e,d,s,u,y,E,L;return((o=n.originData)==null?void 0:o.riskType)===1?F((e=n==null?void 0:n.enums)==null?void 0:e.RISK_PAYMENT_PERIOD,((d=n.originData.riskInsureLimitVO)==null?void 0:d.paymentPeriodValueList)||[]):((s=n.originData)==null?void 0:s.exemptFlag)===1?F(We,[`${(y=(u=n==null?void 0:n.originData)==null?void 0:u.riskInsureLimitVO)==null?void 0:y.paymentPeriodRule}`]):((E=n.originData)==null?void 0:E.periodType)===2?F([{value:"year_1",name:"1\u5E74\u4EA4"}],["year_1"]):F(n.enums.RISK_PAYMENT_PERIOD,((L=n.mainRiskData.riskInsureLimitVO)==null?void 0:L.paymentPeriodValueList)||[])}),I=N(()=>{var o,e,d,s,u;return((o=n.originData)==null?void 0:o.riskType)===1?F(X,((e=n.originData.riskInsureLimitVO)==null?void 0:e.paymentFrequencyList)||[]):((d=n.originData.riskInsureLimitVO)==null?void 0:d.paymentTypeRule)===1?F(X,((s=n.mainRiskData.riskInsureLimitVO)==null?void 0:s.paymentFrequencyList)||[]):F(X,((u=n.mainRiskData.riskInsureLimitVO)==null?void 0:u.paymentFrequencyList)||[])}),l=N(()=>{var d,s;let o=0,e=0;return(((s=(d=n.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:s.paymentMethodLimitList)||[]).forEach((u,y)=>{y===0&&(o=u.minAmount,e=u.maxAmount),o>u.minAmount&&(o=u.minAmount),e<u.maxAmount&&(e=u.maxAmount)}),i.formInfo.amount=o,{min:o,max:e}}),p=N(()=>{var d,s;let o=0,e=0;return(((s=(d=n.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:s.paymentMethodLimitList)||[]).forEach((u,y)=>{y===0&&(o=u.minPremium,e=u.maxPremium),o>u.minPremium&&(o=u.minPremium),e<u.maxPremium&&(e=u.maxPremium)}),i.formInfo.premium=o,{min:o,max:e}}),m=N(()=>{var d,s,u,y;const o=((s=(d=n.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:s.minCopy)||1,e=(y=(u=n.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:y.maxCopy;return i.formInfo.copy=`${o||1}`,{min:o,max:e}}),k=(o,e,d)=>{var u,y;const s=((y=(u=n.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:y.increaseDecreaseNum)||1;if(d==="sumInsured"){if(l.value.max&&+o>l.value.max)return`\u91D1\u989D\u6700\u5927${l.value.max}\u5143`;if(+o<l.value.min)return`\u91D1\u989D\u6700\u5C0F${l.value.min}\u5143`}else{if(p.value.max&&+o>p.value.max)return`\u91D1\u989D\u6700\u5927${p.value.max}\u5143`;if(+o<p.value.min)return`\u91D1\u989D\u6700\u5C0F${p.value.min}\u5143`}return+o%s===0?"":`\u91D1\u989D\u5FC5\u987B\u662F${s}\u7684\u500D\u6570`};return Se(()=>{var e,d;const o={riskType:n.originData.riskType,riskId:n.originData.id,riskName:n.originData.riskName,riskCode:n.originData.riskCode,mainRiskCode:(e=n==null?void 0:n.mainRiskData)==null?void 0:e.riskCode,mainRiskId:(d=n==null?void 0:n.mainRiskData)==null?void 0:d.id,riskCategory:n.originData.riskCategory,liabilityVOList:(n.originData.riskLiabilityInfoVOList||[]).map(s=>H(K({},s),{liabilityAttributeCode:s.liabilityAttributeType,liabilityCode:s.liabilityCode,liabilityRateType:s.liabilityRateType}))};Object.assign(i==null?void 0:i.formInfo,o)}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.paymentFrequency},(o=0)=>{var e,d,s;[3].includes(((e=n.originData.riskCalcMethodInfoVO)==null?void 0:e.saleMethod)||0)&&(((s=(d=n.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:s.paymentMethodLimitList)||[]).forEach(u=>{+u.paymentFrequency==+o&&Object.assign(i.formInfo,{amount:u.perCopyAmount,premium:u.perCopyPremium})}),+o==1&&i.formInfo.chargePeriod!=="single"&&(i.formInfo.chargePeriod="single")}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.copy},o=>{var e,d;((e=n.originData.riskCalcMethodInfoVO)==null?void 0:e.saleMethod)===4&&(i.formInfo.amount=+(o||1)*(((d=n.originData.riskCalcMethodInfoVO)==null?void 0:d.fixedAmount)||0))}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.chargePeriod},o=>{o==="single"&&+(i.formInfo.paymentFrequency||0)!=1&&(i.formInfo.paymentFrequency=1)}),w(()=>n==null?void 0:n.mainRiskInfo,o=>{var e,d,s,u,y,E;o&&n.originData.riskType===2&&(((d=(e=n.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:d.insurancePeriodRule)===1&&(o.coveragePeriod?v.value.coveragePeriod.disabled=!0:v.value.coveragePeriod.prevent=!0,i.formInfo.coveragePeriod=o.coveragePeriod||""),((u=(s=n.originData)==null?void 0:s.riskInsureLimitVO)==null?void 0:u.paymentPeriodRule)===1&&(o.chargePeriod?v.value.chargePeriod.disabled=!0:v.value.chargePeriod.prevent=!0,i.formInfo.chargePeriod=o.chargePeriod||""),((E=(y=n.originData)==null?void 0:y.riskInsureLimitVO)==null?void 0:E.paymentTypeRule)===1&&(o.paymentFrequency?v.value.paymentFrequency.disabled=!0:v.value.paymentFrequency.prevent=!0,i.formInfo.paymentFrequency=o.paymentFrequency||0))},{immediate:!0,deep:!0}),(o,e)=>{var j,ee,te,ie,oe,ae,ne,ue,le,re,se,de,me,ce,fe,pe,ye,ge,Ve,ke,De,Ie,ve,Le,be,he,Fe,Ce,Ae,Ee;const d=O("ProSvg"),s=O("ProTitle"),u=O("VanStepper"),y=O("VanField"),E=O("ProRadioButton"),L=O("ProExpand");return g(),T("div",st,[C(s,{"risk-type":a.originData.riskType,title:a.originData.riskName},{default:h(()=>[a.removeRiskList.includes(a.originData.id)?(g(),T("div",{key:0,class:"delete-risk",onClick:e[0]||(e[0]=c=>a.removeRisk(a.originData.id))},[C(d,{name:"delete",color:"#0d6efe"})])):P("",!0)]),_:1},8,["risk-type","title"]),((j=a.originData.riskCalcMethodInfoVO)==null?void 0:j.saleMethod)===1&&a.originData.exemptFlag===2?(g(),R(y,{key:0,modelValue:t(i).formInfo.amount,"onUpdate:modelValue":e[2]||(e[2]=c=>t(i).formInfo.amount=c),label:"\u4FDD\u989D",name:"amount",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...c)=>k(...c,"sumInsured")}]},{input:h(()=>{var c,b;return[x("div",dt,[C(u,{modelValue:t(i).formInfo.amount,"onUpdate:modelValue":e[1]||(e[1]=_=>t(i).formInfo.amount=_),"input-width":"64px",min:t(l).min,step:((c=a.originData.riskCalcMethodInfoVO)==null?void 0:c.increaseDecreaseNum)||1,max:t(l).max},null,8,["modelValue","min","step","max"]),x("span",mt,U(`\u91D1\u989D\u6700\u4F4E${t(l).min}\u5143\uFF0C\u4E3A${((b=a.originData.riskCalcMethodInfoVO)==null?void 0:b.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((te=(ee=a.originData)==null?void 0:ee.riskCalcMethodInfoVO)==null?void 0:te.saleMethod)===2?(g(),R(y,{key:1,modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[4]||(e[4]=c=>t(i).formInfo.premium=c),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...c)=>k(...c,"premium")}]},{input:h(()=>{var c,b,_,B;return[x("div",ct,[C(u,{modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[3]||(e[3]=M=>t(i).formInfo.premium=M),step:((b=(c=a.originData)==null?void 0:c.riskCalcMethodInfoVO)==null?void 0:b.increaseDecreaseNum)||1,min:t(p).min,"input-width":"64px",max:t(p).max},null,8,["modelValue","step","min","max"]),x("span",ft,U(`\u91D1\u989D\u6700\u4F4E${t(p).min}\u5143\uFF0C\u4E3A${((B=(_=a.originData)==null?void 0:_.riskCalcMethodInfoVO)==null?void 0:B.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((oe=(ie=a.originData)==null?void 0:ie.riskCalcMethodInfoVO)==null?void 0:oe.saleMethod)===3||((ne=(ae=a.originData)==null?void 0:ae.riskCalcMethodInfoVO)==null?void 0:ne.saleMethod)===4&&(((le=(ue=a.originData)==null?void 0:ue.riskCalcMethodInfoVO)==null?void 0:le.minCopy)||((se=(re=a.originData)==null?void 0:re.riskCalcMethodInfoVO)==null?void 0:se.maxCopy))?(g(),R(y,{key:2,modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[6]||(e[6]=c=>t(i).formInfo.copy=c),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:h(()=>[x("div",pt,[C(u,{modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[5]||(e[5]=c=>t(i).formInfo.copy=c),step:1,min:t(m).min,max:t(m).max},null,8,["modelValue","min","max"]),x("span",yt,U(`${t(m).min}\u4EFD\u8D77\u8D2D\uFF0C\u6700\u591A\u8D2D\u4E70${t(m).max}\u4EFD`),1)])]),_:1},8,["modelValue"])):P("",!0),(![1].includes(((de=a.originData.riskCalcMethodInfoVO)==null?void 0:de.saleMethod)||0)||((me=a.originData)==null?void 0:me.exemptFlag)===1)&&(a.originData.riskCalcMethodInfoVO.fixedAmount||((fe=t(A))==null?void 0:fe[(ce=a.originData)==null?void 0:ce.riskCode]))?(g(),R(y,{key:3,label:"\u4FDD\u989D"},{input:h(()=>{var c,b,_,B;return[x("div",null,U(((c=a.originData.riskCalcMethodInfoVO)==null?void 0:c.fixedAmount)||((B=(_=t(A))==null?void 0:_[(b=a.originData)==null?void 0:b.riskCode])==null?void 0:B.amount)),1)]}),_:1})):P("",!0),!D((ye=(pe=a.originData)==null?void 0:pe.riskInsureLimitVO)==null?void 0:ye.insurancePeriodValueList)||!D((Ve=(ge=a.originData)==null?void 0:ge.riskInsureLimitVO)==null?void 0:Ve.insurancePeriodRule)?(g(),R(y,{key:4,modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":e[8]||(e[8]=c=>t(i).formInfo.coveragePeriod=c),label:"\u4FDD\u969C\u671F\u95F4",name:"coveragePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4FDD\u969C\u671F\u95F4"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":e[7]||(e[7]=c=>t(i).formInfo.coveragePeriod=c),disabled:v.value.coveragePeriod.disabled,prevent:v.value.coveragePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4FDD\u969C\u671F\u95F4":"",options:t(f),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!D((De=(ke=a.originData)==null?void 0:ke.riskInsureLimitVO)==null?void 0:De.paymentPeriodValueList)||!D((ve=(Ie=a.originData)==null?void 0:Ie.riskInsureLimitVO)==null?void 0:ve.paymentPeriodRule)?(g(),R(y,{key:5,modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":e[10]||(e[10]=c=>t(i).formInfo.chargePeriod=c),label:"\u4EA4\u8D39\u671F\u95F4",name:"chargePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u671F\u95F4"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":e[9]||(e[9]=c=>t(i).formInfo.chargePeriod=c),disabled:v.value.chargePeriod.disabled,prevent:v.value.chargePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u671F\u95F4":"",options:t(r),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!D((Le=a.originData.riskInsureLimitVO)==null?void 0:Le.paymentFrequencyList)||!D((be=a.originData.riskInsureLimitVO)==null?void 0:be.paymentPeriodRule)?(g(),R(y,{key:6,modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[12]||(e[12]=c=>t(i).formInfo.paymentFrequency=c),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u65B9\u5F0F"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[11]||(e[11]=c=>t(i).formInfo.paymentFrequency=c),disabled:v.value.paymentFrequency.disabled,prevent:v.value.paymentFrequency.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u65B9\u5F0F":"",options:t(I)},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),D((Fe=(he=a.originData)==null?void 0:he.riskInsureLimitVO)==null?void 0:Fe.annuityDrawTypeList)?P("",!0):(g(),R(y,{key:7,modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[14]||(e[14]=c=>t(i).formInfo.annuityDrawDate=c),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65F6\u95F4"}]},{input:h(()=>{var c;return[C(E,{modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[13]||(e[13]=b=>t(i).formInfo.annuityDrawDate=b),options:F(t(Xe),((c=a.originData.riskInsureLimitVO)==null?void 0:c.annuityDrawTypeList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),D((Ae=(Ce=a.originData)==null?void 0:Ce.riskInsureLimitVO)==null?void 0:Ae.annuityDrawFrequencyList)?P("",!0):(g(),R(y,{key:8,modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[16]||(e[16]=c=>t(i).formInfo.annuityDrawType=c),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65B9\u5F0F"}]},{input:h(()=>{var c;return[C(E,{modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[15]||(e[15]=b=>t(i).formInfo.annuityDrawType=b),options:F(t(ze),((c=a.originData.riskInsureLimitVO)==null?void 0:c.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),(g(!0),T(Q,null,J(a.originData.riskLiabilityInfoVOList||[],(c,b)=>(g(),T("div",{key:b},[c.optionalFlag===1?(g(),R(y,{key:0,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":_=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=_,label:c.liabilityName,name:"liabilityAttributeValue",rules:[{required:c.liabilityAttributeValue,message:`\u8BF7\u9009\u62E9${c.liabilityName}`}]},{input:h(()=>{var _,B;return[x("div",null,[D(c.liabilityAttributeValueList)?(g(),T("span",gt,"50\u4E07")):(g(),R(E,{key:1,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":M=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=M,options:F(t(Pe),(B=(_=a.originData.riskLiabilityInfoVOList)==null?void 0:_[b])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(g(),R(y,{key:1,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":_=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=_,label:c.liabilityName,name:"liabilityAttributeValue"},{input:h(()=>{var _,B;return[x("div",null,[D(c.liabilityAttributeValueList)?(g(),R(E,{key:0,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":M=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=M,options:t(Qe)},null,8,["modelValue","onUpdate:modelValue","options"])):(g(),R(E,{key:1,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":M=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=M,options:F(t(Pe),(B=(_=a.originData.riskLiabilityInfoVOList)==null?void 0:_[b])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label"]))]))),128)),((Ee=a.originData)==null?void 0:Ee.relationDesc)?(g(),T("div",Vt,[C(L,{title:"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E"},{default:h(()=>[x("div",null,U(a.originData.relationDesc),1)]),_:1})])):P("",!0)])}}});var Dt=Y(kt,[["__scopeId","data-v-7ff8d030"]]);const It=a=>(_e("data-v-1f13cbe8"),a=a(),Te(),a),vt={class:"com-risk-list-wrapper"},Lt=It(()=>x("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),bt={class:"risk-list"},ht={class:"cell-title"},Ft={class:"title"},Ct={class:"footer-bar"},At=Be("\u786E\u8BA4"),Et=q({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(a,{emit:n}){const V=a,A=$([]),v=$([]),i=$([...V.disabled]),D=S({show:V.show,currentChecked:[...V.modelValue]}),F=(l,p)=>{if(!V.collocationList.length){if(p){D.currentChecked=[];return}D.currentChecked.push(l);return}let m=D.currentChecked,k=i.value;p?(V.collocationList.forEach(o=>{l===o.riskId&&(o.collocationType===2?m=m.filter(e=>e!==o.collocationRiskId||e!==l):o.collocationType===3?(m=m.filter(e=>e!==l),k=k.filter(e=>e!==o.collocationRiskId)):m=m.filter(e=>e!==l))}),D.currentChecked=m,i.value=k):(V.collocationList.forEach(o=>{l===o.riskId&&(p||(o.collocationType===2?m.push(o.collocationRiskId):o.collocationType===3&&k.push(o.collocationRiskId),m.push(l)))}),D.currentChecked.push(...m),i.value=k)},f=l=>{var m,k,o;if(i.value.includes(l))return;const p=D.currentChecked.includes(l);F(l,p),(o=(k=(m=A==null?void 0:A.value)==null?void 0:m[l])==null?void 0:k.toggle)==null||o.call(k)},r=()=>{n("close")},I=()=>{const l=V.riskList.filter(p=>D.currentChecked.includes(p.id));n("update:modelValue",[...new Set(v.value)]),n("finished",l,i.value),n("close")};return Ye(()=>{A.value=[]}),w(()=>D.currentChecked,l=>{v.value=l},{deep:!0,immediate:!0}),w(()=>V.modelValue,l=>{v.value=l||[],i.value.push(...l||[])},{deep:!0,immediate:!0}),(l,p)=>{const m=O("van-checkbox"),k=O("VanCell"),o=O("van-cell-group"),e=O("van-checkbox-group"),d=O("VanButton"),s=O("VanPopup");return g(),T("div",vt,[C(s,{show:t(D).show,"onUpdate:show":p[1]||(p[1]=u=>t(D).show=u),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",round:"",position:"bottom",closeable:"",onClose:r},{default:h(()=>[Lt,x("div",bt,[C(e,{modelValue:v.value,"onUpdate:modelValue":p[0]||(p[0]=u=>v.value=u)},{default:h(()=>[C(o,{inset:""},{default:h(()=>[(g(!0),T(Q,null,J(a.riskList,u=>(g(),R(k,{key:u.id,title:u.riskName,disabled:i.value.includes(u.id),onClick:y=>f(u.id)},{"right-icon":h(()=>[C(m,{ref_for:!0,ref:y=>A.value[u.id]=y,shape:"square",disabled:i.value.includes(u.id),name:u.id,onClick:je(y=>f(u.id),["stop"])},null,8,["disabled","name","onClick"])]),title:h(()=>[x("div",ht,[x("div",Ft,U(u.riskName),1)])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),x("div",Ct,[C(d,{type:"primary",disabled:!t(D).currentChecked.length,block:"",onClick:I},{default:h(()=>[At]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var Rt=Y(Et,[["__scopeId","data-v-1f13cbe8"]]);const Ot={class:"risk-list-wrapper"},Pt={key:0,class:"add-rider-risk"},xt={class:"left-part"},_t=Be("+ \u9644\u52A0\u9669"),Tt=q({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(a){const n=a,V=G("source")||{},[A,v]=z(!1);$(null),$(null);const i=S({mainRiskInfo:n.riskInfo,riskInfo:n.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),D=(f,r)=>{i.currentRiskList=i.currentRiskList.concat(f),i.disabledList=r},F=f=>{Ge.confirm({message:"\u786E\u5B9A\u8981\u5220\u9664\u9644\u52A0\u9669\u4E48\uFF1F"}).then(()=>{var I;const r=[f];(((I=i.mainRiskData)==null?void 0:I.collocationVOList)||[]).forEach(l=>{f===l.riskId&&(l.collocationType===2||l.collocationType===3)&&r.push(l.collocationRiskId)}),i.checkedList=i.checkedList.filter(l=>!r.includes(l)),i.currentRiskList=i.currentRiskList.filter(l=>r.includes(l.id)?(Object.assign(i.riskInfo,{[l.id]:void 0}),!1):!0),i.disabledList=i.disabledList.filter(l=>!r.includes(l))}).catch(()=>{})};return w(()=>i.currentRiskList,f=>{const r=[i.mainRiskData,...f];let I=[],l=[];const p=[];r.forEach((m,k)=>{var e,d,s;const o=((e=m==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:e.riskFactorRelationList)||[];I=I.concat(o.filter(u=>u.factorObject==="insured").map(u=>u.factorCode)),l=l.concat(o.filter(u=>u.factorObject==="holder").map(u=>u.factorCode)),p.push((d=m==null?void 0:m.riskInsureLimitVO)==null?void 0:d.minHolderAge,(s=m==null?void 0:m.riskInsureLimitVO)==null?void 0:s.maxHolderAge)}),(f||[]).forEach(m=>{var o;const k={riskType:m.riskType,riskId:m.id,riskCode:m.riskCode,riskName:m.riskName,mainRiskCode:i.mainRiskData.riskCode,mainRiskId:(o=i.mainRiskData)==null?void 0:o.id,riskCategory:m.riskCategory,liabilityVOList:(m.riskLiabilityInfoVOList||[]).map(e=>H(K({},e),{liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType}))};i.riskInfo[m.id]||Object.assign(i.riskInfo,{[m.id]:k})}),n.pickFactor({insuredFactorList:[...new Set(I)],holderFactorList:[...new Set(l)],ageRange:p})},{deep:!0,immediate:!0}),w(()=>n.riskInfo,f=>{console.log("newVal",f),i.mainRiskInfo=Object.values(f||{}).find(r=>(r==null?void 0:r.riskType)===1)||{}},{deep:!0,immediate:!0}),w(()=>n.originData,f=>{let r=[];const I=[];V.origin==="proposal"?((f||[]).forEach(l=>{l.riskType===1&&(i.mainRiskData=l),r.push(l)}),r=r.filter(l=>V.showRiskList.includes(l.id))):(f||[]).forEach(l=>{l.riskType===1?(i.mainRiskData=l,r.push(l)):l.collocationType===2?r.push(l):I.push(l)}),i.riderRiskList=I,i.currentRiskList=r},{deep:!0,immediate:!0}),(f,r)=>{var l,p,m;const I=O("ProCheckButton");return g(),T("div",Ot,[(g(!0),T(Q,null,J(t(i).currentRiskList,(k,o)=>(g(),R(Dt,{key:k.id,"form-info":t(i).riskInfo[k.id],index:o,enums:a.enums,"main-risk-data":t(i).mainRiskData,"main-risk-info":t(i).mainRiskInfo,"origin-data":k,"remove-risk":F,"remove-risk-list":t(i).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"]))),128)),((l=t(i).riderRiskList)==null?void 0:l.length)-((p=t(i).checkedList)==null?void 0:p.length)&&t(V).origin!=="proposal"?(g(),T("div",Pt,[x("span",xt,U(`\u5171\u6709${t(i).riderRiskList.length-t(i).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),C(I,{activated:"",onClick:r[0]||(r[0]=k=>t(v)(!0))},{default:h(()=>[_t]),_:1})])):P("",!0),t(A)?(g(),R(Rt,{key:1,modelValue:t(i).checkedList,"onUpdate:modelValue":r[1]||(r[1]=k=>t(i).checkedList=k),show:t(A),disabled:t(i).disabledList,"risk-list":t(i).riderRiskList,"collocation-list":((m=t(i).mainRiskData)==null?void 0:m.collocationVOList)||[],onFinished:D,onClose:r[2]||(r[2]=k=>t(v)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):P("",!0)])}}});var St=Y(Tt,[["__scopeId","data-v-18d1cf23"]]);const Yt=(a={})=>Z.post("/api/app/insure/product/insureProductDetail",a),jt=a=>Z.post("/api/app/insure/insurance/premiumCalc",a),Gt=(a={})=>Z.post("/api/app/insure/product/insureProductDetailNew",a);export{qt as P,St as R,Rt as a,Yt as b,Gt as i,jt as p};

import{_ as a,d as e,i as s,h as t,j as o,aE as n,o as r,c as d,u as i,m as c,f as l,a as u,b as m,w as p,a8 as f,aL as h,a9 as y,bs as v,ag as g,cl as I,cm as j,cn as b}from"./index-2251e077.js";import{_ as k}from"./PolicyInfo-2d9598c1.js";import{u as P}from"./useOrder-cc85c1b4.js";import{p as x}from"./utils-9ac05a32.js";import{s as C,g as _,m as w}from"./trial-d489c27f.js";import{n as $}from"./nextStep-a325931e.js";import{B as L,a as S}from"./constants-62d1c4af.js";import"./utils-133a90cf.js";import"./infoCollection-a05c9b62.js";import"./trial-32cbf541.js";import"./core-d927ceb7.js";const B={class:"bank-info-wrap"},N={class:"footer-button"},O=e({name:"updateBankInfo"});var V=a(e({...O,setup(a){const e=s(),O=t(),{orderNo:V,isShare:q,tenantId:G,nextPageCode:U}=e.query,D=P(),E=o({schema:[],config:[],formData:[]}),M=o(!!q),R=o(),T=()=>{O.back()},z=(a,e)=>{const{holder:s,insured:t}=D.value;let o={name:s.name,gender:`${I[s.gender]}士`};"insured"===a&&(o={name:null==t?void 0:t[0].name,gender:`${I[null==t?void 0:t[0].gender]}士`}),j({shareType:0,title:`${b[e].title}`,desc:b[e].desc.replace("{name}",`${o.name}${o.gender},`),url:`${window.location.href}&objectType=${a}&isShare=1&nextPageCode=updateBankInfo`.replace("/updateBankInfo","/phoneVerify"),imageUrl:"https://aquarius-v100-test.oss-cn-hangzhou.aliyuncs.com/MyPicture/asdad.png"})},A=()=>{R.value&&R.value.validate(!1).then((a=>{a&&(q?$(D.value,((a,s)=>{s===h.JUMP_PAGE&&y(a.nextPageCode,e.query)}),e):(C(D.value).then((({code:a,data:e})=>{"10000"===a&&z("holder","pay")})),z("holder","pay")))}))};return n((()=>{(async()=>{let a={};const{code:e,data:s}=await _({orderNo:V,tenantId:G});"10000"===e&&(Object.assign(D.value,s,{extInfo:{...s.extInfo,buttonCode:L.SIGN,pageCode:S.SIGN}}),a=x(s.insuredList[0].productList)),w(a).then((({data:a,code:e})=>{if("10000"===e){const{productDetailResList:e,productFactor:s}=a,{payInfo:t}=v(s);E.value={...E.value,...t}}}))})()})),(a,e)=>{const s=g;return r(),d("div",B,[i(E).schema.length?(r(),c(k,{key:0,ref_key:"payInfoRef",ref:R,modelValue:i(D).tenantOrderPayInfoList,"onUpdate:modelValue":e[0]||(e[0]=a=>i(D).tenantOrderPayInfoList=a),schema:i(E).schema,"is-view":i(M)},null,8,["modelValue","schema","is-view"])):l("",!0),u("div",N,[m(s,{type:"primary",plain:"",onClick:T},{default:p((()=>[f("取消")])),_:1}),m(s,{type:"primary",onClick:A},{default:p((()=>[f("确认")])),_:1})])])}}}),[["__scopeId","data-v-92d8f3c6"]]);export{V as default};

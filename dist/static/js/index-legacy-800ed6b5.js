!function(){var e=document.createElement("style");e.innerHTML=".image-wrap[data-v-bb02bba6]{display:flex;justify-content:flex-start;width:9.2rem}.com-bank-card-info .field-title .sub-title[data-v-bb02bba6]{font-size:.34667rem;color:#99a9c0}.page-bank-card[data-v-578f39ac] .com-card-wrap .body{padding:0}.page-bank-card .reprise-card .reprise-card-list[data-v-578f39ac]{padding:0 .4rem;height:1.41333rem;display:flex;justify-content:space-between;align-items:center}.page-bank-card .reprise-card .reprise-card-list .reprise-card-item[data-v-578f39ac]{text-align:center;width:2.88rem;height:.8rem;line-height:.8rem;background:#f6f7fc;border-radius:.10667rem;color:#393d46;font-size:.34667rem}.page-bank-card .reprise-card .reprise-card-list .reprise-card-item.selected[data-v-578f39ac]{background:rgba(13,110,254,.1);border:1px solid #0d6efe;color:var(--zaui-brand, #0d6efe)}.page-bank-card .agree[data-v-578f39ac]{height:1.41333rem;display:flex;align-items:center;font-size:.37333rem;color:#393d46;background:var(--zaui-global-bg, #f2f5fc);padding:0 .4rem}.page-bank-card .agree .checkbox[data-v-578f39ac]{margin-right:.29333rem}.page-bank-card .agree .file[data-v-578f39ac]{color:var(--zaui-brand, #0d6efe)}.page-bank-card .footer[data-v-578f39ac]{position:static;justify-content:space-between}.page-bank-card .footer .refresh-btn[data-v-578f39ac]{width:.93333rem;border:none;color:var(--zaui-brand, #0d6efe);font-size:.4rem;line-height:.37333rem;text-align:center}.page-bank-card .footer .refresh-btn .text[data-v-578f39ac]{margin-top:.13333rem;font-size:.32rem}.page-bank-card .footer[data-v-578f39ac] .com-share{flex:1;margin-left:.26667rem}.page-bank-card .footer .submit-btn[data-v-578f39ac]{flex:1}\n",document.head.appendChild(e),System.register(["./vendor-legacy-6323ba73.js","./index-legacy-7f3d0096.js","./index-legacy-f53761db.js","./order-legacy-e1e2c746.js","./useDicData-legacy-0c2ba3ce.js","./index-legacy-fb7d4d67.js"],(function(e){"use strict";var a,l,t,n,d,r,o,u,i,c,s,m,p,v,b,y,f,g,E,k,I,R,T,h,_,A,N,D,C,V,S,M,O,B,x,P,L,U,j,w,F,K,H,q,G,W,z,Y,$;return{setters:[function(e){a=e.g,l=e.E,t=e.y,n=e._,d=e.j,r=e.n,o=e.k,u=e.A,i=e.t,c=e.m,s=e.z,m=e.p,p=e.a4,v=e.a5,b=e.C,y=e.O,f=e.a9,g=e.h,E=e.r,k=e.G,I=e.L,R=e.J,T=e.F,h=e.T},function(e){_=e.q},function(e){A=e._,N=e.Y,D=e.u,C=e.v,V=e.U,S=e.w,M=e.x,O=e.O,B=e.h,x=e.y,P=e.a,L=e.l,U=e.z,j=e.B,w=e.g,F=e.q,K=e.A,H=e.r,q=e.n,G=e.c},function(e){W=e.c,z=e.a},function(e){Y=e.u},function(e){$=e._}],execute:function(){var J=(e=>(e[e.REAL_TIME=1]="REAL_TIME",e[e.BATCH=2]="BATCH",e))(J||{});const Q=[{value:1,label:"实时转账"},{value:2,label:"批量扣款"}];W(Q);var X=(e=>(e[e.DEBIT=1]="DEBIT",e[e.CREDIT=2]="CREDIT",e[e.PRE_PAY=3]="PRE_PAY",e[e.PRE_CREDIT=4]="PRE_CREDIT",e[e.OTHER=5]="OTHER",e))(X||{});const Z=[{value:1,label:"借记卡"},{value:2,label:"贷记卡"},{value:3,label:"预付费卡"},{value:4,label:"准贷记卡"},{value:5,label:"其他"}];W(Z);var ee=(e=>(e[e.FIRST_TERM=1]="FIRST_TERM",e[e.RENEW_TERM=2]="RENEW_TERM",e[e.REPRISE=3]="REPRISE",e[e.OTHER=4]="OTHER",e))(ee||{});const ae=[{value:1,label:"首期支付"},{value:2,label:"续期支付"},{value:3,label:"年金领取"},{value:4,label:"其他"}];W(ae);var le=(e=>(e[e.FIRST_SAME=1]="FIRST_SAME",e[e.RENEW_SAME=2]="RENEW_SAME",e[e.OTHER=3]="OTHER",e))(le||{});const te=[{value:1,label:"同首期"},{value:2,label:"同续期"},{value:3,label:"其他"}];W(ae);var ne=(e=>(e[e.AUTOMATIC_PADDING=1]="AUTOMATIC_PADDING",e[e.CANCEL=2]="CANCEL",e))(ne||{});const de=[{value:1,label:"自动垫付"},{value:2,label:"中止合同"}];W(de);const re={class:"com-bank-card-info"},oe=(e=>(p("data-v-bb02bba6"),e=e(),v(),e))((()=>s("span",{class:"field-title"},[b("银行卡照片 "),s("span",{class:"sub-title"},"(需上传正反两面)")],-1))),ue={class:"image-wrap"};var ie=A(a({props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""},factor:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(e,{emit:a}){const p=e,v=Y("BANK"),b=l({bankCardType:X.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),y=e=>p.factor&&p.factor[e]&&p.factor[e].isDisplay===N.YES,f=e=>!(!e||2!==e.length)||"请上传银行卡正反面照片",g=t((()=>v.value.map((e=>({label:e.name,value:e.code}))))),E=e=>{M({ossKey:[e],imageType:O.BANK_CARD}).then((e=>{const{data:a,code:l}=e;if("10000"===l&&a&&a.bankCardOcrVO){b.value.bankCardNo=a.bankCardOcrVO.cardNo;const e=g.value.find((e=>e.label===a.bankCardOcrVO.bankName));e&&(b.value.payBank=e.value)}}))};return n((()=>p.modelValue),(e=>{b.value=e}),{immediate:!0}),n(b,(e=>{a("update:modelValue",e)})),(a,l)=>(d(),r("div",re,[y("cardType")?(d(),o(D,{key:0,modelValue:b.value.bankCardType,"onUpdate:modelValue":l[0]||(l[0]=e=>b.value.bankCardType=e),label:"卡片类型",name:"bankCardType","data-source":u(Z),"is-view":""},null,8,["modelValue","data-source"])):i("",!0),y("bankCardNumber")?(d(),o(C,{key:1,modelValue:b.value.bankCardNo,"onUpdate:modelValue":l[1]||(l[1]=e=>b.value.bankCardNo=e),label:"银行卡号",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"])):i("",!0),y("cardHolder")?(d(),o(C,{key:2,"model-value":e.holderName,label:"持卡人",name:"accountName","is-view":""},null,8,["model-value"])):i("",!0),y("bank")?(d(),o(D,{key:3,modelValue:b.value.payBank,"onUpdate:modelValue":l[2]||(l[2]=e=>b.value.payBank=e),name:"payBank",label:"开户银行","data-source":u(g),required:""},null,8,["modelValue","data-source"])):i("",!0),y("bankCardAttachment")?(d(),o(C,{key:4,label:"银行卡照片",block:"","label-width":"100%",name:"images",rules:[{validator:f}]},{label:c((()=>[oe])),input:c((()=>[s("div",ue,[m(S,{modelValue:b.value.images,"onUpdate:modelValue":l[3]||(l[3]=e=>b.value.images=e),"max-count":2,"upload-type":u(V).BANK_CARD,onOnUploadFinished:E},null,8,["modelValue","upload-type"])])])),_:1},8,["rules"])):i("",!0),y("bankPreMobile")?(d(),o(C,{key:5,modelValue:b.value.mobile,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value.mobile=e),label:"预留手机号",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])):i("",!0)]))}}),[["__scopeId","data-v-bb02bba6"]]);const ce=e=>(p("data-v-578f39ac"),e=e(),v(),e),se={class:"page-bank-card"},me={class:"reprise-card-list"},pe=["onClick"],ve={class:"agree"},be=b(" 投保人阅读并接受 "),ye={class:"footer-button footer"},fe=ce((()=>s("div",{class:"text"},"刷新",-1))),ge=b("分享"),Ee=b("下一步"),ke=a({setup(e){const a=y(),n=f(),{orderNo:p="2022072710380711215",agentCode:v="D1234567-1",tenantId:b="9991000007",templateId:A=1,isShare:V,insureCode:S="kunlunhealth"}=a.query,M={bankCardType:X.DEBIT};let O={};const W=l(""),Y=l({payMethod:J.REAL_TIME,bankData:{...M,imagesId:[],images:[]}}),Z=l({payMethod:J.REAL_TIME,expiryMethod:ne.AUTOMATIC_PADDING,bankData:{...M,imagesId:[],images:[]},payInfoType:le.FIRST_SAME}),ae=l({bankData:{...M,imagesId:[],images:[]}}),re=l(le.FIRST_SAME),oe=l({}),ue=l(!1),ce=l(),ke=l(),Ie=l(),Re=l({}),Te=(e,a)=>oe.value&&oe.value[a]&&oe.value[a][e]&&oe.value[a][e].isDisplay===N.YES,he=()=>{w({orderNo:p,saleUserId:v,tenantId:b}).then((e=>{const{code:l,data:t}=e;var d,r,o;"10000"===l&&(t.orderStatus!==z.PENDING&&t.orderStatus!==z.PAYMENT_FAILED?F("paymentResult",a.query):Promise.all([null===(d=ce.value)||void 0===d?void 0:d.validate(),null===(r=ke.value)||void 0===r?void 0:r.validate(),null===(o=Ie.value)||void 0===o?void 0:o.validate()]).then((e=>{if(!ue.value)return void h.fail("请勾选同意银行转账授权");const l=[{...e[0],id:Y.value.id,paymentType:ee.FIRST_TERM},{...e[1],id:Z.value.id,paymentType:ee.RENEW_TERM},{...e[2],id:ae.value.id,paymentType:ee.REPRISE,payInfoType:re.value}],t=[{category:K.OBVERSE_BANK_CARD,name:"首期签约银行卡正面",objectType:H.INIT_SIGN,type:"png",uri:e[0].images[0],id:Y.value.bankData.imagesId[0]},{category:K.REVERSE_BANK_CARD,name:"首期签约银行卡背面",objectType:H.INIT_SIGN,type:"png",uri:e[0].images[1],id:Y.value.bankData.imagesId[1]}];Z.value.payInfoType===le.OTHER&&(t.push({category:K.OBVERSE_BANK_CARD,name:"续期签约银行卡正面",objectType:H.RENEWAL_SIGN,type:"png",uri:e[1].images[0],id:Z.value.bankData.imagesId[0]}),t.push({category:K.REVERSE_BANK_CARD,name:"续期签约银行卡正面",objectType:H.RENEWAL_SIGN,type:"png",uri:e[1].images[1],id:Z.value.bankData.imagesId[1]})),re.value===le.OTHER&&(t.push({category:K.OBVERSE_BANK_CARD,name:"年金签约银行卡正面",objectType:H.ANNUAL_SIGN,type:"png",uri:e[2].images[0],id:ae.value.bankData.imagesId[0]}),t.push({category:K.REVERSE_BANK_CARD,name:"年金签约银行卡背面",objectType:H.ANNUAL_SIGN,type:"png",uri:e[2].images[1],id:ae.value.bankData.imagesId[1]})),q({...O,pageCode:"payInfo",tenantOrderPayInfoList:l,extInfo:{...O.extInfo,templateId:A,pageCode:"payInfo",shareFlag:V?"Y":"N"},operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:t}).then((e=>{const{code:l,data:t}=e;"10000"===l&&t.success&&n.push({path:G[t.pageAction.data.nextPageCode],query:a.query})}))})))}))},_e=t((()=>{const e={...a.query,isShare:1,sharePageCode:"payInfo"};return`${window.location.origin}/phoneVerify?${_.stringify(e)}`})),Ae=(e=!1)=>{w({orderNo:p,saleUserId:v,tenantId:b}).then((a=>{const{code:l,data:t}=a;"10000"===l&&t&&(O=t,W.value=t.tenantOrderHolder.name,t.tenantOrderPayInfoList.forEach((e=>{e.paymentType===ee.FIRST_TERM?(Y.value=e,Y.value.bankData={...M,...e,images:[],imagesId:[]}):e.paymentType===ee.RENEW_TERM?(Z.value=e,Z.value.bankData={...e,images:[],imagesId:[]}):e.paymentType===ee.REPRISE&&(ae.value=e,ae.value.bankData={...e,images:[],imagesId:[]},re.value=e.payInfoType)})),t.tenantOrderAttachmentList.forEach((e=>{e.objectType===H.INIT_SIGN?(e.category===K.OBVERSE_BANK_CARD&&(Y.value.bankData.images[0]=e.uri,Y.value.bankData.imagesId[0]=e.id),e.category===K.REVERSE_BANK_CARD&&(Y.value.bankData.images[1]=e.uri,Y.value.bankData.imagesId[1]=e.id)):e.objectType===H.RENEWAL_SIGN?(e.category===K.OBVERSE_BANK_CARD&&(Z.value.bankData.images[0]=e.uri,Z.value.bankData.imagesId[0]=e.id),e.category===K.REVERSE_BANK_CARD&&(Z.value.bankData.images[1]=e.uri,Z.value.bankData.imagesId[1]=e.id)):e.objectType===H.ANNUAL_SIGN&&(e.category===K.OBVERSE_BANK_CARD&&(ae.value.bankData.images[0]=e.uri,ae.value.bankData.imagesId[0]=e.id),e.category===K.REVERSE_BANK_CARD&&(ae.value.bankData.images[1]=e.uri,ae.value.bankData.imagesId[1]=e.id))})),e&&(t.tenantOrderPayInfoList.find((e=>e.paymentType===ee.FIRST_TERM&&e.bankCardNo))||h("用户未完成银行卡信息填写")))}))},Ne=()=>{Ae(!0)};return g((()=>{j({insureCode:S,objectType:4,tenantId:b,orderNo:p}).then((({code:e,data:a})=>{"10000"===e&&(Re.value=a)})),B({pageCode:"payInfo",templateId:A}).then((e=>{const{code:a,data:l}=e;if("10000"===a){const e={};l.productInsureFactorList.forEach((a=>{e[a.moduleType]||(e[a.moduleType]={}),e[a.moduleType][a.code]=a})),oe.value=e}})),Ae()})),(e,a)=>{const l=E("van-switch"),t=E("van-checkbox"),n=E("ProSvg"),p=E("van-button"),v=E("ProPageWrap");return d(),o(v,null,{default:c((()=>[s("div",se,[m(P,{title:"首期支付"},{default:c((()=>[m(x,{ref_key:"form1",ref:ce},{default:c((()=>[Te("paymentMethod","INIT")?(d(),o(D,{key:0,modelValue:Y.value.payMethod,"onUpdate:modelValue":a[0]||(a[0]=e=>Y.value.payMethod=e),name:"payMethod",required:"",label:"支付方式","is-link":"",placeholder:"请选择","data-source":u(Q)},null,8,["modelValue","data-source"])):i("",!0),m(ie,{modelValue:Y.value.bankData,"onUpdate:modelValue":a[1]||(a[1]=e=>Y.value.bankData=e),"holder-name":W.value,factor:oe.value.INIT},null,8,["modelValue","holder-name","factor"])])),_:1},512)])),_:1}),m(P,{title:"续期支付"},{default:c((()=>[m(x,{ref_key:"form2",ref:ke},{default:c((()=>[Te("sameAsInit","RENEWAL")?(d(),o(C,{key:0,label:"同首期",name:"payInfoType"},{input:c((()=>[m(l,{modelValue:Z.value.payInfoType,"onUpdate:modelValue":a[2]||(a[2]=e=>Z.value.payInfoType=e),size:"22","active-value":u(le).FIRST_SAME,"inactive-value":u(le).OTHER},null,8,["modelValue","active-value","inactive-value"])])),_:1})):i("",!0),Te("paymentMethod","RENEWAL")?(d(),o(D,{key:1,modelValue:Z.value.payMethod,"onUpdate:modelValue":a[3]||(a[3]=e=>Z.value.payMethod=e),name:"payMethod",label:"支付方式","is-link":"",placeholder:"请选择","data-source":u(Q),required:""},null,8,["modelValue","data-source"])):i("",!0),Te("overduePayment","RENEWAL")?(d(),o(D,{key:2,modelValue:Z.value.expiryMethod,"onUpdate:modelValue":a[4]||(a[4]=e=>Z.value.expiryMethod=e),name:"expiryMethod",label:"保费逾期未支付","is-link":"",placeholder:"请选择","data-source":u(de),required:"","label-width":"200"},null,8,["modelValue","data-source"])):i("",!0),Z.value.payInfoType!==u(le).FIRST_SAME?(d(),o(ie,{key:3,modelValue:Z.value.bankData,"onUpdate:modelValue":a[5]||(a[5]=e=>Z.value.bankData=e),"holder-name":W.value,factor:oe.value.RENEWAL},null,8,["modelValue","holder-name","factor"])):i("",!0)])),_:1},512)])),_:1}),m(P,{title:"年金领取银行卡",class:"reprise-card","show-divider":!1},{default:c((()=>[s("div",me,[(d(!0),r(T,null,k(u(te),((e,a)=>(d(),r("div",{key:a,class:I(["reprise-card-item",{selected:re.value===e.value}]),onClick:a=>{return l=e.value,void(re.value=l);var l}},R(e.label),11,pe)))),128))]),m(x,{ref_key:"form3",ref:Ie},{default:c((()=>[re.value===u(le).OTHER?(d(),o(ie,{key:0,modelValue:ae.value.bankData,"onUpdate:modelValue":a[6]||(a[6]=e=>ae.value.bankData=e),"holder-name":W.value,factor:oe.value.ANNUITY},null,8,["modelValue","holder-name","factor"])):i("",!0)])),_:1},512)])),_:1}),s("div",ve,[m(t,{modelValue:ue.value,"onUpdate:modelValue":a[7]||(a[7]=e=>ue.value=e),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),be,m(U,{class:"file",title:"《银行转账授权》",content:Re.value.materialContent,type:u(L)(Re.value.materialContent,Re.value.materialSource+"")},null,8,["content","type"])]),s("div",ye,[u(V)?i("",!0):(d(),r("div",{key:0,class:"refresh-btn",onClick:Ne},[s("div",null,[m(n,{name:"refresh"})]),fe])),u(V)?i("",!0):(d(),o($,{key:1,title:"邀请您填写银行卡信息",desc:"邀请您填写银行卡信息",link:u(_e),"-":""},{default:c((()=>[m(p,{plain:"",type:"primary"},{default:c((()=>[ge])),_:1})])),_:1},8,["link"])),m(p,{type:"primary",class:"submit-btn",onClick:he},{default:c((()=>[Ee])),_:1})])])])),_:1})}}});e("default",A(ke,[["__scopeId","data-v-578f39ac"]]))}}}))}();

import{g as P,aj as x,r as A,j as a,n as v,z as s,J as D,A as _,d as L,p as o,m as d,al as C,t as y,a1 as Y,a2 as j,C as h,D as w,T as G,E as F,y as V,X as $,h as H,k as B,G as W,F as q}from"./vendor-c15a8cf7.js";import{_ as U,P as T,u as z}from"./index-b78f50a6.js";import{d as J,g as X}from"./order-6acef783.js";import{O as K,a as k}from"./order-93bdfc9b.js";import"./utils-b6782348.js";const R=t=>(Y("data-v-a3f24c10"),t=t(),j(),t),Q={class:"com-order-item"},Z={class:"header"},tt={class:"product-name"},et={class:"company-name"},st={class:"status"},at={class:"info"},ot={class:"info-item"},dt=R(()=>s("div",{class:"label"},"\u6295\u4FDD\u4EBA",-1)),nt={class:"desc"},ut={class:"info-item"},lt=R(()=>s("div",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),it={class:"desc"},ct={class:"footer"},rt={class:"fee"},_t=h(" \u4FDD\u8D39\uFF1A"),vt={class:"money"},ht={key:0,class:"buttons"},pt=h("\u5220\u9664"),mt=h("\u53BB\u5904\u7406"),ft={key:1,class:"buttons"},Ct=h("\u5220\u9664"),gt=h("\u53BB\u652F\u4ED8"),yt={key:2,class:"buttons"},kt=h("\u5220\u9664"),Dt=h("\u53BB\u652F\u4ED8"),Et={key:3,class:"buttons"},bt={key:4,class:"buttons"},St={key:5,class:"buttons"},Ft=h("\u5220\u9664"),It={key:6,class:"buttons"},Nt=h("\u5220\u9664"),At=P({props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup(t,{emit:N}){const n=t,u=x(),l=()=>{w.confirm({title:"\u786E\u8BA4",message:"\u786E\u8BA4\u5220\u9664\u8BA2\u5355\uFF1F"}).then(()=>{J(n.detail.id,n.detail.orderStatus).then(i=>{const{code:c,data:e}=i;c==="10000"&&(G.success("\u5220\u9664\u6210\u529F"),N("afterDelete"))})})},E=()=>{const{goodsCode:i,orderNo:c,id:e,saleUserId:p,templateId:b,tenantId:S,insurerCode:m,productCategory:f,agencyId:r}=n.detail;u.push({path:T.payInfo,query:{productCode:i,orderNo:c,orderId:e,saleUserId:p,templateId:b,tenantId:S,insurerCode:m,productCategory:f,agencyCode:r}})},g=()=>{const{goodsCode:i,orderNo:c,id:e,saleUserId:p,templateId:b,tenantId:S,insurerCode:m,productCategory:f,agencyId:r}=n.detail;u.push({path:T[n.detail.pageCode],query:{productCode:i,orderNo:c,orderId:e,agentCode:p,templateId:b,tenantId:S,insurerCode:m,productCategory:f,agencyCode:r}})};return(i,c)=>{const e=A("van-button");return a(),v("div",Q,[s("div",Z,[s("div",tt,D(t.detail.goodsName),1),s("div",et,D(t.detail.abbreviation),1),s("div",st,D(_(K)[t.detail.orderStatus]),1)]),s("div",at,[s("div",ot,[dt,s("div",nt,D(t.detail.policyHolder),1)]),s("div",ut,[lt,s("div",it,D(_(L)(t.detail.orderStartDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),s("div",ct,[s("div",rt,[_t,s("span",vt,"\uFFE5"+D(t.detail.prem),1)]),t.detail.orderStatus===_(k).PENDING?(a(),v("div",ht,[o(e,{class:"button",onClick:C(l,["stop"])},{default:d(()=>[pt]),_:1},8,["onClick"]),o(e,{class:"button primary",onClick:C(g,["stop"])},{default:d(()=>[mt]),_:1},8,["onClick"])])):y("",!0),t.detail.orderStatus===_(k).PAYING?(a(),v("div",ft,[o(e,{class:"button",onClick:C(l,["stop"])},{default:d(()=>[Ct]),_:1},8,["onClick"]),o(e,{class:"button primary",onClick:C(E,["stop"])},{default:d(()=>[gt]),_:1},8,["onClick"])])):y("",!0),t.detail.orderStatus===_(k).PAYMENT_FAILED?(a(),v("div",yt,[o(e,{class:"button",onClick:C(l,["stop"])},{default:d(()=>[kt]),_:1},8,["onClick"]),o(e,{class:"button primary",onClick:C(E,["stop"])},{default:d(()=>[Dt]),_:1},8,["onClick"])])):y("",!0),t.detail.orderStatus===_(k).PAYMENT_SUCCESS?(a(),v("div",Et)):y("",!0),t.detail.orderStatus===_(k).UNDERWRITE?(a(),v("div",bt)):y("",!0),t.detail.orderStatus===_(k).INSURER_REJECT?(a(),v("div",St,[o(e,{class:"button",onClick:C(l,["stop"])},{default:d(()=>[Ft]),_:1},8,["onClick"])])):y("",!0),t.detail.orderStatus===_(k).TIMEOUT?(a(),v("div",It,[o(e,{class:"button",onClick:C(l,["stop"])},{default:d(()=>[Nt]),_:1},8,["onClick"])])):y("",!0)])])}}});var Bt=U(At,[["__scopeId","data-v-a3f24c10"]]);const Tt={class:"page-order"},Pt=P({setup(t){const N=x(),n=F(0),u=F(1),l=F(!1),E=F(!1),g=F([]),i=[{title:"\u5168\u90E8",status:""},{title:"\u5F85\u5904\u7406",status:"-1"},{title:"\u5F85\u652F\u4ED8",status:"0"},{title:"\u5DF2\u5B8C\u6210",status:"1"},{title:"\u5DF2\u5931\u6548",status:"2"}],c=V(()=>i[n.value].status),e=m=>{N.push(`/orderDetail?id=${m.id}`)},p=()=>{l.value=!0,X({condition:{orderTopStatus:c.value},pageSize:10,pageNum:u.value}).then(m=>{l.value=!1;const{code:f,data:r}=m;f==="10000"&&(u.value===1?g.value=r.datas:g.value=[...g.value,...r.datas]),E.value=g.value.length>=r.total})},b=()=>{u.value+=1,p(),console.log("\u{1F680} ~ handleLoad ~ pageNum.value",u.value)},S=()=>{u.value=1,p()};return $(c,()=>{u.value=1,p()}),H(()=>{p()}),(m,f)=>{const r=A("van-list"),M=A("ProPageWrap");return a(),B(M,{"main-class":"page-order-list"},{default:d(()=>[s("div",Tt,[o(z,{active:n.value,"onUpdate:active":f[0]||(f[0]=I=>n.value=I),list:i,"small-gap":"",class:"tab"},null,8,["active"]),o(r,{class:"body",loading:l.value,finished:E.value,onLoad:b},{default:d(()=>[(a(!0),v(q,null,W(g.value,(I,O)=>(a(),B(Bt,{key:O,detail:I,onClick:xt=>e(I),onAfterDelete:S},null,8,["detail","onClick"]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var Yt=U(Pt,[["__scopeId","data-v-6cd78898"]]);export{Yt as default};

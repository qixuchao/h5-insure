import{Y as e,_ as t,q as o,u as n,H as a,I as r,b as u,j as c,p as i,v as l}from"./index-d66a20d8.js";import{defineAsyncComponent as s,reactive as d,ref as v,onBeforeMount as m}from"vue";import{_ as p,t as f}from"./PayInfo-b4b67b23.js";import{g as I,i as h}from"./trial-0ac61dce.js";import{n as y}from"./nextStep-3971c3a9.js";import{u as g}from"./useAttachment-2f6cf69c.js";import{a as k,q as N}from"./product-d1af8bd8.js";import{g as V}from"./utils-57fec98c.js";import{u as C}from"./useOrder-d2812e23.js";import{P,B as b}from"./constants-7afb7c3d.js";import{a as j}from"./index-973d3f66.js";import{P as _}from"./index-88613e6f.js";import{R as B,b as E}from"./trial-b3f7bf73.js";import"./pdfh5-e588f83d.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";import"./_getTag-d5b47d26.js";import"./debounce-6981b306.js";import"./phoneVerify-a37057a4.js";import"./useDicData-b539129e.js";/* empty css              */import"./bankCard-54e59047.js";import"./core-15eeb464.js";import"./constant-8927d485.js";import"./infoCollection-e6a8a0ee.js";import"./cloneDeep-6abacc69.js";const O={class:"com-insured-part-wrapper"},w={class:"content-wrapper"};var S=t(vue.defineComponent({__name:"InsureInfo",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup:t=>(t,o)=>{const n=vue.resolveComponent("ProCell"),a=vue.resolveComponent("ProCard");return vue.openBlock(),vue.createElementBlock("div",O,[vue.createVNode(a,{title:"保障信息"},{default:vue.withCtx((()=>{var o;return[vue.createElementVNode("div",w,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList((null==(o=t.productData)?void 0:o.riskList)||[],((t,o)=>{var a;return vue.openBlock(),vue.createElementBlock("div",{key:o,class:"risk-item"},[t.riskType===vue.unref(B).MAIN_RISK?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("p",null,vue.toDisplayString(t.riskName),1),vue.createVNode(n,{title:"保障期间",content:t.coveragePeriodDesc},null,8,["content"]),vue.createVNode(n,{title:"交费期间",content:t.chargePeriodDesc},null,8,["content"])],64)):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createVNode(n,{title:t.riskName,content:"投保"},null,8,["title"]),t.exemptFlag===vue.unref(e).YES?(vue.openBlock(),vue.createBlock(n,{key:0,title:"交费期间",content:t.chargePeriodDesc},null,8,["content"])):(null==(a=t.liabilityList)?void 0:a.length)?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.createVNode(n,{title:"保障期间",content:t.coveragePeriodDesc},null,8,["content"]),vue.createVNode(n,{title:"交费期间",content:t.chargePeriodDesc},null,8,["content"]),vue.createVNode(n,{title:"交费方式",content:vue.unref(E)[t.paymentFrequency]},null,8,["content"])],64)):vue.createCommentVNode("",!0)],64)),vue.createVNode(n,{title:"保障金额",content:(t.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),vue.createVNode(n,{title:"首期保费",class:"price",content:(t.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])})),128)),vue.createVNode(n,{title:"首期总保费",class:"price",content:(t.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])]})),_:1})])}}),[["__scopeId","data-v-92348b0c"]]);const x={class:"long-info-preview"},L={class:"footer-btn"},D=vue.createElementVNode("span",null,"分享",-1),A=vue.defineComponent({__name:"infoPreview",setup(e){s((()=>o((()=>import("./index-4bd92c7d.js")),["static/js/index-4bd92c7d.js","static/css/index-fa4edf2a.css","static/js/index-d66a20d8.js","static/css/index-5064de6f.css","static/js/pdfh5-e588f83d.js","static/js/theme-65292714.js","static/js/index-88613e6f.js","static/css/index-827a8544.css","static/js/utils-57fec98c.js","static/js/infoCollection-e6a8a0ee.js","static/js/trial-b3f7bf73.js"]))),s((()=>o((()=>import("./index-37ac1006.js")),["static/js/index-37ac1006.js","static/css/index-4640d9aa.css"])));const t=n(),B=C(),{productCode:E="",tenantId:O,agentCode:w="",agencyCode:A,saleChannelId:F,isShare:T,orderNo:R,extraInfo:q,insurerCode:U,preview:M}=t.query;let Y={};try{Y=JSON.parse(decodeURIComponent(q))}catch(ue){}const W=d({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),J=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,$=v({imgUrl:"",desc:"",title:"",link:J}),G=v(),H=v(),z=v({}),K=v({}),Q=v([]),X=v(),Z=v({});v(!1),v(!1),v(0),v(!0),g(Z,X),v(!1);const ee=v(!1),te=v(),oe=()=>{y(B.value,((e,t)=>{t===u.JUMP_PAGE&&te.value.handleShare()}))},ne=async()=>{M?c(P.INFO_PREVIEW,t.query):(Object.assign(B.value,{extInfo:{...B.value.extInfo,buttonCode:b.INFO_PREVIEW,pageCode:P.INFO_PREVIEW}}),y(B.value,((e,o)=>{o===u.JUMP_PAGE&&i(e.nextPageCode,t.query)})))};d({tenantOrderPayInfoList:[]});const ae=v(),re=async()=>{k({productCode:E,tenantId:O}).then((({data:e,code:t})=>{if("10000"===t){z.value=e;const{wxShareConfig:t,showWXShare:o,title:n,desc:a,image:r}=(null==e?void 0:e.PRODUCT_LIST)||{};o?Object.assign($.value,{...t,imgUrl:t.image,isShare:o}):Object.assign($.value,{title:n,desc:a,imgUrl:r,isShare:o}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&l(e.BASIC_INFO.themeType)}})),R&&I({orderNo:R,tenantId:O}).then((({code:e,data:t})=>{"10000"===e&&(Object.assign(B.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),ae.value=t,ee.value=!0)})),N({productCode:E}).then((({code:e,data:t})=>{var o,n,a,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:u}=t;X.value=e||[];const{basicInfo:{questionnaireType:c},questions:i,questionnaireName:l}=(null==(o=null==u?void 0:u[0])?void 0:o.questionnaireDetailResponseVO)||{basicInfo:{}};c&&(Q.value=2===c?[{attachmentName:l,attachmentUri:i,attachmentType:"question"}]:[{attachmentName:l,attachmentUri:null==(n=null==i?void 0:i[0])?void 0:n.content,attachmentType:V(String(null==(a=null==i?void 0:i[0])?void 0:a.textType),null==(r=null==i?void 0:i[0])?void 0:r.content)}])}})),await h({productCode:E,isTenant:!M}).then((({data:e,code:t})=>{var o,n;if("10000"===t){K.value=e,Z.value=(null==(o=e.productPlanInsureVOList)?void 0:o[0])||{};const{payInfo:t}=f(null==(n=Z.value)?void 0:n.productFactor);W.payInfo={...W.payInfo,...t}}}))};return m((()=>{re()})),(e,t)=>{var o,n,u,c,i,l;const s=vue.resolveComponent("ProNavigator"),d=vue.resolveComponent("ProSvg");return vue.openBlock(),vue.createElementBlock("div",x,[vue.createVNode(s),vue.createVNode(S,{"product-data":null==(u=null==(n=null==(o=vue.unref(B).insuredList)?void 0:o[0])?void 0:n.productList)?void 0:u[0],"total-premium":vue.unref(B).orderAmount},null,8,["product-data","total-premium"]),(null==(c=vue.unref(Z))?void 0:c.productFactor)?(vue.openBlock(),vue.createBlock(vue.unref(j),{key:0,ref_key:"personalInfoRef",ref:H,modelValue:vue.unref(ae),"onUpdate:modelValue":t[0]||(t[0]=e=>vue.isRef(ae)?ae.value=e:null),"product-factor":null==(i=vue.unref(Z))?void 0:i.productFactor,"multi-insured-config":null==(l=vue.unref(Z))?void 0:l.multiInsuredConfigVO,"is-view":""},null,8,["modelValue","product-factor","multi-insured-config"])):vue.createCommentVNode("",!0),vue.unref(W).payInfo.schema.length?(vue.openBlock(),vue.createBlock(vue.unref(p),{key:1,ref_key:"payInfoRef",ref:G,modelValue:vue.unref(B).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>vue.unref(B).tenantOrderPayInfoList=e),schema:vue.unref(W).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):vue.createCommentVNode("",!0),vue.createElementVNode("div",L,[!vue.unref(T)&&vue.unref($).isShare&&vue.unref(a)()?(vue.openBlock(),vue.createBlock(r,vue.mergeProps({key:0},vue.unref($),{class:"share-btn",onClick:vue.withModifiers(oe,["stop"])}),{default:vue.withCtx((()=>[vue.createVNode(d,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),D])),_:1},16,["onClick"])):vue.createCommentVNode("",!0),vue.createVNode(_,{shadow:!1,onClick:ne},{default:vue.withCtx((()=>[vue.renderSlot(e.$slots,"default",{},(()=>[vue.createTextVNode("下一步")]))])),_:3})])])}}});export{A as default};

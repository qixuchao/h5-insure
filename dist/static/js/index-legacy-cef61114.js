!function(){var e=document.createElement("style");e.innerHTML=".com-select .com-select-container[data-v-9c6de82e]{padding:.4rem}.com-select .com-select-container .radio-item[data-v-9c6de82e]{margin:.26667rem 0}.com-select .com-select-container .radio-item .radio-item-wrapper[data-v-9c6de82e]{padding:0 .42667rem}.com-select .com-select-container .radio-item .radio-item-wrapper p[data-v-9c6de82e]{font-size:.4rem;font-family:PingFangSC-Semibold,PingFang SC,serif;color:#393d46;margin:.06667rem 0}.com-select .com-select-container .radio-item .radio-item-wrapper .name[data-v-9c6de82e]{font-weight:600;margin-right:.4rem}.com-select .com-select-container .radio-item .radio-item-wrapper .phone[data-v-9c6de82e]{font-weight:400}.page-info-wrapper{padding-bottom:2rem}.page-info-wrapper .com-card .com-card-wrap .body{padding:0}.page-info-wrapper .beneficiary-part .part-title{display:flex;align-items:center;justify-content:space-between;padding:0 var(--zaui-card-border, .4rem);background-color:#f2f5fc;height:1.2rem}.page-info-wrapper .beneficiary-part .part-title .title{font-size:.4rem;font-weight:600;color:#393d46}.page-info-wrapper .left{flex:0 0 50%}.page-info-wrapper .left .trial-result{font-size:.45333rem;color:#393d46}.page-info-wrapper .left .trial-result .result-num{margin-left:.17333rem;color:#ff5840;font-weight:700;margin-left:.21333rem}.page-info-wrapper .left .result-desc{font-size:.32rem;color:#666}.page-info-wrapper .operate-btn{width:50%}.page-info-wrapper .radio-item-wrapper{padding:0}.page-info-wrapper .radio-item-wrapper p{font-size:.4rem;color:#393d46;margin:.06667rem 0;word-break:break-all}.page-info-wrapper .radio-item-wrapper .name{font-weight:600;margin-right:.4rem}.page-info-wrapper .radio-item-wrapper .phone{font-weight:400}\n",document.head.appendChild(e),System.register(["./vendor-legacy-a96446a8.js","./index-legacy-47f296e3.js","./trial-legacy-bd27f31b.js","./trial-legacy-29849d03.js","./useDicData-legacy-1135a8b7.js","./index-legacy-b5aed04d.js"],(function(e){"use strict";var t,r,n,a,i,o,d,l,s,u,c,p,f,m,v,I,y,O,L,g,h,b,C,w,k,x,P,E,R,T,V,A,_,H,N,B,j,D,S,U,F;return{setters:[function(e){t=e.g,r=e.E,n=e._,a=e.r,i=e.j,o=e.k,d=e.m,l=e.z,s=e.p,u=e.n,c=e.G,p=e.J,f=e.F,m=e.C,v=e.ak,I=e.O,y=e.Q,O=e.M,L=e.y,g=e.o,h=e.A,b=e.t,C=e.d,w=e.T},function(e){k=e._,x=e.z,P=e.w,E=e.r,R=e.Q,T=e.R,V=e.n,A=e.P},function(e){_=e.p},function(e){H=e.f,N=e.g,B=e.h},function(e){j=e.u},function(e){D=e._,S=e.R,U=e.B,F=e.a}],execute:function(){const Y={class:"com-select-container"},z={class:"radio-item-wrapper"},q={class:"name"},M={class:"hone"},$={class:"address"},G={class:"footer-button"},Q=m("取消"),J=m("确认"),W=t({props:{dataSource:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},modelValue:{type:[String,Number],default:null}},emits:["update","update:modelValue","submit","close"],setup(e,{emit:t}){const m=e,v=r(m.modelValue),I=r(m.show),y=()=>{t("submit",v.value),I.value=!1},O=()=>{t("close")};return n((()=>m.modelValue),(e=>{v.value=e})),n((()=>v.value),(e=>{t("update:modelValue",e)})),(t,r)=>{const n=a("van-radio"),m=a("van-radio-group"),L=a("VanButton");return i(),o(x,{show:I.value,"onUpdate:show":r[1]||(r[1]=e=>I.value=e),class:"com-select",title:"选择保单通讯信息",onClose:O},{default:d((()=>[l("div",Y,[s(m,{modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=e=>v.value=e)},{default:d((()=>[(i(!0),u(f,null,c(e.dataSource,((e,t)=>(i(),o(n,{key:t,name:t+1,class:"radio-item"},{default:d((()=>[l("div",z,[l("p",null,[l("span",q,p(e.contactName),1),l("span",M,p(e.contactPhoneNo),1)]),l("p",$,p(e.contactAddress),1)])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])]),l("div",G,[s(L,{plain:"",type:"primary"},{default:d((()=>[Q])),_:1}),s(L,{type:"primary",onClick:y},{default:d((()=>[J])),_:1})])])),_:1},8,["show"])}}});var K=k(W,[["__scopeId","data-v-9c6de82e"]]);const X={key:0,class:"beneficiary-part"},Z={class:"part-title"},ee={class:"title"},te=m("删除"),re=m("+添加受益人"),ne=m("选择保单通讯信息"),ae={class:"radio-item-wrapper"},ie={class:"name"},oe={class:"hone"},de={class:"address"},le={class:"footer-button"},se={class:"left"},ue={class:"trial-result"},ce=m(" 首期"),pe={class:"result-num"},fe=l("div",{class:"result-desc"},"实际保费以后续为准",-1),me={class:"operate-btn"},ve=m("下一步");e("default",t({setup(e){const t=v(),m=I(),{templateId:k=1,orderNo:x="2022072710380711215",productCode:Y,tenantId:z="9991000007",proposalId:q}=m.query,[M,$]=y(),G="/infoPreview"===m.path?"infoPreview":"infoCollection",Q=j("NATIONAL_REGION_CODE"),J=r({}),W=r({extInfo:{pageCode:G},tenantOrderHolder:{extInfo:{occupationCodeList:[]},holderType:1},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),Ie=r(null),ye=r([]),Oe=r([]),Le=r([]),ge=r([]),he=r([]),be=O({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),Ce=L((()=>{var e,t;return be.currentAddress?be.addressList[be.currentAddress-1]||{}:(null===(e=W.value.extInfo)||void 0===e||null===(t=e.contactInfo)||void 0===t?void 0:t[0])||{}})),we=e=>{const t={};return e.map((e=>{const{initialAmount:r,annuityDrawFrequency:n,annuityDrawType:a,paymentFrequency:i,paymentPeriod:o,paymentPeriodType:d,insurancePeriodType:l,insurancePeriodValue:s,riskCode:u,riskType:c,initialPremium:p,liabilityDetails:f,extInfo:m}=e,{riskId:v,copy:I}=m,y={amount:r,annuityDrawDate:n,annuityDrawType:a,paymentFrequency:i,riskId:v,copy:I,chargePeriod:o?`${H[d]}_${o}`:H[d],coveragePeriod:s?`${N[l]}_${s}`:N[l],riskCode:u,riskType:c,premium:p,liabilityVOList:f};return c===B.mainRisk?(t.mainRiskCode=u,t.mainRiskId=v):Object.assign(y,t),y}))},ke=()=>{var e;null===(e=Ie.value)||void 0===e||e.validate().then((()=>{const{birthday:e,gender:r,extInfo:n}=W.value.tenantOrderHolder,{hasSocialInsurance:a,occupationCodeList:i}=n,{birthday:o,gender:d,extInfo:l,tenantOrderProductList:s}=W.value.tenantOrderInsuredList[0],{hasSocialInsurance:u,occupationCodeList:c}=l,p={holder:{personVO:{birthday:C(e).format("YYYY-MM-DD"),gender:r,socialFlag:a,occupationCodeList:i}},productCode:Y,insuredVOList:[{insuredCode:"",personVO:{birthday:C(o).format("YYYY-MM-DD"),gender:d,socialFlag:u,occupationCodeList:c},productPlanVOList:[{insurerCode:"",planCode:"",riskVOList:we(s[0].tenantOrderRiskList)}]}]};_({...p}).then((({code:e,data:r})=>{if("10000"===e){const e={},n=(t=[])=>{(t||[]).forEach((t=>{var r;e[t.riskCode]=t,null!==(r=t.riskPremiumDetailVOList)&&void 0!==r&&r.length&&n(t.riskPremiumDetailVOList)}))};n(r.riskPremiumDetailVOList),W.value.tenantOrderInsuredList[0].tenantOrderProductList[0]={...W.value.tenantOrderInsuredList[0].tenantOrderProductList[0],premium:r.premium,tenantOrderRiskList:W.value.tenantOrderInsuredList[0].tenantOrderProductList[0].tenantOrderRiskList.map((t=>({...t,initialAmount:e[t.riskCode].amount,initialPremium:e[t.riskCode].premium})))},(()=>{var e;const r={...W.value};r.extInfo={...r.extInfo,contactInfo:[Ce.value]},r.tenantOrderAttachmentList=[{category:R.OBVERSE_CERT,objectType:T.HOLDER,objectId:W.value.tenantOrderHolder.id,name:"投保人证件正面",uri:ye.value[0],id:Le.value[0]},{category:R.REVERSE_CERT,objectType:T.HOLDER,objectId:W.value.tenantOrderHolder.id,name:"投保人证件背面",uri:ye.value[1],id:Le.value[1]},{category:R.OBVERSE_CERT,objectType:T.INSURED,objectId:W.value.tenantOrderInsuredList[0].id,name:"被保人证件正面",uri:Oe.value[0]||ye.value[0],id:ge.value[1]},{category:R.REVERSE_CERT,objectType:T.INSURED,objectId:W.value.tenantOrderInsuredList[0].id,name:"被保人证件背面",uri:Oe.value[1]||ye.value[1],id:ge.value[1]}],null===(e=Ie.value)||void 0===e||e.validate().then((e=>{if(r.tenantOrderInsuredList[0].insuredBeneficiaryType===F.SPECIFY){const e={};if(r.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.forEach((t=>{e[t.benefitOrder]?e[t.benefitOrder].sum+=Number(t.benefitRate):e[t.benefitOrder]={sum:Number(t.benefitRate)}})),Object.values(e).some((e=>100!==e.sum)))return void w.fail("同一顺位的受益人比例之和必须为100")}V(r).then((({code:e,data:r})=>{"10000"===e&&"jumpToPage"===r.pageAction.pageAction&&t.push({path:A[r.pageAction.data.nextPageCode],query:m.query})}))}))})()}}))}))},xe=e=>{},Pe=()=>{be.beneficiaryId+=1,W.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.push({id:be.beneficiaryId,extInfo:{}})};return g((()=>{E({orderNo:x,tenantId:z}).then((({code:e,data:t})=>{if("10000"===e){const e=t;e.extInfo={...e.extInfo,pageCode:G,templateId:k},e.tenantOrderHolder=e.tenantOrderHolder||{holderType:1},e.tenantOrderHolder.extInfo=e.tenantOrderHolder.extInfo||{occupationCodeList:[]},e.tenantOrderInsuredList[0].extInfo=e.tenantOrderInsuredList[0].extInfo||{occupationCodeList:[]},e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map((e=>{const t=e;return t.extInfo=t.extInfo||{occupationCodeList:[]},t})),e.tenantOrderAttachmentList.forEach((e=>{e.category===R.OBVERSE_CERT?e.objectType===T.HOLDER?(ye.value[0]=e.uri,Le.value[0]=e.id):e.objectType===T.INSURED&&(Oe.value[0]=e.uri,ge.value[0]=e.id):e.category===R.REVERSE_CERT&&(e.objectType===T.HOLDER?(ye.value[1]=e.uri,Le.value[1]=e.id):e.objectType===T.INSURED&&(Oe.value[1]=e.uri,Le.value[1]=e.id))})),Object.assign(W.value,e)}})).finally((()=>{be.isLoading=!1})),P({pageCode:"infoCollection",templateId:k}).then((({code:e,data:t})=>{if("10000"===e){const e={BENEFICIARY:[],INSURER:[],HOLDER:[]};t.productInsureFactorList.forEach((t=>{(e[t.moduleType]=e[t.moduleType]||[]).push(t)})),J.value=e}}))})),n((()=>W.value),(e=>{if(e){var t,r,n,a,i,o,d,l,s,u;const c=[{contactAddress:null===(t=e.tenantOrderHolder)||void 0===t||null===(r=t.extInfo)||void 0===r?void 0:r.familyAddress,contactName:e.tenantOrderHolder.name,contactPhoneNo:e.tenantOrderHolder.mobile},{contactAddress:null===(n=e.tenantOrderHolder)||void 0===n||null===(a=n.extInfo)||void 0===a?void 0:a.workAddress,contactName:e.tenantOrderHolder.name,contactPhoneNo:e.tenantOrderHolder.mobile},{contactAddress:null===(i=e.tenantOrderInsuredList[0])||void 0===i||null===(o=i.extInfo)||void 0===o?void 0:o.familyAddress,contactName:null===(d=e.tenantOrderInsuredList[0])||void 0===d?void 0:d.name,contactPhoneNo:null===(l=e.tenantOrderInsuredList[0])||void 0===l?void 0:l.mobile},{contactAddress:null===(s=e.tenantOrderInsuredList[0])||void 0===s||null===(u=s.extInfo)||void 0===u?void 0:u.workAddress,contactName:e.tenantOrderInsuredList[0].name,contactPhoneNo:e.tenantOrderInsuredList[0].mobile}];be.addressList=c.filter((e=>e.contactAddress&&e.contactName&&e.contactPhoneNo))}}),{deep:!0,immediate:!0}),n((()=>W.value.tenantOrderInsuredList[0].relationToHolder),(e=>{1==+e&&Object.assign(W.value.tenantOrderInsuredList[0],W.value.tenantOrderHolder,{id:W.value.tenantOrderInsuredList[0].id,extInfo:{...W.value.tenantOrderHolder.extInfo,insureProvinceCode:W.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,insureCityCode:W.value.tenantOrderInsuredList[0].extInfo.insureCityCode,insureAreaCode:W.value.tenantOrderInsuredList[0].extInfo.insureAreaCode}})}),{deep:!0,immediate:!0}),(e,t)=>{const r=a("ProCard"),n=a("ProRadioButton"),m=a("ProField"),v=a("ProCascader"),I=a("ProSvg"),y=a("VanButton"),O=a("ProCheckButton"),L=a("van-cell"),g=a("ProForm"),C=a("ProPageWrap");return i(),o(C,{class:"page-info-wrapper"},{default:d((()=>{var e,a,C,w,k;return[h(be).isLoading?b("",!0):(i(),o(g,{key:0,ref_key:"formRef",ref:Ie},{default:d((()=>[s(r,{title:"投保人"},{default:d((()=>[s(D,{images:ye.value,"onUpdate:images":t[0]||(t[0]=e=>ye.value=e),"form-info":W.value.tenantOrderHolder,"factor-list":J.value.HOLDER,prefix:"holder"},null,8,["images","form-info","factor-list"])])),_:1}),s(r,{title:"被保人"},{default:d((()=>[s(m,{modelValue:W.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[2]||(t[2]=e=>W.value.tenantOrderInsuredList[0].relationToHolder=e),label:"为谁保单",name:"relationToHolder",placeholder:"请选择"},{input:d((()=>[s(n,{modelValue:W.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[1]||(t[1]=e=>W.value.tenantOrderInsuredList[0].relationToHolder=e),options:h(S)},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),1!=+W.value.tenantOrderInsuredList[0].relationToHolder?(i(),o(D,{key:0,images:Oe.value,"onUpdate:images":t[3]||(t[3]=e=>Oe.value=e),"form-info":W.value.tenantOrderInsuredList[0],"factor-list":J.value.INSURER||[],prefix:"insure"},null,8,["images","form-info","factor-list"])):b("",!0),s(v,{modelValue:W.value.tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:modelValue":t[4]||(t[4]=e=>W.value.tenantOrderInsuredList[0].extInfo.insureAreaCode=e),field1:W.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,"onUpdate:field1":t[5]||(t[5]=e=>W.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode=e),field2:W.value.tenantOrderInsuredList[0].extInfo.insureCityCode,"onUpdate:field2":t[6]||(t[6]=e=>W.value.tenantOrderInsuredList[0].extInfo.insureCityCode=e),field3:W.value.tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:field3":t[7]||(t[7]=e=>W.value.tenantOrderInsuredList[0].extInfo.insureAreaCode=e),label:"投保地区",name:"insureAreaCode",placeholder:"请选择","is-link":"",required:"","data-source":h(Q),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","data-source"])])),_:1}),s(r,{title:"受益人"},{default:d((()=>[s(m,{modelValue:W.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[9]||(t[9]=e=>W.value.tenantOrderInsuredList[0].insuredBeneficiaryType=e),label:"受益人类型",name:"insuredBeneficiaryType",placeholder:"请选择"},{input:d((()=>[s(n,{modelValue:W.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[8]||(t[8]=e=>W.value.tenantOrderInsuredList[0].insuredBeneficiaryType=e),options:h(U)},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),2==W.value.tenantOrderInsuredList[0].insuredBeneficiaryType?(i(),u("div",X,[(i(!0),u(f,null,c(W.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList,((e,r)=>(i(),u("div",{key:e.beneficiaryId||e.id,class:"beneficiary-item"},[l("div",Z,[l("span",ee,p(`受益人${r+1}`),1),s(I,{name:"delete",onClick:t=>{return r=e,void(W.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=W.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.filter((e=>e.beneficiaryId!==r.beneficiaryId||r.id!==e.id)));var r}},{default:d((()=>[te])),_:2},1032,["onClick"])]),s(D,{images:he.value,"onUpdate:images":t[10]||(t[10]=e=>he.value=e),"form-info":e,"factor-list":J.value.BENEFICIARY||[],prefix:`beneficiary-${r}`,"beneficiary-list":W.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList},null,8,["images","form-info","factor-list","prefix","beneficiary-list"])])))),128)),s(y,{onClick:Pe},{default:d((()=>[re])),_:1})])):b("",!0)])),_:1}),s(r,{title:"保单通讯信息"},{default:d((()=>{var e;return[null!==(e=Object.keys(h(Ce)))&&void 0!==e&&e.length?(i(),o(L,{key:1,title:"单元格","is-link":"",onClick:t[12]||(t[12]=e=>h($)(!0))},{title:d((()=>[l("div",ae,[l("p",null,[l("span",ie,p(h(Ce).contactName),1),l("span",oe,p(h(Ce).contactPhoneNo),1)]),l("p",de,p(h(Ce).contactAddress),1)])])),_:1})):(i(),o(O,{key:0,activated:"",onClick:t[11]||(t[11]=e=>h($)(!0))},{default:d((()=>[ne])),_:1}))]})),_:1})])),_:1},512)),l("div",le,[l("div",se,[l("div",ue,[ce,l("span",pe,"￥"+p(null===(e=W.value.tenantOrderInsuredList)||void 0===e||null===(a=e[0])||void 0===a||null===(C=a.tenantOrderProductList)||void 0===C||null===(w=C[0].premium)||void 0===w||null===(k=w.toLocaleString)||void 0===k?void 0:k.call(w)),1)]),fe]),l("div",me,[s(y,{block:"",type:"primary",onClick:ke},{default:d((()=>[ve])),_:1})])]),h(M)?(i(),o(K,{key:1,modelValue:h(be).currentAddress,"onUpdate:modelValue":t[13]||(t[13]=e=>h(be).currentAddress=e),show:h(M),"data-source":h(be).addressList,onSubmit:xe,onClose:t[14]||(t[14]=e=>h($)(!1))},null,8,["modelValue","show","data-source"])):b("",!0)]})),_:1})}}}))}}}))}();

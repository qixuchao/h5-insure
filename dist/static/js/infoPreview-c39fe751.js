import{E as e,d as t,c as n,y as a,i as o,w as r,f as i,R as s,U as l,z as d,g as c,e as u,V as p,bf as m,W as f,X as I,u as v,x as y,r as O,K as h,Y as _,o as P,b as j,h as b,aw as g,k as L,j as C,P as V,a9 as w,aS as x}from"./index-af09279d.js";import{t as k}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-c995738a.js";/* empty css              */import"./bankCard-97e11de8.js";import{_ as R}from"./PayInfo-faadba92.js";import{c as T,i as E}from"./trial-4589c325.js";import{n as N}from"./nextStep-67017327.js";import{u as S}from"./useAttachment-c000d43f.js";import{a as D,q as U}from"./product-7c8cc5d9.js";import{g as A}from"./utils-80c1c038.js";import{u as q}from"./useOrder-bc6608cd.js";import{p as F}from"./pageJump-a8b4ea5a.js";import{B as $,P as W}from"./constants-7afb7c3d.js";import{P as B}from"./index-92b54da5.js";import"./infoCollection-ccc402c4.js";import{P as Y}from"./index-383a0676.js";import{I as J,P as z,b as H}from"./trial-ec94a5c5.js";import"./pdfh5-008ca364.js";import"./phoneVerify-45ea98bc.js";import"./_initCloneObject-0663309f.js";import"./isObjectLike-a9798079.js";import"./index-a48934db.js";import"./debounce-eed12388.js";import"./index-e7708f49.js";import"./core-07a7d70b.js";import"./constant-c3f28a3b.js";import"./cloneDeep-1de8e9b0.js";const M={class:"com-insured-part-wrapper"},G={class:"content-wrapper"};var K=e(t({__name:"InsureInfo",props:{productData:{default:()=>({})}},setup(e){const t=(e,t)=>-1!==t.indexOf("$")?t.replace("$",`${e}`):`${e||""}${t}`;return(f,I)=>{const v=p,y=m;return n(),a("div",M,[o(y,{title:"保障信息"},{default:r((()=>{var r;return[i("div",G,[(n(!0),a(s,null,l((null==(r=e.productData)?void 0:r.tenantOrderRiskList)||[],((r,p)=>(n(),a("div",{key:p,class:"risk-item"},[i("p",null,d(r.riskName),1),o(v,{title:"保障期间",content:t(r.insurancePeriodValue,c(J)[r.insurancePeriodType])},null,8,["content"]),o(v,{title:"交费期间",content:t(r.paymentPeriod,c(z)[r.paymentPeriodType])},null,8,["content"]),o(v,{title:"交费方式",content:c(H)[r.paymentFrequency]},null,8,["content"]),(n(!0),a(s,null,l(r.liabilityDetails,((e,t)=>(n(),u(v,{key:t,title:e.liabilityName,content:"投保"},null,8,["title"])))),128)),o(v,{title:"保障金额",content:(r.currentAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(v,{title:"首期保费",class:"price",content:(e.productData.premium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])))),128))])]})),_:1})])}}}),[["__scopeId","data-v-3733d720"]]);const Q={class:"long-info-preview"},X={class:"footer-btn"},Z=i("span",null,"分享",-1),ee=t({__name:"infoPreview",setup(e){f((()=>I((()=>import("./index-f7177f5c.js")),["static/js/index-f7177f5c.js","static/css/index-fa4edf2a.css","static/js/index-af09279d.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js","static/js/index-383a0676.js","static/css/index-827a8544.css","static/js/utils-80c1c038.js","static/js/infoCollection-ccc402c4.js","static/js/trial-ec94a5c5.js"]))),f((()=>I((()=>import("./index-8224d6bc.js")),["static/js/index-8224d6bc.js","static/css/index-3329e46f.css","static/js/index-af09279d.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js"])));const t=v(),a=q(),{productCode:s="",tenantId:l,agentCode:d="",agencyCode:p,saleChannelId:m,orderNo:J,extraInfo:z,insurerCode:H,preview:M}=t.query;let G={};try{G=JSON.parse(decodeURIComponent(z))}catch(fe){}const ee=y({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),te=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,ne=O({imgUrl:"",desc:"",title:"",link:te}),ae=O(),oe=O(),re=O({}),ie=O({}),se=O([]),le=O(),de=O({});O(!1),O(!1),O(0),O(!0),S(de,le),O(!1);const ce=O(!1);O({}),O(!1),O([{}]),O(""),O(0),O(!1),O(),O(),O(),h((()=>{var e,t;const{insureProductRiskVOList:n}=(null==(t=null==(e=ie.value)?void 0:e.productPlanInsureVOList)?void 0:t[0])||{};return(n||[]).find((e=>e.mainRiskFlag===_.YES))})),O(0),O({});const ue=async()=>{Object.assign(a.value,{extInfo:{...a.value.extInfo,buttonCode:$.INFO_PREVIEW,pageCode:W.INFO_PREVIEW}}),N(a.value,((e,n)=>{n===V.JUMP_PAGE&&F(e.nextPageCode,t.query)}))},pe=y({tenantOrderPayInfoList:[]}),me=async()=>{D({productCode:s,tenantId:l,isTenant:!M}).then((({data:e,code:t})=>{var n;if("10000"===t){re.value=e,document.title=e.BASIC_INFO.title||"";let t={};if(null==(n=null==e?void 0:e.PRODUCT_LIST)?void 0:n.wxShareConfig){const{title:n,desc:a,image:o}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{},[r=""]=o||[];t={title:n,desc:a,image:r}}else{const{title:n,desc:a,image:o}=(null==e?void 0:e.PRODUCT_LIST)||{};t={title:n,desc:a,image:o}}Object.assign(ne.value,t)}})),T({orderNo:J,tenantId:l}).then((({code:e,data:t})=>{"10000"===e&&(pe.tenantOrderPayInfoList=t.tenantOrderPayInfoList,Object.assign(a.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),(()=>{const e={},{tenantOrderHolder:t,tenantOrderInsuredList:n}=a.value;e.holder={personVO:{...t,...t.extInfo}},e.insuredVOList=(n||[]).map((e=>({personVO:{...e,...e.extInfo,beneficiaryList:e.tenantOrderBeneficiaryList.map((e=>({personVO:e})))}}))),Object.assign(ee.personalInfo,e)})(),ce.value=!0)})),U({productCode:s}).then((({code:e,data:t})=>{var n,a,o,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=t;le.value=e||[];const{basicInfo:{questionnaireType:s},questions:l,questionnaireName:d}=(null==(n=null==i?void 0:i[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};s&&(se.value=2===s?[{attachmentName:d,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(a=null==l?void 0:l[0])?void 0:a.content,attachmentType:A(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(r=null==l?void 0:l[0])?void 0:r.content)}])}})),await E({productCode:s,isTenant:!M}).then((({data:e,code:t})=>{var n,a;if("10000"===t){ie.value=e,de.value=(null==(n=e.productPlanInsureVOList)?void 0:n[0])||{};const{payInfo:t}=k(null==(a=de.value)?void 0:a.productFactor);ee.payInfo={...ee.payInfo,...t}}}))};return P((()=>{me()})),(e,t)=>{const s=w,l=x,d=j("ProPageWrap");return n(),u(d,null,{default:r((()=>{var d,p,m,f,I,v,y;return[i("div",Q,[o(K,{"product-data":null==(m=null==(p=null==(d=c(a).tenantOrderInsuredList)?void 0:d[1])?void 0:p.tenantOrderProductList)?void 0:m[0]},null,8,["product-data"]),(null==(f=c(de))?void 0:f.productFactor)?(n(),u(c(B),{key:0,ref_key:"personalInfoRef",ref:oe,modelValue:c(ee).personalInfo,"onUpdate:modelValue":t[0]||(t[0]=e=>c(ee).personalInfo=e),"product-factor":null==(I=c(de))?void 0:I.productFactor,"multi-insured-num":null==(y=null==(v=c(de))?void 0:v.multiInsuredConfigVO)?void 0:y.multiInsuredNum,"is-view":""},null,8,["modelValue","product-factor","multi-insured-num"])):b("",!0),c(ee).payInfo.schema.length?(n(),u(c(R),{key:1,ref_key:"payInfoRef",ref:ae,modelValue:c(pe).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>c(pe).tenantOrderPayInfoList=e),schema:c(ee).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):b("",!0),i("div",X,[o(l,g(c(ne),{class:"share-btn"}),{default:r((()=>[o(s,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),Z])),_:1},16),o(Y,{shadow:!1,onClick:ue},{default:r((()=>[L(e.$slots,"default",{},(()=>[C("下一步")]))])),_:3})])])]})),_:3})}}});export{ee as default};

!function(){var e=document.createElement("style");e.innerHTML=".page-activity-invite{width:100%;height:100%;background:linear-gradient(180deg,#fea64a 0%,#fc7429 88%,#fc6d24 100%)}.page-activity-invite .logo{width:50%;margin:.4rem;position:absolute}.page-activity-invite .banner{width:100%}.page-activity-invite .container{position:absolute;width:100%;bottom:.8rem;padding:.26667rem}.page-activity-invite .container .title{margin:auto;margin-top:-1.6rem;width:calc(100% - .8rem)}.page-activity-invite .container .title img{width:100%}.page-activity-invite .container .main-form{background:url(/static/assets/bg.c7f48ab0.png) no-repeat;background-size:100% 100%;position:relative;padding:1.33333rem 0 .6rem}.page-activity-invite .container .main-form .sms-code{width:2rem;text-align:center;font-size:.4rem;font-weight:500;color:var(--van-primary-color);padding:0;white-space:nowrap}.page-activity-invite .container .main-form .submit{height:1.33333rem;margin-top:.53333rem;margin-bottom:.46667rem;background:url(/static/assets/button.4c281a6e.png) no-repeat;background-size:contain;background-position:center;border:none}.page-activity-invite .container .main-form .agree{padding:0 .33333rem;font-size:.37333rem;font-weight:400;color:#666;display:flex;align-items:flex-start}.page-activity-invite .container .main-form .van-cell .van-field__value{align-items:flex-start}.page-activity-invite .container .main-form .van-checkbox{width:1.33333rem}\n",document.head.appendChild(e),System.register(["./vendor-legacy-1e86c4b9.js","./infoCollection-legacy-f3c4910f.js","./phoneVerify-legacy-d2c0be59.js","./validator-legacy-70be20af.js","./logo-legacy-e4560502.js","./index-legacy-c107beae.js","./trial-legacy-3fe37b63.js","./product-legacy-e201b570.js","./blank-legacy-3a1efa43.js","./trial-legacy-9abd8ddb.js"],(function(e){"use strict";var a,t,n,l,o,i,r,c,s,u,d,m,f,v,g,p,b,h,y,I,k,V,w,C,x,N,j,_,O,L,E,U,D,F,S,z,M,q;return{setters:[function(e){a=e.g,t=e.E,n=e.M,l=e._,o=e.r,i=e.j,r=e.k,c=e.m,s=e.p,u=e.A,d=e.z,m=e.J,f=e.L,v=e.T,g=e.O,p=e.a9,b=e.h,h=e.n,y=e.G,I=e.F,k=e.C},function(e){V=e.a},function(e){w=e.s,C=e.c},function(e){x=e.v,N=e.a,j=e.b},function(e){_=e.F,O=e.g,L=e.l,E=e.t,U=e.a},function(e){D=e.a3},function(e){F=e.g,S=e.m,z=e.i},function(e){M=e.p},function(e){q=e.b},function(){}],execute:function(){const A=a({props:{userInfo:{type:Object,default:()=>{}}},emits:["on-verify"],setup(e,{emit:a}){var g;const p=e,b=t({}),h=t(0),y=t("获取验证码"),I=n({mobile:null===(g=p.userInfo)||void 0===g?void 0:g.mobile,smsCode:""}),k=e=>!!x(e)||"请输入正确的手机号",V=e=>!!N(e)||"请输入正确的验证码",j=async()=>{h.value>0||null==b||b.value.validate("mobile").then((async()=>{const e=await w(I.mobile),{code:a,data:t}=e;"10000"===a&&(v({message:"短信发送成功，请查收"}),(()=>{if(h.value>0)return;h.value=30;const e=()=>{y.value=`${h.value}s`,h.value-=1};e();const a=setInterval((()=>{0===h.value?(y.value="获取验证码",h.value=0,clearInterval(a)):e()}),1e3)})())}))},O=async()=>{const e=await C(I.mobile,I.smsCode),{data:t}=e;t&&a("on-verify",I)},L=async()=>{null==b||b.value.validate().then((async()=>{O()}))};return l((()=>I),(()=>{x(I.mobile)&&N(I.smsCode)&&O()}),{deep:!0,immediate:!0}),(e,a)=>{const t=o("van-field"),n=o("van-cell-group"),l=o("VanForm");return i(),r(l,{ref_key:"formRef",ref:b,"label-width":"60"},{default:c((()=>[s(n,null,{default:c((()=>[s(t,{modelValue:u(I).mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>u(I).mobile=e),name:"mobile",label:"手机号",clearable:"",placeholder:"请输入手机号",maxlength:u(_).MOBILE,rules:[{validator:k}]},null,8,["modelValue","maxlength","rules"]),s(t,{modelValue:u(I).smsCode,"onUpdate:modelValue":a[1]||(a[1]=e=>u(I).smsCode=e),name:"smsCode",label:"验证码",clearable:"",placeholder:"请输入验证码",maxlength:u(_).SMS_CODE,rules:[{validator:V}]},{button:c((()=>[d("div",{class:f(["sms-code",{"count-down":h.value>0}]),onClick:j},m(y.value),3)])),_:1},8,["modelValue","maxlength","rules"])])),_:1}),d("div",{class:"submit",onClick:L})])),_:1},512)}}}),H=a({props:{userInfo:{type:Object,default:()=>{}}},emits:["on-submit"],setup(e,{emit:a}){const l=e,m=t({}),f=n({name:l.userInfo.name,certNo:l.userInfo.certNo}),v=e=>!!D(f.certNo)||"请填写正确的证件号",g=e=>!!j(e)||"请输入正确的姓名",p=()=>{null==m||m.value.validate().then((async e=>{a("on-submit",f)}))};return(e,a)=>{const t=o("van-field"),n=o("van-cell-group"),l=o("VanForm");return i(),r(l,{ref_key:"formRef",ref:m,"label-width":"60"},{default:c((()=>[s(n,null,{default:c((()=>[s(t,{modelValue:u(f).name,"onUpdate:modelValue":a[0]||(a[0]=e=>u(f).name=e),name:"name",label:"姓名",clearable:"",placeholder:"请输入姓名",maxlength:u(_).NAME,rules:[{validator:g}]},null,8,["modelValue","maxlength","rules"]),s(t,{modelValue:u(f).certNo,"onUpdate:modelValue":a[1]||(a[1]=e=>u(f).certNo=e),name:"certNo",label:"身份证",clearable:"",placeholder:"请输入身份证号",maxlength:u(_).ID_CARD,rules:[{validator:v}]},null,8,["modelValue","maxlength","rules"])])),_:1}),d("div",{class:"submit",onClick:p})])),_:1},512)}}});const P={class:"page-activity-invite"},R=["src"],T=["src"],B={class:"container"},J={class:"main-form"},$={class:"title"},G=["src"],W={class:"agree"},X=k(" 我已阅读并同意 ");e("default",a({setup(e){const a=g(),l=p(),{productCode:m="7X9",tenantId:f="",extInfo:k}=a.query,w=O(k),C=t(!0),x=n({title:"/static/assets/title-step1.97cb9efa.png",attachmentList:[{attachmentName:"",attachmentUrl:""}],userInfo:{mobile:w.phoneNo,certNo:"",name:""},agree:!1}),N=t(),j=t(),_=async e=>{x.userInfo.mobile=e.mobile;const a=await F({holderPhone:x.userInfo.mobile,productCode:m,tenantId:f}),{code:t,data:n}=a;var l,o;"10000"===t&&(x.userInfo.name=null===(l=n.tenantOrderHolder)||void 0===l?void 0:l.name,x.userInfo.certNo=null===(o=n.tenantOrderHolder)||void 0===o?void 0:o.certNo);x.title="/static/assets/title-step2.258af5e9.png",C.value=!1},D=async e=>{if(x.agree)try{v({message:"领取中...",forbidClick:!0,loadingType:"spinner"}),x.userInfo.certNo=e.certNo,x.userInfo.name=e.name;const t=U({tenantId:f,detail:N.value,...w,holder:x.userInfo,insured:{...x.userInfo,relationToHolder:V.SELF}}),n=await S(t),{code:o}=n;"10000"===o&&l.push({path:"/chuangxin/baigebao/productDetail",query:{...a.query,tenantId:f,productCode:"BWYL2021",extInfo:JSON.stringify({...w,phoneNo:x.userInfo.mobile,certNo:x.userInfo.certNo,name:x.userInfo.name})}}),v.clear()}catch(t){v.clear()}else v("请勾选协议")},Y=async()=>{const e=M({productCode:m,withInsureInfo:!0}),a=z({productCode:m});Promise.all([e,a]).then((([e,a])=>{"10000"===e.code&&(N.value=e.data),"10000"===a.code&&(j.value=a.data,x.attachmentList=(()=>{let e=[];return j.value.productRiskVoList.forEach((a=>{a.riskDetailVOList.forEach((a=>{e=e.concat(a.riskAttachmentVOList)}))})),e})())}))};return b((()=>{Y()})),(e,a)=>{const t=o("van-checkbox"),n=o("ProPDFviewer"),l=o("van-config-provider");return i(),r(l,{"theme-vars":u(E)},{default:c((()=>[d("div",P,[d("img",{class:"logo",src:u(L)},null,8,R),d("img",{class:"banner",src:u(q)},null,8,T),d("div",B,[d("div",J,[d("div",$,[d("img",{src:u(x).title},null,8,G)]),C.value?(i(),r(A,{key:0,"user-info":u(x).userInfo,onOnVerify:_},null,8,["user-info"])):(i(),r(H,{key:1,"user-info":u(x).userInfo,onOnSubmit:D},null,8,["user-info"])),d("div",W,[s(t,{modelValue:u(x).agree,"onUpdate:modelValue":a[0]||(a[0]=e=>u(x).agree=e),name:"agree",shape:"square"},null,8,["modelValue"]),d("div",null,[X,(i(!0),h(I,null,y(u(x).attachmentList||[],((e,a)=>(i(),r(n,{key:a,class:"file-name",title:`《${e.attachmentName}》`,content:e.attachmentUrl,type:"pdf"},null,8,["title","content"])))),128))])])])])])])),_:1},8,["theme-vars"])}}}))}}}))}();

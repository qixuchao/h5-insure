import{d as e,a4 as a,a5 as l,h as n,i as t,j as i,k as o,A as s,a6 as d,G as r,a7 as u,l as c,o as v,c as p,u as _,b as I,F as m,a as f,p as C,f as b,w as O,a8 as h,q as y,a9 as g,aa as L,ab as j,ac as k}from"./index-0b6bfadc.js";import{i as E,q as A,s as w}from"./trial-cef143a6.js";import{a as P,b as T}from"./product-a64d20cd.js";import{_ as x}from"./TrialButton-f22c102f.js";import{q as S}from"./createProposal-12f39f74.js";import{u as N}from"./useOrder-16f32cdc.js";import{p as R,d as V}from"./utils-ef6c215d.js";import"./index-db464328.js";import"./format-31cde443.js";import"./utils-37855734.js";import"./infoCollection-8466281b.js";import"./trial-ebe446ca.js";const B={key:0},F={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},D={class:"info"},U={key:1,class:"preview-placeholder"},q=f("br",null,null,-1),G=f("div",{id:"insureButton"},null,-1),M=f("div",{id:"xinaoDialog"},null,-1),z=e({name:"InsuranceLong"}),H=e({...z,setup(e){const z=a((()=>l((()=>import("./index-4f4b27f3.js")),["static/js/index-4f4b27f3.js","static/css/index-c23f272e.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css"]))),H=a((()=>l((()=>import("./index-06710417.js")),["static/js/index-06710417.js","static/css/index-79104747.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css","static/js/infoCollection-8466281b.js"]))),J=a((()=>l((()=>import("./index-d3172bba.js")),["static/js/index-d3172bba.js","static/css/index-491cbbd3.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css"])));a((()=>l((()=>import("./index-0634ea89.js")),["static/js/index-0634ea89.js","static/css/index-50785b3e.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css","static/js/cloneDeep-1f872afb.js","static/js/TrialButton-f22c102f.js","static/css/TrialButton-dea42d8e.css","static/js/index-db464328.js","static/css/index-bbfdd7ec.css","static/js/format-31cde443.js","static/js/useOrder-16f32cdc.js"])));const W=a((()=>l((()=>import("./index-c8a6bf23.js")),["static/js/index-c8a6bf23.js","static/css/index-ebb5282b.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css"]))),X=a((()=>l((()=>import("./Video-0dabaab4.js")),["static/js/Video-0dabaab4.js","static/css/Video-20262b6f.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css"]))),Y=a((()=>l((()=>import("./index-ab8fedcb.js")),["static/js/index-ab8fedcb.js","static/css/index-a34f0b1b.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css","static/js/jsbridgePromise-1a7f0ae2.js","static/js/utils-37855734.js","static/js/infoCollection-8466281b.js","static/js/trial-ebe446ca.js"]))),$=a((()=>l((()=>import("./index-93e400fe.js")),["static/js/index-93e400fe.js","static/css/index-b01c516e.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css","static/js/product-a64d20cd.js","static/js/useThread-637a02aa.js","static/js/jsbridgePromise-1a7f0ae2.js"]))),K=a((()=>l((()=>import("./index-af26f073.js")),["static/js/index-af26f073.js","static/css/index-fa4edf2a.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css","static/js/theme-94cf7d00.js","static/js/index-db464328.js","static/css/index-bbfdd7ec.css","static/js/utils-37855734.js","static/js/infoCollection-8466281b.js","static/js/trial-ebe446ca.js"]))),Q=a((()=>l((()=>import("./index-be153870.js")),["static/js/index-be153870.js","static/css/index-eabeb59f.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css"]))),Z=a((()=>l((()=>import("./index-2e02b66c.js")),["static/js/index-2e02b66c.js","static/css/index-bf024e9b.css","static/js/index-0b6bfadc.js","static/css/index-571755cf.css"]))),ee=n(),ae=t(),{productCode:le="",tenantId:ne,agentCode:te="",agencyCode:ie,saleChannelId:oe,proposalId:se,proposalInsuredId:de,extraInfo:re,orderNo:ue,insurerCode:ce,preview:ve,trialPreview:pe}=ae.query;let _e={};try{_e=JSON.parse(decodeURIComponent(re))}catch(ze){}const{openId:Ie,saTenantId:me=""}=_e;i();const fe=i(),Ce=i(),be=i(!1),Oe=i({}),he=i({}),ye=i(!1),ge=i(0),Le=i(!1);i({});const je=i(!0);i(!0);const ke=i(!0),Ee=i(""),Ae=i({}),we=i({}),Pe=i([]),Te=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),xe=i({});o((()=>!!ve||!!pe));const Se=o((()=>!!pe));i();const Ne=()=>{g("premiumTrial",ae.query)},Re=N(),Ve=i(!1);s((()=>xe.value.planCode),(e=>{Ae.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Be=()=>{fe.value.handleClickTab()("insureButton")};i(""),i(0);const Fe=e=>{Ae.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},De=()=>{ye.value=!1,je.value=!0},Ue=()=>{ye.value=!1,je.value=!0},qe=i([]),Ge=async()=>{var e,a;const{code:l,data:n}=await A({calcProductFactorList:[{productCode:le}]});if("10000"===l){Object.assign(Re.value,n);(e=>{T(e).then((({code:e,data:a})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:l}=V(a);qe.value=e.concat(l)}}))})(R(null==(a=null==(e=n.insuredList)?void 0:e[0])?void 0:a.productList))}},Me=async()=>{Re.value.extInfo&&(Re.value.extInfo.iseeBizNo=Ee.value);const{code:e,data:a}=await w(Re.value);"10000"===e&&ee.push({path:L.questionNotice,query:{...ae.query,orderNo:a}})};return s((()=>Ae.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:l}=Ae.value;xe.value.planCode=e,we.value=(l||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),r((()=>{u(Ce,(([{isIntersecting:e}],a)=>{be.value=!0}))})),c((()=>{ke.value=!0,se||Ge(),(async()=>{!Se.value&&P({productCode:le}).then((({data:e,code:a})=>{if("10000"===a){Oe.value=e;const{wxShareConfig:a,showWXShare:l,title:n,desc:t,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};l?Object.assign(Te.value,{...a,imgUrl:a.image,isShare:l}):Object.assign(Te.value,{title:n,desc:t,imgUrl:i,isShare:l})}})),ue||se||(Ve.value=!0),se&&S({id:se,tenantId:me||ne}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:l}=a,n=(le||"").split(",");Object.assign(Re.value,{renewFlag:"",holder:e,tenantId:ne,proposalId:se,insuredList:(l||[]).filter((e=>e.id===+de)).map((e=>({...e,productList:e.productList.filter((e=>n.includes(e.productCode)))})))}),Ve.value=!0}})),await E({productCode:le,isTenant:!1}).then((({data:e,code:a})=>{var l;"10000"===a&&(be.value=!0,Le.value=!0,he.value=e,Ae.value=null==(l=e.productPlanInsureVOList)?void 0:l[0],Pe.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),ke.value=!1})(),setTimeout((async()=>{Ee.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var l,n,t,i,o,s,d,r,u,c,g,L,E,A,w,P,T,S,N,R;const V=j,ee=k;return v(),p(m,null,[_(ke)?(v(),p("div",B)):(v(),p("div",F,[I(V),_(Se)?(v(),p("div",U,[h("当前页面仅用于保费试算预览"),q,h("不展示其他产品相关配置信息")])):(v(),p(m,{key:0},[f("div",D,[1==(null==(n=null==(l=_(Oe))?void 0:l.BASIC_INFO)?void 0:n.bannerType)&&(null==(i=null==(t=_(Oe))?void 0:t.BASIC_INFO)?void 0:i.banner.length)?(v(),C(_(J),{key:0,"data-skeleton-type":"img",images:null==(s=null==(o=_(Oe))?void 0:o.BASIC_INFO)?void 0:s.banner},null,8,["images"])):b("",!0),2==(null==(r=null==(d=_(Oe))?void 0:d.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=_(Oe))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),C(_(X),{key:1,"data-skeleton-type":"img",src:null==(g=_(Oe))?void 0:g.BASIC_INFO.video[0]},null,8,["src"])):b("",!0),(null==(A=null==(E=null==(L=_(Oe))?void 0:L.BASIC_INFO)?void 0:E.bannerMove)?void 0:A.length)?(v(),C(_(J),{key:2,url:null==(T=null==(P=null==(w=_(Oe))?void 0:w.BASIC_INFO)?void 0:P.bannerMove)?void 0:T[0],onClick:Be},null,8,["url"])):b("",!0),f("div",{ref_key:"observeRef",ref:Ce},null,512)]),I(_(z),{"data-source":null==(S=_(Oe))?void 0:S.BASIC_INFO},null,8,["data-source"]),(null==(N=_(Oe))?void 0:N.GUARANTEE)?(v(),C(_(Y),{key:0,"show-service-config":"","data-source":_(Oe),"plan-list":_(Pe),onUpdateActivePlan:Fe},null,8,["data-source","plan-list"])):b("",!0),f("div",{class:"trial-text-btn",onClick:Ne},"算一算保费"),I(_(W),{"data-source":null==(R=_(Oe))?void 0:R.ISSUE_CONDITION},null,8,["data-source"]),I(_(H),{ref_key:"detailScrollRef",ref:fe,"data-source":_(Oe)},null,8,["data-source"]),I(ee,null,{default:O((()=>{var e,a,l;return[(null==(e=_(Oe).SIGNATURE)?void 0:e.inscribedContent)?(v(),C(_(Q),{key:0,"inscribed-content":null==(l=null==(a=_(Oe))?void 0:a.SIGNATURE)?void 0:l.inscribedContent},null,8,["inscribed-content"])):b("",!0)]})),_:1}),I(ee,null,{default:O((()=>{var e;return[(null==(e=_(qe))?void 0:e.length)?(v(),C(_(Z),{key:0,"attachment-list":_(qe),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{ge.value=e,ye.value=!0})(e))},null,8,["attachment-list"])):b("",!0)]})),_:1})],64)),G,I(x,{onHandleClick:Me})])),I(ee,null,{default:O((()=>[_(Le)&&!_(Se)?(v(),C(_($),{key:0,"product-detail":_(Oe)},null,8,["product-detail"])):b("",!0)])),_:1}),M,I(ee,null,{default:O((()=>[_(ye)?(v(),C(_(K),{key:0,show:_(ye),"onUpdate:show":a[1]||(a[1]=e=>y(ye)?ye.value=e:null),"content-list":_(je)?_(qe):[],"is-only-view":_(je),"active-index":_(ge),text:_(je)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,onSubmit:De,onOnCloseFilePreviewByMask:Ue},null,8,["show","content-list","is-only-view","active-index","text"])):b("",!0)])),_:1})],64)}}});export{H as default};

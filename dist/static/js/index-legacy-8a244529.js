!function(){var a=document.createElement("style");a.innerHTML=".image-wrap[data-v-bb02bba6]{display:flex;justify-content:flex-start;width:9.2rem}.com-bank-card-info .field-title .sub-title[data-v-bb02bba6]{font-size:.34667rem;color:#99a9c0}.page-bank-card[data-v-4a10f8a2] .com-card-wrap .body{padding:0}.page-bank-card .reprise-card .reprise-card-list[data-v-4a10f8a2]{padding:0 .4rem;height:1.41333rem;display:flex;justify-content:space-between;align-items:center}.page-bank-card .reprise-card .reprise-card-list .reprise-card-item[data-v-4a10f8a2]{text-align:center;width:2.88rem;height:.8rem;line-height:.8rem;background:#f6f7fc;border-radius:.10667rem;color:#393d46;font-size:.34667rem}.page-bank-card .reprise-card .reprise-card-list .reprise-card-item.selected[data-v-4a10f8a2]{background:rgba(13,110,254,.1);border:1px solid var(--van-primary-color, var(--zaui-brand));color:var(--van-primary-color, var(--zaui-brand))}.page-bank-card .agree[data-v-4a10f8a2]{height:1.41333rem;display:flex;align-items:center;font-size:.37333rem;color:#393d46;background:var(--zaui-global-bg, #f2f5fc);padding:0 .4rem}.page-bank-card .agree .checkbox[data-v-4a10f8a2]{margin-right:.29333rem}.page-bank-card .agree .file[data-v-4a10f8a2]{color:var(--van-primary-color, var(--zaui-brand))}.page-bank-card .footer[data-v-4a10f8a2]{position:static;justify-content:space-between}.page-bank-card .footer .refresh-btn[data-v-4a10f8a2]{width:.93333rem;border:none;color:var(--van-primary-color, var(--zaui-brand));font-size:.4rem;line-height:.37333rem;text-align:center}.page-bank-card .footer .refresh-btn .text[data-v-4a10f8a2]{margin-top:.13333rem;font-size:.32rem}.page-bank-card .footer[data-v-4a10f8a2] .com-share{flex:1;margin-left:.26667rem}.page-bank-card .footer .submit-btn[data-v-4a10f8a2]{flex:1}\n",document.head.appendChild(a),System.register(["./index-legacy-fcf08e87.js","./index-legacy-47c55e08.js","./bankCard-legacy-a7751e3e.js","./useDicData-legacy-4e370f38.js","./order-legacy-089648ba.js","./pdfh5-legacy-9f98dc45.js"],(function(a){"use strict";var e,t,l,n,d,r,o,i,u,s,c,m,p,v,y,b,f,g,k,I,h,E,N,_,T,R,A,V,D,C,S,B,M,O,x,j,U,L,w,P,K,q,G,z,F,W,H,Y,$,X,J,Q,Z,aa,ea,ta,la,na,da,ra,oa,ia;return{setters:[function(a){e=a._,t=a.d,l=a.r,n=a.E,d=a.am,r=a.c,o=a.g,i=a.e,u=a.m,s=a.an,c=a.j,m=a.ao,p=a.w,v=a.i,y=a.f,b=a.ap,f=a.aq,g=a.a8,k=a.ar,I=a.as,h=a.X,E=a.Y,N=a.n,_=a.a,T=a.u,R=a.G,A=a.$,V=a.v,D=a.b,C=a.at,S=a.P,B=a.h,M=a.L,O=a.t,x=a.F,j=a.a6,U=a.a9,L=a.af,w=a.au,P=a.p,K=a.ah,q=a.T,G=a.aj,z=a.ak,F=a.M,W=a.N,H=a.O,Y=a.al,$=a.V,X=a.B},function(a){J=a.S},function(a){Q=a.B,Z=a.a,aa=a.P,ea=a.E,ta=a.b,la=a.c,na=a.d,da=a.e,ra=a.f},function(a){oa=a.u},function(a){ia=a.a},function(){}],execute:function(){const ua={class:"com-bank-card-info"},sa=(a=>(h("data-v-bb02bba6"),a=a(),E(),a))((()=>v("span",{class:"field-title"},[N("银行卡照片 "),v("span",{class:"sub-title"},"(需上传正反两面)")],-1))),ca={class:"image-wrap"};var ma=e(t({props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""},factor:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,h=oa("BANK"),E=l({bankCardType:Q.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),N=a=>t.factor&&t.factor[a]&&t.factor[a].isDisplay===g.YES,_=a=>!(!a||2!==a.length)||"请上传银行卡正反面照片",T=n((()=>h.value.map((a=>({label:a.name,value:a.code}))))),R=a=>{k({ossKey:[a],imageType:I.BANK_CARD}).then((a=>{const{data:e,code:t}=a;if("10000"===t&&e&&e.bankCardOcrVO){E.value.bankCardNo=e.bankCardOcrVO.cardNo;const a=T.value.find((a=>a.label===e.bankCardOcrVO.bankName));a&&(E.value.payBank=a.value)}}))};return d((()=>t.modelValue),(a=>{E.value=a}),{immediate:!0}),d(E,(a=>{e("update:modelValue",a)})),(e,t)=>(r(),o("div",ua,[N("cardType")?(r(),i(s,{key:0,modelValue:E.value.bankCardType,"onUpdate:modelValue":t[0]||(t[0]=a=>E.value.bankCardType=a),label:"卡片类型",name:"bankCardType","data-source":u(Z),"is-view":""},null,8,["modelValue","data-source"])):c("",!0),N("bankCardNumber")?(r(),i(m,{key:1,modelValue:E.value.bankCardNo,"onUpdate:modelValue":t[1]||(t[1]=a=>E.value.bankCardNo=a),label:"银行卡号",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"])):c("",!0),N("cardHolder")?(r(),i(m,{key:2,"model-value":a.holderName,label:"持卡人",name:"accountName","is-view":""},null,8,["model-value"])):c("",!0),N("bank")?(r(),i(s,{key:3,modelValue:E.value.payBank,"onUpdate:modelValue":t[2]||(t[2]=a=>E.value.payBank=a),name:"payBank",label:"开户银行","data-source":u(T),required:""},null,8,["modelValue","data-source"])):c("",!0),N("bankCardAttachment")?(r(),i(m,{key:4,label:"银行卡照片",block:"","label-width":"100%",name:"images",rules:[{validator:_}]},{label:p((()=>[sa])),input:p((()=>[v("div",ca,[y(f,{modelValue:E.value.images,"onUpdate:modelValue":t[3]||(t[3]=a=>E.value.images=a),"max-count":2,"upload-type":u(b).BANK_CARD,onOnUploadFinished:R},null,8,["modelValue","upload-type"])])])),_:1},8,["rules"])):c("",!0),N("bankPreMobile")?(r(),i(m,{key:5,modelValue:E.value.mobile,"onUpdate:modelValue":t[4]||(t[4]=a=>E.value.mobile=a),label:"预留手机号",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])):c("",!0)]))}}),[["__scopeId","data-v-bb02bba6"]]);const pa=a=>(h("data-v-4a10f8a2"),a=a(),E(),a),va={class:"page-bank-card"},ya={class:"reprise-card-list"},ba=["onClick"],fa={class:"agree"},ga=N(" 投保人阅读并接受 "),ka={class:"footer-button footer"},Ia=pa((()=>v("div",{class:"text"},"刷新",-1))),ha=N("分享"),Ea=N("下一步"),Na=t({setup(a){const e=_(),t=T(),{orderNo:d="2022072710380711215",agentCode:b="D1234567-1",tenantId:f="9991000007",templateId:k=1,isShare:I,insurerCode:h="kunlunhealth"}=e.query,E={bankCardType:Q.DEBIT};let N={};const Z=l(""),oa=l({payMethod:aa.REAL_TIME,bankData:{...E,imagesId:[],images:[]}}),ua=l({payMethod:aa.REAL_TIME,expiryMethod:ea.AUTOMATIC_PADDING,bankData:{...E,imagesId:[],images:[]},payInfoType:ta.FIRST_SAME}),sa=l({bankData:{...E,imagesId:[],images:[]}}),ca=l(ta.FIRST_SAME),pa=l({}),Na=l(!1),_a=l(),Ta=l(),Ra=l(),Aa=l({}),Va=(a,e)=>pa.value&&pa.value[e]&&pa.value[e][a]&&pa.value[e][a].isDisplay===g.YES,Da=()=>{P({orderNo:d,saleUserId:b,tenantId:f}).then((a=>{const{code:l,data:n}=a;var d,r,o;"10000"===l&&([ia.PENDING,ia.PAYMENT_FAILED,ia.UNDER_WRITING_SUCCESS].includes(n.orderStatus)?Promise.all([null===(d=_a.value)||void 0===d?void 0:d.validate(),null===(r=Ta.value)||void 0===r?void 0:r.validate(),null===(o=Ra.value)||void 0===o?void 0:o.validate()]).then((a=>{if(!Na.value)return void q.fail("请勾选同意银行转账授权");const l=[{...a[0],id:oa.value.id,paymentType:ra.FIRST_TERM},{...a[1],id:ua.value.id,paymentType:ra.RENEW_TERM},{...a[2],id:sa.value.id,paymentType:ra.REPRISE,payInfoType:ca.value}],n=[{category:G.OBVERSE_BANK_CARD,name:"首期签约银行卡正面",objectType:z.INIT_SIGN,type:"png",uri:a[0].images[0],id:oa.value.bankData.imagesId[0]},{category:G.REVERSE_BANK_CARD,name:"首期签约银行卡背面",objectType:z.INIT_SIGN,type:"png",uri:a[0].images[1],id:oa.value.bankData.imagesId[1]}];ua.value.payInfoType===ta.OTHER&&(n.push({category:G.OBVERSE_BANK_CARD,name:"续期签约银行卡正面",objectType:z.RENEWAL_SIGN,type:"png",uri:a[1].images[0],id:ua.value.bankData.imagesId[0]}),n.push({category:G.REVERSE_BANK_CARD,name:"续期签约银行卡正面",objectType:z.RENEWAL_SIGN,type:"png",uri:a[1].images[1],id:ua.value.bankData.imagesId[1]})),ca.value===ta.OTHER&&(n.push({category:G.OBVERSE_BANK_CARD,name:"年金签约银行卡正面",objectType:z.ANNUAL_SIGN,type:"png",uri:a[2].images[0],id:sa.value.bankData.imagesId[0]}),n.push({category:G.REVERSE_BANK_CARD,name:"年金签约银行卡背面",objectType:z.ANNUAL_SIGN,type:"png",uri:a[2].images[1],id:sa.value.bankData.imagesId[1]})),F({...N,pageCode:"payInfo",tenantOrderPayInfoList:l,extInfo:{...N.extInfo,templateId:k,pageCode:"payInfo",shareFlag:I?"Y":"N",buttonCode:W.payInfo},operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:n}).then((a=>{const{code:l,data:n}=a;"10000"===l&&n.success&&t.push({path:H[n.pageAction.data.nextPageCode],query:e.query})}))})):K("paymentResult",e.query))}))},Ca=n((()=>{const a={...e.query,isShare:1,sharePageCode:"payInfo"};return`${window.location.origin}/phoneVerify?${Y.stringify(a)}`})),Sa=(a=!1)=>{P({orderNo:d,saleUserId:b,tenantId:f}).then((e=>{const{code:t,data:l}=e;"10000"===t&&l&&(N=l,Z.value=l.tenantOrderHolder.name,l.tenantOrderPayInfoList.forEach((a=>{a.paymentType===ra.FIRST_TERM?(oa.value=a,oa.value.bankData={...E,...a,images:[],imagesId:[]}):a.paymentType===ra.RENEW_TERM?(ua.value=a,ua.value.bankData={...a,images:[],imagesId:[]}):a.paymentType===ra.REPRISE&&(sa.value=a,sa.value.bankData={...a,images:[],imagesId:[]},ca.value=a.payInfoType)})),l.tenantOrderAttachmentList.forEach((a=>{a.objectType===z.INIT_SIGN?(a.category===G.OBVERSE_BANK_CARD&&(oa.value.bankData.images[0]=a.uri,oa.value.bankData.imagesId[0]=a.id),a.category===G.REVERSE_BANK_CARD&&(oa.value.bankData.images[1]=a.uri,oa.value.bankData.imagesId[1]=a.id)):a.objectType===z.RENEWAL_SIGN?(a.category===G.OBVERSE_BANK_CARD&&(ua.value.bankData.images[0]=a.uri,ua.value.bankData.imagesId[0]=a.id),a.category===G.REVERSE_BANK_CARD&&(ua.value.bankData.images[1]=a.uri,ua.value.bankData.imagesId[1]=a.id)):a.objectType===z.ANNUAL_SIGN&&(a.category===G.OBVERSE_BANK_CARD&&(sa.value.bankData.images[0]=a.uri,sa.value.bankData.imagesId[0]=a.id),a.category===G.REVERSE_BANK_CARD&&(sa.value.bankData.images[1]=a.uri,sa.value.bankData.imagesId[1]=a.id))})),a&&(l.tenantOrderPayInfoList.find((a=>a.paymentType===ra.FIRST_TERM&&a.bankCardNo))||q("用户未完成银行卡信息填写")))}))},Ba=()=>{Sa(!0)};return R((()=>{w({insureCode:h,objectType:4,tenantId:f,orderNo:d}).then((({code:a,data:e})=>{"10000"===a&&(Aa.value=e)})),A({pageCode:"payInfo",templateId:k}).then((a=>{const{code:e,data:t}=a;if("10000"===e){const a={};t.productInsureFactorList.forEach((e=>{a[e.moduleType]||(a[e.moduleType]={}),a[e.moduleType][e.code]=e})),pa.value=a}})),Sa()})),(a,e)=>{const t=J,l=V,n=$,d=X,b=D("ProPageWrap");return r(),i(b,null,{default:p((()=>[v("div",va,[y(S,{title:"首期支付"},{default:p((()=>[y(C,{ref_key:"form1",ref:_a},{default:p((()=>[Va("paymentMethod","INIT")?(r(),i(s,{key:0,modelValue:oa.value.payMethod,"onUpdate:modelValue":e[0]||(e[0]=a=>oa.value.payMethod=a),name:"payMethod",required:"",label:"支付方式","is-link":"",placeholder:"请选择","data-source":u(la)},null,8,["modelValue","data-source"])):c("",!0),y(ma,{modelValue:oa.value.bankData,"onUpdate:modelValue":e[1]||(e[1]=a=>oa.value.bankData=a),"holder-name":Z.value,factor:pa.value.INIT},null,8,["modelValue","holder-name","factor"])])),_:1},512)])),_:1}),y(S,{title:"续期支付"},{default:p((()=>[y(C,{ref_key:"form2",ref:Ta},{default:p((()=>[Va("sameAsInit","RENEWAL")?(r(),i(m,{key:0,label:"同首期",name:"payInfoType"},{input:p((()=>[y(t,{modelValue:ua.value.payInfoType,"onUpdate:modelValue":e[2]||(e[2]=a=>ua.value.payInfoType=a),size:"22","active-value":u(ta).FIRST_SAME,"inactive-value":u(ta).OTHER},null,8,["modelValue","active-value","inactive-value"])])),_:1})):c("",!0),Va("paymentMethod","RENEWAL")?(r(),i(s,{key:1,modelValue:ua.value.payMethod,"onUpdate:modelValue":e[3]||(e[3]=a=>ua.value.payMethod=a),name:"payMethod",label:"支付方式","is-link":"",placeholder:"请选择","data-source":u(la),required:""},null,8,["modelValue","data-source"])):c("",!0),Va("overduePayment","RENEWAL")?(r(),i(s,{key:2,modelValue:ua.value.expiryMethod,"onUpdate:modelValue":e[4]||(e[4]=a=>ua.value.expiryMethod=a),name:"expiryMethod",label:"保费逾期未支付","is-link":"",placeholder:"请选择","data-source":u(na),required:"","label-width":"200"},null,8,["modelValue","data-source"])):c("",!0),ua.value.payInfoType!==u(ta).FIRST_SAME?(r(),i(ma,{key:3,modelValue:ua.value.bankData,"onUpdate:modelValue":e[5]||(e[5]=a=>ua.value.bankData=a),"holder-name":Z.value,factor:pa.value.RENEWAL},null,8,["modelValue","holder-name","factor"])):c("",!0)])),_:1},512)])),_:1}),y(S,{title:"年金领取银行卡",class:"reprise-card","show-divider":!1},{default:p((()=>[v("div",ya,[(r(!0),o(x,null,B(u(da),((a,e)=>(r(),o("div",{key:e,class:M(["reprise-card-item",{selected:ca.value===a.value}]),onClick:e=>{return t=a.value,void(ca.value=t);var t}},O(a.label),11,ba)))),128))]),y(C,{ref_key:"form3",ref:Ra},{default:p((()=>[ca.value===u(ta).OTHER?(r(),i(ma,{key:0,modelValue:sa.value.bankData,"onUpdate:modelValue":e[6]||(e[6]=a=>sa.value.bankData=a),"holder-name":Z.value,factor:pa.value.ANNUITY},null,8,["modelValue","holder-name","factor"])):c("",!0)])),_:1},512)])),_:1}),v("div",fa,[y(l,{modelValue:Na.value,"onUpdate:modelValue":e[7]||(e[7]=a=>Na.value=a),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),ga,y(U,{class:"file",title:"《银行转账授权》",content:Aa.value.materialContent,type:u(j)(Aa.value.materialContent,Aa.value.materialSource+"")},null,8,["content","type"])]),v("div",ka,[u(I)?c("",!0):(r(),o("div",{key:0,class:"refresh-btn",onClick:Ba},[v("div",null,[y(n,{name:"refresh"})]),Ia])),u(I)?c("",!0):(r(),i(L,{key:1,title:"邀请您填写银行卡信息",desc:"邀请您填写银行卡信息",link:u(Ca),"-":""},{default:p((()=>[y(d,{plain:"",type:"primary"},{default:p((()=>[ha])),_:1})])),_:1},8,["link"])),y(d,{type:"primary",class:"submit-btn",onClick:Da},{default:p((()=>[Ea])),_:1})])])])),_:1})}}});a("default",e(Na,[["__scopeId","data-v-4a10f8a2"]]))}}}))}();

!function(){var e=document.createElement("style");e.innerHTML=".com-navigator .btn[data-v-48192b24]{position:fixed;width:.8rem;height:2.4rem;right:0;top:50%;margin-top:-1.2rem}.page-verify .card .people[data-v-41315954]{flex:1;margin-left:.53333rem;display:flex;align-items:center}.page-verify .card .people .name[data-v-41315954]{font-size:.4rem;font-weight:600;color:#393d46}.page-verify .card .people .status[data-v-41315954]{margin-left:.26667rem;text-align:center;width:1.2rem;height:.53333rem;line-height:.53333rem;border-radius:.05333rem;border:1px solid #99a9c0;font-size:.32rem;color:#99a9c0}.page-verify .card .people .status.verified[data-v-41315954]{color:#0d6efe;border-color:#0d6efe}.page-verify .card .verify-item[data-v-41315954]{display:flex;align-items:center;height:1.41333rem;line-height:1.41333rem;font-size:.4rem;color:#393d46}.page-verify .card .verify-item .no[data-v-41315954]{margin-left:.64rem}.page-verify .card .verify-item .action[data-v-41315954]{flex:1;display:flex;align-items:center;justify-content:flex-end;color:#99a9c0}.page-verify .card .verify-item .action .icon[data-v-41315954]{margin-left:.13333rem;color:#99a9c0;font-size:.32rem}.page-verify .sign-card .resign[data-v-41315954]{font-size:.37333rem;color:#0d6efe}.page-verify .sign-card .sign-body[data-v-41315954]{padding-bottom:.4rem}.page-verify .sign-card .sign-body .date[data-v-41315954]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-verify .sign-card .sign-body .file[data-v-41315954]{margin-top:.21333rem;font-size:.37333rem;color:#393d46;line-height:.53333rem}.page-verify .sign-card .sign-body .file .file-name[data-v-41315954]{color:#0d6efe}.page-verify .sign-card .sign-body .file .file-name .dun-hao[data-v-41315954]{color:#393d46}.page-verify .footer[data-v-41315954]{position:static;justify-content:space-between}.page-verify .footer .refresh-btn[data-v-41315954]{width:.66667rem;border:none;color:#0d6efe;font-size:.26667rem;line-height:.37333rem;text-align:center}.page-verify .footer .refresh-btn .text[data-v-41315954]{margin-top:.13333rem}.page-verify .footer .submit-btn[data-v-41315954]{flex:1}\n",document.head.appendChild(e),System.register(["./vendor-legacy-dce51240.js","./index-legacy-548319ae.js","./verify-legacy-a260d159.js","./index-legacy-e1413952.js"],(function(e){"use strict";var t,a,r,i,n,o,l,d,s,v,c,u,f,m,g,p,y,h,x,C,b,I,N,w,k,O,T,_,D,H,j,E,L,z,U,S,P,R,$,A,M;return{setters:[function(e){t=e.g,a=e.a5,r=e.r,i=e.j,n=e.n,o=e.z,l=e.A,d=e.p,s=e.a6,v=e.Q,c=e.aj,u=e.E,f=e.d,m=e.y,g=e.h,p=e.k,y=e.m,h=e.J,x=e.L,C=e.t,b=e.G,I=e.F,N=e.a1,w=e.a2,k=e.C,O=e.T,T=e.D},function(e){_=e._,D=e.S,H=e.D,j=e.E,E=e.p,L=e.l,z=e.F,U=e.P},function(e){S=e.g,P=e.f,R=e.s,$=e.a},function(e){A=e.n,M=e.a}],execute:function(){const Y={class:"com-navigator"},q=["src"];var F=_(t({setup(e){const[t,v]=a(!1),c=()=>{v(!0)};return(e,a)=>{const v=r("van-popup");return i(),n("div",Y,[o("img",{class:"btn",src:l("/static/assets/sidenav.5031dada.png"),onClick:c},null,8,q),d(v,{show:l(t),"onUpdate:show":a[0]||(a[0]=e=>s(t)?t.value=e:null),position:"right",style:{width:"50%",height:"100%"},"safe-area-inset-top":""},null,8,["show"])])}}}),[["__scopeId","data-v-48192b24"]]);const Q=e=>(N("data-v-41315954"),e=e(),w(),e),B={class:"page-verify"},G={class:"people"},J={class:"name"},W={class:"verify-item"},K=Q((()=>o("div",{class:"label"},"证件号码",-1))),V={class:"no"},X=k(" 去认证 "),Z={class:"sign-body"},ee={class:"date"},te={class:"file"},ae=k(" 签名将被用于以下文件： "),re={class:"people"},ie={class:"name"},ne={class:"verify-item"},oe=Q((()=>o("div",{class:"label"},"证件号码",-1))),le={class:"no"},de=["onClick"],se=k(" 去认证 "),ve=["onClick"],ce={class:"sign-body"},ue={class:"date"},fe={class:"file"},me=k(" 签名将被用于以下文件： "),ge={class:"footer-button footer"},pe=k("提交"),ye=t({setup(e){const t=1,a={1:"pdf",4:"picture",2:"richText",3:"link"},s=v(),N=c(),{saleUserId:w="D1234567-1",tenantId:k="9991000007",templateId:_=1,productCode:Y="CQ75CQ76",insurerCode:q="ancheng"}=s.query;let{orderNo:Q}=s.query;"object"==typeof Q&&(Q=(Q||[])[0]);const ye=new D({source:"localStorage"}),he=u([]),xe=u(),Ce=u(),be=[],Ie=f().format("YYYY-MM-DD"),Ne=m((()=>e=>{let t=1;return t=1===e.materialSource?-1!==e.materialContent.indexOf(".pdf")?1:4:e.materialSource,a[t]})),we=()=>{var e;null===(e=Ce.value)||void 0===e||e.clear()},ke=(e,t)=>{$({callbackUrl:window.location.href,certiNo:e,faceAuthMode:"TENCENT",userName:t,tenantId:9991000007}).then((a=>{const{code:r,data:i}=a;if("10000"===r){const{originalUrl:a,serialNo:r}=i;window.location.href=a,ye.set("verifyData",{serialNo:r,certNo:e,name:t})}}))},Oe=e=>`${e}`===j.CERT,Te=e=>{var t,a,r,i;-1===e?ke(null===(t=xe.value.tenantOrderHolder)||void 0===t?void 0:t.certNo,null===(a=xe.value.tenantOrderHolder)||void 0===a?void 0:a.name):ke(null===(r=xe.value.tenantOrderInsuredList[e])||void 0===r?void 0:r.certNo,null===(i=xe.value.tenantOrderInsuredList[e])||void 0===i?void 0:i.name)},_e=e=>{e&&be.every((t=>t!==e))&&be.push(e)},De=()=>{var e,a,r,i,n;(null===(e=Ce.value)||void 0===e?void 0:e.isEmpty())?O.fail("请投保人签名"):be.some((e=>e.isEmpty()))?O.fail("请被保人签名"):(null===(a=xe.value.tenantOrderHolder)||void 0===a||null===(r=a.extInfo)||void 0===r?void 0:r.isCert)!==t&&Oe(null===(i=xe.value.tenantOrderHolder)||void 0===i?void 0:i.certType)?O.fail("请投保人去认证"):null!==(n=xe.value.tenantOrderInsuredList)&&void 0!==n&&n.some((e=>{var a;return(null===(a=e.extInfo)||void 0===a?void 0:a.isCert)!==t&&Oe(e.certType)}))?O.fail("请被保人去认证"):T.confirm({title:"提示",message:"请确认信息填写无误后，再进行支付"}).then((()=>{var e,t;const a=null===(e=Ce.value)||void 0===e?void 0:e.save();Promise.all([R("HOLDER",a,null===(t=xe.value)||void 0===t?void 0:t.id,`${k}`),...be.map((e=>{var t;return R("INSURED",e.save(),null===(t=xe.value)||void 0===t?void 0:t.id,`${k}`)}))]).then((()=>{A({...xe.value,pageCode:"sign",operateOption:{withSignInfo:!0},extInfo:{...xe.value.extInfo,pageCode:"sign",templateId:_},venderCode:q}).then((e=>{const{code:t,data:a}=e;"10000"===t&&a.success&&N.push({path:U[a.pageAction.data.nextPageCode],query:{orderNo:Q,saleUserId:w,tenantId:k}})}))}))}))},He=()=>{M({orderNo:Q,saleUserId:w,tenantId:k}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(xe.value=a,setTimeout((()=>{let e=0;a.tenantOrderAttachmentList.forEach((t=>{21===t.category&&(2===t.objectType?(Ce.value.clear(),Ce.value.setDataURL(t.fileBase64)):1===t.objectType&&(be[e].clear(),be[e].setDataURL(t.fileBase64),e+=1))}))})))}))};return g((()=>{He(),S({orderNo:Q,productCode:Y,tenantId:k}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(he.value=a||[])}));const e=ye.get("verifyData");if(e){const{serialNo:t,certNo:a,name:r}=e;P({certiNo:a,orderNo:Q,serialNo:t,tenantId:k,userName:r}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(ye.remove("verifyData"),He())}))}})),(e,a)=>{const s=r("ProPDFviewer"),v=r("van-button"),c=r("ProPageWrap");return i(),p(c,null,{default:y((()=>{var e;return[o("div",B,[d(H,{type:"warning",title:"尊敬的客户，本次投保需要进行身份认证",content:"本产品投保需要对投保人、被保人进行实名认证，您购买本产品的累计总保费已超过20万，按监管要求，需要提供投保人、被保人、指定受益人证件影像，本产品非本人投保且带身故责任、需对投保人、被保人（成人）的投保意愿进行签字确认。"}),d(L,{title:"投保人",class:"card"},{extra:y((()=>{var e,a,r,l,d,s,v,c,u,f;return[o("div",G,[o("div",J,h(null===(e=xe.value)||void 0===e||null===(a=e.tenantOrderHolder)||void 0===a?void 0:a.name),1),Oe(null===(r=xe.value)||void 0===r||null===(l=r.tenantOrderHolder)||void 0===l?void 0:l.certType)?(i(),n("div",{key:0,class:x(["status",{verified:(null===(d=xe.value)||void 0===d||null===(s=d.tenantOrderHolder)||void 0===s||null===(v=s.extInfo)||void 0===v?void 0:v.isCert)===t}])},h((null===(c=xe.value)||void 0===c||null===(u=c.tenantOrderHolder)||void 0===u||null===(f=u.extInfo)||void 0===f?void 0:f.isCert)===t?"已认证":"待认证"),3)):C("",!0)])]})),default:y((()=>{var e,r,l,s,v,c,u;return[o("div",W,[K,o("div",V,h(null===(e=xe.value)||void 0===e||null===(r=e.tenantOrderHolder)||void 0===r?void 0:r.certNo),1),(null===(l=xe.value)||void 0===l||null===(s=l.tenantOrderHolder)||void 0===s||null===(v=s.extInfo)||void 0===v?void 0:v.isCert)!==t&&Oe(null===(c=xe.value)||void 0===c||null===(u=c.tenantOrderHolder)||void 0===u?void 0:u.certType)?(i(),n("div",{key:0,class:"action",onClick:a[0]||(a[0]=e=>Te(-1))},[X,d(E,{name:"right_arrow",class:"icon"})])):C("",!0)])]})),_:1}),d(L,{title:"投保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:y((()=>[o("div",{class:"resign",onClick:we},"重签")])),default:y((()=>[d(z,{ref_key:"holderSign",ref:Ce,class:"sign"},null,512),o("div",Z,[o("div",ee,"签名日期： "+h(l(Ie)),1),o("div",te,[ae,(i(!0),n(I,null,b(he.value,((e,t)=>(i(),p(s,{key:t,class:"file",title:`《${e.materialName}》`,content:e.materialContent,type:l(Ne)(e)},null,8,["title","content","type"])))),128))])])])),_:1}),(i(!0),n(I,null,b(null===(e=xe.value)||void 0===e?void 0:e.tenantOrderInsuredList,((e,a)=>(i(),n("div",{key:a},[d(L,{title:"被保人",class:"card"},{extra:y((()=>{var a,r;return[o("div",re,[o("div",ie,h(e.name),1),Oe(e.certType)?(i(),n("div",{key:0,class:x(["status",{verified:(null===(a=e.extInfo)||void 0===a?void 0:a.isCert)===t}])},h((null===(r=e.extInfo)||void 0===r?void 0:r.isCert)===t?"已认证":"待认证"),3)):C("",!0)])]})),default:y((()=>{var r;return[o("div",ne,[oe,o("div",le,h(e.certNo),1),(null===(r=e.extInfo)||void 0===r?void 0:r.isCert)!==t&&Oe(e.certType)?(i(),n("div",{key:0,class:"action",onClick:e=>Te(a)},[se,d(E,{name:"right_arrow",class:"icon"})],8,de)):C("",!0)])]})),_:2},1024),d(L,{title:"被保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:y((()=>[o("div",{class:"resign",onClick:e=>(e=>{be[e].clear()})(a)},"重签",8,ve)])),default:y((()=>[d(z,{ref_for:!0,ref:_e,class:"sign"}),o("div",ce,[o("div",ue,"签名日期： "+h(l(Ie)),1),o("div",fe,[me,(i(!0),n(I,null,b(he.value,((e,t)=>(i(),p(s,{key:t,class:"file",title:`《${e.materialName}》`,content:e.materialContent,type:l(Ne)(e)},null,8,["title","content","type"])))),128))])])])),_:2},1024)])))),128)),o("div",ge,[d(v,{type:"primary",class:"submit-btn",onClick:De},{default:y((()=>[pe])),_:1})])]),d(F)]})),_:1})}}});e("default",_(ye,[["__scopeId","data-v-41315954"]]))}}}))}();

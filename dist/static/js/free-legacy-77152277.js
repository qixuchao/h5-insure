!function(){var e=document.createElement("style");e.innerHTML='.free-crad .page-info-wrapper .com-card-wrap .header.showLine{display:none}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell{background:#f6f6f6;border-radius:.21333rem;margin-bottom:.32rem;min-height:1.17333rem;padding:0 .42667rem;display:flex;align-items:center}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell .van-field__label{width:1.76rem;margin-top:0;margin-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell .van-cell__value .van-field__body{width:100%}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell:after{border-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell:after{border-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-field__label{width:1.62667rem;margin-top:0;margin-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body{width:100%}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder{padding-right:0;padding-left:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder:before{content:" ";margin-top:.13333rem;width:.10667rem;height:.48rem;background:var(--van-primary-color);margin-right:.21333rem;border-radius:0px .12rem .12rem 0px}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder .van-cell__title{margin-top:.10667rem}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap{width:100%}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn{display:flex;justify-content:flex-start}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn .btn-wrapper{margin:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn .btn-wrapper .com-check-btn{min-width:1.33333rem;border-radius:.53333rem!important;margin:0 .10667rem .13333rem 0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell:after{border-bottom:0}.free-crad[data-v-c33f2198]{padding:0 .42667rem;background:linear-gradient(var(--4a8a18ba),var(--4a8a187c))}.free-crad .container[data-v-c33f2198]{padding:.61333rem .53333rem .26667rem;background:#ffffff;text-align:center;border-radius:.53333rem}.free-crad .container .title[data-v-c33f2198]{height:.44rem;margin-bottom:.53333rem;display:flex;align-items:center;justify-content:center}.free-crad .container .title span[data-v-c33f2198]{font-size:.42667rem;font-family:PingFangSC-Semibold,PingFang SC;font-weight:600;color:#333;line-height:.42667rem;margin:0 .29333rem}.free-crad .container .title img[data-v-c33f2198]{height:.4rem}.free-crad .container .holder-form[data-v-c33f2198]{height:4.66667rem}.page-free-product-detail[data-v-10918870]{background:var(--650f48d4);padding-bottom:3.14667rem}.page-free-product-detail .inscribedContent-content[data-v-10918870]{background-color:transparent}.page-free-product-detail .submit-btn[data-v-10918870]{margin-top:.4rem}.page-free-product-detail .product-desc[data-v-10918870]{margin-top:.42667rem}.page-free-product-detail .product-desc img[data-v-10918870]{width:100%}.page-free-product-detail .page-free-footer[data-v-10918870]{position:fixed;width:100%;bottom:0;padding:0 .93333rem .93333rem;box-sizing:border-box}\n',document.head.appendChild(e),System.register(["./vendor-legacy-67cad4db.js","./index-legacy-a8c77691.js","./index-legacy-0ec9cb6d.js","./useAddressList-legacy-0235d36b.js","./nextStep-legacy-1de5ada4.js","./phoneVerify-legacy-908d41c1.js","./product-legacy-511e8d32.js","./trial-legacy-914fe235.js","./index-legacy-a22dcbe0.js","./trial-legacy-2a7ba56c.js","./utils-legacy-15c106cd.js","./theme-legacy-28dda1ed.js","./infoCollection-legacy-7111d5a9.js","./relativeTime-legacy-c169a254.js","./useDicData-legacy-1ee18eb0.js","./core-legacy-ea955045.js","./index-legacy-42d6e522.js","./useStorage-legacy-45a02e5a.js"],(function(e){"use strict";var r,t,a,n,o,i,d,l,c,s,u,p,f,m,g,w,v,h,y,b,A,I,O,_,C,P,D,x,k,V,j,F,L,T,N,E,H,S,B,Y,U,M,R,z,Z,$,G;return{setters:[function(e){r=e.h,t=e.aw,a=e.r,n=e.L,o=e.Z,i=e.l,d=e.y,l=e.z,c=e.A,s=e.I,u=e.Q,p=e.X,f=e.a8,m=e.N,g=e.j,w=e.ax,v=e.k,h=e.m,y=e.n,b=e.s,A=e.E,I=e.F,O=e.T,_=e.d},function(e){C=e._,P=e.a8,D=e.a9},function(e){x=e.P},function(e){k=e.u,V=e.B,j=e.A,F=e.I,L=e.P},function(e){T=e._,N=e.n},function(e){E=e.a,H=e.s,S=e.c},function(e){B=e.p,Y=e.g},function(e){U=e.i,M=e.t},function(e){R=e._},function(e){z=e.j},function(e){Z=e.v,$=e.f},function(e){G=e.u},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAMAAACBgxnEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA8UExURUdwTPpkAPpkAPpkAPlkAPlkAP9fAPpkAP9jAPljAPljAPlkAPdhAP9VAPhlAPpjAPpiAPpkAPlhAPpkAKrbDd8AAAATdFJOUwCe3XX6YBgzC+yKwSIDTrE+0C9Hm6hZAAAAf0lEQVR42u2MSw6AIAxEi6CCf+j976ommvG3omxMOqv2vczQmZa3tPRMptdZndVZndXZf892/JGOxN68qUEr24/zk84jSvne93fae3Qk3scrjZeWzDcVaNUQIvRDOGkYQOU+hYMmsBJ+cTt1C0gZP7mNTvhL+Zq5xlfOW4tb6le9ZDBDk4RvXwAAAABJRU5ErkJggg==";const Q={class:"free-crad"},X={class:"container"},q={class:"title"},K=["src"],W=["src"],ee=r({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}}},setup(e,{expose:r}){const f=e;t((e=>({"4a8a18ba":f.colors[0],"4a8a187c":f.colors[1]})));const m=a(),g=n({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"手机号"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"验证码"}],2:[],3:[]},isFirst:!0}),w=async(e,r)=>{const t=f.isFirst?E:H,a=await t(e),{code:n,data:o}=a;"10000"===n&&r?.()};return o((()=>f.isFirst),(()=>{f.isFirst||(g.factorObj=f.insureDetail?.productFactor)})),r({validateForm:()=>new Promise(((e,r)=>{m.value.validateForm().then((r=>{e(!0)})).catch((()=>{r()}))}))}),(r,t)=>(i(),d("div",Q,[l("div",X,[l("div",q,[l("img",{src:c(J)},null,8,K),l("span",null,s(e.isFirst?"凭手机号 免费领取":"最后一步 填写信息"),1),l("img",{src:c(J)},null,8,W)]),u(T,{ref_key:"formRef",ref:m,"send-sms-code":w,"need-desensitize":"","form-info":e.detail,"factor-object":c(g).factorObj},null,8,["form-info","factor-object"]),p(r.$slots,"default",{},void 0,!0)])]))}});var re=C(ee,[["__scopeId","data-v-c33f2198"]]);const te={class:"page-free-product-detail"},ae={class:"product-desc"},ne={key:1,class:"page-free-footer"};e("default",C(r({setup(e){t((e=>({"650f48d4":c(de).colors[1]})));const r=G(),s=f(),p=m(),{productCode:C="",agencyCode:T="",tenantId:E="",saleUserId:H="",saleChannelId:J="",extraInfo:Q}=p.query;let X={};try{X=JSON.parse(decodeURIComponent(Q))}catch(ge){}const{openId:q,indirectCode:K="",agentCode:W}=X;let ee="";const oe=a(),ie=a(),de=n({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},relationList:{},banner:"",productDesc:[],newAuth:!0,isValidateCode:!1,insureDetail:{},loading:!0,isSelfInsure:!0,showBtn:!1,activeIndex:0,showFilePreview:!1,isOnlyView:!0}),le=a();k({openId:q},(e=>{de.relationList=e}));const ce=()=>{const e=de.insureDetail.productRiskVoList||[],{insuranceEndType:r,riskInsureLimitVO:t}=e?.[0]?.riskDetailVOList?.[0]||{},{insurancePeriodValueList:a}=t||{},[n,o]=(a?.[0]||"").split("_");return 1===r?`${_(new Date).add(o||0,n).format("YYYY-MM-DD")} 23:59:59`:r?`${_(new Date).add(o,n).format("YYYY-MM-DD")} 00:00:00`:""},se=async()=>{de.loading=!0;const e=B({productCode:C,withInsureInfo:!0,tenantId:E}),r=U({productCode:C}),t=Y({openId:q});await Promise.all([e,r,t]).then((([e,r,t])=>{if("10000"===e.code){de.detail=e.data,de.banner=de.detail.tenantProductInsureVO?.banner[0];const{colorEnd:r,colorStart:t}=de.detail.tenantProductInsureVO?.backgroundInsureVO||{};de.colors=[t,r],de.productDesc=de.detail.tenantProductInsureVO.spec||[],document.title=de.detail?.tenantProductInsureVO?.productName||""}if("10000"===r.code&&(de.insureDetail=r.data,de.insureDetail.productFactor[1].forEach((e=>{"verificationCode"===e.code&&1===e.isDisplay&&(de.isValidateCode=!0)})),de.insureDetail.productFactor[2]=de.insureDetail.productFactor?.[2].map((e=>("relationToHolder"===e.code&&1===e.isDisplay&&(e.title="被保人",de.order.tenantOrderInsuredList[0].relationToHolder=e.attributeValueList?.[0]?.code||""),e)))),"10000"===t.code&&(de.newAuth=!t.data,de.isSelfInsure=!!t.data,t.data)){const e=t.data;de.order.tenantOrderHolder={certNo:e?.certiNo,extInfo:{},mobile:e?.mobile,name:e?.name}}(()=>{let e={};if(e=de.detail.tenantProductInsureVO.planInsureVO.attachmentVOList||[],!e)return void(le.value=[]);const r={2:"richText",3:"link"};le.value=Object.keys(e).map((t=>(e[t].forEach((e=>{if("1"===e.attachmentType){const r=e.attachmentUri.split("?"),t=r[0].substr(r[0].lastIndexOf(".")+1);e.attachmentType="pdf"===t?"pdf":"picture"}else e.attachmentType=r[e.attachmentType]})),{attachmentName:t,attachmentList:e[t]})))||[]})(),de.loading=!1}))},ue=async()=>{let e={loginType:"2",openId:q,thirdUserType:"XINAO_WECHAT",indirectCode:K};try{if(de.newAuth?(e.loginName=de.order.tenantOrderHolder.mobile,e.password=de.order.tenantOrderHolder.verificationCode):e=$({order:de.order,tenantId:E,extraInfo:X,commencementTime:1===((de.insureDetail.productRiskVoList||[])?.[0]?.riskDetailVOList?.[0]?.insuranceStartType||1)?`${_(new Date).format("YYYY-MM-DD")} 00:00:00`:`${_(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`,expiryDate:ce(),detail:de.detail,insureDetail:de.insureDetail,iseeBizNo:ee,agentCode:W,agencyCode:T,saleUserId:H,templateId:X?.templateId,saleChannelId:J,pageCode:"infoCollection",buttonCode:"EVENT_FREE_multiIssuePolicy"}),de.newAuth){const{code:r,data:t}=await M(e);"10000"===r&&(de.newAuth=!1)}else N(e,((e,r)=>{r===D.JUMP_PAGE&&e.orderNo&&s.push(`/baseInsurance/orderDetail?from=free&tenantId=${E}&orderNo=${e.orderNo}&productCode=${C}`)}))}catch(r){}},pe=async()=>await(async()=>{await ie.value.validateForm();const e=de.order.tenantOrderHolder?.verificationCode;if(de.isValidateCode&&(!e||!Z(e)))return O({message:"请输入正确的验证码"}),!1;if(de.newAuth||!de.isValidateCode)return!0;const{code:r,data:t}=await S(de.order.tenantOrderHolder.mobile,e);return!!t})()?(de.newAuth||0===le.value.length?ue():(de.isOnlyView=!1,de.showFilePreview=!0),!1):null,fe=()=>{de.showFilePreview=!1,de.isOnlyView=!0},me=()=>{de.showFilePreview=!1,de.isOnlyView=!0,ue()};return g((()=>{se(),setTimeout((async()=>{ee=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),o((()=>de.order.tenantOrderInsuredList[0]),(e=>{if(P(de.relationList)||de.newAuth)return null;const r=de.relationList[e.relationToHolder]||[];return 1===r.length&&(z.SELF!==e.relationToHolder?(de.order.tenantOrderInsuredList[0].certNo=de.order.tenantOrderInsuredList[0].certNo?de.order.tenantOrderInsuredList[0].certNo:r[0].cert[0].certNo,de.order.tenantOrderInsuredList[0].name=de.order.tenantOrderInsuredList[0].name?de.order.tenantOrderInsuredList[0].name:r[0].cert[0].certName):de.isSelfInsure&&(de.isSelfInsure=!1,de.order.tenantOrderHolder.certNo=de.order.tenantOrderHolder.certNo?de.order.tenantOrderHolder.certNo:r[0].cert[0].certNo,de.order.tenantOrderHolder.name=de.order.tenantOrderHolder.name?de.order.tenantOrderHolder.name:r[0].cert[0].certName)),!1}),{immediate:!0,deep:!0}),w(oe,(([{isIntersecting:e}],r)=>{de.showBtn=!e})),(e,t)=>{const a=v("van-image"),n=v("van-config-provider");return i(),h(n,{"theme-vars":c(r)},{default:y((()=>[l("div",te,[u(V,{url:c(de).banner},null,8,["url"]),u(re,{ref_key:"formRef",ref:ie,"is-first":c(de).newAuth,"insure-detail":c(de).insureDetail,detail:c(de).order,colors:c(de).colors},{default:y((()=>[u(x,{ref_key:"root",ref:oe,class:"submit-btn","is-gradient":!1,text:c(de).newAuth?"立即领取":"激活保障",onClick:pe},null,8,["text"]),!c(de).newAuth&&le.value&&le.value.length>0?(i(),h(j,{key:0,"attachement-list":le.value,"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{de.isOnlyView=!0,de.activeIndex=e,de.showFilePreview=!0})(e))},null,8,["attachement-list"])):b("",!0)])),_:1},8,["is-first","insure-detail","detail","colors"]),l("div",ae,[(i(!0),d(I,null,A(c(de).productDesc,((e,r)=>(i(),h(a,{key:r,width:"100%","lazy-load":"",src:e,class:""},null,8,["src"])))),128))]),c(de).detail?.tenantProductInsureVO?.inscribedContent?(i(),h(F,{key:0,"inscribed-content":c(de).detail?.tenantProductInsureVO?.inscribedContent},null,8,["inscribed-content"])):b("",!0),c(de).showBtn?(i(),d("footer",ne,[u(x,{"is-gradient":!1,text:c(de).newAuth?"立即领取":"激活保障",onClick:pe},null,8,["text"])])):b("",!0)]),c(de).showFilePreview&&0!==le.value.length?(i(),h(R,{key:0,show:c(de).showFilePreview,"onUpdate:show":t[1]||(t[1]=e=>c(de).showFilePreview=e),"content-list":le.value,"is-only-view":c(de).isOnlyView,"active-index":c(de).activeIndex,text:c(de).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-cound":0,"on-close-file-preview":"",onSubmit:me,onOnCloseFilePreview:fe},null,8,["show","content-list","is-only-view","active-index","text"])):b("",!0),c(de).loading?b("",!0):(i(),h(L,{key:1,"product-detail":c(de).detail},null,8,["product-detail"]))])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-10918870"]]))}}}))}();

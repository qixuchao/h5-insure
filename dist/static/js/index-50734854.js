var $e=Object.defineProperty,He=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var pe=(s,i,o)=>i in s?$e(s,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[i]=o,U=(s,i)=>{for(var o in i||(i={}))qe.call(i,o)&&pe(s,o,i[o]);if(fe)for(var o of fe(i))Ye.call(i,o)&&pe(s,o,i[o]);return s},$=(s,i)=>He(s,Re(i));import{g as X,Q as ye,E as T,y as W,j as h,n as w,z as c,J as x,p as l,L as Fe,A as t,B as Ke,a4 as we,a5 as Ee,F as M,G as H,k as R,C as q,t as j,M as Ce,_ as se,r as S,m as F,a9 as ze,O as Je,h as We,af as je,H as Ge,T as Qe,l as Xe}from"./vendor-667a94d7.js";import{_ as Z,u as Ze,q as Ve,a2 as oe,x as ae,l as ne,y as _e,G as et,z as tt,Q as he,A as ot,a3 as ve,O as at}from"./index-ef35bdf0.js";import{P as nt}from"./index-a6b261e8.js";import{m as lt,P as st}from"./modal-bg-cd7f5386.js";import{a as re,S as De,R as rt,f as le}from"./infoCollection-242da9b6.js";import{A as ut}from"./bankCard-b0679059.js";import{b as ue,v as it}from"./validator-ebd71d12.js";import{a as Ie}from"./order-b675ac95.js";import{p as ge,i as dt,s as ct,a as mt,u as ft,b as pt}from"./trial-99588317.js";import{p as _t}from"./product-ff9e61ea.js";import{g as ht,l as vt,t as Dt,b as be,c as It,a as gt}from"./logo-3104ecab.js";import"./trial-cfdae7e2.js";const bt=s=>(we("data-v-47f4f4ca"),s=s(),Ee(),s),yt={class:"com-question-item"},Ft={class:"question"},wt=bt(()=>c("div",{class:"icon"},x("?"),-1)),Et={class:"title"},Ct=X({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(s){const[i,o]=ye(!1),E=T(),e=()=>{o()},A=W(()=>i.value?Ze(E.value):0);return(Y,L)=>(h(),w("div",yt,[c("div",Ft,[wt,c("div",Et,x(s.question),1),l(Ve,{name:"down",class:Fe(["arrow-icon",{show:t(i)}]),onClick:e},null,8,["class"])]),c("div",{ref_key:"answerDom",ref:E,class:"answer",style:Ke({height:`${t(A)}px`})},x(s.answer),5)]))}});var Vt=Z(Ct,[["__scopeId","data-v-47f4f4ca"]]);const Bt={class:"com-question"},Pt=X({props:{list:{type:Array,default:()=>[]}},setup(s){const i=s,[o,E]=ye(!1),e=()=>{E()},A=W(()=>i.list.length<=4||o.value?i.list:i.list.slice(0,4));return(Y,L)=>(h(),w("div",Bt,[(h(!0),w(M,null,H(t(A),(k,K)=>(h(),R(Vt,{key:K,question:k.title,answer:k.desc},null,8,["question","answer"]))),128)),s.list.length>4?(h(),w("div",{key:0,class:"show-more",onClick:e},[q(x(t(o)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),l(Ve,{name:"down",class:Fe(["icon",{showMore:t(o)}])},null,8,["class"])])):j("",!0)]))}});var Ot=Z(Pt,[["__scopeId","data-v-40dd0994"]]);const ie=s=>(we("data-v-25fa5172"),s=s(),Ee(),s),Tt=ie(()=>c("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),Nt=ie(()=>c("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),At=ie(()=>c("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),St={class:"attachment-list"},xt={class:"product-attachment-list"},Lt=q(" \u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),kt={key:0,class:"dun-hao"},Mt={class:"rate-attachment-list"},Ut=q(" *\u4FDD\u8D39\u4E0E\u88AB\u4FDD\u4EBA\u5E74\u9F84\u3001\u533B\u4FDD\u60C5\u51B5\u76F8\u5173\uFF0C\u8BE6\u89C1 "),$t={key:0,class:"dun-hao"},Ht=X({props:{disable:{type:Boolean,default:!1},holderDisable:{type:Boolean,default:!1},paymentMethodDisable:{type:Boolean,default:!1},premium:{default:0},productDetail:{default:{}},formInfo:{default:()=>({})}},setup(s,{expose:i}){const o=s,E=T({}),e=Ce({insureDisable:!0,formInfo:o.formInfo}),A=I=>ue(I)?!0:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u59D3\u540D",Y=W(()=>{var I,a;return(a=(I=o.productDetail)==null?void 0:I.tenantProductInsureVO)==null?void 0:a.attachmentVOList.filter(g=>g.attachmentName==="\u8D39\u7387\u8868")}),L=W(()=>{var I,a;return((a=(I=o.productDetail)==null?void 0:I.tenantProductInsureVO)==null?void 0:a.attachmentVOList.filter(g=>g.attachmentName!=="\u8D39\u7387\u8868"))||[]}),k=()=>new Promise((I,a)=>{E==null||E.value.validate().then(()=>{I("")},()=>{a()})}),K=()=>{o.disable||(e.formInfo.renewalDK=!e.formInfo.renewalDK)};return se(()=>e.formInfo.insured.relationToHolder,(I,a)=>{o.disable||I!==a&&(I.toString()===re.SELF?(e.formInfo.insured={certNo:e.formInfo.holder.certNo,name:e.formInfo.holder.name,socialFlag:e.formInfo.holder.socialFlag,relationToHolder:I},e.insureDisable=!0):(e.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:I},e.insureDisable=!1))}),se(()=>e.formInfo.holder,()=>{e.formInfo.insured.relationToHolder===re.SELF&&Object.assign(e.formInfo.insured,e.formInfo.holder)},{deep:!0,immediate:!0}),i({validateForm:k}),(I,a)=>{const g=S("ProField"),z=S("ProRadioButton"),B=S("ProPicker"),ee=S("ProTabButton"),J=S("ProPDFviewer"),G=S("ProForm");return h(),R(G,{ref_key:"formRef",ref:E},{default:F(()=>[c("div",null,[Tt,l(g,{modelValue:t(e).formInfo.holder.name,"onUpdate:modelValue":a[0]||(a[0]=n=>t(e).formInfo.holder.name=n),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",maxlength:"10",rules:[{validator:A}],"is-view":o.holderDisable||o.disable},null,8,["modelValue","rules","is-view"]),l(g,{modelValue:t(e).formInfo.holder.certNo,"onUpdate:modelValue":a[1]||(a[1]=n=>t(e).formInfo.holder.certNo=n),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[t(oe).ID_CARD],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),l(g,{modelValue:t(e).formInfo.holder.mobile,"onUpdate:modelValue":a[2]||(a[2]=n=>t(e).formInfo.holder.mobile=n),label:"\u624B\u673A\u53F7",name:"mobile",required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",maxlength:"11","validate-type":[t(oe).PHONE],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),l(g,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=n=>t(e).formInfo.holder.socialFlag=n),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:F(()=>[l(z,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":a[3]||(a[3]=n=>t(e).formInfo.holder.socialFlag=n),disabled:o.disable,options:t(De)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),l(ae),c("div",null,[Nt,l(g,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[6]||(a[6]=n=>t(e).formInfo.insured.relationToHolder=n),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:F(()=>[l(z,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[5]||(a[5]=n=>t(e).formInfo.insured.relationToHolder=n),disabled:o.disable,options:t(rt)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"]),l(g,{modelValue:t(e).formInfo.insured.name,"onUpdate:modelValue":a[7]||(a[7]=n=>t(e).formInfo.insured.name=n),label:"\u59D3\u540D",name:"name",required:"",maxlength:"10",rules:[{validator:A}],"is-view":t(e).insureDisable||o.disable},null,8,["modelValue","rules","is-view"]),l(g,{modelValue:t(e).formInfo.insured.certNo,"onUpdate:modelValue":a[8]||(a[8]=n=>t(e).formInfo.insured.certNo=n),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[t(oe).ID_CARD],"is-view":t(e).insureDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),l(g,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":a[10]||(a[10]=n=>t(e).formInfo.insured.socialFlag=n),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:F(()=>[l(z,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":a[9]||(a[9]=n=>t(e).formInfo.insured.socialFlag=n),disabled:o.disable||t(e).insureDisable,options:t(De)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),l(ae),c("div",null,[At,l(g,{label:"\u6BCF\u6708\u4FDD\u8D39","is-view":!0},{input:F(()=>[q(x(o.premium)+" /\u6708 \u517112\u671F",1)]),_:1}),l(B,{modelValue:t(e).formInfo.paymentMethod,"onUpdate:modelValue":a[11]||(a[11]=n=>t(e).formInfo.paymentMethod=n),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":t(ut),"is-view":o.disable||t(e).formInfo.paymentMethodDisable,required:""},null,8,["modelValue","data-source","is-view"]),l(g,{label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9",border:!1},{input:F(()=>[l(ee,{disabled:o.allDisabled,title:"\u514D\u8D39\u5F00\u901A",active:t(e).formInfo.renewalDK,onClick:K},null,8,["disabled","active"])]),_:1}),c("div",St,[c("div",xt,[Lt,(h(!0),w(M,null,H(t(L),(n,_)=>(h(),R(J,{key:_,class:"file-name",title:`\u300A${n.attachmentName}\u300B`,content:n.attachmentUri,type:"pdf"},{default:F(()=>{var P,C;return[_!==(((C=(P=s.productDetail)==null?void 0:P.tenantProductInsureVO)==null?void 0:C.attachmentVOList)||[]).length-1?(h(),w("span",kt,"\u3001")):j("",!0)]}),_:2},1032,["title","content"]))),128))]),c("div",Mt,[Ut,(h(!0),w(M,null,H(t(Y),(n,_)=>(h(),R(J,{key:_,class:"file-name",title:`\u300A${n.attachmentName}\u300B`,content:n.attachmentUri,type:"pdf"},{default:F(()=>{var P,C;return[_!==(((C=(P=s.productDetail)==null?void 0:P.tenantProductInsureVO)==null?void 0:C.attachmentVOList)||[]).length-1?(h(),w("span",$t,"\u3001")):j("",!0)]}),_:2},1032,["title","content"]))),128))])])]),l(ae)]),_:1},512)}}});var Rt=Z(Ht,[["__scopeId","data-v-25fa5172"]]),qt="/static/assets/up-btn.e0edd882.png";const Yt={class:"page-product-detail"},Kt={class:"info"},zt=["src"],Jt=["src"],Wt={class:"guarantee-list"},jt={key:0,class:"basic"},Gt={class:"tab-1"},Qt=["src"],Xt={class:"footer-button"},Zt={class:"price"},eo=q(" \u603B\u4FDD\u8D39"),to={class:"guarantee-list"},oo={class:"title"},ao={class:"content"},no=X({setup(s){const i=ze(),o=Je(),{productCode:E="BWYL2021",tenantId:e,extInfo:A,orderId:Y}=o.query,L=ht(A),{phoneNo:k,saleChannelId:K,paymentMethod:I,certNo:a,name:g,orderId:z}=L,B=Y||z,ee=T([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),J=T(),G=T(0),n=T(!1),_=T(),P=T(),C=T(),Be=!!(g&&a&&k),Pe=!!B,y=Ce({holder:{certNo:a,certType:he.CERT,mobile:k,name:g,socialFlag:le.HAS},insured:{certNo:a,certType:he.CERT,name:g,socialFlag:le.HAS,relationToHolder:re.SELF},paymentMethod:I,paymentMethodDisable:!!I,renewalDK:!0}),te=T(!1),Oe=()=>{te.value=!1},Te=()=>{i.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:$(U({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify($(U({},L),{orderId:B}))})})},Ne=()=>{n.value=!0},Q=W(()=>{var f,r,u,p,v,d,b;return((u=(r=(f=_.value)==null?void 0:f.tenantProductInsureVO)==null?void 0:r.guaranteeList)==null?void 0:u.length)?(v=(p=_.value)==null?void 0:p.tenantProductInsureVO)==null?void 0:v.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(b=(d=_.value)==null?void 0:d.tenantProductInsureVO)==null?void 0:b.titleAndDescVOS}]}),de=()=>{const{holder:{certNo:f,mobile:r,name:u,socialFlag:p},insured:{certNo:v,name:d,socialFlag:b,relationToHolder:m},paymentMethod:D}=y,N=ve(f)&&it(r)&&ue(u)&&!!p,V=ve(v)&&ue(d)&&!!b&&!!m;return!!(N&&V&&!!D)},Ae=async f=>{try{const r=await ft(f),{code:u}=r;if(u==="10000"){const p=await pt({id:f.id,tenantId:e}),{data:v}=p;window.location.href=v}}catch{}},Se=f=>`${at}/chuangxin/baigebao/productDetail?tenantId=${e}&productCode=${E}&orderId=${f}`,xe=async f=>{const r=gt({tenantId:e,saleChannelId:K,detail:_.value,paymentMethod:y.paymentMethod,renewalDK:y.renewalDK?"Y":"N",successJumpUrl:"",premium:C.value,holder:y.holder,insured:y.insured,tenantOrderRiskList:f,orderStatus:"",orderTopStatus:""}),u=await ct(r),{code:p,data:v}=u;p==="10000"&&(Qe.loading({forbidClick:!0,message:"\u6838\u4FDD\u4E2D..."}),Ae($(U({},r),{id:v.data,extInfo:{extraInfo:{renewalDK:y.renewalDK,paymentMethod:y.paymentMethod,successJumpUrl:Se(v.data)}}})))},ce=async()=>{const{calcData:f,riskVOList:r}=be({holder:y.holder,insured:y.insured,tenantId:e,productDetail:_.value,insureDetail:P.value}),u=async()=>{const p=await ge(f),{code:v,data:d}=p;return v==="10000"?(C.value=d.premium,{condition:r,data:d}):{}};u(),Xe.exports.debounce(u,500,{trailing:!0})},Le=()=>new Promise(f=>{var r,u;(u=(r=J.value)==null?void 0:r.validateForm)==null||u.call(r).then(async()=>{const{calcData:p,riskVOList:v}=be({holder:y.holder,insured:y.insured,tenantId:e,productDetail:_.value,insureDetail:P.value}),d=await ge(p),{code:b,data:m}=d;b==="10000"&&(C.value=m.premium,f({condition:v,data:m})),f({})})}),ke=async()=>{var d;if(B){i.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:$(U({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify($(U({},L),{orderId:B}))})});return}const{condition:f,data:r}=await Le(),u={},p=(b=[])=>{(b||[]).forEach(m=>{var D;u[m.riskCode]=m,((D=m.riskPremiumDetailVOList)==null?void 0:D.length)&&p(m.riskPremiumDetailVOList)})};p(r.riskPremiumDetailVOList);const v=It({tenantId:e,riskList:f,riskPremium:u,productId:(d=_.value)==null?void 0:d.id});xe(v)};se(()=>y,()=>{_.value&&P.value&&!B&&de()&&ce()},{deep:!0,immediate:!0});const Me=async()=>{var p,v,d,b,m,D,N;const f=await mt({id:B,tenantId:e}),{code:r,data:u}=f;if(r==="10000"){const{tenantOrderHolder:V,tenantOrderInsuredList:O,extInfo:me}=u;y.holder={certNo:V.certNo,certType:V.certType,mobile:V.mobile,name:V.name,socialFlag:le.HAS},y.insured={certNo:O==null?void 0:O[0].certNo,certType:(p=O[0])==null?void 0:p.certType,name:(v=O[0])==null?void 0:v.name,socialFlag:(b=(d=O[0])==null?void 0:d.extInfo)==null?void 0:b.hasSocialInsurance,relationToHolder:(m=O[0])==null?void 0:m.relationToHolder},y.paymentMethod=me.extraInfo.paymentMethod,C.value=(N=(D=O[0])==null?void 0:D.tenantOrderProductList[0])==null?void 0:N.premium,y.renewalDK=me.extraInfo.renewalDK==="Y",(u.orderStatus===Ie.ACCEPT_POLICY||u.orderStatus===Ie.PAYMENT_SUCCESS)&&(te.value=!0)}},Ue=async()=>{const f=_t({productCode:E,withInsureInfo:!0}),r=dt({productCode:E});await Promise.all([f,r]).then(([u,p])=>{u.code==="10000"&&(_.value=u.data),p.code==="10000"&&(P.value=p.data)}),B?Me():de()&&ce()};return We(()=>{Ue(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(f,r)=>{const u=S("van-button"),p=S("van-config-provider"),v=je("dompurify-html");return h(),w(M,null,[l(p,{"theme-vars":t(Dt)},{default:F(()=>{var d,b;return[c("div",Yt,[c("div",Kt,[c("img",{class:"logo",src:t(vt)},null,8,zt),c("img",{src:(b=(d=_.value)==null?void 0:d.tenantProductInsureVO)==null?void 0:b.banner[0],class:"banner"},null,8,Jt),c("div",Wt,[l(ne,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:Ne},{default:F(()=>{var m,D,N;return[_.value&&((m=_.value)==null?void 0:m.tenantProductInsureVO)?(h(),w("div",jt,[(h(!0),w(M,null,H((N=(D=t(Q))==null?void 0:D[G.value])==null?void 0:N.titleAndDescVOS,(V,O)=>(h(),R(ot,{key:O,class:"guarantee-item",title:V.title,content:V.desc,border:!1},null,8,["title","content"]))),128))])):j("",!0)]}),_:1})])]),l(_e,{class:"tabs",list:ee.value,sticky:"",scrollspy:""},{tab1:F(()=>[l(Rt,{ref_key:"formRef",ref:J,"holder-disable":Be,disable:Pe,"form-info":t(y),premium:C.value,"product-detail":_.value},null,8,["form-info","premium","product-detail"])]),tab2:F(()=>{var m,D;return[c("div",Gt,[(h(!0),w(M,null,H(((D=(m=_.value)==null?void 0:m.tenantProductInsureVO)==null?void 0:D.spec)||[],(N,V)=>(h(),w("img",{key:V,src:N,class:"detail-img"},null,8,Qt))),128))])]}),tab3:F(()=>[l(ne,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:F(()=>{var m,D;return[l(nt,{list:(D=(m=_.value)==null?void 0:m.tenantProductInsureVO)==null?void 0:D.settlementProcessList},null,8,["list"])]}),_:1}),l(ne,{title:"\u5E38\u89C1\u95EE\u9898"},{default:F(()=>{var m,D;return[l(Ot,{list:(D=(m=_.value)==null?void 0:m.tenantProductInsureVO)==null?void 0:D.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),c("div",Xt,[c("div",Zt,[eo,c("span",null,"\uFFE5"+x(t(et)(C.value))+"/\u6708",1)]),l(u,{type:"primary",class:"right",onClick:ke},{default:F(()=>[q(x(t(B)?"\u5347\u7EA7\u4FDD\u969C":"\u7ACB\u5373\u6295\u4FDD"),1)]),_:1})])])]}),_:1},8,["theme-vars"]),l(tt,{show:n.value,"onUpdate:show":r[0]||(r[0]=d=>n.value=d),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:F(()=>[t(Q).length>1?(h(),R(_e,{key:0,list:t(Q).map((d,b)=>({title:d.guaranteeType,slotName:`guarantee-${b}`})),class:"tab"},null,8,["list"])):j("",!0),c("div",to,[(h(!0),w(M,null,H(t(Q)[G.value].titleAndDescVOS,(d,b)=>(h(),w("div",{key:b,class:"guarantee-item"},[c("div",oo,x(d.title),1),Ge(c("div",ao,null,512),[[v,d.content]])]))),128))])]),_:1},8,["show"]),l(st,{"is-show":te.value,bg:t(lt),"btn-bg":t(qt),onOnConfirm:Te,onOnClose:Oe},null,8,["is-show","bg","btn-bg"])],64)}}});var Io=Z(no,[["__scopeId","data-v-72920853"]]);export{Io as default};

var H=Object.defineProperty,K=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var D=(o,t,e)=>t in o?H(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,x=(o,t)=>{for(var e in t||(t={}))Q.call(t,e)&&D(o,e,t[e]);if(R)for(var e of R(t))Y.call(t,e)&&D(o,e,t[e]);return o},E=(o,t)=>K(o,P(t));import{t as O}from"./theme-ea709837.js";import{h as Z,G as d,z as g,$ as X,Y as z,r as i,k as c,m as v,n as m,s as j,v as q,A as U,B as u,E as T,L as G}from"./vendor-b1b61443.js";var ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAAB0CAMAAABjROYVAAAAAXNSR0IArs4c6QAAAT5QTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////tGB6DAAAAGl0Uk5TAAIEBQYHCgsMDxAREhMUGRoeICctMzQ4OTo7PUBBREZISUpLTE1OT1JbYWNnaG1wdHV2eXp7g4uNkZSVlpecnaivsLG4ubvFxsfKy87S1dfY2d/g4eLk5+jp6uzt7/Dz9Pb3+fr7/P3+/72HPAAABS9JREFUaN7Fm/0/G00QwEfloaUpRb1WKaXo4yVUCBpvqaDeizxIEUnI9///B54f7hKJXu72Lnu5+c3H7H4/t5mdnZmdFXEnjZ3jkXgieXh2k83enB0mE/HIeGej+Cdtk/GTPBaSP4lPtvkAfDW6eoytHK+OvtKK/BC7RkGuYx90Ed9Ejp7nLVzsrMyM9HV1hEOhcEdX38jMys5F4fn/R5E3GpDvorfFCXPJ6GCzlU7zYDSZK2rdRt/VajvL9+Zc6bXh13aar4d/pE3V++VarCq0mDG/cWsipKA+sWV+b2Yx5JX56dS0j4Ww6pDwgmlxJ588Ids3jOGXs01uhjXNXhrjNtrdM78Yv9DVtOuF+mf6yrCCL2693VIB4Gmtxcsitaw9ARSWXPnH93sA7Hd7NYfuXwDsvVcfMpAGyM01eDf8hrkcQHpAdcDXB4Dzntq2eM85wMNXNe1vjwDbrbX6stZtgMdvKrrfAfiuw2srT/UdID+l56yYyitRvwFkxnSdUGMZAIcV/voI/OnXdxL3/wEeba1p4AHIaGSK9GeAB5ud8z4N5MdEq4w9AumqXqJxD2BKNMsUwF41j7ikba9YbIilKudKAdj2I3bdBgqWZ057Gvjd6ge09RxIW52vG0CuR3yRnhywYRGbAMz5lRzMAfwVwYROgf0Gv6AN+8DpyyBkEXjqFt+k+wlYfBHfZoA1H5MvWQMylfHwMnDV4ie05QpYrsgd7oF/xVeZBu7LM44ocBnyFxq6BKJledktMCs+yyxw+5zTRYDrJr+hTddApPTnEbAgvssCcFTKs4Fc2H9oOAcUc/UYsGmv/zZ2cHcQe1uDgojIFhAzaxjXwISt9sf/AEgNVVMYMhU+2k4zAVwb1ZBRIG27X96mzBw7WyWUGcuaCinbbw2lgVEREVl19ICxUh3DmlpillavivwAVkVE5BgYttU9wJZaxuTAdqJh4FhEpA3I2dYw5A47ajmTO9uJXueANhGZBJKi+qV/UyuYDl8qSWBSROKVLtH+N/2bWsl0+E0lCsRF5AQYdNilqarUF8yUw04dBE5EGvNQaHbwJUPZKtQXzOyQw0TNBcg3Sidw4ZwbWFPHsgAOG6pCLoBOGQd2xBvVPVN2gHGZB1bEE9UDU1aAiKwDM+KF6oUpM8C6/AQ+ixeqF6aMAD9lF+gVL1QvTOkFduUQ6JJaqapM6QIO5QzokBqpykzpAM7kBlAPVayp6kwJAzeSBVxEvFZUF0wJAVm3UAuqG6YJdbe8FlRXTHN5XRlS7VDDkNxsGQ3La2yZJNBXP0PqA5KSAEbqt2VGgIS6w9fjHGaAuEQUjzZNbtA42hQPcV0O3zjE1cIVbUebEa4oBWbaDnEzMFMJQfWFK2YIqhJs6wvMisG2QlqhLwQtphUKCZS2YLuUQCmkitrSilKq6CoprjGBek6KndN/XaliWfrvXOjQlRSXFTokBmzVI/0vK+k4F680FToqileOZTpNJZ2KMp1zQfJjyql4lXIuXr0oSDqXXnWU6V6UXgMpMhvl9Ok6l9MDuTgI5ookkMsg36+9flldewVywRfMVaZxaXte50vbQK6ng7mID6blwKfmirxtc0UwbSTBNMwE0xoUTBNUMO1ewTS2FVv4fte1hS+YZkUdbZn7rtsyg2lAlVpabUNeW20lmKZiqa19+vSTV3N4bhTfVGsU36y9UVwCaYkXCaT5X8TymUNv8ZlDrz/PHIxcve4POoxqSP2frphWVe9HOiX/2Dk+v57YLT5H2k2sz7t/jvQ/OUv8Dn3rFHYAAAAASUVORK5CYII=";const J={class:"item"},_={class:"footer"},ae=Z({props:{show:{type:Boolean,default:!1},contentList:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},text:{type:String,default:""},beforeReadOverText:{type:String,default:"\u540C\u610F\uFF0C\u4E0B\u4E00\u6761"},forceReadCound:{type:Number,default:0}},emits:["update:show","submit","onCloseFilePreview"],setup(o,{emit:t}){const e=o,f=d(e.show),V=d(!0),r=d(e.contentList.map((a,s)=>E(x({},a),{disabled:!0,readDisabled:!0}))),l=d(e.activeIndex),A=d(0),y=d(null),k=g(()=>{var a,s;return(s=(a=r.value)==null?void 0:a[l.value])==null?void 0:s.attachmentUri}),C=g(()=>{var a;return(a=r.value[l.value])==null?void 0:a.readDisabled}),N=g(()=>l.value>=e.forceReadCound-1||A.value>=e.forceReadCound?!1:A.value<e.forceReadCound?l.value!==e.forceReadCound-1:!1),I=()=>{l.value+=1},S=()=>{t("update:show",!1),t("submit")};X(()=>e,()=>{f.value=e.show,l.value=e.activeIndex},{deep:!0,immediate:!0});const F=a=>{var s,p,w;if(a){const b=((s=a.target)==null?void 0:s.scrollHeight)||a.scrollHeight,h=((p=a.target)==null?void 0:p.scrollTop)||a.scrollTop,B=((w=a.target)==null?void 0:w.clientHeight)||a.clientHeight;Math.floor(b-h-15)<=B&&V.value&&r.value[l.value].readDisabled&&(r.value[l.value].disabled=!1,r.value[l.value].readDisabled=!1,r.value[l.value+1].disabled=!1,A.value+=1)}};return X(()=>l.value,()=>{V.value=!1,e.show&&(A.value>=e.forceReadCound&&r.value.forEach(a=>{a.disabled=!1,a.readDisabled=!1}),setTimeout(()=>{V.value=!0},800)),z(()=>{setTimeout(()=>{F(y.value)},2e3)})},{immediate:!0}),(a,s)=>{const p=i("ProTab"),w=i("ProFilePreview"),b=i("VanButton"),h=i("van-config-provider"),B=i("ProPopup");return c(),v(B,{show:f.value,"onUpdate:show":s[1]||(s[1]=n=>f.value=n),class:"file-preview-popup-wrap",closeable:!1,onClose:s[2]||(s[2]=n=>t("onCloseFilePreview"))},{default:m(()=>[j(h,{"theme-vars":u(O),class:"custom-provider"},{default:m(()=>[f.value?(c(),v(p,{key:0,active:l.value,"onUpdate:active":s[0]||(s[0]=n=>l.value=n),list:r.value.map((n,M)=>({title:n.attachmentName,disabled:M==l.value?!1:n.disabled||!1,slotName:`guarantee-${M}`})),class:"tab"},null,8,["active","list"])):q("",!0),U("div",{ref_key:"previewRef",ref:y,class:"list",onScroll:F},[U("div",J,[(c(),v(w,{key:u(k),content:u(k),type:"pdf","forbid-click":!0},null,8,["content"]))])],544),U("div",_,[u(N)?(c(),v(b,{key:0,disabled:u(C),type:"primary",block:"",round:"",onClick:I},{default:m(()=>[T(G(`${o.beforeReadOverText}(${l.value+1}/${o.forceReadCound})`),1)]),_:1},8,["disabled"])):(c(),v(b,{key:1,disabled:u(C),type:"primary",block:"",round:"",onClick:S},{default:m(()=>[T(G(e.text),1)]),_:1},8,["disabled"]))])]),_:1},8,["theme-vars"])]),_:1},8,["show"])}}});export{ae as _,ee as c};

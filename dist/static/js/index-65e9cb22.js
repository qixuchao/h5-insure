var Te=Object.defineProperty,Ae=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var ce=(l,r,o)=>r in l?Te(l,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[r]=o,M=(l,r)=>{for(var o in r||(r={}))Se.call(r,o)&&ce(l,o,r[o]);if(de)for(var o of de(r))Ne.call(r,o)&&ce(l,o,r[o]);return l},q=(l,r)=>Ae(l,Oe(r));import{g as j,Q as De,E as A,y as oe,j as m,n as g,z as i,J as S,p as s,L as he,A as t,B as ke,a4 as ae,a5 as le,F as H,G as $,k as Y,C as K,t as W,M as Ie,_ as Le,r as x,m as p,a9 as xe,O as Ue,h as Me,af as qe,D as He,H as Re,T as Z}from"./vendor-667a94d7.js";import{_ as Q,u as $e,q as be,a2 as me,x as ee,l as J,y as fe,G as Ye,z as Ke,Q as pe,A as ze}from"./index-f087bc90.js";import{P as Je}from"./index-4ff105c6.js";import{p as We,i as je,a as Qe,s as Ge,u as Xe,b as Ze}from"./trial-ab7e64ad.js";import{p as et}from"./product-2a7df880.js";import{a as _e}from"./order-35b0e3c5.js";import{a as Fe,S as ve,R as tt,f as te}from"./infoCollection-242da9b6.js";import{A as ot}from"./bankCard-df06befe.js";import{g as at,l as lt,b as st,t as nt,a as ut}from"./utils-73ac9e64.js";import"./trial-db752583.js";const rt=l=>(ae("data-v-7a8bf142"),l=l(),le(),l),it={class:"com-question-item"},dt={class:"question"},ct=rt(()=>i("div",{class:"icon"},S("?"),-1)),mt={class:"title"},ft=j({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(l){const[r,o]=De(!1),b=A(),e=()=>{o()},N=oe(()=>r.value?$e(b.value):0);return(O,E)=>(m(),g("div",it,[i("div",dt,[ct,i("div",mt,S(l.question),1),s(be,{name:"down",class:he(["arrow-icon",{show:t(r)}]),onClick:e},null,8,["class"])]),i("div",{ref_key:"answerDom",ref:b,class:"answer",style:ke({height:`${t(N)}px`})},S(l.answer),5)]))}});var pt=Q(ft,[["__scopeId","data-v-7a8bf142"]]);const _t={class:"com-question"},vt=j({props:{list:{type:Array,default:()=>[]}},setup(l){const r=l,[o,b]=De(!1),e=()=>{b()},N=oe(()=>r.list.length<=4||o.value?r.list:r.list.slice(0,4));return(O,E)=>(m(),g("div",_t,[(m(!0),g(H,null,$(t(N),(a,D)=>(m(),Y(pt,{key:D,question:a.title,answer:a.desc},null,8,["question","answer"]))),128)),l.list.length>4?(m(),g("div",{key:0,class:"show-more",onClick:e},[K(S(t(o)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),s(be,{name:"down",class:he(["icon",{showMore:t(o)}])},null,8,["class"])])):W("",!0)]))}});var Dt=Q(vt,[["__scopeId","data-v-22ede01f"]]);const se=l=>(ae("data-v-cbdc3c12"),l=l(),le(),l),ht=se(()=>i("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),It=se(()=>i("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),bt=se(()=>i("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),Ft=j({props:{disable:{type:Boolean,default:!1},holderDisable:{type:Boolean,default:!1},paymentMethodDisable:{type:Boolean,default:!1},formInfo:{default:()=>({})}},setup(l,{expose:r}){const o=l,b=A({}),e=Ie({insureDisable:!0,formInfo:o.formInfo}),N=()=>new Promise((E,a)=>{b==null||b.value.validate().then(()=>{E("")},()=>{a()})}),O=()=>{o.disable||(e.formInfo.renewalDK=!e.formInfo.renewalDK)};return Le(()=>e.formInfo.insured.relationToHolder,(E,a)=>{E!==a&&(E.toString()===Fe.SELF?(e.formInfo.insured={certNo:e.formInfo.holder.certNo,name:e.formInfo.holder.name,socialFlag:e.formInfo.holder.socialFlag,relationToHolder:E},e.insureDisable=!0):(e.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:E},e.insureDisable=!1))}),r({validateForm:N}),(E,a)=>{const D=x("ProField"),k=x("ProRadioButton"),R=x("ProPicker"),B=x("ProTabButton"),G=x("ProForm");return m(),Y(G,{ref_key:"formRef",ref:b},{default:p(()=>[i("div",null,[ht,s(D,{modelValue:t(e).formInfo.holder.name,"onUpdate:modelValue":a[0]||(a[0]=u=>t(e).formInfo.holder.name=u),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D","is-view":o.holderDisable||o.disable},null,8,["modelValue","is-view"]),s(D,{modelValue:t(e).formInfo.holder.certNo,"onUpdate:modelValue":a[1]||(a[1]=u=>t(e).formInfo.holder.certNo=u),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","validate-type":[t(me).ID_CARD],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),s(D,{modelValue:t(e).formInfo.holder.mobile,"onUpdate:modelValue":a[2]||(a[2]=u=>t(e).formInfo.holder.mobile=u),label:"\u624B\u673A\u53F7",name:"mobile",required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7","is-view":o.holderDisable||o.disable},null,8,["modelValue","is-view"]),s(D,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=u=>t(e).formInfo.holder.socialFlag=u),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:p(()=>[s(k,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":a[3]||(a[3]=u=>t(e).formInfo.holder.socialFlag=u),disabled:o.disable,options:t(ve)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),s(ee),i("div",null,[It,s(D,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[6]||(a[6]=u=>t(e).formInfo.insured.relationToHolder=u),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:p(()=>[s(k,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[5]||(a[5]=u=>t(e).formInfo.insured.relationToHolder=u),disabled:o.disable,options:t(tt)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"]),s(D,{modelValue:t(e).formInfo.insured.name,"onUpdate:modelValue":a[7]||(a[7]=u=>t(e).formInfo.insured.name=u),label:"\u59D3\u540D",name:"name",required:"","is-view":t(e).insureDisable||o.disable},null,8,["modelValue","is-view"]),s(D,{modelValue:t(e).formInfo.insured.certNo,"onUpdate:modelValue":a[8]||(a[8]=u=>t(e).formInfo.insured.certNo=u),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","validate-type":[t(me).ID_CARD],"is-view":t(e).insureDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),s(D,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":a[10]||(a[10]=u=>t(e).formInfo.insured.socialFlag=u),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:p(()=>[s(k,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":a[9]||(a[9]=u=>t(e).formInfo.insured.socialFlag=u),disabled:o.disable,options:t(ve)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),s(ee),i("div",null,[bt,s(D,{modelValue:t(e).formInfo.premium,"onUpdate:modelValue":a[11]||(a[11]=u=>t(e).formInfo.premium=u),label:"\u6BCF\u6708\u4FDD\u8D39","is-view":!0},{input:p(()=>[K(S(t(e).formInfo.premium)+" /\u6708 \u517112\u671F",1)]),_:1},8,["modelValue"]),s(R,{modelValue:t(e).formInfo.paymentMethod,"onUpdate:modelValue":a[12]||(a[12]=u=>t(e).formInfo.paymentMethod=u),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":t(ot),"is-view":o.disable||t(e).formInfo.paymentMethodDisable,required:""},null,8,["modelValue","data-source","is-view"]),s(D,{label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9"},{input:p(()=>[s(B,{disabled:o.allDisabled,title:"\u514D\u8D39\u5F00\u901A",active:t(e).formInfo.renewalDK,onClick:O},null,8,["disabled","active"])]),_:1})]),s(ee)]),_:1},512)}}});var yt=Q(Ft,[["__scopeId","data-v-cbdc3c12"]]);const gt=l=>(ae("data-v-4748d4b0"),l=l(),le(),l),Et={class:"page-product-detail"},wt={class:"info"},Vt=["src"],Ct=["src"],Bt={class:"guarantee-list"},Pt={key:0,class:"basic"},Tt={class:"tab-1"},At=["src"],Ot=gt(()=>i("div",{class:"sub-title"},"*\u4EA7\u54C1\u8D44\u6599\u6587\u4EF6\u8BE6\u60C5\u53EF\u624B\u52A8\u653E\u5927\uFF0C\u4EE5\u4FBF\u60A8\u66F4\u6E05\u6670\u67E5\u9605\u5185\u5BB9\u3002",-1)),St={class:"tab-1-content"},Nt=K(" \u8BF7\u67E5\u770B "),kt={key:0,class:"dun-hao"},Lt={class:"footer-button"},xt={class:"price"},Ut=K(" \u603B\u4FDD\u8D39"),Mt={class:"guarantee-list"},qt={class:"title"},Ht={class:"content"},Rt=j({setup(l){const r=xe(),o=Ue(),{productCode:b="BWYL2021",tenantId:e,extInfo:N}=o.query,O=at(N);console.log(O);const{phoneNo:E,saleChannelId:a,paymentMethod:D,certNo:k,name:R,orderId:B}=O,G=A([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),u=A(),ne=A(0),X=A(!1),h=A(),ue=A();A();const ye=!!(R&&k&&E),ge=!!B,F=Ie({holder:{certNo:k,certType:pe.CERT,mobile:E,name:R,socialFlag:te.HAS},insured:{certNo:k,certType:pe.CERT,name:R,socialFlag:te.HAS,relationToHolder:Fe.SELF},paymentMethod:D,paymentMethodDisable:!!D,premium:0,renewalDK:!0}),Ee=()=>{X.value=!0},z=oe(()=>{var _,d,f,v,I,y,w;return((f=(d=(_=h.value)==null?void 0:_.tenantProductInsureVO)==null?void 0:d.guaranteeList)==null?void 0:f.length)?(I=(v=h.value)==null?void 0:v.tenantProductInsureVO)==null?void 0:I.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(w=(y=h.value)==null?void 0:y.tenantProductInsureVO)==null?void 0:w.titleAndDescVOS}]}),we=async _=>{try{const d=await Xe(_),{code:f}=d;if(f==="10000"){const v=await Ze({id:_.id,tenantId:e}),{data:I}=v}Z.clear()}catch{Z.clear()}},Ve=_=>`https://planet-h5-insure-test.zhongan.io/activity/productDetail?tenantId=${e}&productCode=${b}&orderId=${_}`,Ce=async _=>{const d=ut({tenantId:e,saleChannelId:a,detail:h.value,paymentMethod:F.paymentMethod,renewalDK:F.renewalDK?"Y":"N",successJumpUrl:"",premium:F.premium,holder:F.holder,insured:F.insured,tenantOrderRiskList:_}),f=await Ge(d),{code:v,data:I}=f;v==="10000"&&(Z.loading({forbidClick:!0,message:"\u6838\u4FDD\u4E2D..."}),we(q(M({},d),{id:I.data,extInfo:{extraInfo:{renewalDK:F.renewalDK||"N",paymentMethod:F.paymentMethod,successJumpUrl:Ve(I.data)}}})))},re=()=>new Promise(_=>{var d,f;(f=(d=u.value)==null?void 0:d.validateForm)==null||f.call(d).then(async()=>{const{calcData:v,riskVOList:I}=st({holder:F.holder,insured:F.insured,tenantId:e,productDetail:h.value,insureDetail:ue.value}),y=await We(v),{code:w,data:n}=y;w==="10000"&&(F.premium=n.premium,_({condition:I,data:n}))})}),Be=async()=>{var y;if(B){r.push({path:"/activity/guaranteeUpgrade",query:q(M({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify(q(M({},O),{orderId:B}))})});return}const{condition:_,data:d}=await re(),f={},v=(w=[])=>{(w||[]).forEach(n=>{var c;f[n.riskCode]=n,((c=n.riskPremiumDetailVOList)==null?void 0:c.length)&&v(n.riskPremiumDetailVOList)})};v(d.riskPremiumDetailVOList);const I=nt({tenantId:e,riskList:_,riskPremium:f,productId:(y=h.value)==null?void 0:y.id});Ce(I)},Pe=async()=>{var f,v,I,y,w,n,c,C;const _=et({productCode:b,withInsureInfo:!0}),d=je({productCode:b});if(await Promise.all([_,d]).then(([V,P])=>{V.code==="10000"&&(h.value=V.data),P.code==="10000"&&(ue.value=P.data)}),B){const V=await Qe({id:B,tenantId:e}),{code:P,data:U}=V;if(P==="10000"&&(U.orderStatus===_e.ACCEPT_POLICY||U.orderStatus===_e.PAYMENT_SUCCESS)){const{tenantOrderHolder:L,tenantOrderInsuredList:T,extInfo:ie}=U;Object.assign(F,{holder:{certNo:L.certNo,certType:L.certType,mobile:L.mobile,name:L.name,socialFlag:te.HAS},insured:{certNo:(f=T[0])==null?void 0:f.certNo,certType:(v=T[0])==null?void 0:v.certType,name:(I=T[0])==null?void 0:I.name,socialFlag:(w=(y=T[0])==null?void 0:y.extInfo)==null?void 0:w.hasSocialInsurance,relationToHolder:(n=T[0])==null?void 0:n.relationToHolder},paymentMethod:ie.extraInfo.paymentMethod,premium:(C=(c=T[0])==null?void 0:c.tenantOrderProductList[0])==null?void 0:C.premium,renewalDK:ie.extraInfo.renewalDK==="Y"}),He.confirm({title:"\u6807\u9898",message:"\u5347\u7EA7\u4FDD\u969C\u5417"}).then(()=>{r.push({path:"/activity/guaranteeUpgrade",query:q(M({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify(q(M({},O),{orderId:B}))})})}).catch(()=>{})}}else re()};return Me(()=>{Pe(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(_,d)=>{var y,w;const f=x("ProPDFviewer"),v=x("van-button"),I=qe("dompurify-html");return m(),g(H,null,[i("div",null,[i("div",Et,[i("div",wt,[i("img",{class:"logo",src:t(lt)},null,8,Vt),i("img",{src:(w=(y=h.value)==null?void 0:y.tenantProductInsureVO)==null?void 0:w.banner[0],class:"banner"},null,8,Ct),i("div",Bt,[s(J,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:Ee},{default:p(()=>{var n,c,C;return[h.value&&((n=h.value)==null?void 0:n.tenantProductInsureVO)?(m(),g("div",Pt,[(m(!0),g(H,null,$((C=(c=t(z))==null?void 0:c[ne.value])==null?void 0:C.titleAndDescVOS,(V,P)=>(m(),Y(ze,{key:P,class:"guarantee-item",title:V.title,content:V.desc,border:!1},null,8,["title","content"]))),128))])):W("",!0)]}),_:1})])]),s(fe,{class:"tabs",list:G.value,sticky:"",scrollspy:""},{tab1:p(()=>[s(yt,{ref_key:"formRef",ref:u,"holder-disable":ye,disable:ge,"form-info":t(F)},null,8,["form-info"])]),tab2:p(()=>{var n,c;return[i("div",Tt,[(m(!0),g(H,null,$(((c=(n=h.value)==null?void 0:n.tenantProductInsureVO)==null?void 0:c.spec)||[],(C,V)=>(m(),g("img",{key:V,src:C,class:"detail-img"},null,8,At))),128)),s(J,{title:"\u4EA7\u54C1\u8D44\u6599"},{subTitle:p(()=>[Ot]),default:p(()=>{var C,V;return[i("div",St,[Nt,(m(!0),g(H,null,$(((V=(C=h.value)==null?void 0:C.tenantProductInsureVO)==null?void 0:V.attachmentVOList)||[],(P,U)=>(m(),Y(f,{key:U,class:"file-name",title:`\u300A${P.attachmentName}\u300B`,content:P.attachmentUri,type:"pdf"},{default:p(()=>{var L,T;return[U!==(((T=(L=h.value)==null?void 0:L.tenantProductInsureVO)==null?void 0:T.attachmentVOList)||[]).length-1?(m(),g("span",kt,"\u3001")):W("",!0)]}),_:2},1032,["title","content"]))),128))])]}),_:1})])]}),tab3:p(()=>[s(J,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:p(()=>{var n,c;return[s(Je,{list:(c=(n=h.value)==null?void 0:n.tenantProductInsureVO)==null?void 0:c.settlementProcessList},null,8,["list"])]}),_:1}),s(J,{title:"\u5E38\u89C1\u95EE\u9898"},{default:p(()=>{var n,c;return[s(Dt,{list:(c=(n=h.value)==null?void 0:n.tenantProductInsureVO)==null?void 0:c.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),i("div",Lt,[i("div",xt,[Ut,i("span",null,"\uFFE5"+S(t(Ye)(t(F).premium))+"/\u6708",1)]),s(v,{type:"primary",class:"right",onClick:Be},{default:p(()=>[K(S(t(B)?"\u5347\u7EA7\u4FDD\u969C":"\u7ACB\u5373\u6295\u4FDD"),1)]),_:1})])])]),s(Ke,{show:X.value,"onUpdate:show":d[0]||(d[0]=n=>X.value=n),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:p(()=>[t(z).length>1?(m(),Y(fe,{key:0,list:t(z).map((n,c)=>({title:n.guaranteeType,slotName:`guarantee-${c}`})),class:"tab"},null,8,["list"])):W("",!0),i("div",Mt,[(m(!0),g(H,null,$(t(z)[ne.value].titleAndDescVOS,(n,c)=>(m(),g("div",{key:c,class:"guarantee-item"},[i("div",qt,S(n.title),1),Re(i("div",Ht,null,512),[[I,n.content]])]))),128))])]),_:1},8,["show"])],64)}}});var eo=Q(Rt,[["__scopeId","data-v-4748d4b0"]]);export{eo as default};

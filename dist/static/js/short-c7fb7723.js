import{i as e,N as t,l as n,m as a,s as r,t as i,p as s,B as l,L as o,C as c,F as u,H as d,M as m,I as g,J as p,d as v,r as f,$ as y,A as I,R as h,ag as C,x as T,n as P,G as D,a5 as O,a6 as N,Z as k,_ as V,U as A,T as S,aa as w,P as b,k as L,D as x}from"./vendor-a007eb5d.js";import{d as U}from"./debounce-c1b5babb.js";import{P as F}from"./index-0f27e894.js";import{_ as E,e as M,i as R,a7 as B,C as q,I as Z,K as _,a1 as j}from"./index-12c50db1.js";import{u as H}from"./core-06aa03f8.js";import{C as Y,k as Q,l as G,m as K,S as J,R as W,g as X}from"./infoCollection-ee27d274.js";import{i as z,b as $,p as ee,g as te}from"./trial-085eb559.js";import{p as ne}from"./product-0f9c4f9e.js";import{o as ae,r as re,t as ie}from"./utils-65061839.js";import{_ as se,n as le}from"./nextStep-fa32caac.js";import{t as oe,u as ce}from"./theme-467ed2f7.js";import{B as ue,A as de,P as me,_ as ge}from"./index-b3d903a1.js";import{P as pe}from"./index-8f6ce171.js";import{L as ve}from"./loading-1c9c1d7b.js";import{u as fe}from"./useDicData-6871e606.js";import{s as ye}from"./phoneVerify-898e4a8c.js";import"./index-92c65efa.js";import"./useStorage-d17164ad.js";import"./trial-2e2cfc40.js";import"./relativeTime-7ca1e2c9.js";const Ie={class:"customer-body"},he={class:"header"},Ce={class:"conatiner"},Te=["onClick"],Pe={class:"name"};var De=E(e({props:{userInfo:{type:Object,default:()=>({})},relationCode:{type:String,default:"1"},title:{type:String,default:"选择投保人"}},emits:["change"],setup(e,{emit:v}){let f=[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"王大啦",certNo:"110101199003078910",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"001",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"},{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"李大霄",certNo:"110101199003070193",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"002",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"}];f=[...f,...f,...f];const y=t({loading:!1,select:f[0],list:f}),I=()=>{y.loading=!1,v("change",y.select)},h=()=>{y.loading=!1,(async()=>{y.loading=!0})()};return(t,v)=>{const f=n("ProSvg"),C=n("van-icon"),T=n("ProPopup");return a(),r(u,null,[i(f,{name:"customer",onClick:h}),i(T,{class:"customer-list",style:{height:"416px"},show:c(y).loading,closeable:!1},{default:s((()=>[l("div",Ie,[l("div",he,[l("span",null,o(e.title),1),i(C,{name:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAuRJREFUeF7t3DtOI0EQBuDfEtImXAdyNoIEAffYkIALrFZaMu4BiAQiyOE6myARoJI8kteyx/3469FWTTxT3fVNdY/dY/cCeVAFFtRoGQwJSi6CBE1QsgA5XFZogpIFyOGyQhOULEAOlxWaoGQBcris0CCglwB+ATgEcA/gFsAXuW/W4Q4AXAOQ3P4BuAPwUNuJlgqVBgVx9XheduSztgNBzv+xxDtb689VLWoL6CuAkw0Qo6Juw5QU3wD8rLnpLaDvAI62NDIa6hympPgB4Fgb9AbA75lGRkHdhSkpSq5/tEFl8n4CsD7fjDSnlmBKYZzXPmxbhrzAlXZIHmDRHlSqfW8FHRVVFVNQekBHQ1XHZICOgmqCyQKNjmqGyQSNimqKyQaNhmqOqQEaBdUFUwvUG9UNUxPUC9UVUxvUGtUd0wLUCjUEphWoNmoYTEtQLdRQmNagbNRwmB6gLNSQmF6gvahhMT1BW1FDY3qD1qLK+fKePPSrl94FZkmy9yipupdlI6czjYV4ORgBtLRS525cCMwIQ34VqaRSN6GGwYwG2lKpoTAjgk6ojwDm5ks5T+bVi2ivqaPMoetDP0F7H/XL62vn0RzyM/C1mFOoUKhRhnwrZjjUCKAlmPnBvnBOLcGchnR+9dyBWoM5/YKv5ZrCe8s5zWvI98D0XMtRm4niAcoAYcRQwbUGZUIwY9FwLUE1ADRiduFagWomrhm7GtcC1CJhizaKcLVBLRO1bGsrriaoR4Iebf6HqwXqmZhn293/AtlU+q4JVSwDqqxSsSs0AuZ0k136wgR1SUBhvaDoab7tJBZoREyXSmWARsY0R+0FHQHTFLUHdCRMM9RW0BExTVBbQHMDAvICc26RQQbNTVzIoLnNEBk0N8Iig0q41a3a5Gfaf2t3j+n6fqdzsdtWbTrp7EnUlo9Ne5K6ThoJSnZN0AQlC5DDZYUmKFmAHC4rNEHJAuRwWaEJShYgh8sKJYN+A6+yQmSPqqjtAAAAAElFTkSuQmCC"),onClick:v[0]||(v[0]=e=>c(y).loading=!1)},null,8,["name"])]),l("div",Ce,[(a(!0),r(u,null,d(c(y).list,(e=>(a(),r("div",{key:e.customerId,class:m({item:!0,active:c(y).select.customerId===e.customerId}),onClick:t=>c(y).select=e},[l("span",Pe,o(e.cert[0].certName),1),l("span",null,o(e.cert[0].certNo),1),g(i(C,{class:"check-icon",name:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAn9JREFUSEvtlktIVFEcxn/XXpM6Mz5zVBzR8oFUVARRUljhItKNhZC0qVYhZjMMFIG0aFUUtijKB0GEBL02WmZqRjlbFyWSYQ+EynKyh5baNHPi3hsNtzuj89Bp44G7Oec732/u//y/c0cSQgj+w5AWwNGqevRK/eMLXD0AAx2wu47ogD8OwcVyGHmuFnSJIQrgwR5o2Avfx3ynuL5insFPmuB6NXjcPmjhDqhunSew1wO3HNB9Xtur+SVQ0wZL4+YBPPkVmvdBf7sWmrcVau7Bsnhlfm6ba/SV2kTvB7TQlcVwpB0Mxr/zkvj8VigtvqYMjKnhx/jFY2jYAxMurUfuZqi9DwaTZl4SdQWCD4NgssChFpAPP9ThvAIth8HzU7szZxPUdsBys85REsetgrFhdUGKUcKtPDGLZsfLTXTnGHSe02uzN8LRTohN8OsjiSGnoH4nuKd8goLt6tub0wPDp8ahuQqetek11g1g64LYxID71ebquw2NlSC8PqExDQ5eg6JS/WbXG7WJ3vXr17LWga0b4pJmrJivq+XM3bBpxXLpd52A8pMQs1hdG+qFyxUwPqo3zlwL9m6IT5n1mLRxummDrn9CL1vkbYP9jSpUvol+TeuNM1aD/WHQydCCvV5oqkQpfSgjvUiFmtKC3qW/QNyTUF8KL53BmVgKwd4DZktw+j8q/zfXxCc4U4yS75nGinxwyNCMkKBKcgP+53K9htNb4NuIf9PUVeB4BAmZIUNnBsurw31wtgSmx7XmKbkqNDErLOjsYFkx8AAulPm+qck5KjTJGjY0OLCsetoKd0+p+ay6BMnZEUGDB0eM0RvM7fc4hB+4AA6hWJFJfwMaXAhFHVsobQAAAABJRU5ErkJggg==")},null,8,["name"]),[[p,c(y).select.customerId===e.customerId]])],10,Te)))),128))]),i(F,{shadow:!1,text:"确定",onClick:I})])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-71e988c8"]]);const Oe=(e,t="YYYY-MM-DD")=>v(e).format(t),Ne=(e,t=0,n="day",a="YYYY-MM-DD")=>v(e).add(t,n).format(a);const ke={class:"guarantee-list"},Ve=(e=>(O("data-v-2da31e52"),e=e(),N(),e))((()=>l("span",null,"保障计划",-1))),Ae={key:0,class:"picture-payment-content"},Se=["onClick"],we=["src"],be=["src"],Le={key:1,class:"plan-list"},xe=["onClick"],Ue={key:2,class:"feerate-view"},Fe={class:"guarantee-detail"},Ee={key:0,class:"plan-list"},Me=["onClick"],Re={key:1},Be={class:"extinfo-info-list"},qe={class:"content"};var Ze=E(e({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1}},emits:["update-active-plan"],setup(e,{emit:t}){var p;const v=e,O=f(null==(p=v.dataSource)?void 0:p.planList),N=f(v.activePlanCode);y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e;v.isMultiplePlan&&(O.value=null==(e=v.dataSource)?void 0:e.planList)}),{immediate:!0});const k=f([]),V=f([]),A=f(),S=I((()=>v.isMultiplePlan?v.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e,t,n,a;if(N.value=v.activePlanCode,v.isMultiplePlan){if(O.value&&O.value.length>0){let e=0;const t=O.value.findIndex((e=>e.planCode===N.value));t>-1&&(e=t),k.value=O.value[e].guaranteeItemVOS,V.value=O.value[e].extInfoVOList,A.value=null==(a=O.value[e])?void 0:a.productPremiumVOList[0]}}else k.value=null==(e=v.dataSource)?void 0:e.planInsureVO.guaranteeItemVOS,V.value=null==(t=v.dataSource)?void 0:t.planInsureVO.extInfoVOList,A.value=null==(n=v.dataSource)?void 0:n.planInsureVO.productPremiumVOList[0]}),{immediate:!0,deep:!0});const w=I((()=>{var e;return(null==(e=v.dataSource)?void 0:e.rateUri)||""})),b=I((()=>!!(A.value&&A.value.paymentFrequencyValue&&A.value.premiumUnit&&w))),[L,x]=h(!1),U=I((()=>{var e;return!(!k.value||!(null==(e=k.value)?void 0:e.length))&&(k.value.length>v.count&&(!!v.isShowClose||!L.value))})),F=()=>{x()},E=I((()=>{var e;return k.value&&(null==(e=k.value)?void 0:e.length)?k.value.length<=v.count||L.value?k.value:k.value.slice(0,v.count):[]})),B=e=>{N.value=e,t("update-active-plan",e)},q=f(!1),Z=()=>{q.value=!0},_=()=>{ae({fileType:"pdf",feeFileUri:w.value})};return(t,p)=>{var v,f;const y=n("ProCell"),I=n("ProPopup"),h=C("dompurify-html");return a(),r(u,null,[l("div",ke,[l("div",{class:"header"},[Ve,l("span",{onClick:Z},"查看详情")]),e.isMultiplePlan?(a(),r(u,{key:0},[c(S).length>0?(a(),r("div",Ae,[(a(!0),r(u,null,d(c(S),(e=>(a(),r("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>B(e.planCode)},[N.value==e.planCode?(a(),r("img",{key:0,src:e.selectedPic},null,8,we)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,be))],8,Se)))),128))])):(a(),r("div",Le,[(a(!0),r(u,null,d(O.value,((e,t)=>(a(),r("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===N.value?"plan-list-item-active":"")),onClick:t=>B(e.planCode)},[l("span",null,o(e.planName),1)],10,xe)))),128))]))],64)):T("",!0),(a(!0),r(u,null,d(c(E),((e,t)=>(a(),P(y,{key:t,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),c(U)?(a(),r("div",{key:1,class:"show-more",onClick:F},[D(o(c(L)?"收起":"查看更多")+" ",1),i(M,{name:"down",class:m(["icon",{showMore:c(L)}])},null,8,["class"])])):T("",!0),c(b)?(a(),r("div",Ue,[l("span",null,o(`${(null==(v=A.value)?void 0:v.paymentFrequencyValue)||""}${(null==(f=A.value)?void 0:f.premiumUnit)||""}`),1),c(w)?(a(),r("span",{key:0,onClick:_},"查看保费")):T("",!0)])):T("",!0)]),i(R),i(I,{show:q.value,"onUpdate:show":p[0]||(p[0]=e=>q.value=e),title:"保障详情",class:"guarantee-popup"},{default:s((()=>[l("div",Fe,[e.isMultiplePlan?(a(),r("div",Ee,[(a(!0),r(u,null,d(O.value,((e,t)=>(a(),r("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===N.value?"plan-list-item-active":"")),onClick:t=>B(e.planCode)},[l("span",null,o(e.planName),1)],10,Me)))),128))])):T("",!0),V.value&&V.value.length>0?(a(),r("div",Re,[l("div",Be,[(a(!0),r(u,null,d(V.value,((e,t)=>(a(),P(y,{key:t,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),i(R)])):T("",!0),(a(!0),r(u,null,d(k.value,((e,t)=>(a(),r("div",{key:t,class:"guarantee-item"},[i(y,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),g(l("div",qe,null,512),[[h,e.content]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-2da31e52"]]);const _e={class:"com-custom-card"},je={class:"title"};var He=E(e({props:{title:{type:String,required:!0}},setup:e=>(t,n)=>(a(),r("div",_e,[l("div",je,o(e.title),1),l("div",null,[k(t.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-059c21ee"]]);const Ye={class:"question"},Qe={class:"title"};var Ge=E(e({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup:e=>(t,r)=>{const c=n("ProSvg"),u=n("van-collapse-item");return a(),P(u,{name:e.name,class:"com-question-item"},{title:s((()=>[l("div",Ye,[i(c,{name:"question"}),l("div",Qe,o(e.question),1)])])),default:s((()=>[D(" "+o(e.answer),1)])),_:1},8,["name"])}}),[["__scopeId","data-v-0d7ea124"]]);const Ke={class:"com-question"};var Je=E(e({props:{list:{type:Array,default:()=>[]}},setup(e){const t=e,[l,g]=h(!1),p=f([]),v=()=>{g()},y=I((()=>t.list.length<=4||l.value?t.list:t.list.slice(0,4)));return(t,g)=>{const f=n("van-collapse");return a(),r("div",Ke,[i(f,{modelValue:p.value,"onUpdate:modelValue":g[0]||(g[0]=e=>p.value=e)},{default:s((()=>[(a(!0),r(u,null,d(c(y),((e,t)=>(a(),P(Ge,{key:t,name:t.toString(),question:e.title,answer:e.desc},null,8,["name","question","answer"])))),128))])),_:1},8,["modelValue"]),e.list.length>4?(a(),r("div",{key:0,class:"show-more",onClick:v},[D(o(c(l)?"收起":"展开")+" ",1),i(M,{name:"down",class:m(["icon",{showMore:c(l)}])},null,8,["class"])])):T("",!0)])}}}),[["__scopeId","data-v-1b7e97e9"]]);const We={class:"spec"},Xe={key:1,class:"spec"},ze=["src"];var $e=E(e({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:t}){const o=e,m=f(),g=f([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),p=I((()=>{var e,t,n,a;return(null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)&&(null==(a=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:a.spec.length)>0})),v=I((()=>{var e,t,n,a,r,i,s,l,c,u,d,m,g,p;const v=null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType;return!!(v===Y.WORD&&(null==(r=null==(a=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:r.settlementProcessList)&&(null==(l=null==(s=null==(i=o.detail)?void 0:i.tenantProductInsureVO)?void 0:s.settlementProcessVO)?void 0:l.settlementProcessList.length)>0||v===Y.IMAGE&&(null==(d=null==(u=null==(c=o.detail)?void 0:c.tenantProductInsureVO)?void 0:u.settlementProcessVO)?void 0:d.settlementProcessPicList)&&(null==(p=null==(g=null==(m=o.detail)?void 0:m.tenantProductInsureVO)?void 0:g.settlementProcessVO)?void 0:p.settlementProcessPicList.length)>0)})),y=I((()=>{var e,t,n,a;return(null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList)&&(null==(a=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:a.questionList.length)>0})),h=I((()=>{let e=[...g.value];return p.value||(e=e.filter((e=>"tab1"!==e.slotName))),v.value||y.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return t({handleClickTab:()=>{var e;return null==(e=m.value)?void 0:e.handleClickTab}}),(e,t)=>{const g=n("van-image");return a(),P(B,{ref_key:"scrollRef",ref:m,class:"tabs",list:c(h),sticky:"",scrollspy:""},V({tab3:s((()=>[k(e.$slots,"form",{},void 0,!0)])),_:2},[c(p)?{name:"tab1",fn:s((()=>{var e,t;return[l("div",We,[(a(!0),r(u,null,d((null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)||[],((e,t)=>(a(),P(g,{key:t,class:"detail-img",width:"100%","lazy-load":"",src:e},null,8,["src"])))),128)),i(R)])]}))}:void 0,c(v)||c(y)?{name:"tab2",fn:s((()=>{var e,t,n,l,m;return[c(v)?(a(),r(u,{key:0},[(null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType)===c(Y).WORD?(a(),P(He,{key:0,title:"理赔流程"},{default:s((()=>{var e,t,n;return[i(pe,{list:null==(n=null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO)?void 0:n.settlementProcessList},null,8,["list"])]})),_:1})):(a(),r("div",Xe,[(a(!0),r(u,null,d((null==(m=null==(l=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:l.settlementProcessVO)?void 0:m.settlementProcessPicList)||[],((e,t)=>(a(),r("img",{key:t,src:e,class:"detail-img"},null,8,ze)))),128))])),i(R)],64)):T("",!0),c(y)?(a(),r(u,{key:1},[i(He,{title:"常见问题"},{default:s((()=>{var e,t;return[i(Je,{list:null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList},null,8,["list"])]})),_:1}),i(R)],64)):T("",!0)]}))}:void 0]),1032,["list"])}}}),[["__scopeId","data-v-72590bd3"]]);const et={key:0,class:"page-waiting"},tt=["src"],nt=(e=>(O("data-v-ead4d7ae"),e=e(),N(),e))((()=>l("div",{class:"tips"},[l("p",null,"支付成功，承保中...")],-1)));var at=E(e({props:{isShow:{type:Boolean,default:()=>{}}},setup(e){const t=e;return y((()=>t.isShow),(e=>{document.body.style.overflow=e?"hidden":"inherit"})),(e,n)=>t.isShow?(a(),r("div",et,[l("img",{class:"loading",src:c(ve)},null,8,tt),nt])):T("",!0)}}),[["__scopeId","data-v-ead4d7ae"]]);const rt={class:"list"},it={class:"item"},st={class:"footer"},lt=D("部分为是"),ot=D("全部为否"),ct=e({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth","onCloseHealth"],setup(e,{emit:t}){const r=e,o=f(r.show),u=f(r.activeIndex),d=I((()=>{var e;return null==(e=r.contentList[u.value])?void 0:e.attachmentUri})),m=f(!0),g=e=>{m.value=!1,t("update:show",!1),t("onConfirmHealth",e)};return y((()=>r),(()=>{o.value=r.show,u.value=r.activeIndex}),{deep:!0,immediate:!0}),(r,p)=>{const v=n("ProTab"),f=n("ProFilePreview"),y=n("VanButton"),I=n("van-config-provider"),h=n("ProPopup");return a(),P(h,{show:o.value,"onUpdate:show":p[3]||(p[3]=e=>o.value=e),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:p[4]||(p[4]=e=>{m.value&&t("onCloseHealth")})},{default:s((()=>[i(I,{"theme-vars":c(oe),class:"custom-provider"},{default:s((()=>[o.value?(a(),P(v,{key:0,active:u.value,"onUpdate:active":p[0]||(p[0]=e=>u.value=e),list:e.contentList.map(((e,t)=>({title:e.attachmentName,slotName:`guarantee-${t}`}))),class:"tab"},null,8,["active","list"])):T("",!0),l("div",rt,[l("div",it,[(a(),P(f,{key:c(d),content:c(d),type:"pdf"},null,8,["content"]))])]),l("div",st,[i(y,{type:"primary",block:"",round:"",onClick:p[1]||(p[1]=e=>g("N"))},{default:s((()=>[lt])),_:1}),i(y,{type:"primary",plain:"",block:"",round:"",onClick:p[2]||(p[2]=e=>g("allFalse"))},{default:s((()=>[ot])),_:1})])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});const ut=e=>(O("data-v-00ff7c41"),e=e(),N(),e),dt={class:"com-period-cell"},mt={key:0,class:"custom-cell check-btn-cell"},gt=ut((()=>l("div",{class:"cell-label"},"保障期间",-1))),pt={class:"cell-content"},vt=ut((()=>l("div",{class:"cell-label"},"生效日期",-1))),ft={class:"cell-content"},yt={key:2,class:"custom-cell common-cell"},It=ut((()=>l("div",{class:"cell-label"},"保障期限",-1))),ht={class:"cell-content"};var Ct=E(e({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:d,emit:m}){const g=e;f({});const p=(e,t)=>"year"===e?`${t}年`:"month"===e?`${t}月`:"day"===e?`${t}日`:t,C=f(new Date),P=fe("RISK_INSURANCE_PERIOD"),D=t({formInfo:g.formInfo});y((()=>D.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(C.value=new Date(e))}));const O=f(),N=f([]);y([()=>g.insureDetail,()=>D.formInfo.activePlanCode],(()=>{var e;if(D.formInfo.insurancePeriodValue="",D.formInfo.insuranceStartDate="",D.formInfo.insuranceEndDate="",D.formInfo.commencementTime="",g.insureDetail)if(g.insureDetail.productRelationPlanVOList&&g.insureDetail.productRelationPlanVOList.length>0){let t=0;const n=g.insureDetail.productRelationPlanVOList.findIndex((e=>e.planCode===D.formInfo.activePlanCode));n>-1&&(t=n);const a=((null==(e=g.insureDetail.productRelationPlanVOList[t])?void 0:e.productRiskVoList[0].riskDetailVOList)||[]).find((e=>1===e.riskType));a&&(O.value=a)}else{const e=(g.insureDetail.productRiskVoList[0].riskDetailVOList||[]).find((e=>1===e.riskType));e&&(O.value=e)}}),{deep:!0,immediate:!0}),y([()=>O.value,()=>P.value],(()=>{N.value=[],Array.isArray(P.value)&&P.value.length>1&&O.value&&(N.value=(O.value.riskInsureLimitVO.insurancePeriodValueList||[]).map((e=>{const t=P.value.find((t=>t.value===e));return t?{label:t.name,value:t.value}:null})).filter((e=>!!e))),N.value.length>0&&(D.formInfo.insurancePeriodValue=N.value[0].value)}),{deep:!0,immediate:!0});const k=I((()=>{var e,t;return(null==(e=O.value)?void 0:e.riskInsureLimitVO.guaranteeStartDate)?String(null==(t=O.value)?void 0:t.riskInsureLimitVO.guaranteeStartDate):Q.CURRENT_DAY})),[V,S]=h(!1),w=()=>{S(!0)},b=new Date(Ne(new Date,1,"day")),L=I((()=>{var e;if(k.value===Q.CUSTOM_DAY){const t=null==(e=O.value)?void 0:e.riskInsureLimitVO.maxInsuranceDay;if(!t)return new Date;const n=Ne(new Date,Number(t),"day");return new Date(n)}return new Date})),x=e=>{D.formInfo.insuranceStartDate=`${Oe(e)} 00:00:00`,S(!1)},U=()=>{S(!1)},F=I((()=>{}));return y([()=>k.value,()=>F.value,()=>D.formInfo.insurancePeriodValue,()=>D.formInfo.insuranceStartDate],(()=>{if(!D.formInfo.insurancePeriodValue)return;const[e,t]=D.formInfo.insurancePeriodValue.split("_");if(D.formInfo.insuranceStartDate||(k.value===Q.CUSTOM_DAY||k.value===Q.NEXT_DAY?D.formInfo.insuranceStartDate=`${Ne(new Date,1,"day")} 00:00:00`:D.formInfo.insuranceStartDate=`${Oe(new Date)} 00:00:00`),"to"!==e){const n=`${((e,t=0,n="day",a="YYYY-MM-DD")=>v(e).subtract(t,n).format(a))(D.formInfo.insuranceStartDate,1,"day")} 00:00:00`;D.formInfo.insuranceEndDate=`${Ne(n,Number(t),e)} 23:59:59`}else D.formInfo.tenantOrderInsuredList[0].birthday,D.formInfo.tenantOrderInsuredList[0].certType===q.CERT&&D.formInfo.tenantOrderInsuredList[0].certNo&&Z(D.formInfo.tenantOrderInsuredList[0].certNo)&&_(D.formInfo.tenantOrderInsuredList[0].certNo),"single"===t&&(D.formInfo.insuranceEndDate="9999-99-99 23:59:59"),D.formInfo.insuranceEndDate=`${Ne(D.formInfo.insuranceStartDate,Number(t)-1,e)} 23:59:59`}),{immediate:!0}),d({}),(e,t)=>{const d=n("ProRadioButton"),m=n("van-config-provider"),g=n("van-datetime-picker"),v=n("ProPopup");return a(),r(u,null,[i(m,{"theme-vars":c(oe)},{default:s((()=>[l("div",dt,[N.value.length>1?(a(),r("div",mt,[gt,l("div",pt,[i(d,{modelValue:c(D).formInfo.insurancePeriodValue,"onUpdate:modelValue":t[0]||(t[0]=e=>c(D).formInfo.insurancePeriodValue=e),options:N.value},null,8,["modelValue","options"])])])):T("",!0),c(k)===c(Q).CUSTOM_DAY?(a(),r("div",{key:1,class:"custom-cell common-cell",onClick:w},[vt,l("div",ft,o(c(D).formInfo.insuranceStartDate),1)])):T("",!0),c(k)!==c(Q).CUSTOM_DAY?(a(),r("div",yt,[It,l("div",ht,o(c(D).formInfo.insuranceStartDate?c(Oe)(c(D).formInfo.insuranceStartDate):"")+" - "+o(c(D).formInfo.insuranceEndDate?c(Oe)(c(D).formInfo.insuranceEndDate):""),1)])):T("",!0)])])),_:1},8,["theme-vars"]),i(v,{show:c(V),"onUpdate:show":t[2]||(t[2]=e=>A(V)?V.value=e:null),height:40,closeable:!1},{default:s((()=>[i(g,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),type:"date",title:"选择年月","min-date":c(b),"max-date":c(L),formatter:p,onConfirm:x,onCancel:U},null,8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-00ff7c41"]]);const Tt=e=>(O("data-v-0daa05e6"),e=e(),N(),e),Pt={class:"com-payment-type"},Dt={class:"title"},Ot={key:0,class:"picture-payment-content"},Nt=["onClick"],kt=["src"],Vt=["src"],At={key:1,class:"custom-cell check-btn-cell"},St=Tt((()=>l("div",{class:"cell-label"},"保障方案",-1))),wt={class:"cell-content"},bt={key:0,class:"picture-payment-content"},Lt=["onClick"],xt=["src"],Ut=["src"],Ft={key:1,class:"default-payment-content"},Et=[Tt((()=>l("div",{class:"pay-method"},[l("span",{class:"method"},o("按月交费")),l("span",{class:"acount"},o("共12期"))],-1)))],Mt=[Tt((()=>l("div",null,[l("div",{class:"tip"},[l("span",null,o("比按月支付最高省")),D(),l("span",null,"16%")]),l("div",{class:"triangle"}),l("div",{class:"pay-method"},[l("span",{class:"method"},o("一次交清")),l("span",{class:"acount"},o("比月交保费省最高2014元"))])],-1)))],Rt={key:2,class:"custom-cell check-btn-cell"},Bt=Tt((()=>l("div",{class:"cell-label"},"交费方式",-1))),qt={class:"cell-content"},Zt={class:"custom-cell common-cell"},_t=Tt((()=>l("div",{class:"cell-label"},"实付保费",-1))),jt={class:"cell-content actual-premium"},Ht={key:0,class:"feerate-explain"},Yt={class:"content"},Qt=Tt((()=>l("div",{class:"triangle-top"},null,-1)));var Gt=E(e({props:{showConfig:{type:Object,default:()=>{}},formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}},configDetail:{type:Object,default:()=>{}},isMultiplePlan:{type:Boolean,default:!1},premium:{type:[Number||null],default:null}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:g,emit:p}){const v=e;f({});const h=t({formInfo:v.formInfo}),C=f([]),D=f(),O=f(),N=I((()=>{var e;return"1"===String(null==(e=D.value)?void 0:e.paymentFrequencyFlag)})),k=I((()=>{var e;return null==(e=O.value)?void 0:e.productPremiumVOList.find((e=>e.paymentFrequency===h.formInfo.paymentFrequency))})),V=I((()=>v.premium&&k.value?`${v.premium}${k.value.premiumUnit||""}`:k.value?`${k.value.paymentFrequencyValue||""}${k.value.premiumUnit||""}`:"")),A=I((()=>{if(O){const{premiumExplain:e,premiumExplainViewName:t,premiumExplainUri:n}=O.value||{};return{premiumExplain:e,premiumExplainUri:n,premiumExplainViewName:t}}return null}));y((()=>v.configDetail),(()=>{var e;v.isMultiplePlan&&v.configDetail&&(C.value=null==(e=v.configDetail.tenantProductInsureVO)?void 0:e.planList)}),{immediate:!0,deep:!0}),y([()=>v.configDetail,()=>v.isMultiplePlan,()=>h.formInfo.activePlanCode],(()=>{if(v.configDetail)if(v.isMultiplePlan){let e=0;const t=v.configDetail.tenantProductInsureVO.planList.findIndex((e=>e.planCode===h.formInfo.activePlanCode));t>-1&&(e=t),D.value=v.configDetail.tenantProductInsureVO.planList[e].productPlanInsureConditionVO,O.value=v.configDetail.tenantProductInsureVO.planList[e]}else D.value=v.configDetail.tenantProductInsureVO.planInsureVO.productPlanInsureConditionVO,O.value=v.configDetail.tenantProductInsureVO.planInsureVO}),{deep:!0,immediate:!0});const w=I((()=>{var e;if(D.value&&D.value.paymentFrequency){return((null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1})),b=f(!1);y((()=>D.value),(()=>{var e;if(D.value){const t=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];if(1===t.length)return h.formInfo.paymentFrequency=D.value.paymentFrequency,void(b.value=!1);if(2===t.length&&t.filter((e=>![G.SINGLE,G.MONTH].includes(e))).length<1)return void(b.value=!0);b.value=!1}}),{immediate:!0,deep:!0});const L=I((()=>{var e;return D.value?null==(e=D.value.paymentFrequencyList||[])?void 0:e.map((e=>({...e,paymentFrequency:e.skinValue}))):[]})),x=I((()=>L.value.length>0)),U=I((()=>v.isMultiplePlan?v.configDetail.tenantProductInsureVO.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[])),F=I((()=>{var e,t;if(D.value){const n=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];return 1===n.length&&(h.formInfo.paymentFrequency=n[0]),null==(t=n||[])?void 0:t.map((e=>({label:K[e],value:e})))}return[]})),E=e=>{h.formInfo.paymentFrequency=e},M=()=>{var e,t;(null==(e=A.value)?void 0:e.premiumExplainUri)?ae({fileType:"pdf",fileUri:null==(t=A.value)?void 0:t.premiumExplainUri}):S("无费率文件！")};return g({}),(t,g)=>{const p=n("ProRadioButton"),v=n("templat"),f=n("ProDivider"),y=n("van-config-provider");return a(),P(y,{"theme-vars":c(oe)},{default:s((()=>[l("div",Pt,[l("div",Dt,o(c(w)?"交费方式":"保障计划"),1),e.isMultiplePlan?(a(),r(u,{key:0},[c(U).length>0?(a(),r("div",Ot,[(a(!0),r(u,null,d(c(U),(e=>(a(),r("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>{return n=e.planCode,void(h.formInfo.activePlanCode=n);var n}},[c(h).formInfo.activePlanCode==e.planCode?(a(),r("img",{key:0,src:e.selectedPic},null,8,kt)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,Vt))],8,Nt)))),128))])):(a(),r("div",At,[St,l("div",wt,[i(p,{modelValue:c(h).formInfo.activePlanCode,"onUpdate:modelValue":g[0]||(g[0]=e=>c(h).formInfo.activePlanCode=e),options:C.value,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])]))],64)):T("",!0),c(N)?(a(),P(v,{key:1},{default:s((()=>[c(x)&&c(L).length>1?(a(),r("div",bt,[(a(!0),r(u,null,d(c(L),(e=>(a(),r("div",{key:e.paymentFrequency,class:m("picture-payment-item"),onClick:t=>E(e.paymentFrequency)},[c(h).formInfo.paymentFrequency==e.paymentFrequency?(a(),r("img",{key:0,src:e.selectedPic},null,8,xt)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,Ut))],8,Lt)))),128))])):b.value?(a(),r("div",Ft,[l("div",{class:m("com-payment-type-item "+(c(h).formInfo.paymentFrequency==c(G).MONTH?"active":"")),onClick:g[1]||(g[1]=e=>E(c(G).MONTH))},Et,2),l("div",{class:m("com-payment-type-item "+(c(h).formInfo.paymentFrequency==c(G).SINGLE?"active":"")),onClick:g[2]||(g[2]=e=>E(c(G).SINGLE))},Mt,2)])):c(F).length>1?(a(),r("div",Rt,[Bt,l("div",qt,[i(p,{modelValue:c(h).formInfo.paymentFrequency,"onUpdate:modelValue":g[3]||(g[3]=e=>c(h).formInfo.paymentFrequency=e),options:c(F)},null,8,["modelValue","options"])])])):T("",!0)])),_:1})):T("",!0),i(Ct,{"form-info":c(h).formInfo,"insure-detail":e.insureDetail,"config-detail":e.configDetail},null,8,["form-info","insure-detail","config-detail"]),c(k)&&c(k).premiumUnit?(a(),r(u,{key:2},[l("div",Zt,[_t,l("div",jt,o(c(V)),1)]),c(A)&&c(A).premiumExplain&&c(A).premiumExplainViewName?(a(),r("div",Ht,[l("div",Yt,[Qt,l("div",null,[l("span",null,o(c(A).premiumExplain||""),1),l("span",{class:"file-name",onClick:M},"《"+o(c(A).premiumExplainViewName||"")+"》",1)])])])):T("",!0)],64)):T("",!0)]),i(f)])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-0daa05e6"]]);const Kt={class:"inscribedContent-content"},Jt={class:"content"};var Wt=E(e({props:{inscribedContent:{type:String,default:""}},setup(e){const t=e,n=f();return y((()=>t.inscribedContent),(e=>{n.value=e?e.replaceAll("\n","<br />"):""}),{immediate:!0,deep:!0}),(e,t)=>{const i=C("dompurify-html");return a(),r("div",Kt,[g(l("div",Jt,null,512),[[i,n.value]])])}}}),[["__scopeId","data-v-702b2de2"]]);const Xt={class:"page-internet-product-detail"},zt={class:"info"},$t={class:"footer-area"},en={class:"price"},tn=D(" 总保费"),nn=D(o("立即投保"));var an=E(e({setup(e){var d,m;const g=ce();w();const p=b(),{openId:v,productCode:h="BWYL2021",tenantId:C,phoneNo:D,agentCode:O="",saleChannelId:N,paymentMethod:k,certNo:V,name:A,templateId:E,pageCode:M,from:R,extraInfo:B,insurerCode:Z}=p.query;let _={};try{_=JSON.parse(decodeURIComponent(B))}catch(Ge){}const Y=f({certNo:V,openId:v,tenantId:C,mobile:D}),Q=f(),K=f(),ae=f(),oe=f(),pe=f(),ve=f(!1),fe=f(!1),Ie=f(!1),he=f(0),Ce=f(!1);f(!1);const Te=f(!1),Pe=f();let Ne="";const ke=f(!0),Ve="alert",Ae="jumpToPage";t({holder:{certNo:V,certType:q.CERT,mobile:D,name:A,socialFlag:J.HAS,extInfo:{hasSocialInsurance:J.HAS}},insured:{certNo:V,certType:q.CERT,name:A,socialFlag:J.HAS,relationToHolder:W.SELF},paymentMethod:k,renewalDK:"Y",packageProductList:[],mobileSmsCode:"",activePlanCode:"",paymentFrequency:G.MONTH,insurancePeriodValue:"",commencementTime:Oe(new Date)});const Se=f({tenantId:C,agencyId:O,orderCategory:1,saleUserId:N,saleChannelId:N,venderCode:Z,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:G.MONTH,insurancePeriodValue:"",commencementTime:"",tenantOrderHolder:{socialFlag:J.HAS,extInfo:{hasSocialInsurance:J.HAS}},tenantOrderInsuredList:[{socialFlag:J.HAS,relationToHolder:W.SELF,extInfo:{occupationCodeList:[],hasSocialInsurance:J.HAS},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:C,productCode:null==(d=ae.value)?void 0:d.productCode,productName:null==(m=ae.value)?void 0:m.productName,premium:pe.value||0}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",successJumpUrl:"",pageCode:"productInfo",extraInfo:_},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),we=I((()=>{var e,t,n,a,r,i;return!!ae.value&&!!((null==(t=null==(e=ae.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList)&&Array.isArray(null==(a=null==(n=ae.value)?void 0:n.tenantProductInsureVO)?void 0:a.planList)&&(null==(i=null==(r=ae.value)?void 0:r.tenantProductInsureVO)?void 0:i.planList.length)>0)})),be=I((()=>{var e,t,n;if(we.value){if(Se.value.activePlanCode)return(null==(e=oe.value)?void 0:e.planFactor[Se.value.activePlanCode])||{}}else if(null==(t=oe.value)?void 0:t.productFactor)return null==(n=oe.value)?void 0:n.productFactor;return{}}));I((()=>{if(be.value){return!!be.value.find((e=>"verificationCode"===e.code&&1===e.isDisplay))}return!1})),y((()=>we.value),(()=>{var e,t;we.value&&(Se.value.activePlanCode=null==(t=null==(e=ae.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList[0].planCode)}),{immediate:!0});const Le=I((()=>{var e,t,n;return we.value?(null==(t=null==(e=oe.value)?void 0:e.productRelationPlanVOList.find((e=>e.planCode===Se.value.activePlanCode)))?void 0:t.productRiskVoList)||[]:(null==(n=oe.value)?void 0:n.productRiskVoList)||[]})),xe=e=>{Se.value.activePlanCode=e},Ue=I((()=>[])),Fe=f();y([()=>we.value,()=>Se.value.activePlanCode,()=>ae.value],(()=>{var e,t;let n={};if(we.value){const t=null==(e=ae.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===(Se.value.activePlanCode||"")));t&&(n=null==t?void 0:t.attachmentVOList)}else n=null==(t=ae.value)?void 0:t.tenantProductInsureVO.planInsureVO.attachmentVOList;if(!n)return void(Fe.value=[]);const a={2:"richText",3:"link"};Fe.value=Object.keys(n).map((e=>(n[e].forEach((e=>{if("1"===e.attachmentType){const t=e.attachmentUri.split("?"),n=t[0].substr(t[0].lastIndexOf(".")+1);e.attachmentType="pdf"===n?"pdf":"picture"}else e.attachmentType=a[e.attachmentType]})),{attachmentName:e,attachmentList:n[e]})))}),{immediate:!0});const Ee=async(e,t)=>{const n=await ye(e),{code:a,data:r}=n;"10000"===a&&(null==t||t())},Me=()=>{K.value.handleClickTab()("tab3")},Re=async()=>{await le(((e={},t={},n={})=>{var a;const r={...n},i={tenantId:C,riskList:(null==(a=r.tenantOrderInsuredList[0])?void 0:a.tenantOrderProductList[0].riskVOList)||[],riskPremium:t,productId:null==e?void 0:e.productBasicInfoVO.id};return r.extInfo.iseeBizNo=Ne,r.commencementTime=r.insuranceStartDate,r.expiryDate=r.insuranceEndDate,r.tenantOrderInsuredList=r.tenantOrderInsuredList.map((e=>({...e,planCode:Se.value.activePlanCode?Se.value.activePlanCode:null}))),r.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:"",productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:Se.value.activePlanCode?Se.value.activePlanCode:null,tenantOrderRiskList:ie(i)},r})(oe.value,{},Se.value),(async(e,t)=>{t===Ae&&(null==e?void 0:e.orderNo)&&(Pe.value=null==e?void 0:e.orderNo,await(async()=>{const{code:e,data:t}=await te({orderNo:Pe.value,tenantId:C});"10000"===e&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await le(t))})())}))},Be=async(e,t,n,a=!0)=>{var r,i;const s=re(n).map((t=>({...t,paymentFrequency:e.paymentFrequency,insurancePeriodValue:e.insurancePeriodValue}))),l={tenantId:C,productCode:null==(r=ae.value)?void 0:r.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,holder:{personVO:{...e.tenantOrderHolder,socialFlag:e.tenantOrderHolder.extInfo.hasSocialInsurance}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance},productPlanVOList:[{insurerCode:t.productBasicInfoVO.insurerCode,planCode:Se.value.activePlanCode?Se.value.activePlanCode:null,riskVOList:s}]})))},{code:o,message:c}=await $(l);if("10000"===o){const{code:e,data:t}=await ee(l);if("10000"===e){const{pageAction:e,message:n,data:r}=t.pageAction||{};if(e===Ve)return void S(n);Se.value.tenantOrderInsuredList[0].tenantOrderProductList=null==(i=l.insuredVOList[0])?void 0:i.productPlanVOList,pe.value=t.premium,Se.value.orderAmount=t.premium,Se.value.orderRealAmount=t.premium,a||Re()}}else S(c)},qe=async()=>{try{await Be(Se.value,oe.value,Le.value,!1)}catch(e){}},_e=e=>{"allFalse"===e?(fe.value=!1,ve.value=!0,qe()):x.confirm({message:"您当前的健康状况不符合该产品",confirmButtonText:"确定"}).then((()=>{window.history.back()})).catch((()=>{var e;null==(e=Q.value)||e.reEditForm(),ve.value=!1}))},je=()=>{var e;null==(e=Q.value)||e.reEditForm(),ve.value=!1},He=()=>{fe.value=!1,je()},Ye=()=>{Ie.value=!1,je()},Qe=()=>{Ie.value=!1,fe.value=!0};y([()=>Se.value.tenantOrderInsuredList[0].birth,()=>Se.value.tenantOrderInsuredList[0].gender,()=>Se.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance],U((async()=>{const{birth:e,gender:t,extInfo:{hasSocialInsurance:n}}=Se.value.tenantOrderInsuredList[0];e&&t&&n&&await Be(Se.value,oe.value,Le.value)}),500),{deep:!0,immediate:!0});return H(),L((()=>{(async()=>{var e;const t=await ne({productCode:h,withInsureInfo:!0,tenantId:C});"10000"===t.code&&(Te.value=!0,ae.value={...t.data},document.title=(null==(e=t.data)?void 0:e.productFullName)||"");const n=await z({productCode:h});"10000"===n.code&&(oe.value=n.data)})(),setTimeout((async()=>{Ne=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const d=n("van-config-provider");return a(),r(u,null,[i(d,{"theme-vars":c(g)},{default:s((()=>{var n,r,u,d,m,p,v,f,y;return[l("div",Xt,[l("div",zt,[i(ue,{url:null==(r=null==(n=ae.value)?void 0:n.tenantProductInsureVO)?void 0:r.banner[0]},null,8,["url"]),(null==(d=null==(u=ae.value)?void 0:u.tenantProductInsureVO)?void 0:d.bannerMove)?(a(),P(ue,{key:0,url:null==(p=null==(m=ae.value)?void 0:m.tenantProductInsureVO)?void 0:p.bannerMove[0],onClick:Me},null,8,["url"])):T("",!0)]),i(Ze,{"show-service-config":"","data-source":null==(v=ae.value)?void 0:v.tenantProductInsureVO,"is-multiple-plan":c(we),"active-plan-code":Se.value.activePlanCode,onUpdateActivePlan:xe},null,8,["data-source","is-multiple-plan","active-plan-code"]),i($e,{ref_key:"detailScrollRef",ref:K,detail:ae.value},{form:s((()=>[i(se,{ref_key:"formRef",ref:Q,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":Se.value,"send-sms-code":Ee,"factor-object":c(be)||{}},{holderName:s((()=>[i(De,{"user-info":Y.value},null,8,["user-info"])])),insurerName:s((()=>[i(De,{title:"选择被保人","user-info":Y.value},null,8,["user-info"])])),_:1},8,["form-info","factor-object"]),i(Gt,{"form-info":Se.value,"insure-detail":oe.value,"config-detail":ae.value,"is-multiple-plan":c(we),"risk-info-period-list":e.riskInfoPeriodList,premium:pe.value},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","risk-info-period-list","premium"])])),_:1},8,["detail"]),(null==(f=ae.value)?void 0:f.tenantProductInsureVO.inscribedContent)?(a(),P(Wt,{key:0,"inscribed-content":null==(y=ae.value)?void 0:y.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):T("",!0),Fe.value&&Fe.value.length>0?(a(),P(de,{key:1,"attachement-list":Fe.value,"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{he.value=e,Ie.value=!0})(e))},null,8,["attachement-list"])):T("",!0),l("div",$t,[l("div",en,[tn,l("span",null,o(pe.value?"￥":"")+o(c(j)(pe.value))+" "+o(pe.value?Se.value.paymentFrequency==c(X).YEAR?"元/年":"元/月":""),1)]),i(F,{shadow:!1,"theme-vars":c(g),class:"right",text:"立即投保",onClick:qe},{default:s((()=>[nn])),_:1},8,["theme-vars"])])]),Te.value?(a(),P(me,{key:0,"product-detail":ae.value},null,8,["product-detail"])):T("",!0)]})),_:1},8,["theme-vars"]),i(ct,{show:fe.value,"onUpdate:show":t[1]||(t[1]=e=>fe.value=e),"content-list":c(Ue),"active-index":0,onOnConfirmHealth:_e,onOnCloseHealth:He},null,8,["show","content-list"]),Ie.value?(a(),P(ge,{key:0,show:Ie.value,"onUpdate:show":t[2]||(t[2]=e=>Ie.value=e),"content-list":Fe.value,"is-only-view":ke.value,"active-index":he.value,text:ke.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:Qe,onOnCloseFilePreview:Ye},null,8,["show","content-list","is-only-view","active-index","text"])):T("",!0),i(at,{"is-show":Ce.value},null,8,["is-show"])],64)}}}),[["__scopeId","data-v-a4ed32be"]]);export{an as default};

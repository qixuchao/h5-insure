import{g as x,E as i,O as y,h as A,r as p,j as E,k,m as _,z as n,J as v,A as N,H as P,ar as T,L as w,p as O,a4 as R,a5 as U,C as V,T as m}from"./vendor-555db9bd.js";import{b as f,_ as q,r as M,G as C}from"./index-4185f451.js";import{b as z}from"./format-d78bf325.js";import{a as G}from"./order-35b0e3c5.js";const H=e=>f.post("/api/app/insure/insurance/sendSmsCodeToC",{},{params:{mobile:e}}),J=(e,s)=>f.post("/api/app/insure/insurance/checkSmsCode",{},{params:{mobile:e,smsCode:s}});const W=e=>(R("data-v-0eff5b21"),e=e(),U(),e),j={class:"page-phone-verify"},L=W(()=>n("div",{class:"title"},"\u901A\u8FC7\u6295\u4FDD\u4EBA\u624B\u673A\u53F7\u9A8C\u8BC1\u540E\uFF0C\u53EF\u8FDB\u884C\u6295\u4FDD\u4FE1\u606F\u9884",-1)),$={class:"phone"},K={class:"input-wrapper"},Q=V("\u4E0B\u4E00\u6B65"),X=x({setup(e){const s=i(""),c=i(""),t=i(0);let d;const l=y(),{agentCode:h,tenantId:B,templateId:Y,productCode:Z,insurerCode:ee,orderNo:D}=l.query,F=()=>{d=setInterval(()=>{t.value-=1,t.value<=0&&clearInterval(d)},1e3)},b=()=>{M({orderNo:D,saleUserId:h,tenantId:B}).then(a=>{var r;const{code:o,data:u}=a;o==="10000"&&(u.orderStatus!==G.PENDING?C("paymentResult",l.query):s.value=(r=u==null?void 0:u.tenantOrderHolder)==null?void 0:r.mobile)})},I=()=>{H(s.value).then(({code:a})=>{a==="10000"&&(t.value=60,F())})},S=()=>{J(s.value,c.value).then(({code:a,data:o})=>{a==="10000"&&o?(m.success("\u9A8C\u8BC1\u6210\u529F"),C("infoPreview",l.query)):m.fail("\u9A8C\u8BC1\u5931\u8D25")})};return A(()=>{b()}),(a,o)=>{const u=p("van-button"),r=p("ProPageWrap");return E(),k(r,null,{default:_(()=>[n("div",j,[L,n("div",$,v(N(z)(s.value)),1),n("div",K,[P(n("input",{"onUpdate:modelValue":o[0]||(o[0]=g=>c.value=g),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",class:"input"},null,512),[[T,c.value]]),n("div",{class:w(["btn",{second:t.value}]),onClick:I},v(t.value?`${t.value}s`:"\u53D1\u9001\u9A8C\u8BC1\u7801"),3)]),O(u,{type:"primary",class:"submit-btn",onClick:S},{default:_(()=>[Q]),_:1})])]),_:1})}}});var ue=q(X,[["__scopeId","data-v-0eff5b21"]]);export{ue as default};

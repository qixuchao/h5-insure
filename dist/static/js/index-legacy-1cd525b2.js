!function(){var e=document.createElement("style");e.innerHTML=".page-verify .card .people[data-v-7e8d1d5c]{flex:1;margin-left:.53333rem;display:flex;align-items:center}.page-verify .card .people .name[data-v-7e8d1d5c]{font-size:.4rem;font-weight:600;color:#393d46}.page-verify .card .people .status[data-v-7e8d1d5c]{margin-left:.26667rem;text-align:center;width:1.2rem;height:.53333rem;line-height:.53333rem;border-radius:.05333rem;border:1px solid #99a9c0;font-size:.32rem;color:#99a9c0}.page-verify .card .people .status.verified[data-v-7e8d1d5c]{color:var(--van-primary-color, var(--zaui-brand));border-color:var(--van-primary-color, var(--zaui-brand))}.page-verify .card .verify-item[data-v-7e8d1d5c]{display:flex;align-items:center;height:1.41333rem;line-height:1.41333rem;font-size:.4rem;color:#393d46}.page-verify .card .verify-item .no[data-v-7e8d1d5c]{margin-left:.64rem}.page-verify .card .verify-item .action[data-v-7e8d1d5c]{flex:1;display:flex;align-items:center;justify-content:flex-end;color:#99a9c0}.page-verify .card .verify-item .action .icon[data-v-7e8d1d5c]{margin-left:.13333rem;color:#99a9c0;font-size:.32rem}.page-verify .sign-card .resign[data-v-7e8d1d5c]{font-size:.37333rem;color:var(--van-primary-color, var(--zaui-brand))}.page-verify .sign-card .sign-body[data-v-7e8d1d5c]{padding-bottom:.4rem}.page-verify .sign-card .sign-body .date[data-v-7e8d1d5c]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-verify .sign-card .sign-body .file[data-v-7e8d1d5c]{margin-top:.21333rem;font-size:.37333rem;color:#393d46;line-height:.53333rem}.page-verify .sign-card .sign-body .file .file-name[data-v-7e8d1d5c]{color:var(--van-primary-color, var(--zaui-brand))}.page-verify .sign-card .sign-body .file .file-name .dun-hao[data-v-7e8d1d5c]{color:#393d46}.page-verify .footer[data-v-7e8d1d5c]{position:static;justify-content:space-between}.page-verify .footer .refresh-btn[data-v-7e8d1d5c]{width:.93333rem;border:none;color:var(--van-primary-color, var(--zaui-brand));font-size:.4rem;line-height:.37333rem;text-align:center}.page-verify .footer .refresh-btn .text[data-v-7e8d1d5c]{margin-top:.13333rem;font-size:.32rem}.page-verify .footer[data-v-7e8d1d5c] .com-share{flex:1;margin-left:.26667rem}.page-verify .footer .submit-btn[data-v-7e8d1d5c]{flex:1}\n",document.head.appendChild(e),System.register(["./vendor-legacy-da08ff20.js","./index-legacy-762cf42a.js","./index-legacy-bb472ef1.js","./index-legacy-ed45a82b.js","./verify-legacy-b40f1513.js","./order-legacy-fbc40e8a.js","./inform-legacy-3875961c.js"],(function(e){"use strict";var t,a,r,n,i,o,d,l,c,s,v,f,u,y,p,g,m,h,C,b,I,N,x,k,T,w,E,O,_,L,j,D,S,H,z,R,U,$,A,P,F,Y,q,G,M,Q,B,W,J;return{setters:[function(e){t=e.h,a=e.N,r=e.a8,n=e.r,i=e.d,o=e.x,d=e.j,l=e.k,c=e.l,s=e.m,v=e.n,f=e.z,u=e.Q,y=e.I,p=e.y,g=e.J,m=e.s,h=e.A,C=e.E,b=e.F,I=e.C,N=e.T,x=e.D,k=e.a3,T=e.a4},function(e){w=e.l},function(e){E=e._,O=e.S,_=e.p,L=e.e,j=e.a,D=e.q,S=e.l,H=e.C,z=e.g,R=e.s,U=e.n,$=e.N,A=e.b,P=e.A,F=e.t},function(e){Y=e._},function(e){q=e.f,G=e.s,M=e.g,Q=e.a},function(e){B=e.a},function(e){W=e.g,J=e.l}],execute:function(){const V=e=>(k("data-v-7e8d1d5c"),e=e(),T(),e),K={class:"page-verify"},X={class:"people"},Z={class:"name"},ee={class:"verify-item"},te=V((()=>f("div",{class:"label"},"证件号码",-1))),ae={class:"no"},re=I(" 去认证 "),ne={class:"sign-body"},ie={class:"date"},oe={class:"file"},de=I(" 签名将被用于以下文件： "),le={class:"people"},ce={class:"name"},se={class:"verify-item"},ve=V((()=>f("div",{class:"label"},"证件号码",-1))),fe={class:"no"},ue=["onClick"],ye=I(" 去认证 "),pe=["onClick"],ge={class:"sign-body"},me={class:"date"},he={class:"file"},Ce=I(" 签名将被用于以下文件： "),be={class:"footer-button footer"},Ie=V((()=>f("div",{class:"text"},"刷新",-1))),Ne=I("分享"),xe=I("提交"),ke=t({setup(e){const t=1,I=2,k=a(),T=r(),E=(()=>{const e=k.query;return e.orderCode&&(e.orderNo=e.orderCode,delete e.orderCode),e})(),{saleUserId:V="D1234567-1",tenantId:ke="9991000007",templateId:Te=1,productCode:we="CQ75CQ76",insurerCode:Ee="ancheng",isShare:Oe,orderCode:_e,orderNo:Le,productCategory:je}=E,De=new O({source:"localStorage"}),Se=n([]),He=n([]),ze=n([]),Re=n([]),Ue=n(),$e=n(),Ae=[],Pe=n(""),Fe=n(),Ye=i().format("YYYY-MM-DD"),qe=()=>{$e.value?.clear?.()},Ge=(e,t)=>{let a=window.location.href;a=a.includes("orderCode")?a:a.replace("orderNo","orderCode"),Q({callbackUrl:a,certiNo:e,faceAuthMode:"TENCENT",userName:t,tenantId:9991000007}).then((a=>{const{code:r,data:n}=a;if("10000"===r){const{originalUrl:a,serialNo:r}=n;window.location.href=a,De.set("verifyData",{serialNo:r,certNo:e,name:t})}}))},Me=e=>{const{id:t,objectType:a}=e;Pe.value="",Fe.value="";const r={1:"pdf",2:"richText",3:"link"};W({insurerCode:Ee,id:t,objectType:a,productCategory:je,orderNo:Le,tenantId:ke}).then((({code:e,data:t})=>{if("10000"===e){const{textType:e,content:a,questionType:n}=t?.[0]||{};2===n?(Pe.value="question",Fe.value=t):(1===e&&a.includes("png")?Pe.value="picture":Pe.value=r[e],Fe.value=a)}}))},Qe=e=>`${e}`===H.CERT,Be=e=>{-1===e?Ge(Ue.value.tenantOrderHolder?.certNo,Ue.value.tenantOrderHolder?.name):Ge(Ue.value.tenantOrderInsuredList[e]?.certNo,Ue.value.tenantOrderInsuredList[e]?.name)},We=e=>{e&&Ae.every((t=>t!==e))&&Ae.push(e)},Je=()=>{const e=$e.value?.isEmpty();e?N.fail("请投保人签名"):Ue.value.tenantOrderHolder?.extInfo?.isCert!==t&&Qe(Ue.value.tenantOrderHolder?.certType)?N.fail("请投保人去认证"):z({orderNo:_e||Le,saleUserId:V,tenantId:ke}).then((e=>{const{code:t,data:a}=e;"10000"===t&&([B.PENDING,B.PAYMENT_FAILED,B.UNDER_WRITING_SUCCESS].includes(a.orderStatus)?x.confirm({title:"提示",message:"请确认信息填写无误后，再进行支付"}).then((()=>{const e=$e.value?.save();Promise.all([G("HOLDER",e,Ue.value?.id,`${ke}`)]).then((()=>{U({...Ue.value,pageCode:"sign",operateOption:{withSignInfo:!0},extInfo:{...Ue.value.extInfo,pageCode:"sign",templateId:Te,shareFlag:Oe?"Y":"N",buttonCode:$.sign},venderCode:Ee}).then((e=>{const{code:a,data:r}=e;"10000"===t&&r.success&&T.push({path:A[r.pageAction.data.nextPageCode],query:{orderNo:_e||Le,saleUserId:V,tenantId:ke}})}))}))})):R("paymentResult",E))}))},Ve=(e=!1)=>{z({orderNo:_e||Le,saleUserId:V,tenantId:ke}).then((t=>{const{code:a,data:r}=t;"10000"===a&&(Ue.value=r,e&&(r?.tenantOrderHolder?.extInfo?.isCert===I||r?.tenantOrderInsuredList.some((e=>e.extInfo?.isCert===I))?N("用户未完身份认证及签字"):r?.tenantOrderAttachmentList.find((e=>e.category===P.ELECTRIC_SIGN&&e.objectType===F.HOLDER))&&r?.tenantOrderAttachmentList.find((e=>e.category===P.ELECTRIC_SIGN&&e.objectType===F.INSURED))||N("用户未完身份认证及签字")),setTimeout((()=>{let e=0;r.tenantOrderAttachmentList.forEach((t=>{t.category===P.ELECTRIC_SIGN&&(t.objectType===F.HOLDER?($e.value?.clear?.(),$e.value.setDataURL(t.fileBase64)):t.objectType===F.INSURED&&(Ae[e]?.clear?.(),Ae[e].setDataURL(t.fileBase64),e+=1))}))})))}))},Ke=()=>{Ve(!0)},Xe=o((()=>{const e={...E,isShare:1,sharePageCode:"sign"};return`${window.location.origin}/phoneVerify?${w.stringify(e)}`}));return d((()=>{Ve(),(async()=>{const e={orderNo:_e||Le,productCode:we,tenantId:ke,objectType:1},t={insurerCode:Ee,orderNo:Le,productCategory:je,tenantId:ke,noticeType:4,objectType:1},{code:a,data:r}=await M(e),{code:n,data:i}=await M({...e,objectType:2}),{code:o,data:d}=await J(t),{code:l,data:c}=await J({...t,noticeType:5,objectType:2});"10000"===a&&(He.value=r||[]),"10000"===n&&(Se.value=i||[]),"10000"===o&&(Re.value=d||[]),"10000"===l&&(ze.value=c||[])})();const e=De.get("verifyData");if(e){const{serialNo:t,certNo:a,name:r}=e;q({certiNo:a,orderNo:_e||Le,serialNo:t,tenantId:ke,userName:r}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(De.remove("verifyData"),Ve())}))}})),(e,a)=>{const r=l("ProPDFviewer"),n=l("van-button"),i=l("ProPageWrap");return c(),s(i,null,{default:v((()=>[f("div",K,[u(_,{type:"warning",title:"尊敬的客户，本次投保需要进行身份认证",content:"本产品投保需要对投保人、被保人进行实名认证，您购买本产品的累计总保费已超过20万，按监管要求，需要提供投保人、被保人、指定受益人证件影像，本产品非本人投保且带身故责任、需对投保人、被保人（成人）的投保意愿进行签字确认。"}),u(j,{title:"投保人",class:"card"},{extra:v((()=>[f("div",X,[f("div",Z,y(Ue.value?.tenantOrderHolder?.name),1),Qe(Ue.value?.tenantOrderHolder?.certType)?(c(),p("div",{key:0,class:g(["status",{verified:Ue.value?.tenantOrderHolder?.extInfo?.isCert===t}])},y(Ue.value?.tenantOrderHolder?.extInfo?.isCert===t?"已认证":"待认证"),3)):m("",!0)])])),default:v((()=>[f("div",ee,[te,f("div",ae,y(Ue.value?.tenantOrderHolder?.certNo),1),Ue.value?.tenantOrderHolder?.extInfo?.isCert!==t&&Qe(Ue.value?.tenantOrderHolder?.certType)?(c(),p("div",{key:0,class:"action",onClick:a[0]||(a[0]=e=>Be(-1))},[re,u(L,{name:"right_arrow",class:"icon"})])):m("",!0)])])),_:1}),u(j,{key:"-1",title:"投保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:v((()=>[f("div",{class:"resign",onClick:qe},"重签")])),default:v((()=>[u(D,{ref_key:"holderSign",ref:$e,class:"sign"},null,512),f("div",ne,[f("div",ie,"签名日期： "+y(h(Ye)),1),f("div",oe,[de,f("span",null,[(c(!0),p(b,null,C(He.value,((e,t)=>(c(),s(r,{key:`holderFileList-${t}`,class:"file",title:`《${e.materialName}》`,content:e.materialContent,type:h(S)(e.materialContent,e.materialSource+""),onClick:a[1]||(a[1]=()=>"")},null,8,["title","content","type"])))),128))]),(c(!0),p(b,null,C(Re.value,((e,t)=>(c(),s(r,{key:`holderQuestionList-${t}`,class:"file",title:`《${e.title}》`,content:Fe.value,type:Pe.value,onClick:()=>Me(e)},null,8,["title","content","type","onClick"])))),128))])])])),_:1}),(c(!0),p(b,null,C(Ue.value?.tenantOrderInsuredList,((e,n)=>(c(),p("div",{key:n},[u(j,{title:"被保人",class:"card"},{extra:v((()=>[f("div",le,[f("div",ce,y(e.name),1),Qe(e.certType)?(c(),p("div",{key:0,class:g(["status",{verified:e.extInfo?.isCert===t}])},y(e.extInfo?.isCert===t?"已认证":"待认证"),3)):m("",!0)])])),default:v((()=>[f("div",se,[ve,f("div",fe,y(e.certNo),1),e.extInfo?.isCert!==t&&Qe(e.certType)?(c(),p("div",{key:0,class:"action",onClick:e=>Be(n)},[ye,u(L,{name:"right_arrow",class:"icon"})],8,ue)):m("",!0)])])),_:2},1024),u(j,{title:"被保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:v((()=>[f("div",{class:"resign",onClick:e=>(e=>{Ae[e]?.clear?.()})(n)},"重签",8,pe)])),default:v((()=>[u(D,{ref_for:!0,ref:We,class:"sign"}),f("div",ge,[f("div",me,"签名日期： "+y(h(Ye)),1),f("div",he,[Ce,(c(!0),p(b,null,C(Se.value,((e,t)=>(c(),s(r,{key:`insuredFileList-${t}`,class:"file",title:`《${e.materialName}》`,content:e.materialContent,type:h(S)(e.materialContent,e.materialSource+""),onClick:a[2]||(a[2]=()=>"")},null,8,["title","content","type"])))),128)),(c(!0),p(b,null,C(ze.value,((e,t)=>(c(),s(r,{key:`insuredQuestionList-${t}`,class:"file",title:`《${e.title}》`,content:Fe.value,type:Pe.value,onClick:()=>Me(e)},null,8,["title","content","type","onClick"])))),128))])])])),_:2},1024)])))),128)),f("div",be,[h(Oe)?m("",!0):(c(),p("div",{key:0,class:"refresh-btn",onClick:Ke},[f("div",null,[u(L,{name:"refresh"})]),Ie])),h(Oe)?m("",!0):(c(),s(Y,{key:1,title:"邀请您进行身份认证",desc:"邀请您进行身份认证",link:h(Xe)},{default:v((()=>[u(n,{plain:"",type:"primary",class:"share-btn"},{default:v((()=>[Ne])),_:1})])),_:1},8,["link"])),u(n,{type:"primary",class:"submit-btn",onClick:Je},{default:v((()=>[xe])),_:1})])])])),_:1})}}});e("default",E(ke,[["__scopeId","data-v-7e8d1d5c"]]))}}}))}();

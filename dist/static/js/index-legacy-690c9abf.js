!function(){var e=document.createElement("style");e.innerHTML=".net-sale-wrap[data-v-38bf24c9]{padding-bottom:1.33333rem;background:#f1f5fc}.net-sale-wrap .footer-button[data-v-38bf24c9]{justify-content:space-between}.net-sale-wrap .product-name[data-v-38bf24c9]{font-size:.48rem;font-weight:500;line-height:1.06667rem}.net-sale-wrap .part[data-v-38bf24c9]{background-color:#fff;padding:0 var(--zaui-page-border, .4rem)}.net-sale-wrap .part .common-cell-wrapper[data-v-38bf24c9]{height:1.38667rem;align-items:center;width:100%;display:inline-flex}.net-sale-wrap .part .common-cell-wrapper[data-v-38bf24c9] .cell-container{align-items:flex-start;justify-content:center;width:100%;color:var(--van-field-label-color);font-size:.4rem}.net-sale-wrap .radio-group[data-v-38bf24c9]{width:100%}.net-sale-wrap .radio-group .radio-btn[data-v-38bf24c9]{justify-content:space-between}.net-sale-wrap .price[data-v-38bf24c9]{color:#393d46;font-size:.45333rem;font-weight:400}.net-sale-wrap .price span[data-v-38bf24c9]{color:var(--van-primary-color);font-weight:700}.net-sale-wrap .right[data-v-38bf24c9]{width:3.73333rem;background:var(--van-primary-color);border-color:var(--van-primary-color)}.net-sale-wrap .footer[data-v-38bf24c9]{margin-top:.66667rem;padding:0 var(--zaui-page-border, .4rem)}\n",document.head.appendChild(e),System.register(["./index-legacy-a5e5a4bc.js","./debounce-legacy-211ba60e.js","./utils-legacy-35770091.js","./product-legacy-f18b5c33.js","./trial-legacy-771b1d4a.js","./index-legacy-0dd6cfe6.js","./nextStep-legacy-e5e24959.js","./index-legacy-3ac15310.js","./infoCollection-legacy-63bdd2f7.js","./pdfh5-legacy-9f98dc45.js","./isObject-legacy-83e04b6f.js","./isObjectLike-legacy-7cedb542.js","./trial-legacy-2de42c7c.js","./relativeTime-legacy-4b5b6d28.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-1d4b9a9e.js","./core-legacy-4d018e1f.js","./constant-legacy-c9c30061.js"],(function(e){"use strict";var t,n,a,o,r,l,i,d,u,c,s,v,p,m,f,y,h,w,O,g,I,L,b,D,Y,C,V,T,E,j,x,k,R,M,P,N,H,_,B,S,U;return{setters:[function(e){t=e._,n=e.d,a=e.b_,o=e.a,r=e.r,l=e.ad,i=e.E,d=e.an,u=e.G,c=e.b,s=e.c,v=e.e,p=e.w,m=e.f,f=e.j,y=e.t,h=e.g,w=e.a7,O=e.k,g=e.aj,I=e.m,L=e.P,b=e.a3,D=e.aP,Y=e.bT,C=e.X,V=e.Y,T=e.ah,E=e.T},function(e){j=e.d},function(e){x=e.r,k=e.t},function(e){R=e.p},function(e){M=e.i,P=e.b,N=e.p},function(e){H=e.default},function(e){_=e.n},function(e){B=e.default},function(e){S=e.m,U=e.n},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){!function(){if("undefined"!=typeof window){var e,t="ontouchstart"in window;document.createTouch||(document.createTouch=function(e,t,a,o,r,l,i){return new n(t,a,{pageX:o,pageY:r,screenX:l,screenY:i,clientX:o-window.pageXOffset,clientY:r-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var e=o(),t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length=arguments.length,e}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var n=function(e,t,n,a,o){a=a||0,o=o||0,this.identifier=t,this.target=e,this.clientX=n.clientX+a,this.clientY=n.clientY+o,this.screenX=n.screenX+a,this.screenY=n.screenY+o,this.pageX=n.pageX+a,this.pageY=n.pageY+o},a=!1;d.multiTouchOffset=75,t||new d}function o(){var e=[];return e.item=function(e){return this[e]||null},e.identifiedTouch=function(e){return this[e+1]||null},e}function r(t){return function(n){var o,r,d;("mousedown"===n.type&&(a=!0),"mouseup"===n.type&&(a=!1),"mousemove"!==n.type||a)&&(("mousedown"===n.type||!e||e&&!e.dispatchEvent)&&(e=n.target),null==e.closest("[data-no-touch-simulate]")&&(o=t,r=n,(d=document.createEvent("Event")).initEvent(o,!0,!0),d.altKey=r.altKey,d.ctrlKey=r.ctrlKey,d.metaKey=r.metaKey,d.shiftKey=r.shiftKey,d.touches=i(r),d.targetTouches=i(r),d.changedTouches=l(r),e.dispatchEvent(d)),"mouseup"===n.type&&(e=null))}}function l(t){var a=o();return a.push(new n(e,1,t,0,0)),a}function i(e){return"mouseup"===e.type?o():l(e)}function d(){window.addEventListener("mousedown",r("touchstart"),!0),window.addEventListener("mousemove",r("touchmove"),!0),window.addEventListener("mouseup",r("touchend"),!0)}}();const $=e=>(C("data-v-38bf24c9"),e=e(),V(),e),F={class:"net-sale-wrap"},X={class:"part product-name"},A=$((()=>f("span",null,null,-1))),z=$((()=>f("span",null,null,-1))),K={class:"part"},q={class:"footer"};e("default",t(n({__name:"index",setup(e){const t=a(),n=o(),{productCode:C="HTEJBX",tenantId:V="9991000001",agentCode:$="",agencyCode:G,saleChannelId:J,extraInfo:W,preview:Q}=n.query,Z=r(),ee=r("0"),te=r(),ne=r(),ae=r(),oe=r([{}]),re=r([]),le=r({}),ie=r(""),de=r({min:new Date(l().add(1,"day").format("YYYY-MM-DD")),max:new Date,currentDate:""});let ue={};try{ue=JSON.parse(decodeURIComponent(W))}catch(Oe){}const ce=r({agencyId:G,agentCode:$,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"EVENT_NETSALE_underWrite",pageCode:"infoCollection",templateId:ue.templateId,iseeBizNo:ie.value,extraInfo:ue},orderCategory:1,saleUserId:$,saleChannelId:J,tenantId:V,venderCode:"",tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"xinao",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:V}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),se=i((()=>{var e,t;return((null===(e=te.value)||void 0===e||null===(t=e.productRelationPlanVOList)||void 0===t?void 0:t.length)||0)>1})),ve=r();d([()=>ae.value,()=>ne.value,()=>ee.value],(()=>{const{premium:e}=ae.value||{};if(e)ve.value=e&&`￥${e}元`;else{var t,n,a;const{tenantProductInsureVO:e}=ne.value||{};let o={};o=null!=e&&null!==(t=e.planList)&&void 0!==t&&t.length?((null==e?void 0:e.planList)||[]).find((e=>e.planCode===ee.value)):null==e?void 0:e.planInsureVO;const{paymentFrequencyValue:r,premiumUnit:l}=(null===(n=o)||void 0===n||null===(a=n.productPremiumVOList)||void 0===a?void 0:a[0])||{};ve.value=r&&`￥${r}${l||"元"}`}}),{deep:!0,immediate:!0});const pe=i((()=>{var e,t,n,a,o;let r=[];var i,d,u;null!==(e=te.value)&&void 0!==e&&null!==(t=e.productRelationPlanVOList)&&void 0!==t&&t.length?r=(null===(i=te.value)||void 0===i||null===(d=i.productRelationPlanVOList.find((e=>e.planCode===ee.value)))||void 0===d?void 0:d.productRiskVoList)||[]:r=(null===(u=te.value)||void 0===u?void 0:u.productRiskVoList)||[];const{insuranceStartType:c,riskInsureLimitVO:s}=(null===(n=r)||void 0===n||null===(a=n[0])||void 0===a||null===(o=a.riskDetailVOList)||void 0===o?void 0:o[0])||{},{maxInsuranceDay:v}=s||{};if(c===+S.CUSTOM_DAY){const[e,t]=(v||"").split(",");e&&t&&t!==e?(de.value.min=new Date(l(new Date).add(+e||0,"day").format("YYYY-MM-DD")),de.value.max=new Date(l(new Date).add(+t||0,"day").format("YYYY-MM-DD"))):e&&t&&t===e?de.value.currentDate=l(new Date).add(t,"day").format("YYYY-MM-DD HH:mm:ss"):t||(de.value.max=new Date(l(new Date).add(+t||0,"day").format("YYYY-MM-DD")))}return r})),me=i((()=>{var e,t,n;const{insuranceStartType:a,riskInsureLimitVO:o}=(null===(e=pe.value)||void 0===e||null===(t=e[0])||void 0===t||null===(n=t.riskDetailVOList)||void 0===n?void 0:n[0])||{},{maxInsuranceDay:r}=o||{};if(a!==+S.CUSTOM_DAY)return!0;const[l,i]=(r||"").split(",");return l===i})),fe=i((()=>{var e,t,n;const a=pe.value||[],o=(null==a||null===(e=a[0])||void 0===e||null===(t=e.riskDetailVOList)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.insuranceStartType)||1;return de.value.currentDate?`${l(de.value.currentDate).format("YYYY-MM-DD")} 00:00:00`:o===+S.CURRENT_DAY?`${l(new Date).format("YYYY-MM-DD HH:mm:ss")}`:`${l(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`})),ye=i((()=>{var e,t;const n=pe.value||[],{insuranceEndType:a,riskInsureLimitVO:o}=(null==n||null===(e=n[0])||void 0===e||null===(t=e.riskDetailVOList)||void 0===t?void 0:t[0])||{},{insurancePeriodValueList:r}=o||{};r||console.warn("insurancePeriodValueList","保障信息不存在");const[i,d]=((null==r?void 0:r[0])||"").split("_");return a===+U.CURRENT_DAY?`${l(fe.value).add(d||0,i).subtract(1,"day").format("YYYY-MM-DD")} 23:59:59`:a?`${l(fe.value).add(d,i).format("YYYY-MM-DD")} 00:00:00`:""})),he=async()=>{var e,t,n;ce.value.venderCode=null===(e=te.value)||void 0===e?void 0:e.productBasicInfoVO.insurerCode,ce.value.orderAmount=null===(t=ae.value)||void 0===t?void 0:t.premium,ce.value.orderRealAmount=null===(n=ae.value)||void 0===n?void 0:n.premium,ce.value.commencementTime=fe.value,ce.value.expiryDate=ye.value,ce.value.extInfo&&(ce.value.extInfo.iseeBizNo=ie.value),ce.value.tenantOrderInsuredList&&(ce.value.tenantOrderInsuredList[0].planCode=ee.value),_(((e,t,n)=>{var a;const o={},r=(e=[])=>{(e||[]).forEach((e=>{var t;o[e.riskCode]=e,null!==(t=e.riskPremiumDetailVOList)&&void 0!==t&&t.length&&r(e.riskPremiumDetailVOList)}))};r(null==t?void 0:t.riskPremiumDetailVOList);const l={...n},i={tenantId:V,riskList:(null===(a=re.value)||void 0===a?void 0:a[0].riskVOList)||[],riskPremium:o,productId:(null==e?void 0:e.productBasicInfoVO.id)||0};var d;return l.tenantOrderHolder&&(l.tenantOrderHolder.certType=l.tenantOrderHolder.certType||T.CERT,l.tenantOrderHolder.certNo=(l.tenantOrderHolder.certNo||"").toLocaleUpperCase()),l.tenantOrderInsuredList&&(l.tenantOrderInsuredList[0].certType=l.tenantOrderInsuredList[0].certType||T.CERT,l.tenantOrderInsuredList[0].certNo=(l.tenantOrderInsuredList[0].certNo||"").toLocaleUpperCase(),l.tenantOrderInsuredList[0].tenantOrderProductList=[{premium:null===(d=ae.value)||void 0===d?void 0:d.premium,productCode:null==e?void 0:e.productBasicInfoVO.productCode,productName:null==e?void 0:e.productBasicInfoVO.productName,tenantOrderRiskList:k(i)}]),l})(te.value,ae.value,ce.value),((e,t)=>{"jumpToPage"===t&&E("提交成功")}))},we=async()=>{var e;null===(e=Z.value)||void 0===e||e.validateForm().then((()=>{var e,t;g.confirm({title:"分享",message:`即将向客户【${null===(e=ce.value)||void 0===e||null===(t=e.tenantOrderHolder)||void 0===t?void 0:t.name}】发送投保确认信息,请确认是否继续？`}).then((()=>{Q||he()}))}))};d([()=>{var e;return null===(e=ce.value.tenantOrderInsuredList)||void 0===e?void 0:e[0].name},()=>{var e;return null===(e=ce.value.tenantOrderInsuredList)||void 0===e?void 0:e[0].birthday},()=>ee.value],j((([e,t])=>{e&&t&&(Q||(async(e,t,n)=>{var a,o,r,l;const i={holder:{personVO:{certType:T.CERT,...e.tenantOrderHolder,socialFlag:`${(null===(a=e.tenantOrderHolder)||void 0===a||null===(o=a.extInfo)||void 0===o?void 0:o.hasSocialInsurance)||""}`,occupationCodeList:null===(r=e.tenantOrderHolder)||void 0===r||null===(l=r.extInfo)||void 0===l?void 0:l.occupationCodeList}},insuredVOList:((null==e?void 0:e.tenantOrderInsuredList)||[]).map((e=>{var a,o;return{insuredCode:"",personVO:{...e,certType:T.CERT,socialFlag:`${(null==e||null===(a=e.extInfo)||void 0===a?void 0:a.hasSocialInsurance)||""}`,occupationCodeList:null==e||null===(o=e.extInfo)||void 0===o?void 0:o.occupationCodeList},productPlanVOList:[{insurerCode:null==t?void 0:t.productBasicInfoVO.insurerCode,planCode:ee.value||"",riskVOList:x(n)}]}})),productCode:null==t?void 0:t.productBasicInfoVO.productCode,productId:null==t?void 0:t.productBasicInfoVO.id,tenantId:V},{code:d}=await P(i);if("10000"===d){const{code:e,data:t}=await N(i);var u,c;"10000"===e?(ae.value=t,re.value=(null==i||null===(u=i.insuredVOList)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.productPlanVOList)||[]):ae.value=void 0}})(ce.value,te.value,pe.value))}),500));return d((()=>ee.value),(()=>{oe.value&&(le.value=oe.value[ee.value])})),u((()=>{(async()=>{await R({productCode:C,withInsureInfo:!0,tenantId:V}).then((({code:e,data:t})=>{var n;"10000"===e&&(ne.value=t,document.title=(null===(n=t.tenantProductInsureVO)||void 0===n?void 0:n.productName)||"")})),M({productCode:C}).then((({code:e,data:t})=>{var n;"10000"===e&&(te.value=t,oe.value=t.planFactor,null!==(n=t.productRelationPlanVOList)&&void 0!==n&&n.length&&(ee.value=t.productRelationPlanVOList[0].planCode||""),t.productFactor?le.value=t.productFactor:t.planFactor&&(le.value=t.planFactor[ee.value]))}))})(),setTimeout((async()=>{ie.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,n)=>{const a=I,o=L,r=b,l=D,i=c("ProPageWrap"),d=Y;return s(),v(d,{"theme-vars":h(t)},{default:p((()=>[m(i,null,{default:p((()=>{var e,t;return[f("div",F,[f("div",X,y(null===(e=h(te))||void 0===e||null===(t=e.productBasicInfoVO)||void 0===t?void 0:t.productFullName),1),h(se)?(s(),v(o,{key:0,"show-line":!1,title:"保障年期"},{default:p((()=>{var e;return[m(a,{modelValue:h(ee),"onUpdate:modelValue":n[0]||(n[0]=e=>w(ee)?ee.value=e:null),class:"radio-group",prop:{label:"planName",value:"planCode"},options:null===(e=h(te))||void 0===e?void 0:e.productRelationPlanVOList},null,8,["modelValue","options"])]})),_:1})):O("",!0),m(H,{ref_key:"formRef",ref:Z,"title-collection":{HOLDER:"投保人",INSURER:"被保人",BENEFICIARY:"收益人"},"form-info":h(ce),"send-sms-code":()=>{},"input-align":"left","factor-object":h(le)},{holderName:p((()=>[A])),insurerName:p((()=>[z])),_:1},8,["form-info","send-sms-code","factor-object"]),f("div",K,[m(r,{title:"保费",content:h(ve)},null,8,["content"]),h(me)?(s(),v(r,{key:0,title:"保障期间",content:`${h(fe).split(" ")[0]}~${h(ye).split(" ")[0]}`},null,8,["content"])):(s(),v(l,{key:1,modelValue:h(de).currentDate,"onUpdate:modelValue":n[1]||(n[1]=e=>h(de).currentDate=e),label:"生效日期",name:"currentDate",type:"date",min:h(de).min,max:h(de).max,required:!0},null,8,["modelValue","min","max"]))]),f("div",q,[m(B,{shadow:!1,text:"分享用户确认投保",onClick:we})])])]})),_:1})])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-38bf24c9"]]))}}}))}();

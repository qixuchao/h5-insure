System.register(["./index-legacy-75e9f289.js","./infoCollection-legacy-b5bcfcd4.js","./useStorage-legacy-3d98f9f5.js","./trial-legacy-7e9b43f4.js"],(function(e){"use strict";var i,r,t,n,a,o,d,s,u,l,c,y;return{setters:[function(e){i=e.aS,r=e.a3,t=e.a$},function(e){n=e.R,a=e.g,o=e.k,d=e.l},function(e){s=e.l},function(e){u=e.R,l=e.b,c=e.a,y=e.i}],execute:function(){e("t",(e=>{const{tenantId:i,riskList:r,riskPremium:t,productId:n}=e;let a=[];return a=Object.keys(t).length?r.filter((e=>t[e.riskCode])):r,a.map((e=>({tenantId:i,amountUnit:1,annuityDrawFrequency:e.annuityDrawDate,annuityDrawType:e.annuityDrawType,paymentFrequency:e.paymentFrequency,paymentPeriod:e.chargePeriod.split("_")[1],paymentPeriodType:l[e.chargePeriod.split("_")[0]],insurancePeriodType:c["to_life"===e.coveragePeriod?"to_life":e.coveragePeriod.split("_")[0]],insurancePeriodValue:Number.isNaN(+e.coveragePeriod.split("_")[1])?0:e.coveragePeriod.split("_")[1],riskCode:e.riskCode,riskType:e.riskType,riskName:e.riskName,extInfo:{riskId:e.riskId,copy:e.copy},initialPremium:t[e.riskCode]?.premium||0,totalPremium:t[e.riskCode]?.premium||0,liabilityDetails:e.liabilityVOList?.map((e=>({liabilityCode:e.liabilityCode,liabilityName:e.liabilityName,refundMethod:e.liabilityAttributeValue})))||[],productId:n,currentAmount:e.amount||0,initialAmount:t[e.riskCode]?.amount||e.amount})))})),e("r",(e=>{const r=i(e).map((e=>(e.riskDetailVOList.find((e=>e.riskType===u.MAIN_RISK)),(e.riskDetailVOList||[]).map((e=>{const{riskCategory:i,riskCode:r,riskType:t,riskName:n,id:a,riskInsureLimitVO:s,riskCalcMethodInfoVO:u,amountPremiumConfigVO:l}=e,{annuityDrawFrequencyList:c,annuityDrawValueList:y,insurancePeriodValueList:p,paymentFrequencyList:m,paymentPeriodValueList:I,paymentPeriodRule:k}=s;let f=0;const{displayType:C,displayUnit:P,fixedValue:g,eachCopyPrice:O}=l||{},L=String(C),N=String(P);return L&&L===o.FIXED?N===d.YUAN?f=g||0:N===d.MILLION&&(f=g?Number(1e4*g):0):L&&L===o.COPY&&(f=O?1*O:0),{amount:f,annuityDrawDate:y?.[0],annuityDrawFrequency:c?.[0],chargePeriod:4===k?"year_1":I?.[0],copy:1,coveragePeriod:4===k?"year_1":p?.[0],liabilityVOList:e.riskLiabilityInfoVOList,paymentFrequency:m?.[0],riderRisk:!0,riderRiskVOList:[],riskCategory:i,riskCode:r,riskName:n,riskId:a,riskType:t}}))))).flat(),t={},n=[];return r.forEach((e=>{t[e.riskCode]||(n.push(e),t[e.riskCode]=!0)})),n})),e("v",(e=>/^\d{6}$/.test(e)));const p=(e,i,r=[],t=a.YEAR,n=!1)=>{const s=e.filter((e=>{try{return!!e.extraInfo&&(!JSON.parse(e.extraInfo).packageCode||!!r.includes(e.id))}catch(i){return!1}})),l=s.find((e=>e.riskType===u.MAIN_RISK));return s.map((e=>{const{riskInsureLimitVO:r,riskCategory:t,id:n,riskType:s,riskName:c,riskCode:p,extraInfo:m,riskLiabilityInfoVOList:I,riskCalcMethodInfoVO:k,amountPremiumConfigVO:f}=e,{insurancePeriodType:C,insurancePeriodValueList:P,paymentFrequencyList:g,paymentPeriodValueList:O,paymentPeriodType:L,annuityDrawFrequencyList:N,annuityDrawValueList:b,insurancePeriodRule:D,paymentPeriodRule:V}=r;let T=0;const{displayType:_,displayUnit:h,fixedValue:R,eachCopyPrice:x}=f||{},F=String(_),A=String(h);F&&F===o.FIXED?A===d.YUAN?T=R||0:A===d.MILLION&&(T=R?Number(1e4*R):0):F&&F===o.COPY&&(T=x?1*x:0);const v={amount:T||0,riskCode:p,riskId:n,riskName:c,paymentFrequency:g?.[0]||a.YEAR,extraInfo:m,chargePeriod:O?.[0],annuityDrawDate:b?.[0],riskType:s,annuityDrawFrequency:N?.[0],copy:1,coveragePeriod:P?.[0],insuredCode:i?.insurerCode,liabilityVOList:I,riskCategory:t};return s===u.MAIN_RISK?v:(D===y.ONE_YEAR&&(v.coveragePeriod="year_1"),V===y.ONE_YEAR&&(v.chargePeriod="year_1"),{...v,mainRiskId:l?.id,mainRiskCode:l?.riskCode})}))},m=e=>{const{tenantId:i,riskList:r,riskPremium:t,productId:n}=e;return r.map((e=>{var r;return{tenantId:i,amountUnit:1,annuityDrawFrequency:e.annuityDrawDate,annuityDrawType:e.annuityDrawType,paymentFrequency:e.paymentFrequency,paymentPeriod:e.chargePeriod.split("_")[1],paymentPeriodType:l?.[e.chargePeriod.split("_")[0]],insurancePeriodType:c["to_life"===e.coveragePeriod?"to_life":e.coveragePeriod?.split("_")?.[0]],insurancePeriodValue:(r=e.coveragePeriod,!r||Number.isNaN(+r.split("_")[1])?0:r?.split("_")[1]),riskCode:e.riskCode,riskType:e.riskType,riskName:e.riskName,extInfo:{riskId:e.riskId,copy:e.copy},regularPremium:0,totalPremium:0,initialPremium:0,liabilityDetails:e.liabilityVOList?.map((e=>({liabilityCode:e.liabilityCode,liabilityName:e.liabilityName,refundMethod:e.liabilityAttributeValue}))),productId:n,currentAmount:e.amount||0,initialAmount:e.amount||0}}))},I=(e("f",(e=>{const{indirectCode:i,officialAccountUserId:t,visitorId:a}=e.extraInfo;return{orderAmount:0,tenantId:e.tenantId,venderCode:e.insureDetail.productBasicInfoVO.insurerCode,orderDataSource:"1",agencyId:e.agencyCode,agentCode:e.agentCode,saleUserId:e.saleUserId,saleChannelId:e.saleChannelId,commencementTime:e.commencementTime,expiryDate:e.expiryDate,orderCategory:"1",tenantOrderHolder:{tenantId:e.tenantId,certType:e.order.tenantOrderHolder?.certType||r.CERT,...e.order.tenantOrderHolder},extInfo:{...e.extraInfo,extraInfo:e.extraInfo,buttonCode:e.buttonCode,pageCode:e.pageCode,iseeBizNo:e.iseeBizNo,indirectCode:i,officialAccountUserId:t,visitorId:a},tenantOrderInsuredList:[{...e.order.tenantOrderInsuredList[0],tenantId:e.tenantId,certType:e.order.tenantOrderInsuredList?.[0]?.certType||r.CERT,mobile:e.order.tenantOrderInsuredList[0].relationToHolder===n.SELF?e.order.tenantOrderHolder.mobile:"",tenantOrderProductList:[{tenantId:e.tenantId,productCode:e.insureDetail?.productBasicInfoVO.productCode,productName:e.insureDetail?.productBasicInfoVO.productName,premium:0,tenantOrderRiskList:m({tenantId:e.tenantId,riskList:p(e.insureDetail?.productRiskVoList.map((e=>e.riskDetailVOList||[])).flat(),e.detail),riskPremium:{},productId:e.detail?.id})}]}],operateOption:e.order?.operateOption}})),e("c",((e,i)=>-1!==i.indexOf("$")?i.replace("$",`${e}`):`${e||""}${i}`)),e("P","PREVIEW_FILE_INFO")),k=(e("o",(e=>{s.set(I,JSON.stringify(e)),t.push("/template/filePreview")})),{2:"richText",3:"link"});e("g",((e,i)=>{if("1"===e&&i){const e=i?.split("?");return"pdf"===e[0].substr(e[0].lastIndexOf(".")+1)?"pdf":"picture"}return k[e]}))}}}));

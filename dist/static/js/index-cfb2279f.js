import{d as e,a4 as a,a5 as n,g as l,h as t,i,j as o,z as s,a6 as d,E as u,a7 as r,O as c,o as v,c as p,u as _,b as m,F as I,a as f,l as O,q as C,w as h,a8 as y,m as b,a9 as g,aa as E,ab as T}from"./index-5f0b7c0f.js";import{i as j,q as k,s as A}from"./trial-702131ae.js";import{a as P,b as S}from"./product-b798a348.js";import{_ as w}from"./TrialButton-cc877efd.js";import{u as L}from"./useAttachment-5e6e6b75.js";import{g as N}from"./utils-a4f7bdc3.js";import{u as x}from"./useOrder-737dc359.js";import{P as R}from"./constants-fe95ef6f.js";import"./index-546b109a.js";import"./infoCollection-cc9e8fc9.js";import"./trial-51ade33a.js";const V={key:0},F={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},B={class:"info"},D={key:1,class:"preview-placeholder"},U=f("br",null,null,-1),q=f("div",{id:"insureButton"},null,-1),G=f("div",{id:"xinaoDialog"},null,-1),M=e({name:"InsuranceLong"}),z=e({...M,setup(e){const M=a((()=>n((()=>import("./index-c77be5c8.js")),["static/js/index-c77be5c8.js","static/css/index-c23f272e.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css"]))),z=a((()=>n((()=>import("./index-7d3ad7f9.js")),["static/js/index-7d3ad7f9.js","static/css/index-79104747.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css","static/js/infoCollection-cc9e8fc9.js"]))),H=a((()=>n((()=>import("./index-14817445.js")),["static/js/index-14817445.js","static/css/index-491cbbd3.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css"])));a((()=>n((()=>import("./index-8a3a3a50.js")),["static/js/index-8a3a3a50.js","static/css/index-50785b3e.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css","static/js/cloneDeep-e8318d68.js","static/js/TrialButton-cc877efd.js","static/css/TrialButton-dea42d8e.css","static/js/index-546b109a.js","static/css/index-bbfdd7ec.css","static/js/trial-702131ae.js","static/js/config-98e8d477.js","static/js/isNaN-ef3a2bc4.js","static/js/useOrder-737dc359.js"])));const J=a((()=>n((()=>import("./index-7e4d0880.js")),["static/js/index-7e4d0880.js","static/css/index-ebb5282b.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css"]))),Q=a((()=>n((()=>import("./Video-0e4bf86b.js")),["static/js/Video-0e4bf86b.js","static/css/Video-20262b6f.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css"]))),W=a((()=>n((()=>import("./index-c1a408d1.js")),["static/js/index-c1a408d1.js","static/css/index-a34f0b1b.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css","static/js/utils-a4f7bdc3.js","static/js/infoCollection-cc9e8fc9.js","static/js/trial-51ade33a.js"]))),X=a((()=>n((()=>import("./index-c2e92699.js")),["static/js/index-c2e92699.js","static/css/index-b01c516e.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css","static/js/product-b798a348.js","static/js/useThread-637a02aa.js"]))),Y=a((()=>n((()=>import("./index-c734b1f0.js")),["static/js/index-c734b1f0.js","static/css/index-fa4edf2a.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css","static/js/theme-94cf7d00.js","static/js/index-546b109a.js","static/css/index-bbfdd7ec.css","static/js/utils-a4f7bdc3.js","static/js/infoCollection-cc9e8fc9.js","static/js/trial-51ade33a.js"]))),$=a((()=>n((()=>import("./index-2441dd34.js")),["static/js/index-2441dd34.js","static/css/index-eabeb59f.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css"]))),K=a((()=>n((()=>import("./index-85b6314c.js")),["static/js/index-85b6314c.js","static/css/index-cb73c937.css","static/js/index-5f0b7c0f.js","static/css/index-858bf1e3.css"]))),Z=l(),ee=t(),{productCode:ae="",tenantId:ne,agentCode:le="",agencyCode:te,saleChannelId:ie,proposalId:oe,extraInfo:se,orderNo:de,insurerCode:ue,preview:re,trialPreview:ce}=ee.query;let ve={};try{ve=JSON.parse(decodeURIComponent(se))}catch(ze){}i();const pe=i(),_e=i(),me=i(!1),Ie=i({}),fe=i({}),Oe=i(!1),Ce=i(0),he=i(!1);i({});const ye=i(!0);i(!0);const be=i(!0),ge=i(""),Ee=i({}),Te=i({}),je=i([]),ke=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Ae=i({});o((()=>!!re||!!ce));const Pe=o((()=>!!ce));i();const Se=()=>{g("premiumTrial",ee.query)},we=i([]),Le=i(),Ne=x(),xe=i(!1),Re=async()=>{!Pe.value&&P({productCode:ae}).then((({data:e,code:a})=>{if("10000"===a){Ie.value=e;const{wxShareConfig:a,showWXShare:n,title:l,desc:t,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};n?Object.assign(ke.value,{...a,imgUrl:a.image,isShare:n}):Object.assign(ke.value,{title:l,desc:t,imgUrl:i,isShare:n})}})),de||oe||(xe.value=!0),await j({productCode:ae,isTenant:!1}).then((({data:e,code:a})=>{var n;"10000"===a&&(me.value=!0,he.value=!0,fe.value=e,Ee.value=null==(n=e.productPlanInsureVOList)?void 0:n[0],je.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),be.value=!1,S({productCode:ae}).then((({code:e,data:a})=>{var n,l,t,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:o}=a;Le.value=e||[];const{basicInfo:{questionnaireType:s},questions:d,questionnaireName:u}=(null==(n=null==o?void 0:o[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};2===s&&(we.value=[{attachmentName:u,attachmentUri:d,attachmentType:"question"}]),we.value=[{attachmentName:u,attachmentUri:null==(l=null==d?void 0:d[0])?void 0:l.content,attachmentType:N(String(null==(t=null==d?void 0:d[0])?void 0:t.textType),null==(i=null==d?void 0:d[0])?void 0:i.content)}]}}))};s((()=>Ae.value.planCode),(e=>{Ee.value=(fe.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Ve=()=>{pe.value.handleClickTab()("insureButton")};i(""),i(0);const{fileList:Fe,mustReadFileCount:Be,popupFileList:De}=L(Ee,Le),Ue=e=>{Ee.value=(fe.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},qe=()=>{Oe.value=!1,ye.value=!0},Ge=()=>{Oe.value=!1,ye.value=!0},Me=async()=>{const{code:e,data:a}=await A(Ne.value);"10000"===e&&Z.push({path:R.questionNotice,query:{...ee.query,orderNo:a}})};return s((()=>Ee.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:n}=Ee.value;Ae.value.planCode=e,Te.value=(n||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),u((()=>{r(_e,(([{isIntersecting:e}],a)=>{me.value=!0}))})),c((()=>{be.value=!0,(async()=>{const{code:e,data:a}=await k({calcProductFactor:{productCode:ae}});"10000"===e&&Object.assign(Ne.value,a)})(),Re(),setTimeout((async()=>{ge.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var n,l,t,i,o,s,d,u,r,c,g,j,k,A,P,S,L,N,x,R;const Z=E,ee=T;return v(),p(I,null,[_(be)?(v(),p("div",V)):(v(),p("div",F,[m(Z),_(Pe)?(v(),p("div",D,[y("当前页面仅用于保费试算预览"),U,y("不展示其他产品相关配置信息")])):(v(),p(I,{key:0},[f("div",B,[1==(null==(l=null==(n=_(Ie))?void 0:n.BASIC_INFO)?void 0:l.bannerType)&&(null==(i=null==(t=_(Ie))?void 0:t.BASIC_INFO)?void 0:i.banner.length)?(v(),O(_(H),{key:0,"data-skeleton-type":"img",images:null==(s=null==(o=_(Ie))?void 0:o.BASIC_INFO)?void 0:s.banner},null,8,["images"])):C("",!0),2==(null==(u=null==(d=_(Ie))?void 0:d.BASIC_INFO)?void 0:u.bannerType)&&(null==(c=null==(r=_(Ie))?void 0:r.BASIC_INFO)?void 0:c.video.length)?(v(),O(_(Q),{key:1,"data-skeleton-type":"img",src:null==(g=_(Ie))?void 0:g.BASIC_INFO.video[0]},null,8,["src"])):C("",!0),(null==(A=null==(k=null==(j=_(Ie))?void 0:j.BASIC_INFO)?void 0:k.bannerMove)?void 0:A.length)?(v(),O(_(H),{key:2,url:null==(L=null==(S=null==(P=_(Ie))?void 0:P.BASIC_INFO)?void 0:S.bannerMove)?void 0:L[0],onClick:Ve},null,8,["url"])):C("",!0),f("div",{ref_key:"observeRef",ref:_e},null,512)]),m(_(M),{"data-source":null==(N=_(Ie))?void 0:N.BASIC_INFO},null,8,["data-source"]),(null==(x=_(Ie))?void 0:x.GUARANTEE)?(v(),O(_(W),{key:0,"show-service-config":"","data-source":_(Ie),"plan-list":_(je),onUpdateActivePlan:Ue},null,8,["data-source","plan-list"])):C("",!0),f("div",{class:"trial-text-btn",onClick:Se},"算一算保费"),m(_(J),{"data-source":null==(R=_(Ie))?void 0:R.ISSUE_CONDITION},null,8,["data-source"]),m(_(z),{ref_key:"detailScrollRef",ref:pe,"data-source":_(Ie)},null,8,["data-source"]),m(ee,null,{default:h((()=>{var e,a,n;return[(null==(e=_(Ie).SIGNATURE)?void 0:e.inscribedContent)?(v(),O(_($),{key:0,"inscribed-content":null==(n=null==(a=_(Ie))?void 0:a.SIGNATURE)?void 0:n.inscribedContent},null,8,["inscribed-content"])):C("",!0)]})),_:1}),m(ee,null,{default:h((()=>{var e;return[(null==(e=_(Fe))?void 0:e.length)?(v(),O(_(K),{key:0,"attachment-list":_(Fe),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{Ce.value=e,Oe.value=!0})(e))},null,8,["attachment-list"])):C("",!0)]})),_:1})],64)),q,m(w,{onHandleClick:Me})])),m(ee,null,{default:h((()=>[_(he)&&!_(Pe)?(v(),O(_(X),{key:0,"product-detail":_(Ie)},null,8,["product-detail"])):C("",!0)])),_:1}),G,m(ee,null,{default:h((()=>[_(Oe)?(v(),O(_(Y),{key:0,show:_(Oe),"onUpdate:show":a[1]||(a[1]=e=>b(Oe)?Oe.value=e:null),"content-list":_(ye)?_(Fe):_(De),"is-only-view":_(ye),"active-index":_(Ce),text:_(ye)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":_(ye)?0:_(Be),onSubmit:qe,onOnCloseFilePreviewByMask:Ge},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):C("",!0)])),_:1})],64)}}});export{z as default};

import{_ as e,d as a,bX as l,r as t,E as n,am as s,S as i,bR as u,z as o,c as r,g as c,i as d,m as v,F as p,h as m,L as f,t as C,j as y,e as _,n as h,f as L,V as g,a2 as k,w as A,A as E,b6 as b,a3 as I,a5 as S,a7 as x,X as F,Y as T,bY as w,c0 as M,bp as O,bt as P,c8 as N,bk as R,I as U,c9 as D,b1 as j,af as W,a8 as V}from"./index-8dcf7554.js";import{o as $,g as q}from"./utils-7f9ac760.js";import{C as z}from"./infoCollection-fc3860dd.js";import{P as B}from"./index-6c0138cc.js";const G={class:"guarantee-list"},Y=(e=>(F("data-v-63812b16"),e=e(),T(),e))((()=>d("span",null,"保障计划",-1))),Q={key:0,class:"plan-list"},X=["onClick"],H={key:2,class:"feerate-view"},J={key:0},K={class:"extinfo-info-list"},Z={class:"guarantee-detail"},ee={class:"content"};var ae=e(a({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},planList:{type:Array,require:!1,default:()=>[]}},emits:["updateActivePlan"],setup(e,{emit:a}){var F,T;const w=e;l((e=>({"2d2ec81f":M.value})));const M=t(""),O=t((null==(T=null==(F=w.planList)?void 0:F[0])?void 0:T.planCode)||void 0),P=t(),N=t([]),R=t([]),U=t(),D=n((()=>!!w.planList.length));s([()=>w.dataSource,()=>O.value],(()=>{var e,a;N.value=(null==(a=((null==(e=w.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===O.value)))?void 0:a.data)||[]}),{immediate:!0,deep:!0});const j=n((()=>{var e;return(null==(e=w.dataSource)?void 0:e.rateUri)||""})),W=n((()=>!!(U.value&&U.value.paymentFrequencyValue&&U.value.premiumUnit&&j))),[V,q]=i(!1),z=n((()=>{var e;return!(!N.value||!(null==(e=N.value)?void 0:e.length))&&(N.value.length>w.count&&(!!w.isShowClose||!V.value))})),B=()=>{q()},ae=n((()=>{var e;return N.value&&(null==(e=N.value)?void 0:e.length)?N.value.length<=w.count||V.value?N.value:N.value.slice(0,w.count):[]})),le=t(!1),te=e=>{const a=e||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,"A"===a.target.tagName&&a.target.href&&window.open(a.target.href)},ne=()=>{le.value=!0,b((()=>{var e,a;null==(a=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||a.addEventListener("click",te,!1)}))};u((()=>{var e,a;null==(a=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||a.removeEventListener("click",te,!1)}));const se=()=>{$({fileType:"pdf",fileUri:j.value})},ie=e=>{O.value=w.planList[e.name].planCode};return(l,t)=>{var n,s;const i=I,u=S,b=x,F=o("dompurify-html");return r(),c(p,null,[d("div",G,[d("div",{class:"header"},[Y,d("span",{onClick:ne},"查看详情")]),v(D)?(r(),c("div",Q,[(r(!0),c(p,null,m(e.planList,((e,l)=>(r(),c("div",{key:`${e.planCode}_${l}`,class:f("plan-list-item "+(e.planCode===O.value?"plan-list-item-active":"")),onClick:l=>{return t=e.planCode,O.value=t,P.value=w.planList.findIndex((e=>e.planCode===t)),void a("updateActivePlan",t);var t}},[d("span",null,C(e.planName),1)],10,X)))),128))])):y("",!0),(r(!0),c(p,null,m(v(ae),((e,a)=>(r(),_(i,{key:a,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),v(z)?(r(),c("div",{key:1,class:"show-more",onClick:B},[h(C(v(V)?"收起":"查看更多")+" ",1),L(g,{name:"arrow-down-dobule",class:f(["icon",{showMore:v(V)}])},null,8,["class"])])):y("",!0),v(W)?(r(),c("div",H,[d("span",null,C(`${(null==(n=U.value)?void 0:n.paymentFrequencyValue)||""}${(null==(s=U.value)?void 0:s.premiumUnit)||""}`),1),v(j)?(r(),c("span",{key:0,onClick:se},"查看保费")):y("",!0)])):y("",!0)]),L(k),L(b,{show:le.value,"onUpdate:show":t[1]||(t[1]=e=>le.value=e),title:"保障详情",class:"guarantee-popup"},{default:A((()=>[R.value&&R.value.length>0?(r(),c("div",J,[d("div",K,[(r(!0),c(p,null,m(R.value,((e,a)=>(r(),_(i,{key:a,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),L(k)])):y("",!0),v(D)?(r(),_(u,{key:1,active:P.value,"onUpdate:active":t[0]||(t[0]=e=>P.value=e),list:e.planList.map(((e,a)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:ie},null,8,["active","list"])):y("",!0),d("div",Z,[(r(!0),c(p,null,m(N.value,((e,a)=>(r(),c("div",{key:a,class:"guarantee-item"},[L(i,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),E(d("div",ee,null,512),[[F,e.tips]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-63812b16"]]);const le={class:"spec"},te={class:"rich-text"},ne={key:1,class:"spec"},se={class:"rich-text"},ie={key:1,class:"spec"},ue={class:"rich-text"},oe=a({props:{dataSource:{default:()=>({SPECIAL_FEATURE:[],CLAIM_CASE:{},CLAIM_FLOW:[],ISSUE_NOTICE:[],FAQ:[]})}},setup(e,{expose:a}){const l=e,s=w((()=>M((()=>import("./index-8dcf7554.js").then((function(e){return e.cI}))),["static/js/index-8dcf7554.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"])));w((()=>M((()=>import("./index-6fb2dbcc.js")),["static/js/index-6fb2dbcc.js","static/css/index-f22f2764.css","static/js/index-8dcf7554.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"])));const i=w((()=>M((()=>import("./index-8dcf7554.js").then((function(e){return e.cG}))),["static/js/index-8dcf7554.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"]))),u=w((()=>M((()=>import("./index-1c161ee1.js")),["static/js/index-1c161ee1.js","static/css/index-7b3feb06.css","static/js/index-8dcf7554.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"]))),f=w((()=>M((()=>import("./index-805f7e93.js")),["static/js/index-805f7e93.js","static/css/index-194b9c66.css","static/js/index-8dcf7554.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js","static/js/index-c00014f4.js"]))),{dataSource:C}=O(l),h=t(),k=t([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),b=n((()=>{var e,a;return null==(a=null==(e=C.value.SPECIAL_FEATURE)?void 0:e.spec)?void 0:a.length})),I=n((()=>{var e,a,l,t;const n=null==(e=C.value.CLAIM_FLOW)?void 0:e.processCaseType;return!!(n===z.WORD&&(null==(a=C.value.CLAIM_FLOW)?void 0:a.processContent)||n===z.IMAGE&&(null==(t=null==(l=C.value.CLAIM_FLOW)?void 0:l.processCasePicList)?void 0:t.length))})),S=n((()=>{var e,a,l,t,n;const s=null==(a=null==(e=C.value)?void 0:e.CLAIM_CASE)?void 0:a.claimCaseType;return!!(s===z.WORD&&(null==(l=C.value.CLAIM_CASE)?void 0:l.claimContent)||s===z.IMAGE&&(null==(n=null==(t=C.value.CLAIM_CASE)?void 0:t.claimCasePicList)?void 0:n.length))})),x=n((()=>{var e,a;return null==(a=null==(e=C.value)?void 0:e.ISSUE_NOTICE)?void 0:a.noticeContent})),F=n((()=>{var e,a;return null==(a=null==(e=C.value)?void 0:e.FAQ)?void 0:a.length})),T=n((()=>{let e=[...k.value];return b.value||(e=e.filter((e=>"tab1"!==e.slotName))),I.value||S.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>{var e;return null==(e=h.value)?void 0:e.handleClickTab}}),(e,a)=>{const l=U,t=g,n=o("dompurify-html");return r(),_(v(s),{ref_key:"scrollRef",ref:h,class:"tabs",list:v(T),sticky:"",scrollspy:""},P({tab3:A((()=>[R(e.$slots,"form")])),_:2},[v(b)?{name:"tab1",fn:A((()=>{var e;return[d("div",le,[(r(!0),c(p,null,m((null==(e=v(C).SPECIAL_FEATURE)?void 0:e.spec)||[],((e,a)=>(r(),_(N,{key:a},{fallback:A((()=>[L(t,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>[(r(),_(l,{key:a,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),L(v(i))])]}))}:void 0,v(I)||v(S)||v(x)||v(F)?{name:"tab2",fn:A((()=>{var e,a;return[v(I)?(r(),c(p,{key:0},[(null==(e=v(C).CLAIM_FLOW)?void 0:e.processCaseType)===v(z).WORD?(r(),_(v(u),{key:0,class:"tab-card",title:"理赔说明"},{default:A((()=>{var e;return[E(d("div",te,null,512),[[n,null==(e=v(C).CLAIM_FLOW)?void 0:e.processContent]])]})),_:1})):(r(),c("div",ne,[(r(),_(N,null,{fallback:A((()=>[L(t,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var e;return[(r(!0),c(p,null,m((null==(e=v(C).CLAIM_FLOW)?void 0:e.processCasePicList)||[],((e,a)=>(r(),_(l,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(v(i))],64)):y("",!0),v(S)?(r(),c(p,{key:1},[(null==(a=v(C).CLAIM_CASE)?void 0:a.claimCaseType)===v(z).WORD?(r(),_(v(u),{key:0,class:"tab-card",title:"理赔案例"},{default:A((()=>{var e;return[E(d("div",se,null,512),[[n,null==(e=v(C).CLAIM_CASE)?void 0:e.claimContent]])]})),_:1})):(r(),c("div",ie,[(r(),_(N,null,{fallback:A((()=>[L(t,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var e;return[(r(!0),c(p,null,m((null==(e=v(C).CLAIM_CASE)?void 0:e.claimCasePicList)||[],((e,a)=>(r(),_(l,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(v(i))],64)):y("",!0),v(x)?(r(),c(p,{key:2},[L(v(u),{class:"tab-card",title:"投保须知"},{default:A((()=>{var e;return[E(d("div",ue,null,512),[[n,null==(e=v(C).ISSUE_NOTICE)?void 0:e.noticeContent]])]})),_:1}),L(v(i))],64)):y("",!0),v(F)?(r(),c(p,{key:3},[L(v(u),{title:"常见问题"},{default:A((()=>{var e,a;return[L(v(f),{list:null==(a=null==(e=v(C).FAQ)?void 0:e[0])?void 0:a.data},null,8,["list"])]})),_:1}),L(v(i))],64)):y("",!0)]}))}:void 0]),1032,["list"])}}});const re={class:"trial-button-wrap"},ce={class:"footer-area"},de=d("span",null,"分享",-1),ve={class:"price"},pe={key:0},me=h("立即投保"),fe=a({props:{premium:{default:0},tenantProductDetail:{default:()=>({})},planCode:{default:void 0},loadingText:{default:""},paymentFrequency:{default:""},shareInfo:{default:()=>({})}},emits:["onClick"],setup(e,{emit:a}){const l=e,n=t(""),i=t(""),u=D();return s([()=>l.premium,()=>l.tenantProductDetail,()=>l.paymentFrequency,()=>l.planCode],(([e])=>{const{PREMIUM:a=[]}=l.tenantProductDetail||{};let t={};if(null==a?void 0:a.length){t=(a||[]).find((e=>e.planCode===l.planCode||!e.planCode))||{};const s=((null==t?void 0:t.data)||[]).find((e=>e.paymentFrequency===l.paymentFrequency)),{premium:u,minActualUnit:o}=s||{};e?(i.value=o,n.value=e&&`${e}`):(i.value=u,n.value="")}else e&&(i.value="",n.value=e&&`${e}`)}),{deep:!0,immediate:!0}),(l,t)=>{const s=g,o=W;return r(),c("div",re,[d("div",ce,[v(u)?(r(),_(o,j({key:0},e.shareInfo,{class:"share-btn"}),{default:A((()=>[L(s,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),de])),_:1},16)):y("",!0),d("div",ve,[e.loadingText?(r(),c("span",pe,C(e.loadingText),1)):(r(),c(p,{key:1},[d("span",null,C(n.value),1),d("span",null,C(i.value),1)],64))]),L(B,{shadow:!1,class:"right",onClick:t[0]||(t[0]=e=>a("onClick"))},{default:A((()=>[R(l.$slots,"default",{},(()=>[me]))])),_:3})])])}}});var Ce=(e,a)=>{const l=t([]),n=t(0),i=t([]);return s([()=>{var a;return null==(a=e.value)?void 0:a.planCode},()=>a.value],(([e,a])=>{let t=null;if(null==a?void 0:a.length){const l=(a||[]).find((a=>a.planCode===e||!a.planCode));l&&(t=null==l?void 0:l.productMaterialMap)}t?(l.value=Object.keys(t).map((e=>({attachmentName:e,attachmentList:t[e].map((e=>({...e,materialSource:q(`${null==e?void 0:e.materialSource}`,null==e?void 0:e.materialContent)})))}))),i.value=l.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.popUpFlag===V.YES))}))).filter((e=>e.attachmentList.length)),n.value=i.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.mustReadFlag===V.YES))}))).filter((e=>e.attachmentList.length)).length||0):l.value=[]}),{deep:!0,immediate:!0}),{fileList:l,popupFileList:i,mustReadFileCount:n}};export{ae as G,oe as _,fe as a,Ce as u};

import{G as t,d as e,b6 as a,b as n,c as o,E as l,h as r,f as s,k as d,i,L as u,e as c,w as p,U as v,V as m,g as f,W as y,b3 as I,bQ as b,u as C,a as k,r as g,a1 as N,m as h,B as L,aV as _,ae as D,cr as S,z as Y,ag as x,cK as P,j as T,bA as j,bH as A,D as E,T as G,Q as R,cM as M,cL as w}from"./index-5cf049f8.js";import{d as q}from"./order-6402d10f.js";import{d as U}from"./trial-7d29f320.js";import{e as W,g as B}from"./infoCollection-caed50b1.js";import{R as H,b as O}from"./trial-5bbdb011.js";import"./pdfh5-008ca364.js";const $={class:"com-field-info"},F={key:0,class:"label"},K={class:"content"};var Q=t(e({__name:"fieldInfo",props:{label:{type:String,default:""},content:{type:String,default:""}},setup(t){const e=a();return(a,u)=>(n(),o("div",$,[t.label?(n(),o("div",F,l(t.label),1)):r("",!0),s(e).label?d(a.$slots,"label",{key:1},void 0,!0):r("",!0),i("div",K,l(t.content),1),s(e).content?d(a.$slots,"content",{key:2},void 0,!0):r("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const V={class:"com-insured-part-wrapper"},X={class:"content-wrapper"},Z={class:"product-name"},z={class:"risk-item"};var J=t(e({__name:"InsuredPart",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup(t){const e=t,a=u((()=>{var t,a;const n={riderRiskList:[],amount:0},o=null==(t=e.productData)?void 0:t.riskList.find((t=>t.riskType===H.MAIN_RISK));return Object.assign(n,o),null==(a=e.productData)||a.riskList.forEach((t=>{n.riderRiskList.push(t.riskName||"")})),n}));return(e,r)=>{const d=y,u=I;return n(),o("div",V,[c(u,{title:"保障信息"},{default:p((()=>[i("div",X,[i("div",Z,l(t.productData.productName),1),i("div",z,[c(d,{title:"保障期间",content:s(a).coveragePeriodDesc},null,8,["content"]),c(d,{title:"交费期间",content:s(a).chargePeriodDesc},null,8,["content"]),c(d,{title:"交费方式",content:s(O)[s(a).paymentFrequency]},null,8,["content"]),(n(!0),o(v,null,m(s(a).riderRiskList,((t,e)=>(n(),f(d,{key:e,title:t,content:"投保"},null,8,["title"])))),128)),c(d,{title:"保障金额",content:(s(a).initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),c(d,{title:"首期保费",class:"price",content:(t.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])])),_:1})])}}}),[["__scopeId","data-v-51eb63ba"]]);const tt={key:0,class:"page-order-detail"},et={class:"card"},at={class:"header"},nt={class:"product-name"},ot={class:"company-name"},lt={class:"status"},rt={key:0,class:"footer-button"},st={key:1,class:"footer-button"},dt={key:2,class:"footer-button"};var it=t(e({__name:"index",setup(t){const e=b(),a=C(),d=k(),u=g(),{query:{orderNo:y,agentCode:I,tenantId:H,abbreviation:O,productCategory:$}}=a,F=()=>{E.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{u.value&&q(u.value.id,u.value.orderStatus).then((t=>{const{code:e,data:a}=t;"10000"===e&&G.success("删除成功")}))}))},K=g(!1),V=()=>{var t,e,a,n,o;if(u.value){if((()=>{var t,e,a;if(!u.value)return!1;const{agencyId:n,saleChannelId:o,orderTopStatus:l}=u.value,r=null==(a=null==(e=null==(t=u.value.insuredList)?void 0:t[0])?void 0:e.productList[0])?void 0:a.productCode;if(!(P.PENDING!==l&&P.PAYING!==l||r!==w.ZXYS&&r!==w.BWYL)){const t={[w.ZXYS]:"/internet/productDetail/package",[w.BWYL]:"/internet/productDetail"};return d.push({path:t[r],query:{productCode:r,saleChannelId:o,agentCode:I,tenantId:H,agencyCode:n,orderNo:y}}),!0}return!1})())return;const{id:l,extInfo:{templateId:r,pageCode:s,extraInfo:i},agencyId:c,insurerCode:p,orderStatus:v}=u.value,m={insurerCode:p,productCode:null==(a=null==(e=null==(t=u.value.insuredList)?void 0:t[0])?void 0:e.productList[0])?void 0:a.productCode,tenantId:u.value.tenantId,agencyCode:u.value.agencyId,agentCode:u.value.saleUserId,saleChannelId:null==i?void 0:i.saleChannelId,extraMap:{...null==(o=null==(n=u.value)?void 0:n.extInfo)?void 0:o.extraInfo,orderNo:u.value.orderNo}};K.value=!0,U(m).then((t=>{if(console.log("投保链接==",t.data),"10000"===t.code)if([W.LONG,W.NIANJIN].includes(B(`${r}`))){const e=t.data.split("?")[1],a=R.parse(e);d.push({path:M[v],query:{...a,extraInfo:a.extraInfo,orderNo:y,templateId:r}})}else window.location.href=t.data}))}};return N((()=>{h({orderNo:y,agentCode:I,tenantId:H}).then((t=>{const{code:e,data:a}=t;"10000"===e&&(u.value=a)}))})),(t,a)=>{const d=L,y=_,I=D("loading");return n(),f(y,{"theme-vars":s(e)},{default:p((()=>{var t,e,a,y,b,C,k,g,N,h,L,_;return[s(u)?(n(),o("div",tt,[i("div",et,[c(Q,null,{label:p((()=>{var t,e,a,n;return[i("div",at,[i("div",nt,l(null==(a=null==(e=null==(t=s(u))?void 0:t.insuredList[0])?void 0:e.productList[0])?void 0:a.productName),1),i("div",ot,l(((null==(n=s(u))?void 0:n.abbreviation)||"").substring(0,6)),1)])]})),content:p((()=>{var t;return[i("div",lt,l(s(u)?s(S)[null==(t=s(u))?void 0:t.orderStatus]:""),1)]})),_:1}),c(Q,{label:"投保单号",content:null==(t=s(u))?void 0:t.orderNo},null,8,["content"]),c(Q,{label:"创建时间",content:s(Y)(null==(e=s(u))?void 0:e.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),c(Q,{label:"投保人",content:null==(y=null==(a=s(u))?void 0:a.holder)?void 0:y.name},null,8,["content"]),(n(!0),o(v,null,m((null==(b=s(u))?void 0:b.insuredList)||[],((t,e)=>(n(),f(Q,{key:e,label:"被保人",content:t.name},null,8,["content"])))),128))]),c(J,{"product-data":null==(N=null==(g=null==(k=null==(C=s(u))?void 0:C.insuredList)?void 0:k[0])?void 0:g.productList)?void 0:N[0],"total-premium":s(u).orderAmount,class:"insure-info"},null,8,["product-data","total-premium"]),x((n(),o("div",null,[(null==(h=s(u))?void 0:h.orderTopStatus)===s(P).PENDING?(n(),o("div",rt,[c(d,{type:"primary",onClick:j(F,["stop"])},{default:p((()=>[T("删除")])),_:1},8,["onClick"]),s(A).UNDERWRITING_FAILED!==s(u).orderStatus?(n(),f(d,{key:0,type:"primary",onClick:j(V,["stop"])},{default:p((()=>[T("去处理")])),_:1},8,["onClick"])):r("",!0)])):r("",!0),(null==(L=s(u))?void 0:L.orderTopStatus)===s(P).PAYING?(n(),o("div",st,[c(d,{type:"primary",onClick:j(F,["stop"])},{default:p((()=>[T("删除")])),_:1},8,["onClick"]),c(d,{type:"primary",onClick:j(V,["stop"])},{default:p((()=>[T("去支付")])),_:1},8,["onClick"])])):r("",!0),(null==(_=s(u))?void 0:_.orderTopStatus)===s(P).TIMEOUT?(n(),o("div",dt,[c(d,{type:"primary",onClick:j(F,["stop"])},{default:p((()=>[T("删除")])),_:1},8,["onClick"])])):r("",!0)])),[[I,s(K)]])])):r("",!0)]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-3969a483"]]);export{it as default};

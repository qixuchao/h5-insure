import{_ as e,d as a,aV as t,aW as o,i as s,h as n,y as i,r as l,j as r,cc as c,bc as d,l as u,o as m,c as p,b as f,u as y,p as h,q as I,f as b,a as v,w as j,F as w,s as g,b0 as V,a8 as k,d4 as x,b1 as q,g as _,v as C,b4 as L,bk as P,bj as O,bb as N,aY as T,bO as S,a$ as E,bR as R,ar as U,b2 as D,d5 as Q,bo as F,bp as A,c8 as $}from"./index-fb7979ef.js";import{P as B,a as M}from"./PolicyInfo-6bdedc07.js";import{g as z,m as J}from"./trial-aa03c77e.js";import{n as W}from"./nextStep-1354f9fd.js";import{b as Y,l as G}from"./product-98e323bf.js";import{u as X}from"./useOrder-71d813b8.js";import{P as H}from"./index-7d6c76ea.js";import{P as K}from"./index-93b94a4d.js";import{_ as Z}from"./InsureInfo-cfba8865.js";import{p as ee,d as ae}from"./utils-c2e43253.js";import{I as te}from"./insuranceNotificationInformation-5c888daa.js";import{Q as oe}from"./notice-e349e65e.js";import{P as se,g as ne}from"./utils-66ecd420.js";import{Q as ie}from"./questionnaire-42dcb602.js";import le from"./index-c16b7bdd.js";import"./cloneDeep-84da83bc.js";import"./core-3d578396.js";import"./utils-ccc5b3ef.js";import"./createProposal-190cabcf.js";import"./trial-41603372.js";import"./infoCollection-03da668a.js";import"./util-0a5322f4.js";import"./index-2bc1b8ae.js";import"./index-bd18a35d.js";const re={class:"long-info-preview"},ce={class:"insurance-notification-information card"},de={class:"footer-btn"},ue=(e=>(F("data-v-34c5a6dc"),e=e(),A(),e))((()=>v("span",null,"分享",-1)));var me=e(a({__name:"infoPreview",setup(e){const a=t((()=>o((()=>import("./index-7402d183.js")),["static/js/index-7402d183.js","static/css/index-fa4edf2a.css","static/js/index-fb7979ef.js","static/css/index-59abbbb4.css","static/js/theme-94cf7d00.js","static/js/index-93b94a4d.js","static/css/index-bbfdd7ec.css","static/js/utils-66ecd420.js","static/js/infoCollection-03da668a.js","static/js/trial-41603372.js"]))),F=s(),A=n(),me=X(),pe={holder:i.holderSign,insured:i.insuredSign,agent:i.agentSign},{productCode:fe="",tenantId:ye,agentCode:he="",agencyCode:Ie,saleChannelId:be,isShare:ve,orderNo:je,extraInfo:we,insurerCode:ge,objectType:Ve="1",preview:ke}=F.query;let xe={};try{xe=JSON.parse(decodeURIComponent(we))}catch(We){}const qe=l({isView:!1,personalInfo:{},policyInfo:{schema:[],config:[],formData:{}},payInfo:{schema:[],config:[],formData:[]},customerQuestions:[]}),_e=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,Ce=r({imgUrl:"",desc:"",title:"",link:_e}),Le=r(),Pe=r(),Oe=r(!1),Ne=r(0),Te=r(!1);r(!1);const Se=r(!1),Ee=()=>{Oe.value=!1},[Re,Ue]=c(!1),De=({file:e,type:a},t)=>{L.set(se,{fileUri:e,fileType:a}),A.push({path:"/template/filePreview",query:{fileId:e.id}}),t()},Qe=r(),Fe=()=>{W(me.value,((e,a)=>{a===P.JUMP_PAGE&&Qe.value.handleShare()}))},Ae=async()=>{ke?O(N.INFO_PREVIEW,F.query):A.push({path:pe[Ve],query:F.query})},$e=r(),Be=r(),Me=r([]),ze=async()=>{let e={};const{code:a,data:t}=await z({orderNo:je,tenantId:ye});"10000"===a&&(Object.assign(me.value,t),e=ee(t.insuredList[0].productList),$e.value=t,Te.value=!0),(async e=>{let a=[];const{code:t,data:o}=await $({orderNo:je,tenantId:ye});"10000"===t&&(a=o.productQuestionnaireVOList);const{code:s,data:n}=await G(e);if("10000"===s){const{productQuestionnaireVOList:e}=n||{},t=e.filter((e=>e.businessType!==oe.VISIT));qe.customerQuestions=t.map((e=>{const{questionnaireDetailResponseVO:t,questionnaireId:o,questionnaireName:s}=e||{},{questions:n,basicInfo:i}=t||{},{objectType:l,questionnaireType:r}=i||{};if(r===ie.TEXT){const{content:e,textType:a}=(null==n?void 0:n[0])||{};return{content:e,contentType:ne(`${a}`,e),questionnaireId:o,questionnaireName:s}}const c=(a||[]).find((e=>e.questionnaireId===o));return{...t,contentType:"question",...null==c?void 0:c.questionnaireDetailResponseVO,questionnaireId:o,questionnaireName:s}}))}})({productCodeList:e.productList.map((e=>e.productCode))}),Y(e).then((({code:e,data:a})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:t}=ae(a);qe.fileList=e.map((e=>({tabName:e.attachmentName,isExpand:!0,files:e.attachmentList.map((e=>({name:e.materialName,file:e.materialContent,type:e.materialSource,mustRead:e.mustReadFlag===T.YES})))}))),Me.value=e.concat(t)}})),J(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:t}=e;Be.value=t;const{payInfo:o,other:s}=S(t);qe.payInfo={...qe.payInfo,...o},qe.policyInfo={...qe.policyInfo,...s}}}))};d((()=>{ze()}));const Je=r();return u((()=>{setTimeout((async()=>{Je.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{var o,s,n,i;const l=E,r=R,c=U,d=D,u=Q;return m(),p("div",re,[f(l),f(Z,{"product-data":null==(s=null==(o=y(me).insuredList)?void 0:o[0])?void 0:s.productList},null,8,["product-data"]),(null==(n=Object.keys(y(Be)||{}))?void 0:n.length)?(m(),h(H,{key:0,ref_key:"personalInfoRef",ref:Pe,modelValue:y($e),"onUpdate:modelValue":t[0]||(t[0]=e=>I($e)?$e.value=e:null),"product-factor":y(Be),"is-view":""},null,8,["modelValue","product-factor"])):b("",!0),y(qe).payInfo.schema.length?(m(),h(y(B),{key:1,ref_key:"payInfoRef",ref:Le,modelValue:y(me).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>y(me).tenantOrderPayInfoList=e),schema:y(qe).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):b("",!0),y(qe).policyInfo.schema.length?(m(),h(y(M),{key:2,modelValue:y(me).extInfo,"onUpdate:modelValue":t[2]||(t[2]=e=>y(me).extInfo=e),schema:y(qe).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):b("",!0),v("div",ce,[f(te,{title:"投保告知信息",data:y(qe).customerQuestions||[]},null,8,["data"])]),f(c,{title:"产品资料","show-line":!1,"show-icon":!1},{default:j((()=>[(m(!0),p(w,null,g(y(Me),((e,a)=>(m(),h(r,{key:a,"is-link":"",title:e.attachmentName,onClick:e=>(e=>{Ne.value=e,Oe.value=!0})(a)},null,8,["title","onClick"])))),128))])),_:1}),(null==(i=y(Me))?void 0:i.length)?(m(),h(le,{key:3,modelValue:y(Se),"onUpdate:modelValue":t[3]||(t[3]=e=>I(Se)?Se.value=e:null),"attachment-list":y(Me),"has-bg-color":!1,"is-show-radio":"","pre-text":"本人同意利安人寿采集本人人脸信息，用于向国家法规许可的验证机构进行本人身份验证。本人已仔细阅读并知晓","suffix-text":"，并同意授权。",onPreviewFile:t[4]||(t[4]=()=>Oe.value=!0)},null,8,["modelValue","attachment-list"])):b("",!0),v("div",de,[!y(ve)&&y(Ce).isShare&&y(V)()?(m(),h(q,k({key:0},y(Ce),{class:"share-btn",onClick:x(Fe,["stop"])}),{default:j((()=>[f(d,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ue])),_:1},16,["onClick"])):b("",!0),f(K,{shadow:!1,onClick:Ae},{default:j((()=>[_(e.$slots,"default",{},(()=>[C("下一步")]),!0)])),_:3})]),y(Oe)?(m(),h(y(a),{key:4,show:y(Oe),"onUpdate:show":t[5]||(t[5]=e=>I(Oe)?Oe.value=e:null),"content-list":[y(Me)[y(Ne)]],"is-only-view":"","active-index":0,text:"我已阅读","force-read-cound":0,onOnCloseFilePreviewByMask:Ee},null,8,["show","content-list"])):b("",!0),y(Re)?(m(),h(u,{key:5,modelValue:y(Re),"onUpdate:modelValue":t[6]||(t[6]=e=>I(Re)?Re.value=e:null),closeable:!1,"data-source":y(qe).fileList,onClickBtn:De,onSubmit:Ae},null,8,["modelValue","data-source"])):b("",!0)])}}}),[["__scopeId","data-v-34c5a6dc"]]);export{me as default};

!function(){var e=document.createElement("style");e.innerHTML=".net-sale-wrap[data-v-091dd9db]{padding-bottom:1.33333rem;background:#f1f5fc}.net-sale-wrap .footer-button[data-v-091dd9db]{justify-content:space-between}.net-sale-wrap .product-name[data-v-091dd9db]{font-size:.48rem;font-weight:500;line-height:1.06667rem}.net-sale-wrap .part[data-v-091dd9db]{background-color:#fff;padding:0 var(--zaui-page-border, .4rem)}.net-sale-wrap .part .common-cell-wrapper[data-v-091dd9db]{height:1.38667rem;align-items:center;width:100%;display:inline-flex}.net-sale-wrap .part .common-cell-wrapper[data-v-091dd9db] .cell-container{align-items:flex-start;justify-content:center;width:100%;color:var(--van-field-label-color);font-size:.4rem}.net-sale-wrap .radio-group[data-v-091dd9db]{width:100%}.net-sale-wrap .radio-group .radio-btn[data-v-091dd9db]{justify-content:space-between}.net-sale-wrap .price[data-v-091dd9db]{color:#393d46;font-size:.45333rem;font-weight:400}.net-sale-wrap .price span[data-v-091dd9db]{color:var(--van-primary-color);font-weight:700}.net-sale-wrap .right[data-v-091dd9db]{width:3.73333rem;background:var(--van-primary-color);border-color:var(--van-primary-color)}.net-sale-wrap .footer[data-v-091dd9db]{margin-top:.66667rem;padding:0 var(--zaui-page-border, .4rem)}\n",document.head.appendChild(e),System.register(["./index-legacy-73d099b8.js","./debounce-legacy-b12c8272.js","./utils-legacy-ba29e27f.js","./product-legacy-3bd2ec88.js","./trial-legacy-7513712a.js","./nextStep-legacy-cc07bb25.js","./theme-legacy-691dfb9a.js","./index-legacy-e2f3d52c.js","./pdfh5-legacy-a219347c.js","./pdfdist-legacy-62a53341.js","./infoCollection-legacy-9f88ad06.js","./useStorage-legacy-7e14cc97.js","./trial-legacy-1357f4b2.js","./relativeTime-legacy-33cdce41.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-2dd0565a.js","./core-legacy-db10e2b1.js","./index-legacy-33f78fa8.js"],(function(e){"use strict";var t,a,n,r,o,d,l,i,u,c,s,p,v,f,m,g,y,O,I,b,L,w,h,C,V,j,P,D,R,T,k,x,E,Y;return{setters:[function(e){t=e._,a=e.d,n=e.u,r=e.a,o=e.r,d=e.y,l=e.a8,i=e.z,u=e.b,c=e.c,s=e.e,p=e.w,v=e.f,f=e.i,m=e.t,g=e.l,y=e.j,O=e.a0,I=e.a5,b=e.L,L=e.M,w=e.T,h=e.a3},function(e){C=e.d},function(e){V=e.r,j=e.t},function(e){P=e.p},function(e){D=e.i,R=e.b,T=e.p},function(e){k=e._,x=e.n},function(e){E=e.u},function(e){Y=e.P},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const B=e=>(b("data-v-091dd9db"),e=e(),L(),e),N={class:"net-sale-wrap"},H={class:"part product-name"},_=B((()=>f("span",null,null,-1))),z=B((()=>f("span",null,null,-1))),F={class:"part"},M={class:"footer"};e("default",t(a({setup(e){const t=E();n();const a=r(),{productCode:b="HTEJBX",tenantId:L="9991000001",agentCode:B="",agencyCode:$,saleChannelId:S,extraInfo:A,preview:U}=a.query,q=o(),J=o(),W=o(),G=o(),X=o(),K=o({}),Q=o({}),Z=o({}),ee=o();let te={};try{te=JSON.parse(decodeURIComponent(A))}catch(ce){}const ae=o({agencyId:$,agentCode:B,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"EVENT_NETSALE_underWrite",pageCode:"infoCollection",templateId:te?.templateId,iseeBizNo:ee,extraInfo:te},orderCategory:1,saleChannelId:S,tenantId:L,venderCode:"",tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"xinao",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",tenantId:L}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),ne=d((()=>(W.value?.productRelationPlanVOList?.length||0)>1)),re=o();l([()=>X.value,()=>G.value,()=>J.value],(()=>{const{premium:e}=X.value||{};if(e)re.value=e&&`￥${e}元`;else{const{tenantProductInsureVO:e}=G.value||{};let t={};t=e?.planList?.length?(e?.planList||[]).find((e=>e.planCode===J.value)):e?.planInsureVO;const{paymentFrequencyValue:a,premiumUnit:n}=t?.productPremiumVOList?.[0]||{};re.value=a&&`￥${a}${n||"元"}`}}),{deep:!0,immediate:!0});const oe=d((()=>{let e=[];return e=W.value?.productRelationPlanVOList?.length?W.value?.productRelationPlanVOList.find((e=>e.planCode===J.value))?.productRiskVoList||[]:W.value?.productRiskVoList||[],e})),de=d((()=>1===((oe.value||[])?.[0]?.riskDetailVOList?.[0]?.insuranceStartType||1)?`${O(new Date).format("YYYY-MM-DD")} 00:00:00`:`${O(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`)),le=d((()=>{const e=oe.value||[],{insuranceEndType:t,riskInsureLimitVO:a}=e?.[0]?.riskDetailVOList?.[0]||{},{insurancePeriodValueList:n}=a||{},[r,o]=(n?.[0]||"").split("_");return 1===t?`${O(new Date).add(o||0,r).format("YYYY-MM-DD")} 23:59:59`:t?`${O(new Date).add(o,r).format("YYYY-MM-DD")} 00:00:00`:""})),ie=async()=>{ae.value.venderCode=W.value?.productBasicInfoVO.insurerCode,ae.value.orderAmount=X.value.premium,ae.value.orderRealAmount=X.value.premium,ae.value.commencementTime=de.value,ae.value.expiryDate=le.value,ae.value.extInfo.iseeBizNo=ee.value,ae.value.tenantOrderInsuredList[0].planCode=J.value,x(((e={},t={},a={})=>{const n={},r=(e=[])=>{(e||[]).forEach((e=>{n[e.riskCode]=e,e.riskPremiumDetailVOList?.length&&r(e.riskPremiumDetailVOList)}))};r(t.riskPremiumDetailVOList);const o={...a},d={tenantId:L,riskList:Q.value?.[0].riskVOList||[],riskPremium:n,productId:e?.productBasicInfoVO.id};return o.tenantOrderHolder.certType=o.tenantOrderHolder.certType||h.CERT,o.tenantOrderInsuredList[0].certType=o.tenantOrderInsuredList[0].certType||h.CERT,o.tenantOrderInsuredList[0].tenantOrderProductList=[{premium:X.value.premium,productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,tenantOrderRiskList:j(d)}],o})(W.value,X.value,ae.value),((e,t)=>{"jumpToPage"===t&&w("提交成功")}))},ue=async()=>{q.value?.validateForm().then((()=>{I.confirm({title:"分享",message:`即将向客户【${ae.value.tenantOrderHolder.name}】发送投保确认信息,请确认是否继续？`}).then((()=>{U||ie()}))}))};l([()=>ae.value.tenantOrderHolder.gender,()=>ae.value.tenantOrderHolder.name,()=>ae.value.tenantOrderHolder.birthday,()=>ae.value.tenantOrderInsuredList?.[0].name,()=>ae.value.tenantOrderInsuredList?.[0].gender,()=>ae.value.tenantOrderInsuredList?.[0].birthday,()=>J.value],C((([e,t,a,n,r,o])=>{t&&n&&r&&o&&(U||(async(e,t,a)=>{const n={holder:{personVO:{certType:1,...e.tenantOrderHolder}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",personVO:{...e,certType:1},productPlanVOList:[{insurerCode:t.productBasicInfoVO.insurerCode,planCode:J.value||0,riskVOList:V(a)}]}))),productCode:t.productBasicInfoVO.productCode,tenantId:L},{code:r}=await R(n);if("10000"===r){const{code:e,data:t}=await T(n);"10000"===e?(X.value=t,Q.value=n.insuredVOList[0]?.productPlanVOList):X.value=null}})(ae.value,W.value,oe.value))}),500));return l((()=>J.value),(()=>{K.value&&(Z.value=K.value[J.value])})),i((()=>{P({productCode:b,withInsureInfo:!0,tenantId:L}).then((({code:e,data:t})=>{"10000"===e&&(G.value=t,document.title=t.tenantProductInsureVO?.productNam||"")})),D({productCode:b}).then((({code:e,data:t})=>{"10000"===e&&(W.value=t,K.value=t.planFactor,t.productRelationPlanVOList?.length&&(J.value=t.productRelationPlanVOList[0].planCode),t.productFactor?Z.value=t.productFactor:t.planFactor&&(Z.value=t.planFactor[J.value]))})),setTimeout((async()=>{ee.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const n=u("ProRadioButton"),r=u("ProCard"),o=u("ProCell"),d=u("ProPageWrap"),l=u("van-config-provider");return c(),s(l,{"theme-vars":g(t)},{default:p((()=>[v(d,null,{default:p((()=>[f("div",N,[f("div",H,m(W.value?.productBasicInfoVO?.productFullName),1),g(ne)?(c(),s(r,{key:0,"show-line":!1,title:"保障年期"},{default:p((()=>[v(n,{modelValue:J.value,"onUpdate:modelValue":a[0]||(a[0]=e=>J.value=e),class:"radio-group",prop:{label:"planName",value:"planCode"},options:W.value?.productRelationPlanVOList},null,8,["modelValue","options"])])),_:1})):y("",!0),v(k,{ref_key:"formRef",ref:q,"title-collection":{HOLDER:"投保人",INSURER:"被保人",BENEFICIARY:"收益人"},"need-desensitize":"","form-info":ae.value,"send-sms-code":()=>{},"input-align":"left","factor-object":Z.value},{holderName:p((()=>[_])),insurerName:p((()=>[z])),_:1},8,["form-info","send-sms-code","factor-object"]),f("div",F,[v(o,{title:"保费",content:re.value},null,8,["content"]),v(o,{title:"保障期间",content:`${g(de).split(" ")[0]}~${g(le).split(" ")[0]}`},null,8,["content"])]),f("div",M,[v(Y,{shadow:!1,text:"分享用户确认投保",onClick:ue})])])])),_:1})])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-091dd9db"]]))}}}))}();

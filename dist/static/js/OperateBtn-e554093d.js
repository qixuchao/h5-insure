import{d as e,h as a,i as o,k as t,ag as r,o as s,c as n,u as d,m as l,w as i,a8 as c,cC as p,f as u,_ as m,bU as h,aI as y,cn as f,co as C,cp as I}from"./index-44a84149.js";import{P as g,M as k}from"./constants-4b08cf92.js";const N={class:"operate-wrap"},S=e({name:"operateBtn"});var $=m(e({...S,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:m}){const S=e,$=a(),v=o(),{tenantId:x,nextPageCode:T,isShare:_}=v.query,P=t((()=>{const{orderTopStatus:e}=S.detail;return"-1"===e&&g.orderList===v.path})),q=t((()=>{const{policyNo:e,applicationNo:a,orderStatus:o}=S.detail;return!e&&a&&"cancel"!==o})),w=t((()=>{const{orderStatus:e}=S.detail;return"offlinePayment"===e})),z=()=>{const{orderStatus:e,orderNo:a,insurerCode:o}=S.detail;let t=g.sign;"collectInfo"===e&&(t=g.infoCollection),h({messageType:k.AGENT,orderNo:a,tenantId:x}).then((({code:e})=>{"10000"===e&&$.push({path:t,query:{...v.query,tenantId:x,orderNo:a,insurerCode:o}})}))},D=()=>{S.detail,_?y.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{m("handleCancel")})):y.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:a,holderGender:o,orderId:t,orderNo:r}=S.detail||{},s=a,n=`${f[o]}士`;C({shareType:0,title:`${I.cancel.title}`,desc:I.cancel.desc.replace("{name}",`${s}${n},`),url:`${window.location.href}&objectType=${e}&isShare=1&orderNo=${r}&orderId=${t}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/lian_logo.png?OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Expires=1697288114&Signature=S87PMeDRxltLovmmHVTeiHoew1c%3D"})})("holder")}))},b=()=>{const{orderNo:e,orderId:a}=S.detail;$.push({path:g.updateBankInfo,query:{tenantId:x,orderNo:e,orderId:a,nextPageCode:"orderDetail"}})};return(e,a)=>{const o=r;return s(),n("div",N,[d(P)?(s(),l(o,{key:0,type:"primary",size:"small",onClick:p(z,["stop"])},{default:i((()=>[c("去处理")])),_:1},8,["onClick"])):u("",!0),d(q)?(s(),l(o,{key:1,type:"primary",plain:"",size:"small",onClick:p(D,["stop"])},{default:i((()=>[c("撤单")])),_:1},8,["onClick"])):u("",!0),d(w)?(s(),l(o,{key:2,size:"small",onClick:p(b,["stop"])},{default:i((()=>[c("银行卡修改")])),_:1},8,["onClick"])):u("",!0)])}}}),[["__scopeId","data-v-05a2d22a"]]);export{$ as O};

import{_ as e,d as a,aV as t,aW as l,i as o,h as s,j as i,k as r,l as d,m as n,o as c,p as u,w as m,a as p,e as f,u as v,cF as b,b as y,bg as h,bh as g,cy as j,cz as N,q as w,f as C,v as _,bi as T,bL as x,cA as I,cB as V,b3 as k,bo as P,bp as U,cL as q,y as z,cM as L}from"./index-2b82996c.js";import{g as S}from"./trial-a4e6cf4a.js";import{c as A}from"./format-31cde443.js";import{u as B}from"./useOrder-5a74a33f.js";import{p as E,f as $}from"./policy-f4d867af.js";import O from"./index-148fdbd9.js";import"./utils-24bb62b7.js";import"./createProposal-552c1d00.js";import"./trial-ec902f9e.js";import"./PolicyInfo-8abb0bc6.js";import"./cloneDeep-d8da3ad1.js";const F=e=>(P("data-v-f3d5d016"),e=e(),U(),e),M={class:"page-phone-verify"},D={class:"title"},R=F((()=>p("div",{class:"title face-title"},"人脸识别",-1))),W={class:"face-verify-img"},G=["src"],H=F((()=>p("div",{class:"face-verify-tip"},[p("div",{class:"title"},"操作时请您配合"),p("ol",null,[p("li",null,"请调亮手机屏幕亮度，确保光线充足"),p("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),p("li",null,"请确保真实本人操作")])],-1))),J={class:"attachment"},K={class:"footer-button"};var Q=e(a({__name:"phoneVerify",setup(e){const a=t((()=>l((()=>import("./index-7a0faaab.js")),["static/js/index-7a0faaab.js","static/css/index-fa4edf2a.css","static/js/index-2b82996c.js","static/css/index-355d9a2d.css","static/js/theme-94cf7d00.js","static/js/index-5a1150c1.js","static/css/index-bbfdd7ec.css","static/js/utils-13e6e47d.js","static/js/infoCollection-4adca7b8.js","static/js/trial-ec902f9e.js"]))),P=B(),U=o(),F=s(),{agentCode:Q,tenantId:X,nextPageCode:Y,biz_id:Z,orderNo:ee,objectType:ae,orderCode:te}=U.query,le=i({mobile:"",verifyCode:""}),oe=i(),se=i(),ie=i(),re=i([{attachmentName:"隐私政策",attachmentList:[{materialName:"隐私政策",materialContent:E,materialSource:"pdf"}]}]),de=i(!1),ne=r((()=>Array.isArray(ae)?`${null==ae?void 0:ae[0]}`.toLocaleUpperCase():`${ae}`.toLocaleUpperCase())),ce=()=>{S({orderNo:te||ee,tenantId:X}).then((({code:e,data:a})=>{if("10000"===e){Object.assign(P.value,a);const{holder:e,insuredList:t}=a;if("holder"===ae){const{name:a,certNo:t,certType:l,id:o,mobile:s}=e;le.value.mobile=s,se.value={userName:a,certiNo:t,certType:l,objectId:o}}else{const{name:e,certNo:a,certType:l,id:o,mobile:s}=(null==t?void 0:t[0])||{};le.value.mobile=s,se.value={userName:e,certiNo:a,certType:l,objectId:o}}Z&&(()=>{const{objectId:e,certType:a}=se.value,t={bizId:Z,certType:a,objectId:e,objectType:ne.value,orderNo:ee,tenantId:X};q(t).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status&&(delete U.query.biz_id,delete U.query.nextPageCode,F.push({path:z[`${Y}`],query:{...U.query,isShare:1}}))}))})()}}))},ue=()=>{var e,a;null==(a=null==(e=oe.value)?void 0:e.validate)||a.call(e).then((()=>{ie.value?(()=>{const{userName:e,certiNo:a,certType:t}=se.value,l={tenantId:X,faceAuthMode:"TENCENT",callbackUrl:window.location.href,bizNo:ee,userName:e,certiNo:a,certType:t};L(l).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})():T.alert({message:"请先同意隐私政策",confirmButtonText:"我知道了"})}))};d((()=>{ce()}));const me=i();return d((()=>{setTimeout((async()=>{me.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const l=x,o=I,s=V,i=k,r=n("ProPageWrap");return c(),u(r,null,{default:m((()=>{var e;return[p("div",M,[p("div",D,f(`${v(b)[v(ne)]}手机号验证 ${v(A)(v(le).mobile||"")}`),1),y(s,{ref_key:"formRef",ref:oe,"validate-method":"toast",model:v(le)},{default:m((()=>[h(y(l,{modelValue:v(le).mobile,"onUpdate:modelValue":t[0]||(t[0]=e=>v(le).mobile=e),label:"被保险人手机号",name:"mobile",maxlength:"11",required:""},null,8,["modelValue"]),[[g,!1]]),y(o,{modelValue:v(le).verifyCode,"onUpdate:modelValue":t[1]||(t[1]=e=>v(le).verifyCode=e),"related-name":"mobile",label:" ",maxlength:"6","input-align":"left",placeholder:"请输入验证码",name:"verifyCode",rules:[{required:!0,message:"请输入验证码"}],"send-s-m-s-code":v(j),"check-s-m-s-code":v(N)},null,8,["modelValue","send-s-m-s-code","check-s-m-s-code"])])),_:1},8,["model"]),R,p("div",W,[p("img",{src:v($),alt:""},null,8,G)]),H,p("div",J,[(null==(e=v(re))?void 0:e.length)?(c(),u(O,{key:0,modelValue:v(ie),"onUpdate:modelValue":t[2]||(t[2]=e=>w(ie)?ie.value=e:null),"attachment-list":v(re),"has-bg-color":!1,"is-show-radio":"","pre-text":"本人同意利安人寿采集本人人脸信息，用于向国家法规许可的验证机构进行本人身份验证。本人已仔细阅读并知晓","suffix-text":"，并同意授权。",onPreviewFile:t[3]||(t[3]=()=>de.value=!0)},null,8,["modelValue","attachment-list"])):C("",!0)]),p("div",K,[y(i,{type:"primary",class:"submit-btn",onClick:ue},{default:m((()=>[_("同意拍摄")])),_:1})]),v(de)?(c(),u(v(a),{key:0,show:v(de),"onUpdate:show":t[4]||(t[4]=e=>w(de)?de.value=e:null),"content-list":v(re),"is-only-view":"","active-index":0,text:"我已阅读","force-read-cound":0,onSubmit:t[5]||(t[5]=()=>de.value=!1),onOnCloseFilePreviewByMask:t[6]||(t[6]=()=>de.value=!1)},null,8,["show","content-list"])):C("",!0)])]})),_:1})}}}),[["__scopeId","data-v-f3d5d016"]]);export{Q as default};

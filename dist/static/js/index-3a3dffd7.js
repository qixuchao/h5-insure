import{cb as e,cc as t,cd as a,a9 as l,D as s,ah as o,bD as i,_ as r,d,bj as n,J as u,r as m,ba as c,E as f,an as p,ce as v,c as y,e as h,w as V,g,h as b,F as _,i as N,cf as C,b1 as $,bt as S,bk as w,k as D,T as A,aW as O,cg as k,b8 as P,G as M,j as x,t as E,y as T,R as F,n as R,aG as j,s as Y,ax as I,f as B,S as H,ch as L,a7 as Z,a8 as z,ad as U,ci as q,cj as W,b9 as G,bW as X,B as K,L as J,P as Q}from"./index-4edd55c0.js";import{R as ee,M as te,C as ae,G as le,V as se,a as oe,l as ie,I as re}from"./ProAddress.vue_vue_type_style_index_0_scoped_true_lang-9cb21fc0.js";import{i as de,b as ne}from"./isObjectLike-f858f31d.js";import{n as ue,b as me}from"./_nodeUtil-ef4cea77.js";var ce=Object.freeze(Object.defineProperty({__proto__:null,get ProRenderForm(){return we},get ProFieldV2(){return Ae},get ProRadioV2(){return xe},get ProPickerV2(){return Ye},get ProCalendarV2(){return He},get ProCascaderV2(){return Le},get ProDatePickerV2(){return Ze},get ProSMSCode(){return ze},get ProAddress(){return Ue},get ProRenderFormWithCard(){return qe}},Symbol.toStringTag,{value:"Module"}));const fe=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/;function pe(e){if(!fe.test(e))return!1;if(18!==e.length)return!0;const t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];let a=0;for(let o=0;o<17;o++)a+=Number(e.substring(o,o+1))*t[o];const l=a%11,s=e.substring(17);return 2===l?"X"===s||"x"===s:s===String([1,0,10,9,8,7,6,5,4,3,2][l])}const ve={isName:e=>/^[\u4e00-\u9fa5a-z].{0,23}[\u4e00-\u9fa5a-z]/i.test(e),isExternal:e=>/^(https?:|mailto:|tel:)/.test(e),isEmail:e=>/^[A-Za-z0-9]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(e),isZipCode:e=>/^[0-9]{6,6}$/.test(e),isTel:e=>/0\d{2,3}-\d{7,8}/.test(e),isPhone:e=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(e),isZhCN:e=>/^[\u4e00-\u9fa5]+$/.test(e),isNotZhCN:e=>/^[^\u4e00-\u9fa5]+$/.test(e),isCommonChar:e=>/^[\w_]{6,20}$/.test(e),isNormalChar:e=>/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(e),isAlphabetNumber:e=>/^[a-z0-9]+$/i.test(e),isAlphabetNumberOrSpecial:e=>/^[a-z0-9`~!@#$%^&*()_\-+=<>?:"{}|,./;'\\[\]·~！@#￥¥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]+$/i.test(e),isIdCardNo:e=>pe(e),isHouseHold:e=>pe(e),isBirthType:e=>/^[a-zA-Z]\d{9}$/.test(e),isPassword:e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,20}$/.test(e),isPassportType:e=>e.length>=5&&/^[^\u4e00-\u9fa5]+$/.test(e),isMilitaryCard:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isSolider:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isHongkongMacaoTravel:e=>/^[C]\d{8}$|^[C][a-hA-Hj-nJ-Np-zP-Z][0-9]{7}$/.test(e),isTaiwanTravel:e=>/^[L]\d{8}$/.test(e),isForeignPermanent:e=>/^[A-Z]{3}[0-9]{12}$/.test(e),isHKMacaoResidencePermit:e=>/^8[12]0000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isTaiwanResidencePermit:e=>/^830000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isUSCC:e=>/^[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}$/.test(e),isUSCCPolicy:e=>/^[A-Z0-9]{18}$/.test(e),isOCC:e=>/^[A-Z0-9]{8}-[A-Z0-9]{1}$/.test(e),isBusinessLicense:e=>/(^\d{15}$)|(^[A-Z0-9]{18}$)/.test(e),isBandcard:e=>/^\d{12,20}$/g.test(e),isOtherCert:e=>/^.{1,18}$/.test(e)},ye={[ee.NAME]:[ve.isName],[ee.EXTERNAL]:[ve.isExternal],[ee.EMAIL]:[ve.isEmail],[ee.ZIP_CODE]:[ve.isZipCode],[ee.TEL]:[ve.isTel],[ee.MOBILE]:[ve.isPhone],[ee.ZH_CN]:[ve.isZhCN],[ee.NOT_ZH_CN]:[ve.isNotZhCN],[ee.NORMAL_CHAR]:[ve.isNormalChar],[ee.ALPHABET_NUMBER]:[ve.isAlphabetNumber],[ee.CERT]:[ve.isIdCardNo],[ee.HOUSE_HOLD]:[ve.isHouseHold],[ee.BIRTH]:[ve.isBirthType],[ee.PASSPORT]:[ve.isPassportType],[ee.MILITARY_CARD]:[ve.isMilitaryCard],[ee.SOLIDER]:[ve.isSolider],[ee.HONGKONG_MACAO]:[ve.isHongkongMacaoTravel],[ee.TAIWAN_TRAVEL]:[ve.isTaiwanTravel],[ee.FOREIGN_PERMANENT]:[ve.isForeignPermanent],[ee.HK_MACAO_RESIDENCE_PERMIT]:[ve.isHKMacaoResidencePermit],[ee.TAIWAN_RESIDENCE_PERMIT]:[ve.isTaiwanResidencePermit],[ee.SOCIAL_CREDIT_CODE]:[ve.isUSCCPolicy],[ee.OCC]:[ve.isOCC],[ee.BUSINESS_LICENSE]:[ve.isBusinessLicense],[ee.BAND_CARD]:[ve.isBandcard],[ee.OTHER_CERT]:[ve.isOtherCert]},he=e=>(e?`${e.toUpperCase()}_`:"")+"OCCUPATION",Ve=["v-model","label","name","id","type","size","maxlength","placeholder","border","disabled","readonly","colon","required","center","clearable","clear-icon","clear-trigger","clickable","is-link","autofocus","show-word-limit","error","error-message","error-message-align","formatter","format-trigger","arrow-direction","label-class","label-width","label-align","input-align","autosize","left-icon","right-icon","icon-prefix","rules","autocomplete","enterkeyhint","visible"],ge=["label","input","left-icon","right-icon","button","error-message","extra"],be={autocomplete:"off"},_e=(e,t="children")=>a(e)?e.map((({[`${t}`]:e,...l})=>{const s={};return a(e)&&(s.children=_e(e)),{...l,...s}})):[],Ne=(e,t,l={})=>{const s=Object.keys(e);return a(s)?s.reduce(((a,l)=>{const s=t.includes(l);return a[Number(!s)][l]=e[l],a}),[{...l},{}]):[{...l},{}]},Ce=(e,t=!1)=>{if(!e)return[];const o=Object.keys(e)||[];if(!a(o))return[];const{holder:i,insured:r,beneficiary:d,payInfo:n}=o.reduce(((l,s)=>(l[te[s]]=a(e[s])?e[s].filter((e=>!t||1===e.isCalculationFactor)):[],l)),{}),u=a(i)?i.map((e=>e.code)):[],m=a(r)?r.map((e=>({...e,isSelfInsuredNeed:!u.includes(e.code)}))):[];return console.log("origin factors",i,r,d),[i,m,d,n].map((e=>(e=>{let t=[];const o=[];return a(e)&&(t=e.map((e=>{const{code:t,name:a,value:i,componentName:r,...d}=ae.find((t=>`${t.value}`==`${e.displayType}`))||{};e.isCalculationFactor===l.YES&&o.push(e.code);const n={},{componentName:u,...m}=le[e.code]||{},c=u||r||"ProFieldV2";2===e.moduleType&&(n.isSelfInsuredNeed=e.isSelfInsuredNeed);const f={...d,...n,customFieldName:{text:"value",value:"code",children:"children"},label:e.title,name:e.code,componentName:c,required:1===e.isMustInput,nanoid:s(),...m};return{...f,attributeValueList:e.attributeValueList,columns:f.dictCode?[]:e.attributeValueList||[]}}))),{schema:t,trialFactorCodes:o}})(e)))},$e=(e,t={})=>Object.keys(e).reduce(((e,a)=>(e[t[a]||a]=a,e)),{}),Se={certNo:{onChangeEffect:(e,t)=>{Object.assign(t.formData,{certNo:"",gender:"",birthday:""})}},certType:{extraAttrs:{4:{maxlength:10}},onChangeEffect:(e,t)=>{if([o.CERT,o.HOUSE_HOLD].includes(t.formData.certType)){const a=(e=>{const t={gender:"",birthday:""};if("string"==typeof e&&e&&pe(e)){const a={15:[6,12],18:[6,14]};t.birthday=e.slice(...a[e.length]).replace(/(.{4})(.{2})/,"$1-$2-"),t.gender=[i.FEMALE,i.MALE][Number(e.slice(-2,-1))%2]}return t})(e);Object.assign(t.formData,a)}}}};var we=r(d({__name:"ProRenderForm",props:{validateMethod:{default:"show-error"},model:{default:()=>({})},isView:{type:Boolean,default:!1},schema:{default:()=>[]},config:{default:()=>({})},markRequired:{type:Boolean,default:!1}},emits:["failed"],setup(l,{expose:s,emit:o}){const i=l,r=n(),d=u({config:{},formData:{},schema:[],nameList:[],isView:i.isView}),k=m({});c(se,{formState:d,formRef:k,markRequired:i.markRequired});const P=f((()=>Object.keys(r).filter((e=>"default"!==e)))),M=f((()=>a(i.schema))),x=f((()=>{const[e,t]={toast:[!1,!1],"show-error":[!1,!0],"show-error-message":[!0,!1]}[i.validateMethod];return{"show-error-message":e,"show-error":t}})),E=({values:e,errors:t})=>{if("toast"===i.validateMethod){const e=t.reduce(((e,t)=>(e[t.name]=t,e)),{}),a=Object.keys(e);if(a.length){const t=d.nameList.reduce(((e,t)=>(a.includes(t)&&e.push(t),e)),[]),{message:l}=e[t[0]]||{};A({message:l})}}console.log("failed errors",t),o("failed",{values:e,errors:t})};p([()=>i.schema,()=>i.config],(([e,t])=>{d.config=t,M.value&&(d.schema=e.map((e=>({...e,modelValue:i.model[e.name],componentName:ce[e.componentName]?v(ce[e.componentName]):e.componentName,...t[e.name]}))).filter((e=>!e.hidden)))}),{immediate:!0,deep:!0});const T=f((()=>[...new Set(d.schema.reduce(((e,t)=>(t.dictCode&&e.push(t.dictCode),e)),[]))]));return p(T,(a=>{a&&(async a=>{const l=e(),{dictMap:s}=t(l);"string"==typeof a?(await l.getDict([a]),s.value[a]):(await l.getDict(a),a.map((e=>s.value[e])))})(a)}),{immediate:!0,deep:!0}),p((()=>i.model),(e=>{e&&(d.formData=e)}),{immediate:!0,deep:!0}),s({...["submit","getValues","validate","resetValidation","getValidationStatus","scrollToField"].reduce(((e,t)=>(e[t]=(...e)=>{var a;return null==(a=k.value)?void 0:a[t](...e)},e)),{})}),(e,t)=>{const a=O;return y(),h(a,$({ref_key:"formRef",ref:k,class:"com-van-form"},{...g(x),...e.$attrs},{onFailed:E}),{default:V((()=>[g(M)?(y(!0),b(_,{key:0},N(d.schema,((t,a)=>(y(),h(C(t.componentName),$({key:`${t.nanoid}_${a}`},t),S({_:2},[N(g(P),(t=>({name:t,fn:V((()=>[w(e.$slots,t,{},void 0,!0)]))})))]),1040)))),128)):D("",!0),w(e.$slots,"default",{},void 0,!0)])),_:3},16)}}}),[["__scopeId","data-v-36f26087"]]);const De={class:"com-van-field-unit"},Ae=d({inheritAttrs:!1,__name:"ProFieldV2",props:{ruleType:{type:String,default:""},modelValue:{type:[String,Number,Object,Array,Boolean],default:""},isView:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:Array,default:()=>[]},relatedName:{type:String,default:""},precision:{type:Number,default:0},isPrecisionCompleted:{type:Boolean,default:!1},unit:{type:String,default:""}},emits:["update:model-value","blur"],setup(e,{emit:t}){const l=e,s=k(),o=n(),{formState:i,markRequired:r}=P(se)||{},d=u({modelValue:""}),m=f((()=>{const e=$e(o,s.slots),{extra:t,...a}=e;return l.unit?a:e})),c=f((()=>s.placeholder||`请输入${s.label||""}`)),v=f((()=>{var e,t;if(l.ruleType)return l.ruleType;if(l.relatedName){const a=null==(e=null==i?void 0:i.formData)?void 0:e[l.relatedName];if(a)return null==(t=oe[l.relatedName])?void 0:t[a]}return""})),b=f((()=>a(l.rules)?l.rules:[{required:l.required,validator:e=>{if(ie.exports.isNil(e)||""===e)return l.required?s.placeholder:"";if(v.value){const[t]=ye[v.value]||[];if("function"!=typeof t)return console.warn(`%c 字段 ${s.label} 的规则 ${v} 校验函数不存在，请先确认～`,"color: #3e7;"),"";if(!t(e))return`请输入正确的${s.label}`}return""}}])),_=f((()=>"number"===s.type&&l.precision)),C=e=>_.value&&e?e.replace(/^(0)\d+$/g,"$1").replace(new RegExp(`^(\\d+\\.\\d{${l.precision}})\\d+$`,"g"),"$1"):e,D=f((()=>{var e;if(l.relatedName){const{extraAttrs:t}=Se[l.relatedName]||{},a=null==(e=null==i?void 0:i.formData)?void 0:e[l.relatedName];if(t&&!ie.exports.isNil(a)&&""!==a)return t[a]||{}}return{}})),A=(e,t)=>{if(l.relatedName&&e){const a=(Se[l.relatedName]||{})[`${e}Effect`];"function"==typeof a&&a(t,i)}},O=e=>{A("onChange",e),i.formData&&s.name&&(i.formData[s.name]=e),d.modelValue=e,t("update:model-value",e)},F=e=>{let a=d.modelValue;_.value&&a&&l.isPrecisionCompleted&&(a=Number(a).toFixed(l.precision),O(a)),A("onBlur",a),t("blur",e)};return p((()=>l.modelValue),(e=>{d.modelValue=e}),{immediate:!0,deep:!0}),p((()=>{var e;return null==(e=null==i?void 0:i.formData)?void 0:e[s.name]}),(e=>{d.modelValue=e}),{immediate:!0,deep:!0}),M((()=>{s.name&&i.nameList&&i.nameList.push(s.name)})),(t,a)=>{const l=T;return y(),h(l,$({"model-value":g(d).modelValue,class:`com-van-field ${g(r)?"":"field-mark_hidden"} ${g(s).visible?"com-van-field--hidden":""}`,autocomplete:"off",formatter:C},{...t.$attrs,placeholder:g(c),required:e.required,rules:g(b),...g(D)},{onBlur:F,"onUpdate:modelValue":O}),S({_:2},[N(Object.keys(g(m)),(e=>({name:e,fn:V((()=>[w(t.$slots,g(m)[e])]))}))),e.unit?{name:"extra",fn:V((()=>[x("div",De,E(e.unit),1)])),key:"0"}:void 0]),1040,["model-value","class"])}}});function Oe(e){return null==e}const ke={input:"请输入",select:"请选择"};function Pe({placeholderType:e}={placeholderType:"select"}){const t=k(),a=n(),[l,s]=(e=>Ne(e,Ve,be))(t),[o,i]=(e=>Ne(e,ge))($e(a,t.slots)),r=f((()=>t.placeholder||`${ke[e]}${t.label||""}`));return{filedAttrs:{...l,placeholder:r.value},filedSlots:o,attrs:{title:l.label,...s},slots:i}}const Me={key:0};var xe=r(d({inheritAttrs:!1,__name:"ProRadioV2",props:{type:{type:String,default:"button"},modelValue:{type:[String,Number],default:""},columns:{type:Array,default:()=>[]},isDefaultSelected:{type:Boolean,default:!0},isView:{type:Boolean,default:!1},customFieldName:{type:Object,default:()=>({text:"label",value:"value",children:"children"})}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,{filedAttrs:s,attrs:o}=Pe(),{formState:i}=P(se)||{},r=u({modelValue:"",columns:[]}),d=f((()=>"button"===l.type)),n=f((()=>(r.columns.find((e=>e.value===r.modelValue))||{}).label||"")),m=e=>{(null==i?void 0:i.formData)&&s.name&&(i.formData[s.name]=e),r.modelValue=e,t("update:modelValue",e)};return p((()=>l.modelValue),(e=>{r.modelValue=e}),{immediate:!0}),p((()=>{var e;return null==(e=i.formData)?void 0:e[s.name]}),(e=>{r.modelValue=e}),{immediate:!0,deep:!0}),p((()=>l.columns),((e=[])=>{if(a(e)){r.columns=e.map((e=>({...e,text:e[l.customFieldName.text],value:e[l.customFieldName.value]})));const[{disabled:t,value:a}]=r.columns;!l.isDefaultSelected||t||!Oe(l.modelValue)&&""!==l.modelValue||m(a)}}),{deep:!0,immediate:!0}),(t,a)=>{const l=j,i=F,u=Y;return y(),h(Ae,$({class:"com-van-radio-wrap"},g(s),{"model-value":g(r).modelValue}),{input:V((()=>[e.isView?(y(),b("div",Me,E(g(n)),1)):(y(),b(_,{key:1},[g(d)?(y(!0),b(_,{key:0},N(g(r).columns,(e=>(y(),h(l,{key:e.value,label:e.text,disabled:e.disabled,activated:g(r).modelValue==e.value,"icon-name":e.iconName,onClick:t=>(({disabled:e,value:t})=>{o.disabled||e||m(t)})(e)},null,8,["label","disabled","activated","icon-name","onClick"])))),128)):(y(),h(u,$({key:1,modelValue:g(r).modelValue,"onUpdate:modelValue":a[0]||(a[0]=e=>g(r).modelValue=e)},g(o)),{default:V((()=>[(y(!0),b(_,null,N(g(r).columns,(e=>(y(),h(i,$({key:e.value,name:e.value},e),{default:V((()=>[R(E(e.label),1)])),_:2},1040,["name"])))),128))])),_:1},16,["modelValue"]))],64))])),_:1},16,["model-value"])}}}),[["__scopeId","data-v-9871787c"]]);const Ee={style:{width:"100%"},class:"input"},Te={key:0,class:"displayValue"},Fe={key:1,class:"placeholder"},Re=d({inheritAttrs:!1,__name:"CustomInput",props:{fieldValueView:{type:String,default:""},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const t=e,a=k(),{formState:l}=P(se)||{};return I((()=>((null==l?void 0:l.formData)&&a.name&&(l.formData[a.name]=t.modelValue),t.modelValue))),(t,a)=>(y(),b("div",Ee,[e.fieldValueView?(y(),b("span",Te,E(e.fieldValueView),1)):(y(),b("span",Fe,E(t.$attrs.placeholder),1))]))}}),je=d({__name:"ProFormItem",props:{fieldValueView:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup:e=>(t,a)=>(y(),h(Ae,{class:"com-form-item","is-link":!e.isView},S({input:V((()=>[B(Re,{name:t.$attrs.name,"model-value":e.modelValue,"field-value-view":e.fieldValueView,placeholder:t.$attrs.placeholder},null,8,["name","model-value","field-value-view","placeholder"])])),_:2},[N(Object.keys(t.$slots),(e=>({name:e,fn:V((()=>[w(t.$slots,e)]))})))]),1032,["is-link"]))}),Ye=d({inheritAttrs:!1,__name:"ProPickerV2",props:{relatedName:{type:String,default:""},columns:{type:Array,default:()=>[]},dictCode:{type:String,default:""},modelValue:{type:[String,Number],default:""},isDefaultSelected:{type:Boolean,default:!0},isView:{type:Boolean,default:!1},customFieldName:{type:Object,default:()=>({text:"label",value:"value",children:"children"})}},emits:["update:show","confirm","cancel","update:modelValue"],setup(l,{emit:s}){const o=l,i=e(),{dictMap:r}=t(i),{filedAttrs:d,filedSlots:n,attrs:m,slots:c}=Pe(),{formState:v}=P(se)||{},[h,C]=H(!1),D=u({fieldValue:"",columns:[]}),A=e=>{((e,t)=>{if(o.relatedName&&e){const a=(Se[o.relatedName]||{})[`${e}Effect`];"function"==typeof a&&a(t,v)}})("onChange",e),D.fieldValue=e,s("update:modelValue",e)},O=e=>{const{value:t}=e||{};let a="";Oe(t)||(a=t),C(!1),A(a),s("confirm",e)},k=()=>{C(!1)},M=f((()=>{let e=[];a(o.columns)&&(e=o.columns);const t=r.value[o.dictCode];return o.dictCode&&a(t)&&(e=t),_e(a(l=e)?l.map((e=>({...e,text:e[o.customFieldName.text],value:e[o.customFieldName.value]}))):[]);var l})),x=f((()=>o.modelValue?o.columns.findIndex((e=>{var t;return e[null==(t=o.customFieldName)?void 0:t.values]===o.modelValue})):"")),E=f((()=>{if(a(M.value)){const e=M.value.find((e=>String(e.value)===String(D.fieldValue)))||{};return(null==e?void 0:e.text)||D.fieldValue}return D.fieldValue}));return p((()=>o.modelValue),(e=>{D.fieldValue=e}),{deep:!0,immediate:!0}),p((()=>{var e;return null==(e=null==v?void 0:v.formData)?void 0:e[d.name]}),(e=>{D.fieldValue=e}),{immediate:!0,deep:!0}),p(M,((e=[])=>{if(a(e)&&1===e.length){const[{disabled:e,value:t}]=M.value;!o.isDefaultSelected||e||!Oe(o.modelValue)&&""!==o.modelValue||A(t)}}),{deep:!0,immediate:!0}),(e,t)=>{const a=L,s=z;return y(),b(_,null,[B(je,$({"model-value":g(D).fieldValue,class:""+(g(d).visible?"com-van-field--hidden":"")},g(d),{"field-value-view":g(E),onClick:t[0]||(t[0]=e=>!l.isView&&(h.value=!0))}),S({_:2},[N(Object.keys(g(n)),(t=>({name:t,fn:V((()=>[w(e.$slots,t)]))})))]),1040,["model-value","class","field-value-view"]),B(s,{show:g(h),"onUpdate:show":t[1]||(t[1]=e=>Z(h)?h.value=e:null),height:40,closeable:!1},{default:V((()=>[B(a,$({columns:g(M),"default-index":g(x),title:g(d).label},g(m),{onCancel:k,onConfirm:O}),S({_:2},[N(Object.keys(e.$slots),(t=>({name:t,fn:V((()=>[w(e.$slots,t)]))})))]),1040,["columns","default-index","title"])])),_:3},8,["show"])],64)}}});var Ie=ue&&ue.isDate,Be=Ie?me(Ie):function(e){return de(e)&&"[object Date]"==ne(e)};const He=d({inheritAttrs:!1,__name:"ProCalendarV2",props:{type:{type:String,default:"single"},valueType:{type:String,default:"date"},modelValue:{type:[String,Date],default:""},isView:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,{filedAttrs:s,filedSlots:o,attrs:i,slots:r}=Pe(),d=u({fieldValue:"",defaultDate:null}),[n,m]=H(!1),c={date:"YYYY-MM-DD",datehour:"YYYY-MM-DD HH",datetime:"YYYY-MM-DD HH:mm"},v=f((()=>c[l.valueType]||"YYYY-MM-DD")),h=f((()=>a(d.fieldValue)?d.fieldValue.join("range"===l.type?"~":","):"string"==typeof d.fieldValue?d.fieldValue:"")),C=e=>{let s;s="single"===l.type?U(e).format(v.value):a(e)?e.map((e=>U(e).format(v.value))):[],d.fieldValue=s,t("update:modelValue",s),m(!1)};return p((()=>l.modelValue),(e=>{"single"===l.type?"string"==typeof e&&e&&(d.defaultDate=U(e).toDate()):d.defaultDate=a(e)?e.map((e=>U(e).toDate())):null,d.fieldValue=(e=>"single"===l.type?Be(e)?U(e).format(v.value):e||"":a(e)?e:[])(e)}),{immediate:!0,deep:!0}),(t,a)=>{const l=q;return y(),b(_,null,[B(je,$({"model-value":g(d).fieldValue},g(s),{"field-value-view":g(h),onClick:a[0]||(a[0]=t=>!e.isView&&(n.value=!0))}),S({_:2},[N(Object.keys(g(o)),(e=>({name:e,fn:V((()=>[w(t.$slots,e)]))})))]),1040,["model-value","field-value-view"]),B(l,$({show:g(n),"onUpdate:show":a[1]||(a[1]=e=>Z(n)?n.value=e:null),type:e.type,"default-date":g(d).defaultDate},g(i),{onConfirm:C}),S({_:2},[N(Object.keys(g(r)),(e=>({name:e,fn:V((()=>[w(t.$slots,e)]))})))]),1040,["show","type","default-date"])],64)}}}),Le=d({inheritAttrs:!1,__name:"ProCascaderV2",props:{showFullValue:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object],default:""},columns:{type:Array,default:()=>[]},dictCode:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"name",value:"code",children:"children"})},level:{type:Number,default:0}},emits:["update:modelValue","update:fullValue"],setup(l,{emit:s}){const o=l,i=e(),{dictMap:r}=t(i),{filedAttrs:d,filedSlots:n,attrs:m,slots:c}=Pe(),[v,h]=H(!1),C=u({columns:[],modelValue:"",fieldValue:""}),D=()=>{h(!0)},A=()=>{h(!1)},O=f((()=>{let e=[];a(o.columns)&&(e=o.columns);const t=r.value[o.dictCode];return o.dictCode&&a(t)&&(e=t),((e,t=0,l="children")=>{const s=(e,o=1)=>a(e)?e.map((({[`${l}`]:e,...i})=>{const r={};return(!t||t&&t>o)&&a(e)&&(r.children=s(e,o+1)),{...i,...r}})):[];return s(e)})(e,o.level)})),k=f((()=>((e,t)=>{const l=[],{value:s,children:i}=o.customFieldName,r=(e,o=0)=>!!a(e)&&e.some(((e,d)=>{const{[i]:n,...u}=e;return l[o]=u,e[s]===t||!!a(n)&&r(n,o+1)}));return a(e)&&!r(e)?[]:l})(O.value,C.modelValue))),P=f((()=>{if(a(k.value)){const e=k.value.map((e=>e[o.customFieldName.text]));return o.showFullValue?e.join("/"):e[e.length-1]}return""})),M=({value:e,selectedOptions:t})=>{C.modelValue=e,C.fieldValue=e,s("update:modelValue",e),A()};return p((()=>o.modelValue),(e=>{C.modelValue=e}),{immediate:!0,deep:!0}),p((()=>k.value),(e=>{s("update:fullValue",e)}),{deep:!0,immediate:!0}),(e,t)=>{const a=W,s=z;return y(),b(_,null,[B(je,$({"model-value":g(C).fieldValue},g(d),{"field-value-view":g(P),onClick:D}),S({_:2},[N(Object.keys(g(n)),(t=>({name:t,fn:V((()=>[w(e.$slots,t)]))})))]),1040,["model-value","field-value-view"]),B(s,{show:g(v),"onUpdate:show":t[0]||(t[0]=e=>Z(v)?v.value=e:null),height:60,closeable:!1,class:"com-cascader-popup"},{default:V((()=>[B(a,$({options:g(O),"field-names":l.customFieldName,"model-value":g(C).modelValue},g(m),{onClose:A,onFinish:M}),null,16,["options","field-names","model-value"])])),_:1},8,["show"])],64)}}});var Ze=r(d({inheritAttrs:!1,__name:"ProDatePickerV2",props:{type:{type:String,default:"date"},modelValue:{type:[String,Date],default:""},isView:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]}},emits:["update:modelValue","cancel"],setup(e,{emit:t}){const a=e,{filedAttrs:l,filedSlots:s,attrs:o,slots:i}=Pe(),{formState:r}=P(se)||{},[d,n]=H(!1),m=f((()=>!["time","month-day"].includes(a.type))),c=u({fieldValue:"",date:m.value?new Date:null}),v={datetime:"YYYY-MM-DD HH:mm",date:"YYYY-MM-DD","year-month":"YYYY-MM","month-day":"MM-DD",datehour:"YYYY-MM-DD HH",time:"mm:ss"},h=f((()=>({minDate:new Date(1900,0,1),maxDate:new Date}))),C=f((()=>v[a.type]||"YYYY-MM-DD HH:mm")),D=e=>{c.fieldValue=Be(e)?U(e).format(C.value):e,t("update:modelValue",c.fieldValue),n(!1)},A=()=>{n(!1),t("cancel")},O=e=>{Be(e)?(c.date=e,c.fieldValue=U(e).format(C.value)):"string"==typeof e&&(c.fieldValue=e,m.value?c.date=U(e,C.value).isValid()?U(e,C.value).toDate():null:c.date=e)};return p((()=>a.modelValue),(e=>{O(e)}),{immediate:!0,deep:!0}),p((()=>{var e;return null==(e=r.formData)?void 0:e[l.name]}),(e=>{O(e)}),{immediate:!0,deep:!0}),(t,a)=>{const r=G,n=z;return y(),b(_,null,[B(je,$({"model-value":g(c).fieldValue},g(l),{"field-value-view":g(c).fieldValue,onClick:a[0]||(a[0]=t=>!e.isView&&(d.value=!0))}),S({_:2},[N(Object.keys(g(s)),(e=>({name:e,fn:V((()=>[w(t.$slots,e,{},void 0,!0)]))})))]),1040,["model-value","field-value-view"]),B(n,{show:g(d),"onUpdate:show":a[1]||(a[1]=e=>Z(d)?d.value=e:null),height:40,closeable:!1},{default:V((()=>[B(r,$({type:e.type,"model-value":g(c).date,title:g(l).label},{...g(h),...g(o)},{onConfirm:D,onCancel:A}),S({_:2},[N(Object.keys(g(i)),(e=>({name:e,fn:V((()=>[w(t.$slots,e,{},void 0,!0)]))})))]),1040,["type","model-value","title"])])),_:3},8,["show"])],64)}}}),[["__scopeId","data-v-ad0ed790"]]);var ze=r(d({__name:"ProSMSCode",props:{time:{type:Number,default:60},smsText:{type:String,default:"验证码"},relatedName:{type:String,default:"mobile"},sendSMSCode:{type:Function,default:e=>{"function"==typeof e&&e()}}},setup(e){const t=e,{formState:a,formRef:l}=P(se)||{},s=u({iscountdowning:!1}),{current:o,start:i,reset:r}=X({time:1e3*t.time,onFinish(){s.iscountdowning=!1}}),d=()=>{s.iscountdowning||l.value.validate(t.relatedName).then((()=>{t.sendSMSCode({mobile:a.formData[t.relatedName]},(()=>{s.iscountdowning=!0,A({message:"短信发送成功，请查收"}),r(),i()}))})).catch((()=>{}))},n=f((()=>{const{seconds:e}=o.value||{};return 0===e?t.smsText:s.iscountdowning?`${e}s`:t.smsText}));return(e,t)=>{const a=K;return e.$attrs.isView?D("",!0):(y(),h(Ae,$({key:0,class:"com-pro-sms-code",type:"digit",maxlength:g(re).SMS_CODE},e.$attrs),{extra:V((()=>[B(a,{class:"extra-button",size:"small",plain:"",type:"primary",onClick:d},{default:V((()=>[R(E(g(n)),1)])),_:1})])),_:1},16,["maxlength"]))}}}),[["__scopeId","data-v-b4ef4f7e"]]);var Ue=r(d({inheritAttrs:!1,__name:"ProAddress",props:{name:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"name",value:"code",children:"children"})},valuePrefix:{type:String,default:""},attributeValueList:{type:Array,default:()=>[]}},setup(e){const t=e,l=u({address:{detail:""}}),s=f((()=>{if(!t.valuePrefix)return l.address;return Object.keys(l.address).reduce(((e,a)=>(e[(e=>{return"string"==typeof e&&e?t.valuePrefix?`${t.valuePrefix}${a=e,"string"==typeof a&&a?`${a[0].toUpperCase()}${a.substring(1)}`:""}`:e:"";var a})(a)]=l.address[a],e)),{})})),o=f((()=>{if(a(t.attributeValueList)){let e=0,a=!1;return t.attributeValueList.forEach((t=>{Number(t.code)>e&&"4"!==String(t.code)&&(e=Number(t.code)),"4"!==String(t.code)&&(a=!0)})),{level:e&&e+1,showDetail:a}}return{level:0,showDetail:!0}})),i=(e=[])=>{let s={};if(a(e)){const{text:a,value:l}=t.customFieldName;s=["province","city","area"].slice(0,Number(o.value.level||3)).reduce(((t,s,o)=>{const i=e[o+1]||{};return t[`${s}Code`]=i[l],t[`${s}Name`]=i[a],t}),{})}l.address={...l.address,...s}};return(t,a)=>{const r=Ae;return y(),b(_,null,[B(je,{class:"com-van-field-hidden",name:e.name,"model-value":g(s)},null,8,["name","model-value"]),B(Le,$({"show-full-value":"","custom-field-name":e.customFieldName},t.$attrs,{name:`${e.name}-origin`,level:g(o).level,"onUpdate:fullValue":i}),null,16,["custom-field-name","name","level"]),g(o).showDetail?(y(),h(r,{key:0,modelValue:g(l).address.detail,"onUpdate:modelValue":a[0]||(a[0]=e=>g(l).address.detail=e),label:`${t.$attrs.label}详细地址`,required:t.$attrs.required,maxlength:50},null,8,["modelValue","label","required"])):D("",!0)],64)}}}),[["__scopeId","data-v-33a818c5"]]);const qe=d({inheritAttrs:!1,__name:"ProRenderFormWithCard",props:{title:{type:String,default:""},class:{type:String,default:""}},setup(e,{expose:t}){const a=e,l=m(null);return t({...["submit","getValues","validate","resetValidation","getValidationStatus","scrollToField"].reduce(((e,t)=>(e[t]=(...e)=>{var a;return null==(a=l.value)?void 0:a[t](...e)},e)),{})}),(t,s)=>{var o;const i=Q;return(null==(o=t.$attrs.schema)?void 0:o.length)?(y(),h(i,{key:0,class:J(`com-pro-form-with-card com-card-body-no-padding ${a.class}`),"show-line":!1,"show-divider":!1,title:e.title},{default:V((()=>[B(we,$({ref_key:"renderFormRef",ref:l},t.$attrs),S({_:2},[N(Object.keys(t.$slots),(e=>({name:e,fn:V((()=>[w(t.$slots,e)]))})))]),1040)])),_:3},8,["class","title"])):D("",!0)}}});export{ze as P,qe as _,Ae as a,xe as b,he as c,Le as d,Ue as e,Ye as f,we as g,Ze as h,Ce as t};

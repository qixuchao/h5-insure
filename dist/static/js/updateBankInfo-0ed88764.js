import{_ as a,d as e,i as t,h as s,j as o,aJ as n,o as r,c as d,u as c,m as i,p as l,f as u,a as p,b as m,w as f,a8 as v,aH as I,aQ as h,a9 as y,cW as g,aI as b,bz as _,aj as j,cv as P,cw as x,cx as C}from"./index-c77dbd25.js";import{_ as N}from"./PolicyInfo-8e99a32c.js";import{u as k}from"./useOrder-a043351e.js";import{p as w}from"./utils-8abc7844.js";import{g as A,m as O}from"./trial-a0b20d2c.js";import{n as $}from"./nextStep-8f5dc14c.js";import"./utils-5237cca3.js";import"./infoCollection-608a87c3.js";import"./trial-cc352ec9.js";import"./core-7c1c21bc.js";const E={class:"bank-info-wrap"},L={class:"footer-button"},U=e({name:"updateBankInfo"});var B=a(e({...U,setup(a){const e=t(),U=s(),{orderNo:B,isShare:D,tenantId:G,nextPageCode:S}=e.query,T=k(),V=o({schema:[],config:[],formData:[]}),q=o(!!D),F=o(),J=o(),M=()=>{U.back()},R=()=>{F.value&&F.value.validate(!1).then((a=>{a&&(T.value.tenantOrderPayInfoList=J,D?(T.value.extInfo.buttonCode=I.UPDATE_BANK_INFO_HOLDER,$(T.value,((a,t)=>{t===h.JUMP_PAGE&&y(a.nextPageCode,e.query)}),e)):(T.value.extInfo.buttonCode=I.UPDATE_BANK_INFO_AGENT,$(T.value,((a,e)=>{e===h.JUMP_PAGE&&((a,e)=>{const{holder:t,insured:s}=T.value;let o={name:t.name,gender:`${P[t.gender]}士`};"insured"===a&&(o={name:null==s?void 0:s[0].name,gender:`${P[null==s?void 0:s[0].gender]}士`}),x({shareType:0,title:`${C[e].title}`,desc:C[e].desc.replace("{name}",`${o.name}${o.gender},`),url:`${window.location.href}&objectType=${a}&isShare=1&nextPageCode=updateBankInfo`.replace("/updateBankInfo","/phoneVerify"),imageUrl:"https://aquarius-v100-test.oss-cn-hangzhou.aliyuncs.com/MyPicture/asdad.png"})})("holder","pay")}),e)))}))};return n((()=>{(async()=>{let a={};g({orderNo:B,tenantId:G}).then((({code:a,data:e})=>{"10000"===a&&(J.value=e.tenantOrderPayInfoList)}));const{code:e,data:t}=await A({orderNo:B,tenantId:G});"10000"===e&&(Object.assign(T.value,t,{extInfo:{...t.extInfo,buttonCode:I.SIGN,pageCode:b.SIGN}}),a=w(t.insuredList[0].productList)),O(a).then((({data:a,code:e})=>{if("10000"===e){const{productDetailResList:e,productFactor:t}=a,{payInfo:s}=_(t);V.value={...V.value,...s}}}))})()})),(a,e)=>{const t=j;return r(),d("div",E,[c(V).schema.length&&c(J)?(r(),i(N,{key:0,ref_key:"payInfoRef",ref:F,modelValue:c(J),"onUpdate:modelValue":e[0]||(e[0]=a=>l(J)?J.value=a:null),schema:c(V).schema,"is-view":c(q),"user-data":c(T)},null,8,["modelValue","schema","is-view","user-data"])):u("",!0),p("div",L,[m(t,{type:"primary",plain:"",onClick:M},{default:f((()=>[v("取消")])),_:1}),m(t,{type:"primary",onClick:R},{default:f((()=>[v("确认")])),_:1})])])}}}),[["__scopeId","data-v-61e78bea"]]);export{B as default};

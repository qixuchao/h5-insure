!function(){var e=document.createElement("style");e.innerHTML=".pro-modal .pro-overlay[data-v-a6bc1804]{position:fixed;top:0;left:0;z-index:99;width:100%;height:100%;background:var(--van-overlay-background-color)}.pro-modal .pro-modal-wrapper[data-v-a6bc1804]{position:fixed;top:0;left:0;z-index:100;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:1.2rem;text-align:center}.pro-modal .pro-modal-wrapper .pro-modal-body[data-v-a6bc1804]{width:100%;height:60%;background:url(/static/assets/upgrade_success.7fcab77e.png) no-repeat;background-size:contain;padding:.4rem}.pro-modal .pro-modal-wrapper .pro-modal-body .pro-modal-body-bg[data-v-a6bc1804],.pro-modal .pro-modal-wrapper .pro-modal-body .pro-modal-body-bg img[data-v-a6bc1804]{width:100%}.pro-modal .pro-modal-wrapper .pro-modal-body .pro-modal-btn[data-v-a6bc1804]{width:5.6rem;height:1.17333rem;background:var(--van-primary-color);border-radius:.58667rem;font-size:.45333rem;font-weight:700;color:#fff;line-height:1.17333rem;text-align:center;margin:auto}.pro-modal .pro-modal-wrapper .pro-modal-content[data-v-a6bc1804]{padding:4.13333rem 0 .8rem;font-size:.4rem;font-weight:500;color:#9f5012;line-height:.61333rem}.pro-modal .pro-modal-wrapper .pro-modal-close[data-v-a6bc1804]{padding:.53333rem}.pro-modal .pro-modal-wrapper .pro-modal-close img[data-v-a6bc1804]{width:.77333rem;height:.77333rem}.van-config-provider.router-view{background:linear-gradient(180deg,#fea64a 0%,#fc7429 88%,#fc6d24 100%)}.page-activity-invite{height:100%;background:linear-gradient(180deg,#fea64a 0%,#fc7429 88%,#fc6d24 100%)}.page-activity-invite .banner{width:100%}.page-activity-invite .container{padding:.26667rem}.page-activity-invite .container .title{margin:auto;margin-top:-1.6rem;width:calc(100% - .8rem)}.page-activity-invite .container .title img{width:100%}.page-activity-invite .container .main-form{background:url(/static/assets/bg.c7f48ab0.png) no-repeat;background-size:100% 100%;position:relative;padding:1.33333rem 0 .6rem}.page-activity-invite .container .main-form .sms-code{width:2rem;text-align:center;font-size:.4rem;font-weight:500;color:var(--van-primary-color);padding:0;white-space:nowrap}.page-activity-invite .container .main-form .submit{height:1.33333rem;margin-top:.53333rem;margin-bottom:.46667rem;background:url(/static/assets/button.4c281a6e.png) no-repeat;background-size:contain;background-position:center;border:none}.page-activity-invite .container .main-form .check-submit{height:1.33333rem;margin-top:.53333rem;margin-bottom:.46667rem;background:url(/static/assets/button1.50dc65f6.png) no-repeat;background-size:contain;background-position:center;border:none}.page-activity-invite .container .main-form .agree{padding:0 .33333rem;font-size:.37333rem;font-weight:400;color:#666;display:flex;align-items:flex-start}.page-activity-invite .container .main-form .agree .check-wrap{margin-right:.26667rem}.page-activity-invite .container .main-form .van-cell .van-field__value{align-items:flex-start}.page-activity-invite .van-field__body{width:100%}\n",document.head.appendChild(e),System.register(["./vendor-legacy-92a8f610.js","./infoCollection-legacy-463c6cf6.js","./phoneVerify-legacy-28cb6f1b.js","./validator-legacy-70be20af.js","./utils-legacy-0bea15a4.js","./index-legacy-ec043934.js","./trial-legacy-70ed57e1.js","./product-legacy-26c8d91c.js","./theme-legacy-0d67cf8b.js","./close-legacy-d9c2a5df.js","./index-legacy-3cd18e5e.js","./trial-legacy-e737e87d.js"],(function(e){"use strict";var a,t,n,o,l,i,r,c,d,s,u,m,p,v,g,f,h,b,y,w,k,I,C,x,V,_,N,j,O,S,z,L,U,D,M,E,F,P,B,R,T;return{setters:[function(e){a=e.g,t=e.E,n=e.M,o=e._,l=e.r,i=e.j,r=e.k,c=e.m,d=e.p,s=e.A,u=e.z,m=e.J,p=e.L,v=e.T,g=e.n,f=e.t,h=e.a4,b=e.a5,y=e.O,w=e.a9,k=e.h,I=e.G,C=e.F,x=e.C},function(e){V=e.R},function(e){_=e.s,N=e.c},function(e){j=e.v,O=e.a,S=e.b},function(e){z=e.F,L=e.g},function(e){U=e.G,D=e._},function(e){M=e.g,E=e.m,F=e.i},function(e){P=e.p},function(e){B=e.t},function(e){R=e.c},function(e){T=e._},function(){}],execute:function(){const q=a({props:{isCheck:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>{}}},emits:["on-verify"],setup(e,{emit:a}){var g;const f=e,h=t({}),b=t(!1),y=t(0),w=t("获取验证码"),k=n({mobile:null===(g=f.userInfo)||void 0===g?void 0:g.mobile,smsCode:""}),I=e=>!!j(e)||"请输入正确的手机号",C=async()=>{y.value>0||null==h||h.value.validate("mobile").then((async()=>{const e=await _(k.mobile),{code:a,data:t}=e;"10000"===a&&(b.value=!0,v({message:"短信发送成功，请查收"}),(()=>{if(y.value>0)return;y.value=30;const e=()=>{w.value=`${y.value}s`,y.value-=1};e();const a=setInterval((()=>{0===y.value?(w.value="获取验证码",y.value=0,clearInterval(a)):e()}),1e3)})())}))},x=async()=>{const e=await N(k.mobile,k.smsCode),{data:t}=e;t&&a("on-verify",k)},V=async()=>{null==h||h.value.validate().then((async()=>{x()}))};return o((()=>k),(()=>{j(k.mobile)&&O(k.smsCode)&&b.value&&x()}),{deep:!0,immediate:!0}),(e,a)=>{const t=l("van-field"),n=l("van-cell-group"),o=l("VanForm");return i(),r(o,{ref_key:"formRef",ref:h,"label-width":"80"},{default:c((()=>[d(n,null,{default:c((()=>[d(t,{modelValue:s(k).mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>s(k).mobile=e),name:"mobile",label:"手机号",clearable:"",placeholder:"请输入手机号",maxlength:s(z).MOBILE,rules:[{validator:I}]},null,8,["modelValue","maxlength","rules"]),d(t,{modelValue:s(k).smsCode,"onUpdate:modelValue":a[1]||(a[1]=e=>s(k).smsCode=e),type:"digit",name:"smsCode",label:"验证码",clearable:"",placeholder:"请输入验证码",maxlength:s(z).SMS_CODE},{button:c((()=>[u("div",{class:p(["sms-code",{"count-down":y.value>0}]),onClick:C},m(w.value),3)])),_:1},8,["modelValue","maxlength"])])),_:1}),u("div",{class:p([{"check-submit":f.isCheck},{submit:!f.isCheck}]),onClick:V},null,2)])),_:1},512)}}}),H=a({props:{isCheck:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>{}}},emits:["on-submit"],setup(e,{emit:a}){const o=e,m=t({}),v=n({name:o.userInfo.name,certNo:o.userInfo.certNo}),g=e=>!!U(v.certNo)||"请填写正确的证件号",f=e=>!!S(e)||"请输入正确的姓名",h=()=>{null==m||m.value.validate().then((async e=>{a("on-submit",v)}))};return(e,a)=>{const t=l("van-field"),n=l("van-cell-group"),b=l("VanForm");return i(),r(b,{ref_key:"formRef",ref:m,"label-width":"80"},{default:c((()=>[d(n,null,{default:c((()=>[d(t,{modelValue:s(v).name,"onUpdate:modelValue":a[0]||(a[0]=e=>s(v).name=e),name:"name",label:"姓名",clearable:"",placeholder:"请输入姓名",maxlength:s(z).NAME,rules:[{validator:f}]},null,8,["modelValue","maxlength","rules"]),d(t,{modelValue:s(v).certNo,"onUpdate:modelValue":a[1]||(a[1]=e=>s(v).certNo=e),name:"certNo",label:"身份证",clearable:"",placeholder:"请输入身份证号",maxlength:s(z).ID_CARD,rules:[{validator:g}]},null,8,["modelValue","maxlength","rules"])])),_:1}),u("div",{class:p([{"check-submit":o.isCheck},{submit:!o.isCheck}]),onClick:h},null,2)])),_:1},512)}}});const A=e=>(h("data-v-a6bc1804"),e=e(),b(),e),G={key:0,class:"pro-modal"},J=A((()=>u("div",{class:"pro-overlay"},null,-1))),$={class:"pro-modal-wrapper"},K=A((()=>u("div",{class:"pro-modal-content"},[u("p",null,"恭喜您"),u("p",null,"领取成功")],-1))),W=["src"],X=a({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(e,{emit:a}){const t=e,n=()=>{a("on-close")};return(e,a)=>t.isShow?(i(),g("div",G,[J,u("div",$,[u("div",{class:"pro-modal-body"},[K,u("div",{class:"pro-modal-btn",onClick:n},"我知道了")]),u("div",{class:"pro-modal-close",onClick:n},[u("img",{src:s(R)},null,8,W)])])])):f("",!0)}});var Y=D(X,[["__scopeId","data-v-a6bc1804"]]);const Q={class:"page-activity-invite"},Z=["src"],ee={class:"container"},ae={class:"main-form"},te={class:"title"},ne=["src"],oe={class:"agree"},le={class:"check-wrap"},ie=x(" 我已阅读并同意 ");e("default",a({setup(e){const a=y(),o=w(),{productCode:m="7X9",tenantId:p="",phoneNo:f,saleChannelId:h,agentCode:b="",paymentMethod:x,from:_}=a.query,N=t(!0),j="check"===_,O=t(!1),S=t(!1),z=t(0),U=n({title:"/static/assets/title-step1.97cb9efa.png",attachmentList:[{attachmentName:"",attachmentUri:""}],userInfo:{mobile:f,certNo:"",name:""},agree:!1}),D=t(),R=t(),A=t(!1),G=async e=>{U.userInfo.mobile=e.mobile;const a=await M({holderPhone:U.userInfo.mobile,productCode:m,tenantId:p}),{code:t,data:n}=a;var o,l;"10000"===t&&(U.userInfo.name=null===(o=n.tenantOrderHolder)||void 0===o?void 0:o.name,U.userInfo.certNo=null===(l=n.tenantOrderHolder)||void 0===l?void 0:l.certNo);U.title="/static/assets/title-step2.258af5e9.png",N.value=!1},J=async e=>{if(U.userInfo.certNo=null==e?void 0:e.certNo,U.userInfo.name=null==e?void 0:e.name,!j||O.value)if(U.agree)try{v({message:"领取中...",forbidClick:!0,loadingType:"spinner"});const e=L({tenantId:p,detail:D.value,insureDetail:R.value,saleChannelId:h,saleUserId:b,holder:U.userInfo,insured:{...U.userInfo,relationToHolder:V.SELF},paymentMethod:x,renewalDK:"",successJumpUrl:"",premium:0,orderStatus:"",orderTopStatus:"",tenantOrderRiskList:[]}),t=await E(e),{code:n}=t;if("10000"===n){if(j)return v.clear(),void(A.value=!0);o.push({path:"/chuangxin/baigebao/productDetail",query:{...a.query,tenantId:p,phoneNo:U.userInfo.mobile,certNo:U.userInfo.certNo,name:U.userInfo.name,productCode:"BWYL2021",agentCode:b}})}}catch(t){v.clear()}else v("请勾选协议");else S.value=!0},$=()=>{O.value=!0,J()},K=()=>{A.value=!1};return k((()=>{(async()=>{const e=P({productCode:m,withInsureInfo:!0,tenantId:p}),a=F({productCode:m});Promise.all([e,a]).then((([e,a])=>{var t,n;"10000"===e.code&&(D.value=e.data,U.attachmentList=(null===(t=D.value)||void 0===t||null===(n=t.tenantProductInsureVO)||void 0===n?void 0:n.attachmentVOList)||[]),"10000"===a.code&&(R.value=a.data)}))})()})),(e,a)=>{const t=l("van-checkbox"),n=l("ProPDFviewer"),o=l("van-config-provider");return i(),r(o,{"theme-vars":s(B)},{default:c((()=>{var e,o;return[u("div",Q,[u("img",{src:null===(e=D.value)||void 0===e||null===(o=e.tenantProductInsureVO)||void 0===o?void 0:o.banner[0],class:"banner"},null,8,Z),u("div",ee,[u("div",ae,[u("div",te,[u("img",{src:s(U).title},null,8,ne)]),N.value?(i(),r(q,{key:0,"is-check":j,"user-info":s(U).userInfo,onOnVerify:G},null,8,["user-info"])):(i(),r(H,{key:1,"is-check":j,"user-info":s(U).userInfo,onOnSubmit:J},null,8,["user-info"])),u("div",oe,[u("div",le,[d(t,{modelValue:s(U).agree,"onUpdate:modelValue":a[0]||(a[0]=e=>s(U).agree=e),name:"agree",shape:"square"},null,8,["modelValue"])]),u("div",null,[ie,(i(!0),g(C,null,I(s(U).attachmentList||[],((e,a)=>(i(),r(n,{key:a,class:"file-name",title:`《${e.attachmentName}》`,content:e.attachmentUri,type:"pdf"},null,8,["title","content"])))),128))])])])])]),d(Y,{"is-show":A.value,onOnClose:K},null,8,["is-show"]),d(T,{show:S.value,"onUpdate:show":a[1]||(a[1]=e=>S.value=e),"content-list":s(U).attachmentList,"active-index":z.value,text:"我已逐页阅读并确认告知内容",onSubmit:$},null,8,["show","content-list","active-index"])]})),_:1},8,["theme-vars"])}}}))}}}))}();

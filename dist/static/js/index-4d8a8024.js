import{d as e,i as t,h as n,dd as o,j as i,r,k as a,B as l,o as s,c as d,b as u,w as c,u as f,m as I,p as v,g as p,f as m,a6 as L,b8 as O,aN as R,b9 as b,de as E,ae as C,df as x}from"./index-d1ef2bf2.js";import{R as w}from"./infoCollection-31af26aa.js";import{_ as S}from"./PersonalInfo-c08cd8db.js";const H={class:"page-info-wrapper"},N=e({name:"insureForm"}),U=e({...N,props:{factorObject:{},formInfo:{default:()=>({})},isView:{type:Boolean,default:!1},sendSmsCode:{type:Function,default:(e,t)=>{}},titleCollection:{default:()=>({})},inputAlign:{default:"left"},needDesensitize:{type:Boolean,default:!1}},setup(e,{expose:C}){const N=e,{insurerCode:U=""}=t().query;n(),t();const h=o(`${U.toLocaleUpperCase()}_OCCUPATION`),V=i({}),j=i({extInfo:{},tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:""}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),y=i(null),g=i([]),T=i([]);i([]),i([]);i([]);r({beneficiaryId:0,nextPage:"",currentAddress:null,isLoading:!0});const D=a((()=>{var e,t;const n={INSURER:{},HOLDER:{}};return((null==(e=V.value)?void 0:e.INSURER)||[]).forEach((e=>{n.INSURER[e.code]=e})),((null==(t=V.value)?void 0:t.HOLDER)||[]).forEach((e=>{n.HOLDER[e.code]=e})),n})),_=(e,t)=>{var n,o,i;return(null==(i=null==(o=null==(n=D.value)?void 0:n[t])?void 0:o[e])?void 0:i.isDisplay)===L.YES},k=(e,t)=>{var n,o;return(null==(o=null==(n=D.value)?void 0:n[t])?void 0:o[e].isMustInput)===L.YES},q=(e,t,n)=>{var o,i,r;return(null==(r=null==(i=null==(o=D.value)?void 0:o[n])?void 0:i[e])?void 0:r[t])||""},A=(e,t)=>{const n=e;return Object.keys(n).forEach((e=>{t.includes(e)||(n[e]="")})),n};return C({validateForm:e=>new Promise(((t,n)=>{var o;null==(o=y.value)||o.validate(e).then((()=>{t(j.value)}),(()=>{n()}))}))}),l((()=>N.factorObject),(()=>{const e={BENEFICIARY:N.factorObject[3],INSURER:N.factorObject[2],HOLDER:N.factorObject[1]};V.value=e}),{immediate:!0,deep:!0}),l([()=>j.value.tenantOrderInsuredList[0].relationToHolder,()=>j.value.tenantOrderHolder],(([e],[t])=>{var n,o,i,r;`${j.value.tenantOrderInsuredList[0].relationToHolder}`===w.SELF?(Object.assign(j.value.tenantOrderInsuredList[0],{...A(null==(o=null==(n=j.value)?void 0:n.tenantOrderInsuredList)?void 0:o[0],["extInfo","relationToHolder","tenantOrderBeneficiaryList","tenantOrderProductList"]),extInfo:{occupationCodeList:[]}}),Object.assign(j.value.tenantOrderInsuredList[0],j.value.tenantOrderHolder,{id:j.value.tenantOrderInsuredList[0].id,extInfo:{...j.value.tenantOrderHolder.extInfo,insureProvinceCode:j.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,insureCityCode:j.value.tenantOrderInsuredList[0].extInfo.insureCityCode,insureAreaCode:j.value.tenantOrderInsuredList[0].extInfo.insureAreaCode}})):e===t||N.isView||Object.assign(j.value.tenantOrderInsuredList[0],{...A(null==(r=null==(i=j.value)?void 0:i.tenantOrderInsuredList)?void 0:r[0],["extInfo","relationToHolder","tenantOrderBeneficiaryList","tenantOrderProductList"]),extInfo:{occupationCodeList:[]}})}),{deep:!0}),l((()=>N.formInfo),(()=>{Object.keys(N.formInfo).length&&(j.value=N.formInfo)}),{deep:!0,immediate:!0}),(e,t)=>{const n=O,o=R,i=b,r=E,a=x;return s(),d("div",H,[u(a,{ref_key:"formRef",ref:y,"show-error":"","show-error-message":!1,"input-align":e.inputAlign},{default:c((()=>{var a,l,d,L;return[(null==(a=f(V).HOLDER)?void 0:a.length)?(s(),I(o,{key:0,"show-line":!1,"show-divider":!1,title:null==(l=e.titleCollection)?void 0:l.HOLDER},{default:c((()=>[u(S,{images:f(g),"onUpdate:images":t[1]||(t[1]=e=>v(g)?g.value=e:null),"form-info":f(j).tenantOrderHolder,"factor-list":f(V).HOLDER,prefix:"holder","is-view":e.isView,"need-desensitize":e.needDesensitize,"send-sms-code":e.sendSmsCode},{name:c((()=>[p(e.$slots,"holderName")])),default:c((()=>{var o,i;return[_("gasNumberCollection","HOLDER")&&(null==(i=null==(o=f(j).tenantOrderSubjectList)?void 0:o[0])?void 0:i.extInfo)?(s(),I(n,{key:0,modelValue:f(j).tenantOrderSubjectList[0].subjectNo,"onUpdate:modelValue":t[0]||(t[0]=e=>f(j).tenantOrderSubjectList[0].subjectNo=e),label:q("gasNumberCollection","title","HOLDER"),name:"subjectNo",required:k("gasNumberCollection","HOLDER"),"is-view":e.isView,maxlength:100},null,8,["modelValue","label","required","is-view"])):m("",!0)]})),_:3},8,["images","form-info","factor-list","is-view","need-desensitize","send-sms-code"])])),_:3},8,["title"])):m("",!0),(null==(d=f(V).INSURER)?void 0:d.length)?(s(),I(o,{key:1,"show-line":!1,"show-divider":!1,title:null==(L=e.titleCollection)?void 0:L.INSURER},{default:c((()=>[_("relationToHolder","INSURER")?(s(),I(n,{key:0,modelValue:f(j).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[3]||(t[3]=e=>f(j).tenantOrderInsuredList[0].relationToHolder=e),class:"relation-holder",name:"insure_relationToHolder",required:k("relationToHolder","INSURER"),label:q("relationToHolder","title","INSURER")},{input:c((()=>[u(i,{modelValue:f(j).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[2]||(t[2]=e=>f(j).tenantOrderInsuredList[0].relationToHolder=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:q("relationToHolder","attributeValueList","INSURER")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","required","label"])):m("",!0),e.isView||1!=+f(j).tenantOrderInsuredList[0].relationToHolder?(s(),I(S,{key:1,images:f(T),"onUpdate:images":t[4]||(t[4]=e=>v(T)?T.value=e:null),"form-info":f(j).tenantOrderInsuredList[0],"factor-list":f(V).INSURER||[],prefix:"insure","need-desensitize":e.needDesensitize,"send-sms-code":e.sendSmsCode,"is-view":e.isView},{name:c((()=>[p(e.$slots,"insurerName")])),_:3},8,["images","form-info","factor-list","need-desensitize","send-sms-code","is-view"])):m("",!0),_("social","INSURER")?(s(),I(n,{key:2,modelValue:f(j).tenantOrderInsuredList[0].extInfo.hasSocialInsurance,"onUpdate:modelValue":t[6]||(t[6]=e=>f(j).tenantOrderInsuredList[0].extInfo.hasSocialInsurance=e),label:q("social","title","INSURER"),name:"insure_hasSocialInsurance",required:k("social","INSURER")},{input:c((()=>[u(i,{modelValue:f(j).tenantOrderInsuredList[0].extInfo.hasSocialInsurance,"onUpdate:modelValue":t[5]||(t[5]=e=>f(j).tenantOrderInsuredList[0].extInfo.hasSocialInsurance=e),disabled:e.isView,prop:{label:"value",value:"code"},options:q("social","attributeValueList","INSURER")||[]},null,8,["modelValue","disabled","options"])])),_:1},8,["modelValue","label","required"])):m("",!0),_("occupation","INSURER")?(s(),I(r,{key:3,modelValue:f(j).tenantOrderInsuredList[0].extInfo.occupationCodeList[0],"onUpdate:modelValue":t[7]||(t[7]=e=>f(j).tenantOrderInsuredList[0].extInfo.occupationCodeList[0]=e),field0:f(j).tenantOrderInsuredList[0].extInfo.occupationCodeList[0],"onUpdate:field0":t[8]||(t[8]=e=>f(j).tenantOrderInsuredList[0].extInfo.occupationCodeList[0]=e),field1:f(j).tenantOrderInsuredList[0].extInfo.occupationCodeList[1],"onUpdate:field1":t[9]||(t[9]=e=>f(j).tenantOrderInsuredList[0].extInfo.occupationCodeList[1]=e),field2:f(j).tenantOrderInsuredList[0].extInfo.occupationCodeList[2],"onUpdate:field2":t[10]||(t[10]=e=>f(j).tenantOrderInsuredList[0].extInfo.occupationCodeList[2]=e),label:q("occupation","title","INSURER"),name:"insure_occupationCodeList","is-view":e.isView,required:k("occupation","INSURER"),"data-source":f(h),mapping:{label:"value",value:"code",children:"children"},"is-link":""},null,8,["modelValue","field0","field1","field2","label","is-view","required","data-source"])):m("",!0)])),_:3},8,["title"])):m("",!0),m("",!0)]})),_:3},8,["input-align"])])}}});export{U as _};

var te=Object.defineProperty,oe=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var T=(e,a,s)=>a in e?te(e,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[a]=s,x=(e,a)=>{for(var s in a||(a={}))ne.call(a,s)&&T(e,s,a[s]);if(q)for(var s of q(a))re.call(a,s)&&T(e,s,a[s]);return e},$=(e,a)=>oe(e,se(a));import{h as k,k as B,p as J,A as o,L as A,B as f,v as le,a5 as ie,a6 as ce,aa as ue,P as de,G as v,j as pe,r as U,m as me,n as G,s as _,T as S}from"./vendor-d6b13173.js";import{S as ve}from"./infoCollection-b0426750.js";import{_ as E,a1 as _e}from"./index-70bdfeb4.js";import{c as fe}from"./close-df102554.js";import{a as he}from"./order-b675ac95.js";import{d as ge,i as Ie,a as De,s as Ce,e as ye,E as xe}from"./trial-bf71e6ba.js";import{t as Se}from"./theme-eeb93d73.js";import{n as Oe,i as be,m as we,a as $e,g as Ue,t as ke,d as Be,b as H}from"./utils-3d23009a.js";import{p as Ee}from"./product-eec33c88.js";import"./trial-483cdd79.js";const Fe={class:"com-field-info"},Ne={class:"title"},Pe={class:"desc"},Re=k({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(e){return(a,s)=>(B(),J("div",Fe,[o("div",Ne,A(e.title),1),o("div",Pe,A(e.desc),1)]))}});var O=E(Re,[["__scopeId","data-v-74e2bdf6"]]);const K=e=>(ie("data-v-39527d44"),e=e(),ce(),e),Le={key:0,class:"pro-modal"},Ve=K(()=>o("div",{class:"pro-overlay"},null,-1)),Me={class:"pro-modal-wrapper"},qe=K(()=>o("div",{class:"pro-modal-content"},[o("p",null,"\u606D\u559C\u60A8"),o("p",null,"\u4FDD\u969C\u5347\u7EA7\u6210\u529F")],-1)),Te=["src"],Ae=k({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(e,{emit:a}){const s=e,p=()=>{a("on-close")};return(i,F)=>s.isShow?(B(),J("div",Le,[Ve,o("div",Me,[o("div",{class:"pro-modal-body"},[qe,o("div",{class:"pro-modal-btn",onClick:p},"\u6211\u77E5\u9053\u4E86")]),o("div",{class:"pro-modal-close",onClick:p},[o("img",{src:f(fe)},null,8,Te)])])])):le("",!0)}});var Ge=E(Ae,[["__scopeId","data-v-39527d44"]]);const He={class:"page-activity-upgrade"},Je=["src"],Ke={class:"container"},Ye={class:"main-form"},je=k({setup(e){const a=ue(),s=de(),{productCode:p="BWYL2022",tenantId:i,orderNo:F,agentCode:Y="",from:j}=s.query,m=v(),h=v(),t=v(),g=v(),b=v(),y=v(),w=v(!1),N=j==="check",W=()=>{w.value=!1},z=async()=>{var u,d,I,D,C;const n=Ue({tenantId:i,applicationNo:t.value.applicationNo,policyNo:t.value.policyNo,saleUserId:Y,saleChannelId:t.value.saleChannelId,orderStatus:he.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:m.value,insureDetail:h.value,paymentMethod:(d=(u=t.value.extInfo)==null?void 0:u.extraInfo)==null?void 0:d.paymentMethod,renewalDK:(D=(I=t.value.extInfo)==null?void 0:I.extraInfo)==null?void 0:D.renewalDK,successJumpUrl:"",premium:g.value,holder:$(x({},t.value.tenantOrderHolder),{socialFlag:t.value.tenantOrderHolder.extInfo.hasSocialInsurance}),insured:$(x({},t.value.tenantOrderInsuredList[0]),{socialFlag:t.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:ke({tenantId:i,riskList:Be(h.value.productRiskVoList[0].riskDetailVOList,m.value),riskPremium:{},productId:(C=m.value)==null?void 0:C.id})}),r=await Ce(n),{code:c,data:l}=r;return c==="10000"?l.data:""},P=n=>`${_e}/chuangxin/baigebao/orderDetail?orderNo=${n}&productCode=${p}&tenantId=${i}`,Q=async()=>{try{const n=H({tenantId:i,premium:g.value,orderDetail:t.value,productDetail:m.value,insureDetail:h.value,successJumpUrl:""}),r=await ye(n),{code:c,data:l}=r;c==="10000"&&(g.value=l.installmentPremium,y.value=l.signUrl),S.clear()}catch(n){console.log(n)}},X=async n=>{const r=H({tenantId:i,premium:g.value,orderDetail:t.value,productDetail:m.value,insureDetail:h.value,successJumpUrl:P(n)}),c=await xe(x({orderNo:n},r)),{code:l,data:u}=c;l==="10000"&&(N?a.replace(`/chuangxin/baigebao/orderDetail?orderNo=${n}&productCode=${p}&tenantId=${i}`):w.value=!0)},Z=async n=>{try{S.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"});const r=await z(),c=await ge({tenantId:i,applicationNo:t.value.applicationNo});if(y.value){const l=encodeURIComponent(encodeURIComponent(P(r))),u=`${y.value}&successUrl=${l}`;N?window.location.href=u:window.location.href=y.value}else X(r)}catch(r){console.log(r),S.clear()}},ee=()=>{S.loading({forbidClick:!0,duration:20*1e3,message:"\u8BD5\u7B97\u4E2D"});const n=Ee({productCode:p,withInsureInfo:!0,tenantId:i}),r=Ie({productCode:p}),c=De({orderNo:F,tenantId:i});Promise.all([n,r,c]).then(([l,u,d])=>{l.code==="10000"&&(m.value=l.data),u.code==="10000"&&(h.value=u.data),d.code==="10000"&&(t.value=d.data,b.value=d.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),Q()})};return pe(()=>{ee()}),(n,r)=>{const c=U("ProRadioButton"),l=U("ProField"),u=U("van-config-provider");return B(),me(u,{"theme-vars":f(Se)},{default:G(()=>{var d,I,D,C,R,L,V,M;return[o("div",He,[o("img",{src:(I=(d=m.value)==null?void 0:d.tenantProductInsureVO)==null?void 0:I.banner[0],class:"banner"},null,8,Je),o("div",Ke,[o("div",Ye,[_(O,{title:"\u59D3\u540D",desc:f(Oe)((C=(D=t.value)==null?void 0:D.tenantOrderInsuredList)==null?void 0:C[0].name)},null,8,["desc"]),_(O,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:f(be)((L=(R=t.value)==null?void 0:R.tenantOrderInsuredList)==null?void 0:L[0].certNo)},null,8,["desc"]),_(O,{title:"\u624B\u673A\u53F7\u7801",desc:f(we)((M=(V=t.value)==null?void 0:V.tenantOrderHolder)==null?void 0:M.mobile)},null,8,["desc"]),_(O,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${f($e)(g.value||0)}\u5143 / \u6BCF\u6708`},null,8,["desc"]),_(l,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:G(()=>[_(c,{modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=ae=>b.value=ae),disabled:!0,options:f(ve)},null,8,["modelValue","options"])]),_:1}),o("div",{class:"submit",onClick:Z})])]),_(Ge,{"is-show":w.value,onOnClose:W},null,8,["is-show"])])]}),_:1},8,["theme-vars"])}}});var ra=E(je,[["__scopeId","data-v-ebbdd806"]]);export{ra as default};

!function(){var e=document.createElement("style");e.innerHTML=".page-verify .card .people[data-v-7e8d1d5c]{flex:1;margin-left:.53333rem;display:flex;align-items:center}.page-verify .card .people .name[data-v-7e8d1d5c]{font-size:.4rem;font-weight:600;color:#393d46}.page-verify .card .people .status[data-v-7e8d1d5c]{margin-left:.26667rem;text-align:center;width:1.2rem;height:.53333rem;line-height:.53333rem;border-radius:.05333rem;border:1px solid #99a9c0;font-size:.32rem;color:#99a9c0}.page-verify .card .people .status.verified[data-v-7e8d1d5c]{color:var(--van-primary-color, var(--zaui-brand));border-color:var(--van-primary-color, var(--zaui-brand))}.page-verify .card .verify-item[data-v-7e8d1d5c]{display:flex;align-items:center;height:1.41333rem;line-height:1.41333rem;font-size:.4rem;color:#393d46}.page-verify .card .verify-item .no[data-v-7e8d1d5c]{margin-left:.64rem}.page-verify .card .verify-item .action[data-v-7e8d1d5c]{flex:1;display:flex;align-items:center;justify-content:flex-end;color:#99a9c0}.page-verify .card .verify-item .action .icon[data-v-7e8d1d5c]{margin-left:.13333rem;color:#99a9c0;font-size:.32rem}.page-verify .sign-card .resign[data-v-7e8d1d5c]{font-size:.37333rem;color:var(--van-primary-color, var(--zaui-brand))}.page-verify .sign-card .sign-body[data-v-7e8d1d5c]{padding-bottom:.4rem}.page-verify .sign-card .sign-body .date[data-v-7e8d1d5c]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-verify .sign-card .sign-body .file[data-v-7e8d1d5c]{margin-top:.21333rem;font-size:.37333rem;color:#393d46;line-height:.53333rem}.page-verify .sign-card .sign-body .file .file-name[data-v-7e8d1d5c]{color:var(--van-primary-color, var(--zaui-brand))}.page-verify .sign-card .sign-body .file .file-name .dun-hao[data-v-7e8d1d5c]{color:#393d46}.page-verify .footer[data-v-7e8d1d5c]{position:static;justify-content:space-between}.page-verify .footer .refresh-btn[data-v-7e8d1d5c]{width:.93333rem;border:none;color:var(--van-primary-color, var(--zaui-brand));font-size:.4rem;line-height:.37333rem;text-align:center}.page-verify .footer .refresh-btn .text[data-v-7e8d1d5c]{margin-top:.13333rem;font-size:.32rem}.page-verify .footer[data-v-7e8d1d5c] .com-share{flex:1;margin-left:.26667rem}.page-verify .footer .submit-btn[data-v-7e8d1d5c]{flex:1}\n",document.head.appendChild(e),System.register(["./index-legacy-991c023d.js","./verify-legacy-d5ca67bb.js","./order-legacy-a1a4eff5.js","./inform-legacy-e7639a4f.js","./pdfh5-legacy-9f98dc45.js"],(function(e){"use strict";var a,t,r,n,i,l,o,d,c,s,v,u,f,y,p,g,m,h,C,b,I,N,x,k,T,w,O,E,L,_,j,S,D,H,z,R,U,$,P,A,Y,G,M,F,q,Q,B,V,W,X,J;return{setters:[function(e){a=e._,t=e.d,r=e.a,n=e.u,i=e.ab,l=e.r,o=e.ac,d=e.E,c=e.G,s=e.b,v=e.c,u=e.e,f=e.w,y=e.i,p=e.f,g=e.ad,m=e.t,h=e.g,C=e.L,b=e.j,I=e.V,N=e.P,x=e.ae,k=e.m,T=e.h,w=e.a6,O=e.F,E=e.af,L=e.n,_=e.ag,j=e.T,S=e.p,D=e.ah,H=e.ai,z=e.M,R=e.N,U=e.O,$=e.aj,P=e.ak,A=e.al,Y=e.a9,G=e.B,M=e.X,F=e.Y},function(e){q=e.f,Q=e.s,B=e.g,V=e.a},function(e){W=e.a},function(e){X=e.g,J=e.l},function(){}],execute:function(){const K=e=>(M("data-v-7e8d1d5c"),e=e(),F(),e),Z={class:"page-verify"},ee={class:"people"},ae={class:"name"},te={class:"verify-item"},re=K((()=>y("div",{class:"label"},"证件号码",-1))),ne={class:"no"},ie=L(" 去认证 "),le={class:"sign-body"},oe={class:"date"},de={class:"file"},ce=L(" 签名将被用于以下文件： "),se={class:"people"},ve={class:"name"},ue={class:"verify-item"},fe=K((()=>y("div",{class:"label"},"证件号码",-1))),ye={class:"no"},pe=["onClick"],ge=L(" 去认证 "),me=["onClick"],he={class:"sign-body"},Ce={class:"date"},be={class:"file"},Ie=L(" 签名将被用于以下文件： "),Ne={class:"footer-button footer"},xe=K((()=>y("div",{class:"text"},"刷新",-1))),ke=L("分享"),Te=L("提交"),we=t({setup(e){const a=1,t=2,L=r(),M=n(),F=(()=>{const e=L.query;return e.orderCode&&(e.orderNo=e.orderCode,delete e.orderCode),e})(),{saleUserId:K="D1234567-1",tenantId:we="9991000007",templateId:Oe=1,productCode:Ee="CQ75CQ76",insurerCode:Le="ancheng",isShare:_e,orderCode:je,orderNo:Se,productCategory:De}=F,He=new i({source:"localStorage"}),ze=l([]),Re=l([]),Ue=l([]),$e=l([]),Pe=l(),Ae=l(),Ye=[],Ge=l(""),Me=l(),Fe=o().format("YYYY-MM-DD"),qe=()=>{var e,a;null===(e=Ae.value)||void 0===e||null===(a=e.clear)||void 0===a||a.call(e)},Qe=(e,a)=>{let t=window.location.href;t=t.includes("orderCode")?t:t.replace("orderNo","orderCode"),V({callbackUrl:t,certiNo:e,faceAuthMode:"TENCENT",userName:a,tenantId:9991000007}).then((t=>{const{code:r,data:n}=t;if("10000"===r){const{originalUrl:t,serialNo:r}=n;window.location.href=t,He.set("verifyData",{serialNo:r,certNo:e,name:a})}}))},Be=e=>{const{id:a,objectType:t}=e;Ge.value="",Me.value="";const r={1:"pdf",2:"richText",3:"link"};X({insurerCode:Le,id:a,objectType:t,productCategory:De,orderNo:Se,tenantId:we}).then((({code:e,data:a})=>{if("10000"===e){const{textType:e,content:t,questionType:n}=(null==a?void 0:a[0])||{};2===n?(Ge.value="question",Me.value=a):(1===e&&t.includes("png")?Ge.value="picture":Ge.value=r[e],Me.value=t)}}))},Ve=e=>`${e}`===_.CERT,We=e=>{var a,t,r,n;-1===e?Qe(null===(a=Pe.value.tenantOrderHolder)||void 0===a?void 0:a.certNo,null===(t=Pe.value.tenantOrderHolder)||void 0===t?void 0:t.name):Qe(null===(r=Pe.value.tenantOrderInsuredList[e])||void 0===r?void 0:r.certNo,null===(n=Pe.value.tenantOrderInsuredList[e])||void 0===n?void 0:n.name)},Xe=e=>{e&&Ye.every((a=>a!==e))&&Ye.push(e)},Je=()=>{var e,t,r,n;(null===(e=Ae.value)||void 0===e?void 0:e.isEmpty())?j.fail("请投保人签名"):(null===(t=Pe.value.tenantOrderHolder)||void 0===t||null===(r=t.extInfo)||void 0===r?void 0:r.isCert)!==a&&Ve(null===(n=Pe.value.tenantOrderHolder)||void 0===n?void 0:n.certType)?j.fail("请投保人去认证"):S({orderNo:je||Se,saleUserId:K,tenantId:we}).then((e=>{const{code:a,data:t}=e;"10000"===a&&([W.PENDING,W.PAYMENT_FAILED,W.UNDER_WRITING_SUCCESS].includes(t.orderStatus)?H.confirm({title:"提示",message:"请确认信息填写无误后，再进行支付"}).then((()=>{var e,t;const r=null===(e=Ae.value)||void 0===e?void 0:e.save();Promise.all([Q("HOLDER",r,null===(t=Pe.value)||void 0===t?void 0:t.id,`${we}`)]).then((()=>{z({...Pe.value,pageCode:"sign",operateOption:{withSignInfo:!0},extInfo:{...Pe.value.extInfo,pageCode:"sign",templateId:Oe,shareFlag:_e?"Y":"N",buttonCode:R.sign},venderCode:Le}).then((e=>{const{code:t,data:r}=e;"10000"===a&&r.success&&M.push({path:U[r.pageAction.data.nextPageCode],query:{orderNo:je||Se,saleUserId:K,tenantId:we}})}))}))})):D("paymentResult",F))}))},Ke=(e=!1)=>{S({orderNo:je||Se,saleUserId:K,tenantId:we}).then((a=>{const{code:r,data:n}=a;if("10000"===r){var i,l;if(Pe.value=n,e)(null==n||null===(i=n.tenantOrderHolder)||void 0===i||null===(l=i.extInfo)||void 0===l?void 0:l.isCert)===t||null!=n&&n.tenantOrderInsuredList.some((e=>{var a;return(null===(a=e.extInfo)||void 0===a?void 0:a.isCert)===t}))?j("用户未完身份认证及签字"):null!=n&&n.tenantOrderAttachmentList.find((e=>e.category===$.ELECTRIC_SIGN&&e.objectType===P.HOLDER))&&null!=n&&n.tenantOrderAttachmentList.find((e=>e.category===$.ELECTRIC_SIGN&&e.objectType===P.INSURED))||j("用户未完身份认证及签字");setTimeout((()=>{let e=0;n.tenantOrderAttachmentList.forEach((a=>{var t,r;if(a.category===$.ELECTRIC_SIGN)if(a.objectType===P.HOLDER)null===(t=Ae.value)||void 0===t||null===(r=t.clear)||void 0===r||r.call(t),Ae.value.setDataURL(a.fileBase64);else if(a.objectType===P.INSURED){var n,i;null===(n=Ye[e])||void 0===n||null===(i=n.clear)||void 0===i||i.call(n),Ye[e].setDataURL(a.fileBase64),e+=1}}))}))}}))},Ze=()=>{Ke(!0)},ea=d((()=>{const e={...F,isShare:1,sharePageCode:"sign"};return`${window.location.origin}/phoneVerify?${A.stringify(e)}`}));return c((()=>{Ke(),(async()=>{const e={orderNo:je||Se,productCode:Ee,tenantId:we,objectType:1},a={insurerCode:Le,orderNo:Se,productCategory:De,tenantId:we,noticeType:4,objectType:1},{code:t,data:r}=await B(e),{code:n,data:i}=await B({...e,objectType:2}),{code:l,data:o}=await J(a),{code:d,data:c}=await J({...a,noticeType:5,objectType:2});"10000"===t&&(Re.value=r||[]),"10000"===n&&(ze.value=i||[]),"10000"===l&&($e.value=o||[]),"10000"===d&&(Ue.value=c||[])})();const e=He.get("verifyData");if(e){const{serialNo:a,certNo:t,name:r}=e;q({certiNo:t,orderNo:je||Se,serialNo:a,tenantId:we,userName:r}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(He.remove("verifyData"),Ke())}))}})),(e,t)=>{const r=Y,n=G,i=s("ProPageWrap");return v(),u(i,null,{default:f((()=>{var e;return[y("div",Z,[p(g,{type:"warning",title:"尊敬的客户，本次投保需要进行身份认证",content:"本产品投保需要对投保人、被保人进行实名认证，您购买本产品的累计总保费已超过20万，按监管要求，需要提供投保人、被保人、指定受益人证件影像，本产品非本人投保且带身故责任、需对投保人、被保人（成人）的投保意愿进行签字确认。"}),p(N,{title:"投保人",class:"card"},{extra:f((()=>{var e,t,r,n,i,l,o,d,c,s;return[y("div",ee,[y("div",ae,m(null===(e=Pe.value)||void 0===e||null===(t=e.tenantOrderHolder)||void 0===t?void 0:t.name),1),Ve(null===(r=Pe.value)||void 0===r||null===(n=r.tenantOrderHolder)||void 0===n?void 0:n.certType)?(v(),h("div",{key:0,class:C(["status",{verified:(null===(i=Pe.value)||void 0===i||null===(l=i.tenantOrderHolder)||void 0===l||null===(o=l.extInfo)||void 0===o?void 0:o.isCert)===a}])},m((null===(d=Pe.value)||void 0===d||null===(c=d.tenantOrderHolder)||void 0===c||null===(s=c.extInfo)||void 0===s?void 0:s.isCert)===a?"已认证":"待认证"),3)):b("",!0)])]})),default:f((()=>{var e,r,n,i,l,o,d;return[y("div",te,[re,y("div",ne,m(null===(e=Pe.value)||void 0===e||null===(r=e.tenantOrderHolder)||void 0===r?void 0:r.certNo),1),(null===(n=Pe.value)||void 0===n||null===(i=n.tenantOrderHolder)||void 0===i||null===(l=i.extInfo)||void 0===l?void 0:l.isCert)!==a&&Ve(null===(o=Pe.value)||void 0===o||null===(d=o.tenantOrderHolder)||void 0===d?void 0:d.certType)?(v(),h("div",{key:0,class:"action",onClick:t[0]||(t[0]=e=>We(-1))},[ie,p(I,{name:"right_arrow",class:"icon"})])):b("",!0)])]})),_:1}),p(N,{key:"-1",title:"投保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:f((()=>[y("div",{class:"resign",onClick:qe},"重签")])),default:f((()=>[p(x,{ref_key:"holderSign",ref:Ae,class:"sign"},null,512),y("div",le,[y("div",oe,"签名日期： "+m(k(Fe)),1),y("div",de,[ce,y("span",null,[(v(!0),h(O,null,T(Re.value,((e,a)=>(v(),u(r,{key:`holderFileList-${a}`,class:"file",title:`《${e.materialName}》`,content:e.materialContent,type:k(w)(e.materialContent,e.materialSource+""),onClick:t[1]||(t[1]=()=>"")},null,8,["title","content","type"])))),128))]),(v(!0),h(O,null,T($e.value,((e,a)=>(v(),u(r,{key:`holderQuestionList-${a}`,class:"file",title:`《${e.title}》`,content:Me.value,type:Ge.value,onClick:()=>Be(e)},null,8,["title","content","type","onClick"])))),128))])])])),_:1}),(v(!0),h(O,null,T(null===(e=Pe.value)||void 0===e?void 0:e.tenantOrderInsuredList,((e,n)=>(v(),h("div",{key:n},[p(N,{title:"被保人",class:"card"},{extra:f((()=>{var t,r;return[y("div",se,[y("div",ve,m(e.name),1),Ve(e.certType)?(v(),h("div",{key:0,class:C(["status",{verified:(null===(t=e.extInfo)||void 0===t?void 0:t.isCert)===a}])},m((null===(r=e.extInfo)||void 0===r?void 0:r.isCert)===a?"已认证":"待认证"),3)):b("",!0)])]})),default:f((()=>{var t;return[y("div",ue,[fe,y("div",ye,m(e.certNo),1),(null===(t=e.extInfo)||void 0===t?void 0:t.isCert)!==a&&Ve(e.certType)?(v(),h("div",{key:0,class:"action",onClick:e=>We(n)},[ge,p(I,{name:"right_arrow",class:"icon"})],8,pe)):b("",!0)])]})),_:2},1024),p(N,{title:"被保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:f((()=>[y("div",{class:"resign",onClick:e=>(e=>{var a,t;null===(a=Ye[e])||void 0===a||null===(t=a.clear)||void 0===t||t.call(a)})(n)},"重签",8,me)])),default:f((()=>[p(x,{ref_for:!0,ref:Xe,class:"sign"}),y("div",he,[y("div",Ce,"签名日期： "+m(k(Fe)),1),y("div",be,[Ie,(v(!0),h(O,null,T(ze.value,((e,a)=>(v(),u(r,{key:`insuredFileList-${a}`,class:"file",title:`《${e.materialName}》`,content:e.materialContent,type:k(w)(e.materialContent,e.materialSource+""),onClick:t[2]||(t[2]=()=>"")},null,8,["title","content","type"])))),128)),(v(!0),h(O,null,T(Ue.value,((e,a)=>(v(),u(r,{key:`insuredQuestionList-${a}`,class:"file",title:`《${e.title}》`,content:Me.value,type:Ge.value,onClick:()=>Be(e)},null,8,["title","content","type","onClick"])))),128))])])])),_:2},1024)])))),128)),y("div",Ne,[k(_e)?b("",!0):(v(),h("div",{key:0,class:"refresh-btn",onClick:Ze},[y("div",null,[p(I,{name:"refresh"})]),xe])),k(_e)?b("",!0):(v(),u(E,{key:1,title:"邀请您进行身份认证",desc:"邀请您进行身份认证",link:k(ea)},{default:f((()=>[p(n,{plain:"",type:"primary",class:"share-btn"},{default:f((()=>[ke])),_:1})])),_:1},8,["link"])),p(n,{type:"primary",class:"submit-btn",onClick:Je},{default:f((()=>[Te])),_:1})])])]})),_:1})}}});e("default",a(we,[["__scopeId","data-v-7e8d1d5c"]]))}}}))}();

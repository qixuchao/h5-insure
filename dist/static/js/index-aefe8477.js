var Y=Object.defineProperty,$=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var h=(u,o,a)=>o in u?Y(u,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[o]=a,C=(u,o)=>{for(var a in o||(o={}))W.call(o,a)&&h(u,a,o[a]);if(P)for(var a of P(o))z.call(o,a)&&h(u,a,o[a]);return u},D=(u,o)=>$(u,M(o));import{g as G,aj as Q,Q as J,a5 as K,C as _,L as X,x as Z,o as ee,r as f,h as p,j as g,k as l,z as m,n as i,s as L,m as T,F as te,E as ne,y as c,I as E,B as re}from"./vendor-fc34688e.js";import{P as oe}from"./index-4605c6d6.js";import{c as ae,n as se,a as ie}from"./index-38387cec.js";import{_ as R,R as ue,B as le,a as de}from"./index-d13a07c5.js";import{I as ce}from"./InsuredPart-0be026fc.js";import"./useDicData-85efbb7d.js";import"./index-dab9ee00.js";import"./trial-24293a62.js";const fe={key:0,class:"beneficiary-part"},pe={class:"part-title"},me={class:"title"},Ie={class:"radio-item-wrapper"},_e={class:"name"},ye={class:"hone"},ve={class:"address"},Oe={class:"footer-button"},Be=re("\u4E0B\u4E00\u6B65"),Ce=G({setup(u){const o=Q(),a=J(),{templateId:A=1,orderNo:b="2022072710380711215",tenantId:V="9991000007"}=a.query;K();const x=a.path==="/infoPreview"?"infoPreview":"infoCollection",y=_({}),r=_({extInfo:{pageCode:x},tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0}}),H=_(null),v=_([]),O=_([]),F=X({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),B=Z(()=>{var d,e;return((e=(d=r.value.extInfo)==null?void 0:d.contactInfo)==null?void 0:e[0])||{}}),w=()=>{se(r.value).then(({code:d,data:e})=>{d==="10000"&&e.pageAction.pageAction==="jumpToPage"&&o.push({path:oe[e.pageAction.data.nextPageCode],query:a.query})})},N=()=>{ie({orderNo:b,tenantId:V}).then(({code:d,data:e})=>{if(d==="10000"){const t=e;t.extInfo=D(C({},t.extInfo),{pageCode:x,templateId:A}),t.tenantOrderHolder=t.tenantOrderHolder||{},t.tenantOrderHolder.extInfo=t.tenantOrderHolder.extInfo||{},t.tenantOrderInsuredList[0].extInfo=t.tenantOrderInsuredList[0].extInfo||{},t.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=t.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map(n=>{const I=n;return I.extInfo={},I}),t.tenantOrderAttachmentList.forEach(n=>{n.category,n.objectType,n.category===22?n.objectType===2?v[0]=n.uri:n.objectType===3&&(O[0]=n.uri):n.category===23&&(n.objectType===2?v[1]=n.uri:n.objectType===3&&(O[1]=n.uri))}),Object.assign(r.value,t)}}).finally(()=>{F.isLoading=!1})};return ee(()=>{N(),ae({pageCode:"infoCollection",templateId:A}).then(({code:d,data:e})=>{if(d==="10000"){const t={BENEFICIARY:[],INSURER:[],HOLDER:[]};e.productInsureFactorList.forEach(n=>{(t[n.moduleType]=t[n.moduleType]||[]).push(n)}),y.value=t}})}),(d,e)=>{const t=f("ProCard"),n=f("ProRadioButton"),I=f("ProField"),k=f("van-cell"),j=f("ProForm"),U=f("VanButton"),S=f("ProPageWrap");return p(),g(S,{class:"page-info-wrapper"},{default:l(()=>[m(F).isLoading?L("",!0):(p(),g(j,{key:0,ref_key:"formRef",ref:H,"is-view":""},{default:l(()=>[i(ce,{"product-data":r.value.tenantOrderInsuredList[0].tenantOrderProductList[0]},null,8,["product-data"]),i(t,{title:"\u6295\u4FDD\u4EBA"},{default:l(()=>[i(R,{images:v.value,"onUpdate:images":e[0]||(e[0]=s=>v.value=s),"form-info":r.value.tenantOrderHolder,"factor-list":y.value.HOLDER,"is-view":""},null,8,["images","form-info","factor-list"])]),_:1}),i(t,{title:"\u88AB\u4FDD\u4EBA"},{default:l(()=>[i(I,{modelValue:r.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.tenantOrderInsuredList[0].relationToHolder=s),label:"\u4E3A\u8C01\u4FDD\u5355",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:l(()=>[i(n,{modelValue:r.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":e[1]||(e[1]=s=>r.value.tenantOrderInsuredList[0].relationToHolder=s),options:m(ue),"is-view":""},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),+r.value.tenantOrderInsuredList[0].relationToHolder!=1?(p(),g(R,{key:0,images:O.value,"onUpdate:images":e[3]||(e[3]=s=>O.value=s),"form-info":r.value.tenantOrderInsuredList[0],"factor-list":y.value.INSURER||[],"is-view":""},null,8,["images","form-info","factor-list"])):L("",!0),i(I,{label:"\u6295\u4FDD\u5730\u533A",name:"type",placeholder:"\u8BF7\u9009\u62E9","is-link":""})]),_:1}),i(t,{title:"\u53D7\u76CA\u4EBA"},{default:l(()=>[i(I,{modelValue:r.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":e[5]||(e[5]=s=>r.value.tenantOrderInsuredList[0].insuredBeneficiaryType=s),label:"\u53D7\u76CA\u4EBA\u7C7B\u578B",name:"insuredBeneficiaryType",placeholder:"\u8BF7\u9009\u62E9"},{input:l(()=>[i(n,{modelValue:r.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":e[4]||(e[4]=s=>r.value.tenantOrderInsuredList[0].insuredBeneficiaryType=s),options:m(le),"is-view":""},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),r.value.tenantOrderInsuredList[0].insuredBeneficiaryType==2?(p(),T("div",fe,[(p(!0),T(te,null,ne(r.value.tenantOrderInsuredList[0].beneficiaryReqList,(s,q)=>(p(),T("div",{key:s.beneficiaryId,class:"beneficiary-item"},[c("div",pe,[c("span",me,E(`\u53D7\u76CA\u4EBA${q+1}`),1)]),i(de,{"is-view":"","form-info":s,"factor-list":y.value.BENEFICIARY},null,8,["form-info","factor-list"])]))),128))])):L("",!0)]),_:1}),i(t,{title:"\u4FDD\u5355\u901A\u8BAF\u4FE1\u606F"},{default:l(()=>[Object.keys(m(B)).length?(p(),g(k,{key:0,title:"\u5355\u5143\u683C"},{title:l(()=>[c("div",Ie,[c("p",null,[c("span",_e,E(m(B).contactName),1),c("span",ye,E(m(B).contactPhoneNo),1)]),c("p",ve,E(m(B).contactAddress),1)])]),_:1})):L("",!0)]),_:1})]),_:1},512)),c("div",Oe,[i(U,{block:"",type:"primary",onClick:w},{default:l(()=>[Be]),_:1})])]),_:1})}}});export{Ce as default};

import{d as e,c9 as a,k as t,o as l,c as s,b as i,w as o,F as n,s as r,u as d,p as c,v as u,e as p,ao as v,n as m,f,a as h,bp as g,bo as A,dN as y,af as I,ag as b,dd as k,h as w,i as x,ad as _,ap as C,j as E,r as L,dC as O,E as S,aI as T,M as P,bH as B,ah as j,dD as D,aG as R,l as N,cr as V,q as F,ci as U,aJ as M,T as $,aO as q,aN as H,c8 as z,ai as G,al as Q,an as Y,bz as J,dG as Z,aQ as K,dF as W,c4 as X,ay as ee}from"./index-2278a2d6.js";import{q as ae,_ as te}from"./lian-c79b9cc3.js";import{c as le}from"./cloneDeep-fc21491a.js";import{i as se,u as ie,j as oe,s as ne,g as re}from"./trial-9a4d1309.js";import{a as de,c as ce}from"./product-4e616cc7.js";import{n as ue}from"./nextStep-f2296c4b.js";import{e as pe,f as ve,S as me}from"./infoCollection-4919a7c6.js";import{P as fe}from"./index-71fe3b71.js";import{g as he,r as ge}from"./utils-3d4e7c9e.js";import Ae from"./index-1ad21765.js";import ye from"./Video-2357d2a5.js";import Ie from"./index-5f83996e.js";import be from"./index-632047b7.js";import ke from"./index-17207dfe.js";import{u as we}from"./useOrder-6ac48bc3.js";import{_ as xe}from"./TrialButton-239d01a7.js";import{u as _e}from"./useAttachment-5f80647c.js";import{p as Ce,t as Ee}from"./utils-335247cc.js";import"./PolicyInfo-4b3bd6f9.js";import{P as Le}from"./constants-a91dacd0.js";import"./core-c0e87ed9.js";import"./questionnaire-42dcb602.js";import"./util-78c49ceb.js";import"./trial-0a69ca6d.js";import"./index-64e30598.js";import"./index-bdf92a42.js";import"./useThread-637a02aa.js";import"./jsbridgePromise-204cb700.js";import"./index-370099bf.js";import"./format-31cde443.js";import"./createProposal-830c75a6.js";const Oe={class:"refueling-package-com"},Se=h("div",{class:"title"},"加油包",-1),Te=e({name:"package"}),Pe=e({...Te,props:{packageProductList:{default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{default:3}},setup(e){const h=e,[I,b]=a(!1),k=t((()=>h.packageProductList.length>h.count&&(!!h.isShowClose||!I.value))),w=()=>{b()},x=t((()=>h.packageProductList.length<=h.count||I.value?h.packageProductList:h.packageProductList.slice(0,h.count)));return(e,a)=>{const t=g,h=A,b=y;return l(),s("div",Oe,[Se,i(b,{ref:"formRef"},{default:o((()=>[(l(!0),s(n,null,r(d(x),((e,a)=>(l(),c(h,{key:`${e.value}_${a}`,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,label:e.packageName,required:"",placeholder:"请选择"},{input:o((()=>[i(t,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,options:d(pe),disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","options","disabled"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])))),128)),d(k)?(l(),s("div",{key:0,class:"show-more",onClick:w},[u(p(d(I)?"收起":"查看更多")+" ",1),i(v,{name:"down",class:m(["icon",{showMore:d(I)}])},null,8,["class"])])):f("",!0)])),_:1},512)])}}});const Be={key:0},je=[h("div",{class:"__skeleton_short_content__"},[h("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[h("div",{class:"page-internet-product-detail"},[h("div",{class:"info"},[h("div",{class:"van-image banner",style:{width:"100%",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[h("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1676527379&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=tkscLe6oOZYjnRIA%2B7AiMS3bOs0%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),h("div")]),h("div",{class:"guarantee-list"},[h("div",{class:"header"},[h("span",null,[h("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"保障计划")]),h("span",null,[h("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"查看详情")])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"一般医疗保险金")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高300万")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"重大疾病医疗保险金")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤质子重离子医疗")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤院外特定药品费用医疗")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤特定器械耗材费用医疗责任 （适用于女性被保险人）")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高100万")])])]),h("div",{class:"show-more"},[h("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"查看更多 "),h("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[h("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),h("div",{class:"feerate-view sk-border"},[h("span",null,[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00元/年起")])])]),h("div",{class:"com-divider"}),h("div",{class:"tabs",sticky:"",scrollspy:""},[h("div",null,[h("div",{class:"van-sticky"},[h("div",{class:"van-tabs"},[h("div",{id:"tab-list",class:"tab-list"},[h("a",{class:"tab-title active",title:"产品亮点"},[h("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"产品亮点")]),h("a",{class:"tab-title",title:"理赔说明"},[h("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"理赔说明")]),h("a",{class:"tab-title",title:"我要投保"},[h("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"我要投保")])])])])]),h("div",{class:"tab-content"},[h("div",{id:"tab1"},[h("div",{class:"spec"},[h("div",{class:"van-image detail-img",style:{width:"100%"}},[h("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)],De=["theme-vars"],Re={class:"info"},Ne={class:"custom-page-form"},Ve=h("div",{id:"xinaoDialog"},null,-1),Fe=e({name:"InsuranceShort"}),Ue=e({...Fe,setup(e){const a=I((()=>b((()=>import("./index-61d7379d.js")),["static/js/index-61d7379d.js","static/css/index-fa4edf2a.css","static/js/index-2278a2d6.js","static/css/index-c51a28e6.css","static/js/theme-94cf7d00.js","static/js/index-370099bf.js","static/css/index-bbfdd7ec.css","static/js/utils-3d4e7c9e.js","static/js/infoCollection-4919a7c6.js","static/js/trial-0a69ca6d.js"]))),r=I((()=>b((()=>import("./index-5b2b48a0.js")),["static/js/index-5b2b48a0.js","static/css/index-c1e75aab.css","static/js/index-2278a2d6.js","static/css/index-c51a28e6.css"]))),v=I((()=>b((()=>import("./index-7fa52f50.js")),["static/js/index-7fa52f50.js","static/css/index-30daacf2.css","static/js/index-2278a2d6.js","static/css/index-c51a28e6.css","static/js/index-a26d483e.js","static/css/index-fb4b747b.css","static/js/infoCollection-4919a7c6.js","static/js/trial-0a69ca6d.js"]))),m=I((()=>b((()=>import("./index-4c019035.js")),["static/js/index-4c019035.js","static/css/index-eabeb59f.css","static/js/index-2278a2d6.js","static/css/index-c51a28e6.css"])));I((()=>b((()=>import("./index-de3940a0.js")),["static/js/index-de3940a0.js","static/css/index-793d1580.css","static/js/index-2278a2d6.js","static/css/index-c51a28e6.css"])));const g=I((()=>b((()=>import("./index-5029e3bb.js")),["static/js/index-5029e3bb.js","static/css/index-90a5175b.css","static/js/index-2278a2d6.js","static/css/index-c51a28e6.css","static/js/validator-6eb2e74e.js"]))),{VITE_BASE:A}={VITE_BASE:"/",VITE_API_BASEURL:"/",VITE_APP_TITLE:"投保流程",VITE_THEME_COLOR:"#C41E21",VITE_APP_DESCRIPTION:"一种互联网投保的快速落地实现方案",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},y=k(),pe=w(),Oe=x(),{productCode:Se="",orderNo:Te,proposalId:Fe,tenantId:Ue,extraInfo:Me,insurerCode:$e,preview:qe,isShare:He,agentCode:ze,templateId:Ge,proposalInsuredId:Qe}=Oe.query,{agentCode:Ye}=_.get(`${C}_userInfo`)||{},Je=E(),Ze=E(),Ke=E(),We=E(),Xe=E(!1),ea=E({}),aa=E({}),ta=E(!1),la=E(!1),sa=E(0),ia=E(!1);E({});const oa=E(!0),na=E(!0),ra=E(""),da=E([]),ca=E({}),ua=E({}),pa=E([]),va=E(),ma=L({submitData:{},riskVOList:[{}],userData:{},ifPersonalInfoSuccess:!1,trialMsg:"",trialResult:{},isFirst:!0}),fa=E(),ha=E({}),ga=E({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=true`}),Aa=we({extInfo:{templateId:Ge,iseeBizNo:""},periodType:O.short}),ya=E(),Ia=E(),ba=E(),ka=E(!1),wa=E();E(!1);const xa=E(),_a=E(!1),Ca=E({}),Ea=t((()=>!!qe)),La=E([]),Oa=E(),Sa=E(!0),Ta=E(!1),Pa=async()=>{de({productCode:Se}).then((({data:e,code:a})=>{"10000"===a&&(ea.value=e,document.title=e.BASIC_INFO.title||"",ea.BASIC_INFO=e.BASIC_INFO,e.BASIC_INFO&&e.BASIC_INFO.themeType&&U(e.BASIC_INFO.themeType))})),await se({productCode:Se,isTenant:!qe}).then((({data:e,code:a})=>{var t;"10000"===a&&(ia.value=!0,aa.value=e,ca.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],pa.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),Fe?Ce({proposalId:Fe,productCode:Se,tenantId:Ue,proposalInsuredId:Qe},(e=>{J("计划书查询参数"),ma.userData=e,Sa.value=!1})):Sa.value=!1,na.value=!1,ce({productCode:Se}).then((({code:e,data:a})=>{var t,l,s,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:o}=a;Oa.value=e||[];const{basicInfo:{questionnaireType:n},questions:r,questionnaireName:d}=(null==(t=null==o?void 0:o[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};n&&(La.value=2===n?[{attachmentName:d,attachmentUri:r,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(l=null==r?void 0:r[0])?void 0:l.content,attachmentType:he(String(null==(s=null==r?void 0:r[0])?void 0:s.textType),null==(i=null==r?void 0:r[0])?void 0:i.content)}])}P((()=>{ma.isFirst=!1}))}))},Ba=E([]);S((()=>Ca.value.planCode),(e=>{ca.value=(aa.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const ja=()=>{We.value.handleClickTab()("tab3")},Da=E(""),Ra=E(0),Na=E(),Va=async()=>{if(Ea.value)window.location.href=`${window.location.origin}${A}baseInsurance/orderDetail?orderNo=mockOrderNo&tenantId=${Ue}&ISEE_BIZ=${ra}&productCode=${Se}&preview=true&templateView=${Ge}`;else try{const e=Ee(Na.value,ma.trialResult,{...Aa.value,extInfo:{...Aa.value.extInfo,iseeBizNo:ra.value,autoRenewalInfo:va.value,buttonCode:Z.short.saveOrUpdate,pageCode:"productInfo"},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}});ue(e,(async(e,a,t)=>{a===K.JUMP_PAGE?pe.push({path:Le[e.nextPageCode],query:{tenantId:Ue,orderNo:Te}}):a===K.JUMP_ALERT&&"faceAuth"===e.alertType&&H.confirm({message:t,confirmButtonText:"去分享",cancelButtonText:"被保人确认"}).then((()=>{const e={...Oe.query,isShare:1,orderNo:Te,agentCode:Ye,objectType:"insured",origin:"share"};ha.value={title:"标题",desc:"描述",imageUrl:W,url:`${window.location.origin}${window.location.pathname}?${X.stringify(e)}`,link:`${window.location.origin}${window.location.pathname}?${X.stringify(e)}`},fa.value.handleShare(ha.value),_a.value=!0,xa.value.run()})).catch((()=>{pe.push({path:Le.faceVerify,query:{...Oe.query,objectType:"insured",origin:"confirm"}})}))}))}catch(e){console.log(e)}},{fileList:Fa,mustReadFileCount:Ua,popupFileList:Ma}=_e(ca,Oa),$a=()=>{const e=[];return da.value.filter((e=>e.value===ve.INSURE)).forEach((a=>{e.push(...a.productRiskVoList)})),e},qa=()=>{var e;Ma.value.length>0?(oa.value=!1,e=0,sa.value=e,la.value=!0):La.value.length>0?ta.value=!0:Va()},Ha=()=>{ta.value=!1,la.value=!1,oa.value=!0},za=(e,a)=>{if(e){const t=["birthday","age","gender","id"];a.includes("occupationCodeList")&&t.push("occupationClass"),Object.keys(e).forEach((l=>{[...a,...t].includes(l)||(e[l]=null)}))}},Ga=(e,a=(e=>!0))=>q(e)?e.filter(a).map((e=>e.code)):[],Qa=()=>{var e;const{insuranceEndDate:a,insuranceStartDate:t}=Ca.value;Object.assign(ma.submitData,{...ma.userData,tenantId:Ue,productCode:Se,productName:aa.value.productName,commencementTime:t,expiryDate:a}),ma.riskList=(()=>{const{chargePeriod:e,coveragePeriod:a,paymentFrequency:t,insuranceEndDate:l,insuranceStartDate:s}=Ca.value;return ge([...Ba.value,...$a()]).map((l=>({...l,paymentFrequency:t,chargePeriod:e,coveragePeriod:a})))})();const l=ma.submitData;return(null==(e=l.insuredList)?void 0:e.length)&&(l.insuredList=l.insuredList.map((e=>({...e,planCode:ca.value.planCode,productList:[{insurerCode:$e,productName:aa.value.productName,productCode:Se,riskList:ma.riskList}]})))),l},Ya=T((async(e=!1)=>{if(console.log(">>>>>调用试算<<<<<"),ma.ifPersonalInfoSuccess||Ke.value.canTrail()){console.log(">>>数据构建<<<",ma.submitData);const a=Qa();await(async(e,a=!1)=>{ma.trialMsg="试算中...",ma.trialResult={};let t=!1;const{code:l}=await ie(e);t="10000"===l,t&&oe(e).then((a=>{var t,l;a.data&&a.code===M?((null==(t=null==a?void 0:a.data)?void 0:t.errorInfo)&&$(`${null==(l=null==a?void 0:a.data)?void 0:l.errorInfo}`),Na.value=e,ma.trialMsg="",ma.trialResult=a.data):ma.trialMsg=""})).finally((()=>{ma.isFirst=!1}))})(a,e)}}),300),Ja=async(e,a=!1)=>{(e=>{const{holder:a,insuredList:t}=e||{};a&&(ma.submitData.holder=a),t&&t.length>0&&t.forEach(((e,a)=>{var t;ma.submitData.insuredList&&ma.submitData.insuredList.length>a?ma.submitData.insuredList[a]=e:((null==(t=ma.submitData)?void 0:t.insuredList)||(ma.submitData.insuredList=[]),ma.submitData.insuredList.push(e))}))})(e),ma.ifPersonalInfoSuccess=!0,console.log("投被保人的信息回传 ",e),Ya()},Za=async()=>{var e;if(ma.isFirst=!1,Ea.value)qa();else{if(!He)return void(()=>{const e=Ee(Qa(),ma.trialResult,{...Aa.value,extInfo:{...Aa.value.extInfo,iseeBizNo:ra.value,autoRenewalInfo:va.value},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}});ne(e).then((({code:e,data:a})=>{if("10000"===e){const e={...Oe.query,isShare:1,orderNo:a,agentCode:Ye,date:ee().format("YYYY-MM-DD")};ha.value={title:"标题",desc:"描述",imageUrl:W,link:`${window.location.origin}${window.location.pathname}?${X.stringify(e)}`,url:`${window.location.origin}${window.location.pathname}?${X.stringify(e)}`},fa.value.handleShare(ha.value)}}))})();va.value=await Ze.value.validate(),Promise.all([null==(e=ya.value)?void 0:e.validate(),Ke.value.validate()]).then((async e=>{ze===Ia.value.agentCode?Va():H.alert({message:"代理人工号有误，请核对后重新录入",confirmButtonText:"我知道了"})})).catch((e=>{z(".page-internet-product-detail",".van-field--error")}))}},Ka=T((()=>{console.log("----监听事件变化，重新触发试算------",Ke.value.validateTrialFields()),Ke.value.validateTrialFields()&&Ja(ma.userData)}),400);S((()=>Aa.value.insuredList[0].relationToHolder),((e,a)=>{e!==a&&da.value&&da.value.forEach((e=>{e.value=ve.UN_INSURE})),P((()=>{const{certType:e,extInfo:a}=Aa.value.insuredList[0];a&&!a.hasSocialInsurance&&(Aa.value.insuredList[0].extInfo.hasSocialInsurance=me.HAS)}))}),{deep:!0,immediate:!0}),S([()=>ca.value,()=>Ca.value,()=>da.value],(()=>{ma.isFirst||Ka()}),{deep:!0,immediate:!0}),S((()=>ca.value),((e,a)=>{var t,l;const{oilPackageProductVOList:s,planCode:i,insureProductRiskVOList:o,productFactor:n}=e||{};Ca.value.planCode=i,Ba.value=o,ba.value=null==(l=null==(t=B(n))?void 0:t.agent)?void 0:l.schema,ua.value=(o||[]).find((e=>e.mainRiskFlag===j.YES)),da.value=(s||[]).map((e=>({...e,value:ve.UN_INSURE}))),i!==(null==a?void 0:a.planCode)&&(null==a?void 0:a.planCode)&&Object.assign(ma.userData,(()=>{console.log("--current plan = ",ca.value),console.log("---current submit = ",ma.submitData);const e=le(ma.userData),{1:a,2:t,3:l}=ca.value.productFactor||{};if(e.holder&&za(e.holder,Ga(a)),e.insuredList){const a=["productList","beneficiaryList"],s=Ga(t,(e=>"2"!==String(e.subModuleType))),i=Ga(t,(e=>"2"===String(e.subModuleType))),o=q(i),n=Ga(l),r=q(n);e.insuredList.forEach(((e,t)=>{var l;za(e,[...t>=1&&o?i:s,...a,...r?["insuredBeneficiaryType"]:[]]),(null==(l=e.beneficiaryList)?void 0:l.length)>0&&(r?e.beneficiaryList.forEach((e=>za(e,n))):e.beneficiaryList.length=0),e.planCode=ca.value.planCode}))}return e})())}),{deep:!0,immediate:!0});const Wa=D(Je);P((()=>{G(Je,(([{isIntersecting:e}])=>{(e=>{Wa.bottom.value<0||Wa.top.value<0?Xe.value=!e:Xe.value=!1})(e)}))})),R((()=>{}));const Xa=()=>{ae({tenantId:Ue,saleUserId:ze}).then((({code:e,data:a})=>{"10000"===e&&(wa.value=a.agentCode,Ia.value={...a,agentCode:""},re({orderNo:Te,tenantId:Ue}).then((({code:e,data:a})=>{var t,l,s,i,o;if("10000"===e){Aa.value=a;const e=(null==(l=null==(t=Aa.value.insuredList)?void 0:t[0])?void 0:l.planCode)||"";e&&(ca.value=(null==(s=aa.value.productPlanInsureVOList)?void 0:s.find((a=>a.planCode===e)))||(null==(o=null==(i=ca.value)?void 0:i.productPlanInsureVOList)?void 0:o[0])),Object.assign(ma.userData,{...a,holder:{...a.holder,config:{verificationCode:{isView:!1,isHidden:!1,visible:!0}}}}),Sa.value=!1}})))}))};return N((()=>{na.value=!0,ze&&Xa(),Pa(),setTimeout((async()=>{ra.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),V((()=>{})),(e,t)=>{var A,I,b,k,w,x,_,C,E,L,O,S,T,P,B,j,D,R;const N=te,V=Q,U=Y;return l(),s(n,null,[d(na)?(l(),s("div",Be,je)):(l(),s("div",{key:1,"data-skeleton-root":"SHORT","theme-vars":d(y),class:"page-internet-product-detail"},[h("div",Re,[1==(null==(I=null==(A=d(ea))?void 0:A.BASIC_INFO)?void 0:I.bannerType)&&(null==(k=null==(b=d(ea))?void 0:b.BASIC_INFO)?void 0:k.banner.length)?(l(),c(Ae,{key:0,"data-skeleton-type":"img","indicator-color":"#ddd",images:null==(w=d(ea))?void 0:w.BASIC_INFO.banner},null,8,["images"])):f("",!0),2==(null==(_=null==(x=d(ea))?void 0:x.BASIC_INFO)?void 0:_.bannerType)&&(null==(E=null==(C=d(ea))?void 0:C.BASIC_INFO)?void 0:E.video.length)?(l(),c(ye,{key:1,"data-skeleton-type":"img",src:null==(L=d(ea))?void 0:L.BASIC_INFO.video[0]},null,8,["src"])):f("",!0),(null==(T=null==(S=null==(O=d(ea))?void 0:O.BASIC_INFO)?void 0:S.bannerMove)?void 0:T.length)?(l(),c(Ae,{key:2,url:null==(j=null==(B=null==(P=d(ea))?void 0:P.BASIC_INFO)?void 0:B.bannerMove)?void 0:j[0],onClick:ja},null,8,["url"])):f("",!0),h("div",{ref_key:"root",ref:Je},null,512)]),(null==(D=d(ea))?void 0:D.GUARANTEE)?(l(),c(Ie,{key:0,"show-service-config":"","data-source":d(ea),"plan-list":d(pa)},null,8,["data-source","plan-list"])):f("",!0),i(ke,{ref_key:"detailScrollRef",ref:We,"order-detail":d(Aa),"data-source":d(ea)},{form:o((()=>{var e,a,s;return[h("div",Ne,[d(He)?(l(),c(N,{key:0,ref_key:"agentRef",ref:ya,modelValue:d(Ia),"onUpdate:modelValue":t[0]||(t[0]=e=>F(Ia)?Ia.value=e:null),"is-view":"",config:{agentCode:{isView:d(ka)}},schema:d(ba)},null,8,["modelValue","config","schema"])):f("",!0),(l(),c(fe,{key:d(ca).planCode,ref_key:"personalInfoRef",ref:Ke,modelValue:d(ma).userData,"onUpdate:modelValue":t[1]||(t[1]=e=>d(ma).userData=e),"is-view":d(Ta),"product-factor":null==(e=d(ca))?void 0:e.productFactor,"multi-insured-config":null==(a=d(ca))?void 0:a.multiInsuredConfigVO,onTrailChange:Ja},null,8,["modelValue","is-view","product-factor","multi-insured-config"]))]),i(d(v),{"form-info":d(Ca),"risk-info":d(ua),"tenant-product-detail":d(ea).PREMIUM,"plan-list":d(pa),"premium-info":{premium:d(Ra),premiumLoadingText:d(Da)}},null,8,["form-info","risk-info","tenant-product-detail","plan-list","premium-info"]),d(da).length>0?(l(),c(Pe,{key:0,"package-product-list":d(da)},null,8,["package-product-list"])):f("",!0),i(d(g),{ref_key:"autoRenewRef",ref:Ze,"ext-info":d(Aa).extInfo,"product-factor":null==(s=d(ca))?void 0:s.productFactor},null,8,["ext-info","product-factor"])]})),_:1},8,["order-detail","data-source"]),i(V,null,{default:o((()=>{var e,a,t;return[(null==(e=d(ea).SIGNATURE)?void 0:e.inscribedContent)?(l(),c(d(m),{key:0,"inscribed-content":null==(t=null==(a=d(ea))?void 0:a.SIGNATURE)?void 0:t.inscribedContent},null,8,["inscribed-content"])):f("",!0)]})),_:1}),d(Xe)?(l(),c(xe,{key:1,premium:null==(R=d(ma).trialResult)?void 0:R.initialPremium,"share-info":d(ga),"loading-text":d(ma).trialMsg,"plan-code":d(Ca).planCode,"payment-frequency":d(Ca).paymentFrequency,"tenant-product-detail":d(ea),onHandleClick:Za},{default:o((()=>[u(p(d(He)?"立即投保":"立即分享"),1)])),_:1},8,["premium","share-info","loading-text","plan-code","payment-frequency","tenant-product-detail"])):f("",!0)],8,De)),i(U,{ref_key:"shareRef",ref:fa},null,512),d(ia)?(l(),c(be,{key:2,"product-detail":d(ea)},null,8,["product-detail"])):f("",!0),Ve,i(d(r),{show:d(ta),"onUpdate:show":t[2]||(t[2]=e=>F(ta)?ta.value=e:null),"content-list":d(La),"active-index":0,onOnConfirmHealth:e.onCloseHealth,onOnCloseHealthByMask:Ha},null,8,["show","content-list","onOnConfirmHealth"]),d(la)?(l(),c(d(a),{key:3,show:d(la),"onUpdate:show":t[3]||(t[3]=e=>F(la)?la.value=e:null),"content-list":d(oa)?d(Fa):d(Ma),"is-only-view":d(oa),"active-index":d(sa),text:d(oa)?"关闭":"我已逐页阅读并确认告知内容","force-read-count":d(oa)?0:d(Ua),onSubmit:e.onSubmit,onOnCloseFilePreviewByMask:Ha},null,8,["show","content-list","is-only-view","active-index","text","force-read-count","onSubmit"])):f("",!0)],64)}}});export{Ue as default};

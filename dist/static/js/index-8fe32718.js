import{_ as t,d as e,cG as a,i as n,h as i,j as s,r as o,k as l,O as r,bb as d,d1 as c,o as m,m as u,w as f,a as p,a8 as v,e as h,u as I,b as y,c as L,q as b,F as j,an as g,f as O,p as k,bd as w,V as D,a9 as N,dH as V,T as q,ae as A,aC as C,aD as x,bM as P,bq as T}from"./index-ea01be6f.js";import{C as _}from"./index-57a83b2a.js";import{_ as R}from"./index-d2600f33.js";import{c as Y}from"./order-68510904.js";import{m as H}from"./trial-19593f2b.js";import"./infoCollection-7742f67e.js";import"./core-949f78d1.js";import{I as M}from"./infoItem-403780d4.js";import{I as Q}from"./insuranceNotificationInformation-27fc208f.js";import{_ as U}from"./PayInfo-a4a2c3a6.js";import{_ as E}from"./PolicyInfo-57a9e494.js";import{l as S,b as F}from"./product-7dbcd3da.js";import{Q as G}from"./questionnaire-62331097.js";import{P as B}from"./index-f82dfd05.js";import{Q as X}from"./notice-33e6eedd.js";import{g as $}from"./utils-7d679f25.js";import{O as z}from"./OperateBtn-9f1b9f61.js";import{C as J}from"./index-067f3605.js";import"./cloneDeep-e11529f8.js";import"./lodash-b9d1dbcb.js";import"./util-3852c503.js";import"./trial-2455f365.js";import"./constants-fe95ef6f.js";const K=t=>(C("data-v-049e8287"),t=t(),x(),t),W={class:"page-order-detail"},Z=K((()=>p("div",{class:"card-item-name"},"订单进度",-1))),tt={class:"card-item-icon"},et={class:"card card-list"},at={class:"card-list-title"},nt={class:"card card-list"},it={class:"card-list-head"},st=K((()=>p("div",{class:"card-list-title"},"险种信息",-1))),ot={class:"card-list-premium"},lt={class:"card"},rt=K((()=>p("div",{class:"tenantOrderAttachmentList-title"},"投保人资料",-1))),dt={class:"tenantOrderAttachmentList-img"},ct=["src"],mt=K((()=>p("div",{class:"tenantOrderAttachmentList-title"},"被保人资料",-1))),ut={class:"tenantOrderAttachmentList-img"},ft=["src"],pt=K((()=>p("div",{class:"tenantOrderAttachmentList-title"},"受益人资料",-1))),vt={class:"tenantOrderAttachmentList-img"},ht=["src"],It=K((()=>p("div",{class:"tenantOrderAttachmentList-title"},"监护人资料",-1))),yt={class:"tenantOrderAttachmentList-img"},Lt=["src"],bt=K((()=>p("div",{class:"tenantOrderAttachmentList-title"},"银行卡信息",-1))),jt={class:"tenantOrderAttachmentList-img"},gt=["src"],Ot={class:"insurance-notification-information card"},kt={class:"footer-button"};var wt=t(e({__name:"index",setup(t){const e=a(),C=n();i();const x=s();s([]);const K=s([]),wt=[{title:"险种名称",dataIndex:"riskName",width:200},{title:"保险金额/份数",dataIndex:"regularPremium",width:180,render:(t,e)=>t.regularPremium/t.copy},{title:"保障期间",dataIndex:"coveragePeriodDesc",width:180},{title:"交费期间",dataIndex:"chargePeriodDesc",width:180},{title:"首期保费",dataIndex:"initialPremium",width:180,render:(t,e)=>t.initialPremium}],Dt=o({customerQuestions:[],payInfo:{schema:[],config:[],formData:[]},policyInfo:{schema:[],config:[],formData:{}}}),{query:{orderNo:Nt,agentCode:Vt,tenantId:qt}}=C,At=()=>{N("orderTrajectory",{orderNo:Nt,orderId:x.value.id,tenantId:qt})},Ct=s(!1),xt=s(),Pt=s([]),Tt=l((()=>t=>{const{tenantOrderAttachmentList:e}=x.value;return(null==e?void 0:e.length)?e.filter((e=>e.objectType===t)):[]})),_t=s(),Rt=(t=!0)=>{V({orderNo:Nt,agentCode:Vt,tenantId:qt}).then((({code:e,data:a})=>{if("10000"===e){if(x.value=a,!t)return;_t.value=a,x.value.tenantOrderPayInfoList=a.tenantOrderPayInfoList||[];const e=Object.keys(x.value.productCodeList).map((t=>({productCode:t,mergeRiskReqList:x.value.productCodeList[t]})));F(n={productList:e}).then((({data:t,code:e})=>{var a,n;"10000"===e&&(Pt.value=null==(n=null==(a=t.riskMaterialList)?void 0:a[0])?void 0:n.productMaterialList)})),H(n).then((({data:t,code:e})=>{if("10000"===e){const{productDetailResList:e,productFactor:a}=t;xt.value=a;const{payInfo:n,other:i}=T(a);Dt.payInfo={...Dt.payInfo,...n},Dt.policyInfo={...Dt.policyInfo,...i}}})),(async t=>{let e=[];const{code:a,data:n}=await P({orderNo:Nt,tenantId:qt});"10000"===a&&(e=n.productQuestionnaireVOList);const{code:i,data:s}=await S(t);if("10000"===i){const{productQuestionnaireVOList:t}=s||{},a=t.filter((t=>t.businessType!==X.VISIT));Dt.customerQuestions=a.map((t=>{const{questionnaireDetailResponseVO:a,questionnaireId:n,questionnaireName:i}=t||{},{questions:s,basicInfo:o}=a||{},{objectType:l,questionnaireType:r}=o||{};if(r===G.TEXT){const{content:t,textType:e}=(null==s?void 0:s[0])||{};return{content:t,contentType:$(`${e}`,t),questionnaireId:n,questionnaireName:i}}const d=(e||[]).find((t=>t.questionnaireId===n));return{...a,contentType:"question",...null==d?void 0:d.questionnaireDetailResponseVO,questionnaireId:n,questionnaireName:i}}))}})({productCodeList:Object.keys(x.value.productCodeList)})}var n}))},Yt=()=>{Y({orderNo:Nt,tenantId:qt}).then((({code:t,data:e})=>{"10000"===t&&(q("撤单成功"),Rt(!1))}))};return r((()=>{Rt()})),(t,a)=>{const n=A,i=R,s=_,o=J,l=d,r=c("loading");return m(),u(l,{"theme-vars":I(e)},{default:f((()=>{var t,e,l,d,c,N,V,q,A,C,P,T;return[p("div",W,[p("div",{class:"card card-head",onClick:At},[Z,p("div",tt,[v(h(null==(t=I(x))?void 0:t.orderStepDesc)+" ",1),y(n,{name:"arrow-right"})])]),p("div",et,[p("p",at,h(null==(e=I(x))?void 0:e.productName),1),y(M,{label:"订单号",content:null==(l=I(x))?void 0:l.orderNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),(m(!0),L(j,null,b(null==(d=I(x))?void 0:d.applicationNoList,(t=>(m(),u(M,{key:t,label:"投保单号",content:t,line:"","is-copy":"","min-width":"other"},null,8,["content"])))),128)),y(M,{label:"创建时间",content:I(g)(null==(c=I(x))?void 0:c.gmtCreated).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),y(M,{label:"投保时间",content:I(g)(null==(N=I(x))?void 0:N.orderDate).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),y(M,{label:"投保保费",content:null==(V=I(x))?void 0:V.orderAmount,line:"","min-width":"other"},null,8,["content"]),y(M,{label:"承保保费",content:null==(q=I(x))?void 0:q.orderAmount,line:"","min-width":"other"},null,8,["content"])]),p("div",nt,[p("div",it,[st,p("div",ot,[v(" 首年保费："),p("span",null,h(null==(A=I(x))?void 0:A.orderAmount),1)])]),(null==(P=null==(C=I(x))?void 0:C.riskList)?void 0:P.length)>0?(m(),u(i,{key:0,columns:wt,class:"table","data-source":null==(T=I(x))?void 0:T.riskList},null,8,["data-source"])):O("",!0)]),I(Dt).policyInfo.schema.length?(m(),u(I(E),{key:0,modelValue:I(x),"onUpdate:modelValue":a[0]||(a[0]=t=>k(x)?x.value=t:null),schema:I(Dt).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):O("",!0),p("div",lt,[y(o,{modelValue:I(K),"onUpdate:modelValue":a[1]||(a[1]=t=>k(K)?K.value=t:null)},{default:f((()=>[y(s,{title:"影像信息",name:"1"},{default:f((()=>[rt,p("div",dt,[(m(!0),L(j,null,b(I(Tt)(I(w).HOLDER),((t,e)=>(m(),L("div",{key:e,class:"attachment-item"},[p("img",{src:t.uri,alt:""},null,8,ct)])))),128))]),mt,p("div",ut,[(m(!0),L(j,null,b(I(Tt)(I(w).INSURED),((t,e)=>(m(),L("div",{key:e,class:"attachment-item"},[p("img",{src:t.uri,alt:""},null,8,ft)])))),128))]),pt,p("div",vt,[(m(!0),L(j,null,b(I(Tt)(I(w).BENEFICIARY),((t,e)=>(m(),L("div",{key:e,class:"attachment-item"},[p("img",{src:t.uri,alt:""},null,8,ht)])))),128))]),It,p("div",yt,[(m(!0),L(j,null,b(I(Tt)(I(w).GUARDIAN),((t,e)=>(m(),L("div",{key:e,class:"attachment-item"},[p("img",{src:t.uri,alt:""},null,8,Lt)])))),128))]),bt,p("div",jt,[(m(!0),L(j,null,b(I(Tt)(I(w).INIT_SIGN),((t,e)=>(m(),L("div",{key:e,class:"attachment-item"},[p("img",{src:t.uri,alt:""},null,8,gt)])))),128))])])),_:1})])),_:1},8,["modelValue"])]),p("div",Ot,[y(Q,{title:"投保告知信息",data:I(Dt).customerQuestions||[]},null,8,["data"])]),I(xt)?(m(),u(B,{key:1,ref:"personalInfoRef",modelValue:I(_t),"onUpdate:modelValue":a[2]||(a[2]=t=>k(_t)?_t.value=t:null),"product-factor":I(xt),"is-view":""},null,8,["modelValue","product-factor"])):O("",!0),I(Dt).payInfo.schema.length?(m(),u(I(U),{key:2,ref:"payInfoRef",modelValue:I(x).tenantOrderPayInfoList,"onUpdate:modelValue":a[3]||(a[3]=t=>I(x).tenantOrderPayInfoList=t),schema:I(Dt).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):O("",!0),D((m(),L("div",kt,[y(z,{detail:I(x),onHandleCancel:Yt},null,8,["detail"])])),[[r,I(Ct)]])])]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-049e8287"]]);export{wt as default};

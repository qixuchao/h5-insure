import{_ as e,d as a,i as l,h as t,j as s,k as o,O as r,l as d,o as i,m as c,w as n,a as u,e as m,u as p,cA as v,b as f,V as b,W as y,cs as h,ct as g,a8 as N,bu as C,cu as j,cv as _,aj as T,av as I,aw as V,cG as q,aa as U,cF as k}from"./index-0aeac8ce.js";import{g as w}from"./trial-f6d4d526.js";import{c as x}from"./format-31cde443.js";import{u as $}from"./useOrder-ab7304e1.js";const z=e=>(I("data-v-24d45b26"),e=e(),V(),e),A={class:"page-phone-verify"},P={class:"title"},S=z((()=>u("div",{class:"title face-title"},"人脸识别",-1))),E={class:"face-verify-img"},L=["src"],O=z((()=>u("div",{class:"face-verify-tip"},[u("div",{class:"title"},"操作时请您配合"),u("ol",null,[u("li",null,"请调亮手机屏幕亮度，确保光线充足"),u("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),u("li",null,"请确保真实本人操作")])],-1))),W={class:"tips"},F=["src"];var G=e(a({__name:"phoneVerify",setup(e){const a=$(),I=l(),V=t(),{agentCode:z,tenantId:G,nextPageCode:M,biz_id:R,orderNo:B,objectType:D,orderCode:H}=I.query,J=s({mobile:"",verifyCode:""}),K=s(),Q=s(),X=o((()=>Array.isArray(D)?`${null==D?void 0:D[0]}`.toLocaleUpperCase():`${D}`.toLocaleUpperCase())),Y=()=>{w({orderNo:H||B,tenantId:G}).then((({code:e,data:l})=>{if("10000"===e){Object.assign(a.value,l);const{holder:e,insuredList:t}=l;if("holder"===D){const{name:a,certNo:l,certType:t,id:s,mobile:o}=e;J.value.mobile=o,Q.value={userName:a,certiNo:l,certType:t,objectId:s}}else{const{name:e,certNo:a,certType:l,id:s,mobile:o}=(null==t?void 0:t[0])||{};J.value.mobile=o,Q.value={userName:e,certiNo:a,certType:l,objectId:s}}R&&(()=>{const{objectId:e,certType:a}=Q.value,l={bizId:R,certType:a,objectId:e,objectType:X.value,orderNo:B,tenantId:G};q(l).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status&&(delete I.query.biz_id,delete I.query.nextPageCode,V.push({path:U[`${M}`],query:{...I.query,isShare:1}}))}))})()}}))},Z=()=>{var e,a;null==(a=null==(e=K.value)?void 0:e.validate)||a.call(e).then((()=>{(()=>{const{userName:e,certiNo:a,certType:l}=Q.value,t={tenantId:G,faceAuthMode:"TENCENT",callbackUrl:window.location.href,bizNo:B,userName:e,certiNo:a,certType:l};k(t).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})()}))};return r((()=>{Y()})),(e,a)=>{const l=C,t=j,s=_,o=T,r=d("ProPageWrap");return i(),c(r,null,{default:n((()=>[u("div",A,[u("div",P,m(`${p(v)[p(X)]}手机号验证 ${p(x)(p(J).mobile||"")}`),1),f(s,{ref_key:"formRef",ref:K,"validate-method":"toast",model:p(J)},{default:n((()=>[b(f(l,{modelValue:p(J).mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>p(J).mobile=e),label:"被保人手机号",name:"mobile",maxlength:"11",required:""},null,8,["modelValue"]),[[y,!1]]),f(t,{modelValue:p(J).verifyCode,"onUpdate:modelValue":a[1]||(a[1]=e=>p(J).verifyCode=e),"related-name":"mobile",label:" ",maxlength:"6","input-align":"left",placeholder:"请输入验证码",name:"verifyCode",rules:[{required:!0,message:"请输入验证码"}],"send-s-m-s-code":p(h),"check-s-m-s-code":p(g)},null,8,["modelValue","send-s-m-s-code","check-s-m-s-code"])])),_:1},8,["model"]),S,u("div",E,[u("img",{src:p("/static/png/face_img-4ac5b4e1.png"),alt:""},null,8,L)]),O,f(o,{type:"primary",class:"submit-btn",onClick:Z},{default:n((()=>[N("开始验证")])),_:1}),u("div",W,[u("img",{src:p("/static/png/face_tip-d70e081d.png"),alt:""},null,8,F)])])])),_:1})}}}),[["__scopeId","data-v-24d45b26"]]);export{G as default};

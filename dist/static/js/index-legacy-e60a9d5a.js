!function(){var e=document.createElement("style");e.innerHTML=".page-salesman-inform .van-cell[data-v-1d1c7e90]{display:flex;align-items:center;padding:.4rem 0}.page-salesman-inform .van-cell[data-v-1d1c7e90] .van-cell__title{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:var(--zaui-aide-text-stress, #0d6efe);line-height:.56rem}.page-salesman-inform .van-cell[data-v-1d1c7e90] .van-cell__value{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#99a9c0;line-height:.56rem}.page-salesman-inform .van-cell .active[data-v-1d1c7e90],.page-salesman-inform[data-v-1d1c7e90] .is-active .van-cell__value span{color:var(--van-primary-color, var(--zaui-brand))}.page-salesman-inform .resign[data-v-1d1c7e90]{font-size:.37333rem;color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .date[data-v-1d1c7e90]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-salesman-inform .inform-file[data-v-1d1c7e90]{display:flex;position:absolute;bottom:2.33333rem;padding:0 .4rem}.page-salesman-inform .inform-file .tips[data-v-1d1c7e90]{margin-left:.29333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#393d46;line-height:.53333rem}.page-salesman-inform .inform-file .tips>span[data-v-1d1c7e90]{color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .inform-file .next-btn[data-v-1d1c7e90]{padding:.4rem 0}.page-salesman-inform .inform-file .next-btn .van-button[data-v-1d1c7e90]{border-radius:.10667rem}\n",document.head.appendChild(e),System.register(["./index-legacy-11bd9a0f.js","./inform-legacy-935eeef2.js","./useStorage-legacy-c835401a.js","./verify-legacy-80f71f5b.js","./notice-legacy-eefb6daa.js","./pdfh5-legacy-9f98dc45.js"],(function(e){"use strict";var a,t,n,i,o,l,r,s,c,d,u,f,g,p,m,v,y,h,C,b,x,T,_,j,k,D,S,I,P,q,z,L,N,F,A,E,w,R;return{setters:[function(e){a=e._,t=e.d,n=e.u,i=e.a,o=e.r,l=e.a0,r=e.z,s=e.y,c=e.b,d=e.c,u=e.e,f=e.w,g=e.f,p=e.P,m=e.h,v=e.F,y=e.i,h=e.g,C=e.B,b=e.j,x=e.t,T=e.X,_=e.n,j=e.ai,k=e.p,D=e.a7,S=e.a8,I=e.T,P=e.C,q=e.N,z=e.D},function(e){L=e.l,N=e.g},function(e){F=e.s},function(e){A=e.s},function(e){E=e.d,w=e.A,R=e.e},function(){}],execute:function(){const M={class:"date"},B={class:"inform-file"},Y={class:"tips"},G={class:"footer-button"},U=t({__name:"index",setup(e){const a=n(),t=i(),{productCode:U="MMBBSF",agentCode:V="65434444",tenantId:O="9991000007",agencyCode:$="3311222",insurerCode:H="zhongan",productCategory:W=1,templateId:X=1,orderNo:J="2022080217103534947"}=t.query,K=o(null),Q=o(!1),Z=l().format("YYYY-MM-DD"),ee=o(""),ae=o(),te=()=>{K.value?.clear()},ne=r({noticeType:"",materialSource:"",noticeList:[],pageData:{}});s((()=>{k({orderNo:J,saleUserId:V,tenantId:O}).then((({code:e,data:a})=>{"10000"===e&&(Object.assign(ne.pageData,a),a.tenantOrderAttachmentList.forEach((e=>{e.category===D.ELECTRIC_SIGN&&e.objectType===S.AGENT&&K.value.setDataURL(e.fileBase64)})))})),L({insurerCode:H,orderNo:J,productCategory:W,tenantId:O,noticeType:w,objectType:R}).then((({code:e,data:a})=>{"10000"===e&&(ne.noticeList=[...ne.noticeList,...a])}))}));const ie=()=>{if(!(ne.noticeList&&ne.noticeList.every((e=>1===e.isDone))))return void I("请完成所有告知进行下一步");if(K.value?.isEmpty())return void I("请完成代理人签字进行下一步");if(!Q.value)return void I("请勾选同意签名");const e=K.value?.save();A("AGENT",e,ne.pageData.id,O).then((e=>{e&&P({...ne.pageData,extInfo:{...ne.pageData.extInfo,templateId:X,pageCode:"salesNotice",buttonCode:q.salesNotice},venderCode:H}).then((({code:e,data:n})=>{"10000"===e&&"jumpToPage"===n.pageAction.pageAction&&a.push({path:z[n.pageAction.data.nextPageCode],query:{...t.query}})}))}))};return(e,n)=>{const i=c("van-cell"),o=c("ProSign"),l=c("van-checkbox"),r=c("van-button"),s=c("ProPageWrap");return d(),u(s,{class:"page-salesman-inform"},{default:f((()=>[g(p,{title:"营销员告知书"},{default:f((()=>[(d(!0),m(v,null,y(h(ne).noticeList,(e=>(d(),u(i,{key:e.id,class:C({"is-active":2===e.isDone}),title:`《${e.title}》`,"is-link":"",value:""+(1===e.isDone?"已完成":"去完成"),onClick:n=>{return i=e,F.set("questionData",i),void a.push({path:"/healthNotice",query:{questionnaireType:i.questionnaireType,...t.query}});var i}},null,8,["class","title","value","onClick"])))),128))])),_:1}),g(p,{title:"营销员签字","show-divider":!1,"show-line":!1},{extra:f((()=>[b("div",{class:"resign",onClick:te},"重签")])),default:f((()=>[g(o,{ref_key:"agentSignRef",ref:K,selector:"sign2"},null,512),b("div",M,"签名日期： "+x(h(Z)),1)])),_:1}),b("div",B,[g(l,{modelValue:h(Q),"onUpdate:modelValue":n[0]||(n[0]=e=>T(Q)?Q.value=e:null),shape:"square"},null,8,["modelValue"]),b("p",Y,[_(" 您的签名将被用于"),(d(!0),m(v,null,y(h(ne).noticeList,((e,a)=>(d(),u(j,{key:a,class:"file",title:`《${e.title}》`,content:h(ae),type:h(ee),onClick:a=>(e=>{const{id:a,objectType:t}=e,n={1:"pdf",2:"richText",3:"link"};N({insurerCode:H,id:a,objectType:t,productCategory:W,orderNo:J,tenantId:O}).then((({code:e,data:a})=>{"10000"===e&&(a?.[0].questionType===E?(ee.value="question",ae.value=a):(1===a?.[0].textType&&a?.[0].content.includes("png")?ee.value="picture":ee.value=n[a?.[0].textType],ae.value=a?.[0].content))}))})(e)},null,8,["title","content","type","onClick"])))),128)),_("文件 ")])]),b("div",G,[g(r,{type:"primary",block:"",onClick:ie},{default:f((()=>[_("下一步")])),_:1})])])),_:1})}}});e("default",a(U,[["__scopeId","data-v-1d1c7e90"]]))}}}))}();

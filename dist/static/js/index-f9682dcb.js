import{h as M,aa as R,r as U,k as h,p as k,A as s,L as g,B as b,d as q,s as y,n as D,ac as N,v as A,a5 as w,a6 as H,E,D as V,T as x,P as $,G as F,z as j,$ as z,j as X,m as Y,H as Z,F as J}from"./vendor-a1c35ffc.js";import{_ as G,b as O,ae as C,k as K,s as Q}from"./index-6e4fd776.js";import{d as ee,g as te}from"./order-3e6684cb.js";import{O as se,b as S}from"./order-f784934f.js";const W=t=>(w("data-v-b27e4180"),t=t(),H(),t),ae={class:"com-order-item"},oe={class:"header"},de={class:"product-name"},ne={class:"company-name"},ue={class:"status"},re={class:"info"},ie={class:"info-item"},ce=W(()=>s("div",{class:"label"},"\u6295\u4FDD\u4EBA",-1)),le={class:"desc"},_e={class:"info-item"},pe=W(()=>s("div",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),ve={class:"desc"},he={class:"footer"},me={class:"fee"},fe=E(" \u4FDD\u8D39\uFF1A"),ge={class:"money"},Ce={key:0,class:"buttons"},ye=E("\u5220\u9664"),De=E("\u53BB\u5904\u7406"),Ie={key:1,class:"buttons"},be=E("\u53BB\u652F\u4ED8"),Fe={key:2,class:"buttons"},Se=E("\u5220\u9664"),ke=M({props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup(t,{emit:L}){const i=t,T=R(),m=()=>{V.confirm({title:"",message:"\u786E\u8BA4\u8981\u5220\u9664\u8BE5\u8BA2\u5355\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{ee(i.detail.id,i.detail.orderStatus).then(e=>{const{code:n,data:o}=e;n==="10000"&&(x.success("\u5220\u9664\u6210\u529F"),L("afterDelete"))})})},c=()=>{const{goodsCode:e,orderNo:n,id:o,saleUserId:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyId:d,saleChannelId:a,orderTopStatus:v}=i.detail;if((S.PENDING===v||S.PAYING===v)&&[C.ZXYS,C.BWYL,C.BWYLUP].includes(e)){const l={[C.ZXYS]:"/internet/productDetail/package",[C.BWYL]:"/internet/productDetail",[C.BWYLUP]:"/internet/guaranteeUpgrade"};return T.push({path:l[e],query:{productCode:e,saleChannelId:a,agentCode:_,tenantId:p,agencyCode:d,orderNo:n}}),!0}return!1},I=()=>{const{goodsCode:e,orderNo:n,id:o,saleUserId:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyId:d}=i.detail;c()||T.push({path:O.payInfo,query:{productCode:e,orderNo:n,orderId:o,saleUserId:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyCode:d}})},B=()=>{const{goodsCode:e,orderNo:n,id:o,saleUserId:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyId:d,saleChannelId:a,orderStatus:v}=i.detail;c()||T.push({path:O[i.detail.pageCode],query:{productCode:e,orderNo:n,orderId:o,agentCode:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyCode:d,isFromOrderList:"1"}})};return(e,n)=>{const o=U("van-button");return h(),k("div",ae,[s("div",oe,[s("div",de,g(t.detail.goodsName),1),s("div",ne,g(t.detail.abbreviation),1),s("div",ue,g(b(se)[t.detail.orderStatus]),1)]),s("div",re,[s("div",ie,[ce,s("div",le,g(t.detail.policyHolder),1)]),s("div",_e,[pe,s("div",ve,g(b(q)(t.detail.orderStartDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),s("div",he,[s("div",me,[fe,s("span",ge,"\uFFE5"+g(t.detail.prem),1)]),t.detail.orderTopStatus===b(S).PENDING?(h(),k("div",Ce,[y(o,{class:"button",onClick:N(m,["stop"])},{default:D(()=>[ye]),_:1},8,["onClick"]),y(o,{class:"button primary",onClick:N(B,["stop"])},{default:D(()=>[De]),_:1},8,["onClick"])])):A("",!0),t.detail.orderTopStatus===b(S).PAYING?(h(),k("div",Ie,[y(o,{class:"button primary",onClick:N(I,["stop"])},{default:D(()=>[be]),_:1},8,["onClick"])])):A("",!0),t.detail.orderTopStatus===b(S).TIMEOUT?(h(),k("div",Fe,[y(o,{class:"button",onClick:N(m,["stop"])},{default:D(()=>[Se]),_:1},8,["onClick"])])):A("",!0)])])}}});var Ee=G(ke,[["__scopeId","data-v-b27e4180"]]);const Te={class:"page-order"},Be=M({setup(t){R();const i=$().query,m=F({"-1":1,"0":2,"1":3,"2":4}[i.type]||0),c=F(1),I=F(!1),B=F(!1),e=F([]),n=[{title:"\u5168\u90E8",status:""},{title:"\u5F85\u5904\u7406",status:"-1"},{title:"\u5F85\u652F\u4ED8",status:"0"},{title:"\u5DF2\u5B8C\u6210",status:"1"},{title:"\u5DF2\u5931\u6548",status:"2"}],o=j(()=>n[m.value].status),_=r=>{const{orderNo:d,saleUserId:a,tenantId:v,abbreviation:l,productCategory:P}=r;Q("orderDetail",{orderNo:d,agentCode:a,tenantId:v,abbreviation:l,productCategory:P})},u=()=>{x.loading({message:"\u52A0\u8F7D\u4E2D...",forbidClick:!0}),I.value=!0,te({condition:{orderTopStatus:o.value},pageSize:10,pageNum:c.value}).then(r=>{I.value=!1;const{code:d,data:a}=r;d==="10000"&&a&&(c.value===1?e.value=a.datas||[]:e.value=[...e.value,...a.datas||[]]),B.value=!a||e.value.length>=(a==null?void 0:a.total)}).then(()=>{x.clear()})},p=()=>{c.value+=1,u()},f=()=>{c.value=1,u()};return z(o,()=>{c.value=1,u()}),X(()=>{u()}),(r,d)=>{const a=U("van-list"),v=U("ProPageWrap");return h(),Y(v,{"main-class":"page-order-list"},{default:D(()=>[s("div",Te,[y(K,{active:m.value,"onUpdate:active":d[0]||(d[0]=l=>m.value=l),list:n,"small-gap":"",class:"tab"},null,8,["active"]),y(a,{class:"body",loading:I.value,finished:B.value,onLoad:p},{default:D(()=>[(h(!0),k(J,null,Z(e.value,(l,P)=>(h(),Y(Ee,{key:P,detail:l,onClick:Ne=>_(l),onAfterDelete:f},null,8,["detail","onClick"]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var Le=G(Be,[["__scopeId","data-v-8c0563c0"]]);export{Le as default};

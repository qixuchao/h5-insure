import{_ as e,d as a,aV as t,aW as l,i as o,h as s,j as i,k as r,c9 as d,cF as n,l as c,m as u,o as m,p,w as f,a as v,e as b,u as y,b as h,bg as g,bh as j,cy as N,cz as w,q as C,f as _,v as T,bi as x,bL as I,cA as V,cB as k,b3 as P,bo as U,bp as q,cL as z,y as L,cM as S}from"./index-f0eeebf3.js";import{g as $}from"./trial-1b895186.js";import{c as A}from"./format-31cde443.js";import{u as B}from"./useOrder-d7f47ae5.js";import{p as E,f as O}from"./policy-f4d867af.js";import F from"./index-c6077e25.js";import"./utils-48889deb.js";import"./createProposal-7e896f2e.js";import"./trial-22c49f2c.js";import"./PolicyInfo-3ba190b9.js";import"./cloneDeep-325f4dfb.js";const M=e=>(U("data-v-09e52b3c"),e=e(),q(),e),D={class:"page-phone-verify"},R={class:"title"},W=M((()=>v("div",{class:"title face-title"},"人脸识别",-1))),G={class:"face-verify-img"},H=["src"],J=M((()=>v("div",{class:"face-verify-tip"},[v("div",{class:"title"},"操作时请您配合"),v("ol",null,[v("li",null,"请调亮手机屏幕亮度，确保光线充足"),v("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),v("li",null,"请确保真实本人操作")])],-1))),K={class:"attachment"},Q={class:"footer-button"};var X=e(a({__name:"phoneVerify",setup(e){const a=t((()=>l((()=>import("./index-b0e28d19.js")),["static/js/index-b0e28d19.js","static/css/index-fa4edf2a.css","static/js/index-f0eeebf3.js","static/css/index-c7bb1a0c.css","static/js/theme-94cf7d00.js","static/js/index-5aa86263.js","static/css/index-bbfdd7ec.css","static/js/utils-ac733c3b.js","static/js/infoCollection-f557585c.js","static/js/trial-22c49f2c.js"]))),U=B(),q=o(),M=s(),{agentCode:X,tenantId:Y,nextPageCode:Z,biz_id:ee,orderNo:ae,objectType:te,orderCode:le}=q.query,oe=i({mobile:"",verifyCode:""}),se=i(),ie=i(),re=i(),de=i([{attachmentName:"隐私政策",attachmentList:[{materialName:"隐私政策",materialContent:E,materialSource:"pdf"}]}]),ne=i(!1),ce=r((()=>Array.isArray(te)?`${null==te?void 0:te[0]}`.toLocaleUpperCase():`${te}`.toLocaleUpperCase()));d(`${n[ce.value]}签名`);const ue=()=>{$({orderNo:le||ae,tenantId:Y}).then((({code:e,data:a})=>{if("10000"===e){Object.assign(U.value,a);const{holder:e,insuredList:t}=a;if("holder"===te){const{name:a,certNo:t,certType:l,id:o,mobile:s}=e;oe.value.mobile=s,ie.value={userName:a,certiNo:t,certType:l,objectId:o}}else{const{name:e,certNo:a,certType:l,id:o,mobile:s}=(null==t?void 0:t[0])||{};oe.value.mobile=s,ie.value={userName:e,certiNo:a,certType:l,objectId:o}}ee&&(()=>{const{objectId:e,certType:a}=ie.value,t={bizId:ee,certType:a,objectId:e,objectType:ce.value,orderNo:ae,tenantId:Y};z(t).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status&&(delete q.query.biz_id,delete q.query.nextPageCode,M.push({path:L[`${Z}`],query:{...q.query,isShare:1}}))}))})()}}))},me=()=>{var e,a;null==(a=null==(e=se.value)?void 0:e.validate)||a.call(e).then((()=>{re.value?(()=>{const{userName:e,certiNo:a,certType:t}=ie.value,l={tenantId:Y,faceAuthMode:"TENCENT",callbackUrl:window.location.href,bizNo:ae,userName:e,certiNo:a,certType:t};S(l).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})():x.alert({message:"请先同意隐私政策",confirmButtonText:"我知道了"})}))};c((()=>{ue()}));const pe=i();return c((()=>{setTimeout((async()=>{pe.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const l=I,o=V,s=k,i=P,r=u("ProPageWrap");return m(),p(r,null,{default:f((()=>{var e;return[v("div",D,[v("div",R,b(`${y(n)[y(ce)]}手机号验证 ${y(A)(y(oe).mobile||"")}`),1),h(s,{ref_key:"formRef",ref:se,"validate-method":"toast",model:y(oe)},{default:f((()=>[g(h(l,{modelValue:y(oe).mobile,"onUpdate:modelValue":t[0]||(t[0]=e=>y(oe).mobile=e),label:"被保险人手机号",name:"mobile",maxlength:"11",required:""},null,8,["modelValue"]),[[j,!1]]),h(o,{modelValue:y(oe).verifyCode,"onUpdate:modelValue":t[1]||(t[1]=e=>y(oe).verifyCode=e),"related-name":"mobile",label:" ",maxlength:"6","input-align":"left",placeholder:"请输入验证码",name:"verifyCode",rules:[{required:!0,message:"请输入验证码"}],"send-s-m-s-code":y(N),"check-s-m-s-code":y(w)},null,8,["modelValue","send-s-m-s-code","check-s-m-s-code"])])),_:1},8,["model"]),W,v("div",G,[v("img",{src:y(O),alt:""},null,8,H)]),J,v("div",K,[(null==(e=y(de))?void 0:e.length)?(m(),p(F,{key:0,modelValue:y(re),"onUpdate:modelValue":t[2]||(t[2]=e=>C(re)?re.value=e:null),"attachment-list":y(de),"has-bg-color":!1,"is-show-radio":"","pre-text":"本人同意利安人寿采集本人人脸信息，用于向国家法规许可的验证机构进行本人身份验证。本人已仔细阅读并知晓","suffix-text":"，并同意授权。",onPreviewFile:t[3]||(t[3]=()=>ne.value=!0)},null,8,["modelValue","attachment-list"])):_("",!0)]),v("div",Q,[h(i,{type:"primary",class:"submit-btn",onClick:me},{default:f((()=>[T("同意拍摄")])),_:1})]),y(ne)?(m(),p(y(a),{key:0,show:y(ne),"onUpdate:show":t[4]||(t[4]=e=>C(ne)?ne.value=e:null),"content-list":y(de),"is-only-view":"","active-index":0,text:"我已阅读","force-read-cound":0,onSubmit:t[5]||(t[5]=()=>ne.value=!1),onOnCloseFilePreviewByMask:t[6]||(t[6]=()=>ne.value=!1)},null,8,["show","content-list"])):_("",!0)])]})),_:1})}}}),[["__scopeId","data-v-09e52b3c"]]);export{X as default};

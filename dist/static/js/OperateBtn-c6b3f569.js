import{d as e,h as r,i as a,k as o,ai as t,o as n,c as d,u as s,m as i,w as l,a8 as c,cU as u,f as p,_ as m,a6 as f,aK as h,cr as y,cs as C,ct as g,e3 as I}from"./index-0fa7bd0a.js";import{P as N}from"./constants-4b08cf92.js";import{c as k}from"./order-f139a33c.js";const $={class:"operate-wrap"},S=e({name:"operateBtn"});var P=m(e({...S,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:m}){const S=e,P=r(),_=a(),{tenantId:b,nextPageCode:w,isShare:x}=_.query,F=o((()=>{const{orderTopStatus:e,productClassFlag:r,orderStatus:a}=S.detail;return!("-1"!==e||N.orderList!==_.path||"underWritingFailed"===a&&r===f.YES||["manualUnderWriting","offlinePayment"].includes(a))})),j=o((()=>{const{policyNo:e,applicationNo:r,orderStatus:a}=S.detail;return!e&&r&&"cancel"!==a})),q=o((()=>{const{orderStatus:e}=S.detail;return["offlinePayment","manualUnderWriting","paymentFailed"].includes(e)})),U=()=>{const{orderStatus:e,orderNo:r,insurerCode:a,underwriteFlag:o}=S.detail;let t=N.sign;("collectInfo"===e||"underWritingFailed"===e&&o===f.NO)&&(t=N.infoCollection),P.push({path:t,query:{..._.query,tenantId:b,orderNo:r,insurerCode:a}})},W=()=>{const{orderNo:e,orderId:r}=S.detail;x?h.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{m("handleCancel")})):k({tenantId:b,orderNo:e,type:1}).then((({code:e,data:r})=>{"10000"===e&&h.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:r,holderGender:a,orderId:o,orderNo:t,insurerCode:n}=S.detail||{},d=r,s=`${y[a]}士`;C({shareType:0,title:`${g.cancel.title}`,desc:g.cancel.desc.replace("{name}",`${d}${s},`),url:`${window.location.href}&objectType=${e}&insurerCode=${n}&isShare=1&orderNo=${t}&orderId=${o}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:I})})("holder")}))}))},v=()=>{const{orderNo:e,orderId:r,insurerCode:a}=S.detail;P.push({path:N.updateBankInfo,query:{tenantId:b,orderNo:e,orderId:r,insurerCode:a,nextPageCode:"orderDetail"}})};return(e,r)=>{const a=t;return n(),d("div",$,[s(F)?(n(),i(a,{key:0,type:"primary",size:"small",onClick:u(U,["stop"])},{default:l((()=>[c("去处理")])),_:1},8,["onClick"])):p("",!0),s(j)?(n(),i(a,{key:1,type:"primary",plain:"",size:"small",onClick:u(W,["stop"])},{default:l((()=>[c("撤单")])),_:1},8,["onClick"])):p("",!0),s(q)?(n(),i(a,{key:2,plain:"",size:"small",onClick:u(v,["stop"])},{default:l((()=>[c("银行卡修改")])),_:1},8,["onClick"])):p("",!0)])}}}),[["__scopeId","data-v-71ebcdd7"]]);export{P as O};

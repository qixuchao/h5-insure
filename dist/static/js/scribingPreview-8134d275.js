import{d as a,a as e,u as s,r as t,aH as i,R as l,b as o,c as n,i as r,e as d,w as c,U as p,a4 as u,f,a0 as m,Y as b,ae as v,j as g,af as w,B as h,aJ as k,ad as y}from"./index-59e4fb8c.js";import{S as C}from"./index-37d9f095.js";import{P as I}from"./index-4518c2af.js";import{q as N,s as _,c as j}from"./scribing-6bfb2e84.js";const x={class:"page-scribing-preview-wrap"},L=r("div",{class:"header-tip"},"点击文字框可进行修改",-1),T={class:"scribing-list"},E=["onClick"],H=["src"],V={class:"footer-btn"},q={class:"popup-body"},A={class:"popup-footer"},D=a({name:"scribingPreview"}),P=a({...D,setup(a){const D=e(),P=s(),R=t([{content:"想"}]),{orderNo:S,text:U,tenantId:Y,orderId:B}=P.query,J=t({}),[O,$]=i(!1),z=t(),F=t(),G=async()=>{const{code:a,data:e}=await N({orderId:B,tenantId:Y,contentType:y.HANDLE});"10000"===a&&(R.value=e.riskTranscriptionList,z.value=e.status)},K=()=>{F.value.clear(),$(!1)},M=()=>{J.value.image&&_({orderNo:S,tenantId:Y,riskTranscriptionList:[{...J.value,status:2}]}).then((({code:a,data:e})=>{"10000"===a&&($(!1),G())}))},Q=()=>{j({content:U,image:"",orderNo:S,tenantId:Y,transcriptionType:y.HANDLE}).then((({code:a})=>{"10000"===a&&D.back()}))},W=t(!1);return l((()=>{W.value=!0,G()})),(a,e)=>{const s=C,t=h,i=k;return o(),n(p,null,[r("div",x,[L,r("div",T,[d(s,{wrap:""},{default:c((()=>[(o(!0),n(p,null,u(f(R),((a,e)=>(o(),n("div",{key:e,class:m("scribing-item "+(+a.status!==f(b).YES?"activity":"")),onClick:e=>{return s=a,J.value={...s,image:""},void $(!0);var s}},[r("img",{src:a.thumbnail,alt:""},null,8,H)],10,E)))),128))])),_:1})]),r("div",V,[d(I,{shadow:!1,disabled:f(z)===f(b).NO,onClick:Q},{default:c((()=>[v(a.$slots,"default",{},(()=>[g("确认")]))])),_:3},8,["disabled"])])]),d(i,{show:f(O),teleport:".page-scribing-preview-wrap",class:"sign-popup",title:f(J).content,closeable:!1,position:"center",onClose:K},{default:c((()=>[r("div",q,[d(w,{ref_key:"signRef",ref:F,modelValue:f(J).image,"onUpdate:modelValue":e[0]||(e[0]=a=>f(J).image=a),"has-bg":"",placeholder:f(J).content,closeable:""},null,8,["modelValue","placeholder"])]),r("div",A,[d(t,{onClick:K},{default:c((()=>[g("取消")])),_:1}),d(t,{type:"primary",plain:"",disabled:!f(J).image,onClick:M},{default:c((()=>[g("确定")])),_:1},8,["disabled"])])])),_:1},8,["show","title"])],64)}}});export{P as default};

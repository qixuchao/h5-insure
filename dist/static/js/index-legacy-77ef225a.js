!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-occupational-wrapper .popup-title[data-v-1e1e74de]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-occupational-wrapper .popup-content[data-v-1e1e74de]{height:13.84rem}.com-occupational-wrapper .footer-bar[data-v-1e1e74de]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.risk-title .van-cell[data-v-ac366f06] .van-cell__title{display:flex;align-items:center;justify-content:space-between}.risk-title .van-cell[data-v-ac366f06] .van-cell__title .left-content{display:flex;align-items:center}.risk-title .van-cell[data-v-ac366f06] .van-cell__title .left-content .main-risk{margin-right:var(--zaui-space-card);width:.48rem;height:.48rem;line-height:.48rem;color:#fff;text-align:center;border-radius:.10667rem;background-color:var(--van-primary-color)}.risk-title .van-cell[data-v-ac366f06] .van-cell__title .left-content .minor-risk{margin-right:var(--zaui-space-card);width:.48rem;height:.48rem;line-height:.48rem;color:#fff;text-align:center;border-radius:.10667rem;background-color:var(--zaui-price)}.com-risk-list-wrapper .popup-title[data-v-aeeb813a]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-risk-list-wrapper .risk-list[data-v-aeeb813a]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper .footer-bar[data-v-aeeb813a]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.risk-list-wrapper .add-rider-risk[data-v-684d31e2]{display:flex;align-items:center;justify-content:space-between;padding:var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding)}.card-title[data-v-1d07f5e2] .van-cell__title{display:flex;align-items:center}.card-title[data-v-1d07f5e2] .van-collapse-item__content{padding:0}.card-title .collapse-title[data-v-1d07f5e2]{font-size:.37333rem;font-weight:700}@charset "UTF-8";.page-trial-wrapper[data-v-60dd036a]{padding-bottom:2rem}.page-trial-wrapper .plan-risk[data-v-60dd036a] .van-tabs__nav.van-tabs__nav--card{border:0!important}.page-trial-wrapper .plan-risk[data-v-60dd036a] .van-tabs__nav.van-tabs__nav--card .van-tab.van-tab--card{margin:0 .16rem;background-color:#f7f6ff;border-right:0;color:var(--zaui-text-title);border-radius:.13333rem}.page-trial-wrapper .plan-risk[data-v-60dd036a] .van-tabs__nav.van-tabs__nav--card .van-tab.van-tab--card.van-tab--active{background-color:var(--van-primary-color);color:#fff}.page-trial-wrapper .footer-bar[data-v-60dd036a]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:.4rem;display:flex;justify-content:space-between}\n',document.head.appendChild(e),System.register(["./vendor-legacy-73621f50.js","./index-legacy-cd5aa4fd.js","./index-legacy-a3cef30b.js"],(function(e){"use strict";var a,i,l,o,t,r,n,d,u,s,c,m,p,v,f,y,k,V,b,g,h,I,D,_,L,C,O,w,R,q,x,F,P,T,U,A;return{setters:[function(e){a=e.g,i=e.L,l=e.o,o=e.$,t=e.r,r=e.k,n=e.m,d=e.n,u=e.j,s=e.y,c=e.z,m=e.a0,p=e.a1,v=e.a2,f=e.C,y=e.h,k=e.s,V=e.I,b=e.d,g=e.a3,h=e.J,I=e.a4,D=e.x,_=e.F,L=e.E,C=e.a5,O=e.a6,w=e.B,R=e.V,q=e.Q,x=e.a7},function(e){F=e._,P=e.P,T=e.a},function(e){U=e.b,A=e.S}],execute:function(){const j=[{label:"男",value:"1"},{label:"女",value:"2"}],M=[{label:"有",value:"1"},{label:"无",value:"2"}],S=[{value:1,label:"第5个保单周年日"},{value:2,label:"起始领取年龄55周岁"},{value:3,label:"起始领取年龄60周岁"},{value:4,label:"起始领取年龄65周岁"},{value:5,label:"起始领取年龄70周岁"},{value:6,label:"起始领取年龄75周岁"}],E=[{value:1,label:"年领"},{value:2,label:"月领"}],Y=[{label:"趸交",value:"1"},{label:"年交",value:"2"},{label:"半年交",value:"3"},{label:"季交",value:"4"},{label:"月交",value:"5"}],N=[{label:"趸交",value:"single"},{label:"1年交",value:"year_1"},{label:"5年交",value:"year_5"},{label:"10年交",value:"year_10"},{label:"15年交",value:"year_15"},{label:"20年交",value:"year_20"},{label:"25年交",value:"year_25"},{label:"30年交",value:"year_30"},{label:"35年交",value:"year_35"}],B=[{label:"7天",value:"day_7"},{label:"14天",value:"day_14"},{label:"30天",value:"day_30"},{label:"1年",value:"year_1"},{label:"3年",value:"year_3"},{label:"5年",value:"year_5"},{label:"10年",value:"year_10"},{label:"15年",value:"year_15"},{label:"20年",value:"year_20"},{label:"25年",value:"year_25"},{label:"30年",value:"year_30"},{label:"35年",value:"year_35"},{label:"终身",value:"to_life"}],$=[{label:"主险期间减1",value:"3"},{label:"无限制",value:"2"}],z=[{label:"返保额",value:1},{label:"返保费",value:2}],G=[{label:"投保",value:1},{label:"不投保",value:2}];new A({source:"sessionStorage"});const Z=new A({source:"localStorage"});new A({source:"cookie"});const H={class:"com-occupational-wrapper"},J=(e=>(m("data-v-1e1e74de"),e=e(),p(),e))((()=>s("div",{class:"popup-title"},"选择职业",-1))),Q={class:"popup-content"},W=a({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(e,{emit:a}){const m=e,p=i({show:m.show,options:[],currentValue:""}),v=()=>{a("close")},f=({value:e,selectedOptions:i})=>{const l=(i||[]).map((e=>e.value)).join("/");a("update:modelValue",e),a("finish",l),v()},y=()=>{var e,a;const i=`${null===(e=m.insurerCode)||void 0===e||null===(a=e.toLocaleUpperCase)||void 0===a?void 0:a.call(e)}_OCCUPATION`,l=Z.get("occupational")||{};l[i]?p.options=l[i]:((e={})=>U.post("/api/gateway/system/dict/v2/queryDictInfo",e))({dictCodeList:[i]}).then((({code:e,data:a})=>{if("10000"===e){var o;const e=(e=>{const a=e,i=e=>{e.forEach((e=>{const a=e;a.children.length?i(a.children):a.children=null}))};return i(a),a})((null==a||null===(o=a[0])||void 0===o?void 0:o.dictItemList)||[]);p.options=e,l[i]=e,Z.set("occupational",l)}}))};return l((()=>{y()})),o((()=>m.modelValue),(e=>{}),{deep:!0,immediate:!0}),(e,a)=>{const i=t("van-cascader"),l=t("VanPopup");return r(),n("div",H,[d(l,{show:c(p).show,"onUpdate:show":a[1]||(a[1]=e=>c(p).show=e),"show-footer":"",position:"bottom",closeable:"",onClose:v},{default:u((()=>[J,s("div",Q,[d(i,{modelValue:c(p).currentValue,"onUpdate:modelValue":a[0]||(a[0]=e=>c(p).currentValue=e),title:"请选择职业","show-header":!1,placeholder:"请选择",options:c(p).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:f},null,8,["modelValue","options"])])])),_:1},8,["show"])])}}});var K=F(W,[["__scopeId","data-v-1e1e74de"]]);const X={class:"com-personal-info-wrapper"},ee=a({props:{formInfo:{type:Object,required:!0,default:()=>{}},insuredCode:{type:String,required:!0,default:""},factorList:{type:Array,required:!0,default:()=>[]}},setup(e,{expose:a}){const l=e,[o,m]=v(),[p,h]=v(),I=f(),D=i({formInfo:null==l?void 0:l.formInfo,occupationalText:""}),_=e=>{D.occupationalText=e},L=()=>{h(!1)};return a({validateForm:()=>new Promise(((e,a)=>{null==I||I.value.validate().then((()=>{e("")}),(()=>{a()}))}))}),(a,i)=>{const l=t("VanField"),v=t("VanForm"),f=t("van-datetime-picker"),C=t("van-popup");return r(),n("div",X,[d(v,{ref_key:"formRef",ref:I,"input-align":"right","error-message-align":"right"},{default:u((()=>[e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")?(r(),y(l,{key:0,modelValue:c(D).formInfo.birthday,"onUpdate:modelValue":i[0]||(i[0]=e=>c(D).formInfo.birthday=e),rules:[{required:!0,message:"请选择"}],name:"birth",label:"出生日期","is-link":"",placeholder:"请选择",onClick:i[1]||(i[1]=e=>c(m)(!0))},null,8,["modelValue"])):k("",!0),e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER")?(r(),y(l,{key:1,modelValue:c(D).formInfo.gender,"onUpdate:modelValue":i[3]||(i[3]=e=>c(D).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(P,{modelValue:c(D).formInfo.gender,"onUpdate:modelValue":i[2]||(i[2]=e=>c(D).formInfo.gender=e),options:c(j)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):k("",!0),e.factorList.includes("SOCIAL_INS")?(r(),y(l,{key:2,modelValue:c(D).formInfo.socialSecurity,"onUpdate:modelValue":i[5]||(i[5]=e=>c(D).formInfo.socialSecurity=e),name:"socialSecurity",label:"社保",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(P,{modelValue:c(D).formInfo.socialSecurity,"onUpdate:modelValue":i[4]||(i[4]=e=>c(D).formInfo.socialSecurity=e),options:c(M)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):k("",!0),e.factorList.includes("OCCUPATION_CATEGORY")?(r(),y(l,{key:3,modelValue:c(D).formInfo.occupationalClass,"onUpdate:modelValue":i[6]||(i[6]=e=>c(D).formInfo.occupationalClass=e),rules:[{required:!0,message:"请选择"}],name:"occupationalClass",label:"职业类型","is-link":"",placeholder:"请选择",onClick:i[7]||(i[7]=e=>c(h)(!0))},{input:u((()=>[s("div",null,V(c(D).occupationalText),1)])),_:1},8,["modelValue"])):k("",!0)])),_:1},512),d(C,{show:c(o),"onUpdate:show":i[10]||(i[10]=e=>g(o)?o.value=e:null),position:"bottom"},{default:u((()=>[d(f,{type:"date","min-date":new Date("1900-01-01"),"max-date":new Date,onConfirm:i[8]||(i[8]=e=>{c(D).formInfo.birthday=c(b)(e).format("YYYY-MM-DD"),c(m)(!1)}),onCancel:i[9]||(i[9]=e=>c(m)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"]),c(p)?(r(),y(K,{key:0,modelValue:c(D).formInfo.occupationalClass,"onUpdate:modelValue":i[11]||(i[11]=e=>c(D).formInfo.occupationalClass=e),show:c(p),"insured-code":"insuredCode",onFinish:_,onClose:L},null,8,["modelValue","show"])):k("",!0)])}}});const ae={class:"risk-title"},ie={class:"left-content"};var le=F(a({props:{riskType:{type:Number,default:1},name:{type:String,default:()=>""}},setup:e=>(a,i)=>{const l=t("ZaSvg"),o=t("VanCell");return r(),n("div",ae,[d(o,null,{title:u((()=>[s("div",ie,[s("div",{class:h(1===e.riskType?"main-risk":"minor-risk")},V(1===e.riskType?"主":"附"),3),s("h4",null,V(e.name),1)]),2===e.riskType?(r(),y(l,{key:0,style:{width:"18px",height:"18px"},name:"delete",color:"var(--van-primary-color)"})):k("",!0)])),_:1})])}}),[["__scopeId","data-v-ac366f06"]]);const oe={class:"com-risk-card-wrapper"},te={key:0},re={key:9,class:"liab-desc"},ne=s("div",{class:"title"},"责任投保说明",-1),de=a({props:{originData:{type:Object,required:!0,default:()=>{}},formInfo:{type:Object,required:!0,default:()=>{}},mainRiskData:{type:Object,default:()=>{}},mainRiskInfo:{type:Object,required:!1,default:()=>{}},index:{type:[Number,String],default:0,required:!0}},setup(e){const a=e,m=I("premium"),p=i({formInfo:a.formInfo}),v=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"object Object"==={}.toString.call(e)&&Object.keys(e).length),f=(e,a)=>{let i=a;return Array.isArray(a)||(i=[`${i}`]),(e||[]).filter((e=>i.includes(`${e.value}`)||i.includes(e.value)))},b=D((()=>{var e,i,l,o,t,r;return 1===(null===(e=a.originData)||void 0===e?void 0:e.riskType)?f(B,null==a||null===(t=a.originData)||void 0===t||null===(r=t.riskInsureLimitVO)||void 0===r?void 0:r.insurancePeriodValueList):2===(null===(i=a.originData)||void 0===i?void 0:i.periodType)?f([{value:"year_1",label:"1年"}],["year_1"]):f(B,null==a||null===(l=a.mainRiskData)||void 0===l||null===(o=l.riskInsureLimitVO)||void 0===o?void 0:o.insurancePeriodValueList)})),g=D((()=>{var e,i,l,o,t,r,n,d,u;return 1===(null===(e=a.originData)||void 0===e?void 0:e.riskType)?f(N,null==a||null===(r=a.originData)||void 0===r||null===(n=r.riskInsureLimitVO)||void 0===n?void 0:n.paymentPeriodValueList):1===(null===(i=a.originData)||void 0===i?void 0:i.exemptFlag)?f($,null==a||null===(d=a.originData)||void 0===d||null===(u=d.riskInsureLimitVO)||void 0===u?void 0:u.paymentPeriodRule):2===(null===(l=a.originData)||void 0===l?void 0:l.periodType)?f([{value:"year_1",label:"1年交"}],["year_1"]):f(N,null==a||null===(o=a.mainRiskData)||void 0===o||null===(t=o.riskInsureLimitVO)||void 0===t?void 0:t.paymentPeriodValueList)})),h=D((()=>{var e,i,l,o,t;return 1===(null===(e=a.originData)||void 0===e?void 0:e.riskType)?f(Y,null==a||null===(o=a.originData)||void 0===o||null===(t=o.riskInsureLimitVO)||void 0===t?void 0:t.paymentFrequencyList):f(Y,null==a||null===(i=a.mainRiskData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.paymentFrequencyList)})),C=D((()=>{var e,i;let l=0,o=0;return((null===(e=a.originData)||void 0===e||null===(i=e.riskCalcMethodInfoVO)||void 0===i?void 0:i.paymentMethodLimitList)||[]).forEach(((e,a)=>{0===a&&(l=e.minAmount,o=e.maxAmount),l>e.minAmount&&(l=e.minAmount),o<e.maxAmount&&(o=e.maxAmount)})),p.formInfo.sumInsured=l,{min:l,max:o}})),O=D((()=>{var e,i;let l=0,o=0;return((null===(e=a.originData)||void 0===e||null===(i=e.riskCalcMethodInfoVO)||void 0===i?void 0:i.paymentMethodLimitList)||[]).forEach(((e,a)=>{0===a&&(l=e.minPremium,o=e.maxPremium),l>e.minPremium&&(l=e.minPremium),o<e.maxPremium&&(o=e.maxPremium)})),p.formInfo.premium=l,{min:l,max:o}})),w=D((()=>{var e,i,l,o;const t=(null===(e=a.originData)||void 0===e||null===(i=e.riskCalcMethodInfoVO)||void 0===i?void 0:i.minCopy)||1,r=null===(l=a.originData)||void 0===l||null===(o=l.riskCalcMethodInfoVO)||void 0===o?void 0:o.maxCopy;return p.formInfo.copy=t,{min:t,max:r}}));return l((()=>{var e,i;const l={riskType:a.originData.riskType,riskId:a.originData.id,riskCode:a.originData.riskCode,mainRiskCode:null==a||null===(e=a.mainRiskData)||void 0===e?void 0:e.riskCode,mainRiskId:null==a||null===(i=a.mainRiskData)||void 0===i?void 0:i.id,riskCategory:a.originData.riskCategory,liabilityVOList:(a.originData.riskLiabilityInfoVOList||[]).map((e=>({liabilityAttributeCode:e.liabilityAttribute,liabilityAttributeValue:e.liabilityAttributeValue,liabilityCode:e.liabilityCode,liabilityId:e.id,liabilityRateType:e.liabilityRateType})))};Object.assign(null==p?void 0:p.formInfo,l)})),o((()=>{var e;return null===(e=p.formInfo)||void 0===e?void 0:e.paymentFrequency}),(e=>{var i,l,o,t;[3,4].includes(null===(i=a.originData)||void 0===i||null===(l=i.riskCalcMethodInfoVO)||void 0===l?void 0:l.saleMethod)&&((null===(o=a.originData)||void 0===o||null===(t=o.riskCalcMethodInfoVO)||void 0===t?void 0:t.paymentMethodLimitList)||[]).forEach((a=>{+a.paymentFrequency==+e&&Object.assign(p.formInfo,{sumInsured:a.perCopyAmount,premium:a.perCopyPremium})}))})),o((()=>a.mainRiskInfo),(e=>{}),{immediate:!0,deep:!0}),(a,i)=>{var l,o,I,D,R,q,x,F,T,U,A,j,M,Y,N,B,$,Z,H,J,Q,W,K,X,ee,ae,ie,de,ue,se,ce,me,pe,ve,fe,ye,ke;const Ve=t("VanStepper"),be=t("VanField");return r(),n("div",oe,[d(le,{"risk-type":null===(l=e.originData)||void 0===l?void 0:l.riskType,name:null===(o=e.originData)||void 0===o?void 0:o.riskName},null,8,["risk-type","name"]),1===(null===(I=e.originData)||void 0===I||null===(D=I.riskCalcMethodInfoVO)||void 0===D?void 0:D.saleMethod)?(r(),y(be,{key:0,modelValue:c(p).formInfo.sumInsured,"onUpdate:modelValue":i[1]||(i[1]=e=>c(p).formInfo.sumInsured=e),label:"保额",name:"sumInsured",rules:[{required:!0,message:"请填写"}]},{input:u((()=>{var a,l;return[d(Ve,{modelValue:c(p).formInfo.sumInsured,"onUpdate:modelValue":i[0]||(i[0]=e=>c(p).formInfo.sumInsured=e),min:c(C).min,step:(null===(a=e.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,max:c(C).max},null,8,["modelValue","min","step","max"])]})),_:1},8,["modelValue"])):k("",!0),2===(null===(R=e.originData)||void 0===R||null===(q=R.riskCalcMethodInfoVO)||void 0===q?void 0:q.saleMethod)?(r(),y(be,{key:1,modelValue:c(p).formInfo.premium,"onUpdate:modelValue":i[3]||(i[3]=e=>c(p).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"}]},{input:u((()=>{var a,l;return[d(Ve,{modelValue:c(p).formInfo.premium,"onUpdate:modelValue":i[2]||(i[2]=e=>c(p).formInfo.premium=e),step:(null===(a=e.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,min:c(O).min,max:c(O).max},null,8,["modelValue","step","min","max"])]})),_:1},8,["modelValue"])):k("",!0),3===(null===(x=e.originData)||void 0===x||null===(F=x.riskCalcMethodInfoVO)||void 0===F?void 0:F.saleMethod)||4===(null===(T=e.originData)||void 0===T||null===(U=T.riskCalcMethodInfoVO)||void 0===U?void 0:U.saleMethod)&&(null!==(A=e.originData)&&void 0!==A&&null!==(j=A.riskCalcMethodInfoVO)&&void 0!==j&&j.minCopy||null!==(M=e.originData)&&void 0!==M&&null!==(Y=M.riskCalcMethodInfoVO)&&void 0!==Y&&Y.maxCopy)?(r(),y(be,{key:2,modelValue:c(p).formInfo.copy,"onUpdate:modelValue":i[5]||(i[5]=e=>c(p).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:u((()=>[d(Ve,{modelValue:c(p).formInfo.copy,"onUpdate:modelValue":i[4]||(i[4]=e=>c(p).formInfo.copy=e),step:1,min:c(w).min,max:c(w).max},null,8,["modelValue","min","max"])])),_:1},8,["modelValue"])):k("",!0),1!==(null===(N=e.originData)||void 0===N||null===(B=N.riskCalcMethodInfoVO)||void 0===B?void 0:B.saleMethod)&&null!==($=c(m))&&void 0!==$&&$[null===(Z=e.originData)||void 0===Z?void 0:Z.riskCode]?(r(),y(be,{key:3,label:"保额"},{input:u((()=>{var a,i,l;return[s("div",null,V(null===(a=c(m))||void 0===a||null===(i=a[null===(l=e.originData)||void 0===l?void 0:l.riskCode])||void 0===i?void 0:i.amount),1)]})),_:1})):k("",!0),v(null===(H=e.originData)||void 0===H||null===(J=H.riskInsureLimitVO)||void 0===J?void 0:J.insurancePeriodValueList)&&v(null===(Q=e.originData)||void 0===Q||null===(W=Q.riskInsureLimitVO)||void 0===W?void 0:W.insurancePeriodRule)?k("",!0):(r(),y(be,{key:4,modelValue:c(p).formInfo.coverageYear,"onUpdate:modelValue":i[7]||(i[7]=e=>c(p).formInfo.coverageYear=e),label:"保障期间",name:"coverageYear",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(P,{modelValue:c(p).formInfo.coverageYear,"onUpdate:modelValue":i[6]||(i[6]=e=>c(p).formInfo.coverageYear=e),options:c(b)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),v(null===(K=e.originData)||void 0===K||null===(X=K.riskInsureLimitVO)||void 0===X?void 0:X.paymentPeriodValueList)&&v(null===(ee=e.originData)||void 0===ee||null===(ae=ee.riskInsureLimitVO)||void 0===ae?void 0:ae.paymentPeriodRule)?k("",!0):(r(),y(be,{key:5,modelValue:c(p).formInfo.paymentYear,"onUpdate:modelValue":i[9]||(i[9]=e=>c(p).formInfo.paymentYear=e),label:"交费期间",name:"paymentYear",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(P,{modelValue:c(p).formInfo.paymentYear,"onUpdate:modelValue":i[8]||(i[8]=e=>c(p).formInfo.paymentYear=e),options:c(g)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),v(null===(ie=e.originData)||void 0===ie||null===(de=ie.riskInsureLimitVO)||void 0===de?void 0:de.paymentFrequencyList)&&v(null===(ue=e.originData)||void 0===ue||null===(se=ue.riskInsureLimitVO)||void 0===se?void 0:se.paymentTypeRule)?k("",!0):(r(),y(be,{key:6,modelValue:c(p).formInfo.paymentFrequency,"onUpdate:modelValue":i[11]||(i[11]=e=>c(p).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(P,{modelValue:c(p).formInfo.paymentFrequency,"onUpdate:modelValue":i[10]||(i[10]=e=>c(p).formInfo.paymentFrequency=e),options:c(h)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),v(null===(ce=e.originData)||void 0===ce||null===(me=ce.riskInsureLimitVO)||void 0===me?void 0:me.annuityDrawTypeList)?k("",!0):(r(),y(be,{key:7,modelValue:c(p).formInfo.annuityDrawDate,"onUpdate:modelValue":i[13]||(i[13]=e=>c(p).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate",rules:[{required:!0,message:"请选择"}]},{input:u((()=>{var a,l;return[d(P,{modelValue:c(p).formInfo.annuityDrawDate,"onUpdate:modelValue":i[12]||(i[12]=e=>c(p).formInfo.annuityDrawDate=e),options:f(c(S),null===(a=e.originData)||void 0===a||null===(l=a.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawTypeList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),v(null===(pe=e.originData)||void 0===pe||null===(ve=pe.riskInsureLimitVO)||void 0===ve?void 0:ve.annuityDrawFrequencyList)?k("",!0):(r(),y(be,{key:8,modelValue:c(p).formInfo.annuityDrawType,"onUpdate:modelValue":i[15]||(i[15]=e=>c(p).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType",rules:[{required:!0,message:"请选择"}]},{input:u((()=>{var a,l;return[d(P,{modelValue:c(p).formInfo.annuityDrawType,"onUpdate:modelValue":i[14]||(i[14]=e=>c(p).formInfo.annuityDrawType=e),options:f(c(E),null===(a=e.originData)||void 0===a||null===(l=a.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawFrequencyList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),(r(!0),n(_,null,L((null===(fe=e.originData)||void 0===fe?void 0:fe.riskLiabilityInfoVOList)||[],((e,a)=>(r(),n("div",{key:e.liabilityId},[1===e.optionalFlag?(r(),y(be,{key:0,label:e.liabilityName,name:"liabilityAttributeValue",rules:[{required:e.liabilityAttributeValue,message:"请选择"}]},{input:u((()=>[s("div",null,[e.liabilityAttributeValue?(r(),y(P,{key:1,modelValue:c(p).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>c(p).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:c(z)},null,8,["modelValue","onUpdate:modelValue","options"])):(r(),n("span",te,"50万"))])])),_:2},1032,["label","rules"])):(r(),y(be,{key:1,label:e.liabilityName,name:"liabilityAttributeValue",rules:[{required:1===e.optionalFlag&&e.liabilityAttributeValue,message:"请选择"}]},{input:u((()=>[s("div",null,[e.liabilityAttributeValue?(r(),y(P,{key:1,modelValue:c(p).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>c(p).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:c(z)},null,8,["modelValue","onUpdate:modelValue","options"])):(r(),y(P,{key:0,modelValue:c(p).formInfo.liabilityVOList[a].flag,"onUpdate:modelValue":e=>c(p).formInfo.liabilityVOList[a].flag=e,options:c(G)},null,8,["modelValue","onUpdate:modelValue","options"]))])])),_:2},1032,["label","rules"]))])))),128)),null!==(ye=e.originData)&&void 0!==ye&&ye.relationDesc?(r(),n("div",re,[ne,s("div",null,V(null===(ke=e.originData)||void 0===ke?void 0:ke.relationDesc),1)])):k("",!0)])}}});const ue={class:"com-risk-list-wrapper"},se=(e=>(m("data-v-aeeb813a"),e=e(),p(),e))((()=>s("div",{class:"popup-title"},"选择附加险",-1))),ce={class:"risk-list"},me={class:"footer-bar"},pe=w("确认"),ve=a({props:{riskList:{type:Array,required:!0,default:()=>[]},show:{type:Boolean,required:!0,default:!1},collocationList:{type:Array,default:()=>[]},disabled:{type:Array,required:!0,default:()=>[]},modelValue:{type:Array,required:!0,default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:a}){const l=e,m=f([]),p=f([]),v=f(l.disabled),k=i({show:l.show,currentChecked:[]}),V=e=>{var a,i,o;((e,a)=>{l.collocationList.forEach((i=>{e===i.riskId&&(a?1===i.collocationType?k.currentChecked=k.currentChecked.filter((a=>!(a===i.collocationRiskId||a===e))):3===i.collocationType&&v.value.filter((e=>e!==i.collocationRiskId)):1===i.collocationType?k.currentChecked.push(i.collocationRiskId,e):3===i.collocationType&&v.value.push(i.collocationRiskId))}))})(e,k.currentChecked.includes(e)),null==m||null===(a=m.value)||void 0===a||null===(i=a[e])||void 0===i||null===(o=i.toggle)||void 0===o||o.call(i)},b=()=>{a("close")},g=()=>{const e=l.riskList.filter((e=>k.currentChecked.includes(e.id)));a("update:modelValue",p),a("finished",e),a("close")};return C((()=>{m.value=[]})),o((()=>l.modelValue),(e=>{p.value=e,v.value=e}),{deep:!0,immediate:!0}),(a,i)=>{const l=t("van-checkbox"),o=t("VanCell"),f=t("van-cell-group"),h=t("van-checkbox-group"),I=t("VanButton"),D=t("VanPopup");return r(),n("div",ue,[d(D,{show:c(k).show,"onUpdate:show":i[2]||(i[2]=e=>c(k).show=e),title:"选择附加险","show-footer":"",position:"bottom",closeable:"",onClose:b},{default:u((()=>[se,s("div",ce,[d(h,{modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=e=>p.value=e)},{default:u((()=>[d(f,{inset:""},{default:u((()=>[(r(!0),n(_,null,L(e.riskList,(e=>(r(),y(o,{key:e.id,title:e.riskName,onClick:a=>V(e.id)},{"right-icon":u((()=>[d(l,{ref_for:!0,ref:a=>m.value[e.id]=a,disabled:v.value.includes(e.id),shape:"square",name:e.id,onClick:i[0]||(i[0]=O((()=>{}),["stop"]))},null,8,["disabled","name"])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),s("div",me,[d(I,{type:"primary",disabled:!c(k).currentChecked.length,block:"",onClick:g},{default:u((()=>[pe])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var fe=F(ve,[["__scopeId","data-v-aeeb813a"]]);const ye={class:"risk-list-wrapper"},ke={key:0,class:"add-rider-risk"},Ve={class:"left-part"},be=w("+ 附加险"),ge=a({props:{riskInfo:{type:Object,required:!0,default:()=>{}},originData:{type:Object,required:!0,default:()=>{}},pickFactor:{type:Function,required:!0,default:()=>{}}},setup(e){var a;const t=e,[m,p]=v(!1);f(null),f(null);const b=i({mainRiskInfo:t.riskInfo,riderRiskInfo:null===(a=t.riskInfo)||void 0===a?void 0:a.riderRiskVOList,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),g=(e,a)=>{(e||[]).forEach((e=>{Object.assign(b.riderRiskInfo,{[e.id]:{}})})),b.disabledList=a,b.requiredRiderRiskData=b.requiredRiderRiskData.concat(e)};return l((()=>{b.requiredRiderRiskData})),o((()=>b.mainRiskInfo),(e=>{}),{deep:!0,immediate:!0}),o((()=>b.riderRiskInfo),(()=>{}),{deep:!0,immediate:!0}),o((()=>b.requiredRiderRiskData),(e=>{const a=[b.mainRiskData,...e];let i=[],l=[];a.forEach((e=>{var a;const o=(null==e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.riskFactorRelationList)||[];i=i.concat(o.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),l=l.concat(o.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode)))})),(e||[]).forEach((e=>{Object.assign(b.riderRiskInfo,{[e.id]:{}})})),t.pickFactor({insuredFactorList:[...new Set(i)],holderFactorList:[...new Set(l)]})}),{deep:!0,immediate:!0}),o((()=>t.originData),(e=>{(e||[]).forEach((e=>{1===e.riskType?(b.mainRiskData=e,b.requiredRiderRiskData=(null==e?void 0:e.requiredRiderRiskVOList)||[],b.riderRiskList=null==e?void 0:e.optionalRiderRiskVOList):b.riderRiskList.push(e)}))}),{deep:!0,immediate:!0}),o((()=>t.riskInfo),(()=>{}),{immediate:!0,deep:!0}),(e,a)=>{var i,l,o,t;return r(),n("div",ye,[d(de,{"form-info":c(b).mainRiskInfo,"origin-data":c(b).mainRiskData},null,8,["form-info","origin-data"]),(r(!0),n(_,null,L(c(b).requiredRiderRiskData,((e,a)=>(r(),y(de,{key:e.id,"form-info":c(b).riderRiskInfo[e.id],index:a,"main-risk-data":c(b).mainRiskData,"main-risk-info":c(b).mainRiskInfo,"origin-data":e},null,8,["form-info","index","main-risk-data","main-risk-info","origin-data"])))),128)),(null===(i=c(b))||void 0===i||null===(l=i.riderRiskList)||void 0===l?void 0:l.length)-(null===(o=c(b))||void 0===o||null===(t=o.checkedList)||void 0===t?void 0:t.length)?(r(),n("div",ke,[s("span",Ve,V(`共有${c(b).riderRiskList.length-c(b).checkedList.length}款附加险可以添加`),1),d(T,{activied:"",onClick:a[0]||(a[0]=e=>c(p)(!0))},{default:u((()=>[be])),_:1})])):k("",!0),c(m)?(r(),y(fe,{key:1,modelValue:c(b).checkedList,"onUpdate:modelValue":a[1]||(a[1]=e=>c(b).checkedList=e),show:c(m),disabled:c(b).disabledList,"risk-list":c(b).riderRiskList,"collocation-list":c(b).mainRiskData.collocationVOList||[],onFinished:g,onClose:a[2]||(a[2]=e=>c(p)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):k("",!0)])}}});var he=F(ge,[["__scopeId","data-v-684d31e2"]]);const Ie={class:"card-title"},De=a({props:{title:{type:String,default:()=>""},collapse:{type:Boolean,default:!1}},setup(e){const a=f(["1"]);return(i,l)=>{const o=t("ZaSvg"),c=t("VanCell"),m=t("VanCollapseItem"),p=t("VanCollapse");return r(),n("div",Ie,[e.collapse?(r(),y(p,{key:1,modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e)},{default:u((()=>[d(m,{name:"1"},{title:u((()=>[d(o,{name:"line",color:"var(--van-primary-color)"}),s("h4",null,V(e.title),1)])),default:u((()=>[e.collapse?R(i.$slots,"default",{key:0},void 0,!0):k("",!0)])),_:3})])),_:3},8,["modelValue"])):(r(),y(c,{key:0},{title:u((()=>[d(o,{name:"line",color:"var(--van-primary-color)"}),s("h4",null,V(e.title),1)])),_:1}))])}}});var _e=F(De,[["__scopeId","data-v-1d07f5e2"]]);const Le={key:0,class:"part-card"},Ce={key:1,class:"part-card"},Oe={class:"risk-content"},we={key:0,class:"risk"},Re={key:1,class:"plan-risk"},qe={class:"footer-bar"},xe={class:"trial-result"},Fe=w("去试算"),Pe=w("去投保"),Te=a({setup(e){const{id:a=115}=q().query,m=f({personVO:{}}),p=f({insuredCode:"",personVO:{}}),v=f({}),b=f({}),g=f({}),h=f({}),I=f({});x("premium",I.value);const D=i({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0}),C=()=>{var e;const a=Object.values(v.value[D.currentPlan].riderRiskVOList).map((e=>{const a=e;if("3"===a.paymentYear){const e=(v.value[D.currentPlan].paymentYear||"").split("_");e[1]&&(e[1]-=1),a.paymentYear=e.join("_")}return a}));((e={})=>U.post("/api/insurance/premiumCalc",e))({...{holder:{personVO:{...m.value.personVO,birthday:m.value.personVO.birthday&&`${m.value.personVO.birthday} 00:00:00`}},productCode:null==D||null===(e=D.riskBaseInfo)||void 0===e?void 0:e.productCode,insuredVOList:[{...p.value,personVO:{...p.value.personVO,birthday:p.value.personVO.birthday&&`${p.value.personVO.birthday} 00:00:00`},productPlanVOList:[{planCode:D.currentPlan||"",riskVOList:[{...v.value[D.currentPlan],riderRiskVOList:a}]}]}]}}).then((({code:e,data:a})=>{if("10000"===e){D.trialResult=a,D.canTrial=!1;const e={};(a.riskPremiumDetailVOList||[]).forEach((a=>{e[a.riskCode]=a})),Object.assign(I.value,e)}}))},O=()=>{var e,a,i,l,o;Promise.all([null==b||null===(e=b.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e),null==g||null===(i=g.value)||void 0===i||null===(l=i.validateForm)||void 0===l?void 0:l.call(i),null==h||null===(o=h.value)||void 0===o?void 0:o.validate()]).then((()=>{C()}))},w=()=>{((e={})=>U.get(`/api/product/insureProductDetail/${null==e?void 0:e.productId}`,e))({productId:a}).then((({code:e,data:a})=>{"10000"===e&&(D.riskBaseInfo=null==a?void 0:a.productBasicInfoVO,((null==a?void 0:a.productRelationPlanVOList)||(null==a?void 0:a.riskDetailVOList)||[]).forEach(((e,a)=>{0===a&&(D.currentPlan=e.planCode||0),Object.assign(v.value,{[e.planCode||a]:{liabilityVOList:[],riderRiskVOList:{}}})})),D.riskData=(null==a?void 0:a.riskDetailVOList)||[],D.riskPlanData=(null==a?void 0:a.productRelationPlanVOList)||[])})).finally((()=>{}))},R=e=>{D.holderFactor=e.insuredFactorList,D.insuredFactor=e.holderFactorList};return o([()=>v.value,()=>m.value,()=>p.value],(e=>{e&&D.canTrial&&(D.canTrial=!0)}),{deep:!0}),l((()=>{w()})),(e,a)=>{const i=t("VanForm"),l=t("VanTab"),o=t("VanTabs"),f=t("VanButton"),I=t("ZaPageWrap");return r(),y(I,{class:"page-trial-wrapper"},{default:u((()=>{var e,t;return[c(D).holderFactor.length?(r(),n("div",Le,[d(_e,{title:"投保人"}),d(ee,{ref_key:"holderRef",ref:b,"insured-code":null===(e=c(D).riskBaseInfo)||void 0===e?void 0:e.insuredCode,"form-info":m.value.personVO,"factor-list":c(D).holderFactor},null,8,["insured-code","form-info","factor-list"])])):k("",!0),c(D).insuredFactor.length?(r(),n("div",Ce,[d(_e,{title:"被保人"}),d(ee,{ref_key:"insuredRef",ref:g,"insured-code":null===(t=c(D).riskBaseInfo)||void 0===t?void 0:t.insuredCode,"form-info":p.value.personVO,"factor-list":c(D).insuredFactor},null,8,["insured-code","form-info","factor-list"])])):k("",!0),s("div",Oe,[c(D).riskData.length?(r(),n("div",we,[d(i,{ref_key:"riskFormRef",ref:h,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(he,{"risk-info":v.value[0],"origin-data":c(D).riskData,"pick-factor":R},null,8,["risk-info","origin-data"])])),_:1},512)])):k("",!0),c(D).riskPlanData.length?(r(),n("div",Re,[d(i,{ref_key:"riskFormRef",ref:h,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(o,{active:c(D).currentPlan,"onUpdate:active":a[0]||(a[0]=e=>c(D).currentPlan=e),type:"card"},{default:u((()=>[(r(!0),n(_,null,L(c(D).riskPlanData,(e=>(r(),y(l,{key:e.planCode,name:e.planCode,title:e.planName},{default:u((()=>[e.planCode===c(D).currentPlan?(r(),y(he,{key:0,"risk-info":v.value[e.planCode],"origin-data":e.riskDetailVOList,"pick-factor":R},null,8,["risk-info","origin-data"])):k("",!0)])),_:2},1032,["name","title"])))),128))])),_:1},8,["active"])])),_:1},512)])):k("",!0)]),s("div",qe,[s("span",xe,V(c(D).trialResult.premium||0),1),c(D).canTrial?(r(),y(f,{key:0,type:"primary",onClick:O},{default:u((()=>[Fe])),_:1})):(r(),y(f,{key:1,type:"primary",onClick:O},{default:u((()=>[Pe])),_:1}))])]})),_:1})}}});e("default",F(Te,[["__scopeId","data-v-60dd036a"]]))}}}))}();

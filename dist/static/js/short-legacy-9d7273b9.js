!function(){var e=document.createElement("style");e.innerHTML=".guarantee-list[data-v-ac4580b0]{background:#ffffff;padding:.66667rem .53333rem 0px}.guarantee-list .header[data-v-ac4580b0]{display:flex;justify-content:space-between;align-items:center}.guarantee-list .header span[data-v-ac4580b0]{display:inline-block;color:#333}.guarantee-list .header span[data-v-ac4580b0]:first-child{height:.74667rem;line-height:.74667rem;font-size:.53333rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500}.guarantee-list .header span[data-v-ac4580b0]:last-child{height:.49333rem;font-size:.34667rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#006afc;line-height:.49333rem}.guarantee-list .feerate-view[data-v-ac4580b0]{padding:.42667rem 0px;border-top:1px solid #eeeeee;display:flex;justify-content:space-between}.guarantee-list .feerate-view span[data-v-ac4580b0]{display:inline-block;height:.53333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#666;line-height:.53333rem}.guarantee-list .feerate-view span[data-v-ac4580b0]:last-child{color:var(--van-primary-color, var(--zaui-brand))}.guarantee-list .show-more[data-v-ac4580b0]{padding:.21333rem 0 .42667rem;width:100%;display:flex;justify-content:center;align-items:center;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#999}.guarantee-list .show-more .icon[data-v-ac4580b0]{margin-left:.13333rem;font-size:.26667rem;transition:transform .5s}.guarantee-list .show-more .icon.showMore[data-v-ac4580b0]{transform:rotate(180deg)}.guarantee-list .service-config img[data-v-ac4580b0]{width:100%}.guarantee-popup[data-v-ac4580b0]{position:relative}.guarantee-popup .body[data-v-ac4580b0]{display:flex;flex-direction:column}.guarantee-popup .body .extinfo-info-list[data-v-ac4580b0]{padding:.21333rem .53333rem}.guarantee-popup .body .custom-plan-tab[data-v-ac4580b0] .van-tab__text{font-size:.42667rem!important;font-family:PingFangSC-Medium,PingFang SC!important;font-weight:500}.guarantee-popup .body .custom-plan-tab[data-v-ac4580b0] .van-tab--active .van-tab__text{color:var(--van-primary-color)!important}.guarantee-popup .body .custom-plan-tab[data-v-ac4580b0] .van-tabs__line{background:var(--van-primary-color)!important}.guarantee-popup .body .guarantee-detail[data-v-ac4580b0]{flex:1;height:var(--541c7141);overflow-y:scroll}.guarantee-popup .body .guarantee-detail .plan-list[data-v-ac4580b0]{padding:.53333rem .53333rem 0px}.guarantee-popup .body .guarantee-detail .guarantee-item[data-v-ac4580b0]{margin-top:.10667rem;padding:0 .53333rem}.guarantee-popup .body .guarantee-detail .guarantee-item[data-v-ac4580b0] .right-part{color:var(--van-primary-color)!important}.guarantee-popup .body .guarantee-detail .guarantee-item[data-v-ac4580b0]:first-child{margin-top:.21333rem!important}.guarantee-popup .body .guarantee-detail .guarantee-item .content[data-v-ac4580b0]{font-size:.34667rem;color:#393d46;line-height:.58667rem;padding-bottom:.21333rem}.plan-list[data-v-ac4580b0]{display:flex;width:100%;overflow-x:scroll;overflow-y:hidden;flex-wrap:nowrap;justify-content:flex-start;padding:.4rem 0px}.plan-list[data-v-ac4580b0]::-webkit-scrollbar{display:none}.plan-list .plan-list-item[data-v-ac4580b0]{min-width:2.8rem;height:1.01333rem;line-height:1.01333rem;text-align:center;border-radius:.10667rem;background:#f6f6f6;margin-right:.26667rem}.plan-list .plan-list-item[data-v-ac4580b0]:last-child{margin-right:0}.plan-list .plan-list-item span[data-v-ac4580b0]{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#666}.plan-list .plan-list-item-active[data-v-ac4580b0]{border:1px solid var(--van-primary-color);background:#fff3eb}.plan-list .plan-list-item-active span[data-v-ac4580b0]{color:var(--van-primary-color)}.picture-payment-content[data-v-ac4580b0]{padding:0px 0px .42667rem;display:flex;flex-wrap:nowrap;overflow:scroll;justify-content:space-between}.picture-payment-content[data-v-ac4580b0]::-webkit-scrollbar{display:none}.picture-payment-content .picture-payment-item[data-v-ac4580b0]{width:4.25333rem;height:1.26667rem;margin-top:.42667rem;margin-right:.42667rem}.picture-payment-content .picture-payment-item[data-v-ac4580b0]:last-child{margin-right:0!important}.picture-payment-content .picture-payment-item img[data-v-ac4580b0]{width:4.25333rem;height:1.26667rem}.guarantee-popup .header{border-bottom:none!important}.guarantee-popup .body{height:calc(100% - 1.46667rem)!important}.guarantee-popup .van-popup__close-icon--top-right{top:.53333rem!important}.tabs[data-v-717e916d] .tab-title{font-size:.42667rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500}.tabs[data-v-717e916d] .active:after{width:.64rem!important;height:.08rem!important;border-radius:.05333rem!important}.spec img[data-v-717e916d]{width:100%;display:block}.spec .van-image__error[data-v-717e916d]{font-size:.8rem}.sub-title[data-v-717e916d]{font-size:.34667rem;font-weight:400;color:#99a9c0;line-height:.50667rem;margin-bottom:.13333rem}.tab-1-content[data-v-717e916d]{font-size:.34667rem;font-weight:400;color:#393d46;line-height:.50667rem;margin-top:.33333rem;margin-bottom:.53333rem}[data-v-717e916d] .com-time-line .item .left .num{background:var(--van-primary-background-color);border:1px solid var(--van-primary-color)}[data-v-717e916d] .com-time-line .item .left .num:after{border-left:1px dashed var(--van-primary-background-color);border-right:1px dashed var(--van-primary-background-color)}.page-internet-product-detail[data-v-cf5ece7c]{padding-bottom:2rem;background:#f1f5fc}.page-internet-product-detail .custom-page-form[data-v-cf5ece7c]{background:#ffffff}.page-internet-product-detail .custom-page-form .form-title[data-v-cf5ece7c]{padding:.53333rem 0px .13333rem;text-align:center;font-size:.53333rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#333}.page-internet-product-detail .custom-page-form[data-v-cf5ece7c] .com-card-wrap .header{margin-left:0!important}.page-internet-product-detail .custom-page-form[data-v-cf5ece7c] .com-card-wrap .header .title-wrapper .title:before{margin-right:.37333rem!important}.page-internet-product-detail .custom-page-form[data-v-cf5ece7c] .com-card-wrap .relation-holder .van-cell__title{display:none}.page-internet-product-detail .custom-page-form[data-v-cf5ece7c] .radio-btn{justify-content:flex-start}.page-internet-product-detail .custom-page-form[data-v-cf5ece7c] .radio-btn .btn-wrapper{margin-left:0!important;margin-right:.10667rem!important}.page-internet-product-detail .footer-area[data-v-cf5ece7c]{width:100%;height:2rem;position:fixed;bottom:0;left:0;display:flex;align-items:center;border-top:1px solid #EEEFF4;padding:0 .4rem;background:#ffffff;z-index:10;justify-content:space-between;border-radius:.4rem .4rem 0px 0px}.page-internet-product-detail .price[data-v-cf5ece7c]{color:#393d46;font-size:.45333rem;font-weight:400}.page-internet-product-detail .price span[data-v-cf5ece7c]{color:var(--van-primary-color);font-weight:700}.page-internet-product-detail .price span[data-v-cf5ece7c]:last-child{font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400}.page-internet-product-detail .right[data-v-cf5ece7c]{width:4.26667rem;height:1.17333rem;border-radius:.58667rem}\n",document.head.appendChild(e),System.register(["./index-legacy-080a8765.js","./debounce-legacy-f3a647c0.js","./trial-legacy-ccbb7859.js","./product-legacy-111f7b88.js","./nextStep-legacy-0ccf230e.js","./infoCollection-legacy-f305e38b.js","./trial-legacy-33aafee0.js","./core-legacy-0d56294c.js","./index-legacy-3bf11c77.js","./theme-legacy-14f266cb.js","./utils-legacy-f573e549.js","./validator-legacy-5e43cc69.js","./phoneVerify-legacy-64d289ca.js","./useStorage-legacy-eaa08a98.js","./pdfdist-legacy-3ac4c460.js","./index-legacy-6167ce30.js","./index-legacy-1e4b1b38.js","./logo-legacy-553bc5c2.js"],(function(e,t){"use strict";var a,n,r,l,i,o,u,c,d,s,p,v,m,f,g,y,h,b,O,I,P,C,x,L,w,S,k,V,F,T,H,j,N,q,_,R,E,D,z,B,A,M,U,$,G,Q,W,J,K,Y,Z,X,ee,te,ae,ne,re,le,ie,oe,ue,ce,de,se,pe,ve,me,fe,ge,ye,he,be;return{setters:[function(e){a=e._,n=e.d,r=e.aY,l=e.r,i=e.a7,o=e.x,u=e.G,c=e.aR,d=e.b,s=e.q,p=e.c,v=e.g,m=e.i,f=e.F,g=e.l,y=e.h,h=e.B,b=e.t,O=e.j,I=e.e,P=e.n,C=e.f,x=e.I,L=e.Q,w=e.w,S=e.s,k=e.K,V=e.L,F=e.aZ,T=e.b0,H=e.aJ,j=e.b5,N=e.a8,q=e.u,_=e.a,R=e.a_,E=e.a2,D=e.a$,z=e.an,B=e.y,A=e.aP,M=e.aK,U=e.T,$=e.a4},function(e){G=e.d},function(e){Q=e.i,W=e.b,J=e.p,K=e.g},function(e){Y=e.p},function(e){Z=e.n},function(e){X=e.C,ee=e.S,te=e.R,ae=e.O,ne=e.m},function(e){re=e.k,le=e.j},function(e){ie=e.u},function(e){oe=e.u,ue=e.B,ce=e.P},function(e){de=e.u},function(e){se=e.o,pe=e.g,ve=e.v,me=e.r,fe=e.t},function(e){ge=e.v},function(e){ye=e.s,he=e.c},function(e){be=e.s},function(){},function(){},function(){},function(){}],execute:function(){const Oe={class:"guarantee-list"},Ie=(e=>(k("data-v-ac4580b0"),e=e(),V(),e))((()=>m("span",null,"保障计划",-1))),Pe={key:0,class:"picture-payment-content"},Ce=["onClick"],xe=["src"],Le=["src"],we={key:1,class:"plan-list"},Se=["onClick"],ke={key:2,class:"feerate-view"},Ve={key:0},Fe={class:"extinfo-info-list"},Te={class:"guarantee-detail"},He={class:"content"},je=n({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1},paymentFrequency:{type:String,default:""},premiumInfo:{type:Object,default:()=>{}}},emits:["update-active-plan"],setup(e,{emit:t}){const a=e;r((e=>({"541c7141":G.value})));const n=l(a.dataSource?.planList),k=l(a.activePlanCode),V=l();i([()=>a.dataSource,()=>a.activePlanCode],(()=>{a.isMultiplePlan&&(n.value=a.dataSource?.planList,k.value=a.activePlanCode,V.value=a.dataSource?.planList.findIndex((e=>e.planCode===k.value)))}),{immediate:!0});const F=l([]),T=l([]),H=l(),j=o((()=>a.isMultiplePlan?a.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));i([()=>a.dataSource,()=>a.activePlanCode,()=>a.paymentFrequency,()=>k.value],(()=>{if(a.isMultiplePlan){if(n.value&&n.value.length>0){let e=0;const t=n.value.findIndex((e=>e.planCode===k.value));t>-1&&(e=t),F.value=n.value[e].guaranteeItemVOS,T.value=n.value[e].extInfoVOList;const r=n.value[e].productPremiumVOList.find((e=>e.paymentFrequency===a.paymentFrequency));H.value=r||n.value[e]?.productPremiumVOList[0]}}else{F.value=a.dataSource?.planInsureVO.guaranteeItemVOS,T.value=a.dataSource?.planInsureVO.extInfoVOList;const e=a.dataSource?.planInsureVO.productPremiumVOList.find((e=>e.paymentFrequency===a.paymentFrequency));H.value=e||a.dataSource?.planInsureVO.productPremiumVOList[0]}}),{immediate:!0,deep:!0});const N=o((()=>a.dataSource?.rateUri||"")),q=o((()=>!!(H.value&&H.value.paymentFrequencyValue&&H.value.premiumUnit&&N))),[_,R]=u(!1),E=o((()=>!(!F.value||!F.value?.length)&&(F.value.length>a.count&&(!!a.isShowClose||!_.value)))),D=()=>{R()},z=o((()=>F.value&&F.value?.length?F.value.length<=a.count||_.value?F.value:F.value.slice(0,a.count):[])),B=e=>{k.value=e,V.value=a.dataSource?.planList.findIndex((e=>e.planCode===k.value))},A=l(!1),M=()=>{A.value=!0},U=()=>{se({fileType:"pdf",fileUri:N.value})},$=e=>{k.value=n.value[e.name].planCode},G=l("");return i([()=>k.value,()=>A.value],(()=>{c((()=>{(()=>{const e=(document.querySelector(".guarantee-popup .extinfo-info-list")?.clientHeight||0)+1,t=e+(document.querySelector(".guarantee-popup .custom-plan-tab")?.clientHeight||0)+(e?5:0);G.value=`calc( 100% - ${t}px )`})()}))})),(t,a)=>{const r=d("ProCell"),l=d("ProTab"),i=d("ProPopup"),o=s("dompurify-html");return p(),v(f,null,[m("div",Oe,[m("div",{class:"header"},[Ie,m("span",{onClick:M},"查看详情")]),e.isMultiplePlan?(p(),v(f,{key:0},[g(j).length>0?(p(),v("div",Pe,[(p(!0),v(f,null,y(g(j),(e=>(p(),v("div",{key:e.planCode,class:h("picture-payment-item"),onClick:t=>B(e.planCode)},[k.value==e.planCode?(p(),v("img",{key:0,src:e.selectedPic},null,8,xe)):(p(),v("img",{key:1,src:e.unSelectedPic},null,8,Le))],8,Ce)))),128))])):(p(),v("div",we,[(p(!0),v(f,null,y(n.value,((e,t)=>(p(),v("div",{key:`${e.planCode}_${t}`,class:h("plan-list-item "+(e.planCode===k.value?"plan-list-item-active":"")),onClick:t=>B(e.planCode)},[m("span",null,b(e.planName),1)],10,Se)))),128))]))],64)):O("",!0),(p(!0),v(f,null,y(g(z),((e,t)=>(p(),I(r,{key:t,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),g(E)?(p(),v("div",{key:1,class:"show-more",onClick:D},[P(b(g(_)?"收起":"查看更多")+" ",1),C(x,{name:"arrow-down-dobule",class:h(["icon",{showMore:g(_)}])},null,8,["class"])])):O("",!0),g(q)?(p(),v("div",ke,[m("span",null,b(`${H.value?.paymentFrequencyValue||""}${H.value?.premiumUnit||""}`),1),g(N)?(p(),v("span",{key:0,onClick:U},"查看保费")):O("",!0)])):O("",!0)]),C(L),C(i,{show:A.value,"onUpdate:show":a[1]||(a[1]=e=>A.value=e),title:"保障详情",class:"guarantee-popup"},{default:w((()=>[T.value&&T.value.length>0?(p(),v("div",Ve,[m("div",Fe,[(p(!0),v(f,null,y(T.value,((e,t)=>(p(),I(r,{key:t,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),C(L)])):O("",!0),e.isMultiplePlan?(p(),I(l,{key:1,active:V.value,"onUpdate:active":a[0]||(a[0]=e=>V.value=e),list:n.value.map(((e,t)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:$},null,8,["active","list"])):O("",!0),m("div",Te,[(p(!0),v(f,null,y(F.value,((e,t)=>(p(),v("div",{key:t,class:"guarantee-item"},[C(r,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),S(m("div",He,null,512),[[o,e.content]])])))),128))])])),_:1},8,["show"])],64)}}});var Ne=a(je,[["__scopeId","data-v-ac4580b0"]]);const qe={class:"spec"},_e={key:1,class:"spec"},Re=n({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:a}){const n=e,r=F((()=>T((()=>t.import("./index-legacy-080a8765.js").then((function(e){return e.bo}))),void 0))),i=F((()=>T((()=>t.import("./index-legacy-c49a4819.js")),void 0))),u=F((()=>T((()=>t.import("./index-legacy-080a8765.js").then((function(e){return e.bm}))),void 0))),c=F((()=>T((()=>t.import("./index-legacy-ed4b0a49.js")),void 0))),s=F((()=>T((()=>t.import("./index-legacy-84fc2e39.js")),void 0))),h=l(),b=l([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),P=o((()=>n.detail?.tenantProductInsureVO?.spec&&n.detail?.tenantProductInsureVO?.spec.length>0)),x=o((()=>{const e=n.detail?.tenantProductInsureVO?.settlementProcessVO.settlementProcessType;return!!(e===X.WORD&&n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessList&&n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessList.length>0||e===X.IMAGE&&n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessPicList&&n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessPicList.length>0)})),L=o((()=>n.detail?.tenantProductInsureVO?.questionList&&n.detail?.tenantProductInsureVO?.questionList.length>0)),S=o((()=>{let e=[...b.value];return P.value||(e=e.filter((e=>"tab1"!==e.slotName))),x.value||L.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>h.value?.handleClickTab}),(e,t)=>{const a=d("van-image"),l=d("ProSvg");return p(),I(g(r),{ref_key:"scrollRef",ref:h,class:"tabs",list:g(S),sticky:"",scrollspy:""},H({tab3:w((()=>[N(e.$slots,"form",{},void 0,!0)])),_:2},[g(P)?{name:"tab1",fn:w((()=>[m("div",qe,[(p(!0),v(f,null,y(n.detail?.tenantProductInsureVO?.spec||[],((e,t)=>(p(),I(j,{key:t},{fallback:w((()=>[C(l,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:w((()=>[(p(),I(a,{key:t,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),C(g(u))])]))}:void 0,g(x)||g(L)?{name:"tab2",fn:w((()=>[g(x)?(p(),v(f,{key:0},[n.detail?.tenantProductInsureVO?.settlementProcessVO.settlementProcessType===g(X).WORD?(p(),I(g(c),{key:0,title:"理赔说明"},{default:w((()=>[C(g(i),{list:n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessList},null,8,["list"])])),_:1})):(p(),v("div",_e,[(p(),I(j,null,{fallback:w((()=>[C(l,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:w((()=>[(p(!0),v(f,null,y(n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessPicList||[],((e,t)=>(p(),I(a,{key:t,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))])),_:1}))])),C(g(u))],64)):O("",!0),g(L)?(p(),v(f,{key:1},[C(g(c),{title:"常见问题"},{default:w((()=>[C(g(s),{list:n.detail?.tenantProductInsureVO?.questionList},null,8,["list"])])),_:1}),C(g(u))],64)):O("",!0)]))}:void 0]),1032,["list"])}}});var Ee=a(Re,[["__scopeId","data-v-717e916d"]]);const De=e=>(k("data-v-cf5ece7c"),e=e(),V(),e),ze={class:"page-internet-product-detail"},Be={class:"info"},Ae={class:"custom-page-form"},Me=De((()=>m("div",{class:"form-title"},"请填写投保信息",-1))),Ue={key:2,class:"footer-area"},$e={class:"price"},Ge={key:0},Qe=P(b("立即投保")),We=De((()=>m("div",{id:"xinaoDialog"},null,-1)));e("default",a(n({setup(e){const a=F((()=>T((()=>t.import("./index-legacy-924df808.js")),void 0))),n=F((()=>T((()=>t.import("./index-legacy-d9ab7a1b.js")),void 0))),r=F((()=>T((()=>t.import("./index-legacy-c1f02242.js")),void 0))),u=F((()=>T((()=>t.import("./index-legacy-1e4b1b38.js")),void 0))),s=F((()=>T((()=>t.import("./index-legacy-89c3dd8b.js")),void 0))),y=F((()=>T((()=>t.import("./index-legacy-b5a6ad32.js")),void 0))),h=F((()=>T((()=>t.import("./index-legacy-4f767fd0.js")),void 0))),P=F((()=>T((()=>t.import("./index-legacy-583ffee0.js")),void 0))),x=de();q();const L=_(),{productCode:S="",tenantId:k,agentCode:V="",agencyCode:j,saleChannelId:N,extraInfo:X,insurerCode:se,preview:Oe}=L.query;let Ie={};try{Ie=JSON.parse(decodeURIComponent(X))}catch(wt){}const{openId:Pe}=Ie,Ce=l(),xe=l(),Le=l(),we=l(!1),Se=l(),ke=l(),Ve=l(!1),Fe=l(!1),Te=l(0),He=l(!1),je=l({}),qe=l({}),_e=l(!0),Re=l(!0),De=l(""),Je=l(),Ke=l(),Ye=l(""),Ze=l(""),Xe=l("");Pe&&oe({openId:Pe},(e=>{qe.value=e}));const et="jumpToPage",tt=l({tenantId:k,agencyId:j,agentCode:V,orderCategory:1,saleChannelId:N,venderCode:se,productCode:S,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:"",premium:0,insurancePeriodValue:re.YEAR_1,commencementTime:"",tenantOrderHolder:{extInfo:{hasSocialInsurance:ee.HAS}},tenantOrderInsuredList:[{dontFetchDefaultInfo:!1,relationToHolder:te.SELF,extInfo:{hasSocialInsurance:ee.HAS},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:k,productCode:Se.value?.productCode||"",planCode:"",productName:Se.value?.productName||"",premium:Je.value||0,tenantOrderRiskList:[]}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:Ie,templateId:Ie?.templateId||"1",iseeBizNo:""},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),at=o((()=>!!Oe)),nt=o((()=>!!Se.value&&!!(Se.value?.tenantProductInsureVO?.planList&&Array.isArray(Se.value?.tenantProductInsureVO?.planList)&&Se.value?.tenantProductInsureVO?.planList.length>0))),rt=o((()=>{if(qe.value){const e=[];return Object.keys(qe.value).forEach((t=>{e.push(...qe.value[t])})),e}return[]})),lt=o((()=>rt.value.length>0)),it=o((()=>{let e={};if(ke.value?.productFactor?e=ke.value?.productFactor:tt.value.activePlanCode&&(e=ke.value?.planFactor[tt.value.activePlanCode]||{}),lt.value&&e[1]){const t=e[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay));t>-1&&(e[1][t].isDisplay=2)}return e})),ot=o((()=>{if(it.value[1]){if(it.value[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay))>-1)return!0}return!1}));i((()=>nt.value),(()=>{nt.value&&(tt.value.activePlanCode=tt.value.activePlanCode?tt.value.activePlanCode:Se.value?.tenantProductInsureVO?.planList[0].planCode)}),{immediate:!0});const ut=o((()=>nt.value?ke.value?.productRelationPlanVOList.find((e=>e.planCode===tt.value.activePlanCode))?.productRiskVoList||[]:ke.value?.productRiskVoList||[])),ct=o((()=>{if(!Se.value)return{};if(nt.value){const e=Se.value?.tenantProductInsureVO.planList.find((e=>e.planCode===tt.value.activePlanCode));return e||{}}return Se.value.tenantProductInsureVO.planInsureVO})),dt=e=>{tt.value.activePlanCode=e},st=o((()=>{if(ke.value?.productQuestionnaireVOList&&ke.value?.productQuestionnaireVOList.length>0){const e=ke.value?.productQuestionnaireVOList[0];if(e){const{basicInfo:{questionnaireType:t},questions:a}=e.questionnaireDetailResponseVO||{};return"2"===String(t)?[{attachmentName:e?.questionnaireName,attachmentUri:a,attachmentType:"question"}]:[{attachmentName:e?.questionnaireName,attachmentUri:a[0].content,attachmentType:pe(String(a[0].textType),a[0].content)}]}}return[]})),pt=l();i([()=>nt.value,()=>tt.value.activePlanCode,()=>Se.value],(()=>{let e=null;if(nt.value&&Se.value){const t=Se.value?.tenantProductInsureVO.planList.find((e=>e.planCode===(tt.value.activePlanCode||"")));t&&(e=t?.attachmentVOList)}else Se.value&&(e=Se.value?.tenantProductInsureVO.planInsureVO.attachmentVOList);pt.value=e?Object.keys(e).map((t=>(e[t].forEach((e=>{e.attachmentType=pe(String(e.attachmentType),e.attachmentUri)})),{attachmentName:t,attachmentList:e[t]}))):[]}),{immediate:!0});const vt=async({mobile:e,type:t},a)=>{if(Ce.value){if(at.value)return void a?.();Ce.value?.validateForm(`${t}_mobile`).then((async()=>{const t=await ye(e),{code:n,data:r}=t;"10000"===n&&a?.()}))}},mt=()=>{xe.value.handleClickTab()("tab3")},ft=e=>{Re.value=!1,Object.assign(tt.value.tenantOrderHolder,e),c((()=>{Re.value=!0}))},gt=e=>{Re.value=!1,Object.assign(tt.value.tenantOrderInsuredList[0],e),c((()=>{Re.value=!0}))},yt=e=>{Te.value=e,Fe.value=!0},ht=async()=>{try{await Z(((e={},t={},a={})=>{const n={...a},r={tenantId:k,riskList:n.tenantOrderInsuredList[0]?.tenantOrderProductList[0].riskVOList||[],riskPremium:t,productId:e?.productBasicInfoVO.id};return n.extInfo.iseeBizNo=De.value,n.productCode=e.productBasicInfoVO.productCode,n.commencementTime=n.insuranceStartDate,n.expiryDate=n.insuranceEndDate,n.paymentFrequency=n.paymentFrequency||ne.SINGLE,n.tenantOrderHolder={...n.tenantOrderHolder,socialFlag:n.tenantOrderHolder.extInfo.hasSocialInsurance||ee.HAS,certType:n.tenantOrderHolder.certType||E.CERT,extInfo:{...n.tenantOrderHolder.extInfo,hasSocialInsurance:n.tenantOrderHolder.extInfo.hasSocialInsurance||ee.HAS}},n.tenantOrderInsuredList=n.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||E.CERT,socialFlag:e.socialFlag||ee.HAS,planCode:tt.value.activePlanCode?tt.value.activePlanCode:null}))),n.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:Je.value,productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:tt.value.activePlanCode?tt.value.activePlanCode:null,tenantOrderRiskList:fe(r)},n})(ke.value,je.value,tt.value),(async(e,t)=>{t===et&&e?.orderNo&&await(async e=>{try{const{code:t,data:a}=await K({orderNo:e,tenantId:k});"10000"===t&&(a.extInfo={...a.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await Z(a))}catch(wt){}})(e?.orderNo)}))}catch(wt){}},bt=async(e,t,a,n=!0)=>{try{Xe.value="保费试算中...";const r=me(a).map((t=>({...t,paymentFrequency:e.paymentFrequency||ne.SINGLE,insurancePeriodValue:e.insurancePeriodValue,coveragePeriod:e.insurancePeriodValue}))),l={tenantId:k,productCode:Se.value?.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,paymentFrequency:e.paymentFrequency||ne.SINGLE,holder:{personVO:{...e.tenantOrderHolder,socialFlag:e.tenantOrderHolder.extInfo.hasSocialInsurance||ee.HAS,certType:e.tenantOrderHolder.certType||E.CERT,extInfo:{...e.tenantOrderHolder.extInfo,hasSocialInsurance:e.tenantOrderHolder.extInfo.hasSocialInsurance||ee.HAS}}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance||ee.HAS,certType:e.certType||E.CERT,extInfo:{...e.extInfo,hasSocialInsurance:e.extInfo.hasSocialInsurance||ee.HAS}},productPlanVOList:[{insurerCode:t.productBasicInfoVO.insurerCode,planCode:tt.value.activePlanCode?tt.value.activePlanCode:null,riskVOList:r}]})))},{code:i,message:o}=await W(l);if("10000"===i){const{code:e,data:t}=await J(l);if("10000"===e){if(Xe.value="",tt.value.tenantOrderInsuredList[0].tenantOrderProductList=l.insuredVOList[0].productPlanVOList,Je.value=t?.premium,tt.value.premium=t.premium,tt.value.orderAmount=t.premium,tt.value.orderRealAmount=t.premium,!n){const e={};t.riskPremiumDetailVOList&&t.riskPremiumDetailVOList.length&&t.riskPremiumDetailVOList.forEach((t=>{e[t.riskCode]={premium:t.premium,amount:t.amount}})),je.value=e,pt.value.length>0?(_e.value=!1,yt(0)):st.value.length>0?Ve.value=!0:await ht()}}else Xe.value=""}else Xe.value="",U(o)}catch(wt){Xe.value=""}},Ot=async()=>{try{Ve.value=!1,Fe.value=!1,Ce.value&&Ce.value?.validateForm().then((async()=>{if(lt.value||!ot.value)await bt(tt.value,ke.value,ut.value,!1);else{const e=tt.value.tenantOrderHolder?.verificationCode;if(!e||!ve(e))return void U({message:"请输入正确的验证码"});const{code:t,data:a}=await he(tt.value.tenantOrderHolder.mobile,e);"10000"===t&&await bt(tt.value,ke.value,ut.value,!1)}}))}catch(e){}},It=e=>{"allFalse"===e?(Ve.value=!1,ht()):$.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{Ve.value=!1}))},Pt=()=>{Fe.value=!1,st.value.length<1?ht():Ve.value=!0},Ct=()=>{Ve.value=!1,Fe.value=!1};i((()=>tt.value.tenantOrderInsuredList[0].relationToHolder),(()=>{Re.value=!1,c((()=>{tt.value.tenantOrderInsuredList[0]&&tt.value.tenantOrderInsuredList[0].extInfo&&!tt.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance&&(tt.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=ee.HAS),Re.value=!0}))}),{deep:!0,immediate:!0});const xt=()=>{const{name:e,birthday:t,gender:a,certType:n,extInfo:{hasSocialInsurance:r}}=tt.value.tenantOrderInsuredList[0];return!!(t&&a&&tt.value.paymentFrequency&&e&&ge(e)&&r)},Lt=()=>{if(xt()&&(Xe.value="保费试算中..."),ct.value&&ct.value.productPremiumVOList){const e=ct.value.productPremiumVOList.find((e=>e.paymentFrequency===tt.value.paymentFrequency));e&&(Je.value=null,Ke.value=e.paymentFrequencyValue?Number(e.paymentFrequencyValue):null,Ye.value=e.premiumUnit,Ze.value=e.actualPremiumUnit)}};i([()=>ct.value,()=>tt.value.activePlanCode,()=>tt.value.paymentFrequency],(()=>{Lt()}),{deep:!0,immediate:!0}),i([()=>tt.value.tenantOrderInsuredList[0].birthday,()=>tt.value.tenantOrderInsuredList[0].name,()=>tt.value.tenantOrderInsuredList[0].gender,()=>tt.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance,()=>tt.value.activePlanCode,()=>tt.value.paymentFrequency,()=>tt.value.insurancePeriodValue],G((()=>{if(xt()){if(at.value)return;bt(tt.value,ke.value,ut.value)}else Lt()}),500)),i((()=>tt.value.tenantOrderInsuredList[0]),(e=>{if(R(qe.value))return null;const t=qe.value[e.relationToHolder]||[];return 1===t.length&&(le.SELF!==e.relationToHolder?tt.value.tenantOrderInsuredList[0].dontFetchDefaultInfo||(tt.value.tenantOrderInsuredList[0].dontFetchDefaultInfo=!0,tt.value.tenantOrderInsuredList[0].certNo=tt.value.tenantOrderInsuredList[0].certNo?tt.value.tenantOrderInsuredList[0].certNo:t[0].cert[0].certNo,tt.value.tenantOrderInsuredList[0].name=tt.value.tenantOrderInsuredList[0].name?tt.value.tenantOrderInsuredList[0].name:t[0].cert[0].certName,tt.value.tenantOrderInsuredList[0].certType=tt.value.tenantOrderInsuredList[0].certType?tt.value.tenantOrderInsuredList[0].certType:t[0].cert[0].certType||E.CERT,tt.value.tenantOrderInsuredList[0].mobile=tt.value.tenantOrderInsuredList[0].mobile?tt.value.tenantOrderInsuredList[0].mobile:t[0].contact[0].contactNo):tt.value.tenantOrderHolder.dontFetchDefaultInfo||(tt.value.tenantOrderHolder.dontFetchDefaultInfo=!0,tt.value.tenantOrderHolder.certNo=tt.value.tenantOrderHolder.certNo?tt.value.tenantOrderHolder.certNo:t[0].cert[0].certNo,tt.value.tenantOrderHolder.name=tt.value.tenantOrderHolder.name?tt.value.tenantOrderHolder.name:t[0].cert[0].certName,tt.value.tenantOrderHolder.mobile=tt.value.tenantOrderHolder.mobile?tt.value.tenantOrderHolder.mobile:t[0].contact[0].contactNo,tt.value.tenantOrderHolder.certType=tt.value.tenantOrderHolder.certType?tt.value.tenantOrderHolder.certType:t[0].contact[0].certType||E.CERT)),!1}),{immediate:!0,deep:!0});return c((()=>{D(Le,(([{isIntersecting:e}],t)=>{we.value=!e}))})),ie(),z((()=>{const e=be.get(ae);if(e){const{tenantOrderHolder:t,tenantOrderInsuredList:a}=e;if(t&&(tt.value.tenantOrderHolder={...t,certType:t.certType||E.CERT}),Array(a)&&a[0]){const e=a[0]||{};if(tt.value.activePlanCode=e.planCode,e.tenantOrderProductListtenantOrderProductList&&e.tenantOrderProductList[0]&&e.tenantOrderProductList[0].tenantOrderRiskList){const t=e.tenantOrderProductList[0].tenantOrderRiskList?.find((e=>"1"===String(e.riskType)));t&&(tt.value.paymentFrequency=t?.paymentFrequency?String(t?.paymentFrequency):ne.SINGLE)}}}})),B((()=>{(async()=>{await Y({productCode:S,withInsureInfo:!0,tenantId:k}).then((e=>{"10000"===e.code&&(Se.value={...e.data},document.title=e.data?.tenantProductInsureVO?.productName||"")})),await Q({productCode:S}).then((e=>{"10000"===e.code&&(He.value=!0,ke.value=e.data)}))})(),setTimeout((async()=>{De.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),A((()=>{be.remove(ae)})),(e,t)=>{const l=d("van-config-provider");return p(),v(f,null,[C(l,{"theme-vars":g(x)},{default:w((()=>[m("div",ze,[m("div",Be,[C(ue,{url:Se.value?.tenantProductInsureVO?.banner[0]},null,8,["url"]),Se.value?.tenantProductInsureVO?.bannerMove?(p(),I(ue,{key:0,url:Se.value?.tenantProductInsureVO?.bannerMove[0],onClick:mt},null,8,["url"])):O("",!0),m("div",{ref_key:"observeRef",ref:Le},null,512)]),C(Ne,{"show-service-config":"","data-source":Se.value?.tenantProductInsureVO,"is-multiple-plan":g(nt),"active-plan-code":tt.value.activePlanCode,"payment-frequency":tt.value.paymentFrequency,"premium-info":{premium:Je.value,unit:Ye.value,premiumLoadingText:Xe.value},onUpdateActivePlan:dt},null,8,["data-source","is-multiple-plan","active-plan-code","payment-frequency","premium-info"]),C(Ee,{ref_key:"detailScrollRef",ref:xe,detail:Se.value},{form:w((()=>[m("div",Ae,[Me,C(g(s),{ref_key:"formRef",ref:Ce,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":tt.value,"need-desensitize":Re.value,"send-sms-code":vt,"factor-object":g(it)||{}},H({_:2},[g(rt).length>1?{name:"holderName",fn:w((()=>[C(g(y),{"user-info":tt.value.tenantOrderHolder,data:g(rt),onChange:ft},null,8,["user-info","data"])]))}:void 0,g(rt).length>1?{name:"insurerName",fn:w((()=>[C(g(y),{title:"选择被保人","user-info":tt.value.tenantOrderInsuredList[0],data:g(rt),onChange:gt},null,8,["user-info","data"])]))}:void 0]),1032,["form-info","need-desensitize","factor-object"])]),C(g(r),{"form-info":tt.value,"insure-detail":ke.value,"config-detail":Se.value,"is-multiple-plan":g(nt),"premium-info":{premium:Je.value,unit:Ye.value,minPremiun:Ke.value,actualUnit:Ze.value,premiumLoadingText:Xe.value},onUpdateActivePlan:dt},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","premium-info"])])),_:1},8,["detail"]),Se.value?.tenantProductInsureVO.inscribedContent?(p(),I(g(h),{key:0,"inscribed-content":Se.value?.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):O("",!0),pt.value&&pt.value.length>0?(p(),I(g(P),{key:1,"attachement-list":pt.value,"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>yt(e))},null,8,["attachement-list"])):O("",!0),we.value?(p(),v("div",Ue,[m("div",$e,[Xe.value?(p(),v("span",Ge,b(Xe.value),1)):Je.value?(p(),v(f,{key:1},[m("span",null,b(g(M)(Je.value)),1),m("span",null,b(Ze.value||"元"),1)],64)):(p(),v(f,{key:2},[m("span",null,b(Ke.value),1),m("span",null,b(Ye.value),1)],64))]),C(g(u),{disabled:g(at),shadow:!1,"theme-vars":g(x),class:"right",text:"立即投保",onClick:Ot},{default:w((()=>[Qe])),_:1},8,["disabled","theme-vars"])])):O("",!0)]),He.value?(p(),I(ce,{key:0,"product-detail":Se.value},null,8,["product-detail"])):O("",!0),We])),_:1},8,["theme-vars"]),C(g(n),{show:Ve.value,"onUpdate:show":t[1]||(t[1]=e=>Ve.value=e),"content-list":g(st),"active-index":0,onOnConfirmHealth:It,onOnCloseHealthByMask:Ct},null,8,["show","content-list"]),Fe.value?(p(),I(g(a),{key:0,show:Fe.value,"onUpdate:show":t[2]||(t[2]=e=>Fe.value=e),"content-list":pt.value,"is-only-view":_e.value,"active-index":Te.value,text:_e.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:Pt,onOnCloseFilePreviewByMask:Ct},null,8,["show","content-list","is-only-view","active-index","text"])):O("",!0)],64)}}}),[["__scopeId","data-v-cf5ece7c"]]))}}}))}();

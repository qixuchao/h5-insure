import{_ as e,d as a,r as n,an as t,G as l,c as o,h as i,j as s,g as d,f as u,k as r,V as c,bY as v,bZ as p,u as m,a as f,E as _,a9 as C,b6 as I,F as y,e as k,w as g,n as h,a7 as b,ck as w,c0 as O,c7 as x}from"./index-4edd55c0.js";import{i as N}from"./trial-fff0defb.js";import{b as T,c as P}from"./product-77bc31aa.js";import{_ as R}from"./index-a51cbe08.js";import{u as A,G as L,_ as S}from"./useAttachment-2bc00d80.js";import{P as j}from"./index-90c15d91.js";import{g as E}from"./utils-454413f3.js";import"./pdfh5-008ca364.js";import"./infoCollection-e6c4302a.js";import"./trial-28995c59.js";const V={class:"com-video"},F=["src"],B=["src"];var U=e(a({__name:"Video",props:{src:null},setup(e){const a=e,v=n(!1),p=n("");return t((()=>a),(e=>{p.value=`/api/app/common/file/generateLink?type=2&url=${e.src}`}),{deep:!0,immediate:!0}),l((()=>{})),(e,n)=>{const t=c;return o(),i("div",V,[s("img",{src:d(p),class:"cover-image",onClick:n[0]||(n[0]=e=>v.value=!0)},null,8,F),u(t,{name:"play",class:"cover-image-play",onClick:n[1]||(n[1]=e=>v.value=!0)}),d(v)?(o(),i("video",{key:0,src:a.src,autoplay:"",controls:"",class:"banner-video"},null,8,B)):r("",!0)])}}}),[["__scopeId","data-v-cd73ccd2"]]);const D={key:0},q={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},G={class:"info"},M={key:1,class:"preview-placeholder"},z=s("br",null,null,-1),Y=s("span",{id:"insureButton"},null,-1),J=s("div",{id:"xinaoDialog"},null,-1),Q=a({__name:"index",setup(e){const a=v((()=>p((()=>import("./index-5b015def.js")),["static/js/index-5b015def.js","static/css/index-df3895a0.css","static/js/index-4edd55c0.js","static/css/index-a410ae6d.css","static/js/pdfh5-008ca364.js","static/js/index-1d476210.js","static/css/index-ea4f829a.css","static/js/index-3ec48f63.js","static/css/index-1f09692e.css","static/js/ProAddress.vue_vue_type_style_index_0_scoped_true_lang-9cb21fc0.js","static/css/ProAddress.vue_vue_type_style_index_0_scoped_true_lang-b43a2ff4.css","static/js/trial-fff0defb.js","static/js/index-3a3dffd7.js","static/js/isObjectLike-f858f31d.js","static/js/_nodeUtil-ef4cea77.js","static/js/TrialButton-fc636b08.js","static/css/TrialButton-0e59660a.css","static/js/index-23711a8d.js","static/css/index-85f26bb0.css","static/js/index-6faf7142.js","static/css/index-c3fdf902.css","static/js/box-title-21893e1d.js","static/css/box-title-54f6fe95.css","static/js/index-00cb93c9.js","static/js/echarts-5af64754.js","static/js/Table-94bc36e5.js","static/css/Table-da427f8c.css","static/js/empty-ae586b6c.js"]))),c=v((()=>p((()=>import("./index-14d31510.js")),["static/js/index-14d31510.js","static/css/index-ea588f10.css","static/js/index-4edd55c0.js","static/css/index-a410ae6d.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-23711a8d.js","static/css/index-85f26bb0.css","static/js/utils-454413f3.js","static/js/infoCollection-e6c4302a.js","static/js/trial-28995c59.js"]))),V=v((()=>p((()=>import("./index-3684c4d8.js")),["static/js/index-3684c4d8.js","static/css/index-b1275e60.css","static/js/index-4edd55c0.js","static/css/index-a410ae6d.css","static/js/pdfh5-008ca364.js"]))),F=v((()=>p((()=>import("./index-9122dd97.js")),["static/js/index-9122dd97.js","static/css/index-b9ba3011.css","static/js/index-4edd55c0.js","static/css/index-a410ae6d.css","static/js/pdfh5-008ca364.js"])));m();const B=f(),{productCode:Q="",tenantId:Z,agentCode:$="",agencyCode:H,saleChannelId:K,extraInfo:W,insurerCode:X,preview:ee,trialPreview:ae}=B.query;let ne={};try{console.log("extInfo",decodeURIComponent(W)),ne=JSON.parse(decodeURIComponent(W))}catch(Ae){}n();const te=n(),le=n(),oe=n(!0),ie=n({}),se=n({}),de=n(!1),ue=n(0),re=n(!1);n({});const ce=n(!0);n(!0);const ve=n(!0),pe=n(""),me=n({}),fe=n({}),_e=n([]),Ce=n({imgUrl:"",desc:"",title:"",link:window.location.href}),Ie=n({});_((()=>!!ee||!!ae));const ye=_((()=>!!ae)),ke=n(),ge=()=>{ke.value.open()},he=n([]),be=n(),we=async()=>{!ye.value&&T({productCode:Q,tenantId:Z,isTenant:!ee}).then((({data:e,code:a})=>{if("10000"===a){ie.value=e,document.title=e.BASIC_INFO.title||"";const{title:a,desc:t,image:l}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{};n={title:a,desc:t,image:l},Ce.value={desc:n.desc||"你好，这里是描述",imgUrl:n.image,title:n.title,link:window.location.href},w(e.BASIC_INFO.themeType)}var n})),await N({productCode:Q,isTenant:!ee||!ae}).then((({data:e,code:a})=>{var n;"10000"===a&&(re.value=!0,se.value=e,me.value=null==(n=e.productPlanInsureVOList)?void 0:n[0],_e.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),ve.value=!1,P({productCode:Q}).then((({code:e,data:a})=>{var n,t,l,o;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=a;be.value=e||[];const{basicInfo:{questionnaireType:s},questions:d,questionnaireName:u}=(null==(n=null==i?void 0:i[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};2===s&&(he.value=[{attachmentName:u,attachmentUri:d,attachmentType:"question"}]),he.value=[{attachmentName:u,attachmentUri:null==(t=null==d?void 0:d[0])?void 0:t.content,attachmentType:E(String(null==(l=null==d?void 0:d[0])?void 0:l.textType),null==(o=null==d?void 0:d[0])?void 0:o.content)}]}}))};t((()=>Ie.value.planCode),(e=>{me.value=(se.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Oe=()=>{te.value.handleClickTab()("insureButton")};n(""),n(0);const{fileList:xe,mustReadFileCount:Ne,popupFileList:Te}=A(me,be),Pe=()=>{de.value=!1,ce.value=!0},Re=()=>{de.value=!1,ce.value=!0};return t((()=>me.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:n}=me.value;Ie.value.planCode=e,fe.value=(n||[]).find((e=>e.mainRiskFlag===C.YES))}),{deep:!0,immediate:!0}),I((()=>{O(le,(([{isIntersecting:e}],a)=>{oe.value=!0}))})),l((()=>{ve.value=!0,we(),setTimeout((async()=>{pe.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,n)=>{var t,l,v,p,m,f,_,C,I,w,O;const N=x;return o(),i(y,null,[d(ve)?(o(),i("div",D)):(o(),i("div",q,[d(ye)?(o(),i("div",M,[h("当前页面仅用于保费试算预览"),z,h("不展示其他产品相关配置信息")])):(o(),i(y,{key:0},[s("div",G,[(null==(l=null==(t=d(ie))?void 0:t.BASIC_INFO)?void 0:l.banner.length)?(o(),k(R,{key:0,"data-skeleton-type":"img",url:null==(v=d(ie))?void 0:v.BASIC_INFO.banner[0]},null,8,["url"])):r("",!0),u(U,{"data-skeleton-type":"img",src:null==(p=d(ie))?void 0:p.BASIC_INFO.video[0]},null,8,["src"]),(null==(_=null==(f=null==(m=d(ie))?void 0:m.BASIC_INFO)?void 0:f.bannerMove)?void 0:_.length)?(o(),k(R,{key:1,url:null==(w=null==(I=null==(C=d(ie))?void 0:C.BASIC_INFO)?void 0:I.bannerMove)?void 0:w[0],onClick:Oe},null,8,["url"])):r("",!0),s("div",{ref_key:"observeRef",ref:le},null,512)]),(null==(O=d(ie))?void 0:O.GUARANTEE)?(o(),k(L,{key:0,"show-service-config":"","data-source":d(ie),"plan-list":d(_e)},null,8,["data-source","plan-list"])):r("",!0),s("div",{class:"trial-text-btn",onClick:ge},"算一算保费"),u(S,{ref:"tenantProductDetailScrollRef","data-source":d(ie)},null,8,["data-source"]),u(N,null,{default:g((()=>{var e,a,n;return[(null==(e=d(ie).SIGNATURE)?void 0:e.inscribedContent)?(o(),k(d(V),{key:0,"inscribed-content":null==(n=null==(a=d(ie))?void 0:a.SIGNATURE)?void 0:n.inscribedContent},null,8,["inscribed-content"])):r("",!0)]})),_:1}),u(N,null,{default:g((()=>{var e;return[(null==(e=d(xe))?void 0:e.length)?(o(),k(d(F),{key:0,"attachement-list":d(xe),"pre-text":"请阅读",onPreviewFile:n[0]||(n[0]=e=>(e=>{ue.value=e,de.value=!0})(e))},null,8,["attachement-list"])):r("",!0)]})),_:1})],64)),d(oe)?(o(),i(y,{key:2},[Y,u(d(a),{ref_key:"trialRef",ref:ke,"data-source":d(me),"product-info":{productCode:d(se).productCode,productName:d(se).productName}},null,8,["data-source","product-info"])],64)):r("",!0)])),d(re)&&!d(ye)?(o(),k(j,{key:2,"product-detail":d(ie)},null,8,["product-detail"])):r("",!0),J,d(de)?(o(),k(d(c),{key:3,show:d(de),"onUpdate:show":n[1]||(n[1]=e=>b(de)?de.value=e:null),"content-list":d(ce)?d(xe):d(Te),"is-only-view":d(ce),"active-index":d(ue),text:d(ce)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":d(ce)?0:d(Ne),onSubmit:Pe,onOnCloseFilePreviewByMask:Re},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):r("",!0)],64)}}});export{Q as default};

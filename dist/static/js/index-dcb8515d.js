import{_ as a,d as e,r as s,a as t,G as r,b as l,c as o,e as n,w as d,j as u,t as c,g as i,A as p,a7 as v,aS as m,K as f,f as b,n as I,p as _,ah as h,T as y,B as C,X as N,Y as j}from"./index-d9e24409.js";import{s as E,c as P}from"./phoneVerify-07eb217e.js";import{c as S}from"./format-12461bbc.js";import{a as g}from"./order-20b9b6b3.js";import"./pdfh5-008ca364.js";const U={class:"page-phone-verify"},q=(a=>(N("data-v-29510ea1"),a=a(),j(),a))((()=>u("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息预",-1))),w={class:"phone"},x={class:"input-wrapper"};var A=a(e({__name:"index",setup(a){const e=s(""),N=s(""),j=s(0);let A;const D=t(),{agentCode:G,tenantId:R,templateId:T,productCode:k,insurerCode:V,orderNo:W}=D.query,Y=()=>{E(e.value).then((({code:a})=>{"10000"===a&&(j.value=60,A=setInterval((()=>{j.value-=1,j.value<=0&&clearInterval(A)}),1e3))}))},B=()=>{P(e.value,N.value).then((({code:a,data:e})=>{"10000"===a&&e?(y.success("验证成功"),h("infoPreview",D.query)):y.fail("验证失败")}))};return r((()=>{_({orderNo:W,saleUserId:G,tenantId:R}).then((a=>{var s;const{code:t,data:r}=a;"10000"===t&&([g.PENDING,g.PAYMENT_FAILED,g.UNDER_WRITING_SUCCESS].includes(r.orderStatus)?e.value=null==(s=null==r?void 0:r.tenantOrderHolder)?void 0:s.mobile:h("paymentResult",D.query))}))})),(a,s)=>{const t=C,r=l("ProPageWrap");return o(),n(r,null,{default:d((()=>[u("div",U,[q,u("div",w,c(i(S)(i(e))),1),u("div",x,[p(u("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>v(N)?N.value=a:null),placeholder:"请输入验证码",class:"input"},null,512),[[m,i(N)]]),u("div",{class:f(["btn",{second:i(j)}]),onClick:Y},c(i(j)?`${i(j)}s`:"发送验证码"),3)]),b(t,{type:"primary",class:"submit-btn",onClick:B},{default:d((()=>[I("下一步")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-29510ea1"]]);export{A as default};

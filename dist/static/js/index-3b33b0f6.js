var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var q=(e,t,a)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,D=(e,t)=>{for(var a in t||(t={}))ae.call(t,a)&&q(e,a,t[a]);if(R)for(var a of R(t))oe.call(t,a)&&q(e,a,t[a]);return e},w=(e,t)=>ee(e,te(t));import{g as b,j as F,n as j,z as o,J as T,A as C,t as se,a4 as ne,a5 as re,O as le,E as _,h as ie,r as E,k as ue,m as A,p as m,T as M}from"./vendor-667a94d7.js";import{S as de}from"./infoCollection-242da9b6.js";import{_ as k}from"./index-b09072ab.js";import{c as ce}from"./close-df102554.js";import{a as pe}from"./order-b675ac95.js";import{i as _e,a as me,s as ve,e as fe,E as Ie}from"./trial-844d61d0.js";import{g as he,b as ge,t as De,a as ye,d as Ce,e as xe,f as H}from"./theme-7decec6d.js";import{p as Se}from"./product-2b8d9c0e.js";import"./trial-4c05804a.js";const Oe={class:"com-field-info"},we={class:"title"},Ee={class:"desc"},be=b({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(e){return(t,a)=>(F(),j("div",Oe,[o("div",we,T(e.title),1),o("div",Ee,T(e.desc),1)]))}});var y=k(be,[["__scopeId","data-v-74e2bdf6"]]);const J=e=>(ne("data-v-303bee62"),e=e(),re(),e),Fe={key:0,class:"pro-modal"},ke=J(()=>o("div",{class:"pro-overlay"},null,-1)),Be={class:"pro-modal-wrapper"},Pe=J(()=>o("div",{class:"pro-modal-content"},[o("p",null,"\u606D\u559C\u60A8"),o("p",null,"\u4FDD\u969C\u5347\u7EA7\u6210\u529F")],-1)),$e=["src"],Le=b({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(e,{emit:t}){const a=e,d=()=>{t("on-close")};return(B,P)=>a.isShow?(F(),j("div",Fe,[ke,o("div",Be,[o("div",{class:"pro-modal-body"},[Pe,o("div",{class:"pro-modal-btn",onClick:d},"\u6211\u77E5\u9053\u4E86")]),o("div",{class:"pro-modal-close",onClick:d},[o("img",{src:C(ce)},null,8,$e)])])])):se("",!0)}});var Ue=k(Le,[["__scopeId","data-v-303bee62"]]);const Ne={class:"page-activity-upgrade"},Ve=["src"],Re={class:"container"},qe={class:"main-form"},Te=b({setup(e){const t=le(),{productCode:a="BWYL2022",tenantId:d,orderId:B,extInfo:P}=t.query,K=he(P),p=_(),g=_(),s=_(),v=_(),x=_(),S=_(),O=_(!1),Y=()=>{O.value=!1},z=async()=>{var c,u,f,I,h;const l=ye({tenantId:d,applicationNo:s.value.applicationNo,policyNo:s.value.policyNo,saleChannelId:s.value.saleChannelId,orderStatus:pe.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:p.value,paymentMethod:(u=(c=s.value.extInfo)==null?void 0:c.extraInfo)==null?void 0:u.paymentMethod,renewalDK:(I=(f=s.value.extInfo)==null?void 0:f.extraInfo)==null?void 0:I.renewalDK,successJumpUrl:"",premium:v.value,holder:w(D({},s.value.tenantOrderHolder),{socialFlag:s.value.tenantOrderHolder.extInfo.hasSocialInsurance}),insured:w(D({},s.value.tenantOrderInsuredList[0]),{socialFlag:s.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:Ce({tenantId:d,riskList:xe(g.value.productRiskVoList[0].riskDetailVOList,p.value),riskPremium:{},productId:(h=p.value)==null?void 0:h.id})}),n=await ve(l),{code:i,data:r}=n;return i==="10000"?r.data:""},$=async()=>{const l=H({tenantId:d,premium:v.value,orderDetail:s.value,productDetail:p.value,insureDetail:g.value}),n=await fe(l),{code:i,data:r}=n;i==="10000"&&(v.value=r.installmentPremium,S.value=r.signUrl)},G=async l=>{const n=H({tenantId:d,premium:v.value,orderDetail:s.value,productDetail:p.value,insureDetail:g.value}),i=await Ie(D({id:l},n)),{code:r,data:c}=i;r==="10000"&&(O.value=!0)},W=async l=>{try{M.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"}),await $();const n=await z();S.value?window.location.href=S.value:G(n)}catch(n){console.log(n),M.clear()}},Q=()=>{const l=Se({productCode:a,withInsureInfo:!0}),n=_e({productCode:a}),i=me({id:B||K.orderId,tenantId:d});Promise.all([l,n,i]).then(([r,c,u])=>{r.code==="10000"&&(p.value=r.data),c.code==="10000"&&(g.value=c.data),u.code==="10000"&&(s.value=u.data,x.value=u.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),$()})};return ie(()=>{Q()}),(l,n)=>{const i=E("ProRadioButton"),r=E("ProField"),c=E("van-config-provider");return F(),ue(c,{"theme-vars":C(De)},{default:A(()=>{var u,f,I,h,L,U,N,V;return[o("div",Ne,[o("img",{src:(f=(u=p.value)==null?void 0:u.tenantProductInsureVO)==null?void 0:f.banner[0],class:"banner"},null,8,Ve),o("div",Re,[o("div",qe,[m(y,{title:"\u59D3\u540D",desc:(h=(I=s.value)==null?void 0:I.tenantOrderInsuredList)==null?void 0:h[0].name},null,8,["desc"]),m(y,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(U=(L=s.value)==null?void 0:L.tenantOrderInsuredList)==null?void 0:U[0].certNo},null,8,["desc"]),m(y,{title:"\u624B\u673A\u53F7\u7801",desc:(V=(N=s.value)==null?void 0:N.tenantOrderHolder)==null?void 0:V.mobile},null,8,["desc"]),m(y,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${C(ge)(v.value||0)}\u5143 / \u6BCF\u6708`},null,8,["desc"]),m(r,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:A(()=>[m(i,{modelValue:x.value,"onUpdate:modelValue":n[0]||(n[0]=X=>x.value=X),disabled:!0,options:C(de)},null,8,["modelValue","options"])]),_:1}),o("div",{class:"submit",onClick:W})])]),m(Ue,{"is-show":O.value,onOnClose:Y},null,8,["is-show"])])]}),_:1},8,["theme-vars"])}}});var Qe=k(Te,[["__scopeId","data-v-30a2b22e"]]);export{Qe as default};

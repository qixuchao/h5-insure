var X=Object.defineProperty;var J=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var G=(a,t,e)=>t in a?X(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,O=(a,t)=>{for(var e in t||(t={}))Z.call(t,e)&&G(a,e,t[e]);if(J)for(var e of J(t))ee.call(t,e)&&G(a,e,t[e]);return a};import{g as N,v as H,r as W,L as K,_ as te,z as ne,V as oe,A as d,o,E as m,B as l,t as y,i as $,F as j,j as x,J as M,G as R,O as A,W as se,k as g,H as D,T as ue,a7 as re,a8 as ae,h as q,p as Y,K as ie}from"./vendor-8d9a202a.js";import{P as le}from"./index-29abeb96.js";import{P as ce}from"./index-24ee2c47.js";import{_ as F}from"./index-e25d276f.js";import{w as pe,n as de}from"./pdf.worker.entry-a3c24419.js";import{p as z}from"./pdf_viewer-2447d48a.js";import{g as _e,s as me}from"./inform-1c3108c2.js";import{s as fe}from"./useStorage-74d60773.js";import"./index-9df3dcd0.js";const ve={class:"problem"},ge={class:"footer-button"},ye=D("\u63D0\u4EA4"),he=N({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(a,{emit:t}){const e=a,b=H(),s=W([]),{questionnaireType:f}=b.query,E={"1":"\u6295\u4FDD\u4EBA","2":"\u88AB\u4FDD\u4EBA","3":"\u4EE3\u7406\u4EBA"},T=K({listQuestions:[]}),{listQuestions:h}=te(T),_=c=>{s.value[c].toggle()},C=c=>c?JSON.parse(c).map(n=>({title:n.value,value:n.uid})):[];ne(()=>e.currentPageInfo,c=>{h.value=c.map((n,k)=>n.questionType===2?O({multipleChoose:[]},n):O({singleAnswer:n.questionType===3?0:""},n))},{deep:!0,immediate:!0});const i=()=>{h.value.some(n=>{var k;return["undefined",""].includes(n.singleAnswer)||((k=n.multipleChoose)==null?void 0:k.length)===0})?ue("\u8BF7\u5B8C\u6210\u6240\u6709\u9898\u76EE\u8FDB\u884C\u4E0B\u4E00\u6B65"):t("onSubmitCurrentStatus",1,JSON.stringify(h.value))};return oe(()=>{s.value=[]}),(c,n)=>{const k=d("van-radio"),w=d("van-cell"),p=d("van-cell-group"),u=d("van-radio-group"),I=d("van-checkbox"),P=d("van-checkbox-group"),S=d("van-field"),B=d("van-button"),Q=d("ProPageWrap");return o(),m(Q,{class:"com-quersion"},{default:l(()=>[y(le,{title:`${E[g(f)]}\u5065\u5EB7\u544A\u77E5\u4E66`},{default:l(()=>[(o(!0),$(R,null,j(g(h),(r,L)=>(o(),$("div",{key:L,class:"question-item"},[x("div",ve,M(L+1)+". "+M(r.title),1),r.questionType===1?(o(),m(u,{key:0,modelValue:r.singleAnswer,"onUpdate:modelValue":v=>r.singleAnswer=v},{default:l(()=>[y(p,{inset:""},{default:l(()=>[(o(!0),$(R,null,j(C(r.options),(v,V)=>(o(),m(w,{key:V,title:v.title,clickable:"",onClick:U=>r.singleAnswer=V},{"right-icon":l(()=>[y(k,{name:V},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):A("",!0),r.questionType===2?(o(),m(P,{key:1,modelValue:r.multipleChoose,"onUpdate:modelValue":v=>r.multipleChoose=v},{default:l(()=>[y(p,{inset:""},{default:l(()=>[(o(!0),$(R,null,j(C(r.options),(v,V)=>(o(),m(w,{key:v.uid,clickable:"",title:v.title,onClick:U=>_(V)},{"right-icon":l(()=>[y(I,{ref_for:!0,ref:U=>s.value[V]=U,shape:"square",name:V,onClick:n[0]||(n[0]=se(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):A("",!0),r.questionType===3?(o(),m(ce,{key:2,modelValue:r.singleAnswer,"onUpdate:modelValue":v=>r.singleAnswer=v,options:[{label:"\u662F",value:"Y"},{label:"\u5426",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):A("",!0),r.questionType===4?(o(),m(p,{key:3,inset:""},{default:l(()=>[y(S,{modelValue:r.singleAnswer,"onUpdate:modelValue":v=>r.singleAnswer=v,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):A("",!0)]))),128))]),_:1},8,["title"]),x("div",ge,[y(B,{type:"primary",block:"",onClick:i},{default:l(()=>[ye]),_:1})])]),_:1})}}});var Ce=F(he,[["__scopeId","data-v-41012a55"]]);const ke={class:"title"},be={class:"content"},Se={class:"footer-button"},Ee=D("\u4E86\u89E3\u5E76\u7EE7\u7EED"),we=N({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(a,{emit:t}){const e=a;return(b,s)=>{const f=d("van-button"),E=d("ProPageWrap"),T=re("dompurify-html");return o(),m(E,{class:"com-document"},{default:l(()=>{var h,_;return[x("div",ke,M((h=e.currentPageInfo[0])==null?void 0:h.title),1),ae(x("div",be,null,512),[[T,(_=e.currentPageInfo[0])==null?void 0:_.content]]),x("div",Se,[y(f,{type:"primary",onClick:s[0]||(s[0]=C=>t("onSubmitCurrentStatus",1))},{default:l(()=>[Ee]),_:1})])]}),_:1})}}});var Ie=F(we,[["__scopeId","data-v-27a7d770"]]);const Pe={class:"com-pdf-viewer"},$e=["id","isee_pdf"],Ae={class:"footer-button"},xe=D("\u90E8\u5206\u4E3A\u662F"),Ve=D("\u4EE5\u4E0A\u7686\u5426"),Te=N({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(a,{emit:t}){const e=a;z.exports.GlobalWorkerOptions.workerSrc=pe;const b=de(),s=W(!1),f=W(!0),E=q(()=>["png","jpg","jpeg"].some(_=>e.url.includes(_))),T=()=>{const _=document.getElementById(b);if(_.hasChildNodes()){f.value=!1;return}z.exports.getDocument({url:e.url}).promise.then(i=>{const c=i.numPages;for(let n=1;n<=c;n++)i.getPage(n).then(k=>{const w=k.getViewport({scale:1}),p=document.createElement("canvas"),u=p.getContext("2d");p.width=w.width,p.height=w.height,p.style.width="100%",_.append(p);const I={canvasContext:u,viewport:w};k.render(I),f.value=!1})})},h=async()=>{s.value=!0,setTimeout(()=>{T()},0)};return Y(()=>{h()}),(_,C)=>{const i=d("van-image"),c=d("van-button");return o(),$("div",Pe,[g(E)?(o(),m(i,{key:0,width:"100%",height:"80vh",fit:"contain",src:e.url},null,8,["src"])):(o(),$("div",{key:1,id:g(b),isee_pdf:_.pdfUrl,class:"pdf-wapper"},null,8,$e)),x("div",Ae,[y(c,{plain:"",type:"primary",onClick:C[0]||(C[0]=n=>t("onSubmitCurrentStatus",2))},{default:l(()=>[xe]),_:1}),y(c,{type:"primary",onClick:C[1]||(C[1]=n=>t("onSubmitCurrentStatus",1))},{default:l(()=>[Ve]),_:1})])])}}});var Be=F(Te,[["__scopeId","data-v-4c70488e"]]);const Qe={class:"iframe-wrap"},De=["src"],qe={class:"footer-button"},Ne=D("\u90E8\u5206\u4E3A\u662F"),Fe=D("\u4EE5\u4E0A\u7686\u5426"),Ue=N({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(a,{emit:t}){const e=a;return(b,s)=>{const f=d("van-button");return o(),$("div",Qe,[x("iframe",{src:e.url,frameborder:"0"},null,8,De),x("div",qe,[y(f,{plain:"",type:"primary",onClick:s[0]||(s[0]=E=>t("onSubmitCurrentStatus",2))},{default:l(()=>[Ne]),_:1}),y(f,{type:"primary",onClick:s[1]||(s[1]=E=>t("onSubmitCurrentStatus",1))},{default:l(()=>[Fe]),_:1})])])}}});var Oe=F(Ue,[["__scopeId","data-v-1ac7e729"]]);const je={class:"com-health-notice"},Xe=N({setup(a){const t=ie(),e=H(),b=fe.get("questionData"),{questionnaireType:s}=e.query,{orderNo:f="2022021815432987130620",productCode:E="CQ75CQ76",templateId:T=1,orderId:h=13005,tenantId:_=9991000007}=e.query,C={1:4,2:5,3:9},i=K({pageData:{},currentQuestionInfo:[]}),c=q(()=>s==="2"),n=q(()=>{var u;return s==="1"&&[1].includes((u=i.currentQuestionInfo[0])==null?void 0:u.textType)}),k=q(()=>{var u;return s==="1"&&[2].includes((u=i.currentQuestionInfo[0])==null?void 0:u.textType)}),w=q(()=>{var u;return s==="1"&&[3].includes((u=i.currentQuestionInfo[0])==null?void 0:u.textType)}),p=(u,I)=>{var B;const{id:P,objectType:S}=b;me({content:I||((B=i.currentQuestionInfo[0])==null?void 0:B.content),contentType:s,isDone:u,noticeType:C[S],objectId:P,objectType:S,orderId:h,orderNo:f,tenantId:9991000007}).then(({code:Q,data:r})=>{console.log(Q),Q==="10000"&&t.go(-1)})};return Y(()=>{const{insurerCode:u,id:I,objectType:P,productCategory:S}=b;_e({insurerCode:u,id:I,objectType:P,productCategory:S,orderNo:f,tenantId:_}).then(({code:B,data:Q})=>{B==="10000"&&(i.currentQuestionInfo=Q)})}),(u,I)=>{var P,S;return o(),$("div",je,[g(c)?(o(),m(Ce,{key:0,"current-page-info":g(i).currentQuestionInfo,onOnSubmitCurrentStatus:p},null,8,["current-page-info"])):A("",!0),g(k)?(o(),m(Ie,{key:1,"current-page-info":g(i).currentQuestionInfo,onOnSubmitCurrentStatus:p},null,8,["current-page-info"])):A("",!0),g(n)?(o(),m(Be,{key:2,url:(P=g(i).currentQuestionInfo[0])==null?void 0:P.content,onOnSubmitCurrentStatus:p},null,8,["url"])):A("",!0),g(w)?(o(),m(Oe,{key:3,url:(S=g(i).currentQuestionInfo[0])==null?void 0:S.content,onOnSubmitCurrentStatus:p},null,8,["url"])):A("",!0)])}}});export{Xe as default};

import{ax as e,aD as a,bW as i,aE as r,d as o,r as s,c2 as t,b_ as n,R as d,bA as l,a1 as c,c3 as f,bt as u,i as g,$ as h,bu as p,c4 as v,br as x,aM as b}from"./index-ac2dcdaf.js";const[m,T,k]=e("list");const B=b(o({name:m,props:{error:Boolean,offset:a(300),loading:Boolean,finished:Boolean,errorText:String,direction:i("down"),loadingText:String,finishedText:String,immediateCheck:r},emits:["load","update:error","update:loading"],setup(e,{emit:a,slots:i}){const r=s(e.loading),o=s(),b=s(),m=t(),B=n(o),C=()=>{h((()=>{if(r.value||e.finished||e.error||!1===(null==m?void 0:m.value))return;const{offset:i,direction:s}=e,t=p(B);if(!t.height||v(o))return;let n=!1;const d=p(b);n="up"===s?t.top-d.top<=i:d.bottom-t.bottom<=i,n&&(r.value=!0,a("update:loading",!0),a("load"))}))},S=()=>{if(e.finished){const a=i.finished?i.finished():e.finishedText;if(a)return g("div",{class:T("finished-text")},[a])}},w=()=>{a("update:error",!1),C()},j=()=>{if(e.error){const a=i.error?i.error():e.errorText;if(a)return g("div",{role:"button",class:T("error-text"),tabindex:0,onClick:w},[a])}},y=()=>{if(r.value&&!e.finished)return g("div",{class:T("loading")},[i.loading?i.loading():g(x,{class:T("loading-icon")},{default:()=>[e.loadingText||k("loading")]})])};return d((()=>[e.loading,e.finished,e.error]),C),m&&d(m,(e=>{e&&C()})),l((()=>{r.value=e.loading})),c((()=>{e.immediateCheck&&C()})),f({check:C}),u("scroll",C,{target:B,passive:!0}),()=>{var a;const s=null==(a=i.default)?void 0:a.call(i),t=g("div",{ref:b,class:T("placeholder")},null);return g("div",{ref:o,role:"feed",class:T(),"aria-busy":r.value},["down"===e.direction?s:t,y(),S(),j(),"up"===e.direction?s:t])}}}));export{B as L};

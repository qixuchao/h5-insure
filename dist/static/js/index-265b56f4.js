import{h as e,r as i,L as a,a9 as o,Z as l,k as t,l as n,y as r,Q as d,n as s,z as u,F as m,E as c,m as p,aa as f,I as v,A as y,C as k,a3 as g,a4 as V,P as I,a6 as b,x as L,d as h,s as D,R as C,o as O,D as R}from"./vendor-0381d15c.js";import{S as A,d as P,e as x,f as T,A as F,g as _,L as w,h as M}from"./trial-483f1ade.js";import{_ as U,L as q,T as N}from"./index-7fdce580.js";import{u as E}from"./useDicData-029c3016.js";const Y={class:"com-risk-list-wrapper"},$=(e=>(g("data-v-7d3c3028"),e=e(),V(),e))((()=>u("div",{class:"popup-title"},"选择附加险",-1))),S={class:"risk-list"},j={class:"cell-title"},B={class:"title"},G={class:"footer-button"},K=k("确认");var H=U(e({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:k}){const g=e,V=i([]),I=i([]),b=i([...g.disabled]),L=a({show:g.show,currentChecked:[...g.modelValue]}),h=e=>{var i,a,o;if(b.value.includes(e))return;((e,i)=>{if(!g.collocationList.length)return i?void(L.currentChecked=[]):void L.currentChecked.push(e);let a=L.currentChecked,o=b.value;i?(g.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?a=a.filter((a=>a!==i.collocationRiskId||a!==e)):3===i.collocationType?(a=a.filter((i=>i!==e)),o=o.filter((e=>e!==i.collocationRiskId))):a=a.filter((i=>i!==e)))})),L.currentChecked=a,b.value=o):(g.collocationList.forEach((l=>{e===l.riskId&&(i||(2===l.collocationType?a.push(l.collocationRiskId):3===l.collocationType&&o.push(l.collocationRiskId),a.push(e)))})),L.currentChecked.push(...a),b.value=o)})(e,L.currentChecked.includes(e)),null==(o=null==(a=null==(i=null==V?void 0:V.value)?void 0:i[e])?void 0:a.toggle)||o.call(a)},D=()=>{k("close")},C=()=>{const e=g.riskList.filter((e=>L.currentChecked.includes(e.id)));k("update:modelValue",[...new Set(I.value)]),k("finished",e,b.value),k("close")};return o((()=>{V.value=[]})),l((()=>L.currentChecked),(e=>{I.value=e}),{deep:!0,immediate:!0}),l((()=>g.modelValue),(e=>{I.value=e||[],b.value.push(...e||[])}),{deep:!0,immediate:!0}),(i,a)=>{const o=t("van-checkbox"),l=t("VanCell"),k=t("van-cell-group"),g=t("van-checkbox-group"),O=t("VanButton"),R=t("VanPopup");return n(),r("div",Y,[d(R,{show:y(L).show,"onUpdate:show":a[1]||(a[1]=e=>y(L).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:D},{default:s((()=>[$,u("div",S,[d(g,{modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e)},{default:s((()=>[d(k,{inset:""},{default:s((()=>[(n(!0),r(m,null,c(e.riskList,(e=>(n(),p(l,{key:e.id,title:e.riskName,disabled:b.value.includes(e.id),onClick:i=>h(e.id)},{"right-icon":s((()=>[d(o,{ref_for:!0,ref:i=>V.value[e.id]=i,shape:"square",disabled:b.value.includes(e.id),name:e.id,onClick:f((i=>h(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:s((()=>[u("div",j,[u("div",B,v(e.riskName),1)])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),u("div",G,[d(O,{type:"primary",disabled:!y(L).currentChecked.length,block:"",onClick:C},{default:s((()=>[K])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-7d3c3028"]]);const z={class:"com-personal-info-wrapper"},Q={class:"pro-radio-wrap"},Z={class:"pro-radio-wrap"};var J=U(e({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(e,{expose:o}){var l,m;const c=e,f=E(`${null==(m=null==(l=c.insuredCode)?void 0:l.toLocaleUpperCase)?void 0:m.call(l)}_OCCUPATION`),[v,k]=I(),g=i(),V=b("source")||{},O=a({formInfo:c.formInfo,occupationalText:"",occupationCodeList:[]}),R=L((()=>{const e=(e=>{const i=e||[];for(let a=0,o=i.length;a<o;a++)for(let e=a+1;e<o;e++){const o=i[a].split("_"),l=i[e].split("_"),t=i[a];o[0]===l[0]?o>l&&(i[a]=i[e],i[e]=t):"age"===o[0]&&(i[a]=i[e],i[e]=t)}return i})(null==c?void 0:c.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],a=i(e[0]),o=i(e[e.length-1]),l=h().subtract(a[0],"age"===a[1]?"year":"day").format("YYYY-MM-DD");let t=h().subtract(o[0],"age"===o[1]?"year":"day").format("YYYY-MM-DD");return h(t).subtract(1,"year").isBefore(l)&&(t=h(t).subtract(1,"year").add(1,"day").format("YYYY-MM-DD")),{minAge:new Date(t),maxAge:new Date(l)}}));return o({validateForm:()=>new Promise(((e,i)=>{var a;null==(a=g.value)||a.validate().then((()=>{e("")}),(e=>{var a;null==(a=g.value)||a.scrollToField(null==e?void 0:e[0].name),i()}))})),ageRangeObj:R.value}),(i,a)=>{const o=t("VanField"),l=t("ProRadioButton"),m=t("VanForm"),c=t("van-datetime-picker"),I=t("van-popup");return n(),r("div",z,[d(m,{ref_key:"formRef",ref:g,"input-align":"right","error-message-align":"right"},{default:s((()=>["proposal"===y(V).type&&("add"===y(V).type||"repeatAdd"===y(V).type)||"proposal"!==y(V).type&&(e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY"))?(n(),p(o,{key:0,modelValue:y(O).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>y(O).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink",readonly:"","is-link":"",formatter:e=>e?y(h)(e).format("YYYY-MM-DD"):e,placeholder:"请选择",onClick:a[1]||(a[1]=e=>y(k)(!0))},null,8,["modelValue","formatter"])):D("",!0),"proposal"===y(V).type&&("add"===y(V).type||"repeatAdd"===y(V).type)||"proposal"!==y(V).type&&(e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER"))?(n(),p(o,{key:1,modelValue:y(O).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>y(O).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:s((()=>[u("div",Q,[d(l,{modelValue:y(O).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>y(O).formInfo.gender=e),options:y(q)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):D("",!0),e.factorList.includes("SOCIAL_INS")||e.factorList.includes("APPLICANT.SOCIAL_INS")?(n(),p(o,{key:2,modelValue:y(O).formInfo.socialFlag,"onUpdate:modelValue":a[5]||(a[5]=e=>y(O).formInfo.socialFlag=e),name:"socialFlag",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:s((()=>[u("div",Z,[d(l,{modelValue:y(O).formInfo.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=e=>y(O).formInfo.socialFlag=e),options:y(A)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):D("",!0),e.factorList.includes("OCCUPATION_CATEGORY")||e.factorList.includes("APPLICANT.OCCUPATION_CATEGORY")?(n(),p(N,{key:3,modelValue:y(O).formInfo.occupationCodeList[0],"onUpdate:modelValue":a[6]||(a[6]=e=>y(O).formInfo.occupationCodeList[0]=e),field0:y(O).formInfo.occupationCodeList[0],"onUpdate:field0":a[7]||(a[7]=e=>y(O).formInfo.occupationCodeList[0]=e),field1:y(O).formInfo.occupationCodeList[1],"onUpdate:field1":a[8]||(a[8]=e=>y(O).formInfo.occupationCodeList[1]=e),field2:y(O).formInfo.occupationCodeList[2],"onUpdate:field2":a[9]||(a[9]=e=>y(O).formInfo.occupationCodeList[2]=e),required:"",name:"occupationCodeList",label:"职业类型","data-source":y(f),mapping:{label:"value",value:"code",children:"children"},"show-full-value":"","need-key":"name"},null,8,["modelValue","field0","field1","field2","data-source"])):D("",!0)])),_:1},512),d(I,{show:y(v),"onUpdate:show":a[12]||(a[12]=e=>C(v)?v.value=e:null),position:"bottom"},{default:s((()=>[d(c,{type:"date","min-date":y(R).minAge,"max-date":y(R).maxAge,onConfirm:a[10]||(a[10]=e=>{y(O).formInfo.birthday=y(h)(e).format("YYYY-MM-DD"),y(k)(!1)}),onCancel:a[11]||(a[11]=e=>y(k)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-b6a7c104"]]);const W={class:"com-risk-card-wrapper part-card"},X={class:"custom-field"},ee={class:"field-tip"},ie={class:"custom-field"},ae={class:"field-tip"},oe={class:"custom-field"},le={class:"field-tip"},te={class:"pro-radio-wrap"},ne={class:"pro-radio-wrap"},re={class:"pro-radio-wrap"},de={class:"pro-radio-wrap"},se={class:"pro-radio-wrap"},ue={key:0},me={key:1,class:"pro-radio-wrap"},ce={key:9,class:"liab-desc"};var pe=U(e({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(e){const o=e,f=i({}),k=b("premium")||{};f.value=b("enumList")||{};const g=i({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),V=a({formInfo:o.formInfo}),I=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"[object Object]"==={}.toString.call(e)&&Object.keys(e).length),h=(e,i,a={})=>{let o=i;return Array.isArray(i)||(o=[`${o}`]),(e||[]).filter((e=>o.includes(`${e.value}`)||o.includes(e.value)))},C=L((()=>{var e,i,a,l,t,n,r,d;return 1===(null==(e=o.originData)?void 0:e.riskType)?h(o.enums.RISK_INSURANCE_PERIOD,(null==(i=o.originData.riskInsureLimitVO)?void 0:i.insurancePeriodValueList)||[]):2===(null==(a=o.originData)?void 0:a.periodType)?h([{value:"year_1",name:"1年"}],["year_1"]):1===(null==(l=o.originData)?void 0:l.exemptFlag)?h(P,[`${null==(n=null==(t=null==o?void 0:o.originData)?void 0:t.riskInsureLimitVO)?void 0:n.insurancePeriodRule}`]):h(null==(r=o.enums)?void 0:r.RISK_INSURANCE_PERIOD,(null==(d=o.mainRiskData.riskInsureLimitVO)?void 0:d.insurancePeriodValueList)||[])})),R=L((()=>{var e,i,a,l,t,n,r,d;return 1===(null==(e=o.originData)?void 0:e.riskType)?h(null==(i=null==o?void 0:o.enums)?void 0:i.RISK_PAYMENT_PERIOD,(null==(a=o.originData.riskInsureLimitVO)?void 0:a.paymentPeriodValueList)||[]):1===(null==(l=o.originData)?void 0:l.exemptFlag)?h(x,[`${null==(n=null==(t=null==o?void 0:o.originData)?void 0:t.riskInsureLimitVO)?void 0:n.paymentPeriodRule}`]):2===(null==(r=o.originData)?void 0:r.periodType)?h([{value:"year_1",name:"1年交"}],["year_1"]):h(o.enums.RISK_PAYMENT_PERIOD,(null==(d=o.mainRiskData.riskInsureLimitVO)?void 0:d.paymentPeriodValueList)||[])})),A=L((()=>{var e,i,a,l,t;return 1===(null==(e=o.originData)?void 0:e.riskType)?h(T,(null==(i=o.originData.riskInsureLimitVO)?void 0:i.paymentFrequencyList)||[]):1===(null==(a=o.originData.riskInsureLimitVO)?void 0:a.paymentTypeRule)?h(T,(null==(l=o.mainRiskData.riskInsureLimitVO)?void 0:l.paymentFrequencyList)||[]):h(T,(null==(t=o.mainRiskData.riskInsureLimitVO)?void 0:t.paymentFrequencyList)||[])})),U=L((()=>{var e,i;let a=0,l=0;return((null==(i=null==(e=o.originData)?void 0:e.riskCalcMethodInfoVO)?void 0:i.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(a=e.minAmount,l=e.maxAmount),a>e.minAmount&&(a=e.minAmount),l<e.maxAmount&&(l=e.maxAmount)})),V.formInfo.amount=V.formInfo.amount||a,{min:a,max:l||1/0}})),q=L((()=>{var e,i;let a=0,l=0;return((null==(i=null==(e=o.originData)?void 0:e.riskCalcMethodInfoVO)?void 0:i.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(a=e.minPremium,l=e.maxPremium),a>e.minPremium&&(a=e.minPremium),l<e.maxPremium&&(l=e.maxPremium)})),V.formInfo.premium=V.formInfo.premium||a,{min:a,max:l||1/0}})),N=L((()=>{var e,i,a,l;const t=(null==(i=null==(e=o.originData)?void 0:e.riskCalcMethodInfoVO)?void 0:i.minCopy)||1,n=null==(l=null==(a=o.originData)?void 0:a.riskCalcMethodInfoVO)?void 0:l.maxCopy;return V.formInfo.copy=`${V.formInfo.copy||t||1}`,{min:t,max:n}})),E=(e,i,a)=>{var l,t;const n=(null==(t=null==(l=o.originData)?void 0:l.riskCalcMethodInfoVO)?void 0:t.increaseDecreaseNum)||1;if("sumInsured"===a){if(U.value.max&&+e>U.value.max)return`金额最大${U.value.max}元`;if(+e<U.value.min)return`金额最小${U.value.min}元`}else{if(q.value.max&&+e>q.value.max)return`金额最大${q.value.max}元`;if(+e<q.value.min)return`金额最小${q.value.min}元`}return+e%n==0?"":`金额必须是${n}的倍数`},Y=e=>{var i;const a=((null==(i=V.formInfo)?void 0:i.liabilityVOList)||[]).find((i=>i.liabilityCode===e.liabilityCode));return a?a.liabilityAttributeValue?a.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return O((()=>{var e,i,a,l;const t={riskType:o.originData.riskType,riskId:o.originData.id,riskName:o.originData.riskName,riskCode:o.originData.riskCode,amount:V.formInfo.amount,mainRiskCode:1!==o.originData.riskType?null==(e=o.mainRiskData)?void 0:e.riskCode:void 0,mainRiskId:1!==o.originData.riskType?null==(i=o.mainRiskData)?void 0:i.id:void 0,exemptFlag:o.originData.exemptFlag,exemptType:o.originData.exemptType,riskCategory:o.originData.riskCategory,liabilityVOList:(o.originData.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType,liabilityAttributeValue:Y(e)})))};[1].includes((null==(a=o.originData.riskCalcMethodInfoVO)?void 0:a.saleMethod)||0)&&1!==(null==(l=o.originData)?void 0:l.exemptFlag)||!o.originData.riskCalcMethodInfoVO.fixedAmount||(t.amount=o.originData.riskCalcMethodInfoVO.fixedAmount),Object.assign(V.formInfo,t)})),l((()=>{var e;return null==(e=V.formInfo)?void 0:e.paymentFrequency}),((e=0)=>{var i,a,l;[3].includes((null==(i=o.originData.riskCalcMethodInfoVO)?void 0:i.saleMethod)||0)&&((null==(l=null==(a=o.originData)?void 0:a.riskCalcMethodInfoVO)?void 0:l.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(V.formInfo,{amount:i.perCopyAmount,premium:i.perCopyPremium})})),1==+e&&"single"!==V.formInfo.chargePeriod&&(V.formInfo.chargePeriod="single")})),l((()=>{var e;return null==(e=V.formInfo)?void 0:e.copy}),(e=>{var i,a;4===(null==(i=o.originData.riskCalcMethodInfoVO)?void 0:i.saleMethod)&&(V.formInfo.amount=null==(a=o.originData.riskCalcMethodInfoVO)?void 0:a.fixedAmount)})),l((()=>{var e;return null==(e=V.formInfo)?void 0:e.chargePeriod}),(e=>{"single"===e&&1!=+(V.formInfo.paymentFrequency||0)&&(V.formInfo.paymentFrequency=1)})),l((()=>null==o?void 0:o.mainRiskInfo),(e=>{var i,a,l,t,n,r;e&&2===o.originData.riskType&&(1===(null==(a=null==(i=o.originData)?void 0:i.riskInsureLimitVO)?void 0:a.insurancePeriodRule)&&(e.coveragePeriod?g.value.coveragePeriod.disabled=!0:g.value.coveragePeriod.prevent=!0,V.formInfo.coveragePeriod=e.coveragePeriod||""),1===(null==(t=null==(l=o.originData)?void 0:l.riskInsureLimitVO)?void 0:t.paymentPeriodRule)&&(e.chargePeriod?g.value.chargePeriod.disabled=!0:g.value.chargePeriod.prevent=!0,V.formInfo.chargePeriod=e.chargePeriod||""),1===(null==(r=null==(n=o.originData)?void 0:n.riskInsureLimitVO)?void 0:r.paymentTypeRule)&&(e.paymentFrequency?g.value.paymentFrequency.disabled=!0:g.value.paymentFrequency.prevent=!0,V.formInfo.paymentFrequency=e.paymentFrequency||0))}),{immediate:!0,deep:!0}),(i,a)=>{var o,l,f,b,L,O,P,x,T,Y,$,S,j,B,G,K,H,z,Q,Z,J,pe,fe,ve,ye,ke,ge,Ve,Ie,be;const Le=t("ProSvg"),he=t("ProTitle"),De=t("VanStepper"),Ce=t("VanField"),Oe=t("ProRadioButton"),Re=t("ProField"),Ae=t("ProExpand");return n(),r("div",W,[d(he,{"risk-type":e.originData.riskType,title:e.originData.riskName},{default:s((()=>[e.removeRiskList.includes(e.originData.id)?(n(),r("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=i=>e.removeRisk(e.originData.id))},[d(Le,{name:"img-lajitong",color:"#0d6efe"})])):D("",!0)])),_:1},8,["risk-type","title"]),1===(null==(o=e.originData.riskCalcMethodInfoVO)?void 0:o.saleMethod)&&2===e.originData.exemptFlag?(n(),p(Ce,{key:0,modelValue:y(V).formInfo.amount,"onUpdate:modelValue":a[2]||(a[2]=e=>y(V).formInfo.amount=e),label:"保额",name:"amount",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>E(...e,"sumInsured")}]},{input:s((()=>{var i,o;return[u("div",X,[d(De,{modelValue:y(V).formInfo.amount,"onUpdate:modelValue":a[1]||(a[1]=e=>y(V).formInfo.amount=e),"input-width":"64px",min:y(U).min,step:(null==(i=e.originData.riskCalcMethodInfoVO)?void 0:i.increaseDecreaseNum)||1,max:y(U).max},null,8,["modelValue","min","step","max"]),u("span",ee,v(`金额最低${y(U).min}元，为${(null==(o=e.originData.riskCalcMethodInfoVO)?void 0:o.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):D("",!0),2===(null==(f=null==(l=e.originData)?void 0:l.riskCalcMethodInfoVO)?void 0:f.saleMethod)?(n(),p(Ce,{key:1,modelValue:y(V).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>y(V).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>E(...e,"premium")}]},{input:s((()=>{var i,o,l,t;return[u("div",ie,[d(De,{modelValue:y(V).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>y(V).formInfo.premium=e),step:(null==(o=null==(i=e.originData)?void 0:i.riskCalcMethodInfoVO)?void 0:o.increaseDecreaseNum)||1,min:y(q).min,"input-width":"64px",max:y(q).max},null,8,["modelValue","step","min","max"]),u("span",ae,v(`金额最低${y(q).min}元，为${(null==(t=null==(l=e.originData)?void 0:l.riskCalcMethodInfoVO)?void 0:t.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):D("",!0),3===(null==(L=null==(b=e.originData)?void 0:b.riskCalcMethodInfoVO)?void 0:L.saleMethod)||4===(null==(P=null==(O=e.originData)?void 0:O.riskCalcMethodInfoVO)?void 0:P.saleMethod)&&((null==(T=null==(x=e.originData)?void 0:x.riskCalcMethodInfoVO)?void 0:T.minCopy)||(null==($=null==(Y=e.originData)?void 0:Y.riskCalcMethodInfoVO)?void 0:$.maxCopy))?(n(),p(Ce,{key:2,modelValue:y(V).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>y(V).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:s((()=>[u("div",oe,[d(De,{modelValue:y(V).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>y(V).formInfo.copy=e),step:1,min:y(N).min,max:y(N).max},null,8,["modelValue","min","max"]),u("span",le,v(`${y(N).min}份起购，最多购买${y(N).max}份`),1)])])),_:1},8,["modelValue"])):D("",!0),[1].includes((null==(S=e.originData.riskCalcMethodInfoVO)?void 0:S.saleMethod)||0)&&1!==(null==(j=e.originData)?void 0:j.exemptFlag)||!e.originData.riskCalcMethodInfoVO.fixedAmount&&!(null==(G=y(k))?void 0:G[null==(B=e.originData)?void 0:B.riskCode])?D("",!0):(n(),p(Ce,{key:3,label:"保额"},{input:s((()=>{var i,a,o,l;return[u("div",null,v((null==(i=e.originData.riskCalcMethodInfoVO)?void 0:i.fixedAmount)||(null==(l=null==(o=y(k))?void 0:o[null==(a=e.originData)?void 0:a.riskCode])?void 0:l.amount)),1)]})),_:1})),I(null==(H=null==(K=e.originData)?void 0:K.riskInsureLimitVO)?void 0:H.insurancePeriodValueList)&&I(null==(Q=null==(z=e.originData)?void 0:z.riskInsureLimitVO)?void 0:Q.insurancePeriodRule)?D("",!0):(n(),p(Re,{key:4,modelValue:y(V).formInfo.coveragePeriod,"onUpdate:modelValue":a[8]||(a[8]=e=>y(V).formInfo.coveragePeriod=e),label:"保障期间",name:"coveragePeriod",rules:[{required:!0,message:"请选择保障期间"}]},{input:s((()=>[u("div",te,[d(Oe,{modelValue:y(V).formInfo.coveragePeriod,"onUpdate:modelValue":a[7]||(a[7]=e=>y(V).formInfo.coveragePeriod=e),disabled:g.value.coveragePeriod.disabled,prevent:g.value.coveragePeriod.prevent?"请先选择主险保障期间":"",options:y(C),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),I(null==(J=null==(Z=e.originData)?void 0:Z.riskInsureLimitVO)?void 0:J.paymentPeriodValueList)&&I(null==(fe=null==(pe=e.originData)?void 0:pe.riskInsureLimitVO)?void 0:fe.paymentPeriodRule)?D("",!0):(n(),p(Re,{key:5,modelValue:y(V).formInfo.chargePeriod,"onUpdate:modelValue":a[10]||(a[10]=e=>y(V).formInfo.chargePeriod=e),label:"交费期间",name:"chargePeriod",rules:[{required:!0,message:"请选择交费期间"}]},{input:s((()=>[u("div",ne,[d(Oe,{modelValue:y(V).formInfo.chargePeriod,"onUpdate:modelValue":a[9]||(a[9]=e=>y(V).formInfo.chargePeriod=e),disabled:g.value.chargePeriod.disabled,prevent:g.value.chargePeriod.prevent?"请先选择主险交费期间":"",options:y(R),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),I(null==(ve=e.originData.riskInsureLimitVO)?void 0:ve.paymentFrequencyList)&&I(null==(ye=e.originData.riskInsureLimitVO)?void 0:ye.paymentPeriodRule)?D("",!0):(n(),p(Re,{key:6,modelValue:y(V).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>y(V).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:s((()=>[u("div",re,[d(Oe,{modelValue:y(V).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>y(V).formInfo.paymentFrequency=e),disabled:g.value.paymentFrequency.disabled,prevent:g.value.paymentFrequency.prevent?"请先选择主险交费方式":"",options:y(A)},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),I(null==(ge=null==(ke=e.originData)?void 0:ke.riskInsureLimitVO)?void 0:ge.annuityDrawValueList)?D("",!0):(n(),p(Re,{key:7,modelValue:y(V).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>y(V).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate"},{input:s((()=>{var i;return[u("div",de,[d(Oe,{modelValue:y(V).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>y(V).formInfo.annuityDrawDate=e),options:h(y(F),(null==(i=e.originData.riskInsureLimitVO)?void 0:i.annuityDrawValueList)||[])},null,8,["modelValue","options"])])]})),_:1},8,["modelValue"])),I(null==(Ie=null==(Ve=e.originData)?void 0:Ve.riskInsureLimitVO)?void 0:Ie.annuityDrawFrequencyList)?D("",!0):(n(),p(Re,{key:8,modelValue:y(V).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>y(V).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType"},{input:s((()=>{var i;return[u("div",se,[d(Oe,{modelValue:y(V).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>y(V).formInfo.annuityDrawType=e),options:h(y(_),(null==(i=e.originData.riskInsureLimitVO)?void 0:i.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])])]})),_:1},8,["modelValue"])),(n(!0),r(m,null,c(e.originData.riskLiabilityInfoVOList||[],((i,a)=>(n(),r(m,{key:a},[1!==i.optionalFlag||I(i.liabilityAttributeValueList)?D("",!0):(n(),p(Ce,{key:0,modelValue:y(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>y(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:s((()=>{var o,l;return[u("div",null,[I(i.liabilityAttributeValueList)?(n(),r("span",ue,"50万")):(n(),r("div",me,[d(Oe,{modelValue:y(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>y(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:h(y(w),null==(l=null==(o=e.originData.riskLiabilityInfoVOList)?void 0:o[a])?void 0:l.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"])]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])),1!==i.optionalFlag?(n(),p(Ce,{key:1,modelValue:y(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>y(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:s((()=>{var o,l;return[u("div",null,[I(i.liabilityAttributeValueList)?(n(),p(Oe,{key:0,modelValue:y(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>y(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:y(M)},null,8,["modelValue","onUpdate:modelValue","options"])):(n(),p(Oe,{key:1,modelValue:y(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>y(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:h(y(w),null==(l=null==(o=e.originData.riskLiabilityInfoVOList)?void 0:o[a])?void 0:l.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"])):D("",!0)],64)))),128)),(null==(be=e.originData)?void 0:be.relationDesc)?(n(),r("div",ce,[d(Ae,{title:"责任投保说明"},{default:s((()=>[u("div",null,v(e.originData.relationDesc),1)])),_:1})])):D("",!0)])}}}),[["__scopeId","data-v-6d150150"]]);const fe={class:"risk-list-wrapper"},ve={key:0,class:"add-rider-risk"},ye={class:"left-part"},ke=(e=>(g("data-v-4b309d85"),e=e(),V(),e))((()=>u("span",{class:"btn-plus"},"+",-1))),ge=k(" 附加险");var Ve=U(e({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(e){const o=e,f=b("source")||{},[k,g]=I(!1);i(null),i(null);const V=a({mainRiskInfo:o.riskInfo,riskInfo:o.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),L=(e,i)=>{V.currentRiskList=V.currentRiskList.concat(e),V.disabledList=i},h=e=>{R.confirm({message:"确定要删除附加险么？",confirmButtonText:"删除"}).then((()=>{var i;const a=[e];((null==(i=V.mainRiskData)?void 0:i.collocationVOList)||[]).forEach((i=>{e!==i.riskId||2!==i.collocationType&&3!==i.collocationType||a.push(i.collocationRiskId)})),V.checkedList=V.checkedList.filter((e=>!a.includes(e))),V.currentRiskList=V.currentRiskList.filter((e=>!a.includes(e.id)||(Object.assign(V.riskInfo,{[e.id]:void 0}),!1))),V.disabledList=V.disabledList.filter((e=>!a.includes(e)))})).catch((()=>{}))},C=(e,i)=>{var a,o;const l=((null==(o=null==(a=V.riskInfo)?void 0:a[i])?void 0:o.liabilityVOList)||[]).find((i=>i.liabilityCode===e.liabilityCode));return l?l.liabilityAttributeValue?l.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return l((()=>V.currentRiskList),(e=>{const i=[V.mainRiskData,...e];let a=[],l=[];const t=[];i.forEach(((e,i)=>{var o,n,r;const d=(null==(o=null==e?void 0:e.riskCalcMethodInfoVO)?void 0:o.riskFactorRelationList)||[];a=a.concat(d.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),l=l.concat(d.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),t.push(null==(n=null==e?void 0:e.riskInsureLimitVO)?void 0:n.minHolderAge,null==(r=null==e?void 0:e.riskInsureLimitVO)?void 0:r.maxHolderAge)})),(e||[]).forEach((e=>{var i,a;const l={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,riskName:e.riskName,mainRiskCode:1!==e.riskType?null==(i=V.mainRiskData)?void 0:i.riskCode:void 0,mainRiskId:1!==e.riskType?null==(a=V.mainRiskData)?void 0:a.id:void 0,riskCategory:e.riskCategory,exemptFlag:o.originData.exemptFlag,exemptType:o.originData.exemptType,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((i=>({...i,liabilityAttributeCode:i.liabilityAttributeType,liabilityCode:i.liabilityCode,liabilityRateType:i.liabilityRateType,liabilityAttributeValue:C(i,e.id)})))};V.riskInfo[e.id]||Object.assign(V.riskInfo,{[e.id]:l})})),o.pickFactor({insuredFactorList:[...new Set(a)],holderFactorList:[...new Set(l)],ageRange:t})}),{deep:!0,immediate:!0}),l((()=>o.riskInfo),(e=>{V.mainRiskInfo=Object.values(e||{}).find((e=>1===(null==e?void 0:e.riskType)))||{}}),{deep:!0,immediate:!0}),l((()=>o.originData),(e=>{let i=[];const a=[];"proposal"===f.origin&&"add"!==f.type&&"repeatAdd"!==f.type?((e||[]).forEach((e=>{1===e.riskType&&(V.mainRiskData=e),i.push(e)})),i=i.filter((e=>f.showRiskList.includes(e.id)))):(e||[]).forEach((e=>{1===e.riskType?(V.mainRiskData=e,i.push(e)):2===e.collocationType?i.push(e):a.push(e)})),V.riderRiskList=a,V.currentRiskList=i}),{deep:!0,immediate:!0}),(i,a)=>{var o,l,I;const b=t("ProCheckButton");return n(),r("div",fe,[(n(!0),r(m,null,c(y(V).currentRiskList,((i,a)=>(n(),p(pe,{key:i.id,"form-info":y(V).riskInfo[i.id],index:a,enums:e.enums,"main-risk-data":y(V).mainRiskData,"main-risk-info":y(V).mainRiskInfo,"origin-data":i,"remove-risk":h,"remove-risk-list":y(V).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),(null==(o=y(V).riderRiskList)?void 0:o.length)-(null==(l=y(V).checkedList)?void 0:l.length)&&"proposal"!==y(f).origin?(n(),r("div",ve,[u("span",ye,v(`共有${y(V).riderRiskList.length-y(V).checkedList.length}款附加险可以添加`),1),d(b,{activated:"",class:"btn-rider-risk",onClick:a[0]||(a[0]=e=>y(g)(!0))},{default:s((()=>[ke,ge])),_:1})])):D("",!0),y(k)?(n(),p(H,{key:1,modelValue:y(V).checkedList,"onUpdate:modelValue":a[1]||(a[1]=e=>y(V).checkedList=e),show:y(k),disabled:y(V).disabledList,"risk-list":y(V).riderRiskList,"collocation-list":(null==(I=y(V).mainRiskData)?void 0:I.collocationVOList)||[],onFinished:L,onClose:a[2]||(a[2]=e=>y(g)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):D("",!0)])}}}),[["__scopeId","data-v-4b309d85"]]);export{J as P,H as R,Ve as a};

import{d as e,h as r,i as a,k as o,bR as t,o as d,c as s,u as n,F as i,p as l,w as c,v as p,d4 as u,f as m,_ as y,y as h,az as f,aH as N,aW as C,cD as I,cE as g,cF as k,dF as z}from"./index-ecfbfc6d.js";import{c as $}from"./order-e83b594a.js";const F={class:"operate-wrap"},B=e({name:"operateBtn"});var S=y(e({...B,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:y}){const B=r(),S=a(),{tenantId:b,nextPageCode:q,isShare:_}=S.query,v=e,w=y,x=o((()=>"/orderRecordList"===S.path)),P=o((()=>{const{orderTopStatus:e,productClassFlag:r,orderStatus:a}=v.detail;return!("-1"!==e||h.orderList!==S.path||"underWritingFailed"===a&&r===f.YES||["manualUnderWriting","offlinePayment","paymentFailed"].includes(a))})),W=o((()=>{const{policyNo:e,applicationNo:r,orderStatus:a}=v.detail;return!e&&r&&"cancel"!==a})),j=o((()=>{const{orderStatus:e}=v.detail;return["offlinePayment","manualUnderWriting","paymentFailed"].includes(e)})),D=()=>{const{orderStatus:e,orderNo:r,insurerCode:a,underwriteFlag:o,templateId:t,iseeBizNo:d}=v.detail;let s=h.sign;("collectInfo"===e||"underWritingFailed"===e&&o===f.NO)&&(s=h.infoCollection),B.push({path:s,query:{...S.query,tenantId:b,orderNo:r,insurerCode:a,templateId:t,iseeBizNo:d}})},T=()=>{const{orderId:e,orderNo:r}=v.detail||{};B.push({path:"orderTrajectory",query:{...S.query,orderId:e,orderNo:r}})},U=()=>{const{orderNo:e,orderId:r}=v.detail;_?C.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{w("handleCancel")})):$({tenantId:b,orderNo:e,type:1}).then((({code:e,data:r})=>{"10000"===e&&C.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:r,holderGender:a,orderId:o,orderNo:t,insurerCode:d,iseeBizNo:s}=v.detail||{},n=r,i=`${I[a]}士`;g({shareType:0,title:`${k.cancel.title}`,desc:k.cancel.desc.replace("{name}",`${n}${i},`),url:`${window.location.href}&objectType=${e}&insurerCode=${d}&isShare=1&orderNo=${t}&iseeBizNo=${s}&orderId=${o}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:z})})("holder")}))}))},E=()=>{const{orderNo:e,orderId:r,insurerCode:a,iseeBizNo:o}=v.detail;B.push({path:h.updateBankInfo,query:{tenantId:b,orderNo:e,orderId:r,insurerCode:a,nextPageCode:"orderDetail",iseeBizNo:o}})};return(e,r)=>{const a=N,o=t;return d(),s("div",F,[n(x)?(d(),l(o,{key:1,label:"",value:"查看订单状态","is-link":"",onClick:u(T,["stop"])})):(d(),s(i,{key:0},[n(P)?(d(),l(a,{key:0,type:"primary",size:"small",onClick:u(D,["stop"])},{default:c((()=>[p("去处理")])),_:1})):m("",!0),n(W)?(d(),l(a,{key:1,type:"primary",plain:"",size:"small",onClick:u(U,["stop"])},{default:c((()=>[p("撤单")])),_:1})):m("",!0),n(j)?(d(),l(a,{key:2,plain:"",size:"small",onClick:u(E,["stop"])},{default:c((()=>[p("银行卡修改")])),_:1})):m("",!0)],64))])}}}),[["__scopeId","data-v-64c02a7e"]]);export{S as O};

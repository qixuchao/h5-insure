import{d as t,i as e,r as a,o,c as n,a as i,e as l,b as d,w as s,F as r,n as c,u,m,_ as p,l as v,b_ as f,h as I,g as h,O as y,cZ as b,am as g,aJ as C,cp as N,a8 as _,al as k,q as j,V as x,cW as L,aw as w,bM as A,a9 as O,c_ as D,ae as T,at as V,au as P,az as Y,T as M,bx as S,c$ as U}from"./index-e18db70e.js";import{C as G}from"./index-ae07d4d2.js";import{_ as E}from"./index-9d5d4b34.js";import{_ as H}from"./box-title-70dc1627.js";import{d as q}from"./order-c799ec64.js";import{i as F,o as J}from"./trial-d080f2d6.js";import{f as $,g as Q}from"./infoCollection-5ec4d8c9.js";import{g as R,s as W}from"./core-4108f5fa.js";import{I as z}from"./infoItem-469c61f8.js";import{C as Z}from"./index-5ab09b69.js";import{t as B}from"./index-e15b0217.js";import"./PayInfo-d9c5f190.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";import"./_getTag-0507d0b1.js";import"./debounce-6981b306.js";import"./phoneVerify-5635bdd8.js";import"./merge-e7788e50.js";import"./index-8290e5bc.js";import"./useDicData-34e49d0a.js";import"./bankCard-04c7ba29.js";const K={class:"insurance-notification-information"},X={class:"insurance-notification-information-title"},tt={class:"insurance-notification-information-collapse"},et={class:"insurance-notification-information-content"};var at=p(t({__name:"insuranceNotificationInformation",props:{title:{default:""},data:{default:()=>[]}},setup(t){const p=e([]);return a({text:"",occupationClass:""}),(t,e)=>{const a=G,f=Z;return o(),n("div",K,[i("div",X,l(t.title),1),i("div",tt,[d(f,{modelValue:u(p),"onUpdate:modelValue":e[0]||(e[0]=t=>m(p)?p.value=t:null)},{default:s((()=>[(o(!0),n(r,null,c(t.data,((t,e)=>(o(),v(a,{key:e,title:t.title,name:e},{default:s((()=>[i("div",et,l(t.content),1)])),_:2},1032,["title","name"])))),128))])),_:1},8,["modelValue"])])])}}}),[["__scopeId","data-v-84b9fd0c"]]);const ot=t=>(V("data-v-243ea8a6"),t=t(),P(),t),nt={class:"page-order-detail"},it=ot((()=>i("div",{class:"card-item-name"},"订单进度",-1))),lt={class:"card-item-icon"},dt={class:"card card-list"},st=ot((()=>i("p",{class:"card-list-title"},"健利保倍享版",-1))),rt={class:"card card-list"},ct={class:"card-list-head"},ut=ot((()=>i("div",{class:"card-list-title"},"险种信息",-1))),mt={class:"card-list-premium"},pt={class:"card"},vt=ot((()=>i("div",{class:"policy-options"},[_("保单选项 "),i("span",{class:"policy-options-content"},"纸质保单和电子保单")],-1))),ft={class:"card"},It=ot((()=>i("div",{class:"tenantOrderAttachmentList-title"},"投保人资料",-1))),ht={class:"tenantOrderAttachmentList-img"},yt=["src"],bt=ot((()=>i("div",{class:"tenantOrderAttachmentList-title"},"银行卡信息",-1))),gt={class:"tenantOrderAttachmentList-img"},Ct=[ot((()=>i("img",{src:H,alt:""},null,-1)))],Nt=ot((()=>i("div",{class:"tenantOrderAttachmentList-title"},"被保人资料",-1))),_t={class:"tenantOrderAttachmentList-img"},kt=["src"],jt={class:"insurance-notification-information card"},xt={key:0,class:"footer-button"},Lt={key:1,class:"footer-button"},wt={key:2,class:"footer-button"};var At=p(t({__name:"index",setup(t){const p=f(),V=I(),P=h(),H=e(),K=e([]),X=e([]),tt=e({}),et=[{title:"险种名称",dataIndex:"riskName",width:200},{title:"保险金额/份数",dataIndex:"regularPremium",width:180,render:(t,e)=>t.regularPremium/t.copy},{title:"保障期间",dataIndex:"coveragePeriodDesc",width:180},{title:"交费期间",dataIndex:"chargePeriodDesc",width:180},{title:"首期保费",dataIndex:"initialPremium",width:180,render:(t,e)=>t.initialPremium}],ot=a({customerQuestions:[],payInfo:{schema:[],config:[],formData:[]}}),{query:{orderNo:At,agentCode:Ot,tenantId:Dt,abbreviation:Tt,productCategory:Vt,applicationNo:Pt,orderId:Yt}}=V,Mt=()=>{O("orderTrajectory",{orderNo:At,agentCode:Ot,tenantId:Dt,abbreviation:Tt,productCategory:Vt,applicationNo:Pt})},St=()=>{Y.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{H.value&&q(H.value.id,H.value.orderStatus).then((t=>{const{code:e,data:a}=t;"10000"===e&&M.success("删除成功")}))}))},Ut=e(!1),Gt=()=>{var t,e,a,o,n;if(H.value){const{id:i,extInfo:{templateId:l,pageCode:d,extraInfo:s},agencyId:r,insurerCode:c,orderStatus:u}=H.value,m={insurerCode:c,productCode:null==(a=null==(e=null==(t=H.value.insuredList)?void 0:t[0])?void 0:e.productList[0])?void 0:a.productCode,tenantId:H.value.tenantId,agencyCode:H.value.agencyId,agentCode:H.value.saleUserId,saleChannelId:null==s?void 0:s.saleChannelId,extraMap:{...null==(n=null==(o=H.value)?void 0:o.extInfo)?void 0:n.extraInfo,orderNo:H.value.orderNo}};Ut.value=!0,J(m).then((t=>{if(console.log("投保链接==",t.data),"10000"===t.code)if([$.LONG,$.NIANJIN].includes(Q(`${l}`))){const e=t.data.split("?")[1],a=S.parse(e);P.push({path:U[u],query:{...a,extraInfo:a.extraInfo,orderNo:At,templateId:l}})}else window.location.href=t.data}))}},Et=()=>{if(H.value){const{extInfo:{templateId:t}}=H.value;[$.LONG,$.NIANJIN].includes(Q(`${t}`))?Gt():R(H.value).then((({code:t,data:e})=>{"10000"===t&&W(e)}))}};return y((()=>{F({productCode:"111",isTenant:!1}).then((({data:t,code:e})=>{var a,o;if("10000"===e){tt.value=(null==(a=t.productPlanInsureVOList)?void 0:a[0])||{};const{payInfo:e}=B(null==(o=tt.value)?void 0:o.productFactor);ot.payInfo={...ot.payInfo,...e}}})),console.log(At,"orderNo================"),D({orderNo:At,orderId:Yt,tenantId:Dt}).then((t=>{const{code:e,data:a}=t;"10000"===e&&(ot.customerQuestions=a)})),b({orderNo:At,orderId:Yt,applicationNo:Pt,agentCode:Ot,tenantId:Dt}).then((t=>{const{code:e,data:a}=t;"10000"===e&&(H.value=a)}))})),(t,e)=>{const a=T,f=E,I=G,h=Z,y=g,b=C,O=N("loading");return o(),v(b,{"theme-vars":u(p)},{default:s((()=>{var t,p,b,g,C,N,D,T,V,P,Y,M,S;return[i("div",nt,[i("div",{class:"card card-head",onClick:Mt},[it,i("div",lt,[_(l(null==(t=u(H))?void 0:t.orderStepDesc)+" ",1),d(a,{name:"arrow-right"})])]),i("div",dt,[st,d(z,{label:"订单号",content:null==(p=u(H))?void 0:p.orderNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),d(z,{label:"投保单号",content:null==(b=u(H))?void 0:b.applicationNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),d(z,{label:"创建时间",content:u(k)(null==(g=u(H))?void 0:g.gmtCreated).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),d(z,{label:"投保时间",content:u(k)(null==(C=u(H))?void 0:C.orderDate).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),d(z,{label:"投保保费",content:null==(N=u(H))?void 0:N.orderAmount,line:"","min-width":"other"},null,8,["content"]),d(z,{label:"承保保费",content:null==(D=u(H))?void 0:D.realAmount,line:"","min-width":"other"},null,8,["content"])]),i("div",rt,[i("div",ct,[ut,i("div",mt,[_(" 首年保费："),i("span",null,l(null==(T=u(H))?void 0:T.orderAmount),1)])]),(null==(V=u(H))?void 0:V.riskList.length)>0?(o(),v(f,{key:0,columns:et,class:"table","data-source":null==(P=u(H))?void 0:P.riskList},null,8,["data-source"])):j("",!0)]),i("div",pt,[d(h,{modelValue:u(K),"onUpdate:modelValue":e[0]||(e[0]=t=>m(K)?K.value=t:null)},{default:s((()=>[d(I,{title:"投保告知信息",name:"1"},{default:s((()=>[vt])),_:1})])),_:1},8,["modelValue"])]),i("div",ft,[d(h,{modelValue:u(X),"onUpdate:modelValue":e[1]||(e[1]=t=>m(X)?X.value=t:null)},{default:s((()=>[d(I,{title:"影像信息",name:"1"},{default:s((()=>{var t,e,a,l;return[It,i("div",ht,[(o(!0),n(r,null,c(null==(e=null==(t=u(H))?void 0:t.tenantOrderAttachmentList)?void 0:e.filter((t=>"2"==t.objectType)),((t,e)=>(o(),n("div",{key:e},[i("img",{src:t.uri,alt:""},null,8,yt)])))),128))]),bt,i("div",gt,[(o(),n(r,null,c(10,((t,e)=>i("div",{key:e,class:"tenantOrderAttachmentList-img-content"},Ct))),64))]),Nt,i("div",_t,[(o(!0),n(r,null,c(null==(l=null==(a=u(H))?void 0:a.tenantOrderAttachmentList)?void 0:l.filter((t=>"3"==t.objectType)),((t,e)=>(o(),n("div",{key:e},[i("img",{src:t.uri,alt:""},null,8,kt)])))),128))])]})),_:1})])),_:1},8,["modelValue"])]),i("div",jt,[d(at,{title:"投保告知信息",data:[{title:"《万能风险告知问卷》",content:"12345556789"},{title:"《被保人健康告知》",content:"12345556789"}]},null,8,["data"])]),x((o(),n("div",null,[(null==(Y=u(H))?void 0:Y.orderTopStatus)===u(L).PENDING?(o(),n("div",xt,[d(y,{type:"primary",onClick:w(St,["stop"])},{default:s((()=>[_("删除")])),_:1},8,["onClick"]),u(A).UNDERWRITING_FAILED!==u(H).orderStatus?(o(),v(y,{key:0,type:"primary",onClick:w(Gt,["stop"])},{default:s((()=>[_("去处理")])),_:1},8,["onClick"])):j("",!0)])):j("",!0),(null==(M=u(H))?void 0:M.orderTopStatus)===u(L).PAYING?(o(),n("div",Lt,[d(y,{type:"primary",onClick:w(St,["stop"])},{default:s((()=>[_("删除")])),_:1},8,["onClick"]),d(y,{type:"primary",onClick:w(Et,["stop"])},{default:s((()=>[_("去支付")])),_:1},8,["onClick"])])):j("",!0),(null==(S=u(H))?void 0:S.orderTopStatus)===u(L).TIMEOUT?(o(),n("div",wt,[d(y,{type:"primary",onClick:w(St,["stop"])},{default:s((()=>[_("删除")])),_:1},8,["onClick"])])):j("",!0)])),[[O,u(Ut)]])])]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-243ea8a6"]]);export{At as default};

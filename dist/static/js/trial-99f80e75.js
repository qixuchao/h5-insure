var qe=Object.defineProperty,Me=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var Oe=(a,n,k)=>n in a?qe(a,n,{enumerable:!0,configurable:!0,writable:!0,value:k}):a[n]=k,K=(a,n)=>{for(var k in n||(n={}))Se.call(n,k)&&Oe(a,k,n[k]);if(Ee)for(var k of Ee(n))Ye.call(n,k)&&Oe(a,k,n[k]);return a},H=(a,n)=>Me(a,Ne(n));import{g as N,L as S,X as w,r as O,h as g,m as T,n as C,k as h,y as x,z as t,a1 as Te,a2 as Be,a5 as z,C as $,a4 as G,x as M,d as W,j as A,s as P,I as U,a6 as je,o as we,F as Q,E as J,ag as Ge,ah as Ke,B as Ue,D as He}from"./vendor-50171071.js";import{S as We,a as Xe,R as ze,b as X,A as Qe,c as Je,L as Pe,d as Ze}from"./trial-c1eb1f0a.js";import{g as et}from"./index-31d33b8d.js";import{l as xe}from"./useStorage-9a57eaef.js";import{_ as Y,b as $e}from"./index-bd5189a2.js";const tt=a=>(Te("data-v-4b261f8d"),a=a(),Be(),a),it={class:"com-occupational-wrapper"},ot=tt(()=>x("div",{class:"popup-title"},"\u9009\u62E9\u804C\u4E1A",-1)),at={class:"popup-content"},nt=N({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(a,{emit:n}){const k=a,R=S({show:k.show,options:[],currentValue:""}),I=()=>{n("close")},i=({value:v,selectedOptions:s})=>{const y=(s||[]).map(d=>d.value).join("/"),c=+s[s.length-1].name;n("update:modelValue",c),n("finish",y),I()},D=v=>{const s=v,y=c=>{c.forEach(d=>{const V=d;V.children.length?y(V.children):V.children=null})};return y(s),s},F=(v="")=>{var c;const s=`${(c=v==null?void 0:v.toLocaleUpperCase)==null?void 0:c.call(v)}_OCCUPATION`,y=xe.get("occupational")||{};if(y[s]){R.options=y[s];return}et({dictCodeList:[s]}).then(({code:d,data:V})=>{var p;if(d==="10000"){const o=D(((p=V==null?void 0:V[0])==null?void 0:p.dictItemList)||[]);R.options=o,y[s]=o,xe.set("occupational",y)}})};return w(()=>k,()=>{F(k.insuredCode)},{deep:!0,immediate:!0}),w(()=>k.modelValue,v=>{},{deep:!0,immediate:!0}),(v,s)=>{const y=O("van-cascader"),c=O("VanPopup");return g(),T("div",it,[C(c,{show:t(R).show,"onUpdate:show":s[1]||(s[1]=d=>t(R).show=d),"show-footer":"",position:"bottom",closeable:"",onClose:I},{default:h(()=>[ot,x("div",at,[C(y,{modelValue:t(R).currentValue,"onUpdate:modelValue":s[0]||(s[0]=d=>t(R).currentValue=d),title:"\u8BF7\u9009\u62E9\u804C\u4E1A","show-header":!1,placeholder:"\u8BF7\u9009\u62E9",options:t(R).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:i},null,8,["modelValue","options"])])]),_:1},8,["show"])])}}});var ut=Y(nt,[["__scopeId","data-v-4b261f8d"]]);const lt={class:"com-personal-info-wrapper"},rt={key:0,class:"placeholder"},st={key:1},dt=N({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(a,{expose:n}){const k=a,[R,I]=z(),[i,D]=z(),F=$(),v=G("source")||{},s=S({formInfo:k.formInfo,occupationalText:""}),y=o=>{s.occupationalText=o},c=()=>{D(!1)},d=()=>new Promise((o,e)=>{F==null||F.value.validate().then(()=>{o("")},()=>{e()})}),V=o=>{const e=o||[];for(let l=0;l<e.length;l++)for(let r=l+1;r<e.length;r++){const u=e[l].split("_"),f=e[r].split("_"),E=e[l];u[0]===f[0]?u>f&&(e[l]=e[r],e[r]=E):u[0]==="age"&&(e[l]=e[r],e[r]=E)}return e},p=M(()=>{const o=V(k==null?void 0:k.ageRange),e=(E="")=>{const b=+E.split("_")[1],j=E.split("_")[0];return[b,j]},l=e(o[0]),r=e(o[o.length-1]),u=W().subtract(l[0],l[1]==="age"?"year":"day").format("YYYY-MM-DD"),f=W().subtract(r[0],r[1]==="age"?"year":"day").format("YYYY-MM-DD");return console.log("ageRangeObj",new Date(f),new Date(u)),{minAge:new Date(f),maxAge:new Date(u)}});return n({validateForm:d,ageRangeObj:p.value}),(o,e)=>{const l=O("VanField"),r=O("ProRadioButton"),u=O("VanForm"),f=O("van-datetime-picker"),E=O("van-popup");return g(),T("div",lt,[C(u,{ref_key:"formRef",ref:F,"input-align":"right","error-message-align":"right"},{default:h(()=>[t(v).type==="proposal"&&(t(v).type==="add"||t(v).type==="repeatAdd")||t(v).type!=="proposal"&&(a.factorList.includes("APPLICANT.AGE")||a.factorList.includes("AGE")||a.factorList.includes("DAY")||a.factorList.includes("APPLICANT.DAY"))?(g(),A(l,{key:0,modelValue:t(s).formInfo.birthday,"onUpdate:modelValue":e[0]||(e[0]=b=>t(s).formInfo.birthday=b),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F",class:"isLink",readonly:"","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[1]||(e[1]=b=>t(I)(!0))},null,8,["modelValue"])):P("",!0),t(v).type==="proposal"&&(t(v).type==="add"||t(v).type==="repeatAdd")||t(v).type!=="proposal"&&(a.factorList.includes("APPLICANT.GENDER")||a.factorList.includes("GENDER"))?(g(),A(l,{key:1,modelValue:t(s).formInfo.gender,"onUpdate:modelValue":e[3]||(e[3]=b=>t(s).formInfo.gender=b),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},{input:h(()=>[C(r,{modelValue:t(s).formInfo.gender,"onUpdate:modelValue":e[2]||(e[2]=b=>t(s).formInfo.gender=b),options:t(We)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),a.factorList.includes("SOCIAL_INS")?(g(),A(l,{key:2,modelValue:t(s).formInfo.socialSecurity,"onUpdate:modelValue":e[5]||(e[5]=b=>t(s).formInfo.socialSecurity=b),name:"socialSecurity",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u793E\u4FDD"}]},{input:h(()=>[C(r,{modelValue:t(s).formInfo.socialSecurity,"onUpdate:modelValue":e[4]||(e[4]=b=>t(s).formInfo.socialSecurity=b),options:t(Xe)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),a.factorList.includes("OCCUPATION_CATEGORY")?(g(),A(l,{key:3,modelValue:t(s).formInfo.occupationalClass,"onUpdate:modelValue":e[6]||(e[6]=b=>t(s).formInfo.occupationalClass=b),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u804C\u4E1A\u7C7B\u578B"}],name:"occupationalClass",label:"\u804C\u4E1A\u7C7B\u578B","is-link":"",readonly:"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[7]||(e[7]=b=>t(D)(!0))},{input:h(()=>[t(s).occupationalText?(g(),T("div",st,U(t(s).occupationalText),1)):(g(),T("span",rt,"\u8BF7\u9009\u62E9"))]),_:1},8,["modelValue"])):P("",!0)]),_:1},512),C(E,{show:t(R),"onUpdate:show":e[10]||(e[10]=b=>je(R)?R.value=b:null),position:"bottom"},{default:h(()=>[C(f,{type:"date","min-date":t(p).minAge,"max-date":t(p).maxAge,onConfirm:e[8]||(e[8]=b=>{t(s).formInfo.birthday=t(W)(b).format("YYYY-MM-DD"),t(I)(!1)}),onCancel:e[9]||(e[9]=b=>t(I)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"]),t(i)?(g(),A(ut,{key:0,modelValue:t(s).formInfo.occupationalClass,"onUpdate:modelValue":e[11]||(e[11]=b=>t(s).formInfo.occupationalClass=b),show:t(i),"insured-code":a.insuredCode,onFinish:y,onClose:c},null,8,["modelValue","show","insured-code"])):P("",!0)])}}});var St=Y(dt,[["__scopeId","data-v-7b008a27"]]);const mt={class:"com-risk-card-wrapper part-card"},ct={class:"custom-field"},ft={class:"field-tip"},pt={class:"custom-field"},yt={class:"field-tip"},gt={class:"custom-field"},Vt={class:"field-tip"},kt={key:0},Dt={key:9,class:"liab-desc"},It=N({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(a){const n=a,k=$({}),R=G("premium")||{};k.value=G("enumList")||{};const I=$({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),i=S({formInfo:n.formInfo}),D=o=>typeof o!="boolean"&&!o||Array.isArray(o)&&!o.length?!0:{}.toString.call(o)==="[object Object]"?Object.keys(o).length:!1,F=(o,e,l={})=>{let r=e;return Array.isArray(e)||(r=[`${r}`]),(o||[]).filter(u=>r.includes(`${u.value}`)||r.includes(u.value))},v=M(()=>{var o,e,l,r,u;return((o=n.originData)==null?void 0:o.riskType)===1?F(n.enums.RISK_INSURANCE_PERIOD,((e=n.originData.riskInsureLimitVO)==null?void 0:e.insurancePeriodValueList)||[]):((l=n.originData)==null?void 0:l.periodType)===2?F([{value:"year_1",name:"1\u5E74"}],["year_1"]):F((r=n.enums)==null?void 0:r.RISK_INSURANCE_PERIOD,((u=n.mainRiskData.riskInsureLimitVO)==null?void 0:u.insurancePeriodValueList)||[])}),s=M(()=>{var o,e,l,r,u,f,E,b;return((o=n.originData)==null?void 0:o.riskType)===1?F((e=n==null?void 0:n.enums)==null?void 0:e.RISK_PAYMENT_PERIOD,((l=n.originData.riskInsureLimitVO)==null?void 0:l.paymentPeriodValueList)||[]):((r=n.originData)==null?void 0:r.exemptFlag)===1?F(ze,[`${(f=(u=n==null?void 0:n.originData)==null?void 0:u.riskInsureLimitVO)==null?void 0:f.paymentPeriodRule}`]):((E=n.originData)==null?void 0:E.periodType)===2?F([{value:"year_1",name:"1\u5E74\u4EA4"}],["year_1"]):F(n.enums.RISK_PAYMENT_PERIOD,((b=n.mainRiskData.riskInsureLimitVO)==null?void 0:b.paymentPeriodValueList)||[])}),y=M(()=>{var o,e,l,r,u;return((o=n.originData)==null?void 0:o.riskType)===1?F(X,((e=n.originData.riskInsureLimitVO)==null?void 0:e.paymentFrequencyList)||[]):((l=n.originData.riskInsureLimitVO)==null?void 0:l.paymentTypeRule)===1?F(X,((r=n.mainRiskData.riskInsureLimitVO)==null?void 0:r.paymentFrequencyList)||[]):F(X,((u=n.mainRiskData.riskInsureLimitVO)==null?void 0:u.paymentFrequencyList)||[])}),c=M(()=>{var l,r;let o=0,e=0;return(((r=(l=n.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.paymentMethodLimitList)||[]).forEach((u,f)=>{f===0&&(o=u.minAmount,e=u.maxAmount),o>u.minAmount&&(o=u.minAmount),e<u.maxAmount&&(e=u.maxAmount)}),i.formInfo.amount=o,{min:o,max:e}}),d=M(()=>{var l,r;let o=0,e=0;return(((r=(l=n.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.paymentMethodLimitList)||[]).forEach((u,f)=>{f===0&&(o=u.minPremium,e=u.maxPremium),o>u.minPremium&&(o=u.minPremium),e<u.maxPremium&&(e=u.maxPremium)}),i.formInfo.premium=o,{min:o,max:e}}),V=M(()=>{var l,r,u,f;const o=((r=(l=n.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.minCopy)||1,e=(f=(u=n.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:f.maxCopy;return i.formInfo.copy=`${o||1}`,{min:o,max:e}}),p=(o,e,l)=>{var u,f;const r=((f=(u=n.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:f.increaseDecreaseNum)||1;if(l==="sumInsured"){if(c.value.max&&+o>c.value.max)return`\u91D1\u989D\u6700\u5927${c.value.max}\u5143`;if(+o<c.value.min)return`\u91D1\u989D\u6700\u5C0F${c.value.min}\u5143`}else{if(d.value.max&&+o>d.value.max)return`\u91D1\u989D\u6700\u5927${d.value.max}\u5143`;if(+o<d.value.min)return`\u91D1\u989D\u6700\u5C0F${d.value.min}\u5143`}return+o%r===0?"":`\u91D1\u989D\u5FC5\u987B\u662F${r}\u7684\u500D\u6570`};return we(()=>{var e,l;const o={riskType:n.originData.riskType,riskId:n.originData.id,riskName:n.originData.riskName,riskCode:n.originData.riskCode,mainRiskCode:(e=n==null?void 0:n.mainRiskData)==null?void 0:e.riskCode,mainRiskId:(l=n==null?void 0:n.mainRiskData)==null?void 0:l.id,riskCategory:n.originData.riskCategory,liabilityVOList:(n.originData.riskLiabilityInfoVOList||[]).map(r=>H(K({},r),{liabilityAttributeCode:r.liabilityAttributeType,liabilityCode:r.liabilityCode,liabilityRateType:r.liabilityRateType}))};Object.assign(i==null?void 0:i.formInfo,o)}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.paymentFrequency},(o=0)=>{var e,l,r;[3].includes(((e=n.originData.riskCalcMethodInfoVO)==null?void 0:e.saleMethod)||0)&&(((r=(l=n.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.paymentMethodLimitList)||[]).forEach(u=>{+u.paymentFrequency==+o&&Object.assign(i.formInfo,{amount:u.perCopyAmount,premium:u.perCopyPremium})}),+o==1&&i.formInfo.chargePeriod!=="single"&&(i.formInfo.chargePeriod="single")}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.copy},o=>{var e,l;((e=n.originData.riskCalcMethodInfoVO)==null?void 0:e.saleMethod)===4&&(i.formInfo.amount=+(o||1)*(((l=n.originData.riskCalcMethodInfoVO)==null?void 0:l.fixedAmount)||0))}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.chargePeriod},o=>{o==="single"&&+(i.formInfo.paymentFrequency||0)!=1&&(i.formInfo.paymentFrequency=1)}),w(()=>n==null?void 0:n.mainRiskInfo,o=>{var e,l,r,u,f,E;o&&n.originData.riskType===2&&(((l=(e=n.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:l.insurancePeriodRule)===1&&(o.coveragePeriod?I.value.coveragePeriod.disabled=!0:I.value.coveragePeriod.prevent=!0,i.formInfo.coveragePeriod=o.coveragePeriod||""),((u=(r=n.originData)==null?void 0:r.riskInsureLimitVO)==null?void 0:u.paymentPeriodRule)===1&&(o.chargePeriod?I.value.chargePeriod.disabled=!0:I.value.chargePeriod.prevent=!0,i.formInfo.chargePeriod=o.chargePeriod||""),((E=(f=n.originData)==null?void 0:f.riskInsureLimitVO)==null?void 0:E.paymentTypeRule)===1&&(o.paymentFrequency?I.value.paymentFrequency.disabled=!0:I.value.paymentFrequency.prevent=!0,i.formInfo.paymentFrequency=o.paymentFrequency||0))},{immediate:!0,deep:!0}),(o,e)=>{var j,Z,ee,te,ie,oe,ae,ne,ue,le,re,se,de,me,ce,fe,pe,ye,ge,Ve,ke,De,Ie,ve,be,Le,he,Fe,Ce,Re,Ae;const l=O("ProSvg"),r=O("ProTitle"),u=O("VanStepper"),f=O("VanField"),E=O("ProRadioButton"),b=O("ProExpand");return g(),T("div",mt,[C(r,{"risk-type":a.originData.riskType,title:a.originData.riskName},{default:h(()=>[a.removeRiskList.includes(a.originData.id)?(g(),T("div",{key:0,class:"delete-risk",onClick:e[0]||(e[0]=m=>a.removeRisk(a.originData.id))},[C(l,{name:"delete",color:"#0d6efe"})])):P("",!0)]),_:1},8,["risk-type","title"]),((j=a.originData.riskCalcMethodInfoVO)==null?void 0:j.saleMethod)===1&&a.originData.exemptFlag===2?(g(),A(f,{key:0,modelValue:t(i).formInfo.amount,"onUpdate:modelValue":e[2]||(e[2]=m=>t(i).formInfo.amount=m),label:"\u4FDD\u989D",name:"amount",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...m)=>p(...m,"sumInsured")}]},{input:h(()=>{var m,L;return[x("div",ct,[C(u,{modelValue:t(i).formInfo.amount,"onUpdate:modelValue":e[1]||(e[1]=_=>t(i).formInfo.amount=_),"input-width":"64px",min:t(c).min,step:((m=a.originData.riskCalcMethodInfoVO)==null?void 0:m.increaseDecreaseNum)||1,max:t(c).max},null,8,["modelValue","min","step","max"]),x("span",ft,U(`\u91D1\u989D\u6700\u4F4E${t(c).min}\u5143\uFF0C\u4E3A${((L=a.originData.riskCalcMethodInfoVO)==null?void 0:L.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((ee=(Z=a.originData)==null?void 0:Z.riskCalcMethodInfoVO)==null?void 0:ee.saleMethod)===2?(g(),A(f,{key:1,modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[4]||(e[4]=m=>t(i).formInfo.premium=m),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...m)=>p(...m,"premium")}]},{input:h(()=>{var m,L,_,B;return[x("div",pt,[C(u,{modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[3]||(e[3]=q=>t(i).formInfo.premium=q),step:((L=(m=a.originData)==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:L.increaseDecreaseNum)||1,min:t(d).min,"input-width":"64px",max:t(d).max},null,8,["modelValue","step","min","max"]),x("span",yt,U(`\u91D1\u989D\u6700\u4F4E${t(d).min}\u5143\uFF0C\u4E3A${((B=(_=a.originData)==null?void 0:_.riskCalcMethodInfoVO)==null?void 0:B.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((ie=(te=a.originData)==null?void 0:te.riskCalcMethodInfoVO)==null?void 0:ie.saleMethod)===3||((ae=(oe=a.originData)==null?void 0:oe.riskCalcMethodInfoVO)==null?void 0:ae.saleMethod)===4&&(((ue=(ne=a.originData)==null?void 0:ne.riskCalcMethodInfoVO)==null?void 0:ue.minCopy)||((re=(le=a.originData)==null?void 0:le.riskCalcMethodInfoVO)==null?void 0:re.maxCopy))?(g(),A(f,{key:2,modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[6]||(e[6]=m=>t(i).formInfo.copy=m),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:h(()=>[x("div",gt,[C(u,{modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[5]||(e[5]=m=>t(i).formInfo.copy=m),step:1,min:t(V).min,max:t(V).max},null,8,["modelValue","min","max"]),x("span",Vt,U(`${t(V).min}\u4EFD\u8D77\u8D2D\uFF0C\u6700\u591A\u8D2D\u4E70${t(V).max}\u4EFD`),1)])]),_:1},8,["modelValue"])):P("",!0),(![1].includes(((se=a.originData.riskCalcMethodInfoVO)==null?void 0:se.saleMethod)||0)||((de=a.originData)==null?void 0:de.exemptFlag)===1)&&(((me=a.originData.riskCalcMethodInfoVO)==null?void 0:me.fixedAmount)||((fe=t(R))==null?void 0:fe[(ce=a.originData)==null?void 0:ce.riskCode]))?(g(),A(f,{key:3,label:"\u4FDD\u989D"},{input:h(()=>{var m,L,_,B;return[x("div",null,U(((m=a.originData.riskCalcMethodInfoVO)==null?void 0:m.fixedAmount)||((B=(_=t(R))==null?void 0:_[(L=a.originData)==null?void 0:L.riskCode])==null?void 0:B.amount)),1)]}),_:1})):P("",!0),!D((ye=(pe=a.originData)==null?void 0:pe.riskInsureLimitVO)==null?void 0:ye.insurancePeriodValueList)||!D((Ve=(ge=a.originData)==null?void 0:ge.riskInsureLimitVO)==null?void 0:Ve.insurancePeriodRule)?(g(),A(f,{key:4,modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":e[8]||(e[8]=m=>t(i).formInfo.coveragePeriod=m),label:"\u4FDD\u969C\u671F\u95F4",name:"coveragePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4FDD\u969C\u671F\u95F4"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":e[7]||(e[7]=m=>t(i).formInfo.coveragePeriod=m),disabled:I.value.coveragePeriod.disabled,prevent:I.value.coveragePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4FDD\u969C\u671F\u95F4":"",options:t(v),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!D((De=(ke=a.originData)==null?void 0:ke.riskInsureLimitVO)==null?void 0:De.paymentPeriodValueList)||!D((ve=(Ie=a.originData)==null?void 0:Ie.riskInsureLimitVO)==null?void 0:ve.paymentPeriodRule)?(g(),A(f,{key:5,modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":e[10]||(e[10]=m=>t(i).formInfo.chargePeriod=m),label:"\u4EA4\u8D39\u671F\u95F4",name:"chargePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u671F\u95F4"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":e[9]||(e[9]=m=>t(i).formInfo.chargePeriod=m),disabled:I.value.chargePeriod.disabled,prevent:I.value.chargePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u671F\u95F4":"",options:t(s),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!D((be=a.originData.riskInsureLimitVO)==null?void 0:be.paymentFrequencyList)||!D((Le=a.originData.riskInsureLimitVO)==null?void 0:Le.paymentPeriodRule)?(g(),A(f,{key:6,modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[12]||(e[12]=m=>t(i).formInfo.paymentFrequency=m),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u65B9\u5F0F"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[11]||(e[11]=m=>t(i).formInfo.paymentFrequency=m),disabled:I.value.paymentFrequency.disabled,prevent:I.value.paymentFrequency.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u65B9\u5F0F":"",options:t(y)},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),D((Fe=(he=a.originData)==null?void 0:he.riskInsureLimitVO)==null?void 0:Fe.annuityDrawTypeList)?P("",!0):(g(),A(f,{key:7,modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[14]||(e[14]=m=>t(i).formInfo.annuityDrawDate=m),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65F6\u95F4"}]},{input:h(()=>{var m;return[C(E,{modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[13]||(e[13]=L=>t(i).formInfo.annuityDrawDate=L),options:F(t(Qe),((m=a.originData.riskInsureLimitVO)==null?void 0:m.annuityDrawTypeList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),D((Re=(Ce=a.originData)==null?void 0:Ce.riskInsureLimitVO)==null?void 0:Re.annuityDrawFrequencyList)?P("",!0):(g(),A(f,{key:8,modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[16]||(e[16]=m=>t(i).formInfo.annuityDrawType=m),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65B9\u5F0F"}]},{input:h(()=>{var m;return[C(E,{modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[15]||(e[15]=L=>t(i).formInfo.annuityDrawType=L),options:F(t(Je),((m=a.originData.riskInsureLimitVO)==null?void 0:m.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),(g(!0),T(Q,null,J(a.originData.riskLiabilityInfoVOList||[],(m,L)=>(g(),T("div",{key:L},[m.optionalFlag===1?(g(),A(f,{key:0,modelValue:t(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":_=>t(i).formInfo.liabilityVOList[L].liabilityAttributeValue=_,label:m.liabilityName,name:"liabilityAttributeValue",rules:[{required:m.liabilityAttributeValue,message:`\u8BF7\u9009\u62E9${m.liabilityName}`}]},{input:h(()=>{var _,B;return[x("div",null,[D(m.liabilityAttributeValueList)?(g(),T("span",kt,"50\u4E07")):(g(),A(E,{key:1,modelValue:t(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":q=>t(i).formInfo.liabilityVOList[L].liabilityAttributeValue=q,options:F(t(Pe),(B=(_=a.originData.riskLiabilityInfoVOList)==null?void 0:_[L])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(g(),A(f,{key:1,modelValue:t(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":_=>t(i).formInfo.liabilityVOList[L].liabilityAttributeValue=_,label:m.liabilityName,name:"liabilityAttributeValue"},{input:h(()=>{var _,B;return[x("div",null,[D(m.liabilityAttributeValueList)?(g(),A(E,{key:0,modelValue:t(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":q=>t(i).formInfo.liabilityVOList[L].liabilityAttributeValue=q,options:t(Ze)},null,8,["modelValue","onUpdate:modelValue","options"])):(g(),A(E,{key:1,modelValue:t(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":q=>t(i).formInfo.liabilityVOList[L].liabilityAttributeValue=q,options:F(t(Pe),(B=(_=a.originData.riskLiabilityInfoVOList)==null?void 0:_[L])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label"]))]))),128)),((Ae=a.originData)==null?void 0:Ae.relationDesc)?(g(),T("div",Dt,[C(b,{title:"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E"},{default:h(()=>[x("div",null,U(a.originData.relationDesc),1)]),_:1})])):P("",!0)])}}});var _e=Y(It,[["__scopeId","data-v-b7ca189e"]]);const vt=a=>(Te("data-v-1f13cbe8"),a=a(),Be(),a),bt={class:"com-risk-list-wrapper"},Lt=vt(()=>x("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),ht={class:"risk-list"},Ft={class:"cell-title"},Ct={class:"title"},Rt={class:"footer-bar"},At=Ue("\u786E\u8BA4"),Et=N({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(a,{emit:n}){const k=a,R=$([]),I=$([]),i=$([...k.disabled]),D=S({show:k.show,currentChecked:[...k.modelValue]}),F=(c,d)=>{if(!k.collocationList.length){if(d){D.currentChecked=[];return}D.currentChecked.push(c);return}let V=D.currentChecked,p=i.value;d?(k.collocationList.forEach(o=>{c===o.riskId&&(o.collocationType===2?V=V.filter(e=>e!==o.collocationRiskId||e!==c):o.collocationType===3?(V=V.filter(e=>e!==c),p=p.filter(e=>e!==o.collocationRiskId)):V=V.filter(e=>e!==c))}),D.currentChecked=V,i.value=p):(k.collocationList.forEach(o=>{c===o.riskId&&(d||(o.collocationType===2?V.push(o.collocationRiskId):o.collocationType===3&&p.push(o.collocationRiskId),V.push(c)))}),D.currentChecked.push(...V),i.value=p)},v=c=>{var V,p,o;if(i.value.includes(c))return;const d=D.currentChecked.includes(c);F(c,d),(o=(p=(V=R==null?void 0:R.value)==null?void 0:V[c])==null?void 0:p.toggle)==null||o.call(p)},s=()=>{n("close")},y=()=>{const c=k.riskList.filter(d=>D.currentChecked.includes(d.id));n("update:modelValue",[...new Set(I.value)]),n("finished",c,i.value),n("close")};return Ge(()=>{R.value=[]}),w(()=>D.currentChecked,c=>{I.value=c},{deep:!0,immediate:!0}),w(()=>k.modelValue,c=>{I.value=c||[],i.value.push(...c||[])},{deep:!0,immediate:!0}),(c,d)=>{const V=O("van-checkbox"),p=O("VanCell"),o=O("van-cell-group"),e=O("van-checkbox-group"),l=O("VanButton"),r=O("VanPopup");return g(),T("div",bt,[C(r,{show:t(D).show,"onUpdate:show":d[1]||(d[1]=u=>t(D).show=u),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",round:"",position:"bottom",closeable:"",onClose:s},{default:h(()=>[Lt,x("div",ht,[C(e,{modelValue:I.value,"onUpdate:modelValue":d[0]||(d[0]=u=>I.value=u)},{default:h(()=>[C(o,{inset:""},{default:h(()=>[(g(!0),T(Q,null,J(a.riskList,u=>(g(),A(p,{key:u.id,title:u.riskName,disabled:i.value.includes(u.id),onClick:f=>v(u.id)},{"right-icon":h(()=>[C(V,{ref_for:!0,ref:f=>R.value[u.id]=f,shape:"square",disabled:i.value.includes(u.id),name:u.id,onClick:Ke(f=>v(u.id),["stop"])},null,8,["disabled","name","onClick"])]),title:h(()=>[x("div",Ft,[x("div",Ct,U(u.riskName),1)])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),x("div",Rt,[C(l,{type:"primary",disabled:!t(D).currentChecked.length,block:"",onClick:y},{default:h(()=>[At]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var Ot=Y(Et,[["__scopeId","data-v-1f13cbe8"]]);const Pt={class:"risk-list-wrapper"},xt={key:1,class:"add-rider-risk"},_t={class:"left-part"},Tt=Ue("+ \u9644\u52A0\u9669"),Bt=N({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}},riderRiskList:{default:()=>[]}},setup(a){var v;const n=a,k=G("source")||{},[R,I]=z(!1);$(null),$(null);const i=S({mainRiskInfo:n.riskInfo,riderRiskInfo:((v=n.riskInfo)==null?void 0:v.riderRiskVOList)||[],requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),D=(s,y)=>{i.requiredRiderRiskData=i.requiredRiderRiskData.concat(s),i.disabledList=y},F=s=>{He.confirm({message:"\u786E\u5B9A\u8981\u5220\u9664\u9644\u52A0\u9669\u4E48\uFF1F"}).then(()=>{var c;const y=[s];(((c=i.mainRiskData)==null?void 0:c.collocationVOList)||[]).forEach(d=>{s===d.riskId&&(d.collocationType===2||d.collocationType===3)&&y.push(d.collocationRiskId)}),i.checkedList=i.checkedList.filter(d=>!y.includes(d)),i.requiredRiderRiskData=i.requiredRiderRiskData.filter(d=>!y.includes(d.id)),i.disabledList=i.disabledList.filter(d=>!y.includes(d)),Object.assign(i.riderRiskInfo,{[s]:void 0})}).catch(()=>{})};return we(()=>{}),w(()=>i.requiredRiderRiskData,s=>{const y=[i.mainRiskData,...s];let c=[],d=[];const V=[];y.forEach((p,o)=>{var l,r,u;const e=((l=p==null?void 0:p.riskCalcMethodInfoVO)==null?void 0:l.riskFactorRelationList)||[];c=c.concat(e.filter(f=>f.factorObject==="insured").map(f=>f.factorCode)),d=d.concat(e.filter(f=>f.factorObject==="holder").map(f=>f.factorCode)),V.push((r=p==null?void 0:p.riskInsureLimitVO)==null?void 0:r.minHolderAge,(u=p==null?void 0:p.riskInsureLimitVO)==null?void 0:u.maxHolderAge)}),(s||[]).forEach(p=>{var e;const o={riskType:p.riskType,riskId:p.id,riskCode:p.riskCode,riskName:p.riskName,mainRiskCode:i.mainRiskData.riskCode,mainRiskId:(e=i.mainRiskData)==null?void 0:e.id,riskCategory:p.riskCategory,liabilityVOList:(p.riskLiabilityInfoVOList||[]).map(l=>H(K({},l),{liabilityAttributeCode:l.liabilityAttributeType,liabilityCode:l.liabilityCode,liabilityRateType:l.liabilityRateType}))};Object.assign(i.riderRiskInfo,{[p.id]:o})}),n.pickFactor({insuredFactorList:[...new Set(c)],holderFactorList:[...new Set(d)],ageRange:V})},{deep:!0,immediate:!0}),w(()=>n.originData,s=>{(s||[]).forEach(y=>{y.riskType===1?(i.mainRiskData=y,i.requiredRiderRiskData=y.requiredRiderRiskVOList||[],i.riderRiskList=y.optionalRiderRiskVOList):i.riderRiskList.push(y)})},{deep:!0,immediate:!0}),(s,y)=>{var d,V,p;const c=O("ProCheckButton");return g(),T("div",Pt,[t(i).mainRiskData?(g(),A(_e,{key:0,enums:a.enums,"form-info":t(i).mainRiskInfo,"origin-data":t(i).mainRiskData},null,8,["enums","form-info","origin-data"])):P("",!0),(g(!0),T(Q,null,J(t(i).requiredRiderRiskData,(o,e)=>(g(),A(_e,{key:o.id,"form-info":t(i).riderRiskInfo[o.id],index:e,enums:a.enums,"main-risk-data":t(i).mainRiskData,"main-risk-info":t(i).mainRiskInfo,"origin-data":o,"remove-risk":F,"remove-risk-list":t(i).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"]))),128)),((d=t(i).riderRiskList)==null?void 0:d.length)-((V=t(i).checkedList)==null?void 0:V.length)&&(t(k).origin!=="proposal"||t(k).type==="addRiderRisk")?(g(),T("div",xt,[x("span",_t,U(`\u5171\u6709${t(i).riderRiskList.length-t(i).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),C(c,{activated:"",onClick:y[0]||(y[0]=o=>t(I)(!0))},{default:h(()=>[Tt]),_:1})])):P("",!0),t(R)?(g(),A(Ot,{key:2,modelValue:t(i).checkedList,"onUpdate:modelValue":y[1]||(y[1]=o=>t(i).checkedList=o),show:t(R),disabled:t(i).disabledList,"risk-list":t(i).riderRiskList,"collocation-list":((p=t(i).mainRiskData)==null?void 0:p.collocationVOList)||[],onFinished:D,onClose:y[2]||(y[2]=o=>t(I)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):P("",!0)])}}});var Yt=Y(Bt,[["__scopeId","data-v-07716367"]]);const jt=(a={})=>$e.post("/api/app/insure/product/insureProductDetail",a),Gt=a=>$e.post("/api/app/insure/insurance/premiumCalc",a);export{St as P,Yt as R,jt as i,Gt as p};

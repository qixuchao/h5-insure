import{_ as e,d as a,r as t,an as n,ck as l,G as o,c as i,h as s,j as u,g as d,f as r,k as c,V as v,bY as p,bZ as m,b_ as I,u as f,a as _,E as h,a9 as C,b6 as y,e as g,w as b,n as k,F as O,a7 as S,cl as w,c0 as x,c7 as A,bT as T}from"./index-b8ef7d55.js";import{i as N}from"./trial-d5b83a74.js";import{b as P,c as E}from"./product-bdbda2d2.js";import{I as L}from"./infoCollection-762a20da.js";import{_ as R}from"./index-22e2ec49.js";import{u as B,G as F,_ as j}from"./useAttachment-3557026a.js";import{P as V}from"./index-595fbdda.js";import{g as U}from"./utils-7c528e3d.js";import"./pdfh5-008ca364.js";import"./trial-8213e5ec.js";const D={class:"com-video"},q=["src"],z=["src"];var G=e(a({__name:"Video",props:{src:null},setup(e){const a=e,p=t(!1),m=t("");return n((()=>a.src),(()=>{l({type:2,url:a.src||"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/test/edward/video.mp4?Expires=1678436061%26OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C%26Signature=cGw7WPsFup8EJ1Q1FQTw2jW4BMQ%3D"}).then((e=>{m.value=e.data}))})),o((()=>{})),(e,t)=>{const n=v;return i(),s("div",D,[u("img",{src:d(m),class:"cover-image",onClick:t[0]||(t[0]=e=>p.value=!0)},null,8,q),r(n,{name:"play",class:"cover-image-play",onClick:t[1]||(t[1]=e=>p.value=!0)}),d(p)?(i(),s("video",{key:0,src:a.src,autoplay:"",controls:"",class:"banner-video"},null,8,z)):c("",!0)])}}}),[["__scopeId","data-v-0d57b80e"]]);const M={key:0},Q={class:"page-internet-product-detail"},Y={class:"info"},K=u("span",{id:"insureButton"},null,-1),W=u("div",{id:"xinaoDialog"},null,-1),Z=a({__name:"index",setup(e){const a=p((()=>m((()=>import("./index-1c0d5303.js")),["static/js/index-1c0d5303.js","static/css/index-6519d156.css","static/js/index-b8ef7d55.js","static/css/index-01a5659c.css","static/js/pdfh5-008ca364.js","static/js/TrialButton-f9612124.js","static/css/TrialButton-0e59660a.css","static/js/index-2500e426.js","static/css/index-19d9cc6b.css","static/js/index-1acc156d.js","static/css/index-d4e18040.css","static/js/index-864c4640.js","static/css/index-ea4f829a.css","static/js/index-58321d46.js","static/css/index-fb13f984.css","static/js/isObjectLike-f858f31d.js","static/js/_nodeUtil-ef4cea77.js","static/js/add-f889d438.js","static/css/add-a7f4d865.css","static/js/index-8d2e770b.js","static/js/echarts-5af64754.js","static/js/Table-bf8946d6.js","static/css/Table-da427f8c.css","static/js/empty-ae586b6c.js","static/js/trial-d5b83a74.js"]))),l=p((()=>m((()=>import("./index-324dd9b8.js")),["static/js/index-324dd9b8.js","static/css/index-ea588f10.css","static/js/index-b8ef7d55.js","static/css/index-01a5659c.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-2500e426.js","static/css/index-19d9cc6b.css","static/js/utils-7c528e3d.js","static/js/infoCollection-762a20da.js","static/js/trial-8213e5ec.js"]))),v=p((()=>m((()=>import("./index-1f39eb73.js")),["static/js/index-1f39eb73.js","static/css/index-b1275e60.css","static/js/index-b8ef7d55.js","static/css/index-01a5659c.css","static/js/pdfh5-008ca364.js"]))),D=p((()=>m((()=>import("./index-409528c0.js")),["static/js/index-409528c0.js","static/css/index-b9ba3011.css","static/js/index-b8ef7d55.js","static/css/index-01a5659c.css","static/js/pdfh5-008ca364.js"]))),q=I();f();const z=_(),{productCode:Z="",tenantId:J,agentCode:H="",agencyCode:X,saleChannelId:$,extraInfo:ee,insurerCode:ae,preview:te}=z.query;let ne={};try{console.log("extInfo",decodeURIComponent(ee)),ne=JSON.parse(decodeURIComponent(ee))}catch(Ne){}t();const le=t(),oe=t(),ie=t(!0),se=t({}),ue=t({});t(!1);const de=t(!1),re=t(0),ce=t(!1);t({});const ve=t(!0);t(!0);const pe=t(!0),me=t(""),Ie=t([]),fe=t({}),_e=t({}),he=t([]),Ce=t({imgUrl:"",desc:"",title:"",link:window.location.href}),ye=t({});h((()=>!!te));const ge=t([]),be=t(),ke=async()=>{P({productCode:Z,tenantId:J,isTenant:!te}).then((({data:e,code:a})=>{if("10000"===a){se.value=e,se.value.BASIC_INFO.video=["https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20230316/78b6ce255ee04c7a819b9bf284d9e9fd/1.mp4?Expires=1679581759&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=DkKlyOYtKfYvYM4xdni2hMsomzg%3D"],document.title=e.BASIC_INFO.title||"";const{title:a,desc:n,image:l}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{};t={title:a,desc:n,image:l},Ce.value={desc:t.desc||"你好，这里是描述",imgUrl:t.image,title:t.title,link:window.location.href},w(e.BASIC_INFO.themeType)}var t})),await N({productCode:Z,isTenant:!te}).then((({data:e,code:a})=>{var t;"10000"===a&&(ce.value=!0,ue.value=e,fe.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],he.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),pe.value=!1,E({productCode:Z}).then((({code:e,data:a})=>{var t,n,l,o;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=a;be.value=e||[];const{basicInfo:{questionnaireType:s},questions:u,questionnaireName:d}=(null==(t=null==i?void 0:i[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};2===s&&(ge.value=[{attachmentName:d,attachmentUri:u,attachmentType:"question"}]),ge.value=[{attachmentName:d,attachmentUri:null==(n=null==u?void 0:u[0])?void 0:n.content,attachmentType:U(String(null==(l=null==u?void 0:u[0])?void 0:l.textType),null==(o=null==u?void 0:u[0])?void 0:o.content)}]}}))};n((()=>ye.value.planCode),(e=>{fe.value=(ue.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Oe=()=>{le.value.handleClickTab()("insureButton")};t(""),t(0);const{fileList:Se,mustReadFileCount:we,popupFileList:xe}=B(fe,be),Ae=()=>{de.value=!1,ve.value=!0},Te=()=>{de.value=!1,ve.value=!0};return n((()=>fe.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:t}=fe.value;ye.value.planCode=e,_e.value=(t||[]).find((e=>e.mainRiskFlag===C.YES)),console.log("mainRiskInfo.value",_e.value),Ie.value=(a||[]).map((e=>({...e,value:L.UN_INSURE})))}),{deep:!0,immediate:!0}),y((()=>{x(oe,(([{isIntersecting:e}],a)=>{ie.value=!0}))})),o((()=>{pe.value=!0,ke(),setTimeout((async()=>{me.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const n=A,o=T;return i(),s(O,null,[d(pe)?(i(),s("div",M)):(i(),g(o,{key:1,"data-skeleton-root":"LONG","theme-vars":d(q)},{default:b((()=>{var e,l,o,p,m,I,f,_,h,C,y;return[u("div",Q,[u("div",Y,[(null==(l=null==(e=d(se))?void 0:e.BASIC_INFO)?void 0:l.banner.length)?(i(),g(R,{key:0,"data-skeleton-type":"img",url:null==(o=d(se))?void 0:o.BASIC_INFO.banner[0]},null,8,["url"])):c("",!0),k(' v-if="tenantProductDetail?.BASIC_INFO?.video.length" '),r(G,{"data-skeleton-type":"img",src:null==(p=d(se))?void 0:p.BASIC_INFO.video[0]},null,8,["src"]),(null==(f=null==(I=null==(m=d(se))?void 0:m.BASIC_INFO)?void 0:I.bannerMove)?void 0:f.length)?(i(),g(R,{key:1,url:null==(C=null==(h=null==(_=d(se))?void 0:_.BASIC_INFO)?void 0:h.bannerMove)?void 0:C[0],onClick:Oe},null,8,["url"])):c("",!0),u("div",{ref_key:"observeRef",ref:oe},null,512)]),(null==(y=d(se))?void 0:y.GUARANTEE)?(i(),g(F,{key:0,"show-service-config":"","data-source":d(se),"plan-list":d(he)},null,8,["data-source","plan-list"])):c("",!0),r(j,{ref:"tenantProductDetailScrollRef","data-source":d(se)},null,8,["data-source"]),r(n,null,{default:b((()=>{var e,a,t;return[(null==(e=d(se).SIGNATURE)?void 0:e.inscribedContent)?(i(),g(d(v),{key:0,"inscribed-content":null==(t=null==(a=d(se))?void 0:a.SIGNATURE)?void 0:t.inscribedContent},null,8,["inscribed-content"])):c("",!0)]})),_:1}),r(n,null,{default:b((()=>{var e;return[(null==(e=d(Se))?void 0:e.length)?(i(),g(d(D),{key:0,"attachement-list":d(Se),"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{re.value=e,de.value=!0})(e))},null,8,["attachement-list"])):c("",!0)]})),_:1}),d(ie)?(i(),s(O,{key:1},[K,r(d(a),{"data-source":d(ue).productPlanInsureVOList[0],"product-info":d(ue)},null,8,["data-source","product-info"])],64)):c("",!0)]),d(ce)?(i(),g(V,{key:0,"product-detail":d(se)},null,8,["product-detail"])):c("",!0),W]})),_:1},8,["theme-vars"])),d(de)?(i(),g(d(l),{key:2,show:d(de),"onUpdate:show":t[1]||(t[1]=e=>S(de)?de.value=e:null),"content-list":d(ve)?d(Se):d(xe),"is-only-view":d(ve),"active-index":d(re),text:d(ve)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":d(ve)?0:d(we),onSubmit:Ae,onOnCloseFilePreviewByMask:Te},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):c("",!0)],64)}}});export{Z as default};

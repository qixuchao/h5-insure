import{ref as e,reactive as t,computed as n,watch as o}from"vue";import{u as r,a as i,Y as u}from"./index-d66a20d8.js";import{R as a}from"./infoCollection-e6a8a0ee.js";import{_ as l}from"./PersonalInfo-4143a04f.js";import{u as d}from"./useDicData-b539129e.js";const s={class:"page-info-wrapper"},c=vue.defineComponent({name:"insureForm"}),v=vue.defineComponent({...c,props:{factorObject:{},formInfo:{default:()=>({})},isView:{type:Boolean,default:!1},sendSmsCode:{type:Function,default:(e,t)=>{}},titleCollection:{default:()=>({})},inputAlign:{default:"left"},needDesensitize:{type:Boolean,default:!1}},setup(c,{expose:v}){const f=c,{insurerCode:m=""}=r().query;i(),r();const I=d(`${m.toLocaleUpperCase()}_OCCUPATION`),p=e({}),L=e({extInfo:{},tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:""}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),O=e(null),C=e([]),R=e([]);e([]),e([]),e([]),t({beneficiaryId:0,nextPage:"",currentAddress:null,isLoading:!0});const b=n((()=>{var e,t;const n={INSURER:{},HOLDER:{}};return((null==(e=p.value)?void 0:e.INSURER)||[]).forEach((e=>{n.INSURER[e.code]=e})),((null==(t=p.value)?void 0:t.HOLDER)||[]).forEach((e=>{n.HOLDER[e.code]=e})),n})),N=(e,t)=>{var n,o,r;return(null==(r=null==(o=null==(n=b.value)?void 0:n[t])?void 0:o[e])?void 0:r.isDisplay)===u.YES},x=(e,t)=>{var n,o;return(null==(o=null==(n=b.value)?void 0:n[t])?void 0:o[e].isMustInput)===u.YES},V=(e,t,n)=>{var o,r,i;return(null==(i=null==(r=null==(o=b.value)?void 0:o[n])?void 0:r[e])?void 0:i[t])||""},w=(e,t)=>{const n=e;return Object.keys(n).forEach((e=>{t.includes(e)||(n[e]="")})),n};return v({validateForm:e=>new Promise(((t,n)=>{var o;null==(o=O.value)||o.validate(e).then((()=>{t(L.value)}),(()=>{n()}))}))}),o((()=>f.factorObject),(()=>{const e={BENEFICIARY:f.factorObject[3],INSURER:f.factorObject[2],HOLDER:f.factorObject[1]};p.value=e}),{immediate:!0,deep:!0}),o([()=>L.value.tenantOrderInsuredList[0].relationToHolder,()=>L.value.tenantOrderHolder],(([e],[t])=>{var n,o,r,i;`${L.value.tenantOrderInsuredList[0].relationToHolder}`===a.SELF?(Object.assign(L.value.tenantOrderInsuredList[0],{...w(null==(o=null==(n=L.value)?void 0:n.tenantOrderInsuredList)?void 0:o[0],["extInfo","relationToHolder","tenantOrderBeneficiaryList","tenantOrderProductList"]),extInfo:{occupationCodeList:[]}}),Object.assign(L.value.tenantOrderInsuredList[0],L.value.tenantOrderHolder,{id:L.value.tenantOrderInsuredList[0].id,extInfo:{...L.value.tenantOrderHolder.extInfo,insureProvinceCode:L.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,insureCityCode:L.value.tenantOrderInsuredList[0].extInfo.insureCityCode,insureAreaCode:L.value.tenantOrderInsuredList[0].extInfo.insureAreaCode}})):e===t||f.isView||Object.assign(L.value.tenantOrderInsuredList[0],{...w(null==(i=null==(r=L.value)?void 0:r.tenantOrderInsuredList)?void 0:i[0],["extInfo","relationToHolder","tenantOrderBeneficiaryList","tenantOrderProductList"]),extInfo:{occupationCodeList:[]}})}),{deep:!0}),o((()=>f.formInfo),(()=>{Object.keys(f.formInfo).length&&(L.value=f.formInfo)}),{deep:!0,immediate:!0}),(e,t)=>{const n=vue.resolveComponent("ProField"),o=vue.resolveComponent("ProCard"),r=vue.resolveComponent("ProRadioButton"),i=vue.resolveComponent("ProCascader");vue.resolveComponent("ProSvg");const u=vue.resolveComponent("ProForm");return vue.openBlock(),vue.createElementBlock("div",s,[vue.createVNode(u,{ref_key:"formRef",ref:O,"show-error":"","show-error-message":!1,"input-align":e.inputAlign},{default:vue.withCtx((()=>{var u,a,d,s;return[(null==(u=vue.unref(p).HOLDER)?void 0:u.length)?(vue.openBlock(),vue.createBlock(o,{key:0,"show-line":!1,"show-divider":!1,title:null==(a=e.titleCollection)?void 0:a.HOLDER},{default:vue.withCtx((()=>[vue.createVNode(l,{images:vue.unref(C),"onUpdate:images":t[1]||(t[1]=e=>vue.isRef(C)?C.value=e:null),"form-info":vue.unref(L).tenantOrderHolder,"factor-list":vue.unref(p).HOLDER,prefix:"holder","is-view":e.isView,"need-desensitize":e.needDesensitize,"send-sms-code":e.sendSmsCode},{name:vue.withCtx((()=>[vue.renderSlot(e.$slots,"holderName")])),default:vue.withCtx((()=>{var o,r;return[N("gasNumberCollection","HOLDER")&&(null==(r=null==(o=vue.unref(L).tenantOrderSubjectList)?void 0:o[0])?void 0:r.extInfo)?(vue.openBlock(),vue.createBlock(n,{key:0,modelValue:vue.unref(L).tenantOrderSubjectList[0].subjectNo,"onUpdate:modelValue":t[0]||(t[0]=e=>vue.unref(L).tenantOrderSubjectList[0].subjectNo=e),label:V("gasNumberCollection","title","HOLDER"),name:"subjectNo",required:x("gasNumberCollection","HOLDER"),"is-view":e.isView,maxlength:100},null,8,["modelValue","label","required","is-view"])):vue.createCommentVNode("",!0)]})),_:3},8,["images","form-info","factor-list","is-view","need-desensitize","send-sms-code"])])),_:3},8,["title"])):vue.createCommentVNode("",!0),(null==(d=vue.unref(p).INSURER)?void 0:d.length)?(vue.openBlock(),vue.createBlock(o,{key:1,"show-line":!1,"show-divider":!1,title:null==(s=e.titleCollection)?void 0:s.INSURER},{default:vue.withCtx((()=>[N("relationToHolder","INSURER")?(vue.openBlock(),vue.createBlock(n,{key:0,modelValue:vue.unref(L).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[3]||(t[3]=e=>vue.unref(L).tenantOrderInsuredList[0].relationToHolder=e),class:"relation-holder",name:"insure_relationToHolder",required:x("relationToHolder","INSURER"),label:V("relationToHolder","title","INSURER")},{input:vue.withCtx((()=>[vue.createVNode(r,{modelValue:vue.unref(L).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[2]||(t[2]=e=>vue.unref(L).tenantOrderInsuredList[0].relationToHolder=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:V("relationToHolder","attributeValueList","INSURER")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","required","label"])):vue.createCommentVNode("",!0),e.isView||1!=+vue.unref(L).tenantOrderInsuredList[0].relationToHolder?(vue.openBlock(),vue.createBlock(l,{key:1,images:vue.unref(R),"onUpdate:images":t[4]||(t[4]=e=>vue.isRef(R)?R.value=e:null),"form-info":vue.unref(L).tenantOrderInsuredList[0],"factor-list":vue.unref(p).INSURER||[],prefix:"insure","need-desensitize":e.needDesensitize,"send-sms-code":e.sendSmsCode,"is-view":e.isView},{name:vue.withCtx((()=>[vue.renderSlot(e.$slots,"insurerName")])),_:3},8,["images","form-info","factor-list","need-desensitize","send-sms-code","is-view"])):vue.createCommentVNode("",!0),N("social","INSURER")?(vue.openBlock(),vue.createBlock(n,{key:2,modelValue:vue.unref(L).tenantOrderInsuredList[0].extInfo.hasSocialInsurance,"onUpdate:modelValue":t[6]||(t[6]=e=>vue.unref(L).tenantOrderInsuredList[0].extInfo.hasSocialInsurance=e),label:V("social","title","INSURER"),name:"insure_hasSocialInsurance",required:x("social","INSURER")},{input:vue.withCtx((()=>[vue.createVNode(r,{modelValue:vue.unref(L).tenantOrderInsuredList[0].extInfo.hasSocialInsurance,"onUpdate:modelValue":t[5]||(t[5]=e=>vue.unref(L).tenantOrderInsuredList[0].extInfo.hasSocialInsurance=e),disabled:e.isView,prop:{label:"value",value:"code"},options:V("social","attributeValueList","INSURER")||[]},null,8,["modelValue","disabled","options"])])),_:1},8,["modelValue","label","required"])):vue.createCommentVNode("",!0),N("occupation","INSURER")?(vue.openBlock(),vue.createBlock(i,{key:3,modelValue:vue.unref(L).tenantOrderInsuredList[0].extInfo.occupationCodeList[0],"onUpdate:modelValue":t[7]||(t[7]=e=>vue.unref(L).tenantOrderInsuredList[0].extInfo.occupationCodeList[0]=e),field0:vue.unref(L).tenantOrderInsuredList[0].extInfo.occupationCodeList[0],"onUpdate:field0":t[8]||(t[8]=e=>vue.unref(L).tenantOrderInsuredList[0].extInfo.occupationCodeList[0]=e),field1:vue.unref(L).tenantOrderInsuredList[0].extInfo.occupationCodeList[1],"onUpdate:field1":t[9]||(t[9]=e=>vue.unref(L).tenantOrderInsuredList[0].extInfo.occupationCodeList[1]=e),field2:vue.unref(L).tenantOrderInsuredList[0].extInfo.occupationCodeList[2],"onUpdate:field2":t[10]||(t[10]=e=>vue.unref(L).tenantOrderInsuredList[0].extInfo.occupationCodeList[2]=e),label:V("occupation","title","INSURER"),name:"insure_occupationCodeList","is-view":e.isView,required:x("occupation","INSURER"),"data-source":vue.unref(I),mapping:{label:"value",value:"code",children:"children"},"is-link":""},null,8,["modelValue","field0","field1","field2","label","is-view","required","data-source"])):vue.createCommentVNode("",!0)])),_:3},8,["title"])):vue.createCommentVNode("",!0),vue.createCommentVNode("",!0)]})),_:3},8,["input-align"])])}}});export{v as _};

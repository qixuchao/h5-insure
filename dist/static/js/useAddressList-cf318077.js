import{_ as e}from"./index-cd45743c.js";import{k as a,p as t,s as l,t as s,y as o,u as n,r as i,O as r,o as d,B as c,S as u,v,C as p,E as m,M as h,H as f,G as y,I as b,N as C,b as w,$ as g,ag as k,J as x,m as _}from"./vendor-e12fffd5.js";import{q as P,a as N}from"./product-794ad664.js";import{P as I}from"./index-d3bc2ee6.js";import{u as T}from"./theme-1f207c56.js";import{o as R}from"./utils-6e40f842.js";var j=e(a({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""}},setup(e){const a=e;return(e,n)=>{const i=t("van-image");return a.url?(l(),s(i,{key:0,width:"100%",class:"banner","lazy-load":"",src:a.url},null,8,["src"])):o("",!0)}}}),[["__scopeId","data-v-34cbd784"]]);const B={class:"pre-body"},S={class:"header"},D=["src"],O={class:"company-name"},U={class:"content"},L=y(" 为了更好地保护您的个人信息，请在使用前点击阅读、充分理解"),$=y("相关内容，我们对您使用过程中可能出现的个人信息收集、使用、共享和保护等情况进行了详细说明。 您已进入投保流程，请仔细阅读"),A=y("、投保须知、保险条款等信息，为维护您的合法权益，您的操作轨迹将被记录。 "),F={class:"footer"};var E=e(a({props:{productDetail:{type:Object,default:()=>{}}},setup(e){const a=e,s=n(),{tenantId:o=""}=s.query,y=i(!1),b=i(!1),C=r({insureConfig:{insureName:"",tenantName:""}}),w=i({title:"",link:""}),g=(e,a)=>{var t;b.value=!b.value,w.value.link=null==(t=C.insureConfig)?void 0:t[a].link,w.value.title=e.target.innerText};return d((()=>{(async()=>{const{code:e,data:t}=await P({insureCode:a.productDetail.insurerCode,tenantId:o});"10000"===e&&(C.insureConfig=t),y.value=!0})()})),(e,a)=>{var s;const o=t("ProPopup"),n=t("ProFilePreview");return l(),c(f,null,[u(o,{class:"pre-notice-wrap","close-on-click-overlay":!1,show:y.value,closeable:!1,height:"395px"},{default:v((()=>[p("div",B,[p("div",S,[p("img",{src:m("/static/assets/logo.65e1895e.png")},null,8,D),p("div",O," 由"+h(m(C).insureConfig.tenantName)+"提供保险经纪服务，"+h(m(C).insureConfig.insureName)+"承保 ",1)]),p("div",U,[L,p("span",{onClick:a[0]||(a[0]=e=>g(e,"privacyAgreement"))},"《用户隐私协议》"),$,p("span",{onClick:a[1]||(a[1]=e=>g(e,"notification"))},"《客户告知书》"),A]),p("div",F,[u(I,{shadow:!1,text:"我知道了",onClick:a[2]||(a[2]=e=>y.value=!1)})])])])),_:1},8,["show"]),u(o,{show:b.value,"onUpdate:show":a[3]||(a[3]=e=>b.value=e),class:"pre-notice-wrap",title:null==(s=w.value)?void 0:s.title,position:"bottom",style:{height:"600px"}},{default:v((()=>{var e;return[u(n,{content:null==(e=w.value)?void 0:e.link,type:"link"},null,8,["content"])]})),_:1},8,["show","title"])],64)}}}),[["__scopeId","data-v-79a863b0"]]);const H=["onClick"];var q=e(a({props:{preText:{type:String,default:""},hasBgColor:{type:Boolean,default:!0},attachementList:{type:Object,default:()=>{}}},emits:["preview-file"],setup:(e,{emit:a})=>(t,s)=>(l(),c("div",{class:C({"com-attachment-list":!0,"has-bg":e.hasBgColor})},[p("span",null,h(e.preText),1),(l(!0),c(f,null,b(e.attachementList||[],((e,t)=>(l(),c("span",{key:t,class:"attachment-item",onClick:e=>(e=>{a("preview-file",e)})(t)}," 《"+h(e.attachmentName)+"》 ",9,H)))),128))],2))}),[["__scopeId","data-v-4c895668"]]);const M={key:0,class:"item"},V={key:1,class:"attachment-list"},z=["onClick"],G={class:"attachment-list-item-name"},J={class:"attachment-list-item-icon"},K={class:"footer"},Q=a({props:{show:{type:Boolean,default:!1},contentList:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},text:{type:String,default:""},beforeReadOverText:{type:String,default:"同意，下一条"},forceReadCound:{type:Number,default:0},isOnlyView:{type:Boolean,default:!1}},emits:["update:show","submit","onCloseFilePreview"],setup(e,{emit:a}){const n=e,r=T(),d=i(n.show),y=i(n.contentList.map(((e,a)=>({...e,disabled:!0,readDisabled:!0})))),C=i(n.activeIndex),k=i(0),x=i(null),_=w((()=>{var e,a;return null==(a=null==(e=y.value)?void 0:e[C.value])?void 0:a.attachmentList})),P=w((()=>{var e;return null==(e=y.value[C.value])?void 0:e.readDisabled})),N=w((()=>!(C.value>=n.forceReadCound-1)&&(!(k.value>=n.forceReadCound)&&(k.value<n.forceReadCound&&C.value!==n.forceReadCound-1)))),j=()=>{C.value+=1},B=()=>{n.isOnlyView?a("update:show",!1):(a("update:show",!1),a("submit"))};g((()=>n),(()=>{d.value=n.show,C.value=n.activeIndex}),{deep:!0,immediate:!0});const S=e=>{e&&Math.floor(e.target.scrollHeight-e.target.scrollTop)===e.target.clientHeight&&y.value[C.value].readDisabled&&(y.value[C.value].disabled=!1,y.value[C.value].readDisabled=!1,y.value[C.value+1].disabled=!1,k.value+=1)};return g((()=>C.value),(()=>{n.show&&(k.value>=n.forceReadCound&&y.value.forEach((e=>{e.disabled=!1,e.readDisabled=!1})),x.value&&(x.value.scrollTop=0))}),{immediate:!0}),(i,w)=>{const g=t("ProTab"),k=t("ProFilePreview"),T=t("ProSvg"),D=t("van-config-provider"),O=t("ProPopup");return l(),s(O,{show:d.value,"onUpdate:show":w[1]||(w[1]=e=>d.value=e),class:"file-preview-popup-wrap",closeable:!1,onClose:w[2]||(w[2]=e=>a("onCloseFilePreview"))},{default:v((()=>[u(D,{"theme-vars":m(r),class:"custom-provider"},{default:v((()=>[d.value?(l(),s(g,{key:0,active:C.value,"onUpdate:active":w[0]||(w[0]=e=>C.value=e),list:y.value.map(((e,a)=>({title:e.attachmentName,disabled:a!=C.value&&(e.disabled||!1),slotName:`guarantee-${a}`}))),class:"tab"},null,8,["active","list"])):o("",!0),p("div",{ref_key:"previewRef",ref:x,class:"list",onScroll:S},[1===m(_).length?(l(),c("div",M,[(l(),s(k,{key:m(_)[0].attachmentName,content:m(_)[0].attachmentUri,type:m(_)[0].attachmentType,"forbid-click":!0},null,8,["content","type"]))])):(l(),c("div",V,[(l(!0),c(f,null,b(m(_),((e,a)=>(l(),c("div",{key:a,class:"attachment-list-item",onClick:a=>(e=>{const a={fileType:e.attachmentType,fileUri:e.attachmentUri};R(a)})(e)},[p("div",G,h(e.attachmentName),1),p("div",J,[u(T,{name:"arrow-right"})])],8,z)))),128))]))],544),p("div",K,[m(N)?(l(),s(I,{key:0,shadow:!1,"theme-vars":m(r),disabled:m(P),class:"right",text:`${e.beforeReadOverText}(${C.value+1}/${e.forceReadCound})`,onClick:j},null,8,["theme-vars","disabled","text"])):(l(),s(I,{key:1,disabled:m(P),shadow:!1,"theme-vars":m(r),text:n.text,onClick:B},null,8,["disabled","theme-vars","text"]))])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});const W={class:"inscribedContent-content"},X={class:"content"};var Y=e(a({props:{inscribedContent:{type:String,default:""}},setup(e){const a=e,t=i();return g((()=>a.inscribedContent),(e=>{t.value=e?e.replaceAll("\n","<br />"):""}),{immediate:!0,deep:!0}),(e,a)=>{const s=k("dompurify-html");return l(),c("div",W,[x(p("div",X,null,512),[[s,t.value]])])}}}),[["__scopeId","data-v-702b2de2"]]);const Z=(e,a,t)=>{_((()=>{(async()=>{try{const{code:t,data:l}=await N(e);if("10000"===t){const e={};l.forEach((a=>{e[a.relationCode]||(e[a.relationCode]=[]),e[a.relationCode].push(a)})),null==a||a(e)}}catch(l){null==t||t(!1)}})()}))};export{q as A,j as B,Y as I,E as P,Q as _,Z as u};

import{d as e,o as a,c as t,b as o,w as n,F as s,n as l,l as i,a as r,u as c,a6 as d,q as u,cl as p,aE as m,a4 as f,a5 as y,h,g as v,r as I,i as g,av as k,m as j,ac as _,a0 as b,cm as w,ad as P,f as C,a8 as L,aC as V,aB as D,bj as x,aa as E,aq as S,ae as N}from"./index-cb6244e5.js";import{_ as R,a as q}from"./PolicyInfo-38735e27.js";import{g as A,m as O}from"./trial-7c136c09.js";import{n as U}from"./nextStep-70358ced.js";import{c as F}from"./product-31222ac8.js";import{u as M}from"./useOrder-a8cca413.js";import{a as T,P as Y}from"./constants-5480429b.js";import{P as $}from"./index-0636e0da.js";import{P as J}from"./index-f6687570.js";import{R as z,c as B}from"./trial-c8f568a3.js";import{a as G}from"./utils-0af605ab.js";import"./core-91b76564.js";import"./constant-8927d485.js";import"./index-85650a0f.js";import"./empth-c0adfdba.js";import"./cloneDeep-0cc5bd56.js";import"./lodash-4372a532.js";import"./infoCollection-c91b4b6c.js";import"./questionnaire-62331097.js";import"./index-2345b42a.js";import"./search-584798f5.js";const K={class:"com-insured-part-wrapper"},W={class:"content-wrapper"},H={class:"risk-item"},Q=e({__name:"InsureInfo",props:{productData:{default:()=>[]},totalPremium:{default:0}},setup:e=>(e,f)=>{const y=p,h=m;return a(),t("div",K,[o(h,{title:"保障信息","show-icon":!1},{default:n((()=>[(a(!0),t(s,null,l(e.productData,(e=>(a(),t(s,{key:e.productCode},[(a(!0),t(s,null,l(e.riskList,(e=>(a(),i(h,{key:e.riskCode,title:e.riskName},{default:n((()=>{var n;return[r("div",W,[r("div",H,[e.riskType===c(z).MAIN_RISK?(a(),t(s,{key:0},[o(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])],64)):(a(),t(s,{key:1},[o(y,{title:e.riskName,content:"投保"},null,8,["title"]),e.exemptFlag===c(d).YES?(a(),i(y,{key:0,title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])):(null==(n=e.liabilityList)?void 0:n.length)?(a(),t(s,{key:1},[o(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"]),o(y,{title:"交费方式",content:c(B)[e.paymentFrequency]},null,8,["content"])],64)):u("",!0)],64)),o(y,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(y,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])]})),_:2},1032,["title"])))),128))],64)))),128))])),_:1})])}});const X={class:"long-info-preview"},Z={class:"footer-btn"},ee=r("span",null,"分享",-1),ae=e({__name:"infoPreview",setup(e){const d=f((()=>y((()=>import("./index-dc9d2cbb.js")),["static/js/index-dc9d2cbb.js","static/css/index-fa4edf2a.css","static/js/index-cb6244e5.js","static/css/index-c1a9aef8.css","static/js/theme-94cf7d00.js","static/js/index-f6687570.js","static/css/index-bbfdd7ec.css","static/js/utils-128dc56b.js","static/js/infoCollection-c91b4b6c.js","static/js/trial-c8f568a3.js"])));f((()=>y((()=>import("./index-55aa9125.js")),["static/js/index-55aa9125.js","static/css/index-cb73c937.css","static/js/index-cb6244e5.js","static/css/index-c1a9aef8.css"])));const p=h(),z=v(),B=M(),K={holder:T.holderSign,insured:T.insuredSign,agent:T.agentSign},{productCode:W="",tenantId:H,agentCode:ae="",agencyCode:te,saleChannelId:oe,isShare:ne,orderNo:se,extraInfo:le,insurerCode:ie,objectType:re="1",preview:ce}=p.query;let de={};try{de=JSON.parse(decodeURIComponent(le))}catch(we){}const ue=I({isView:!1,personalInfo:{},policyInfo:{schema:[],config:[],formData:{}},payInfo:{schema:[],config:[],formData:[]}}),pe=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,me=g({imgUrl:"",desc:"",title:"",link:pe}),fe=g(),ye=g(),he=g(!1);g(0);const ve=g(!1),Ie=g(),ge=()=>{U(B.value,((e,a)=>{a===V.JUMP_PAGE&&Ie.value.handleShare()}))},ke=async()=>{ce?D(Y.INFO_PREVIEW,p.query):z.push({path:K[re],query:p.query})},je=g(),_e=g(),be=g([]);return k((()=>{(async()=>{let e={};const{code:a,data:t}=await A({orderNo:se,tenantId:H});"10000"===a&&(Object.assign(B.value,t),e=G(t.insuredList[0].productList),je.value=t,ve.value=!0),F(e).then((({code:e,data:a})=>{var t,o;"10000"===e&&(be.value=null==(o=null==(t=a.riskMaterialList)?void 0:t[0])?void 0:o.productMaterialList)})),O(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:t}=e;_e.value=t;const{payInfo:o,other:n}=x(t);ue.payInfo={...ue.payInfo,...o},ue.policyInfo={...ue.policyInfo,...n}}}))})()})),(e,p)=>{var f,y;const h=E,v=S,I=m,g=N;return a(),t("div",X,[o(h),o(Q,{"product-data":null==(y=null==(f=c(B).insuredList)?void 0:f[0])?void 0:y.productList},null,8,["product-data"]),c(_e)?(a(),i($,{key:0,ref_key:"personalInfoRef",ref:ye,modelValue:c(je),"onUpdate:modelValue":p[0]||(p[0]=e=>j(je)?je.value=e:null),"product-factor":c(_e),"is-view":""},null,8,["modelValue","product-factor"])):u("",!0),c(ue).payInfo.schema.length?(a(),i(c(R),{key:1,ref_key:"payInfoRef",ref:fe,modelValue:c(B).tenantOrderPayInfoList,"onUpdate:modelValue":p[1]||(p[1]=e=>c(B).tenantOrderPayInfoList=e),schema:c(ue).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):u("",!0),c(ue).policyInfo.schema.length?(a(),i(c(q),{key:2,modelValue:c(B),"onUpdate:modelValue":p[2]||(p[2]=e=>j(B)?B.value=e:null),schema:c(ue).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):u("",!0),o(I,{title:"产品资料","show-line":!1,"show-icon":!1},{default:n((()=>[(a(!0),t(s,null,l(c(be),((e,t)=>(a(),i(v,{key:t,"is-link":"",label:e.materialName,onClick:e=>{he.value=!0}},null,8,["label","onClick"])))),128))])),_:1}),r("div",Z,[!c(ne)&&c(me).isShare&&c(_)()?(a(),i(P,b({key:0},c(me),{class:"share-btn",onClick:w(ge,["stop"])}),{default:n((()=>[o(g,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ee])),_:1},16,["onClick"])):u("",!0),o(J,{shadow:!1,onClick:ke},{default:n((()=>[C(e.$slots,"default",{},(()=>[L("下一步")]))])),_:3})]),o(c(d))])}}});export{ae as default};

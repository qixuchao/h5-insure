import{_ as t,d as e,i as a,r as n,o,c as l,a as i,e as d,b as s,w as r,F as c,n as u,l as m,u as p,m as v,c3 as f,h as I,g as h,O as y,c$ as g,am as C,aJ as b,ct as _,a8 as N,al as k,q as x,V as j,cY as L,aw as w,bM as A,a9 as O,d0 as D,ae as V,at as T,au as P,az as Y,T as M,bx as S,d1 as U}from"./index-a3c15377.js";import{C as G}from"./index-1a35cb47.js";import{_ as E}from"./index-ce95f9a2.js";import{_ as F}from"./box-title-70dc1627.js";import{d as H}from"./order-70317d90.js";import{i as q,o as J}from"./trial-0f8ffd87.js";import{f as R,g as $}from"./infoCollection-de566c01.js";import{g as Q,s as W}from"./core-dfa3de57.js";import{I as z}from"./infoItem-03002272.js";import{C as B}from"./index-ae254c85.js";import{t as K}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-42bf787b.js";/* empty css              */import"./useDicData-0f8b6ef2.js";import"./bankCard-7e0b096a.js";import"./isObjectLike-a9798079.js";import"./phoneVerify-0c603305.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";const X={class:"insurance-notification-information"},Z={class:"insurance-notification-information-title"},tt={class:"insurance-notification-information-collapse"},et={class:"insurance-notification-information-content"};var at=t(e({__name:"insuranceNotificationInformation",props:{title:{default:""},data:{default:()=>[]}},setup(t){const e=a([]);return n({text:"",occupationClass:""}),(a,n)=>{const f=G,I=B;return o(),l("div",X,[i("div",Z,d(t.title),1),i("div",tt,[s(I,{modelValue:p(e),"onUpdate:modelValue":n[0]||(n[0]=t=>v(e)?e.value=t:null)},{default:r((()=>[(o(!0),l(c,null,u(t.data,((t,e)=>(o(),m(f,{key:e,title:t.title,name:e},{default:r((()=>[i("div",et,d(t.content),1)])),_:2},1032,["title","name"])))),128))])),_:1},8,["modelValue"])])])}}}),[["__scopeId","data-v-84b9fd0c"]]);const nt=t=>(T("data-v-243ea8a6"),t=t(),P(),t),ot={class:"page-order-detail"},lt=nt((()=>i("div",{class:"card-item-name"},"订单进度",-1))),it={class:"card-item-icon"},dt={class:"card card-list"},st=nt((()=>i("p",{class:"card-list-title"},"健利保倍享版",-1))),rt={class:"card card-list"},ct={class:"card-list-head"},ut=nt((()=>i("div",{class:"card-list-title"},"险种信息",-1))),mt={class:"card-list-premium"},pt={class:"card"},vt=nt((()=>i("div",{class:"policy-options"},[N("保单选项 "),i("span",{class:"policy-options-content"},"纸质保单和电子保单")],-1))),ft={class:"card"},It=nt((()=>i("div",{class:"tenantOrderAttachmentList-title"},"投保人资料",-1))),ht={class:"tenantOrderAttachmentList-img"},yt=["src"],gt=nt((()=>i("div",{class:"tenantOrderAttachmentList-title"},"银行卡信息",-1))),Ct={class:"tenantOrderAttachmentList-img"},bt=[nt((()=>i("img",{src:F,alt:""},null,-1)))],_t=nt((()=>i("div",{class:"tenantOrderAttachmentList-title"},"被保人资料",-1))),Nt={class:"tenantOrderAttachmentList-img"},kt=["src"],xt={class:"insurance-notification-information card"},jt={key:0,class:"footer-button"},Lt={key:1,class:"footer-button"},wt={key:2,class:"footer-button"};var At=t(e({__name:"index",setup(t){const e=f(),T=I(),P=h(),F=a(),X=a([]),Z=a([]),tt=a({}),et=[{title:"险种名称",dataIndex:"riskName",width:200},{title:"保险金额/份数",dataIndex:"regularPremium",width:180,render:(t,e)=>t.regularPremium/t.copy},{title:"保障期间",dataIndex:"coveragePeriodDesc",width:180},{title:"交费期间",dataIndex:"chargePeriodDesc",width:180},{title:"首期保费",dataIndex:"initialPremium",width:180,render:(t,e)=>t.initialPremium}],nt=n({customerQuestions:[],payInfo:{schema:[],config:[],formData:[]}}),{query:{orderNo:At,agentCode:Ot,tenantId:Dt,abbreviation:Vt,productCategory:Tt,applicationNo:Pt,orderId:Yt}}=T,Mt=()=>{O("orderTrajectory",{orderNo:At,agentCode:Ot,tenantId:Dt,abbreviation:Vt,productCategory:Tt,applicationNo:Pt})},St=()=>{Y.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{F.value&&H(F.value.id,F.value.orderStatus).then((t=>{const{code:e,data:a}=t;"10000"===e&&M.success("删除成功")}))}))},Ut=a(!1),Gt=()=>{var t,e,a,n,o;if(F.value){const{id:l,extInfo:{templateId:i,pageCode:d,extraInfo:s},agencyId:r,insurerCode:c,orderStatus:u}=F.value,m={insurerCode:c,productCode:null==(a=null==(e=null==(t=F.value.insuredList)?void 0:t[0])?void 0:e.productList[0])?void 0:a.productCode,tenantId:F.value.tenantId,agencyCode:F.value.agencyId,agentCode:F.value.saleUserId,saleChannelId:null==s?void 0:s.saleChannelId,extraMap:{...null==(o=null==(n=F.value)?void 0:n.extInfo)?void 0:o.extraInfo,orderNo:F.value.orderNo}};Ut.value=!0,J(m).then((t=>{if(console.log("投保链接==",t.data),"10000"===t.code)if([R.LONG,R.NIANJIN].includes($(`${i}`))){const e=t.data.split("?")[1],a=S.parse(e);P.push({path:U[u],query:{...a,extraInfo:a.extraInfo,orderNo:At,templateId:i}})}else window.location.href=t.data}))}},Et=()=>{if(F.value){const{extInfo:{templateId:t}}=F.value;[R.LONG,R.NIANJIN].includes($(`${t}`))?Gt():Q(F.value).then((({code:t,data:e})=>{"10000"===t&&W(e)}))}};return y((()=>{q({productCode:"111",isTenant:!1}).then((({data:t,code:e})=>{var a,n;if("10000"===e){tt.value=(null==(a=t.productPlanInsureVOList)?void 0:a[0])||{};const{payInfo:e}=K(null==(n=tt.value)?void 0:n.productFactor);nt.payInfo={...nt.payInfo,...e}}})),console.log(At,"orderNo================"),D({orderNo:At,orderId:Yt,tenantId:Dt}).then((t=>{const{code:e,data:a}=t;"10000"===e&&(nt.customerQuestions=a)})),g({orderNo:At,orderId:Yt,applicationNo:Pt,agentCode:Ot,tenantId:Dt}).then((t=>{const{code:e,data:a}=t;"10000"===e&&(F.value=a)}))})),(t,a)=>{const n=V,f=E,I=G,h=B,y=C,g=b,O=_("loading");return o(),m(g,{"theme-vars":p(e)},{default:r((()=>{var t,e,g,C,b,_,D,V,T,P,Y,M,S;return[i("div",ot,[i("div",{class:"card card-head",onClick:Mt},[lt,i("div",it,[N(d(null==(t=p(F))?void 0:t.orderStepDesc)+" ",1),s(n,{name:"arrow-right"})])]),i("div",dt,[st,s(z,{label:"订单号",content:null==(e=p(F))?void 0:e.orderNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),s(z,{label:"投保单号",content:null==(g=p(F))?void 0:g.applicationNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),s(z,{label:"创建时间",content:p(k)(null==(C=p(F))?void 0:C.gmtCreated).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),s(z,{label:"投保时间",content:p(k)(null==(b=p(F))?void 0:b.orderDate).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),s(z,{label:"投保保费",content:null==(_=p(F))?void 0:_.orderAmount,line:"","min-width":"other"},null,8,["content"]),s(z,{label:"承保保费",content:null==(D=p(F))?void 0:D.realAmount,line:"","min-width":"other"},null,8,["content"])]),i("div",rt,[i("div",ct,[ut,i("div",mt,[N(" 首年保费："),i("span",null,d(null==(V=p(F))?void 0:V.orderAmount),1)])]),(null==(T=p(F))?void 0:T.riskList.length)>0?(o(),m(f,{key:0,columns:et,class:"table","data-source":null==(P=p(F))?void 0:P.riskList},null,8,["data-source"])):x("",!0)]),i("div",pt,[s(h,{modelValue:p(X),"onUpdate:modelValue":a[0]||(a[0]=t=>v(X)?X.value=t:null)},{default:r((()=>[s(I,{title:"投保告知信息",name:"1"},{default:r((()=>[vt])),_:1})])),_:1},8,["modelValue"])]),i("div",ft,[s(h,{modelValue:p(Z),"onUpdate:modelValue":a[1]||(a[1]=t=>v(Z)?Z.value=t:null)},{default:r((()=>[s(I,{title:"影像信息",name:"1"},{default:r((()=>{var t,e,a,n;return[It,i("div",ht,[(o(!0),l(c,null,u(null==(e=null==(t=p(F))?void 0:t.tenantOrderAttachmentList)?void 0:e.filter((t=>"2"==t.objectType)),((t,e)=>(o(),l("div",{key:e},[i("img",{src:t.uri,alt:""},null,8,yt)])))),128))]),gt,i("div",Ct,[(o(),l(c,null,u(10,((t,e)=>i("div",{key:e,class:"tenantOrderAttachmentList-img-content"},bt))),64))]),_t,i("div",Nt,[(o(!0),l(c,null,u(null==(n=null==(a=p(F))?void 0:a.tenantOrderAttachmentList)?void 0:n.filter((t=>"3"==t.objectType)),((t,e)=>(o(),l("div",{key:e},[i("img",{src:t.uri,alt:""},null,8,kt)])))),128))])]})),_:1})])),_:1},8,["modelValue"])]),i("div",xt,[s(at,{title:"投保告知信息",data:[{title:"《万能风险告知问卷》",content:"12345556789"},{title:"《被保人健康告知》",content:"12345556789"}]},null,8,["data"])]),j((o(),l("div",null,[(null==(Y=p(F))?void 0:Y.orderTopStatus)===p(L).PENDING?(o(),l("div",jt,[s(y,{type:"primary",onClick:w(St,["stop"])},{default:r((()=>[N("删除")])),_:1},8,["onClick"]),p(A).UNDERWRITING_FAILED!==p(F).orderStatus?(o(),m(y,{key:0,type:"primary",onClick:w(Gt,["stop"])},{default:r((()=>[N("去处理")])),_:1},8,["onClick"])):x("",!0)])):x("",!0),(null==(M=p(F))?void 0:M.orderTopStatus)===p(L).PAYING?(o(),l("div",Lt,[s(y,{type:"primary",onClick:w(St,["stop"])},{default:r((()=>[N("删除")])),_:1},8,["onClick"]),s(y,{type:"primary",onClick:w(Et,["stop"])},{default:r((()=>[N("去支付")])),_:1},8,["onClick"])])):x("",!0),(null==(S=p(F))?void 0:S.orderTopStatus)===p(L).TIMEOUT?(o(),l("div",wt,[s(y,{type:"primary",onClick:w(St,["stop"])},{default:r((()=>[N("删除")])),_:1},8,["onClick"])])):x("",!0)])),[[O,p(Ut)]])])]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-243ea8a6"]]);export{At as default};

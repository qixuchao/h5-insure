import{a8 as e,ac as o,av as a,bb as t,X as l,ag as n,ae as r,aA as u,ah as d,ad as c,a9 as s,af as i,bc as v,as as m,u as p,bd as f,D as b,T as g}from"./index-d66a20d8.js";import{ref as V,onMounted as h}from"vue";/* empty css              */import{g as N,P as k,u as y,a as C,l as S}from"./core-15eeb464.js";import{u as x}from"./theme-65292714.js";import"./pdfh5-e588f83d.js";const[B,w]=e("radio-group"),E={disabled:Boolean,iconSize:o,direction:String,modelValue:a,checkedColor:String},P=Symbol(B);const D=n(vue.defineComponent({name:B,props:E,emits:["change","update:modelValue"],setup(e,{emit:o,slots:a}){const{linkChildren:n}=t(P);return vue.watch((()=>e.modelValue),(e=>o("change",e))),n({props:e,updateValue:e=>o("update:modelValue",e)}),l((()=>e.modelValue)),()=>{var o;return vue.createVNode("div",{class:w([e.direction]),role:"radiogroup"},[null==(o=a.default)?void 0:o.call(a)])}}})),T={name:a,shape:r("round"),disabled:Boolean,iconSize:o,modelValue:a,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var j=vue.defineComponent({props:u({},T,{bem:d(Function),role:String,parent:Object,checked:Boolean,bindGroup:c}),emits:["click","toggle"],setup(e,{emit:o,slots:a}){const t=vue.ref(),l=o=>{if(e.parent&&e.bindGroup)return e.parent.props[o]},n=vue.computed((()=>l("disabled")||e.disabled)),r=vue.computed((()=>l("direction"))),u=vue.computed((()=>{const o=e.checkedColor||l("checkedColor");if(o&&e.checked&&!n.value)return{borderColor:o,backgroundColor:o}})),d=a=>{const{target:l}=a,r=t.value,u=r===l||(null==r?void 0:r.contains(l));n.value||!u&&e.labelDisabled||o("toggle"),o("click",a)},c=()=>{const{bem:o,shape:r,checked:d}=e,c=e.iconSize||l("iconSize");return vue.createVNode("div",{ref:t,class:o("icon",[r,{disabled:n.value,checked:d}]),style:{fontSize:s(c)}},[a.icon?a.icon({checked:d,disabled:n.value}):vue.createVNode(i,{name:"success",style:u.value},null)])},v=()=>{if(a.default)return vue.createVNode("span",{class:e.bem("label",[e.labelPosition,{disabled:n.value}])},[a.default()])};return()=>{const o="left"===e.labelPosition?[v(),c()]:[c(),v()];return vue.createVNode("div",{role:e.role,class:e.bem([{disabled:n.value,"label-disabled":e.labelDisabled},r.value]),tabindex:n.value?void 0:0,"aria-checked":e.checked,onClick:d},[o])}}});const[z,W]=e("radio");const A=n(vue.defineComponent({name:z,props:T,emits:["update:modelValue"],setup(e,{emit:o,slots:a}){const{parent:t}=v(P),l=()=>{t?t.updateValue(e.name):o("update:modelValue",e.name)};return()=>vue.createVNode(j,vue.mergeProps({bem:W,role:"radio",parent:t,checked:(t?t.props.modelValue:e.modelValue)===e.name,onToggle:l},e),m(a,["default","icon"]))}}));const _={class:"pay-amount"},I={class:"amount"},U={class:"order-info"},F={class:"order-name"},G={class:"order-no"},O={key:0},X={class:"pay-wrapper"},q=["src"],J=vue.defineComponent({name:"Cashier"}),L=vue.defineComponent({...J,setup(e){var o;const a=x(),t=p().query,l=N(t.payWay||k.WXPAY);console.log(t.payWay,"-----",l);const n=V(),r=V(!1),u=V(null==(o=l[0])?void 0:o.name);V("h5");const d=()=>{C({...n.value,payWay:u.value,code:t.code,extraInfo:JSON.stringify({wxCode:t.code})}).then((e=>{b.confirm({message:"请确认是否已完成支付",showCancelButton:!0,confirmButtonText:"支付成功",cancelButtonText:"遇到问题",theme:"round-button",className:"custom-dialog",teleport:".page-cashier-pay"}).then((()=>{n.value&&(window.location.href=n.value.redirectUrl),console.log("订单信息",n.value)})).catch((()=>{n.value&&(window.location.href=n.value.redirectUrl)}))}))},{copy:c,copied:s,isSupported:i}=f({source:""}),v=()=>{var e;c(null==(e=n.value)?void 0:e.orderNo),g("复制成功")};return y(),h((()=>{r.value=!0,S({orderNo:t.orderNo||"P2211220947519991000001750022183",tenantId:t.tenantId||"9991000001"}).then((e=>{console.log("获取订单信息",e),"10000"===e.code&&(n.value=e.data)})).finally((()=>{r.value=!1}))})),(e,o)=>{const t=vue.resolveComponent("ProSvg"),r=vue.resolveComponent("VanButton"),c=vue.resolveComponent("ProPageWrap"),s=vue.resolveComponent("van-config-provider");return vue.openBlock(),vue.createBlock(s,{"theme-vars":vue.unref(a)},{default:vue.withCtx((()=>[vue.createVNode(c,{title:"收银台","main-class":"page-cashier-pay"},{default:vue.withCtx((()=>{var e,a,c;return[vue.createElementVNode("div",_,[vue.createTextVNode(" ￥"),vue.createElementVNode("span",I,vue.toDisplayString(null==(e=vue.unref(n))?void 0:e.orderAmt),1)]),vue.createElementVNode("div",U,[vue.createElementVNode("div",F,vue.toDisplayString(null==(a=vue.unref(n))?void 0:a.orderName),1),vue.createElementVNode("div",G,[vue.createTextVNode(" 订单号： "+vue.toDisplayString((null==(c=vue.unref(n))?void 0:c.orderNo)+" ")+" ",1),vue.unref(i)?(vue.openBlock(),vue.createElementBlock("span",O,[vue.createVNode(t,{name:"copy",onClick:v})])):vue.createCommentVNode("",!0)])]),vue.createElementVNode("div",X,[vue.createVNode(vue.unref(D),{modelValue:vue.unref(u),"onUpdate:modelValue":o[0]||(o[0]=e=>vue.isRef(u)?u.value=e:null)},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(l),(e=>(vue.openBlock(),vue.createElementBlock("div",{key:e.name,class:"pay-item"},[vue.createElementVNode("span",null,[vue.createElementVNode("img",{src:e.img},null,8,q),vue.createTextVNode(vue.toDisplayString(e.title),1)]),vue.createVNode(vue.unref(A),{name:e.name},null,8,["name"])])))),128))])),_:1},8,["modelValue"])]),vue.createVNode(r,{type:"primary",disabled:!vue.unref(u),round:"",size:"large",block:"",onClick:d},{default:vue.withCtx((()=>{var e;return[vue.createTextVNode("确认付款 ￥"+vue.toDisplayString(null==(e=vue.unref(n))?void 0:e.orderAmt),1)]})),_:1},8,["disabled"])]})),_:1})])),_:1},8,["theme-vars"])}}});export{L as default};

import{_ as e,d as a,aV as t,r as n,a8 as l,x as r,G as i,aO as s,b as o,q as u,c as d,g as c,i as v,F as p,l as m,h as f,B as y,t as h,j as I,e as O,n as g,f as P,I as x,Q as b,w as A,s as C,K as L,L as k,aW as V,aZ as _,aG as S,b3 as w,aA as T,b4 as E,u as F,a as R,a3 as D,aX as N,aY as j,aj as q,y as H,aM as B,aC as U,aH as z,Y as M,T as G,a5 as $}from"./index-a6c82b33.js";import{d as Q}from"./debounce-bb7605d3.js";import{i as Y,b as W,p as X,g as J}from"./trial-63cd4119.js";import{p as K}from"./product-afb0fd15.js";import{n as Z}from"./nextStep-908f5951.js";import{C as ee,S as ae,R as te,O as ne,m as le}from"./infoCollection-cc48b70f.js";import{k as re,j as ie}from"./trial-682b5a11.js";import{u as se,P as oe}from"./index-98c4df05.js";import{u as ue}from"./theme-65292714.js";import{o as de,g as ce,v as ve,r as pe,t as me}from"./utils-66560201.js";import{v as fe}from"./validator-5a13dc82.js";import{B as ye}from"./index-86ed1fbf.js";import{s as he,c as Ie}from"./phoneVerify-d62de4c5.js";import{s as Oe}from"./useStorage-7c3f1657.js";import"./pdfh5-e5c0db2a.js";import"./core-2012574c.js";import"./index-c6b2b786.js";const ge={class:"guarantee-list"},Pe=(e=>(L("data-v-91992bc8"),e=e(),k(),e))((()=>v("span",null,"保障计划",-1))),xe={key:0,class:"picture-payment-content"},be=["onClick"],Ae=["src"],Ce=["src"],Le={key:1,class:"plan-list"},ke=["onClick"],Ve={key:2,class:"feerate-view"},_e={key:0},Se={class:"extinfo-info-list"},we={class:"guarantee-detail"},Te={class:"content"};var Ee=e(a({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1},paymentFrequency:{type:String,default:""},premiumInfo:{type:Object,default:()=>{}}},emits:["update-active-plan"],setup(e,{emit:a}){var L;const k=e;t((e=>({cb5916e6:V.value})));const V=n(""),_=n(null==(L=k.dataSource)?void 0:L.planList),S=n(k.activePlanCode),w=n();l([()=>k.dataSource,()=>k.activePlanCode],(()=>{var e,a;k.isMultiplePlan&&(_.value=null==(e=k.dataSource)?void 0:e.planList,S.value=k.activePlanCode,w.value=null==(a=k.dataSource)?void 0:a.planList.findIndex((e=>e.planCode===S.value)))}),{immediate:!0});const T=n([]),E=n([]),F=n(),R=r((()=>k.isMultiplePlan?k.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));l([()=>k.dataSource,()=>k.activePlanCode,()=>k.paymentFrequency,()=>S.value],(()=>{var e,a,t,n,l;if(k.isMultiplePlan){if(_.value&&_.value.length>0){let e=0;const a=_.value.findIndex((e=>e.planCode===S.value));a>-1&&(e=a),T.value=_.value[e].guaranteeItemVOS,E.value=_.value[e].extInfoVOList;const t=_.value[e].productPremiumVOList.find((e=>e.paymentFrequency===k.paymentFrequency));F.value=t||(null==(l=_.value[e])?void 0:l.productPremiumVOList[0])}}else{T.value=null==(e=k.dataSource)?void 0:e.planInsureVO.guaranteeItemVOS,E.value=null==(a=k.dataSource)?void 0:a.planInsureVO.extInfoVOList;const l=null==(t=k.dataSource)?void 0:t.planInsureVO.productPremiumVOList.find((e=>e.paymentFrequency===k.paymentFrequency));F.value=l||(null==(n=k.dataSource)?void 0:n.planInsureVO.productPremiumVOList[0])}}),{immediate:!0,deep:!0});const D=r((()=>{var e;return(null==(e=k.dataSource)?void 0:e.rateUri)||""})),N=r((()=>!!(F.value&&F.value.paymentFrequencyValue&&F.value.premiumUnit&&D))),[j,q]=i(!1),H=r((()=>{var e;return!(!T.value||!(null==(e=T.value)?void 0:e.length))&&(T.value.length>k.count&&(!!k.isShowClose||!j.value))})),B=()=>{q()},U=r((()=>{var e;return T.value&&(null==(e=T.value)?void 0:e.length)?T.value.length<=k.count||j.value?T.value:T.value.slice(0,k.count):[]})),z=e=>{var a;S.value=e,w.value=null==(a=k.dataSource)?void 0:a.planList.findIndex((e=>e.planCode===S.value))},M=n(!1),G=()=>{M.value=!0},$=()=>{de({fileType:"pdf",fileUri:D.value})},Q=e=>{S.value=_.value[e.name].planCode};return l([()=>S.value,()=>M.value],(()=>{s((()=>{(()=>{var e,a;const t=((null==(e=document.querySelector(".guarantee-popup .extinfo-info-list"))?void 0:e.clientHeight)||0)+1,n=t+((null==(a=document.querySelector(".guarantee-popup .custom-plan-tab"))?void 0:a.clientHeight)||0)+(t?5:0);V.value=`calc( 100% - ${n}px )`})()}))})),(a,t)=>{var n,l;const r=o("ProCell"),i=o("ProTab"),s=o("ProPopup"),L=u("dompurify-html");return d(),c(p,null,[v("div",ge,[v("div",{class:"header"},[Pe,v("span",{onClick:G},"查看详情")]),e.isMultiplePlan?(d(),c(p,{key:0},[m(R).length>0?(d(),c("div",xe,[(d(!0),c(p,null,f(m(R),(e=>(d(),c("div",{key:e.planCode,class:y("picture-payment-item"),onClick:a=>z(e.planCode)},[S.value==e.planCode?(d(),c("img",{key:0,src:e.selectedPic},null,8,Ae)):(d(),c("img",{key:1,src:e.unSelectedPic},null,8,Ce))],8,be)))),128))])):(d(),c("div",Le,[(d(!0),c(p,null,f(_.value,((e,a)=>(d(),c("div",{key:`${e.planCode}_${a}`,class:y(`plan-list-item ${e.planCode===S.value?"plan-list-item-active":""} ${2===_.value.length?"paln-list-item-half":""}`),onClick:a=>z(e.planCode)},[v("span",null,h(e.planName),1)],10,ke)))),128))]))],64)):I("",!0),(d(!0),c(p,null,f(m(U),((e,a)=>(d(),O(r,{key:a,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),m(H)?(d(),c("div",{key:1,class:"show-more",onClick:B},[g(h(m(j)?"收起":"查看更多")+" ",1),P(x,{name:"arrow-down-dobule",class:y(["icon",{showMore:m(j)}])},null,8,["class"])])):I("",!0),m(N)?(d(),c("div",Ve,[v("span",null,h(`${(null==(n=F.value)?void 0:n.paymentFrequencyValue)||""}${(null==(l=F.value)?void 0:l.premiumUnit)||""}`),1),m(D)?(d(),c("span",{key:0,onClick:$},"查看保费")):I("",!0)])):I("",!0)]),P(b),P(s,{show:M.value,"onUpdate:show":t[1]||(t[1]=e=>M.value=e),title:"保障详情",class:"guarantee-popup"},{default:A((()=>[E.value&&E.value.length>0?(d(),c("div",_e,[v("div",Se,[(d(!0),c(p,null,f(E.value,((e,a)=>(d(),O(r,{key:a,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),P(b)])):I("",!0),e.isMultiplePlan?(d(),O(i,{key:1,active:w.value,"onUpdate:active":t[0]||(t[0]=e=>w.value=e),list:_.value.map(((e,a)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:Q},null,8,["active","list"])):I("",!0),v("div",we,[(d(!0),c(p,null,f(T.value,((e,a)=>(d(),c("div",{key:a,class:"guarantee-item"},[P(r,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),C(v("div",Te,null,512),[[L,e.content]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-91992bc8"]]);const Fe={class:"spec"},Re={key:1,class:"spec"};var De=e(a({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:a}){const t=e,l=V((()=>_((()=>import("./index-a6c82b33.js").then((function(e){return e.bz}))),["static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),i=V((()=>_((()=>import("./index-ab0400b9.js")),["static/js/index-ab0400b9.js","static/css/index-f22f2764.css","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),s=V((()=>_((()=>import("./index-a6c82b33.js").then((function(e){return e.bx}))),["static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),u=V((()=>_((()=>import("./index-04f9c12d.js")),["static/js/index-04f9c12d.js","static/css/index-7b3feb06.css","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),y=V((()=>_((()=>import("./index-335a1a34.js")),["static/js/index-335a1a34.js","static/css/index-bfbfdd15.css","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),h=n(),g=n([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),x=r((()=>{var e,a,n,l;return(null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.spec)&&(null==(l=null==(n=t.detail)?void 0:n.tenantProductInsureVO)?void 0:l.spec.length)>0})),b=r((()=>{var e,a,n,l,r,i,s,o,u,d,c,v,p,m;const f=null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO.settlementProcessType;return!!(f===ee.WORD&&(null==(r=null==(l=null==(n=t.detail)?void 0:n.tenantProductInsureVO)?void 0:l.settlementProcessVO)?void 0:r.settlementProcessList)&&(null==(o=null==(s=null==(i=t.detail)?void 0:i.tenantProductInsureVO)?void 0:s.settlementProcessVO)?void 0:o.settlementProcessList.length)>0||f===ee.IMAGE&&(null==(c=null==(d=null==(u=t.detail)?void 0:u.tenantProductInsureVO)?void 0:d.settlementProcessVO)?void 0:c.settlementProcessPicList)&&(null==(m=null==(p=null==(v=t.detail)?void 0:v.tenantProductInsureVO)?void 0:p.settlementProcessVO)?void 0:m.settlementProcessPicList.length)>0)})),C=r((()=>{var e,a,n,l;return(null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.questionList)&&(null==(l=null==(n=t.detail)?void 0:n.tenantProductInsureVO)?void 0:l.questionList.length)>0})),L=r((()=>{let e=[...g.value];return x.value||(e=e.filter((e=>"tab1"!==e.slotName))),b.value||C.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>{var e;return null==(e=h.value)?void 0:e.handleClickTab}}),(e,a)=>{const n=o("van-image"),r=o("ProSvg");return d(),O(m(l),{ref_key:"scrollRef",ref:h,class:"tabs",list:m(L),sticky:"",scrollspy:""},S({tab3:A((()=>[T(e.$slots,"form",{},void 0,!0)])),_:2},[m(x)?{name:"tab1",fn:A((()=>{var e,a;return[v("div",Fe,[(d(!0),c(p,null,f((null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.spec)||[],((e,a)=>(d(),O(w,{key:a},{fallback:A((()=>[P(r,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>[(d(),O(n,{key:a,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),P(m(s))])]}))}:void 0,m(b)||m(C)?{name:"tab2",fn:A((()=>{var e,a;return[m(b)?(d(),c(p,{key:0},[(null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO.settlementProcessType)===m(ee).WORD?(d(),O(m(u),{key:0,title:"理赔说明"},{default:A((()=>{var e,a,n;return[P(m(i),{list:null==(n=null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:n.settlementProcessList},null,8,["list"])]})),_:1})):(d(),c("div",Re,[(d(),O(w,null,{fallback:A((()=>[P(r,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var e,a,l;return[(d(!0),c(p,null,f((null==(l=null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:l.settlementProcessPicList)||[],((e,a)=>(d(),O(n,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),P(m(s))],64)):I("",!0),m(C)?(d(),c(p,{key:1},[P(m(u),{title:"常见问题"},{default:A((()=>{var e,a;return[P(m(y),{list:null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.questionList},null,8,["list"])]})),_:1}),P(m(s))],64)):I("",!0)]}))}:void 0]),1032,["list"])}}}),[["__scopeId","data-v-6dc907f2"]]);const Ne=e=>(L("data-v-6c67b65f"),e=e(),k(),e),je={key:0},qe=[Ne((()=>v("div",{class:"__skeleton_short_content__"},[v("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[v("div",{class:"page-internet-product-detail"},[v("div",{class:"info"},[v("div",{class:"van-image banner",style:{width:"375px",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[v("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1672370686&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=9cXeLDrownXrYpVvPikShh7u2Fw%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),v("div")]),v("div",{class:"base-insurance-guarantee guarantee-list"},[v("div",{class:"header"},[v("span",null,[v("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"保障计划")]),v("span",null,[v("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"查看详情")])]),v("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[v("div",{class:"cell-container"},[v("div",{class:"left-part large"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"一般医疗保险金")]),v("div",{class:"divider"}),v("div",{class:"right-part"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高300万")])])]),v("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[v("div",{class:"cell-container"},[v("div",{class:"left-part large"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"重大疾病医疗保险金")]),v("div",{class:"divider"}),v("div",{class:"right-part"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),v("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[v("div",{class:"cell-container"},[v("div",{class:"left-part large"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤质子重离子医疗")]),v("div",{class:"divider"}),v("div",{class:"right-part"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),v("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[v("div",{class:"cell-container"},[v("div",{class:"left-part large"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤院外特定药品费用医疗")]),v("div",{class:"divider"}),v("div",{class:"right-part"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),v("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[v("div",{class:"cell-container"},[v("div",{class:"left-part large"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤特定器械耗材费用医疗责任 （适用于女性被保险人）")]),v("div",{class:"divider"}),v("div",{class:"right-part"},[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高100万")])])]),v("div",{class:"show-more"},[v("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"查看更多 "),v("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[v("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),v("div",{class:"feerate-view sk-border"},[v("span",null,[v("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00元/年起")])])]),v("div",{class:"com-divider"}),v("div",{class:"tabs",sticky:"",scrollspy:""},[v("div",null,[v("div",{class:"van-sticky"},[v("div",{class:"van-tabs"},[v("div",{id:"tab-list",class:"tab-list"},[v("a",{class:"tab-title active",title:"产品亮点"},[v("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"产品亮点")]),v("a",{class:"tab-title",title:"理赔说明"},[v("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"理赔说明")]),v("a",{class:"tab-title",title:"我要投保"},[v("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"我要投保")])])])])]),v("div",{class:"tab-content"},[v("div",{id:"tab1"},[v("div",{class:"spec"},[v("div",{class:"van-image detail-img",style:{width:"100%"}},[v("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)))],He={class:"page-internet-product-detail"},Be={class:"info"},Ue={class:"custom-page-form"},ze=Ne((()=>v("div",{class:"form-title"},"请填写投保信息",-1))),Me={key:0,class:"footer-area"},Ge=Ne((()=>v("span",null,"分享",-1))),$e={class:"price"},Qe={key:0},Ye=g(h("立即投保")),We=Ne((()=>v("div",{id:"xinaoDialog"},null,-1)));var Xe=e(a({setup(e){var a,t;const i=E(),u=V((()=>_((()=>import("./index-d5a69dea.js")),["static/js/index-d5a69dea.js","static/css/index-ea588f10.css","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js","static/js/theme-65292714.js","static/js/index-f9826df7.js","static/css/index-2dbcd337.css","static/js/utils-66560201.js","static/js/infoCollection-cc48b70f.js","static/js/useStorage-7c3f1657.js","static/js/trial-682b5a11.js"]))),f=V((()=>_((()=>import("./index-1fb6e1c8.js")),["static/js/index-1fb6e1c8.js","static/css/index-c743ae40.css","static/js/theme-65292714.js","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),y=V((()=>_((()=>import("./index-02853122.js")),["static/js/index-02853122.js","static/css/index-dff4ebf8.css","static/js/infoCollection-cc48b70f.js","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js","static/js/useDicData-89238568.js","static/js/trial-682b5a11.js","static/js/utils-66560201.js","static/js/useStorage-7c3f1657.js"]))),g=V((()=>_((()=>import("./index-f9826df7.js")),["static/js/index-f9826df7.js","static/css/index-2dbcd337.css","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),x=V((()=>_((()=>import("./index-b76eca04.js")),["static/js/index-b76eca04.js","static/css/index-6733e696.css","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js","static/js/infoCollection-cc48b70f.js","static/js/relativeTime-190c9ccf.js","static/js/validator-5a13dc82.js","static/js/useDicData-89238568.js"]))),b=V((()=>_((()=>import("./index-0d83c7d9.js")),["static/js/index-0d83c7d9.js","static/css/index-a14d73ae.css","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),C=V((()=>_((()=>import("./index-63895f8f.js")),["static/js/index-63895f8f.js","static/css/index-607986ff.css","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),L=V((()=>_((()=>import("./index-4c36d741.js")),["static/js/index-4c36d741.js","static/css/index-b9ba3011.css","static/js/index-a6c82b33.js","static/css/index-3be7aaa8.css","static/js/pdfh5-e5c0db2a.js"]))),k=ue();F();const w=R(),{productCode:T="",tenantId:ee,agentCode:de="",agencyCode:ge,saleChannelId:Pe,extraInfo:xe,insurerCode:be,preview:Ae}=w.query;let Ce={};try{Ce=JSON.parse(decodeURIComponent(xe))}catch(ja){}const{openId:Le}=Ce,ke=n(),Ve=n(),_e=n(),Se=n(!1),we=n(),Te=n(),Fe=n(!1),Re=n(!1),Ne=n(0),Xe=n(!1),Je=n({}),Ke=n({}),Ze=n(!0),ea=n(!0),aa=n(!0),ta=n(""),na=n(),la=n(),ra=n(""),ia=n(""),sa=n("");Le&&se({openId:Le},(e=>{Ke.value=e}));const oa="jumpToPage",ua=n({imgUrl:"",desc:"",title:"",link:window.location.href}),da=n({tenantId:ee,agencyId:ge,agentCode:de,orderCategory:1,saleUserId:de,saleChannelId:Pe,venderCode:be,productCode:T,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:"",premium:0,insurancePeriodValue:re.YEAR_1,commencementTime:"",tenantOrderHolder:{extInfo:{hasSocialInsurance:ae.HAS,occupationCodeList:[]}},tenantOrderInsuredList:[{dontFetchDefaultInfo:!1,relationToHolder:te.SELF,extInfo:{hasSocialInsurance:ae.HAS,occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}],tenantOrderProductList:[{tenantId:ee,productCode:(null==(a=we.value)?void 0:a.productCode)||"",planCode:"",productName:(null==(t=we.value)?void 0:t.productName)||"",premium:na.value||0,tenantOrderRiskList:[]}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:Ce,templateId:(null==Ce?void 0:Ce.templateId)||"1",iseeBizNo:""},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),ca=r((()=>!!Ae)),va=r((()=>{var e,a,t,n,l,r;return!!we.value&&!!((null==(a=null==(e=we.value)?void 0:e.tenantProductInsureVO)?void 0:a.planList)&&Array.isArray(null==(n=null==(t=we.value)?void 0:t.tenantProductInsureVO)?void 0:n.planList)&&(null==(r=null==(l=we.value)?void 0:l.tenantProductInsureVO)?void 0:r.planList.length)>0)})),pa=r((()=>{if(Ke.value){const e=[];return Object.keys(Ke.value).forEach((a=>{e.push(...Ke.value[a])})),e}return[]})),ma=r((()=>pa.value.length>0)),fa=r((()=>{var e,a,t;let n={};if((null==(e=Te.value)?void 0:e.productFactor)?n=null==(a=Te.value)?void 0:a.productFactor:da.value.activePlanCode&&(n=(null==(t=Te.value)?void 0:t.planFactor[da.value.activePlanCode])||{}),ma.value&&n[1]){const e=n[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay));e>-1&&(n[1][e].isDisplay=2)}return n})),ya=r((()=>{const e={holder:!1,insured:!1};if(fa.value[1]){fa.value[1].findIndex((e=>"social"===e.code&&e.isDisplay===M.YES))>-1&&(e.holder=!0)}if(fa.value[2]){fa.value[2].findIndex((e=>"social"===e.code&&e.isDisplay===M.YES))>-1&&(e.insured=!0)}return e})),ha=r((()=>{var e;const a=(null==(e=fa.value)?void 0:e[2])||[],t=a.findIndex((e=>"certType"===e.code));if(t>-1){const{attributeValues:e,isDisplay:n}=a[t]||{};if(1===n){const a=JSON.parse(e);if(a.length>1)return!1;if(1===a.length&&"1"!==a[0].code)return!1}return!0}return!1})),Ia=r((()=>{if(fa.value[1]){if(fa.value[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay))>-1)return!0}return!1}));l((()=>va.value),(()=>{var e,a;va.value&&(da.value.activePlanCode=da.value.activePlanCode?da.value.activePlanCode:null==(a=null==(e=we.value)?void 0:e.tenantProductInsureVO)?void 0:a.planList[0].planCode)}),{immediate:!0});const Oa=r((()=>{var e,a,t;return va.value?(null==(a=null==(e=Te.value)?void 0:e.productRelationPlanVOList.find((e=>e.planCode===da.value.activePlanCode)))?void 0:a.productRiskVoList)||[]:(null==(t=Te.value)?void 0:t.productRiskVoList)||[]})),ga=r((()=>{var e;if(!we.value)return{};if(va.value){const a=null==(e=we.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===da.value.activePlanCode));return a||{}}return we.value.tenantProductInsureVO.planInsureVO})),Pa=e=>{da.value.activePlanCode=e},xa=r((()=>{var e,a,t;if((null==(e=Te.value)?void 0:e.productQuestionnaireVOList)&&(null==(a=Te.value)?void 0:a.productQuestionnaireVOList.length)>0){const e=null==(t=Te.value)?void 0:t.productQuestionnaireVOList[0];if(e){const{basicInfo:{questionnaireType:a},questions:t}=e.questionnaireDetailResponseVO||{};return"2"===String(a)?[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:t,attachmentType:"question"}]:[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:t[0].content,attachmentType:ce(String(t[0].textType),t[0].content)}]}}return[]})),ba=n();l([()=>va.value,()=>da.value.activePlanCode,()=>we.value],(()=>{var e,a;let t=null;if(va.value&&we.value){const a=null==(e=we.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===(da.value.activePlanCode||"")));a&&(t=null==a?void 0:a.attachmentVOList)}else we.value&&(t=null==(a=we.value)?void 0:a.tenantProductInsureVO.planInsureVO.attachmentVOList);ba.value=t?Object.keys(t).map((e=>(t[e].forEach((e=>{e.attachmentType=ce(String(e.attachmentType),e.attachmentUri)})),{attachmentName:e,attachmentList:t[e]}))):[]}),{immediate:!0});const Aa=async({mobile:e,type:a},t)=>{var n;if(ke.value){if(ca.value)return void(null==t||t());null==(n=ke.value)||n.validateForm(`${a}_mobile`).then((async()=>{const a=await he(e),{code:n,data:l}=a;"10000"===n&&(null==t||t())}))}},Ca=()=>{Ve.value.handleClickTab()("tab3")},La=e=>{ea.value=!1,Object.assign(da.value.tenantOrderHolder,e),s((()=>{ea.value=!0}))},ka=e=>{ea.value=!1,Object.assign(da.value.tenantOrderInsuredList[0],e),s((()=>{ea.value=!0}))},Va=e=>{Ne.value=e,Re.value=!0},_a=async()=>{try{await Z(((e={},a={},t={})=>{var n;const l={...t},r={tenantId:ee,riskList:(null==(n=l.tenantOrderInsuredList[0])?void 0:n.tenantOrderProductList[0].riskVOList)||[],riskPremium:a,productId:null==e?void 0:e.productBasicInfoVO.id};return l.extInfo.iseeBizNo=ta.value,l.productCode=e.productBasicInfoVO.productCode,l.commencementTime=l.insuranceStartDate,l.expiryDate=l.insuranceEndDate,l.paymentFrequency=l.paymentFrequency||le.SINGLE,l.tenantOrderHolder={...l.tenantOrderHolder,socialFlag:ya.value.holder?l.tenantOrderHolder.extInfo.hasSocialInsurance:null,certType:l.tenantOrderHolder.certType||D.CERT,extInfo:{...l.tenantOrderHolder.extInfo,hasSocialInsurance:ya.value.holder?l.tenantOrderHolder.extInfo.hasSocialInsurance:null}},l.tenantOrderInsuredList=l.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||D.CERT,socialFlag:ya.value.insured?e.socialFlag:null,planCode:da.value.activePlanCode?da.value.activePlanCode:null,extInfo:{...e.extInfo,hasSocialInsurance:ya.value.insured?e.extInfo.hasSocialInsurance:null}}))),l.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:na.value,productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:da.value.activePlanCode?da.value.activePlanCode:null,tenantOrderRiskList:me(r)},l})(Te.value,Je.value,da.value),(async(e,a)=>{a===oa&&(null==e?void 0:e.orderNo)&&await(async e=>{try{const{code:a,data:t}=await J({orderNo:e,tenantId:ee});"10000"===a&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await Z(t))}catch(ja){}})(null==e?void 0:e.orderNo)}))}catch(ja){}},Sa=async(e,a,t,n=!0)=>{var l,r;try{sa.value="保费试算中...";const i=pe(t).map((a=>({...a,paymentFrequency:e.paymentFrequency||le.SINGLE,insurancePeriodValue:e.insurancePeriodValue,coveragePeriod:e.insurancePeriodValue}))),s={tenantId:ee,productCode:null==(l=we.value)?void 0:l.productCode,productId:null==(r=we.value)?void 0:r.id,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,paymentFrequency:e.paymentFrequency||le.SINGLE,holder:{personVO:{...e.tenantOrderHolder,socialFlag:ya.value.holder?e.tenantOrderHolder.extInfo.hasSocialInsurance:null,certType:e.tenantOrderHolder.certType||D.CERT,extInfo:{...e.tenantOrderHolder.extInfo,hasSocialInsurance:ya.value.holder?e.tenantOrderHolder.extInfo.hasSocialInsurance:null}}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:ya.value.insured?e.extInfo.hasSocialInsurance:null,certType:e.certType||D.CERT,extInfo:{...e.extInfo,hasSocialInsurance:ya.value.insured?e.extInfo.hasSocialInsurance:null}},productPlanVOList:[{insurerCode:a.productBasicInfoVO.insurerCode,planCode:da.value.activePlanCode?da.value.activePlanCode:null,riskVOList:i}]})))},{code:o,message:u}=await W(s);if("10000"===o){const{code:e,data:a}=await X(s);if("10000"===e){if(sa.value="",da.value.tenantOrderInsuredList[0].tenantOrderProductList=s.insuredVOList[0].productPlanVOList,na.value=null==a?void 0:a.premium,da.value.premium=a.premium,da.value.orderAmount=a.premium,da.value.orderRealAmount=a.premium,!n){const e={};a.riskPremiumDetailVOList&&a.riskPremiumDetailVOList.length&&a.riskPremiumDetailVOList.forEach((a=>{e[a.riskCode]={premium:a.premium,amount:a.amount}})),Je.value=e,ba.value.length>0?(Ze.value=!1,Va(0)):xa.value.length>0?Fe.value=!0:await _a()}}else sa.value=""}else sa.value="",G(u)}catch(ja){sa.value=""}},wa=async()=>{var e;try{Fe.value=!1,Re.value=!1,ke.value&&(null==(e=ke.value)||e.validateForm().then((async()=>{var e;if(ma.value||!Ia.value)await Sa(da.value,Te.value,Oa.value,!1);else{const a=null==(e=da.value.tenantOrderHolder)?void 0:e.verificationCode;if(!a||!ve(a))return void G({message:"请输入正确的验证码"});const{code:t,data:n}=await Ie(da.value.tenantOrderHolder.mobile,a);"10000"===t&&await Sa(da.value,Te.value,Oa.value,!1)}})).catch((()=>{const e=document.querySelector(".form-title");e&&e.scrollIntoView()})))}catch(a){}},Ta=e=>{"allFalse"===e?(Fe.value=!1,_a()):$.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{Fe.value=!1}))},Ea=()=>{Re.value=!1,Ze.value=!0,xa.value.length<1?_a():Fe.value=!0},Fa=()=>{Fe.value=!1,Re.value=!1,Ze.value=!0};l((()=>da.value.tenantOrderInsuredList[0].relationToHolder),(()=>{ea.value=!1,s((()=>{const{certType:e,extInfo:a}=da.value.tenantOrderInsuredList[0];a&&!a.hasSocialInsurance&&(da.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=ae.HAS),ha.value&&!e&&(da.value.tenantOrderInsuredList[0].certType=D.CERT),ea.value=!0}))}),{deep:!0,immediate:!0});const Ra=()=>{const{name:e,birthday:a,gender:t,certType:n,extInfo:{hasSocialInsurance:l}}=da.value.tenantOrderInsuredList[0];return!!(a&&t&&da.value.paymentFrequency&&e&&fe(e)&&l)},Da=()=>{if(Ra()&&(sa.value="保费试算中..."),ga.value&&ga.value.productPremiumVOList){const e=ga.value.productPremiumVOList.find((e=>e.paymentFrequency===da.value.paymentFrequency));e&&(na.value=null,la.value=e.paymentFrequencyValue?Number(e.paymentFrequencyValue):null,ra.value=e.premiumUnit,ia.value=e.actualPremiumUnit)}};l([()=>ga.value,()=>da.value.activePlanCode,()=>da.value.paymentFrequency],(()=>{Da()}),{deep:!0,immediate:!0}),l([()=>da.value.tenantOrderInsuredList[0].birthday,()=>da.value.tenantOrderInsuredList[0].name,()=>da.value.tenantOrderInsuredList[0].gender,()=>da.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance,()=>da.value.activePlanCode,()=>da.value.paymentFrequency,()=>da.value.insurancePeriodValue],Q((()=>{if(Ra()){if(ca.value)return;Sa(da.value,Te.value,Oa.value)}else Da()}),500)),l((()=>da.value.tenantOrderInsuredList[0]),(e=>{if(N(Ke.value))return null;const a=Ke.value[e.relationToHolder]||[];if(1===a.length)if(ie.SELF!==e.relationToHolder){const{dontFetchDefaultInfo:e,certNo:t,name:n,certType:l,mobile:r}=da.value.tenantOrderInsuredList[0];e||Object.assign(da.value.tenantOrderInsuredList[0],{dontFetchDefaultInfo:!0,certNo:t||a[0].cert[0].certNo,name:n||a[0].cert[0].certName,certType:l||a[0].cert[0].certType||D.CERT,mobile:r||a[0].contact[0].contactNo})}else{const{dontFetchDefaultInfo:e,certNo:t,name:n,certType:l,mobile:r}=da.value.tenantOrderHolder;e||Object.assign(da.value.tenantOrderHolder,{dontFetchDefaultInfo:!0,certNo:t||a[0].cert[0].certNo,name:n||a[0].cert[0].certName,certType:l||a[0].cert[0].certType||D.CERT,mobile:r||a[0].contact[0].contactNo})}return!1}),{immediate:!0,deep:!0});const Na=async()=>{await K({productCode:T,withInsureInfo:!0,tenantId:ee}).then((e=>{var a,t,n,l;if("10000"===e.code){we.value={...e.data},document.title=(null==(t=null==(a=e.data)?void 0:a.tenantProductInsureVO)?void 0:t.productName)||"";const{title:r,desc:i,image:s}=(null==(n=e.data)?void 0:n.showConfigVO)||{};l={title:r,desc:i,image:s},ua.value={desc:l.desc||"你好，这里是描述",imgUrl:l.image,title:l.title,link:window.location.href}}})),await Y({productCode:T}).then((e=>{"10000"===e.code&&(Xe.value=!0,Te.value=e.data)})),aa.value=!1};return s((()=>{j(_e,(([{isIntersecting:e}],a)=>{Se.value=!e}))})),q((()=>{var e;const a=Oe.get(ne);if(a){const{tenantOrderHolder:t,tenantOrderInsuredList:n}=a;if(t&&(da.value.tenantOrderHolder={...t,certType:t.certType||D.CERT}),Array(n)&&n[0]){const a=n[0]||{};if(da.value.activePlanCode=a.planCode,a.tenantOrderProductListtenantOrderProductList&&a.tenantOrderProductList[0]&&a.tenantOrderProductList[0].tenantOrderRiskList){const t=null==(e=a.tenantOrderProductList[0].tenantOrderRiskList)?void 0:e.find((e=>"1"===String(e.riskType)));t&&(da.value.paymentFrequency=(null==t?void 0:t.paymentFrequency)?String(null==t?void 0:t.paymentFrequency):le.SINGLE)}}}})),H((()=>{aa.value=!0,Na(),setTimeout((async()=>{ta.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),B((()=>{Oe.remove(ne)})),(e,a)=>{const t=o("ProLazyComponent"),n=o("ProSvg"),l=o("ProShare"),r=o("van-config-provider");return d(),c(p,null,[aa.value?(d(),c("div",je,qe)):(d(),O(r,{key:1,"data-skeleton-root":"SHORT","theme-vars":m(k)},{default:A((()=>{var e,r,s,o,u,f,V;return[v("div",He,[v("div",Be,[P(ye,{"data-skeleton-type":"img",url:null==(r=null==(e=we.value)?void 0:e.tenantProductInsureVO)?void 0:r.banner[0]},null,8,["url"]),(null==(o=null==(s=we.value)?void 0:s.tenantProductInsureVO)?void 0:o.bannerMove)?(d(),O(ye,{key:0,url:null==(f=null==(u=we.value)?void 0:u.tenantProductInsureVO)?void 0:f.bannerMove[0],onClick:Ca},null,8,["url"])):I("",!0),v("div",{ref_key:"observeRef",ref:_e},null,512)]),P(Ee,{"show-service-config":"","data-source":null==(V=we.value)?void 0:V.tenantProductInsureVO,"is-multiple-plan":m(va),"active-plan-code":da.value.activePlanCode,"payment-frequency":da.value.paymentFrequency,"premium-info":{premium:na.value,unit:ra.value,premiumLoadingText:sa.value},onUpdateActivePlan:Pa},null,8,["data-source","is-multiple-plan","active-plan-code","payment-frequency","premium-info"]),P(De,{ref_key:"detailScrollRef",ref:Ve,detail:we.value},{form:A((()=>[v("div",Ue,[ze,Te.value?(d(),O(m(x),{key:0,ref_key:"formRef",ref:ke,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":da.value,"need-desensitize":ea.value,"send-sms-code":Aa,"factor-object":m(fa)||{}},S({_:2},[m(pa).length>1?{name:"holderName",fn:A((()=>[P(m(b),{"user-info":da.value.tenantOrderHolder,data:m(pa),onChange:La},null,8,["user-info","data"])]))}:void 0,m(pa).length>1?{name:"insurerName",fn:A((()=>[P(m(b),{title:"选择被保人","user-info":da.value.tenantOrderInsuredList[0],data:m(pa),onChange:ka},null,8,["user-info","data"])]))}:void 0]),1032,["form-info","need-desensitize","factor-object"])):I("",!0)]),P(m(y),{"form-info":da.value,"insure-detail":Te.value,"config-detail":we.value,"is-multiple-plan":m(va),"premium-info":{premium:na.value,unit:ra.value,minPremiun:la.value,actualUnit:ia.value,premiumLoadingText:sa.value},onUpdateActivePlan:Pa},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","premium-info"])])),_:1},8,["detail"]),P(t,null,{default:A((()=>{var e,a;return[(null==(e=we.value)?void 0:e.tenantProductInsureVO.inscribedContent)?(d(),O(m(C),{key:0,"inscribed-content":null==(a=we.value)?void 0:a.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):I("",!0)]})),_:1}),P(t,null,{default:A((()=>[ba.value&&ba.value.length>0?(d(),O(m(L),{key:0,"attachement-list":ba.value,"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>Va(e))},null,8,["attachement-list"])):I("",!0)])),_:1}),Se.value?(d(),c("div",Me,[m(i)?(d(),O(l,U({key:0},ua.value,{class:"share-btn"}),{default:A((()=>[P(n,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),Ge])),_:1},16)):I("",!0),v("div",$e,[sa.value?(d(),c("span",Qe,h(sa.value),1)):na.value?(d(),c(p,{key:1},[v("span",null,h(m(z)(na.value)),1),v("span",null,h(ia.value||"元"),1)],64)):(d(),c(p,{key:2},[v("span",null,h(la.value),1),v("span",null,h(ra.value),1)],64))]),P(m(g),{disabled:m(ca),shadow:!1,"theme-vars":m(k),class:"right",text:"立即投保",onClick:wa},{default:A((()=>[Ye])),_:1},8,["disabled","theme-vars"])])):I("",!0)]),Xe.value?(d(),O(oe,{key:0,"product-detail":we.value},null,8,["product-detail"])):I("",!0),We]})),_:1},8,["theme-vars"])),P(m(f),{show:Fe.value,"onUpdate:show":a[1]||(a[1]=e=>Fe.value=e),"content-list":m(xa),"active-index":0,onOnConfirmHealth:Ta,onOnCloseHealthByMask:Fa},null,8,["show","content-list"]),Re.value?(d(),O(m(u),{key:2,show:Re.value,"onUpdate:show":a[2]||(a[2]=e=>Re.value=e),"content-list":ba.value,"is-only-view":Ze.value,"active-index":Ne.value,text:Ze.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":Ze.value?0:2,"on-close-file-preview":"",onSubmit:Ea,onOnCloseFilePreviewByMask:Fa},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):I("",!0)],64)}}}),[["__scopeId","data-v-6c67b65f"]]);export{Xe as default};

import{_ as a,d as e,r as s,a as t,G as r,b as l,c as o,e as n,w as d,j as u,t as i,g as c,A as p,a7 as v,aT as m,L as f,f as I,n as _,p as b,ai as h,T as y,B as C,X as N,Y as j}from"./index-3a707308.js";import{s as E,c as P}from"./phoneVerify-00386d31.js";import{c as g}from"./format-12461bbc.js";import{a as S}from"./order-da95e5b4.js";import"./pdfh5-008ca364.js";const T={class:"page-phone-verify"},U=(a=>(N("data-v-29510ea1"),a=a(),j(),a))((()=>u("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息预",-1))),q={class:"phone"},w={class:"input-wrapper"};var x=a(e({__name:"index",setup(a){const e=s(""),N=s(""),j=s(0);let x;const A=t(),{agentCode:D,tenantId:G,templateId:R,productCode:k,insurerCode:L,orderNo:V}=A.query,W=()=>{E(e.value).then((({code:a})=>{"10000"===a&&(j.value=60,x=setInterval((()=>{j.value-=1,j.value<=0&&clearInterval(x)}),1e3))}))},Y=()=>{P(e.value,N.value).then((({code:a,data:e})=>{"10000"===a&&e?(y.success("验证成功"),h("infoPreview",A.query)):y.fail("验证失败")}))};return r((()=>{b({orderNo:V,saleUserId:D,tenantId:G}).then((a=>{var s;const{code:t,data:r}=a;"10000"===t&&([S.PENDING,S.PAYMENT_FAILED,S.UNDER_WRITING_SUCCESS].includes(r.orderStatus)?e.value=null==(s=null==r?void 0:r.tenantOrderHolder)?void 0:s.mobile:h("paymentResult",A.query))}))})),(a,s)=>{const t=C,r=l("ProPageWrap");return o(),n(r,null,{default:d((()=>[u("div",T,[U,u("div",q,i(c(g)(c(e))),1),u("div",w,[p(u("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>v(N)?N.value=a:null),placeholder:"请输入验证码",class:"input"},null,512),[[m,c(N)]]),u("div",{class:f(["btn",{second:c(j)}]),onClick:W},i(c(j)?`${c(j)}s`:"发送验证码"),3)]),I(t,{type:"primary",class:"submit-btn",onClick:Y},{default:d((()=>[_("下一步")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-29510ea1"]]);export{x as default};

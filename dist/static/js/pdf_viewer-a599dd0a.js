import{am as getAugmentedNamespace,al as commonjsGlobal,an as commonjsRequire}from"./vendor-b27da062.js";var pdf={exports:{}},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:__viteBrowserExternal}),require$$4=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(h,d){module.exports=d()})(commonjsGlobal,function(){return(()=>{var __webpack_modules__=[,(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.addLinkAttributes=F,h.deprecated=A,h.getFilenameFromUrl=P,h.getPdfFilenameFromUrl=r,h.getXfaPageViewport=Z,h.isDataScheme=V,h.isPdfFile=U,h.isValidFetchUrl=f,h.loadScript=x,h.StatTimer=h.RenderingCancelledException=h.PixelsPerInch=h.PDFDateString=h.PageViewport=h.LinkTarget=h.DOMSVGFactory=h.DOMStandardFontDataFactory=h.DOMCMapReaderFactory=h.DOMCanvasFactory=void 0;var t=d(2),p=d(5);const y="noopener noreferrer nofollow",T="http://www.w3.org/2000/svg",m={CSS:96,PDF:72,get PDF_TO_CSS_UNITS(){return(0,t.shadow)(this,"PDF_TO_CSS_UNITS",this.CSS/this.PDF)}};h.PixelsPerInch=m;class S extends p.BaseCanvasFactory{constructor({ownerDocument:k=globalThis.document}={}){super();this._document=k}_createCanvas(k,O){const G=this._document.createElement("canvas");return G.width=k,G.height=O,G}}h.DOMCanvasFactory=S;async function u($,k=!1){if(f($,document.baseURI)){const O=await fetch($);if(!O.ok)throw new Error(O.statusText);return k?new Uint8Array(await O.arrayBuffer()):(0,t.stringToBytes)(await O.text())}return new Promise((O,G)=>{const H=new XMLHttpRequest;H.open("GET",$,!0),k&&(H.responseType="arraybuffer"),H.onreadystatechange=()=>{if(H.readyState===XMLHttpRequest.DONE){if(H.status===200||H.status===0){let B;if(k&&H.response?B=new Uint8Array(H.response):!k&&H.responseText&&(B=(0,t.stringToBytes)(H.responseText)),B){O(B);return}}G(new Error(H.statusText))}},H.send(null)})}class g extends p.BaseCMapReaderFactory{_fetchData(k,O){return u(k,this.isCompressed).then(G=>({cMapData:G,compressionType:O}))}}h.DOMCMapReaderFactory=g;class v extends p.BaseStandardFontDataFactory{_fetchData(k){return u(k,!0)}}h.DOMStandardFontDataFactory=v;class E extends p.BaseSVGFactory{_createSVG(k){return document.createElementNS(T,k)}}h.DOMSVGFactory=E;class _{constructor({viewBox:k,scale:O,rotation:G,offsetX:H=0,offsetY:B=0,dontFlip:K=!1}){this.viewBox=k,this.scale=O,this.rotation=G,this.offsetX=H,this.offsetY=B;const w=(k[2]+k[0])/2,o=(k[3]+k[1])/2;let e,s,n,l;switch(G%=360,G<0&&(G+=360),G){case 180:e=-1,s=0,n=0,l=1;break;case 90:e=0,s=1,n=1,l=0;break;case 270:e=0,s=-1,n=-1,l=0;break;case 0:e=1,s=0,n=0,l=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}K&&(n=-n,l=-l);let a,b,C,I;e===0?(a=Math.abs(o-k[1])*O+H,b=Math.abs(w-k[0])*O+B,C=Math.abs(k[3]-k[1])*O,I=Math.abs(k[2]-k[0])*O):(a=Math.abs(w-k[0])*O+H,b=Math.abs(o-k[1])*O+B,C=Math.abs(k[2]-k[0])*O,I=Math.abs(k[3]-k[1])*O),this.transform=[e*O,s*O,n*O,l*O,a-e*O*w-n*O*o,b-s*O*w-l*O*o],this.width=C,this.height=I}clone({scale:k=this.scale,rotation:O=this.rotation,offsetX:G=this.offsetX,offsetY:H=this.offsetY,dontFlip:B=!1}={}){return new _({viewBox:this.viewBox.slice(),scale:k,rotation:O,offsetX:G,offsetY:H,dontFlip:B})}convertToViewportPoint(k,O){return t.Util.applyTransform([k,O],this.transform)}convertToViewportRectangle(k){const O=t.Util.applyTransform([k[0],k[1]],this.transform),G=t.Util.applyTransform([k[2],k[3]],this.transform);return[O[0],O[1],G[0],G[1]]}convertToPdfPoint(k,O){return t.Util.applyInverseTransform([k,O],this.transform)}}h.PageViewport=_;class M extends t.BaseException{constructor(k,O){super(k,"RenderingCancelledException");this.type=O}}h.RenderingCancelledException=M;const c={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};h.LinkTarget=c;function F($,{url:k,target:O,rel:G,enabled:H=!0}={}){(0,t.assert)(k&&typeof k=="string",'addLinkAttributes: A valid "url" parameter must provided.');const B=(0,t.removeNullCharacters)(k);H?$.href=$.title=B:($.href="",$.title=`Disabled: ${B}`,$.onclick=()=>!1);let K="";switch(O){case c.NONE:break;case c.SELF:K="_self";break;case c.BLANK:K="_blank";break;case c.PARENT:K="_parent";break;case c.TOP:K="_top";break}$.target=K,$.rel=typeof G=="string"?G:y}function V($){const k=$.length;let O=0;for(;O<k&&$[O].trim()==="";)O++;return $.substring(O,O+5).toLowerCase()==="data:"}function U($){return typeof $=="string"&&/\.pdf$/i.test($)}function P($){const k=$.indexOf("#"),O=$.indexOf("?"),G=Math.min(k>0?k:$.length,O>0?O:$.length);return $.substring($.lastIndexOf("/",G)+1,G)}function r($,k="document.pdf"){if(typeof $!="string")return k;if(V($))return(0,t.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),k;const O=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,G=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,H=O.exec($);let B=G.exec(H[1])||G.exec(H[2])||G.exec(H[3]);if(B&&(B=B[0],B.includes("%")))try{B=G.exec(decodeURIComponent(B))[0]}catch{}return B||k}class i{constructor(){this.started=Object.create(null),this.times=[]}time(k){k in this.started&&(0,t.warn)(`Timer is already running for ${k}`),this.started[k]=Date.now()}timeEnd(k){k in this.started||(0,t.warn)(`Timer has not been started for ${k}`),this.times.push({name:k,start:this.started[k],end:Date.now()}),delete this.started[k]}toString(){const k=[];let O=0;for(const G of this.times){const H=G.name;H.length>O&&(O=H.length)}for(const G of this.times){const H=G.end-G.start;k.push(`${G.name.padEnd(O)} ${H}ms
`)}return k.join("")}}h.StatTimer=i;function f($,k){try{const{protocol:O}=k?new URL($,k):new URL($);return O==="http:"||O==="https:"}catch{return!1}}function x($,k=!1){return new Promise((O,G)=>{const H=document.createElement("script");H.src=$,H.onload=function(B){k&&H.remove(),O(B)},H.onerror=function(){G(new Error(`Cannot load script at: ${H.src}`))},(document.head||document.documentElement).appendChild(H)})}function A($){console.log("Deprecated API usage: "+$)}let D;class L{static toDateObject(k){if(!k||!(0,t.isString)(k))return null;D||(D=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const O=D.exec(k);if(!O)return null;const G=parseInt(O[1],10);let H=parseInt(O[2],10);H=H>=1&&H<=12?H-1:0;let B=parseInt(O[3],10);B=B>=1&&B<=31?B:1;let K=parseInt(O[4],10);K=K>=0&&K<=23?K:0;let w=parseInt(O[5],10);w=w>=0&&w<=59?w:0;let o=parseInt(O[6],10);o=o>=0&&o<=59?o:0;const e=O[7]||"Z";let s=parseInt(O[8],10);s=s>=0&&s<=23?s:0;let n=parseInt(O[9],10)||0;return n=n>=0&&n<=59?n:0,e==="-"?(K+=s,w+=n):e==="+"&&(K-=s,w-=n),new Date(Date.UTC(G,H,B,K,w,o))}}h.PDFDateString=L;function Z($,{scale:k=1,rotation:O=0}){const{width:G,height:H}=$.attributes.style,B=[0,0,parseInt(G),parseInt(H)];return new _({viewBox:B,scale:k,rotation:O})}},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.arrayByteLength=ie,h.arraysToBytes=se,h.assert=K,h.bytesToString=Y,h.createObjectURL=Me,h.createPromiseCapability=Oe,h.createValidAbsoluteUrl=e,h.escapeString=be,h.getModificationDate=Fe,h.getVerbosityLevel=O,h.info=G,h.isArrayBuffer=we,h.isArrayEqual=Re,h.isAscii=_e,h.isBool=Pe,h.isNum=Ee,h.isSameOrigin=w,h.isString=ke,h.objectFromMap=he,h.objectSize=ne,h.removeNullCharacters=z,h.setVerbosityLevel=k,h.shadow=s,h.string32=ae,h.stringToBytes=J,h.stringToPDFString=ge,h.stringToUTF16BEString=ye,h.stringToUTF8String=ue,h.unreachable=B,h.utf8StringToString=Ce,h.warn=H,h.VerbosityLevel=h.Util=h.UNSUPPORTED_FEATURES=h.UnknownErrorException=h.UnexpectedResponseException=h.TextRenderingMode=h.StreamType=h.RenderingIntentFlag=h.PermissionFlag=h.PasswordResponses=h.PasswordException=h.PageActionEventType=h.OPS=h.MissingPDFException=h.IsLittleEndianCached=h.IsEvalSupportedCached=h.InvalidPDFException=h.ImageKind=h.IDENTITY_MATRIX=h.FormatError=h.FontType=h.FONT_IDENTITY_MATRIX=h.DocumentActionEventType=h.CMapCompressionType=h.BaseException=h.AnnotationType=h.AnnotationStateModelType=h.AnnotationReviewState=h.AnnotationReplyType=h.AnnotationMode=h.AnnotationMarkedState=h.AnnotationFlag=h.AnnotationFieldFlag=h.AnnotationBorderStyleType=h.AnnotationActionEventType=h.AbortException=void 0,d(3);const t=[1,0,0,1,0,0];h.IDENTITY_MATRIX=t;const p=[.001,0,0,.001,0,0];h.FONT_IDENTITY_MATRIX=p;const y={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};h.RenderingIntentFlag=y;const T={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};h.AnnotationMode=T;const m={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};h.PermissionFlag=m;const S={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};h.TextRenderingMode=S;const u={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};h.ImageKind=u;const g={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};h.AnnotationType=g;const v={MARKED:"Marked",REVIEW:"Review"};h.AnnotationStateModelType=v;const E={MARKED:"Marked",UNMARKED:"Unmarked"};h.AnnotationMarkedState=E;const _={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};h.AnnotationReviewState=_;const M={GROUP:"Group",REPLY:"R"};h.AnnotationReplyType=M;const c={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};h.AnnotationFlag=c;const F={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};h.AnnotationFieldFlag=F;const V={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};h.AnnotationBorderStyleType=V;const U={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};h.AnnotationActionEventType=U;const P={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};h.DocumentActionEventType=P;const r={O:"PageOpen",C:"PageClose"};h.PageActionEventType=r;const i={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};h.StreamType=i;const f={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};h.FontType=f;const x={ERRORS:0,WARNINGS:1,INFOS:5};h.VerbosityLevel=x;const A={NONE:0,BINARY:1,STREAM:2};h.CMapCompressionType=A;const D={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};h.OPS=D;const L={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};h.UNSUPPORTED_FEATURES=L;const Z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};h.PasswordResponses=Z;let $=x.WARNINGS;function k(X){Number.isInteger(X)&&($=X)}function O(){return $}function G(X){$>=x.INFOS&&console.log(`Info: ${X}`)}function H(X){$>=x.WARNINGS&&console.log(`Warning: ${X}`)}function B(X){throw new Error(X)}function K(X,j){X||B(j)}function w(X,j){let W;try{if(W=new URL(X),!W.origin||W.origin==="null")return!1}catch{return!1}const te=new URL(j,W);return W.origin===te.origin}function o(X){if(!X)return!1;switch(X.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function e(X,j=null,W=null){if(!X)return null;try{if(W&&typeof X=="string"){if(W.addDefaultProtocol&&X.startsWith("www.")){const re=X.match(/\./g);re&&re.length>=2&&(X=`http://${X}`)}if(W.tryConvertEncoding)try{X=ue(X)}catch{}}const te=j?new URL(X,j):new URL(X);if(o(te))return te}catch{}return null}function s(X,j,W){return Object.defineProperty(X,j,{value:W,enumerable:!0,configurable:!0,writable:!1}),W}const n=function(){function j(W,te){this.constructor===j&&B("Cannot initialize BaseException."),this.message=W,this.name=te}return j.prototype=new Error,j.constructor=j,j}();h.BaseException=n;class l extends n{constructor(j,W){super(j,"PasswordException");this.code=W}}h.PasswordException=l;class a extends n{constructor(j,W){super(j,"UnknownErrorException");this.details=W}}h.UnknownErrorException=a;class b extends n{constructor(j){super(j,"InvalidPDFException")}}h.InvalidPDFException=b;class C extends n{constructor(j){super(j,"MissingPDFException")}}h.MissingPDFException=C;class I extends n{constructor(j,W){super(j,"UnexpectedResponseException");this.status=W}}h.UnexpectedResponseException=I;class N extends n{constructor(j){super(j,"FormatError")}}h.FormatError=N;class R extends n{constructor(j){super(j,"AbortException")}}h.AbortException=R;const q=/\x00/g;function z(X){return typeof X!="string"?(H("The argument for removeNullCharacters must be a string."),X):X.replace(q,"")}function Y(X){K(X!==null&&typeof X=="object"&&X.length!==void 0,"Invalid argument for bytesToString");const j=X.length,W=8192;if(j<W)return String.fromCharCode.apply(null,X);const te=[];for(let re=0;re<j;re+=W){const oe=Math.min(re+W,j),ce=X.subarray(re,oe);te.push(String.fromCharCode.apply(null,ce))}return te.join("")}function J(X){K(typeof X=="string","Invalid argument for stringToBytes");const j=X.length,W=new Uint8Array(j);for(let te=0;te<j;++te)W[te]=X.charCodeAt(te)&255;return W}function ie(X){return X.length!==void 0?X.length:(K(X.byteLength!==void 0,"arrayByteLength - invalid argument."),X.byteLength)}function se(X){const j=X.length;if(j===1&&X[0]instanceof Uint8Array)return X[0];let W=0;for(let oe=0;oe<j;oe++)W+=ie(X[oe]);let te=0;const re=new Uint8Array(W);for(let oe=0;oe<j;oe++){let ce=X[oe];ce instanceof Uint8Array||(typeof ce=="string"?ce=J(ce):ce=new Uint8Array(ce));const Se=ce.byteLength;re.set(ce,te),te+=Se}return re}function ae(X){return String.fromCharCode(X>>24&255,X>>16&255,X>>8&255,X&255)}function ne(X){return Object.keys(X).length}function he(X){const j=Object.create(null);for(const[W,te]of X)j[W]=te;return j}function de(){const X=new Uint8Array(4);return X[0]=1,new Uint32Array(X.buffer,0,1)[0]===1}const ee={get value(){return s(this,"value",de())}};h.IsLittleEndianCached=ee;function le(){try{return new Function(""),!0}catch{return!1}}const me={get value(){return s(this,"value",le())}};h.IsEvalSupportedCached=me;const pe=[...Array(256).keys()].map(X=>X.toString(16).padStart(2,"0"));class fe{static makeHexColor(j,W,te){return`#${pe[j]}${pe[W]}${pe[te]}`}static transform(j,W){return[j[0]*W[0]+j[2]*W[1],j[1]*W[0]+j[3]*W[1],j[0]*W[2]+j[2]*W[3],j[1]*W[2]+j[3]*W[3],j[0]*W[4]+j[2]*W[5]+j[4],j[1]*W[4]+j[3]*W[5]+j[5]]}static applyTransform(j,W){const te=j[0]*W[0]+j[1]*W[2]+W[4],re=j[0]*W[1]+j[1]*W[3]+W[5];return[te,re]}static applyInverseTransform(j,W){const te=W[0]*W[3]-W[1]*W[2],re=(j[0]*W[3]-j[1]*W[2]+W[2]*W[5]-W[4]*W[3])/te,oe=(-j[0]*W[1]+j[1]*W[0]+W[4]*W[1]-W[5]*W[0])/te;return[re,oe]}static getAxialAlignedBoundingBox(j,W){const te=fe.applyTransform(j,W),re=fe.applyTransform(j.slice(2,4),W),oe=fe.applyTransform([j[0],j[3]],W),ce=fe.applyTransform([j[2],j[1]],W);return[Math.min(te[0],re[0],oe[0],ce[0]),Math.min(te[1],re[1],oe[1],ce[1]),Math.max(te[0],re[0],oe[0],ce[0]),Math.max(te[1],re[1],oe[1],ce[1])]}static inverseTransform(j){const W=j[0]*j[3]-j[1]*j[2];return[j[3]/W,-j[1]/W,-j[2]/W,j[0]/W,(j[2]*j[5]-j[4]*j[3])/W,(j[4]*j[1]-j[5]*j[0])/W]}static apply3dTransform(j,W){return[j[0]*W[0]+j[1]*W[1]+j[2]*W[2],j[3]*W[0]+j[4]*W[1]+j[5]*W[2],j[6]*W[0]+j[7]*W[1]+j[8]*W[2]]}static singularValueDecompose2dScale(j){const W=[j[0],j[2],j[1],j[3]],te=j[0]*W[0]+j[1]*W[2],re=j[0]*W[1]+j[1]*W[3],oe=j[2]*W[0]+j[3]*W[2],ce=j[2]*W[1]+j[3]*W[3],Se=(te+ce)/2,xe=Math.sqrt((te+ce)**2-4*(te*ce-oe*re))/2,ve=Se+xe||1,Te=Se-xe||1;return[Math.sqrt(ve),Math.sqrt(Te)]}static normalizeRect(j){const W=j.slice(0);return j[0]>j[2]&&(W[0]=j[2],W[2]=j[0]),j[1]>j[3]&&(W[1]=j[3],W[3]=j[1]),W}static intersect(j,W){function te(Se,xe){return Se-xe}const re=[j[0],j[2],W[0],W[2]].sort(te),oe=[j[1],j[3],W[1],W[3]].sort(te),ce=[];if(j=fe.normalizeRect(j),W=fe.normalizeRect(W),re[0]===j[0]&&re[1]===W[0]||re[0]===W[0]&&re[1]===j[0])ce[0]=re[1],ce[2]=re[2];else return null;if(oe[0]===j[1]&&oe[1]===W[1]||oe[0]===W[1]&&oe[1]===j[1])ce[1]=oe[1],ce[3]=oe[2];else return null;return ce}}h.Util=fe;const Ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ge(X){const j=X.length,W=[];if(X[0]==="\xFE"&&X[1]==="\xFF")for(let te=2;te<j;te+=2)W.push(String.fromCharCode(X.charCodeAt(te)<<8|X.charCodeAt(te+1)));else if(X[0]==="\xFF"&&X[1]==="\xFE")for(let te=2;te<j;te+=2)W.push(String.fromCharCode(X.charCodeAt(te+1)<<8|X.charCodeAt(te)));else for(let te=0;te<j;++te){const re=Ae[X.charCodeAt(te)];W.push(re?String.fromCharCode(re):X.charAt(te))}return W.join("")}function be(X){return X.replace(/([()\\\n\r])/g,j=>j===`
`?"\\n":j==="\r"?"\\r":`\\${j}`)}function _e(X){return/^[\x00-\x7F]*$/.test(X)}function ye(X){const j=["\xFE\xFF"];for(let W=0,te=X.length;W<te;W++){const re=X.charCodeAt(W);j.push(String.fromCharCode(re>>8&255),String.fromCharCode(re&255))}return j.join("")}function ue(X){return decodeURIComponent(escape(X))}function Ce(X){return unescape(encodeURIComponent(X))}function Pe(X){return typeof X=="boolean"}function Ee(X){return typeof X=="number"}function ke(X){return typeof X=="string"}function we(X){return typeof X=="object"&&X!==null&&X.byteLength!==void 0}function Re(X,j){if(X.length!==j.length)return!1;for(let W=0,te=X.length;W<te;W++)if(X[W]!==j[W])return!1;return!0}function Fe(X=new Date){return[X.getUTCFullYear().toString(),(X.getUTCMonth()+1).toString().padStart(2,"0"),X.getUTCDate().toString().padStart(2,"0"),X.getUTCHours().toString().padStart(2,"0"),X.getUTCMinutes().toString().padStart(2,"0"),X.getUTCSeconds().toString().padStart(2,"0")].join("")}function Oe(){const X=Object.create(null);let j=!1;return Object.defineProperty(X,"settled",{get(){return j}}),X.promise=new Promise(function(W,te){X.resolve=function(re){j=!0,W(re)},X.reject=function(re){j=!0,te(re)}}),X}function Me(X,j="",W=!1){if(URL.createObjectURL&&!W)return URL.createObjectURL(new Blob([X],{type:j}));const te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let re=`data:${j};base64,`;for(let oe=0,ce=X.length;oe<ce;oe+=3){const Se=X[oe]&255,xe=X[oe+1]&255,ve=X[oe+2]&255,Te=Se>>2,Le=(Se&3)<<4|xe>>4,De=oe+1<ce?(xe&15)<<2|ve>>6:64,Ie=oe+2<ce?ve&63:64;re+=te[Te]+te[Le]+te[De]+te[Ie]}return re}},(Q,h,d)=>{d(4)},(Q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.isNodeJS=void 0;const d=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");h.isNodeJS=d},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BaseSVGFactory=h.BaseStandardFontDataFactory=h.BaseCMapReaderFactory=h.BaseCanvasFactory=void 0;var t=d(2);class p{constructor(){this.constructor===p&&(0,t.unreachable)("Cannot initialize BaseCanvasFactory.")}create(u,g){if(u<=0||g<=0)throw new Error("Invalid canvas size");const v=this._createCanvas(u,g);return{canvas:v,context:v.getContext("2d")}}reset(u,g,v){if(!u.canvas)throw new Error("Canvas is not specified");if(g<=0||v<=0)throw new Error("Invalid canvas size");u.canvas.width=g,u.canvas.height=v}destroy(u){if(!u.canvas)throw new Error("Canvas is not specified");u.canvas.width=0,u.canvas.height=0,u.canvas=null,u.context=null}_createCanvas(u,g){(0,t.unreachable)("Abstract method `_createCanvas` called.")}}h.BaseCanvasFactory=p;class y{constructor({baseUrl:u=null,isCompressed:g=!1}){this.constructor===y&&(0,t.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=u,this.isCompressed=g}async fetch({name:u}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!u)throw new Error("CMap name must be specified.");const g=this.baseUrl+u+(this.isCompressed?".bcmap":""),v=this.isCompressed?t.CMapCompressionType.BINARY:t.CMapCompressionType.NONE;return this._fetchData(g,v).catch(E=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${g}`)})}_fetchData(u,g){(0,t.unreachable)("Abstract method `_fetchData` called.")}}h.BaseCMapReaderFactory=y;class T{constructor({baseUrl:u=null}){this.constructor===T&&(0,t.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=u}async fetch({filename:u}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!u)throw new Error("Font filename must be specified.");const g=`${this.baseUrl}${u}`;return this._fetchData(g).catch(v=>{throw new Error(`Unable to load font data at: ${g}`)})}_fetchData(u){(0,t.unreachable)("Abstract method `_fetchData` called.")}}h.BaseStandardFontDataFactory=T;class m{constructor(){this.constructor===m&&(0,t.unreachable)("Cannot initialize BaseSVGFactory.")}create(u,g){if(u<=0||g<=0)throw new Error("Invalid SVG dimensions");const v=this._createSVG("svg:svg");return v.setAttribute("version","1.1"),v.setAttribute("width",`${u}px`),v.setAttribute("height",`${g}px`),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox",`0 0 ${u} ${g}`),v}createElement(u){if(typeof u!="string")throw new Error("Invalid SVG element type");return this._createSVG(u)}_createSVG(u){(0,t.unreachable)("Abstract method `_createSVG` called.")}}h.BaseSVGFactory=m},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var Q;Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCMapReaderFactory=exports.DefaultCanvasFactory=exports.build=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(7),_node_utils=__w_pdfjs_require__(8),_annotation_storage=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(15),_transport_stream=__w_pdfjs_require__(16),_xfa_text=__w_pdfjs_require__(17);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(h){createPDFNetworkStream=h}function getDocument(h){const d=new PDFDocumentLoadingTask;let t;if(typeof h=="string"||h instanceof URL)t={url:h};else if((0,_util.isArrayBuffer)(h))t={data:h};else if(h instanceof PDFDataRangeTransport)t={range:h};else{if(typeof h!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!h.url&&!h.data&&!h.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=h}const p=Object.create(null);let y=null,T=null;for(const S in t){const u=t[S];switch(S){case"url":if(typeof window!="undefined")try{p[S]=new URL(u,window.location).href;continue}catch(g){(0,_util.warn)(`Cannot create valid URL: "${g}".`)}else if(typeof u=="string"||u instanceof URL){p[S]=u.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":y=u;continue;case"worker":T=u;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&u instanceof Buffer)p[S]=new Uint8Array(u);else{if(u instanceof Uint8Array)break;if(typeof u=="string")p[S]=(0,_util.stringToBytes)(u);else if(typeof u=="object"&&u!==null&&!isNaN(u.length))p[S]=new Uint8Array(u);else if((0,_util.isArrayBuffer)(u))p[S]=new Uint8Array(u);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}p[S]=u}if(p.rangeChunkSize=p.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,p.CMapReaderFactory=p.CMapReaderFactory||DefaultCMapReaderFactory,p.StandardFontDataFactory=p.StandardFontDataFactory||DefaultStandardFontDataFactory,p.ignoreErrors=p.stopAtErrors!==!0,p.fontExtraProperties=p.fontExtraProperties===!0,p.pdfBug=p.pdfBug===!0,p.enableXfa=p.enableXfa===!0,(typeof p.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(p.docBaseUrl))&&(p.docBaseUrl=null),Number.isInteger(p.maxImageSize)||(p.maxImageSize=-1),typeof p.useWorkerFetch!="boolean"&&(p.useWorkerFetch=p.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&p.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof p.isEvalSupported!="boolean"&&(p.isEvalSupported=!0),typeof p.disableFontFace!="boolean"&&(p.disableFontFace=_is_node.isNodeJS),typeof p.useSystemFonts!="boolean"&&(p.useSystemFonts=!_is_node.isNodeJS&&!p.disableFontFace),typeof p.ownerDocument=="undefined"&&(p.ownerDocument=globalThis.document),typeof p.disableRange!="boolean"&&(p.disableRange=!1),typeof p.disableStream!="boolean"&&(p.disableStream=!1),typeof p.disableAutoFetch!="boolean"&&(p.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(p.verbosity),!T){const S={verbosity:p.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};T=S.port?_PDFWorker.fromPort(S):new _PDFWorker(S),d._worker=T}const m=d.docId;return T.promise.then(function(){if(d.destroyed)throw new Error("Loading aborted");const S=_fetchDocument(T,p,y,m),u=new Promise(function(g){let v;y?v=new _transport_stream.PDFDataTransportStream({length:p.length,initialData:p.initialData,progressiveDone:p.progressiveDone,contentDispositionFilename:p.contentDispositionFilename,disableRange:p.disableRange,disableStream:p.disableStream},y):p.data||(v=createPDFNetworkStream({url:p.url,length:p.length,httpHeaders:p.httpHeaders,withCredentials:p.withCredentials,rangeChunkSize:p.rangeChunkSize,disableRange:p.disableRange,disableStream:p.disableStream})),g(v)});return Promise.all([S,u]).then(function([g,v]){if(d.destroyed)throw new Error("Loading aborted");const E=new _message_handler.MessageHandler(m,g,T.port);E.postMessageTransfers=T.postMessageTransfers;const _=new WorkerTransport(E,d,v,p);d._transport=_,E.send("Ready",null)})}).catch(d._capability.reject),d}async function _fetchDocument(h,d,t,p){if(h.destroyed)throw new Error("Worker was destroyed");t&&(d.length=t.length,d.initialData=t.initialData,d.progressiveDone=t.progressiveDone,d.contentDispositionFilename=t.contentDispositionFilename);const y=await h.messageHandler.sendWithPromise("GetDocRequest",{docId:p,apiVersion:"2.11.338",source:{data:d.data,url:d.url,password:d.password,disableAutoFetch:d.disableAutoFetch,rangeChunkSize:d.rangeChunkSize,length:d.length},maxImageSize:d.maxImageSize,disableFontFace:d.disableFontFace,postMessageTransfers:h.postMessageTransfers,docBaseUrl:d.docBaseUrl,ignoreErrors:d.ignoreErrors,isEvalSupported:d.isEvalSupported,fontExtraProperties:d.fontExtraProperties,enableXfa:d.enableXfa,useSystemFonts:d.useSystemFonts,cMapUrl:d.useWorkerFetch?d.cMapUrl:null,standardFontDataUrl:d.useWorkerFetch?d.standardFontDataUrl:null});if(h.destroyed)throw new Error("Worker was destroyed");return y}class PDFDocumentLoadingTask{static get idCounters(){return(0,_util.shadow)(this,"idCounters",{doc:0})}constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.idCounters.doc++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var d;this.destroyed=!0,await((d=this._transport)==null?void 0:d.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(d,t,p=!1,y=null){this.length=d,this.initialData=t,this.progressiveDone=p,this.contentDispositionFilename=y,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(d){this._rangeListeners.push(d)}addProgressListener(d){this._progressListeners.push(d)}addProgressiveReadListener(d){this._progressiveReadListeners.push(d)}addProgressiveDoneListener(d){this._progressiveDoneListeners.push(d)}onDataRange(d,t){for(const p of this._rangeListeners)p(d,t)}onDataProgress(d,t){this._readyCapability.promise.then(()=>{for(const p of this._progressListeners)p(d,t)})}onDataProgressiveRead(d){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(d)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const d of this._progressiveDoneListeners)d()})}transportReady(){this._readyCapability.resolve()}requestDataRange(d,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(d,t){this._pdfInfo=d,this._transport=t,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(d){return this._transport.getPage(d)}getPageIndex(d){return this._transport.getPageIndex(d)}getDestinations(){return this._transport.getDestinations()}getDestination(d){return this._transport.getDestination(d)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(d=!1){return this._transport.startCleanup(d||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(d,t,p,y,T=!1){this._pageIndex=d,this._pageInfo=t,this._ownerDocument=y,this._transport=p,this._stats=T?new _display_utils.StatTimer:null,this._pdfBug=T,this.commonObjs=p.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:d,rotation:t=this.rotate,offsetX:p=0,offsetY:y=0,dontFlip:T=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:d,rotation:t,offsetX:p,offsetY:y,dontFlip:T})}getAnnotations({intent:d="display"}={}){const t=this._transport.getRenderingIntent(d);let p=this._annotationPromises.get(t.cacheKey);return p||(p=this._transport.getAnnotations(this._pageIndex,t.renderingIntent),this._annotationPromises.set(t.cacheKey,p),p=p.then(y=>{for(const T of y)T.titleObj!==void 0&&Object.defineProperty(T,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),T.titleObj.str}}),T.contentsObj!==void 0&&Object.defineProperty(T,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),T.contentsObj.str}});return y})),p}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var d;return((d=this._transport._htmlForXfa)==null?void 0:d.children[this._pageIndex])||null}render({canvasContext:d,viewport:t,intent:p="display",annotationMode:y=_util.AnnotationMode.ENABLE,transform:T=null,imageLayer:m=null,canvasFactory:S=null,background:u=null,optionalContentConfigPromise:g=null}){var U,P;((U=arguments[0])==null?void 0:U.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&y===_util.AnnotationMode.ENABLE&&(y=_util.AnnotationMode.ENABLE_FORMS)),((P=arguments[0])==null?void 0:P.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&y===_util.AnnotationMode.ENABLE&&(y=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const v=this._transport.getRenderingIntent(p,y);this.pendingCleanup=!1,g||(g=this._transport.getOptionalContentConfig());let E=this._intentStates.get(v.cacheKey);E||(E=Object.create(null),this._intentStates.set(v.cacheKey,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const _=S||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),M=!!(v.renderingIntent&_util.RenderingIntentFlag.PRINT);E.displayReadyCapability||(E.displayReadyCapability=(0,_util.createPromiseCapability)(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(v));const c=r=>{E.renderTasks.delete(F),(this.cleanupAfterRender||M)&&(this.pendingCleanup=!0),this._tryCleanup(),r?(F.capability.reject(r),this._abortOperatorList({intentState:E,reason:r instanceof Error?r:new Error(r)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},F=new InternalRenderTask({callback:c,params:{canvasContext:d,viewport:t,transform:T,imageLayer:m,background:u},objs:this.objs,commonObjs:this.commonObjs,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:_,useRequestAnimationFrame:!M,pdfBug:this._pdfBug});(E.renderTasks||(E.renderTasks=new Set)).add(F);const V=F.task;return Promise.all([E.displayReadyCapability.promise,g]).then(([r,i])=>{if(this.pendingCleanup){c();return}this._stats&&this._stats.time("Rendering"),F.initializeGraphics({transparency:r,optionalContentConfig:i}),F.operatorListChanged()}).catch(c),V}getOperatorList({intent:d="display",annotationMode:t=_util.AnnotationMode.ENABLE}={}){function p(){T.operatorList.lastChunk&&(T.opListReadCapability.resolve(T.operatorList),T.renderTasks.delete(m))}const y=this._transport.getRenderingIntent(d,t,!0);let T=this._intentStates.get(y.cacheKey);T||(T=Object.create(null),this._intentStates.set(y.cacheKey,T));let m;return T.opListReadCapability||(m=Object.create(null),m.operatorListChanged=p,T.opListReadCapability=(0,_util.createPromiseCapability)(),(T.renderTasks||(T.renderTasks=new Set)).add(m),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(y)),T.opListReadCapability.promise}streamTextContent({normalizeWhitespace:d=!1,disableCombineTextItems:t=!1,includeMarkedContent:p=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:d===!0,combineTextItems:t!==!0,includeMarkedContent:p===!0},{highWaterMark:100,size(T){return T.items.length}})}getTextContent(d={}){if(this._transport._htmlForXfa)return this.getXfa().then(p=>_xfa_text.XfaText.textContent(p));const t=this.streamTextContent(d);return new Promise(function(p,y){function T(){m.read().then(function({value:u,done:g}){if(g){p(S);return}Object.assign(S.styles,u.styles),S.items.push(...u.items),T()},y)}const m=t.getReader(),S={items:[],styles:Object.create(null)};T()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const d=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const p of t.renderTasks)d.push(p.completed),p.cancel();return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(d)}cleanup(d=!1){return this.pendingCleanup=!0,this._tryCleanup(d)}_tryCleanup(d=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:p}of this._intentStates.values())if(t.size>0||!p.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,d&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(d,t){const p=this._intentStates.get(t);!p||(this._stats&&this._stats.timeEnd("Page Request"),p.displayReadyCapability&&p.displayReadyCapability.resolve(d))}_renderPageChunk(d,t){for(let p=0,y=d.length;p<y;p++)t.operatorList.fnArray.push(d.fnArray[p]),t.operatorList.argsArray.push(d.argsArray[p]);t.operatorList.lastChunk=d.lastChunk;for(const p of t.renderTasks)p.operatorListChanged();d.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:d,cacheKey:t}){const y=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:d,cacheKey:t,annotationStorage:d&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),T=this._intentStates.get(t);T.streamReader=y;const m=()=>{y.read().then(({value:S,done:u})=>{if(u){T.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(S,T),m())},S=>{if(T.streamReader=null,!this._transport.destroyed){if(T.operatorList){T.operatorList.lastChunk=!0;for(const u of T.renderTasks)u.operatorListChanged();this._tryCleanup()}if(T.displayReadyCapability)T.displayReadyCapability.reject(S);else if(T.opListReadCapability)T.opListReadCapability.reject(S);else throw S}})};m()}_abortOperatorList({intentState:d,reason:t,force:p=!1}){if(!!d.streamReader){if(!p){if(d.renderTasks.size>0)return;if(t instanceof _display_utils.RenderingCancelledException){d.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:d,reason:t,force:!0}),d.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(d.streamReader.cancel(new _util.AbortException(t.message)).catch(()=>{}),d.streamReader=null,!this._transport.destroyed){for(const[y,T]of this._intentStates)if(T===d){this._intentStates.delete(y);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve(void 0)}postMessage(d,t){function p(m){var g;if(typeof m=="function"||typeof m=="symbol"||m instanceof URL)throw new Error(`LoopbackPort.postMessage - cannot clone: ${m==null?void 0:m.toString()}`);if(typeof m!="object"||m===null)return m;if(y.has(m))return y.get(m);let S,u;if((S=m.buffer)&&(0,_util.isArrayBuffer)(S))return(t==null?void 0:t.includes(S))?u=new m.constructor(S,m.byteOffset,m.byteLength):u=new m.constructor(m),y.set(m,u),u;if(m instanceof Map){u=new Map,y.set(m,u);for(const[v,E]of m)u.set(v,p(E));return u}if(m instanceof Set){u=new Set,y.set(m,u);for(const v of m)u.add(p(v));return u}u=Array.isArray(m)?[]:Object.create(null),y.set(m,u);for(const v in m){let E,_=m;for(;!(E=Object.getOwnPropertyDescriptor(_,v));)_=Object.getPrototypeOf(_);typeof E.value!="undefined"&&(typeof E.value=="function"&&!((g=m.hasOwnProperty)==null?void 0:g.call(m,v))||(u[v]=p(E.value)))}return u}const y=new WeakMap,T={data:p(d)};this._deferred.then(()=>{for(const m of this._listeners)m.call(this,T)})}addEventListener(d,t){this._listeners.push(t)}removeEventListener(d,t){const p=this._listeners.indexOf(t);this._listeners.splice(p,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const h=(Q=document==null?void 0:document.currentScript)==null?void 0:Q.src;h&&(PDFWorkerUtil.fallbackWorkerSrc=h.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(h){const d=`importScripts("${h}");`;return URL.createObjectURL(new Blob([d]))}}class _PDFWorker{static get _workerPorts(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}constructor({name:h=null,port:d=null,verbosity:t=(0,_util.getVerbosityLevel)()}={}){if(d&&_PDFWorker._workerPorts.has(d))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=h,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,d){_PDFWorker._workerPorts.set(d,this),this._initializeFromPort(d);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(h){this._port=h,this._messageHandler=new _message_handler.MessageHandler("main","worker",h),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let h=_PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,h)||(h=PDFWorkerUtil.createCDNWrapper(new URL(h,window.location).href));const d=new Worker(h),t=new _message_handler.MessageHandler("main","worker",d),p=()=>{d.removeEventListener("error",y),t.destroy(),d.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},y=()=>{this._webWorker||p()};d.addEventListener("error",y),t.on("test",m=>{if(d.removeEventListener("error",y),this.destroyed){p();return}m?(this._messageHandler=t,this._port=d,this._webWorker=d,m.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),d.terminate())}),t.on("ready",m=>{if(d.removeEventListener("error",y),this.destroyed){p();return}try{T()}catch{this._setupFakeWorker()}});const T=()=>{const m=new Uint8Array([this.postMessageTransfers?255:0]);try{t.send("test",m,[m.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),m[0]=0,t.send("test",m)}};T();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(h=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const d=new LoopbackPort;this._port=d;const t=`fake${PDFWorkerUtil.fakeWorkerId++}`,p=new _message_handler.MessageHandler(t+"_worker",t,d);h.setup(p,d);const y=new _message_handler.MessageHandler(t,t+"_worker",d);this._messageHandler=y,this._readyCapability.resolve(),y.send("configure",{verbosity:this.verbosity})}).catch(h=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${h.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(h){if(!(h==null?void 0:h.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(h.port)?this._workerPorts.get(h.port):new _PDFWorker(h)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var h;try{return((h=globalThis.pdfjsWorker)==null?void 0:h.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=_PDFWorker,_PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(d,t,p,y){this.messageHandler=d,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:y.ownerDocument,styleElement:y.styleElement}),this._params=y,y.useWorkerFetch||(this.CMapReaderFactory=new y.CMapReaderFactory({baseUrl:y.cMapUrl,isCompressed:y.cMapPacked}),this.StandardFontDataFactory=new y.StandardFontDataFactory({baseUrl:y.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=p,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(d,t=_util.AnnotationMode.ENABLE,p=!1){let y=_util.RenderingIntentFlag.DISPLAY,T="";switch(d){case"any":y=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":y=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${d}`)}switch(t){case _util.AnnotationMode.DISABLE:y+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:y+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:y+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,T=this.annotationStorage.lastModified;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return p&&(y+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:y,cacheKey:`${y}_${T}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const d=[];for(const p of this.pageCache)p&&d.push(p._destroy());this.pageCache.length=0,this.pagePromises.length=0,this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return d.push(t),Promise.all(d).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:d,loadingTask:t}=this;d.on("GetReader",(p,y)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=T=>{this._lastProgress={loaded:T.loaded,total:T.total}},y.onPull=()=>{this._fullReader.read().then(function({value:T,done:m}){if(m){y.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(T),"GetReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(T),1,[T])}).catch(T=>{y.error(T)})},y.onCancel=T=>{this._fullReader.cancel(T),y.ready.catch(m=>{if(!this.destroyed)throw m})}}),d.on("ReaderHeadersReady",p=>{const y=(0,_util.createPromiseCapability)(),T=this._fullReader;return T.headersReady.then(()=>{(!T.isStreamingSupported||!T.isRangeSupported)&&(this._lastProgress&&t.onProgress&&t.onProgress(this._lastProgress),T.onProgress=m=>{t.onProgress&&t.onProgress({loaded:m.loaded,total:m.total})}),y.resolve({isStreamingSupported:T.isStreamingSupported,isRangeSupported:T.isRangeSupported,contentLength:T.contentLength})},y.reject),y.promise}),d.on("GetRangeReader",(p,y)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const T=this._networkStream.getRangeReader(p.begin,p.end);if(!T){y.close();return}y.onPull=()=>{T.read().then(function({value:m,done:S}){if(S){y.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(m),"GetRangeReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(m),1,[m])}).catch(m=>{y.error(m)})},y.onCancel=m=>{T.cancel(m),y.ready.catch(S=>{if(!this.destroyed)throw S})}}),d.on("GetDoc",({pdfInfo:p})=>{this._numPages=p.numPages,this._htmlForXfa=p.htmlForXfa,delete p.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(p,this))}),d.on("DocException",function(p){let y;switch(p.name){case"PasswordException":y=new _util.PasswordException(p.message,p.code);break;case"InvalidPDFException":y=new _util.InvalidPDFException(p.message);break;case"MissingPDFException":y=new _util.MissingPDFException(p.message);break;case"UnexpectedResponseException":y=new _util.UnexpectedResponseException(p.message,p.status);break;case"UnknownErrorException":y=new _util.UnknownErrorException(p.message,p.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(y)}),d.on("PasswordRequest",p=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const y=T=>{this._passwordCapability.resolve({password:T})};try{t.onPassword(y,p.code)}catch(T){this._passwordCapability.reject(T)}}else this._passwordCapability.reject(new _util.PasswordException(p.message,p.code));return this._passwordCapability.promise}),d.on("DataLoaded",p=>{t.onProgress&&t.onProgress({loaded:p.length,total:p.length}),this.downloadInfoCapability.resolve(p)}),d.on("StartRenderPage",p=>{if(this.destroyed)return;this.pageCache[p.pageIndex]._startRenderPage(p.transparency,p.cacheKey)}),d.on("commonobj",p=>{var S;if(this.destroyed)return;const[y,T,m]=p;if(!this.commonObjs.has(y))switch(T){case"Font":const u=this._params;if("error"in m){const E=m.error;(0,_util.warn)(`Error during font loading: ${E}`),this.commonObjs.resolve(y,E);break}let g=null;u.pdfBug&&((S=globalThis.FontInspector)==null?void 0:S.enabled)&&(g={registerFont(E,_){globalThis.FontInspector.fontAdded(E,_)}});const v=new _font_loader.FontFaceObject(m,{isEvalSupported:u.isEvalSupported,disableFontFace:u.disableFontFace,ignoreErrors:u.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:g});this.fontLoader.bind(v).catch(E=>d.sendWithPromise("FontFallback",{id:y})).finally(()=>{!u.fontExtraProperties&&v.data&&(v.data=null),this.commonObjs.resolve(y,v)});break;case"FontPath":case"Image":this.commonObjs.resolve(y,m);break;default:throw new Error(`Got unknown common object type ${T}`)}}),d.on("obj",p=>{var g;if(this.destroyed)return;const[y,T,m,S]=p,u=this.pageCache[T];if(!u.objs.has(y))switch(m){case"Image":u.objs.resolve(y,S);const v=8e6;((g=S==null?void 0:S.data)==null?void 0:g.length)>v&&(u.cleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(y,S);break;default:throw new Error(`Got unknown object type ${m}`)}}),d.on("DocProgress",p=>{this.destroyed||t.onProgress&&t.onProgress({loaded:p.loaded,total:p.total})}),d.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),d.on("FetchBuiltInCMap",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(p):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),d.on("FetchStandardFontData",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(p):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:d}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(d)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(d){if(!Number.isInteger(d)||d<=0||d>this._numPages)return Promise.reject(new Error("Invalid page request"));const t=d-1;if(t in this.pagePromises)return this.pagePromises[t];const p=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(y=>{if(this.destroyed)throw new Error("Transport destroyed");const T=new PDFPageProxy(t,y,this,this._params.ownerDocument,this._params.pdfBug);return this.pageCache[t]=T,T});return this.pagePromises[t]=p,p}getPageIndex(d){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:d})}getAnnotations(d,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:d,intent:t})}saveDocument(){var d,t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(t=(d=this._fullReader)==null?void 0:d.filename)!=null?t:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(d){return typeof d!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:d})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(d){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:d})}getStructTree(d){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:d})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(d=>new _optional_content_config.OptionalContentConfig(d))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(d=>{var t,p,y,T;return{info:d[0],metadata:d[1]?new _metadata.Metadata(d[1]):null,contentDispositionFilename:(p=(t=this._fullReader)==null?void 0:t.filename)!=null?p:null,contentLength:(T=(y=this._fullReader)==null?void 0:y.contentLength)!=null?T:null}})}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}async startCleanup(d=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(let t=0,p=this.pageCache.length;t<p;t++){const y=this.pageCache[t];if(!y)continue;if(!y.cleanup())throw new Error(`startCleanup: Page ${t+1} is currently rendering.`)}this.commonObjs.clear(),d||this.fontLoader.clear(),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const d=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:d.disableAutoFetch,enableXfa:d.enableXfa})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(d){return this._objs[d]?this._objs[d]:this._objs[d]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(d,t=null){if(t)return this._ensureObj(d).capability.promise.then(t),null;const p=this._objs[d];if(!p||!p.resolved)throw new Error(`Requesting object that isn't resolved yet ${d}.`);return p.data}has(d){const t=this._objs[d];return(t==null?void 0:t.resolved)||!1}resolve(d,t){const p=this._ensureObj(d);p.resolved=!0,p.data=t,p.capability.resolve(t)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(d){this._internalRenderTask=d,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{static get canvasInUse(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}constructor({callback:d,params:t,objs:p,commonObjs:y,operatorList:T,pageIndex:m,canvasFactory:S,useRequestAnimationFrame:u=!1,pdfBug:g=!1}){this.callback=d,this.params=t,this.objs=p,this.commonObjs=y,this.operatorListIdx=null,this.operatorList=T,this._pageIndex=m,this.canvasFactory=S,this._pdfBug=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:d=!1,optionalContentConfig:t}){var u;if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.canvasInUse.add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)==null?void 0:u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:p,viewport:y,transform:T,imageLayer:m,background:S}=this.params;this.gfx=new _canvas.CanvasGraphics(p,this.commonObjs,this.objs,this.canvasFactory,m,t),this.gfx.beginDrawing({transform:T,viewport:y,transparency:d,background:S}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(d=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback(d||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&InternalRenderTask.canvasInUse.delete(this._canvas),this.callback())))}}const version="2.11.338";exports.version=version;const build="dedff3c98";exports.build=build},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.FontLoader=h.FontFaceObject=void 0;var t=d(2);class p{constructor({docId:S,onUnsupportedFeature:u,ownerDocument:g=globalThis.document,styleElement:v=null}){this.constructor===p&&(0,t.unreachable)("Cannot initialize BaseFontLoader."),this.docId=S,this._onUnsupportedFeature=u,this._document=g,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(S){this.nativeFontFaces.push(S),this._document.fonts.add(S)}insertRule(S){let u=this.styleElement;u||(u=this.styleElement=this._document.createElement("style"),u.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(u));const g=u.sheet;g.insertRule(S,g.cssRules.length)}clear(){for(const S of this.nativeFontFaces)this._document.fonts.delete(S);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(S){if(S.attached||S.missingFile)return;if(S.attached=!0,this.isFontLoadingAPISupported){const g=S.createNativeFontFace();if(g){this.addNativeFontFace(g);try{await g.loaded}catch(v){throw this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,t.warn)(`Failed to load font '${g.family}': '${v}'.`),S.disableFontFace=!0,v}}return}const u=S.createFontFaceRule();if(u){if(this.insertRule(u),this.isSyncFontLoadingSupported)return;await new Promise(g=>{const v=this._queueLoadingCallback(g);this._prepareFontLoadEvent([u],[S],v)})}}_queueLoadingCallback(S){(0,t.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var u;const S=!!((u=this._document)==null?void 0:u.fonts);return(0,t.shadow)(this,"isFontLoadingAPISupported",S)}get isSyncFontLoadingSupported(){(0,t.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,t.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(S,u,g){(0,t.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let y;h.FontLoader=y,h.FontLoader=y=class extends p{constructor(S){super(S);this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let S=!1;if(typeof navigator=="undefined")S=!0;else{const u=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(u==null?void 0:u[1])>=14&&(S=!0)}return(0,t.shadow)(this,"isSyncFontLoadingSupported",S)}_queueLoadingCallback(S){function u(){for((0,t.assert)(!v.done,"completeRequest() cannot be called twice."),v.done=!0;g.requests.length>0&&g.requests[0].done;){const E=g.requests.shift();setTimeout(E.callback,0)}}const g=this.loadingContext,v={id:`pdfjs-font-loading-${g.nextRequestId++}`,done:!1,complete:u,callback:S};return g.requests.push(v),v}get _loadTestFont(){const S=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,t.shadow)(this,"_loadTestFont",S())}_prepareFontLoadEvent(S,u,g){function v(k,O){return k.charCodeAt(O)<<24|k.charCodeAt(O+1)<<16|k.charCodeAt(O+2)<<8|k.charCodeAt(O+3)&255}function E(k,O,G,H){const B=k.substring(0,O),K=k.substring(O+G);return B+H+K}let _,M;const c=this._document.createElement("canvas");c.width=1,c.height=1;const F=c.getContext("2d");let V=0;function U(k,O){if(V++,V>30){(0,t.warn)("Load test font never loaded."),O();return}if(F.font="30px "+k,F.fillText(".",0,20),F.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(U.bind(null,k,O))}const P=`lt${Date.now()}${this.loadTestFontId++}`;let r=this._loadTestFont;r=E(r,976,P.length,P);const f=16,x=1482184792;let A=v(r,f);for(_=0,M=P.length-3;_<M;_+=4)A=A-x+v(P,_)|0;_<P.length&&(A=A-x+v(P+"XXX",_)|0),r=E(r,f,4,(0,t.string32)(A));const D=`url(data:font/opentype;base64,${btoa(r)});`,L=`@font-face {font-family:"${P}";src:${D}}`;this.insertRule(L);const Z=[];for(const k of u)Z.push(k.loadedName);Z.push(P);const $=this._document.createElement("div");$.style.visibility="hidden",$.style.width=$.style.height="10px",$.style.position="absolute",$.style.top=$.style.left="0px";for(const k of Z){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=k,$.appendChild(O)}this._document.body.appendChild($),U(P,()=>{this._document.body.removeChild($),g.complete()})}};class T{constructor(S,{isEvalSupported:u=!0,disableFontFace:g=!1,ignoreErrors:v=!1,onUnsupportedFeature:E,fontRegistry:_=null}){this.compiledGlyphs=Object.create(null);for(const M in S)this[M]=S[M];this.isEvalSupported=u!==!1,this.disableFontFace=g===!0,this.ignoreErrors=v===!0,this._onUnsupportedFeature=E,this.fontRegistry=_}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let S;if(!this.cssFontInfo)S=new FontFace(this.loadedName,this.data,{});else{const u={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(u.style=`oblique ${this.cssFontInfo.italicAngle}deg`),S=new FontFace(this.cssFontInfo.fontFamily,this.data,u)}return this.fontRegistry&&this.fontRegistry.registerFont(this),S}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const S=(0,t.bytesToString)(this.data),u=`url(data:${this.mimetype};base64,${btoa(S)});`;let g;if(!this.cssFontInfo)g=`@font-face {font-family:"${this.loadedName}";src:${u}}`;else{let v=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(v+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),g=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${v}src:${u}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,u),g}getPathGenerator(S,u){if(this.compiledGlyphs[u]!==void 0)return this.compiledGlyphs[u];let g;try{g=S.get(this.loadedName+"_path_"+u)}catch(v){if(!this.ignoreErrors)throw v;return this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,t.warn)(`getPathGenerator - ignoring character: "${v}".`),this.compiledGlyphs[u]=function(E,_){}}if(this.isEvalSupported&&t.IsEvalSupportedCached.value){const v=[];for(const E of g){const _=E.args!==void 0?E.args.join(","):"";v.push("c.",E.cmd,"(",_,`);
`)}return this.compiledGlyphs[u]=new Function("c","size",v.join(""))}return this.compiledGlyphs[u]=function(v,E){for(const _ of g)_.cmd==="scale"&&(_.args=[E,-E]),v[_.cmd].apply(v,_.args)}}}h.FontFaceObject=T},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.NodeStandardFontDataFactory=h.NodeCMapReaderFactory=h.NodeCanvasFactory=void 0;var t=d(5),p=d(4),y=d(2);let T=class{constructor(){(0,y.unreachable)("Not implemented: NodeCanvasFactory")}};h.NodeCanvasFactory=T;let m=class{constructor(){(0,y.unreachable)("Not implemented: NodeCMapReaderFactory")}};h.NodeCMapReaderFactory=m;let S=class{constructor(){(0,y.unreachable)("Not implemented: NodeStandardFontDataFactory")}};if(h.NodeStandardFontDataFactory=S,p.isNodeJS){const u=function(g){return new Promise((v,E)=>{require$$4.readFile(g,(M,c)=>{if(M||!c){E(new Error(M));return}v(new Uint8Array(c))})})};h.NodeCanvasFactory=T=class extends t.BaseCanvasFactory{_createCanvas(g,v){return require$$4.createCanvas(g,v)}},h.NodeCMapReaderFactory=m=class extends t.BaseCMapReaderFactory{_fetchData(g,v){return u(g).then(E=>({cMapData:E,compressionType:v}))}},h.NodeStandardFontDataFactory=S=class extends t.BaseStandardFontDataFactory{_fetchData(g){return u(g)}}}},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AnnotationStorage=void 0;var t=d(2);class p{constructor(){this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(T,m){const S=this._storage.get(T);return S===void 0?m:Object.assign(m,S)}setValue(T,m){const S=this._storage.get(T);let u=!1;if(S!==void 0)for(const[g,v]of Object.entries(m))S[g]!==v&&(u=!0,S[g]=v);else u=!0,this._storage.set(T,m);u&&(this._timeStamp=Date.now(),this._setModified())}getAll(){return this._storage.size>0?(0,t.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get lastModified(){return this._timeStamp.toString()}}h.AnnotationStorage=p},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.CanvasGraphics=void 0;var t=d(2),p=d(11),y=d(1);const T=16,m=100,S=4096,u=2,g=15,v=10,E=1e3,_=16,M=1.000001;function c(w){if(!w.mozCurrentTransform){w._originalSave=w.save,w._originalRestore=w.restore,w._originalRotate=w.rotate,w._originalScale=w.scale,w._originalTranslate=w.translate,w._originalTransform=w.transform,w._originalSetTransform=w.setTransform,w._originalResetTransform=w.resetTransform,w._transformMatrix=w._transformMatrix||[1,0,0,1,0,0],w._transformStack=[];try{const o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(w),"lineWidth");w._setLineWidth=o.set,w._getLineWidth=o.get,Object.defineProperty(w,"lineWidth",{set:function(s){this._setLineWidth(s*M)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(w,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(w,"mozCurrentTransformInverse",{get:function(){const[e,s,n,l,a,b]=this._transformMatrix,C=e*l-s*n,I=s*n-e*l;return[l/C,s/I,n/I,e/C,(l*a-n*b)/I,(s*a-e*b)/C]}}),w.save=function(){const e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},w.restore=function(){const e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},w.translate=function(e,s){const n=this._transformMatrix;n[4]=n[0]*e+n[2]*s+n[4],n[5]=n[1]*e+n[3]*s+n[5],this._originalTranslate(e,s)},w.scale=function(e,s){const n=this._transformMatrix;n[0]*=e,n[1]*=e,n[2]*=s,n[3]*=s,this._originalScale(e,s)},w.transform=function(e,s,n,l,a,b){const C=this._transformMatrix;this._transformMatrix=[C[0]*e+C[2]*s,C[1]*e+C[3]*s,C[0]*n+C[2]*l,C[1]*n+C[3]*l,C[0]*a+C[2]*b+C[4],C[1]*a+C[3]*b+C[5]],w._originalTransform(e,s,n,l,a,b)},w.setTransform=function(e,s,n,l,a,b){this._transformMatrix=[e,s,n,l,a,b],w._originalSetTransform(e,s,n,l,a,b)},w.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],w._originalResetTransform()},w.rotate=function(e){const s=Math.cos(e),n=Math.sin(e),l=this._transformMatrix;this._transformMatrix=[l[0]*s+l[2]*n,l[1]*s+l[3]*n,l[0]*-n+l[2]*s,l[1]*-n+l[3]*s,l[4],l[5]],this._originalRotate(e)}}}class F{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,e,s,n){let l;return this.cache[o]!==void 0?(l=this.cache[o],this.canvasFactory.reset(l,e,s),l.context.setTransform(1,0,0,1,0,0)):(l=this.canvasFactory.create(e,s),this.cache[o]=l),n&&c(l.context),l}clear(){for(const o in this.cache){const e=this.cache[o];this.canvasFactory.destroy(e),delete this.cache[o]}}}class V{constructor(o=0){this._cache=new Map,this._maxSize=o}has(o){return this._cache.has(o)}get(o){if(this._cache.has(o)){const e=this._cache.get(o);this._cache.delete(o),this._cache.set(o,e)}return this._cache.get(o)}set(o,e){this._maxSize<=0||(this._cache.size+1>this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(o,e))}clear(){this._cache.clear()}}function U(w){const e=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=w.width,n=w.height,l=s+1;let a,b,C,I;const N=new Uint8Array(l*(n+1)),R=s+7&-8,q=w.data,z=new Uint8Array(R*n);let Y=0;for(a=0,b=q.length;a<b;a++){const ne=q[a];let he=128;for(;he>0;)z[Y++]=ne&he?0:255,he>>=1}let J=0;for(Y=0,z[Y]!==0&&(N[0]=1,++J),C=1;C<s;C++)z[Y]!==z[Y+1]&&(N[C]=z[Y]?2:1,++J),Y++;for(z[Y]!==0&&(N[C]=2,++J),a=1;a<n;a++){Y=a*R,I=a*l,z[Y-R]!==z[Y]&&(N[I]=z[Y]?1:8,++J);let ne=(z[Y]?4:0)+(z[Y-R]?8:0);for(C=1;C<s;C++)ne=(ne>>2)+(z[Y+1]?4:0)+(z[Y-R+1]?8:0),e[ne]&&(N[I+C]=e[ne],++J),Y++;if(z[Y-R]!==z[Y]&&(N[I+C]=z[Y]?2:4,++J),J>1e3)return null}for(Y=R*(n-1),I=a*l,z[Y]!==0&&(N[I]=8,++J),C=1;C<s;C++)z[Y]!==z[Y+1]&&(N[I+C]=z[Y]?4:8,++J),Y++;if(z[Y]!==0&&(N[I+C]=4,++J),J>1e3)return null;const ie=new Int32Array([0,l,-1,0,-l,0,0,0,1]),se=[];for(a=0;J&&a<=n;a++){let ne=a*l;const he=ne+s;for(;ne<he&&!N[ne];)ne++;if(ne===he)continue;const de=[ne%l,a],ee=ne;let le=N[ne];do{const me=ie[le];do ne+=me;while(!N[ne]);const pe=N[ne];pe!==5&&pe!==10?(le=pe,N[ne]=0):(le=pe&51*le>>4,N[ne]&=le>>2|le<<2),de.push(ne%l,ne/l|0),N[ne]||--J}while(ee!==ne);se.push(de),--a}return function(ne){ne.save(),ne.scale(1/s,-1/n),ne.translate(0,-n),ne.beginPath();for(let he=0,de=se.length;he<de;he++){const ee=se[he];ne.moveTo(ee[0],ee[1]);for(let le=2,me=ee.length;le<me;le+=2)ne.lineTo(ee[le],ee[le+1])}ne.fill(),ne.beginPath(),ne.restore()}}class P{constructor(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=t.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=t.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}clone(){return Object.create(this)}setCurrentPoint(o,e){this.x=o,this.y=e}}function r(w,o,e=null){if(typeof ImageData!="undefined"&&o instanceof ImageData){w.putImageData(o,0,0);return}const s=o.height,n=o.width,l=s%_,a=(s-l)/_,b=l===0?a:a+1,C=w.createImageData(n,_);let I=0,N;const R=o.data,q=C.data;let z,Y,J,ie,se,ae,ne,he;if(e)switch(e.length){case 1:se=e[0],ae=e[0],ne=e[0],he=e[0];break;case 4:se=e[0],ae=e[1],ne=e[2],he=e[3];break}if(o.kind===t.ImageKind.GRAYSCALE_1BPP){const de=R.byteLength,ee=new Uint32Array(q.buffer,0,q.byteLength>>2),le=ee.length,me=n+7>>3;let pe=4294967295,fe=t.IsLittleEndianCached.value?4278190080:255;for(he&&he[0]===255&&he[255]===0&&([pe,fe]=[fe,pe]),z=0;z<b;z++){for(J=z<a?_:l,N=0,Y=0;Y<J;Y++){const Ae=de-I;let ge=0;const be=Ae>me?n:Ae*8-7,_e=be&-8;let ye=0,ue=0;for(;ge<_e;ge+=8)ue=R[I++],ee[N++]=ue&128?pe:fe,ee[N++]=ue&64?pe:fe,ee[N++]=ue&32?pe:fe,ee[N++]=ue&16?pe:fe,ee[N++]=ue&8?pe:fe,ee[N++]=ue&4?pe:fe,ee[N++]=ue&2?pe:fe,ee[N++]=ue&1?pe:fe;for(;ge<be;ge++)ye===0&&(ue=R[I++],ye=128),ee[N++]=ue&ye?pe:fe,ye>>=1}for(;N<le;)ee[N++]=0;w.putImageData(C,0,z*_)}}else if(o.kind===t.ImageKind.RGBA_32BPP){const de=!!(se||ae||ne);for(Y=0,ie=n*_*4,z=0;z<a;z++){if(q.set(R.subarray(I,I+ie)),I+=ie,de)for(let ee=0;ee<ie;ee+=4)se&&(q[ee+0]=se[q[ee+0]]),ae&&(q[ee+1]=ae[q[ee+1]]),ne&&(q[ee+2]=ne[q[ee+2]]);w.putImageData(C,0,Y),Y+=_}if(z<b){if(ie=n*l*4,q.set(R.subarray(I,I+ie)),de)for(let ee=0;ee<ie;ee+=4)se&&(q[ee+0]=se[q[ee+0]]),ae&&(q[ee+1]=ae[q[ee+1]]),ne&&(q[ee+2]=ne[q[ee+2]]);w.putImageData(C,0,Y)}}else if(o.kind===t.ImageKind.RGB_24BPP){const de=!!(se||ae||ne);for(J=_,ie=n*J,z=0;z<b;z++){for(z>=a&&(J=l,ie=n*J),N=0,Y=ie;Y--;)q[N++]=R[I++],q[N++]=R[I++],q[N++]=R[I++],q[N++]=255;if(de)for(let ee=0;ee<N;ee+=4)se&&(q[ee+0]=se[q[ee+0]]),ae&&(q[ee+1]=ae[q[ee+1]]),ne&&(q[ee+2]=ne[q[ee+2]]);w.putImageData(C,0,z*_)}}else throw new Error(`bad image kind: ${o.kind}`)}function i(w,o){const e=o.height,s=o.width,n=e%_,l=(e-n)/_,a=n===0?l:l+1,b=w.createImageData(s,_);let C=0;const I=o.data,N=b.data;for(let R=0;R<a;R++){const q=R<l?_:n;let z=3;for(let Y=0;Y<q;Y++){let J,ie=0;for(let se=0;se<s;se++)ie||(J=I[C++],ie=128),N[z]=J&ie?0:255,z+=4,ie>>=1}w.putImageData(b,0,R*_)}}function f(w,o){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let s=0,n=e.length;s<n;s++){const l=e[s];w[l]!==void 0&&(o[l]=w[l])}w.setLineDash!==void 0&&(o.setLineDash(w.getLineDash()),o.lineDashOffset=w.lineDashOffset)}function x(w){w.strokeStyle="#000000",w.fillStyle="#000000",w.fillRule="nonzero",w.globalAlpha=1,w.lineWidth=1,w.lineCap="butt",w.lineJoin="miter",w.miterLimit=10,w.globalCompositeOperation="source-over",w.font="10px sans-serif",w.setLineDash!==void 0&&(w.setLineDash([]),w.lineDashOffset=0)}function A(w,o,e,s){const n=w.length;for(let l=3;l<n;l+=4){const a=w[l];if(a===0)w[l-3]=o,w[l-2]=e,w[l-1]=s;else if(a<255){const b=255-a;w[l-3]=w[l-3]*a+o*b>>8,w[l-2]=w[l-2]*a+e*b>>8,w[l-1]=w[l-1]*a+s*b>>8}}}function D(w,o,e){const s=w.length,n=1/255;for(let l=3;l<s;l+=4){const a=e?e[w[l]]:w[l];o[l]=o[l]*a*n|0}}function L(w,o,e){const s=w.length;for(let n=3;n<s;n+=4){const l=w[n-3]*77+w[n-2]*152+w[n-1]*28;o[n]=e?o[n]*e[l>>8]>>8:o[n]*l>>16}}function Z(w,o,e,s,n,l,a){const b=!!l,C=b?l[0]:0,I=b?l[1]:0,N=b?l[2]:0;let R;n==="Luminosity"?R=L:R=D;const z=Math.min(s,Math.ceil(1048576/e));for(let Y=0;Y<s;Y+=z){const J=Math.min(z,s-Y),ie=w.getImageData(0,Y,e,J),se=o.getImageData(0,Y,e,J);b&&A(ie.data,C,I,N),R(ie.data,se.data,a),w.putImageData(se,0,Y)}}function $(w,o,e){const s=o.canvas,n=o.context;w.setTransform(o.scaleX,0,0,o.scaleY,o.offsetX,o.offsetY),Z(n,e,s.width,s.height,o.subtype,o.backdrop,o.transferMap),w.drawImage(s,0,0)}function k(w,o){const e=t.Util.singularValueDecompose2dScale(w);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*y.PixelsPerInch.PDF_TO_CSS_UNITS);return o!==void 0?o:e[0]<=s||e[1]<=s}const O=["butt","round","square"],G=["miter","round","bevel"],H={},B={};class K{constructor(o,e,s,n,l,a){this.ctx=o,this.current=new P,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=n,this.imageLayer=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=a,this.cachedCanvases=new F(this.canvasFactory),this.cachedCanvasPatterns=new V(u),this.cachedPatterns=new Map,o&&c(o),this._cachedGetSinglePixelWidth=null}beginDrawing({transform:o,viewport:e,transparency:s=!1,background:n=null}){const l=this.ctx.canvas.width,a=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=n||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,l,a),this.ctx.restore(),s){const b=this.cachedCanvases.getCanvas("transparent",l,a,!0);this.compositeCtx=this.ctx,this.transparentCanvas=b.canvas,this.ctx=b.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),x(this.ctx),o&&this.ctx.transform.apply(this.ctx,o),this.ctx.transform.apply(this.ctx,e.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(o,e,s,n){const l=o.argsArray,a=o.fnArray;let b=e||0;const C=l.length;if(C===b)return b;const I=C-b>v&&typeof s=="function",N=I?Date.now()+g:0;let R=0;const q=this.commonObjs,z=this.objs;let Y;for(;;){if(n!==void 0&&b===n.nextBreakPoint)return n.breakIt(b,s),b;if(Y=a[b],Y!==t.OPS.dependency)this[Y].apply(this,l[b]);else for(const J of l[b]){const ie=J.startsWith("g_")?q:z;if(!ie.has(J))return ie.get(J,s),b}if(b++,b===C)return b;if(I&&++R>v){if(Date.now()>N)return s(),b;R=0}}}endDrawing(){for(;this.stateStack.length||this.current.activeSMask!==null;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedCanvasPatterns.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(o,e){const s=o.width,n=o.height;let l=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),b=s,C=n,I="prescale1",N,R;for(;l>2&&b>1||a>2&&C>1;){let q=b,z=C;l>2&&b>1&&(q=Math.ceil(b/2),l/=b/q),a>2&&C>1&&(z=Math.ceil(C/2),a/=C/z),N=this.cachedCanvases.getCanvas(I,q,z),R=N.context,R.clearRect(0,0,q,z),R.drawImage(o,0,0,b,C,0,0,q,z),o=N.canvas,b=q,C=z,I=I==="prescale1"?"prescale2":"prescale1"}return{img:o,paintWidth:b,paintHeight:C}}_createMaskCanvas(o){const e=this.ctx,s=o.width,n=o.height,l=this.current.fillColor,a=this.current.patternFill,b=this.cachedCanvases.getCanvas("maskCanvas",s,n),C=b.context;i(C,o);const I=e.mozCurrentTransform;let N=t.Util.transform(I,[1/s,0,0,-1/n,0,0]);N=t.Util.transform(N,[1,0,0,1,0,-n]);const R=t.Util.applyTransform([0,0],N),q=t.Util.applyTransform([s,n],N),z=t.Util.normalizeRect([R[0],R[1],q[0],q[1]]),Y=Math.ceil(z[2]-z[0]),J=Math.ceil(z[3]-z[1]),ie=this.cachedCanvases.getCanvas("fillCanvas",Y,J,!0),se=ie.context,ae=Math.min(R[0],q[0]),ne=Math.min(R[1],q[1]);se.translate(-ae,-ne),se.transform.apply(se,N);const he=this._scaleImage(b.canvas,se.mozCurrentTransformInverse);se.imageSmoothingEnabled=k(se.mozCurrentTransform,o.interpolate),se.drawImage(he.img,0,0,he.img.width,he.img.height,0,0,s,n),se.globalCompositeOperation="source-in";const de=t.Util.transform(se.mozCurrentTransformInverse,[1,0,0,1,-ae,-ne]);return se.fillStyle=a?l.getPattern(e,this,de,!1):l,se.fillRect(0,0,s,n),{canvas:ie.canvas,offsetX:Math.round(ae),offsetY:Math.round(ne)}}setLineWidth(o){this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=O[o]}setLineJoin(o){this.ctx.lineJoin=G[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(o),s.lineDashOffset=e)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(let e=0,s=o.length;e<s;e++){const n=o[e],l=n[0],a=n[1];switch(l){case"LW":this.setLineWidth(a);break;case"LC":this.setLineCap(a);break;case"LJ":this.setLineJoin(a);break;case"ML":this.setMiterLimit(a);break;case"D":this.setDash(a[0],a[1]);break;case"RI":this.setRenderingIntent(a);break;case"FL":this.setFlatness(a);break;case"Font":this.setFont(a[0],a[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=a;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=a?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=a}}}beginSMaskGroup(){const o=this.current.activeSMask,e=o.canvas.width,s=o.canvas.height,n="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(n,e,s,!0),a=this.ctx,b=a.mozCurrentTransform;this.ctx.save();const C=l.context;C.scale(1/o.scaleX,1/o.scaleY),C.translate(-o.offsetX,-o.offsetY),C.transform.apply(C,b),o.startTransformInverse=C.mozCurrentTransformInverse,f(a,C),this.ctx=C,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}suspendSMaskGroup(){const o=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),$(this.ctx,this.current.activeSMask,o),this.ctx.restore(),this.ctx.save(),f(o,this.ctx),this.current.resumeSMaskCtx=o;const e=t.Util.transform(this.current.activeSMask.startTransformInverse,o.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e),o.save(),o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,o.canvas.width,o.canvas.height),o.restore()}resumeSMaskGroup(){const o=this.current.resumeSMaskCtx,e=this.ctx;this.ctx=o,this.groupStack.push(e),this.groupLevel++}endSMaskGroup(){const o=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),$(this.ctx,this.current.activeSMask,o),this.ctx.restore(),f(o,this.ctx);const e=t.Util.transform(this.current.activeSMask.startTransformInverse,o.mozCurrentTransform);this.ctx.transform.apply(this.ctx,e)}save(){this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone(),this.current.resumeSMaskCtx=null}restore(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),this.current.activeSMask!==null&&(this.stateStack.length===0||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),this.stateStack.length!==0?(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null):this.current.activeSMask=null}transform(o,e,s,n,l,a){this.ctx.transform(o,e,s,n,l,a),this._cachedGetSinglePixelWidth=null}constructPath(o,e){const s=this.ctx,n=this.current;let l=n.x,a=n.y;for(let b=0,C=0,I=o.length;b<I;b++)switch(o[b]|0){case t.OPS.rectangle:l=e[C++],a=e[C++];const N=e[C++],R=e[C++],q=l+N,z=a+R;s.moveTo(l,a),N===0||R===0?s.lineTo(q,z):(s.lineTo(q,a),s.lineTo(q,z),s.lineTo(l,z)),s.closePath();break;case t.OPS.moveTo:l=e[C++],a=e[C++],s.moveTo(l,a);break;case t.OPS.lineTo:l=e[C++],a=e[C++],s.lineTo(l,a);break;case t.OPS.curveTo:l=e[C+4],a=e[C+5],s.bezierCurveTo(e[C],e[C+1],e[C+2],e[C+3],l,a),C+=6;break;case t.OPS.curveTo2:s.bezierCurveTo(l,a,e[C],e[C+1],e[C+2],e[C+3]),l=e[C+2],a=e[C+3],C+=4;break;case t.OPS.curveTo3:l=e[C+2],a=e[C+3],s.bezierCurveTo(e[C],e[C+1],l,a,l,a),C+=4;break;case t.OPS.closePath:s.closePath();break}n.setCurrentPoint(l,a)}closePath(){this.ctx.closePath()}stroke(o){o=typeof o!="undefined"?o:!0;const e=this.ctx,s=this.current.strokeColor;if(e.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s==null?void 0:s.getPattern)){const n=this.getSinglePixelWidth();e.save(),e.strokeStyle=s.getPattern(e,this,e.mozCurrentTransformInverse),e.lineWidth=Math.max(n,this.current.lineWidth),e.stroke(),e.restore()}else{const n=this.getSinglePixelWidth();n<0&&-n>=this.current.lineWidth?(e.save(),e.resetTransform(),e.lineWidth=Math.round(this._combinedScaleFactor),e.stroke(),e.restore()):(e.lineWidth=Math.max(n,this.current.lineWidth),e.stroke())}o&&this.consumePath(),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o){o=typeof o!="undefined"?o:!0;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;let l=!1;n&&(e.save(),e.fillStyle=s.getPattern(e,this,e.mozCurrentTransformInverse),l=!0),this.contentVisible&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),l&&e.restore(),o&&this.consumePath()}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=H}eoClip(){this.pendingClip=B}beginText(){this.current.textMatrix=t.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,e=this.ctx;if(o===void 0){e.beginPath();return}e.save(),e.beginPath();for(let s=0;s<o.length;s++){const n=o[s];e.setTransform.apply(e,n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,e){const s=this.commonObjs.get(o),n=this.current;if(!s)throw new Error(`Can't find font for ${o}`);if(n.fontMatrix=s.fontMatrix||t.FONT_IDENTITY_MATRIX,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&(0,t.warn)("Invalid font matrix for font "+o),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const l=s.loadedName||"sans-serif";let a="normal";s.black?a="900":s.bold&&(a="bold");const b=s.italic?"italic":"normal",C=`"${l}", ${s.fallbackName}`;let I=e;e<T?I=T:e>m&&(I=m),this.current.fontSizeScale=e/I,this.ctx.font=`${b} ${a} ${I}px ${C}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,e){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=e}setLeadingMoveText(o,e){this.setLeading(-e),this.moveText(o,e)}setTextMatrix(o,e,s,n,l,a){this.current.textMatrix=[o,e,s,n,l,a],this.current.textMatrixScale=Math.hypot(o,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,e,s,n,l){const a=this.ctx,b=this.current,C=b.font,I=b.textRenderingMode,N=b.fontSize/b.fontSizeScale,R=I&t.TextRenderingMode.FILL_STROKE_MASK,q=!!(I&t.TextRenderingMode.ADD_TO_PATH_FLAG),z=b.patternFill&&!C.missingFile;let Y;(C.disableFontFace||q||z)&&(Y=C.getPathGenerator(this.commonObjs,o)),C.disableFontFace||z?(a.save(),a.translate(e,s),a.beginPath(),Y(a,N),n&&a.setTransform.apply(a,n),(R===t.TextRenderingMode.FILL||R===t.TextRenderingMode.FILL_STROKE)&&a.fill(),(R===t.TextRenderingMode.STROKE||R===t.TextRenderingMode.FILL_STROKE)&&(l&&(a.resetTransform(),a.lineWidth=Math.round(this._combinedScaleFactor)),a.stroke()),a.restore()):((R===t.TextRenderingMode.FILL||R===t.TextRenderingMode.FILL_STROKE)&&a.fillText(o,e,s),(R===t.TextRenderingMode.STROKE||R===t.TextRenderingMode.FILL_STROKE)&&(l?(a.save(),a.moveTo(e,s),a.resetTransform(),a.lineWidth=Math.round(this._combinedScaleFactor),a.strokeText(o,0,0),a.restore()):a.strokeText(o,e,s))),q&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:a.mozCurrentTransform,x:e,y:s,fontSize:N,addToPath:Y})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);o.scale(1.5,1),o.fillText("I",0,10);const e=o.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){s=!0;break}return(0,t.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(o){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(o);const n=e.fontSize;if(n===0)return;const l=this.ctx,a=e.fontSizeScale,b=e.charSpacing,C=e.wordSpacing,I=e.fontDirection,N=e.textHScale*I,R=o.length,q=s.vertical,z=q?1:-1,Y=s.defaultVMetrics,J=n*e.fontMatrix[0],ie=e.textRenderingMode===t.TextRenderingMode.FILL&&!s.disableFontFace&&!e.patternFill;l.save();let se;if(e.patternFill){l.save();const le=e.fillColor.getPattern(l,this,l.mozCurrentTransformInverse);se=l.mozCurrentTransform,l.restore(),l.fillStyle=le}l.transform.apply(l,e.textMatrix),l.translate(e.x,e.y+e.textRise),I>0?l.scale(N,-1):l.scale(N,1);let ae=e.lineWidth,ne=!1;const he=e.textMatrixScale;if(he===0||ae===0){const le=e.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;(le===t.TextRenderingMode.STROKE||le===t.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,ae=this.getSinglePixelWidth(),ne=ae<0)}else ae/=he;a!==1&&(l.scale(a,a),ae/=a),l.lineWidth=ae;let de=0,ee;for(ee=0;ee<R;++ee){const le=o[ee];if((0,t.isNum)(le)){de+=z*le*n/1e3;continue}let me=!1;const pe=(le.isSpace?C:0)+b,fe=le.fontChar,Ae=le.accent;let ge,be,_e=le.width;if(q){const ue=le.vmetric||Y,Ce=-(le.vmetric?ue[1]:_e*.5)*J,Pe=ue[2]*J;_e=ue?-ue[0]:_e,ge=Ce/a,be=(de+Pe)/a}else ge=de/a,be=0;if(s.remeasure&&_e>0){const ue=l.measureText(fe).width*1e3/n*a;if(_e<ue&&this.isFontSubpixelAAEnabled){const Ce=_e/ue;me=!0,l.save(),l.scale(Ce,1),ge/=Ce}else _e!==ue&&(ge+=(_e-ue)/2e3*n/a)}if(this.contentVisible&&(le.isInFont||s.missingFile)){if(ie&&!Ae)l.fillText(fe,ge,be);else if(this.paintChar(fe,ge,be,se,ne),Ae){const ue=ge+n*Ae.offset.x/a,Ce=be-n*Ae.offset.y/a;this.paintChar(Ae.fontChar,ue,Ce,se,ne)}}let ye;q?ye=_e*J-pe*I:ye=_e*J+pe*I,de+=ye,me&&l.restore()}q?e.y-=de:e.x+=de*N,l.restore()}showType3Text(o){const e=this.ctx,s=this.current,n=s.font,l=s.fontSize,a=s.fontDirection,b=n.vertical?1:-1,C=s.charSpacing,I=s.wordSpacing,N=s.textHScale*a,R=s.fontMatrix||t.FONT_IDENTITY_MATRIX,q=o.length,z=s.textRenderingMode===t.TextRenderingMode.INVISIBLE;let Y,J,ie,se;if(!(z||l===0)){for(this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,s.textMatrix),e.translate(s.x,s.y),e.scale(N,a),Y=0;Y<q;++Y){if(J=o[Y],(0,t.isNum)(J)){se=b*J*l/1e3,this.ctx.translate(se,0),s.x+=se*N;continue}const ae=(J.isSpace?I:0)+C,ne=n.charProcOperatorList[J.operatorListId];if(!ne){(0,t.warn)(`Type3 character "${J.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=J,this.save(),e.scale(l,l),e.transform.apply(e,R),this.executeOperatorList(ne),this.restore()),ie=t.Util.applyTransform([J.width,0],R)[0]*l+ae,e.translate(ie,0),s.x+=ie*N}e.restore(),this.processingType3=null}}setCharWidth(o,e){}setCharWidthAndBounds(o,e,s,n,l,a){this.ctx.rect(s,n,l-s,a-n),this.clip(),this.endPath()}getColorN_Pattern(o){let e;if(o[0]==="TilingPattern"){const s=o[1],n=this.baseTransform||this.ctx.mozCurrentTransform.slice(),l={createCanvasGraphics:a=>new K(a,this.commonObjs,this.objs,this.canvasFactory)};e=new p.TilingPattern(o,s,this.ctx,l,n)}else e=this._getPattern(o[1],o[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,e,s){const n=t.Util.makeHexColor(o,e,s);this.ctx.strokeStyle=n,this.current.strokeColor=n}setFillRGBColor(o,e,s){const n=t.Util.makeHexColor(o,e,s);this.ctx.fillStyle=n,this.current.fillColor=n,this.current.patternFill=!1}_getPattern(o,e=null){let s;return this.cachedPatterns.has(o)?s=this.cachedPatterns.get(o):(s=(0,p.getShadingPattern)(this.objs.get(o),this.cachedCanvasPatterns),this.cachedPatterns.set(o,s)),e&&(s.matrix=e),s}shadingFill(o){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(o);e.fillStyle=s.getPattern(e,this,e.mozCurrentTransformInverse,!0);const n=e.mozCurrentTransformInverse;if(n){const l=e.canvas,a=l.width,b=l.height,C=t.Util.applyTransform([0,0],n),I=t.Util.applyTransform([0,b],n),N=t.Util.applyTransform([a,0],n),R=t.Util.applyTransform([a,b],n),q=Math.min(C[0],I[0],N[0],R[0]),z=Math.min(C[1],I[1],N[1],R[1]),Y=Math.max(C[0],I[0],N[0],R[0]),J=Math.max(C[1],I[1],N[1],R[1]);this.ctx.fillRect(q,z,Y-q,J-z)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}beginInlineImage(){(0,t.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,t.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,e){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&o.length===6&&this.transform.apply(this,o),this.baseTransform=this.ctx.mozCurrentTransform,e)){const s=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],s,n),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save();const e=this.ctx;o.isolated||(0,t.info)("TODO: Support non-isolated groups."),o.knockout&&(0,t.warn)("Knockout groups not supported.");const s=e.mozCurrentTransform;if(o.matrix&&e.transform.apply(e,o.matrix),!o.bbox)throw new Error("Bounding box is required.");let n=t.Util.getAxialAlignedBoundingBox(o.bbox,e.mozCurrentTransform);const l=[0,0,e.canvas.width,e.canvas.height];n=t.Util.intersect(n,l)||[0,0,0,0];const a=Math.floor(n[0]),b=Math.floor(n[1]);let C=Math.max(Math.ceil(n[2])-a,1),I=Math.max(Math.ceil(n[3])-b,1),N=1,R=1;C>S&&(N=C/S,C=S),I>S&&(R=I/S,I=S);let q="groupAt"+this.groupLevel;o.smask&&(q+="_smask_"+this.smaskCounter++%2);const z=this.cachedCanvases.getCanvas(q,C,I,!0),Y=z.context;Y.scale(1/N,1/R),Y.translate(-a,-b),Y.transform.apply(Y,s),o.smask?this.smaskStack.push({canvas:z.canvas,context:Y,offsetX:a,offsetY:b,scaleX:N,scaleY:R,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,b),e.scale(N,R)),f(e,Y),this.ctx=Y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++,this.current.activeSMask=null}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx;this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled=!1,o.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(e.canvas,0,0),this.restore()}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(o,e,s,n){if(this.save(),x(this.ctx),this.current=new P,Array.isArray(e)&&e.length===4){const l=e[2]-e[0],a=e[3]-e[1];this.ctx.rect(e[0],e[1],l,a),this.clip(),this.endPath()}this.transform.apply(this,s),this.transform.apply(this,n)}endAnnotation(){this.restore()}paintImageMaskXObject(o){if(!this.contentVisible)return;const e=this.ctx,s=o.width,n=o.height,l=this.processingType3;if(l&&l.compiled===void 0&&(s<=E&&n<=E?l.compiled=U({data:o.data,width:s,height:n}):l.compiled=null),l==null?void 0:l.compiled){l.compiled(e);return}const a=this._createMaskCanvas(o),b=a.canvas;e.save(),e.setTransform(1,0,0,1,0,0),e.drawImage(b,a.offsetX,a.offsetY),e.restore()}paintImageMaskXObjectRepeat(o,e,s=0,n=0,l,a){if(!this.contentVisible)return;const b=this.ctx;b.save();const C=b.mozCurrentTransform;b.transform(e,s,n,l,0,0);const I=this._createMaskCanvas(o);b.setTransform(1,0,0,1,0,0);for(let N=0,R=a.length;N<R;N+=2){const q=t.Util.transform(C,[e,s,n,l,a[N],a[N+1]]),[z,Y]=t.Util.applyTransform([0,0],q);b.drawImage(I.canvas,z,Y)}b.restore()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(let l=0,a=o.length;l<a;l++){const b=o[l],C=b.width,I=b.height,N=this.cachedCanvases.getCanvas("maskCanvas",C,I),R=N.context;R.save(),i(R,b),R.globalCompositeOperation="source-in",R.fillStyle=n?s.getPattern(R,this,e.mozCurrentTransformInverse,!1):s,R.fillRect(0,0,C,I),R.restore(),e.save(),e.transform.apply(e,b.transform),e.scale(1,-1),e.drawImage(N.canvas,0,0,C,I,0,-1,1,1),e.restore()}}paintImageXObject(o){if(!this.contentVisible)return;const e=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!e){(0,t.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(o,e,s,n){if(!this.contentVisible)return;const l=o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o);if(!l){(0,t.warn)("Dependent image isn't ready yet");return}const a=l.width,b=l.height,C=[];for(let I=0,N=n.length;I<N;I+=2)C.push({transform:[e,0,0,s,n[I],n[I+1]],x:0,y:0,w:a,h:b});this.paintInlineImageXObjectGroup(l,C)}paintInlineImageXObject(o){if(!this.contentVisible)return;const e=o.width,s=o.height,n=this.ctx;this.save(),n.scale(1/e,-1/s);let l;if(typeof HTMLElement=="function"&&o instanceof HTMLElement||!o.data)l=o;else{const b=this.cachedCanvases.getCanvas("inlineImage",e,s),C=b.context;r(C,o,this.current.transferMaps),l=b.canvas}const a=this._scaleImage(l,n.mozCurrentTransformInverse);if(n.imageSmoothingEnabled=k(n.mozCurrentTransform,o.interpolate),n.drawImage(a.img,0,0,a.paintWidth,a.paintHeight,0,-s,e,s),this.imageLayer){const b=this.getCanvasPosition(0,-s);this.imageLayer.appendImage({imgData:o,left:b[0],top:b[1],width:e/n.mozCurrentTransformInverse[0],height:s/n.mozCurrentTransformInverse[3]})}this.restore()}paintInlineImageXObjectGroup(o,e){if(!this.contentVisible)return;const s=this.ctx,n=o.width,l=o.height,a=this.cachedCanvases.getCanvas("inlineImage",n,l),b=a.context;r(b,o,this.current.transferMaps);for(let C=0,I=e.length;C<I;C++){const N=e[C];if(s.save(),s.transform.apply(s,N.transform),s.scale(1,-1),s.drawImage(a.canvas,N.x,N.y,N.w,N.h,0,-1,1,1),this.imageLayer){const R=this.getCanvasPosition(N.x,N.y);this.imageLayer.appendImage({imgData:o,left:R[0],top:R[1],width:n,height:l})}s.restore()}}paintSolidColorImageMask(){!this.contentVisible||this.ctx.fillRect(0,0,1,1)}markPoint(o){}markPointProps(o,e){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,e){o==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(){const o=this.ctx;this.pendingClip&&(this.pendingClip===B?o.clip("evenodd"):o.clip(),this.pendingClip=null),o.beginPath()}getSinglePixelWidth(){if(this._cachedGetSinglePixelWidth===null){const o=this.ctx.mozCurrentTransform,e=Math.abs(o[0]*o[3]-o[2]*o[1]),s=o[0]**2+o[2]**2,n=o[1]**2+o[3]**2,l=Math.sqrt(Math.max(s,n))/e;s!==n&&this._combinedScaleFactor*l>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*l):e>Number.EPSILON?this._cachedGetSinglePixelWidth=l:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}getCanvasPosition(o,e){const s=this.ctx.mozCurrentTransform;return[s[0]*o+s[2]*e+s[4],s[1]*o+s[3]*e+s[5]]}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}}h.CanvasGraphics=K;for(const w in t.OPS)K.prototype[w]!==void 0&&(K.prototype[t.OPS[w]]=K.prototype[w])},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getShadingPattern=v,h.TilingPattern=void 0;var t=d(2);function p(M,c){if(!c||typeof Path2D=="undefined")return;const F=c[2]-c[0],V=c[3]-c[1],U=new Path2D;U.rect(c[0],c[1],F,V),M.clip(U)}class y{constructor(){this.constructor===y&&(0,t.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,t.unreachable)("Abstract method `getPattern` called.")}}class T extends y{constructor(c,F){super();this._type=c[1],this._bbox=c[2],this._colorStops=c[3],this._p0=c[4],this._p1=c[5],this._r0=c[6],this._r1=c[7],this.matrix=null,this.cachedCanvasPatterns=F}_createGradient(c){let F;this._type==="axial"?F=c.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(F=c.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const V of this._colorStops)F.addColorStop(V[0],V[1]);return F}getPattern(c,F,V,U=!1){let P;if(U)p(c,this._bbox),P=this._createGradient(c);else if(this.cachedCanvasPatterns.has(this))P=this.cachedCanvasPatterns.get(this);else{const r=F.cachedCanvases.getCanvas("pattern",F.ctx.canvas.width,F.ctx.canvas.height,!0),i=r.context;i.clearRect(0,0,i.canvas.width,i.canvas.height),i.beginPath(),i.rect(0,0,i.canvas.width,i.canvas.height),i.setTransform.apply(i,F.baseTransform),this.matrix&&i.transform.apply(i,this.matrix),p(i,this._bbox),i.fillStyle=this._createGradient(i),i.fill(),P=c.createPattern(r.canvas,"repeat"),this.cachedCanvasPatterns.set(this,P)}if(!U){const r=new DOMMatrix(V);try{P.setTransform(r)}catch(i){(0,t.warn)(`RadialAxialShadingPattern.getPattern: "${i==null?void 0:i.message}".`)}}return P}}function m(M,c,F,V,U,P,r,i){const f=c.coords,x=c.colors,A=M.data,D=M.width*4;let L;f[F+1]>f[V+1]&&(L=F,F=V,V=L,L=P,P=r,r=L),f[V+1]>f[U+1]&&(L=V,V=U,U=L,L=r,r=i,i=L),f[F+1]>f[V+1]&&(L=F,F=V,V=L,L=P,P=r,r=L);const Z=(f[F]+c.offsetX)*c.scaleX,$=(f[F+1]+c.offsetY)*c.scaleY,k=(f[V]+c.offsetX)*c.scaleX,O=(f[V+1]+c.offsetY)*c.scaleY,G=(f[U]+c.offsetX)*c.scaleX,H=(f[U+1]+c.offsetY)*c.scaleY;if($>=H)return;const B=x[P],K=x[P+1],w=x[P+2],o=x[r],e=x[r+1],s=x[r+2],n=x[i],l=x[i+1],a=x[i+2],b=Math.round($),C=Math.round(H);let I,N,R,q,z,Y,J,ie;for(let se=b;se<=C;se++){if(se<O){let ee;se<$?ee=0:ee=($-se)/($-O),I=Z-(Z-k)*ee,N=B-(B-o)*ee,R=K-(K-e)*ee,q=w-(w-s)*ee}else{let ee;se>H?ee=1:O===H?ee=0:ee=(O-se)/(O-H),I=k-(k-G)*ee,N=o-(o-n)*ee,R=e-(e-l)*ee,q=s-(s-a)*ee}let ae;se<$?ae=0:se>H?ae=1:ae=($-se)/($-H),z=Z-(Z-G)*ae,Y=B-(B-n)*ae,J=K-(K-l)*ae,ie=w-(w-a)*ae;const ne=Math.round(Math.min(I,z)),he=Math.round(Math.max(I,z));let de=D*se+ne*4;for(let ee=ne;ee<=he;ee++)ae=(I-ee)/(I-z),ae<0?ae=0:ae>1&&(ae=1),A[de++]=N-(N-Y)*ae|0,A[de++]=R-(R-J)*ae|0,A[de++]=q-(q-ie)*ae|0,A[de++]=255}}function S(M,c,F){const V=c.coords,U=c.colors;let P,r;switch(c.type){case"lattice":const i=c.verticesPerRow,f=Math.floor(V.length/i)-1,x=i-1;for(P=0;P<f;P++){let A=P*i;for(let D=0;D<x;D++,A++)m(M,F,V[A],V[A+1],V[A+i],U[A],U[A+1],U[A+i]),m(M,F,V[A+i+1],V[A+1],V[A+i],U[A+i+1],U[A+1],U[A+i])}break;case"triangles":for(P=0,r=V.length;P<r;P+=3)m(M,F,V[P],V[P+1],V[P+2],U[P],U[P+1],U[P+2]);break;default:throw new Error("illegal figure")}}class u extends y{constructor(c){super();this._coords=c[2],this._colors=c[3],this._figures=c[4],this._bounds=c[5],this._bbox=c[7],this._background=c[8],this.matrix=null}_createMeshCanvas(c,F,V){const i=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),x=Math.ceil(this._bounds[2])-i,A=Math.ceil(this._bounds[3])-f,D=Math.min(Math.ceil(Math.abs(x*c[0]*1.1)),3e3),L=Math.min(Math.ceil(Math.abs(A*c[1]*1.1)),3e3),Z=x/D,$=A/L,k={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-f,scaleX:1/Z,scaleY:1/$},O=D+2*2,G=L+2*2,H=V.getCanvas("mesh",O,G,!1),B=H.context,K=B.createImageData(D,L);if(F){const o=K.data;for(let e=0,s=o.length;e<s;e+=4)o[e]=F[0],o[e+1]=F[1],o[e+2]=F[2],o[e+3]=255}for(const o of this._figures)S(K,o,k);return B.putImageData(K,2,2),{canvas:H.canvas,offsetX:i-2*Z,offsetY:f-2*$,scaleX:Z,scaleY:$}}getPattern(c,F,V,U=!1){p(c,this._bbox);let P;if(U)P=t.Util.singularValueDecompose2dScale(c.mozCurrentTransform);else if(P=t.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const i=t.Util.singularValueDecompose2dScale(this.matrix);P=[P[0]*i[0],P[1]*i[1]]}const r=this._createMeshCanvas(P,U?null:this._background,F.cachedCanvases);return U||(c.setTransform.apply(c,F.baseTransform),this.matrix&&c.transform.apply(c,this.matrix)),c.translate(r.offsetX,r.offsetY),c.scale(r.scaleX,r.scaleY),c.createPattern(r.canvas,"no-repeat")}}class g extends y{getPattern(){return"hotpink"}}function v(M,c){switch(M[0]){case"RadialAxial":return new T(M,c);case"Mesh":return new u(M);case"Dummy":return new g}throw new Error(`Unknown IR type: ${M[0]}`)}const E={COLORED:1,UNCOLORED:2};class _{static get MAX_PATTERN_SIZE(){return(0,t.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(c,F,V,U,P){this.operatorList=c[2],this.matrix=c[3]||[1,0,0,1,0,0],this.bbox=c[4],this.xstep=c[5],this.ystep=c[6],this.paintType=c[7],this.tilingType=c[8],this.color=F,this.ctx=V,this.canvasGraphicsFactory=U,this.baseTransform=P}createPatternCanvas(c){const F=this.operatorList,V=this.bbox,U=this.xstep,P=this.ystep,r=this.paintType,i=this.tilingType,f=this.color,x=this.canvasGraphicsFactory;(0,t.info)("TilingType: "+i);const A=V[0],D=V[1],L=V[2],Z=V[3],$=t.Util.singularValueDecompose2dScale(this.matrix),k=t.Util.singularValueDecompose2dScale(this.baseTransform),O=[$[0]*k[0],$[1]*k[1]],G=this.getSizeAndScale(U,this.ctx.canvas.width,O[0]),H=this.getSizeAndScale(P,this.ctx.canvas.height,O[1]),B=c.cachedCanvases.getCanvas("pattern",G.size,H.size,!0),K=B.context,w=x.createCanvasGraphics(K);w.groupLevel=c.groupLevel,this.setFillAndStrokeStyleToContext(w,r,f);let o=A,e=D,s=L,n=Z;return A<0&&(o=0,s+=Math.abs(A)),D<0&&(e=0,n+=Math.abs(D)),K.translate(-(G.scale*o),-(H.scale*e)),w.transform(G.scale,0,0,H.scale,0,0),this.clipBbox(w,o,e,s,n),w.baseTransform=w.ctx.mozCurrentTransform.slice(),w.executeOperatorList(F),w.endDrawing(),{canvas:B.canvas,scaleX:G.scale,scaleY:H.scale,offsetX:o,offsetY:e}}getSizeAndScale(c,F,V){c=Math.abs(c);const U=Math.max(_.MAX_PATTERN_SIZE,F);let P=Math.ceil(c*V);return P>=U?P=U:V=P/c,{scale:V,size:P}}clipBbox(c,F,V,U,P){const r=U-F,i=P-V;c.ctx.rect(F,V,r,i),c.clip(),c.endPath()}setFillAndStrokeStyleToContext(c,F,V){const U=c.ctx,P=c.current;switch(F){case E.COLORED:const r=this.ctx;U.fillStyle=r.fillStyle,U.strokeStyle=r.strokeStyle,P.fillColor=r.fillStyle,P.strokeColor=r.strokeStyle;break;case E.UNCOLORED:const i=t.Util.makeHexColor(V[0],V[1],V[2]);U.fillStyle=i,U.strokeStyle=i,P.fillColor=i,P.strokeColor=i;break;default:throw new t.FormatError(`Unsupported paint type: ${F}`)}}getPattern(c,F,V,U=!1){let P=V;U||(P=t.Util.transform(P,F.baseTransform),this.matrix&&(P=t.Util.transform(P,this.matrix)));const r=this.createPatternCanvas(F);let i=new DOMMatrix(P);i=i.translate(r.offsetX,r.offsetY),i=i.scale(1/r.scaleX,1/r.scaleY);const f=c.createPattern(r.canvas,"repeat");try{f.setTransform(i)}catch(x){(0,t.warn)(`TilingPattern.getPattern: "${x==null?void 0:x.message}".`)}return f}}h.TilingPattern=_},(Q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.GlobalWorkerOptions=void 0;const d=Object.create(null);h.GlobalWorkerOptions=d,d.workerPort=d.workerPort===void 0?null:d.workerPort,d.workerSrc=d.workerSrc===void 0?"":d.workerSrc},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.MessageHandler=void 0;var t=d(2);const p={UNKNOWN:0,DATA:1,ERROR:2},y={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function T(S){if(!(S instanceof Error||typeof S=="object"&&S!==null))return(0,t.warn)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),S;switch(S.name){case"AbortException":return new t.AbortException(S.message);case"MissingPDFException":return new t.MissingPDFException(S.message);case"PasswordException":return new t.PasswordException(S.message,S.code);case"UnexpectedResponseException":return new t.UnexpectedResponseException(S.message,S.status);case"UnknownErrorException":return new t.UnknownErrorException(S.message,S.details);default:return new t.UnknownErrorException(S.message,S.toString())}}class m{constructor(u,g,v){this.sourceName=u,this.targetName=g,this.comObj=v,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=E=>{const _=E.data;if(_.targetName!==this.sourceName)return;if(_.stream){this._processStreamMessage(_);return}if(_.callback){const c=_.callbackId,F=this.callbackCapabilities[c];if(!F)throw new Error(`Cannot resolve callback ${c}`);if(delete this.callbackCapabilities[c],_.callback===p.DATA)F.resolve(_.data);else if(_.callback===p.ERROR)F.reject(T(_.reason));else throw new Error("Unexpected callback case");return}const M=this.actionHandler[_.action];if(!M)throw new Error(`Unknown action from worker: ${_.action}`);if(_.callbackId){const c=this.sourceName,F=_.sourceName;new Promise(function(V){V(M(_.data))}).then(function(V){v.postMessage({sourceName:c,targetName:F,callback:p.DATA,callbackId:_.callbackId,data:V})},function(V){v.postMessage({sourceName:c,targetName:F,callback:p.ERROR,callbackId:_.callbackId,reason:T(V)})});return}if(_.streamId){this._createStreamSink(_);return}M(_.data)},v.addEventListener("message",this._onComObjOnMessage)}on(u,g){const v=this.actionHandler;if(v[u])throw new Error(`There is already an actionName called "${u}"`);v[u]=g}send(u,g,v){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,data:g},v)}sendWithPromise(u,g,v){const E=this.callbackId++,_=(0,t.createPromiseCapability)();this.callbackCapabilities[E]=_;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:u,callbackId:E,data:g},v)}catch(M){_.reject(M)}return _.promise}sendWithStream(u,g,v,E){const _=this.streamId++,M=this.sourceName,c=this.targetName,F=this.comObj;return new ReadableStream({start:V=>{const U=(0,t.createPromiseCapability)();return this.streamControllers[_]={controller:V,startCall:U,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:M,targetName:c,action:u,streamId:_,data:g,desiredSize:V.desiredSize},E),U.promise},pull:V=>{const U=(0,t.createPromiseCapability)();return this.streamControllers[_].pullCall=U,F.postMessage({sourceName:M,targetName:c,stream:y.PULL,streamId:_,desiredSize:V.desiredSize}),U.promise},cancel:V=>{(0,t.assert)(V instanceof Error,"cancel must have a valid reason");const U=(0,t.createPromiseCapability)();return this.streamControllers[_].cancelCall=U,this.streamControllers[_].isClosed=!0,F.postMessage({sourceName:M,targetName:c,stream:y.CANCEL,streamId:_,reason:T(V)}),U.promise}},v)}_createStreamSink(u){const g=u.streamId,v=this.sourceName,E=u.sourceName,_=this.comObj,M=this,c=this.actionHandler[u.action],F={enqueue(V,U=1,P){if(this.isCancelled)return;const r=this.desiredSize;this.desiredSize-=U,r>0&&this.desiredSize<=0&&(this.sinkCapability=(0,t.createPromiseCapability)(),this.ready=this.sinkCapability.promise),M._postMessage({sourceName:v,targetName:E,stream:y.ENQUEUE,streamId:g,chunk:V},P)},close(){this.isCancelled||(this.isCancelled=!0,_.postMessage({sourceName:v,targetName:E,stream:y.CLOSE,streamId:g}),delete M.streamSinks[g])},error(V){(0,t.assert)(V instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,_.postMessage({sourceName:v,targetName:E,stream:y.ERROR,streamId:g,reason:T(V)}))},sinkCapability:(0,t.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:u.desiredSize,ready:null};F.sinkCapability.resolve(),F.ready=F.sinkCapability.promise,this.streamSinks[g]=F,new Promise(function(V){V(c(u.data,F))}).then(function(){_.postMessage({sourceName:v,targetName:E,stream:y.START_COMPLETE,streamId:g,success:!0})},function(V){_.postMessage({sourceName:v,targetName:E,stream:y.START_COMPLETE,streamId:g,reason:T(V)})})}_processStreamMessage(u){const g=u.streamId,v=this.sourceName,E=u.sourceName,_=this.comObj,M=this.streamControllers[g],c=this.streamSinks[g];switch(u.stream){case y.START_COMPLETE:u.success?M.startCall.resolve():M.startCall.reject(T(u.reason));break;case y.PULL_COMPLETE:u.success?M.pullCall.resolve():M.pullCall.reject(T(u.reason));break;case y.PULL:if(!c){_.postMessage({sourceName:v,targetName:E,stream:y.PULL_COMPLETE,streamId:g,success:!0});break}c.desiredSize<=0&&u.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=u.desiredSize,new Promise(function(F){F(c.onPull&&c.onPull())}).then(function(){_.postMessage({sourceName:v,targetName:E,stream:y.PULL_COMPLETE,streamId:g,success:!0})},function(F){_.postMessage({sourceName:v,targetName:E,stream:y.PULL_COMPLETE,streamId:g,reason:T(F)})});break;case y.ENQUEUE:if((0,t.assert)(M,"enqueue should have stream controller"),M.isClosed)break;M.controller.enqueue(u.chunk);break;case y.CLOSE:if((0,t.assert)(M,"close should have stream controller"),M.isClosed)break;M.isClosed=!0,M.controller.close(),this._deleteStreamController(M,g);break;case y.ERROR:(0,t.assert)(M,"error should have stream controller"),M.controller.error(T(u.reason)),this._deleteStreamController(M,g);break;case y.CANCEL_COMPLETE:u.success?M.cancelCall.resolve():M.cancelCall.reject(T(u.reason)),this._deleteStreamController(M,g);break;case y.CANCEL:if(!c)break;new Promise(function(F){F(c.onCancel&&c.onCancel(T(u.reason)))}).then(function(){_.postMessage({sourceName:v,targetName:E,stream:y.CANCEL_COMPLETE,streamId:g,success:!0})},function(F){_.postMessage({sourceName:v,targetName:E,stream:y.CANCEL_COMPLETE,streamId:g,reason:T(F)})}),c.sinkCapability.reject(T(u.reason)),c.isCancelled=!0,delete this.streamSinks[g];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(u,g){await Promise.allSettled([u.startCall&&u.startCall.promise,u.pullCall&&u.pullCall.promise,u.cancelCall&&u.cancelCall.promise]),delete this.streamControllers[g]}_postMessage(u,g){g&&this.postMessageTransfers?this.comObj.postMessage(u,g):this.comObj.postMessage(u)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h.MessageHandler=m},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.Metadata=void 0;var t=d(2);class p{constructor({parsedData:T,rawData:m}){this._metadataMap=T,this._data=m}getRaw(){return this._data}get(T){var m;return(m=this._metadataMap.get(T))!=null?m:null}getAll(){return(0,t.objectFromMap)(this._metadataMap)}has(T){return this._metadataMap.has(T)}}h.Metadata=p},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.OptionalContentConfig=void 0;var t=d(2);class p{constructor(m,S){this.visible=!0,this.name=m,this.intent=S}}class y{constructor(m){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,m!==null){this.name=m.name,this.creator=m.creator,this._order=m.order;for(const S of m.groups)this._groups.set(S.id,new p(S.name,S.intent));if(m.baseState==="OFF")for(const S of this._groups)S.visible=!1;for(const S of m.on)this._groups.get(S).visible=!0;for(const S of m.off)this._groups.get(S).visible=!1}}_evaluateVisibilityExpression(m){const S=m.length;if(S<2)return!0;const u=m[0];for(let g=1;g<S;g++){const v=m[g];let E;if(Array.isArray(v))E=this._evaluateVisibilityExpression(v);else if(this._groups.has(v))E=this._groups.get(v).visible;else return(0,t.warn)(`Optional content group not found: ${v}`),!0;switch(u){case"And":if(!E)return!1;break;case"Or":if(E)return!0;break;case"Not":return!E;default:return!0}}return u==="And"}isVisible(m){if(this._groups.size===0)return!0;if(!m)return(0,t.warn)("Optional content group not defined."),!0;if(m.type==="OCG")return this._groups.has(m.id)?this._groups.get(m.id).visible:((0,t.warn)(`Optional content group not found: ${m.id}`),!0);if(m.type==="OCMD"){if(m.expression)return this._evaluateVisibilityExpression(m.expression);if(!m.policy||m.policy==="AnyOn"){for(const S of m.ids){if(!this._groups.has(S))return(0,t.warn)(`Optional content group not found: ${S}`),!0;if(this._groups.get(S).visible)return!0}return!1}else if(m.policy==="AllOn"){for(const S of m.ids){if(!this._groups.has(S))return(0,t.warn)(`Optional content group not found: ${S}`),!0;if(!this._groups.get(S).visible)return!1}return!0}else if(m.policy==="AnyOff"){for(const S of m.ids){if(!this._groups.has(S))return(0,t.warn)(`Optional content group not found: ${S}`),!0;if(!this._groups.get(S).visible)return!0}return!1}else if(m.policy==="AllOff"){for(const S of m.ids){if(!this._groups.has(S))return(0,t.warn)(`Optional content group not found: ${S}`),!0;if(this._groups.get(S).visible)return!1}return!0}return(0,t.warn)(`Unknown optional content policy ${m.policy}.`),!0}return(0,t.warn)(`Unknown group type ${m.type}.`),!0}setVisibility(m,S=!0){if(!this._groups.has(m)){(0,t.warn)(`Optional content group not found: ${m}`);return}this._groups.get(m).visible=!!S}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,t.objectFromMap)(this._groups):null}getGroup(m){return this._groups.get(m)||null}}h.OptionalContentConfig=y},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFDataTransportStream=void 0;var t=d(2),p=d(1);class y{constructor(u,g){(0,t.assert)(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=u.progressiveDone||!1,this._contentDispositionFilename=u.contentDispositionFilename||null;const v=u.initialData;if((v==null?void 0:v.length)>0){const E=new Uint8Array(v).buffer;this._queuedChunks.push(E)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._contentLength=u.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((E,_)=>{this._onReceiveData({begin:E,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((E,_)=>{this._onProgress({loaded:E,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(E=>{this._onReceiveData({chunk:E})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(u){const g=new Uint8Array(u.chunk).buffer;if(u.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(g):this._queuedChunks.push(g);else{const v=this._rangeReaders.some(function(E){return E._begin!==u.begin?!1:(E._enqueue(g),!0)});(0,t.assert)(v,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var u,g;return(g=(u=this._fullRequestReader)==null?void 0:u._loaded)!=null?g:0}_onProgress(u){if(u.total===void 0){const g=this._rangeReaders[0];(g==null?void 0:g.onProgress)&&g.onProgress({loaded:u.loaded})}else{const g=this._fullRequestReader;(g==null?void 0:g.onProgress)&&g.onProgress({loaded:u.loaded,total:u.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(u){const g=this._rangeReaders.indexOf(u);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,t.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const u=this._queuedChunks;return this._queuedChunks=null,new T(this,u,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(u,g){if(g<=this._progressiveDataLength)return null;const v=new m(this,u,g);return this._pdfDataRangeTransport.requestDataRange(u,g),this._rangeReaders.push(v),v}cancelAllRequests(u){this._fullRequestReader&&this._fullRequestReader.cancel(u);for(const g of this._rangeReaders.slice(0))g.cancel(u);this._pdfDataRangeTransport.abort()}}h.PDFDataTransportStream=y;class T{constructor(u,g,v=!1,E=null){this._stream=u,this._done=v||!1,this._filename=(0,p.isPdfFile)(E)?E:null,this._queuedChunks=g||[],this._loaded=0;for(const _ of this._queuedChunks)this._loaded+=_.byteLength;this._requests=[],this._headersReady=Promise.resolve(),u._fullRequestReader=this,this.onProgress=null}_enqueue(u){this._done||(this._requests.length>0?this._requests.shift().resolve({value:u,done:!1}):this._queuedChunks.push(u),this._loaded+=u.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=(0,t.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class m{constructor(u,g,v){this._stream=u,this._begin=g,this._end=v,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(u){if(!this._done){if(this._requests.length===0)this._queuedChunk=u;else{this._requests.shift().resolve({value:u,done:!1});for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const u=(0,t.createPromiseCapability)();return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.XfaText=void 0;class d{static textContent(p){const y=[],T={items:y,styles:Object.create(null)};function m(S){var v;if(!S)return;let u=null;const g=S.name;if(g==="#text")u=S.value;else if(d.shouldBuildText(g))((v=S==null?void 0:S.attributes)==null?void 0:v.textContent)?u=S.attributes.textContent:S.value&&(u=S.value);else return;if(u!==null&&y.push({str:u}),!!S.children)for(const E of S.children)m(E)}return m(p),T}static shouldBuildText(p){return!(p==="textarea"||p==="input"||p==="option"||p==="select")}}h.XfaText=d},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.AnnotationLayer=void 0;var t=d(2),p=d(1),y=d(9),T=d(19);const m=1e3,S=new WeakSet;class u{static create(e){switch(e.data.annotationType){case t.AnnotationType.LINK:return new v(e);case t.AnnotationType.TEXT:return new E(e);case t.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new M(e);case"Btn":return e.data.radioButton?new F(e):e.data.checkBox?new c(e):new V(e);case"Ch":return new U(e)}return new _(e);case t.AnnotationType.POPUP:return new P(e);case t.AnnotationType.FREETEXT:return new i(e);case t.AnnotationType.LINE:return new f(e);case t.AnnotationType.SQUARE:return new x(e);case t.AnnotationType.CIRCLE:return new A(e);case t.AnnotationType.POLYLINE:return new D(e);case t.AnnotationType.CARET:return new Z(e);case t.AnnotationType.INK:return new $(e);case t.AnnotationType.POLYGON:return new L(e);case t.AnnotationType.HIGHLIGHT:return new k(e);case t.AnnotationType.UNDERLINE:return new O(e);case t.AnnotationType.SQUIGGLY:return new G(e);case t.AnnotationType.STRIKEOUT:return new H(e);case t.AnnotationType.STAMP:return new B(e);case t.AnnotationType.FILEATTACHMENT:return new K(e);default:return new g(e)}}}class g{constructor(e,{isRenderable:s=!1,ignoreBorder:n=!1,createQuadrilaterals:l=!1}={}){this.isRenderable=s,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,s&&(this.container=this._createContainer(n)),l&&(this.quadrilaterals=this._createQuadrilaterals(n))}_createContainer(e=!1){const s=this.data,n=this.page,l=this.viewport,a=document.createElement("section");let b=s.rect[2]-s.rect[0],C=s.rect[3]-s.rect[1];a.setAttribute("data-annotation-id",s.id);const I=t.Util.normalizeRect([s.rect[0],n.view[3]-s.rect[1]+n.view[1],s.rect[2],n.view[3]-s.rect[3]+n.view[1]]);if(a.style.transform=`matrix(${l.transform.join(",")})`,a.style.transformOrigin=`${-I[0]}px ${-I[1]}px`,!e&&s.borderStyle.width>0){a.style.borderWidth=`${s.borderStyle.width}px`,s.borderStyle.style!==t.AnnotationBorderStyleType.UNDERLINE&&(b-=2*s.borderStyle.width,C-=2*s.borderStyle.width);const N=s.borderStyle.horizontalCornerRadius,R=s.borderStyle.verticalCornerRadius;if(N>0||R>0){const z=`${N}px / ${R}px`;a.style.borderRadius=z}switch(s.borderStyle.style){case t.AnnotationBorderStyleType.SOLID:a.style.borderStyle="solid";break;case t.AnnotationBorderStyleType.DASHED:a.style.borderStyle="dashed";break;case t.AnnotationBorderStyleType.BEVELED:(0,t.warn)("Unimplemented border style: beveled");break;case t.AnnotationBorderStyleType.INSET:(0,t.warn)("Unimplemented border style: inset");break;case t.AnnotationBorderStyleType.UNDERLINE:a.style.borderBottomStyle="solid";break}s.borderColor||s.color||null?a.style.borderColor=t.Util.makeHexColor(s.color[0]|0,s.color[1]|0,s.color[2]|0):a.style.borderWidth=0}return a.style.left=`${I[0]}px`,a.style.top=`${I[1]}px`,a.style.width=`${b}px`,a.style.height=`${C}px`,a}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const s=[],n=this.data.rect;for(const l of this.data.quadPoints)this.data.rect=[l[2].x,l[2].y,l[1].x,l[1].y],s.push(this._createContainer(e));return this.data.rect=n,s}_createPopup(e,s){let n=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,n=this.quadrilaterals[0]),e||(e=document.createElement("div"),e.style.height=n.style.height,e.style.width=n.style.width,n.appendChild(e));const a=new r({container:n,trigger:e,color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,hideWrapper:!0}).render();a.style.left=n.style.width,n.appendChild(a)}_renderQuadrilaterals(e){for(const s of this.quadrilaterals)s.className=e;return this.quadrilaterals}render(){(0,t.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,s=null){const n=[];if(this._fieldObjects){const l=this._fieldObjects[e];if(l)for(const{page:a,id:b,exportValues:C}of l){if(a===-1||b===s)continue;const I=typeof C=="string"?C:null,N=document.getElementById(b);if(N&&!S.has(N)){(0,t.warn)(`_getElementsByName - element not allowed: ${b}`);continue}n.push({id:b,exportValue:I,domElement:N})}return n}for(const l of document.getElementsByName(e)){const{id:a,exportValue:b}=l;a!==s&&(!S.has(l)||n.push({id:a,exportValue:b,domElement:l}))}return n}static get platform(){const e=typeof navigator!="undefined"?navigator.platform:"";return(0,t.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class v extends g{constructor(e){const s=!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"]));super(e,{isRenderable:s,createQuadrilaterals:!0})}render(){var l;const{data:e,linkService:s}=this,n=document.createElement("a");if(e.url)s.addLinkAttributes||(0,t.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),(l=s.addLinkAttributes)==null||l.call(s,n,e.url,e.newWindow);else if(e.action)this._bindNamedAction(n,e.action);else if(e.dest)this._bindLink(n,e.dest);else{let a=!1;e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(a=!0,this._bindJSAction(n,e)),e.resetForm?this._bindResetFormAction(n,e.resetForm):a||this._bindLink(n,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((a,b)=>{const C=b===0?n:n.cloneNode();return a.appendChild(C),a}):(this.container.className="linkAnnotation",this.container.appendChild(n),this.container)}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&(e.className="internalLink")}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),e.className="internalLink"}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(s.actions)){const a=n.get(l);!a||(e[a]=()=>{var b;return(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:l}}),!1})}e.onclick||(e.onclick=()=>!1),e.className="internalLink"}_bindResetFormAction(e,s){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects){(0,t.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var R;n&&n();const{fields:l,refs:a,include:b}=s,C=[];if(l.length!==0||a.length!==0){const q=new Set(a);for(const z of l){const Y=this._fieldObjects[z]||[];for(const{id:J}of Y)q.add(J)}for(const z of Object.values(this._fieldObjects))for(const Y of z)q.has(Y.id)===b&&C.push(Y)}else for(const q of Object.values(this._fieldObjects))C.push(...q);const I=this.annotationStorage,N=[];for(const q of C){const{id:z}=q;switch(N.push(z),q.type){case"text":{const J=q.defaultValue||"";I.setValue(z,{value:J,valueAsString:J});break}case"checkbox":case"radiobutton":{const J=q.defaultValue===q.exportValues;I.setValue(z,{value:J});break}case"combobox":case"listbox":{const J=q.defaultValue||"";I.setValue(z,{value:J});break}default:continue}const Y=document.getElementById(z);!Y||!S.has(Y)||Y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:N,name:"ResetForm"}})),!1}}}class E extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class _ extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:s,isMac:n}=g.platform;return s&&e.ctrlKey||n&&e.metaKey}_setEventListener(e,s,n,l){s.includes("mouse")?e.addEventListener(s,a=>{var b;(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:l(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var b;(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:a.target.checked}})})}_setEventListeners(e,s,n){var l;for(const[a,b]of s)(b==="Action"||((l=this.data.actions)==null?void 0:l[b]))&&this._setEventListener(e,a,b,n)}_setBackgroundColor(e){const s=this.data.backgroundColor||null;e.style.backgroundColor=s===null?"transparent":t.Util.makeHexColor(s[0],s[1],s[2])}_dispatchEventFromSandbox(e,s){const n=(a,b,C)=>{const I=C.detail[a];C.target.style[b]=T.ColorConverters[`${I[0]}_HTML`](I.slice(1))},l={display:a=>{const b=a.detail.display%2===1;a.target.style.visibility=b?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:b,print:a.detail.display===0||a.detail.display===3})},print:a=>{this.annotationStorage.setValue(this.data.id,{print:a.detail.print})},hidden:a=>{a.target.style.visibility=a.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:a.detail.hidden})},focus:a=>{setTimeout(()=>a.target.focus({preventScroll:!1}),0)},userName:a=>{a.target.title=a.detail.userName},readonly:a=>{a.detail.readonly?a.target.setAttribute("readonly",""):a.target.removeAttribute("readonly")},required:a=>{a.detail.required?a.target.setAttribute("required",""):a.target.removeAttribute("required")},bgColor:a=>{n("bgColor","backgroundColor",a)},fillColor:a=>{n("fillColor","backgroundColor",a)},fgColor:a=>{n("fgColor","color",a)},textColor:a=>{n("textColor","color",a)},borderColor:a=>{n("borderColor","borderColor",a)},strokeColor:a=>{n("strokeColor","borderColor",a)}};for(const a of Object.keys(s.detail)){const b=e[a]||l[a];b&&b(s)}}}class M extends _{constructor(e){const s=e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:s})}setPropertyOnSiblings(e,s,n,l){const a=this.annotationStorage;for(const b of this._getElementsByName(e.name,e.id))b.domElement&&(b.domElement[s]=n),a.setValue(b.id,{[l]:n})}render(){var l;const e=this.annotationStorage,s=this.data.id;this.container.className="textWidgetAnnotation";let n=null;if(this.renderForms){const a=e.getValue(s,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),b=a.valueAsString||a.value||"",C={userValue:null,formattedValue:null,beforeInputSelectionRange:null,beforeInputValue:null};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=b):(n=document.createElement("input"),n.type="text",n.setAttribute("value",b)),S.add(n),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=m,C.userValue=b,n.setAttribute("id",s),n.addEventListener("input",N=>{e.setValue(s,{value:N.target.value}),this.setPropertyOnSiblings(n,"value",N.target.value,"value")}),n.addEventListener("resetform",N=>{const R=this.data.defaultFieldValue||"";n.value=C.userValue=R,delete C.formattedValue});let I=N=>{C.formattedValue&&(N.target.value=C.formattedValue),N.target.scrollLeft=0,C.beforeInputSelectionRange=null};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",R=>{C.userValue&&(R.target.value=C.userValue)}),n.addEventListener("updatefromsandbox",R=>{const q={value(z){C.userValue=z.detail.value||"",e.setValue(s,{value:C.userValue.toString()}),C.formattedValue||(z.target.value=C.userValue)},valueAsString(z){C.formattedValue=z.detail.valueAsString||"",z.target!==document.activeElement&&(z.target.value=C.formattedValue),e.setValue(s,{formattedValue:C.formattedValue})},selRange(z){const[Y,J]=z.detail.selRange;Y>=0&&J<z.target.value.length&&z.target.setSelectionRange(Y,J)}};this._dispatchEventFromSandbox(q,R)}),n.addEventListener("keydown",R=>{var z;C.beforeInputValue=R.target.value;let q=-1;R.key==="Escape"?q=0:R.key==="Enter"?q=2:R.key==="Tab"&&(q=3),q!==-1&&(C.userValue=R.target.value,(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:R.target.value,willCommit:!0,commitKey:q,selStart:R.target.selectionStart,selEnd:R.target.selectionEnd}}))});const N=I;I=null,n.addEventListener("blur",R=>{var q;this._mouseState.isDown&&(C.userValue=R.target.value,(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:R.target.value,willCommit:!0,commitKey:1,selStart:R.target.selectionStart,selEnd:R.target.selectionEnd}})),N(R)}),n.addEventListener("mousedown",R=>{C.beforeInputValue=R.target.value,C.beforeInputSelectionRange=null}),n.addEventListener("keyup",R=>{R.target.selectionStart===R.target.selectionEnd&&(C.beforeInputSelectionRange=null)}),n.addEventListener("select",R=>{C.beforeInputSelectionRange=[R.target.selectionStart,R.target.selectionEnd]}),((l=this.data.actions)==null?void 0:l.Keystroke)&&n.addEventListener("input",R=>{var Y;let q=-1,z=-1;C.beforeInputSelectionRange&&([q,z]=C.beforeInputSelectionRange),(Y=this.linkService.eventBus)==null||Y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:C.beforeInputValue,change:R.data,willCommit:!1,selStart:q,selEnd:z}})}),this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],R=>R.target.value)}if(I&&n.addEventListener("blur",I),this.data.maxLen!==null&&(n.maxLength=this.data.maxLen),this.data.comb){const R=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;n.classList.add("comb"),n.style.letterSpacing=`calc(${R}px - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this._setBackgroundColor(n),this.container.appendChild(n),this.container}_setTextStyle(e){const s=["left","center","right"],{fontSize:n,fontColor:l}=this.data.defaultAppearanceData,a=e.style;n&&(a.fontSize=`${n}px`),a.color=t.Util.makeHexColor(l[0],l[1],l[2]),this.data.textAlignment!==null&&(a.textAlign=s[this.data.textAlignment])}}class c extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,s=this.data,n=s.id;let l=e.getValue(n,{value:s.exportValue===s.fieldValue}).value;typeof l=="string"&&(l=l!=="Off",e.setValue(n,{value:l})),this.container.className="buttonWidgetAnnotation checkBox";const a=document.createElement("input");return S.add(a),a.disabled=s.readOnly,a.type="checkbox",a.name=s.fieldName,l&&a.setAttribute("checked",!0),a.setAttribute("id",n),a.setAttribute("exportValue",s.exportValue),a.tabIndex=m,a.addEventListener("change",b=>{const{name:C,checked:I}=b.target;for(const N of this._getElementsByName(C,n)){const R=I&&N.exportValue===s.exportValue;N.domElement&&(N.domElement.checked=R),e.setValue(N.id,{value:R})}e.setValue(n,{value:I})}),a.addEventListener("resetform",b=>{const C=s.defaultFieldValue||"Off";b.target.checked=C===s.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",b=>{const C={value(I){I.target.checked=I.detail.value!=="Off",e.setValue(n,{value:I.target.checked})}};this._dispatchEventFromSandbox(C,b)}),this._setEventListeners(a,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.checked)),this._setBackgroundColor(a),this.container.appendChild(a),this.container}}class F extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,s=this.data,n=s.id;let l=e.getValue(n,{value:s.fieldValue===s.buttonValue}).value;typeof l=="string"&&(l=l!==s.buttonValue,e.setValue(n,{value:l}));const a=document.createElement("input");if(S.add(a),a.disabled=s.readOnly,a.type="radio",a.name=s.fieldName,l&&a.setAttribute("checked",!0),a.setAttribute("id",n),a.tabIndex=m,a.addEventListener("change",b=>{const{name:C,checked:I}=b.target;for(const N of this._getElementsByName(C,n))e.setValue(N.id,{value:!1});e.setValue(n,{value:I})}),a.addEventListener("resetform",b=>{const C=s.defaultFieldValue;b.target.checked=C!=null&&C===s.buttonValue}),this.enableScripting&&this.hasJSActions){const b=s.buttonValue;a.addEventListener("updatefromsandbox",C=>{const I={value:N=>{const R=b===N.detail.value;for(const q of this._getElementsByName(N.target.name)){const z=R&&q.id===n;q.domElement&&(q.domElement.checked=z),e.setValue(q.id,{value:z})}}};this._dispatchEventFromSandbox(I,C)}),this._setEventListeners(a,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],C=>C.target.checked)}return this._setBackgroundColor(a),this.container.appendChild(a),this.container}}class V extends v{render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),e}}class U extends _{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,s=this.data.id;e.getValue(s,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});let{fontSize:n}=this.data.defaultAppearanceData;n||(n=9);const l=`calc(${n}px * var(--zoom-factor))`,a=document.createElement("select");S.add(a),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.setAttribute("id",s),a.tabIndex=m,a.style.fontSize=`${n}px`,this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",I=>{const N=this.data.defaultFieldValue;for(const R of a.options)R.selected=R.value===N});for(const I of this.data.options){const N=document.createElement("option");N.textContent=I.displayValue,N.value=I.exportValue,this.data.combo&&(N.style.fontSize=l),this.data.fieldValue.includes(I.exportValue)&&N.setAttribute("selected",!0),a.appendChild(N)}const b=(I,N)=>{const R=N?"value":"textContent",q=I.target.options;return I.target.multiple?Array.prototype.filter.call(q,z=>z.selected).map(z=>z[R]):q.selectedIndex===-1?null:q[q.selectedIndex][R]},C=I=>{const N=I.target.options;return Array.prototype.map.call(N,R=>({displayValue:R.textContent,exportValue:R.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",I=>{const N={value(R){const q=R.detail.value,z=new Set(Array.isArray(q)?q:[q]);for(const Y of a.options)Y.selected=z.has(Y.value);e.setValue(s,{value:b(R,!0)})},multipleSelection(R){a.multiple=!0},remove(R){const q=a.options,z=R.detail.remove;q[z].selected=!1,a.remove(z),q.length>0&&Array.prototype.findIndex.call(q,J=>J.selected)===-1&&(q[0].selected=!0),e.setValue(s,{value:b(R,!0),items:C(R)})},clear(R){for(;a.length!==0;)a.remove(0);e.setValue(s,{value:null,items:[]})},insert(R){const{index:q,displayValue:z,exportValue:Y}=R.detail.insert,J=document.createElement("option");J.textContent=z,J.value=Y,a.insertBefore(J,a.children[q]),e.setValue(s,{value:b(R,!0),items:C(R)})},items(R){const{items:q}=R.detail;for(;a.length!==0;)a.remove(0);for(const z of q){const{displayValue:Y,exportValue:J}=z,ie=document.createElement("option");ie.textContent=Y,ie.value=J,a.appendChild(ie)}a.options.length>0&&(a.options[0].selected=!0),e.setValue(s,{value:b(R,!0),items:C(R)})},indices(R){const q=new Set(R.detail.indices);for(const z of R.target.options)z.selected=q.has(z.index);e.setValue(s,{value:b(R,!0)})},editable(R){R.target.disabled=!R.detail.editable}};this._dispatchEventFromSandbox(N,I)}),a.addEventListener("input",I=>{var q;const N=b(I,!0),R=b(I,!1);e.setValue(s,{value:N}),(q=this.linkService.eventBus)==null||q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:R,changeEx:N,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],I=>I.target.checked)):a.addEventListener("input",function(I){e.setValue(s,{value:b(I)})}),this._setBackgroundColor(a),this.container.appendChild(a),this.container}}class P extends g{constructor(e){var n,l;const s=!!(((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s})}render(){const e=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",e.includes(this.data.parentType))return this.container;const s=`[data-annotation-id="${this.data.parentId}"]`,n=this.layer.querySelectorAll(s);if(n.length===0)return this.container;const l=new r({container:this.container,trigger:Array.from(n),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj}),a=this.page,b=t.Util.normalizeRect([this.data.parentRect[0],a.view[3]-this.data.parentRect[1]+a.view[1],this.data.parentRect[2],a.view[3]-this.data.parentRect[3]+a.view[1]]),C=b[0]+this.data.parentRect[2]-this.data.parentRect[0],I=b[1];return this.container.style.transformOrigin=`${-C}px ${-I}px`,this.container.style.left=`${C}px`,this.container.style.top=`${I}px`,this.container.appendChild(l.render()),this.container}}class r{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const s=document.createElement("div");s.className="popupWrapper",this.hideElement=this.hideWrapper?s:this.container,this.hideElement.hidden=!0;const n=document.createElement("div");n.className="popup";const l=this.color;if(l){const I=.7*(255-l[0])+l[0],N=.7*(255-l[1])+l[1],R=.7*(255-l[2])+l[2];n.style.backgroundColor=t.Util.makeHexColor(I|0,N|0,R|0)}const a=document.createElement("h1");a.dir=this.titleObj.dir,a.textContent=this.titleObj.str,n.appendChild(a);const b=p.PDFDateString.toDateObject(this.modificationDate);if(b){const I=document.createElement("span");I.textContent="{{date}}, {{time}}",I.dataset.l10nId="annotation_date_string",I.dataset.l10nArgs=JSON.stringify({date:b.toLocaleDateString(),time:b.toLocaleTimeString()}),n.appendChild(I)}const C=this._formatContents(this.contentsObj);n.appendChild(C),Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const I of this.trigger)I.addEventListener("click",this._toggle.bind(this)),I.addEventListener("mouseover",this._show.bind(this,!1)),I.addEventListener("mouseout",this._hide.bind(this,!1));return n.addEventListener("click",this._hide.bind(this,!0)),s.appendChild(n),s}_formatContents({str:e,dir:s}){const n=document.createElement("p");n.dir=s;const l=e.split(/(?:\r\n?|\n)/);for(let a=0,b=l.length;a<b;++a){const C=l[a];n.appendChild(document.createTextNode(C)),a<b-1&&n.appendChild(document.createElement("br"))}return n}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class i extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class f extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,s=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],l=this.svgFactory.create(s,n),a=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),l.appendChild(a),this.container.append(l),this._createPopup(a,e),this.container}}class x extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,s=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],l=this.svgFactory.create(s,n),a=e.borderStyle.width,b=this.svgFactory.createElement("svg:rect");return b.setAttribute("x",a/2),b.setAttribute("y",a/2),b.setAttribute("width",s-a),b.setAttribute("height",n-a),b.setAttribute("stroke-width",a||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","none"),l.appendChild(b),this.container.append(l),this._createPopup(b,e),this.container}}class A extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,s=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],l=this.svgFactory.create(s,n),a=e.borderStyle.width,b=this.svgFactory.createElement("svg:ellipse");return b.setAttribute("cx",s/2),b.setAttribute("cy",n/2),b.setAttribute("rx",s/2-a/2),b.setAttribute("ry",n/2-a/2),b.setAttribute("stroke-width",a||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","none"),l.appendChild(b),this.container.append(l),this._createPopup(b,e),this.container}}class D extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0});this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,s=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],l=this.svgFactory.create(s,n);let a=[];for(const C of e.vertices){const I=C.x-e.rect[0],N=e.rect[3]-C.y;a.push(I+","+N)}a=a.join(" ");const b=this.svgFactory.createElement(this.svgElementName);return b.setAttribute("points",a),b.setAttribute("stroke-width",e.borderStyle.width||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","none"),l.appendChild(b),this.container.append(l),this._createPopup(b,e),this.container}}class L extends D{constructor(e){super(e);this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Z extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class $ extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0});this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,s=e.rect[2]-e.rect[0],n=e.rect[3]-e.rect[1],l=this.svgFactory.create(s,n);for(const a of e.inkLists){let b=[];for(const I of a){const N=I.x-e.rect[0],R=e.rect[3]-I.y;b.push(`${N},${R}`)}b=b.join(" ");const C=this.svgFactory.createElement(this.svgElementName);C.setAttribute("points",b),C.setAttribute("stroke-width",e.borderStyle.width||1),C.setAttribute("stroke","transparent"),C.setAttribute("fill","none"),this._createPopup(C,e),l.appendChild(C)}return this.container.append(l),this.container}}class k extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class O extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class G extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class H extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class B extends g{constructor(e){var n,l;const s=!!(e.data.hasPopup||((n=e.data.titleObj)==null?void 0:n.str)||((l=e.data.contentsObj)==null?void 0:l.str));super(e,{isRenderable:s,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class K extends g{constructor(e){super(e,{isRenderable:!0});var l;const{filename:s,content:n}=this.data.file;this.filename=(0,p.getFilenameFromUrl)(s),this.content=n,(l=this.linkService.eventBus)==null||l.dispatch("fileattachmentannotation",{source:this,id:(0,t.stringToPDFString)(s),filename:s,content:n})}render(){var s,n;this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((s=this.data.titleObj)==null?void 0:s.str)||((n=this.data.contentsObj)==null?void 0:n.str))&&this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.container,this.content,this.filename)}}class w{static render(e){const s=[],n=[];for(const l of e.annotations)if(!!l){if(l.annotationType===t.AnnotationType.POPUP){n.push(l);continue}s.push(l)}n.length&&s.push(...n);for(const l of s){const a=u.create({data:l,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new p.DOMSVGFactory,annotationStorage:e.annotationStorage||new y.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(a.isRenderable){const b=a.render();if(l.hidden&&(b.style.visibility="hidden"),Array.isArray(b))for(const C of b)e.div.appendChild(C);else a instanceof P?e.div.prepend(b):e.div.appendChild(b)}}}static update(e){const s=`matrix(${e.viewport.transform.join(",")})`;for(const n of e.annotations){const l=e.div.querySelectorAll(`[data-annotation-id="${n.id}"]`);if(l)for(const a of l)a.style.transform=s}e.div.hidden=!1}}h.AnnotationLayer=w},(Q,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ColorConverters=void 0;function d(p){return Math.floor(Math.max(0,Math.min(1,p))*255).toString(16).padStart(2,"0")}class t{static CMYK_G([y,T,m,S]){return["G",1-Math.min(1,.3*y+.59*m+.11*T+S)]}static G_CMYK([y]){return["CMYK",0,0,0,1-y]}static G_RGB([y]){return["RGB",y,y,y]}static G_HTML([y]){const T=d(y);return`#${T}${T}${T}`}static RGB_G([y,T,m]){return["G",.3*y+.59*T+.11*m]}static RGB_HTML([y,T,m]){const S=d(y),u=d(T),g=d(m);return`#${S}${u}${g}`}static T_HTML(){return"#00000000"}static CMYK_RGB([y,T,m,S]){return["RGB",1-Math.min(1,y+S),1-Math.min(1,m+S),1-Math.min(1,T+S)]}static CMYK_HTML(y){return this.RGB_HTML(this.CMYK_RGB(y))}static RGB_CMYK([y,T,m]){const S=1-y,u=1-T,g=1-m,v=Math.min(S,u,g);return["CMYK",S,u,g,v]}}h.ColorConverters=t},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.renderTextLayer=V;var t=d(2);const p=1e5,y=30,T=.8,m=new Map,S=/^\s+$/g;function u(U,P){const r=m.get(U);if(r)return r;P.save(),P.font=`${y}px ${U}`;const i=P.measureText("");let f=i.fontBoundingBoxAscent,x=Math.abs(i.fontBoundingBoxDescent);if(f){P.restore();const D=f/(f+x);return m.set(U,D),D}P.strokeStyle="red",P.clearRect(0,0,y,y),P.strokeText("g",0,0);let A=P.getImageData(0,0,y,y).data;x=0;for(let D=A.length-1-3;D>=0;D-=4)if(A[D]>0){x=Math.ceil(D/4/y);break}P.clearRect(0,0,y,y),P.strokeText("A",0,y),A=P.getImageData(0,0,y,y).data,f=0;for(let D=0,L=A.length;D<L;D+=4)if(A[D]>0){f=y-Math.floor(D/4/y);break}if(P.restore(),f){const D=f/(f+x);return m.set(U,D),D}return m.set(U,T),T}function g(U,P,r,i){const f=document.createElement("span"),x=U._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:P.str!=="",hasEOL:P.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:P.str!=="",hasEOL:P.hasEOL};U._textDivs.push(f);const A=t.Util.transform(U._viewport.transform,P.transform);let D=Math.atan2(A[1],A[0]);const L=r[P.fontName];L.vertical&&(D+=Math.PI/2);const Z=Math.hypot(A[2],A[3]),$=Z*u(L.fontFamily,i);let k,O;D===0?(k=A[4],O=A[5]-$):(k=A[4]+$*Math.sin(D),O=A[5]-$*Math.cos(D)),f.style.left=`${k}px`,f.style.top=`${O}px`,f.style.fontSize=`${Z}px`,f.style.fontFamily=L.fontFamily,f.setAttribute("role","presentation"),f.textContent=P.str,f.dir=P.dir,U._fontInspectorEnabled&&(f.dataset.fontName=P.fontName),D!==0&&(x.angle=D*(180/Math.PI));let G=!1;if(P.str.length>1||U._enhanceTextSelection&&S.test(P.str))G=!0;else if(P.transform[0]!==P.transform[3]){const H=Math.abs(P.transform[0]),B=Math.abs(P.transform[3]);H!==B&&Math.max(H,B)/Math.min(H,B)>1.5&&(G=!0)}if(G&&(L.vertical?x.canvasWidth=P.height*U._viewport.scale:x.canvasWidth=P.width*U._viewport.scale),U._textDivProperties.set(f,x),U._textContentStream&&U._layoutText(f),U._enhanceTextSelection&&x.hasText){let H=1,B=0;D!==0&&(H=Math.cos(D),B=Math.sin(D));const K=(L.vertical?P.height:P.width)*U._viewport.scale,w=Z;let o,e;D!==0?(o=[H,B,-B,H,k,O],e=t.Util.getAxialAlignedBoundingBox([0,0,K,w],o)):e=[k,O,k+K,O+w],U._bounds.push({left:e[0],top:e[1],right:e[2],bottom:e[3],div:f,size:[K,w],m:o})}}function v(U){if(U._canceled)return;const P=U._textDivs,r=U._capability,i=P.length;if(i>p){U._renderingDone=!0,r.resolve();return}if(!U._textContentStream)for(let f=0;f<i;f++)U._layoutText(P[f]);U._renderingDone=!0,r.resolve()}function E(U,P,r){let i=0;for(let f=0;f<r;f++){const x=U[P++];x>0&&(i=i?Math.min(x,i):x)}return i}function _(U){const P=U._bounds,r=U._viewport,i=M(r.width,r.height,P);for(let f=0;f<i.length;f++){const x=P[f].div,A=U._textDivProperties.get(x);if(A.angle===0){A.paddingLeft=P[f].left-i[f].left,A.paddingTop=P[f].top-i[f].top,A.paddingRight=i[f].right-P[f].right,A.paddingBottom=i[f].bottom-P[f].bottom,U._textDivProperties.set(x,A);continue}const D=i[f],L=P[f],Z=L.m,$=Z[0],k=Z[1],O=[[0,0],[0,L.size[1]],[L.size[0],0],L.size],G=new Float64Array(64);for(let B=0,K=O.length;B<K;B++){const w=t.Util.applyTransform(O[B],Z);G[B+0]=$&&(D.left-w[0])/$,G[B+4]=k&&(D.top-w[1])/k,G[B+8]=$&&(D.right-w[0])/$,G[B+12]=k&&(D.bottom-w[1])/k,G[B+16]=k&&(D.left-w[0])/-k,G[B+20]=$&&(D.top-w[1])/$,G[B+24]=k&&(D.right-w[0])/-k,G[B+28]=$&&(D.bottom-w[1])/$,G[B+32]=$&&(D.left-w[0])/-$,G[B+36]=k&&(D.top-w[1])/-k,G[B+40]=$&&(D.right-w[0])/-$,G[B+44]=k&&(D.bottom-w[1])/-k,G[B+48]=k&&(D.left-w[0])/k,G[B+52]=$&&(D.top-w[1])/-$,G[B+56]=k&&(D.right-w[0])/k,G[B+60]=$&&(D.bottom-w[1])/-$}const H=1+Math.min(Math.abs($),Math.abs(k));A.paddingLeft=E(G,32,16)/H,A.paddingTop=E(G,48,16)/H,A.paddingRight=E(G,0,16)/H,A.paddingBottom=E(G,16,16)/H,U._textDivProperties.set(x,A)}}function M(U,P,r){const i=r.map(function(x,A){return{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom,index:A,x1New:void 0,x2New:void 0}});c(U,i);const f=new Array(r.length);for(const x of i){const A=x.index;f[A]={left:x.x1New,top:0,right:x.x2New,bottom:0}}r.map(function(x,A){const D=f[A],L=i[A];L.x1=x.top,L.y1=U-D.right,L.x2=x.bottom,L.y2=U-D.left,L.index=A,L.x1New=void 0,L.x2New=void 0}),c(P,i);for(const x of i){const A=x.index;f[A].top=x.x1New,f[A].bottom=x.x2New}return f}function c(U,P){P.sort(function(f,x){return f.x1-x.x1||f.index-x.index});const i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const f of P){let x=0;for(;x<i.length&&i[x].end<=f.y1;)x++;let A=i.length-1;for(;A>=0&&i[A].start>=f.y2;)A--;let D,L,Z,$,k=-1/0;for(Z=x;Z<=A;Z++){D=i[Z],L=D.boundary;let H;L.x2>f.x1?H=L.index>f.index?L.x1New:f.x1:L.x2New===void 0?H=(L.x2+f.x1)/2:H=L.x2New,H>k&&(k=H)}for(f.x1New=k,Z=x;Z<=A;Z++)D=i[Z],L=D.boundary,L.x2New===void 0?L.x2>f.x1?L.index>f.index&&(L.x2New=L.x2):L.x2New=k:L.x2New>k&&(L.x2New=Math.max(k,L.x2));const O=[];let G=null;for(Z=x;Z<=A;Z++){D=i[Z],L=D.boundary;const H=L.x2>f.x2?L:f;G===H?O[O.length-1].end=D.end:(O.push({start:D.start,end:D.end,boundary:H}),G=H)}for(i[x].start<f.y1&&(O[0].start=f.y1,O.unshift({start:i[x].start,end:f.y1,boundary:i[x].boundary})),f.y2<i[A].end&&(O[O.length-1].end=f.y2,O.push({start:f.y2,end:i[A].end,boundary:i[A].boundary})),Z=x;Z<=A;Z++){if(D=i[Z],L=D.boundary,L.x2New!==void 0)continue;let H=!1;for($=x-1;!H&&$>=0&&i[$].start>=L.y1;$--)H=i[$].boundary===L;for($=A+1;!H&&$<i.length&&i[$].end<=L.y2;$++)H=i[$].boundary===L;for($=0;!H&&$<O.length;$++)H=O[$].boundary===L;H||(L.x2New=k)}Array.prototype.splice.apply(i,[x,A-x+1].concat(O))}for(const f of i){const x=f.boundary;x.x2New===void 0&&(x.x2New=Math.max(U,x.x2))}}class F{constructor({textContent:P,textContentStream:r,container:i,viewport:f,textDivs:x,textContentItemsStr:A,enhanceTextSelection:D}){var L;this._textContent=P,this._textContentStream=r,this._container=i,this._document=i.ownerDocument,this._viewport=f,this._textDivs=x||[],this._textContentItemsStr=A||[],this._enhanceTextSelection=!!D,this._fontInspectorEnabled=!!((L=globalThis.FontInspector)==null?void 0:L.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,t.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new t.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(P,r){for(let i=0,f=P.length;i<f;i++){if(P[i].str===void 0){if(P[i].type==="beginMarkedContentProps"||P[i].type==="beginMarkedContent"){const x=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P[i].id!==null&&this._container.setAttribute("id",`${P[i].id}`),x.appendChild(this._container)}else P[i].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P[i].str),g(this,P[i],r,this._layoutTextCtx)}}_layoutText(P){const r=this._textDivProperties.get(P);let i="";if(r.canvasWidth!==0&&r.hasText){const{fontSize:f,fontFamily:x}=P.style;(f!==this._layoutTextLastFontSize||x!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${f} ${x}`,this._layoutTextLastFontSize=f,this._layoutTextLastFontFamily=x);const{width:A}=this._layoutTextCtx.measureText(P.textContent);if(A>0){const D=r.canvasWidth/A;this._enhanceTextSelection&&(r.scale=D),i=`scaleX(${D})`}}if(r.angle!==0&&(i=`rotate(${r.angle}deg) ${i}`),i.length>0&&(this._enhanceTextSelection&&(r.originalTransform=i),P.style.transform=i),r.hasText&&this._container.appendChild(P),r.hasEOL){const f=document.createElement("br");f.setAttribute("role","presentation"),this._container.appendChild(f)}}_render(P=0){const r=(0,t.createPromiseCapability)();let i=Object.create(null);const f=this._document.createElement("canvas");if(f.height=f.width=y,f.mozOpaque=!0,this._layoutTextCtx=f.getContext("2d",{alpha:!1}),this._textContent){const x=this._textContent.items,A=this._textContent.styles;this._processItems(x,A),r.resolve()}else if(this._textContentStream){const x=()=>{this._reader.read().then(({value:A,done:D})=>{if(D){r.resolve();return}Object.assign(i,A.styles),this._processItems(A.items,i),x()},r.reject)};this._reader=this._textContentStream.getReader(),x()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');r.promise.then(()=>{i=null,P?this._renderTimer=setTimeout(()=>{v(this),this._renderTimer=null},P):v(this)},this._capability.reject)}expandTextDivs(P=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(_(this),this._bounds=null);const r=[],i=[];for(let f=0,x=this._textDivs.length;f<x;f++){const A=this._textDivs[f],D=this._textDivProperties.get(A);!D.hasText||(P?(r.length=0,i.length=0,D.originalTransform&&r.push(D.originalTransform),D.paddingTop>0?(i.push(`${D.paddingTop}px`),r.push(`translateY(${-D.paddingTop}px)`)):i.push(0),D.paddingRight>0?i.push(`${D.paddingRight/D.scale}px`):i.push(0),D.paddingBottom>0?i.push(`${D.paddingBottom}px`):i.push(0),D.paddingLeft>0?(i.push(`${D.paddingLeft/D.scale}px`),r.push(`translateX(${-D.paddingLeft/D.scale}px)`)):i.push(0),A.style.padding=i.join(" "),r.length&&(A.style.transform=r.join(" "))):(A.style.padding=null,A.style.transform=D.originalTransform))}}}function V(U){const P=new F({textContent:U.textContent,textContentStream:U.textContentStream,container:U.container,viewport:U.viewport,textDivs:U.textDivs,textContentItemsStr:U.textContentItemsStr,enhanceTextSelection:U.enhanceTextSelection});return P._render(U.timeout),P}},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.SVGGraphics=void 0;var t=d(2),p=d(1),y=d(4);let T=class{constructor(){(0,t.unreachable)("Not implemented: SVGGraphics")}};h.SVGGraphics=T;{let M=function(r){let i=[];const f=[];for(const x of r){if(x.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),f.push(i),i=i[i.length-1].items;continue}x.fn==="restore"?i=f.pop():i.push(x)}return i},c=function(r){if(Number.isInteger(r))return r.toString();const i=r.toFixed(10);let f=i.length-1;if(i[f]!=="0")return i;do f--;while(i[f]==="0");return i.substring(0,i[f]==="."?f:f+1)},F=function(r){if(r[4]===0&&r[5]===0){if(r[1]===0&&r[2]===0)return r[0]===1&&r[3]===1?"":`scale(${c(r[0])} ${c(r[3])})`;if(r[0]===r[3]&&r[1]===-r[2]){const i=Math.acos(r[0])*180/Math.PI;return`rotate(${c(i)})`}}else if(r[0]===1&&r[1]===0&&r[2]===0&&r[3]===1)return`translate(${c(r[4])} ${c(r[5])})`;return`matrix(${c(r[0])} ${c(r[1])} ${c(r[2])} ${c(r[3])} ${c(r[4])} ${c(r[5])})`};const m={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},S="http://www.w3.org/XML/1998/namespace",u="http://www.w3.org/1999/xlink",g=["butt","round","square"],v=["miter","round","bevel"],E=function(){const r=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,f=new Int32Array(256);for(let k=0;k<256;k++){let O=k;for(let G=0;G<8;G++)O&1?O=3988292384^O>>1&2147483647:O=O>>1&2147483647;f[k]=O}function x(k,O,G){let H=-1;for(let B=O;B<G;B++){const K=(H^k[B])&255,w=f[K];H=H>>>8^w}return H^-1}function A(k,O,G,H){let B=H;const K=O.length;G[B]=K>>24&255,G[B+1]=K>>16&255,G[B+2]=K>>8&255,G[B+3]=K&255,B+=4,G[B]=k.charCodeAt(0)&255,G[B+1]=k.charCodeAt(1)&255,G[B+2]=k.charCodeAt(2)&255,G[B+3]=k.charCodeAt(3)&255,B+=4,G.set(O,B),B+=O.length;const w=x(G,H+4,B);G[B]=w>>24&255,G[B+1]=w>>16&255,G[B+2]=w>>8&255,G[B+3]=w&255}function D(k,O,G){let H=1,B=0;for(let K=O;K<G;++K)H=(H+(k[K]&255))%65521,B=(B+H)%65521;return B<<16|H}function L(k){if(!y.isNodeJS)return Z(k);try{let O;parseInt(process.versions.node)>=8?O=k:O=Buffer.from(k);const G=require("zlib").deflateSync(O,{level:9});return G instanceof Uint8Array?G:new Uint8Array(G)}catch(O){(0,t.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+O)}return Z(k)}function Z(k){let O=k.length;const G=65535,H=Math.ceil(O/G),B=new Uint8Array(2+O+H*5+4);let K=0;B[K++]=120,B[K++]=156;let w=0;for(;O>G;)B[K++]=0,B[K++]=255,B[K++]=255,B[K++]=0,B[K++]=0,B.set(k.subarray(w,w+G),K),K+=G,w+=G,O-=G;B[K++]=1,B[K++]=O&255,B[K++]=O>>8&255,B[K++]=~O&65535&255,B[K++]=(~O&65535)>>8&255,B.set(k.subarray(w),K),K+=k.length-w;const o=D(k,0,k.length);return B[K++]=o>>24&255,B[K++]=o>>16&255,B[K++]=o>>8&255,B[K++]=o&255,B}function $(k,O,G,H){const B=k.width,K=k.height;let w,o,e;const s=k.data;switch(O){case t.ImageKind.GRAYSCALE_1BPP:o=0,w=1,e=B+7>>3;break;case t.ImageKind.RGB_24BPP:o=2,w=8,e=B*3;break;case t.ImageKind.RGBA_32BPP:o=6,w=8,e=B*4;break;default:throw new Error("invalid format")}const n=new Uint8Array((1+e)*K);let l=0,a=0;for(let q=0;q<K;++q)n[l++]=0,n.set(s.subarray(a,a+e),l),a+=e,l+=e;if(O===t.ImageKind.GRAYSCALE_1BPP&&H){l=0;for(let q=0;q<K;q++){l++;for(let z=0;z<e;z++)n[l++]^=255}}const b=new Uint8Array([B>>24&255,B>>16&255,B>>8&255,B&255,K>>24&255,K>>16&255,K>>8&255,K&255,w,o,0,0,0]),C=L(n),I=r.length+i*3+b.length+C.length,N=new Uint8Array(I);let R=0;return N.set(r,R),R+=r.length,A("IHDR",b,N,R),R+=i+b.length,A("IDATA",C,N,R),R+=i+C.length,A("IEND",new Uint8Array(0),N,R),(0,t.createObjectURL)(N,"image/png",G)}return function(O,G,H){const B=O.kind===void 0?t.ImageKind.GRAYSCALE_1BPP:O.kind;return $(O,B,G,H)}}();class _{constructor(){this.fontSizeScale=1,this.fontWeight=m.fontWeight,this.fontSize=0,this.textMatrix=t.IDENTITY_MATRIX,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=t.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=m.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,f){this.x=i,this.y=f}}let V=0,U=0,P=0;h.SVGGraphics=T=class{constructor(r,i,f=!1){this.svgFactory=new p.DOMSVGFactory,this.current=new _,this.transformMatrix=t.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=r,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!f,this._operatorIdMapping=[];for(const x in t.OPS)this._operatorIdMapping[t.OPS[x]]=x}save(){this.transformStack.push(this.transformMatrix);const r=this.current;this.extraStack.push(r),this.current=r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(r){this.save(),this.executeOpTree(r),this.restore()}loadDependencies(r){const i=r.fnArray,f=r.argsArray;for(let x=0,A=i.length;x<A;x++)if(i[x]===t.OPS.dependency)for(const D of f[x]){const L=D.startsWith("g_")?this.commonObjs:this.objs,Z=new Promise($=>{L.get(D,$)});this.current.dependencies.push(Z)}return Promise.all(this.current.dependencies)}transform(r,i,f,x,A,D){const L=[r,i,f,x,A,D];this.transformMatrix=t.Util.transform(this.transformMatrix,L),this.tgrp=null}getSVG(r,i){this.viewport=i;const f=this._initialize(i);return this.loadDependencies(r).then(()=>(this.transformMatrix=t.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(r)),f))}convertOpList(r){const i=this._operatorIdMapping,f=r.argsArray,x=r.fnArray,A=[];for(let D=0,L=x.length;D<L;D++){const Z=x[D];A.push({fnId:Z,fn:i[Z],args:f[D]})}return M(A)}executeOpTree(r){for(const i of r){const f=i.fn,x=i.fnId,A=i.args;switch(x|0){case t.OPS.beginText:this.beginText();break;case t.OPS.dependency:break;case t.OPS.setLeading:this.setLeading(A);break;case t.OPS.setLeadingMoveText:this.setLeadingMoveText(A[0],A[1]);break;case t.OPS.setFont:this.setFont(A);break;case t.OPS.showText:this.showText(A[0]);break;case t.OPS.showSpacedText:this.showText(A[0]);break;case t.OPS.endText:this.endText();break;case t.OPS.moveText:this.moveText(A[0],A[1]);break;case t.OPS.setCharSpacing:this.setCharSpacing(A[0]);break;case t.OPS.setWordSpacing:this.setWordSpacing(A[0]);break;case t.OPS.setHScale:this.setHScale(A[0]);break;case t.OPS.setTextMatrix:this.setTextMatrix(A[0],A[1],A[2],A[3],A[4],A[5]);break;case t.OPS.setTextRise:this.setTextRise(A[0]);break;case t.OPS.setTextRenderingMode:this.setTextRenderingMode(A[0]);break;case t.OPS.setLineWidth:this.setLineWidth(A[0]);break;case t.OPS.setLineJoin:this.setLineJoin(A[0]);break;case t.OPS.setLineCap:this.setLineCap(A[0]);break;case t.OPS.setMiterLimit:this.setMiterLimit(A[0]);break;case t.OPS.setFillRGBColor:this.setFillRGBColor(A[0],A[1],A[2]);break;case t.OPS.setStrokeRGBColor:this.setStrokeRGBColor(A[0],A[1],A[2]);break;case t.OPS.setStrokeColorN:this.setStrokeColorN(A);break;case t.OPS.setFillColorN:this.setFillColorN(A);break;case t.OPS.shadingFill:this.shadingFill(A[0]);break;case t.OPS.setDash:this.setDash(A[0],A[1]);break;case t.OPS.setRenderingIntent:this.setRenderingIntent(A[0]);break;case t.OPS.setFlatness:this.setFlatness(A[0]);break;case t.OPS.setGState:this.setGState(A[0]);break;case t.OPS.fill:this.fill();break;case t.OPS.eoFill:this.eoFill();break;case t.OPS.stroke:this.stroke();break;case t.OPS.fillStroke:this.fillStroke();break;case t.OPS.eoFillStroke:this.eoFillStroke();break;case t.OPS.clip:this.clip("nonzero");break;case t.OPS.eoClip:this.clip("evenodd");break;case t.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case t.OPS.paintImageXObject:this.paintImageXObject(A[0]);break;case t.OPS.paintInlineImageXObject:this.paintInlineImageXObject(A[0]);break;case t.OPS.paintImageMaskXObject:this.paintImageMaskXObject(A[0]);break;case t.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(A[0],A[1]);break;case t.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case t.OPS.closePath:this.closePath();break;case t.OPS.closeStroke:this.closeStroke();break;case t.OPS.closeFillStroke:this.closeFillStroke();break;case t.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case t.OPS.nextLine:this.nextLine();break;case t.OPS.transform:this.transform(A[0],A[1],A[2],A[3],A[4],A[5]);break;case t.OPS.constructPath:this.constructPath(A[0],A[1]);break;case t.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,t.warn)(`Unimplemented operator ${f}`);break}}}setWordSpacing(r){this.current.wordSpacing=r}setCharSpacing(r){this.current.charSpacing=r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(r,i,f,x,A,D){const L=this.current;L.textMatrix=L.lineMatrix=[r,i,f,x,A,D],L.textMatrixScale=Math.hypot(r,i),L.x=L.lineX=0,L.y=L.lineY=0,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${c(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",c(-L.y)),L.txtElement=this.svgFactory.createElement("svg:text"),L.txtElement.appendChild(L.tspan)}beginText(){const r=this.current;r.x=r.lineX=0,r.y=r.lineY=0,r.textMatrix=t.IDENTITY_MATRIX,r.lineMatrix=t.IDENTITY_MATRIX,r.textMatrixScale=1,r.tspan=this.svgFactory.createElement("svg:tspan"),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtgrp=this.svgFactory.createElement("svg:g"),r.xcoords=[],r.ycoords=[]}moveText(r,i){const f=this.current;f.x=f.lineX+=r,f.y=f.lineY+=i,f.xcoords=[],f.ycoords=[],f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${c(f.fontSize)}px`),f.tspan.setAttributeNS(null,"y",c(-f.y))}showText(r){const i=this.current,f=i.font,x=i.fontSize;if(x===0)return;const A=i.fontSizeScale,D=i.charSpacing,L=i.wordSpacing,Z=i.fontDirection,$=i.textHScale*Z,k=f.vertical,O=k?1:-1,G=f.defaultVMetrics,H=x*i.fontMatrix[0];let B=0;for(const o of r){if(o===null){B+=Z*L;continue}else if((0,t.isNum)(o)){B+=O*o*x/1e3;continue}const e=(o.isSpace?L:0)+D,s=o.fontChar;let n,l,a=o.width;if(k){let C;const I=o.vmetric||G;C=o.vmetric?I[1]:a*.5,C=-C*H;const N=I[2]*H;a=I?-I[0]:a,n=C/A,l=(B+N)/A}else n=B/A,l=0;(o.isInFont||f.missingFile)&&(i.xcoords.push(i.x+n),k&&i.ycoords.push(-i.y+l),i.tspan.textContent+=s);let b;k?b=a*H-e*Z:b=a*H+e*Z,B+=b}i.tspan.setAttributeNS(null,"x",i.xcoords.map(c).join(" ")),k?i.tspan.setAttributeNS(null,"y",i.ycoords.map(c).join(" ")):i.tspan.setAttributeNS(null,"y",c(-i.y)),k?i.y-=B:i.x+=B*$,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${c(i.fontSize)}px`),i.fontStyle!==m.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==m.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const K=i.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;if(K===t.TextRenderingMode.FILL||K===t.TextRenderingMode.FILL_STROKE?(i.fillColor!==m.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.textRenderingMode===t.TextRenderingMode.ADD_TO_PATH?i.tspan.setAttributeNS(null,"fill","transparent"):i.tspan.setAttributeNS(null,"fill","none"),K===t.TextRenderingMode.STROKE||K===t.TextRenderingMode.FILL_STROKE){const o=1/(i.textMatrixScale||1);this._setStrokeAttributes(i.tspan,o)}let w=i.textMatrix;i.textRise!==0&&(w=w.slice(),w[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${F(w)} scale(${c($)}, -1)`),i.txtElement.setAttributeNS(S,"xml:space","preserve"),i.txtElement.appendChild(i.tspan),i.txtgrp.appendChild(i.txtElement),this._ensureTransformGroup().appendChild(i.txtElement)}setLeadingMoveText(r,i){this.setLeading(-i),this.moveText(r,i)}addFontStyle(r){if(!r.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const i=(0,t.createObjectURL)(r.data,r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${r.loadedName}"; src: url(${i}); }
`}setFont(r){const i=this.current,f=this.commonObjs.get(r[0]);let x=r[1];i.font=f,this.embedFonts&&!f.missingFile&&!this.embeddedFonts[f.loadedName]&&(this.addFontStyle(f),this.embeddedFonts[f.loadedName]=f),i.fontMatrix=f.fontMatrix||t.FONT_IDENTITY_MATRIX;let A="normal";f.black?A="900":f.bold&&(A="bold");const D=f.italic?"italic":"normal";x<0?(x=-x,i.fontDirection=-1):i.fontDirection=1,i.fontSize=x,i.fontFamily=f.loadedName,i.fontWeight=A,i.fontStyle=D,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",c(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){var i;const r=this.current;r.textRenderingMode&t.TextRenderingMode.ADD_TO_PATH_FLAG&&((i=r.txtElement)==null?void 0:i.hasChildNodes())&&(r.element=r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(r){r>0&&(this.current.lineWidth=r)}setLineCap(r){this.current.lineCap=g[r]}setLineJoin(r){this.current.lineJoin=v[r]}setMiterLimit(r){this.current.miterLimit=r}setStrokeAlpha(r){this.current.strokeAlpha=r}setStrokeRGBColor(r,i,f){this.current.strokeColor=t.Util.makeHexColor(r,i,f)}setFillAlpha(r){this.current.fillAlpha=r}setFillRGBColor(r,i,f){this.current.fillColor=t.Util.makeHexColor(r,i,f),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(r){this.current.strokeColor=this._makeColorN_Pattern(r)}setFillColorN(r){this.current.fillColor=this._makeColorN_Pattern(r)}shadingFill(r){const i=this.viewport.width,f=this.viewport.height,x=t.Util.inverseTransform(this.transformMatrix),A=t.Util.applyTransform([0,0],x),D=t.Util.applyTransform([0,f],x),L=t.Util.applyTransform([i,0],x),Z=t.Util.applyTransform([i,f],x),$=Math.min(A[0],D[0],L[0],Z[0]),k=Math.min(A[1],D[1],L[1],Z[1]),O=Math.max(A[0],D[0],L[0],Z[0]),G=Math.max(A[1],D[1],L[1],Z[1]),H=this.svgFactory.createElement("svg:rect");H.setAttributeNS(null,"x",$),H.setAttributeNS(null,"y",k),H.setAttributeNS(null,"width",O-$),H.setAttributeNS(null,"height",G-k),H.setAttributeNS(null,"fill",this._makeShadingPattern(r)),this.current.fillAlpha<1&&H.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(H)}_makeColorN_Pattern(r){return r[0]==="TilingPattern"?this._makeTilingPattern(r):this._makeShadingPattern(r)}_makeTilingPattern(r){const i=r[1],f=r[2],x=r[3]||t.IDENTITY_MATRIX,[A,D,L,Z]=r[4],$=r[5],k=r[6],O=r[7],G=`shading${P++}`,[H,B,K,w]=t.Util.normalizeRect([...t.Util.applyTransform([A,D],x),...t.Util.applyTransform([L,Z],x)]),[o,e]=t.Util.singularValueDecompose2dScale(x),s=$*o,n=k*e,l=this.svgFactory.createElement("svg:pattern");l.setAttributeNS(null,"id",G),l.setAttributeNS(null,"patternUnits","userSpaceOnUse"),l.setAttributeNS(null,"width",s),l.setAttributeNS(null,"height",n),l.setAttributeNS(null,"x",`${H}`),l.setAttributeNS(null,"y",`${B}`);const a=this.svg,b=this.transformMatrix,C=this.current.fillColor,I=this.current.strokeColor,N=this.svgFactory.create(K-H,w-B);if(this.svg=N,this.transformMatrix=x,O===2){const R=t.Util.makeHexColor(...i);this.current.fillColor=R,this.current.strokeColor=R}return this.executeOpTree(this.convertOpList(f)),this.svg=a,this.transformMatrix=b,this.current.fillColor=C,this.current.strokeColor=I,l.appendChild(N.childNodes[0]),this.defs.appendChild(l),`url(#${G})`}_makeShadingPattern(r){switch(r[0]){case"RadialAxial":const i=`shading${P++}`,f=r[3];let x;switch(r[1]){case"axial":const A=r[4],D=r[5];x=this.svgFactory.createElement("svg:linearGradient"),x.setAttributeNS(null,"id",i),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"x1",A[0]),x.setAttributeNS(null,"y1",A[1]),x.setAttributeNS(null,"x2",D[0]),x.setAttributeNS(null,"y2",D[1]);break;case"radial":const L=r[4],Z=r[5],$=r[6],k=r[7];x=this.svgFactory.createElement("svg:radialGradient"),x.setAttributeNS(null,"id",i),x.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),x.setAttributeNS(null,"cx",Z[0]),x.setAttributeNS(null,"cy",Z[1]),x.setAttributeNS(null,"r",k),x.setAttributeNS(null,"fx",L[0]),x.setAttributeNS(null,"fy",L[1]),x.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${r[1]}`)}for(const A of f){const D=this.svgFactory.createElement("svg:stop");D.setAttributeNS(null,"offset",A[0]),D.setAttributeNS(null,"stop-color",A[1]),x.appendChild(D)}return this.defs.appendChild(x),`url(#${i})`;case"Mesh":return(0,t.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${r[0]}`)}}setDash(r,i){this.current.dashArray=r,this.current.dashPhase=i}constructPath(r,i){const f=this.current;let x=f.x,A=f.y,D=[],L=0;for(const Z of r)switch(Z|0){case t.OPS.rectangle:x=i[L++],A=i[L++];const $=i[L++],k=i[L++],O=x+$,G=A+k;D.push("M",c(x),c(A),"L",c(O),c(A),"L",c(O),c(G),"L",c(x),c(G),"Z");break;case t.OPS.moveTo:x=i[L++],A=i[L++],D.push("M",c(x),c(A));break;case t.OPS.lineTo:x=i[L++],A=i[L++],D.push("L",c(x),c(A));break;case t.OPS.curveTo:x=i[L+4],A=i[L+5],D.push("C",c(i[L]),c(i[L+1]),c(i[L+2]),c(i[L+3]),c(x),c(A)),L+=6;break;case t.OPS.curveTo2:D.push("C",c(x),c(A),c(i[L]),c(i[L+1]),c(i[L+2]),c(i[L+3])),x=i[L+2],A=i[L+3],L+=4;break;case t.OPS.curveTo3:x=i[L+2],A=i[L+3],D.push("C",c(i[L]),c(i[L+1]),c(x),c(A),c(x),c(A)),L+=4;break;case t.OPS.closePath:D.push("Z");break}D=D.join(" "),f.path&&r.length>0&&r[0]!==t.OPS.rectangle&&r[0]!==t.OPS.moveTo?D=f.path.getAttributeNS(null,"d")+D:(f.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(f.path)),f.path.setAttributeNS(null,"d",D),f.path.setAttributeNS(null,"fill","none"),f.element=f.path,f.setCurrentPoint(x,A)}endPath(){const r=this.current;if(r.path=null,!this.pendingClip)return;if(!r.element){this.pendingClip=null;return}const i=`clippath${V++}`,f=this.svgFactory.createElement("svg:clipPath");f.setAttributeNS(null,"id",i),f.setAttributeNS(null,"transform",F(this.transformMatrix));const x=r.element.cloneNode(!0);if(this.pendingClip==="evenodd"?x.setAttributeNS(null,"clip-rule","evenodd"):x.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,f.appendChild(x),this.defs.appendChild(f),r.activeClipUrl){r.clipGroup=null;for(const A of this.extraStack)A.clipGroup=null;f.setAttributeNS(null,"clip-path",r.activeClipUrl)}r.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(r){this.pendingClip=r}closePath(){const r=this.current;if(r.path){const i=`${r.path.getAttributeNS(null,"d")}Z`;r.path.setAttributeNS(null,"d",i)}}setLeading(r){this.current.leading=-r}setTextRise(r){this.current.textRise=r}setTextRenderingMode(r){this.current.textRenderingMode=r}setHScale(r){this.current.textHScale=r/100}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[i,f]of r)switch(i){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f);break;case"CA":this.setStrokeAlpha(f);break;case"ca":this.setFillAlpha(f);break;default:(0,t.warn)(`Unimplemented graphic state operator ${i}`);break}}fill(){const r=this.current;r.element&&(r.element.setAttributeNS(null,"fill",r.fillColor),r.element.setAttributeNS(null,"fill-opacity",r.fillAlpha),this.endPath())}stroke(){const r=this.current;r.element&&(this._setStrokeAttributes(r.element),r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(r,i=1){const f=this.current;let x=f.dashArray;i!==1&&x.length>0&&(x=x.map(function(A){return i*A})),r.setAttributeNS(null,"stroke",f.strokeColor),r.setAttributeNS(null,"stroke-opacity",f.strokeAlpha),r.setAttributeNS(null,"stroke-miterlimit",c(f.miterLimit)),r.setAttributeNS(null,"stroke-linecap",f.lineCap),r.setAttributeNS(null,"stroke-linejoin",f.lineJoin),r.setAttributeNS(null,"stroke-width",c(i*f.lineWidth)+"px"),r.setAttributeNS(null,"stroke-dasharray",x.map(c).join(" ")),r.setAttributeNS(null,"stroke-dashoffset",c(i*f.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(r)}paintImageXObject(r){const i=r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r);if(!i){(0,t.warn)(`Dependent image with object ID ${r} is not ready yet`);return}this.paintInlineImageXObject(i)}paintInlineImageXObject(r,i){const f=r.width,x=r.height,A=E(r,this.forceDataSchema,!!i),D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",c(f)),D.setAttributeNS(null,"height",c(x)),this.current.element=D,this.clip("nonzero");const L=this.svgFactory.createElement("svg:image");L.setAttributeNS(u,"xlink:href",A),L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y",c(-x)),L.setAttributeNS(null,"width",c(f)+"px"),L.setAttributeNS(null,"height",c(x)+"px"),L.setAttributeNS(null,"transform",`scale(${c(1/f)} ${c(-1/x)})`),i?i.appendChild(L):this._ensureTransformGroup().appendChild(L)}paintImageMaskXObject(r){const i=this.current,f=r.width,x=r.height,A=i.fillColor;i.maskId=`mask${U++}`;const D=this.svgFactory.createElement("svg:mask");D.setAttributeNS(null,"id",i.maskId);const L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y","0"),L.setAttributeNS(null,"width",c(f)),L.setAttributeNS(null,"height",c(x)),L.setAttributeNS(null,"fill",A),L.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.appendChild(D),this._ensureTransformGroup().appendChild(L),this.paintInlineImageXObject(r,D)}paintFormXObjectBegin(r,i){if(Array.isArray(r)&&r.length===6&&this.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i){const f=i[2]-i[0],x=i[3]-i[1],A=this.svgFactory.createElement("svg:rect");A.setAttributeNS(null,"x",i[0]),A.setAttributeNS(null,"y",i[1]),A.setAttributeNS(null,"width",c(f)),A.setAttributeNS(null,"height",c(x)),this.current.element=A,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(r){const i=this.svgFactory.create(r.width,r.height),f=this.svgFactory.createElement("svg:defs");i.appendChild(f),this.defs=f;const x=this.svgFactory.createElement("svg:g");return x.setAttributeNS(null,"transform",F(r.transform)),i.appendChild(x),this.svg=x,i}_ensureClipGroup(){if(!this.current.clipGroup){const r=this.svgFactory.createElement("svg:g");r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(r),this.current.clipGroup=r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",F(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.XfaLayer=void 0;var t=d(2),p=d(17);class y{static setupStorage(m,S,u,g,v){const E=g.getValue(S,{value:null});switch(u.name){case"textarea":if(E.value!==null&&(m.textContent=E.value),v==="print")break;m.addEventListener("input",_=>{g.setValue(S,{value:_.target.value})});break;case"input":if(u.attributes.type==="radio"||u.attributes.type==="checkbox"){if(E.value===u.attributes.xfaOn?m.setAttribute("checked",!0):E.value===u.attributes.xfaOff&&m.removeAttribute("checked"),v==="print")break;m.addEventListener("change",_=>{g.setValue(S,{value:_.target.checked?_.target.getAttribute("xfaOn"):_.target.getAttribute("xfaOff")})})}else{if(E.value!==null&&m.setAttribute("value",E.value),v==="print")break;m.addEventListener("input",_=>{g.setValue(S,{value:_.target.value})})}break;case"select":if(E.value!==null)for(const _ of u.children)_.attributes.value===E.value&&(_.attributes.selected=!0);m.addEventListener("input",_=>{const M=_.target.options,c=M.selectedIndex===-1?"":M[M.selectedIndex].value;g.setValue(S,{value:c})});break}}static setAttributes({html:m,element:S,storage:u=null,intent:g,linkService:v}){var M;const{attributes:E}=S,_=m instanceof HTMLAnchorElement;E.type==="radio"&&(E.name=`${E.name}-${g}`);for(const[c,F]of Object.entries(E))if(!(F==null||c==="dataId"))if(c!=="style")if(c==="textContent")m.textContent=F;else if(c==="class")m.setAttribute(c,F.join(" "));else{if(_&&(c==="href"||c==="newWindow"))continue;m.setAttribute(c,F)}else Object.assign(m.style,F);_&&(v.addLinkAttributes||(0,t.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),(M=v.addLinkAttributes)==null||M.call(v,m,E.href,E.newWindow)),u&&E.dataId&&this.setupStorage(m,E.dataId,S,u)}static render(m){var V;const S=m.annotationStorage,u=m.linkService,g=m.xfa,v=m.intent||"display",E=document.createElement(g.name);g.attributes&&this.setAttributes({html:E,element:g,intent:v,linkService:u});const _=[[g,-1,E]],M=m.div;M.appendChild(E);const c=`matrix(${m.viewport.transform.join(",")})`;M.style.transform=c,M.setAttribute("class","xfaLayer xfaFont");const F=[];for(;_.length>0;){const[U,P,r]=_[_.length-1];if(P+1===U.children.length){_.pop();continue}const i=U.children[++_[_.length-1][1]];if(i===null)continue;const{name:f}=i;if(f==="#text"){const A=document.createTextNode(i.value);F.push(A),r.appendChild(A);continue}let x;if(((V=i==null?void 0:i.attributes)==null?void 0:V.xmlns)?x=document.createElementNS(i.attributes.xmlns,f):x=document.createElement(f),r.appendChild(x),i.attributes&&this.setAttributes({html:x,element:i,storage:S,intent:v,linkService:u}),i.children&&i.children.length>0)_.push([i,-1,x]);else if(i.value){const A=document.createTextNode(i.value);p.XfaText.shouldBuildText(f)&&F.push(A),x.appendChild(A)}}for(const U of M.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))U.setAttribute("readOnly",!0);return{textDivs:F}}static update(m){const S=`matrix(${m.viewport.transform.join(",")})`;m.div.style.transform=S,m.div.hidden=!1}}h.XfaLayer=y},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFNodeStream=void 0;var t=d(2),p=d(24);const y=require$$4,T=require$$4,m=require$$4,S=require$$4,u=/^file:\/\/\/[a-zA-Z]:\//;function g(P){const r=S.parse(P);return r.protocol==="file:"||r.host?r:/^[a-z]:[/\\]/i.test(P)?S.parse(`file:///${P}`):(r.host||(r.protocol="file:"),r)}class v{constructor(r){this.source=r,this.url=g(r.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&r.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var r,i;return(i=(r=this._fullRequestReader)==null?void 0:r._loaded)!=null?i:0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new V(this):new c(this),this._fullRequestReader}getRangeReader(r,i){if(i<=this._progressiveDataLength)return null;const f=this.isFsUrl?new U(this,r,i):new F(this,r,i);return this._rangeRequestReaders.push(f),f}cancelAllRequests(r){this._fullRequestReader&&this._fullRequestReader.cancel(r);for(const i of this._rangeRequestReaders.slice(0))i.cancel(r)}}h.PDFNodeStream=v;class E{constructor(r){this._url=r.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=r.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)(),this._headersCapability=(0,t.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const r=this._readableStream.read();return r===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=r.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){if(!this._readableStream){this._error(r);return}this._readableStream.destroy(r)}_error(r){this._storedError=r,this._readCapability.resolve()}_setReadableStream(r){this._readableStream=r,r.on("readable",()=>{this._readCapability.resolve()}),r.on("end",()=>{r.destroy(),this._done=!0,this._readCapability.resolve()}),r.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new t.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _{constructor(r){this._url=r.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)();const i=r.source;this._isStreamingSupported=!i.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const r=this._readableStream.read();return r===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=r.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(r).buffer,done:!1})}cancel(r){if(!this._readableStream){this._error(r);return}this._readableStream.destroy(r)}_error(r){this._storedError=r,this._readCapability.resolve()}_setReadableStream(r){this._readableStream=r,r.on("readable",()=>{this._readCapability.resolve()}),r.on("end",()=>{r.destroy(),this._done=!0,this._readCapability.resolve()}),r.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function M(P,r){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:r}}class c extends E{constructor(r){super(r);const i=f=>{if(f.statusCode===404){const L=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=L,this._headersCapability.reject(L);return}this._headersCapability.resolve(),this._setReadableStream(f);const x=L=>this._readableStream.headers[L.toLowerCase()],{allowRangeRequests:A,suggestedLength:D}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:r.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=D||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(x)};this._request=null,this._url.protocol==="http:"?this._request=T.request(M(this._url,r.httpHeaders),i):this._request=m.request(M(this._url,r.httpHeaders),i),this._request.on("error",f=>{this._storedError=f,this._headersCapability.reject(f)}),this._request.end()}}class F extends _{constructor(r,i,f){super(r);this._httpHeaders={};for(const A in r.httpHeaders){const D=r.httpHeaders[A];typeof D!="undefined"&&(this._httpHeaders[A]=D)}this._httpHeaders.Range=`bytes=${i}-${f-1}`;const x=A=>{if(A.statusCode===404){const D=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=D;return}this._setReadableStream(A)};this._request=null,this._url.protocol==="http:"?this._request=T.request(M(this._url,this._httpHeaders),x):this._request=m.request(M(this._url,this._httpHeaders),x),this._request.on("error",A=>{this._storedError=A}),this._request.end()}}class V extends E{constructor(r){super(r);let i=decodeURIComponent(this._url.path);u.test(this._url.href)&&(i=i.replace(/^\//,"")),y.lstat(i,(f,x)=>{if(f){f.code==="ENOENT"&&(f=new t.MissingPDFException(`Missing PDF "${i}".`)),this._storedError=f,this._headersCapability.reject(f);return}this._contentLength=x.size,this._setReadableStream(y.createReadStream(i)),this._headersCapability.resolve()})}}class U extends _{constructor(r,i,f){super(r);let x=decodeURIComponent(this._url.path);u.test(this._url.href)&&(x=x.replace(/^\//,"")),this._setReadableStream(y.createReadStream(x,{start:i,end:f-1}))}}},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.createResponseStatusError=S,h.extractFilenameFromHeader=m,h.validateRangeRequestCapabilities=T,h.validateResponseStatus=u;var t=d(2),p=d(25),y=d(1);function T({getResponseHeader:g,isHttp:v,rangeChunkSize:E,disableRange:_}){(0,t.assert)(E>0,"Range chunk size must be larger than zero");const M={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(g("Content-Length"),10);return!Number.isInteger(c)||(M.suggestedLength=c,c<=2*E)||_||!v||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(M.allowRangeRequests=!0),M}function m(g){const v=g("Content-Disposition");if(v){let E=(0,p.getFilenameFromContentDispositionHeader)(v);if(E.includes("%"))try{E=decodeURIComponent(E)}catch{}if((0,y.isPdfFile)(E))return E}return null}function S(g,v){return g===404||g===0&&v.startsWith("file:")?new t.MissingPDFException('Missing PDF "'+v+'".'):new t.UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${v}".`,g)}function u(g){return g===200||g===206}},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.getFilenameFromContentDispositionHeader=p;var t=d(2);function p(y){let T=!0,m=S("filename\\*","i").exec(y);if(m){m=m[1];let c=E(m);return c=unescape(c),c=_(c),c=M(c),g(c)}if(m=v(y),m){const c=M(m);return g(c)}if(m=S("filename","i").exec(y),m){m=m[1];let c=E(m);return c=M(c),g(c)}function S(c,F){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',F)}function u(c,F){if(c){if(!/^[\x00-\xFF]+$/.test(F))return F;try{const V=new TextDecoder(c,{fatal:!0}),U=(0,t.stringToBytes)(F);F=V.decode(U),T=!1}catch{if(/^utf-?8$/i.test(c))try{F=decodeURIComponent(escape(F)),T=!1}catch{}}}return F}function g(c){return T&&/[\x80-\xff]/.test(c)&&(c=u("utf-8",c),T&&(c=u("iso-8859-1",c))),c}function v(c){const F=[];let V;const U=S("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(V=U.exec(c))!==null;){let[,r,i,f]=V;if(r=parseInt(r,10),r in F){if(r===0)break;continue}F[r]=[i,f]}const P=[];for(let r=0;r<F.length&&r in F;++r){let[i,f]=F[r];f=E(f),i&&(f=unescape(f),r===0&&(f=_(f))),P.push(f)}return P.join("")}function E(c){if(c.startsWith('"')){const F=c.slice(1).split('\\"');for(let V=0;V<F.length;++V){const U=F[V].indexOf('"');U!==-1&&(F[V]=F[V].slice(0,U),F.length=V+1),F[V]=F[V].replace(/\\(.)/g,"$1")}c=F.join('"')}return c}function _(c){const F=c.indexOf("'");if(F===-1)return c;const V=c.slice(0,F),P=c.slice(F+1).replace(/^[^']*'/,"");return u(V,P)}function M(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(F,V,U,P){if(U==="q"||U==="Q")return P=P.replace(/_/g," "),P=P.replace(/=([0-9a-fA-F]{2})/g,function(r,i){return String.fromCharCode(parseInt(i,16))}),u(V,P);try{P=atob(P)}catch{}return u(V,P)})}return""}},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFNetworkStream=void 0;var t=d(2),p=d(24);const y=200,T=206;function m(E){const _=E.response;return typeof _!="string"?_:(0,t.stringToBytes)(_).buffer}class S{constructor(_,M={}){this.url=_,this.isHttp=/^https?:/i.test(_),this.httpHeaders=this.isHttp&&M.httpHeaders||Object.create(null),this.withCredentials=M.withCredentials||!1,this.getXhr=M.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(_,M,c){const F={begin:_,end:M};for(const V in c)F[V]=c[V];return this.request(F)}requestFull(_){return this.request(_)}request(_){const M=this.getXhr(),c=this.currXhrId++,F=this.pendingRequests[c]={xhr:M};M.open("GET",this.url),M.withCredentials=this.withCredentials;for(const V in this.httpHeaders){const U=this.httpHeaders[V];typeof U!="undefined"&&M.setRequestHeader(V,U)}return this.isHttp&&"begin"in _&&"end"in _?(M.setRequestHeader("Range",`bytes=${_.begin}-${_.end-1}`),F.expectedStatus=T):F.expectedStatus=y,M.responseType="arraybuffer",_.onError&&(M.onerror=function(V){_.onError(M.status)}),M.onreadystatechange=this.onStateChange.bind(this,c),M.onprogress=this.onProgress.bind(this,c),F.onHeadersReceived=_.onHeadersReceived,F.onDone=_.onDone,F.onError=_.onError,F.onProgress=_.onProgress,M.send(null),c}onProgress(_,M){var F;const c=this.pendingRequests[_];!c||(F=c.onProgress)==null||F.call(c,M)}onStateChange(_,M){var r,i,f;const c=this.pendingRequests[_];if(!c)return;const F=c.xhr;if(F.readyState>=2&&c.onHeadersReceived&&(c.onHeadersReceived(),delete c.onHeadersReceived),F.readyState!==4||!(_ in this.pendingRequests))return;if(delete this.pendingRequests[_],F.status===0&&this.isHttp){(r=c.onError)==null||r.call(c,F.status);return}const V=F.status||y;if(!(V===y&&c.expectedStatus===T)&&V!==c.expectedStatus){(i=c.onError)==null||i.call(c,F.status);return}const P=m(F);if(V===T){const x=F.getResponseHeader("Content-Range"),A=/bytes (\d+)-(\d+)\/(\d+)/.exec(x);c.onDone({begin:parseInt(A[1],10),chunk:P})}else P?c.onDone({begin:0,chunk:P}):(f=c.onError)==null||f.call(c,F.status)}getRequestXhr(_){return this.pendingRequests[_].xhr}isPendingRequest(_){return _ in this.pendingRequests}abortRequest(_){const M=this.pendingRequests[_].xhr;delete this.pendingRequests[_],M.abort()}}class u{constructor(_){this._source=_,this._manager=new S(_.url,{httpHeaders:_.httpHeaders,withCredentials:_.withCredentials}),this._rangeChunkSize=_.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(_){const M=this._rangeRequestReaders.indexOf(_);M>=0&&this._rangeRequestReaders.splice(M,1)}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(_,M){const c=new v(this._manager,_,M);return c.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(c),c}cancelAllRequests(_){var M;(M=this._fullRequestReader)==null||M.cancel(_);for(const c of this._rangeRequestReaders.slice(0))c.cancel(_)}}h.PDFNetworkStream=u;class g{constructor(_,M){this._manager=_;const c={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=M.url,this._fullRequestId=_.requestFull(c),this._headersReceivedCapability=(0,t.createPromiseCapability)(),this._disableRange=M.disableRange||!1,this._contentLength=M.length,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const _=this._fullRequestId,M=this._manager.getRequestXhr(_),c=U=>M.getResponseHeader(U),{allowRangeRequests:F,suggestedLength:V}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});F&&(this._isRangeSupported=!0),this._contentLength=V||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(c),this._isRangeSupported&&this._manager.abortRequest(_),this._headersReceivedCapability.resolve()}_onDone(_){if(_&&(this._requests.length>0?this._requests.shift().resolve({value:_.chunk,done:!1}):this._cachedChunks.push(_.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(_){this._storedError=(0,p.createResponseStatusError)(_,this._url),this._headersReceivedCapability.reject(this._storedError);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(_){var M;(M=this.onProgress)==null||M.call(this,{loaded:_.loaded,total:_.lengthComputable?_.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=(0,t.createPromiseCapability)();return this._requests.push(_),_.promise}cancel(_){this._done=!0,this._headersReceivedCapability.reject(_);for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class v{constructor(_,M,c){this._manager=_;const F={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._requestId=_.requestRange(M,c,F),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _;(_=this.onClosed)==null||_.call(this,this)}_onDone(_){const M=_.chunk;this._requests.length>0?this._requests.shift().resolve({value:M,done:!1}):this._queuedChunk=M,this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(_){this._storedError=(0,p.createResponseStatusError)(_,this._url);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(_){var M;this.isStreamingSupported||(M=this.onProgress)==null||M.call(this,{loaded:_.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const M=this._queuedChunk;return this._queuedChunk=null,{value:M,done:!1}}if(this._done)return{value:void 0,done:!0};const _=(0,t.createPromiseCapability)();return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Q,h,d)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PDFFetchStream=void 0;var t=d(2),p=d(24);function y(g,v,E){return{method:"GET",headers:g,signal:E==null?void 0:E.signal,mode:"cors",credentials:v?"include":"same-origin",redirect:"follow"}}function T(g){const v=new Headers;for(const E in g){const _=g[E];typeof _!="undefined"&&v.append(E,_)}return v}class m{constructor(v){this.source=v,this.isHttp=/^https?:/i.test(v.url),this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var v,E;return(E=(v=this._fullRequestReader)==null?void 0:v._loaded)!=null?E:0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new S(this),this._fullRequestReader}getRangeReader(v,E){if(E<=this._progressiveDataLength)return null;const _=new u(this,v,E);return this._rangeRequestReaders.push(_),_}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);for(const E of this._rangeRequestReaders.slice(0))E.cancel(v)}}h.PDFFetchStream=m;class S{constructor(v){this._stream=v,this._reader=null,this._loaded=0,this._filename=null;const E=v.source;this._withCredentials=E.withCredentials||!1,this._contentLength=E.length,this._headersCapability=(0,t.createPromiseCapability)(),this._disableRange=E.disableRange||!1,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!E.disableStream,this._isRangeSupported=!E.disableRange,this._headers=T(this._stream.httpHeaders);const _=E.url;fetch(_,y(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,p.validateResponseStatus)(M.status))throw(0,p.createResponseStatusError)(M.status,_);this._reader=M.body.getReader(),this._headersCapability.resolve();const c=U=>M.headers.get(U),{allowRangeRequests:F,suggestedLength:V}=(0,p.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=F,this._contentLength=V||this._contentLength,this._filename=(0,p.extractFilenameFromHeader)(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new t.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:v,done:E}=await this._reader.read();return E?{value:v,done:E}:(this._loaded+=v.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){this._reader&&this._reader.cancel(v),this._abortController&&this._abortController.abort()}}class u{constructor(v,E,_){this._stream=v,this._reader=null,this._loaded=0;const M=v.source;this._withCredentials=M.withCredentials||!1,this._readCapability=(0,t.createPromiseCapability)(),this._isStreamingSupported=!M.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=T(this._stream.httpHeaders),this._headers.append("Range",`bytes=${E}-${_-1}`);const c=M.url;fetch(c,y(this._headers,this._withCredentials,this._abortController)).then(F=>{if(!(0,p.validateResponseStatus)(F.status))throw(0,p.createResponseStatusError)(F.status,c);this._readCapability.resolve(),this._reader=F.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:v,done:E}=await this._reader.read();return E?{value:v,done:E}:(this._loaded+=v.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){this._reader&&this._reader.cancel(v),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(Q){var h=__webpack_module_cache__[Q];if(h!==void 0)return h.exports;var d=__webpack_module_cache__[Q]={exports:{}};return __webpack_modules__[Q](d,d.exports,__w_pdfjs_require__),d.exports}var __webpack_exports__={};return(()=>{var Q=__webpack_exports__;Object.defineProperty(Q,"__esModule",{value:!0}),Object.defineProperty(Q,"addLinkAttributes",{enumerable:!0,get:function(){return h.addLinkAttributes}}),Object.defineProperty(Q,"getFilenameFromUrl",{enumerable:!0,get:function(){return h.getFilenameFromUrl}}),Object.defineProperty(Q,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return h.getPdfFilenameFromUrl}}),Object.defineProperty(Q,"getXfaPageViewport",{enumerable:!0,get:function(){return h.getXfaPageViewport}}),Object.defineProperty(Q,"isPdfFile",{enumerable:!0,get:function(){return h.isPdfFile}}),Object.defineProperty(Q,"LinkTarget",{enumerable:!0,get:function(){return h.LinkTarget}}),Object.defineProperty(Q,"loadScript",{enumerable:!0,get:function(){return h.loadScript}}),Object.defineProperty(Q,"PDFDateString",{enumerable:!0,get:function(){return h.PDFDateString}}),Object.defineProperty(Q,"PixelsPerInch",{enumerable:!0,get:function(){return h.PixelsPerInch}}),Object.defineProperty(Q,"RenderingCancelledException",{enumerable:!0,get:function(){return h.RenderingCancelledException}}),Object.defineProperty(Q,"AnnotationMode",{enumerable:!0,get:function(){return d.AnnotationMode}}),Object.defineProperty(Q,"CMapCompressionType",{enumerable:!0,get:function(){return d.CMapCompressionType}}),Object.defineProperty(Q,"createObjectURL",{enumerable:!0,get:function(){return d.createObjectURL}}),Object.defineProperty(Q,"createPromiseCapability",{enumerable:!0,get:function(){return d.createPromiseCapability}}),Object.defineProperty(Q,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return d.createValidAbsoluteUrl}}),Object.defineProperty(Q,"InvalidPDFException",{enumerable:!0,get:function(){return d.InvalidPDFException}}),Object.defineProperty(Q,"MissingPDFException",{enumerable:!0,get:function(){return d.MissingPDFException}}),Object.defineProperty(Q,"OPS",{enumerable:!0,get:function(){return d.OPS}}),Object.defineProperty(Q,"PasswordResponses",{enumerable:!0,get:function(){return d.PasswordResponses}}),Object.defineProperty(Q,"PermissionFlag",{enumerable:!0,get:function(){return d.PermissionFlag}}),Object.defineProperty(Q,"removeNullCharacters",{enumerable:!0,get:function(){return d.removeNullCharacters}}),Object.defineProperty(Q,"shadow",{enumerable:!0,get:function(){return d.shadow}}),Object.defineProperty(Q,"UnexpectedResponseException",{enumerable:!0,get:function(){return d.UnexpectedResponseException}}),Object.defineProperty(Q,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return d.UNSUPPORTED_FEATURES}}),Object.defineProperty(Q,"Util",{enumerable:!0,get:function(){return d.Util}}),Object.defineProperty(Q,"VerbosityLevel",{enumerable:!0,get:function(){return d.VerbosityLevel}}),Object.defineProperty(Q,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(Q,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(Q,"LoopbackPort",{enumerable:!0,get:function(){return t.LoopbackPort}}),Object.defineProperty(Q,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(Q,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(Q,"version",{enumerable:!0,get:function(){return t.version}}),Object.defineProperty(Q,"AnnotationLayer",{enumerable:!0,get:function(){return p.AnnotationLayer}}),Object.defineProperty(Q,"GlobalWorkerOptions",{enumerable:!0,get:function(){return y.GlobalWorkerOptions}}),Object.defineProperty(Q,"renderTextLayer",{enumerable:!0,get:function(){return m.renderTextLayer}}),Object.defineProperty(Q,"SVGGraphics",{enumerable:!0,get:function(){return S.SVGGraphics}}),Object.defineProperty(Q,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}});var h=__w_pdfjs_require__(1),d=__w_pdfjs_require__(2),t=__w_pdfjs_require__(6),p=__w_pdfjs_require__(18),y=__w_pdfjs_require__(12),T=__w_pdfjs_require__(4),m=__w_pdfjs_require__(20),S=__w_pdfjs_require__(21),u=__w_pdfjs_require__(22);if(T.isNodeJS){const{PDFNodeStream:g}=__w_pdfjs_require__(23);(0,t.setPDFNetworkStreamFactory)(v=>new g(v))}else{const{PDFNetworkStream:g}=__w_pdfjs_require__(26),{PDFFetchStream:v}=__w_pdfjs_require__(27);(0,t.setPDFNetworkStreamFactory)(E=>(0,h.isValidFetchUrl)(E.url)?new v(E):new g(E))}})(),__webpack_exports__})()})})(pdf);var pdf_viewer="";export{pdf as p};

import{t as N}from"./theme-ea709837.js";import{g as G,E as d,y as b,_ as h,r as n,j as u,k as i,m as f,p as I,t as S,z as m,A as r,C as g,J as k}from"./vendor-3ed1524d.js";var H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAAB0CAMAAABjROYVAAAAAXNSR0IArs4c6QAAAT5QTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////tGB6DAAAAGl0Uk5TAAIEBQYHCgsMDxAREhMUGRoeICctMzQ4OTo7PUBBREZISUpLTE1OT1JbYWNnaG1wdHV2eXp7g4uNkZSVlpecnaivsLG4ubvFxsfKy87S1dfY2d/g4eLk5+jp6uzt7/Dz9Pb3+fr7/P3+/72HPAAABS9JREFUaN7Fm/0/G00QwEfloaUpRb1WKaXo4yVUCBpvqaDeizxIEUnI9///B54f7hKJXu72Lnu5+c3H7H4/t5mdnZmdFXEnjZ3jkXgieXh2k83enB0mE/HIeGej+Cdtk/GTPBaSP4lPtvkAfDW6eoytHK+OvtKK/BC7RkGuYx90Ed9Ejp7nLVzsrMyM9HV1hEOhcEdX38jMys5F4fn/R5E3GpDvorfFCXPJ6GCzlU7zYDSZK2rdRt/VajvL9+Zc6bXh13aar4d/pE3V++VarCq0mDG/cWsipKA+sWV+b2Yx5JX56dS0j4Ww6pDwgmlxJ588Ids3jOGXs01uhjXNXhrjNtrdM78Yv9DVtOuF+mf6yrCCL2693VIB4Gmtxcsitaw9ARSWXPnH93sA7Hd7NYfuXwDsvVcfMpAGyM01eDf8hrkcQHpAdcDXB4Dzntq2eM85wMNXNe1vjwDbrbX6stZtgMdvKrrfAfiuw2srT/UdID+l56yYyitRvwFkxnSdUGMZAIcV/voI/OnXdxL3/wEeba1p4AHIaGSK9GeAB5ud8z4N5MdEq4w9AumqXqJxD2BKNMsUwF41j7ikba9YbIilKudKAdj2I3bdBgqWZ057Gvjd6ge09RxIW52vG0CuR3yRnhywYRGbAMz5lRzMAfwVwYROgf0Gv6AN+8DpyyBkEXjqFt+k+wlYfBHfZoA1H5MvWQMylfHwMnDV4ie05QpYrsgd7oF/xVeZBu7LM44ocBnyFxq6BKJledktMCs+yyxw+5zTRYDrJr+hTddApPTnEbAgvssCcFTKs4Fc2H9oOAcUc/UYsGmv/zZ2cHcQe1uDgojIFhAzaxjXwISt9sf/AEgNVVMYMhU+2k4zAVwb1ZBRIG27X96mzBw7WyWUGcuaCinbbw2lgVEREVl19ICxUh3DmlpillavivwAVkVE5BgYttU9wJZaxuTAdqJh4FhEpA3I2dYw5A47ajmTO9uJXueANhGZBJKi+qV/UyuYDl8qSWBSROKVLtH+N/2bWsl0+E0lCsRF5AQYdNilqarUF8yUw04dBE5EGvNQaHbwJUPZKtQXzOyQw0TNBcg3Sidw4ZwbWFPHsgAOG6pCLoBOGQd2xBvVPVN2gHGZB1bEE9UDU1aAiKwDM+KF6oUpM8C6/AQ+ixeqF6aMAD9lF+gVL1QvTOkFduUQ6JJaqapM6QIO5QzokBqpykzpAM7kBlAPVayp6kwJAzeSBVxEvFZUF0wJAVm3UAuqG6YJdbe8FlRXTHN5XRlS7VDDkNxsGQ3La2yZJNBXP0PqA5KSAEbqt2VGgIS6w9fjHGaAuEQUjzZNbtA42hQPcV0O3zjE1cIVbUebEa4oBWbaDnEzMFMJQfWFK2YIqhJs6wvMisG2QlqhLwQtphUKCZS2YLuUQCmkitrSilKq6CoprjGBek6KndN/XaliWfrvXOjQlRSXFTokBmzVI/0vK+k4F680FToqileOZTpNJZ2KMp1zQfJjyql4lXIuXr0oSDqXXnWU6V6UXgMpMhvl9Ok6l9MDuTgI5ookkMsg36+9flldewVywRfMVaZxaXte50vbQK6ng7mID6blwKfmirxtc0UwbSTBNMwE0xoUTBNUMO1ewTS2FVv4fte1hS+YZkUdbZn7rtsyg2lAlVpabUNeW20lmKZiqa19+vSTV3N4bhTfVGsU36y9UVwCaYkXCaT5X8TymUNv8ZlDrz/PHIxcve4POoxqSP2frphWVe9HOiX/2Dk+v57YLT5H2k2sz7t/jvQ/OUv8Dn3rFHYAAAAASUVORK5CYII=";const T={class:"item"},K={class:"footer"},Y=G({props:{show:{type:Boolean,default:!1},contentList:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},text:{type:String,default:""},beforeReadOverText:{type:String,default:"\u540C\u610F\uFF0C\u4E0B\u4E00\u6761"},forceReadCound:{type:Number,default:0}},emits:["update:show","submit","onCloseFilePreview"],setup(A,{emit:p}){const t=A,v=d(t.show),o=d(t.contentList.map((e,l)=>({...e,disabled:!0,readDisabled:!0}))),a=d(t.activeIndex),c=d(0),w=d(null),V=b(()=>{var e,l;return(l=(e=o.value)==null?void 0:e[a.value])==null?void 0:l.attachmentUri}),B=b(()=>{var e;return(e=o.value[a.value])==null?void 0:e.readDisabled}),C=b(()=>a.value>=t.forceReadCound-1||c.value>=t.forceReadCound?!1:c.value<t.forceReadCound?a.value!==t.forceReadCound-1:!1),F=()=>{a.value+=1},M=()=>{p("update:show",!1),p("submit")};h(()=>t,()=>{v.value=t.show,a.value=t.activeIndex},{deep:!0,immediate:!0});const R=e=>{e&&Math.floor(e.target.scrollHeight-e.target.scrollTop)===e.target.clientHeight&&o.value[a.value].readDisabled&&(o.value[a.value].disabled=!1,o.value[a.value].readDisabled=!1,o.value[a.value+1].disabled=!1,c.value+=1)};return h(()=>a.value,()=>{t.show&&(c.value>=t.forceReadCound&&o.value.forEach(e=>{e.disabled=!1,e.readDisabled=!1}),w.value&&(w.value.scrollTop=0))},{immediate:!0}),(e,l)=>{const D=n("ProTab"),E=n("ProFilePreview"),y=n("VanButton"),X=n("van-config-provider"),x=n("ProPopup");return u(),i(x,{show:v.value,"onUpdate:show":l[1]||(l[1]=s=>v.value=s),class:"file-preview-popup-wrap",closeable:!1,onClose:l[2]||(l[2]=s=>p("onCloseFilePreview"))},{default:f(()=>[I(X,{"theme-vars":r(N),class:"custom-provider"},{default:f(()=>[v.value?(u(),i(D,{key:0,active:a.value,"onUpdate:active":l[0]||(l[0]=s=>a.value=s),list:o.value.map((s,U)=>({title:s.attachmentName,disabled:U==a.value?!1:s.disabled||!1,slotName:`guarantee-${U}`})),class:"tab"},null,8,["active","list"])):S("",!0),m("div",{ref_key:"previewRef",ref:w,class:"list",onScroll:R},[m("div",T,[(u(),i(E,{key:r(V),content:r(V),type:"pdf","forbid-click":!0},null,8,["content"]))])],544),m("div",K,[r(C)?(u(),i(y,{key:0,disabled:r(B),type:"primary",block:"",round:"",onClick:F},{default:f(()=>[g(k(`${A.beforeReadOverText}(${a.value+1}/${A.forceReadCound})`),1)]),_:1},8,["disabled"])):(u(),i(y,{key:1,disabled:r(B),type:"primary",block:"",round:"",onClick:M},{default:f(()=>[g(k(t.text),1)]),_:1},8,["disabled"]))])]),_:1},8,["theme-vars"])]),_:1},8,["show"])}}});export{Y as _,H as c};

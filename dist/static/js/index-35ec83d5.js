import{_ as t,d as e,cI as a,i as n,h as i,j as s,r as o,k as l,O as r,bb as d,d3 as c,o as u,m,w as p,u as f,c as v,a as h,a8 as I,e as y,b as L,F as g,q as b,an as j,f as O,p as k,bd as N,V as w,a9 as D,dI as V,T as A,ae as q,aC as C,aD as x,bR as T,bs as P}from"./index-d58dc756.js";import{C as R}from"./index-08623cc6.js";import{_}from"./index-e492015f.js";import{c as Y}from"./order-044ee6b0.js";import{m as Q}from"./trial-4ac0ac03.js";import"./infoCollection-6d3e4b86.js";import"./core-e395518b.js";import{I as H}from"./infoItem-41029f6f.js";import{I as M}from"./insuranceNotificationInformation-08c786c7.js";import{a as U,_ as E}from"./PolicyInfo-4caa9355.js";import{l as S,b as F}from"./product-afaea900.js";import{Q as B}from"./questionnaire-62331097.js";import{P as G}from"./index-6f475627.js";import{Q as X}from"./notice-33e6eedd.js";import{g as $}from"./utils-aef9acfc.js";import{O as z}from"./OperateBtn-2d55e35e.js";import{C as J}from"./index-1aff1557.js";import"./cloneDeep-44de4472.js";import"./lodash-742d275b.js";import"./util-bd6d5477.js";import"./trial-686d78dd.js";import"./constants-b6eb977d.js";const K=t=>(C("data-v-65c2f4cf"),t=t(),x(),t),W={key:0,class:"page-order-detail"},Z=K((()=>h("div",{class:"card-item-name"},"订单进度",-1))),tt={class:"card-item-icon"},et={class:"card card-list"},at={class:"card-list-title"},nt={class:"card card-list"},it={class:"card-list-head"},st=K((()=>h("div",{class:"card-list-title"},"险种信息",-1))),ot={class:"card-list-premium"},lt={class:"card"},rt={class:"card"},dt=K((()=>h("div",{class:"tenantOrderAttachmentList-title"},"投保人资料",-1))),ct={class:"tenantOrderAttachmentList-img"},ut=["src"],mt=K((()=>h("div",{class:"tenantOrderAttachmentList-title"},"被保人资料",-1))),pt={class:"tenantOrderAttachmentList-img"},ft=["src"],vt=K((()=>h("div",{class:"tenantOrderAttachmentList-title"},"受益人资料",-1))),ht={class:"tenantOrderAttachmentList-img"},It=["src"],yt=K((()=>h("div",{class:"tenantOrderAttachmentList-title"},"监护人资料",-1))),Lt={class:"tenantOrderAttachmentList-img"},gt=["src"],bt=K((()=>h("div",{class:"tenantOrderAttachmentList-title"},"银行卡信息",-1))),jt={class:"tenantOrderAttachmentList-img"},Ot=["src"],kt={class:"card"},Nt={class:"card"},wt={class:"footer-button"};var Dt=t(e({__name:"index",setup(t){const e=a(),C=n();i();const x=s();s([]);const K=s([]),Dt=[{title:"险种名称",dataIndex:"riskName",width:200},{title:"保险金额/份数",dataIndex:"regularPremium",width:180,render:(t,e)=>t.regularPremium/t.copy},{title:"保障期间",dataIndex:"coveragePeriodDesc",width:180},{title:"交费期间",dataIndex:"chargePeriodDesc",width:180},{title:"首期保费",dataIndex:"initialPremium",width:180,render:(t,e)=>t.initialPremium}],Vt=o({customerQuestions:[],payInfo:{schema:[],config:[],formData:[]},policyInfo:{schema:[],config:[],formData:{}}}),{query:{orderNo:At,agentCode:qt,tenantId:Ct}}=C,xt=l((()=>"cancel"!==x.value.orderStatus)),Tt=()=>{D("orderTrajectory",{orderNo:At,orderId:x.value.id,tenantId:Ct})},Pt=s(!1),Rt=s(),_t=s([]),Yt=l((()=>t=>{const{tenantOrderAttachmentList:e}=x.value;return(null==e?void 0:e.length)?e.filter((e=>e.objectType===t)):[]})),Qt=s(),Ht=(t=!0)=>{V({orderNo:At,agentCode:qt,tenantId:Ct}).then((({code:e,data:a})=>{if("10000"===e){if(x.value=a,!t)return;Qt.value=a,x.value.tenantOrderPayInfoList=a.tenantOrderPayInfoList||[];const e=Object.keys(x.value.productCodeList).map((t=>({productCode:t,mergeRiskReqList:x.value.productCodeList[t]})));F(n={productList:e}).then((({data:t,code:e})=>{var a,n;"10000"===e&&(_t.value=null==(n=null==(a=t.riskMaterialList)?void 0:a[0])?void 0:n.productMaterialList)})),Q(n).then((({data:t,code:e})=>{if("10000"===e){const{productDetailResList:e,productFactor:a}=t;Rt.value=a;const{payInfo:n,other:i}=P(a);Vt.payInfo={...Vt.payInfo,...n},Vt.policyInfo={...Vt.policyInfo,...i}}})),(async t=>{let e=[];const{code:a,data:n}=await T({orderNo:At,tenantId:Ct});"10000"===a&&(e=n.productQuestionnaireVOList);const{code:i,data:s}=await S(t);if("10000"===i){const{productQuestionnaireVOList:t}=s||{},a=t.filter((t=>t.businessType!==X.VISIT));Vt.customerQuestions=a.map((t=>{const{questionnaireDetailResponseVO:a,questionnaireId:n,questionnaireName:i}=t||{},{questions:s,basicInfo:o}=a||{},{objectType:l,questionnaireType:r}=o||{};if(r===B.TEXT){const{content:t,textType:e}=(null==s?void 0:s[0])||{};return{content:t,contentType:$(`${e}`,t),questionnaireId:n,questionnaireName:i}}const d=(e||[]).find((t=>t.questionnaireId===n));return{...a,contentType:"question",...null==d?void 0:d.questionnaireDetailResponseVO,questionnaireId:n,questionnaireName:i}}))}})({productCodeList:Object.keys(x.value.productCodeList)})}var n}))},Mt=()=>{Y({orderNo:At,tenantId:Ct}).then((({code:t,data:e})=>{"10000"===t&&(A("撤单成功"),Ht(!1))}))};return r((()=>{Ht()})),(t,a)=>{const n=q,i=_,s=R,o=J,l=d,r=c("loading");return u(),m(l,{"theme-vars":f(e)},{default:p((()=>{var t,e,l,d,c,D,V,A,q,C,T,P,R,_;return[f(xt)?(u(),v("div",W,[h("div",{class:"card card-head",onClick:Tt},[Z,h("div",tt,[I(y(null==(t=f(x))?void 0:t.orderStepDesc)+" ",1),L(n,{name:"arrow-right"})])]),h("div",et,[h("p",at,y(null==(e=f(x))?void 0:e.productName),1),L(H,{label:"订单号",content:null==(l=f(x))?void 0:l.orderNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),(u(!0),v(g,null,b((null==(c=null==(d=f(x))?void 0:d.applicationNoList)?void 0:c.length)?null==(D=f(x))?void 0:D.applicationNoList:[""],(t=>(u(),m(H,{key:t,label:"投保单号",content:t,line:"","is-copy":"","min-width":"other"},null,8,["content"])))),128)),L(H,{label:"创建时间",content:f(j)(null==(V=f(x))?void 0:V.gmtCreated).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),L(H,{label:"投保时间",content:f(j)(null==(A=f(x))?void 0:A.orderDate).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),L(H,{label:"投保保费",content:null==(q=f(x))?void 0:q.orderAmount,line:"","min-width":"other"},null,8,["content"]),L(H,{label:"承保保费",content:null==(C=f(x))?void 0:C.orderAmount,line:"","min-width":"other"},null,8,["content"])]),h("div",nt,[h("div",it,[st,h("div",ot,[I(" 首年保费："),h("span",null,y(null==(T=f(x))?void 0:T.orderAmount),1)])]),(null==(R=null==(P=f(x))?void 0:P.riskList)?void 0:R.length)>0?(u(),m(i,{key:0,columns:Dt,class:"table","data-source":null==(_=f(x))?void 0:_.riskList},null,8,["data-source"])):O("",!0)]),h("div",lt,[f(Vt).policyInfo.schema.length?(u(),m(f(U),{key:0,modelValue:f(x),"onUpdate:modelValue":a[0]||(a[0]=t=>k(x)?x.value=t:null),schema:f(Vt).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):O("",!0)]),h("div",rt,[L(o,{modelValue:f(K),"onUpdate:modelValue":a[1]||(a[1]=t=>k(K)?K.value=t:null)},{default:p((()=>[L(s,{title:"影像信息",name:"1"},{default:p((()=>[dt,h("div",ct,[(u(!0),v(g,null,b(f(Yt)(f(N).HOLDER),((t,e)=>(u(),v("div",{key:e,class:"attachment-item"},[h("img",{src:t.uri,alt:""},null,8,ut)])))),128))]),mt,h("div",pt,[(u(!0),v(g,null,b(f(Yt)(f(N).INSURED),((t,e)=>(u(),v("div",{key:e,class:"attachment-item"},[h("img",{src:t.uri,alt:""},null,8,ft)])))),128))]),vt,h("div",ht,[(u(!0),v(g,null,b(f(Yt)(f(N).BENEFICIARY),((t,e)=>(u(),v("div",{key:e,class:"attachment-item"},[h("img",{src:t.uri,alt:""},null,8,It)])))),128))]),yt,h("div",Lt,[(u(!0),v(g,null,b(f(Yt)(f(N).GUARDIAN),((t,e)=>(u(),v("div",{key:e,class:"attachment-item"},[h("img",{src:t.uri,alt:""},null,8,gt)])))),128))]),bt,h("div",jt,[(u(!0),v(g,null,b(f(Yt)(f(N).INIT_SIGN),((t,e)=>(u(),v("div",{key:e,class:"attachment-item"},[h("img",{src:t.uri,alt:""},null,8,Ot)])))),128))])])),_:1})])),_:1},8,["modelValue"])]),h("div",kt,[L(M,{title:"投保告知信息",data:f(Vt).customerQuestions||[]},null,8,["data"])]),h("div",Nt,[f(Rt)?(u(),m(G,{key:0,ref:"personalInfoRef",modelValue:f(Qt),"onUpdate:modelValue":a[2]||(a[2]=t=>k(Qt)?Qt.value=t:null),"product-factor":f(Rt),"is-view":""},null,8,["modelValue","product-factor"])):O("",!0)]),f(Vt).payInfo.schema.length?(u(),m(f(E),{key:0,ref:"payInfoRef",modelValue:f(x).tenantOrderPayInfoList,"onUpdate:modelValue":a[3]||(a[3]=t=>f(x).tenantOrderPayInfoList=t),schema:f(Vt).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):O("",!0),w((u(),v("div",wt,[L(z,{detail:f(x),onHandleCancel:Mt},null,8,["detail"])])),[[r,f(Pt)]])])):O("",!0)]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-65c2f4cf"]]);export{Dt as default};

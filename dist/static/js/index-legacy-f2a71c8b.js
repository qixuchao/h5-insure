!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-occupational-wrapper .popup-title[data-v-4b261f8d]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-occupational-wrapper .popup-content[data-v-4b261f8d]{height:13.84rem}.com-occupational-wrapper .footer-bar[data-v-4b261f8d]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.com-personal-info-wrapper .placeholder[data-v-218c66be]{color:#99a9c0}.com-risk-card-wrapper.part-card[data-v-f2e353c8]{background-color:#fff;margin-bottom:.26667rem}.com-risk-card-wrapper .delete-risk[data-v-f2e353c8]{display:flex;align-items:center;justify-content:center;margin-top:.06667rem}.com-risk-card-wrapper .delete-risk .svg-icon[data-v-f2e353c8]{font-size:.42667rem}.com-risk-card-wrapper .custom-field[data-v-f2e353c8]{display:flex;flex-direction:column}.com-risk-card-wrapper .custom-field .field-tip[data-v-f2e353c8]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .popup-title[data-v-24bb32ea]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem;font-size:.45333rem;font-weight:600;color:#393d46}.com-risk-list-wrapper .risk-list[data-v-24bb32ea]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper[data-v-24bb32ea] .van-cell-group--inset{border-bottom:1px solid #eeeff4}.com-risk-list-wrapper[data-v-24bb32ea] .van-cell-group--inset .van-cell{padding:.30667rem 0}.com-risk-list-wrapper .cell-title[data-v-24bb32ea]{display:flex;flex-direction:column}.com-risk-list-wrapper .cell-title .title-desc[data-v-24bb32ea]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .footer-bar[data-v-24bb32ea]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.risk-list-wrapper[data-v-ab441982]{margin-bottom:3.13333rem}.risk-list-wrapper .add-rider-risk[data-v-ab441982]{background-color:#fff;margin-top:-.26667rem;height:1.41333rem;display:flex;align-items:center;justify-content:space-between;padding:var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding)}.risk-list-wrapper .add-rider-risk .left-part[data-v-ab441982]{font-weight:400;color:#99a9c0;font-size:.4rem}button[data-v-43a1c07a]{width:2.88rem;height:1.06667rem;background:#f6f7fc;border-radius:.16rem;font-size:.37333rem;font-weight:400;color:#393d46;border:0}button.active-button[data-v-43a1c07a]{color:#f6f7fc;background-color:#0d6efe;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAxlBMVEUAAADo7//1+P/u9P/j7P/6+//////+///9///8/f/9/v/9/v/+/v/+///////////3+f/4+v/4+//////8/f/+/v/u8//6/P/3+v/4+//2+f/1+P/w9f8Nbv/z9//s8v/p8P/y9v/r8f/6+//////m7v/k7f/n7//j6//h6v8fef/a6P/S4//G3f9npP84iP8XdP8Scf+00f+dw/+Gtv9wqf9Jkv8qf//A2f+ix/95r//M3/+61P+tzf+Qvf9anP9Zm/9Umf9RAkYxAAAAFHRSTlMAgICAgICA1bTRinRjSyXm5syxDQ9dqxQAAAI0SURBVEjHpc4Je6IwEIDh2ava7bGXokICggIr3nfbPfv//1RnTCGBUCTyPfNshsjLFq7G4+64izN+I/l798t1++Ye1K66WIZxKSZgdt+61bRJrbsK3el2cPInJe8+q7r8JVHph9o/VG1aGxTd6/QoPOQL+ICj7eJZ/cs/9SQWH9KeC3d3uh71Rjj6rtcCVWtIOTFtv83pwWhA4THCkSfVGxCkZ7HjP9eQ0/2BVn/Qx9F36j6vtZcxHUeLJ5vOGyj83zIJCSnNjpw/0PIdzmi7b+OoN/OE88Sj7RsUet+31QjiKM+bFeer+Wn/Cpq2K9uuOV//tkWga4eyHRvHKe47jv1J76FEF3H27OzJPmb3UKpFruO6s0ju7B/Zv04WlGt6mXrk622K4wPZnSuDcp3+/ISvL7zTOl2S3buVWGrf9acJguUUH2ZHsovU4W8+4XLti+YrJMnGf0jIPjO8QiewD+f0Zk1qseLYwfNzQYVmPsPZ8rRl7L/eCcvg7T4w0S61E4QUYUY71ND7kz1OWTGooa3/aJMZM8GkLWYhDg48mVtp4o7hAue06FdklQRndUXQRIOB9iwPR9mhhvY8Qjr2oKYOvADHywc1tUx8iKqH4V2ghlp8AIy0bBgMh4hr6qEAVJDuUF/rQRMNhjoexjjijMFEx4XASIdhHMY4dBI21aH8QAjmWgYX6iiMIsSmOjqFOjTH8DHKgiYaLtE/G2DUImiioYmGBnoCF+vJBHEDDU00NNEvygu9bTCc0LoAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:.53333rem .53333rem;background-position:2.33333rem 1px}@charset "UTF-8";.page-trial-wrapper[data-v-99c8f870]{background-color:#f2f5fc}.page-trial-wrapper .part-card[data-v-99c8f870]{background-color:#fff;margin-bottom:.26667rem}.page-trial-wrapper .risk-content[data-v-99c8f870] .van-collapse-item__title--expanded{padding:0 .4rem 0 0;display:flex;align-items:center}.page-trial-wrapper .risk-content[data-v-99c8f870] .van-collapse-item__content{padding:0}.page-trial-wrapper .plan-risk[data-v-99c8f870] .van-tabs__line{display:none}.page-trial-wrapper .footer-bar[data-v-99c8f870]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:.4rem;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #efeff4}.page-trial-wrapper .footer-bar .trial-result[data-v-99c8f870]{width:5.86667rem;color:#ff5840;font-size:.32rem;font-weight:600}.page-trial-wrapper .footer-bar .trial-result .result-num[data-v-99c8f870]{font-size:.61333rem;font-weight:500;margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate button[data-v-99c8f870]{width:3.73333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-99c8f870]{position:absolute;z-index:122;height:.56rem;border-radius:1.33333rem;background-color:#ff5840;font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC,sans-serif;font-weight:400;color:#fff;line-height:.49333rem;padding:.04rem .28rem .02667rem .26667rem;right:.4rem;top:-.46667rem;display:flex;align-items:center}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip .close-icon[data-v-99c8f870]{margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-99c8f870]:after{content:" ";position:absolute;z-index:11;width:0;height:0;border:.13333rem solid transparent;border-top:.13333rem solid #ff5840;border-right:.13333rem solid #ff5840;right:.49333rem;bottom:-.16rem}\n',document.head.appendChild(e),System.register(["./vendor-legacy-031e1eff.js","./index-legacy-7e438ed3.js","./index-legacy-a7dfe660.js"],(function(e){"use strict";var i,a,l,t,o,r,n,d,u,s,m,c,p,v,f,y,k,g,b,V,h,I,D,L,O,C,R,A,w,P,_,x,q,T,F,U,Y,j;return{setters:[function(e){i=e.g,a=e.L,l=e.a1,t=e.r,o=e.k,r=e.m,n=e.n,d=e.j,u=e.y,s=e.z,m=e.a2,c=e.a3,p=e.a4,v=e.C,f=e.x,y=e.d,k=e.h,g=e.s,b=e.I,V=e.a5,h=e.a6,I=e.o,D=e.F,L=e.E,O=e.a7,C=e.a8,R=e.B,A=e.D,w=e.J,P=e.Q,_=e.a9,x=e.T},function(e){q=e.P,T=e.a},function(e){F=e.b,U=e.S,Y=e._,j=e.P}],execute:function(){const S=[{label:"男",value:"1"},{label:"女",value:"2"}],M=[{label:"有",value:"1"},{label:"无",value:"2"}],N=[{value:1,label:"第5个保单周年日"},{value:2,label:"起始领取年龄55周岁"},{value:3,label:"起始领取年龄60周岁"},{value:4,label:"起始领取年龄65周岁"},{value:5,label:"起始领取年龄70周岁"},{value:6,label:"起始领取年龄75周岁"}],E=[{value:1,label:"年领"},{value:2,label:"月领"}],z=[{label:"趸交",value:"1"},{label:"年交",value:"2"},{label:"半年交",value:"3"},{label:"季交",value:"4"},{label:"月交",value:"5"}],B=[{name:"同主险期间减1",value:"3"},{name:"无限制",value:"2"}],G=[{label:"返保额",value:"1"},{label:"返保费",value:"2"}],H=[{label:"投保",value:"0"},{label:"不投保",value:"-1"}],K=(e={})=>F.post("/api/gateway/system/dict/v2/queryDictInfo",e);new U({source:"sessionStorage"});const $=new U({source:"localStorage"});new U({source:"cookie"});const J={class:"com-occupational-wrapper"},Q=(e=>(m("data-v-4b261f8d"),e=e(),c(),e))((()=>u("div",{class:"popup-title"},"选择职业",-1))),W={class:"popup-content"},Z=i({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(e,{emit:i}){const m=e,c=a({show:m.show,options:[],currentValue:""}),p=()=>{i("close")},v=({value:e,selectedOptions:a})=>{const l=(a||[]).map((e=>e.value)).join("/"),t=+a[a.length-1].name;i("update:modelValue",t),i("finish",l),p()};return l((()=>m),(()=>{((e="")=>{var i;const a=`${null==e||null===(i=e.toLocaleUpperCase)||void 0===i?void 0:i.call(e)}_OCCUPATION`,l=$.get("occupational")||{};l[a]?c.options=l[a]:K({dictCodeList:[a]}).then((({code:e,data:i})=>{if("10000"===e){var t;const e=(e=>{const i=e,a=e=>{e.forEach((e=>{const i=e;i.children.length?a(i.children):i.children=null}))};return a(i),i})((null==i||null===(t=i[0])||void 0===t?void 0:t.dictItemList)||[]);c.options=e,l[a]=e,$.set("occupational",l)}}))})(m.insuredCode)}),{deep:!0,immediate:!0}),l((()=>m.modelValue),(e=>{}),{deep:!0,immediate:!0}),(e,i)=>{const a=t("van-cascader"),l=t("VanPopup");return o(),r("div",J,[n(l,{show:s(c).show,"onUpdate:show":i[1]||(i[1]=e=>s(c).show=e),"show-footer":"",position:"bottom",closeable:"",onClose:p},{default:d((()=>[Q,u("div",W,[n(a,{modelValue:s(c).currentValue,"onUpdate:modelValue":i[0]||(i[0]=e=>s(c).currentValue=e),title:"请选择职业","show-header":!1,placeholder:"请选择",options:s(c).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:v},null,8,["modelValue","options"])])])),_:1},8,["show"])])}}});var X=Y(Z,[["__scopeId","data-v-4b261f8d"]]);const ee={class:"com-personal-info-wrapper"},ie={key:0,class:"placeholder"},ae={key:1};var le=Y(i({props:{formInfo:{type:Object,required:!0,default:()=>{}},insuredCode:{type:String,required:!0,default:""},factorList:{type:Array,required:!0,default:()=>[]},ageRange:{type:Array,required:!0,default:()=>[]}},setup(e,{expose:i}){const l=e,[u,m]=p(),[c,h]=p(),I=v(),D=a({formInfo:null==l?void 0:l.formInfo,occupationalText:""}),L=e=>{D.occupationalText=e},O=()=>{h(!1)},C=f((()=>{const e=(e=>{const i=e||[];for(let a=0;a<i.length;a++)for(let e=a+1;e<i.length;e++){const l=i[a].split("_"),t=i[e].split("_"),o=i[a];l[0]===t[0]?l>t&&(i[a]=i[e],i[e]=o):"age"===l[0]&&(i[a]=i[e],i[e]=o)}return i})(null==l?void 0:l.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],a=i(e[0]),t=i(e[e.length-1]),o=y().subtract(a[0],"age"===a[1]?"year":"day").format("YYYY-MM-DD"),r=y().subtract(t[0],"age"===t[1]?"year":"day").format("YYYY-MM-DD");return{minAge:new Date(r),maxAge:new Date(o)}}));return i({validateForm:()=>new Promise(((e,i)=>{null==I||I.value.validate().then((()=>{e("")}),(()=>{i()}))}))}),(i,a)=>{const l=t("VanField"),p=t("VanForm"),v=t("van-datetime-picker"),f=t("van-popup");return o(),r("div",ee,[n(p,{ref_key:"formRef",ref:I,"input-align":"right","error-message-align":"right"},{default:d((()=>[e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY")?(o(),k(l,{key:0,modelValue:s(D).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>s(D).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink",readonly:"","is-link":"",placeholder:"请选择",onClick:a[1]||(a[1]=e=>s(m)(!0))},null,8,["modelValue"])):g("",!0),e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER")?(o(),k(l,{key:1,modelValue:s(D).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>s(D).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:d((()=>[n(q,{modelValue:s(D).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>s(D).formInfo.gender=e),options:s(S)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):g("",!0),e.factorList.includes("SOCIAL_INS")?(o(),k(l,{key:2,modelValue:s(D).formInfo.socialSecurity,"onUpdate:modelValue":a[5]||(a[5]=e=>s(D).formInfo.socialSecurity=e),name:"socialSecurity",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:d((()=>[n(q,{modelValue:s(D).formInfo.socialSecurity,"onUpdate:modelValue":a[4]||(a[4]=e=>s(D).formInfo.socialSecurity=e),options:s(M)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):g("",!0),e.factorList.includes("OCCUPATION_CATEGORY")?(o(),k(l,{key:3,modelValue:s(D).formInfo.occupationalClass,"onUpdate:modelValue":a[6]||(a[6]=e=>s(D).formInfo.occupationalClass=e),rules:[{required:!0,message:"请选择职业类型"}],name:"occupationalClass",label:"职业类型","is-link":"",readonly:"",placeholder:"请选择",onClick:a[7]||(a[7]=e=>s(h)(!0))},{input:d((()=>[s(D).occupationalText?(o(),r("div",ae,b(s(D).occupationalText),1)):(o(),r("span",ie,"请选择"))])),_:1},8,["modelValue"])):g("",!0)])),_:1},512),n(f,{show:s(u),"onUpdate:show":a[10]||(a[10]=e=>V(u)?u.value=e:null),position:"bottom"},{default:d((()=>[n(v,{type:"date","min-date":s(C).minAge,"max-date":s(C).maxAge,onConfirm:a[8]||(a[8]=e=>{s(D).formInfo.birthday=s(y)(e).format("YYYY-MM-DD"),s(m)(!1)}),onCancel:a[9]||(a[9]=e=>s(m)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"]),s(c)?(o(),k(X,{key:0,modelValue:s(D).formInfo.occupationalClass,"onUpdate:modelValue":a[11]||(a[11]=e=>s(D).formInfo.occupationalClass=e),show:s(c),"insured-code":e.insuredCode,onFinish:L,onClose:O},null,8,["modelValue","show","insured-code"])):g("",!0)])}}}),[["__scopeId","data-v-218c66be"]]);const te={class:"com-risk-card-wrapper part-card"},oe={class:"custom-field"},re={class:"field-tip"},ne={class:"custom-field"},de={class:"field-tip"},ue={class:"custom-field"},se={class:"field-tip"},me={key:0},ce={key:9,class:"liab-desc"},pe=i({props:{originData:{type:Object,required:!0,default:()=>{}},formInfo:{type:Object,required:!0,default:()=>{}},mainRiskData:{type:Object,default:()=>{}},mainRiskInfo:{type:Object,required:!1,default:()=>{}},index:{type:[Number,String],default:0,required:!0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{type:Array,default:()=>[]},enums:{type:Object,default:()=>{}}},setup(e){const i=e,m=v({}),c=h("premium")||{};m.value=h("enumList")||{};const p=v({paymentYear:{disabled:!1,prevent:!1},coverageYear:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),y=a({formInfo:i.formInfo}),V=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"object Object"==={}.toString.call(e)&&Object.keys(e).length),O=(e,i,a={})=>{let l=i;return Array.isArray(i)||(l=[`${l}`]),(e||[]).filter((e=>l.includes(`${e.value}`)||l.includes(e.value)))},C=f((()=>{var e,a,l,t,o,r,n;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?O(null==i?void 0:i.enums.RISK_INSURANCE_PERIOD,null==i||null===(r=i.originData)||void 0===r||null===(n=r.riskInsureLimitVO)||void 0===n?void 0:n.insurancePeriodValueList):2===(null===(a=i.originData)||void 0===a?void 0:a.periodType)?O([{value:"year_1",name:"1年"}],["year_1"]):O(null==i||null===(l=i.enums)||void 0===l?void 0:l.RISK_INSURANCE_PERIOD,null==i||null===(t=i.mainRiskData)||void 0===t||null===(o=t.riskInsureLimitVO)||void 0===o?void 0:o.insurancePeriodValueList)})),R=f((()=>{var e,a,l,t,o,r,n,d,u,s,m;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?O(null==i||null===(n=i.enums)||void 0===n?void 0:n.RISK_PAYMENT_PERIOD,null==i||null===(d=i.originData)||void 0===d||null===(u=d.riskInsureLimitVO)||void 0===u?void 0:u.paymentPeriodValueList):1===(null===(a=i.originData)||void 0===a?void 0:a.exemptFlag)?O(B,[`${null==i||null===(s=i.originData)||void 0===s||null===(m=s.riskInsureLimitVO)||void 0===m?void 0:m.paymentPeriodRule}`]):2===(null===(l=i.originData)||void 0===l?void 0:l.periodType)?O([{value:"year_1",name:"1年交"}],["year_1"]):O(null==i||null===(t=i.enums)||void 0===t?void 0:t.RISK_PAYMENT_PERIOD,null==i||null===(o=i.mainRiskData)||void 0===o||null===(r=o.riskInsureLimitVO)||void 0===r?void 0:r.paymentPeriodValueList)})),A=f((()=>{var e,a,l,t,o,r,n,d;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?O(z,null==i||null===(o=i.originData)||void 0===o||null===(r=o.riskInsureLimitVO)||void 0===r?void 0:r.paymentFrequencyList):1===(null==i||null===(a=i.originData)||void 0===a?void 0:a.paymentTypeRule)?O(z,null==i||null===(n=i.mainRiskData)||void 0===n||null===(d=n.riskInsureLimitVO)||void 0===d?void 0:d.paymentFrequencyList):O(z,null==i||null===(l=i.mainRiskData)||void 0===l||null===(t=l.riskInsureLimitVO)||void 0===t?void 0:t.paymentFrequencyList)})),w=f((()=>{var e,a;let l=0,t=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minAmount,t=e.maxAmount),l>e.minAmount&&(l=e.minAmount),t<e.maxAmount&&(t=e.maxAmount)})),y.formInfo.sumInsured=l,{min:l,max:t}})),P=f((()=>{var e,a;let l=0,t=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minPremium,t=e.maxPremium),l>e.minPremium&&(l=e.minPremium),t<e.maxPremium&&(t=e.maxPremium)})),y.formInfo.premium=l,{min:l,max:t}})),_=f((()=>{var e,a,l,t;const o=(null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.minCopy)||1,r=null===(l=i.originData)||void 0===l||null===(t=l.riskCalcMethodInfoVO)||void 0===t?void 0:t.maxCopy;return y.formInfo.copy=o,{min:o,max:r}})),x=(e,a,l)=>{var t,o;const r=(null===(t=i.originData)||void 0===t||null===(o=t.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1;if("sumInsured"===l){if(+e>w.value.max)return`金额最大${w.value.max}元`;if(+e<w.value.min)return`金额最小${w.value.min}元`}else{if(+e>P.value.max)return`金额最大${P.value.max}元`;if(+e<P.value.min)return`金额最小${P.value.min}元`}return+e%r==0?"":`金额必须是${r}的倍数`};return I((()=>{var e,a;const l={riskType:i.originData.riskType,riskId:i.originData.id,riskCode:i.originData.riskCode,mainRiskCode:null==i||null===(e=i.mainRiskData)||void 0===e?void 0:e.riskCode,mainRiskId:null==i||null===(a=i.mainRiskData)||void 0===a?void 0:a.id,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityId:e.id,liabilityRateType:e.liabilityRateType})))};Object.assign(null==y?void 0:y.formInfo,l)})),l((()=>{var e;return null===(e=y.formInfo)||void 0===e?void 0:e.paymentFrequency}),(e=>{var a,l,t,o;[3,4].includes(null===(a=i.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.saleMethod)&&((null===(t=i.originData)||void 0===t||null===(o=t.riskCalcMethodInfoVO)||void 0===o?void 0:o.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(y.formInfo,{sumInsured:i.perCopyAmount,premium:i.perCopyPremium})}));"1"===e&&"single"!==y.formInfo.paymentYear&&(y.formInfo.paymentYear="single")})),l((()=>{var e;return null===(e=y.formInfo)||void 0===e?void 0:e.paymentYear}),(e=>{"single"===e&&"1"!==y.formInfo.paymentFrequency&&(y.formInfo.paymentFrequency="1")})),l((()=>null==i?void 0:i.mainRiskInfo),(e=>{var a,l,t,o,r,n;e&&2===i.originData.riskType&&(1===(null===(a=i.originData)||void 0===a||null===(l=a.riskInsureLimitVO)||void 0===l?void 0:l.insurancePeriodRule)&&(e.coverageYear?p.value.coverageYear.disabled=!0:p.value.coverageYear.prevent=!0,y.formInfo.coverageYear=e.coverageYear),1===(null===(t=i.originData)||void 0===t||null===(o=t.riskInsureLimitVO)||void 0===o?void 0:o.paymentPeriodRule)&&(e.paymentYear?p.value.paymentYear.disabled=!0:p.value.paymentYear.prevent=!0,y.formInfo.paymentYear=e.paymentYear),1===(null===(r=i.originData)||void 0===r||null===(n=r.riskInsureLimitVO)||void 0===n?void 0:n.paymentTypeRule)&&(e.paymentFrequency?p.value.paymentFrequency.disabled=!0:p.value.paymentFrequency.prevent=!0,y.formInfo.paymentFrequency=e.paymentFrequency))}),{immediate:!0,deep:!0}),(i,a)=>{var l,m,v,f,h,I,T,F,U,Y,j,S,M,z,B,K,$,J,Q,W,Z,X,ee,ie,ae,le,pe,ve,fe,ye,ke,ge,be,Ve,he,Ie,De,Le;const Oe=t("ProSvg"),Ce=t("ProTitle"),Re=t("VanStepper"),Ae=t("VanField"),we=t("ProExpand");return o(),r("div",te,[n(Ce,{"risk-type":null===(l=e.originData)||void 0===l?void 0:l.riskType,title:null===(m=e.originData)||void 0===m?void 0:m.riskName},{default:d((()=>[e.removeRiskList.includes(e.originData.id)?(o(),r("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=i=>e.removeRisk(e.originData.id))},[n(Oe,{name:"delete",color:"#0d6efe"})])):g("",!0)])),_:1},8,["risk-type","title"]),1===(null===(v=e.originData)||void 0===v||null===(f=v.riskCalcMethodInfoVO)||void 0===f?void 0:f.saleMethod)&&2===(null===(h=e.originData)||void 0===h?void 0:h.exemptFlag)?(o(),k(Ae,{key:0,modelValue:s(y).formInfo.sumInsured,"onUpdate:modelValue":a[2]||(a[2]=e=>s(y).formInfo.sumInsured=e),label:"保额",name:"sumInsured",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>x(...e,"sumInsured")}]},{input:d((()=>{var i,l,t,o;return[u("div",oe,[n(Re,{modelValue:s(y).formInfo.sumInsured,"onUpdate:modelValue":a[1]||(a[1]=e=>s(y).formInfo.sumInsured=e),"input-width":"64px",min:s(w).min,step:(null===(i=e.originData)||void 0===i||null===(l=i.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,max:s(w).max},null,8,["modelValue","min","step","max"]),u("span",re,b(`金额最低${s(w).min}元，为${(null===(t=e.originData)||void 0===t||null===(o=t.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):g("",!0),2===(null===(I=e.originData)||void 0===I||null===(T=I.riskCalcMethodInfoVO)||void 0===T?void 0:T.saleMethod)?(o(),k(Ae,{key:1,modelValue:s(y).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>s(y).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>x(...e,"premium")}]},{input:d((()=>{var i,l,t,o;return[u("div",ne,[n(Re,{modelValue:s(y).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>s(y).formInfo.premium=e),step:(null===(i=e.originData)||void 0===i||null===(l=i.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,min:s(P).min,"input-width":"64px",max:s(P).max},null,8,["modelValue","step","min","max"]),u("span",de,b(`金额最低${s(P).min}元，为${(null===(t=e.originData)||void 0===t||null===(o=t.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):g("",!0),3===(null===(F=e.originData)||void 0===F||null===(U=F.riskCalcMethodInfoVO)||void 0===U?void 0:U.saleMethod)||4===(null===(Y=e.originData)||void 0===Y||null===(j=Y.riskCalcMethodInfoVO)||void 0===j?void 0:j.saleMethod)&&(null!==(S=e.originData)&&void 0!==S&&null!==(M=S.riskCalcMethodInfoVO)&&void 0!==M&&M.minCopy||null!==(z=e.originData)&&void 0!==z&&null!==(B=z.riskCalcMethodInfoVO)&&void 0!==B&&B.maxCopy)?(o(),k(Ae,{key:2,modelValue:s(y).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>s(y).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:d((()=>[u("div",ue,[n(Re,{modelValue:s(y).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>s(y).formInfo.copy=e),step:1,min:s(_).min,max:s(_).max},null,8,["modelValue","min","max"]),u("span",se,b(`${s(_).min}份起购，最多购买${s(_).max}份`),1)])])),_:1},8,["modelValue"])):g("",!0),[1,4].includes(null===(K=e.originData)||void 0===K||null===($=K.riskCalcMethodInfoVO)||void 0===$?void 0:$.saleMethod)&&1!==(null===(J=e.originData)||void 0===J?void 0:J.exemptFlag)||null===(Q=s(c))||void 0===Q||!Q[null===(W=e.originData)||void 0===W?void 0:W.riskCode]?g("",!0):(o(),k(Ae,{key:3,label:"保额"},{input:d((()=>{var i,a,l;return[u("div",null,b(null===(i=s(c))||void 0===i||null===(a=i[null===(l=e.originData)||void 0===l?void 0:l.riskCode])||void 0===a?void 0:a.amount),1)]})),_:1})),V(null===(Z=e.originData)||void 0===Z||null===(X=Z.riskInsureLimitVO)||void 0===X?void 0:X.insurancePeriodValueList)&&V(null===(ee=e.originData)||void 0===ee||null===(ie=ee.riskInsureLimitVO)||void 0===ie?void 0:ie.insurancePeriodRule)?g("",!0):(o(),k(Ae,{key:4,modelValue:s(y).formInfo.coverageYear,"onUpdate:modelValue":a[8]||(a[8]=e=>s(y).formInfo.coverageYear=e),label:"保障期间",name:"coverageYear",rules:[{required:!0,message:"请选择保障期间"}]},{input:d((()=>[n(q,{modelValue:s(y).formInfo.coverageYear,"onUpdate:modelValue":a[7]||(a[7]=e=>s(y).formInfo.coverageYear=e),disabled:p.value.coverageYear.disabled,prevent:p.value.coverageYear.prevent?"请先选择主险保障期间":"",options:s(C),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),V(null===(ae=e.originData)||void 0===ae||null===(le=ae.riskInsureLimitVO)||void 0===le?void 0:le.paymentPeriodValueList)&&V(null===(pe=e.originData)||void 0===pe||null===(ve=pe.riskInsureLimitVO)||void 0===ve?void 0:ve.paymentPeriodRule)?g("",!0):(o(),k(Ae,{key:5,modelValue:s(y).formInfo.paymentYear,"onUpdate:modelValue":a[10]||(a[10]=e=>s(y).formInfo.paymentYear=e),label:"交费期间",name:"paymentYear",rules:[{required:!0,message:"请选择交费期间"}]},{input:d((()=>[n(q,{modelValue:s(y).formInfo.paymentYear,"onUpdate:modelValue":a[9]||(a[9]=e=>s(y).formInfo.paymentYear=e),disabled:p.value.paymentYear.disabled,prevent:p.value.paymentYear.prevent?"请先选择主险交费期间":"",options:s(R),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),V(null===(fe=e.originData)||void 0===fe||null===(ye=fe.riskInsureLimitVO)||void 0===ye?void 0:ye.paymentFrequencyList)&&V(null===(ke=e.originData)||void 0===ke||null===(ge=ke.riskInsureLimitVO)||void 0===ge?void 0:ge.paymentPeriodRule)?g("",!0):(o(),k(Ae,{key:6,modelValue:s(y).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>s(y).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:d((()=>[n(q,{modelValue:s(y).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>s(y).formInfo.paymentFrequency=e),disabled:p.value.paymentFrequency.disabled,prevent:p.value.paymentFrequency.prevent?"请先选择主险交费方式":"",options:s(A)},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),V(null===(be=e.originData)||void 0===be||null===(Ve=be.riskInsureLimitVO)||void 0===Ve?void 0:Ve.annuityDrawTypeList)?g("",!0):(o(),k(Ae,{key:7,modelValue:s(y).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>s(y).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate",rules:[{required:!0,message:"请选择领取时间"}]},{input:d((()=>{var i,l;return[n(q,{modelValue:s(y).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>s(y).formInfo.annuityDrawDate=e),options:O(s(N),null===(i=e.originData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawTypeList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),V(null===(he=e.originData)||void 0===he||null===(Ie=he.riskInsureLimitVO)||void 0===Ie?void 0:Ie.annuityDrawFrequencyList)?g("",!0):(o(),k(Ae,{key:8,modelValue:s(y).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>s(y).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType",rules:[{required:!0,message:"请选择领取方式"}]},{input:d((()=>{var i,l;return[n(q,{modelValue:s(y).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>s(y).formInfo.annuityDrawType=e),options:O(s(E),null===(i=e.originData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawFrequencyList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),(o(!0),r(D,null,L((null===(De=e.originData)||void 0===De?void 0:De.riskLiabilityInfoVOList)||[],((i,a)=>(o(),r("div",{key:a},[1===i.optionalFlag?(o(),k(Ae,{key:0,modelValue:s(y).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>s(y).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:d((()=>{var l,t,n;return[u("div",null,[V(i.liabilityAttributeValueList)?(o(),r("span",me,"50万")):(o(),k(q,{key:1,modelValue:s(y).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>s(y).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:O(s(G),null===(l=e.originData)||void 0===l||null===(t=l.riskLiabilityInfoVOList)||void 0===t||null===(n=t[a])||void 0===n?void 0:n.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(o(),k(Ae,{key:1,modelValue:s(y).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>s(y).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:d((()=>{var l,t,r;return[u("div",null,[V(i.liabilityAttributeValueList)?(o(),k(q,{key:0,modelValue:s(y).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>s(y).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:s(H)},null,8,["modelValue","onUpdate:modelValue","options"])):(o(),k(q,{key:1,modelValue:s(y).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>s(y).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:O(s(G),null===(l=e.originData)||void 0===l||null===(t=l.riskLiabilityInfoVOList)||void 0===t||null===(r=t[a])||void 0===r?void 0:r.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"]))])))),128)),null!==(Le=e.originData)&&void 0!==Le&&Le.relationDesc?(o(),r("div",ce,[n(we,{title:"责任投保说明"},{default:d((()=>{var i;return[u("div",null,b(null===(i=e.originData)||void 0===i?void 0:i.relationDesc),1)]})),_:1})])):g("",!0)])}}});var ve=Y(pe,[["__scopeId","data-v-f2e353c8"]]);const fe=e=>(m("data-v-24bb32ea"),e=e(),c(),e),ye={class:"com-risk-list-wrapper"},ke=fe((()=>u("div",{class:"popup-title"},"选择附加险",-1))),ge={class:"risk-list"},be={class:"cell-title"},Ve={class:"title"},he=fe((()=>u("div",{class:"title-desc"},"此处为险种简要说明",-1))),Ie={class:"footer-bar"},De=R("确认"),Le=i({props:{riskList:{type:Array,required:!0,default:()=>[]},show:{type:Boolean,required:!0,default:!1},collocationList:{type:Array,default:()=>[]},disabled:{type:Array,required:!0,default:()=>[]},modelValue:{type:Array,required:!0,default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const m=e,c=v([]),p=v([]),f=v([...m.disabled]),y=a({show:m.show,currentChecked:[...m.modelValue]}),g=e=>{var i,a,l;if(f.value.includes(e))return;((e,i)=>{if(!m.collocationList.length)return i?void(y.currentChecked=[]):void y.currentChecked.push(e);let a=y.currentChecked,l=f.value;i?(m.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?a=a.filter((a=>a!==i.collocationRiskId||a!==e)):3===i.collocationType?(a=a.filter((i=>i!==e)),l=l.filter((e=>e!==i.collocationRiskId))):a=a.filter((i=>i!==e)))})),y.currentChecked=a,f.value=l):(m.collocationList.forEach((t=>{e===t.riskId&&(i||(2===t.collocationType?a.push(t.collocationRiskId):3===t.collocationType&&l.push(t.collocationRiskId),a.push(e)))})),y.currentChecked.push(...a),f.value=l)})(e,y.currentChecked.includes(e)),null==c||null===(i=c.value)||void 0===i||null===(a=i[e])||void 0===a||null===(l=a.toggle)||void 0===l||l.call(a)},V=()=>{i("close")},h=()=>{const e=m.riskList.filter((e=>y.currentChecked.includes(e.id)));i("update:modelValue",[...new Set(p.value)]),i("finished",e,f.value),i("close")};return O((()=>{c.value=[]})),l((()=>y.currentChecked),(e=>{p.value=e}),{deep:!0,immediate:!0}),l((()=>m.modelValue),((e=[])=>{p.value=e,f.value.push(...e)}),{deep:!0,immediate:!0}),(i,a)=>{const l=t("van-checkbox"),m=t("VanCell"),v=t("van-cell-group"),I=t("van-checkbox-group"),O=t("VanButton"),R=t("VanPopup");return o(),r("div",ye,[n(R,{show:s(y).show,"onUpdate:show":a[1]||(a[1]=e=>s(y).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:V},{default:d((()=>[ke,u("div",ge,[n(I,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e)},{default:d((()=>[n(v,{inset:""},{default:d((()=>[(o(!0),r(D,null,L(e.riskList,(e=>(o(),k(m,{key:e.id,title:e.riskName,disabled:f.value.includes(e.id),onClick:i=>g(e.id)},{"right-icon":d((()=>[n(l,{ref_for:!0,ref:i=>c.value[e.id]=i,shape:"square",disabled:f.value.includes(e.id),name:e.id,onClick:C((i=>g(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:d((()=>[u("div",be,[u("div",Ve,b(e.riskName),1),he])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),u("div",Ie,[n(O,{type:"primary",disabled:!s(y).currentChecked.length,block:"",onClick:h},{default:d((()=>[De])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var Oe=Y(Le,[["__scopeId","data-v-24bb32ea"]]);const Ce={class:"risk-list-wrapper"},Re={key:1,class:"add-rider-risk"},Ae={class:"left-part"},we=R("+ 附加险"),Pe=i({props:{riskInfo:{type:Object,required:!0,default:()=>{}},originData:{type:Object,required:!0,default:()=>{}},pickFactor:{type:Function,required:!0,default:()=>{}},enums:{type:Object,default:()=>{}}},setup(e){var i;const t=e,[m,c]=p(!1);v(null),v(null);const f=a({mainRiskInfo:t.riskInfo,riderRiskInfo:null===(i=t.riskInfo)||void 0===i?void 0:i.riderRiskVOList,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),y=(e,i)=>{f.requiredRiderRiskData=f.requiredRiderRiskData.concat(e),f.disabledList=i},V=e=>{A.confirm({message:"确定要删除附加险么？"}).then((()=>{var i;const a=[e];((null===(i=f.mainRiskData)||void 0===i?void 0:i.collocationVOList)||[]).forEach((i=>{e!==i.riskId||2!==i.collocationType&&3!==i.collocationType||a.push(i.collocationRiskId)})),f.checkedList=f.checkedList.filter((e=>!a.includes(e))),f.requiredRiderRiskData=f.requiredRiderRiskData.filter((e=>!a.includes(e.id))),f.disabledList=f.disabledList.filter((e=>!a.includes(e))),Object.assign(f.riderRiskInfo,{[e]:void 0})})).catch((()=>{}))};return I((()=>{f.requiredRiderRiskData})),l((()=>f.requiredRiderRiskData),(e=>{const i=[f.mainRiskData,...e];let a=[],l=[];const o=[];i.forEach(((e,i)=>{var t,r,n;const d=(null==e||null===(t=e.riskCalcMethodInfoVO)||void 0===t?void 0:t.riskFactorRelationList)||[];a=a.concat(d.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),l=l.concat(d.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),o.push(null==e||null===(r=e.riskInsureLimitVO)||void 0===r?void 0:r.minHolderAge,null==e||null===(n=e.riskInsureLimitVO)||void 0===n?void 0:n.maxHolderAge)})),(e||[]).forEach((e=>{var i;const a={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,mainRiskCode:f.mainRiskData.riskCode,mainRiskId:null===(i=f.mainRiskData)||void 0===i?void 0:i.id,riskCategory:e.riskCategory,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((e=>({liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityId:e.id,liabilityRateType:e.liabilityRateType})))};Object.assign(f.riderRiskInfo,{[e.id]:a})})),t.pickFactor({insuredFactorList:[...new Set(a)],holderFactorList:[...new Set(l)],ageRange:o})}),{deep:!0,immediate:!0}),l((()=>t.originData),(e=>{(e||[]).forEach((e=>{1===e.riskType?(f.mainRiskData=e,f.requiredRiderRiskData=(null==e?void 0:e.requiredRiderRiskVOList)||[],f.riderRiskList=null==e?void 0:e.optionalRiderRiskVOList):f.riderRiskList.push(e)}))}),{deep:!0,immediate:!0}),(i,a)=>{var l,t,p,v,h;return o(),r("div",Ce,[s(f).mainRiskData?(o(),k(ve,{key:0,enums:e.enums,"form-info":s(f).mainRiskInfo,"origin-data":s(f).mainRiskData},null,8,["enums","form-info","origin-data"])):g("",!0),(o(!0),r(D,null,L(s(f).requiredRiderRiskData,((i,a)=>(o(),k(ve,{key:i.id,"form-info":s(f).riderRiskInfo[i.id],index:a,enums:e.enums,"main-risk-data":s(f).mainRiskData,"main-risk-info":s(f).mainRiskInfo,"origin-data":i,"remove-risk":V,"remove-risk-list":s(f).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),(null===(l=s(f))||void 0===l||null===(t=l.riderRiskList)||void 0===t?void 0:t.length)-(null===(p=s(f))||void 0===p||null===(v=p.checkedList)||void 0===v?void 0:v.length)?(o(),r("div",Re,[u("span",Ae,b(`共有${s(f).riderRiskList.length-s(f).checkedList.length}款附加险可以添加`),1),n(T,{activied:"",onClick:a[0]||(a[0]=e=>s(c)(!0))},{default:d((()=>[we])),_:1})])):g("",!0),s(m)?(o(),k(Oe,{key:2,modelValue:s(f).checkedList,"onUpdate:modelValue":a[1]||(a[1]=e=>s(f).checkedList=e),show:s(m),disabled:s(f).disabledList,"risk-list":s(f).riderRiskList,"collocation-list":(null===(h=s(f).mainRiskData)||void 0===h?void 0:h.collocationVOList)||[],onFinished:y,onClose:a[2]||(a[2]=e=>s(c)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):g("",!0)])}}});var _e=Y(Pe,[["__scopeId","data-v-ab441982"]]);const xe=i({props:{title:{type:String,default:()=>""},active:{type:Boolean,default:!1}},setup:e=>(i,a)=>(o(),r("button",{class:w(e.active?"active-button":"")},b(e.title),3))});var qe=Y(xe,[["__scopeId","data-v-43a1c07a"]]);const Te={key:0,class:"part-card"},Fe={key:1,class:"part-card"},Ue={class:"risk-content"},Ye={key:0,class:"risk"},je={key:1,class:"plan-risk"},Se={class:"footer-bar"},Me={class:"trial-result"},Ne={class:"result-num"},Ee=R(" 元起 "),ze={class:"trial-operate"},Be={key:0,class:"retrial-tip"},Ge=R(" 条件更改后，需要重新试算 "),He=R("去试算"),Ke=R("立即投保"),$e=i({setup(e){const{id:i=118}=P().query,m=v({personVO:{}}),c=v({insuredCode:"",personVO:{}}),p=v({}),f=v({}),y=v({}),V=v({}),h=v({}),O=a({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0,retrialTip:!1,enumList:{},ageRange:[],collapseName:["1"]});_("premium",h.value);const C=()=>{O.retrialTip=!1},R=()=>{var e;const i=JSON.parse(JSON.stringify(p.value[O.currentPlan])),a=Object.values(i.riderRiskVOList).map((e=>{const i=e;if("3"===i.paymentYear){const e=(p.value[O.currentPlan].paymentYear||"").split("_");e[1]&&(e[1]-=1),i.paymentYear=e.join("_")}return i.liabilityVOList=(i.liabilityVOList||[]).filter((e=>e.liabilityAttributeValue&&"-1"!==e.liabilityAttributeValue)).map((e=>{const i=e;return"0"===i.liabilityAttributeValue&&(i.liabilityAttributeValue=""),i})),i}));i.liabilityVOList=i.liabilityVOList.filter((e=>e.liabilityAttributeValue&&"-1"!==e.liabilityAttributeValue)).map((e=>{const i=e;return"0"===i.liabilityAttributeValue&&(i.liabilityAttributeValue=""),i}));((e={})=>F.post("/api/insurance/premiumCalc",e))({...{holder:{personVO:{...m.value.personVO,birthday:m.value.personVO.birthday&&`${m.value.personVO.birthday} 00:00:00`}},productCode:null==O||null===(e=O.riskBaseInfo)||void 0===e?void 0:e.productCode,insuredVOList:[{...c.value,personVO:{...c.value.personVO,birthday:c.value.personVO.birthday&&`${c.value.personVO.birthday} 00:00:00`},productPlanVOList:[{planCode:O.currentPlan||"",riskVOList:[{...i,riderRiskVOList:a}]}]}]}}).then((({code:e,data:i})=>{if("10000"===e){O.retrialTip=!1,O.trialResult=i,O.canTrial=!1;const e={},a=(i=[])=>{(i||[]).forEach((i=>{e[i.riskCode]=i,i.riskPremiumDetailVOList&&a(i.riskPremiumDetailVOList)}))};a(i.riskPremiumDetailVOList),Object.assign(h.value,e)}}))},A=()=>{var e,i,a,l,t;Promise.all([null==f||null===(e=f.value)||void 0===e||null===(i=e.validateForm)||void 0===i?void 0:i.call(e),null==y||null===(a=y.value)||void 0===a||null===(l=a.validateForm)||void 0===l?void 0:l.call(a),null==V||null===(t=V.value)||void 0===t?void 0:t.validate()]).then((()=>{R()}))},w=()=>{x("准备投保")},q=()=>{((e={})=>F.get(`/api/product/insureProductDetail/${null==e?void 0:e.productId}`,e))({productId:i}).then((({code:e,data:i})=>{"10000"===e&&(O.riskBaseInfo=null==i?void 0:i.productBasicInfoVO,((null==i?void 0:i.productRelationPlanVOList)||(null==i?void 0:i.riskDetailVOList)||[]).forEach(((e,i)=>{0===i&&(O.currentPlan=e.planCode||0),Object.assign(p.value,{[e.planCode||i]:{liabilityVOList:[],riderRiskVOList:{}}})})),O.riskData=(null==i?void 0:i.riskDetailVOList)||[],O.riskPlanData=(null==i?void 0:i.productRelationPlanVOList)||[])})).finally((()=>{}))},T=e=>{O.holderFactor=e.holderFactorList,O.insuredFactor=e.insuredFactorList,O.ageRange=e.ageRange};return l([()=>p.value,()=>m.value,()=>c.value],(e=>{e&&!O.canTrial&&(O.canTrial=!0,O.retrialTip=!0)}),{deep:!0}),I((()=>{q(),K({dictCodeList:["RISK_PAYMENT_PERIOD","RISK_INSURANCE_PERIOD"]}).then((({code:e,data:i})=>{if("10000"===e){const e={};i.forEach((i=>{e[i.dictCode]=i.dictItemList})),O.enumList=e}}))})),(e,i)=>{const a=t("VanForm"),l=t("VanTab"),v=t("VanTabs"),h=t("van-collapse-item"),I=t("van-collapse"),R=t("VanButton"),P=t("ZaPageWrap");return o(),k(P,{class:"page-trial-wrapper"},{default:d((()=>{var e,t,P,_;return[s(O).holderFactor.length?(o(),r("div",Te,[n(j,{title:"投保人"}),n(le,{ref_key:"holderRef",ref:f,"insured-code":null===(e=s(O).riskBaseInfo)||void 0===e?void 0:e.insurerCode,"form-info":m.value.personVO,"factor-list":s(O).holderFactor,"age-range":s(O).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):g("",!0),s(O).insuredFactor.length?(o(),r("div",Fe,[n(j,{title:"被保人"}),n(le,{ref_key:"insuredRef",ref:y,"insured-code":null===(t=s(O).riskBaseInfo)||void 0===t?void 0:t.insurerCode,"form-info":c.value.personVO,"factor-list":s(O).insuredFactor,"age-range":s(O).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):g("",!0),u("div",Ue,[n(I,{modelValue:s(O).collapseName,"onUpdate:modelValue":i[1]||(i[1]=e=>s(O).collapseName=e)},{default:d((()=>[n(h,{name:"1"},{title:d((()=>[n(j,{title:"投保方案"})])),default:d((()=>[s(O).riskData.length?(o(),r("div",Ye,[n(a,{ref_key:"riskFormRef",ref:V,"input-align":"right","error-message-align":"right"},{default:d((()=>[n(_e,{"risk-info":p.value[0],enums:s(O).enumList,"origin-data":s(O).riskData,"pick-factor":T},null,8,["risk-info","enums","origin-data"])])),_:1},512)])):g("",!0),s(O).riskPlanData.length?(o(),r("div",je,[n(a,{ref_key:"riskFormRef",ref:V,"input-align":"right","error-message-align":"right"},{default:d((()=>[n(v,{active:s(O).currentPlan,"onUpdate:active":i[0]||(i[0]=e=>s(O).currentPlan=e)},{default:d((()=>[(o(!0),r(D,null,L(s(O).riskPlanData,(e=>(o(),k(l,{key:e.planCode,name:e.planCode,title:e.planName},{title:d((()=>[n(qe,{title:e.planName,active:s(O).currentPlan===e.planCode},null,8,["title","active"])])),default:d((()=>[e.planCode===s(O).currentPlan?(o(),k(_e,{key:0,"risk-info":p.value[e.planCode],enums:s(O).enumList,"origin-data":e.riskDetailVOList,"pick-factor":T},null,8,["risk-info","enums","origin-data"])):g("",!0)])),_:2},1032,["name","title"])))),128))])),_:1},8,["active"])])),_:1},512)])):g("",!0)])),_:1})])),_:1},8,["modelValue"])]),u("div",Se,[u("span",Me,[u("span",Ne,b((s(O).retrialTip?"0":(null===(P=s(O))||void 0===P||null===(_=P.trialResult)||void 0===_?void 0:_.premium)||"0").toLocaleString()),1),Ee]),u("div",ze,[s(O).retrialTip?(o(),r("div",Be,[Ge,u("span",{class:"close-icon",onClick:C},"X")])):g("",!0),s(O).canTrial?(o(),k(R,{key:1,type:"primary",onClick:A},{default:d((()=>[He])),_:1})):(o(),k(R,{key:2,type:"primary",onClick:w},{default:d((()=>[Ke])),_:1}))])])]})),_:1})}}});e("default",Y($e,[["__scopeId","data-v-99c8f870"]]))}}}))}();

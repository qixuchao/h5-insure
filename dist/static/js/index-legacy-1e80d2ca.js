!function(){var e=document.createElement("style");e.innerHTML=".pro-modal .pro-overlay[data-v-a6bc1804]{position:fixed;top:0;left:0;z-index:99;width:100%;height:100%;background:var(--van-overlay-background-color)}.pro-modal .pro-modal-wrapper[data-v-a6bc1804]{position:fixed;top:0;left:0;z-index:100;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:1.2rem;text-align:center}.pro-modal .pro-modal-wrapper .pro-modal-body[data-v-a6bc1804]{width:100%;height:60%;background:url(/static/assets/upgrade_success.7fcab77e.png) no-repeat;background-size:contain;padding:.4rem}.pro-modal .pro-modal-wrapper .pro-modal-body .pro-modal-body-bg[data-v-a6bc1804],.pro-modal .pro-modal-wrapper .pro-modal-body .pro-modal-body-bg img[data-v-a6bc1804]{width:100%}.pro-modal .pro-modal-wrapper .pro-modal-body .pro-modal-btn[data-v-a6bc1804]{width:5.6rem;height:1.17333rem;background:var(--van-primary-color);border-radius:.58667rem;font-size:.45333rem;font-weight:700;color:#fff;line-height:1.17333rem;text-align:center;margin:auto}.pro-modal .pro-modal-wrapper .pro-modal-content[data-v-a6bc1804]{padding:4.13333rem 0 .8rem;font-size:.4rem;font-weight:500;color:#9f5012;line-height:.61333rem}.pro-modal .pro-modal-wrapper .pro-modal-close[data-v-a6bc1804]{padding:.53333rem}.pro-modal .pro-modal-wrapper .pro-modal-close img[data-v-a6bc1804]{width:.77333rem;height:.77333rem}.van-config-provider.router-view{background:linear-gradient(180deg,#fea64a 0%,#fc7429 88%,#fc6d24 100%)}.page-activity-invite{height:100%;background:linear-gradient(180deg,#fea64a 0%,#fc7429 88%,#fc6d24 100%)}.page-activity-invite .banner{width:100%}.page-activity-invite .container{padding:.26667rem}.page-activity-invite .container .title{margin:auto;margin-top:-1.6rem;width:calc(100% - .8rem)}.page-activity-invite .container .title img{width:100%}.page-activity-invite .container .main-form{background:url(/static/assets/bg.c7f48ab0.png) no-repeat;background-size:100% 100%;position:relative;padding:1.33333rem 0 .6rem}.page-activity-invite .container .main-form .sms-code{width:2rem;text-align:center;font-size:.4rem;font-weight:500;color:var(--van-primary-color);padding:0;white-space:nowrap}.page-activity-invite .container .main-form .submit{height:1.33333rem;margin-top:.53333rem;margin-bottom:.46667rem;background:url(/static/assets/button.4c281a6e.png) no-repeat;background-size:contain;background-position:center;border:none}.page-activity-invite .container .main-form .agree{padding:0 .33333rem;font-size:.37333rem;font-weight:400;color:#666;display:flex;align-items:flex-start}.page-activity-invite .container .main-form .agree .check-wrap{margin-right:.26667rem}.page-activity-invite .container .main-form .van-cell .van-field__value{align-items:flex-start}.page-activity-invite .van-field__body{width:100%}\n",document.head.appendChild(e),System.register(["./vendor-legacy-92a8f610.js","./infoCollection-legacy-463c6cf6.js","./phoneVerify-legacy-49ed4c94.js","./validator-legacy-70be20af.js","./utils-legacy-caa8bbf8.js","./index-legacy-60fc8b86.js","./trial-legacy-09564f5f.js","./product-legacy-ba8a3676.js","./theme-legacy-0d67cf8b.js","./close-legacy-d9c2a5df.js","./trial-legacy-05a98547.js"],(function(e){"use strict";var a,t,n,o,l,r,i,d,c,s,u,m,p,v,f,g,h,b,y,w,I,k,C,x,V,_,N,j,O,S,z,L,U,D,M,E,F,P,R,T;return{setters:[function(e){a=e.g,t=e.E,n=e.M,o=e._,l=e.r,r=e.j,i=e.k,d=e.m,c=e.p,s=e.A,u=e.z,m=e.J,p=e.L,v=e.T,f=e.n,g=e.t,h=e.a4,b=e.a5,y=e.O,w=e.a9,I=e.h,k=e.G,C=e.F,x=e.C},function(e){V=e.R},function(e){_=e.s,N=e.c},function(e){j=e.v,O=e.a,S=e.b},function(e){z=e.F,L=e.g},function(e){U=e.G,D=e._},function(e){M=e.g,E=e.m,F=e.i},function(e){P=e.p},function(e){R=e.t},function(e){T=e.c},function(){}],execute:function(){const q=a({props:{isCheck:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>{}}},emits:["on-verify"],setup(e,{emit:a}){var f;const g=e,h=t({}),b=t(!1),y=t(0),w=t("获取验证码"),I=n({mobile:null===(f=g.userInfo)||void 0===f?void 0:f.mobile,smsCode:""}),k=e=>!!j(e)||"请输入正确的手机号",C=async()=>{y.value>0||null==h||h.value.validate("mobile").then((async()=>{const e=await _(I.mobile),{code:a,data:t}=e;"10000"===a&&(b.value=!0,v({message:"短信发送成功，请查收"}),(()=>{if(y.value>0)return;y.value=30;const e=()=>{w.value=`${y.value}s`,y.value-=1};e();const a=setInterval((()=>{0===y.value?(w.value="获取验证码",y.value=0,clearInterval(a)):e()}),1e3)})())}))},x=async()=>{const e=await N(I.mobile,I.smsCode),{data:t}=e;t&&a("on-verify",I)},V=async()=>{null==h||h.value.validate().then((async()=>{x()}))};return o((()=>I),(()=>{j(I.mobile)&&O(I.smsCode)&&b.value&&x()}),{deep:!0,immediate:!0}),(e,a)=>{const t=l("van-field"),n=l("van-cell-group"),o=l("VanForm");return r(),i(o,{ref_key:"formRef",ref:h,"label-width":"80"},{default:d((()=>[c(n,null,{default:d((()=>[c(t,{modelValue:s(I).mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>s(I).mobile=e),name:"mobile",label:"手机号",clearable:"",placeholder:"请输入手机号",maxlength:s(z).MOBILE,rules:[{validator:k}]},null,8,["modelValue","maxlength","rules"]),c(t,{modelValue:s(I).smsCode,"onUpdate:modelValue":a[1]||(a[1]=e=>s(I).smsCode=e),type:"digit",name:"smsCode",label:"验证码",clearable:"",placeholder:"请输入验证码",maxlength:s(z).SMS_CODE},{button:d((()=>[u("div",{class:p(["sms-code",{"count-down":y.value>0}]),onClick:C},m(w.value),3)])),_:1},8,["modelValue","maxlength"])])),_:1}),u("div",{class:p([{"check-submit":g.isCheck},{submit:!g.isCheck}]),onClick:V},null,2)])),_:1},512)}}}),B=a({props:{userInfo:{type:Object,default:()=>{}}},emits:["on-submit"],setup(e,{emit:a}){const o=e,m=t({}),p=n({name:o.userInfo.name,certNo:o.userInfo.certNo}),v=e=>!!U(p.certNo)||"请填写正确的证件号",f=e=>!!S(e)||"请输入正确的姓名",g=()=>{null==m||m.value.validate().then((async e=>{a("on-submit",p)}))};return(e,a)=>{const t=l("van-field"),n=l("van-cell-group"),o=l("VanForm");return r(),i(o,{ref_key:"formRef",ref:m,"label-width":"80"},{default:d((()=>[c(n,null,{default:d((()=>[c(t,{modelValue:s(p).name,"onUpdate:modelValue":a[0]||(a[0]=e=>s(p).name=e),name:"name",label:"姓名",clearable:"",placeholder:"请输入姓名",maxlength:s(z).NAME,rules:[{validator:f}]},null,8,["modelValue","maxlength","rules"]),c(t,{modelValue:s(p).certNo,"onUpdate:modelValue":a[1]||(a[1]=e=>s(p).certNo=e),name:"certNo",label:"身份证",clearable:"",placeholder:"请输入身份证号",maxlength:s(z).ID_CARD,rules:[{validator:v}]},null,8,["modelValue","maxlength","rules"])])),_:1}),u("div",{class:"submit",onClick:g})])),_:1},512)}}});const H=e=>(h("data-v-a6bc1804"),e=e(),b(),e),A={key:0,class:"pro-modal"},G=H((()=>u("div",{class:"pro-overlay"},null,-1))),J={class:"pro-modal-wrapper"},$=H((()=>u("div",{class:"pro-modal-content"},[u("p",null,"恭喜您"),u("p",null,"领取成功")],-1))),K=["src"],W=a({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(e,{emit:a}){const t=e,n=()=>{a("on-close")};return(e,a)=>t.isShow?(r(),f("div",A,[G,u("div",J,[u("div",{class:"pro-modal-body"},[$,u("div",{class:"pro-modal-btn",onClick:n},"我知道了")]),u("div",{class:"pro-modal-close",onClick:n},[u("img",{src:s(T)},null,8,K)])])])):g("",!0)}});var X=D(W,[["__scopeId","data-v-a6bc1804"]]);const Y={class:"page-activity-invite"},Q=["src"],Z={class:"container"},ee={class:"main-form"},ae={class:"title"},te=["src"],ne={class:"agree"},oe={class:"check-wrap"},le=x(" 我已阅读并同意 ");e("default",a({setup(e){const a=y(),o=w(),{productCode:m="7X9",tenantId:p="",phoneNo:g,saleChannelId:h,agentCode:b="",paymentMethod:x,from:_}=a.query,N=t(!0),j="check"===_,O=n({title:"/static/assets/title-step1.97cb9efa.png",attachmentList:[{attachmentName:"",attachmentUri:""}],userInfo:{mobile:g,certNo:"",name:""},agree:!1}),S=t(),z=t(),U=t(!1),D=async e=>{O.userInfo.mobile=e.mobile;const a=await M({holderPhone:O.userInfo.mobile,productCode:m,tenantId:p}),{code:t,data:n}=a;var o,l;"10000"===t&&(O.userInfo.name=null===(o=n.tenantOrderHolder)||void 0===o?void 0:o.name,O.userInfo.certNo=null===(l=n.tenantOrderHolder)||void 0===l?void 0:l.certNo);O.title="/static/assets/title-step2.258af5e9.png",N.value=!1},T=async e=>{if(O.agree)try{v({message:"领取中...",forbidClick:!0,loadingType:"spinner"}),O.userInfo.certNo=e.certNo,O.userInfo.name=e.name;const t=L({tenantId:p,detail:S.value,insureDetail:z.value,saleChannelId:h,saleUserId:b,holder:O.userInfo,insured:{...O.userInfo,relationToHolder:V.SELF},paymentMethod:x,renewalDK:"",successJumpUrl:"",premium:0,orderStatus:"",orderTopStatus:"",tenantOrderRiskList:[]}),n=await E(t),{code:l}=n;if("10000"===l){if(j)return void(U.value=!0);o.push({path:"/chuangxin/baigebao/productDetail",query:{...a.query,tenantId:p,phoneNo:O.userInfo.mobile,certNo:O.userInfo.certNo,name:O.userInfo.name,productCode:"BWYL2021",agentCode:b}})}}catch(t){v.clear()}else v("请勾选协议")},H=()=>{U.value=!1};return I((()=>{(async()=>{const e=P({productCode:m,withInsureInfo:!0,tenantId:p}),a=F({productCode:m});Promise.all([e,a]).then((([e,a])=>{var t,n;"10000"===e.code&&(S.value=e.data,O.attachmentList=(null===(t=S.value)||void 0===t||null===(n=t.tenantProductInsureVO)||void 0===n?void 0:n.attachmentVOList)||[]),"10000"===a.code&&(z.value=a.data)}))})()})),(e,a)=>{const t=l("van-checkbox"),n=l("ProPDFviewer"),o=l("van-config-provider");return r(),i(o,{"theme-vars":s(R)},{default:d((()=>{var e,o;return[u("div",Y,[u("img",{src:null===(e=S.value)||void 0===e||null===(o=e.tenantProductInsureVO)||void 0===o?void 0:o.banner[0],class:"banner"},null,8,Q),u("div",Z,[u("div",ee,[u("div",ae,[u("img",{src:s(O).title},null,8,te)]),N.value?(r(),i(q,{key:0,"user-info":s(O).userInfo,onOnVerify:D},null,8,["user-info"])):(r(),i(B,{key:1,"user-info":s(O).userInfo,onOnSubmit:T},null,8,["user-info"])),u("div",ne,[u("div",oe,[c(t,{modelValue:s(O).agree,"onUpdate:modelValue":a[0]||(a[0]=e=>s(O).agree=e),name:"agree",shape:"square"},null,8,["modelValue"])]),u("div",null,[le,(r(!0),f(C,null,k(s(O).attachmentList||[],((e,a)=>(r(),i(n,{key:a,class:"file-name",title:`《${e.attachmentName}》`,content:e.attachmentUri,type:"pdf"},null,8,["title","content"])))),128))])])])])]),c(X,{"is-show":U.value,onOnClose:H},null,8,["is-show"])]})),_:1},8,["theme-vars"])}}}))}}}))}();

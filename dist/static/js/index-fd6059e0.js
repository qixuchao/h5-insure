var be=Object.defineProperty,Fe=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var se=(l,n,i)=>n in l?be(l,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[n]=i,P=(l,n)=>{for(var i in n||(n={}))ke.call(n,i)&&se(l,i,n[i]);if(te)for(var i of te(n))De.call(n,i)&&se(l,i,n[i]);return l},oe=(l,n)=>Fe(l,Be(n));import{g as z,v as G,C as w,a0 as ae,r as b,k as s,m as o,n as r,j as v,y as e,z as t,I as m,s as y,B as x,F as U,E as j,h as E,a2 as ne,a3 as ce,aa as Y,a5 as Ce,G as $e,Q as Ae,L as Te,M as we,a6 as Ee,D as xe,T as Se}from"./vendor-e9263418.js";import{_ as Z}from"./index-654379f5.js";import{q as Le}from"./businessOpportunity-65064208.js";import{u as H,S as Ie}from"./index-b8742a0a.js";import{_ as le}from"./plugin-vue_export-helper-46f75680.js";import{_ as Oe,a as qe,l as Re}from"./constant-2d4194ea.js";import{s as Ne,a as Ve,b as Ue,m as je,c as ze,r as Me}from"./customer-13670369.js";import{_ as Pe}from"./arrow-br-759c9d16.js";const Ge={class:"customer-list-item"},We={class:"left"},Ze=["src"],Qe={class:"left"},Ye={class:"name"},He={key:0,class:"icon icon-bg1"},Je={key:1,class:"icon icon-bg2"},Ke={key:2,class:"icon icon-bg3"},Xe={key:3,class:"icon icon-bg6"},et={key:4,class:"icon icon-bg5"},tt={key:5,class:"icon icon-bg6"},st={key:6,class:"icon icon-bg4"},ot={key:0,class:"from-wx"},ut=["src"],at=x(" \u5FAE\u4FE1\u5BA2\u6237 "),nt={class:"right"},ct=["src"],ue=z({props:{data:{type:Object,required:!1,default:()=>Object},disabled:{type:Boolean,required:!1,default:()=>!0}},emits:["on-delete"],setup(l,{emit:n}){const i=l,{getIconUrl:_}=H(),{data:u,disabled:f}=G(i),D=w(!1),S=ae(),A=[{name:"\u62E8\u6253\u7535\u8BDD",color:"$primary-color",type:"1"},{name:"\u53D1\u9001\u77ED\u4FE1",type:"2"}],L=d=>{D.value=!1,Le({agentCustomerId:u.value.agentCustomerId,customerType:u.value.customerType,businessType:"06",useType:d.type==="1"?"TEL":"SMS"}).then(B=>{d.type==="1"?window.location.href=`tel:${B.data.data}`:window.location.href=`sms:${B.data.data}`})},C=()=>{n("on-delete",u.value)},h=()=>{S.push({name:"customerDetail",query:{agentCustomerId:u.value.agentCustomerId,customerType:u.value.customerType,customerName:u.value.customerName}})},F=d=>{d.stopPropagation(),D.value=!0};return(d,B)=>{const k=b("van-button"),R=b("van-swipe-cell"),p=b("van-action-sheet");return s(),o("div",Ge,[r(R,{disabled:t(f)},{right:v(()=>[r(k,{square:"",text:"\u5220\u9664",type:"danger",class:"delete-button",onClick:C})]),default:v(()=>[e("div",{class:"list-item",onClick:h},[e("div",We,[e("div",null,[e("img",{src:t(u).gender?t(u).gender==="F"?t(_)("customer.female"):t(_)("customer.male"):t(_)("customer.defaultGender"),alt:"",class:"mf"},null,8,Ze)]),e("div",null,[e("div",Qe,[e("div",Ye,m(t(u).customerName),1),t(u).visitTag==="\u8F6C\u4ECB\u7ECD"?(s(),o("div",He,m(t(u).visitTag),1)):y("",!0),t(u).visitTag==="\u63A5\u89E6\u9762\u8C08"?(s(),o("div",Je,m(t(u).visitTag),1)):y("",!0),t(u).visitTag==="\u5BA2\u6237\u83B7\u53D6"?(s(),o("div",Ke,m(t(u).visitTag),1)):y("",!0),t(u).visitTag==="\u9700\u6C42\u5206\u6790"?(s(),o("div",Xe,m(t(u).visitTag),1)):y("",!0),t(u).visitTag==="\u7535\u8BDD\u9080\u7EA6"?(s(),o("div",et,m(t(u).visitTag),1)):y("",!0),t(u).visitTag==="\u5448\u73B0\u4FC3\u6210"?(s(),o("div",tt,m(t(u).visitTag),1)):y("",!0),t(u).visitTag==="\u4FDD\u5355\u670D\u52A1"?(s(),o("div",st,m(t(u).visitTag),1)):y("",!0)]),t(u).isRelative?(s(),o("div",ot,[e("img",{class:"img-wx",src:t(_)("customer.weixin"),alt:""},null,8,ut),at])):y("",!0)])]),e("div",nt,[e("img",{src:t(_)("customer.phone"),alt:"",class:"ph",onClick:B[0]||(B[0]=I=>F(I))},null,8,ct)])])]),_:1},8,["disabled"]),r(p,{show:D.value,"onUpdate:show":B[1]||(B[1]=I=>D.value=I),actions:A,"cancel-text":"\u53D6\u6D88","close-on-click-action":"",onSelect:L},null,8,["show"])])}}});const lt={class:"customer-list"},it={key:0,class:"list-pr"},rt={key:1,class:"list-pr"},Q=z({props:{data:{type:Array,required:!0,default:()=>[]},type:{type:String,required:!0,default:()=>"firstLetter"},disabled:{type:Boolean,required:!1,default:()=>!0}},emits:["on-delete"],setup(l,{emit:n}){const i=l,{data:_,type:u,disabled:f}=G(i);console.log(_,122);const D=S=>{n("on-delete",S)};return(S,A)=>{const L=b("van-index-anchor"),C=b("van-index-bar");return s(),o("div",lt,[t(u)==="firstLetter"?(s(),o("div",it,[r(C,{"highlight-color":"$primary-color"},{default:v(()=>[(s(!0),o(U,null,j(t(_),(h,F)=>{var d;return s(),o("div",{key:F},[((d=h==null?void 0:h.children)==null?void 0:d.length)>0?(s(),E(L,{key:0,index:h.label},null,8,["index"])):y("",!0),(s(!0),o(U,null,j(h.children,(B,k)=>(s(),E(ue,{key:k,data:B,disabled:t(f),onOnDelete:D},null,8,["data","disabled"]))),128))])}),128))]),_:1})])):(s(),o("div",rt,[(s(!0),o(U,null,j(t(_),(h,F)=>(s(),E(ue,{key:F,data:h,disabled:t(f),onOnDelete:D},null,8,["data","disabled"]))),128))]))])}}});const ie=l=>(ne("data-v-7afbf302"),l=l(),ce(),l),dt={class:"recommend"},_t={class:"title"},pt=x(" \u63A8\u8350\u5F85\u8DDF\u8FDB\u5BA2\u6237 "),vt={class:"dec"},ht={class:"dp"},mt=["src"],yt=ie(()=>e("p",null,"\u60A8\u8FD1\u671F\u8DDF\u8FDB\u8FC7\u4EE5\u4E0B\u5BA2\u6237\uFF0C\u662F\u5426\u9700\u8981\u5BFC\u5165\u5F85\u8DDF\u8FDB\u5BA2\u6237\u5217\u8868\uFF0C\u4EE5\u4FBF\u66F4\u597D\u5F00\u53D1\uFF1F",-1)),ft=ie(()=>e("div",{class:"sub"},[e("p",null,"\u5F85\u8DDF\u8FDB\u5BA2\u6237\u5217\u8868\u4F1A\u63A8\u8350\u5BFC\u516530\u5929\u5185\u6709\u6D3B\u52A8\u8BB0\u5F55\u7684\u5BA2\u6237\uFF0C\u5E76\u4F1A\u79FB\u9664\u5F00\u53D1\u6210\u529F\u7684\u5BA2\u6237\u621630\u5185\u672A\u8054\u7CFB\u7684\u5BA2\u6237\u3002")],-1)),gt={class:"com-dp"},bt=["src"],Ft={class:"name"},Bt={key:0,class:"icon icon-bg1"},kt={key:1,class:"icon icon-bg2"},Dt={key:2,class:"icon icon-bg3"},Ct={key:3,class:"icon icon-bg6"},$t={key:4,class:"icon icon-bg5"},At={key:5,class:"icon icon-bg6"},Tt={key:6,class:"icon icon-bg4"},wt={class:"footer"},Et={class:"btn-za"},xt=z({props:{list:{type:Array,default:()=>[]}},emits:["on-submit","on-close"],setup(l,{emit:n}){const{getIconUrl:i}=H(),_=w([]),u=w(),f=w(!1),D=()=>{f.value=!f.value,u.value.toggleAll(f.value)},S=()=>{n("on-close"),setTimeout(()=>{_.value=[]},1e3)},A=()=>{n("on-submit",Y(_.value)),setTimeout(()=>{_.value=[]},1e3)};return(L,C)=>{const h=b("van-icon"),F=b("van-checkbox"),d=b("van-cell"),B=b("van-checkbox-group"),k=b("van-cell-group"),R=b("van-button");return s(),o("div",dt,[e("p",_t,[pt,e("span",{onClick:S},[r(h,{name:"cross",color:"#999999"})])]),e("div",vt,[e("div",ht,[e("img",{src:t(i)("customer.qa"),alt:""},null,8,mt),yt]),ft]),e("div",null,[r(k,{border:!1},{default:v(()=>[r(B,{ref_key:"checkboxGroup",ref:u,modelValue:_.value,"onUpdate:modelValue":C[0]||(C[0]=p=>_.value=p)},{default:v(()=>[(s(!0),o(U,null,j(l.list,(p,I)=>(s(),E(d,{key:I},{title:v(()=>[r(F,{name:p,shape:"square"},{default:v(()=>[e("div",gt,[e("img",{src:p.sex?p.sex==="F"?t(i)("customer.female"):t(i)("customer.male"):t(i)("customer.defaultGender"),alt:"",class:"ch-icon"},null,8,bt),e("span",Ft,m(p.customerName),1),p.visitType==="\u8F6C\u4ECB\u7ECD"?(s(),o("span",Bt,m(p.visitType),1)):y("",!0),p.visitType==="\u63A5\u89E6\u9762\u8C08"?(s(),o("span",kt,m(p.visitType),1)):y("",!0),p.visitType==="\u5BA2\u6237\u83B7\u53D6"?(s(),o("span",Dt,m(p.visitType),1)):y("",!0),p.visitType==="\u9700\u6C42\u5206\u6790"?(s(),o("span",Ct,m(p.visitType),1)):y("",!0),p.visitType==="\u7535\u8BDD\u9080\u7EA6"?(s(),o("span",$t,m(p.visitType),1)):y("",!0),p.visitType==="\u5448\u73B0\u4FC3\u6210"?(s(),o("span",At,m(p.visitType),1)):y("",!0),p.visitType==="\u4FDD\u5355\u670D\u52A1"?(s(),o("span",Tt,m(p.visitType),1)):y("",!0)])]),_:2},1032,["name"])]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1})]),e("div",wt,[e("div",Et,[e("div",{class:"all",onClick:D},[r(F,{name:"C",shape:"square",checked:f.value},{default:v(()=>[x(m(f.value?"\u53D6\u6D88":"\u5168\u9009"),1)]),_:1},8,["checked"])]),r(R,{class:"btn-a",type:"primary",block:!0,onClick:A},{default:v(()=>[x(" \u786E\u5B9A\xB7\u5DF2\u9009"+m(_.value.length)+"\u4EBA",1)]),_:1})])])])}}});var St=le(xt,[["__scopeId","data-v-7afbf302"]]);const Lt={class:"com-search-filter"},It={class:"action-bar"},Ot=x("\u91CD\u7F6E"),qt=x("\u786E\u5B9A"),Rt=z({props:{list:{type:Array,required:!0,default:()=>[]},data:{type:Object,default:()=>{}}},emits:["on-submit","on-reset"],setup(l,{expose:n,emit:i}){const _=l,{list:u}=G(_),f=w(_.data||{}),D=(L,C)=>{f.value[C.value]=L},S=()=>{i("on-submit",f.value)},A=()=>{f.value={},i("on-reset",f.value)};return n({handleReset:A}),(L,C)=>{const h=b("van-button"),F=Ce("resize");return s(),o("div",Lt,[(s(!0),o(U,null,j(t(u),(d,B)=>(s(),o("div",{key:B,class:"insure-list"},[d.type==="multi"?(s(),E(Oe,{key:0,data:d,value:f.value[d.value],onOnChange:k=>D(k,d)},null,8,["data","value","onOnChange"])):d.type==="single"?(s(),E(qe,{key:1,data:d,value:f.value[d.value],onOnChange:k=>D(k,d)},null,8,["data","value","onOnChange"])):y("",!0)]))),128)),$e((s(),o("div",It,[r(h,{plain:"",type:"primary",class:"btn btn-com",onClick:A},{default:v(()=>[Ot]),_:1}),r(h,{type:"primary",class:"btn1 btn-com",onClick:S},{default:v(()=>[qt]),_:1})])),[[F]])])}}});var Nt="/static/assets/brith.34fc8669.png";const q=l=>(ne("data-v-27e3c791"),l=l(),ce(),l),Vt={class:"br"},Ut={class:"br-left"},jt=["src"],zt=q(()=>e("span",{class:"custom-title"},"\u751F\u65E5\u7BA1\u7406",-1)),Mt={class:"br-right"},Pt=x(" \u6709"),Gt=x("\u4E2A\u5BA2\u6237\u8FD1\u671F\u751F\u65E5"),Wt=["src"],Zt={class:"body"},Qt={class:"search-content"},Yt=q(()=>e("span",null,"\u7B5B\u9009",-1)),Ht=["src"],Jt={class:"search-bar"},Kt=x("\u6DFB\u52A0"),Xt={key:1},es={class:"star"},ts=["src"],ss=x(" \u5BA2\u6237\u63A8\u8350"),os={key:2,class:"empth"},us=["src"],as=q(()=>e("p",{class:"p1"},"\u6682\u65E0\u5F85\u8DDF\u8FDB\u5BA2\u6237",-1)),ns=q(()=>e("p",{class:"p2"},"\u63A8\u8350\u5BFC\u5165\u8FD130\u5929\u6709\u6D3B\u52A8\u8BB0\u5F55\u7684\u5BA2\u6237\uFF0C\u53BB\u67E5\u770B~",-1)),cs=x("\u5BA2\u6237\u63A8\u8350"),ls={key:1},is={key:2,class:"empth"},rs=["src"],ds=q(()=>e("p",{class:"p1"},"\u6682\u65E0\u51C6\u5BA2\u6237",-1)),_s={key:0,class:"p2"},ps=x("\u5BA2\u6237\u63A8\u8350"),vs={key:1},hs={key:2,class:"empth"},ms=["src"],ys=q(()=>e("p",{class:"p1"},"\u6682\u65E0\u627F\u4FDD\u5BA2\u6237",-1)),fs=z({setup(l){const{getIconUrl:n}=H(),i=w(!1),_=w(!1),u=w(),f=w(),D=ae();Ae();const S=w([]),A=new URL(decodeURIComponent(window.location.href)).hash,L=Te({list:[],count:0,keyword:void 0,active:A==="#3"?"03":A==="#2"?"02":"01",brithCount:0,order:"firstLetter",role:""}),{list:C,count:h,keyword:F,active:d,brithCount:B,order:k,role:R}=G(L),I=new Ie({source:"localStorage"}).get("userInfo")||{},W=w(I.userType==="O"),N=w(!1),V=async a=>{N.value=!0;const c=await Ne({pageNum:"1",pageSize:"999",queryBean:P({orderBy:"firstLetter",customerListType:"01"},a)}),{data:g}=c.data;if(k.value==="firstLetter"){const $=[];Object.keys((g==null?void 0:g.customerMaps)||{}).forEach(T=>{$.push({label:T,children:g.customerMaps[T]})}),C.value=$}else C.value=g.customerLists;N.value=!1,h.value=(g==null?void 0:g.count)||0},re=async()=>{const a=await Ve({pageNum:"1",pageSize:"999",queryBean:{birth:30}}),{data:c}=a.data;B.value=c.count},de=async()=>{const{data:a}=await Ue();R.value=a.data.userRole},_e=()=>{Me({}).then(a=>{var c;S.value=((c=a.data)==null?void 0:c.data)||[],i.value=!0})};we(()=>{const a=A==="#3"?"03":A==="#2"?"02":"01";re(),V({customerListType:a}),de()});const pe=a=>{xe.confirm({title:"\u63D0\u793A",message:"\u786E\u8BA4\u5220\u9664"}).then(async()=>{await je({agentCustomerId:a.agentCustomerId,markStatus:"N",customerType:"02"}),V({customerListType:"01"})}).catch(()=>{})},ve=a=>{d.value=a.name,F.value=void 0,k.value="firstLetter",window.location.replace(`${window.location.href.toString().replace(window.location.hash,"")}#${Number(a.name)}`),V({customerListType:a.name})},he=()=>{V({customerListType:d.value,keyword:F.value})},me=()=>{D.push("./brithdayList")},J=a=>{_.value=a},M=a=>{a?_e():i.value=!1},K=()=>{D.push("./editCustomer")},ye=a=>{f.value=a,_.value=!1;const{orderBy:c}=Y(a);c&&(k.value=c);const g=Y(a),$={};Object.keys(g).forEach(T=>{Array.isArray(g[T])?$[T]=g[T].join(","):$[T]=g[T]}),console.log($,1212),V(P({customerListType:d.value,keyword:F.value},$))},X=(a=[])=>{var c;(a==null?void 0:a.length)>0&&ze({customerDetails:((c=a==null?void 0:a.map)==null?void 0:c.call(a,g=>oe(P({},g),{markStatus:"Y"})))||[]}).then(g=>{var $;(($=g.data)==null?void 0:$.status)===200&&Se("\u5BFC\u5165\u6210\u529F")}),M(!1)};return(a,c)=>{const g=b("van-search"),$=b("van-button"),T=b("van-tab"),fe=b("van-tabs"),ee=b("van-popup"),ge=b("ZaPageWrap");return s(),E(ge,{"main-class":"page-customer"},{default:v(()=>[e("div",null,[e("div",Vt,[e("div",Ut,[e("img",{src:t(Nt),alt:""},null,8,jt),zt]),e("div",Mt,[e("span",{class:"brith-in",onClick:me},[Pt,e("span",null,m(t(B)||0),1),Gt]),e("img",{src:t(Pe),alt:""},null,8,Wt)])]),e("div",Zt,[e("div",Qt,[e("div",{class:"filter",onClick:c[0]||(c[0]=O=>J(!0))},[Yt,e("img",{src:t(n)("customer.down"),alt:"",class:"filter-img"},null,8,Ht)]),e("div",Jt,[r(g,{modelValue:t(F),"onUpdate:modelValue":c[1]||(c[1]=O=>Ee(F)?F.value=O:null),shape:"round",placeholder:"\u59D3\u540D\u6216\u624B\u673A\u53F7\u67E5\u8BE2",onSearch:he},null,8,["modelValue"])]),W.value?(s(),E($,{key:0,type:"primary",class:"btn",onClick:K},{default:v(()=>[Kt]),_:1})):y("",!0)]),e("div",null,[r(fe,{"title-active-color":"$primary-color",sticky:"",active:t(d),onClickTab:ve},{default:v(()=>[r(T,{title:"\u5F85\u8DDF\u8FDB\u5BA2\u6237",name:"01"},{default:v(()=>[N.value?(s(),E(Z,{key:0})):t(h)?(s(),o("div",Xt,[e("div",{class:"header-count",onClick:c[2]||(c[2]=O=>M(!0))},[e("span",null,"\u5171"+m(t(h))+"\u4EBA",1),e("span",es,[e("img",{src:t(n)("customer.import"),alt:"",class:"icon"},null,8,ts),ss])]),r(Q,{data:t(C),type:t(k),disabled:!1,onOnDelete:pe},null,8,["data","type"])])):(s(),o("div",os,[e("p",null,[e("img",{src:t(n)("customer.empth"),alt:"",class:"ig"},null,8,us)]),as,ns,e("p",null,[r($,{type:"primary",class:"bt",onClick:c[3]||(c[3]=O=>M(!0))},{default:v(()=>[cs]),_:1})])]))]),_:1}),r(T,{title:"\u51C6\u5BA2\u6237",name:"02"},{default:v(()=>[N.value?(s(),E(Z,{key:0})):t(h)?(s(),o("div",ls,[r(Q,{data:t(C),type:t(k)},null,8,["data","type"])])):(s(),o("div",is,[e("p",null,[e("img",{src:t(n)("customer.empty2"),alt:"",class:"ig"},null,8,rs)]),ds,W.value?(s(),o("p",_s,"\u60A8\u8FD8\u6CA1\u6709\u5BA2\u6237\uFF0C\u5148\u624B\u52A8\u6DFB\u52A0\u4E00\u4E2A\u5427~")):y("",!0),e("p",null,[W.value?(s(),E($,{key:0,type:"primary",class:"bt",onClick:K},{default:v(()=>[ps]),_:1})):y("",!0)])]))]),_:1}),r(T,{title:"\u627F\u4FDD\u5BA2\u6237",name:"03"},{default:v(()=>[N.value?(s(),E(Z,{key:0})):t(h)?(s(),o("div",vs,[r(Q,{data:t(C),type:t(k)},null,8,["data","type"])])):(s(),o("div",hs,[e("p",null,[e("img",{src:t(n)("customer.empth"),alt:"",class:"ig"},null,8,ms)]),ys]))]),_:1})]),_:1},8,["active"])])]),r(ee,{show:i.value,position:"bottom",style:{height:"90%"},onClose:c[5]||(c[5]=O=>M(!1))},{default:v(()=>[r(St,{list:S.value,onOnSubmit:X,onOnClose:c[4]||(c[4]=O=>X(!1))},null,8,["list"])]),_:1},8,["show"]),r(ee,{show:_.value,position:"right",onClickOverlay:c[6]||(c[6]=O=>J(!1))},{default:v(()=>[r(Rt,{ref_key:"refFilter",ref:u,list:t(Re),onOnSubmit:ye},null,8,["list"])]),_:1},8,["show"])])]),_:1})}}});var Ts=le(fs,[["__scopeId","data-v-27e3c791"]]);export{Ts as default};

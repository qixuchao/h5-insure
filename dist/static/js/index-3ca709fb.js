import{_ as e,d as a,a as s,r as t,J as o,E as i,cd as l,an as r,c as n,h as d,f as u,g as c,F as p,i as m,e as f,aE as k,G as v,w as h,k as I,y as g,A as b,j as V,n as y,t as O,a4 as C,bB as R,a7 as x,V as _,B as L,bE as S,bF as j,X as w,Y as F,b4 as D,a8 as T}from"./index-24ce1811.js";import{l as P}from"./ProAddress.vue_vue_type_style_index_0_scoped_true_lang-d5d6e075.js";import"./index-5441d9bd.js";import{I as E}from"./index-935a0576.js";import{c as N,t as U,_ as B}from"./index-11dfddfd.js";import{S as M}from"./index-843be0fd.js";import{p as q,f as W}from"./trial-d2429143.js";import{_ as z}from"./TrialButton-c681317a.js";import{_ as A}from"./index-9d99f882.js";import{S as H,_ as $}from"./box-title-33aaca5e.js";import{_ as G}from"./index-ed9c3bce.js";import{T as J}from"./Table-e1484c7f.js";import"./pdfh5-008ca364.js";import"./keysIn-b3061da8.js";import"./isObjectLike-d00d103b.js";import"./index-01a3a796.js";import"./empty-ae586b6c.js";import"./echarts-5be271e9.js";var X=e(a({__name:"PersonalInfo",props:{productFactor:{default:()=>({})},modelValue:{default:()=>({})}},emits:["update:modelValue","trailChange"],setup(e,{expose:a,emit:k}){const v=e,{query:{insurerCode:h}={}}=s(),I=t(null),g=t(null),b=o({validated:!1,holder:{personVO:{},schema:[],trialFactorCodes:[],config:{occupation:{dictCode:N(h)}}},insured:{schema:[],trialFactorCodes:[],config:{occupation:{dictCode:N(h)}},insuredVOList:[{personVO:{}}]}}),V=i((()=>l(b.holder.schema)!==l(b.insured.schema))),y=()=>{var e,a;const s=null==(e=g.value)?void 0:e.map((e=>null==e?void 0:e.validate()));return Promise.all([null==(a=I.value)?void 0:a.validate(),...s])};return r((()=>v.productFactor),(()=>{const[e,a]=U(v.productFactor,!0);Object.assign(b.holder,e),Object.assign(b.insured,a)}),{deep:!0,immediate:!0}),r([()=>b.holder.personVO,()=>b.insured.insuredVOList],(()=>{const e={holder:b.holder.personVO,insuredVOList:b.insured.insuredVOList};k("update:modelValue",e),(()=>{const e=!!l(b.holder.trialFactorCodes)&&b.holder.trialFactorCodes.some((e=>{const a=b.holder.personVO[e];return P.exports.isNil(a)||""===a})),a=!!l(b.insured.trialFactorCodes)&&b.insured.trialFactorCodes.some((e=>b.insured.insuredVOList.some((a=>{const s=a.personVO[e];return P.exports.isNil(s)||""===s}))));return e||a})()||y().then((()=>{b.validated=!0,k("trailChange",e)})).catch((()=>{b.validated=!1}))}),{deep:!0}),a({validate:y}),(e,a)=>(n(),d(p,null,[u(c(B),{ref_key:"holderInfoRef",ref:I,title:c(V)?"":"投保人信息",class:"trail-personal-info",model:c(b).holder.personVO,schema:c(b).holder.schema,config:c(b).holder.config},null,8,["title","model","schema","config"]),(n(!0),d(p,null,m(c(b).insured.insuredVOList,((e,a)=>(n(),f(c(B),{ref_for:!0,ref_key:"insuredFormRef",ref:g,key:a,class:"trail-personal-info",title:c(V)?"":"被保人信息",model:e.personVO,schema:c(b).insured.schema,config:c(b).insured.config},null,8,["title","model","schema","config"])))),128))],64))}}),[["__scopeId","data-v-a2c06736"]]);const Y={key:0},Z={key:0,class:"risk2-field"};var K=e(a({__name:"index",props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:""})},showMainRisk:{type:Boolean,default:()=>!0}},emits:["trialChange"],setup(e,{emit:a}){const s=e;console.log("pop data source = ",s.dataSource);const t=o({loading:!1,show:!0,select:{},list:[],userData:{},riskIsInsure:{},submitData:{}}),i=(e,o)=>{t.riskIsInsure[o].data=e;const i=[];s.dataSource.insureProductRiskVOList.forEach((e=>{if(1!==e.mainRiskFlag){const a=t.riskIsInsure[e.riskId];a.data&&Object.keys(a.data).length>0&&i.push(a.data)}})),a("trialChange",i)};return k((()=>{(()=>{t.riskIsInsure={};let e=null;s.dataSource.insureProductRiskVOList.forEach((a=>{const o=1!==a.mainRiskFlag?s.dataSource.productRiskRelationVOList.find((e=>e.collocationRiskId===a.riskId)):{};1===a.mainRiskFlag&&(e=a),t.riskIsInsure[a.riskId]={selected:"2",data:null,relation:o,isMust:!1}})),e&&s.dataSource.productRiskRelationVOList.filter((a=>a.riskId===e.riskId)).forEach((e=>{2===e.collocationType&&(t.riskIsInsure[e.collocationRiskId].selected="1",t.riskIsInsure[e.collocationRiskId].isMust=!0)}))})()})),v((()=>{t.loading=!0})),r((()=>t.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(a,o)=>{const l=M,r=g;return n(!0),d(p,null,m(e.dataSource.insureProductRiskVOList,(a=>(n(),d(p,{key:a.riskCode},[(!e.showMainRisk&&1!==a.mainRiskFlag||e.showMainRisk)&&c(t).riskIsInsure[a.riskId].relation?(n(),d("div",Y,[u(r,{modelValue:c(t).riskIsInsure[a.riskId].selected,"onUpdate:modelValue":e=>c(t).riskIsInsure[a.riskId].selected=e,label:a.riskName,name:"selected","label-width":"50%",border:!1,class:"risk-select-field"},{input:h((()=>[u(l,{modelValue:c(t).riskIsInsure[a.riskId].selected,"onUpdate:modelValue":e=>c(t).riskIsInsure[a.riskId].selected=e,"active-value":"1","inactive-value":"2",size:"26px",disabled:c(t).riskIsInsure[a.riskId].isMust,onChange:e=>{return t=e,o=a,console.log("----data = ",o),s.dataSource.productRiskRelationVOList.forEach((e=>{})),void("2"===t&&i({},o.riskId));var t,o}},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"]),"1"===c(t).riskIsInsure[a.riskId].selected?(n(),d("div",Z,[u(E,{modelValue:c(t).riskIsInsure[a.riskId].data,"onUpdate:modelValue":e=>c(t).riskIsInsure[a.riskId].data=e,"origin-data":a,"product-factor":e.dataSource.productFactor,onTrialChange:e=>i(e,a.riskId)},null,8,["modelValue","onUpdate:modelValue","origin-data","product-factor","onTrialChange"])])):I("",!0)])):I("",!0)],64)))),128)}}}),[["__scopeId","data-v-7a33d9cd"]]);const Q={class:"benefit-table"},ee=a({__name:"Table",props:{dataSource:null},setup(e){const a=e,s=i((()=>{const e=a.dataSource.headers.length,s=12*a.dataSource.headers.join("").length+20*a.dataSource.headers.length;return a.dataSource.headers.map(((a,t)=>{const o=s>320?12*a.length+20:Math.max(12*a.length+20,320/e);return console.log("totalWordWidth:",s,"titleWidth:",o,"word-width:",12*a.length+20),{title:a,key:`header_${t}`,fixed:t<2,minWidth:o}}))})),t=i((()=>a.dataSource.dataList.map((e=>{const a={};return e.forEach(((e,s)=>{a[`header_${s}`]=e})),a}))));return v((()=>{})),(e,a)=>(n(),d("div",Q,[u(J,{"top-height":400,columns:c(s),data:c(t),"is-clone":!0},null,8,["columns","data"])]))}});const ae=e=>(w("data-v-018858fb"),e=e(),F(),e),se={key:0,class:"benefit-container"},te={key:0,class:"benefit"},oe=ae((()=>V("div",{class:"line"},null,-1))),ie={class:"box-title box-title-chart"},le=ae((()=>V("img",{class:"tl",src:$,alt:""},null,-1))),re=ae((()=>V("img",{class:"transform-z180 tr",src:$,alt:""},null,-1))),ne={key:0},de={class:"box"},ue={class:"box-title"},ce=ae((()=>V("img",{class:"tl",src:$,alt:""},null,-1))),pe=ae((()=>V("img",{class:"transform-z180 tr",src:$,alt:""},null,-1))),me={class:"box-price"},fe={class:"text1"},ke={class:"text2"},ve={key:1},he={key:2,style:{width:"100%, minWidth: 338px"}},Ie={class:"slider"},ge={style:{flex:"1",margin:"0px 5px"}},be={class:"custom-button"},Ve=ae((()=>V("p",{class:"slider-dec"},"拖动按钮查看不同年龄保障",-1))),ye={class:"btn-two"},Oe={key:1};var Ce=e(a({__name:"index",props:{dataSource:{default:()=>[{}]},showTypeList:{default:()=>["1"]}},setup(e){const a=e,s="1",o="2",i="3",l=t(0),k=t(0),v=t(0),g=t(),w=t(0),F=t("3"),D=t(),T=e=>{if(!(null==e?void 0:e.benefitRiskResultVOList))return;const a=null==e?void 0:e.benefitRiskResultVOList[l.value];k.value=a.ageBegin+1,w.value=a.ageBegin+1,v.value=a.ageEnd},P=()=>{var e,s,t,o,i;const r=null==(s=null==(e=a.dataSource)?void 0:e.benefitRiskResultVOList)?void 0:s[l.value];D.value=null==(o=null==(t=a.dataSource)?void 0:t.benefitRiskResultVOList)?void 0:o[l.value].benefitRiskTableResultVOList[0];const{a:n,year:d}=((e,a)=>{const s=[],t=[];for(let o=e,i=0;o<=a;o++,i++)s.push(o.toString()),t.push(i+1);return{a:s,year:t}})(k.value,v.value),u={index:n.indexOf(w.value.toString()),age:n,year:d,result:null==(i=null==r?void 0:r.benefitRiskItemResultVOList)?void 0:i[0]};g.value=u},E=()=>{w.value>v.value-1||(w.value+=1,P())},N=()=>{w.value>k.value&&(w.value-=1,P())},U=e=>{l.value=e.name,T(a.dataSource),P()};return r((()=>a.dataSource),(e=>{e&&(T(e),P())}),{deep:!0,immediate:!0}),r(w,(()=>{P()})),(t,r)=>{const T=_,P=H,B=L,M=S,q=j,W=A;return e.dataSource.benefitRiskResultVOList?(n(),d("div",se,[u(q,{active:c(l),onClickTab:U},{default:h((()=>{var e;return[(n(!0),d(p,null,m(null==(e=a.dataSource)?void 0:e.benefitRiskResultVOList,((e,a)=>(n(),f(M,{key:a,name:a,title:e.riskName},{default:h((()=>{var e,t,_,L,S,j,U,M,q,W,z,A,H,$,J,X;return[a==c(l)?(n(),d("div",te,[oe,b(V("p",ie,[le,y(" 保单年度"),V("span",null,O(null==(_=null==(e=c(g))?void 0:e.year)?void 0:_[null==(t=c(g))?void 0:t.index]),1),y("年度，被保人"),V("span",null,O(null==(j=null==(L=c(g))?void 0:L.age)?void 0:j[null==(S=c(g))?void 0:S.index]),1),y("岁时 "),re],512),[[C,c(F)===o]]),c(F)===i?(n(),d("div",ne,[V("div",de,[V("p",ue,[ce,y(" 保单年度"),V("span",null,O(null==(q=null==(U=c(g))?void 0:U.year)?void 0:q[null==(M=c(g))?void 0:M.index]),1),y("年度，被保人"),V("span",null,O(null==(A=null==(W=c(g))?void 0:W.age)?void 0:A[null==(z=c(g))?void 0:z.index]),1),y("岁时 "),pe]),V("div",me,[(n(!0),d(p,null,m(null==($=null==(H=c(g))?void 0:H.result)?void 0:$.headers,((e,a)=>{var s,t,o,i,l;return n(),d("div",{key:a,style:{width:"33%"}},[V("p",fe,O(c(R)(Number(null==(l=null==(i=null==(t=null==(s=c(g))?void 0:s.result)?void 0:t.dataList)?void 0:i[null==(o=c(g))?void 0:o.index])?void 0:l[a]))),1),V("p",ke,O(e)+"(元）",1)])})),128))])])])):I("",!0),c(F)===s?(n(),d("div",ve,[u(ee,{"data-source":c(D)},null,8,["data-source"])])):I("",!0),c(F)==o?(n(),d("div",he,[u(G,{min:c(k),max:c(v),current:c(w),data:null==(X=null==(J=c(g))?void 0:J.result)?void 0:X.benefitRiskItemList},null,8,["min","max","current","data"])])):I("",!0),V("div",Ie,[V("div",{class:"opt lf",onClick:N},[u(T,{name:"minus"})]),V("div",ge,[c(k)?(n(),f(P,{key:0,modelValue:c(w),"onUpdate:modelValue":r[0]||(r[0]=e=>x(w)?w.value=e:null),min:c(k),max:c(v),"bar-height":"8px"},{button:h((()=>[V("div",be,O(c(w))+" 岁",1)])),_:1},8,["modelValue","min","max"])):I("",!0)]),V("div",{class:"opt rg",onClick:E},[u(T,{name:"plus"})])]),Ve,V("div",ye,[u(B,{round:"",plain:c(F)!==i,type:"primary",class:"btn",onClick:r[1]||(r[1]=e=>F.value=i)},{default:h((()=>[y("图表展示")])),_:1},8,["plain"]),u(B,{round:"",plain:c(F)!==o,type:"primary",class:"btn",onClick:r[2]||(r[2]=e=>F.value=o)},{default:h((()=>[y("趋势展示")])),_:1},8,["plain"]),u(B,{round:"",plain:c(F)!==s,type:"primary",class:"btn",onClick:r[3]||(r[3]=e=>F.value=s)},{default:h((()=>[y("表格展示")])),_:1},8,["plain"])])])):I("",!0)]})),_:2},1032,["name","title"])))),128))]})),_:1},8,["active"])])):(n(),d("div",Oe,[u(W,{title:"利益演示配置错误~","empty-class":"empty-select"})]))}}}),[["__scopeId","data-v-018858fb"]]);const Re={class:"trial-button"},xe={class:"com-body"},_e={class:"header"},Le=(e=>(w("data-v-cf7d32da"),e=e(),F(),e))((()=>V("span",null,"算一算保费",-1))),Se={class:"container"};var je=e(a({__name:"index",props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:"",insurerCode:"",tenantId:""})}},setup(e,{expose:a}){const s=e,i="试算中...",l=t(null);console.log("pop data source = ",s.dataSource);const m=o({loading:!1,show:!0,select:{},list:[],userData:{},riskIsInsure:{},submitData:{},riskVOList:[{}],mainRiskVO:{},ifPersonalInfoSuccess:!1,trialResult:i}),g=()=>{var e;null==(e=l.value)||e.validate().then((()=>{console.log("---- validate success ----")})),m.loading=!1,m.show=!0},b=()=>{m.show=!1,m.loading=!1},O=t();t({tenantId:"9991000007",productCode:"BDFZCHUN",holder:{personVO:{extInfo:{},certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456"}},insuredVOList:[{insuredCode:"",relationToHolder:"1",personVO:{extInfo:{hasSocialInsurance:"1"},relationToHolder:"1",certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456",socialFlag:"1"},productPlanVOList:[{insurerCode:"zhongan",planCode:"",riskVOList:[{amount:"6000000",chargePeriod:"year_5",copy:1,coveragePeriod:"to_68",paymentFrequency:"2",riskCategory:4,riskCode:"CBE00CHUN",riskName:"(勿动)利益演示测试",riskId:10325,riskType:1}]}]}]});const C=()=>{m.riskIsInsure={},s.dataSource.insureProductRiskVOList.forEach((e=>{const a=s.dataSource.productRiskRelationVOList.find((a=>a.collocationRiskId===e.riskId));m.riskIsInsure[e.riskCode]={selected:"2",data:null,relation:a}}))},R=P.exports.debounce((()=>{m.ifPersonalInfoSuccess&&(m.submitData.productCode=s.productInfo.productCode,m.submitData.tenantId=s.productInfo.tenantId,m.submitData.insuredVOList[0].productPlanVOList=[{insurerCode:s.productInfo.insurerCode,planCode:s.dataSource.planCode,riskVOList:m.riskVOList}],console.log(">>>数据构建<<<",m.submitData),m.trialResult=i,q(m.submitData).then((e=>{m.trialResult=`${e.data.premium}元`})).finally((()=>{})),W(m.submitData).then((e=>{O.value=e.data})).finally((()=>{m.loading=!1})))}),300),x=e=>{const{holder:a,insuredVOList:s}=e;a&&(m.submitData.holder={personVO:a}),s&&s.length>0&&s.forEach(((e,a)=>{m.submitData.insuredVOList&&m.submitData.insuredVOList.length>a?m.submitData.insuredVOList[a].personVO=e.personVO:m.submitData.insuredVOList=[{personVO:e.personVO}]})),m.ifPersonalInfoSuccess=!0,console.log("投被保人的信息回传 ",m.submitData,e),R()},_=e=>{m.mainRiskVO=e,m.riskVOList.length>0&&(m.riskVOList[0]=e),console.log("标准险种的信息回传",e),R()},S=e=>{m.riskVOList=[m.mainRiskVO,...e],console.log("附加险列表数据回传",e),R()};return k((()=>{C()})),v((()=>{m.loading=!0})),r((()=>m.show),(e=>{e&&C()})),a({open:()=>{m.show=!0}}),r((()=>m.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(a,s)=>{const t=L,o=D,i=T;return n(),d(p,null,[V("div",Re,[u(t,{type:"primary",onClick:s[0]||(s[0]=e=>c(m).show=!0)},{default:h((()=>[y("立即投保")])),_:1})]),u(i,{class:"com-trial-wrap",style:{height:"620px"},show:c(m).show,closeable:!1,onClose:b},{default:h((()=>[V("div",xe,[V("div",_e,[Le,u(o,{name:"cross",onClick:s[1]||(s[1]=e=>c(m).show=!1)})]),V("div",Se,[u(Ce,{"data-source":O.value},null,8,["data-source"]),e.dataSource.productFactor?(n(),f(c(X),{key:0,ref:"personalInfoRef",modelValue:c(m).userData,"onUpdate:modelValue":s[2]||(s[2]=e=>c(m).userData=e),"product-factor":e.dataSource.productFactor,onTrailChange:x},null,8,["modelValue","product-factor"])):I("",!0),u(E,{ref_key:"insureInfosRef",ref:l,"origin-data":e.dataSource.insureProductRiskVOList[0],"product-factor":e.dataSource.productFactor,onTrialChange:_},null,8,["origin-data","product-factor"]),u(K,{"data-source":e.dataSource,"show-main-risk":!1,onTrialChange:S},null,8,["data-source"])]),u(z,{"is-share":!1,premium:100,"loading-text":c(m).trialResult,"plan-code":"todo计划的code","payment-frequency":"guaranteeObj.paymentFrequency","tenant-product-detail":"tenantProductDetail",onClick:g},{default:h((()=>[y("立即投保")])),_:1},8,["loading-text","payment-frequency"])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-cf7d32da"]]);export{je as default};

import{d as e,G as o,a,r as l,x as i,a0 as n,a4 as r,an as t,aa as d,ao as u,ap as s,aq as f,b as m,g as c,c as I,h as p,e as v,w as V,f as b,k as w,aC as x,X as y,j as C,n as h,aI as k,B as R,t as L,T as O,Z as U,u as T,z as _}from"./index-9aeeb9a7.js";import{R as g}from"./infoCollection-d956aa91.js";import{r as E}from"./relativeTime-fde2a46e.js";import{v as q}from"./validator-5a13dc82.js";import{u as S}from"./useDicData-875ace82.js";import"./pdfh5-008ca364.js";const A={key:0,class:"com-personal-wrapper"},D={class:"date-extra"},N=C("span",{class:"input-extra"},"万",-1),$=C("span",{class:"input-extra"},"万",-1),P={class:"button-extra"},H=C("span",{class:"input-extra"},"%",-1),j=e({__name:"PersonalInfo",props:{formInfo:{default:()=>({})},factorList:{default:()=>[]},images:{default:()=>[]},isView:{type:Boolean,default:!1},prefix:{default:""},beneficiaryList:{default:()=>[]},sendSmsCode:{type:Function,default:(e,o)=>{}},needDesensitize:{type:Boolean,default:!1}},emits:["update:images"],setup(e,{emit:T}){const _=e;o();const{insurerCode:j=""}=a().query,B=S(`${j.toLocaleUpperCase()}_OCCUPATION`),M=S("NATIONAL_REGION_CODE"),F=l([]),Y=l(!1),z=l(),Z=l(),G=l({formInfo:_.formInfo,birth:{min:new Date("1900-01-01"),max:new Date},certEndDate:{min:new Date("1900-01-01"),max:new Date("2099-12-31")},occupationalText:""}),J=l(!1),K=i((()=>J.value?(G.value.formInfo.mobile||"").replace(/^(.{3})(?:\d+)(.{4})$/,"$1****$2"):_.formInfo.mobile)),W=l(!1),X=i((()=>W.value?(G.value.formInfo.certNo||"").replace(/^(.{6})(?:\d+)(.{2})$/,"$1**********$2"):_.formInfo.certNo));n.extend(E);const Q=l(2===_.formInfo.certEndType),ee=l(18),oe=l(0),ae=l("验证码"),le=l(!1),ie=i((()=>{const e={};return _.factorList.forEach((o=>{e[o.code]=o})),e})),ne=(e,o)=>{G.value.formInfo[o]=e};i((()=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(G.value.formInfo.mobile)));const re=e=>{"mobile"===e&&(J.value=!1),"certNo"===e&&(W.value=!1)},te=async()=>{oe.value>0||_.sendSmsCode({mobile:G.value.formInfo.mobile,type:_.prefix},(()=>{le.value=!0,O({message:"短信发送成功，请查收"}),(()=>{if(oe.value>0)return;oe.value=60;const e=()=>{ae.value=`${oe.value}s`,oe.value-=1};e();const o=setInterval((()=>{0===oe.value?(ae.value="验证码",oe.value=0,clearInterval(o)):e()}),1e3)})()}))},de=e=>{G.value.formInfo.certNo=e.personIdCard,G.value.formInfo.name=e.personName,G.value.formInfo.certEndDate=n(e.validDateEnd,"YYYYMMDD").toDate()},ue=e=>{var o;return ie.value&&ie.value[e]&&(null==(o=ie.value[e])?void 0:o.isDisplay)===U.YES},se=e=>ie.value&&ie.value[e]&&ie.value[e].isMustInput===U.YES,fe=(e,o)=>{var a,l;return(null==(l=null==(a=ie.value)?void 0:a[e])?void 0:l[o])||""},me=i((()=>{var e;if(!ue("certType"))return G.value.formInfo.certType=+r.CERT,!1;const o=fe("certType","attributeValueList")||[];return 1!==o.length||(null==(e=o[0])?void 0:e.code)!==r.CERT||(G.value.formInfo.certType=+r.CERT,!1)})),ce=i((()=>{var e,o,a;return(null==(e=fe("certType","attributeValueList"))?void 0:e.length)>1?"证件号码":"insure"===_.prefix&&(null==(o=G.value.formInfo)?void 0:o.relationToHolder)===g.CHILD?"身份证号(户口簿)":(null==(a=fe("certType","attributeValueList"))?void 0:a[0].code)===r.CERT?"身份证号":fe("certType","title")})),Ie=(e,o)=>q(e)?"":"请输入正确的姓名",pe=i((()=>(ee.value=18,[r.CERT,r.HOUSE_HOLD].includes(`${G.value.formInfo.certType}`)?(Y.value=!0,[t.ID_CARD]):`${G.value.formInfo.certType}`===r.BIRTH?(Y.value=!1,ee.value=10,[t.BIRTH]):`${G.value.formInfo.certType}`===r.PASSPORT?(Y.value=!1,[t.PASSPORT]):`${G.value.formInfo.certType}`===r.SOCIAL_CREDIT_CODE?(Y.value=!1,[t.SOCIAL_CREDIT_CODE]):`${G.value.formInfo.certType}`===r.OTHER?(Y.value=!1,[t.OTHER]):(Y.value=!0,[t.ID_CARD])))),ve=(e,o)=>se("attachment")?2===G.value.formInfo.certEndType||G.value.formInfo.certEndDate?"":"请选择有效期至":"",Ve=(e,o)=>/^\d{1,10}(\.\d{1,2})?$/.test(e)?"":"年收入最多录入10位数字",be=(e,o)=>/^[1-9]$|^[1-9][0-9]$|^100$/.test(e)?"":"收益比例只能填写1-100的正整数",we=(e,o)=>e.length>=5&&e.length<=99?"":"最多99个字符最少5个字符",xe=(e,o,a)=>o.length>e?`最大不能超过${e}个字符`:"",ye=(e,o)=>{var a,l,i,t,d,u,s;if(!ue("nationality"))return"";if("CHN"===(null==(l=null==(a=G.value.formInfo)?void 0:a.extInfo)?void 0:l.nationalityCode)){if(![r.CERT,r.HOUSE_HOLD,r.BIRTH,r.MILITARY_CARD].includes(`${e}`))return"国籍为中国时，证件类型只允许选择身份证、户口本、出生证、军官证"}else if(["HKG","MAC"].includes(null==(t=null==(i=G.value.formInfo)?void 0:i.extInfo)?void 0:t.nationalityCode)){if(![r.HK_MACAO_RESIDENCE_PERMIT,r.HONGKONG_MACAO].includes(`${e}`))return"国籍为中国香港、中国澳门时，证件类型只允许选择港澳通行证、港澳居民居住证"}else if("TWN"===(null==(u=null==(d=G.value.formInfo)?void 0:d.extInfo)?void 0:u.nationalityCode)){if(![r.TAIWAN_RESIDENCE_PERMIT,r.TAIWAN_TRAVEL].includes(`${e}`))return"国籍为中国台湾时，证件类型只允许选择台湾通行证、台湾居民居住证"}else if(![r.PASSPORT,r.FOREIGN_PERMANENT].includes(`${e}`))return"国籍为非中国、港澳台时，证件类型只允许选择护照、外国人永久居留身份证";return n().year()-n(null==(s=G.value.formInfo)?void 0:s.birthday).year()>2&&e===r.BIRTH?"年龄大于等于2周岁时，证件类型不能选择出生证":""},Ce=e=>Array.isArray(e)&&2===e.length&&e[0]&&e[1]?"":"请上传身份证正反面照片";return d((()=>Q.value),(e=>{e?(G.value.formInfo.certEndType=2,G.value.formInfo.certEndDate=""):G.value.formInfo.certEndType=1}),{immediate:!0}),d((()=>G.value.formInfo.mobile),(()=>{var e;G.value.formInfo.mobile=null==(e=G.value.formInfo.mobile)?void 0:e.replace(/[\u4e00-\u9fa5/\s+/]|[^0-9\u4E00-\u9FA5]/g,"")}),{deep:!0,immediate:!0}),d([()=>G.value.formInfo.certNo,()=>G.value.formInfo.mobile],(()=>{var e,o;G.value.formInfo.certNo=null==(e=G.value.formInfo.certNo)?void 0:e.replace(/[\u4e00-\u9fa5/\s+/]/g,""),G.value.formInfo.mobile=null==(o=G.value.formInfo.mobile)?void 0:o.replace(/[\u4e00-\u9fa5/\s+/]|[^Xx0-9\u4E00-\u9FA5]/g,"")}),{deep:!0,immediate:!0}),d((()=>_.needDesensitize),((e=!1)=>{J.value=e,W.value=e}),{immediate:!0}),d((()=>G.value.formInfo.certType),(e=>{[r.CERT,r.HOUSE_HOLD].includes(e)?Y.value=!0:Y.value=!1}),{deep:!0,immediate:!0}),d([()=>G.value.formInfo.certNo,()=>G.value.formInfo.certType],(([e])=>{[r.CERT,r.HOUSE_HOLD].includes(`${G.value.formInfo.certType}`)&&(u(e)?(G.value.formInfo.gender=+s(e),G.value.formInfo.birthday=n(new Date(f(e))).format("YYYY-MM-DD")):(G.value.formInfo.gender=null,G.value.formInfo.birthday=""))}),{deep:!0,immediate:!0}),d((()=>_.images),(e=>{F.value=e}),{immediate:!0}),d((()=>_.formInfo),(()=>{G.value.formInfo=_.formInfo}),{deep:!0,immediate:!0}),d(F,(e=>{T("update:images",e)}),{deep:!0}),(o,a)=>{const l=m("ProRadioButton"),i=m("ProField"),n=m("ProPicker"),r=m("ProIDCardUpload"),d=m("ProImageUpload"),u=m("ProDatePicker"),s=m("van-checkbox"),f=m("ProCascader"),O=m("van-button");return Object.keys(c(ie)).length?(I(),p("div",A,[ue("insuredBeneficiaryType")?(I(),v(i,{key:0,modelValue:c(G).formInfo.insuredBeneficiaryType,"onUpdate:modelValue":a[1]||(a[1]=e=>c(G).formInfo.insuredBeneficiaryType=e),label:fe("insuredBeneficiaryType","title"),name:"insuredBeneficiaryType"},{input:V((()=>[b(l,{modelValue:c(G).formInfo.insuredBeneficiaryType,"onUpdate:modelValue":a[0]||(a[0]=e=>c(G).formInfo.insuredBeneficiaryType=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("insuredBeneficiaryType","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","label"])):w("",!0),ue("insuredRelation")?(I(),v(i,{key:1,modelValue:c(G).formInfo.insuredRelation,"onUpdate:modelValue":a[3]||(a[3]=e=>c(G).formInfo.insuredRelation=e),label:fe("insuredRelation","title"),name:"insuredRelation"},{input:V((()=>[b(l,{modelValue:c(G).formInfo.insuredRelation,"onUpdate:modelValue":a[2]||(a[2]=e=>c(G).formInfo.insuredRelation=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("insuredRelation","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","label"])):w("",!0),ue("name")?(I(),v(i,{key:2,modelValue:c(G).formInfo.name,"onUpdate:modelValue":a[4]||(a[4]=e=>c(G).formInfo.name=e),label:fe("name","title"),name:`${e.prefix}_name`,"is-view":e.isView,required:se("name"),rules:[{validator:Ie}]},{"right-icon":V((()=>[x(o.$slots,"name")])),_:3},8,["modelValue","label","name","is-view","required","rules"])):w("",!0),ue("sex")?(I(),v(i,{key:3,modelValue:c(G).formInfo.gender,"onUpdate:modelValue":a[6]||(a[6]=e=>c(G).formInfo.gender=e),required:se("sex"),label:fe("sex","title"),name:`${e.prefix}_gender`,"is-view":c(Y)},{input:V((()=>[b(l,{modelValue:c(G).formInfo.gender,"onUpdate:modelValue":a[5]||(a[5]=e=>c(G).formInfo.gender=e),disabled:c(Y),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("sex","attributeValueList")||[]},null,8,["modelValue","disabled","is-view","options"])])),_:1},8,["modelValue","required","label","name","is-view"])):w("",!0),c(me)?(I(),v(n,{key:4,modelValue:c(G).formInfo.certType,"onUpdate:modelValue":a[7]||(a[7]=e=>c(G).formInfo.certType=e),label:fe("certType","title"),name:`${e.prefix}_certType`,"data-source":fe("certType","attributeValueList"),mapping:{label:"value",value:"code",children:"child"},required:se("certType"),rules:[{validator:ye}],"is-view":e.isView},null,8,["modelValue","label","name","data-source","required","rules","is-view"])):w("",!0),ue("certImage")&&c(G).formInfo.certType+""=="1"?(I(),v(i,{key:5,label:"身份证上传",block:"",required:se("certImage"),rules:[{validator:Ce}],name:`${e.prefix}_idCard`},{input:V((()=>[b(r,{modelValue:c(F),"onUpdate:modelValue":a[8]||(a[8]=e=>y(F)?F.value=e:null),"is-view":e.isView,onOnOCR:de},null,8,["modelValue","is-view"])])),_:1},8,["required","rules","name"])):w("",!0),ue("certImage")&&c(G).formInfo.certType&&c(G).formInfo.certType+""!="1"?(I(),v(i,{key:6,label:fe("certImage","title"),block:"",required:se("certImage")},{input:V((()=>[b(d,{modelValue:c(F),"onUpdate:modelValue":a[9]||(a[9]=e=>y(F)?F.value=e:null),"is-view":e.isView,"max-count":1},null,8,["modelValue","is-view"])])),_:1},8,["label","required"])):w("",!0),ue("certNo")?(I(),v(i,{key:7,ref_key:"certNoRef",ref:z,modelValue:c(X),"onUpdate:modelValue":[a[10]||(a[10]=e=>y(X)?X.value=e:null),a[12]||(a[12]=e=>ne(e,"certNo"))],label:c(ce),name:`${e.prefix}_certNo`,required:se("certNo"),maxlength:c(ee),"is-view":e.isView,"validate-type":c(W)?void 0:c(pe),onFocus:a[11]||(a[11]=e=>re("certNo"))},null,8,["modelValue","label","name","required","maxlength","is-view","validate-type"])):w("",!0),ue("birthDate")?(I(),v(u,{key:8,modelValue:c(G).formInfo.birthday,"onUpdate:modelValue":a[13]||(a[13]=e=>c(G).formInfo.birthday=e),label:fe("birthDate","title"),name:`${e.prefix}_birthday`,min:c(G).birth.min,max:c(G).birth.max,type:"date","is-view":c(Y)||e.isView,required:se("birthDate")},null,8,["modelValue","label","name","min","max","is-view","required"])):w("",!0),ue("certExpiry")?(I(),v(u,{key:9,modelValue:c(G).formInfo.certEndDate,"onUpdate:modelValue":a[15]||(a[15]=e=>c(G).formInfo.certEndDate=e),label:fe("certExpiry","title"),name:`${e.prefix}_certEndDate`,type:"date",min:c(G).certEndDate.min,max:c(G).certEndDate.max,"is-view":c(Q)||e.isView,read:"",rules:[{validator:ve}]},{extra:V((()=>[C("div",D,[b(s,{modelValue:c(Q),"onUpdate:modelValue":a[14]||(a[14]=e=>y(Q)?Q.value=e:null),"icon-size":16,disabled:e.isView},{default:V((()=>[h("长期")])),_:1},8,["modelValue","disabled"])])])),_:1},8,["modelValue","label","name","min","max","is-view","rules"])):w("",!0),ue("age")?(I(),v(i,{key:10,modelValue:c(G).formInfo.name,"onUpdate:modelValue":a[16]||(a[16]=e=>c(G).formInfo.name=e),label:fe("age","title"),name:`${e.prefix}_age`,"is-view":e.isView,required:se("age")},null,8,["modelValue","label","name","is-view","required"])):w("",!0),ue("residence")?(I(),v(f,{key:11,modelValue:c(G).formInfo.extInfo.provinceCode,"onUpdate:modelValue":a[17]||(a[17]=e=>c(G).formInfo.extInfo.provinceCode=e),field1:c(G).formInfo.extInfo.provinceCode,"onUpdate:field1":a[18]||(a[18]=e=>c(G).formInfo.extInfo.provinceCode=e),field2:c(G).formInfo.extInfo.cityCode,"onUpdate:field2":a[19]||(a[19]=e=>c(G).formInfo.extInfo.cityCode=e),field3:c(G).formInfo.extInfo.areaCode,"onUpdate:field3":a[20]||(a[20]=e=>c(G).formInfo.extInfo.areaCode=e),label:fe("residence","title"),name:`${e.prefix}_provinceCode`,"is-link":"","is-view":e.isView,required:se("residence"),"data-source":c(M),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","label","name","is-view","required","data-source"])):w("",!0),ue("social")&&"insure"!==e.prefix?(I(),v(i,{key:12,modelValue:c(G).formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[22]||(a[22]=e=>c(G).formInfo.extInfo.hasSocialInsurance=e),label:fe("social","title"),name:`${e.prefix}_hasSocialInsurance`,required:se("social")},{input:V((()=>[b(l,{modelValue:c(G).formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[21]||(a[21]=e=>c(G).formInfo.extInfo.hasSocialInsurance=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("social","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","label","name","required"])):w("",!0),ue("height")?(I(),v(i,{key:13,modelValue:c(G).formInfo.name,"onUpdate:modelValue":a[23]||(a[23]=e=>c(G).formInfo.name=e),label:fe("height","title"),"is-view":e.isView,name:`${e.prefix}_height`,required:se("height")},null,8,["modelValue","label","is-view","name","required"])):w("",!0),ue("weight")?(I(),v(i,{key:14,modelValue:c(G).formInfo.name,"onUpdate:modelValue":a[24]||(a[24]=e=>c(G).formInfo.name=e),label:fe("weight","title"),name:`${e.prefix}_weight`,"is-view":e.isView,required:se("weight")},null,8,["modelValue","label","name","is-view","required"])):w("",!0),ue("BMI")?(I(),v(i,{key:15,modelValue:c(G).formInfo.name,"onUpdate:modelValue":a[25]||(a[25]=e=>c(G).formInfo.name=e),label:fe("BMI","title"),name:`${e.prefix}_BMI`,"is-view":e.isView,required:se("BMI")},null,8,["modelValue","label","name","is-view","required"])):w("",!0),ue("insuredRiskManagementLevel")?(I(),v(i,{key:16,modelValue:c(G).formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[27]||(a[27]=e=>c(G).formInfo.extInfo.hasSocialInsurance=e),label:fe("insuredRiskManagementLevel","title"),name:`${e.prefix}_hasSocialInsurance`,required:se("insuredRiskManagementLevel")},{input:V((()=>[b(l,{modelValue:c(G).formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[26]||(a[26]=e=>c(G).formInfo.extInfo.hasSocialInsurance=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("insuredRiskManagementLevel","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","label","name","required"])):w("",!0),ue("purchaseOtherInsurance")?(I(),v(i,{key:17,modelValue:c(G).formInfo.extInfo.purchaseOtherInsurance,"onUpdate:modelValue":a[29]||(a[29]=e=>c(G).formInfo.extInfo.purchaseOtherInsurance=e),label:fe("purchaseOtherInsurance","title"),name:`${e.prefix}_purchaseOtherInsurance`,required:se("purchaseOtherInsurance")},{input:V((()=>[b(l,{modelValue:c(G).formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[28]||(a[28]=e=>c(G).formInfo.extInfo.hasSocialInsurance=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("purchaseOtherInsurance","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","label","name","required"])):w("",!0),ue("injuryInsurance")?(I(),v(i,{key:18,modelValue:c(G).formInfo.extInfo.injuryInsurance,"onUpdate:modelValue":a[31]||(a[31]=e=>c(G).formInfo.extInfo.injuryInsurance=e),label:fe("injuryInsurance","title"),name:`${e.prefix}_hasSocialInsurance`,required:se("injuryInsurance")},{input:V((()=>[b(l,{modelValue:c(G).formInfo.extInfo.injuryInsurance,"onUpdate:modelValue":a[30]||(a[30]=e=>c(G).formInfo.extInfo.injuryInsurance=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("injuryInsurance","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","label","name","required"])):w("",!0),ue("insureArea")?(I(),v(f,{key:19,label:fe("insureArea","title"),name:"insureAreaCode","is-link":"","is-view":e.isView,required:se("insureArea"),"data-source":c(M),mapping:{label:"name",value:"code",children:"children"}},null,8,["label","is-view","required","data-source"])):w("",!0),ue("occupation")&&"insure"!==e.prefix?(I(),v(f,{key:20,modelValue:c(G).formInfo.extInfo.occupationCodeList[0],"onUpdate:modelValue":a[32]||(a[32]=e=>c(G).formInfo.extInfo.occupationCodeList[0]=e),field0:c(G).formInfo.extInfo.occupationCodeList[0],"onUpdate:field0":a[33]||(a[33]=e=>c(G).formInfo.extInfo.occupationCodeList[0]=e),field1:c(G).formInfo.extInfo.occupationCodeList[1],"onUpdate:field1":a[34]||(a[34]=e=>c(G).formInfo.extInfo.occupationCodeList[1]=e),field2:c(G).formInfo.extInfo.occupationCodeList[2],"onUpdate:field2":a[35]||(a[35]=e=>c(G).formInfo.extInfo.occupationCodeList[2]=e),label:fe("occupation","title"),name:`${e.prefix}_occupationCodeList`,"is-view":e.isView,required:se("occupation"),"data-source":c(B),mapping:{label:"value",value:"code",children:"children"},"is-link":""},null,8,["modelValue","field0","field1","field2","label","name","is-view","required","data-source"])):w("",!0),ue("personalAnnualIncome")?(I(),v(i,{key:21,modelValue:c(G).formInfo.extInfo.personalAnnualIncome,"onUpdate:modelValue":a[36]||(a[36]=e=>c(G).formInfo.extInfo.personalAnnualIncome=e),label:fe("personalAnnualIncome","title"),name:`${e.prefix}_personalAnnualIncome`,required:se("personalAnnualIncome"),"is-view":e.isView,rules:[{validator:Ve}]},{extra:V((()=>[N])),_:1},8,["modelValue","label","name","required","is-view","rules"])):w("",!0),ue("familyAnnualIncome")?(I(),v(i,{key:22,modelValue:c(G).formInfo.extInfo.familyAnnualIncome,"onUpdate:modelValue":a[37]||(a[37]=e=>c(G).formInfo.extInfo.familyAnnualIncome=e),label:fe("familyAnnualIncome","title"),name:`${e.prefix}_familyAnnualIncome`,"is-view":e.isView,rules:[{validator:Ve}],required:se("familyAnnualIncome")},{extra:V((()=>[$])),_:1},8,["modelValue","label","name","is-view","rules","required"])):w("",!0),ue("country")?(I(),v(n,{key:23,modelValue:c(G).formInfo.extInfo.nationalityCode,"onUpdate:modelValue":a[38]||(a[38]=e=>c(G).formInfo.extInfo.nationalityCode=e),label:fe("country","title"),name:`${e.prefix}_nationalityCode`,"data-source":fe("country","attributeValueList")||[],mapping:{label:"value",value:"code",children:"child"},required:se("country"),"is-link":"","is-view":e.isView},null,8,["modelValue","label","name","data-source","required","is-view"])):w("",!0),ue("hasUsCard")?(I(),v(i,{key:24,modelValue:c(G).formInfo.extInfo.hasUsCard,"onUpdate:modelValue":a[40]||(a[40]=e=>c(G).formInfo.extInfo.hasUsCard=e),label:fe("hasUsCard","title"),name:`${e.prefix}_hasUsCard`,required:se("hasUsCard")},{input:V((()=>[b(l,{modelValue:c(G).formInfo.extInfo.hasUsCard,"onUpdate:modelValue":a[39]||(a[39]=e=>c(G).formInfo.extInfo.hasUsCard=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("hasUsCard","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","label","name","required"])):w("",!0),ue("marritalStatus")?(I(),v(n,{key:25,modelValue:c(G).formInfo.extInfo.marriageStatus,"onUpdate:modelValue":a[41]||(a[41]=e=>c(G).formInfo.extInfo.marriageStatus=e),label:fe("marritalStatus","title"),name:`${e.prefix}_marriageStatus`,"data-source":fe("marritalStatus","attributeValueList")||[],mapping:{label:"value",value:"code",children:"child"},"is-link":"","is-view":e.isView,required:se("marritalStatus")},null,8,["modelValue","label","name","data-source","is-view","required"])):w("",!0),ue("degree")?(I(),v(n,{key:26,modelValue:c(G).formInfo.extInfo.educationDegree,"onUpdate:modelValue":a[42]||(a[42]=e=>c(G).formInfo.extInfo.educationDegree=e),label:fe("degree","title"),name:`${e.prefix}_educationDegree`,"data-source":fe("degree","attributeValueList")||[],mapping:{label:"name",value:"code",children:"child"},required:se("degree"),"is-link":"","is-view":e.isView},null,8,["modelValue","label","name","data-source","required","is-view"])):w("",!0),ue("mobile")?(I(),v(i,{key:27,ref_key:"phoneRef",ref:Z,modelValue:c(K),"onUpdate:modelValue":[a[43]||(a[43]=e=>y(K)?K.value=e:null),a[45]||(a[45]=e=>ne(e,"mobile"))],label:fe("mobile","title"),name:`${e.prefix}_mobile`,maxlength:11,"is-view":e.isView,required:se("mobile"),"validate-type":c(J)?void 0:[c(t).PHONE],onFocus:a[44]||(a[44]=e=>re("mobile"))},null,8,["modelValue","label","name","is-view","required","validate-type"])):w("",!0),ue("verificationCode")?(I(),v(i,{key:28,modelValue:c(G).formInfo.verificationCode,"onUpdate:modelValue":a[46]||(a[46]=e=>c(G).formInfo.verificationCode=e),label:fe("verificationCode","title"),name:`${e.prefix}_verificationCode`,type:"digit",maxlength:6,"is-view":e.isView,required:se("verificationCode")},k({_:2},[e.isView?void 0:{name:"extra",fn:V((()=>[C("div",P,[b(O,{class:R(["sms-code",{"count-down":c(oe)>0}]),size:"small",plain:"",type:"primary",onClick:te},{default:V((()=>[h(L(c(ae)),1)])),_:1},8,["class"])])])),key:"0"}]),1032,["modelValue","label","name","is-view","required"])):w("",!0),ue("isSmoke")?(I(),v(i,{key:29,modelValue:c(G).formInfo.isSmoke,"onUpdate:modelValue":a[48]||(a[48]=e=>c(G).formInfo.isSmoke=e),required:se("isSmoke"),label:fe("isSmoke","title"),name:`${e.prefix}_isSmoke`,"is-view":c(Y)},{input:V((()=>[b(l,{modelValue:c(G).formInfo.isSmoke,"onUpdate:modelValue":a[47]||(a[47]=e=>c(G).formInfo.isSmoke=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("isSmoke","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","required","label","name","is-view"])):w("",!0),ue("contactNo")?(I(),v(i,{key:30,modelValue:c(G).formInfo.contactNo,"onUpdate:modelValue":a[49]||(a[49]=e=>c(G).formInfo.contactNo=e),label:fe("contactNo","title"),name:`${e.prefix}_contactNo`,"is-view":e.isView,required:se("contactNo")},null,8,["modelValue","label","name","is-view","required"])):w("",!0),ue("email")?(I(),v(i,{key:31,modelValue:c(G).formInfo.email,"onUpdate:modelValue":a[50]||(a[50]=e=>c(G).formInfo.email=e),label:fe("email","title"),name:`${e.prefix}_email`,"is-view":e.isView,required:se("email"),"validate-type":[c(t).EMAIL]},null,8,["modelValue","label","name","is-view","required","validate-type"])):w("",!0),ue("homeAddress")?(I(),v(f,{key:32,modelValue:c(G).formInfo.extInfo.familyAreaCode,"onUpdate:modelValue":a[51]||(a[51]=e=>c(G).formInfo.extInfo.familyAreaCode=e),field1:c(G).formInfo.extInfo.familyProvinceCode,"onUpdate:field1":a[52]||(a[52]=e=>c(G).formInfo.extInfo.familyProvinceCode=e),field2:c(G).formInfo.extInfo.familyCityCode,"onUpdate:field2":a[53]||(a[53]=e=>c(G).formInfo.extInfo.familyCityCode=e),field3:c(G).formInfo.extInfo.familyAreaCode,"onUpdate:field3":a[54]||(a[54]=e=>c(G).formInfo.extInfo.familyAreaCode=e),label:fe("homeAddress","title"),name:`${e.prefix}_familyProvinceCode`,"is-link":"","is-view":e.isView,required:se("homeAddress"),"data-source":c(M),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","label","name","is-view","required","data-source"])):w("",!0),ue("homeAddressDetail")?(I(),v(i,{key:33,modelValue:c(G).formInfo.extInfo.familyAddress,"onUpdate:modelValue":a[55]||(a[55]=e=>c(G).formInfo.extInfo.familyAddress=e),label:fe("homeAddressDetail","title"),name:`${e.prefix}_familyAddress`,"is-view":e.isView,maxlength:99,rules:[{validator:we}],required:se("homeAddressDetail")},null,8,["modelValue","label","name","is-view","rules","required"])):w("",!0),ue("homePostalCode")?(I(),v(i,{key:34,modelValue:c(G).formInfo.extInfo.familyZipCode,"onUpdate:modelValue":a[56]||(a[56]=e=>c(G).formInfo.extInfo.familyZipCode=e),label:fe("homePostalCode","title"),name:`${e.prefix}_familyZipCode`,"is-view":e.isView,required:se("homePostalCode"),"validate-type":[c(t).ZIP_CODE]},null,8,["modelValue","label","name","is-view","required","validate-type"])):w("",!0),ue("workAddress")?(I(),v(f,{key:35,modelValue:c(G).formInfo.extInfo.workAreaCode,"onUpdate:modelValue":a[57]||(a[57]=e=>c(G).formInfo.extInfo.workAreaCode=e),field1:c(G).formInfo.extInfo.workProvinceCode,"onUpdate:field1":a[58]||(a[58]=e=>c(G).formInfo.extInfo.workProvinceCode=e),field2:c(G).formInfo.extInfo.workCityCode,"onUpdate:field2":a[59]||(a[59]=e=>c(G).formInfo.extInfo.workCityCode=e),field3:c(G).formInfo.extInfo.workAreaCode,"onUpdate:field3":a[60]||(a[60]=e=>c(G).formInfo.extInfo.workAreaCode=e),label:fe("workAddress","title"),name:`${e.prefix}_workProvinceCode`,"is-link":"","is-view":e.isView,required:se("workAddress"),"data-source":c(M),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","label","name","is-view","required","data-source"])):w("",!0),ue("workAddressDetail")?(I(),v(i,{key:36,modelValue:c(G).formInfo.extInfo.workAddress,"onUpdate:modelValue":a[61]||(a[61]=e=>c(G).formInfo.extInfo.workAddress=e),label:fe("workAddressDetail","title"),name:`${e.prefix}_workAddress`,"is-view":e.isView,rules:[{validator:we}],required:se("workAddressDetail")},null,8,["modelValue","label","name","is-view","rules","required"])):w("",!0),ue("workPostalCode")?(I(),v(i,{key:37,modelValue:c(G).formInfo.extInfo.workZipCode,"onUpdate:modelValue":a[62]||(a[62]=e=>c(G).formInfo.extInfo.workZipCode=e),label:fe("workPostalCode","title"),required:se("workZipCode"),name:`${e.prefix}_workPostCode`,"is-view":e.isView,"validate-type":[c(t).ZIP_CODE]},null,8,["modelValue","label","required","name","is-view","validate-type"])):w("",!0),ue("companyName")?(I(),v(i,{key:38,modelValue:c(G).formInfo.extInfo.workStation,"onUpdate:modelValue":a[63]||(a[63]=e=>c(G).formInfo.extInfo.workStation=e),label:fe("companyName","title"),name:`${e.prefix}_workPostCode`,"is-view":e.isView,rules:[{validator:(...e)=>xe(20,...e)}],required:se("companyName")},null,8,["modelValue","label","name","is-view","rules","required"])):w("",!0),ue("workContent")?(I(),v(i,{key:39,modelValue:c(G).formInfo.extInfo.workContent,"onUpdate:modelValue":a[64]||(a[64]=e=>c(G).formInfo.extInfo.workContent=e),label:fe("workContent","title"),name:`${e.prefix}_workContent`,required:se("workContent"),"is-view":e.isView,rules:[{validator:(...e)=>xe(100,...e)}]},null,8,["modelValue","label","name","required","is-view","rules"])):w("",!0),ue("chineseTaxResident")?(I(),v(i,{key:40,modelValue:c(G).formInfo.extInfo.chineseTaxResident,"onUpdate:modelValue":a[66]||(a[66]=e=>c(G).formInfo.extInfo.chineseTaxResident=e),label:fe("chineseTaxResident","title"),name:`${e.prefix}_taxResident`,required:se("chineseTaxResident")},{input:V((()=>[b(l,{modelValue:c(G).formInfo.extInfo.chineseTaxResident,"onUpdate:modelValue":a[65]||(a[65]=e=>c(G).formInfo.extInfo.chineseTaxResident=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("chineseTaxResident","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","label","name","required"])):w("",!0),ue("taxResident")?(I(),v(n,{key:41,modelValue:c(G).formInfo.taxResident,"onUpdate:modelValue":a[67]||(a[67]=e=>c(G).formInfo.taxResident=e),"is-view":e.isView,label:fe("taxResident","title"),name:`${e.prefix}_benefitOrder`,"data-source":fe("taxResident","attributeValueList")||[],mapping:{label:"value",value:"code",children:"child"},required:se("taxResident")},null,8,["modelValue","is-view","label","name","data-source","required"])):w("",!0),ue("partTimeJob")?(I(),v(i,{key:42,modelValue:c(G).formInfo.extInfo.isPartTime,"onUpdate:modelValue":a[69]||(a[69]=e=>c(G).formInfo.extInfo.isPartTime=e),label:fe("partTimeJob","title"),name:`${e.prefix}_isPartTime`,required:se("partTimeJob")},{input:V((()=>[b(l,{modelValue:c(G).formInfo.extInfo.isPartTime,"onUpdate:modelValue":a[68]||(a[68]=e=>c(G).formInfo.extInfo.isPartTime=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:fe("partTimeJob","attributeValueList")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","label","name","required"])):w("",!0),ue("benefitOrder")?(I(),v(n,{key:43,modelValue:c(G).formInfo.benefitOrder,"onUpdate:modelValue":a[70]||(a[70]=e=>c(G).formInfo.benefitOrder=e),label:fe("benefitOrder","title"),name:`${e.prefix}_benefitOrder`,"is-view":e.isView,"data-source":fe("benefitOrder","attributeValueList")||[],mapping:{label:"value",value:"code",children:"child"},required:se("benefitOrder")},null,8,["modelValue","label","name","is-view","data-source","required"])):w("",!0),ue("benefitRate")?(I(),v(i,{key:44,modelValue:c(G).formInfo.benefitRate,"onUpdate:modelValue":a[71]||(a[71]=e=>c(G).formInfo.benefitRate=e),required:se("benefitRate"),name:`${e.prefix}_benefitRate`,"is-view":e.isView,rules:[{validator:be}],label:fe("benefitRate","title")},{extra:V((()=>[H])),_:1},8,["modelValue","required","name","is-view","rules","label"])):w("",!0),x(o.$slots,"default")])):w("",!0)}}});const B={class:"page-info-wrapper"},M=e({__name:"index",props:{factorObject:null,formInfo:{default:()=>({})},isView:{type:Boolean,default:!1},sendSmsCode:{type:Function,default:(e,o)=>{}},titleCollection:{default:()=>({})},inputAlign:{default:"left"},needDesensitize:{type:Boolean,default:!1}},setup(e,{expose:o}){const n=e,{insurerCode:r=""}=a().query;T(),a();const t=S(`${r.toLocaleUpperCase()}_OCCUPATION`),u=l({}),s=l({extInfo:{},tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:""}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),f=l(null),C=l([]),h=l([]);l([]),l([]);l([]);_({beneficiaryId:0,nextPage:"",currentAddress:null,isLoading:!0});const k=i((()=>{var e,o;const a={INSURER:{},HOLDER:{}};return((null==(e=u.value)?void 0:e.INSURER)||[]).forEach((e=>{a.INSURER[e.code]=e})),((null==(o=u.value)?void 0:o.HOLDER)||[]).forEach((e=>{a.HOLDER[e.code]=e})),a})),R=(e,o)=>{var a,l,i;return(null==(i=null==(l=null==(a=k.value)?void 0:a[o])?void 0:l[e])?void 0:i.isDisplay)===U.YES},L=(e,o)=>{var a,l;return(null==(l=null==(a=k.value)?void 0:a[o])?void 0:l[e].isMustInput)===U.YES},O=(e,o,a)=>{var l,i,n;return(null==(n=null==(i=null==(l=k.value)?void 0:l[a])?void 0:i[e])?void 0:n[o])||""},E=(e,o)=>{const a=e;return Object.keys(a).forEach((e=>{o.includes(e)||(a[e]="")})),a};return o({validateForm:e=>new Promise(((o,a)=>{var l;null==(l=f.value)||l.validate(e).then((()=>{o(s.value)}),(()=>{a()}))}))}),d((()=>n.factorObject),(()=>{const e={BENEFICIARY:n.factorObject[3],INSURER:n.factorObject[2],HOLDER:n.factorObject[1]};u.value=e}),{immediate:!0,deep:!0}),d([()=>s.value.tenantOrderInsuredList[0].relationToHolder,()=>s.value.tenantOrderHolder],(([e],[o])=>{var a,l,i,r;`${s.value.tenantOrderInsuredList[0].relationToHolder}`===g.SELF?(Object.assign(s.value.tenantOrderInsuredList[0],{...E(null==(l=null==(a=s.value)?void 0:a.tenantOrderInsuredList)?void 0:l[0],["extInfo","relationToHolder","tenantOrderBeneficiaryList","tenantOrderProductList"]),extInfo:{occupationCodeList:[]}}),Object.assign(s.value.tenantOrderInsuredList[0],s.value.tenantOrderHolder,{id:s.value.tenantOrderInsuredList[0].id,extInfo:{...s.value.tenantOrderHolder.extInfo,insureProvinceCode:s.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,insureCityCode:s.value.tenantOrderInsuredList[0].extInfo.insureCityCode,insureAreaCode:s.value.tenantOrderInsuredList[0].extInfo.insureAreaCode}})):e===o||n.isView||Object.assign(s.value.tenantOrderInsuredList[0],{...E(null==(r=null==(i=s.value)?void 0:i.tenantOrderInsuredList)?void 0:r[0],["extInfo","relationToHolder","tenantOrderBeneficiaryList","tenantOrderProductList"]),extInfo:{occupationCodeList:[]}})}),{deep:!0}),d((()=>n.formInfo),(()=>{Object.keys(n.formInfo).length&&(s.value=n.formInfo)}),{deep:!0,immediate:!0}),(o,a)=>{const l=m("ProField"),i=m("ProCard"),n=m("ProRadioButton"),r=m("ProCascader"),d=(m("ProSvg"),m("ProForm"));return I(),p("div",B,[b(d,{ref_key:"formRef",ref:f,"show-error":"","show-error-message":!1,"input-align":e.inputAlign},{default:V((()=>{var d,f,m,p;return[(null==(d=c(u).HOLDER)?void 0:d.length)?(I(),v(i,{key:0,"show-line":!1,"show-divider":!1,title:null==(f=e.titleCollection)?void 0:f.HOLDER},{default:V((()=>[b(j,{images:c(C),"onUpdate:images":a[1]||(a[1]=e=>y(C)?C.value=e:null),"form-info":c(s).tenantOrderHolder,"factor-list":c(u).HOLDER,prefix:"holder","is-view":e.isView,"need-desensitize":e.needDesensitize,"send-sms-code":e.sendSmsCode},{name:V((()=>[x(o.$slots,"holderName")])),default:V((()=>{var o,i;return[R("gasNumberCollection","HOLDER")&&(null==(i=null==(o=c(s).tenantOrderSubjectList)?void 0:o[0])?void 0:i.extInfo)?(I(),v(l,{key:0,modelValue:c(s).tenantOrderSubjectList[0].subjectNo,"onUpdate:modelValue":a[0]||(a[0]=e=>c(s).tenantOrderSubjectList[0].subjectNo=e),label:O("gasNumberCollection","title","HOLDER"),name:"subjectNo",required:L("gasNumberCollection","HOLDER"),"is-view":e.isView,maxlength:100},null,8,["modelValue","label","required","is-view"])):w("",!0)]})),_:3},8,["images","form-info","factor-list","is-view","need-desensitize","send-sms-code"])])),_:3},8,["title"])):w("",!0),(null==(m=c(u).INSURER)?void 0:m.length)?(I(),v(i,{key:1,"show-line":!1,"show-divider":!1,title:null==(p=e.titleCollection)?void 0:p.INSURER},{default:V((()=>[R("relationToHolder","INSURER")?(I(),v(l,{key:0,modelValue:c(s).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":a[3]||(a[3]=e=>c(s).tenantOrderInsuredList[0].relationToHolder=e),class:"relation-holder",name:"insure_relationToHolder",required:L("relationToHolder","INSURER"),label:O("relationToHolder","title","INSURER")},{input:V((()=>[b(n,{modelValue:c(s).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":a[2]||(a[2]=e=>c(s).tenantOrderInsuredList[0].relationToHolder=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:O("relationToHolder","attributeValueList","INSURER")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","required","label"])):w("",!0),e.isView||1!=+c(s).tenantOrderInsuredList[0].relationToHolder?(I(),v(j,{key:1,images:c(h),"onUpdate:images":a[4]||(a[4]=e=>y(h)?h.value=e:null),"form-info":c(s).tenantOrderInsuredList[0],"factor-list":c(u).INSURER||[],prefix:"insure","need-desensitize":e.needDesensitize,"send-sms-code":e.sendSmsCode,"is-view":e.isView},{name:V((()=>[x(o.$slots,"insurerName")])),_:3},8,["images","form-info","factor-list","need-desensitize","send-sms-code","is-view"])):w("",!0),R("social","INSURER")?(I(),v(l,{key:2,modelValue:c(s).tenantOrderInsuredList[0].extInfo.hasSocialInsurance,"onUpdate:modelValue":a[6]||(a[6]=e=>c(s).tenantOrderInsuredList[0].extInfo.hasSocialInsurance=e),label:O("social","title","INSURER"),name:"insure_hasSocialInsurance",required:L("social","INSURER")},{input:V((()=>[b(n,{modelValue:c(s).tenantOrderInsuredList[0].extInfo.hasSocialInsurance,"onUpdate:modelValue":a[5]||(a[5]=e=>c(s).tenantOrderInsuredList[0].extInfo.hasSocialInsurance=e),disabled:e.isView,prop:{label:"value",value:"code"},options:O("social","attributeValueList","INSURER")||[]},null,8,["modelValue","disabled","options"])])),_:1},8,["modelValue","label","required"])):w("",!0),R("occupation","INSURER")?(I(),v(r,{key:3,modelValue:c(s).tenantOrderInsuredList[0].extInfo.occupationCodeList[0],"onUpdate:modelValue":a[7]||(a[7]=e=>c(s).tenantOrderInsuredList[0].extInfo.occupationCodeList[0]=e),field0:c(s).tenantOrderInsuredList[0].extInfo.occupationCodeList[0],"onUpdate:field0":a[8]||(a[8]=e=>c(s).tenantOrderInsuredList[0].extInfo.occupationCodeList[0]=e),field1:c(s).tenantOrderInsuredList[0].extInfo.occupationCodeList[1],"onUpdate:field1":a[9]||(a[9]=e=>c(s).tenantOrderInsuredList[0].extInfo.occupationCodeList[1]=e),field2:c(s).tenantOrderInsuredList[0].extInfo.occupationCodeList[2],"onUpdate:field2":a[10]||(a[10]=e=>c(s).tenantOrderInsuredList[0].extInfo.occupationCodeList[2]=e),label:O("occupation","title","INSURER"),name:"insure_occupationCodeList","is-view":e.isView,required:L("occupation","INSURER"),"data-source":c(t),mapping:{label:"value",value:"code",children:"children"},"is-link":""},null,8,["modelValue","field0","field1","field2","label","is-view","required","data-source"])):w("",!0)])),_:3},8,["title"])):w("",!0),w("",!0)]})),_:3},8,["input-align"])])}}});export{M as default};

import{h as g,G as d,P as y,j as N,r as _,k as x,m as P,n as v,A as o,L as m,B as T,I as b,aq as k,M as w,s as R,E as U,T as C,a5 as M,a6 as q}from"./vendor-4d9de129.js";import{_ as V,g as G,s as f}from"./index-b7c11a07.js";import{s as O,c as W}from"./phoneVerify-430369f4.js";import{c as L}from"./format-12461bbc.js";import{a as i}from"./order-0959e6f5.js";const j=u=>(M("data-v-29510ea1"),u=u(),q(),u),z={class:"page-phone-verify"},H=j(()=>o("div",{class:"title"},"\u901A\u8FC7\u6295\u4FDD\u4EBA\u624B\u673A\u53F7\u9A8C\u8BC1\u540E\uFF0C\u53EF\u8FDB\u884C\u6295\u4FDD\u4FE1\u606F\u9884",-1)),J={class:"phone"},Y={class:"input-wrapper"},$=U("\u4E0B\u4E00\u6B65"),K=g({setup(u){const n=d(""),l=d(""),e=d(0);let p;const c=y(),{agentCode:h,tenantId:D,templateId:Q,productCode:X,insurerCode:Z,orderNo:B}=c.query,E=()=>{p=setInterval(()=>{e.value-=1,e.value<=0&&clearInterval(p)},1e3)},F=()=>{G({orderNo:B,saleUserId:h,tenantId:D}).then(t=>{var r;const{code:s,data:a}=t;s==="10000"&&([i.PENDING,i.PAYMENT_FAILED,i.UNDER_WRITING_SUCCESS].includes(a.orderStatus)?n.value=(r=a==null?void 0:a.tenantOrderHolder)==null?void 0:r.mobile:f("paymentResult",c.query))})},I=()=>{O(n.value).then(({code:t})=>{t==="10000"&&(e.value=60,E())})},A=()=>{W(n.value,l.value).then(({code:t,data:s})=>{t==="10000"&&s?(C.success("\u9A8C\u8BC1\u6210\u529F"),f("infoPreview",c.query)):C.fail("\u9A8C\u8BC1\u5931\u8D25")})};return N(()=>{F()}),(t,s)=>{const a=_("van-button"),r=_("ProPageWrap");return x(),P(r,null,{default:v(()=>[o("div",z,[H,o("div",J,m(T(L)(n.value)),1),o("div",Y,[b(o("input",{"onUpdate:modelValue":s[0]||(s[0]=S=>l.value=S),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",class:"input"},null,512),[[k,l.value]]),o("div",{class:w(["btn",{second:e.value}]),onClick:I},m(e.value?`${e.value}s`:"\u53D1\u9001\u9A8C\u8BC1\u7801"),3)]),R(a,{type:"primary",class:"submit-btn",onClick:A},{default:v(()=>[$]),_:1})])]),_:1})}}});var ue=V(K,[["__scopeId","data-v-29510ea1"]]);export{ue as default};

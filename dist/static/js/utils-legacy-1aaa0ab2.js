System.register(["./vendor-legacy-80ec6972.js","./infoCollection-legacy-423f47dc.js","./index-legacy-383e7412.js","./useStorage-legacy-383c1a14.js","./trial-legacy-640286fd.js"],(function(e){"use strict";var i,r,t,n,a,o,d,s,u,y,l,c;return{setters:[function(){},function(e){i=e.R,r=e.g,t=e.k,n=e.l},function(e){a=e.a6,o=e.C,d=e.aa},function(e){s=e.l},function(e){u=e.R,y=e.b,l=e.a,c=e.i}],execute:function(){e("t",(e=>{const{tenantId:i,riskList:r,riskPremium:t,productId:n}=e;return r.map((e=>({tenantId:i,amountUnit:1,annuityDrawFrequency:e.annuityDrawDate,annuityDrawType:e.annuityDrawType,paymentFrequency:e.paymentFrequency,paymentPeriod:e.chargePeriod.split("_")[1],paymentPeriodType:y[e.chargePeriod.split("_")[0]],insurancePeriodType:l["to_life"===e.coveragePeriod?"to_life":e.coveragePeriod.split("_")[0]],insurancePeriodValue:Number.isNaN(+e.coveragePeriod.split("_")[1])?0:e.coveragePeriod.split("_")[1],riskCode:e.riskCode,riskType:e.riskType,riskName:e.riskName,extInfo:{riskId:e.riskId,copy:e.copy},initialPremium:t[e.riskCode]?.premium||0,totalPremium:t[e.riskCode]?.premium||0,liabilityDetails:e.liabilityVOList?.map((e=>({liabilityCode:e.liabilityCode,liabilityName:e.liabilityName,refundMethod:e.liabilityAttributeValue})))||[],productId:n,currentAmount:e.amount||0,initialAmount:t[e.riskCode]?.amount||e.amount})))})),e("r",(e=>{const i=a(e).map((e=>(e.riskDetailVOList.find((e=>e.riskType===u.MAIN_RISK)),(e.riskDetailVOList||[]).map((e=>{const{riskCategory:i,riskCode:r,riskType:a,id:o,riskInsureLimitVO:d,riskCalcMethodInfoVO:s,amountPremiumConfigVO:u}=e,{annuityDrawFrequencyList:y,annuityDrawValueList:l,insurancePeriodValueList:c,paymentFrequencyList:p,paymentPeriodValueList:m}=d;let I=0;const{displayType:k,displayUnit:C,fixedValue:f,eachCopyPrice:P}=u||{},g=String(k),O=String(C);return g&&g===t.FIXED?O===n.YUAN?I=f||0:O===n.MILLION&&(I=f?Number(1e4*f):0):g&&g===t.COPY&&(I=P?1*P:0),{amount:I,annuityDrawDate:l?.[0],annuityDrawFrequency:y?.[0],chargePeriod:m?.[0],copy:1,coveragePeriod:c?.[0],liabilityVOList:e.riskLiabilityInfoVOList,paymentFrequency:p?.[0],riderRisk:!0,riderRiskVOList:[],riskCategory:i,riskCode:r,riskId:o,riskType:a}}))))).flat(),r={},o=[];return i.forEach((e=>{r[e.riskCode]||(o.push(e),r[e.riskCode]=!0)})),o}));const p=(e,i,t=[],n=r.YEAR,a=!1)=>{const o=e.filter((e=>{try{return!!e.extraInfo&&(!JSON.parse(e.extraInfo).packageCode||!!t.includes(e.id))}catch(i){return!1}})),d=o.find((e=>e.riskType===u.MAIN_RISK));return o.map((e=>{const{riskInsureLimitVO:t,riskCategory:n,id:a,riskType:o,riskName:s,riskCode:y,extraInfo:l,riskLiabilityInfoVOList:p,riskCalcMethodInfoVO:m}=e,{insurancePeriodType:I,insurancePeriodValueList:k,paymentFrequencyList:C,paymentPeriodValueList:f,paymentPeriodType:P,annuityDrawFrequencyList:g,annuityDrawValueList:O,insurancePeriodRule:L,paymentPeriodRule:D}=t,{fixedAmount:N,minCopy:T}=m,V={amount:N,riskCode:y,riskId:a,riskName:s,paymentFrequency:C?.[0]||r.YEAR,extraInfo:l,chargePeriod:f?.[0],annuityDrawDate:O?.[0],riskType:o,annuityDrawFrequency:g?.[0],copy:T,coveragePeriod:k?.[0],insuredCode:i?.insurerCode,liabilityVOList:p,riskCategory:n};return o===u.MAIN_RISK?V:(L===c.ONE_YEAR&&(V.coveragePeriod="year_1"),D===c.ONE_YEAR&&(V.chargePeriod="year_1"),{...V,mainRiskId:d?.id,mainRiskCode:d?.riskCode})}))},m=(e("v",(e=>/^\d{6}$/.test(e))),e=>{const{tenantId:i,riskList:r,riskPremium:t,productId:n}=e;return r.map((e=>{var r;return{tenantId:i,amountUnit:1,annuityDrawFrequency:e.annuityDrawDate,annuityDrawType:e.annuityDrawType,paymentFrequency:e.paymentFrequency,paymentPeriod:0,paymentPeriodType:y?.[e.chargePeriod.split("_")[0]],insurancePeriodType:l["to_life"===e.coveragePeriod?"to_life":e.coveragePeriod?.split("_")?.[0]],insurancePeriodValue:(r=e.coveragePeriod,!r||Number.isNaN(+r.split("_")[1])?0:r?.split("_")[1]),riskCode:e.riskCode,riskType:e.riskType,riskName:e.riskName,extInfo:{riskId:e.riskId,copy:e.copy},regularPremium:0,totalPremium:0,initialPremium:0,liabilityDetails:e.liabilityVOList?.map((e=>({liabilityCode:e.liabilityCode,liabilityName:e.liabilityName,refundMethod:e.liabilityAttributeValue}))),productId:n,currentAmount:e.amount,initialAmount:e.amount}}))}),I=(e("f",(e=>({orderAmount:0,tenantId:e.tenantId,venderCode:e.insureDetail.productBasicInfoVO.insurerCode,orderDataSource:"1",agencyId:e.agencyCode,agentCode:e.agentCode,saleUserId:e.saleUserId,saleChannelId:e.saleChannelId,commencementTime:e.commencementTime,expiryDate:e.expiryDate,orderCategory:"1",tenantOrderHolder:{tenantId:e.tenantId,certType:e.order.tenantOrderHolder?.certType||o.CERT,...e.order.tenantOrderHolder},extInfo:{...e.extraInfo,extraInfo:e.extraInfo,buttonCode:e.buttonCode,pageCode:e.pageCode,iseeBizNo:e.iseeBizNo},tenantOrderInsuredList:[{...e.order.tenantOrderInsuredList[0],tenantId:e.tenantId,certType:e.order.tenantOrderInsuredList?.[0]?.certType||o.CERT,mobile:e.order.tenantOrderInsuredList[0].relationToHolder===i.SELF?e.order.tenantOrderHolder.mobile:"",tenantOrderProductList:e.insureDetail?.productRiskVoList?.map((i=>({tenantId:e.tenantId,productCode:e.insureDetail?.productBasicInfoVO.productCode,productName:e.insureDetail?.productBasicInfoVO.productName,premium:0,tenantOrderRiskList:m({tenantId:e.tenantId,riskList:p(i.riskDetailVOList,e.detail),riskPremium:{},productId:e.detail?.id})})))||[]}],operateOption:e.order?.operateOption}))),e("c",((e,i)=>-1!==i.indexOf("$")?i.replace("$",`${e}`):`${e||""}${i}`)),e("P","PREVIEW_FILE_INFO")),k=(e("o",(e=>{s.set(I,JSON.stringify(e)),d.push("/template/filePreview")})),{2:"richText",3:"link"});e("g",((e,i)=>{if("1"===e&&i){const e=i?.split("?");return"pdf"===e[0].substr(e[0].lastIndexOf(".")+1)?"pdf":"picture"}return k[e]}))}}}));

import{o as e,d as a,X as t,Y as l,cg as n,a as r,u as o,r as s,z as i,L as d,R as c,$ as u,Z as p,N as v,C as m,a1 as f,ad as h,c as g,A as y,g as A,f as I,e as O,h as x,i as b,w as k,U as C,V as _,j as L,a2 as T,T as w,D as E,a0 as D,a4 as P,P as S}from"./index-f6810f87.js";import{i as j,u as R,p as N,g as F}from"./trial-9810784b.js";import{c as B,a as H,q as V}from"./product-2b64ad80.js";import{n as U}from"./nextStep-ad3a4472.js";import{I as q,O as G,b as M,S as z}from"./infoCollection-6f868605.js";import{r as Q,v as W,g as Y,t as Z}from"./utils-edee691a.js";import{_ as J}from"./index-2c0d85fb.js";import{V as X,G as K,_ as $}from"./index-539ed1dd.js";import{P as ee}from"./index-3a16b544.js";import{_ as ae}from"./index-9f28763e.js";import{c as te}from"./phoneVerify-60c895b7.js";import{u as le}from"./useOrder-acb6287e.js";import{_ as ne}from"./TrialButton-9db14165.js";import{u as re}from"./useAttachment-ab008b73.js";import{t as oe,i as se}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-a9d00d35.js";/* empty css              */import"./bankCard-2d99f6c3.js";import{P as ie}from"./index-f2b54795.js";import{f as de}from"./utils-086a00d9.js";import"./pdfh5-008ca364.js";import"./core-19a0437e.js";import"./constant-8927d485.js";import"./trial-058d9398.js";import"./index-d9d7e761.js";import"./_initCloneObject-0663309f.js";import"./isObjectLike-a9798079.js";import"./debounce-eed12388.js";import"./index-c61a1609.js";import"./createProposal-2367418f.js";const ce=(a,t,l)=>{e((()=>{(async()=>{try{const{code:e,data:l}=await B(a);if("10000"===e){const e={};l.forEach((a=>{e[a.relationCode]||(e[a.relationCode]=[]),e[a.relationCode].push(a)})),null==t||t(e)}}catch(e){console.log(e),null==l||l(!1)}})()}))};const ue={key:0},pe=[I("div",{class:"__skeleton_short_content__"},[I("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[I("div",{class:"page-internet-product-detail"},[I("div",{class:"info"},[I("div",{class:"van-image banner",style:{width:"100%",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[I("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1676527379&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=tkscLe6oOZYjnRIA%2B7AiMS3bOs0%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),I("div")]),I("div",{class:"guarantee-list"},[I("div",{class:"header"},[I("span",null,[I("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"ä¿éšœè®¡åˆ’")]),I("span",null,[I("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"æŸ¥çœ‹è¯¦æƒ…")])]),I("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[I("div",{class:"cell-container"},[I("div",{class:"left-part large"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"ä¸€èˆ¬åŒ»ç–—ä¿é™©é‡‘")]),I("div",{class:"divider"}),I("div",{class:"right-part"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜300ä¸‡")])])]),I("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[I("div",{class:"cell-container"},[I("div",{class:"left-part large"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"é‡å¤§ç–¾ç—…åŒ»ç–—ä¿é™©é‡‘")]),I("div",{class:"divider"}),I("div",{class:"right-part"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜600ä¸‡")])])]),I("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[I("div",{class:"cell-container"},[I("div",{class:"left-part large"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æ¶æ€§è‚¿ç˜¤è´¨å­é‡ç¦»å­åŒ»ç–—")]),I("div",{class:"divider"}),I("div",{class:"right-part"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜600ä¸‡")])])]),I("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[I("div",{class:"cell-container"},[I("div",{class:"left-part large"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æ¶æ€§è‚¿ç˜¤é™¢å¤–ç‰¹å®šè¯å“è´¹ç”¨åŒ»ç–—")]),I("div",{class:"divider"}),I("div",{class:"right-part"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜600ä¸‡")])])]),I("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[I("div",{class:"cell-container"},[I("div",{class:"left-part large"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æ¶æ€§è‚¿ç˜¤ç‰¹å®šå™¨æ¢°è€—æè´¹ç”¨åŒ»ç–—è´£ä»» ï¼ˆé€‚ç”¨äºå¥³æ€§è¢«ä¿é™©äººï¼‰")]),I("div",{class:"divider"}),I("div",{class:"right-part"},[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜100ä¸‡")])])]),I("div",{class:"show-more"},[I("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"æŸ¥çœ‹æ›´å¤š "),I("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[I("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),I("div",{class:"feerate-view sk-border"},[I("span",null,[I("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00å…ƒ/å¹´èµ·")])])]),I("div",{class:"com-divider"}),I("div",{class:"tabs",sticky:"",scrollspy:""},[I("div",null,[I("div",{class:"van-sticky"},[I("div",{class:"van-tabs"},[I("div",{id:"tab-list",class:"tab-list"},[I("a",{class:"tab-title active",title:"äº§å“äº®ç‚¹"},[I("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"äº§å“äº®ç‚¹")]),I("a",{class:"tab-title",title:"ç†èµ”è¯´æ˜"},[I("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"ç†èµ”è¯´æ˜")]),I("a",{class:"tab-title",title:"æˆ‘è¦æŠ•ä¿"},[I("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"æˆ‘è¦æŠ•ä¿")])])])])]),I("div",{class:"tab-content"},[I("div",{id:"tab1"},[I("div",{class:"spec"},[I("div",{class:"van-image detail-img",style:{width:"100%"}},[I("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)],ve=["theme-vars"],me={class:"info"},fe={class:"custom-page-form"},he=I("div",{class:"form-title"},"è¯·å¡«å†™æŠ•ä¿ä¿¡æ¯",-1),ge=I("div",{id:"xinaoDialog"},null,-1),ye=a({name:"InsuranceShort"}),Ae=a({...ye,setup(a){const B=t((()=>l((()=>import("./index-2dc2a257.js")),["static/js/index-2dc2a257.js","static/css/index-fa4edf2a.css","static/js/index-f6810f87.js","static/css/index-f9ad39f9.css","static/js/pdfh5-008ca364.js","static/js/index-d9d7e761.js","static/css/index-827a8544.css","static/js/utils-edee691a.js","static/js/infoCollection-6f868605.js","static/js/trial-058d9398.js"]))),ye=t((()=>l((()=>import("./index-35d5b4ef.js")),["static/js/index-35d5b4ef.js","static/css/index-c1e75aab.css","static/js/index-f6810f87.js","static/css/index-f9ad39f9.css","static/js/pdfh5-008ca364.js"]))),Ae=t((()=>l((()=>import("./index-ac9ffc94.js")),["static/js/index-ac9ffc94.js","static/css/index-409348e9.css","static/js/index-f6810f87.js","static/css/index-f9ad39f9.css","static/js/pdfh5-008ca364.js","static/js/infoCollection-6f868605.js","static/js/trial-058d9398.js"]))),Ie=t((()=>l((()=>import("./index-5ed46e78.js")),["static/js/index-5ed46e78.js","static/css/index-eabeb59f.css","static/js/index-f6810f87.js","static/css/index-f9ad39f9.css","static/js/pdfh5-008ca364.js"]))),Oe=t((()=>l((()=>import("./index-e1674b6c.js")),["static/js/index-e1674b6c.js","static/css/index-3329e46f.css","static/js/index-f6810f87.js","static/css/index-f9ad39f9.css","static/js/pdfh5-008ca364.js"]))),xe=n();r();const be=o(),{productCode:ke="",tenantId:Ce,agentCode:_e="",agencyCode:Le,saleChannelId:Te,extraInfo:we,insurerCode:Ee,preview:De}=be.query;let Pe={};try{console.log("extInfo",decodeURIComponent(we)),Pe=JSON.parse(decodeURIComponent(we))}catch(wa){}const{openId:Se}=Pe;s();const je=s(),Re=s(),Ne=s(!1),Fe=s({}),Be=s({}),He=s(!1),Ve=s(!1),Ue=s(0),qe=s(!1),Ge=s({}),Me=s({}),ze=s(!0),Qe=s(!0),We=s(!0),Ye=s(""),Ze=s([]);s({});const Je=s({}),Xe=s({}),Ke=s([]),$e=s(),ea=s(),aa=i({holder:{formData:{},schema:[],trialFactorCodes:[],config:{}},insuredList:[{formData:{},schema:[],trialFactorCodes:[],config:{relationToHolder:{label:""},certNo:{}}}]});Se&&ce({openId:Se},(e=>{Me.value=e}));const ta=s({imgUrl:"",desc:"",title:"",link:window.location.href}),la=le({extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:Pe,templateId:(null==Pe?void 0:Pe.templateId)||"1",iseeBizNo:""}}),na=s({}),ra=d((()=>!!De)),oa=s([]),sa=s(),ia=async()=>{H({productCode:ke,tenantId:Ce}).then((({data:e,code:a})=>{if("10000"===a){Fe.value=e,document.title=e.BASIC_INFO.title||"",Fe.BASIC_INFO=e.BASIC_INFO;const{title:a,desc:l,image:n}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{};t={title:a,desc:l,image:n},ta.value={desc:t.desc||"ä½ å¥½ï¼Œè¿™é‡Œæ˜¯æè¿°",imgUrl:t.image,title:t.title,link:window.location.href},console.log("shareInfo",ta.value)}var t})),await j({productCode:ke,isTenant:!De}).then((({data:e,code:a})=>{var t;"10000"===a&&(qe.value=!0,Be.value=e,Je.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],Ke.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),We.value=!1,V({productCode:ke}).then((({code:e,data:a})=>{var t,l,n,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:o}=a;sa.value=e||[];const{basicInfo:{questionnaireType:s},questions:i,questionnaireName:d}=(null==(t=null==o?void 0:o[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};s&&(oa.value=2===s?[{attachmentName:d,attachmentUri:i,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(l=null==i?void 0:i[0])?void 0:l.content,attachmentType:Y(String(null==(n=null==i?void 0:i[0])?void 0:n.textType),null==(r=null==i?void 0:i[0])?void 0:r.content)}])}}))},da=d((()=>{if(Me.value){const e=[];return Object.keys(Me.value).forEach((a=>{e.push(...Me.value[a])})),e}return[]})),ca=d((()=>da.value.length>0)),ua=s([]),pa=e=>{console.log("currentPlanObj.value",e,Je.value)};c((()=>na.value.planCode),(e=>{Je.value=(Be.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const va=()=>{je.value.handleClickTab()("tab3")},ma=s(""),fa=s(0),ha=async()=>{try{await U(((e={},a={},t={})=>{var l;const n={...t},r={tenantId:Ce,riskList:(null==(l=n.tenantOrderInsuredList[0])?void 0:l.tenantOrderProductList[0].riskVOList)||[],riskPremium:a,productId:e.id};return n.extInfo.iseeBizNo=Ye.value,n.productCode=e.productCode,n.commencementTime=n.insuranceStartDate,n.expiryDate=n.insuranceEndDate,n.tenantOrderHolder={...n.tenantOrderHolder,certType:n.tenantOrderHolder.certType||m.CERT,certNo:(n.tenantOrderHolder.certNo||"").toLocaleUpperCase(),extInfo:{...n.tenantOrderHolder.extInfo}},n.tenantOrderInsuredList=n.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||m.CERT,certNo:(e.certNo||"").toLocaleUpperCase(),planCode:Je.value.planCode,extInfo:{...e.extInfo}}))),n.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:fa.value,productCode:e.productCode,productName:e.productName,planCode:Je.value.planCode,tenantOrderRiskList:Z(r)},n})(Be.value,Ge.value,la.value),(async(e,a)=>{a===S.JUMP_PAGE&&(null==e?void 0:e.orderNo)&&await(async e=>{try{const{code:a,data:t}=await F({orderNo:e,tenantId:Ce});"10000"===a&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await U(t))}catch(wa){}})(null==e?void 0:e.orderNo)}))}catch(wa){}},{fileList:ga,mustReadFileCount:ya,popupFileList:Aa}=re(Je,sa),Ia=e=>{Ue.value=e,Ve.value=!0},Oa=async(e,a,t=!0)=>{var l;const{chargePeriod:n,coveragePeriod:r,paymentFrequency:o,insuranceEndDate:s,insuranceStartDate:i}=na.value;console.log("ssinit===++guaranteeObj.value",na.value),ma.value="ä¿è´¹è¯•ç®—ä¸­...";const d=Q(a).map((e=>({...e,paymentFrequency:o,chargePeriod:n,coveragePeriod:r}))),{tenantOrderHolder:c,tenantOrderInsuredList:u}=la.value,p={tenantId:Ce,productCode:e.productCode,insuranceStartDate:i,insuranceEndDate:s,holder:{personVO:{...c,socialFlag:null==(l=c.extInfo)?void 0:l.hasSocialInsurance,certType:c.certType||m.CERT}},insuredVOList:u.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance,certType:e.certType||m.CERT},productPlanVOList:[{insurerCode:Ee,planCode:Je.value.planCode,riskVOList:d}]})))},{code:v,message:f}=await R(p);if("10000"===v){const{code:e,data:a}=await N(p);if("10000"===e){if(ma.value="",la.value.tenantOrderInsuredList[0].tenantOrderProductList=p.insuredVOList[0].productPlanVOList,fa.value=null==a?void 0:a.premium,la.value.premium=a.premium,la.value.orderAmount=a.premium,la.value.orderRealAmount=a.premium,la.value.insuranceStartDate=p.insuranceStartDate,la.value.insuranceEndDate=p.insuranceEndDate,!t){const e={};a.riskPremiumDetailVOList&&a.riskPremiumDetailVOList.length&&a.riskPremiumDetailVOList.forEach((a=>{e[a.riskCode]={premium:a.premium,amount:a.amount}})),Ge.value=e,Aa.value.length>0?(ze.value=!1,Ia(0)):oa.value.length>0?He.value=!0:await ha()}}else ma.value=""}else ma.value="",w(f)},xa=()=>{const e=[];return Ze.value.filter((e=>e.value===q.INSURE)).forEach((a=>{e.push(...a.productRiskVoList)})),e},ba=async()=>{var e,a;try{He.value=!1,Ve.value=!1,$e.value&&ea.value&&Promise.all([null==(e=$e.value)?void 0:e.validate(),null==(a=ea.value)?void 0:a[0].validate()]).then((async()=>{var e;if(ca.value)await Oa(Be.value,[...ua.value,...xa()],!1);else{const a=null==(e=la.value.tenantOrderHolder)?void 0:e.verificationCode;if(!W(a))return void w({message:"è¯·è¾“å…¥æ­£ç¡®çš„éªŒè¯ç "});const{code:t,data:l}=await te(la.value.tenantOrderHolder.mobile,a);"10000"===t&&await Oa(Be.value,[...ua.value,...xa()],!1)}})).catch((e=>{const a=document.querySelector(".form-title");a&&a.scrollIntoView()}))}catch(t){}},ka=e=>{"allFalse"===e?(He.value=!1,ha()):E.confirm({className:"xinao-custom-dialog",title:"æç¤º",teleport:"#xinaoDialog",message:"è¢«ä¿äººä¸ç¬¦åˆå¥åº·è¦æ±‚ï¼Œå¾ˆæŠ±æ­‰æš‚æ—¶æ— æ³•æŠ•ä¿è¯¥äº§å“",confirmButtonText:"é€‰é”™äº†",cancelButtonText:"ä¸ºå…¶ä»–äººæŠ•ä¿"}).then((()=>{})).catch((()=>{He.value=!1}))},Ca=()=>{Ve.value=!1,ze.value=!0,oa.value.length<1?ha():He.value=!0},_a=()=>{He.value=!1,Ve.value=!1,ze.value=!0};c((()=>la.value.tenantOrderInsuredList[0].relationToHolder),((e,a)=>{e!==a&&Ze.value&&Ze.value.forEach((e=>{e.value=q.UN_INSURE})),Qe.value=!1,u((()=>{const{certType:e,extInfo:a}=la.value.tenantOrderInsuredList[0];a&&!a.hasSocialInsurance&&(la.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=z.HAS),Qe.value=!0}))}),{deep:!0,immediate:!0}),c([()=>aa.holder.formData,()=>aa.insuredList],(([e,a])=>{Object.assign(la.value,de({holder:e,insuredList:a.map((e=>e.formData))}))}),{deep:!0});const La=(e,a)=>e.find((e=>!a[e])),Ta=async()=>{const{trialFactorCodes:e,formData:a}=aa.holder,{trialFactorCodes:t,formData:l}=aa.insuredList[0];return new Promise(((n,r)=>{!La(e,a)&&!La(t,l)&&$e.value&&ea.value?Promise.all([$e.value.validate(e),ea.value[0].validate(t)]).then((()=>{n(!0)})).catch((()=>{r()})):r()}))};return c((()=>[...aa.holder.trialFactorCodes.map((e=>aa.holder.formData[e])),...aa.insuredList.reduce(((e,a,t)=>(e.push(...a.trialFactorCodes.map((e=>aa.insuredList[t].formData[e]))),e)),[]),na.value.paymentFrequency,Ze.value]),((...e)=>{ra.value||Ta().then((()=>{Oa(Be.value,[...ua.value,...xa()])})).catch((()=>{Ta().then((()=>{ma.value="ä¿è´¹è¯•ç®—ä¸­..."}))}))}),{deep:!0}),c((()=>aa.holder.formData),((...e)=>{aa.insuredList.forEach(((e,a)=>{const{formData:t,schema:l}=e||{};"1"===t.relationToHolder&&Object.assign(e.formData,aa.holder.formData)}))}),{deep:!0,immediate:!0}),c((()=>Je.value),(()=>{let{productFactor:e}=Je.value;const{oilPackageProductVOList:a,planCode:t,insureProductRiskVOList:l}=Je.value;ca.value&&e[1]&&(e=e[1].filter((e=>"verificationCode"!==e.code))),na.value.planCode=t,ua.value=l,Xe.value=(l||[]).find((e=>e.mainRiskFlag===p.YES)),console.log("mainRiskInfo.value",Xe.value),Ze.value=(a||[]).map((e=>({...e,value:q.UN_INSURE})));const{holder:n,insured:r,beneficiary:o}=oe(e);aa.holder={...aa.holder,...n},aa.insuredList[0]={...aa.insuredList[0],...null==r?void 0:r[0]}}),{deep:!0,immediate:!0}),c((()=>aa.insuredList.map(((e,a)=>aa.insuredList[a].formData.relationToHolder))),((e,a)=>{console.log("%cğŸ”¥ ä¸æŠ•ä¿äººå…³ç³»å˜åŠ¨äº†","color:#1989fa;background:#5e4;padding:3px 5px;"),aa.insuredList.forEach(((e,a)=>{const{formData:t,schema:l,config:n}=e||{},r="1"===t.relationToHolder,o="3"===t.relationToHolder,s=se(l.find((e=>"certType"===e.name))||{});s&&(n.certNo.label="èº«ä»½è¯å·"+(o?"\n(æˆ·å£ç°¿)":"")),e.schema.forEach((e=>{e.relationToHolder=t.relationToHolder,e.hidden=!e.isSelfInsuredNeed&&r})),r?Object.assign(e.formData,{...aa.insuredList[a].formData,...aa.holder.formData}):Object.assign(e.formData,{...Object.keys(e.formData).reduce(((a,t)=>(s&&"certType"===t||(a[t]={Object:{},Array:[]}[Object.prototype.toString.call(e.formData[t]).slice(8,-1)]||""),a)),{}),relationToHolder:t.relationToHolder})}))}),{immediate:!0,deep:!0}),u((()=>{D(Re,(([{isIntersecting:e}],a)=>{Ne.value=!e}))})),e((()=>{var e;const a=v.get(G);if(a){const{tenantOrderHolder:t,tenantOrderInsuredList:l}=a;if(t&&(la.value.tenantOrderHolder={...t,certType:t.certType||m.CERT}),Array(l)&&l[0]){const a=l[0]||{};if(la.value.activePlanCode=a.planCode,a.tenantOrderProductListtenantOrderProductList&&a.tenantOrderProductList[0]&&a.tenantOrderProductList[0].tenantOrderRiskList){const t=null==(e=a.tenantOrderProductList[0].tenantOrderRiskList)?void 0:e.find((e=>"1"===String(e.riskType)));t&&(la.value.paymentFrequency=(null==t?void 0:t.paymentFrequency)?String(null==t?void 0:t.paymentFrequency):M.SINGLE)}}}})),f((()=>{We.value=!0,ia(),setTimeout((async()=>{Ye.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),h((()=>{v.remove(G)})),(e,a)=>{var t,l,n,r,o,s,i,d,c,u,p,v,m,f,h,w,E,D,S;const j=P;return g(),y(C,null,[A(We)?(g(),y("div",ue,pe)):(g(),y("div",{key:1,"data-skeleton-root":"SHORT","theme-vars":A(xe),class:"page-internet-product-detail"},[I("div",me,[1==(null==(l=null==(t=A(Fe))?void 0:t.BASIC_INFO)?void 0:l.bannerType)&&(null==(r=null==(n=A(Fe))?void 0:n.BASIC_INFO)?void 0:r.banner.length)?(g(),O(J,{key:0,"data-skeleton-type":"img","indicator-color":"#ddd",images:null==(o=A(Fe))?void 0:o.BASIC_INFO.banner},null,8,["images"])):x("",!0),2==(null==(i=null==(s=A(Fe))?void 0:s.BASIC_INFO)?void 0:i.bannerType)&&(null==(c=null==(d=A(Fe))?void 0:d.BASIC_INFO)?void 0:c.video.length)?(g(),O(X,{key:1,"data-skeleton-type":"img",src:null==(u=A(Fe))?void 0:u.BASIC_INFO.video[0]},null,8,["src"])):x("",!0),(null==(m=null==(v=null==(p=A(Fe))?void 0:p.BASIC_INFO)?void 0:v.bannerMove)?void 0:m.length)?(g(),O(J,{key:2,url:null==(w=null==(h=null==(f=A(Fe))?void 0:f.BASIC_INFO)?void 0:h.bannerMove)?void 0:w[0],onClick:va},null,8,["url"])):x("",!0),I("div",{ref_key:"observeRef",ref:Re},null,512)]),(null==(E=A(Fe))?void 0:E.GUARANTEE)?(g(),O(K,{key:0,"show-service-config":"","data-source":A(Fe),"plan-list":A(Ke)},null,8,["data-source","plan-list"])):x("",!0),b($,{ref_key:"detailScrollRef",ref:je,"order-detail":A(la),"data-source":A(Fe)},{form:k((()=>[I("div",fe,[he,b(A(ie),{ref_key:"holderFormRef",ref:$e,title:"æœ¬äººä¿¡æ¯ï¼ˆæŠ•ä¿äººï¼‰",model:A(aa).holder.formData,schema:A(aa).holder.schema,config:A(aa).holder.config,autocomplete:""},null,8,["model","schema","config"]),(g(!0),y(C,null,_(A(aa).insuredList,((e,a)=>(g(),O(A(ie),{ref_for:!0,ref_key:"insuredFormRef",ref:ea,key:a,title:"ä¸ºè°æŠ•ä¿ï¼ˆè¢«ä¿äººï¼‰",model:A(aa).insuredList[a].formData,schema:e.schema,config:e.config,autocomplete:""},null,8,["model","schema","config"])))),128))]),b(A(Ae),{"form-info":A(na),"risk-info":A(Xe),"tenant-product-detail":A(Fe).PREMIUM,"plan-list":A(Ke),"premium-info":{premium:A(fa),premiumLoadingText:A(ma)},onUpdateActivePlan:pa},null,8,["form-info","risk-info","tenant-product-detail","plan-list","premium-info"]),A(Ze).length>0?(g(),O(ae,{key:0,"package-product-list":A(Ze)},null,8,["package-product-list"])):x("",!0)])),_:1},8,["order-detail","data-source"]),b(j,null,{default:k((()=>{var e,a,t;return[(null==(e=A(Fe).SIGNATURE)?void 0:e.inscribedContent)?(g(),O(A(Ie),{key:0,"inscribed-content":null==(t=null==(a=A(Fe))?void 0:a.SIGNATURE)?void 0:t.inscribedContent},null,8,["inscribed-content"])):x("",!0)]})),_:1}),b(j,null,{default:k((()=>{var e;return[(null==(e=A(ga))?void 0:e.length)?(g(),O(A(Oe),{key:0,"attachment-list":A(ga),"pre-text":"è¯·é˜…è¯»",onPreviewFile:a[0]||(a[0]=e=>Ia(e))},null,8,["attachment-list"])):x("",!0)]})),_:1}),A(Ne)?(g(),O(ne,{key:1,"is-share":null==(S=null==(D=A(Fe))?void 0:D.PRODUCT_LIST)?void 0:S.showWXShare,premium:A(fa),"share-info":A(ta),"loading-text":A(ma),"plan-code":A(na).planCode,"payment-frequency":A(na).paymentFrequency,"tenant-product-detail":A(Fe),onHandleClick:ba},{default:k((()=>[L("ç«‹å³æŠ•ä¿")])),_:1},8,["is-share","premium","share-info","loading-text","plan-code","payment-frequency","tenant-product-detail"])):x("",!0)],8,ve)),A(qe)?(g(),O(ee,{key:2,"product-detail":A(Fe)},null,8,["product-detail"])):x("",!0),ge,b(A(ye),{show:A(He),"onUpdate:show":a[1]||(a[1]=e=>T(He)?He.value=e:null),"content-list":A(oa),"active-index":0,onOnConfirmHealth:ka,onOnCloseHealthByMask:_a},null,8,["show","content-list"]),A(Ve)?(g(),O(A(B),{key:3,show:A(Ve),"onUpdate:show":a[2]||(a[2]=e=>T(Ve)?Ve.value=e:null),"content-list":A(ze)?A(ga):A(Aa),"is-only-view":A(ze),"active-index":A(Ue),text:A(ze)?"å…³é—­":"æˆ‘å·²é€é¡µé˜…è¯»å¹¶ç¡®è®¤å‘ŠçŸ¥å†…å®¹","force-read-count":A(ze)?0:A(ya),onSubmit:Ca,onOnCloseFilePreviewByMask:_a},null,8,["show","content-list","is-only-view","active-index","text","force-read-count"])):x("",!0)],64)}}});export{Ae as default};

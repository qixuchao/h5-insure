var pt=Object.defineProperty,ft=Object.defineProperties;var _t=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var vt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Pe=(t,r,n)=>r in t?pt(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,T=(t,r)=>{for(var n in r||(r={}))vt.call(r,n)&&Pe(t,n,r[n]);if(Ae)for(var n of Ae(r))ht.call(r,n)&&Pe(t,n,r[n]);return t},x=(t,r)=>ft(t,_t(r));import{g as W,j as i,n as P,A as e,z as s,J as H,E as I,r as S,af as Dt,p as l,m,F as J,G as ne,k,H as Ft,C as M,a4 as de,a5 as ce,Q as yt,y as ee,L as bt,t as te,Y as gt,M as be,_ as pe,ar as It,h as qe,a9 as Et,O as Ct,l as wt,T as $e}from"./vendor-17026bfd.js";import{_ as z,d as Bt,h as ae,a as Fe,a2 as At,V as ye,S as Pt,C as Ne,$ as $t,G as Se,a1 as Ve}from"./index-b8dc485b.js";import{a as Z}from"./order-b675ac95.js";import{R as he,S as Te,a as Nt,f as se}from"./infoCollection-b0426750.js";import{i as Ke,g as Ye,e as St,p as ke,s as Vt,a as Tt,u as kt,b as xt}from"./trial-90fd957e.js";import{p as je}from"./product-ae28a648.js";import{n as xe,i as Oe,m as Ot,_ as Ge,g as Ut,c as Lt,a as Ht,b as Ue,t as Mt,d as Rt}from"./index-591aa17d.js";import{t as Ie}from"./theme-ea709837.js";import{P as qt}from"./index-4324ca35.js";import{A as Kt}from"./bankCard-b0679059.js";import"./trial-a4d39348.js";const Yt=t=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(t),ge=t=>/^[\u4e00-\u9fa5·•]+$/.test(t);var jt="/static/assets/upgrade_bg.4a771537.png",Gt="/static/assets/header-logo.fcc5844b.png",Wt="/static/assets/loading.bb5f54fd.gif",zt="/static/assets/check-detail.9716a221.png";const Jt=["src"],Qt=["src"],Xt=W({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""}},setup(t){const r=t;return(n,d)=>r.isCheck?(i(),P("img",{key:0,src:e(zt),class:"banner"},null,8,Jt)):(i(),P("img",{key:1,src:r.url,class:"banner"},null,8,Qt))}});var Zt=z(Xt,[["__scopeId","data-v-584aabfc"]]);const eo={class:"product-desc"},to={class:"title"},oo={class:"desc"},ao=W({props:{productName:{type:String,default:""},productDesc:{type:String,default:""}},setup(t){return(r,n)=>(i(),P("div",eo,[s("div",to,H(t.productName),1),s("div",oo,H(t.productDesc),1)]))}});var so=z(ao,[["__scopeId","data-v-2e75305e"]]);const no={class:"guarantee-list"},uo={class:"basic"},lo={class:"guarantee-detail"},ro={class:"title"},io={class:"content"},co=W({props:{guaranteeList:{type:Array,default:()=>[]}},setup(t){const r=t,n=I(!1),d=()=>{n.value=!0};return(f,o)=>{const F=S("ProCell"),h=S("ProCard"),y=S("ProPopup"),D=Dt("dompurify-html");return i(),P(J,null,[s("div",no,[l(h,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!0,"show-icon":!0,onLinkClick:d},{default:m(()=>[s("div",uo,[(i(!0),P(J,null,ne(r.guaranteeList,(w,B)=>(i(),k(F,{key:B,class:"guarantee-item",title:w.title,content:w.desc,border:!1},null,8,["title","content"]))),128))])]),_:1})]),l(y,{show:n.value,"onUpdate:show":o[0]||(o[0]=w=>n.value=w),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:m(()=>[s("div",lo,[(i(!0),P(J,null,ne(r.guaranteeList,(w,B)=>(i(),P("div",{key:B,class:"guarantee-item"},[s("div",ro,H(w.title),1),Ft(s("div",io,null,512),[[D,w.content]])]))),128))])]),_:1},8,["show"])],64)}}});var mo=z(co,[["__scopeId","data-v-551c23f6"]]);const po=t=>(de("data-v-1d81ec06"),t=t(),ce(),t),fo={class:"question"},_o=po(()=>s("div",{class:"icon"},H("?"),-1)),vo={class:"title"},ho=W({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup(t){return(r,n)=>{const d=S("van-collapse-item");return i(),k(d,{name:t.name,class:"com-question-item"},{title:m(()=>[s("div",fo,[_o,s("div",vo,H(t.question),1)])]),default:m(()=>[M(" "+H(t.answer),1)]),_:1},8,["name"])}}});var Do=z(ho,[["__scopeId","data-v-1d81ec06"]]);const Fo={class:"com-question"},yo=W({props:{list:{type:Array,default:()=>[]}},setup(t){const r=t,[n,d]=yt(!1),f=I([]),o=()=>{d()},F=ee(()=>r.list.length<=4||n.value?r.list:r.list.slice(0,4));return(h,y)=>{const D=S("van-collapse");return i(),P("div",Fo,[l(D,{modelValue:f.value,"onUpdate:modelValue":y[0]||(y[0]=w=>f.value=w)},{default:m(()=>[(i(!0),P(J,null,ne(e(F),(w,B)=>(i(),k(Do,{key:B,name:B.toString(),question:w.title,answer:w.desc},null,8,["name","question","answer"]))),128))]),_:1},8,["modelValue"]),t.list.length>4?(i(),P("div",{key:0,class:"show-more",onClick:o},[M(H(e(n)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),l(Bt,{name:"down",class:bt(["icon",{showMore:e(n)}])},null,8,["class"])])):te("",!0)])}}});var bo=z(yo,[["__scopeId","data-v-5359d801"]]);const go=t=>(de("data-v-6e42cf30"),t=t(),ce(),t),Io={class:"spec"},Eo=["src"],Co=go(()=>s("div",{class:"sub-title"},"\u4EA7\u54C1\u8D44\u6599\u6587\u4EF6\u8BE6\u60C5\u53EF\u624B\u52A8\u653E\u5927\uFF0C\u4EE5\u4FBF\u60A8\u66F4\u6E05\u6670\u67E5\u9605\u5185\u5BB9\u3002",-1)),wo={class:"tab-1-content"},Bo=M(" \u8BF7\u67E5\u770B "),Ao=M(" > "),Po={key:0,class:"dun-hao"},$o=W({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(t){const r=t,n=I([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"},{title:"\u5E38\u89C1\u95EE\u9898",slotName:"tab4"}]);return(d,f)=>{const o=S("ProPDFviewer");return i(),k(At,{class:"tabs",list:n.value,sticky:"",scrollspy:""},{tab1:m(()=>[gt(d.$slots,"form",{},void 0,!0)]),tab2:m(()=>{var F,h;return[s("div",Io,[(i(!0),P(J,null,ne(((h=(F=r.detail)==null?void 0:F.tenantProductInsureVO)==null?void 0:h.spec)||[],(y,D)=>(i(),P("img",{key:D,src:y,class:"detail-img"},null,8,Eo))),128)),l(ae)]),l(Fe,{title:"\u4EA7\u54C1\u8D44\u6599"},{subTitle:m(()=>[Co]),default:m(()=>{var y,D;return[s("div",wo,[Bo,(i(!0),P(J,null,ne(((D=(y=t.detail)==null?void 0:y.tenantProductInsureVO)==null?void 0:D.attachmentVOList)||[],(w,B)=>(i(),k(o,{key:B,class:"file-name",title:`\u300A${w.attachmentName}\u300B`,content:w.attachmentUri},{default:m(()=>{var V,$;return[Ao,B!==((($=(V=t.detail)==null?void 0:V.tenantProductInsureVO)==null?void 0:$.attachmentVOList)||[]).length-1?(i(),P("span",Po,"\u3001")):te("",!0)]}),_:2},1032,["title","content"]))),128))])]}),_:1})]}),tab3:m(()=>[l(Fe,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:m(()=>{var F,h;return[l(qt,{list:(h=(F=r.detail)==null?void 0:F.tenantProductInsureVO)==null?void 0:h.settlementProcessList},null,8,["list"])]}),_:1})]),tab4:m(()=>[l(Fe,{title:"\u5E38\u89C1\u95EE\u9898"},{default:m(()=>{var F,h;return[l(bo,{list:(h=(F=r.detail)==null?void 0:F.tenantProductInsureVO)==null?void 0:h.questionList},null,8,["list"])]}),_:1})]),_:3},8,["list"])}}});var No=z($o,[["__scopeId","data-v-6e42cf30"]]);const De=t=>(de("data-v-516e6792"),t=t(),ce(),t),So={class:"holder container"},Vo=De(()=>s("div",{class:"title"},"\u6295\u4FDD\u4EBA\u4FE1\u606F",-1)),To={class:"insured-relation container"},ko=De(()=>s("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),xo={class:"insured container"},Oo=De(()=>s("div",{class:"title"},"\u88AB\u4FDD\u4EBA\u4FE1\u606F",-1)),Uo={class:"payment container"},Lo={class:"renewal-wrapper"},Ho=De(()=>s("div",{class:"desc"},[s("p",null,"\u4FDD\u5355\u5230\u671F\u81EA\u52A8\u91CD\u65B0\u6295\u4FDD\uFF0C\u4EAB\u53D7\u4FDD\u969C\u4E0D\u95F4\u65AD"),s("p",null,"\u81EA\u4ECE\u91CD\u65B0\u6295\u4FDD\u5F00\u542F\u540E\uFF0C\u4E2D\u9014\u53EF\u968F\u65F6\u53D6\u6D88")],-1)),Mo=W({props:{disable:{type:Boolean,default:!1},formAuth:{type:Object,default:()=>{}},formInfo:{type:Object,default:()=>{}},premium:{type:Number,default:0},productDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate"],setup(t,{expose:r,emit:n}){const d=t,f=I({}),o=be({formInfo:d.formInfo}),F=I(!1),h=I(0),y=I(!1),D=p=>ge(p)?!0:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u59D3\u540D",w=ee(()=>{var p,a;return(a=(p=d.productDetail)==null?void 0:p.tenantProductInsureVO)==null?void 0:a.attachmentVOList.filter(g=>g.attachmentName==="\u8D39\u7387\u8868")}),B=ee(()=>{var p,a;return((a=(p=d.productDetail)==null?void 0:p.tenantProductInsureVO)==null?void 0:a.attachmentVOList.filter(g=>!["\u5065\u5EB7\u544A\u77E5","\u8D39\u7387\u8868"].includes(g.attachmentName)))||[]}),V=()=>(y.value=!0,y),$=p=>{h.value=p,F.value=!0},N=()=>new Promise((p,a)=>{f==null||f.value.validate().then(()=>{p("")},()=>{a()})}),C=()=>{const{relationToHolder:p}=o.formInfo.insured;p===he.SELF?(o.formInfo.insured={certNo:o.formInfo.holder.certNo,name:o.formInfo.holder.name,socialFlag:o.formInfo.holder.socialFlag,relationToHolder:p},n("onReset")):(o.formInfo.insured={certNo:"",name:"",socialFlag:se.HAS,relationToHolder:p},n("onUpdate"))};return pe(()=>o.formInfo.holder,()=>{o.formInfo.insured.relationToHolder===he.SELF&&Object.assign(o.formInfo.insured,o.formInfo.holder)},{deep:!0,immediate:!0}),r({validateForm:N,previewFile:$,isAgreeFile:y,onSubmit:V}),(p,a)=>{const g=S("ProField"),oe=S("ProRadioButton"),ue=S("van-switch"),me=S("ProForm"),fe=S("van-config-provider");return i(),k(fe,{"theme-vars":e(Ie)},{default:m(()=>[l(me,{ref_key:"formRef",ref:f},{default:m(()=>{var le,re,ie,O,G;return[l(ae),s("div",So,[Vo,((le=d.formAuth)==null?void 0:le.holderNameDisable)?(i(),k(g,{key:0,label:"\u59D3\u540D",class:"pro-field","is-view":!0},{input:m(()=>[M(H(e(xe)(e(o).formInfo.holder.name)),1)]),_:1})):(i(),k(g,{key:1,modelValue:e(o).formInfo.holder.name,"onUpdate:modelValue":a[0]||(a[0]=u=>e(o).formInfo.holder.name=u),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",maxlength:"10",rules:[{validator:D}]},null,8,["modelValue","rules"])),((re=d.formAuth)==null?void 0:re.holderCertDisable)?(i(),k(g,{key:2,label:"\u8BC1\u4EF6\u53F7\u7801",class:"pro-field","is-view":!0},{input:m(()=>[M(H(e(Oe)(e(o).formInfo.holder.certNo)),1)]),_:1})):(i(),k(g,{key:3,modelValue:e(o).formInfo.holder.certNo,"onUpdate:modelValue":a[1]||(a[1]=u=>e(o).formInfo.holder.certNo=u),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[e(ye).ID_CARD]},null,8,["modelValue","validate-type"])),((ie=d.formAuth)==null?void 0:ie.holderMobileDisable)?(i(),k(g,{key:4,label:"\u624B\u673A\u53F7",class:"pro-field","is-view":!0},{input:m(()=>[M(H(e(Ot)(e(o).formInfo.holder.mobile)),1)]),_:1})):(i(),k(g,{key:5,modelValue:e(o).formInfo.holder.mobile,"onUpdate:modelValue":a[2]||(a[2]=u=>e(o).formInfo.holder.mobile=u),label:"\u624B\u673A\u53F7",name:"mobile",required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",maxlength:"11","validate-type":[e(ye).PHONE]},null,8,["modelValue","validate-type"])),l(g,{modelValue:e(o).formInfo.holder.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=u=>e(o).formInfo.holder.socialFlag=u),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:m(()=>{var u;return[l(oe,{modelValue:e(o).formInfo.holder.socialFlag,"onUpdate:modelValue":a[3]||(a[3]=E=>e(o).formInfo.holder.socialFlag=E),disabled:(u=d.formAuth)==null?void 0:u.holderSocialDisable,options:e(Te)},null,8,["modelValue","disabled","options"])]}),_:1},8,["modelValue"])]),l(ae),s("div",To,[ko,l(g,{modelValue:e(o).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[6]||(a[6]=u=>e(o).formInfo.insured.relationToHolder=u),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9",onClick:C},{input:m(()=>{var u;return[l(oe,{modelValue:e(o).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[5]||(a[5]=E=>e(o).formInfo.insured.relationToHolder=E),disabled:(u=d.formAuth)==null?void 0:u.relationToHolderDisable,options:e(Nt)},null,8,["modelValue","disabled","options"])]}),_:1},8,["modelValue"])]),l(ae),s("div",xo,[Oo,((O=d.formAuth)==null?void 0:O.insuredNameDisable)?(i(),k(g,{key:0,label:"\u59D3\u540D",class:"pro-field","is-view":!0},{input:m(()=>[M(H(e(xe)(e(o).formInfo.insured.name)),1)]),_:1})):(i(),k(g,{key:1,modelValue:e(o).formInfo.insured.name,"onUpdate:modelValue":a[7]||(a[7]=u=>e(o).formInfo.insured.name=u),label:"\u59D3\u540D",name:"name",required:"",maxlength:"10",rules:[{validator:D}]},null,8,["modelValue","rules"])),((G=d.formAuth)==null?void 0:G.insuredCertDisable)?(i(),k(g,{key:2,label:"\u8BC1\u4EF6\u53F7\u7801",class:"pro-field","is-view":!0},{input:m(()=>[M(H(e(Oe)(e(o).formInfo.insured.certNo)),1)]),_:1})):(i(),k(g,{key:3,modelValue:e(o).formInfo.insured.certNo,"onUpdate:modelValue":a[8]||(a[8]=u=>e(o).formInfo.insured.certNo=u),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[e(ye).ID_CARD]},null,8,["modelValue","validate-type"])),l(g,{modelValue:e(o).formInfo.insured.socialFlag,"onUpdate:modelValue":a[10]||(a[10]=u=>e(o).formInfo.insured.socialFlag=u),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:m(()=>{var u;return[l(oe,{modelValue:e(o).formInfo.insured.socialFlag,"onUpdate:modelValue":a[9]||(a[9]=E=>e(o).formInfo.insured.socialFlag=E),disabled:(u=d.formAuth)==null?void 0:u.insuredSocialDisable,options:e(Te)},null,8,["modelValue","disabled","options"])]}),_:1},8,["modelValue"])]),l(ae),s("div",Uo,[l(g,{modelValue:e(o).formInfo.paymentMethod,"onUpdate:modelValue":a[12]||(a[12]=u=>e(o).formInfo.paymentMethod=u),label:"\u652F\u4ED8\u65B9\u5F0F",name:"paymentMethod",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:m(()=>{var u;return[l(oe,{modelValue:e(o).formInfo.paymentMethod,"onUpdate:modelValue":a[11]||(a[11]=E=>e(o).formInfo.paymentMethod=E),disabled:(u=d.formAuth)==null?void 0:u.paymentDisable,options:e(Kt)},null,8,["modelValue","disabled","options"])]}),_:1},8,["modelValue"]),l(ae),s("div",Lo,[l(g,{label:"\u5F00\u901A\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",class:"pro-field",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9",border:!1},{input:m(()=>{var u;return[l(ue,{modelValue:e(o).formInfo.renewalDK,"onUpdate:modelValue":a[13]||(a[13]=E=>e(o).formInfo.renewalDK=E),disabled:(u=d.formAuth)==null?void 0:u.renewalDKDisable},null,8,["modelValue","disabled"])]}),_:1}),Ho])]),l(ae),l(Ge,{show:F.value,"onUpdate:show":a[14]||(a[14]=u=>F.value=u),"content-list":e(B).concat(e(w)),"active-index":h.value,text:"\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u544A\u77E5\u5185\u5BB9",onSubmit:V},null,8,["show","content-list","active-index"])]}),_:1},512)]),_:1},8,["theme-vars"])}}});var Ro=z(Mo,[["__scopeId","data-v-516e6792"]]);const qo=t=>(de("data-v-812ee74a"),t=t(),ce(),t),Ko={key:0,class:"page-waiting"},Yo=["src"],jo=qo(()=>s("div",{class:"tips"},[s("p",null,"\u652F\u4ED8\u6210\u529F\uFF0C\u627F\u4FDD\u4E2D...")],-1)),Go=W({props:{isShow:{type:Boolean,default:()=>{}}},setup(t){const r=t;return pe(()=>r.isShow,n=>{n?document.body.style.overflow="hidden":document.body.style.overflow="inherit"}),(n,d)=>r.isShow?(i(),P("div",Ko,[s("img",{class:"loading",src:e(Wt)},null,8,Yo),jo])):te("",!0)}});var Wo=z(Go,[["__scopeId","data-v-812ee74a"]]);const We=t=>(de("data-v-2f424508"),t=t(),ce(),t),zo={key:0,class:"pro-modal"},Jo=We(()=>s("div",{class:"pro-overlay"},null,-1)),Qo={class:"pro-modal-wrapper"},Xo=["src"],Zo={class:"pro-modal-body"},ea={class:"pro-modal-content"},ta=We(()=>s("p",{class:"tips"},"\u5347\u7EA7\u540E\u7684\u4FDD\u969C\u5C06\u4E8E\u7B2C\u4E8C\u671F\u4FDD\u8D39\u6263\u8D39/\u7F34\u8D39\u6210\u529F\u540E\u751F\u6548",-1)),oa={class:"pro-modal-content"},aa={class:"product-attachment-list"},sa=M(" \u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),na={key:0,class:"dun-hao"},ua={class:"pro-modal-close"},la=["src"],ra=W({props:{orderNo:{type:String,default:""},tenantId:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(t,{emit:r}){const n=t,d=I(),f=I(),o=I(),F=I(),h=I([]),y="BWYL2022",D=()=>{r("on-close")},w=()=>{r("on-confirm")},B=async()=>{try{const $=Ht({tenantId:n.tenantId,premium:F.value,orderDetail:o.value,productDetail:d.value,insureDetail:f.value,successJumpUrl:"",iseeBizNo:""}),N=await St($),{code:C,data:p}=N;C==="10000"&&(F.value=p.installmentPremium)}catch($){console.log($)}},V=()=>{const $=je({productCode:y,withInsureInfo:!0,tenantId:n.tenantId}),N=Ke({productCode:y}),C=Ye({orderNo:n.orderNo,tenantId:n.tenantId});Promise.all([$,N,C]).then(([p,a,g])=>{p.code==="10000"&&(d.value=p.data,h.value=p.data.tenantProductInsureVO.attachmentVOList),a.code==="10000"&&(f.value=a.data),g.code==="10000"&&(o.value=g.data),B()})};return pe(()=>n.isShow,$=>{$?(document.body.style.overflow="hidden",V()):document.body.style.overflow="inherit"}),($,N)=>{const C=S("ProPDFviewer");return n.isShow?(i(),P("div",zo,[Jo,s("div",Qo,[s("img",{class:"cover",src:e(jt)},null,8,Xo),s("div",Zo,[s("div",ea,[s("p",null,"\u6BCF\u6708\u4FDD\u8D39\u4EC5\u9700"+H(e(Ut)(F.value||0))+"\u5143\uFF0C\u65E0\u9700\u91CD\u590D\u6295\u4FDD",1),ta]),s("div",{class:"pro-modal-btn",onClick:w},"\u4E00\u952E\u5347\u7EA7"),s("div",oa,[s("div",aa,[sa,(i(!0),P(J,null,ne(h.value,(p,a)=>(i(),k(C,{key:a,class:"file-name",title:`\u300A${p.attachmentName}\u300B`,content:p.attachmentUri,type:"pdf"},{default:m(()=>[a!==(h.value||[]).length-1?(i(),P("span",na,"\u3001")):te("",!0)]),_:2},1032,["title","content"]))),128))])])]),s("div",ua,[s("img",{src:e(Lt),onClick:D},null,8,la)])])])):te("",!0)}}});var ia=z(ra,[["__scopeId","data-v-2f424508"]]);const da=t=>(de("data-v-47cc5215"),t=t(),ce(),t),ca={class:"header"},ma=["src"],pa={class:"content"},fa=da(()=>s("h4",null,"\u6E29\u99A8\u63D0\u793A\uFF0C\u60A8\u5DF2\u8FDB\u5165\u6295\u4FDD\u6D41\u7A0B\uFF1A",-1)),_a=M(" \u8BF7\u4ED4\u7EC6\u9605\u8BFB\u514D\u8D23\u6761\u6B3E\u3001\u6295\u4FDD\u987B\u77E5\u7B49\u4FE1\u606F\uFF0C\u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),va=["onClick"],ha=M(" \uFF0C\u4E3A\u7EF4\u62A4\u60A8\u7684\u5408\u6CD5\u6743\u76CA\uFF0C\u60A8\u7684\u64CD\u4F5C\u8F68\u8FF9\u5C06\u88AB\u8BB0\u5F55\u3002 "),Da={class:"footer"},Fa=M(" \u597D\u7684 "),ya={key:0},ba=W({props:{productDetail:{type:Object,default:()=>{}}},setup(t){const r=t,n="PRENOTICE",d=new Pt({source:"sessionStorage"}),f=I(!1),o=I(!1),F=It({time:4e3,onFinish:()=>{d.set(`${n}-isShow`,"1"),f.value=!1}}),h=I(),y=ee(()=>{var B,V;return(V=(B=r.productDetail)==null?void 0:B.tenantProductInsureVO)==null?void 0:V.attachmentVOList.filter($=>$.attachmentName==="\u4E2A\u4EBA\u4FE1\u606F\u4FDD\u62A4\u653F\u7B56")}),D=ee(()=>F.current.value.seconds),w=B=>{o.value=!o.value,h.value=B};return qe(()=>{d.get(`${n}-isShow`)||(f.value=!0,F.start())}),(B,V)=>{const $=S("VanButton"),N=S("ProPopup"),C=S("ProFilePreview");return i(),P(J,null,[l(N,{class:"pre-notice-wrap",show:f.value,closeable:!1,height:45},{default:m(()=>[s("div",ca,[s("img",{src:e(Gt)},null,8,ma)]),s("div",pa,[fa,s("p",null,[_a,(i(!0),P(J,null,ne(e(y),(p,a)=>(i(),P("span",{key:a,class:"file-name",onClick:g=>w(p.attachmentUri)}," \u300A"+H(p.attachmentName)+"\u300B ",9,va))),128)),ha])]),s("div",Da,[l($,{type:"primary",block:"",round:""},{default:m(()=>[Fa,e(D)?(i(),P("span",ya,H(e(D))+"s",1)):te("",!0)]),_:1})])]),_:1},8,["show"]),l(N,{show:o.value,"onUpdate:show":V[0]||(V[0]=p=>o.value=p),class:"pre-notice-wrap","close-icon":"close",position:"bottom",style:{height:"600px",paddingTop:"40px"}},{default:m(()=>[l(C,{content:h.value,type:"pdf"},null,8,["content"])]),_:1},8,["show"])],64)}}});var ga=z(ba,[["__scopeId","data-v-47cc5215"]]);const Ia={class:"list"},Ea={class:"item"},Ca={class:"footer"},wa=M("\u90E8\u5206\u4E3A\u662F"),Ba=M("\u5168\u90E8\u4E3A\u5426"),Aa=W({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth"],setup(t,{emit:r}){const n=t,d=I(n.show),f=I(n.activeIndex),o=ee(()=>{var h;return(h=n.contentList[f.value])==null?void 0:h.attachmentUri}),F=h=>{r("update:show",!1),r("onConfirmHealth",h)};return pe(()=>n,()=>{d.value=n.show,f.value=n.activeIndex},{deep:!0,immediate:!0}),(h,y)=>{const D=S("ProTab"),w=S("ProFilePreview"),B=S("VanButton"),V=S("van-config-provider"),$=S("ProPopup");return i(),k($,{show:d.value,"onUpdate:show":y[3]||(y[3]=N=>d.value=N),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:y[4]||(y[4]=N=>r("update:show",!1))},{default:m(()=>[l(V,{"theme-vars":e(Ie)},{default:m(()=>[d.value?(i(),k(D,{key:0,active:f.value,"onUpdate:active":y[0]||(y[0]=N=>f.value=N),list:t.contentList.map((N,C)=>({title:N.attachmentName,slotName:`guarantee-${C}`})),class:"tab"},null,8,["active","list"])):te("",!0),s("div",Ia,[s("div",Ea,[(i(),k(w,{key:e(o),content:e(o),type:"pdf"},null,8,["content"]))])]),s("div",Ca,[l(B,{type:"primary",block:"",round:"",onClick:y[1]||(y[1]=N=>F("N"))},{default:m(()=>[wa]),_:1}),l(B,{type:"primary",plain:"",block:"",round:"",onClick:y[2]||(y[2]=N=>F("allFalse"))},{default:m(()=>[Ba]),_:1})])]),_:1},8,["theme-vars"])]),_:1},8,["show"])}}}),Q={holderNameDisable:!0,holderCertDisable:!0,holderMobileDisable:!0,holderSocialDisable:!0,relationToHolderDisable:!0,insuredNameDisable:!0,insuredCertDisable:!0,insuredSocialDisable:!0,paymentDisable:!0,renewalDKDisable:!0},Le=x(T({},Q),{holderSocialDisable:!1,relationToHolderDisable:!1,paymentDisable:!1,renewalDKDisable:!1}),_e=x(T({},Q),{holderNameDisable:!1,holderCertDisable:!1,holderSocialDisable:!1,relationToHolderDisable:!1,insuredNameDisable:!1,insuredCertDisable:!1,insuredSocialDisable:!1,paymentDisable:!1,renewalDKDisable:!1}),He=T({},Q),Me=x(T({},Q),{holderSocialDisable:!1,relationToHolderDisable:!1,paymentDisable:!1,renewalDKDisable:!1});x(T({},Q),{paymentDisable:!1,renewalDKDisable:!1});const ve=x(T({},Q),{holderNameDisable:!1,holderCertDisable:!1,holderMobileDisable:!1,holderSocialDisable:!1,relationToHolderDisable:!1,insuredNameDisable:!1,insuredCertDisable:!1,insuredSocialDisable:!1,paymentDisable:!1,renewalDKDisable:!1}),Re=x(T({},Q),{relationToHolderDisable:!1,insuredNameDisable:!1,insuredCertDisable:!1,insuredSocialDisable:!1,paymentDisable:!1,renewalDKDisable:!1});const Pa={class:"page-internet-product-detail"},$a={class:"info"},Na={class:"footer-button"},Sa={class:"price"},Va=M(" \u603B\u4FDD\u8D39"),Ta=W({setup(t){const r=Et(),n=Ct(),{productCode:d="BWYL2021",tenantId:f,orderNo:o,phoneNo:F,agentCode:h="",saleChannelId:y,paymentMethod:D,certNo:w,name:B,pageCode:V,from:$}=n.query,N=I(),C=I(),p=I(),a=I(),g=V==="payBack",oe=I(!1),ue=I(!1),me=I(!1),fe=I(0),le=I(!1),re=I(!1);let ie="";const O=be({holder:{certNo:w,certType:Ne.CERT,mobile:F,name:B,socialFlag:se.HAS},insured:{certNo:w,certType:Ne.CERT,name:B,socialFlag:se.HAS,relationToHolder:he.SELF},paymentMethod:D,renewalDK:"Y"}),G=I(Q),u=I(Q),E=be({showInsure:!g,canInsure:!1,canUpgrade:!1}),ze=ee(()=>{var _,v;return((v=(_=C.value)==null?void 0:_.tenantProductInsureVO)==null?void 0:v.attachmentVOList.filter(c=>c.attachmentName==="\u5065\u5EB7\u544A\u77E5"))||[]}),Je=ee(()=>{var _,v;return((v=(_=C.value)==null?void 0:_.tenantProductInsureVO)==null?void 0:v.attachmentVOList.filter(c=>c.attachmentName!=="\u5065\u5EB7\u544A\u77E5"))||[]}),Qe=()=>{const{holder:{certNo:_,mobile:v,name:c,socialFlag:A},insured:{certNo:b,name:K,socialFlag:Y,relationToHolder:L},paymentMethod:R}=O,q=Se(_)&&Yt(v)&&ge(c)&&!!A,U=Se(b)&&ge(K)&&!!Y&&!!L;return!!(q&&U&&!!R)},Ee=()=>{r.push({path:"/internet/guaranteeUpgrade",query:x(T({},n.query),{tenantId:f,productCode:"BWYL2022",orderNo:o,agentCode:h})})},Xe=()=>{re.value=!1},Ze=()=>{u.value=G.value},et=()=>{u.value=x(T({},u.value),{relationToHolderDisable:!1,insuredNameDisable:!1,insuredCertDisable:!1,insuredSocialDisable:!1})},tt=async _=>{$e.loading({message:"\u6838\u4FDD\u4E2D...",forbidClick:!0});try{const v=await kt(_),{code:c}=v;if(c==="10000"){$e.loading({message:"\u6838\u4FDD\u4E2D...",forbidClick:!0});const A=await xt({orderNo:_.orderNo,tenantId:f}),{data:b}=A;c==="10000"&&(window.location.href=b)}E.canInsure=!0}catch{E.canInsure=!0}},ot=_=>`${Ve}/internet/productDetail?tenantId=${f}&productCode=${d}&orderNo=${_}&agentCode=${h}&pageCode=payBack&from=${$||"normal"}`,at=_=>`${Ve}/internet/payFail?tenantId=${f}&orderNo=${_}&agentCode=${h}&pageCode=payBack&from=${$||"normal"}`,st=async _=>{const v=Rt({tenantId:f,saleUserId:h,saleChannelId:y,detail:C.value,insureDetail:p.value,paymentMethod:O.paymentMethod,renewalDK:O.renewalDK,iseeBizNo:ie,successJumpUrl:"",premium:a.value,holder:O.holder,insured:O.insured,tenantOrderRiskList:_,orderStatus:"",orderTopStatus:""});try{const c=await Vt(v),{code:A,data:b}=c;A==="10000"&&tt(x(T({},v),{orderNo:b.data,extInfo:{extraInfo:{renewalDK:O.renewalDK,paymentMethod:O.paymentMethod,successJumpUrl:ot(b.data),failUrl:at(b.data)},iseeBizNo:ie}}))}catch{E.canInsure=!0}},nt=async()=>{const{calcData:_,riskVOList:v}=Ue({holder:O.holder,insured:O.insured,tenantId:f,productDetail:C.value,insureDetail:p.value}),c=await ke(_),{code:A,data:b}=c;return A==="10000"?(a.value=b.premium,{condition:v,data:b}):{}},ut=_=>{fe.value=_,me.value=!0},lt=()=>new Promise((_,v)=>{var c,A;(A=(c=N.value)==null?void 0:c.validateForm)==null||A.call(c).then(async()=>{var U;if(!(((U=N.value)==null?void 0:U.isAgreeFile)||oe.value)){ue.value=!0;return}const{calcData:K,riskVOList:Y}=Ue({holder:O.holder,insured:O.insured,tenantId:f,productDetail:C.value,insureDetail:p.value}),L=await ke(K),{code:R,data:q}=L;R==="10000"?(a.value=q.premium,_({condition:Y,data:q})):v(new Error)}).catch(()=>{E.canInsure=!0})}),Ce=async()=>{var _;if(g){Ee();return}E.canInsure=!1;try{const{condition:v,data:c}=await lt(),A={},b=(Y=[])=>{(Y||[]).forEach(L=>{var R;A[L.riskCode]=L,((R=L.riskPremiumDetailVOList)==null?void 0:R.length)&&b(L.riskPremiumDetailVOList)})};b(c.riskPremiumDetailVOList);const K=Mt({tenantId:f,riskList:v,riskPremium:A,productId:(_=C.value)==null?void 0:_.id});st(K)}catch{E.canInsure=!0}},rt=_=>{_==="allFalse"&&(ue.value=!1,ut(0)),E.canInsure=!0},it=()=>{oe.value=!0,Ce()};pe(()=>O,wt.exports.debounce(()=>{C.value&&p.value&&V!=="payBack"&&Qe()&&nt()},500),{deep:!0,immediate:!0});const we=async()=>{var A,b,K,Y,L,R,q,U;const _=await Ye({orderNo:o,tenantId:f}),{code:v,data:c}=_;if(v==="10000"){const{tenantOrderHolder:j,tenantOrderInsuredList:X,extInfo:Be}=c;if(!g){Object.assign(O,{holder:{certNo:j.certNo,certType:j.certType,mobile:j.mobile,name:j.name,socialFlag:se.HAS},insured:{certNo:j.certNo,certType:j.certType,name:j.name,socialFlag:se.HAS,relationToHolder:he.SELF},paymentMethod:D,renewalDK:"Y"}),E.canInsure=!0,u.value=Me,G.value=Me;return}Object.assign(O,{holder:{certNo:j.certNo,certType:j.certType,mobile:j.mobile,name:j.name,socialFlag:se.HAS},insured:{certNo:X==null?void 0:X[0].certNo,certType:(A=X[0])==null?void 0:A.certType,name:(b=X[0])==null?void 0:b.name,socialFlag:(Y=(K=X[0])==null?void 0:K.extInfo)==null?void 0:Y.hasSocialInsurance,relationToHolder:(L=X[0])==null?void 0:L.relationToHolder},paymentMethod:Be.extraInfo.paymentMethod,renewalDK:Be.extraInfo.renewalDK||"N"}),a.value=(U=(q=(R=X[0])==null?void 0:R.tenantOrderProductList)==null?void 0:q[0])==null?void 0:U.premium,(c.orderStatus===Z.ACCEPT_POLICY||c.orderStatus===Z.PAYMENT_SUCCESS)&&(E.canUpgrade=!0,le.value=!1,re.value=!0),c.orderStatus===Z.PAYING&&(le.value=!0,setTimeout(()=>{we()},3*1e3))}},dt=async()=>{var A,b,K,Y,L,R;console.log("\u77ED\u4FE1\u8FDB\u5165\uFF0C\u5E26\u4E86orderNo, mobile");const _=await Tt({holderPhone:F,orderStatus:[Z.PAYING.toUpperCase(),Z.TIMEOUT.toUpperCase(),"ACCEPT_POLICY"],productCode:d,tenantId:f}),{code:v,data:c}=_;if(c.orderStatus===Z.ACCEPT_POLICY&&(console.log("\u5DF2\u627F\u4FDD\uFF0C\u88AB\u4FDD\u4EBA\u4FE1\u606F\u4E0D\u80FD\u4FEE\u6539"),u.value=x(T({},Re),{paymentDisable:!!D}),G.value=x(T({},Re),{paymentDisable:!!D})),(c.orderStatus===Z.PAYING||c.orderStatus===Z.TIMEOUT)&&(console.log("\u652F\u4ED8\u4E2D\uFF0C\u8D85\u65F6\u53EF\u4EE5\u4FEE\u6539\u6295\u4FDD\u4EBA\u4FE1\u606F"),u.value=x(T({},ve),{paymentDisable:!!D}),G.value=x(T({},ve),{paymentDisable:!!D})),v==="10000"&&((A=c==null?void 0:c.tenantOrderHolder)==null?void 0:A.certNo)){E.canInsure=!0;const{tenantOrderHolder:q,tenantOrderInsuredList:U,extInfo:j}=c;Object.assign(O,{holder:{certNo:q.certNo,certType:q.certType,mobile:q.mobile,name:q.name,socialFlag:se.HAS},insured:{certNo:U==null?void 0:U[0].certNo,certType:(b=U[0])==null?void 0:b.certType,name:(K=U[0])==null?void 0:K.name,socialFlag:(L=(Y=U[0])==null?void 0:Y.extInfo)==null?void 0:L.hasSocialInsurance,relationToHolder:(R=U[0])==null?void 0:R.relationToHolder},paymentMethod:D||j.extraInfo.paymentMethod,renewalDK:j.extraInfo.renewalDK})}else u.value=x(T({},_e),{paymentDisable:!!D}),G.value=x(T({},_e),{paymentDisable:!!D}),E.canInsure=!0},ct=async()=>{const _=je({productCode:d,withInsureInfo:!0,tenantId:f}),v=Ke({productCode:d});await Promise.all([_,v]).then(([c,A])=>{var b;c.code==="10000"&&(C.value=c.data,document.title=((b=c.data)==null?void 0:b.productFullName)||""),A.code==="10000"&&(p.value=A.data)}),o?we():F&&V==="productDetail"&&dt()},mt=()=>{V==="free"?g?(u.value=x(T({},Le),{paymentDisable:!!D}),G.value=x(T({},Le),{paymentDisable:!!D}),E.canInsure=!0):(u.value=x(T({},_e),{paymentDisable:!!D}),G.value=x(T({},_e),{paymentDisable:!!D}),E.canInsure=!0):g?(u.value=He,G.value=He,console.log("\u652F\u4ED8\u5B8C\u6210\u8FDB\u5165")):F||o||(console.log("\u6295\u4FDD\u94FE\u63A5"),u.value=ve,G.value=ve,E.canInsure=!0)};return qe(()=>{mt(),ct(),setTimeout(async()=>{ie=window.getIseeBiz&&await window.getIseeBiz()},1500)}),(_,v)=>{const c=S("van-button"),A=S("van-config-provider");return i(),P(J,null,[l(A,{"theme-vars":e(Ie)},{default:m(()=>{var b,K,Y,L,R,q,U;return[s("div",Pa,[s("div",$a,[l(Zt,{url:(K=(b=C.value)==null?void 0:b.tenantProductInsureVO)==null?void 0:K.banner[0]},null,8,["url"]),l(so,{"product-name":(Y=C.value)==null?void 0:Y.productFullName,"product-desc":(R=(L=C.value)==null?void 0:L.showConfigVO)==null?void 0:R.desc},null,8,["product-name","product-desc"])]),l(mo,{"guarantee-list":(U=(q=C.value)==null?void 0:q.tenantProductInsureVO)==null?void 0:U.titleAndDescVOS},null,8,["guarantee-list"]),l(No,{detail:C.value},{form:m(()=>[l(Ro,{ref_key:"formRef",ref:N,disable:!e(E).showInsure,"form-auth":u.value,"form-info":e(O),premium:a.value,"product-detail":C.value,onOnReset:Ze,onOnUpdate:et},null,8,["disable","form-auth","form-info","premium","product-detail"])]),_:1},8,["detail"]),s("div",Na,[s("div",Sa,[Va,s("span",null,"\uFFE5"+H(e($t)(a.value))+"/\u6708",1)]),l(c,{type:"primary",class:"right",disabled:!(e(E).canInsure||e(E).canUpgrade),onClick:Ce},{default:m(()=>[M(H(e(E).showInsure?"\u7ACB\u5373\u6295\u4FDD":"\u5347\u7EA7\u4FDD\u969C"),1)]),_:1},8,["disabled"])])]),e(V)!=="payBack"?(i(),k(ga,{key:0,"product-detail":C.value},null,8,["product-detail"])):te("",!0),l(ia,{"order-no":e(o),"tenant-id":e(f),"is-show":re.value,onOnConfirm:Ee,onOnClose:Xe},null,8,["order-no","tenant-id","is-show"])]}),_:1},8,["theme-vars"]),l(Aa,{show:ue.value,"onUpdate:show":v[0]||(v[0]=b=>ue.value=b),"content-list":e(ze),"active-index":0,onOnConfirmHealth:rt},null,8,["show","content-list"]),l(Ge,{show:me.value,"onUpdate:show":v[1]||(v[1]=b=>me.value=b),"content-list":e(Je),"active-index":fe.value,text:"\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u544A\u77E5\u5185\u5BB9",onSubmit:it},null,8,["show","content-list","active-index"]),l(Wo,{"is-show":le.value},null,8,["is-show"])],64)}}});var Ga=z(Ta,[["__scopeId","data-v-3ffdb7d5"]]);export{Ga as default};

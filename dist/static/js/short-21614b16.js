import{d as be,h as Q,r as P,$ as W,A as k,R as fe,k as j,ag as xe,m as l,s as d,B as s,F as Y,H as Z,M as ne,L as $,x as N,n as z,C as n,G as se,t as C,p as R,I as Te,a5 as ce,a6 as de,Z as Ne,_ as tt,N as _e,U as nt,T as at,aa as st,P as ot,l as lt,j as it,D as ut}from"./vendor-d350434b.js";import{_ as K,e as Be,i as le,a7 as rt,C as we,a1 as ct,I as dt}from"./index-124ac2ce.js";import{C as ve,k as ae,l as ee,m as pt,S as ke,R as Le,g as mt}from"./infoCollection-c7622b0a.js";import{p as Ee,i as vt,n as ft}from"./trial-8962a9b5.js";import{p as _t}from"./product-c5c5f153.js";import{g as yt,o as ht,v as Pt,r as Ct,t as It}from"./utils-9f6d616e.js";import{t as Ae,u as gt}from"./theme-e4a7893d.js";import{B as $e}from"./index-cc46f618.js";import{P as Ot}from"./index-50661952.js";import{L as Dt}from"./loading-d603f311.js";import{_ as Vt,a as Ft}from"./index-0ef85ad2.js";import{u as wt}from"./useDicData-92cf9484.js";import{P as kt}from"./index-8bb16e86.js";import{_ as Lt}from"./index-a9f56fdf.js";import"./trial-c1f5bc31.js";import"./check-detail-60b0cbde.js";import"./relativeTime-35039168.js";const ie=(u,g="YYYY-MM-DD")=>be(u).format(g),re=(u,g=0,i="day",o="YYYY-MM-DD")=>be(u).add(g,i).format(o);const Et=u=>(ce("data-v-206f3402"),u=u(),de(),u),$t={class:"guarantee-list"},St=Et(()=>s("span",null,"\u4FDD\u969C\u8BA1\u5212",-1)),bt={key:0,class:"plan-list"},xt=["onClick"],Tt={key:2,class:"feerate-view"},Nt={class:"guarantee-detail"},Bt={key:0,class:"plan-list"},At=["onClick"],Mt={key:1},Rt={class:"extinfo-info-list"},qt={class:"content"},Ut=Q({props:{dataSource:{type:Object,default:()=>{}},showConfig:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1}},emits:["update-active-plan"],setup(u,{emit:g}){var e;const i=u,o=P((e=i.dataSource)==null?void 0:e.planList),m=P(i.activePlanCode);W(()=>i.dataSource,()=>{var t;i.isMultiplePlan&&(o.value=(t=i.dataSource)==null?void 0:t.planList)},{immediate:!0});const O=P([]),y=P([]),_=P();W([()=>i.dataSource,()=>i.activePlanCode],()=>{var t,v,L,M;if(m.value=i.activePlanCode,!i.isMultiplePlan)O.value=(t=i.dataSource)==null?void 0:t.planInsureVO.guaranteeItemVOS,y.value=(v=i.dataSource)==null?void 0:v.planInsureVO.extInfoVOList,_.value=(L=i.dataSource)==null?void 0:L.planInsureVO.productPremiumVOList[0];else if(o.value&&o.value.length>0){let D=0;const U=o.value.findIndex(te=>te.planCode===m.value);U>-1&&(D=U),O.value=o.value[D].guaranteeItemVOS,y.value=o.value[D].extInfoVOList,_.value=(M=o.value[D])==null?void 0:M.productPremiumVOList[0]}},{immediate:!0,deep:!0});const x=k(()=>{var t;return((t=i.dataSource)==null?void 0:t.rateUri)||""}),q=k(()=>!!(_.value&&_.value.paymentFrequencyValue&&_.value.premiumUnit&&!!x)),[c,V]=fe(!1),S=k(()=>{var t;return!O.value||!((t=O.value)!=null&&t.length)?!1:O.value.length>i.count?i.isShowClose?!0:!c.value:!1}),b=()=>{V()},H=k(()=>{var t;return!O.value||!((t=O.value)!=null&&t.length)?[]:O.value.length<=i.count||c.value?O.value:O.value.slice(0,i.count)}),B=t=>{m.value=t,g("update-active-plan",t)},A=P(!1),p=()=>{A.value=!0},a=()=>{console.log("feeFileUri",x.value);const{origin:t}=window.location,v=`${t}/template/filePreview?fileType=pdf&fileUri=${x.value}`;window.open(v)};return(t,v)=>{var U,te;const L=j("ProCell"),M=j("ProPopup"),D=xe("dompurify-html");return l(),d(Y,null,[s("div",$t,[s("div",{class:"header"},[St,s("span",{onClick:p},"\u67E5\u770B\u8BE6\u60C5")]),u.isMultiplePlan?(l(),d("div",bt,[(l(!0),d(Y,null,Z(o.value,(h,E)=>(l(),d("div",{key:`${h.planCode}_${E}`,class:ne(`plan-list-item ${h.planCode===m.value?"plan-list-item-active":""}`),onClick:J=>B(h.planCode)},[s("span",null,$(h.planName),1)],10,xt))),128))])):N("",!0),(l(!0),d(Y,null,Z(n(H),(h,E)=>(l(),z(L,{key:E,class:"guarantee-item",title:h.title,content:h.desc,border:!1},null,8,["title","content"]))),128)),n(S)?(l(),d("div",{key:1,class:"show-more",onClick:b},[se($(n(c)?"\u6536\u8D77":"\u67E5\u770B\u66F4\u591A")+" ",1),C(Be,{name:"down",class:ne(["icon",{showMore:n(c)}])},null,8,["class"])])):N("",!0),n(q)?(l(),d("div",Tt,[s("span",null,$(`${((U=_.value)==null?void 0:U.paymentFrequencyValue)||""}${((te=_.value)==null?void 0:te.premiumUnit)||""}`),1),n(x)?(l(),d("span",{key:0,onClick:a},"\u67E5\u770B\u4FDD\u8D39")):N("",!0)])):N("",!0)]),C(le),C(M,{show:A.value,"onUpdate:show":v[0]||(v[0]=h=>A.value=h),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:R(()=>[s("div",Nt,[u.isMultiplePlan?(l(),d("div",Bt,[(l(!0),d(Y,null,Z(o.value,(h,E)=>(l(),d("div",{key:`${h.planCode}_${E}`,class:ne(`plan-list-item ${h.planCode===m.value?"plan-list-item-active":""}`),onClick:J=>B(h.planCode)},[s("span",null,$(h.planName),1)],10,At))),128))])):N("",!0),y.value&&y.value.length>0?(l(),d("div",Mt,[s("div",Rt,[(l(!0),d(Y,null,Z(y.value,(h,E)=>(l(),z(L,{key:E,title:h.name,content:h.description,border:!1,size:"small"},null,8,["title","content"]))),128))]),C(le)])):N("",!0),(l(!0),d(Y,null,Z(O.value,(h,E)=>(l(),d("div",{key:E,class:"guarantee-item"},[C(L,{title:h.title,content:h.desc,border:!1,size:"small"},null,8,["title","content"]),Te(s("div",qt,null,512),[[D,h.content]])]))),128))])]),_:1},8,["show"])],64)}}});var Yt=K(Ut,[["__scopeId","data-v-206f3402"]]);const Ht={class:"com-custom-card"},jt={class:"title"},Gt=Q({props:{title:{type:String,required:!0}},setup(u){return(g,i)=>(l(),d("div",Ht,[s("div",jt,$(u.title),1),s("div",null,[Ne(g.$slots,"default",{},void 0,!0)])]))}});var Se=K(Gt,[["__scopeId","data-v-059c21ee"]]);const zt={class:"question"},Wt={class:"title"},Qt=Q({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup(u){return(g,i)=>{const o=j("ProSvg"),m=j("van-collapse-item");return l(),z(m,{name:u.name,class:"com-question-item"},{title:R(()=>[s("div",zt,[C(o,{name:"question"}),s("div",Wt,$(u.question),1)])]),default:R(()=>[se(" "+$(u.answer),1)]),_:1},8,["name"])}}});var Kt=K(Qt,[["__scopeId","data-v-0d7ea124"]]);const Xt={class:"com-question"},Zt=Q({props:{list:{type:Array,default:()=>[]}},setup(u){const g=u,[i,o]=fe(!1),m=P([]),O=()=>{o()},y=k(()=>g.list.length<=4||i.value?g.list:g.list.slice(0,4));return(_,x)=>{const q=j("van-collapse");return l(),d("div",Xt,[C(q,{modelValue:m.value,"onUpdate:modelValue":x[0]||(x[0]=c=>m.value=c)},{default:R(()=>[(l(!0),d(Y,null,Z(n(y),(c,V)=>(l(),z(Kt,{key:V,name:V.toString(),question:c.title,answer:c.desc},null,8,["name","question","answer"]))),128))]),_:1},8,["modelValue"]),u.list.length>4?(l(),d("div",{key:0,class:"show-more",onClick:O},[se($(n(i)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),C(Be,{name:"down",class:ne(["icon",{showMore:n(i)}])},null,8,["class"])])):N("",!0)])}}});var Jt=K(Zt,[["__scopeId","data-v-1b7e97e9"]]);const en={class:"spec"},tn=["src"],nn={key:1,class:"spec"},an=["src"],sn=Q({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(u,{expose:g}){const i=u,o=P(),m=P([{title:"\u4EA7\u54C1\u4EAE\u70B9",slotName:"tab1"},{title:"\u7406\u8D54\u8BF4\u660E",slotName:"tab2"},{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab3"}]),O=k(()=>{var c,V,S,b;return((V=(c=i.detail)==null?void 0:c.tenantProductInsureVO)==null?void 0:V.spec)&&((b=(S=i.detail)==null?void 0:S.tenantProductInsureVO)==null?void 0:b.spec.length)>0}),y=k(()=>{var V,S,b,H,B,A,p,a,e,t,v,L,M,D;const c=(S=(V=i.detail)==null?void 0:V.tenantProductInsureVO)==null?void 0:S.settlementProcessVO.settlementProcessType;return!!(c===ve.WORD&&((B=(H=(b=i.detail)==null?void 0:b.tenantProductInsureVO)==null?void 0:H.settlementProcessVO)==null?void 0:B.settlementProcessList)&&((a=(p=(A=i.detail)==null?void 0:A.tenantProductInsureVO)==null?void 0:p.settlementProcessVO)==null?void 0:a.settlementProcessList.length)>0||c===ve.IMAGE&&((v=(t=(e=i.detail)==null?void 0:e.tenantProductInsureVO)==null?void 0:t.settlementProcessVO)==null?void 0:v.settlementProcessPicList)&&((D=(M=(L=i.detail)==null?void 0:L.tenantProductInsureVO)==null?void 0:M.settlementProcessVO)==null?void 0:D.settlementProcessPicList.length)>0)}),_=k(()=>{var c,V,S,b;return((V=(c=i.detail)==null?void 0:c.tenantProductInsureVO)==null?void 0:V.questionList)&&((b=(S=i.detail)==null?void 0:S.tenantProductInsureVO)==null?void 0:b.questionList.length)>0}),x=k(()=>{let c=[...m.value];return O.value||(c=c.filter(V=>V.slotName!=="tab1")),!y.value&&!_.value&&(c=c.filter(V=>V.slotName!=="tab2")),c});return g({handleClickTab:()=>{var c;return(c=o.value)==null?void 0:c.handleClickTab}}),(c,V)=>(l(),z(rt,{ref_key:"scrollRef",ref:o,class:"tabs",list:n(x),sticky:"",scrollspy:""},tt({tab3:R(()=>[Ne(c.$slots,"form",{},void 0,!0)]),_:2},[n(O)?{name:"tab1",fn:R(()=>{var S,b;return[s("div",en,[(l(!0),d(Y,null,Z(((b=(S=i.detail)==null?void 0:S.tenantProductInsureVO)==null?void 0:b.spec)||[],(H,B)=>(l(),d("img",{key:B,src:H,class:"detail-img"},null,8,tn))),128)),C(le)])]})}:void 0,n(y)||n(_)?{name:"tab2",fn:R(()=>{var S,b,H,B,A;return[n(y)?(l(),d(Y,{key:0},[((b=(S=i.detail)==null?void 0:S.tenantProductInsureVO)==null?void 0:b.settlementProcessVO.settlementProcessType)===n(ve).WORD?(l(),z(Se,{key:0,title:"\u7406\u8D54\u6D41\u7A0B"},{default:R(()=>{var p,a,e;return[C(Ot,{list:(e=(a=(p=i.detail)==null?void 0:p.tenantProductInsureVO)==null?void 0:a.settlementProcessVO)==null?void 0:e.settlementProcessList},null,8,["list"])]}),_:1})):(l(),d("div",nn,[(l(!0),d(Y,null,Z(((A=(B=(H=i.detail)==null?void 0:H.tenantProductInsureVO)==null?void 0:B.settlementProcessVO)==null?void 0:A.settlementProcessPicList)||[],(p,a)=>(l(),d("img",{key:a,src:p,class:"detail-img"},null,8,an))),128))])),C(le)],64)):N("",!0),n(_)?(l(),d(Y,{key:1},[C(Se,{title:"\u5E38\u89C1\u95EE\u9898"},{default:R(()=>{var p,a;return[C(Jt,{list:(a=(p=i.detail)==null?void 0:p.tenantProductInsureVO)==null?void 0:a.questionList},null,8,["list"])]}),_:1}),C(le)],64)):N("",!0)]})}:void 0]),1032,["list"]))}});var on=K(sn,[["__scopeId","data-v-4383aeea"]]);const ln=u=>(ce("data-v-ead4d7ae"),u=u(),de(),u),un={key:0,class:"page-waiting"},rn=["src"],cn=ln(()=>s("div",{class:"tips"},[s("p",null,"\u652F\u4ED8\u6210\u529F\uFF0C\u627F\u4FDD\u4E2D...")],-1)),dn=Q({props:{isShow:{type:Boolean,default:()=>{}}},setup(u){const g=u;return W(()=>g.isShow,i=>{i?document.body.style.overflow="hidden":document.body.style.overflow="inherit"}),(i,o)=>g.isShow?(l(),d("div",un,[s("img",{class:"loading",src:n(Dt)},null,8,rn),cn])):N("",!0)}});var pn=K(dn,[["__scopeId","data-v-ead4d7ae"]]);const ye=u=>(ce("data-v-10e0bee4"),u=u(),de(),u),mn={class:"com-period-cell"},vn={key:0,class:"custom-cell check-btn-cell"},fn=ye(()=>s("div",{class:"cell-label"},"\u4FDD\u969C\u671F\u9650",-1)),_n={class:"cell-content"},yn={key:1,class:"custom-cell common-cell"},hn=ye(()=>s("div",{class:"cell-label"},"\u751F\u6548\u65E5\u671F",-1)),Pn={key:2,class:"custom-cell common-cell"},Cn=ye(()=>s("div",{class:"cell-label"},"\u4FDD\u969C\u671F\u9650",-1)),In={class:"cell-content"},gn=Q({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate","onVerify"],setup(u,{expose:g,emit:i}){const o=u;P({});const m=(e,t)=>e==="year"?`${t}\u5E74`:e==="month"?`${t}\u6708`:e==="day"?`${t}\u65E5`:t,O=P(new Date),y=wt("RISK_INSURANCE_PERIOD"),_=_e({formInfo:o.formInfo});W(()=>_.formInfo.commencementTime,e=>{e&&typeof e=="string"&&(O.value=new Date(e))});const x=P(),q=P([]);W([()=>o.insureDetail,()=>_.formInfo.activePlanCode],()=>{var e;if(_.formInfo.insurancePeriodValue="",_.formInfo.commencementTime="",o.insureDetail)if(o.insureDetail.productRelationPlanVOList&&o.insureDetail.productRelationPlanVOList.length>0){let t=0;const v=o.insureDetail.productRelationPlanVOList.findIndex(D=>D.planCode===_.formInfo.activePlanCode);v>-1&&(t=v);const M=(((e=o.insureDetail.productRelationPlanVOList[t])==null?void 0:e.productRiskVoList[0].riskDetailVOList)||[]).find(D=>D.riskType===1);M&&(x.value=M)}else{const v=(o.insureDetail.productRiskVoList[0].riskDetailVOList||[]).find(L=>L.riskType===1);v&&(x.value=v)}},{deep:!0,immediate:!0}),W([()=>x.value,()=>y.value],()=>{q.value=[],Array.isArray(y.value)&&y.value.length>1&&x.value&&(q.value=(x.value.riskInsureLimitVO.insurancePeriodValueList||[]).map(e=>{const t=y.value.find(v=>v.value===e);return t?{label:t.name,value:t.value}:null}).filter(e=>!!e)),q.value.length>0&&(_.formInfo.insurancePeriodValue=q.value[0].value)},{deep:!0,immediate:!0});const c=k(()=>{var e;return((e=x.value)==null?void 0:e.riskInsureLimitVO.guaranteeStartDate)||ae.CURRENT_DAY}),[V,S]=fe(!1),b=()=>{S(!0)},H=new Date(re(new Date,1,"day")),B=k(()=>{var e;if(c.value===ae.CUSTOM_DAY){const t=(e=x.value)==null?void 0:e.riskInsureLimitVO.maxInsuranceDay;if(!t)return new Date;const v=re(new Date,Number(t),"day");return new Date(v)}return new Date}),A=e=>{_.formInfo.commencementTime=ie(e),S(!1)},p=()=>{S(!1)},a=k(()=>{if(c.value===ae.CUSTOM_DAY||!_.formInfo.insurancePeriodValue)return"";const[e,t]=_.formInfo.insurancePeriodValue.split("_");if(e!=="to"){let v=ie(new Date);if(c.value===ae.NEXT_DAY)return v=re(new Date,1,"day"),"";const L=re(v,Number(t),e);return`${v} - ${L}`}return _.formInfo.insured.certNo,""});return g({}),(e,t)=>{const v=j("ProRadioButton"),L=j("van-config-provider"),M=j("van-datetime-picker"),D=j("ProPopup");return l(),d(Y,null,[C(L,{"theme-vars":n(Ae)},{default:R(()=>[s("div",mn,[q.value.length>1?(l(),d("div",vn,[fn,s("div",_n,[C(v,{modelValue:n(_).formInfo.insurancePeriodValue,"onUpdate:modelValue":t[0]||(t[0]=U=>n(_).formInfo.insurancePeriodValue=U),options:q.value},null,8,["modelValue","options"])])])):N("",!0),n(c)===n(ae).CUSTOM_DAY?(l(),d("div",yn,[hn,s("div",{class:"cell-content",onClick:b},$(n(_).formInfo.commencementTime),1)])):N("",!0),n(c)!==n(ae).CUSTOM_DAY?(l(),d("div",Pn,[Cn,s("div",In,$(n(a)),1)])):N("",!0)])]),_:1},8,["theme-vars"]),C(D,{show:n(V),"onUpdate:show":t[2]||(t[2]=U=>nt(V)?V.value=U:null),height:40,closeable:!1},{default:R(()=>[C(M,{modelValue:O.value,"onUpdate:modelValue":t[1]||(t[1]=U=>O.value=U),type:"date",title:"\u9009\u62E9\u5E74\u6708","min-date":n(H),"max-date":n(B),formatter:m,onConfirm:A,onCancel:p},null,8,["modelValue","min-date","max-date"])]),_:1},8,["show"])],64)}}});var On=K(gn,[["__scopeId","data-v-10e0bee4"]]);const oe=u=>(ce("data-v-239c3f85"),u=u(),de(),u),Dn={class:"com-payment-type"},Vn={class:"title"},Fn={key:0,class:"custom-cell check-btn-cell"},wn=oe(()=>s("div",{class:"cell-label"},"\u4FDD\u969C\u65B9\u6848",-1)),kn={class:"cell-content"},Ln={key:0,class:"picture-payment-content"},En=["onClick"],$n=["src"],Sn=["src"],bn={key:1,class:"default-payment-content"},xn=oe(()=>s("div",{class:"pay-method"},[s("span",{class:"method"},$("\u6309\u6708\u4EA4\u8D39")),s("span",{class:"acount"},$("\u517112\u671F"))],-1)),Tn=[xn],Nn=oe(()=>s("div",null,[s("div",{class:"tip"},[s("span",null,$("\u6BD4\u6309\u6708\u652F\u4ED8\u6700\u9AD8\u7701")),se(),s("span",null,"16%")]),s("div",{class:"triangle"}),s("div",{class:"pay-method"},[s("span",{class:"method"},$("\u4E00\u6B21\u4EA4\u6E05")),s("span",{class:"acount"},$("\u6BD4\u6708\u4EA4\u4FDD\u8D39\u7701\u6700\u9AD82014\u5143"))])],-1)),Bn=[Nn],An={key:2,class:"custom-cell check-btn-cell"},Mn=oe(()=>s("div",{class:"cell-label"},"\u4EA4\u8D39\u65B9\u5F0F",-1)),Rn={class:"cell-content"},qn={class:"custom-cell common-cell"},Un=oe(()=>s("div",{class:"cell-label"},"\u5B9E\u4ED8\u4FDD\u8D39",-1)),Yn={class:"cell-content actual-premium"},Hn={key:2,class:"feerate-explain"},jn={class:"content"},Gn=oe(()=>s("div",{class:"triangle-top"},null,-1)),zn=Q({props:{showConfig:{type:Object,default:()=>{}},formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}},configDetail:{type:Object,default:()=>{}},isMultiplePlan:{type:Boolean,default:!1},premium:{type:[Number||null],default:null}},emits:["onReset","onUpdate","onVerify"],setup(u,{expose:g,emit:i}){const o=u;P({});const m=_e({formInfo:o.formInfo}),O=P([]),y=P(),_=P(),x=k(()=>{var a;return String((a=y.value)==null?void 0:a.paymentFrequencyFlag)==="1"}),q=k(()=>{var e;const a=(e=_.value)==null?void 0:e.productPremiumVOList.find(t=>t.paymentFrequency===m.formInfo.paymentFrequency);return o.premium&&a?`${o.premium}${a.premiumUnit||""}`:a?`${a.paymentFrequencyValue||""}${a.premiumUnit||""}`:""}),c=k(()=>{if(_){const{premiumExplain:a,premiumExplainViewName:e,premiumExplainUri:t}=_.value||{};return{premiumExplain:a,premiumExplainUri:t,premiumExplainViewName:e}}return null});W(()=>o.configDetail,()=>{var a;o.isMultiplePlan&&o.configDetail&&(O.value=(a=o.configDetail.tenantProductInsureVO)==null?void 0:a.planList)},{immediate:!0,deep:!0}),W([()=>o.configDetail,()=>o.isMultiplePlan,()=>m.formInfo.activePlanCode],()=>{if(o.configDetail)if(o.isMultiplePlan){let a=0;const e=o.configDetail.tenantProductInsureVO.planList.findIndex(t=>t.planCode===m.formInfo.activePlanCode);e>-1&&(a=e),y.value=o.configDetail.tenantProductInsureVO.planList[a].productPlanInsureConditionVO,_.value=o.configDetail.tenantProductInsureVO.planList[a]}else y.value=o.configDetail.tenantProductInsureVO.planInsureVO.productPlanInsureConditionVO,_.value=o.configDetail.tenantProductInsureVO.planInsureVO},{deep:!0,immediate:!0});const V=k(()=>y.value?y.value.paymentFrequency.split(",").length>1:!1),S=k(()=>{if(y.value){const a=y.value.paymentFrequency.split(",");if(a.length===1)return m.formInfo.paymentFrequency=y.value.paymentFrequency,!1;if(a.length===2&&a.filter(e=>![ee.SINGLE,ee.MONTH].includes(e)).length<1)return!0}return!1}),b=k(()=>{var a;return y.value?(a=y.value.paymentFrequencyList||[])==null?void 0:a.map(e=>({...e,paymentFrequency:e.skinValue})):[]}),H=k(()=>b.value.length>0);k(()=>o.isMultiplePlan?o.configDetail.tenantProductInsureVO.planList.map(a=>({...a.planPicList,planCode:a.planCode,planName:a.planName})):[]);const B=k(()=>{var a;return y.value?(a=y.value.paymentFrequency.split(",")||[])==null?void 0:a.map(t=>({label:pt[t],value:t})):[]}),A=a=>{console.log("type",a),m.formInfo.paymentFrequency=a},p=()=>{var t,v;if(!((t=c.value)!=null&&t.premiumExplainUri)){at("\u65E0\u8D39\u7387\u6587\u4EF6\uFF01");return}const{origin:a}=window.location,e=`${a}/template/filePreview?fileType=pdf&fileUri=${(v=c.value)==null?void 0:v.premiumExplainUri}`;window.open(e)};return g({}),(a,e)=>{const t=j("ProRadioButton"),v=j("templat"),L=j("ProDivider"),M=j("van-config-provider");return l(),z(M,{"theme-vars":n(Ae)},{default:R(()=>[s("div",Dn,[s("div",Vn,$(n(V)?"\u4EA4\u8D39\u65B9\u5F0F":"\u4FDD\u969C\u8BA1\u5212"),1),u.isMultiplePlan?(l(),d("div",Fn,[wn,s("div",kn,[C(t,{modelValue:n(m).formInfo.activePlanCode,"onUpdate:modelValue":e[0]||(e[0]=D=>n(m).formInfo.activePlanCode=D),options:O.value,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])])):N("",!0),n(x)?(l(),z(v,{key:1},{default:R(()=>[n(H)?(l(),d("div",Ln,[(l(!0),d(Y,null,Z(n(b),D=>(l(),d("div",{key:D.paymentFrequency,class:ne("picture-payment-item"),onClick:U=>A(D.paymentFrequency)},[n(m).formInfo.paymentFrequency==D.paymentFrequency?(l(),d("img",{key:0,src:D.selectedPic},null,8,$n)):(l(),d("img",{key:1,src:D.unSelectedPic},null,8,Sn))],8,En))),128))])):n(S)?(l(),d("div",bn,[s("div",{class:ne(`com-payment-type-item ${n(m).formInfo.paymentFrequency==n(ee).MONTH?"active":""}`),onClick:e[1]||(e[1]=D=>A(n(ee).MONTH))},Tn,2),s("div",{class:ne(`com-payment-type-item ${n(m).formInfo.paymentFrequency==n(ee).SINGLE?"active":""}`),onClick:e[2]||(e[2]=D=>A(n(ee).SINGLE))},Bn,2)])):n(B).length>1?(l(),d("div",An,[Mn,s("div",Rn,[C(t,{modelValue:n(m).formInfo.paymentFrequency,"onUpdate:modelValue":e[3]||(e[3]=D=>n(m).formInfo.paymentFrequency=D),options:n(B)},null,8,["modelValue","options"])])])):N("",!0)]),_:1})):N("",!0),C(On,{"form-info":n(m).formInfo,"insure-detail":u.insureDetail,"config-detail":u.configDetail},null,8,["form-info","insure-detail","config-detail"]),s("div",qn,[Un,s("div",Yn,$(n(q)),1)]),n(c)&&n(c).premiumExplain&&n(c).premiumExplainViewName?(l(),d("div",Hn,[s("div",jn,[Gn,s("div",null,[s("span",null,$(n(c).premiumExplain||""),1),s("span",{class:"file-name",onClick:p},"\u300A"+$(n(c).premiumExplainViewName||"")+"\u300B",1)])])])):N("",!0)]),C(L)]),_:1},8,["theme-vars"])}}});var Wn=K(zn,[["__scopeId","data-v-239c3f85"]]);const Qn={class:"inscribedContent-content"},Kn={class:"content"},Xn=Q({props:{inscribedContent:{type:String,default:""}},setup(u){const g=u,i=P();return W(()=>g.inscribedContent,o=>{o?i.value=o.replaceAll(`
`,"<br />"):i.value=""}),(o,m)=>{const O=xe("dompurify-html");return l(),d("div",Qn,[Te(s("div",Kn,null,512),[[O,i.value]])])}}});var Zn=K(Xn,[["__scopeId","data-v-1c7a3072"]]);const Jn={class:"com-attachment-list"},ea=["onClick"],ta=Q({props:{preText:{type:String,default:""},attachementList:{type:Object,default:()=>{}}},emits:["preview-file"],setup(u,{emit:g}){const i=o=>{g("preview-file",o)};return(o,m)=>(l(),d("div",Jn,[s("span",null,$(u.preText),1),(l(!0),d(Y,null,Z(u.attachementList||[],(O,y)=>(l(),d("span",{key:y,class:"attachment-item",onClick:_=>i(y)}," \u300A"+$(O.attachmentName)+"\u300B ",9,ea))),128))]))}});var na=K(ta,[["__scopeId","data-v-17da129e"]]);const aa={class:"page-internet-product-detail"},sa={class:"info"},oa={class:"footer-area"},la={class:"price"},ia=se(" \u603B\u4FDD\u8D39"),ua=se($("\u7ACB\u5373\u6295\u4FDD")),ra=Q({setup(u){var Ie,ge,Oe;const g=gt();st();const i=ot(),{productCode:o="BWYL2021",tenantId:m,orderNo:O,phoneNo:y,agentCode:_="",saleChannelId:x,paymentMethod:q,certNo:c,name:V,templateId:S,pageCode:b,from:H}=i.query;P(null);const B=P(),A=P(),p=P(),a=P(),e=P(),t=P(!1),v=P(!1),L=P(!1),M=P(0),D=P(!1);P(!1);let U="";const te=P(!0),h=_e({holder:{certNo:c,certType:we.CERT,mobile:y,name:V,socialFlag:ke.HAS},insured:{certNo:c,certType:we.CERT,name:V,socialFlag:ke.HAS,relationToHolder:Le.SELF},paymentMethod:q,renewalDK:"Y",packageProductList:[],mobileSmsCode:"",activePlanCode:"",paymentFrequency:ee.MONTH,insurancePeriodValue:"",commencementTime:ie(new Date)}),E=P({tenantId:m,templateId:S,pageCode:b,agencyId:_,orderCategory:1,saleUserId:x,saleChannelId:x,venderCode:(Ie=p.value)==null?void 0:Ie.insurerCode,activePlanCode:"",paymentFrequency:ee.MONTH,insurancePeriodValue:"",commencementTime:ie(new Date),tenantOrderHolder:{extInfo:{},socialFlag:"1"},tenantOrderInsuredList:[{socialFlag:"1",relationToHolder:Le.SELF,extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:m,productCode:(ge=p.value)==null?void 0:ge.productCode,productName:(Oe=p.value)==null?void 0:Oe.productName,premium:e.value||0}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",paymentFrequency:ee.MONTH,successJumpUrl:""},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),J=k(()=>{var r,f,F,I,w,T;return p.value?!!(((f=(r=p.value)==null?void 0:r.tenantProductInsureVO)==null?void 0:f.planList)&&Array.isArray((I=(F=p.value)==null?void 0:F.tenantProductInsureVO)==null?void 0:I.planList)&&((T=(w=p.value)==null?void 0:w.tenantProductInsureVO)==null?void 0:T.planList.length)>0):!1}),Me=k(()=>{var r,f,F;if(J.value){if(E.value.activePlanCode)return((r=a.value)==null?void 0:r.planFactor[E.value.activePlanCode])||{}}else if((f=a.value)!=null&&f.productFactor)return(F=a.value)==null?void 0:F.productFactor;return{}});W(()=>J.value,()=>{var r,f;J.value&&(E.value.activePlanCode=(f=(r=p.value)==null?void 0:r.tenantProductInsureVO)==null?void 0:f.planList[0].planCode)},{immediate:!0});const he=k(()=>{var r,f,F;return J.value?((f=(r=a.value)==null?void 0:r.productRelationPlanVOList.find(I=>I.planCode===E.value.activePlanCode))==null?void 0:f.productRiskVoList)||[]:((F=a.value)==null?void 0:F.productRiskVoList)||[]}),Re=r=>{E.value.activePlanCode=r},qe=k(()=>[]),ue=k(()=>{var F,I;let r={};if(J){const w=(F=p.value)==null?void 0:F.tenantProductInsureVO.planList.find(T=>T.planCode===(E.value.activePlanCode||""));r=w==null?void 0:w.attachmentVOList}else r=(I=p.value)==null?void 0:I.tenantProductInsureVO.planInsureVO.attachmentVOList;if(!r)return{};const f={2:"richText",3:"link"};return Object.keys(r).map(w=>(r[w].forEach(T=>{if(T.attachmentType==="1"){const G=T.attachmentUri.split("?"),X=G[0].substr(G[0].lastIndexOf(".")+1);console.log("type",X),X==="pdf"?T.attachmentType="pdf":T.attachmentType="picture"}else T.attachmentType=f[T.attachmentType]}),{attachmentName:w,attachmentList:r[w]}))}),Ue=()=>{console.log("detailScrollRef.value",A.value),A.value.handleClickTab()("tab3")},Ye=()=>{const{holder:{certNo:r,mobile:f,name:F,socialFlag:I},insured:{certNo:w,name:T,socialFlag:G,relationToHolder:X},paymentMethod:pe}=h;return!!(dt(w)&&!!G)},He=(r={},f={},F={})=>{var T,G;const I={...F};console.log("currentOrderDetail==========",(T=I.tenantOrderInsuredList[0])==null?void 0:T.tenantOrderProductList[0].riskVOList);const w={tenantId:m,riskList:((G=I.tenantOrderInsuredList[0])==null?void 0:G.tenantOrderProductList[0].riskVOList)||[],riskPremium:f,productId:r==null?void 0:r.productBasicInfoVO.id};return I.extInfo.iseeBizNo=U,I.commencementTime=ie(I.commencementTime||new Date,"YYYY-MM-DD HH:mm:ss"),I.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:"",productCode:r.productBasicInfoVO.productCode,productName:r.productBasicInfoVO.productName,tenantOrderRiskList:It(w)},I},je=async r=>{const{code:f,data:F}=await ft(He(a.value,{},E.value));f==="10000"&&(console.log("123123",F),te.value=!1)},Ge=async()=>{const{calcData:r,riskVOList:f}=yt({holder:h.holder,insured:h.insured,tenantId:m,productDetail:p.value,insureDetail:a.value,paymentFrequency:h.paymentFrequency,packageRiskIdList:ht(h.packageProductList)},!1,Pt);if(!Array.isArray(f)||f.length<1)return e.value=null,{};const F=await Ee(r),{code:I,data:w}=F;return I==="10000"?(e.value=w.premium,{condition:f,data:w}):(e.value=null,{})},ze=r=>{M.value=r,L.value=!0},We=async(r,f,F)=>{var T,G;const I=Ct(F).map(X=>({...X,paymentFrequency:r.paymentFrequency,insurancePeriodValue:r.insurancePeriodValue})),w={tenantId:m,productCode:(T=p.value)==null?void 0:T.productCode,holder:{personVO:r.tenantOrderHolder},insuredVOList:r.tenantOrderInsuredList.map(X=>({insuredCode:"",personVO:X,productPlanVOList:[{insurerCode:f.productBasicInfoVO.insurerCode,planCode:E.value.activePlanCode||0,riskVOList:I}]}))};await Ee(w),E.value.tenantOrderInsuredList[0].tenantOrderProductList=(G=w.insuredVOList[0])==null?void 0:G.productPlanVOList},Pe=async()=>{try{console.log("currentRiskInfo.value",he.value),await We(E.value,a.value,he.value),console.log("orderDetail.value.tenantOrderInsuredList[0].tenantOrderProductList[0]",E.value),je({})}catch{}},Qe=r=>{r==="allFalse"?(v.value=!1,t.value=!0,Pe()):ut.confirm({message:"\u60A8\u5F53\u524D\u7684\u5065\u5EB7\u72B6\u51B5\u4E0D\u7B26\u5408\u8BE5\u4EA7\u54C1",confirmButtonText:"\u786E\u5B9A"}).then(()=>{window.history.back()}).catch(()=>{var f;(f=B.value)==null||f.reEditForm(),t.value=!1})},Ce=()=>{var r;(r=B.value)==null||r.reEditForm(),t.value=!1},Ke=()=>{v.value=!1,Ce()},Xe=()=>{L.value=!1,Ce()},Ze=()=>{L.value=!1,v.value=!0};W([()=>h.insured.certNo,()=>h.insured.socialFlag,()=>h.packageProductList,()=>h.paymentFrequency],lt.exports.debounce(()=>{h.insured.certNo&&h.insured.socialFlag&&Ye()&&Ge()},500),{deep:!0,immediate:!0});const Je=async()=>{const r=_t({productCode:o,withInsureInfo:!0,tenantId:m}),f=vt({productCode:o});await Promise.all([r,f]).then(([F,I])=>{var w;F.code==="10000"&&(p.value={...F.data},document.title=((w=F.data)==null?void 0:w.productFullName)||""),I.code==="10000"&&(a.value=I.data)})};return it(()=>{Je(),setTimeout(async()=>{U=window.getIseeBiz&&await window.getIseeBiz()},1500)}),(r,f)=>{const F=j("van-config-provider");return l(),d(Y,null,[C(F,{"theme-vars":n(g)},{default:R(()=>{var I,w,T,G,X,pe,me,De,Ve,Fe;return[s("div",aa,[s("div",sa,[C($e,{url:(w=(I=p.value)==null?void 0:I.tenantProductInsureVO)==null?void 0:w.banner[0]},null,8,["url"]),(G=(T=p.value)==null?void 0:T.tenantProductInsureVO)!=null&&G.bannerMove?(l(),z($e,{key:0,url:(pe=(X=p.value)==null?void 0:X.tenantProductInsureVO)==null?void 0:pe.bannerMove[0],onClick:Ue},null,8,["url"])):N("",!0)]),C(Yt,{"show-service-config":"","data-source":(me=p.value)==null?void 0:me.tenantProductInsureVO,"show-config":(De=p.value)==null?void 0:De.showConfigVO,"is-multiple-plan":n(J),"active-plan-code":E.value.activePlanCode,onUpdateActivePlan:Re},null,8,["data-source","show-config","is-multiple-plan","active-plan-code"]),C(on,{ref_key:"detailScrollRef",ref:A,detail:p.value},{form:R(()=>[C(Lt,{ref_key:"formRef",ref:B,"title-collection":{HOLDER:"\u672C\u4EBA\u4FE1\u606F\uFF08\u6295\u4FDD\u4EBA\uFF09",INSURER:"\u4E3A\u8C01\u6295\u4FDD\uFF08\u88AB\u4FDD\u4EBA\uFF09"},"form-info":E.value,"send-sms-code":()=>{},"factor-object":n(Me)||{}},null,8,["form-info","send-sms-code","factor-object"]),C(Wn,{"form-info":E.value,"insure-detail":a.value,"config-detail":p.value,"is-multiple-plan":n(J),"risk-info-period-list":r.riskInfoPeriodList,premium:e.value},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","risk-info-period-list","premium"])]),_:1},8,["detail"]),(Ve=p.value)!=null&&Ve.tenantProductInsureVO.inscribedContent?(l(),z(Zn,{key:0,"inscribed-content":(Fe=p.value)==null?void 0:Fe.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):N("",!0),n(ue)&&n(ue).length>1?(l(),z(na,{key:1,"attachement-list":n(ue),"pre-text":"\u8BF7\u9605\u8BFB",onPreviewFile:f[0]||(f[0]=et=>ze(et))},null,8,["attachement-list"])):N("",!0),s("div",oa,[s("div",la,[ia,s("span",null,$(e.value?"\uFFE5":"")+$(n(ct)(e.value))+" "+$(e.value?E.value.paymentFrequency==n(mt).YEAR?"\u5143/\u5E74":"\u5143/\u6708":""),1)]),C(kt,{shadow:!1,"theme-vars":n(g),class:"right",text:"\u7ACB\u5373\u6295\u4FDD",onClick:Pe},{default:R(()=>[ua]),_:1},8,["theme-vars"])])])]}),_:1},8,["theme-vars"]),C(Vt,{show:v.value,"onUpdate:show":f[1]||(f[1]=I=>v.value=I),"content-list":n(qe),"active-index":0,onOnConfirmHealth:Qe,onOnCloseHealth:Ke},null,8,["show","content-list"]),L.value?(l(),z(Ft,{key:0,show:L.value,"onUpdate:show":f[2]||(f[2]=I=>L.value=I),"content-list":n(ue),"is-only-view":te.value,"active-index":M.value,text:"\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u544A\u77E5\u5185\u5BB9","force-read-cound":0,"on-close-file-preview":"",onSubmit:Ze,onOnCloseFilePreview:Xe},null,8,["show","content-list","is-only-view","active-index"])):N("",!0),C(pn,{"is-show":D.value},null,8,["is-show"])],64)}}});var wa=K(ra,[["__scopeId","data-v-9c28d534"]]);export{wa as default};

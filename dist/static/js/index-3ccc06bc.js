import{d as e,R as a,U as t,a as n,u as l,r as o,L as i,V as d,Y as s,W as r,X as u,Z as c,b as v,c as p,f as _,e as m,$ as I,i as f,g as h,h as C,w as O,j as b,a0 as g,a1 as y,n as L,a2 as j}from"./index-27c99c5f.js";import{g as k,i as A}from"./trial-fc81899a.js";import{a as N,q as S}from"./product-797ba18c.js";import{u as E}from"./useAttachment-080d6de8.js";import{g as T}from"./utils-551bb151.js";import{q as P}from"./createProposal-6a07c9ad.js";import{u as R}from"./useOrder-c9e812bb.js";import"./pdfh5-65d2a17a.js";import"./infoCollection-e4fda216.js";import"./trial-d92f97cb.js";import"./merge-84cb998c.js";import"./keysIn-b1e7a5ec.js";import"./isObjectLike-a9798079.js";const w={key:0},x={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},V={class:"info"},F={key:1,class:"preview-placeholder"},B=f("br",null,null,-1),D=f("div",{id:"insureButton"},null,-1),U=f("div",{id:"xinaoDialog"},null,-1),q=e({name:"InsuranceLong"}),G=e({...q,setup(e){const q=a((()=>t((()=>import("./index-4ebd9d82.js")),["static/js/index-4ebd9d82.js","static/css/index-c23f272e.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js"]))),G=a((()=>t((()=>import("./index-8b90d841.js")),["static/js/index-8b90d841.js","static/css/index-79104747.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js","static/js/infoCollection-e4fda216.js"]))),M=a((()=>t((()=>import("./index-e4a87cf4.js")),["static/js/index-e4a87cf4.js","static/css/index-491cbbd3.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js"]))),z=a((()=>t((()=>import("./index-0a27c729.js")),["static/js/index-0a27c729.js","static/css/index-db4d7ea7.css","static/css/index-c3fdf902.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js","static/js/debounce-6981b306.js","static/js/isObjectLike-a9798079.js","static/js/cloneDeep-f5e28e96.js","static/js/keysIn-b1e7a5ec.js","static/js/_getTag-5c78de73.js","static/js/TrialButton-c8cd96b1.js","static/css/TrialButton-ca460c56.css","static/js/index-627d7895.js","static/css/index-827a8544.css","static/js/trial-fc81899a.js","static/js/index-63f302e1.js","static/css/index-b88500e5.css","static/js/infoCollection-e4fda216.js","static/js/merge-84cb998c.js","static/js/index-7eb54bd2.js","static/js/ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-e58067bb.js","static/css/ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-d312631d.css","static/js/phoneVerify-e59552a7.js","static/js/index-1ecc1c77.js","static/js/useDicData-4545c8ee.js","static/js/bankCard-9d01ec49.js","static/js/index-d9d9d155.js","static/css/index-2d7806da.css","static/js/index-c61514ca.js","static/css/index-afa6e8d1.css","static/js/index-4080aafc.js","static/css/index-37223bfb.css","static/js/empty-ae586b6c.js","static/js/box-title-49964a8e.js","static/css/box-title-54f6fe95.css","static/js/index-f81e40cd.js","static/js/echarts-ac920fed.js","static/js/trial-d92f97cb.js","static/js/useOrder-c9e812bb.js","static/js/utils-7b3212d8.js","static/js/createProposal-6a07c9ad.js","static/js/constants-7afb7c3d.js","static/js/nextStep-1cd721ca.js","static/js/core-cbe513f8.js","static/js/constant-8927d485.js"]))),W=a((()=>t((()=>import("./index-f367aeca.js")),["static/js/index-f367aeca.js","static/css/index-ebb5282b.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js"]))),X=a((()=>t((()=>import("./Video-98287099.js")),["static/js/Video-98287099.js","static/css/Video-20262b6f.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js"]))),Y=a((()=>t((()=>import("./index-aefb339b.js")),["static/js/index-aefb339b.js","static/css/index-51c81f95.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js","static/js/utils-551bb151.js","static/js/infoCollection-e4fda216.js","static/js/trial-d92f97cb.js"]))),$=a((()=>t((()=>import("./index-08b4511c.js")),["static/js/index-08b4511c.js","static/css/index-55d22bc4.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js","static/js/product-797ba18c.js"]))),J=a((()=>t((()=>import("./index-082e131f.js")),["static/js/index-082e131f.js","static/css/index-fa4edf2a.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js","static/js/theme-65292714.js","static/js/index-627d7895.js","static/css/index-827a8544.css","static/js/utils-551bb151.js","static/js/infoCollection-e4fda216.js","static/js/trial-d92f97cb.js"]))),Q=a((()=>t((()=>import("./index-8e5b9404.js")),["static/js/index-8e5b9404.js","static/css/index-eabeb59f.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js"]))),Z=a((()=>t((()=>import("./index-205f7083.js")),["static/js/index-205f7083.js","static/css/index-4640d9aa.css","static/js/index-27c99c5f.js","static/css/index-9494d932.css","static/js/pdfh5-65d2a17a.js"])));n();const H=l(),{productCode:K="",tenantId:ee,agentCode:ae="",agencyCode:te,saleChannelId:ne,proposalId:le,extraInfo:oe,orderNo:ie,insurerCode:de,preview:se,trialPreview:re}=H.query;let ue={};try{console.log("extInfo",decodeURIComponent(oe)),ue=JSON.parse(decodeURIComponent(oe))}catch(Me){}o();const ce=o(),ve=o(),pe=o(!1),_e=o({}),me=o({}),Ie=o(!1),fe=o(0),he=o(!1);o({});const Ce=o(!0);o(!0);const Oe=o(!0),be=o(""),ge=o({}),ye=o({}),Le=o([]),je=o({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),ke=o({});i((()=>!!se||!!re));const Ae=i((()=>!!re)),Ne=o(),Se=()=>{Ne.value.open()},Ee=o([]),Te=o(),Pe=o(),Re=R(),we=o(!1),xe=async()=>{!Ae.value&&N({productCode:K,tenantId:ee}).then((({data:e,code:a})=>{if("10000"===a){_e.value=e;const{wxShareConfig:a,showWXShare:t,title:n,desc:l,image:o}=(null==e?void 0:e.PRODUCT_LIST)||{};t?Object.assign(je.value,{...a,imgUrl:a.image,isShare:t}):Object.assign(je.value,{title:n,desc:l,imgUrl:o,isShare:t}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&y(e.BASIC_INFO.themeType)}})),ie||le||(we.value=!0),ie&&k({orderNo:ie,tenantId:ee}).then((({code:e,data:a})=>{"10000"===e&&(a.productCode=K,Pe.value=a,we.value=!0)})),le&&P({id:le,tenantId:ee}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:t}=a;Pe.value=Object.assign(Re.value,{productCode:K,productName:"",renewFlag:"",holder:e,tenantId:ee,insuredList:(t||[]).map((e=>({...e,productList:e.productList.filter((e=>e.productCode===K))})))}),we.value=!0}})),await A({productCode:K,isTenant:!1}).then((({data:e,code:a})=>{var t;"10000"===a&&(pe.value=!0,he.value=!0,me.value=e,ge.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],Le.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),Oe.value=!1,S({productCode:K}).then((({code:e,data:a})=>{var t,n,l,o;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=a;Te.value=e||[];const{basicInfo:{questionnaireType:d},questions:s,questionnaireName:r}=(null==(t=null==i?void 0:i[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};2===d&&(Ee.value=[{attachmentName:r,attachmentUri:s,attachmentType:"question"}]),Ee.value=[{attachmentName:r,attachmentUri:null==(n=null==s?void 0:s[0])?void 0:n.content,attachmentType:T(String(null==(l=null==s?void 0:s[0])?void 0:l.textType),null==(o=null==s?void 0:s[0])?void 0:o.content)}]}}))};d((()=>ke.value.planCode),(e=>{ge.value=(me.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Ve=()=>{ce.value.handleClickTab()("insureButton")};o(""),o(0);const{fileList:Fe,mustReadFileCount:Be,popupFileList:De}=E(ge,Te),Ue=e=>{ge.value=(me.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},qe=()=>{Ie.value=!1,Ce.value=!0},Ge=()=>{Ie.value=!1,Ce.value=!0};return d((()=>ge.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:t}=ge.value;ke.value.planCode=e,ye.value=(t||[]).find((e=>e.mainRiskFlag===s.YES))}),{deep:!0,immediate:!0}),r((()=>{u(ve,(([{isIntersecting:e}],a)=>{pe.value=!0}))})),c((()=>{Oe.value=!0,xe(),setTimeout((async()=>{be.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var t,n,l,o,i,d,s,r,u,c,y,k,A,N,S,E,T,P,R,H;const K=L,ae=j;return v(),p(I,null,[_(Oe)?(v(),p("div",w)):(v(),p("div",x,[m(K),_(Ae)?(v(),p("div",F,[b("当前页面仅用于保费试算预览"),B,b("不展示其他产品相关配置信息")])):(v(),p(I,{key:0},[f("div",V,[1==(null==(n=null==(t=_(_e))?void 0:t.BASIC_INFO)?void 0:n.bannerType)&&(null==(o=null==(l=_(_e))?void 0:l.BASIC_INFO)?void 0:o.banner.length)?(v(),h(_(M),{key:0,"data-skeleton-type":"img",images:null==(d=null==(i=_(_e))?void 0:i.BASIC_INFO)?void 0:d.banner},null,8,["images"])):C("",!0),2==(null==(r=null==(s=_(_e))?void 0:s.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=_(_e))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),h(_(X),{key:1,"data-skeleton-type":"img",src:null==(y=_(_e))?void 0:y.BASIC_INFO.video[0]},null,8,["src"])):C("",!0),(null==(N=null==(A=null==(k=_(_e))?void 0:k.BASIC_INFO)?void 0:A.bannerMove)?void 0:N.length)?(v(),h(_(M),{key:2,url:null==(T=null==(E=null==(S=_(_e))?void 0:S.BASIC_INFO)?void 0:E.bannerMove)?void 0:T[0],onClick:Ve},null,8,["url"])):C("",!0),f("div",{ref_key:"observeRef",ref:ve},null,512)]),m(_(q),{"data-source":null==(P=_(_e))?void 0:P.BASIC_INFO},null,8,["data-source"]),(null==(R=_(_e))?void 0:R.GUARANTEE)?(v(),h(_(Y),{key:0,"show-service-config":"","data-source":_(_e),"plan-list":_(Le),onUpdateActivePlan:Ue},null,8,["data-source","plan-list"])):C("",!0),f("div",{class:"trial-text-btn",onClick:Se},"算一算保费"),m(_(W),{"data-source":null==(H=_(_e))?void 0:H.ISSUE_CONDITION},null,8,["data-source"]),m(_(G),{ref_key:"detailScrollRef",ref:ce,"data-source":_(_e)},null,8,["data-source"]),m(ae,null,{default:O((()=>{var e,a,t;return[(null==(e=_(_e).SIGNATURE)?void 0:e.inscribedContent)?(v(),h(_(Q),{key:0,"inscribed-content":null==(t=null==(a=_(_e))?void 0:a.SIGNATURE)?void 0:t.inscribedContent},null,8,["inscribed-content"])):C("",!0)]})),_:1}),m(ae,null,{default:O((()=>{var e;return[(null==(e=_(Fe))?void 0:e.length)?(v(),h(_(Z),{key:0,"attachment-list":_(Fe),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{fe.value=e,Ie.value=!0})(e))},null,8,["attachment-list"])):C("",!0)]})),_:1})],64)),_(pe)&&_(we)?(v(),h(_(z),{key:2,ref_key:"trialRef",ref:Ne,"data-source":_(ge),"share-info":_(je),"is-share":_(je).isShare,"product-info":{productCode:_(me).productCode,productName:_(me).productName,productId:"",tenantId:_(ee),insurerCode:_(de),planList:_(me).productPlanInsureVOList},"default-data":_(Pe)?[_(Pe)]:null,"current-order-detail":_(Pe),"tenant-product-detail":_(_e),"hide-benefit":1!==_(me).openFlag},null,8,["data-source","share-info","is-share","product-info","default-data","current-order-detail","tenant-product-detail","hide-benefit"])):C("",!0),D])),_(he)&&!_(Ae)?(v(),h(_($),{key:2,"product-detail":_(_e)},null,8,["product-detail"])):C("",!0),U,_(Ie)?(v(),h(_(J),{key:3,show:_(Ie),"onUpdate:show":a[1]||(a[1]=e=>g(Ie)?Ie.value=e:null),"content-list":_(Ce)?_(Fe):_(De),"is-only-view":_(Ce),"active-index":_(fe),text:_(Ce)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":_(Ce)?0:_(Be),onSubmit:qe,onOnCloseFilePreviewByMask:Ge},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):C("",!0)],64)}}});export{G as default};

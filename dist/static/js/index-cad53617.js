import{h as z,aa as X,P as K,R as Q,G as u,N as Z,z as ee,o as te,r as d,k as c,m as y,n as s,B as l,s as a,v as E,p as B,F as ne,H as re,A as f,L,E as oe}from"./vendor-4d9de129.js";import{h as ae,s as se,n as ie,b as ue,g as de,N as le,A as b,t as g}from"./index-a7234636.js";import{a as fe,B as ce}from"./infoCollection-caf02023.js";import{_ as T}from"./index-bd28b407.js";import{I as pe}from"./InsuredPart-f7a599e0.js";import{u as Ie}from"./useDicData-861025a9.js";import"./relativeTime-4ed25667.js";import"./trial-1cb90f2b.js";const me={key:0,class:"beneficiary-part"},ve={class:"part-title"},Oe={class:"title"},_e={class:"radio-item-wrapper"},ye={class:"name"},Ee={class:"hone"},Le={class:"address"},ge={class:"footer-button"},Ce=oe("\u4E0B\u4E00\u6B65"),Fe=z({setup(Be){const F=X(),I=K(),{templateId:A=1,orderNo:V="2022072710380711215",tenantId:H="9991000007",isShare:U,sharePageCode:h}=I.query;Q();const x=I.path==="/infoPreview"?"infoPreview":"infoCollection",m=u({}),w=Ie("NATIONAL_REGION_CODE"),t=u({extInfo:{pageCode:x},tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0}}),k=u(null),v=u([]),O=u([]),C=u([]),S=u([]),P=u([]),R=Z({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),_=ee(()=>{var i,e;return((e=(i=t.value.extInfo)==null?void 0:i.contactInfo)==null?void 0:e[0])||{}}),j=()=>{U?se(`${h}`,I.query):ie(t.value).then(({code:i,data:e})=>{i==="10000"&&e.pageAction.pageAction==="jumpToPage"&&F.push({path:ue[e.pageAction.data.nextPageCode],query:I.query})})},M=()=>{de({orderNo:V,tenantId:H}).then(({code:i,data:e})=>{if(i==="10000"){const o=e;o.extInfo={...o.extInfo,pageCode:x,templateId:A,buttonCode:le.infoPreview},o.tenantOrderHolder=o.tenantOrderHolder||{},o.tenantOrderHolder.extInfo=o.tenantOrderHolder.extInfo||{occupationCodeList:[]},o.tenantOrderInsuredList[0].extInfo=o.tenantOrderInsuredList[0].extInfo||{occupationCodeList:[]},o.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=o.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map(n=>{const p=n;return p.extInfo=p.extInfo||{},p}),o.tenantOrderAttachmentList.forEach(n=>{n.category===b.OBVERSE_CERT?n.objectType===g.HOLDER?(v.value[0]=n.uri,C.value[0]=n.id):n.objectType===g.INSURED&&(O.value[0]=n.uri,S.value[0]=n.id):n.category===b.REVERSE_CERT&&(n.objectType===g.HOLDER?(v.value[1]=n.uri,C.value[1]=n.id):n.objectType===g.INSURED&&(O.value[1]=n.uri,C.value[1]=n.id))}),Object.assign(t.value,o)}}).finally(()=>{R.isLoading=!1})};return te(()=>{M(),ae({pageCode:"infoCollection",templateId:A}).then(({code:i,data:e})=>{if(i==="10000"){const o={BENEFICIARY:[],INSURER:[],HOLDER:[]};e.productInsureFactorList.forEach(n=>{(o[n.moduleType]=o[n.moduleType]||[]).push(n)}),m.value=o}})}),(i,e)=>{const o=d("ProCard"),n=d("ProRadioButton"),p=d("ProField"),q=d("ProCascader"),Y=d("van-cell"),G=d("ProForm"),$=d("VanButton"),J=d("ProPageWrap");return c(),y(J,{class:"page-info-wrapper"},{default:s(()=>[l(R).isLoading?E("",!0):(c(),y(G,{key:0,ref_key:"formRef",ref:k,"is-view":""},{default:s(()=>{var N;return[a(pe,{"product-data":(N=t.value.tenantOrderInsuredList[0])==null?void 0:N.tenantOrderProductList[0]},null,8,["product-data"]),a(o,{title:"\u6295\u4FDD\u4EBA"},{default:s(()=>[a(T,{images:v.value,"onUpdate:images":e[0]||(e[0]=r=>v.value=r),"form-info":t.value.tenantOrderHolder,"factor-list":m.value.HOLDER,"is-view":""},null,8,["images","form-info","factor-list"])]),_:1}),a(o,{title:"\u88AB\u4FDD\u4EBA"},{default:s(()=>[a(p,{modelValue:t.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.tenantOrderInsuredList[0].relationToHolder=r),label:"\u4E3A\u8C01\u4FDD\u5355",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:s(()=>[a(n,{modelValue:t.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.tenantOrderInsuredList[0].relationToHolder=r),options:l(fe),"is-view":""},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),+t.value.tenantOrderInsuredList[0].relationToHolder!=1?(c(),y(T,{key:0,images:O.value,"onUpdate:images":e[3]||(e[3]=r=>O.value=r),"form-info":t.value.tenantOrderInsuredList[0],"factor-list":m.value.INSURER||[],"is-view":""},null,8,["images","form-info","factor-list"])):E("",!0),a(q,{modelValue:t.value.tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.tenantOrderInsuredList[0].extInfo.insureAreaCode=r),field1:t.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,"onUpdate:field1":e[5]||(e[5]=r=>t.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode=r),field2:t.value.tenantOrderInsuredList[0].extInfo.insureCityCode,"onUpdate:field2":e[6]||(e[6]=r=>t.value.tenantOrderInsuredList[0].extInfo.insureCityCode=r),field3:t.value.tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:field3":e[7]||(e[7]=r=>t.value.tenantOrderInsuredList[0].extInfo.insureAreaCode=r),label:"\u6295\u4FDD\u5730\u533A",name:"insureProvinceCode",placeholder:"\u8BF7\u9009\u62E9","is-link":"",required:"","data-source":l(w),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","data-source"])]),_:1}),a(o,{title:"\u53D7\u76CA\u4EBA"},{default:s(()=>[a(p,{modelValue:t.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":e[9]||(e[9]=r=>t.value.tenantOrderInsuredList[0].insuredBeneficiaryType=r),label:"\u53D7\u76CA\u4EBA\u7C7B\u578B",name:"insuredBeneficiaryType",placeholder:"\u8BF7\u9009\u62E9"},{input:s(()=>[a(n,{modelValue:t.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":e[8]||(e[8]=r=>t.value.tenantOrderInsuredList[0].insuredBeneficiaryType=r),options:l(ce),"is-view":""},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),t.value.tenantOrderInsuredList[0].insuredBeneficiaryType==2?(c(),B("div",me,[(c(!0),B(ne,null,re(t.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList,(r,D)=>(c(),B("div",{key:r.beneficiaryId,class:"beneficiary-item"},[f("div",ve,[f("span",Oe,L(`\u53D7\u76CA\u4EBA${D+1}`),1)]),a(T,{images:P.value,"onUpdate:images":e[10]||(e[10]=W=>P.value=W),"form-info":r,"factor-list":m.value.BENEFICIARY||[],prefix:`beneficiary-${D}`,"is-view":"","beneficiary-list":t.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList},null,8,["images","form-info","factor-list","prefix","beneficiary-list"])]))),128))])):E("",!0)]),_:1}),a(o,{title:"\u4FDD\u5355\u901A\u8BAF\u4FE1\u606F"},{default:s(()=>[Object.keys(l(_)).length?(c(),y(Y,{key:0,title:"\u5355\u5143\u683C"},{title:s(()=>[f("div",_e,[f("p",null,[f("span",ye,L(l(_).contactName),1),f("span",Ee,L(l(_).contactPhoneNo),1)]),f("p",Le,L(l(_).contactAddress),1)])]),_:1})):E("",!0)]),_:1})]}),_:1},512)),f("div",ge,[a($,{block:"",type:"primary",onClick:j},{default:s(()=>[Ce]),_:1})])]),_:1})}}});export{Fe as default};

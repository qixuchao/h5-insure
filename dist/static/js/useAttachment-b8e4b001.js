import{_ as l,d as e,bX as a,g as t,r as n,E as s,an as i,S as u,z as o,c as r,h as c,j as d,F as v,i as p,L as m,t as C,k as f,e as _,n as y,f as L,V as h,a2 as k,w as A,a7 as b,A as E,a3 as g,a5 as I,a8 as S,X as x,Y as O,bY as F,bZ as T,bp as M,bt as N,c8 as R,bk as w,I as U,a9 as P}from"./index-f531a243.js";import{o as j,g as W}from"./utils-6f27c1ea.js";import{C as D}from"./infoCollection-5bf6c7fd.js";const V={class:"guarantee-list"},$=(l=>(x("data-v-613ed1cf"),l=l(),O(),l))((()=>d("span",null,"保障计划",-1))),z={key:0,class:"plan-list"},G=["onClick"],Y={key:2,class:"feerate-view"},q={key:0},Q={class:"extinfo-info-list"},B={class:"guarantee-detail"},X={class:"content"};var Z=l(e({__name:"index",props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},planList:{type:Array,require:!1,default:()=>[]}},emits:["update-active-plan"],setup(l,{emit:e}){var x,O;const F=l;a((l=>({"4dfc3426":t(T)})));const T=n(""),M=n((null==(O=null==(x=F.planList)?void 0:x[0])?void 0:O.planCode)||void 0),N=n(),R=n([]),w=n([]),U=n(),P=s((()=>!!F.planList.length));i([()=>F.dataSource,()=>M.value],(()=>{var l,e;R.value=(null==(e=((null==(l=F.dataSource)?void 0:l.GUARANTEE)||[]).find((l=>l.planCode===M.value)))?void 0:e.data)||[]}),{immediate:!0,deep:!0});const W=s((()=>{var l;return(null==(l=F.dataSource)?void 0:l.rateUri)||""})),D=s((()=>!!(U.value&&U.value.paymentFrequencyValue&&U.value.premiumUnit&&W))),[Z,H]=u(!1),J=s((()=>{var l;return!(!R.value||!(null==(l=R.value)?void 0:l.length))&&(R.value.length>F.count&&(!!F.isShowClose||!Z.value))})),K=()=>{H()},ll=s((()=>{var l;return R.value&&(null==(l=R.value)?void 0:l.length)?R.value.length<=F.count||Z.value?R.value:R.value.slice(0,F.count):[]})),el=n(!1),al=()=>{el.value=!0},tl=()=>{j({fileType:"pdf",fileUri:W.value})},nl=l=>{M.value=F.planList[l.name].planCode};return(e,a)=>{var n,s;const i=g,u=I,x=S,O=o("dompurify-html");return r(),c(v,null,[d("div",V,[d("div",{class:"header"},[$,d("span",{onClick:al},"查看详情")]),t(P)?(r(),c("div",z,[(r(!0),c(v,null,p(l.planList,((e,a)=>(r(),c("div",{key:`${e.planCode}_${a}`,class:m(`plan-list-item ${e.planCode===t(M)?"plan-list-item-active":""} ${2===l.planList.length?"paln-list-item-half":""}`),onClick:l=>{return a=e.planCode,M.value=a,void(N.value=F.planList.findIndex((l=>l.planCode===a)));var a}},[d("span",null,C(e.planName),1)],10,G)))),128))])):f("",!0),(r(!0),c(v,null,p(t(ll),((l,e)=>(r(),_(i,{key:e,class:"guarantee-item",title:l.title,content:l.desc,border:!1},null,8,["title","content"])))),128)),t(J)?(r(),c("div",{key:1,class:"show-more",onClick:K},[y(C(t(Z)?"收起":"查看更多")+" ",1),L(h,{name:"arrow-down-dobule",class:m(["icon",{showMore:t(Z)}])},null,8,["class"])])):f("",!0),t(D)?(r(),c("div",Y,[d("span",null,C(`${(null==(n=t(U))?void 0:n.paymentFrequencyValue)||""}${(null==(s=t(U))?void 0:s.premiumUnit)||""}`),1),t(W)?(r(),c("span",{key:0,onClick:tl},"查看保费")):f("",!0)])):f("",!0)]),L(k),L(x,{show:t(el),"onUpdate:show":a[1]||(a[1]=l=>b(el)?el.value=l:null),title:"保障详情",class:"guarantee-popup"},{default:A((()=>[t(w)&&t(w).length>0?(r(),c("div",q,[d("div",Q,[(r(!0),c(v,null,p(t(w),((l,e)=>(r(),_(i,{key:e,title:l.name,content:l.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),L(k)])):f("",!0),t(P)?(r(),_(u,{key:1,active:t(N),"onUpdate:active":a[0]||(a[0]=l=>b(N)?N.value=l:null),list:l.planList.map(((l,e)=>({title:l.planName}))),class:"custom-plan-tab",onClickTab:nl},null,8,["active","list"])):f("",!0),d("div",B,[(r(!0),c(v,null,p(t(R),((l,e)=>(r(),c("div",{key:e,class:"guarantee-item"},[L(i,{title:l.title,content:l.desc,border:!1,size:"small"},null,8,["title","content"]),E(d("div",X,null,512),[[O,l.tips]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-613ed1cf"]]);const H={class:"spec"},J={class:"rich-text"},K={key:1,class:"spec"},ll={class:"rich-text"},el={key:1,class:"spec"},al={class:"rich-text"},tl=e({__name:"index",props:{dataSource:{default:()=>({SPECIAL_FEATURE:[],CLAIM_CASE:{},CLAIM_FLOW:[],ISSUE_NOTICE:[],FAQ:[]})}},setup(l,{expose:e}){const a=l,i=F((()=>T((()=>import("./index-f531a243.js").then((function(l){return l.cI}))),["static/js/index-f531a243.js","static/css/index-90b47c2e.css","static/js/pdfh5-008ca364.js"])));F((()=>T((()=>import("./index-f17ba878.js")),["static/js/index-f17ba878.js","static/css/index-f22f2764.css","static/js/index-f531a243.js","static/css/index-90b47c2e.css","static/js/pdfh5-008ca364.js"])));const u=F((()=>T((()=>import("./index-f531a243.js").then((function(l){return l.cG}))),["static/js/index-f531a243.js","static/css/index-90b47c2e.css","static/js/pdfh5-008ca364.js"]))),m=F((()=>T((()=>import("./index-1f4b44b1.js")),["static/js/index-1f4b44b1.js","static/css/index-7b3feb06.css","static/js/index-f531a243.js","static/css/index-90b47c2e.css","static/js/pdfh5-008ca364.js"]))),C=F((()=>T((()=>import("./index-aabec7d5.js")),["static/js/index-aabec7d5.js","static/css/index-194b9c66.css","static/js/index-f531a243.js","static/css/index-90b47c2e.css","static/js/pdfh5-008ca364.js","static/js/index-bbc828c9.js"]))),{dataSource:y}=M(a),k=n(),b=n([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),g=s((()=>{var l,e;return null==(e=null==(l=y.value.SPECIAL_FEATURE)?void 0:l.spec)?void 0:e.length})),I=s((()=>{var l,e,a,t;const n=null==(l=y.value.CLAIM_FLOW)?void 0:l.processCaseType;return!!(n===D.WORD&&(null==(e=y.value.CLAIM_FLOW)?void 0:e.processContent)||n===D.IMAGE&&(null==(t=null==(a=y.value.CLAIM_FLOW)?void 0:a.processCasePicList)?void 0:t.length))})),S=s((()=>{var l,e,a,t,n;const s=null==(e=null==(l=y.value)?void 0:l.CLAIM_CASE)?void 0:e.claimCaseType;return!!(s===D.WORD&&(null==(a=y.value.CLAIM_CASE)?void 0:a.claimContent)||s===D.IMAGE&&(null==(n=null==(t=y.value.CLAIM_CASE)?void 0:t.claimCasePicList)?void 0:n.length))})),x=s((()=>{var l,e;return null==(e=null==(l=y.value)?void 0:l.ISSUE_NOTICE)?void 0:e.noticeContent})),O=s((()=>{var l,e;return null==(e=null==(l=y.value)?void 0:l.FAQ)?void 0:e.length})),P=s((()=>{let l=[...b.value];return g.value||(l=l.filter((l=>"tab1"!==l.slotName))),I.value||S.value||(l=l.filter((l=>"tab2"!==l.slotName))),l}));return e({handleClickTab:()=>{var l;return null==(l=k.value)?void 0:l.handleClickTab}}),(l,e)=>{const a=U,n=h,s=o("dompurify-html");return r(),_(t(i),{ref_key:"scrollRef",ref:k,class:"tabs",list:t(P),sticky:"",scrollspy:""},N({tab3:A((()=>[w(l.$slots,"form")])),_:2},[t(g)?{name:"tab1",fn:A((()=>{var l;return[d("div",H,[(r(!0),c(v,null,p((null==(l=t(y).SPECIAL_FEATURE)?void 0:l.spec)||[],((l,e)=>(r(),_(R,{key:e},{fallback:A((()=>[L(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>[(r(),_(a,{key:e,class:"detail-img",width:"100%",src:l},null,8,["src"]))])),_:2},1024)))),128)),L(t(u))])]})),key:"0"}:void 0,t(I)||t(S)||t(x)||t(O)?{name:"tab2",fn:A((()=>{var l,e;return[t(I)?(r(),c(v,{key:0},[(null==(l=t(y).CLAIM_FLOW)?void 0:l.processCaseType)===t(D).WORD?(r(),_(t(m),{key:0,class:"tab-card",title:"理赔说明"},{default:A((()=>{var l;return[E(d("div",J,null,512),[[s,null==(l=t(y).CLAIM_FLOW)?void 0:l.processContent]])]})),_:1})):(r(),c("div",K,[(r(),_(R,null,{fallback:A((()=>[L(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var l;return[(r(!0),c(v,null,p((null==(l=t(y).CLAIM_FLOW)?void 0:l.processCasePicList)||[],((l,e)=>(r(),_(a,{key:e,width:"100%",src:l,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(t(u))],64)):f("",!0),t(S)?(r(),c(v,{key:1},[(null==(e=t(y).CLAIM_CASE)?void 0:e.claimCaseType)===t(D).WORD?(r(),_(t(m),{key:0,class:"tab-card",title:"理赔案例"},{default:A((()=>{var l;return[E(d("div",ll,null,512),[[s,null==(l=t(y).CLAIM_CASE)?void 0:l.claimContent]])]})),_:1})):(r(),c("div",el,[(r(),_(R,null,{fallback:A((()=>[L(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var l;return[(r(!0),c(v,null,p((null==(l=t(y).CLAIM_CASE)?void 0:l.claimCasePicList)||[],((l,e)=>(r(),_(a,{key:e,width:"100%",src:l,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(t(u))],64)):f("",!0),t(x)?(r(),c(v,{key:2},[L(t(m),{class:"tab-card",title:"投保须知"},{default:A((()=>{var l;return[E(d("div",al,null,512),[[s,null==(l=t(y).ISSUE_NOTICE)?void 0:l.noticeContent]])]})),_:1}),L(t(u))],64)):f("",!0),t(O)?(r(),c(v,{key:3},[L(t(m),{title:"常见问题"},{default:A((()=>{var l,e;return[L(t(C),{list:null==(e=null==(l=t(y).FAQ)?void 0:l[0])?void 0:e.data},null,8,["list"])]})),_:1}),L(t(u))],64)):f("",!0)]})),key:"1"}:void 0]),1032,["list"])}}});var nl=(l,e)=>{const a=n([]),t=n(0),s=n([]);return i([()=>{var e;return null==(e=l.value)?void 0:e.planCode},()=>e.value],(([l,e])=>{let n=null;if(null==e?void 0:e.length){const a=(e||[]).find((e=>e.planCode===l||!e.planCode));a&&(n=null==a?void 0:a.productMaterialMap)}n?(a.value=Object.keys(n).map((l=>({attachmentName:l,attachmentList:n[l].map((l=>({...l,materialSource:W(`${null==l?void 0:l.materialSource}`,null==l?void 0:l.materialContent)})))}))),s.value=a.value.map((l=>({attachmentName:l.attachmentName,attachmentList:l.attachmentList.filter((l=>l.popUpFlag===P.YES))}))).filter((l=>l.attachmentList.length)),t.value=s.value.map((l=>({attachmentName:l.attachmentName,attachmentList:l.attachmentList.filter((l=>l.mustReadFlag===P.YES))}))).filter((l=>l.attachmentList.length)).length||0):a.value=[]}),{deep:!0,immediate:!0}),{fileList:a,popupFileList:s,mustReadFileCount:t}};export{Z as G,tl as _,nl as u};

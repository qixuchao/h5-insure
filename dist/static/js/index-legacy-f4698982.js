!function(){var t=document.createElement("style");t.innerHTML='@charset "UTF-8";.com-visitor-page-list .visitor-page-list-title[data-v-5067867e]{height:.53333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#a2a2a2;line-height:.53333rem;margin-bottom:.16rem;margin-top:.4rem}.com-visitor-page-list .visitor-page-list-item[data-v-5067867e]{margin-bottom:.26667rem}.com-visitor-page-list .visitor-page-list-item .item-top[data-v-5067867e]{background:linear-gradient(360deg,#fdf9f2 0%,#f2e9db 100%);display:flex;align-items:center;padding:.4rem .4rem .26667rem;border-radius:.26667rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content[data-v-5067867e]{width:100%}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top[data-v-5067867e]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.21333rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .top-left[data-v-5067867e]{display:flex;align-items:center}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .top-left .head-image[data-v-5067867e]{width:1.2rem;height:1.2rem;border-radius:50%;margin-right:.33333rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .top-left .name-area .top-check-times[data-v-5067867e]{height:.49333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#b39366;line-height:.49333rem;letter-spacing:1px}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .top-left .name-area .top-check-times span[data-v-5067867e]{color:var(--van-primary-color)}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .top-left .name-area .top[data-v-5067867e]{display:flex;align-items:center;margin-bottom:.04rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .top-left .name-area .top .top-name[data-v-5067867e]{height:.48rem;font-size:.37333rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:600;color:#343434;line-height:.48rem;margin-right:.21333rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .top-left .name-area .top .sex-out[data-v-5067867e]{width:.41333rem;height:.41333rem;background:#f99381;border-radius:50%;display:flex;align-items:center;justify-content:center}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .top-left .name-area .top .sex-out.man[data-v-5067867e]{background:#00afff}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .top-left .name-area .top .sex-out img[data-v-5067867e]{width:.26667rem;height:.26667rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .time[data-v-5067867e]{display:flex;align-items:center}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .time .time-text[data-v-5067867e]{height:.44rem;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#909090;line-height:.44rem;margin-right:.06667rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-top .time .time-right-img[data-v-5067867e]{margin-top:.02667rem;height:.32rem;width:.18667rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-mid[data-v-5067867e]{margin-left:.4rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-mid .triangle[data-v-5067867e]{width:0;height:0;border-left:.2rem solid transparent;border-right:.2rem solid transparent;border-bottom:.2rem solid #fbfbfb}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-bottom[data-v-5067867e]{background:#fbfbfb;border-radius:.10667rem;padding:.21333rem .17333rem .21333rem .26667rem}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-bottom .content-bottom-top[data-v-5067867e]{position:relative}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-bottom .content-bottom-top .title-name[data-v-5067867e]{max-height:.98667rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#616161;line-height:.49333rem;margin-bottom:.28rem;display:-webkit-box;text-overflow:ellipsis;overflow:hidden;-webkit-line-clamp:2;-webkit-box-orient:vertical}.com-visitor-page-list .visitor-page-list-item .item-top .item-right-content .content-bottom .content-bottom-top .right-line[data-v-5067867e]{width:1.54667rem;height:.6rem;position:absolute;bottom:-.49333rem;right:-.21333rem}@charset "UTF-8";.page-visitors{padding:.4rem}.page-visitors .visitor-page-top{display:flex;align-items:center;width:100%;height:2.4rem;padding:.53333rem .4rem;background:var(--visitor-top-background);border-radius:.26667rem;position:relative}.page-visitors .visitor-page-top .top-item{display:flex;align-items:center}.page-visitors .visitor-page-top .top-item .top-img{width:1.01333rem;height:1.01333rem;margin-right:.4rem}.page-visitors .visitor-page-top .top-item .top-rigth{position:relative}.page-visitors .visitor-page-top .top-item .top-rigth .text{height:.44rem;padding-left:.05333rem;color:#fff;font-weight:400;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;line-height:.44rem}.page-visitors .visitor-page-top .top-item .top-rigth .number{height:.88rem;color:#fff;font-weight:700;font-size:.61333rem;font-family:-apple-system,Helvetica,sans-serif;line-height:.88rem}.page-visitors .visitor-page-top .top-item .top-rigth .today-add{position:absolute;top:.6rem;right:-.13333rem;height:.37333rem;border-radius:.05333rem;border:1px solid rgba(255,255,255,.4);display:flex;align-items:center;justify-content:center;padding:.05333rem .06667rem}.page-visitors .visitor-page-top .top-item .top-rigth .today-add span{opacity:none;height:.37333rem;font-size:.26667rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#fff;line-height:.37333rem}.page-visitors .visitor-page-top .top-item:last-child{position:absolute;left:calc(50% + .4rem)}.page-visitors .visitor-page-top .line{width:0px;height:1.06667rem;border-left:1px solid #ffffff;opacity:.3;position:absolute;left:50%}.page-visitors .empty-area{margin-top:1.33333rem}\n',document.head.appendChild(t),System.register(["./vendor-legacy-f56233fa.js","./visit-legacy-99c3022e.js","./index-legacy-9604cbf9.js","./plugin-vue_export-helper-legacy-57eac467.js","./index-legacy-4c8de798.js","./index-legacy-32e69765.js"],(function(t){"use strict";var e,i,a,o,s,r,n,l,m,g,p,c,d,v,h,u,f,y,b,w,C,x,S,k,T,I,F,V,P,D;return{setters:[function(t){e=t.g,i=t.k,a=t.m,o=t.E,s=t.y,r=t.I,n=t.z,l=t.d,m=t.F,g=t.G,p=t.H,c=t.s,d=t.B,v=t.a2,h=t.a3,u=t.a0,f=t.C,y=t.L,b=t.M,w=t.T,C=t.h,x=t.j,S=t.r,k=t.n},function(t){T=t.a,I=t.g},function(t){F=t.u},function(t){V=t._},function(t){P=t._},function(t){D=t._}],execute:function(){const _=t=>(v("data-v-5067867e"),t=t(),h(),t),j={class:"visitor-page-list-title"},z=["onClick"],R={class:"item-top"},U={class:"item-right-content"},O={class:"content-top"},L={class:"top-left"},E=["src"],N={class:"name-area"},q={class:"top"},B={class:"top-name"},H={class:"top-check-times"},M=d(" 本次访问"),$={key:0,style:{color:"#b39366"}},A={key:1},G={key:2,style:{color:"#b39366"}},W={class:"time"},Z={class:"time-text"},J=["src"],K=_((()=>s("div",{class:"content-mid"},[s("div",{class:"triangle"})],-1))),Q={class:"content-bottom"},X={class:"content-bottom-top"},Y={class:"title-name"},tt=["src"],et=e({props:{visitorList:{type:Array,default:()=>[]}},emits:["onClick"],setup(t,{emit:e}){const{getIconUrl:d}=F();return(v,h)=>(i(!0),a(m,null,o(t.visitorList,((t,v)=>(i(),a("div",{key:v,class:"com-visitor-page-list"},[s("div",j,r(0===n(l)().diff(n(l)(t.lastVisitContentDate),"day")?"今天":1===n(l)().diff(n(l)(t.lastVisitContentDate),"day")?"昨天":t.lastVisitContentDate||""),1),(i(!0),a(m,null,o(t.list,((t,o)=>{return i(),a("div",{key:o,class:"visitor-page-list-item",onClick:i=>(t=>{e("onClick",t)})(t)},[s("div",R,[s("div",U,[s("div",O,[s("div",L,[s("img",{src:t.wechatImageUrl,alt:"",class:"head-image"},null,8,E),s("div",N,[s("div",q,[s("div",B,r(t.relatedCustomerId?t.relatedCustomerName:t.wechatNickname),1)]),g(s("div",H,[M,s("span",null,r(t.viewTimeStr&&(-1===t.viewTimeStr.indexOf("分")?t.viewTimeStr.split("秒")[0]:t.viewTimeStr.split("分")[0])),1),t.viewTimeStr&&-1!==t.viewTimeStr.indexOf("分")?(i(),a("span",$,"分")):c("",!0),t.viewTimeStr&&-1!==t.viewTimeStr.indexOf("分")?(i(),a("span",A,r(t.viewTimeStr&&-1!==t.viewTimeStr.indexOf("分")&&t.viewTimeStr.split("分")[1].split("秒")[0]),1)):c("",!0),t.viewTimeStr&&-1!==t.viewTimeStr.indexOf("秒")?(i(),a("span",G,"秒")):c("",!0)],512),[[p,t.viewTimeStr]])])]),s("div",W,[s("div",Z,r(t.lastVisitContentTimeStr),1),s("img",{src:n(d)("article.rightImg"),alt:"",class:"time-right-img"},null,8,J)])]),K,s("div",Q,[s("div",X,[s("div",Y,r(`查看了${l=t.lastVisitContentType,"vcard"===l?"名片":"poster"===l?"海报":"activity"===l?"活动":"article"===l?"文章":""}   ${t.lastVisitContentTitle} `),1),s("img",{src:n(d)("visitor.lineImg"),alt:"",class:"right-line"},null,8,tt)])])])])],8,z);var l})),128))])))),128))}});var it=V(et,[["__scopeId","data-v-5067867e"]]);const at={class:"visitor-page-top"},ot={class:"top-item"},st=["src"],rt={class:"top-rigth"},nt=s("div",{class:"text"},"累计访问",-1),lt={class:"number"},mt={class:"today-add"},gt=s("div",{class:"line"},null,-1),pt={class:"top-item"},ct=["src"],dt={class:"top-rigth"},vt=s("div",{class:"text"},"超越了用户",-1),ht={class:"number"},ut=d("获客素材");t("default",e({setup(t){const{getIconUrl:e}=F(),a=u(),o=f(!1),l=f(!1),m=f(!1),d=f(!1),v=f(0),h=f(0),V=f("0%"),_=f(0),j=y([]),z=()=>{d.value&&(j.splice(0,j.length),d.value=!1),v.value+=1,1===v.value&&(o.value=!0),I({pageNum:v.value,pageSize:5,queryBean:{}}).then((t=>{const e=[];t.data.data.list.forEach(((t,i)=>{let a=-1;e.some(((e,i)=>t.lastVisitContentDate===e.lastVisitContentDate&&(a=i,!0)))?e[a].list.push(t):e.push({lastVisitContentDate:t.lastVisitContentDate,list:[t]})})),0!==t.data.data.list.length&&null!==t.data.data.list||(m.value=!0),1===t.data.data.pageNum?j.push(...e):e.forEach(((t,i)=>{e[i].lastVisitContentDate===j[j.length-1].lastVisitContentDate?j[j.length-1].list=j[j.length-1].list.concat(e[i].list):j.push(e[i])})),l.value=!1,(t.data.data.list.length<5||null===t.data.data)&&(l.value=!1,m.value=!0),o.value=!1})).catch((t=>{w.fail("访客数据查询失败"),l.value=!1,o.value=!1,m.value=!0}))},R=()=>{m.value=!1,l.value=!0,v.value=0,z()},U=t=>{t.relatedCustomerId?a.push({name:"customerDetail",query:{agentCustomerId:t.relatedCustomerId,customerType:t.relatedCustomerType},hash:"#1"}):a.push({path:"/visitorDetail",query:{shareId:t.shareId,tenantId:t.tenantId,visitId:t.id}})},O=()=>{a.push("/article")};return b((()=>{T({}).then((t=>{h.value=t.data.data.totalVisitor||0,V.value=t.data.data.visitorPercent||"0%",_.value=t.data.data.dailyVisitor||0})).catch((t=>{w.fail("分析访客数据查询失败")})),j.splice(0,j.length),R()})),(t,a)=>{const v=S("van-list"),u=S("van-pull-refresh"),f=S("van-button"),y=S("ZaPageWrap");return i(),C(y,{id:"outer","main-class":"page-visitors"},{default:x((()=>[s("div",at,[s("div",ot,[s("img",{src:n(e)("visitor.bookImg"),alt:"",class:"top-img"},null,8,st),s("div",rt,[nt,s("div",lt,r(h.value),1),s("div",mt,[s("span",null,r(`+${_.value}`),1)])])]),gt,s("div",pt,[s("img",{src:n(e)("visitor.peopleImg"),alt:"",class:"top-img"},null,8,ct),s("div",dt,[vt,s("div",ht,r(V.value),1)])])]),g(k(u,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=t=>d.value=t),onRefresh:R},{default:x((()=>[k(v,{loading:l.value,"onUpdate:loading":a[0]||(a[0]=t=>l.value=t),finished:m.value,"finished-text":"没有更多了",onLoad:z},{default:x((()=>[k(it,{"visitor-list":n(j),onOnClick:U},null,8,["visitor-list"])])),_:1},8,["loading","finished"])])),_:1},8,["modelValue"]),[[p,0!==n(j).length&&!o.value]]),o.value?(i(),C(D,{key:0,vertical:!0})):c("",!0),g(k(P,{"empty-class":"empty-area",title:"暂无访客",desc:"您还没有访客，先来分享一个获客素材吧~","empty-img":n(e)("visitor.emptyImg")},{emptyBtn:x((()=>[k(f,{round:"",type:"primary",class:"empty-btn",onClick:O},{default:x((()=>[ut])),_:1})])),_:1},8,["empty-img"]),[[p,0===n(j).length&&!o.value]])])),_:1})}}}))}}}))}();

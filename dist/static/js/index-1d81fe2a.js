import{g as b,C as h,M as k,a9 as E,r as I,k as d,h as T,j as A,y as c,m as _,E as M,A as S,F as L,I as R,a1 as Y,a2 as z,a3 as V,T as W}from"./vendor-e9263418.js";import{v as Z,s as j,a as N,c as P}from"./record-2e0ec2a3.js";import{_ as U}from"./plugin-vue_export-helper-46f75680.js";var $="/static/assets/voice.b927f3d6.png";const q=s=>(z("data-v-27cc4d18"),s=s(),V(),s),G={class:"wrapper"},H={class:"wave"},J={class:"text"},K=q(()=>c("img",{src:$,class:"image"},null,-1)),O=[K],Q=b({props:{visible:{type:Boolean,default:!1}},emits:["update:visible","record"],setup(s,{emit:a}){const l=h(new Array(20).fill(1).map(e=>({height:10})));let i;const m=()=>{i=setInterval(()=>{l.value=new Array(20).fill(1).map(e=>({height:Math.random()*100}))},100)},r=()=>{i&&clearInterval(i),l.value=new Array(20).fill(1).map(e=>({height:10}))};let o="stop";const n=h("\u6309\u4F4F\u8BF4\u8BDD");let v=0;const f=()=>{a("update:visible",!1)},g=()=>{Z(),o="recording",j(({file:e,duration:t})=>{a("record",{file:e,duration:t}),a("update:visible",!1),o="stop",r(),n.value="\u6309\u4F4F\u8BF4\u8BDD"}),m(),n.value="\u677E\u5F00\u5B8C\u6210/\u4E0A\u6ED1\u53D6\u6D88"},w=()=>{o="stop",r(),N().then(e=>{const{file:t,duration:u}=e;a("record",{file:t,duration:u}),a("update:visible",!1)}).catch(e=>{W.fail(e.message)}),n.value="\u6309\u4F4F\u8BF4\u8BDD"},B=()=>{o="cancel",r(),P(),n.value="\u6309\u4F4F\u8BF4\u8BDD"},F=e=>{e.preventDefault(),v=e.touches[0].pageY,setTimeout(()=>{g()},200)},x=e=>{e.touches[0].pageY-v<-30&&B()},D=e=>{setTimeout(()=>{o==="recording"&&(console.log("stop"),w())})},p=e=>{e.preventDefault()};return k(()=>{window.addEventListener("contextmenu",p),r()}),E(()=>{window.removeEventListener("contextmenu",p)}),(e,t)=>{const u=I("van-overlay");return d(),T(u,{show:s.visible,class:"com-za-voice",onClick:f},{default:A(()=>[c("div",G,[c("div",H,[(d(!0),_(L,null,M(l.value,(y,C)=>(d(),_("div",{key:C,class:"wave-item",style:S({height:`${y.height}%`})},null,4))),128))]),c("div",J,R(n.value),1),c("div",{class:"btn",onClick:t[0]||(t[0]=Y(()=>{},["stop"])),onTouchstart:F,onTouchmove:x,onTouchend:D},O,32)])]),_:1},8,["show"])}}});var se=U(Q,[["__scopeId","data-v-27cc4d18"]]);export{se as Z};

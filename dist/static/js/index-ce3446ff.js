var ot=Object.defineProperty,it=Object.defineProperties;var rt=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ct=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable;var j=(r,i,c)=>i in r?ot(r,i,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[i]=c,O=(r,i)=>{for(var c in i||(i={}))ct.call(i,c)&&j(r,c,i[c]);if(J)for(var c of J(i))dt.call(i,c)&&j(r,c,i[c]);return r},M=(r,i)=>it(r,rt(i));import{d as _,g as pt,C as E,a0 as mt,Q as vt,L as z,M as Dt,x as Ft,a4 as _t,m as d,y as a,z as l,n as m,j as o,G as At,F as P,a2 as gt,a3 as yt,r as S,a5 as Et,k as n,E as ft,J as ht,I as k,h as b,s as f,B as A,T as D}from"./vendor-e9263418.js";import{S as Bt,u as kt}from"./index-b8742a0a.js";import{q as bt,a as Tt}from"./apply-16b9dccc.js";import{i as St}from"./imageSelect-d364203c.js";import{_ as Ct}from"./index-b2499265.js";import{a as wt}from"./select-105475a6.js";import{_ as It}from"./plugin-vue_export-helper-46f75680.js";import"./jsbridge-7ca0f033.js";import"./oss-8e49e2fb.js";import"./index-e4c11be9.js";const G="2022-01-01",Vt="2030-12-31",xt=(r,i)=>{const c=[],h=r.split("-"),C=i.split("-"),g=new Date;g.setUTCFullYear(h[0],h[1]-1,h[2]);const V=new Date;V.setUTCFullYear(C[0],C[1]-1,C[2]);const w=g.getTime(),x=V.getTime();for(let y=w;y<=x;)c.push(`${_(y).format("YYYY\u5E74MM\u6708DD\u65E5")} \u5468${["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"][+_(y).format("d")]}`),y+=24*60*60*1e3;return c},Ot=r=>{const i=[];for(let c=0;c<=r;)c<=9?i.push(`0${c}\u65F6`):i.push(`${c}\u65F6`),c+=1;return i},Ut=()=>{const r=[];for(let i=0;i<=60;)i<=9?r.push(`0${i}\u5206`):r.push(`${i}\u5206`),i+=5;return r},$t=[{values:xt(G,Vt),defaultIndex:+_().diff(_(G),"day"),className:"date-pick"},{values:Ot(23),defaultIndex:_().format("HH")},{values:Ut(),defaultIndex:0}],Nt=[{label:"\u7EBF\u4E0B\u6D3B\u52A8",value:"offline_activity"},{label:"\u76F4\u64AD\u6D3B\u52A8",value:"online_activity"},{label:"\u7EBF\u4E0A\u83B7\u5BA2",value:"get_customer"}];const v=r=>(gt("data-v-93e01d68"),r=r(),yt(),r),Yt={class:"add-apply"},Lt={class:"upload-container"},Mt=["src"],Rt={key:0,class:"upload-btn"},qt=v(()=>a("span",{class:"upload-label"},"+",-1)),Ht=v(()=>a("span",{class:"upload-front"},"\u4E0A\u4F20\u6D3B\u52A8\u5C01\u9762",-1)),Jt=[qt,Ht],jt=v(()=>a("div",{class:"upload-title"},"\u5EFA\u8BAE\u5C3A\u5BF8 16:9",-1)),zt={key:1,class:"has-upload-btn"},Pt=v(()=>a("span",{class:"upload-label"},"+",-1)),Gt=v(()=>a("span",{class:"upload-front"},"\u4E0A\u4F20\u5C01\u9762",-1)),Qt=[Pt,Gt],Kt=v(()=>a("span",{class:"apply-title"},[A("\u6D3B\u52A8\u65B9\u5F0F"),a("span",{class:"star"},"*")],-1)),Wt={class:"f-select"},Xt=["onClick"],Zt=v(()=>a("span",null,[a("span",{class:"apply-title"},[A("\u6D3B\u52A8\u7C7B\u578B"),a("span",{class:"star"},"*")])],-1)),te={key:0},ee={key:1,class:"cell-val"},se=v(()=>a("span",null,[a("span",{class:"apply-title"},[A("\u6D3B\u52A8\u4E3B\u9898"),a("span",{class:"star"},"*")])],-1)),ue=v(()=>a("span",{class:"apply-title"},[A("\u6D3B\u52A8\u5F00\u59CB\u65F6\u95F4"),a("span",{class:"star"},"*")],-1)),ae={key:0},le={key:1,class:"cell-val"},ne=v(()=>a("span",{class:"apply-title"},[A("\u6D3B\u52A8\u7ED3\u675F\u65F6\u95F4"),a("span",{class:"star"},"*")],-1)),oe={key:0},ie={key:1,class:"cell-val"},re=v(()=>a("span",{class:"apply-title"},[A("\u62A5\u540D\u5F00\u59CB\u65F6\u95F4"),a("span",{class:"star"},"*")],-1)),ce={key:0},de={key:1,class:"cell-val"},pe=v(()=>a("span",{class:"apply-title"},[A("\u62A5\u540D\u622A\u6B62\u65F6\u95F4"),a("span",{class:"star"},"*")],-1)),me={key:0},ve={key:1,class:"cell-val"},De=v(()=>a("span",null,[a("span",{class:"apply-title"},[A("\u6D3B\u52A8\u5730\u5740"),a("span",{class:"star"},"*")])],-1)),Fe=v(()=>a("span",null,[a("span",{class:"apply-title"},[A("\u76F4\u64AD\u94FE\u63A5"),a("span",{class:"star"},"*")])],-1)),_e=v(()=>a("span",null,[a("span",{class:"apply-title"},[A("\u6D3B\u52A8\u94FE\u63A5"),a("span",{class:"star"},"*")])],-1)),Ae=v(()=>a("span",{class:"apply-title"},[A("\u62A5\u540D\u9879\u586B\u5199"),a("span",{class:"star"},"*")],-1)),ge={key:0},ye={key:1,class:"cell-val"},Ee=v(()=>a("span",{class:"apply-title"},[A("\u9650\u5236\u62A5\u540D\u4EBA\u6570"),a("span",{class:"star"},"*")],-1)),fe={key:0,class:"digit-input"},he=A("\u4EBA"),Be=v(()=>a("span",{class:"apply-title"},[A("\u6D3B\u52A8\u8303\u56F4"),a("span",{class:"star"},"*")],-1)),ke={key:0},be={key:1,class:"cell-val"},Te={class:"footer"},Se=v(()=>a("span",null,"\u4FDD\u5B58\u53D1\u5E03",-1)),Ce=[Se],we=pt({setup(r){const i=new Bt({source:"localStorage"}),{getIconUrl:c}=kt(),h=E($t),C=mt();vt();const g=z({startDate:!1,endDate:!1,registrationStartTime:!1,registrationEndTime:!1}),V=E([]),w=E(!1),x=E(!1),y=E(!1),U=E([]),Q=JSON.parse(sessionStorage.getItem("columnDTOS"))||[],K=JSON.parse(sessionStorage.getItem("applyInfo"))||{activityFormat:"offline_activity"};sessionStorage.removeItem("applyInfo"),sessionStorage.removeItem("columnDTOS");const e=z(M(O({},K),{columnDTOS:Q})),W=async()=>{var t,p,F;const u=await bt();((t=u.data)==null?void 0:t.status)===200&&(V.value=((F=(p=u.data)==null?void 0:p.data)==null?void 0:F.map(B=>({name:B.itemName,value:B.itemCode})))||[])},R=E(!1),$=u=>{g[u]=!0},q=()=>{St(1).then(u=>{if(Array.isArray(u)){const[t]=u;e.coverImage=t}})};Dt(()=>{W();const u=i.get("userInfo");(u==null?void 0:u.userType)==="I"||(u==null?void 0:u.userType)==="O"&&(u==null?void 0:u.agentLevel)<=60?x.value=!0:x.value=!1});const X=()=>{sessionStorage.setItem("applyInfo",JSON.stringify(e)),e.columnDTOS.length>0&&sessionStorage.setItem("columnDTOS",JSON.stringify(e.columnDTOS)),C.push({path:"./applyItem"})},Z=u=>{setTimeout(()=>{u.target&&u.target.scrollIntoView()},200)},N=(u,t)=>{console.log(u,t);const[p,F,B]=t,I=[p.slice(0,-3),F,B].join("").replace(/年|月|日|时|分/g,"");e[u]=_(I).format("YYYY-MM-DD HH:mm"),g[u]=!1},Y=E(0),tt=Ft(()=>{const u=e.columnDTOS.filter(t=>t.isSelected==="Y");if(u.length>0){const{length:t}=u,p=u.slice(0,3).map(F=>F.label).join(",");return t>3?`${p}...`:p}return""}),H=E(""),et=u=>{e.activityType=u.value,H.value=u.name},st=u=>{e.activityFormat=u},ut=async()=>{if(!e.activityType)return D("\u6D3B\u52A8\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A");if(!e.topic)return D("\u6D3B\u52A8\u4E3B\u9898\u4E0D\u80FD\u4E3A\u7A7A");if(!e.startDate)return D("\u6D3B\u52A8\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A");if(!e.endDate)return D("\u6D3B\u52A8\u5F00\u59CB\u7ED3\u675F\u4E0D\u80FD\u4E3A\u7A7A");if(_(e.endDate).isBefore(_(e.startDate)))return D("\u6D3B\u52A8\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u665A\u4E8E\u7ED3\u675F\u65F6\u95F4");if(e.activityFormat!=="get_customer"){if(!e.registrationStartTime)return D("\u62A5\u540D\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A");if(!e.registrationEndTime)return D("\u62A5\u540D\u7ED3\u675F\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A");if(_(e.registrationEndTime).isBefore(_(e.registrationStartTime)))return D("\u62A5\u540D\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u665A\u4E8E\u62A5\u540D\u622A\u6B62\u65F6\u95F4");if(_(e.endDate).isBefore(_(e.registrationStartTime)))return D("\u62A5\u540D\u5F00\u59CB\u65F6\u95F4\u4E0D\u80FD\u665A\u4E8E\u6D3B\u52A8\u7ED3\u675F\u65F6\u95F4");if(_(e.endDate).isBefore(_(e.registrationEndTime)))return D("\u62A5\u540D\u622A\u6B62\u65F6\u95F4\u4E0D\u80FD\u665A\u4E8E\u6D3B\u52A8\u7ED3\u675F\u65F6\u95F4");if(w.value&&!e.registrationLimit)return D("\u9650\u5236\u62A5\u540D\u4EBA\u6570\u4E0D\u80FD\u4E3A\u7A7A");if(e.columnDTOS.length===0)return D("\u62A5\u540D\u9879\u586B\u5199\u4E0D\u80FD\u4E3A\u7A7A");if(!e.address)return D(e.activityFormat==="online_activity"?"\u6D3B\u52A8\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A":"\u76F4\u64AD\u94FE\u63A5\u4E0D\u80FD\u4E3A\u7A7A")}else if(!e.address)return D("\u6D3B\u52A8\u94FE\u63A5\u4E0D\u80FD\u4E3A\u7A7A");if(Y.value===0)return D("\u6D3B\u52A8\u8303\u56F4\u4E0D\u80FD\u4E3A\u7A7A");Tt(M(O({},e),{columnDTOS:e.columnDTOS.map(u=>M(O({},u),{required:u.required?"Y":"N"})),dispatchTarget:U.value})).then(u=>{u.data.status===200&&(D("\u521B\u5EFA\u6210\u529F\uFF01"),C.back())})},at=u=>{U.value=u.map(t=>O({id:t.agencyId,name:t.agencyName},t))};return _t(U,async u=>{const t=[];u.forEach(F=>{const{id:B,memberCode:L,memberType:T}=F;t.push({memberCode:L||B,memberType:T})});const{data:{data:p=0}}=await wt({codeList:t});Y.value=p}),(u,t)=>{const p=S("van-cell"),F=S("van-field"),B=S("van-switch"),L=S("van-cell-group"),T=S("van-picker"),I=S("van-popup"),lt=S("van-action-sheet"),nt=Et("resize");return n(),d(P,null,[a("div",Yt,[a("div",Lt,[a("img",{src:l(e).coverImage||l(c)("apply.bgImg"),alt:"",class:"bg-img"},null,8,Mt),l(e).coverImage?(n(),d("div",zt,[a("div",{class:"btn",onClick:q},Qt)])):(n(),d("div",Rt,[a("div",{class:"btn",onClick:q},Jt),jt]))]),m(L,null,{default:o(()=>[m(p,{class:"active-line"},{title:o(()=>[Kt]),value:o(()=>[a("div",Wt,[(n(!0),d(P,null,ft(l(Nt),s=>(n(),d("div",{key:s.value,class:ht(["m-box",{active:l(e).activityFormat===s.value}]),onClick:Ie=>st(s.value)},k(s.label),11,Xt))),128))])]),_:1}),m(p,{"is-link":"","label-class":"label","input-align":"right",onClick:t[0]||(t[0]=s=>y.value=!0)},{title:o(()=>[Zt]),value:o(()=>[l(e).activityType?(n(),d("span",te,k(H.value),1)):(n(),d("span",ee,"\u8BF7\u9009\u62E9"))]),_:1}),m(F,{modelValue:l(e).topic,"onUpdate:modelValue":t[1]||(t[1]=s=>l(e).topic=s),"label-class":"label","input-align":"right",placeholder:"\u8BF7\u586B\u5199\u6D3B\u52A8\u4E3B\u9898",maxlength:15},{label:o(()=>[se]),_:1},8,["modelValue"]),m(p,{"is-link":"",onClick:t[2]||(t[2]=s=>$("startDate"))},{title:o(()=>[ue]),value:o(()=>[l(e).startDate?(n(),d("span",ae,k(l(e).startDate),1)):(n(),d("span",le,"\u8BF7\u9009\u62E9"))]),_:1}),m(p,{"title-class":"label","is-link":"",onClick:t[3]||(t[3]=s=>$("endDate"))},{title:o(()=>[ne]),value:o(()=>[l(e).endDate?(n(),d("span",oe,k(l(e).endDate),1)):(n(),d("span",ie,"\u8BF7\u9009\u62E9"))]),_:1}),l(e).activityFormat!=="get_customer"?(n(),b(p,{key:0,"title-class":"label","is-link":"",onClick:t[4]||(t[4]=s=>$("registrationStartTime"))},{title:o(()=>[re]),value:o(()=>[l(e).registrationStartTime?(n(),d("span",ce,k(l(e).registrationStartTime),1)):(n(),d("span",de,"\u8BF7\u9009\u62E9"))]),_:1})):f("",!0),l(e).activityFormat!=="get_customer"?(n(),b(p,{key:1,"title-class":"label","is-link":"",onClick:t[5]||(t[5]=s=>$("registrationEndTime"))},{title:o(()=>[pe]),value:o(()=>[l(e).registrationEndTime?(n(),d("span",me,k(l(e).registrationEndTime),1)):(n(),d("span",ve,"\u8BF7\u9009\u62E9"))]),_:1})):f("",!0),l(e).activityFormat==="offline_activity"?(n(),b(F,{key:2,modelValue:l(e).address,"onUpdate:modelValue":t[6]||(t[6]=s=>l(e).address=s),"label-class":"label","input-align":"right",maxlength:30,placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u5730\u5740"},{label:o(()=>[De]),_:1},8,["modelValue"])):f("",!0),l(e).activityFormat==="online_activity"?(n(),b(F,{key:3,modelValue:l(e).address,"onUpdate:modelValue":t[7]||(t[7]=s=>l(e).address=s),"label-class":"label","input-align":"right",maxlength:100,placeholder:"\u8BF7\u8F93\u5165\u76F4\u64AD\u94FE\u63A5"},{label:o(()=>[Fe]),_:1},8,["modelValue"])):f("",!0),l(e).activityFormat==="get_customer"?(n(),b(F,{key:4,modelValue:l(e).address,"onUpdate:modelValue":t[8]||(t[8]=s=>l(e).address=s),"label-class":"label","input-align":"right",maxlength:100,placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u94FE\u63A5"},{label:o(()=>[_e]),_:1},8,["modelValue"])):f("",!0),l(e).activityFormat!=="get_customer"?(n(),b(p,{key:5,"title-class":"label","is-link":"",onClick:X},{title:o(()=>[Ae]),value:o(()=>[l(e).columnDTOS.length>0?(n(),d("span",ge,k(l(tt)),1)):(n(),d("span",ye,"\u8BF7\u9009\u62E9"))]),_:1})):f("",!0),l(e).activityFormat!=="get_customer"?(n(),b(p,{key:6,"title-class":"label",class:"digit-container"},{title:o(()=>[Ee]),value:o(()=>[w.value?(n(),d("div",fe,[m(F,{modelValue:l(e).registrationLimit,"onUpdate:modelValue":t[9]||(t[9]=s=>l(e).registrationLimit=s),type:"digit",maxlength:4,"input-align":u.right,border:!1,placeholder:"\u8BF7\u8F93\u5165"},{extra:o(()=>[he]),_:1},8,["modelValue","input-align"])])):f("",!0),m(B,{modelValue:w.value,"onUpdate:modelValue":t[10]||(t[10]=s=>w.value=s)},null,8,["modelValue"])]),_:1})):f("",!0),x.value?(n(),b(p,{key:7,"title-class":"label","is-link":"",onClick:t[11]||(t[11]=s=>R.value=!0)},{title:o(()=>[Be]),value:o(()=>[Y.value>0?(n(),d("span",ke,"\u5DF2\u9009"+k(Y.value)+"\u4EBA",1)):(n(),d("span",be,"\u8BF7\u9009\u62E9"))]),_:1})):f("",!0)]),_:1}),m(F,{modelValue:l(e).introduction,"onUpdate:modelValue":t[12]||(t[12]=s=>l(e).introduction=s),class:"apply-intro",type:"textarea",rows:"3",label:"\u6D3B\u52A8\u4ECB\u7ECD","show-word-limit":"",placeholder:"\u8BF7\u8F93\u5165\u6D3B\u52A8\u4ECB\u7ECD",maxlength:50,onFocus:Z},null,8,["modelValue"])]),m(I,{show:l(g).startDate,"onUpdate:show":t[14]||(t[14]=s=>l(g).startDate=s),position:"bottom",style:{height:"40%"}},{default:o(()=>[m(T,{ref:"pickerRef",title:"\u9009\u62E9\u65E5\u671F",class:"picker-lct",columns:h.value,onConfirm:t[13]||(t[13]=s=>N("startDate",s))},null,8,["columns"])]),_:1},8,["show"]),m(I,{show:l(g).endDate,"onUpdate:show":t[16]||(t[16]=s=>l(g).endDate=s),position:"bottom",style:{height:"40%"}},{default:o(()=>[m(T,{ref:"pickerRef",title:"\u9009\u62E9\u65E5\u671F",class:"picker-lct",columns:h.value,onConfirm:t[15]||(t[15]=s=>N("endDate",s))},null,8,["columns"])]),_:1},8,["show"]),m(I,{show:l(g).registrationStartTime,"onUpdate:show":t[18]||(t[18]=s=>l(g).registrationStartTime=s),position:"bottom",style:{height:"40%"}},{default:o(()=>[m(T,{ref:"pickerRef",title:"\u9009\u62E9\u65E5\u671F",class:"picker-lct",columns:h.value,onConfirm:t[17]||(t[17]=s=>N("registrationStartTime",s))},null,8,["columns"])]),_:1},8,["show"]),m(I,{show:l(g).registrationEndTime,"onUpdate:show":t[20]||(t[20]=s=>l(g).registrationEndTime=s),position:"bottom",style:{height:"40%"}},{default:o(()=>[m(T,{ref:"pickerRef",title:"\u9009\u62E9\u65E5\u671F",class:"picker-lct",columns:h.value,onConfirm:t[19]||(t[19]=s=>N("registrationEndTime",s))},null,8,["columns"])]),_:1},8,["show"]),m(Ct,{visible:R.value,"onUpdate:visible":t[21]||(t[21]=s=>R.value=s),mode:"multiple","select-value":U.value,onOnSubmit:at},null,8,["visible","select-value"]),m(lt,{show:y.value,"onUpdate:show":t[22]||(t[22]=s=>y.value=s),actions:V.value,"close-on-click-action":"","cancel-text":"\u53D6\u6D88",onSelect:et,onCancel:t[23]||(t[23]=s=>y.value=!1)},null,8,["show","actions"]),At((n(),d("div",Te,[a("div",{class:"btn",onClick:ut},Ce)])),[[nt]])],64)}}});var He=It(we,[["__scopeId","data-v-93e01d68"]]);export{He as default};

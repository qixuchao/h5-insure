var G=Object.defineProperty,W=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var F=(s,e,a)=>e in s?G(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a,S=(s,e)=>{for(var a in e||(e={}))X.call(e,a)&&F(s,a,e[a]);if(k)for(var a of k(e))Z.call(e,a)&&F(s,a,e[a]);return s},b=(s,e)=>W(s,Q(e));import{g as q,j as T,n as ee,z as d,J as L,O as ae,E as c,h as te,r as E,k as oe,m as U,A as h,p as m,T as N}from"./vendor-667a94d7.js";import{S as se}from"./infoCollection-242da9b6.js";import{_ as V}from"./index-7f86510e.js";import{m as ne,P as re}from"./modal-bg-592b3965.js";import{a as le}from"./order-b675ac95.js";import{i as ie,a as ue,s as de,e as ce,E as me}from"./trial-7543687b.js";import{g as pe,l as ve,t as _e,a as fe,c as Ie,d as ge,e as R}from"./logo-53e805d2.js";import{p as he}from"./product-c2782fe6.js";import{b as De}from"./blank-84b83865.js";import"./trial-1c1760a8.js";const xe={class:"com-field-info"},ye={class:"title"},Ce={class:"desc"},Oe=q({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(s){return(e,a)=>(T(),ee("div",xe,[d("div",ye,L(s.title),1),d("div",Ce,L(s.desc),1)]))}});var x=V(Oe,[["__scopeId","data-v-34962902"]]);const Se={class:"page-activity-upgrade"},Ee=["src"],Pe=["src"],we={class:"container"},Be={class:"main-form"},ke=q({setup(s){const e=ae(),{productCode:a="BWYL2022",tenantId:v,orderId:M,extInfo:A}=e.query,$=pe(A),p=c(),D=c(),t=c(),_=c(),y=c(),C=c(),O=c(!1),j=()=>{O.value=!1},H=async()=>{var u,i,f,I,g;const r=fe({tenantId:v,applicationNo:t.value.applicationNo,policyNo:t.value.policyNo,saleChannelId:t.value.saleChannelId,orderStatus:le.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:p.value,paymentMethod:(i=(u=t.value.extInfo)==null?void 0:u.extraInfo)==null?void 0:i.paymentMethod,renewalDK:(I=(f=t.value.extInfo)==null?void 0:f.extraInfo)==null?void 0:I.renewalDK,successJumpUrl:"",premium:_.value,holder:t.value.tenantOrderHolder,insured:b(S({},t.value.tenantOrderInsuredList[0]),{socialFlag:t.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:Ie({tenantId:v,riskList:ge(D.value.productRiskVoList[0].riskDetailVOList,p.value),riskPremium:{},productId:(g=p.value)==null?void 0:g.id})}),o=await de(r),{code:l,data:n}=o;return l==="10000"?n.data:""},P=async()=>{const r=R({tenantId:v,premium:_.value,orderDetail:t.value,productDetail:p.value,insureDetail:D.value}),o=await ce(r),{code:l,data:n}=o;l==="10000"&&(_.value=n.installmentPremium,C.value=n.signUrl)},J=async r=>{const o=R({tenantId:v,premium:_.value,orderDetail:t.value,productDetail:p.value,insureDetail:D.value}),l=await me(S({id:r},o)),{code:n,data:u}=l;n==="10000"&&(O.value=!0)},K=async r=>{try{N.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"}),await P();const o=await H();C.value?window.location.href=C.value:J(o)}catch(o){console.log(o),N.clear()}},Y=()=>{const r=he({productCode:a,withInsureInfo:!0}),o=ie({productCode:a}),l=ue({id:M||$.orderId,tenantId:v});Promise.all([r,o,l]).then(([n,u,i])=>{n.code==="10000"&&(p.value=n.data),u.code==="10000"&&(D.value=u.data),i.code==="10000"&&(t.value=i.data,y.value=i.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),P()})};return te(()=>{Y()}),(r,o)=>{const l=E("ProRadioButton"),n=E("ProField"),u=E("van-config-provider");return T(),oe(u,{"theme-vars":h(_e)},{default:U(()=>{var i,f,I,g,w,B;return[d("div",Se,[d("img",{class:"logo",src:h(ve)},null,8,Ee),d("img",{class:"banner",src:h(De)},null,8,Pe),d("div",we,[d("div",Be,[m(x,{title:"\u59D3\u540D",desc:(f=(i=t.value)==null?void 0:i.tenantOrderInsuredList)==null?void 0:f[0].name},null,8,["desc"]),m(x,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(g=(I=t.value)==null?void 0:I.tenantOrderInsuredList)==null?void 0:g[0].certNo},null,8,["desc"]),m(x,{title:"\u624B\u673A\u53F7\u7801",desc:(B=(w=t.value)==null?void 0:w.tenantOrderHolder)==null?void 0:B.mobile},null,8,["desc"]),m(x,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${_.value||"0"} / \u6BCF\u6708`},null,8,["desc"]),m(n,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:U(()=>[m(l,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=z=>y.value=z),disabled:!0,options:h(se)},null,8,["modelValue","options"])]),_:1}),d("div",{class:"submit",onClick:K})])]),m(re,{"is-show":O.value,bg:h(ne),onOnClose:j},null,8,["is-show","bg"])])]}),_:1},8,["theme-vars"])}}});var $e=V(ke,[["__scopeId","data-v-5ef96c34"]]);export{$e as default};

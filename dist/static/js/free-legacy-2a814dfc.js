!function(){var e=document.createElement("style");e.innerHTML=".free-crad .page-info-wrapper .com-card-wrap .header.showLine{display:none}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell{background:#f6f6f6;border-radius:.21333rem;margin-bottom:.32rem;height:1.17333rem;padding:0 .42667rem;display:flex;align-items:center}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell .van-field__label{width:1.62667rem;margin-top:0;margin-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell .van-cell__value .van-field__body{width:100%}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell:after{border-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell:after{border-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-field__label{width:1.62667rem;margin-top:0;margin-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body{width:100%}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder{padding-right:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap{width:100%}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn{display:flex;justify-content:flex-start}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn .btn-wrapper{margin:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn .btn-wrapper .com-check-btn{min-width:1.33333rem;border-radius:.53333rem!important;margin:0 .10667rem .13333rem 0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell:after{border-bottom:0}.free-crad[data-v-a8331544]{padding:0 .42667rem;background:linear-gradient(var(--2689eaee),var(--2689eab0))}.free-crad .container[data-v-a8331544]{padding:.61333rem .53333rem .26667rem;background:#ffffff;text-align:center;border-radius:.53333rem}.free-crad .container .title[data-v-a8331544]{height:.44rem;margin-bottom:.53333rem;display:flex;align-items:center;justify-content:center}.free-crad .container .title span[data-v-a8331544]{font-size:.42667rem;font-family:PingFangSC-Semibold,PingFang SC;font-weight:600;color:#333;line-height:.42667rem;margin:0 .29333rem}.free-crad .container .title img[data-v-a8331544]{height:.4rem}.free-crad .container .holder-form[data-v-a8331544]{height:4.66667rem}.page-free-product-detail[data-v-142b784e]{background:var(--707c785f);padding-bottom:3.14667rem}.page-free-product-detail .submit-btn[data-v-142b784e]{margin-top:.4rem}.page-free-product-detail .product-desc img[data-v-142b784e]{width:100%}.page-free-product-detail .page-free-footer[data-v-142b784e]{position:fixed;width:100%;bottom:0;padding:0 .93333rem .93333rem;box-sizing:border-box}\n",document.head.appendChild(e),System.register(["./vendor-legacy-138e8bc1.js","./index-legacy-83ba9d3e.js","./index-legacy-c22b8fcd.js","./nextStep-legacy-f76b39fa.js","./phoneVerify-legacy-339e17a0.js","./index-legacy-32aa29e8.js","./product-legacy-9b2956ae.js","./trial-legacy-5e5a3b6e.js","./utils-legacy-8bc878e8.js","./theme-legacy-41f77bf2.js","./infoCollection-legacy-6d491816.js","./relativeTime-legacy-d567c99d.js","./useDicData-legacy-cf584788.js","./useStorage-legacy-8ec3dffb.js","./trial-legacy-0e931235.js"],(function(e){"use strict";var a,t,r,n,o,i,l,d,c,s,u,p,f,m,w,v,g,h,b,y,A,I,_,P,C,O,x,F,k,j,D,V,T,B,E,U,H,S,N,z,L,R,M;return{setters:[function(e){a=e.m,t=e.az,r=e.r,n=e.Q,o=e.a1,i=e.t,l=e.y,d=e.G,c=e.H,s=e.z,u=e.$,p=e.a7,f=e.a8,m=e.ac,w=e.u,v=e.o,g=e.aA,h=e.s,b=e.v,y=e.x,A=e.B,I=e.L,_=e.F,P=e.T},function(e){C=e.P},function(e){O=e.B,x=e.A,F=e._,k=e.P},function(e){j=e._,D=e.n},function(e){V=e.a,T=e.s,B=e.c},function(e){E=e._,U=e.a8},function(e){H=e.p,S=e.g},function(e){N=e.i,z=e.t},function(e){L=e.v,R=e.f},function(e){M=e.u},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAMAAACBgxnEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA8UExURUdwTPpkAPpkAPpkAPlkAPlkAP9fAPpkAP9jAPljAPljAPlkAPdhAP9VAPhlAPpjAPpiAPpkAPlhAPpkAKrbDd8AAAATdFJOUwCe3XX6YBgzC+yKwSIDTrE+0C9Hm6hZAAAAf0lEQVR42u2MSw6AIAxEi6CCf+j976ommvG3omxMOqv2vczQmZa3tPRMptdZndVZndXZf892/JGOxN68qUEr24/zk84jSvne93fae3Qk3scrjZeWzDcVaNUQIvRDOGkYQOU+hYMmsBJ+cTt1C0gZP7mNTvhL+Zq5xlfOW4tb6le9ZDBDk4RvXwAAAABJRU5ErkJggg==";const G={class:"free-crad"},J={class:"container"},Q={class:"title"},X=["src"],$=(e=>(p("data-v-a8331544"),e=e(),f(),e))((()=>d("span",null,"最后一步 填写信息",-1))),q=["src"],K=a({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}}},setup(e,{expose:a}){const p=e;t((e=>({"2689eaee":p.colors[0],"2689eab0":p.colors[1]})));const f=r(),m=n({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"手机号"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"验证码"}],2:[],3:[]},isFirst:!0}),w=async(e,a)=>{const t=p.isFirst?V:T,r=await t(e),{code:n,data:o}=r;"10000"===n&&a?.()};return o((()=>p.isFirst),(()=>{p.isFirst||(m.factorObj=p.insureDetail?.productFactor)})),a({validateForm:()=>new Promise(((e,a)=>{f.value.validateForm().then((a=>{e(!0)})).catch((()=>{a()}))}))}),(a,t)=>(i(),l("div",G,[d("div",J,[d("div",Q,[d("img",{src:c(Z)},null,8,X),$,d("img",{src:c(Z)},null,8,q)]),s(j,{ref_key:"formRef",ref:f,"send-sms-code":w,"form-info":e.detail,"factor-object":c(m).factorObj},null,8,["form-info","factor-object"]),u(a.$slots,"default",{},void 0,!0)])]))}});var Y=E(K,[["__scopeId","data-v-a8331544"]]);const W={class:"page-free-product-detail"},ee={class:"product-desc"},ae={key:0,class:"page-free-footer"};e("default",E(a({setup(e){t((e=>({"707c785f":c(X).colors[1]})));const a=M(),o=m(),u=w(),{productCode:p="",openId:f="",tenantId:j="",indirectCode:V="123",saleUserId:T="",saleChannelId:E="",extraInfo:Z}=u.query;let G="";const J=r(),Q=r(),X=n({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},banner:"",productDesc:[],newAuth:!0,isValidateCode:!1,insureDetail:{},loading:!0,showBtn:!1,activeIndex:0,showFilePreview:!1,isOnlyView:!0}),$=r();let q={};try{q=JSON.parse(decodeURIComponent(Z))}catch(ie){}const K=async()=>{X.loading=!0;const e=H({productCode:p,withInsureInfo:!0,tenantId:j}),a=N({productCode:p}),t=S({openId:f});await Promise.all([e,a,t]).then((([e,a,t])=>{if("10000"===e.code){X.detail=e.data,X.banner=X.detail.tenantProductInsureVO?.banner[0];const{colorEnd:a,colorStart:t}=X.detail.tenantProductInsureVO?.backgroundInsureVO||{};X.colors=[t,a],X.productDesc=X.detail.tenantProductInsureVO.spec||[],document.title=X.detail.productFullName||""}"10000"===a.code&&(X.insureDetail=a.data,X.insureDetail.productFactor[1].forEach((e=>{"verificationCode"===e.code&&1===e.isDisplay&&(X.isValidateCode=!0)})),X.insureDetail.productFactor[2]=X.insureDetail.productFactor?.[2].map((e=>("relationToHolder"===e.code&&1===e.isDisplay&&(e.title="被保人",X.order.tenantOrderInsuredList[0].relationToHolder=e.attributeValueList?.[0]?.code||""),e)))),"10000"===t.code&&(X.newAuth=!t.data),(()=>{let e={};if(e=X.detail.tenantProductInsureVO.planInsureVO.attachmentVOList||[],!e)return void($.value=[]);const a={2:"richText",3:"link"};$.value=Object.keys(e).map((t=>(e[t].forEach((e=>{if("1"===e.attachmentType){const a=e.attachmentUri.split("?"),t=a[0].substr(a[0].lastIndexOf(".")+1);e.attachmentType="pdf"===t?"pdf":"picture"}else e.attachmentType=a[e.attachmentType]})),{attachmentName:t,attachmentList:e[t]})))})(),X.loading=!1}))},te=async()=>{let e={loginType:"2",openId:f,thirdUserType:"XINAO_WECHAT",indirectCode:V};try{if(X.newAuth?(e.loginName=X.order.tenantOrderHolder.mobile,e.password=X.order.tenantOrderHolder.verificationCode):e=R({order:X.order,tenantId:j,extraInfo:q,detail:X.detail,insureDetail:X.insureDetail,iseeBizNo:G,saleUserId:T,templateId:q?.templateId,saleChannelId:E,pageCode:"infoCollection",buttonCode:"EVENT_FREE_multiIssuePolicy"}),X.newAuth){const{code:a,data:t}=await z(e);"10000"===a&&(X.newAuth=!1)}else D(e,((e,a)=>{a===U.JUMP_PAGE&&e.orderNo&&o.push(`/baseInsurance/orderDetail?from=free&tenantId=${j}&orderNo=${e.orderNo}&productCode=${p}`)}))}catch(a){}},re=async()=>await(async()=>{await Q.value.validateForm();const e=X.order.tenantOrderHolder?.verificationCode;if(!e||!L(e))return P({message:"请输入正确的验证码"}),!1;if(X.newAuth||!X.isValidateCode)return!0;const{code:a,data:t}=await B(X.order.tenantOrderHolder.mobile,e);return!!t})()?(X.newAuth?te():(X.isOnlyView=!1,X.showFilePreview=!0),!1):null,ne=()=>{X.showFilePreview=!1,X.isOnlyView=!1},oe=()=>{X.showFilePreview=!1,X.isOnlyView=!0,te()};return v((()=>{K(),setTimeout((async()=>{G=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),g(J,(([{isIntersecting:e}],a)=>{X.showBtn=!e})),(e,t)=>{const r=h("van-image"),n=h("van-config-provider");return i(),b(n,{"theme-vars":c(a)},{default:y((()=>[d("div",W,[s(O,{url:c(X).banner},null,8,["url"]),s(Y,{ref_key:"formRef",ref:Q,"is-first":c(X).newAuth,"insure-detail":c(X).insureDetail,detail:c(X).order,colors:c(X).colors},{default:y((()=>[s(C,{ref_key:"root",ref:J,class:"submit-btn","is-gradient":!1,text:c(X).newAuth?"立即领取":"激活保障",onClick:re},null,8,["text"]),$.value&&$.value.length>0?(i(),b(x,{key:0,"attachement-list":$.value,"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{X.activeIndex=e,X.showFilePreview=!0})(e))},null,8,["attachement-list"])):A("",!0)])),_:1},8,["is-first","insure-detail","detail","colors"]),d("div",ee,[(i(!0),l(_,null,I(c(X).productDesc,((e,a)=>(i(),b(r,{key:a,width:"100%","lazy-load":"",src:e,class:""},null,8,["src"])))),128))]),c(X).showBtn?(i(),l("footer",ae,[s(C,{"is-gradient":!1,text:c(X).newAuth?"立即领取":"激活保障",onClick:re},null,8,["text"])])):A("",!0)]),c(X).showFilePreview?(i(),b(F,{key:0,show:c(X).showFilePreview,"onUpdate:show":t[1]||(t[1]=e=>c(X).showFilePreview=e),"content-list":$.value,"is-only-view":c(X).isOnlyView,"active-index":c(X).activeIndex,text:c(X).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-cound":0,"on-close-file-preview":"",onSubmit:oe,onOnCloseFilePreview:ne},null,8,["show","content-list","is-only-view","active-index","text"])):A("",!0),c(X).loading?A("",!0):(i(),b(k,{key:1,"product-detail":c(X).detail},null,8,["product-detail"]))])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-142b784e"]]))}}}))}();

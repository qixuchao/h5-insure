var w=Object.defineProperty,z=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var P=(n,e,t)=>e in n?w(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,l=(n,e)=>{for(var t in e||(e={}))J.call(e,t)&&P(n,t,e[t]);if(N)for(var t of N(e))Q.call(e,t)&&P(n,t,e[t]);return n},y=(n,e)=>z(n,H(e));import{g as W,aj as K,Q as X,E as L,d as Z,M as ee,h as te,r as d,j as p,k as D,m as _,p as f,n as S,G as M,A as T,F as b,z as E,J as ae,C as k,T as A,L as se}from"./vendor-c15a8cf7.js";import{_ as oe,l as I,I as ne,H as ue,P as ie,K as re}from"./index-55d5b8ed.js";import{l as ce,a as le}from"./inform-47e0087e.js";import{a as de,n as pe}from"./index-70cd62ff.js";import{s as _e}from"./useStorage-6f1f6189.js";import{s as fe}from"./verify-b9dd34b8.js";const Ee={class:"date"},me={class:"inform-file"},Be={class:"tips"},ge=k(" \u60A8\u7684\u7B7E\u540D\u5C06\u88AB\u7528\u4E8E"),Ce=k("\u6587\u4EF6 "),ve={class:"footer-button"},he=k("\u4E0B\u4E00\u6B65"),ye=W({setup(n){const e=K(),t=X(),{productCode:R="MMBBSF",agentCode:q="65434444",tenantId:m="9991000007",agencyCode:De="3311222",insurerCode:x="zhongan",productCategory:j=1,templateId:U=1,orderNo:C="2022080217103534947"}=t.query,r=L(null),v=L(!1),G=Z().format("YYYY-MM-DD"),O=()=>{var a;(a=r.value)==null||a.clear()},s=ee({noticeType:"",materialSource:"",noticeList:[],pageData:{}}),V=()=>{de({orderNo:C,saleUserId:q,tenantId:m}).then(({code:a,data:o})=>{a==="10000"&&(Object.assign(s.pageData,o),o.tenantOrderAttachmentList.forEach(i=>{i.category===ne.ELECTRIC_SIGN&&i.objectType===ue.AGENT&&r.value.setDataURL(i.fileBase64)}))})};te(()=>{V(),ce({insurerCode:x,orderNo:C,productCategory:j,tenantId:m,noticeType:9,objectType:3}).then(({code:a,data:o})=>{a==="10000"&&(s.noticeList=[...s.noticeList,...o])}),le({objectType:3,orderNo:C,tenantId:m,productCode:R}).then(({code:a,data:o})=>{a==="10000"&&(s.noticeList=[...s.noticeList,...o])})});const Y=a=>{_e.set("questionData",a),e.push({path:"/healthNotice",query:l({questionnaireType:a.questionnaireType},t.query)})},$=()=>{var i,B;if(!(s.noticeList&&s.noticeList.every(c=>c.isDone===1))){A("\u8BF7\u5B8C\u6210\u6240\u6709\u544A\u77E5\u8FDB\u884C\u4E0B\u4E00\u6B65");return}if((i=r.value)==null?void 0:i.isEmpty()){A("\u8BF7\u5B8C\u6210\u4EE3\u7406\u4EBA\u7B7E\u5B57\u8FDB\u884C\u4E0B\u4E00\u6B65");return}if(!v.value){A("\u8BF7\u52FE\u9009\u540C\u610F\u7B7E\u540D");return}const o=(B=r.value)==null?void 0:B.save();fe("AGENT",o,s.pageData.id,m).then(c=>{c&&pe(y(l({},s.pageData),{extInfo:y(l({},s.pageData.extInfo),{templateId:U,pageCode:"salesNotice"}),venderCode:x})).then(({code:h,data:g})=>{h==="10000"&&g.pageAction.pageAction==="jumpToPage"&&e.push({path:ie[g.pageAction.data.nextPageCode],query:l({},t.query)})})})};return(a,o)=>{const i=d("van-cell"),B=d("ProSign"),c=d("van-checkbox"),h=d("van-button"),g=d("ProPageWrap");return p(),D(g,{class:"page-salesman-inform"},{default:_(()=>[f(I,{title:"\u8425\u9500\u5458\u544A\u77E5\u4E66"},{default:_(()=>[(p(!0),S(b,null,M(T(s).noticeList,u=>(p(),D(i,{key:u.id,class:se({"is-active":u.isDone===2}),title:`\u300A${u.title}\u300B`,"is-link":"",value:`${u.isDone===1?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:F=>Y(u)},null,8,["class","title","value","onClick"]))),128))]),_:1}),f(I,{title:"\u8425\u9500\u5458\u7B7E\u5B57","show-divider":!1,"show-line":!1},{extra:_(()=>[E("div",{class:"resign",onClick:O},"\u91CD\u7B7E")]),default:_(()=>[f(B,{ref_key:"agentSignRef",ref:r,selector:"sign2"},null,512),E("div",Ee,"\u7B7E\u540D\u65E5\u671F\uFF1A "+ae(T(G)),1)]),_:1}),E("div",me,[f(c,{modelValue:v.value,"onUpdate:modelValue":o[0]||(o[0]=u=>v.value=u),shape:"square"},null,8,["modelValue"]),E("p",Be,[ge,(p(!0),S(b,null,M(T(s).noticeList,(u,F)=>(p(),D(re,{key:F,class:"file",title:`\u300A${u.title}\u300B`,content:"",type:""},null,8,["title"]))),128)),Ce])]),E("div",ve,[f(h,{type:"primary",block:"",onClick:$},{default:_(()=>[he]),_:1})])]),_:1})}}});var Le=oe(ye,[["__scopeId","data-v-de0c56c4"]]);export{Le as default};

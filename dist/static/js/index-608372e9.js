import{g as N,a0 as T,C as _,L as C,M as b,h as S,j as H,r as B,k as d,y as a,n as g,z as o,G as v,H as m,m as D,E as O,I as U,F as Y,s as q,a2 as G,a3 as M,B as P,T as W,D as Z}from"./vendor-e9263418.js";import{u as $,S as j}from"./index-b8742a0a.js";import{_ as z}from"./index-654379f5.js";import{a as R}from"./article-20e0fb3d.js";import{S as J,E as K}from"./Empty-9e778902.js";import{_ as Q}from"./plugin-vue_export-helper-46f75680.js";const X=n=>(G("data-v-5194410d"),n=n(),M(),n),ee={class:"search-area"},se={class:"search-history"},te={class:"history-top"},ae=X(()=>a("div",{class:"search-title"},"\u641C\u7D22\u5386\u53F2",-1)),oe=P(" \u6E05\u9664\u8BB0\u5F55"),le=["src"],ce={class:"history-bottom"},re=["onClick"],ie={class:"history-text"},ne={class:"search-list"},ue=N({setup(n){const{getIconUrl:p}=$(),f=T(),u=new j({source:"localStorage"}),c=_(!1),r=_(""),i=_(!1),s=C([]),t=C([]),k=()=>{i.value=!1,t.splice(0,t.length)},E=e=>{r.value=e,console.log(r.value,"SearchValue")},y=e=>{e!==""&&(s.includes(e)?(s.splice(s.indexOf(e),1),s.unshift(e),u.set("historyList",s)):(s.unshift(e),s.length>8&&s.splice(8),u.set("historyList",s))),t.splice(0,t.length),console.log(t),i.value=!0,c.value=!0,R({queryBean:{title:r.value}}).then(l=>{console.log(l.data.data.list),t.push(...l.data.data.list),c.value=!1}).catch(l=>{W.fail("\u641C\u7D22\u5931\u8D25"),console.log(l),c.value=!1})},I=()=>{console.log("\u53D6\u6D88\u4E86"),t.splice(0,t.length),i.value=!1,f.back()},L=e=>{r.value=e,y(e)},x=()=>{console.log("clear"),Z.confirm({message:"\u786E\u5B9A\u6E05\u9664\u641C\u7D22\u8BB0\u5F55\uFF1F"}).then(()=>{s.splice(0,s.length),u.remove("historyList")}).catch(()=>{})},F=e=>{f.push({path:"./articleDetail",query:{articleId:e.articleId,flag:"Y",isInnerEntry:"Y",isOuterUrl:(e==null?void 0:e.articleType)==="02"?"Y":"N"}})};return b(()=>{const e=u.get("historyList")||[];s.push(...e),console.log(s)}),(e,l)=>{const V=B("van-search"),w=B("ZaPageWrap");return d(),S(w,{"main-class":"page-searchArticle"},{default:H(()=>[a("div",ee,[g(V,{modelValue:r.value,"onUpdate:modelValue":[l[0]||(l[0]=h=>r.value=h),E],shape:"round","show-action":"",clearable:"","left-icon":o(p)("target.searchImg"),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",onSearch:y,onCancel:I,onClear:k},null,8,["modelValue","left-icon"])]),v(a("div",se,[a("div",te,[ae,a("div",{class:"clear-history",onClick:x},[oe,a("img",{src:o(p)("article.articleClearIcon"),alt:""},null,8,le)])]),a("div",ce,[(d(!0),D(Y,null,O(o(s),(h,A)=>(d(),D("div",{key:A,class:"history-out",onClick:he=>L(h)},[a("div",ie,U(h),1)],8,re))),128))])],512),[[m,!i.value&&o(s).length!==0]]),a("div",ne,[v(g(J,{sharelist:o(t),onOnGoclick:F},null,8,["sharelist"]),[[m,i.value&&o(t).length!==0&&!c.value]]),c.value?(d(),S(z,{key:0,vertical:!0,text:"\u641C\u7D22\u4E2D..."})):q("",!0),v(g(K,{text:"\u6CA1\u6709\u627E\u5230\u76F8\u5173\u5185\u5BB9~",emptyimg:o(p)("article.articleSearchIcon")},null,8,["emptyimg"]),[[m,i.value&&o(t).length===0&&!c.value]])])]),_:1})}}});var fe=Q(ue,[["__scopeId","data-v-5194410d"]]);export{fe as default};

<<<<<<<< HEAD:dist/static/js/index-3bfaeb0a.js
import{d as e,z as a,R as t,cq as o,c as r,e as l,w as n,f as d,k as s,g as i,G as u,r as c,ab as I,L as A,A as v,U as p,V as f,j as m,E as g,F as C,h as D,W as h,al as E,am as S,bE as x,J as U,cf as T,a as w,u as P,a1 as b,i as y,a2 as G,Q as L,N as k,cr as O,T as Q,cs as N,y as R,ar as Y}from"./index-4b1b5b56.js";import{a as M,d as V}from"./product-befa1ca1.js";import{d as W,g as B,h as z,i as K}from"./trial-52b02ca9.js";import{P as H}from"./index-a07b5f1a.js";import{I as j}from"./trial-14c0f0cb.js";import{e as q}from"./utils-11ea7df8.js";import{s as J}from"./core-8441936b.js";import{O as F}from"./infoCollection-8e34e926.js";import{T as Z}from"./constant-8927d485.js";import"./pdfh5-008ca364.js";const X={class:"pro-curtain"},_=["src"],$=e({name:"curtain"});var ee=u(e({...$,props:{show:{type:Boolean,default:!0}},emits:["close"],setup(e,{emit:u}){const c=e,I=a({show:c.show});return t((()=>c.show),(()=>{I.show=c.show}),{immediate:!0}),(e,a)=>{const t=o;return r(),l(t,{show:i(I).show},{default:n((()=>[d("div",X,[s(e.$slots,"default",{},void 0,!0),d("img",{class:"close",src:i("data:image/png;base64,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"),onClick:a[0]||(a[0]=e=>u("close"))},null,8,_)])])),_:3},8,["show"])}}}),[["__scopeId","data-v-697ee98a"]]);const ae={class:"guarantee-list"},te=(e=>(E("data-v-186e639c"),e=e(),S(),e))((()=>d("div",{class:"title"},"保障内容",-1))),oe=["src"],re=e({name:"guaranteeContent"});var le=u(e({...re,props:{dataSource:{default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{default:10}},setup(e){const a=e,o=c(a.dataSource||[]),[n,s]=I(!1),u=A((()=>{var e;return!(!o.value||!(null==(e=o.value)?void 0:e.length))&&(o.value.length>a.count&&(!!a.isShowClose||!n.value))})),E=()=>{s()},S=A((()=>{var e;return o.value&&(null==(e=o.value)?void 0:e.length)?o.value.length<=a.count||n.value?o.value:o.value.slice(0,a.count):[]}));return t((()=>a.dataSource),(()=>{o.value=a.dataSource})),(e,a)=>{const t=h;return r(),v("div",ae,[te,(r(!0),v(p,null,f(i(S),((e,a)=>(r(),l(t,{key:a,title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),i(u)?(r(),v("div",{key:0,class:"show-more",onClick:E},[m(g(i(n)?"收起":"查看更多")+" ",1),d("img",{src:i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAjNJREFUOE+1VEtPE1EUPufM9GXKCnWlqAQZuhEff8CNxpYdSReVatIWJMYI7FkYF+wtxsSCBWNLY4JhZxHd+AdMqhs6PmJJWMkPsO303mPmQs10GJuawOxu5tzvfK9chCP+8Ijx4HgAVyZGskgQEgIXJkvbO//D+sXtyDlN43mW8Du9Vp1VDPNJ4xkiRoC5DhKz6VJ1qxfQ/MTITUSeA8QgM29niuYDBbh6/XyQzwZmAPCWfUbmLdAb2dTLWt0LeDE6FOjr12YYMfp3freRTX2s1Ts8VBuJZwEwxBJ2SMDj1OtqzQn66u7gQIt9jwDwgq1IAixOFs137ZlDobgvMPPTzNrXTaUkcfEG6zTXbaFnyrakcL/+EBBi+5vlB2Cy2meW8j35mk+8LOlaG8VII9v0kA3LzA1gXmwz9vJXAS4njRQC+qnR2kivf99zDubigwO+gH8egbUWwsJUwfzp/L8SHzolA/o4Azeniubqfm3uGBlgPMMITSnE5r3St0ovtXmeHB7VkWLI4Afk3UzBzCvA3DXwkWHEiPCyqgFxxQqGy9NLnywvYHtejxhRALyiHJZckWGzPL0EVoeHzo3Mcs8i8eZ+4cevDgsSwydJwzgBngYAS0hRdio6FErOdYGkKKcOLFhOGJdQxzFbor2QmnLd7blnym5JguUXImohw1WVNsjP4kTfWy9LutZGMSIcQwT/gWzLyfiftemWqG2BT6NxZqYmtTbcnrrvHs972Evnep35AykjACSCRaPlAAAAAElFTkSuQmCC"),class:C(["icon",{showMore:i(n)}])},null,10,oe)])):D("",!0)])}}}),[["__scopeId","data-v-186e639c"]]);const ne=U([{value:x.PENDING,label:"待处理"},{value:x.PAYING,label:"订单未完成，逾期将失效"},{value:x.PAYMENT_SUCCESS,label:"支付成功"},{value:x.PAYMENT_FAILED,label:"支付失败"},{value:x.CANCELED,label:"已失效"},{value:x.ACCEPT_POLICY,label:"投保成功"},{value:x.INSURER_REJECT,label:"保司拒保"},{value:x.TIMEOUT,label:"订单已经关闭"},{value:x.UNDER_WRITING_SUCCESS,label:"核保通过"},{value:x.NOTE,label:"照会"},{value:x.MANUAL_UNDERWRITING,label:"人工核保"},{value:x.INSURANCE_PROCESSING,label:"保司处理中"}]),de={[x.ACCEPT_POLICY]:"恭喜 您已成功购买保障",[x.CANCELED]:"赠险保单已失效",[x.PAYING]:"剩余支付时间：23:59:59",[x.TIMEOUT]:"请您重新提交订单"};const se={class:"page-pay-result"},ie={class:"header"},ue={class:"product-status"},ce=["innerHTML"],Ie={class:"prodouct-container"},Ae={class:"product-card"},ve={class:"product-name"},pe={class:"label"},fe={class:"value"},me=["src"],ge=["src"];var Ce=u(e({__name:"index",setup(e){const t=T(),o=w(),s=P(),{tenantId:u,from:I="other",orderNo:m,code:C,channelCode:h=""}=s.query;let E="";const S=a({insureDetail:{},detail:{},orderDetail:{},showOrderDetail:!1,guaranteeItemVOS:[],pageInfo:{title:"",desc:"",insureList:[],productImage:"",notificationImage:""},timeDown:{},templateId:"2"}),U=c(!1),X=c(),_=A((()=>[x.ACCEPT_POLICY,x.CANCELED,x.PAYMENT_SUCCESS].includes(S.orderDetail.orderStatus)?"下载保单":x.PAYING===S.orderDetail.orderStatus?"立即支付":x.TIMEOUT===S.orderDetail.orderStatus?"重下一单":"")),$=A((()=>h||S.orderDetail.extInfo.extraInfo.channelCode)),ae=async(e=!1,a="")=>{var t,r,l,n;try{const{templateId:d}=S.orderDetail.extInfo.extraInfo;delete S.orderDetail.extInfo.extraInfo.templateId;const s={insurerCode:e?null==(t=X.value)?void 0:t.insurerCode:S.orderDetail.venderCode,productCode:e?null==(r=X.value)?void 0:r.productCode:E,tenantId:u,agencyCode:S.orderDetail.agencyId,agentCode:S.orderDetail.agentCode,saleChannelId:null==(n=null==(l=S.orderDetail.extInfo)?void 0:l.extraInfo)?void 0:n.saleChannelId};if(d===Z.UPGRADE)return s.extraInfo=decodeURIComponent(JSON.stringify({...S.orderDetail.extInfo.extraInfo,channelCode:$.value,templateId:d})),s.orderNo=m,void o.push(`/baseInsurance/upgrade?${L.stringify(s)}`);s.extraMap={...S.orderDetail.extInfo.extraInfo,channelCode:$.value},e&&(s.extraMap.promotion=a),delete s.extraMap.templateId,console.log("订单转投保",s);const i=await W(s);if("10000"===i.code){if(!e){const{tenantOrderHolder:e,tenantOrderInsuredList:a}=S.orderDetail;k.set(F,{tenantOrderHolder:e,tenantOrderInsuredList:a})}window.location.href=i.data||""}}catch(d){console.log(d)}},te=async()=>{var e,a,t,o,r;if("下载保单"===_.value)if(null==(e=S.orderDetail.extInfo)?void 0:e.policyUrl)(null==(o=S.orderDetail.extInfo)?void 0:o.policyUrl)&&O(null==(r=S.orderDetail.extInfo)?void 0:r.policyUrl);else{const e=await B({orderNo:m,tenantId:u});"10000"===e.code&&(S.orderDetail=e.data,(null==(a=S.orderDetail.extInfo)?void 0:a.policyUrl)?O(null==(t=S.orderDetail.extInfo)?void 0:t.policyUrl):Q("电子保单单生成中，请稍后再试"))}else"立即支付"===_.value?z({...S.orderDetail,extInfo:{...S.orderDetail.extInfo,redirectUrl:window.location.href}}).then((e=>{"10000"===e.code&&J(e.data.paymentUrl)})):"重下一单"===_.value&&ae(!1)},oe=async()=>{var e,a,t,o;const r=await B({orderNo:m,tenantId:u,withProductInfo:!0});if("10000"===r.code){if(S.orderDetail=r.data,E=(null==(o=null==(t=null==(a=null==(e=r.data.tenantOrderInsuredList)?void 0:e[0])?void 0:a.tenantOrderProductList)?void 0:t[0])?void 0:o.productCode)||"",!E)return"";const l=M({productCode:E,withInsureInfo:!0,tenantId:u}),n=K({productCode:E});(async e=>{var a,t;const{code:o,data:r}=await V({productCode:e});"10000"===o&&(X.value=r,"free"!==I&&[x.PAYING,x.TIMEOUT].includes(S.orderDetail.orderStatus)?S.showOrderDetail=!0:r.productCode&&(S.pageInfo.notificationImage=(null==(a=null==r?void 0:r.notificationImage)?void 0:a[0])||"",S.pageInfo.productImage=(null==(t=null==r?void 0:r.productImage)?void 0:t[0])||"",U.value=!!S.pageInfo.notificationImage))})(E),Promise.all([l,n]).then((([e,a])=>{"10000"===e.code&&(S.detail=e.data),"10000"===a.code&&(S.insureDetail=a.data),(()=>{var e,a,t,o,r,l,n,d,s,i,u,c,I;[x.PAYMENT_SUCCESS,x.ACCEPT_POLICY].includes(S.orderDetail.orderStatus)&&(S.orderDetail.orderStatus=x.ACCEPT_POLICY),S.pageInfo.title=ne[S.orderDetail.orderStatus],S.pageInfo.desc=de[S.orderDetail.orderStatus],N((null==(a=null==(e=S.detail)?void 0:e.tenantProductInsureVO)?void 0:a.productName)||""),S.templateId="4";let A="";if("2"===S.templateId.toString()?S.orderDetail.tenantOrderInsuredList[0].tenantOrderProductList.forEach((e=>A?null:(e.tenantOrderRiskList.forEach((e=>{1!==e.riskType||A||(A=q(e.insurancePeriodValue,j[e.insurancePeriodType]))})),!1))):(S.pageInfo.insureList=[{label:(S.templateId===Z.UPGRADE&&"1"===(null==(r=null==(o=null==(t=S.orderDetail)?void 0:t.extInfo)?void 0:o.extraInfo)?void 0:r.isUpgrade)?"下":"本")+"期缴费金额",value:`${S.orderDetail.orderAmount}元`}],A=`${R(S.orderDetail.commencementTime).format("YYYY.MM.DD")}到${R(S.orderDetail.expiryDate).format("YYYY.MM.DD")}`),S.pageInfo.insureList=[...S.pageInfo.insureList,{label:"被保人",value:null==(d=null==(n=null==(l=S.orderDetail)?void 0:l.tenantOrderInsuredList)?void 0:n[0])?void 0:d.name},{label:"保障期间",value:A||""}],S.templateId=S.orderDetail.extInfo.templateId,x.PAYING===S.orderDetail.orderStatus){const e=(null==(i=null==(s=S.orderDetail.tenantOrderPaymentInfoList)?void 0:s[0])?void 0:i.paymentExpiryDate)||R().add(8.5,"hour");S.timeDown=Y({time:R(e).diff(new Date,"millisecond")}),S.timeDown.start()}try{const e=(null==(u=S.orderDetail.tenantOrderInsuredList)?void 0:u[0].planCode)||"";S.guaranteeItemVOS=(null==(I=null==(c=S.detail)?void 0:c.GUARANTEE.find((a=>a.planCode===e)))?void 0:I.data)||[]}catch(v){console.log(v)}})()}))}return""},re=e=>{const a=`${e}`.length;let t="";for(let o=0;o<2-a;o++)t+="0";return t+e},Ce=A((()=>{var e;return x.PAYING===(null==(e=S.orderDetail)?void 0:e.orderStatus)?S.timeDown.current.total<=0?(S.orderDetail.orderStatus=x.TIMEOUT,S.pageInfo.title=ne[S.orderDetail.orderStatus],S.pageInfo.desc=de[S.orderDetail.orderStatus],S.timeDown.pause(),S.pageInfo.desc):`剩余支付时间：${re(S.timeDown.current.hours)}:${re(S.timeDown.current.minutes)}:${re(S.timeDown.current.seconds)}`:S.pageInfo.desc}));return b((()=>{oe()})),(e,a)=>{var o;return r(),v(p,null,[d("div",se,[d("div",ie,[d("div",ue,g(i(S).pageInfo.title),1),"重下一单"!==i(_)||"3"!==i(S).templateId.toString()?(r(),v("div",{key:0,class:"desc",innerHTML:i(Ce)},null,8,ce)):D("",!0)]),d("div",Ie,[d("div",Ae,[d("div",ve,g((null==(o=i(S).insureDetail)?void 0:o.productName)||""),1),(r(!0),v(p,null,f(i(S).pageInfo.insureList,((e,a)=>(r(),v("div",{key:a,class:"list"},[d("span",pe,g(e.label),1),d("span",fe,g(e.value),1)])))),128)),"重下一单"!==i(_)||"3"!==i(S).templateId.toString()?(r(),l(H,{key:0,"theme-vars":i(t),class:"btn",text:i(_),onClick:te},null,8,["theme-vars","text"])):D("",!0)]),i(S).pageInfo.productImage?(r(),v("img",{key:0,class:"product-img",src:i(S).pageInfo.productImage,onClick:a[0]||(a[0]=e=>ae(!0,"GDGGW"))},null,8,me)):D("",!0),i(S).showOrderDetail?(r(),l(le,{key:1,"is-show-close":"",count:5,"data-source":i(S).guaranteeItemVOS},null,8,["data-source"])):D("",!0)])]),y(ee,{show:i(U),"onUpdate:show":a[2]||(a[2]=e=>G(U)?U.value=e:null),onClose:a[3]||(a[3]=e=>U.value=!1)},{default:n((()=>[d("img",{class:"jump-img",src:i(S).pageInfo.notificationImage,style:{display:"block"},onClick:a[1]||(a[1]=e=>ae(!0,"TCGGW"))},null,8,ge)])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-4d06472e"]]);export{Ce as default};
========
import{d as e,z as a,R as t,cq as o,c as r,e as l,w as n,f as d,k as s,g as i,G as u,r as c,ab as I,L as A,A as v,U as p,V as f,j as m,E as g,F as C,h as D,W as h,al as E,am as S,bE as x,J as U,cf as T,a as w,u as P,a1 as y,i as G,a2 as L,Q as k,N as b,cr as O,T as Q,cs as N,y as R,ar as Y}from"./index-3c7e3218.js";import{a as M,d as V}from"./product-03f50208.js";import{f as W,g as B,h as z,i as K}from"./trial-8880c861.js";import{P as H}from"./index-95498571.js";import{I as j}from"./trial-9af2b156.js";import{e as q}from"./utils-141e9d45.js";import{s as J}from"./core-df887c17.js";import{O as F}from"./infoCollection-e84e8e3d.js";import{T as Z}from"./constant-8927d485.js";import"./pdfh5-008ca364.js";const X={class:"pro-curtain"},_=["src"],$=e({name:"curtain"});var ee=u(e({...$,props:{show:{type:Boolean,default:!0}},emits:["close"],setup(e,{emit:u}){const c=e,I=a({show:c.show});return t((()=>c.show),(()=>{I.show=c.show}),{immediate:!0}),(e,a)=>{const t=o;return r(),l(t,{show:i(I).show},{default:n((()=>[d("div",X,[s(e.$slots,"default",{},void 0,!0),d("img",{class:"close",src:i("data:image/png;base64,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"),onClick:a[0]||(a[0]=e=>u("close"))},null,8,_)])])),_:3},8,["show"])}}}),[["__scopeId","data-v-697ee98a"]]);const ae={class:"guarantee-list"},te=(e=>(E("data-v-186e639c"),e=e(),S(),e))((()=>d("div",{class:"title"},"保障内容",-1))),oe=["src"],re=e({name:"guaranteeContent"});var le=u(e({...re,props:{dataSource:{default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{default:10}},setup(e){const a=e,o=c(a.dataSource||[]),[n,s]=I(!1),u=A((()=>{var e;return!(!o.value||!(null==(e=o.value)?void 0:e.length))&&(o.value.length>a.count&&(!!a.isShowClose||!n.value))})),E=()=>{s()},S=A((()=>{var e;return o.value&&(null==(e=o.value)?void 0:e.length)?o.value.length<=a.count||n.value?o.value:o.value.slice(0,a.count):[]}));return t((()=>a.dataSource),(()=>{o.value=a.dataSource})),(e,a)=>{const t=h;return r(),v("div",ae,[te,(r(!0),v(p,null,f(i(S),((e,a)=>(r(),l(t,{key:a,title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),i(u)?(r(),v("div",{key:0,class:"show-more",onClick:E},[m(g(i(n)?"收起":"查看更多")+" ",1),d("img",{src:i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAjNJREFUOE+1VEtPE1EUPufM9GXKCnWlqAQZuhEff8CNxpYdSReVatIWJMYI7FkYF+wtxsSCBWNLY4JhZxHd+AdMqhs6PmJJWMkPsO303mPmQs10GJuawOxu5tzvfK9chCP+8Ijx4HgAVyZGskgQEgIXJkvbO//D+sXtyDlN43mW8Du9Vp1VDPNJ4xkiRoC5DhKz6VJ1qxfQ/MTITUSeA8QgM29niuYDBbh6/XyQzwZmAPCWfUbmLdAb2dTLWt0LeDE6FOjr12YYMfp3freRTX2s1Ts8VBuJZwEwxBJ2SMDj1OtqzQn66u7gQIt9jwDwgq1IAixOFs137ZlDobgvMPPTzNrXTaUkcfEG6zTXbaFnyrakcL/+EBBi+5vlB2Cy2meW8j35mk+8LOlaG8VII9v0kA3LzA1gXmwz9vJXAS4njRQC+qnR2kivf99zDubigwO+gH8egbUWwsJUwfzp/L8SHzolA/o4Azeniubqfm3uGBlgPMMITSnE5r3St0ovtXmeHB7VkWLI4Afk3UzBzCvA3DXwkWHEiPCyqgFxxQqGy9NLnywvYHtejxhRALyiHJZckWGzPL0EVoeHzo3Mcs8i8eZ+4cevDgsSwydJwzgBngYAS0hRdio6FErOdYGkKKcOLFhOGJdQxzFbor2QmnLd7blnym5JguUXImohw1WVNsjP4kTfWy9LutZGMSIcQwT/gWzLyfiftemWqG2BT6NxZqYmtTbcnrrvHs972Evnep35AykjACSCRaPlAAAAAElFTkSuQmCC"),class:C(["icon",{showMore:i(n)}])},null,10,oe)])):D("",!0)])}}}),[["__scopeId","data-v-186e639c"]]);const ne=U([{value:x.PENDING,label:"待处理"},{value:x.PAYING,label:"订单未完成，逾期将失效"},{value:x.PAYMENT_SUCCESS,label:"支付成功"},{value:x.PAYMENT_FAILED,label:"支付失败"},{value:x.CANCELED,label:"已失效"},{value:x.ACCEPT_POLICY,label:"投保成功"},{value:x.INSURER_REJECT,label:"保司拒保"},{value:x.TIMEOUT,label:"订单已经关闭"},{value:x.UNDER_WRITING_SUCCESS,label:"核保通过"},{value:x.NOTE,label:"照会"},{value:x.MANUAL_UNDERWRITING,label:"人工核保"},{value:x.INSURANCE_PROCESSING,label:"保司处理中"}]),de={[x.ACCEPT_POLICY]:"恭喜 您已成功购买保障",[x.CANCELED]:"赠险保单已失效",[x.PAYING]:"剩余支付时间：23:59:59",[x.TIMEOUT]:"请您重新提交订单"};const se={class:"page-pay-result"},ie={class:"header"},ue={class:"product-status"},ce=["innerHTML"],Ie={class:"prodouct-container"},Ae={class:"product-card"},ve={class:"product-name"},pe={class:"label"},fe={class:"value"},me=["src"],ge=["src"];var Ce=u(e({__name:"index",setup(e){const t=T(),o=w(),s=P(),{tenantId:u,from:I="other",orderNo:m,code:C,channelCode:h=""}=s.query;let E="";const S=a({insureDetail:{},detail:{},orderDetail:{},showOrderDetail:!1,guaranteeItemVOS:[],pageInfo:{title:"",desc:"",insureList:[],productImage:"",notificationImage:""},timeDown:{},templateId:"2"}),U=c(!1),X=c(),_=A((()=>[x.ACCEPT_POLICY,x.CANCELED,x.PAYMENT_SUCCESS].includes(S.orderDetail.orderStatus)?"下载保单":x.PAYING===S.orderDetail.orderStatus?"立即支付":x.TIMEOUT===S.orderDetail.orderStatus?"重下一单":"")),$=A((()=>h||S.orderDetail.extInfo.extraInfo.channelCode)),ae=async(e=!1,a="")=>{var t,r,l,n;try{const{templateId:d}=S.orderDetail.extInfo.extraInfo;delete S.orderDetail.extInfo.extraInfo.templateId;const s={insurerCode:e?null==(t=X.value)?void 0:t.insurerCode:S.orderDetail.venderCode,productCode:e?null==(r=X.value)?void 0:r.productCode:E,tenantId:u,agencyCode:S.orderDetail.agencyId,agentCode:S.orderDetail.agentCode,saleChannelId:null==(n=null==(l=S.orderDetail.extInfo)?void 0:l.extraInfo)?void 0:n.saleChannelId};if(d===Z.UPGRADE)return s.extraInfo=decodeURIComponent(JSON.stringify({...S.orderDetail.extInfo.extraInfo,channelCode:$.value,templateId:d})),s.orderNo=m,void o.push(`/baseInsurance/upgrade?${k.stringify(s)}`);s.extraMap={...S.orderDetail.extInfo.extraInfo,channelCode:$.value},e&&(s.extraMap.promotion=a),delete s.extraMap.templateId,console.log("订单转投保",s);const i=await W(s);if("10000"===i.code){if(!e){const{tenantOrderHolder:e,tenantOrderInsuredList:a}=S.orderDetail;b.set(F,{tenantOrderHolder:e,tenantOrderInsuredList:a})}window.location.href=i.data||""}}catch(d){console.log(d)}},te=async()=>{var e,a,t,o,r;if("下载保单"===_.value)if(null==(e=S.orderDetail.extInfo)?void 0:e.policyUrl)(null==(o=S.orderDetail.extInfo)?void 0:o.policyUrl)&&O(null==(r=S.orderDetail.extInfo)?void 0:r.policyUrl);else{const e=await B({orderNo:m,tenantId:u});"10000"===e.code&&(S.orderDetail=e.data,(null==(a=S.orderDetail.extInfo)?void 0:a.policyUrl)?O(null==(t=S.orderDetail.extInfo)?void 0:t.policyUrl):Q("电子保单单生成中，请稍后再试"))}else"立即支付"===_.value?z({...S.orderDetail,extInfo:{...S.orderDetail.extInfo,redirectUrl:window.location.href}}).then((e=>{"10000"===e.code&&J(e.data.paymentUrl)})):"重下一单"===_.value&&ae(!1)},oe=async()=>{var e,a,t,o;const r=await B({orderNo:m,tenantId:u,withProductInfo:!0});if("10000"===r.code){if(S.orderDetail=r.data,E=(null==(o=null==(t=null==(a=null==(e=r.data.tenantOrderInsuredList)?void 0:e[0])?void 0:a.tenantOrderProductList)?void 0:t[0])?void 0:o.productCode)||"",!E)return"";const l=M({productCode:E,withInsureInfo:!0,tenantId:u}),n=K({productCode:E});(async e=>{var a,t;const{code:o,data:r}=await V({productCode:e});"10000"===o&&(X.value=r,"free"!==I&&[x.PAYING,x.TIMEOUT].includes(S.orderDetail.orderStatus)?S.showOrderDetail=!0:r.productCode&&(S.pageInfo.notificationImage=(null==(a=null==r?void 0:r.notificationImage)?void 0:a[0])||"",S.pageInfo.productImage=(null==(t=null==r?void 0:r.productImage)?void 0:t[0])||"",U.value=!!S.pageInfo.notificationImage))})(E),Promise.all([l,n]).then((([e,a])=>{"10000"===e.code&&(S.detail=e.data),"10000"===a.code&&(S.insureDetail=a.data),(()=>{var e,a,t,o,r,l,n,d,s,i,u,c,I;[x.PAYMENT_SUCCESS,x.ACCEPT_POLICY].includes(S.orderDetail.orderStatus)&&(S.orderDetail.orderStatus=x.ACCEPT_POLICY),S.pageInfo.title=ne[S.orderDetail.orderStatus],S.pageInfo.desc=de[S.orderDetail.orderStatus],N((null==(a=null==(e=S.detail)?void 0:e.tenantProductInsureVO)?void 0:a.productName)||""),S.templateId="4";let A="";if("2"===S.templateId.toString()?S.orderDetail.tenantOrderInsuredList[0].tenantOrderProductList.forEach((e=>A?null:(e.tenantOrderRiskList.forEach((e=>{1!==e.riskType||A||(A=q(e.insurancePeriodValue,j[e.insurancePeriodType]))})),!1))):(S.pageInfo.insureList=[{label:(S.templateId===Z.UPGRADE&&"1"===(null==(r=null==(o=null==(t=S.orderDetail)?void 0:t.extInfo)?void 0:o.extraInfo)?void 0:r.isUpgrade)?"下":"本")+"期缴费金额",value:`${S.orderDetail.orderAmount}元`}],A=`${R(S.orderDetail.commencementTime).format("YYYY.MM.DD")}到${R(S.orderDetail.expiryDate).format("YYYY.MM.DD")}`),S.pageInfo.insureList=[...S.pageInfo.insureList,{label:"被保人",value:null==(d=null==(n=null==(l=S.orderDetail)?void 0:l.tenantOrderInsuredList)?void 0:n[0])?void 0:d.name},{label:"保障期间",value:A||""}],S.templateId=S.orderDetail.extInfo.templateId,x.PAYING===S.orderDetail.orderStatus){const e=(null==(i=null==(s=S.orderDetail.tenantOrderPaymentInfoList)?void 0:s[0])?void 0:i.paymentExpiryDate)||R().add(8.5,"hour");S.timeDown=Y({time:R(e).diff(new Date,"millisecond")}),S.timeDown.start()}try{const e=(null==(u=S.orderDetail.tenantOrderInsuredList)?void 0:u[0].planCode)||"";S.guaranteeItemVOS=(null==(I=null==(c=S.detail)?void 0:c.GUARANTEE.find((a=>a.planCode===e)))?void 0:I.data)||[]}catch(v){console.log(v)}})()}))}return""},re=e=>{const a=`${e}`.length;let t="";for(let o=0;o<2-a;o++)t+="0";return t+e},Ce=A((()=>{var e;return x.PAYING===(null==(e=S.orderDetail)?void 0:e.orderStatus)?S.timeDown.current.total<=0?(S.orderDetail.orderStatus=x.TIMEOUT,S.pageInfo.title=ne[S.orderDetail.orderStatus],S.pageInfo.desc=de[S.orderDetail.orderStatus],S.timeDown.pause(),S.pageInfo.desc):`剩余支付时间：${re(S.timeDown.current.hours)}:${re(S.timeDown.current.minutes)}:${re(S.timeDown.current.seconds)}`:S.pageInfo.desc}));return y((()=>{oe()})),(e,a)=>{var o;return r(),v(p,null,[d("div",se,[d("div",ie,[d("div",ue,g(i(S).pageInfo.title),1),"重下一单"!==i(_)||"3"!==i(S).templateId.toString()?(r(),v("div",{key:0,class:"desc",innerHTML:i(Ce)},null,8,ce)):D("",!0)]),d("div",Ie,[d("div",Ae,[d("div",ve,g((null==(o=i(S).insureDetail)?void 0:o.productName)||""),1),(r(!0),v(p,null,f(i(S).pageInfo.insureList,((e,a)=>(r(),v("div",{key:a,class:"list"},[d("span",pe,g(e.label),1),d("span",fe,g(e.value),1)])))),128)),"重下一单"!==i(_)||"3"!==i(S).templateId.toString()?(r(),l(H,{key:0,"theme-vars":i(t),class:"btn",text:i(_),onClick:te},null,8,["theme-vars","text"])):D("",!0)]),i(S).pageInfo.productImage?(r(),v("img",{key:0,class:"product-img",src:i(S).pageInfo.productImage,onClick:a[0]||(a[0]=e=>ae(!0,"GDGGW"))},null,8,me)):D("",!0),i(S).showOrderDetail?(r(),l(le,{key:1,"is-show-close":"",count:5,"data-source":i(S).guaranteeItemVOS},null,8,["data-source"])):D("",!0)])]),G(ee,{show:i(U),"onUpdate:show":a[2]||(a[2]=e=>L(U)?U.value=e:null),onClose:a[3]||(a[3]=e=>U.value=!1)},{default:n((()=>[d("img",{class:"jump-img",src:i(S).pageInfo.notificationImage,style:{display:"block"},onClick:a[1]||(a[1]=e=>ae(!0,"TCGGW"))},null,8,ge)])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-4d06472e"]]);export{Ce as default};
>>>>>>>> ad430bdd168e316860f2a753ff36433fea9fb637:dist/static/js/index-2207a27a.js

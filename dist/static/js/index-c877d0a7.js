import{d as e,u as a,a as t,r as n,al as r,c as o,h as d,at as s,au as c,j as i,a9 as u}from"./index-d7f8e361.js";import{f as l,P as p}from"./infoCollection-7a015558.js";import{q as f}from"./trial-ea1befa0.js";import"./pdfh5-008ca364.js";const C={class:"page-middle-wrapper"},I=[i("h4",null,null,-1)],g=e({__name:"index",setup(e){const i=a(),g=t(),m=n(""),{extraInfo:h,agencyCode:y,templateId:x,pageCode:$,insurerCode:R,productCode:U,agentCode:b,saleChannelId:j}=g.query;let v={};try{v=JSON.parse(decodeURIComponent(h))}catch(M){}const{templateId:w,openId:N,tenantId:q,orderNo:E}=v,O=()=>{try{const e=N?x:w;if(e)return`/baseInsurance/${l[e]}`;switch($){case p.FREE:return`/chuangxin/baigebao/${$}`;case p.COMMON:return"/internet/productDetail";case p.UPGRADE:return"/internet/guaranteeUpgrade";case p.PACKAGE:return"/internet/productDetail/package";default:return""}}catch(e){return""}},A=e=>{s({param:e}).then((({code:a,data:t})=>{if("10000"===a&&t)if(N){const a=O();i.replace(encodeURI(`${a}?${e}`))}else(e=>{var a;if("4"===w&&E){const e={insurerCode:R,productCode:U,tenantId:q||(null==(a=g.query)?void 0:a.tenantId),agencyCode:y,agentCode:b,orderNo:E,saleChannelId:j};return e.extraInfo=decodeURIComponent(JSON.stringify({...v,templateId:w})),void i.push(`/baseInsurance/upgrade?${u.stringify(e)}`)}let t=e;const n=O();n&&(t=n),i.replace(encodeURI(`${t}?${u.stringify(g.query)}`))})();else m.value="验证失败"}))},D=e=>c(["ext"],e);return r((()=>{N?(async()=>{const{code:e,data:a}=await f({insurerCode:R,productCode:U,tenantId:q,agencyCode:y,extraMap:{...v,templateId:x}});if("10000"===e){const e=D(a);A(e.split("?")[1])}})():A(D(window.location.search))})),(e,a)=>(o(),d("div",C,I))}});export{g as default};

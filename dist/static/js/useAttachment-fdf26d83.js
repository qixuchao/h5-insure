import{_ as e,d as l,bX as a,g as t,r as n,E as s,an as i,S as u,z as o,c as r,h as c,j as d,F as v,i as p,L as m,t as C,k as _,e as f,n as y,f as L,V as h,a2 as k,w as A,a7 as E,A as b,a3 as g,a5 as I,a8 as S,X as x,Y as F,bY as O,bZ as T,bp as M,bt as N,c8 as R,bk as w,I as U,a9 as P}from"./index-64058e19.js";import{o as j,g as W}from"./utils-f0ea4a13.js";import{C as D}from"./infoCollection-7bbfe74d.js";const V={class:"guarantee-list"},$=(e=>(x("data-v-613ed1cf"),e=e(),F(),e))((()=>d("span",null,"保障计划",-1))),z={key:0,class:"plan-list"},G=["onClick"],Y={key:2,class:"feerate-view"},q={key:0},Q={class:"extinfo-info-list"},B={class:"guarantee-detail"},X={class:"content"};var H=e(l({__name:"index",props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},planList:{type:Array,require:!1,default:()=>[]}},emits:["update-active-plan"],setup(e,{emit:l}){var x,F;const O=e;a((e=>({"4dfc3426":t(T)})));const T=n(""),M=n((null==(F=null==(x=O.planList)?void 0:x[0])?void 0:F.planCode)||void 0),N=n(),R=n([]),w=n([]),U=n(),P=s((()=>!!O.planList.length));i([()=>O.dataSource,()=>M.value],(()=>{var e,l;R.value=(null==(l=((null==(e=O.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===M.value)))?void 0:l.data)||[]}),{immediate:!0,deep:!0});const W=s((()=>{var e;return(null==(e=O.dataSource)?void 0:e.rateUri)||""})),D=s((()=>!!(U.value&&U.value.paymentFrequencyValue&&U.value.premiumUnit&&W))),[H,Z]=u(!1),J=s((()=>{var e;return!(!R.value||!(null==(e=R.value)?void 0:e.length))&&(R.value.length>O.count&&(!!O.isShowClose||!H.value))})),K=()=>{Z()},ee=s((()=>{var e;return R.value&&(null==(e=R.value)?void 0:e.length)?R.value.length<=O.count||H.value?R.value:R.value.slice(0,O.count):[]})),le=n(!1),ae=()=>{le.value=!0},te=()=>{j({fileType:"pdf",fileUri:W.value})},ne=e=>{M.value=O.planList[e.name].planCode};return(l,a)=>{var n,s;const i=g,u=I,x=S,F=o("dompurify-html");return r(),c(v,null,[d("div",V,[d("div",{class:"header"},[$,d("span",{onClick:ae},"查看详情")]),t(P)?(r(),c("div",z,[(r(!0),c(v,null,p(e.planList,((l,a)=>(r(),c("div",{key:`${l.planCode}_${a}`,class:m(`plan-list-item ${l.planCode===t(M)?"plan-list-item-active":""} ${2===e.planList.length?"paln-list-item-half":""}`),onClick:e=>{return a=l.planCode,M.value=a,void(N.value=O.planList.findIndex((e=>e.planCode===a)));var a}},[d("span",null,C(l.planName),1)],10,G)))),128))])):_("",!0),(r(!0),c(v,null,p(t(ee),((e,l)=>(r(),f(i,{key:l,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),t(J)?(r(),c("div",{key:1,class:"show-more",onClick:K},[y(C(t(H)?"收起":"查看更多")+" ",1),L(h,{name:"arrow-down-dobule",class:m(["icon",{showMore:t(H)}])},null,8,["class"])])):_("",!0),t(D)?(r(),c("div",Y,[d("span",null,C(`${(null==(n=t(U))?void 0:n.paymentFrequencyValue)||""}${(null==(s=t(U))?void 0:s.premiumUnit)||""}`),1),t(W)?(r(),c("span",{key:0,onClick:te},"查看保费")):_("",!0)])):_("",!0)]),L(k),L(x,{show:t(le),"onUpdate:show":a[1]||(a[1]=e=>E(le)?le.value=e:null),title:"保障详情",class:"guarantee-popup"},{default:A((()=>[t(w)&&t(w).length>0?(r(),c("div",q,[d("div",Q,[(r(!0),c(v,null,p(t(w),((e,l)=>(r(),f(i,{key:l,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),L(k)])):_("",!0),t(P)?(r(),f(u,{key:1,active:t(N),"onUpdate:active":a[0]||(a[0]=e=>E(N)?N.value=e:null),list:e.planList.map(((e,l)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:ne},null,8,["active","list"])):_("",!0),d("div",B,[(r(!0),c(v,null,p(t(R),((e,l)=>(r(),c("div",{key:l,class:"guarantee-item"},[L(i,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),b(d("div",X,null,512),[[F,e.tips]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-613ed1cf"]]);const Z={class:"spec"},J={class:"rich-text"},K={key:1,class:"spec"},ee={class:"rich-text"},le={key:1,class:"spec"},ae={class:"rich-text"},te=l({__name:"index",props:{dataSource:{default:()=>({SPECIAL_FEATURE:[],CLAIM_CASE:{},CLAIM_FLOW:[],ISSUE_NOTICE:[],FAQ:[]})}},setup(e,{expose:l}){const a=e,i=O((()=>T((()=>import("./index-64058e19.js").then((function(e){return e.cH}))),["static/js/index-64058e19.js","static/css/index-3b4432e5.css","static/js/pdfh5-008ca364.js"])));O((()=>T((()=>import("./index-dae7dfc7.js")),["static/js/index-dae7dfc7.js","static/css/index-f22f2764.css","static/js/index-64058e19.js","static/css/index-3b4432e5.css","static/js/pdfh5-008ca364.js"])));const u=O((()=>T((()=>import("./index-64058e19.js").then((function(e){return e.cF}))),["static/js/index-64058e19.js","static/css/index-3b4432e5.css","static/js/pdfh5-008ca364.js"]))),m=O((()=>T((()=>import("./index-769ef0df.js")),["static/js/index-769ef0df.js","static/css/index-7b3feb06.css","static/js/index-64058e19.js","static/css/index-3b4432e5.css","static/js/pdfh5-008ca364.js"]))),C=O((()=>T((()=>import("./index-46c39514.js")),["static/js/index-46c39514.js","static/css/index-194b9c66.css","static/js/index-64058e19.js","static/css/index-3b4432e5.css","static/js/pdfh5-008ca364.js","static/js/index-2777acd7.js"]))),{dataSource:y}=M(a),k=n(),E=n([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),g=s((()=>{var e,l;return null==(l=null==(e=y.value.SPECIAL_FEATURE)?void 0:e.spec)?void 0:l.length})),I=s((()=>{var e,l,a,t;const n=null==(e=y.value.CLAIM_FLOW)?void 0:e.processCaseType;return!!(n===D.WORD&&(null==(l=y.value.CLAIM_FLOW)?void 0:l.processContent)||n===D.IMAGE&&(null==(t=null==(a=y.value.CLAIM_FLOW)?void 0:a.processCasePicList)?void 0:t.length))})),S=s((()=>{var e,l,a,t,n;const s=null==(l=null==(e=y.value)?void 0:e.CLAIM_CASE)?void 0:l.claimCaseType;return!!(s===D.WORD&&(null==(a=y.value.CLAIM_CASE)?void 0:a.claimContent)||s===D.IMAGE&&(null==(n=null==(t=y.value.CLAIM_CASE)?void 0:t.claimCasePicList)?void 0:n.length))})),x=s((()=>{var e,l;return null==(l=null==(e=y.value)?void 0:e.ISSUE_NOTICE)?void 0:l.noticeContent})),F=s((()=>{var e,l;return null==(l=null==(e=y.value)?void 0:e.FAQ)?void 0:l.length})),P=s((()=>{let e=[...E.value];return g.value||(e=e.filter((e=>"tab1"!==e.slotName))),I.value||S.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return l({handleClickTab:()=>{var e;return null==(e=k.value)?void 0:e.handleClickTab}}),(e,l)=>{const a=U,n=h,s=o("dompurify-html");return r(),f(t(i),{ref_key:"scrollRef",ref:k,class:"tabs",list:t(P),sticky:"",scrollspy:""},N({tab3:A((()=>[w(e.$slots,"form")])),_:2},[t(g)?{name:"tab1",fn:A((()=>{var e;return[d("div",Z,[(r(!0),c(v,null,p((null==(e=t(y).SPECIAL_FEATURE)?void 0:e.spec)||[],((e,l)=>(r(),f(R,{key:l},{fallback:A((()=>[L(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>[(r(),f(a,{key:l,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),L(t(u))])]})),key:"0"}:void 0,t(I)||t(S)||t(x)||t(F)?{name:"tab2",fn:A((()=>{var e,l;return[t(I)?(r(),c(v,{key:0},[(null==(e=t(y).CLAIM_FLOW)?void 0:e.processCaseType)===t(D).WORD?(r(),f(t(m),{key:0,class:"tab-card",title:"理赔说明"},{default:A((()=>{var e;return[b(d("div",J,null,512),[[s,null==(e=t(y).CLAIM_FLOW)?void 0:e.processContent]])]})),_:1})):(r(),c("div",K,[(r(),f(R,null,{fallback:A((()=>[L(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var e;return[(r(!0),c(v,null,p((null==(e=t(y).CLAIM_FLOW)?void 0:e.processCasePicList)||[],((e,l)=>(r(),f(a,{key:l,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(t(u))],64)):_("",!0),t(S)?(r(),c(v,{key:1},[(null==(l=t(y).CLAIM_CASE)?void 0:l.claimCaseType)===t(D).WORD?(r(),f(t(m),{key:0,class:"tab-card",title:"理赔案例"},{default:A((()=>{var e;return[b(d("div",ee,null,512),[[s,null==(e=t(y).CLAIM_CASE)?void 0:e.claimContent]])]})),_:1})):(r(),c("div",le,[(r(),f(R,null,{fallback:A((()=>[L(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var e;return[(r(!0),c(v,null,p((null==(e=t(y).CLAIM_CASE)?void 0:e.claimCasePicList)||[],((e,l)=>(r(),f(a,{key:l,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(t(u))],64)):_("",!0),t(x)?(r(),c(v,{key:2},[L(t(m),{class:"tab-card",title:"投保须知"},{default:A((()=>{var e;return[b(d("div",ae,null,512),[[s,null==(e=t(y).ISSUE_NOTICE)?void 0:e.noticeContent]])]})),_:1}),L(t(u))],64)):_("",!0),t(F)?(r(),c(v,{key:3},[L(t(m),{title:"常见问题"},{default:A((()=>{var e,l;return[L(t(C),{list:null==(l=null==(e=t(y).FAQ)?void 0:e[0])?void 0:l.data},null,8,["list"])]})),_:1}),L(t(u))],64)):_("",!0)]})),key:"1"}:void 0]),1032,["list"])}}});var ne=(e,l)=>{const a=n([]),t=n(0),s=n([]);return i([()=>{var l;return null==(l=e.value)?void 0:l.planCode},()=>l.value],(([e,l])=>{let n=null;if(null==l?void 0:l.length){const a=(l||[]).find((l=>l.planCode===e||!l.planCode));a&&(n=null==a?void 0:a.productMaterialMap)}n?(a.value=Object.keys(n).map((e=>({attachmentName:e,attachmentList:n[e].map((e=>({...e,materialSource:W(`${null==e?void 0:e.materialSource}`,null==e?void 0:e.materialContent)})))}))),s.value=a.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.popUpFlag===P.YES))}))).filter((e=>e.attachmentList.length)),t.value=s.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.mustReadFlag===P.YES))}))).filter((e=>e.attachmentList.length)).length||0):a.value=[]}),{deep:!0,immediate:!0}),{fileList:a,popupFileList:s,mustReadFileCount:t}};export{H as G,te as _,ne as u};

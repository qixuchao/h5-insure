import{m as e,B as a,P as s,s as l,t as o,C as t,E as r,U as u,F as d,N as i,I as n,J as p,_ as c,r as v,o as h,O as m,z as f,x as g,V as y,G as I,H as k,a6 as C,a7 as L,a0 as P,v as b,ad as w,S as V,ab as _,u as x,e as S,$ as j}from"./vendor-533c215b.js";import{e as U,Z as O}from"./empty-ae357dd0.js";import{_ as q,W as N,X as $,Z as B,$ as D,a0 as F}from"./index-3ce9a118.js";import{u as T,P as z}from"./index-6888a5bd.js";import{P as A}from"./index-90f87142.js";import{q as W}from"./proposalList-b2227376.js";import"./index-a73717e8.js";import"./trial-618f0ef0.js";import"./useDicData-406d33ce.js";import"./trial-0df34b01.js";const Z={class:"com-product-item"},E={class:"content-wrap"},G={class:"product-image"},H={class:"insure-name"},J={class:"product-info"},R={class:"title"},X={class:"description"},K={class:"tags"};var M=q(e({props:{productInfo:{default:()=>({})}},setup(e){const v=e,{productInfo:h}=a(v),m=s({checked:!1});return a(m),(e,a)=>{const s=l("van-image");return o(),t("div",Z,[r("div",E,[r("div",G,[u(s,{src:d(h).fileUrl},null,8,["src"]),r("p",H,i(d(h).insurerName),1)]),r("div",J,[r("p",R,i(d(h).title),1),r("p",X,i(d(h).text),1),r("p",K,[(o(!0),t(n,null,p(d(h).tags,((e,a)=>(o(),t("span",{key:a,class:"tag"},i(e),1)))),128))])]),c(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-a61e69d6"]]);const Q=e=>(C("data-v-397146ec"),e=e(),L(),e),Y={class:"com-tab-filter"},ee={class:"article-mid"},ae={class:"article-tag"},se=["onClick"],le={class:"trianele-out"},oe=Q((()=>r("span",null,null,-1))),te={class:"popup-inner"},re=Q((()=>r("div",{class:"popup-title"},"保险公司",-1))),ue={class:"footer-button"},de=k("重置"),ie=k("确定");var ne=q(e({props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(e,{emit:c}){const{isPopShow:k,openPop:C,closePop:L}=N(!1),P=s({insureList:[],checkedInsure:[]}),{insureList:b,checkedInsure:w}=a(P),V=v(""),_=()=>{w.value=[]},x=()=>{c("onSelectInsure",{selectInsureCode:w.value,selectCategory:V.value}),L()};return h((()=>{$().then((e=>{const{code:a,data:s}=e;"10000"===a&&(b.value=null==s?void 0:s.map((e=>({label:e.abbreviation,value:e.insurerCode}))))}))})),(a,s)=>{const v=l("van-button"),h=l("van-popup");return o(),t("div",Y,[r("div",ee,[r("div",ae,[(o(!0),t(n,null,p(d(B),((e,a)=>(o(),t("div",{key:a,class:m(["tag-item",{checked:V.value==e.value}]),onClick:a=>((e,a)=>{V.value=a,c("onSelectInsure",{selectInsureCode:w.value,selectCategory:V.value})})(null==e||e.value,e.value)},[r("div",{class:m(["tag-out",{checked:V.value==e.value}])},[r("div",{class:m(["tag-item-text",{checked:V.value==e.value}])},i(e.label),3)],2),r("div",le,[r("div",{class:m({triangle:V.value==e.value})},null,2)])],10,se)))),128))]),e.filter?(o(),t("div",{key:0,class:"filter",onClick:s[0]||(s[0]=(...e)=>d(C)&&d(C)(...e))},[oe,r("div",{class:m(["text",{"has-select-condition":d(w).length>0}])},"筛选",2),u(D,{name:"filter"})])):f("",!0),u(h,{show:d(k),position:"right","close-on-click-overlay":"",style:I(e.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:d(L)},{default:g((()=>[r("div",te,[re,u(F,{modelValue:d(w),"onUpdate:modelValue":s[1]||(s[1]=e=>y(w)?w.value=e:null),options:d(b)},null,8,["modelValue","options"])]),r("div",ue,[u(v,{plain:"",type:"primary",onClick:_},{default:g((()=>[de])),_:1}),u(v,{type:"primary",onClick:x},{default:g((()=>[ie])),_:1})])])),_:1},8,["show","style","onClickOverlay"])])])}}}),[["__scopeId","data-v-397146ec"]]);const pe={class:"com-trial-product-wrapper"},ce={class:"container"},ve=(e=>(C("data-v-1cf5306a"),e=e(),L(),e))((()=>r("span",{class:"title"}," 已选产品 ",-1))),he={class:"popup-body"},me={class:"cell-title"},fe={class:"title"};var ge=q(e({props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(e,{emit:a}){const s=e,d=v([]),c=v([]),h=v({isShow:s.isShow}),m=()=>{a("close")},f=()=>{c.value=[],a("checked",[])},y=e=>{var s,l,o;null==(o=null==(l=null==(s=null==d?void 0:d.value)?void 0:s[e])?void 0:l.toggle)||o.call(l),a("checked",c.value)};return P((()=>s.isShow),(e=>{h.value.isShow=e})),P((()=>s.modalValue),((e=[])=>{c.value=e}),{deep:!0,immediate:!0}),(a,s)=>{const v=l("van-checkbox"),I=l("VanCell"),k=l("van-cell-group"),C=l("van-checkbox-group"),L=l("VanPopup");return o(),t("div",pe,[u(L,{show:h.value.isShow,"onUpdate:show":s[1]||(s[1]=e=>h.value.isShow=e),position:"bottom",onClose:m},{default:g((()=>[r("div",ce,[r("div",{class:"popup-header"},[r("span",{class:"clear-all",onClick:f}," 清空选项 "),ve,r("span",{class:"close",onClick:m})]),r("div",he,[u(C,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e)},{default:g((()=>[u(k,{inset:""},{default:g((()=>[(o(!0),t(n,null,p(e.proposalList,(e=>(o(),b(I,{key:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:e.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:a=>y(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":g((()=>[u(v,{ref_for:!0,ref:a=>d.value[e.proposalInsuredList[0].proposalInsuredProductList[0].productId]=a,shape:"square",name:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:w((a=>y(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)),["stop"])},null,8,["name","onClick"])])),title:g((()=>[r("div",me,[r("div",fe,i(e.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-1cf5306a"]]);const ye=e=>(C("data-v-4a6b9c72"),e=e(),L(),e),Ie={class:"search-wrap"},ke={class:"page-proposal-list"},Ce={class:"check-button"},Le={key:1,class:"van-sticky"},Pe={class:"add-plan"},be=k(" 已选"),we={class:"has-select-product"},Ve=k("款产品 "),_e=ye((()=>r("span",{class:"icon"},null,-1))),xe=k("添加计划书");var Se=q(e({props:{isCreateProposal:{type:Boolean,default:!0}},setup(e){const c=s({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0}),{searchValue:h,tagLists:m,isOpen:I,loading:k,finished:C,refreshing:L,productList:P,selectProduct:w,insurerCodeList:q,showCategory:N,productTotal:$,showFooter:B}=a(c),[D,F]=V(),[Z,E]=V(),G=T(),H=_(),J=x(),{isCreateProposal:R}=J.query,X=v(R?"repeatAdd":"add"),K=()=>{W({title:h.value,insurerCodeList:q.value,showCategory:N.value,excludeProductIdList:G.$state.excludeProduct||[],pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:l}=e;"10000"===a&&(P.value=null==s?void 0:s.datas,$.value=l)}))},Q=e=>{K()},Y=e=>{const{selectInsureCode:a,selectCategory:s}=e;q.value=a,N.value=s,K()},ee=()=>{L.value&&(P.value=[],L.value=!1),K(),k.value=!1,$.value===P.value.length&&(C.value=!0)},ae=()=>{H.push({path:"historyProposalList"})},se=S((()=>{var e;const{birthday:a,gender:s}=(null==(e=G.$state.proposalInfo.proposalInsuredList)?void 0:e[0])||{};return{birthday:a,gender:s}})),le=S((()=>P.value.length>0)),oe=e=>{c.selectProduct=e},te=()=>{const e=c.proposalList.filter((e=>c.selectProduct.includes(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)));G.setTrialData(e),H.push({path:"/proposal/createProposal"})},re=()=>{F(!1)},ue=e=>{if(R)return c.proposalList.push(e),B.value=!0,c.selectProduct.push(e.proposalInsuredList[0].proposalInsuredProductList[0].productId),void F(!1);G.setTrialData([e]),F(!1),H.push({path:"/proposal/createProposal",query:J.query})},de=()=>{C.value=!0,k.value=!0,ee()};return(e,a)=>{const s=l("van-search"),v=l("van-checkbox"),m=l("van-checkbox-group"),V=l("van-list"),_=l("van-pull-refresh"),x=l("van-button"),S=l("ProPageWrap");return o(),t(n,null,[u(S,{class:"page-proposal"},{default:g((()=>[r("div",Ie,[u(s,{modelValue:d(h),"onUpdate:modelValue":a[0]||(a[0]=e=>y(h)?h.value=e:null),placeholder:"搜索计划书",shape:"round",class:"search",onSearch:Q},null,8,["modelValue"]),d(le)?(o(),b(ne,{key:0,filter:d(I),"onUpdate:filter":a[1]||(a[1]=e=>y(I)?I.value=e:null),"filter-class":"filter-area",onOnSelectInsure:Y},null,8,["filter"])):f("",!0)]),r("div",ke,[u(_,{modelValue:d(L),"onUpdate:modelValue":a[4]||(a[4]=e=>y(L)?L.value=e:null),onRefresh:de},{default:g((()=>[u(V,{loading:d(k),"onUpdate:loading":a[3]||(a[3]=e=>y(k)?k.value=e:null),finished:d(C),"finished-text":d(le)?"- 已经到底了哦 -":"",onLoad:ee},{default:g((()=>[(o(!0),t(n,null,p(d(P),(e=>(o(),b(M,{key:e.id,"product-info":null==e?void 0:e.showConfig,onClick:a=>{return s=e,B.value=!1,c.productId=s.productId,void F(!0);var s}},j({_:2},[d(R)?{name:"checkedProduct",fn:g((()=>[r("div",Ce,[u(m,{modelValue:d(w),"onUpdate:modelValue":a[2]||(a[2]=e=>y(w)?w.value=e:null)},{default:g((()=>[u(v,{name:e.productId,shape:"square"},null,8,["name"])])),_:2},1032,["modelValue"])])]))}:void 0]),1032,["product-info","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])]),d(le)?f("",!0):(o(),b(O,{key:0,"empty-img":d(U),title:"没有找到相关内容~","empty-class":"empty-select"},null,8,["empty-img"])),d(R)&&d(B)?(o(),t("div",Le,[r("div",Pe,[r("p",{class:"has-select",onClick:a[5]||(a[5]=e=>d(E)(!d(Z)))},[be,r("span",we,i(d(w).length),1),Ve,_e]),u(x,{type:"primary",disabled:!d(w).length,onClick:te},{default:g((()=>[xe])),_:1},8,["disabled"])])])):f("",!0),u(ge,{modelValue:d(w),"onUpdate:modelValue":a[6]||(a[6]=e=>y(w)?w.value=e:null),"proposal-list":d(c).proposalList,"is-show":d(Z),onClose:a[7]||(a[7]=e=>d(E)(!1)),onChecked:oe},null,8,["modelValue","proposal-list","is-show"]),d(D)?(o(),b(z,{key:2,"is-show":d(D),type:X.value,insured:d(se),"product-id":d(c).productId,onClose:re,onFinished:ue},null,8,["is-show","type","insured","product-id"])):f("",!0)])),_:1}),d(R)?f("",!0):(o(),b(A,{key:0,"button-image":d("/static/assets/lishijihuashu.b3e3552e.png"),onClick:ae},null,8,["button-image"]))],64)}}}),[["__scopeId","data-v-4a6b9c72"]]);export{Se as default};

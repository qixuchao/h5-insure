import{_ as e,d as a,j as t,i as o,h as r,k as s,du as l,O as n,o as d,c as u,b as i,w as c,a as p,e as m,u as v,F as f,q as y,a8 as N,m as h,p as I,aH as S,dv as C,aa as E,ag as L,aC as _,aD as A}from"./index-1dfa3d8b.js";import{P as b}from"./index-3cd10d56.js";import{g as k}from"./trial-92ff395b.js";import{P as j}from"./constants-4b08cf92.js";import{I as g}from"./infoItem-753b2766.js";import{j as P}from"./verify-3d2844e0.js";import{t as q}from"./format-31cde443.js";const D={class:"page-insure-result"},T={class:"page-insure-result-wrap"},R={class:"header"},U={class:"content"},O={class:"content-header"},w={class:"product-name"},x=(e=>(_("data-v-4e53ea69"),e=e(),A(),e))((()=>p("span",null,"保障中",-1))),Y={class:"content-list"},F={class:"footer-button"},M=a({name:"OrderResult"});var V=e(a({...M,setup(e){const a=t({orderNo:"",holderName:"",orderAmount:"",orderStatus:""}),_=o(),A=r(),M=t(!1),{orderNo:V="",preview:B,saleUserId:G="",tenantId:H="",templateId:J=1}=_.query,z=t({});s((e=>a.value&&[l.SUCCESS,l.PAYMENT_SUCCESS,l.ACCEPT_POLICY].some((e=>{var t;return e===(null==(t=a.value)?void 0:t.orderStatus)}))));const K=s((e=>a.value&&[l.PAYMENT_FAILED,l.INSURER_REJECT,l.TIMEOUT,l.FAILED,l.CANCELED].some((e=>{var t;return e===(null==(t=a.value)?void 0:t.orderStatus)}))));s((()=>a.value.orderStatus===l.PAYING));const Q=()=>{A.push({path:j.orderList,query:_.query})},W=()=>{A.push({path:j.updateBankInfo,query:_.query})},X=()=>{S.confirm({title:"投保提示",message:"选择转批扣后将对该笔订单进行转换批次扣款，提交后将无法操作变更卡号，再次划款",cancelButtonText:"返回重选"}).then((async()=>{await P({orderNo:V,tenantId:H})}))},Z=()=>{k({orderNo:V,tenantId:H}).then((e=>{var t,o,r;const{code:s,data:l}=e;if("10000"===s){M.value=!1;const{holder:{name:e},policyNo:s,insuredList:n,applicationReqList:d}=l;z.value=l,null==(t=l.tenantOrderPaymentInfoList)||t[0];const{productName:u,riskList:i}=(null==(r=null==(o=null==n?void 0:n[0])?void 0:o.productList)?void 0:r[0])||{};let c=d.map((e=>e.applicationNo));(null==s?void 0:s.length)&&(c=s),a.value={holderName:e,productName:u,policyList:c,validateDate:"",coverage:null==i?void 0:i[0].coverage,orderStatusDesc:C[l.orderStatus],orderStatus:l.orderStatus,orderNo:l.orderNo,orderAmount:q(l.orderAmount)}}}))};return n((()=>{B||Z()})),(e,t)=>{const o=E,r=L,s=b;return d(),u("div",D,[i(o),i(s,{modelValue:v(M),"onUpdate:modelValue":t[0]||(t[0]=e=>I(M)?M.value=e:null),onRefresh:Z},{default:c((()=>[p("div",T,[p("div",R,m(v(z).orderStatusDesc),1),p("div",U,[p("div",O,[p("h4",w,m(v(a).productName),1),x]),i(g,{label:"投保人:",content:v(a).holderName,line:""},null,8,["content"]),i(g,{label:"投/保单号:",line:""},{content:c((()=>[p("div",Y,[(d(!0),u(f,null,y(v(a).policyList,(e=>(d(),u("p",{key:e},m(e),1)))),128))])])),_:1}),i(g,{label:"保费:",content:v(a).orderAmount,line:""},null,8,["content"])]),p("div",F,[v(K)?(d(),u(f,{key:0},[i(r,{type:"primary",plain:"",onClick:W},{default:c((()=>[N("变更卡号")])),_:1}),i(r,{type:"primary",onClick:X},{default:c((()=>[N("线下扣款")])),_:1})],64)):(d(),h(r,{key:1,block:"",type:"primary",onClick:Q},{default:c((()=>[N("确定")])),_:1}))])])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-4e53ea69"]]);export{V as default};

import{i as e,y as t,m as a,s as n,L as o,x as r,C as d,Z as l,B as s,P as u,aa as i,r as c,k as v,l as p,n as I,p as m,t as C,F as y,H as f,ac as b,G as g,d as k,D as L,T as O}from"./vendor-a007eb5d.js";import{d as N}from"./order-52110563.js";import{_ as P,g as _,s as S,ah as Y}from"./index-12c50db1.js";import{O as h,b as D}from"./order-28a89f29.js";import{I as T}from"./InsuredPart-81ee0129.js";import"./trial-2e2cfc40.js";const j={class:"com-field-info"},x={key:0,class:"label"},G={class:"content"};var H=P(e({props:{label:{type:String,default:""},content:{type:String,default:""}},setup(e){const u=t();return(t,i)=>(a(),n("div",j,[e.label?(a(),n("div",x,o(e.label),1)):r("",!0),d(u).label?l(t.$slots,"label",{key:1},void 0,!0):r("",!0),s("div",G,o(e.content),1),d(u).content?l(t.$slots,"content",{key:2},void 0,!0):r("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const B={key:0,class:"page-order-detail"},E={class:"card"},M={class:"header"},U={class:"product-name"},W={class:"company-name"},Z={class:"status"},q={key:0,class:"footer-button"},A=g("删除"),F=g("去处理"),X={key:1,class:"footer-button"},$=g("删除"),w=g("去支付"),z={key:2,class:"footer-button"},J=g("删除");var K=P(e({setup(e){const t=u(),l=i(),g=c(),{query:{orderNo:P,agentCode:j,tenantId:x,abbreviation:G,productCategory:K}}=t,Q=()=>{L.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{g.value&&N(g.value.id,g.value.orderStatus).then((e=>{const{code:t,data:a}=e;"10000"===t&&O.success("删除成功")}))}))},R=()=>{var e,t;if(!g.value)return!1;const{agencyId:a,saleChannelId:n,orderTopStatus:o}=g.value,r=null==(t=null==(e=g.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;if(!(D.PENDING!==o&&D.PAYING!==o||r!==Y.ZXYS&&r!==Y.BWYL)){const e={[Y.ZXYS]:"/internet/productDetail/package",[Y.BWYL]:"/internet/productDetail"};return l.push({path:e[r],query:{productCode:r,saleChannelId:n,agentCode:j,tenantId:x,agencyCode:a,orderNo:P}}),!0}return!1},V=()=>{var e,t;if(g.value){if(R())return;const{id:a,extInfo:{templateId:n,pageCode:o},agencyId:r,venderCode:d}=g.value,l=null==(t=null==(e=g.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;S(o,{productCode:l,orderNo:P,orderId:a,agentCode:j,templateId:n,tenantId:x,productCategory:K,insurerCode:d,agencyCode:r,isFromOrderList:"1"})}},ee=()=>{var e,t;if(g.value){if(R())return;const{id:a,saleUserId:n,extInfo:{templateId:o},agencyId:r,venderCode:d}=g.value,l=null==(t=null==(e=g.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;S("payInfo",{productCode:l,orderNo:P,orderId:a,saleUserId:n,templateId:o,tenantId:x,productCategory:K,insurerCode:d,agencyCode:r})}};return v((()=>{_({orderNo:P,agentCode:j,tenantId:x}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(g.value=a)}))})),(e,t)=>{const l=p("van-button"),u=p("ProPageWrap");return a(),I(u,null,{default:m((()=>{var e,t,u,i,c,v,p,L,O,N,P;return[g.value?(a(),n("div",B,[s("div",E,[C(H,null,{label:m((()=>{var e,t,a,n;return[s("div",M,[s("div",U,o(null==(a=null==(t=null==(e=g.value)?void 0:e.tenantOrderInsuredList[0])?void 0:t.tenantOrderProductList[0])?void 0:a.productName),1),s("div",W,o(null==(n=g.value)?void 0:n.abbreviation),1)])]})),content:m((()=>{var e;return[s("div",Z,o(g.value?d(h)[null==(e=g.value)?void 0:e.orderStatus]:""),1)]})),_:1}),C(H,{label:"投保单号",content:null==(e=g.value)?void 0:e.orderNo},null,8,["content"]),C(H,{label:"创建时间",content:d(k)(null==(t=g.value)?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),C(H,{label:"投保人",content:null==(i=null==(u=g.value)?void 0:u.tenantOrderHolder)?void 0:i.name},null,8,["content"]),(a(!0),n(y,null,f((null==(c=g.value)?void 0:c.tenantOrderInsuredList)||[],((e,t)=>(a(),I(H,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),C(T,{"product-data":null==(L=null==(p=null==(v=g.value)?void 0:v.tenantOrderInsuredList[0])?void 0:p.tenantOrderProductList)?void 0:L[0],class:"insure-info"},null,8,["product-data"]),(null==(O=g.value)?void 0:O.orderTopStatus)===d(D).PENDING?(a(),n("div",q,[C(l,{type:"primary",onClick:b(Q,["stop"])},{default:m((()=>[A])),_:1},8,["onClick"]),C(l,{type:"primary",onClick:b(V,["stop"])},{default:m((()=>[F])),_:1},8,["onClick"])])):r("",!0),(null==(N=g.value)?void 0:N.orderTopStatus)===d(D).PAYING?(a(),n("div",X,[C(l,{type:"primary",onClick:b(Q,["stop"])},{default:m((()=>[$])),_:1},8,["onClick"]),C(l,{type:"primary",onClick:b(ee,["stop"])},{default:m((()=>[w])),_:1},8,["onClick"])])):r("",!0),(null==(P=g.value)?void 0:P.orderTopStatus)===d(D).TIMEOUT?(a(),n("div",z,[C(l,{type:"primary",onClick:b(Q,["stop"])},{default:m((()=>[J])),_:1},8,["onClick"])])):r("",!0)])):r("",!0)]})),_:1})}}}),[["__scopeId","data-v-719e96a1"]]);export{K as default};

import{d as a,i as e,z as l,o as s,c as u,a as t,f as o,u as i,q as n,b as d,w as r,a8 as v,e as p,bP as c,m,F as f,_ as b,bQ as g,am as w,aN as y,bR as _}from"./index-a701edf7.js";const k={class:"sign-wrap"},h=["src"],V={class:"popup-body"},C={class:"sign-container-wrap"},S={class:"operate-bar"},x={class:"btns"},R=a({name:"sign"});var z=b(a({...R,props:{option:{default:{}},modelValue:{default:""}},emits:["update:modelValue","submitSign"],setup(a,{expose:b,emit:R}){const z=a,I=e(!1),N=e(),U=e(""),j=e(!0),q=()=>{var a;I.value=!0,null==(a=N.value)||a.clear(),setTimeout((()=>{var a;null==(a=N.value)||a.setDataURL(U.value),z.modelValue?j.value=!1:j.value=!0}))},D=()=>{g({images:[U.value],className:"customer-sign-preview"})},F=()=>{I.value=!1},L=()=>{var a,e;null==(e=null==(a=N.value)?void 0:a.clear)||e.call(a),U.value="",j.value=!0,R("update:modelValue","")},P=()=>{var a;U.value=null==(a=N.value)?void 0:a.save(),R("update:modelValue",U.value),R("submitSign",U.value),I.value=!1};return l((()=>z.modelValue),(()=>{U.value=z.modelValue}),{immediate:!0}),b({rewrite:L,openSign:q}),(a,e)=>{const l=w,b=y,g=_;return s(),u(f,null,[t("div",k,[o(a.$slots,"signImg",{data:i(U)},(()=>[i(U)?(s(),u("img",{key:0,class:"preview-sign",src:i(U),alt:"",onClick:D},null,8,h)):n("",!0),d(l,{type:"primary",round:"",size:"small",onClick:q},{default:r((()=>[v(p(i(U)?"重新签名":"点击签字"),1)])),_:1})]),!0)]),d(g,{show:i(I),"onUpdate:show":e[1]||(e[1]=a=>m(I)?I.value=a:null),position:"bottom",style:{height:"100%",overflow:"hidden"}},{default:r((()=>[t("div",V,[t("div",C,[d(c,{ref_key:"signRef",ref:N,placeholder:"请在此处签名",onStroke:e[0]||(e[0]=a=>j.value=!1)},null,512),t("div",S,[t("span",null,[d(b,{name:"info",color:"#ffaf22"}),v(" 请投保人正楷签署您的签名:")]),t("div",x,[d(l,{type:"default",class:"btn",onClick:F},{default:r((()=>[v("返回")])),_:1}),d(l,{type:"default",class:"btn",onClick:L},{default:r((()=>[v("重写")])),_:1}),d(l,{type:"primary",class:"btn",disabled:i(j),onClick:P},{default:r((()=>[v("确定签字")])),_:1},8,["disabled"])])])])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-6461f207"]]);export{z as S};

import{_ as e,d as a,aB as s,z as l,b as o,c as t,g as r,i as u,f as i,l as n,t as d,F as c,h as p,aA as v,r as h,x as m,aC as f,y as g,aD as y,B as k,aE as I,j as C,w as L,aF as P,au as b,J as w,n as V,K as _,L as x,a8 as S,e as j,k as U,G as q,u as F,a as O,aG as $}from"./index-dafa4b73.js";import{e as B,Z as D}from"./empty-76732ba8.js";import{u as N,P as T}from"./index-cc1377aa.js";import{P as A}from"./index-ffe11b84.js";import{q as z}from"./proposalList-8af429bd.js";import"./pdfh5-e5c0db2a.js";import"./index-e057a90f.js";import"./trial-91313141.js";import"./useDicData-523735d4.js";import"./trial-5cc6d47d.js";const G={class:"com-product-item"},E={class:"content-wrap"},J={class:"product-image"},K={class:"insure-name"},R={class:"product-info"},W={class:"title"},Z={class:"description"},H={class:"tags"};var M=e(a({props:{productInfo:{default:()=>({})}},setup(e){const a=e,{productInfo:h}=s(a),m=l({checked:!1});return s(m),(e,a)=>{const s=o("van-image");return t(),r("div",G,[u("div",E,[u("div",J,[i(s,{src:n(h).showConfig.fileUrl},null,8,["src"]),u("p",K,d((n(h).insurerName||"").substring(0,6)),1)]),u("div",R,[u("p",W,d(n(h).showConfig.title),1),u("p",Z,d(n(h).showConfig.text),1),u("p",H,[(t(!0),r(c,null,p(n(h).showConfig.tags,((e,a)=>(t(),r("span",{key:a,class:"tag"},d(e),1)))),128))])]),v(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-0e747840"]]);const Q=["xlink:href"],X=a({props:{name:{type:String,required:!0},color:{type:String,default:""}},setup(e){const a=e,s=m((()=>`#icon-${a.name}`)),l=m((()=>a.name?`svg-icon icon-${a.name}`:"svg-icon"));return(a,o)=>(t(),r("svg",f({class:n(l)},a.$attrs,{style:{color:e.color}}),[u("use",{"xlink:href":n(s)},null,8,Q)],16))}});const Y=e=>(_("data-v-397146ec"),e=e(),x(),e),ee={class:"com-tab-filter"},ae={class:"article-mid"},se={class:"article-tag"},le=["onClick"],oe={class:"trianele-out"},te=Y((()=>u("span",null,null,-1))),re={class:"popup-inner"},ue=Y((()=>u("div",{class:"popup-title"},"保险公司",-1))),ie={class:"footer-button"},ne=V("重置"),de=V("确定");var ce=e(a({props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(e,{emit:a}){const{isPopShow:v,openPop:m,closePop:f}=function(e=!1){const a=h(e);return{isPopShow:a,openPop:e=>{e instanceof Function&&e(),a.value=!0},closePop:e=>{a.value=!1,e instanceof Function&&e()}}}(!1),V=l({insureList:[],checkedInsure:[]}),{insureList:_,checkedInsure:x}=s(V),S=h(""),j=()=>{x.value=[]},U=()=>{a("onSelectInsure",{selectInsureCode:x.value,selectCategory:S.value}),f()};return g((()=>{y().then((e=>{const{code:a,data:s}=e;"10000"===a&&(_.value=null==s?void 0:s.map((e=>({label:e.abbreviation,value:e.insurerCode}))))}))})),(s,l)=>{const h=o("van-button"),g=o("van-popup");return t(),r("div",ee,[u("div",ae,[u("div",se,[(t(!0),r(c,null,p(n(I),((e,s)=>(t(),r("div",{key:s,class:k(["tag-item",{checked:S.value==e.value}]),onClick:s=>((e,s)=>{S.value=s,a("onSelectInsure",{selectInsureCode:x.value,selectCategory:S.value})})(null==e||e.value,e.value)},[u("div",{class:k(["tag-out",{checked:S.value==e.value}])},[u("div",{class:k(["tag-item-text",{checked:S.value==e.value}])},d(e.label),3)],2),u("div",oe,[u("div",{class:k({triangle:S.value==e.value})},null,2)])],10,le)))),128))]),e.filter?(t(),r("div",{key:0,class:"filter",onClick:l[0]||(l[0]=(...e)=>n(m)&&n(m)(...e))},[te,u("div",{class:k(["text",{"has-select-condition":n(x).length>0}])},"筛选",2),i(X,{name:"filter"})])):C("",!0),i(g,{show:n(v),position:"right","close-on-click-overlay":"",style:w(e.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:n(f)},{default:L((()=>[u("div",re,[ue,i(P,{modelValue:n(x),"onUpdate:modelValue":l[1]||(l[1]=e=>b(x)?x.value=e:null),options:n(_)},null,8,["modelValue","options"])]),u("div",ie,[i(h,{plain:"",type:"primary",onClick:j},{default:L((()=>[ne])),_:1}),i(h,{type:"primary",onClick:U},{default:L((()=>[de])),_:1})])])),_:1},8,["show","style","onClickOverlay"])])])}}}),[["__scopeId","data-v-397146ec"]]);const pe={class:"com-trial-product-wrapper"},ve={class:"container"},he=(e=>(_("data-v-1cf5306a"),e=e(),x(),e))((()=>u("span",{class:"title"}," 已选产品 ",-1))),me={class:"popup-body"},fe={class:"cell-title"},ge={class:"title"};var ye=e(a({props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(e,{emit:a}){const s=e,l=h([]),n=h([]),v=h({isShow:s.isShow}),m=()=>{a("close")},f=()=>{n.value=[],a("checked",[])},g=e=>{var s,o,t;null==(t=null==(o=null==(s=null==l?void 0:l.value)?void 0:s[e])?void 0:o.toggle)||t.call(o),a("checked",n.value)};return S((()=>s.isShow),(e=>{v.value.isShow=e})),S((()=>s.modalValue),((e=[])=>{n.value=e}),{deep:!0,immediate:!0}),(a,s)=>{const h=o("van-checkbox"),y=o("VanCell"),k=o("van-cell-group"),I=o("van-checkbox-group"),C=o("VanPopup");return t(),r("div",pe,[i(C,{show:v.value.isShow,"onUpdate:show":s[1]||(s[1]=e=>v.value.isShow=e),position:"bottom",onClose:m},{default:L((()=>[u("div",ve,[u("div",{class:"popup-header"},[u("span",{class:"clear-all",onClick:f}," 清空选项 "),he,u("span",{class:"close",onClick:m})]),u("div",me,[i(I,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e)},{default:L((()=>[i(k,{inset:""},{default:L((()=>[(t(!0),r(c,null,p(e.proposalList,(e=>(t(),j(y,{key:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:e.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:a=>g(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":L((()=>[i(h,{ref_for:!0,ref:a=>l.value[e.proposalInsuredList[0].proposalInsuredProductList[0].productId]=a,shape:"square",name:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:U((a=>g(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)),["stop"])},null,8,["name","onClick"])])),title:L((()=>[u("div",fe,[u("div",ge,d(e.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-1cf5306a"]]);const ke=e=>(_("data-v-a09b1840"),e=e(),x(),e),Ie={class:"search-wrap"},Ce={class:"page-proposal-list"},Le={class:"check-button"},Pe={key:1,class:"van-sticky"},be={class:"add-plan"},we=V(" 已选"),Ve={class:"has-select-product"},_e=V("款产品 "),xe=ke((()=>u("span",{class:"icon"},null,-1))),Se=V("添加计划书");var je=e(a({props:{isCreateProposal:{type:Boolean,default:!0}},setup(e){const a=l({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0}),{searchValue:v,tagLists:f,isOpen:g,loading:y,finished:k,refreshing:I,productList:P,selectProduct:w,insurerCodeList:V,showCategory:_,productTotal:x,showFooter:S}=s(a),[U,G]=q(),[E,J]=q(),K=N(),R=F(),W=O(),{isCreateProposal:Z}=W.query,H=h(Z?"repeatAdd":"add"),Q=()=>{z({title:v.value,insurerCodeList:V.value,showCategory:_.value,excludeProductIdList:K.$state.excludeProduct||[],pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:l}=e;"10000"===a&&(P.value=null==s?void 0:s.datas,x.value=l)}))},X=e=>{Q()},Y=e=>{const{selectInsureCode:a,selectCategory:s}=e;V.value=a,_.value=s,Q()},ee=()=>{I.value&&(P.value=[],I.value=!1),Q(),y.value=!1,x.value===P.value.length&&(k.value=!0)},ae=()=>{R.push({path:"historyProposalList"})},se=m((()=>{var e;const{birthday:a,gender:s}=(null==(e=K.$state.proposalInfo.proposalInsuredList)?void 0:e[0])||{};return{birthday:a,gender:s}})),le=m((()=>P.value.length>0)),oe=e=>{a.selectProduct=e},te=()=>{const e=a.proposalList.filter((e=>a.selectProduct.includes(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)));K.setTrialData(e),R.push({path:"/proposal/createProposal"})},re=()=>{G(!1)},ue=e=>{if(Z)return a.proposalList.push(e),S.value=!0,a.selectProduct.push(e.proposalInsuredList[0].proposalInsuredProductList[0].productId),void G(!1);K.setTrialData([e]),G(!1),R.push({path:"/proposal/createProposal",query:W.query})},ie=()=>{k.value=!0,y.value=!0,ee()};return(e,s)=>{const l=o("van-search"),h=o("van-checkbox"),m=o("van-checkbox-group"),f=o("van-list"),V=o("van-pull-refresh"),_=o("van-button"),x=o("ProPageWrap");return t(),r(c,null,[i(x,{class:"page-proposal"},{default:L((()=>[u("div",Ie,[i(l,{modelValue:n(v),"onUpdate:modelValue":s[0]||(s[0]=e=>b(v)?v.value=e:null),placeholder:"搜索计划书",shape:"round",class:"search",onSearch:X},null,8,["modelValue"]),n(le)?(t(),j(ce,{key:0,filter:n(g),"onUpdate:filter":s[1]||(s[1]=e=>b(g)?g.value=e:null),"filter-class":"filter-area",onOnSelectInsure:Y},null,8,["filter"])):C("",!0)]),u("div",Ce,[i(V,{modelValue:n(I),"onUpdate:modelValue":s[4]||(s[4]=e=>b(I)?I.value=e:null),onRefresh:ie},{default:L((()=>[i(f,{loading:n(y),"onUpdate:loading":s[3]||(s[3]=e=>b(y)?y.value=e:null),finished:n(k),"finished-text":n(le)?"- 已经到底了哦 -":"",onLoad:ee},{default:L((()=>[(t(!0),r(c,null,p(n(P),(e=>(t(),j(M,{key:e.id,"product-info":e,onClick:s=>{return l=e,S.value=!1,a.productId=l.productId,void G(!0);var l}},$({_:2},[n(Z)?{name:"checkedProduct",fn:L((()=>[u("div",Le,[i(m,{modelValue:n(w),"onUpdate:modelValue":s[2]||(s[2]=e=>b(w)?w.value=e:null)},{default:L((()=>[i(h,{name:e.productId,shape:"square"},null,8,["name"])])),_:2},1032,["modelValue"])])]))}:void 0]),1032,["product-info","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])]),n(le)?C("",!0):(t(),j(D,{key:0,"empty-img":n(B),title:"没有找到相关内容~","empty-class":"empty-select"},null,8,["empty-img"])),n(Z)&&n(S)?(t(),r("div",Pe,[u("div",be,[u("p",{class:"has-select",onClick:s[5]||(s[5]=e=>n(J)(!n(E)))},[we,u("span",Ve,d(n(w).length),1),_e,xe]),i(_,{type:"primary",disabled:!n(w).length,onClick:te},{default:L((()=>[Se])),_:1},8,["disabled"])])])):C("",!0),i(ye,{modelValue:n(w),"onUpdate:modelValue":s[6]||(s[6]=e=>b(w)?w.value=e:null),"proposal-list":n(a).proposalList,"is-show":n(E),onClose:s[7]||(s[7]=e=>n(J)(!1)),onChecked:oe},null,8,["modelValue","proposal-list","is-show"]),n(U)?(t(),j(T,{key:2,"is-show":n(U),type:H.value,insured:n(se),"product-id":n(a).productId,onClose:re,onFinished:ue},null,8,["is-show","type","insured","product-id"])):C("",!0)])),_:1}),n(Z)?C("",!0):(t(),j(A,{key:0,"button-image":n("/static/assets/lishijihuashu.b3e3552e.png"),onClick:ae},null,8,["button-image"]))],64)}}}),[["__scopeId","data-v-a09b1840"]]);export{je as default};

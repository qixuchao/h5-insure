import{_ as e,d as t,u as n,a,r,o,b as l,c as u,e as s,w as i,f as d,g as c,h as p,i as m,t as y,F as f,j as v,k as g,l as C,m as S,P as b,n as I,T as k,p as _,R as h,C as T,q,s as w,v as V,x as j,y as Q,B as N,z as P,A,D as O,E as U,G as x,I as D,H as J,J as z}from"./index-5239afda.js";import{P as L}from"./pdfh5-008ca364.js";import{s as W,g as $}from"./inform-d4680305.js";import{N as B}from"./notice-a4a1c218.js";const E={class:"problem"},F={class:"footer-button"},G=I("提交");var H=e(t({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const I=e;n();const P=a(),A=r([]),{questionnaireType:O}=P.query,{orderNo:U="2022021815432987130620",productCode:x="CQ75CQ76",templateId:D=1,agentCode:J="65434444",orderId:z=13005,tenantId:L=9991000007}=P.query,W={1:"投保人",2:"被保人",3:"代理人"},$=r([]),B=e=>e?JSON.parse(e).map((e=>({title:e.value,value:e.uid}))):[],H=()=>{($.value||[]).filter((e=>{var t;return 0===e.singleAnswer||e.singleAnswer||(null==(t=e.multipleChoose)?void 0:t.length)})).length!==$.value.length?k("请完成所有题目进行下一步"):t("onSubmitCurrentStatus",1,JSON.stringify($.value))},R=()=>{_({orderNo:U,saleUserId:J,tenantId:L}).then((({code:e,data:t})=>{if("10000"===e){const e=t.tenantOrderNoticeList.findIndex((e=>1===e.isDone&&+e.objectId===I.currentPageInfo[0].questionnaireId));$.value=-1!==e?(e=>JSON.parse(e))(t.tenantOrderNoticeList[e].content):I.currentPageInfo.map((e=>2===e.questionType?{multipleChoose:[],...e}:{singleAnswer:3===e.questionType?0:"",...e}))}}))};return o((()=>{A.value=[],R()})),(e,t)=>{const n=h,a=T,r=q,o=w,I=V,k=j,_=Q,P=N,U=l("ProPageWrap");return u(),s(U,{class:"com-question"},{default:i((()=>[d(b,{title:`${W[S(O)]}健康告知书`},{default:i((()=>[(u(!0),c(f,null,p($.value,((e,l)=>(u(),c("div",{key:l,class:"question-item"},[m("div",E,y(l+1)+". "+y(e.title),1),1===e.questionType?(u(),s(o,{key:0,modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t},{default:i((()=>[d(r,{inset:""},{default:i((()=>[(u(!0),c(f,null,p(B(e.options),((t,r)=>(u(),s(a,{key:r,title:t.title,clickable:"",onClick:t=>e.singleAnswer=r},{"right-icon":i((()=>[d(n,{name:r},null,8,["name"])])),_:2},1032,["title","onClick"])))),128))])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])):v("",!0),2===e.questionType?(u(),s(k,{key:1,modelValue:e.multipleChoose,"onUpdate:modelValue":t=>e.multipleChoose=t},{default:i((()=>[d(r,{inset:""},{default:i((()=>[(u(!0),c(f,null,p(B(e.options),((e,n)=>(u(),s(a,{key:e.uid,clickable:"",title:e.title,onClick:e=>(e=>{A.value[e].toggle()})(n)},{"right-icon":i((()=>[d(I,{ref_for:!0,ref:e=>A.value[n]=e,shape:"square",name:n,onClick:t[0]||(t[0]=g((()=>{}),["stop"]))},null,8,["name"])])),_:2},1032,["title","onClick"])))),128))])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])):v("",!0),3===e.questionType?(u(),s(C,{key:2,modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t,options:[{label:"是",value:"Y"},{label:"否",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):v("",!0),4===e.questionType?(u(),s(r,{key:3,inset:""},{default:i((()=>[d(_,{modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)):v("",!0)])))),128))])),_:1},8,["title"]),m("div",F,[d(P,{type:"primary",block:"",onClick:H},{default:i((()=>[G])),_:1})])])),_:1})}}}),[["__scopeId","data-v-5d98a972"]]);const R={class:"com-document"},Y={class:"title"},K={class:"content"},M={class:"footer-button"},X=I("了解并继续");var Z=e(t({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e;return(e,a)=>{const r=N,o=l("ProPageWrap"),c=P("dompurify-html");return u(),s(o,null,{default:i((()=>{var e,o;return[m("div",R,[m("div",Y,y(null==(e=n.currentPageInfo[0])?void 0:e.title),1),A(m("div",K,null,512),[[c,null==(o=n.currentPageInfo[0])?void 0:o.content]]),m("div",M,[d(r,{type:"primary",onClick:a[0]||(a[0]=e=>t("onSubmitCurrentStatus",1))},{default:i((()=>[X])),_:1})])])]})),_:1})}}}),[["__scopeId","data-v-6e53a5c6"]]);const ee={class:"com-pdf-viewer"},te=["id","isee_pdf"],ne={key:2,class:"footer-button"},ae=I("部分为是"),re=I("以上皆否"),oe={key:3,class:"footer-button"},le=I("了解并继续");var ue=e(t({props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e,a=O(),o=r(!1);r(!0);const l=r(null),p=U((()=>["png","jpg","jpeg"].some((e=>n.url.includes(e))))),m=async()=>{o.value=!0,setTimeout((()=>{(()=>{var e;try{l.value=new L(`#${a}`,{pdfurl:n.url,renderType:"canvas",lazy:!0}),null==(e=l.value)||e.on("complete",((e,t,n)=>{"error"===e&&k("文件损坏，无法打开！")}))}catch(t){}})()}),0)};return x((()=>{m()})),(e,r)=>{const o=D,l=N;return u(),c("div",ee,[S(p)?(u(),s(o,{key:0,width:"100%",height:"80vh",fit:"contain",src:n.url},null,8,["src"])):(u(),c("div",{key:1,id:S(a),isee_pdf:e.pdfUrl,class:"pdf-wapper"},null,8,te)),"question"===n.materialType?(u(),c("div",ne,[d(l,{plain:"",type:"primary",onClick:r[0]||(r[0]=e=>t("onSubmitCurrentStatus",2))},{default:i((()=>[ae])),_:1}),d(l,{type:"primary",onClick:r[1]||(r[1]=e=>t("onSubmitCurrentStatus",1))},{default:i((()=>[re])),_:1})])):(u(),c("div",oe,[d(l,{type:"primary",onClick:r[2]||(r[2]=e=>t("onSubmitCurrentStatus",1))},{default:i((()=>[le])),_:1})]))])}}}),[["__scopeId","data-v-573d8b28"]]);const se={class:"iframe-wrap"},ie=["src"],de={key:0,class:"footer-button"},ce=I("部分为是"),pe=I("以上皆否"),me={key:1,class:"footer-button"},ye=I("了解并继续");var fe=e(t({props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e;return(e,a)=>{const r=N;return u(),c("div",se,[m("iframe",{src:n.url,frameborder:"0"},null,8,ie),"question"===n.materialType?(u(),c("div",de,[d(r,{plain:"",type:"primary",onClick:a[0]||(a[0]=e=>t("onSubmitCurrentStatus",2))},{default:i((()=>[ce])),_:1}),d(r,{type:"primary",onClick:a[1]||(a[1]=e=>t("onSubmitCurrentStatus",1))},{default:i((()=>[pe])),_:1})])):(u(),c("div",me,[d(r,{type:"primary",onClick:a[2]||(a[2]=e=>t("onSubmitCurrentStatus",1))},{default:i((()=>[ye])),_:1})]))])}}}),[["__scopeId","data-v-1fc4d3ec"]]);const ve={class:"com-health-notice"},ge=t({setup(e){const t=n(),r=a(),o=J.get("questionData"),{materialType:l="question",questionnaireType:i="1",orderNo:d="2022021815432987130620",productCode:p="CQ75CQ76",templateId:m=1,agentCode:y="65434444",orderId:f=13005,tenantId:g=9991000007}=r.query&&r.query,C=z({pageData:{},currentQuestionInfo:[]}),b=U((()=>"2"===i)),I=U((()=>{var e;return"1"===i&&([1].includes(null==(e=C.currentQuestionInfo[0])?void 0:e.textType)||1===(null==o?void 0:o.materialSource))})),k=U((()=>{var e;return"1"===i&&([2].includes(null==(e=C.currentQuestionInfo[0])?void 0:e.textType)||2===(null==o?void 0:o.materialSource))})),h=U((()=>{var e;return"1"===i&&([3].includes(null==(e=C.currentQuestionInfo[0])?void 0:e.textType)||3===(null==o?void 0:o.materialSource))})),T=(e,n)=>{var a;const{id:r,objectType:l,noticeObject:u,materialSource:s}=o;W({content:n||(null==(a=C.currentQuestionInfo[0])?void 0:a.content),contentType:i||"3",isDone:e,noticeType:B[l]||"99",objectId:r,objectType:l||u,orderId:C.pageData.id,orderNo:d,tenantId:g}).then((({code:e,data:n})=>{"10000"===e&&t.go(-1)}))};return x((()=>{_({orderNo:d,saleUserId:y,tenantId:g}).then((({code:e,data:t})=>{"10000"===e&&Object.assign(C.pageData,t)})),(null==o?void 0:o.materialSource)?C.currentQuestionInfo=[{...null==o?void 0:o.materialSource,title:null==o?void 0:o.materialName,content:null==o?void 0:o.materialContent}]:(()=>{const{insurerCode:e,id:t,objectType:n,productCategory:a}=o;$({insurerCode:e,id:t,objectType:n,productCategory:a,orderNo:d,tenantId:g}).then((({code:e,data:t})=>{"10000"===e&&(C.currentQuestionInfo=t)}))})()})),(e,t)=>{var n,a;return u(),c("div",ve,[S(b)?(u(),s(H,{key:0,"current-page-info":S(C).currentQuestionInfo,onOnSubmitCurrentStatus:T},null,8,["current-page-info"])):v("",!0),S(k)?(u(),s(Z,{key:1,"material-type":S(l),"current-page-info":S(C).currentQuestionInfo,onOnSubmitCurrentStatus:T},null,8,["material-type","current-page-info"])):v("",!0),S(I)?(u(),s(ue,{key:2,"material-type":S(l),url:null==(n=S(C).currentQuestionInfo[0])?void 0:n.content,onOnSubmitCurrentStatus:T},null,8,["material-type","url"])):v("",!0),S(h)?(u(),s(fe,{key:3,"material-type":S(l),url:null==(a=S(C).currentQuestionInfo[0])?void 0:a.content,onOnSubmitCurrentStatus:T},null,8,["material-type","url"])):v("",!0)])}}});export{ge as default};

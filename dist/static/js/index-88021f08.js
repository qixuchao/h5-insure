import{g as M,v as O,L as X,r as m,h as p,m as k,y as t,n as u,z as e,I as $,F as w,E as U,V as ve,C as x,M as ee,J as V,s as E,k as g,a6 as D,A as fe,a1 as Z,a2 as G,B,X as W,j as F,af as ge,a5 as K,ad as Ce,Q as Ie}from"./vendor-4dbfa310.js";import{_ as A,u as ye,t as ke,v as Le,g as Te}from"./index-21ff2934.js";import{q as be}from"./index-cff3571e.js";import{u as Se,P as Pe}from"./index-7526c06a.js";import{a as Ne,P as De}from"./da-9419e818.js";import{q as $e}from"./proposalList-1aa8a348.js";import"./trial-5b7db6fc.js";const we={class:"com-product-item"},Be={class:"content-wrap"},Ve={class:"product-image"},xe={class:"insure-name"},Ee={class:"product-info"},Fe={class:"title"},Oe={class:"description"},Me={class:"tags"},Ue=M({props:{productInfo:{default:()=>({})}},setup(o){const r=o,{productInfo:c}=O(r),h=X({checked:!1});return O(h),(v,I)=>{const L=m("van-image");return p(),k("div",we,[t("div",Be,[t("div",Ve,[u(L,{src:e(c).fileUrl},null,8,["src"]),t("p",xe,$(e(c).insurerName),1)]),t("div",Ee,[t("p",Fe,$(e(c).title),1),t("p",Oe,$(e(c).text),1),t("p",Me,[(p(!0),k(w,null,U(e(c).tags,(i,d)=>(p(),k("span",{key:d,class:"tag"},$(i),1))),128))])]),ve(v.$slots,"checkedProduct",{},void 0,!0)])])}}});var Ae=A(Ue,[["__scopeId","data-v-ecb0026c"]]);const H=o=>(Z("data-v-06a1a284"),o=o(),G(),o),Re={class:"com-tab-filter"},qe={class:"article-mid"},ze={class:"article-tag"},je=["onClick"],We={class:"trianele-out"},Xe=H(()=>t("span",null,null,-1)),Ze=H(()=>t("div",{class:"text"},"\u7B5B\u9009",-1)),Ge={class:"popup-inner"},He=H(()=>t("div",{class:"popup-title"},"\u4FDD\u9669\u516C\u53F8",-1)),Je={class:"footer-button"},Qe=B("\u91CD\u7F6E"),Ye=B("\u786E\u5B9A"),Ke=M({props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(o,{emit:r}){const{isPopShow:c,openPop:h,closePop:v}=ye(!1),I=X({insureList:[],checkedInsure:[]}),{insureList:L,checkedInsure:i}=O(I),d=x(""),n=(b,f)=>{d.value=f,r("onSelectInsure",{selectInsureCode:i.value,selectCategory:d.value})},y=()=>{i.value=[]},T=()=>{r("onSelectInsure",{selectInsureCode:i.value,selectCategory:d.value}),v()};return ee(()=>{be().then(b=>{const{code:f,data:S}=b;f==="10000"&&(L.value=S==null?void 0:S.map(P=>({label:P.abbreviation,value:P.insurerCode})))})}),(b,f)=>{const S=m("van-button"),P=m("van-popup");return p(),k("div",Re,[t("div",qe,[t("div",ze,[(p(!0),k(w,null,U(e(ke),(l,C)=>(p(),k("div",{key:C,class:V(["tag-item",{checked:d.value==C}]),onClick:R=>n(l==null?void 0:l.value,C)},[t("div",{class:V(["tag-out",{checked:d.value==C}])},[t("div",{class:V(["tag-item-text",{checked:d.value==C}])},$(l.label),3)],2),t("div",We,[t("div",{class:V({triangle:d.value==C})},null,2)])],10,je))),128))]),o.filter?(p(),k("div",{key:0,class:"filter",onClick:f[0]||(f[0]=(...l)=>e(h)&&e(h)(...l))},[Xe,Ze,u(Le,{name:"filter"})])):E("",!0),u(P,{show:e(c),position:"right","close-on-click-overlay":"",style:fe(o.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:e(v)},{default:g(()=>[t("div",Ge,[He,u(Te,{modelValue:e(i),"onUpdate:modelValue":f[1]||(f[1]=l=>D(i)?i.value=l:null),options:e(L)},null,8,["modelValue","options"])]),t("div",Je,[u(S,{plain:"",type:"primary",onClick:y},{default:g(()=>[Qe]),_:1}),u(S,{type:"primary",onClick:T},{default:g(()=>[Ye]),_:1})])]),_:1},8,["show","style","onClickOverlay"])])])}}});var et=A(Ke,[["__scopeId","data-v-06a1a284"]]);const tt={data:[{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1013001,code:"code1013001",labelCategoryName:"\u91CD\u75BE",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-06-29T23:49:26.000+08:00",gmtModified:"2022-06-30T17:34:38.000+08:00",modifier:"\u5434\u8D85"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1013004,code:"code1013004",labelCategoryName:"\u610F\u5916",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-06-29T23:49:50.000+08:00",gmtModified:"2022-06-29T23:49:50.000+08:00",modifier:"52041001002174"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1013007,code:"code1013007",labelCategoryName:"\u533B\u7597",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-06-29T23:53:28.000+08:00",gmtModified:"2022-06-29T23:53:28.000+08:00",modifier:"52041001002174"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1013010,code:"code1013010",labelCategoryName:"edward08",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-06-29T23:55:28.000+08:00",gmtModified:"2022-06-30T17:05:19.000+08:00",modifier:"\u5434\u8D85"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1018001,code:"code1018001",labelCategoryName:"\u5065\u5EB7",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-07-08T17:14:44.000+08:00",gmtModified:"2022-07-08T17:16:59.000+08:00",modifier:"\u5510\u6B22\u4E13\u7528\u8D26\u53F7"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1019001,code:"code1019001",labelCategoryName:"\u6807\u7B7E\u5206\u7C7B22",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-07-13T17:49:54.000+08:00",gmtModified:"2022-07-13T17:50:01.000+08:00",modifier:"\u5C0F\u90ED"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1012001,code:"code1012001",labelCategoryName:"\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D",authStatus:"1",authStatusName:null,sort:3,infoLabelDTOList:null,gmtCreated:"2022-06-29T20:55:07.000+08:00",gmtModified:"2022-07-02T20:05:45.000+08:00",modifier:"\u5C0F\u90ED"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1005001,code:"code1005001",labelCategoryName:"rrr",authStatus:"1",authStatusName:null,sort:4,infoLabelDTOList:null,gmtCreated:"2022-06-23T17:06:25.000+08:00",gmtModified:"2022-06-24T09:40:48.000+08:00",modifier:"52041001002366"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1009001,code:"code1009001",labelCategoryName:"\u6807\u7B7E\u5206\u7C7B01",authStatus:"1",authStatusName:null,sort:10,infoLabelDTOList:null,gmtCreated:"2022-06-28T10:10:59.000+08:00",gmtModified:"2022-06-28T10:12:35.000+08:00",modifier:"107"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1017002,code:"code1017002",labelCategoryName:"\u6D4B\u8BD52222",authStatus:"1",authStatusName:null,sort:22,infoLabelDTOList:null,gmtCreated:"2022-07-02T19:59:03.000+08:00",gmtModified:"2022-07-08T14:48:33.000+08:00",modifier:"\u6C88\u666F\u6587"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1017004,code:"code1017004",labelCategoryName:"\u6D4B\u8BD522",authStatus:"1",authStatusName:null,sort:22,infoLabelDTOList:null,gmtCreated:"2022-07-02T20:00:27.000+08:00",gmtModified:"2022-07-08T14:48:26.000+08:00",modifier:"\u6C88\u666F\u6587"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1017003,code:"code1017003",labelCategoryName:"\u6D4B\u8BD53333",authStatus:"1",authStatusName:null,sort:33,infoLabelDTOList:null,gmtCreated:"2022-07-02T19:59:14.000+08:00",gmtModified:"2022-07-08T14:48:30.000+08:00",modifier:"\u6C88\u666F\u6587"}]};const st=o=>(Z("data-v-1c708713"),o=o(),G(),o),lt={class:"com-trial-product-wrapper"},ot={class:"container"},at=st(()=>t("span",{class:"title"}," \u5DF2\u9009\u4EA7\u54C1 ",-1)),ut={class:"popup-body"},nt={class:"cell-title"},rt={class:"title"},dt=M({props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(o,{emit:r}){const c=o,h=x([]),v=x([]),I=x({isShow:c.isShow}),L=()=>{r("close")},i=()=>{v.value=[],r("checked",[])},d=n=>{var y,T,b;(b=(T=(y=h==null?void 0:h.value)==null?void 0:y[n])==null?void 0:T.toggle)==null||b.call(T),r("checked",v.value)};return W(()=>c.isShow,n=>{I.value.isShow=n}),W(()=>c.modalValue,(n=[])=>{v.value=n},{deep:!0,immediate:!0}),(n,y)=>{const T=m("van-checkbox"),b=m("VanCell"),f=m("van-cell-group"),S=m("van-checkbox-group"),P=m("VanPopup");return p(),k("div",lt,[u(P,{show:I.value.isShow,"onUpdate:show":y[1]||(y[1]=l=>I.value.isShow=l),position:"bottom",onClose:L},{default:g(()=>[t("div",ot,[t("div",{class:"popup-header"},[t("span",{class:"clear-all",onClick:i}," \u6E05\u7A7A\u9009\u9879 "),at,t("span",{onClick:L},"X")]),t("div",ut,[u(S,{modelValue:v.value,"onUpdate:modelValue":y[0]||(y[0]=l=>v.value=l)},{default:g(()=>[u(f,{inset:""},{default:g(()=>[(p(!0),k(w,null,U(o.proposalList,l=>(p(),F(b,{key:l.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:l.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:C=>d(l.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":g(()=>[u(T,{ref_for:!0,ref:C=>h.value[l.proposalInsuredList[0].proposalInsuredProductList[0].productId]=C,shape:"square",name:l.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:ge(C=>d(l.proposalInsuredList[0].proposalInsuredProductList[0].productId),["stop"])},null,8,["name","onClick"])]),title:g(()=>[t("div",nt,[t("div",rt,$(l.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])])])]),_:1},8,["show"])])}}});var ct=A(dt,[["__scopeId","data-v-1c708713"]]);const it=o=>(Z("data-v-71285ddb"),o=o(),G(),o),pt={class:"search-wrap"},_t={class:"page-proposal-list"},mt={class:"check-button"},ht={key:0,class:"van-sticky"},vt={class:"add-plan"},ft=B(" \u5DF2\u9009"),gt={class:"has-select-product"},Ct=B("\u6B3E\u4EA7\u54C1 "),It=it(()=>t("span",{class:"icon"},null,-1)),yt=B("\u6DFB\u52A0\u8BA1\u5212\u4E66"),kt=M({props:{isCreateProposal:{type:Boolean,default:!0}},setup(o){const r=X({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0}),{searchValue:c,tagLists:h,isOpen:v,loading:I,finished:L,refreshing:i,productList:d,selectProduct:n,insurerCodeList:y,showCategory:T,productTotal:b,showFooter:f}=O(r),[S,P]=K(),[l,C]=K(),R=Se(),q=Ce(),te=Ie(),{isCreateProposal:z}=te.query,J=()=>{$e({title:c.value,insurerCodeList:y.value,showCategory:T.value,excludeProductIdList:[],pageNum:1,pageSize:999}).then(_=>{const{code:s,data:N,total:j}=_;s==="10000"&&(console.log(N),d.value=N==null?void 0:N.datas,b.value=j)})},se=()=>{},le=_=>{const{selectInsureCode:s,selectCategory:N}=_;y.value=s,T.value=N,J()},Q=()=>{i.value&&(d.value=[],i.value=!1),J(),I.value=!1,b.value===d.value.length&&(L.value=!0)},oe=()=>{q.push({path:"historyProposalList"})},ae=_=>{f.value=!1,r.productId=_.productId,P(!0)},ue=_=>{r.selectProduct=_},ne=()=>{const _=r.proposalList.filter(s=>r.selectProduct.includes(s.proposalInsuredList[0].proposalInsuredProductList[0].productId));R.setTrialData(_),q.push({path:"/proposal/createProposal"})},re=()=>{P(!1)},de=_=>{if(z){r.proposalList.push(_),f.value=!0,P(!1);return}R.setTrialData([_]),P(!1),q.push({path:"/proposal/createProposal"})},ce=()=>{L.value=!0,I.value=!0,Q()};return W(()=>n,_=>{console.log("newVal",_)},{deep:!0,immediate:!0}),ee(()=>{h.value=[{labelCategoryName:"\u5168\u90E8",id:""},...tt.data]}),(_,s)=>{const N=m("van-search"),j=m("van-checkbox"),ie=m("van-checkbox-group"),pe=m("van-list"),_e=m("van-pull-refresh"),me=m("van-button"),he=m("ZaPageWrap");return p(),k(w,null,[u(he,{class:"page-proposal"},{default:g(()=>[t("div",pt,[u(N,{modelValue:e(c),"onUpdate:modelValue":s[0]||(s[0]=a=>D(c)?c.value=a:null),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",shape:"round",class:"search",onClickInput:se},null,8,["modelValue"]),u(et,{tagList:e(h),"onUpdate:tagList":s[1]||(s[1]=a=>D(h)?h.value=a:null),filter:e(v),"onUpdate:filter":s[2]||(s[2]=a=>D(v)?v.value=a:null),"filter-class":"filter-area",onOnSelectInsure:le},null,8,["tagList","filter"])]),t("div",_t,[u(_e,{modelValue:e(i),"onUpdate:modelValue":s[5]||(s[5]=a=>D(i)?i.value=a:null),onRefresh:ce},{default:g(()=>[u(pe,{loading:e(I),"onUpdate:loading":s[4]||(s[4]=a=>D(I)?I.value=a:null),finished:e(L),"finished-text":"\u5DF2\u7ECF\u5230\u5E95\u4E86\u54E6",onLoad:Q},{default:g(()=>[(p(!0),k(w,null,U(e(d),a=>(p(),F(Ae,{key:a.id,"product-info":a==null?void 0:a.showConfig,onClick:Y=>ae(a)},{checkedProduct:g(()=>[t("div",mt,[u(ie,{modelValue:e(n),"onUpdate:modelValue":s[3]||(s[3]=Y=>D(n)?n.value=Y:null)},{default:g(()=>[u(j,{name:a.productId,shape:"square"},null,8,["name"])]),_:2},1032,["modelValue"])])]),_:2},1032,["product-info","onClick"]))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])]),e(z)&&e(f)?(p(),k("div",ht,[t("div",vt,[t("p",{class:"has-select",onClick:s[6]||(s[6]=a=>e(C)(!0))},[ft,t("span",gt,$(e(n).length),1),Ct,It]),u(me,{type:"primary",disabled:!e(n).length,onClick:ne},{default:g(()=>[yt]),_:1},8,["disabled"])])])):E("",!0),u(ct,{modelValue:e(n),"onUpdate:modelValue":s[7]||(s[7]=a=>D(n)?n.value=a:null),"proposal-list":e(r).proposalList,"is-show":e(l),onClose:s[8]||(s[8]=a=>e(C)(!1)),onChecked:ue},null,8,["modelValue","proposal-list","is-show"]),e(S)?(p(),F(Pe,{key:1,"is-show":e(S),type:"add","product-id":e(r).productId,onClose:re,onFinished:de},null,8,["is-show","product-id"])):E("",!0)]),_:1}),e(z)?E("",!0):(p(),F(De,{key:0,"button-image":e(Ne),onClick:oe},null,8,["button-image"]))],64)}}});var $t=A(kt,[["__scopeId","data-v-71285ddb"]]);export{$t as default};

import{d as e,t as a,r as s,o as t,c as o,a as r,b as l,u as d,e as i,f as c,_ as u,I as n,g as p,h as m,i as v,j as f,k as g,l as h,w as C,m as L,F as y,n as k,P as _,p as P,q as I,s as x,T as j}from"./index-8067fbb0.js";import{P as w}from"./index-6d7087fa.js";import{L as V}from"./index-848ae197.js";import{_ as b}from"./index-ecea95c7.js";import{S as T}from"./index-3583f959.js";import{_ as U}from"./empty-ae586b6c.js";import{q as M}from"./product-8a4026f6.js";import{P as F}from"./trial-67ba3d02.js";const N={class:"com-product-item"},S={class:"content-wrap"},q={class:"product-image"},O={class:"product-info"},R={class:"title"},D={class:"description"},W={class:"price-item"},z={class:"price"};var E=u(e({__name:"productItem",props:{productInfo:{default:()=>({})},errorMsg:{default:""}},setup(e){const u=e,{productInfo:p}=a(u),m=s({checked:!1});return a(m),(e,a)=>{const s=n;return t(),o("div",N,[r("div",S,[r("div",q,[l(s,{src:d(p).image},null,8,["src"])]),r("div",O,[r("p",R,i(d(p).productFullName),1),r("p",D,i(d(p).desc),1),r("p",W,[r("span",z,i(d(p).price),1),r("span",null,i(d(p).amountUnit),1)])]),c(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-69e3f256"]]);const G={class:"search-wrap"},$={class:"article-tag"},A=["onClick"],B={class:"page-proposal-list"},H=e({name:"productList"});var J=u(e({...H,setup(e){const c=p();m();const u=s({searchValue:"",tagLists:[],loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],productCategory:"",productTotal:0,checked:"",productCode:void 0,proposalList:[],showFooter:!0,productName:"",productCodeList:[],errorMsgMap:{},excludeProductCodeList:[],isCreateProposal:!1,selectedProductList:[],firstLoading:!0}),{searchValue:n,tagLists:N,loading:S,finished:q,refreshing:O,productList:R,selectProduct:D,insurerCodeList:W,productCategory:z,productTotal:H,showFooter:J}=a(u),K=()=>{u.firstLoading&&j.loading("加载中..."),M({keyword:n.value,insurerCodeList:W.value,productCategory:z.value,pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:t}=e;"10000"===a&&(R.value=s,H.value=t)})).finally((()=>{j.clear(),u.firstLoading=!1}))},Q=e=>{K()},X=v(0),Y=()=>{var e;O.value&&(R.value=[],O.value=!1),K(),S.value=!1,H.value===(null==(e=R.value)?void 0:e.length)&&(q.value=!0)},Z=f((()=>{var e;return(null==(e=R.value)?void 0:e.length)>0})),ee=()=>{q.value=!0,S.value=!0,Y()};return(e,a)=>{const s=T,p=b,m=V,v=w,f=g("ProPageWrap");return t(),h(f,{class:"page-proposal"},{default:C((()=>[r("div",G,[l(s,{modelValue:d(n),"onUpdate:modelValue":a[0]||(a[0]=e=>L(n)?n.value=e:null),placeholder:"请输入产品名称进行搜索",shape:"round",class:"search","clear-trigger":"always","show-action":"",clearable:"",onSearch:Q},null,8,["modelValue"]),r("div",$,[(t(!0),o(y,null,k(d(_),((e,a)=>(t(),o("div",{key:a,class:P(["tag-item",{checked:d(X)===a}]),onClick:s=>((e,a)=>{X.value=a,z.value=e,K()})(e.value,a)},[r("div",{class:P(["tag-out",{checked:d(X)==a}])},[r("div",{class:P(["tag-item-text",{checked:d(X)==a}])},i(e.label),3)],2)],10,A)))),128))])]),d(Z)||d(u).firstLoading?I("",!0):(t(),h(p,{key:0,"empty-img":d(U),title:"暂无产品","empty-class":"empty-select"},null,8,["empty-img"])),r("div",B,[l(v,{modelValue:d(O),"onUpdate:modelValue":a[2]||(a[2]=e=>L(O)?O.value=e:null),onRefresh:ee},{default:C((()=>[l(m,{loading:d(S),"onUpdate:loading":a[1]||(a[1]=e=>L(S)?S.value=e:null),finished:d(q),"finished-text":d(Z)?"- 已经到底了哦 -":"",onLoad:Y},{default:C((()=>[(t(!0),o(y,null,k(d(R),(e=>(t(),h(E,{key:e.id,"product-info":e,"error-msg":d(u).errorMsgMap[e.productCode],onClick:a=>(async e=>{let a=x.premiumTrial;const{insurerCode:s="",productCode:t="",templateId:o,productClass:r}=e;[F.SINGLE_PRODUCT,F.TWO_PRODUCT].includes(r)&&(a=x.productInfo),c.push({path:a,query:{insurerCode:s,productCode:t,tenantId:9991000011,templateId:o}})})(e)},null,8,["product-info","error-msg","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])])])),_:1})}}}),[["__scopeId","data-v-e9081460"]]);export{J as default};

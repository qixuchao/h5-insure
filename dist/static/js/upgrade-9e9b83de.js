import{G as a,d as e,X as l,Y as t,aX as s,ch as n,a as i,u as o,r as d,z as r,L as c,a1 as v,c as p,A as u,g as f,i as m,e as h,a3 as _,h as b,f as y,w as g,aa as x,E as A,j as w,U as I,T as k,aP as O,ab as D,aY as C,am as P,an as j,bH as E,c8 as V}from"./index-bcc62a26.js";import{c as B}from"./cloneDeep-0762f693.js";import{p as F}from"./product-b1695b98.js";import{e as L,i as N,g as U,s as T,f as R,E as S}from"./trial-366c4247.js";import{a as z,t as H,c as $,s as G,b as J,d as M}from"./utils-0749ad53.js";import{_ as K}from"./index-c71ba8a7.js";import{P as Q}from"./index-4623d67f.js";import{_ as X}from"./PersonalInfo-b4d2977d.js";import"./pdfh5-008ca364.js";import"./_initCloneObject-da8458a4.js";import"./isObjectLike-a9798079.js";import"./_getTag-ef97f191.js";import"./infoCollection-4e790eff.js";import"./trial-58349af2.js";import"./useDicData-ce67fcc6.js";const Y=a=>(P("data-v-103c4f03"),a=a(),j(),a),q={key:0},Z=[Y((()=>y("div",{class:"__skeleton_upgrade_content__"},[y("div",{class:"van-config-provider router-view sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[y("div",{class:"page-upgrade-product-detail"},[y("div",{class:"van-image banner",style:{width:"375px",height:"338px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[y("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20230131/7f6e6d1d087a4ced909e9daa18754592/%E5%8D%87%E7%BA%A7%E4%BA%A7%E5%93%81.png?Expires=1676282742&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=B0kGphaHBL5OfHyaMj1ktm9FJvM%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),y("div",{class:"page-info-wrapper"},[y("div",{class:"com-form-wrapper","show-error":"","show-error-message":"false"},[y("form",{class:"van-form"},[y("div",{class:"com-card"},[y("div",{class:"com-card-wrap"},[y("div",{class:"header"},[y("div",{class:"title-wrapper"},[y("div",{class:"title showIcon"},[y("span",{class:"sk-text",style:{"--fp":"33.33%","--sp":"66.67%","--lh":"45px"}},"投保信息")])])]),y("div",{class:"body",style:{height:"auto"}},[y("div",{class:"com-personal-wrapper"},[y("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[y("div",{class:"van-cell__title van-field__label van-field__label--left"},[y("label",{id:"van-field-2-label",for:"van-field-2-input"},[y("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"姓名")])]),y("div",{class:"van-cell__value van-field__value"},[y("div",{class:"van-field__body"},[y("input",{type:"text",id:"van-field-2-input",name:"insure_name",class:"van-field__control van-field__control--right sk-input",readonly:"",placeholder:"请输入姓名",autocomplete:"off","aria-labelledby":"van-field-2-label"}),y("div",{class:"van-field__right-icon"})])])]),y("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[y("div",{class:"van-cell__title van-field__label van-field__label--left"},[y("label",{id:"van-field-3-label",for:"van-field-3-input"},[y("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"身份证号")])]),y("div",{class:"van-cell__value van-field__value"},[y("div",{class:"van-field__body"},[y("input",{type:"text",id:"van-field-3-input",name:"insure_certNo",class:"van-field__control van-field__control--right sk-input",readonly:"",placeholder:"请输入身份证号",autocomplete:"off","aria-labelledby":"van-field-3-label"}),y("div",{class:"van-field__right-icon"})])])])]),y("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[y("div",{class:"van-cell__title van-field__label van-field__label--left"},[y("label",{id:"van-field-4-label",for:"van-field-4-input"},[y("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"社保")])]),y("div",{class:"van-cell__value van-field__value"},[y("div",{class:"van-field__body"},[y("div",{class:"van-field__control van-field__control--right van-field__control--custom"},[y("div",{class:"com-radio-btn-wrap"},[y("div",{class:"radio-btn"},[y("div",{class:"btn-wrapper"},[y("div",{class:"com-check-btn activated-disabled"},[y("span",{class:"sk-text",style:{"--fp":"22.92%","--sp":"77.08%","--lh":"24px"}}," 有（含农村合作医疗）")])]),y("div",{class:"btn-wrapper"},[y("div",{class:"com-check-btn disabled sk-border"},[y("span",{class:"sk-text",style:{"--fp":"22.92%","--sp":"77.08%","--lh":"24px"}}," 无")])])])])]),y("div",{class:"van-field__right-icon"})])])])])])])])])]),y("div",{class:"van-cell van-field com-pro-field"},[y("div",{class:"van-cell__title van-field__label"},[y("label",{id:"van-field-5-label",for:"van-field-5-input"},[y("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"每月保费")])]),y("div",{class:"van-cell__value van-field__value"},[y("div",{class:"van-field__body"},[y("input",{type:"text",id:"van-field-5-input",name:"insuredBeneficiaryType",class:"van-field__control van-field__control--right sk-input",placeholder:"请输入每月保费",autocomplete:"off","aria-labelledby":"van-field-5-label"}),y("div",{class:"van-field__right-icon"})])])]),y("div",{class:"com-attachment-list attachment-bg"},[y("span",null,[y("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}},"请阅读")]),y("span",{class:"attachment-item"},[y("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《责任免除说明书》 ")]),y("span",{class:"attachment-item"},[y("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《投保须知》 ")]),y("span",{class:"attachment-item"},[y("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《重要提示》 ")]),y("span",{class:"attachment-item"},[y("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《特别约定》 ")]),y("span",{class:"attachment-item"},[y("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《条款》 ")])]),y("div",{class:"footer-area sk-border"},[y("div",{class:"upgrade-submit"},[y("div",{class:"price"},[y("span",{class:"num"},[y("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"18.200139999999998px"}},"49")]),y("span",{class:"unit"},[y("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"18.200139999999998px"}},"元/月")])]),y("div",{class:"pro-shadow-button right"},[y("button",{type:"button",class:"van-button van-button--primary van-button--normal van-button--block van-button--round shadow-button sk-button"},[y("div",{class:"van-button__content"},[y("span",{class:"van-button__text"},[y("span",{class:"sk-text",style:{"--fp":"8.33%","--sp":"91.67%","--lh":"19.2002px"}},"升级保障")])])])])])])])])],-1)))],W={key:1,"data-skeleton-root":"UPGRADE",class:"page-upgrade-product-detail"},aa={class:"footer-area"},ea=Y((()=>y("span",null,"分享",-1))),la={class:"upgrade-submit"},ta={class:"price"},sa={class:"num"},na=Y((()=>y("span",{class:"unit"},"元/月",-1)));var ia=a(e({__name:"upgrade",setup(a){const e=l((()=>t((()=>import("./index-dcc9f1a4.js")),["static/js/index-dcc9f1a4.js","static/css/index-3329e46f.css","static/js/index-bcc62a26.js","static/css/index-08f51adc.css","static/js/pdfh5-008ca364.js"]))),P=l((()=>t((()=>import("./index-fa164da9.js")),["static/js/index-fa164da9.js","static/css/index-fa4edf2a.css","static/js/index-bcc62a26.js","static/css/index-08f51adc.css","static/js/pdfh5-008ca364.js","static/js/index-4623d67f.js","static/css/index-827a8544.css","static/js/utils-0749ad53.js","static/js/infoCollection-4e790eff.js","static/js/trial-58349af2.js"]))),j=s(),Y=n(),ia=i(),oa=o(),{productCode:da="ZXYS2023",orderNo:ra="",agencyCode:ca="",tenantId:va="",saleChannelId:pa="",extraInfo:ua}=oa.query;let fa={};try{fa=JSON.parse(decodeURIComponent(ua))}catch(Ta){console.log(Ta)}const{openId:ma,indirectCode:ha="",agentCode:_a}=fa,ba=d(!0),ya=d(),ga=d();d(),d();const xa=d(),Aa=d(),wa=d(),Ia=d(0),ka=d();d(!1),d(!1),d(0);const Oa=d(""),Da=d(!0),Ca=d(),Pa=r({isOnlyView:!0,activeIndex:0,showFilePreview:!1}),ja=d({imgUrl:"",desc:"",title:"",link:window.location.href}),Ea=()=>{Pa.showFilePreview=!1,Pa.isOnlyView=!0},Va=c((()=>`${Ia.value}元/月`)),Ba=a=>{var e;const l=null==(e=a.tenantOrderPaymentInfoList)?void 0:e.pop();return l?l.paymentMethod:3},Fa=async a=>{const e=J({tenantId:va,premium:Ia.value,orderDetail:wa.value,productDetail:xa.value,insureDetail:Aa.value,successJumpUrl:`${V}/baseInsurance/orderDetail?tenantId=${va}&orderNo=${Oa.value}`,iseeBizNo:ya.value}),l=await S({orderNo:a,...e}),{code:t,data:s}=l;"10000"===t&&ia.push(`/baseInsurance/orderDetail?tenantId=${va}&orderNo=${Oa.value}`)},La=async a=>{try{k.loading({forbidClick:!0,message:"升级中",duration:0});const a=await(async()=>{var a,e,l;const t=z({tenantId:va,templateId:wa.value.tenantOrderInsuredList[0].templateId,applicationNo:wa.value.applicationNo,policyNo:wa.value.policyNo,saleUserId:_a,saleChannelId:wa.value.saleChannelId,orderStatus:E.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:xa.value,insureDetail:Aa.value,paymentMethod:Ba(wa.value),renewalDK:null==(e=null==(a=wa.value.extInfo)?void 0:a.extraInfo)?void 0:e.renewalDK,iseeBizNo:ya.value,expiryDate:wa.value.expiryDate,successJumpUrl:"",premium:Ia.value,holder:{...wa.value.tenantOrderHolder,extInfo:Ca.value,socialFlag:Ca.value.hasSocialInsurance},insured:{...wa.value.tenantOrderInsuredList[0],socialFlag:wa.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance},tenantOrderRiskList:H({tenantId:va,riskList:$(G(Aa.value.productRiskVoList[0].riskDetailVOList),xa.value),riskPremium:{},productId:null==(l=xa.value)?void 0:l.id},!0)}),s=await T(t),{code:n,data:i}=s;return"10000"===n?i.data:""})();await L({tenantId:va,applicationNo:wa.value.applicationNo});if(Oa.value=a,console.log(Oa.value,"orderNoUp.value===",a),ka.value){const a=encodeURIComponent(encodeURIComponent(window.location.href)),e=`${ka.value}&failUrl=${a}`;window.location.href=e,k.clear()}else Fa(a)}catch(e){console.log(e),k.clear()}},Na=async a=>{La()},Ua=()=>{const a=F({productCode:da,withInsureInfo:!0,tenantId:va}),e=N({productCode:da}),l=U({orderNo:ra,tenantId:va});Promise.all([a,e,l]).then((([a,e,l])=>{var t,s,n;if("10000"===a.code){xa.value=a.data,document.title=(null==(t=a.data)?void 0:t.productFullName)||"";const{title:e,desc:l,image:i}=(null==(s=a.data)?void 0:s.showConfigVO)||{};n={title:e,desc:l,image:i},ja.value={desc:n.desc||"你好，这里是描述",imgUrl:n.image,title:n.title,link:window.location.href}}"10000"===e.code&&(Aa.value=e.data,["1","2","3"].forEach((a=>{var e,l,t,s;Aa.value.productFactor[a]=(null==(t=(null==(l=null==(e=Aa.value)?void 0:e.productFactor)?void 0:l[a])||[])?void 0:t.some((a=>1===a.isDisplay)))?null==(s=Aa.value.productFactor)?void 0:s[a]:[]}))),"10000"===l.code&&(wa.value=l.data,Ca.value=B(wa.value.tenantOrderHolder.extInfo),wa.value.tenantOrderHolder.extInfo=wa.value.tenantOrderInsuredList[0].extInfo),ba.value=!1,(async()=>{k.loading({forbidClick:!0,duration:0,message:"试算中"});try{const a=J({tenantId:va,premium:Ia.value,orderDetail:wa.value,productDetail:xa.value,insureDetail:Aa.value,successJumpUrl:""},M),e=await R(a),{code:l,data:t,message:s}=e;"10000"===l?(Ia.value=t.installmentPremium,ka.value=t.signUrl,Da.value=!1):"已升级成功"===s&&(Da.value=!0)}catch(a){console.log(a),Da.value=!0}finally{setTimeout((()=>{k.clear()}),Da.value?2e3:0)}})(),(()=>{var a;let e={};if(e=(null==(a=xa.value.tenantProductInsureVO.planInsureVO)?void 0:a.attachmentVOList)||[],!e)return void(ga.value=[]);const l={2:"richText",3:"link"};ga.value=Object.keys(e).map((a=>(e[a].forEach((a=>{if("1"===a.attachmentType){const e=a.attachmentUri.split("?"),l=e[0].substr(e[0].lastIndexOf(".")+1);a.attachmentType="pdf"===l?"pdf":"picture"}else a.attachmentType=l[a.attachmentType]})),{attachmentName:a,attachmentList:e[a]})))||[]})()}))};return v((()=>{Ua(),setTimeout((async()=>{ya.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(a,l)=>{var t,s,n,i;const o=O,d=D,r=C;return p(),u(I,null,[f(ba)?(p(),u("div",q,Z)):(p(),u("div",W,[m(K,{"data-skeleton-type":"img",url:null==(s=null==(t=f(xa))?void 0:t.tenantProductInsureVO)?void 0:s.banner[0]},null,8,["url"]),(null==(n=f(Aa))?void 0:n.productFactor)?(p(),h(X,{key:0,ref:"personalInfoRef",modelValue:f(wa),"onUpdate:modelValue":l[0]||(l[0]=a=>_(wa)?wa.value=a:null),"product-factor":f(Aa).productFactor,"multi-insured-config":null==(i=f(Aa))?void 0:i.multiInsuredConfigVO},null,8,["modelValue","product-factor","multi-insured-config"])):b("",!0),m(o,{modelValue:f(Va),"onUpdate:modelValue":l[1]||(l[1]=a=>_(Va)?Va.value=a:null),"input-align":"right",label:"每月保费",name:"insuredBeneficiaryType"},null,8,["modelValue"]),f(ga)&&f(ga).length>0?(p(),h(f(e),{key:1,class:"attachment-bg","attachment-list":f(ga),"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:l[2]||(l[2]=a=>(a=>{Pa.isOnlyView=!0,Pa.activeIndex=a,Pa.showFilePreview=!0})(a))},null,8,["attachment-list"])):b("",!0),y("div",aa,[f(j)?(p(),h(r,x({key:0},f(ja),{class:"share-btn"}),{default:g((()=>[m(d,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ea])),_:1},16)):b("",!0),y("div",la,[y("div",ta,[y("span",sa,A(f(Ia)),1),na]),m(Q,{shadow:!1,disabled:f(Da),"theme-vars":f(Y),class:"right",text:"升级保障",onClick:Na},{default:g((()=>[w(A("升级保障"))])),_:1},8,["disabled","theme-vars"])])])])),f(Pa).showFilePreview&&0!==f(ga).length?(p(),h(f(P),{key:2,show:f(Pa).showFilePreview,"onUpdate:show":l[3]||(l[3]=a=>f(Pa).showFilePreview=a),"content-list":f(ga),"is-only-view":f(Pa).isOnlyView,"active-index":f(Pa).activeIndex,text:f(Pa).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-count":0,"on-close-file-preview":"",onSubmit:La,onOnCloseFilePreview:Ea},null,8,["show","content-list","is-only-view","active-index","text"])):b("",!0)],64)}}}),[["__scopeId","data-v-103c4f03"]]);export{ia as default};

var z=Object.defineProperty,W=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var F=(o,e,t)=>e in o?z(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,w=(o,e)=>{for(var t in e||(e={}))Q.call(e,t)&&F(o,t,e[t]);if(E)for(var t of E(e))X.call(e,t)&&F(o,t,e[t]);return o},S=(o,e)=>W(o,G(e));import{g as U,j as V,n as R,z as m,J as b,O as Z,E as d,h as ee,r as L,A as h,p as c,m as te,T as k}from"./vendor-667a94d7.js";import{S as ae}from"./infoCollection-242da9b6.js";import{_ as T}from"./index-a9a5ff01.js";import{m as oe,P as se}from"./modal-bg-c5ec0af5.js";import{i as ne,a as re,s as le,e as ie,E as ue}from"./trial-5950a30e.js";import{g as de,l as ce,a as me,t as ve,c as pe,d as q}from"./logo-8952d90d.js";import{p as _e}from"./product-14de8ff2.js";import{b as fe}from"./blank-84b83865.js";import"./trial-7213523e.js";const Ie={class:"com-field-info"},ge={class:"title"},De={class:"desc"},he=U({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(o){return(e,t)=>(V(),R("div",Ie,[m("div",ge,b(o.title),1),m("div",De,b(o.desc),1)]))}});var x=T(he,[["__scopeId","data-v-34962902"]]);const xe={class:"page-activity-upgrade"},Ce=["src"],ye=["src"],Oe={class:"container"},we={class:"main-form"},Pe=U({setup(o){const e=Z(),{productCode:t="BWYL2022",tenantId:p,orderId:M,extInfo:$}=e.query,A=de($),v=d(),D=d(),s=d(),_=d(),C=d(),y=d(),O=d(!1),N=()=>{O.value=!1},j=async()=>{var i,u,f,I,g;const r=me({tenantId:p,saleChannelId:s.value.saleChannelId,orderStatus:"",orderTopStatus:"",orderCategory:2,detail:v.value,paymentMethod:(u=(i=s.value.extInfo)==null?void 0:i.extraInfo)==null?void 0:u.paymentMethod,renewalDK:(I=(f=s.value.extInfo)==null?void 0:f.extraInfo)==null?void 0:I.renewalDK,successJumpUrl:"",premium:_.value,holder:s.value.tenantOrderHolder,insured:S(w({},s.value.tenantOrderInsuredList[0]),{socialFlag:s.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:ve({tenantId:p,riskList:pe(D.value.productRiskVoList[0].riskDetailVOList,v.value),riskPremium:{},productId:(g=v.value)==null?void 0:g.id})}),a=await le(r),{code:l,data:n}=a;return l==="10000"?n.data:""},P=async()=>{const r=q({tenantId:p,premium:_.value,orderDetail:s.value,productDetail:v.value,insureDetail:D.value}),a=await ie(r),{code:l,data:n}=a;l==="10000"&&(_.value=n.installmentPremium,y.value=n.signUrl)},H=async r=>{const a=q({tenantId:p,premium:_.value,orderDetail:s.value,productDetail:v.value,insureDetail:D.value}),l=await ue(w({id:r},a)),{code:n,data:i}=l;n==="10000"&&(O.value=!0)},J=async r=>{try{k.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"}),await P();const a=await j();y.value?window.location.href=y.value:H(a)}catch(a){console.log(a),k.clear()}},K=()=>{const r=_e({productCode:t,withInsureInfo:!0}),a=ne({productCode:t}),l=re({id:M||A.orderId,tenantId:p});Promise.all([r,a,l]).then(([n,i,u])=>{n.code==="10000"&&(v.value=n.data),i.code==="10000"&&(D.value=i.data),u.code==="10000"&&(s.value=u.data,C.value=u.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),P()})};return ee(()=>{K()}),(r,a)=>{var i,u,f,I,g,B;const l=L("ProRadioButton"),n=L("ProField");return V(),R("div",xe,[m("img",{class:"logo",src:h(ce)},null,8,Ce),m("img",{src:h(fe)},null,8,ye),m("div",Oe,[m("div",we,[c(x,{title:"\u59D3\u540D",desc:(u=(i=s.value)==null?void 0:i.tenantOrderInsuredList)==null?void 0:u[0].name},null,8,["desc"]),c(x,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(I=(f=s.value)==null?void 0:f.tenantOrderInsuredList)==null?void 0:I[0].certNo},null,8,["desc"]),c(x,{title:"\u624B\u673A\u53F7\u7801",desc:(B=(g=s.value)==null?void 0:g.tenantOrderHolder)==null?void 0:B.mobile},null,8,["desc"]),c(x,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${_.value||"0"} / \u6BCF\u6708`},null,8,["desc"]),c(n,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:te(()=>[c(l,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=Y=>C.value=Y),disabled:!0,options:h(ae)},null,8,["modelValue","options"])]),_:1}),m("div",{class:"submit",onClick:J})])]),c(se,{"is-show":O.value,bg:h(oe),onOnClose:N},null,8,["is-show","bg"])])}}});var Re=T(Pe,[["__scopeId","data-v-48e9b739"]]);export{Re as default};

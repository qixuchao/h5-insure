!function(){var e=document.createElement("style");e.innerHTML=".page-upgrade-product-detail{padding-bottom:2.13333rem}.page-upgrade-product-detail .com-card-wrap .van-field__body{width:100%}.page-upgrade-product-detail .attachment-bg{background:rgba(0,106,252,.05)}.page-upgrade-product-detail .attachment-bg.com-attachment-list{padding:.21333rem .50667rem}.page-upgrade-product-detail .footer-area{width:100%;height:2rem;position:fixed;bottom:0;left:0;display:flex;align-items:center;border-top:1px solid #EEEFF4;padding:0 .4rem;background:#ffffff;z-index:10;justify-content:space-between;border-radius:.4rem .4rem 0px 0px}.page-upgrade-product-detail .footer-area .upgrade-submit{flex:1;display:flex;justify-content:space-between;align-items:center}.page-upgrade-product-detail .footer-area .upgrade-submit .price{color:#ff5840;font-size:.64rem;font-weight:600}.page-upgrade-product-detail .footer-area .upgrade-submit .price span:last-child{font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400}.page-upgrade-product-detail .footer-area .upgrade-submit .right{width:5.33333rem;height:1.17333rem;border-radius:.58667rem}.page-upgrade-product-detail[data-v-27db7f1e] .com-share{width:1.02667rem;display:flex;flex-direction:column;align-items:center;margin-right:.26667rem}.page-upgrade-product-detail[data-v-27db7f1e] .com-share span{font-size:.32rem;color:var(--zaui-text, #393d46)}.page-upgrade-product-detail[data-v-27db7f1e] .com-card-wrap .header{margin-left:0!important}.page-upgrade-product-detail[data-v-27db7f1e] .com-card-wrap .header .title-wrapper .title:before{margin-right:.37333rem!important}.page-upgrade-product-detail[data-v-27db7f1e] .com-card-wrap .relation-holder,.page-upgrade-product-detail[data-v-27db7f1e] .com-card-wrap .relation-holder .van-cell__title{display:none}.page-upgrade-product-detail[data-v-27db7f1e] .radio-btn{justify-content:flex-start}.page-upgrade-product-detail[data-v-27db7f1e] .radio-btn .btn-wrapper{margin-left:0!important;margin-right:.10667rem!important}\n",document.head.appendChild(e),System.register(["./index-legacy-7bfc5dd5.js","./cloneDeep-legacy-06534257.js","./product-legacy-3acf3c3f.js","./trial-legacy-fa31125d.js","./utils-legacy-cbbb6ba4.js","./order-legacy-6fdc14cf.js","./index-legacy-47cf4337.js","./index-legacy-f1ae99b4.js","./index-legacy-c29418f5.js","./pdfh5-legacy-9f98dc45.js","./keysIn-legacy-e771016d.js","./isObjectLike-legacy-c9ae9091.js","./infoCollection-legacy-e2bda3ef.js","./trial-legacy-f35feb90.js","./relativeTime-legacy-4b5b6d28.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-1944c79d.js"],(function(e,a){"use strict";var t,l,n,i,s,d,o,r,c,p,u,v,f,m,g,h,b,y,_,x,w,A,k,I,O,j,C,E,D,F,P,N,B,L,U,R,V,S,z,T,H,$,G,J,M,K,Q,Y,q,Z;return{setters:[function(e){t=e._,l=e.d,n=e.bY,i=e.bZ,s=e.c9,d=e.b_,o=e.u,r=e.a,c=e.r,p=e.J,u=e.E,v=e.G,f=e.c,m=e.h,g=e.g,h=e.f,b=e.a7,y=e.e,_=e.k,x=e.j,w=e.w,A=e.b1,k=e.t,I=e.n,O=e.F,j=e.T,C=e.ap,E=e.V,D=e.ag,F=e.X,P=e.Y,N=e.bG},function(e){B=e.c},function(e){L=e.p},function(e){U=e.d,R=e.i,V=e.g,S=e.s,z=e.e,T=e.E},function(e){H=e.a,$=e.t,G=e.c,J=e.s,M=e.b,K=e.d},function(e){Q=e.a},function(e){Y=e._},function(e){q=e._},function(e){Z=e.P},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const W=e=>(F("data-v-27db7f1e"),e=e(),P(),e),X={key:0},ee=[W((()=>x("div",{class:"__skeleton_upgrade_content__"},[x("div",{class:"van-config-provider router-view sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[x("div",{class:"page-upgrade-product-detail"},[x("div",{class:"van-image banner",style:{width:"375px",height:"338px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[x("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20230131/7f6e6d1d087a4ced909e9daa18754592/%E5%8D%87%E7%BA%A7%E4%BA%A7%E5%93%81.png?Expires=1676282742&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=B0kGphaHBL5OfHyaMj1ktm9FJvM%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),x("div",{class:"page-info-wrapper"},[x("div",{class:"com-form-wrapper","show-error":"","show-error-message":"false"},[x("form",{class:"van-form"},[x("div",{class:"com-card"},[x("div",{class:"com-card-wrap"},[x("div",{class:"header"},[x("div",{class:"title-wrapper"},[x("div",{class:"title showIcon"},[x("span",{class:"sk-text",style:{"--fp":"33.33%","--sp":"66.67%","--lh":"45px"}},"投保信息")])])]),x("div",{class:"body",style:{height:"auto"}},[x("div",{class:"com-personal-wrapper"},[x("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[x("div",{class:"van-cell__title van-field__label van-field__label--left"},[x("label",{id:"van-field-2-label",for:"van-field-2-input"},[x("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"姓名")])]),x("div",{class:"van-cell__value van-field__value"},[x("div",{class:"van-field__body"},[x("input",{type:"text",id:"van-field-2-input",name:"insure_name",class:"van-field__control van-field__control--right sk-input",readonly:"",placeholder:"请输入姓名",autocomplete:"off","aria-labelledby":"van-field-2-label"}),x("div",{class:"van-field__right-icon"})])])]),x("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[x("div",{class:"van-cell__title van-field__label van-field__label--left"},[x("label",{id:"van-field-3-label",for:"van-field-3-input"},[x("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"身份证号")])]),x("div",{class:"van-cell__value van-field__value"},[x("div",{class:"van-field__body"},[x("input",{type:"text",id:"van-field-3-input",name:"insure_certNo",class:"van-field__control van-field__control--right sk-input",readonly:"",placeholder:"请输入身份证号",autocomplete:"off","aria-labelledby":"van-field-3-label"}),x("div",{class:"van-field__right-icon"})])])])]),x("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[x("div",{class:"van-cell__title van-field__label van-field__label--left"},[x("label",{id:"van-field-4-label",for:"van-field-4-input"},[x("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"社保")])]),x("div",{class:"van-cell__value van-field__value"},[x("div",{class:"van-field__body"},[x("div",{class:"van-field__control van-field__control--right van-field__control--custom"},[x("div",{class:"com-radio-btn-wrap"},[x("div",{class:"radio-btn"},[x("div",{class:"btn-wrapper"},[x("div",{class:"com-check-btn activated-disabled"},[x("span",{class:"sk-text",style:{"--fp":"22.92%","--sp":"77.08%","--lh":"24px"}}," 有（含农村合作医疗）")])]),x("div",{class:"btn-wrapper"},[x("div",{class:"com-check-btn disabled sk-border"},[x("span",{class:"sk-text",style:{"--fp":"22.92%","--sp":"77.08%","--lh":"24px"}}," 无")])])])])]),x("div",{class:"van-field__right-icon"})])])])])])])])])]),x("div",{class:"van-cell van-field com-pro-field"},[x("div",{class:"van-cell__title van-field__label"},[x("label",{id:"van-field-5-label",for:"van-field-5-input"},[x("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"每月保费")])]),x("div",{class:"van-cell__value van-field__value"},[x("div",{class:"van-field__body"},[x("input",{type:"text",id:"van-field-5-input",name:"insuredBeneficiaryType",class:"van-field__control van-field__control--right sk-input",placeholder:"请输入每月保费",autocomplete:"off","aria-labelledby":"van-field-5-label"}),x("div",{class:"van-field__right-icon"})])])]),x("div",{class:"com-attachment-list attachment-bg"},[x("span",null,[x("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}},"请阅读")]),x("span",{class:"attachment-item"},[x("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《责任免除说明书》 ")]),x("span",{class:"attachment-item"},[x("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《投保须知》 ")]),x("span",{class:"attachment-item"},[x("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《重要提示》 ")]),x("span",{class:"attachment-item"},[x("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《特别约定》 ")]),x("span",{class:"attachment-item"},[x("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《条款》 ")])]),x("div",{class:"footer-area sk-border"},[x("div",{class:"upgrade-submit"},[x("div",{class:"price"},[x("span",{class:"num"},[x("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"18.200139999999998px"}},"49")]),x("span",{class:"unit"},[x("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"18.200139999999998px"}},"元/月")])]),x("div",{class:"pro-shadow-button right"},[x("button",{type:"button",class:"van-button van-button--primary van-button--normal van-button--block van-button--round shadow-button sk-button"},[x("div",{class:"van-button__content"},[x("span",{class:"van-button__text"},[x("span",{class:"sk-text",style:{"--fp":"8.33%","--sp":"91.67%","--lh":"19.2002px"}},"升级保障")])])])])])])])])],-1)))],ae={key:1,"data-skeleton-root":"UPGRADE",class:"page-upgrade-product-detail"},te={class:"footer-area"},le=W((()=>x("span",null,"分享",-1))),ne={class:"upgrade-submit"},ie={class:"price"},se={class:"num"},de=W((()=>x("span",{class:"unit"},"元/月",-1))),oe=l({__name:"upgrade",setup(e){const t=n((()=>i((()=>a.import("./index-legacy-fbe4ce0d.js")),void 0))),l=n((()=>i((()=>a.import("./index-legacy-9c3e0492.js")),void 0))),F=s(),P=d(),W=o(),oe=r(),{productCode:re="",orderNo:ce="",agencyCode:pe="",tenantId:ue="",saleChannelId:ve="",extraInfo:fe}=oe.query;let me={};try{me=JSON.parse(decodeURIComponent(fe))}catch(ze){console.log(ze)}const{openId:ge,indirectCode:he="",agentCode:be}=me,ye=c(!0),_e=c(),xe=c();c();const we=c(),Ae=c(),ke=c(),Ie=c(),Oe=c(0),je=c();c(!1),c(!1),c(0);const Ce=c(""),Ee=c(!0),De=c(),Fe=p({isOnlyView:!0,activeIndex:0,showFilePreview:!1}),Pe=c({imgUrl:"",desc:"",title:"",link:window.location.href}),Ne=()=>{Fe.showFilePreview=!1,Fe.isOnlyView=!0},Be=u((()=>`${Oe.value}元/月`)),Le=e=>{var a;const t=null===(a=e.tenantOrderPaymentInfoList)||void 0===a?void 0:a.pop();return t?t.paymentMethod:3},Ue=async e=>{const a=M({tenantId:ue,premium:Oe.value,orderDetail:Ie.value,productDetail:Ae.value,insureDetail:ke.value,successJumpUrl:`${N}/baseInsurance/orderDetail?tenantId=${ue}&orderNo=${Ce.value}`,iseeBizNo:_e.value}),t=await T({orderNo:e,...a}),{code:l,data:n}=t;"10000"===l&&W.push(`/baseInsurance/orderDetail?tenantId=${ue}&orderNo=${Ce.value}`)},Re=async e=>{try{j.loading({forbidClick:!0,message:"升级中",duration:0});const e=await(async()=>{var e,a,t;const l=H({tenantId:ue,templateId:Ie.value.tenantOrderInsuredList[0].templateId,applicationNo:Ie.value.applicationNo,policyNo:Ie.value.policyNo,saleUserId:be,saleChannelId:Ie.value.saleChannelId,orderStatus:Q.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:Ae.value,insureDetail:ke.value,paymentMethod:Le(Ie.value),renewalDK:null===(e=Ie.value.extInfo)||void 0===e||null===(a=e.extraInfo)||void 0===a?void 0:a.renewalDK,iseeBizNo:_e.value,expiryDate:Ie.value.expiryDate,successJumpUrl:"",premium:Oe.value,holder:{...Ie.value.tenantOrderHolder,extInfo:De.value,socialFlag:De.value.hasSocialInsurance},insured:{...Ie.value.tenantOrderInsuredList[0],socialFlag:Ie.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance},tenantOrderRiskList:$({tenantId:ue,riskList:G(J(ke.value.productRiskVoList[0].riskDetailVOList),Ae.value),riskPremium:{},productId:null===(t=Ae.value)||void 0===t?void 0:t.id},!0)}),n=await S(l),{code:i,data:s}=n;return"10000"===i?s.data:""})();await U({tenantId:ue,applicationNo:Ie.value.applicationNo});if(Ce.value=e,console.log(Ce.value,"orderNoUp.value===",e),je.value){const e=encodeURIComponent(encodeURIComponent(window.location.href)),a=`${je.value}&failUrl=${e}`;window.location.href=a,j.clear()}else Ue(e)}catch(a){console.log(a),j.clear()}},Ve=async e=>{Re()},Se=()=>{const e=L({productCode:re,withInsureInfo:!0,tenantId:ue}),a=R({productCode:re}),t=V({orderNo:ce,tenantId:ue});Promise.all([e,a,t]).then((([e,a,t])=>{if("10000"===e.code){var l,n;Ae.value=e.data,document.title=(null===(l=e.data)||void 0===l?void 0:l.productFullName)||"";const{title:a,desc:t,image:s}=(null===(n=e.data)||void 0===n?void 0:n.showConfigVO)||{};i={title:a,desc:t,image:s},Pe.value={desc:i.desc||"你好，这里是描述",imgUrl:i.image,title:i.title,link:window.location.href}}var i;"10000"===a.code&&(ke.value=a.data,["1","2","3"].forEach((e=>{var a,t,l;ke.value.productFactor[e]=null!==(a=ke.value.productFactor)&&void 0!==a&&null!==(t=a[e])&&void 0!==t&&t.some((e=>1===e.isDisplay))?null===(l=ke.value.productFactor)||void 0===l?void 0:l[e]:[]}))),"10000"===t.code&&(Ie.value=t.data,De.value=B(Ie.value.tenantOrderHolder.extInfo),Ie.value.tenantOrderHolder.extInfo=Ie.value.tenantOrderInsuredList[0].extInfo),ye.value=!1,(async()=>{j.loading({forbidClick:!0,duration:0,message:"试算中"});try{const e=M({tenantId:ue,premium:Oe.value,orderDetail:Ie.value,productDetail:Ae.value,insureDetail:ke.value,successJumpUrl:""},K),a=await z(e),{code:t,data:l,message:n}=a;"10000"===t?(Oe.value=l.installmentPremium,je.value=l.signUrl,Ee.value=!1):"已升级成功"===n&&(Ee.value=!0)}catch(e){console.log(e),Ee.value=!0}finally{setTimeout((()=>{j.clear()}),Ee.value?2e3:0)}})(),(()=>{var e;let a={};if(a=(null===(e=Ae.value.tenantProductInsureVO.planInsureVO)||void 0===e?void 0:e.attachmentVOList)||[],!a)return void(xe.value=[]);const t={2:"richText",3:"link"};xe.value=Object.keys(a).map((e=>(a[e].forEach((e=>{if("1"===e.attachmentType){const a=e.attachmentUri.split("?"),t=a[0].substr(a[0].lastIndexOf(".")+1);e.attachmentType="pdf"===t?"pdf":"picture"}else e.attachmentType=t[e.attachmentType]})),{attachmentName:e,attachmentList:a[e]})))||[]})()}))};return v((()=>{Se(),setTimeout((async()=>{_e.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var n,i,s;const d=C,o=E,r=D;return f(),m(O,null,[g(ye)?(f(),m("div",X,ee)):(f(),m("div",ae,[h(q,{"data-skeleton-type":"img",url:null===(n=g(Ae))||void 0===n||null===(i=n.tenantProductInsureVO)||void 0===i?void 0:i.banner[0]},null,8,["url"]),h(Y,{ref_key:"formRef",ref:we,"title-collection":{HOLDER:"投保人信息",INSURER:"投保信息",BENEFICIARY:"投保人信息"},"need-desensitize":"","is-view":"","input-align":"right","form-info":g(Ie),"factor-object":null===(s=g(ke))||void 0===s?void 0:s.productFactor},null,8,["form-info","factor-object"]),h(d,{modelValue:g(Be),"onUpdate:modelValue":a[0]||(a[0]=e=>b(Be)?Be.value=e:null),"input-align":"right",label:"每月保费",name:"insuredBeneficiaryType"},null,8,["modelValue"]),g(xe)&&g(xe).length>0?(f(),y(g(t),{key:0,class:"attachment-bg","attachement-list":g(xe),"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:a[1]||(a[1]=e=>(e=>{Fe.isOnlyView=!0,Fe.activeIndex=e,Fe.showFilePreview=!0})(e))},null,8,["attachement-list"])):_("",!0),x("div",te,[g(F)?(f(),y(r,A({key:0},g(Pe),{class:"share-btn"}),{default:w((()=>[h(o,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),le])),_:1},16)):_("",!0),x("div",ne,[x("div",ie,[x("span",se,k(g(Oe)),1),de]),h(Z,{shadow:!1,disabled:g(Ee),"theme-vars":g(P),class:"right",text:"升级保障",onClick:Ve},{default:w((()=>[I(k("升级保障"))])),_:1},8,["disabled","theme-vars"])])])])),g(Fe).showFilePreview&&0!==g(xe).length?(f(),y(g(l),{key:2,show:g(Fe).showFilePreview,"onUpdate:show":a[2]||(a[2]=e=>g(Fe).showFilePreview=e),"content-list":g(xe),"is-only-view":g(Fe).isOnlyView,"active-index":g(Fe).activeIndex,text:g(Fe).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-cound":0,"on-close-file-preview":"",onSubmit:Re,onOnCloseFilePreview:Ne},null,8,["show","content-list","is-only-view","active-index","text"])):_("",!0)],64)}}});e("default",t(oe,[["__scopeId","data-v-27db7f1e"]]))}}}))}();

import{g as M,a9 as L,r as U,j as v,n as b,z as t,J as m,A as I,d as q,p as f,m as g,ab as k,t as B,a4 as w,a5 as V,C as S,D as W,T as j,E as D,y as H,_ as $,h as z,k as A,G as J,F as X}from"./vendor-17026bfd.js";import{_ as Y,b as x,ac as T,k as Z,q as K}from"./index-6c2a3df9.js";import{d as Q,g as ee}from"./order-00be5f53.js";import{O as te,b as P,a as O}from"./order-26db6dbf.js";import"./utils-b6782348.js";const R=e=>(w("data-v-1b3aa45c"),e=e(),V(),e),ae={class:"com-order-item"},se={class:"header"},oe={class:"product-name"},de={class:"company-name"},ne={class:"status"},ue={class:"info"},ie={class:"info-item"},le=R(()=>t("div",{class:"label"},"\u6295\u4FDD\u4EBA",-1)),re={class:"desc"},ce={class:"info-item"},_e=R(()=>t("div",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),pe={class:"desc"},ve={class:"footer"},he={class:"fee"},me=S(" \u4FDD\u8D39\uFF1A"),fe={class:"money"},ge={key:0,class:"buttons"},Ce=S("\u5220\u9664"),ye=S("\u53BB\u5904\u7406"),Ie={key:1,class:"buttons"},De=S("\u53BB\u652F\u4ED8"),be={key:2,class:"buttons"},Se=S("\u5220\u9664"),Ee=M({props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup(e,{emit:C}){const a=e,_=L(),y=()=>{W.confirm({title:"",message:"\u786E\u8BA4\u8981\u5220\u9664\u8BE5\u8BA2\u5355\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{Q(a.detail.id,a.detail.orderStatus).then(s=>{const{code:o,data:d}=s;o==="10000"&&(j.success("\u5220\u9664\u6210\u529F"),C("afterDelete"))})})},r=()=>{const{goodsCode:s,orderNo:o,id:d,saleUserId:p,templateId:l,tenantId:n,insurerCode:u,productCategory:c,agencyId:i,saleChannelId:h,orderStatus:N}=a.detail;if((O.PENDING===N||O.PAYING===N)&&(s===T.ZXYS||s===T.BWYL)){const G={[T.ZXYS]:"/internet/productDetail/package",[T.BWYL]:"/internet/productDetail"};return _.push({path:G[s],query:{productCode:s,saleChannelId:h,agentCode:p,tenantId:n,agencyCode:i,orderNo:o}}),!0}return!1},E=()=>{const{goodsCode:s,orderNo:o,id:d,saleUserId:p,templateId:l,tenantId:n,insurerCode:u,productCategory:c,agencyId:i}=a.detail;r()||_.push({path:x.payInfo,query:{productCode:s,orderNo:o,orderId:d,saleUserId:p,templateId:l,tenantId:n,insurerCode:u,productCategory:c,agencyCode:i}})},F=()=>{const{goodsCode:s,orderNo:o,id:d,saleUserId:p,templateId:l,tenantId:n,insurerCode:u,productCategory:c,agencyId:i,saleChannelId:h,orderStatus:N}=a.detail;r()||_.push({path:x[a.detail.pageCode],query:{productCode:s,orderNo:o,orderId:d,agentCode:p,templateId:l,tenantId:n,insurerCode:u,productCategory:c,agencyCode:i,isFromOrderList:"1"}})};return(s,o)=>{const d=U("van-button");return v(),b("div",ae,[t("div",se,[t("div",oe,m(e.detail.goodsName),1),t("div",de,m(e.detail.abbreviation),1),t("div",ne,m(I(te)[e.detail.orderStatus]),1)]),t("div",ue,[t("div",ie,[le,t("div",re,m(e.detail.policyHolder),1)]),t("div",ce,[_e,t("div",pe,m(I(q)(e.detail.orderStartDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),t("div",ve,[t("div",he,[me,t("span",fe,"\uFFE5"+m(e.detail.prem),1)]),e.detail.orderTopStatus===I(P).PENDING?(v(),b("div",ge,[f(d,{class:"button",onClick:k(y,["stop"])},{default:g(()=>[Ce]),_:1},8,["onClick"]),f(d,{class:"button primary",onClick:k(F,["stop"])},{default:g(()=>[ye]),_:1},8,["onClick"])])):B("",!0),e.detail.orderTopStatus===I(P).PAYING?(v(),b("div",Ie,[f(d,{class:"button primary",onClick:k(E,["stop"])},{default:g(()=>[De]),_:1},8,["onClick"])])):B("",!0),e.detail.orderTopStatus===I(P).TIMEOUT?(v(),b("div",be,[f(d,{class:"button",onClick:k(y,["stop"])},{default:g(()=>[Se]),_:1},8,["onClick"])])):B("",!0)])])}}});var Fe=Y(Ee,[["__scopeId","data-v-1b3aa45c"]]);const Ne={class:"page-order"},ke=M({setup(e){L();const C=D(0),a=D(1),_=D(!1),y=D(!1),r=D([]),E=[{title:"\u5168\u90E8",status:""},{title:"\u5F85\u5904\u7406",status:"-1"},{title:"\u5F85\u652F\u4ED8",status:"0"},{title:"\u5DF2\u5B8C\u6210",status:"1"},{title:"\u5DF2\u5931\u6548",status:"2"}],F=H(()=>E[C.value].status),s=l=>{const{orderNo:n,saleUserId:u,tenantId:c,abbreviation:i,productCategory:h}=l;K("orderDetail",{orderNo:n,agentCode:u,tenantId:c,abbreviation:i,productCategory:h})},o=()=>{_.value=!0,ee({condition:{orderTopStatus:F.value},pageSize:10,pageNum:a.value}).then(l=>{_.value=!1;const{code:n,data:u}=l;n==="10000"&&(a.value===1?r.value=u.datas:r.value=[...r.value,...u.datas]),y.value=r.value.length>=u.total})},d=()=>{a.value+=1,o(),console.log("\u{1F680} ~ handleLoad ~ pageNum.value",a.value)},p=()=>{a.value=1,o()};return $(F,()=>{a.value=1,o()}),z(()=>{o()}),(l,n)=>{const u=U("van-list"),c=U("ProPageWrap");return v(),A(c,{"main-class":"page-order-list"},{default:g(()=>[t("div",Ne,[f(Z,{active:C.value,"onUpdate:active":n[0]||(n[0]=i=>C.value=i),list:E,"small-gap":"",class:"tab"},null,8,["active"]),f(u,{class:"body",loading:_.value,finished:y.value,onLoad:d},{default:g(()=>[(v(!0),b(X,null,J(r.value,(i,h)=>(v(),A(Fe,{key:h,detail:i,onClick:N=>s(i),onAfterDelete:p},null,8,["detail","onClick"]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var xe=Y(ke,[["__scopeId","data-v-52022118"]]);export{xe as default};

import{d as e,u as a,a as t,r as n,al as r,c as o,h as d,at as s,j as c,a9 as i}from"./index-3898adba.js";import{f as l,P as p}from"./infoCollection-f73cacca.js";import{q as u}from"./trial-90934487.js";import"./pdfh5-008ca364.js";const C={class:"page-middle-wrapper"},I=[c("h4",null,null,-1)],f=e({__name:"index",setup(e){const c=a(),f=t(),g=n(""),{extraInfo:m,agencyCode:h,templateId:y,pageCode:x,insurerCode:$,productCode:R,agentCode:U,saleChannelId:b}=f.query;let j={};try{j=JSON.parse(decodeURIComponent(m))}catch(A){}const{templateId:v,openId:w,tenantId:N,orderNo:q}=j,E=()=>{try{const e=w?y:v;if(e)return`/baseInsurance/${l[e]}`;switch(x){case p.FREE:return`/chuangxin/baigebao/${x}`;case p.COMMON:return"/internet/productDetail";case p.UPGRADE:return"/internet/guaranteeUpgrade";case p.PACKAGE:return"/internet/productDetail/package";default:return""}}catch(e){return""}},O=e=>{s({param:e}).then((({code:a,data:t})=>{if("10000"===a&&t)if(w){const a=E();c.replace(encodeURI(`${a}?${e}`))}else(e=>{var a;if("4"===v&&q){const e={insurerCode:$,productCode:R,tenantId:N||(null==(a=f.query)?void 0:a.tenantId),agencyCode:h,agentCode:U,orderNo:q,saleChannelId:b};return e.extraInfo=decodeURIComponent(JSON.stringify({...j,templateId:v})),void c.push(`/baseInsurance/upgrade?${i.stringify(e)}`)}let t=e;const n=E();n&&(t=n),c.replace(encodeURI(`${t}?${i.stringify(f.query)}`))})();else g.value="验证失败"}))};return r((()=>{w?(async()=>{const{code:e,data:a}=await u({insurerCode:$,productCode:R,tenantId:N,agencyCode:h,extraMap:{...j,templateId:y}});"10000"===e&&O((a||"").split("?")[1])})():O(window.location.search.replace("?",""))})),(e,a)=>(o(),d("div",C,I))}});export{f as default};

var me=Object.defineProperty,ve=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var Y=(e,n,s)=>n in e?me(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,v=(e,n)=>{for(var s in n||(n={}))Ee.call(n,s)&&Y(e,s,n[s]);if(X)for(var s of X(n))ye.call(n,s)&&Y(e,s,n[s]);return e},c=(e,n)=>ve(e,ce(n));import{g as ue,C as f,X as ee,x as be,h as B,m as M,n as o,z as I,k as b,a1 as le,a2 as oe,y as k,B as J,Q as Ie,aj as De,M as fe,r as L,j as H,s as ae,E as Re,F as ge,T as Ce,J as Te,I as Fe}from"./vendor-bf3e5d1d.js";import{_ as te,g as V,F as A,m as ke,U as _e,G as g,H as E,I as W,l as q,P as Be}from"./index-2712a36a.js";import{c as S}from"./utils-b6782348.js";import{u as Ae}from"./useDicData-ebedeeaf.js";import{c as Ve,a as Se,n as he}from"./index-0e1ce0bc.js";var $=(e=>(e[e.REAL_TIME=1]="REAL_TIME",e[e.BATCH=2]="BATCH",e))($||{});const z=[{value:1,label:"\u5B9E\u65F6\u8F6C\u8D26"},{value:2,label:"\u6279\u91CF\u6263\u6B3E"}];S(z);var P=(e=>(e[e.DEBIT=1]="DEBIT",e[e.CREDIT=2]="CREDIT",e[e.PRE_PAY=3]="PRE_PAY",e[e.PRE_CREDIT=4]="PRE_CREDIT",e[e.OTHER=5]="OTHER",e))(P||{});const ne=[{value:1,label:"\u501F\u8BB0\u5361"},{value:2,label:"\u8D37\u8BB0\u5361"},{value:3,label:"\u9884\u4ED8\u8D39\u5361"},{value:4,label:"\u51C6\u8D37\u8BB0\u5361"},{value:5,label:"\u5176\u4ED6"}];S(ne);var F=(e=>(e[e.FIRST_TERM=1]="FIRST_TERM",e[e.RENEW_TERM=2]="RENEW_TERM",e[e.REPRISE=3]="REPRISE",e[e.OTHER=4]="OTHER",e))(F||{});const de=[{value:1,label:"\u9996\u671F\u652F\u4ED8"},{value:2,label:"\u7EED\u671F\u652F\u4ED8"},{value:3,label:"\u5E74\u91D1\u9886\u53D6"},{value:4,label:"\u5176\u4ED6"}];S(de);var C=(e=>(e[e.FIRST_SAME=1]="FIRST_SAME",e[e.RENEW_SAME=2]="RENEW_SAME",e[e.OTHER=3]="OTHER",e))(C||{});const Le=[{value:1,label:"\u540C\u9996\u671F"},{value:2,label:"\u540C\u7EED\u671F"},{value:3,label:"\u5176\u4ED6"}];S(de);var se=(e=>(e[e.AUTOMATIC_PADDING=1]="AUTOMATIC_PADDING",e[e.CANCEL=2]="CANCEL",e))(se||{});const re=[{value:1,label:"\u81EA\u52A8\u57AB\u4ED8"},{value:2,label:"\u4E2D\u6B62\u5408\u540C"}];S(re);const xe=e=>(le("data-v-b4bb0f9e"),e=e(),oe(),e),Ne={class:"com-bank-card-info"},Oe=xe(()=>k("span",{class:"field-title"},[J("\u94F6\u884C\u5361\u7167\u7247 "),k("span",{class:"sub-title"},"(\u9700\u4E0A\u4F20\u6B63\u53CD\u4E24\u9762)")],-1)),Ge=ue({props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:n}){const s=e,x=Ae("BANK"),r=f({bankCardType:P.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),N=d=>d&&d.length===2?!0:"\u8BF7\u4E0A\u4F20\u94F6\u884C\u5361\u6B63\u53CD\u9762\u7167\u7247";ee(()=>s.modelValue,d=>{r.value=d},{immediate:!0}),ee(r,d=>{n("update:modelValue",d)});const h=be(()=>x.value.map(d=>({label:d.name,value:d.code})));return(d,i)=>(B(),M("div",Ne,[o(V,{modelValue:r.value.bankCardType,"onUpdate:modelValue":i[0]||(i[0]=p=>r.value.bankCardType=p),label:"\u5361\u7247\u7C7B\u578B",name:"bankCardType","data-source":I(ne),"is-view":""},null,8,["modelValue","data-source"]),o(A,{modelValue:r.value.bankCardNo,"onUpdate:modelValue":i[1]||(i[1]=p=>r.value.bankCardNo=p),label:"\u94F6\u884C\u5361\u53F7",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"]),o(A,{"model-value":e.holderName,label:"\u6301\u5361\u4EBA",name:"accountName","is-view":""},null,8,["model-value"]),o(V,{modelValue:r.value.payBank,"onUpdate:modelValue":i[2]||(i[2]=p=>r.value.payBank=p),name:"payBank",label:"\u5F00\u6237\u94F6\u884C","data-source":I(h),required:""},null,8,["modelValue","data-source"]),o(A,{label:"\u94F6\u884C\u5361\u7167\u7247",block:"","label-width":"100%",name:"images",rules:[{validator:N}]},{label:b(()=>[Oe]),input:b(()=>[o(ke,{modelValue:r.value.images,"onUpdate:modelValue":i[3]||(i[3]=p=>r.value.images=p),"max-count":2,"upload-type":I(_e).BANK_CARD},null,8,["modelValue","upload-type"])]),_:1},8,["rules"]),o(A,{modelValue:r.value.mobile,"onUpdate:modelValue":i[4]||(i[4]=p=>r.value.mobile=p),label:"\u9884\u7559\u624B\u673A\u53F7",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])]))}});var K=te(Ge,[["__scopeId","data-v-b4bb0f9e"]]);const we=e=>(le("data-v-6287b17b"),e=e(),oe(),e),je={class:"page-bank-card"},He={class:"reprise-card-list"},We=["onClick"],qe={class:"agree"},Ke=J(" \u6295\u4FDD\u4EBA\u9605\u8BFB\u5E76\u63A5\u53D7 "),Me=we(()=>k("div",{class:"file"},"\u300A\u94F6\u884C\u8F6C\u8D26\u6388\u6743\u300B",-1)),$e={class:"footer-button footer"},ze=J("\u4E0B\u4E00\u6B65"),Je=ue({setup(e){const n=Ie(),s=De(),{orderNo:x="2022072710380711215",agentCode:r="D1234567-1",tenantId:N="9991000007",templateId:h=1}=n.query,d={bankCardType:P.DEBIT};let i={};const p=f(""),m=f({payMethod:$.REAL_TIME,bankData:c(v({},d),{imagesId:[],images:[]})}),t=f({payMethod:$.REAL_TIME,expiryMethod:se.AUTOMATIC_PADDING,bankData:c(v({},d),{imagesId:[],images:[]}),payInfoType:C.FIRST_SAME}),y=f({bankData:c(v({},d),{imagesId:[],images:[]})}),_=f(C.FIRST_SAME),O=f(!1),Q=f(),U=f(),Z=f(),ie=R=>{_.value=R},pe=()=>{var R,u,D;if(!O.value){Ce.fail("\u8BF7\u52FE\u9009\u540C\u610F\u94F6\u884C\u8F6C\u8D26\u6388\u6743");return}Promise.all([(R=Q.value)==null?void 0:R.validate(),(u=U.value)==null?void 0:u.validate(),(D=Z.value)==null?void 0:D.validate()]).then(a=>{const G=[c(v({},a[0]),{id:m.value.id,paymentType:F.FIRST_TERM}),c(v({},a[1]),{id:t.value.id,paymentType:F.RENEW_TERM}),c(v({},a[2]),{id:y.value.id,paymentType:F.REPRISE,payInfoType:_.value})],T=[{category:E.OBVERSE_BANK_CARD,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:g.INIT_SIGN,type:"png",uri:a[0].images[0],id:m.value.bankData.imagesId[0]},{category:E.REVERSE_BANK_CARD,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:g.INIT_SIGN,type:"png",uri:a[0].images[1],id:m.value.bankData.imagesId[1]}];t.value.payInfoType===C.OTHER&&(T.push({category:E.OBVERSE_BANK_CARD,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:g.RENEWAL_SIGN,type:"png",uri:a[1].images[0],id:t.value.bankData.imagesId[0]}),T.push({category:E.REVERSE_BANK_CARD,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:g.RENEWAL_SIGN,type:"png",uri:a[1].images[1],id:t.value.bankData.imagesId[1]})),_.value===C.OTHER&&(T.push({category:E.OBVERSE_BANK_CARD,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:g.ANNUAL_SIGN,type:"png",uri:a[2].images[0],id:y.value.bankData.imagesId[0]}),T.push({category:E.REVERSE_BANK_CARD,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:g.ANNUAL_SIGN,type:"png",uri:a[2].images[1],id:y.value.bankData.imagesId[1]})),he(c(v({},i),{pageCode:"payInfo",tenantOrderPayInfoList:G,extInfo:c(v({},i.extInfo),{templateId:h,pageCode:"payInfo"}),operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:T})).then(l=>{const{code:w,data:j}=l;w==="10000"&&j.success&&s.push({path:Be[j.pageAction.data.nextPageCode],query:n.query})})})};return fe(()=>{Ve({pageCode:"payInfo",templateId:h}).then(R=>{console.log("res",R)}),Se({orderNo:x,saleUserId:r,tenantId:N}).then(R=>{const{code:u,data:D}=R;u==="10000"&&D&&(i=D,p.value=D.tenantOrderHolder.name,D.tenantOrderPayInfoList.forEach(a=>{a.paymentType===F.FIRST_TERM?(m.value=a,m.value.bankData=c(v(v({},d),a),{images:[],imagesId:[]})):a.paymentType===F.RENEW_TERM?(t.value=a,t.value.bankData=c(v({},a),{images:[],imagesId:[]})):a.paymentType===F.REPRISE&&(y.value=a,y.value.bankData=c(v({},a),{images:[],imagesId:[]}),_.value=a.payInfoType)}),D.tenantOrderAttachmentList.forEach(a=>{a.objectType===g.INIT_SIGN?(a.category===E.OBVERSE_BANK_CARD&&(m.value.bankData.images[0]=a.uri,m.value.bankData.imagesId[0]=a.id),a.category===E.REVERSE_BANK_CARD&&(m.value.bankData.images[1]=a.uri,m.value.bankData.imagesId[1]=a.id)):a.objectType===g.RENEWAL_SIGN?(a.category===E.OBVERSE_BANK_CARD&&(t.value.bankData.images[0]=a.uri,t.value.bankData.imagesId[0]=a.id),a.category===E.REVERSE_BANK_CARD&&(t.value.bankData.images[1]=a.uri,t.value.bankData.imagesId[1]=a.id)):a.objectType===g.ANNUAL_SIGN&&(a.category===E.OBVERSE_BANK_CARD&&(y.value.bankData.images[0]=a.uri,y.value.bankData.imagesId[0]=a.id),a.category===E.REVERSE_BANK_CARD&&(y.value.bankData.images[1]=a.uri,y.value.bankData.imagesId[1]=a.id))}))})}),(R,u)=>{const D=L("van-switch"),a=L("van-checkbox"),G=L("van-button"),T=L("ProPageWrap");return B(),H(T,null,{default:b(()=>[k("div",je,[o(q,{title:"\u9996\u671F\u652F\u4ED8"},{default:b(()=>[o(W,{ref_key:"form1",ref:Q},{default:b(()=>[o(V,{modelValue:m.value.payMethod,"onUpdate:modelValue":u[0]||(u[0]=l=>m.value.payMethod=l),name:"payMethod",required:"",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":I(z)},null,8,["modelValue","data-source"]),o(K,{modelValue:m.value.bankData,"onUpdate:modelValue":u[1]||(u[1]=l=>m.value.bankData=l),"holder-name":p.value},null,8,["modelValue","holder-name"])]),_:1},512)]),_:1}),o(q,{title:"\u7EED\u671F\u652F\u4ED8"},{default:b(()=>[o(W,{ref_key:"form2",ref:U},{default:b(()=>[o(A,{label:"\u540C\u9996\u671F",name:"payInfoType"},{input:b(()=>[o(D,{modelValue:t.value.payInfoType,"onUpdate:modelValue":u[2]||(u[2]=l=>t.value.payInfoType=l),size:"22","active-value":I(C).FIRST_SAME,"inactive-value":I(C).OTHER},null,8,["modelValue","active-value","inactive-value"])]),_:1}),o(V,{modelValue:t.value.payMethod,"onUpdate:modelValue":u[3]||(u[3]=l=>t.value.payMethod=l),name:"payMethod",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":I(z),required:""},null,8,["modelValue","data-source"]),o(V,{modelValue:t.value.expiryMethod,"onUpdate:modelValue":u[4]||(u[4]=l=>t.value.expiryMethod=l),name:"expiryMethod",label:"\u4FDD\u8D39\u903E\u671F\u672A\u652F\u4ED8","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":I(re),required:"","label-width":"200"},null,8,["modelValue","data-source"]),t.value.payInfoType!==I(C).FIRST_SAME?(B(),H(K,{key:0,modelValue:t.value.bankData,"onUpdate:modelValue":u[5]||(u[5]=l=>t.value.bankData=l),"holder-name":p.value},null,8,["modelValue","holder-name"])):ae("",!0)]),_:1},512)]),_:1}),o(q,{title:"\u5E74\u91D1\u9886\u53D6\u94F6\u884C\u5361",class:"reprise-card","show-divider":!1},{default:b(()=>[k("div",He,[(B(!0),M(ge,null,Re(I(Le),(l,w)=>(B(),M("div",{key:w,class:Te(["reprise-card-item",{selected:_.value===l.value}]),onClick:j=>ie(l.value)},Fe(l.label),11,We))),128))]),o(W,{ref_key:"form3",ref:Z},{default:b(()=>[_.value===I(C).OTHER?(B(),H(K,{key:0,modelValue:y.value.bankData,"onUpdate:modelValue":u[6]||(u[6]=l=>y.value.bankData=l),"holder-name":p.value},null,8,["modelValue","holder-name"])):ae("",!0)]),_:1},512)]),_:1}),k("div",qe,[o(a,{modelValue:O.value,"onUpdate:modelValue":u[7]||(u[7]=l=>O.value=l),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),Ke,Me]),k("div",$e,[o(G,{type:"primary",onClick:pe},{default:b(()=>[ze]),_:1})])])]),_:1})}}});var ea=te(Je,[["__scopeId","data-v-6287b17b"]]);export{ea as default};

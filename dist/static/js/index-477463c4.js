var K=Object.defineProperty;var P=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var T=(d,c,r)=>c in d?K(d,c,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[c]=r,U=(d,c)=>{for(var r in c||(c={}))X.call(c,r)&&T(d,r,c[r]);if(P)for(var r of P(c))Z.call(c,r)&&T(d,r,c[r]);return d};import{g as ee,C as O,d as ue,M as te,r as j,h as D,j as se,k as f,y as u,n as E,I as F,J as V,m as v,s as y,z as p,E as b,F as S,a1 as ae,a2 as oe,B as h,T as M,D as ne}from"./vendor-89e50ef2.js";import{_ as re,S as ie,x as ce,m as $,h as N,y as Y,N as I}from"./index-1de39856.js";import{g as le,f as de,s as z,a as Be}from"./verify-bb114e8a.js";import{a as _e,n as De}from"./index-28499fdd.js";const Q=d=>(ae("data-v-2b51d3cc"),d=d(),oe(),d),fe={class:"page-verify"},Ee={class:"people"},Fe={class:"name"},ve={class:"verify-item"},Ce=Q(()=>u("div",{class:"label"},"\u8EAB\u4EFD\u8BC1\u53F7\u7801",-1)),he={class:"no"},Ae=h(" \u53BB\u8BA4\u8BC1 "),pe={class:"sign-body"},me={class:"date"},ge={class:"file"},ye=h(" \u7B7E\u540D\u5C06\u88AB\u7528\u4E8E\u4EE5\u4E0B\u6587\u4EF6\uFF1A"),Ne={key:0,class:"dun-hao"},Ie={class:"people"},ke={class:"name"},Oe={class:"verify-item"},be=Q(()=>u("div",{class:"label"},"\u8EAB\u4EFD\u8BC1\u53F7\u7801",-1)),Se={class:"no"},xe=["onClick"],we=h(" \u53BB\u8BA4\u8BC1 "),Re=["onClick"],Le={class:"sign-body"},He={class:"date"},Pe={class:"file"},Te=h(" \u7B7E\u540D\u5C06\u88AB\u7528\u4E8E\u4EE5\u4E0B\u6587\u4EF6\uFF1A"),Ue={key:0,class:"dun-hao"},je={class:"footer-button footer"},Ve=h("\u63D0\u4EA4"),Me=ee({setup(d){const c="2022072810590219649",r=new ie({source:"localStorage"}),m=O([]),B=O(),g=O(),A=[],x=ue().format("YYYY-MM-DD"),W=()=>{var t;(t=g.value)==null||t.clear()},J=t=>{A[t].clear()},w=(t,s)=>{Be({callbackUrl:window.location.href,certiNo:"2022072710380711215",faceAuthMode:"TENCENT",userName:s,tenantId:9991000007}).then(o=>{const{code:n,data:l}=o;if(n==="10000"){const{originalUrl:e,serialNo:i}=l;window.location.href=e,r.set("verifyData",{serialNo:i,certNo:t,name:s})}})},R=t=>{var s,o,n,l;t===-1?w((s=B.value.tenantOrderHolder)==null?void 0:s.certNo,(o=B.value.tenantOrderHolder)==null?void 0:o.name):w((n=B.value.tenantOrderInsuredList[t])==null?void 0:n.certNo,(l=B.value.tenantOrderInsuredList[t])==null?void 0:l.name)},q=t=>{t&&A.every(s=>s!==t)&&A.push(t)},G=()=>{var s;if((s=g.value)==null?void 0:s.isEmpty()){M.fail("\u8BF7\u6295\u4FDD\u4EBA\u7B7E\u540D");return}if(A.some(o=>o.isEmpty())){M.fail("\u8BF7\u88AB\u4FDD\u4EBA\u7B7E\u540D");return}ne.confirm({title:"\u63D0\u793A",message:"\u8BF7\u786E\u8BA4\u4FE1\u606F\u586B\u5199\u65E0\u8BEF\u540E\uFF0C\u518D\u8FDB\u884C\u652F\u4ED8"}).then(()=>{var n;const o=(n=g.value)==null?void 0:n.save();Promise.all([z("HOLDER",o,2779003,9991000007),...A.map(l=>z("INSURED",l.save(),2779003,9991000007))]).then(()=>{De(U({},B.value))})})};return te(()=>{_e({orderNo:c,saleUserId:"D1234567-1",tenantId:"9991000007"}).then(s=>{const{code:o,data:n}=s;if(o==="10000"){B.value=n;let l=0;n.tenantOrderAttachmentList.forEach(e=>{e.category===21&&(e.objectType===2?g.value.setDataURL(e.fileBase64):e.objectType===1&&(A[l].setDataURL(e.fileBase64),l+=1))})}}),le({orderNo:"2022011815151382958351",productCode:"CQ75CQ76",tenantId:9991000007}).then(s=>{const{code:o,data:n}=s;o==="10000"&&(m.value=n||[])});const t=r.get("verifyData");if(t){const{serialNo:s,certNo:o,name:n}=t;de({certiNo:o,orderNo:c,serialNo:s,tenantId:9991000007,userName:n}).then(l=>{r.remove("verifyData")})}}),(t,s)=>{const o=j("van-button"),n=j("ProPageWrap");return D(),se(n,null,{default:f(()=>{var l;return[u("div",fe,[E(ce,{type:"warning",title:"\u5C0A\u656C\u7684\u5BA2\u6237\uFF0C\u672C\u6B21\u6295\u4FDD\u9700\u8981\u8FDB\u884C\u8EAB\u4EFD\u8BA4\u8BC1",content:"\u672C\u4EA7\u54C1\u6295\u4FDD\u9700\u8981\u5BF9\u6295\u4FDD\u4EBA\u3001\u88AB\u4FDD\u4EBA\u8FDB\u884C\u5B9E\u540D\u8BA4\u8BC1\uFF0C\u60A8\u8D2D\u4E70\u672C\u4EA7\u54C1\u7684\u7D2F\u8BA1\u603B\u4FDD\u8D39\u5DF2\u8D85\u8FC720\u4E07\uFF0C\u6309\u76D1\u7BA1\u8981\u6C42\uFF0C\u9700\u8981\u63D0\u4F9B\u6295\u4FDD\u4EBA\u3001\u88AB\u4FDD\u4EBA\u3001\u6307\u5B9A\u53D7\u76CA\u4EBA\u8BC1\u4EF6\u5F71\u50CF\uFF0C\u672C\u4EA7\u54C1\u975E\u672C\u4EBA\u6295\u4FDD\u4E14\u5E26\u8EAB\u6545\u8D23\u4EFB\u3001\u9700\u5BF9\u6295\u4FDD\u4EBA\u3001\u88AB\u4FDD\u4EBA\uFF08\u6210\u4EBA\uFF09\u7684\u6295\u4FDD\u610F\u613F\u8FDB\u884C\u7B7E\u5B57\u786E\u8BA4\u3002"}),E(N,{title:"\u6295\u4FDD\u4EBA",class:"card"},{extra:f(()=>{var e,i,a,_,C,k,L,H;return[u("div",Ee,[u("div",Fe,F((i=(e=B.value)==null?void 0:e.tenantOrderHolder)==null?void 0:i.name),1),u("div",{class:V(["status",{verified:(C=(_=(a=B.value)==null?void 0:a.tenantOrderHolder)==null?void 0:_.extInfo)==null?void 0:C.isCert}])},F(((H=(L=(k=B.value)==null?void 0:k.tenantOrderHolder)==null?void 0:L.extInfo)==null?void 0:H.isCert)?"\u5DF2\u8BA4\u8BC1":"\u5F85\u8BA4\u8BC1"),3)])]}),default:f(()=>{var e,i,a,_,C;return[u("div",ve,[Ce,u("div",he,F((i=(e=B.value)==null?void 0:e.tenantOrderHolder)==null?void 0:i.certNo),1),((C=(_=(a=B.value)==null?void 0:a.tenantOrderHolder)==null?void 0:_.extInfo)==null?void 0:C.isCert)?y("",!0):(D(),v("div",{key:0,class:"action",onClick:s[0]||(s[0]=k=>R(-1))},[Ae,E($,{name:"right_arrow",class:"icon"})]))])]}),_:1}),E(N,{title:"\u6295\u4FDD\u4EBA\u7B7E\u540D","show-icon":!1,class:"sign-card","show-line":!1},{extra:f(()=>[u("div",{class:"resign",onClick:W},"\u91CD\u7B7E")]),default:f(()=>[E(Y,{ref_key:"holderSign",ref:g,class:"sign"},null,512),u("div",pe,[u("div",me,"\u7B7E\u540D\u65E5\u671F\uFF1A "+F(p(x)),1),u("div",ge,[ye,(D(!0),v(S,null,b(m.value.filter(e=>e.noticeObject===p(I).HOLDER),(e,i)=>(D(),v("span",{key:i,class:"file-name"},[h(F(`\u300A${e.materialName}\u300B`),1),i!==m.value.filter(a=>a.noticeObject===p(I).HOLDER).length-1?(D(),v("span",Ne,"\u3001")):y("",!0)]))),128))])])]),_:1}),(D(!0),v(S,null,b((l=B.value)==null?void 0:l.tenantOrderInsuredList,(e,i)=>(D(),v("div",{key:i},[E(N,{title:"\u88AB\u4FDD\u4EBA",class:"card"},{extra:f(()=>{var a,_;return[u("div",Ie,[u("div",ke,F(e.name),1),u("div",{class:V(["status",{verified:(a=e.extInfo)==null?void 0:a.isCert}])},F(((_=e.extInfo)==null?void 0:_.isCert)?"\u5DF2\u8BA4\u8BC1":"\u5F85\u8BA4\u8BC1"),3)])]}),default:f(()=>{var a;return[u("div",Oe,[be,u("div",Se,F(e.certNo),1),((a=e.extInfo)==null?void 0:a.isCert)?y("",!0):(D(),v("div",{key:0,class:"action",onClick:_=>R(i)},[we,E($,{name:"right_arrow",class:"icon"})],8,xe))])]}),_:2},1024),E(N,{title:"\u88AB\u4FDD\u4EBA\u7B7E\u540D","show-icon":!1,class:"sign-card","show-line":!1},{extra:f(()=>[u("div",{class:"resign",onClick:a=>J(i)},"\u91CD\u7B7E",8,Re)]),default:f(()=>[E(Y,{ref_for:!0,ref:q,class:"sign"}),u("div",Le,[u("div",He,"\u7B7E\u540D\u65E5\u671F\uFF1A "+F(p(x)),1),u("div",Pe,[Te,(D(!0),v(S,null,b(m.value.filter(a=>a.noticeObject===p(I).INSURED),(a,_)=>(D(),v("span",{key:_,class:"file-name"},[h(F(`\u300A${a.materialName}\u300B`),1),_!==m.value.filter(C=>C.noticeObject===p(I).INSURED).length-1?(D(),v("span",Ue,"\u3001")):y("",!0)]))),128))])])]),_:2},1024)]))),128)),u("div",je,[E(o,{type:"primary",class:"submit-btn",onClick:G},{default:f(()=>[Ve]),_:1})])])]}),_:1})}}});var Je=re(Me,[["__scopeId","data-v-2b51d3cc"]]);export{Je as default};

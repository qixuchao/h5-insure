import{g as F,a5 as N,X as x,x as s,r as E,h as r,m as u,n as c,k as v,z as i,I as y,N as B,a6 as _,F as q}from"./vendor-fc34688e.js";import{_ as L,p as P,q as $}from"./index-4605c6d6.js";const j={key:0,class:"displayValue"},I={key:1,class:"placeholder"},O=F({props:{modelValue:{type:[String,Number],default:""},field0:{type:[String,Number],default:""},field1:{type:[String,Number],default:""},field2:{type:[String,Number],default:""},field3:{type:[String,Number],default:""},dataSource:{type:Array,default:()=>[]},title:{type:String,default:""},label:{type:String,default:""},isLink:{type:Boolean,default:!0},placeholder:{type:String,default:"\u8BF7\u9009\u62E9"},isView:{type:Boolean,default:!1},required:{type:Boolean,default:!1},mapping:{type:Object,default:()=>({label:"label",value:"value",children:"children"})}},emits:["update:modelValue","onChange","update:field0","update:field1","update:field2","update:field3"],setup(n,{emit:f}){const a=n,[d,o]=N(!1),b=()=>{o(!0)},S=()=>{o(!1)},k=e=>{console.log("\u{1F680} ~ handleFinish ~ value",e),f("update:modelValue",e.value),e.selectedOptions.forEach((l,t)=>{f(`update:field${t}`,l[a.mapping.value])}),o(!1)},p=e=>{e.children&&(e.children.length===0?delete e.children:e.children.forEach(l=>{p(l)}))},h=e=>{let l=[];return e.forEach(t=>{l.push(t),t.children&&t.children.length>0&&(l=[...l,...h(t.children)])}),l};x(()=>a.dataSource,()=>{a.dataSource.forEach(e=>{p(e)})});const V=s(()=>{const{label:e="label",value:l="value",children:t="children"}=a.mapping;return{text:e,value:l,children:t}}),w=s(()=>h(a.dataSource)),m=e=>{const l=w.value.find(t=>t[a.mapping.value]===e);return l?l[a.mapping.label]:""},g=s(()=>[a.field0,a.field1,a.field2,a.field3].filter(e=>!!e).map(e=>m(e)).join("/")||m(a.modelValue));return(e,l)=>{const t=E("van-cascader");return r(),u(q,null,[c(P,B({"model-value":n.modelValue},e.$attrs,{"is-link":n.isLink,label:n.label,"is-view":n.isView,required:n.required,onClick:b}),{input:v(()=>[i(g)?(r(),u("span",j,y(i(g)),1)):(r(),u("span",I,y(n.placeholder),1))]),_:1},16,["model-value","is-link","label","is-view","required"]),c($,{show:i(d),"onUpdate:show":l[0]||(l[0]=C=>_(d)?d.value=C:null),height:60,closeable:!1},{default:v(()=>[c(t,{title:n.title||n.label,options:n.dataSource,"field-names":i(V),"model-value":n.modelValue,onClose:S,onFinish:k},null,8,["title","options","field-names","model-value"])]),_:1},8,["show"])],64)}}});var D=L(O,[["__scopeId","data-v-72d5b4a4"]]);export{D as P};

var ut=Object.defineProperty,st=Object.defineProperties;var nt=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var lt=Object.prototype.hasOwnProperty,rt=Object.prototype.propertyIsEnumerable;var Ie=(n,i,o)=>i in n?ut(n,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[i]=o,ne=(n,i)=>{for(var o in i||(i={}))lt.call(i,o)&&Ie(n,o,i[o]);if(ye)for(var o of ye(i))rt.call(i,o)&&Ie(n,o,i[o]);return n},le=(n,i)=>st(n,nt(i));import{g as X,Q as Se,E as D,y as j,j as r,n as F,z as a,J as U,p as l,L as ie,A as e,B as it,a4 as ce,a5 as me,F as q,G,k as L,C as H,t as Q,h as Fe,r as $,m as y,_ as de,M as Te,ar as dt,a9 as ct,O as mt,af as _t,H as pt,l as ft,T as vt}from"./vendor-06835924.js";import{_ as te,d as ht,e as xe,V as pe,i as re,S as Dt,C as Be,a as fe,j as Ft,a2 as be,$ as Ct,m as Et,G as Ae,a1 as Pe}from"./index-49c1347e.js";import{P as wt}from"./index-e73a9ca1.js";import{c as gt}from"./close-df102554.js";import{i as Oe,a as Le,e as yt,p as $e,s as It,u as Bt,b as bt}from"./trial-73abb527.js";import{a as Ue,b as At,c as ke,t as Pt,g as $t}from"./utils-c5fdde14.js";import{p as Me}from"./product-477c6ffe.js";import{t as Re}from"./theme-eeb93d73.js";import{R as he,S as Ve,a as kt,f as ve}from"./infoCollection-b0426750.js";import{A as Vt}from"./bankCard-b0679059.js";import{b as De,v as Nt}from"./validator-ebd71d12.js";import{a as Ne}from"./order-b675ac95.js";import"./trial-8ea60a9b.js";const St=n=>(ce("data-v-47f4f4ca"),n=n(),me(),n),Tt={class:"com-question-item"},xt={class:"question"},Ot=St(()=>a("div",{class:"icon"},U("?"),-1)),Lt={class:"title"},Ut=X({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(n){const[i,o]=Se(!1),C=D(),f=()=>{o()},t=j(()=>i.value?ht(C.value):0);return(A,P)=>(r(),F("div",Tt,[a("div",xt,[Ot,a("div",Lt,U(n.question),1),l(xe,{name:"down",class:ie(["arrow-icon",{show:e(i)}]),onClick:f},null,8,["class"])]),a("div",{ref_key:"answerDom",ref:C,class:"answer",style:it({height:`${e(t)}px`})},U(n.answer),5)]))}});var Mt=te(Ut,[["__scopeId","data-v-47f4f4ca"]]);const Rt={class:"com-question"},qt=X({props:{list:{type:Array,default:()=>[]}},setup(n){const i=n,[o,C]=Se(!1),f=()=>{C()},t=j(()=>i.list.length<=4||o.value?i.list:i.list.slice(0,4));return(A,P)=>(r(),F("div",Rt,[(r(!0),F(q,null,G(e(t),(I,N)=>(r(),L(Mt,{key:N,question:I.title,answer:I.desc},null,8,["question","answer"]))),128)),n.list.length>4?(r(),F("div",{key:0,class:"show-more",onClick:f},[H(U(e(o)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),l(xe,{name:"down",class:ie(["icon",{showMore:e(o)}])},null,8,["class"])])):Q("",!0)]))}});var Ht=te(qt,[["__scopeId","data-v-40dd0994"]]),Kt="/static/assets/upgrade_bg.4a771537.png";const qe=n=>(ce("data-v-616dc9d3"),n=n(),me(),n),Yt={key:0,class:"pro-modal"},Wt=qe(()=>a("div",{class:"pro-overlay"},null,-1)),zt={class:"pro-modal-wrapper"},Gt=["src"],Jt={class:"pro-modal-body"},jt={class:"pro-modal-content"},Qt=qe(()=>a("p",{class:"tips"},"\u5347\u7EA7\u540E\u7684\u4FDD\u969C\u5C06\u4E8E\u7B2C\u4E8C\u671F\u4FDD\u8D39\u6263\u8D39/\u7F34\u8D39\u6210\u529F\u540E\u751F\u6548",-1)),Xt={class:"pro-modal-content"},Zt={class:"product-attachment-list"},eo=H(" \u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),to={key:0,class:"dun-hao"},oo=["src"],ao=X({props:{orderNo:{type:String,default:""},tenantId:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(n,{emit:i}){const o=n,C=D(),f=D(),t=D(),A=D(),P=D([]),I="BWYL2022",N=()=>{i("on-close")},M=()=>{i("on-confirm")},x=async()=>{try{const w=At({tenantId:o.tenantId,premium:A.value,orderDetail:t.value,productDetail:C.value,insureDetail:f.value,successJumpUrl:""}),Y=await yt(w),{code:R,data:S}=Y;R==="10000"&&(A.value=S.installmentPremium)}catch(w){console.log(w)}},K=()=>{const w=Me({productCode:I,withInsureInfo:!0,tenantId:o.tenantId}),Y=Oe({productCode:I}),R=Le({orderNo:o.orderNo,tenantId:o.tenantId});Promise.all([w,Y,R]).then(([S,_,u])=>{S.code==="10000"&&(C.value=S.data,P.value=S.data.tenantProductInsureVO.attachmentVOList),_.code==="10000"&&(f.value=_.data),u.code==="10000"&&(t.value=u.data),x()})};return Fe(()=>{K()}),(w,Y)=>{const R=$("ProPDFviewer");return o.isShow?(r(),F("div",Yt,[Wt,a("div",zt,[a("img",{class:"cover",src:e(Kt)},null,8,Gt),a("div",Jt,[a("div",jt,[a("p",null,"\u6BCF\u6708\u4FDD\u8D39\u4EC5\u9700"+U(e(Ue)(A.value||0))+"\u5143\uFF0C\u65E0\u9700\u91CD\u590D\u6295\u4FDD",1),Qt]),a("div",{class:"pro-modal-btn",onClick:M},"\u4E00\u952E\u5347\u7EA7"),a("div",Xt,[a("div",Zt,[eo,(r(!0),F(q,null,G(P.value,(S,_)=>(r(),L(R,{key:_,class:"file-name",title:`\u300A${S.attachmentName}\u300B`,content:S.attachmentUri,type:"pdf"},{default:y(()=>[_!==(P.value||[]).length-1?(r(),F("span",to,"\u3001")):Q("",!0)]),_:2},1032,["title","content"]))),128))])])]),a("div",{class:"pro-modal-close",onClick:N},[a("img",{src:e(gt)},null,8,oo)])])])):Q("",!0)}}});var uo=te(ao,[["__scopeId","data-v-616dc9d3"]]);const so={class:"list"},no={class:"item"},lo={class:"footer"},ro=H("\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u5B8C\u5168\u7B26\u5408\u5065\u5EB7\u544A\u77E5\u5185\u5BB9"),He=X({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","submit"],setup(n,{emit:i}){const o=n,C=D(o.show),f=D(o.activeIndex),t=j(()=>o.contentList[f.value].attachmentUri),A=()=>{i("update:show",!1),i("submit")};return de(()=>o,()=>{C.value=o.show,f.value=o.activeIndex},{deep:!0,immediate:!0}),(P,I)=>{const N=$("ProTab"),M=$("ProFilePreview"),x=$("VanButton"),K=$("ProPopup");return r(),L(K,{show:C.value,"onUpdate:show":I[1]||(I[1]=w=>C.value=w),height:80,class:"file-preview-popup-wrap",closeable:!1,onClose:I[2]||(I[2]=w=>i("update:show",!1))},{default:y(()=>[l(N,{active:f.value,"onUpdate:active":I[0]||(I[0]=w=>f.value=w),list:n.contentList.map((w,Y)=>({title:w.attachmentName,slotName:`guarantee-${Y}`})),class:"tab"},null,8,["active","list"]),a("div",so,[a("div",no,[(r(),L(M,{key:e(t),content:e(t),type:"pdf"},null,8,["content"]))])]),a("div",lo,[l(x,{type:"primary",block:"",round:"",onClick:A},{default:y(()=>[ro]),_:1})])]),_:1},8,["show"])}}});const T=n=>(ce("data-v-487bd888"),n=n(),me(),n),io={class:"holder container"},co=T(()=>a("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),mo={class:"insured container"},_o=T(()=>a("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),po={class:"payment container"},fo=T(()=>a("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),vo={class:"attachment-list"},ho={class:"product-attachment-list"},Do=H(" \u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),Fo=["onClick"],Co={class:"rate-attachment-list"},Eo=H(" *\u4FDD\u8D39\u4E0E\u88AB\u4FDD\u4EBA\u5E74\u9F84\u3001\u533B\u4FDD\u60C5\u51B5\u76F8\u5173\uFF0C\u8BE6\u89C1 "),wo=["onClick"],go={key:0,class:"renewal container"},yo=T(()=>a("div",{class:"title"},"\u5F00\u901A\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",-1)),Io={class:"content"},Bo={class:"pro-radio"},bo={class:"desc_arrow"},Ao={key:0,class:"renewal-y-desc renewal-desc"},Po=T(()=>a("div",{class:"sub-title"},"\u5F00\u901A\u540E\u53EF\u4EAB\u53D7\uFF1A",-1)),$o=T(()=>a("div",{class:"desc"},"\u5B89\u5FC3\uFF01\u5F00\u901A\u81EA\u52A8\u7F34\u8D39\u53EF\u4F7F\u4FDD\u969C\u4E0D\u95F4\u65AD",-1)),ko=T(()=>a("div",{class:"desc"},"\u7701\u5FC3\uFF01\u4E0B\u4E00\u5E74\u91CD\u65B0\u6295\u4FDD\uFF0C\u4E0D\u7528\u62C5\u5FC3\u65AD\u4FDD",-1)),Vo=T(()=>a("div",{class:"desc"},"\u653E\u5FC3\uFF01\u65E0\u989D\u5916\u8D39\u7528\uFF0C\u5F00\u901A\u540E\u53EF\u968F\u65F6\u53D6\u6D88",-1)),No=T(()=>a("div",{class:"desc"},"\u63D0\u793A:\u672C\u4EA7\u54C1\u4E3A\u4E00\u5E74\u671F\u975E\u4FDD\u8BC1\u7EED\u4FDD\u4EA7\u54C1",-1)),So=[Po,$o,ko,Vo,No],To={key:1,class:"renewal-n-desc renewal-desc"},xo=T(()=>a("div",{class:"sub-title"},"\u672A\u5F00\u901A\uFF0C\u4E00\u65E6\u65AD\u4FDD\u5C06\u9762\u4E34\uFF1A",-1)),Oo=T(()=>a("div",{class:"desc"},"\u65AD\u4FDD\u540E\u5C06\u5931\u53BB\u4FDD\u969C\uFF0C\u65AD\u4FDD\u671F\u95F4\u51FA\u9669\u4E0D\u53EF\u7406\u8D54",-1)),Lo=T(()=>a("div",{class:"desc"},"\u65AD\u4FDD\u540E\u91CD\u65B0\u6295\u4FDD\uFF0C\u7B49\u5F85\u671F\u5185\u51FA\u9669\u65E0\u6CD5\u7406\u8D54",-1)),Uo=T(()=>a("div",{class:"desc"},"\u65AD\u4FDD\u540E\u91CD\u65B0\u6295\u4FDD\uFF0C\u9700\u6838\u5B9E\u5065\u5EB7\u72B6\u51B5\uFF0C\u53EF\u80FD\u65E0\u6CD5\u6295\u4FDD",-1)),Mo=[xo,Oo,Lo,Uo],Ro=X({props:{isCheck:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},holderDisable:{type:Boolean,default:!1},paymentMethodDisable:{type:Boolean,default:!1},premium:{default:0},productDetail:{default:{}},formInfo:{default:()=>({})}},setup(n,{expose:i}){const o=n,C=D({}),f=[{value:"Y",title:"\u7533\u8BF7\u5F00\u901A"},{value:"N",title:"\u6682\u4E0D\u5F00\u901A"}],t=Te({insureDisable:!0,formInfo:o.formInfo}),A=D(!1),P=D(0),I=D(!1),N=_=>De(_)?!0:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u59D3\u540D",M=j(()=>{var _,u;return(u=(_=o.productDetail)==null?void 0:_.tenantProductInsureVO)==null?void 0:u.attachmentVOList.filter(B=>B.attachmentName==="\u8D39\u7387\u8868")}),x=j(()=>{var _,u;return((u=(_=o.productDetail)==null?void 0:_.tenantProductInsureVO)==null?void 0:u.attachmentVOList.filter(B=>B.attachmentName!=="\u8D39\u7387\u8868"))||[]}),K=()=>(I.value=!0,I),w=_=>{P.value=_,A.value=!0},Y=()=>new Promise((_,u)=>{C==null||C.value.validate().then(()=>{_("")},()=>{u()})}),R=_=>{o.disable||t.formInfo.renewalDK===_||(t.formInfo.renewalDK=_)},S=()=>{o.disable||(t.formInfo.renewalDK=!t.formInfo.renewalDK)};return de(()=>t.formInfo.insured.relationToHolder,(_,u)=>{o.disable||_!==u&&(_.toString()===he.SELF?(t.formInfo.insured={certNo:t.formInfo.holder.certNo,name:t.formInfo.holder.name,socialFlag:t.formInfo.holder.socialFlag,relationToHolder:_},t.insureDisable=!0):(t.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:_},t.insureDisable=!1))}),de(()=>t.formInfo.holder,()=>{t.formInfo.insured.relationToHolder===he.SELF&&Object.assign(t.formInfo.insured,t.formInfo.holder)},{deep:!0,immediate:!0}),i({validateForm:Y,previewFile:w,isAgreeFile:I,onSubmit:K}),(_,u)=>{const B=$("ProField"),W=$("ProRadioButton"),oe=$("ProPicker"),ae=$("ProTabButton"),Z=$("ProPDFviewer"),ue=$("ProForm"),_e=$("van-config-provider");return r(),L(_e,{"theme-vars":e(Re)},{default:y(()=>[l(ue,{ref_key:"formRef",ref:C},{default:y(()=>[a("div",io,[co,l(B,{modelValue:e(t).formInfo.holder.name,"onUpdate:modelValue":u[0]||(u[0]=s=>e(t).formInfo.holder.name=s),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",maxlength:"10",rules:[{validator:N}],"is-view":o.holderDisable||o.disable},null,8,["modelValue","rules","is-view"]),l(B,{modelValue:e(t).formInfo.holder.certNo,"onUpdate:modelValue":u[1]||(u[1]=s=>e(t).formInfo.holder.certNo=s),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[e(pe).ID_CARD],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),l(B,{modelValue:e(t).formInfo.holder.mobile,"onUpdate:modelValue":u[2]||(u[2]=s=>e(t).formInfo.holder.mobile=s),label:"\u624B\u673A\u53F7",name:"mobile",required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",maxlength:"11","validate-type":[e(pe).PHONE],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),l(B,{modelValue:e(t).formInfo.holder.socialFlag,"onUpdate:modelValue":u[4]||(u[4]=s=>e(t).formInfo.holder.socialFlag=s),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:y(()=>[l(W,{modelValue:e(t).formInfo.holder.socialFlag,"onUpdate:modelValue":u[3]||(u[3]=s=>e(t).formInfo.holder.socialFlag=s),disabled:o.disable,options:e(Ve)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),l(re),a("div",mo,[_o,l(B,{modelValue:e(t).formInfo.insured.relationToHolder,"onUpdate:modelValue":u[6]||(u[6]=s=>e(t).formInfo.insured.relationToHolder=s),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:y(()=>[l(W,{modelValue:e(t).formInfo.insured.relationToHolder,"onUpdate:modelValue":u[5]||(u[5]=s=>e(t).formInfo.insured.relationToHolder=s),disabled:o.disable,options:e(kt)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"]),l(B,{modelValue:e(t).formInfo.insured.name,"onUpdate:modelValue":u[7]||(u[7]=s=>e(t).formInfo.insured.name=s),label:"\u59D3\u540D",name:"name",required:"",maxlength:"10",rules:[{validator:N}],"is-view":e(t).insureDisable||o.disable},null,8,["modelValue","rules","is-view"]),l(B,{modelValue:e(t).formInfo.insured.certNo,"onUpdate:modelValue":u[8]||(u[8]=s=>e(t).formInfo.insured.certNo=s),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[e(pe).ID_CARD],"is-view":e(t).insureDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),l(B,{modelValue:e(t).formInfo.insured.socialFlag,"onUpdate:modelValue":u[10]||(u[10]=s=>e(t).formInfo.insured.socialFlag=s),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:y(()=>[l(W,{modelValue:e(t).formInfo.insured.socialFlag,"onUpdate:modelValue":u[9]||(u[9]=s=>e(t).formInfo.insured.socialFlag=s),disabled:o.disable||e(t).insureDisable,options:e(Ve)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),l(re),a("div",po,[fo,l(B,{label:"\u6BCF\u6708\u4FDD\u8D39",class:"pro-field","is-view":!0},{input:y(()=>[H(U(e(Ue)(o.premium))+" \u5143/\u6708 \u517112\u671F",1)]),_:1}),l(oe,{modelValue:e(t).formInfo.paymentMethod,"onUpdate:modelValue":u[11]||(u[11]=s=>e(t).formInfo.paymentMethod=s),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":e(Vt),"is-view":o.disable||e(t).formInfo.paymentMethodDisable,required:""},null,8,["modelValue","data-source","is-view"]),o.isCheck?Q("",!0):(r(),L(B,{key:0,label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",class:"pro-field",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9",border:!1},{input:y(()=>[l(ae,{disabled:o.allDisabled,title:"\u514D\u8D39\u5F00\u901A",active:e(t).formInfo.renewalDK,onClick:S},null,8,["disabled","active"])]),_:1})),a("div",vo,[a("div",ho,[Do,o.isCheck?(r(!0),F(q,{key:0},G(e(x),(s,v)=>(r(),F("span",{key:`attachment-${v}`,class:"file-name",onClick:ee=>w(v)},U(`\u300A${s.attachmentName}\u300B`),9,Fo))),128)):(r(!0),F(q,{key:1},G(e(x),(s,v)=>(r(),L(Z,{key:v,class:"file-name",title:`\u300A${s.attachmentName}\u300B`,content:s.attachmentUri,type:"pdf"},null,8,["title","content"]))),128))]),a("div",Co,[Eo,o.isCheck?(r(!0),F(q,{key:0},G(e(M),(s,v)=>(r(),F("span",{key:`rate-${v}`,class:"file-name",onClick:ee=>w(e(x).length+v)},U(`\u300A${s.attachmentName}\u300B`),9,wo))),128)):(r(!0),F(q,{key:1},G(e(M),(s,v)=>(r(),L(Z,{key:v,class:"file-name",title:`\u300A${s.attachmentName}\u300B`,content:s.attachmentUri,type:"pdf"},null,8,["title","content"]))),128))])])]),l(re),o.isCheck?(r(),F("div",go,[yo,a("div",Io,[a("div",Bo,[(r(),F(q,null,G(f,(s,v)=>l(ae,{key:v,title:s.title,active:e(t).formInfo.renewalDK===s.value,onClick:ee=>R(s.value)},null,8,["title","active","onClick"])),64))]),a("div",bo,[a("div",{class:ie(["arrow light",{show:e(t).formInfo.renewalDK==="Y"||e(t).formInfo.renewalDK===""}])},null,2),a("div",{class:ie(["arrow dark",{show:e(t).formInfo.renewalDK==="N"}])},null,2)]),e(t).formInfo.renewalDK==="Y"?(r(),F("div",Ao,So)):(r(),F("div",To,Mo))])])):Q("",!0),l(re),l(He,{show:A.value,"onUpdate:show":u[12]||(u[12]=s=>A.value=s),"content-list":e(x).concat(e(M)),"active-index":P.value,onSubmit:K},null,8,["show","content-list","active-index"])]),_:1},512)]),_:1},8,["theme-vars"])}}});var qo=te(Ro,[["__scopeId","data-v-487bd888"]]),Ho="/static/assets/header-logo.fcc5844b.png";const Ko=n=>(ce("data-v-a052d3d0"),n=n(),me(),n),Yo={class:"header"},Wo=["src"],zo=Ko(()=>a("div",{class:"content"},[a("h4",null,"\u6E29\u99A8\u63D0\u793A\uFF0C\u60A8\u5DF2\u8FDB\u5165\u6295\u4FDD\u6D41\u7A0B\uFF1A"),a("p",null,[H(" \u8BF7\u4ED4\u7EC6\u9605\u8BFB\u514D\u8D23\u6761\u6B3E\u3001\u6295\u4FDD\u987B\u77E5\u7B49\u4FE1\u606F\uFF0C\u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653"),a("span",null,"\u300A\u4E2A\u4EBA\u4FE1\u606F\u4FDD\u62A4\u653F\u7B56\u300B"),H("\uFF0C\u4E3A\u7EF4\u62A4\u60A8\u7684\u5408\u6CD5\u6743\u76CA\uFF0C\u60A8\u7684\u64CD\u4F5C\u8F68\u8FF9\u5C06\u88AB\u8BB0\u5F55\u3002 ")])],-1)),Go={class:"footer"},Jo=H(" \u597D\u7684 "),jo={key:0},Qo=X({setup(n){const i="PRENOTICE",o=new Dt({source:"sessionStorage"}),C=D(!1),f=dt({time:4e3,onFinish:()=>{o.set(`${i}-isShow`,"1"),C.value=!1}}),t=j(()=>f.current.value.seconds);return Fe(()=>{o.get(`${i}-isShow`)||(C.value=!0,f.start())}),(A,P)=>{const I=$("VanButton"),N=$("ProPopup");return r(),L(N,{class:"pre-notice-wrap",show:C.value,closeable:!1,height:45},{default:y(()=>[a("div",Yo,[a("img",{src:e(Ho)},null,8,Wo)]),zo,a("div",Go,[l(I,{type:"primary",block:"",round:""},{default:y(()=>[Jo,e(t)?(r(),F("span",jo,U(e(t))+"s",1)):Q("",!0)]),_:1})])]),_:1},8,["show"])}}});var Xo=te(Qo,[["__scopeId","data-v-a052d3d0"]]);const Zo={class:"page-product-detail"},ea={class:"info"},ta=["src"],oa={class:"guarantee-list"},aa={key:0,class:"basic"},ua={class:"tab-1"},sa=["src"],na={class:"footer-button"},la={class:"price"},ra=H(" \u603B\u4FDD\u8D39"),ia={class:"guarantee-list"},da={class:"title"},ca={class:"content"},ma=X({setup(n){const i=ct(),o=mt(),{productCode:C="BWYL2021",tenantId:f,orderNo:t,phoneNo:A,agentCode:P="",saleChannelId:I,paymentMethod:N,certNo:M,name:x,pageCode:K,from:w}=o.query,Y=D([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),R=D(),S=D(0),_=D(!1),u=D(),B=D(),W=D(),oe=w==="check",ae=D(!1),Z=D(!1),ue=D(0),_e=!!(x&&M&&A)||!!t,s=K==="payBack",v=Te({holder:{certNo:M,certType:Be.CERT,mobile:A,name:x,socialFlag:ve.HAS},insured:{certNo:M,certType:Be.CERT,name:x,socialFlag:ve.HAS,relationToHolder:he.SELF},paymentMethod:N,paymentMethodDisable:!!N,renewalDK:"Y"}),ee=D(!1),J=D(!1),Ke=()=>{ee.value=!1},Ye=()=>{i.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:le(ne({},o.query),{tenantId:f,productCode:"BWYL2022",orderNo:t,agentCode:P,from:w})})},We=()=>{_.value=!0},ze=j(()=>{var c,d;return((d=(c=u.value)==null?void 0:c.tenantProductInsureVO)==null?void 0:d.attachmentVOList.filter(m=>m.attachmentName==="\u8D39\u7387\u8868"))||[]}),Ge=j(()=>{var c,d;return((d=(c=u.value)==null?void 0:c.tenantProductInsureVO)==null?void 0:d.attachmentVOList.filter(m=>m.attachmentName!=="\u8D39\u7387\u8868"))||[]}),se=j(()=>{var c,d,m,E,g,b,k;return((m=(d=(c=u.value)==null?void 0:c.tenantProductInsureVO)==null?void 0:d.guaranteeList)==null?void 0:m.length)?(g=(E=u.value)==null?void 0:E.tenantProductInsureVO)==null?void 0:g.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(k=(b=u.value)==null?void 0:b.tenantProductInsureVO)==null?void 0:k.titleAndDescVOS}]}),Ce=()=>{const{holder:{certNo:c,mobile:d,name:m,socialFlag:E},insured:{certNo:g,name:b,socialFlag:k,relationToHolder:p},paymentMethod:h}=v,O=Ae(c)&&Nt(d)&&De(m)&&!!E,V=Ae(g)&&De(b)&&!!k&&!!p;return!!(O&&V&&!!h)},Je=async c=>{vt.loading({message:"\u6838\u4FDD\u4E2D...",forbidClick:!0});try{const d=await Bt(c),{code:m}=d;if(m==="10000"){const E=await bt({orderNo:c.orderNo,tenantId:f}),{data:g}=E;m==="10000"?window.location.href=g:J.value=!1}else J.value=!1}catch{J.value=!1}},je=c=>`${Pe}/chuangxin/baigebao/productDetail?tenantId=${f}&productCode=${C}&orderNo=${c}&agentCode=${P}&pageCode=payBack&from=${w}`,Qe=c=>`${Pe}/chuangxin/baigebao/payFail?tenantId=${f}&orderNo=${c}&agentCode=${P}&from=${w}`,Xe=async c=>{const d=$t({tenantId:f,saleUserId:P,saleChannelId:I,detail:u.value,insureDetail:B.value,paymentMethod:v.paymentMethod,renewalDK:v.renewalDK,successJumpUrl:"",premium:W.value,holder:v.holder,insured:v.insured,tenantOrderRiskList:c,orderStatus:"",orderTopStatus:""});try{const m=await It(d),{code:E,data:g}=m;E==="10000"&&Je(le(ne({},d),{orderNo:g.data,extInfo:{extraInfo:{renewalDK:v.renewalDK,paymentMethod:v.paymentMethod,successJumpUrl:je(g.data),failUrl:Qe(g.data)}}}))}catch{J.value=!1}},Ee=async()=>{const{calcData:c,riskVOList:d}=ke({holder:v.holder,insured:v.insured,tenantId:f,productDetail:u.value,insureDetail:B.value}),m=async()=>{const E=await $e(c),{code:g,data:b}=E;return g==="10000"?(W.value=b.premium,{condition:d,data:b}):{}};m(),ft.exports.debounce(m,500,{trailing:!0})},Ze=c=>{ue.value=c,Z.value=!0},et=()=>new Promise((c,d)=>{var m,E;(E=(m=R.value)==null?void 0:m.validateForm)==null||E.call(m).then(async()=>{var V;const g=((V=R.value)==null?void 0:V.isAgreeFile)||ae.value;if(oe&&!g){Ze(0),J.value=!1;return}const{calcData:b,riskVOList:k}=ke({holder:v.holder,insured:v.insured,tenantId:f,productDetail:u.value,insureDetail:B.value}),p=await $e(b),{code:h,data:O}=p;h==="10000"?(W.value=O.premium,c({condition:k,data:O})):d(new Error)}).catch(()=>{J.value=!1})}),we=async()=>{var c;if(s){i.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:le(ne({},o.query),{tenantId:f,productCode:"BWYL2022",orderNo:t,agentCode:P,from:w})});return}J.value=!0;try{const{condition:d,data:m}=await et(),E={},g=(k=[])=>{(k||[]).forEach(p=>{var h;E[p.riskCode]=p,((h=p.riskPremiumDetailVOList)==null?void 0:h.length)&&g(p.riskPremiumDetailVOList)})};g(m.riskPremiumDetailVOList);const b=Pt({tenantId:f,riskList:d,riskPremium:E,productId:(c=u.value)==null?void 0:c.id});Xe(b)}catch{J.value=!1}},tt=()=>{ae.value=!0,we()};de(()=>v,()=>{u.value&&B.value&&!s&&Ce()&&Ee()},{deep:!0,immediate:!0});const ot=async()=>{var E,g,b,k,p,h,O;const c=await Le({orderNo:t,tenantId:f}),{code:d,data:m}=c;if(d==="10000"){const{tenantOrderHolder:V,tenantOrderInsuredList:z,extInfo:ge}=m;if(v.holder={certNo:V.certNo,certType:V.certType,mobile:V.mobile,name:V.name,socialFlag:ve.HAS},v.insured={certNo:z==null?void 0:z[0].certNo,certType:(E=z[0])==null?void 0:E.certType,name:(g=z[0])==null?void 0:g.name,socialFlag:(k=(b=z[0])==null?void 0:b.extInfo)==null?void 0:k.hasSocialInsurance,relationToHolder:(p=z[0])==null?void 0:p.relationToHolder},v.paymentMethod=ge.extraInfo.paymentMethod,W.value=(O=(h=z[0])==null?void 0:h.tenantOrderProductList[0])==null?void 0:O.premium,v.renewalDK=ge.extraInfo.renewalDK?"Y":"N",K==="productDetail")return;(m.orderStatus===Ne.ACCEPT_POLICY||m.orderStatus===Ne.PAYMENT_SUCCESS)&&(ee.value=!0)}},at=async()=>{const c=Me({productCode:C,withInsureInfo:!0,tenantId:f}),d=Oe({productCode:C});await Promise.all([c,d]).then(([m,E])=>{m.code==="10000"&&(u.value=m.data),E.code==="10000"&&(B.value=E.data)}),t?ot():Ce()&&Ee()};return Fe(()=>{at(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(c,d)=>{const m=$("van-button"),E=$("van-config-provider"),g=_t("dompurify-html");return r(),F(q,null,[l(E,{"theme-vars":e(Re)},{default:y(()=>{var b,k;return[a("div",Zo,[a("div",ea,[a("img",{src:(k=(b=u.value)==null?void 0:b.tenantProductInsureVO)==null?void 0:k.banner[0],class:"banner"},null,8,ta),a("div",oa,[l(fe,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:We},{default:y(()=>{var p,h,O;return[u.value&&((p=u.value)==null?void 0:p.tenantProductInsureVO)?(r(),F("div",aa,[(r(!0),F(q,null,G((O=(h=e(se))==null?void 0:h[S.value])==null?void 0:O.titleAndDescVOS,(V,z)=>(r(),L(Ft,{key:z,class:"guarantee-item",title:V.title,content:V.desc,border:!1},null,8,["title","content"]))),128))])):Q("",!0)]}),_:1})])]),l(be,{class:"tabs",list:Y.value,sticky:"",scrollspy:""},{tab1:y(()=>[l(qo,{ref_key:"formRef",ref:R,"is-check":oe,"holder-disable":e(_e),disable:s,"form-info":e(v),premium:W.value,"product-detail":u.value},null,8,["holder-disable","form-info","premium","product-detail"])]),tab2:y(()=>{var p,h;return[a("div",ua,[(r(!0),F(q,null,G(((h=(p=u.value)==null?void 0:p.tenantProductInsureVO)==null?void 0:h.spec)||[],(O,V)=>(r(),F("img",{key:V,src:O,class:"detail-img"},null,8,sa))),128))])]}),tab3:y(()=>[l(fe,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:y(()=>{var p,h;return[l(wt,{list:(h=(p=u.value)==null?void 0:p.tenantProductInsureVO)==null?void 0:h.settlementProcessList},null,8,["list"])]}),_:1}),l(fe,{title:"\u5E38\u89C1\u95EE\u9898"},{default:y(()=>{var p,h;return[l(Ht,{list:(h=(p=u.value)==null?void 0:p.tenantProductInsureVO)==null?void 0:h.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),a("div",na,[a("div",la,[ra,a("span",null,"\uFFE5"+U(e(Ct)(W.value))+"/\u6708",1)]),l(m,{type:"primary",class:"right",disabled:J.value,onClick:we},{default:y(()=>[H(U(s?"\u5347\u7EA7\u4FDD\u969C":"\u7ACB\u5373\u6295\u4FDD"),1)]),_:1},8,["disabled"])])]),oe&&e(K)!=="payBack"?(r(),L(Xo,{key:0})):Q("",!0),l(Et,{show:_.value,"onUpdate:show":d[0]||(d[0]=p=>_.value=p),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:y(()=>[e(se).length>1?(r(),L(be,{key:0,list:e(se).map((p,h)=>({title:p.guaranteeType,slotName:`guarantee-${h}`})),class:"tab"},null,8,["list"])):Q("",!0),a("div",ia,[(r(!0),F(q,null,G(e(se)[S.value].titleAndDescVOS,(p,h)=>(r(),F("div",{key:h,class:"guarantee-item"},[a("div",da,U(p.title),1),pt(a("div",ca,null,512),[[g,p.content]])]))),128))])]),_:1},8,["show"]),l(uo,{"order-no":e(t),"tenant-id":e(f),"is-show":ee.value,onOnConfirm:Ye,onOnClose:Ke},null,8,["order-no","tenant-id","is-show"])]}),_:1},8,["theme-vars"]),l(He,{show:Z.value,"onUpdate:show":d[1]||(d[1]=b=>Z.value=b),"content-list":e(Ge).concat(e(ze)),"active-index":ue.value,onSubmit:tt},null,8,["show","content-list","active-index"])],64)}}});var ba=te(ma,[["__scopeId","data-v-376fedaa"]]);export{ba as default};

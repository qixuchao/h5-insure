import{d as e,u as n,r as s,A as o,aq as a,L as i,a1 as t,ae as r,b as l,c as u,e as d,w as c,f as p,i as f,h as g,ag as m,j as v,E as C,a2 as y,U as k,G as w,$ as h,B as b,ak as R,_}from"./index-6e6fc42f.js";import{b as I}from"./product-f5b34532.js";import{u as L}from"./useThread-c502137a.js";const S={key:0,class:"header"},U=["src"],j={key:1,class:"statement up"},x={key:3,class:"statement"},E={class:"footer"},T={key:0},q={class:"review-pdf"},D=e({name:"preNotice"});var N=w(e({...D,props:{productDetail:{default:()=>({})}},setup(e){const w=e,D=n(),{tenantId:N="",productCode:O,preview:P}=D.query,A=s(),B=o({insureConfig:{logoLocation:void 0,logoUrl:"",readingReminder:"",acceptReminder:"",readingSeconds:0,buttonTitle:"我知道了"}}),G=s(!1),$=s(!1),z=new a({source:"sessionStorage"});let F;const H=s({title:"",link:""}),J=s(),K=i((()=>{if(H.value.link){const e=(H.value.link||"").split("?"),n=(e[0]||"").substr(e[0].lastIndexOf(".")+1);return console.log("urlList",n),"pdf"===n?"pdf":"picture"}return"link"})),M=()=>{G.value=!1};return t((()=>{!P&&(async()=>{const{code:e,data:n}=await I({insureCode:w.productDetail.insurerCode,productCode:O,tenantId:N});"10000"===e&&(B.insureConfig=n,J.value=B.insureConfig.readingSeconds||0,F=L({start:()=>{console.log("开始轮询"),J.value-=1},stop:()=>{console.log("结束轮询"),z.set("PRENOTICE-isShow","1")},time:1e3,number:B.insureConfig.readingSeconds||0}),h((()=>{F.run()}))),G.value=!0})()})),(e,n)=>{var s;const o=b,a=R,i=_,t=r("dompurify-html");return l(),u(k,null,[d(a,{class:"pre-notice-wrap",show:p(G),closeable:!1,height:"auto",style:{"padding-bottom":"30px"}},{default:c((()=>[p(B).insureConfig.logoUrl?(l(),u("div",S,[f("img",{src:p(B).insureConfig.logoUrl},null,8,U)])):g("",!0),1===p(B).insureConfig.logoLocation&&p(B).insureConfig.acceptReminder?m((l(),u("div",j,null,512)),[[t,p(B).insureConfig.acceptReminder]]):g("",!0),p(B).insureConfig.readingReminder?(l(),u("div",{key:2,ref_key:"noticeRef",ref:A,class:"content"},[m(f("div",null,null,512),[[t,p(B).insureConfig.readingReminder]])],512)):g("",!0),2===p(B).insureConfig.logoLocation&&p(B).insureConfig.acceptReminder?m((l(),u("div",x,null,512)),[[t,p(B).insureConfig.acceptReminder]]):g("",!0),f("div",E,[d(o,{type:"primary",block:"",round:"",onClick:M},{default:c((()=>[v(" 好的 "),p(J)?(l(),u("span",T,C(p(J))+"s",1)):g("",!0)])),_:1})])])),_:1},8,["show"]),d(a,{show:p($),"onUpdate:show":n[0]||(n[0]=e=>y($)?$.value=e:null),class:"pre-notice-wrap",title:null==(s=p(H))?void 0:s.title,position:"bottom",style:{overflow:"hidden"}},{default:c((()=>{var e;return[f("div",q,[d(i,{content:null==(e=p(H))?void 0:e.link,type:p(K)},null,8,["content","type"])])]})),_:1},8,["show","title"])],64)}}}),[["__scopeId","data-v-28ab7968"]]);export{N as P};

import{h as e,L as a,Z as t,k as n,l,y as o,Q as i,n as r,z as u,I as s,A as d,F as c,E as v,J as m,G as p,H as f,C as y,r as I,x as h,P as g,ae as O,s as P,m as C,a3 as V,a4 as L,X as k,Y as D,az as S,d as w,R as A,T as b,a8 as N,N as F,W as x,ax as q,o as T,j as R,ar as E,D as U}from"./vendor-0381d15c.js";import{d as B}from"./debounce-924a6220.js";import{_ as j,ac as _,e as M,i as H,a7 as Y,C as Q,I as G,K,a8 as W,a1 as z}from"./index-50602cae.js";import{u as X,a as J}from"./core-df43198a.js";import{u as Z,B as $,I as ee,A as ae,P as te}from"./useAddressList-50c22e30.js";import{C as ne,m as le,n as oe,o as ie,p as re,S as ue,R as se,O as de}from"./infoCollection-31cab57f.js";import{k as ce,j as ve}from"./trial-50b2113a.js";import{i as me,b as pe,p as fe,g as ye}from"./trial-f0eaef9d.js";import{p as Ie}from"./product-1af83d80.js";import{o as he,g as ge,v as Oe,r as Pe,t as Ce}from"./utils-718b5723.js";import{_ as Ve,n as Le}from"./nextStep-68c4b4ff.js";import{v as ke}from"./validator-5a13dc82.js";import{u as De,t as Se}from"./theme-bc16780d.js";import{P as we}from"./index-3b383a38.js";import{L as Ae}from"./loading-1c9c1d7b.js";import{_ as be}from"./index-637d8672.js";import{u as Ne}from"./useDicData-034d604f.js";import{P as Fe}from"./index-d3a0ee9c.js";import{s as xe,c as qe}from"./phoneVerify-afdebde1.js";import{s as Te}from"./useStorage-59928506.js";import"./index-38a8c5cf.js";import"./relativeTime-71db0de4.js";const Re={class:"customer-body"},Ee={class:"header"},Ue={class:"conatiner"},Be=["onClick"],je={class:"name"},_e=y("确 定");var Me=j(e({props:{userInfo:{type:Object,default:()=>({})},relationCode:{type:String,default:"1"},title:{type:String,default:"选择投保人"},data:{type:Array,default:()=>[]}},emits:["change"],setup(e,{emit:y}){const I=e,h=a({loading:!1,select:{},list:[]});t((()=>I.data),(e=>{h.list=I.data}),{deep:!0,immediate:!0}),t((()=>I.userInfo),(e=>{h.select={...e,certName:e.name}}),{deep:!0,immediate:!0});const g=()=>{h.loading=!1,y("change",h.select)},O=()=>{h.loading=!1,h.loading=!0};return(a,t)=>{const y=n("ProSvg"),I=n("van-icon"),P=n("VanButton"),C=n("ProPopup");return l(),o(c,null,[i(y,{name:"customer",onClick:O}),i(C,{class:"customer-list",style:{height:"416px"},show:d(h).loading,closeable:!1},{default:r((()=>[u("div",Re,[u("div",Ee,[u("span",null,s(e.title),1),i(I,{name:d("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAuRJREFUeF7t3DtOI0EQBuDfEtImXAdyNoIEAffYkIALrFZaMu4BiAQiyOE6myARoJI8kteyx/3469FWTTxT3fVNdY/dY/cCeVAFFtRoGQwJSi6CBE1QsgA5XFZogpIFyOGyQhOULEAOlxWaoGQBcris0CCglwB+ATgEcA/gFsAXuW/W4Q4AXAOQ3P4BuAPwUNuJlgqVBgVx9XheduSztgNBzv+xxDtb689VLWoL6CuAkw0Qo6Juw5QU3wD8rLnpLaDvAI62NDIa6hympPgB4Fgb9AbA75lGRkHdhSkpSq5/tEFl8n4CsD7fjDSnlmBKYZzXPmxbhrzAlXZIHmDRHlSqfW8FHRVVFVNQekBHQ1XHZICOgmqCyQKNjmqGyQSNimqKyQaNhmqOqQEaBdUFUwvUG9UNUxPUC9UVUxvUGtUd0wLUCjUEphWoNmoYTEtQLdRQmNagbNRwmB6gLNSQmF6gvahhMT1BW1FDY3qD1qLK+fKePPSrl94FZkmy9yipupdlI6czjYV4ORgBtLRS525cCMwIQ34VqaRSN6GGwYwG2lKpoTAjgk6ojwDm5ks5T+bVi2ivqaPMoetDP0F7H/XL62vn0RzyM/C1mFOoUKhRhnwrZjjUCKAlmPnBvnBOLcGchnR+9dyBWoM5/YKv5ZrCe8s5zWvI98D0XMtRm4niAcoAYcRQwbUGZUIwY9FwLUE1ADRiduFagWomrhm7GtcC1CJhizaKcLVBLRO1bGsrriaoR4Iebf6HqwXqmZhn293/AtlU+q4JVSwDqqxSsSs0AuZ0k136wgR1SUBhvaDoab7tJBZoREyXSmWARsY0R+0FHQHTFLUHdCRMM9RW0BExTVBbQHMDAvICc26RQQbNTVzIoLnNEBk0N8Iig0q41a3a5Gfaf2t3j+n6fqdzsdtWbTrp7EnUlo9Ne5K6ThoJSnZN0AQlC5DDZYUmKFmAHC4rNEHJAuRwWaEJShYgh8sKJYN+A6+yQmSPqqjtAAAAAElFTkSuQmCC"),onClick:t[0]||(t[0]=e=>d(h).loading=!1)},null,8,["name"])]),u("div",Ue,[(l(!0),o(c,null,v(d(h).list,((e,a)=>{var t,n;return l(),o("div",{key:`${e.customerId}_${a}`,class:m({item:!0,active:d(h).select.certNo===(null==(t=e.cert[0])?void 0:t.certNo)}),onClick:a=>(e=>{h.select.name=e.cert[0].certName,h.select.certNo=e.cert[0].certNo})(e)},[u("span",je,s(e.cert[0].certName),1),u("span",null,s(d(_)(e.cert[0].certNo)),1),p(i(I,{class:"check-icon",name:d("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAn9JREFUSEvtlktIVFEcxn/XXpM6Mz5zVBzR8oFUVARRUljhItKNhZC0qVYhZjMMFIG0aFUUtijKB0GEBL02WmZqRjlbFyWSYQ+EynKyh5baNHPi3hsNtzuj89Bp44G7Oec732/u//y/c0cSQgj+w5AWwNGqevRK/eMLXD0AAx2wu47ogD8OwcVyGHmuFnSJIQrgwR5o2Avfx3ynuL5insFPmuB6NXjcPmjhDqhunSew1wO3HNB9Xtur+SVQ0wZL4+YBPPkVmvdBf7sWmrcVau7Bsnhlfm6ba/SV2kTvB7TQlcVwpB0Mxr/zkvj8VigtvqYMjKnhx/jFY2jYAxMurUfuZqi9DwaTZl4SdQWCD4NgssChFpAPP9ThvAIth8HzU7szZxPUdsBys85REsetgrFhdUGKUcKtPDGLZsfLTXTnGHSe02uzN8LRTohN8OsjiSGnoH4nuKd8goLt6tub0wPDp8ahuQqetek11g1g64LYxID71ebquw2NlSC8PqExDQ5eg6JS/WbXG7WJ3vXr17LWga0b4pJmrJivq+XM3bBpxXLpd52A8pMQs1hdG+qFyxUwPqo3zlwL9m6IT5n1mLRxummDrn9CL1vkbYP9jSpUvol+TeuNM1aD/WHQydCCvV5oqkQpfSgjvUiFmtKC3qW/QNyTUF8KL53BmVgKwd4DZktw+j8q/zfXxCc4U4yS75nGinxwyNCMkKBKcgP+53K9htNb4NuIf9PUVeB4BAmZIUNnBsurw31wtgSmx7XmKbkqNDErLOjsYFkx8AAulPm+qck5KjTJGjY0OLCsetoKd0+p+ay6BMnZEUGDB0eM0RvM7fc4hB+4AA6hWJFJfwMaXAhFHVsobQAAAABJRU5ErkJggg==")},null,8,["name"]),[[f,d(h).select.certNo===(null==(n=e.cert[0])?void 0:n.certNo)]])],10,Be)})),128))]),i(P,{type:"primary",round:"",block:"",class:"linear-btn",onClick:g},{default:r((()=>[_e])),_:1})])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-76e8b8d7"]]);const He={class:"guarantee-list"},Ye=(e=>(V("data-v-3ba04bf6"),e=e(),L(),e))((()=>u("span",null,"保障计划",-1))),Qe={key:0,class:"picture-payment-content"},Ge=["onClick"],Ke=["src"],We=["src"],ze={key:1,class:"plan-list"},Xe=["onClick"],Je={key:2,class:"feerate-view"},Ze={class:"guarantee-detail"},$e={key:0},ea={class:"extinfo-info-list"},aa={class:"content"};var ta=j(e({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1},paymentFrequency:{type:String,default:""},premiumInfo:{type:Object,default:()=>{}}},emits:["update-active-plan"],setup(e,{emit:a}){var f;const V=e,L=I(null==(f=V.dataSource)?void 0:f.planList),k=I(V.activePlanCode),D=I();t([()=>V.dataSource,()=>V.activePlanCode],(()=>{var e,a;V.isMultiplePlan&&(L.value=null==(e=V.dataSource)?void 0:e.planList,k.value=V.activePlanCode,D.value=null==(a=V.dataSource)?void 0:a.planList.findIndex((e=>e.planCode===k.value)))}),{immediate:!0});const S=I([]),w=I([]),A=I(),b=h((()=>V.isMultiplePlan?V.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));t([()=>V.dataSource,()=>V.activePlanCode,()=>V.paymentFrequency,()=>k.value],(()=>{var e,a,t,n,l;if(V.isMultiplePlan){if(L.value&&L.value.length>0){let e=0;const a=L.value.findIndex((e=>e.planCode===k.value));a>-1&&(e=a),S.value=L.value[e].guaranteeItemVOS,w.value=L.value[e].extInfoVOList;const t=L.value[e].productPremiumVOList.find((e=>e.paymentFrequency===V.paymentFrequency));A.value=t||(null==(l=L.value[e])?void 0:l.productPremiumVOList[0])}}else{S.value=null==(e=V.dataSource)?void 0:e.planInsureVO.guaranteeItemVOS,w.value=null==(a=V.dataSource)?void 0:a.planInsureVO.extInfoVOList;const l=null==(t=V.dataSource)?void 0:t.planInsureVO.productPremiumVOList.find((e=>e.paymentFrequency===V.paymentFrequency));A.value=l||(null==(n=V.dataSource)?void 0:n.planInsureVO.productPremiumVOList[0])}}),{immediate:!0,deep:!0});const N=h((()=>{var e;return(null==(e=V.dataSource)?void 0:e.rateUri)||""})),F=h((()=>!!(A.value&&A.value.paymentFrequencyValue&&A.value.premiumUnit&&N))),[x,q]=g(!1),T=h((()=>{var e;return!(!S.value||!(null==(e=S.value)?void 0:e.length))&&(S.value.length>V.count&&(!!V.isShowClose||!x.value))})),R=()=>{q()},E=h((()=>{var e;return S.value&&(null==(e=S.value)?void 0:e.length)?S.value.length<=V.count||x.value?S.value:S.value.slice(0,V.count):[]})),U=e=>{k.value=e},B=I(!1),j=()=>{B.value=!0},_=()=>{he({fileType:"pdf",fileUri:N.value})},Y=e=>{k.value=L.value[e.name].planCode};return(a,t)=>{var f,I;const h=n("ProCell"),g=n("ProTab"),V=n("ProPopup"),q=O("dompurify-html");return l(),o(c,null,[u("div",He,[u("div",{class:"header"},[Ye,u("span",{onClick:j},"查看详情")]),e.isMultiplePlan?(l(),o(c,{key:0},[d(b).length>0?(l(),o("div",Qe,[(l(!0),o(c,null,v(d(b),(e=>(l(),o("div",{key:e.planCode,class:m("picture-payment-item"),onClick:a=>U(e.planCode)},[k.value==e.planCode?(l(),o("img",{key:0,src:e.selectedPic},null,8,Ke)):(l(),o("img",{key:1,src:e.unSelectedPic},null,8,We))],8,Ge)))),128))])):(l(),o("div",ze,[(l(!0),o(c,null,v(L.value,((e,a)=>(l(),o("div",{key:`${e.planCode}_${a}`,class:m("plan-list-item "+(e.planCode===k.value?"plan-list-item-active":"")),onClick:a=>U(e.planCode)},[u("span",null,s(e.planName),1)],10,Xe)))),128))]))],64)):P("",!0),(l(!0),o(c,null,v(d(E),((e,a)=>(l(),C(h,{key:a,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),d(T)?(l(),o("div",{key:1,class:"show-more",onClick:R},[y(s(d(x)?"收起":"查看更多")+" ",1),i(M,{name:"down",class:m(["icon",{showMore:d(x)}])},null,8,["class"])])):P("",!0),d(F)?(l(),o("div",Je,[u("span",null,s(`${(null==(f=A.value)?void 0:f.paymentFrequencyValue)||""}${(null==(I=A.value)?void 0:I.premiumUnit)||""}`),1),d(N)?(l(),o("span",{key:0,onClick:_},"查看保费")):P("",!0)])):P("",!0)]),i(H),i(V,{show:B.value,"onUpdate:show":t[1]||(t[1]=e=>B.value=e),title:"保障详情",class:"guarantee-popup"},{default:r((()=>[u("div",Ze,[w.value&&w.value.length>0?(l(),o("div",$e,[u("div",ea,[(l(!0),o(c,null,v(w.value,((e,a)=>(l(),C(h,{key:a,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),i(H)])):P("",!0),e.isMultiplePlan?(l(),C(g,{key:1,active:D.value,"onUpdate:active":t[0]||(t[0]=e=>D.value=e),list:L.value.map(((e,a)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:Y},null,8,["active","list"])):P("",!0),(l(!0),o(c,null,v(S.value,((e,a)=>(l(),o("div",{key:a,class:"guarantee-item"},[i(h,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),p(u("div",aa,null,512),[[q,e.content]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-3ba04bf6"]]);const na={class:"com-custom-card"},la={class:"title"};var oa=j(e({props:{title:{type:String,required:!0}},setup:e=>(a,t)=>(l(),o("div",na,[u("div",la,s(e.title),1),u("div",null,[k(a.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-059c21ee"]]);const ia={class:"question"},ra={class:"title"};var ua=j(e({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup:e=>(a,t)=>{const o=n("ProSvg"),d=n("van-collapse-item");return l(),C(d,{name:e.name,class:"com-question-item"},{title:r((()=>[u("div",ia,[i(o,{name:"question"}),u("div",ra,s(e.question),1)])])),default:r((()=>[y(" "+s(e.answer),1)])),_:1},8,["name"])}}),[["__scopeId","data-v-0d7ea124"]]);const sa={class:"com-question"};var da=j(e({props:{list:{type:Array,default:()=>[]}},setup(e){const a=e,[t,u]=g(!1),p=I([]),f=()=>{u()},O=h((()=>a.list.length<=4||t.value?a.list:a.list.slice(0,4)));return(a,u)=>{const I=n("van-collapse");return l(),o("div",sa,[i(I,{modelValue:p.value,"onUpdate:modelValue":u[0]||(u[0]=e=>p.value=e)},{default:r((()=>[(l(!0),o(c,null,v(d(O),((e,a)=>(l(),C(ua,{key:a,name:a.toString(),question:e.title,answer:e.desc},null,8,["name","question","answer"])))),128))])),_:1},8,["modelValue"]),e.list.length>4?(l(),o("div",{key:0,class:"show-more",onClick:f},[y(s(d(t)?"收起":"展开")+" ",1),i(M,{name:"down",class:m(["icon",{showMore:d(t)}])},null,8,["class"])])):P("",!0)])}}}),[["__scopeId","data-v-1b7e97e9"]]);const ca={class:"spec"},va={key:1,class:"spec"},ma=["src"];var pa=j(e({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:a}){const t=e,s=I(),m=I([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),p=h((()=>{var e,a,n,l;return(null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.spec)&&(null==(l=null==(n=t.detail)?void 0:n.tenantProductInsureVO)?void 0:l.spec.length)>0})),f=h((()=>{var e,a,n,l,o,i,r,u,s,d,c,v,m,p;const f=null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO.settlementProcessType;return!!(f===ne.WORD&&(null==(o=null==(l=null==(n=t.detail)?void 0:n.tenantProductInsureVO)?void 0:l.settlementProcessVO)?void 0:o.settlementProcessList)&&(null==(u=null==(r=null==(i=t.detail)?void 0:i.tenantProductInsureVO)?void 0:r.settlementProcessVO)?void 0:u.settlementProcessList.length)>0||f===ne.IMAGE&&(null==(c=null==(d=null==(s=t.detail)?void 0:s.tenantProductInsureVO)?void 0:d.settlementProcessVO)?void 0:c.settlementProcessPicList)&&(null==(p=null==(m=null==(v=t.detail)?void 0:v.tenantProductInsureVO)?void 0:m.settlementProcessVO)?void 0:p.settlementProcessPicList.length)>0)})),y=h((()=>{var e,a,n,l;return(null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.questionList)&&(null==(l=null==(n=t.detail)?void 0:n.tenantProductInsureVO)?void 0:l.questionList.length)>0})),g=h((()=>{let e=[...m.value];return p.value||(e=e.filter((e=>"tab1"!==e.slotName))),f.value||y.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>{var e;return null==(e=s.value)?void 0:e.handleClickTab}}),(e,a)=>{const m=n("van-image"),I=n("ProSvg");return l(),C(Y,{ref_key:"scrollRef",ref:s,class:"tabs",list:d(g),sticky:"",scrollspy:""},D({tab3:r((()=>[k(e.$slots,"form",{},void 0,!0)])),_:2},[d(p)?{name:"tab1",fn:r((()=>{var e,a;return[u("div",ca,[(l(!0),o(c,null,v((null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.spec)||[],((e,a)=>(l(),C(S,{key:a},{fallback:r((()=>[i(I,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:r((()=>[(l(),C(m,{key:a,class:"detail-img",width:"100%","lazy-load":"",src:e},null,8,["src"]))])),_:2},1024)))),128)),i(H)])]}))}:void 0,d(f)||d(y)?{name:"tab2",fn:r((()=>{var e,a,n,u,s;return[d(f)?(l(),o(c,{key:0},[(null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO.settlementProcessType)===d(ne).WORD?(l(),C(oa,{key:0,title:"理赔流程"},{default:r((()=>{var e,a,n;return[i(we,{list:null==(n=null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:n.settlementProcessList},null,8,["list"])]})),_:1})):(l(),o("div",va,[(l(!0),o(c,null,v((null==(s=null==(u=null==(n=t.detail)?void 0:n.tenantProductInsureVO)?void 0:u.settlementProcessVO)?void 0:s.settlementProcessPicList)||[],((e,a)=>(l(),o("img",{key:a,src:e,class:"detail-img"},null,8,ma)))),128))])),i(H)],64)):P("",!0),d(y)?(l(),o(c,{key:1},[i(oa,{title:"常见问题"},{default:r((()=>{var e,a;return[i(da,{list:null==(a=null==(e=t.detail)?void 0:e.tenantProductInsureVO)?void 0:a.questionList},null,8,["list"])]})),_:1}),i(H)],64)):P("",!0)]}))}:void 0]),1032,["list"])}}}),[["__scopeId","data-v-db64450e"]]);const fa={key:0,class:"page-waiting"},ya=["src"],Ia=(e=>(V("data-v-ead4d7ae"),e=e(),L(),e))((()=>u("div",{class:"tips"},[u("p",null,"支付成功，承保中...")],-1)));var ha=j(e({props:{isShow:{type:Boolean,default:()=>{}}},setup(e){const a=e;return t((()=>a.isShow),(e=>{document.body.style.overflow=e?"hidden":"inherit"})),(e,t)=>a.isShow?(l(),o("div",fa,[u("img",{class:"loading",src:d(Ae)},null,8,ya),Ia])):P("",!0)}}),[["__scopeId","data-v-ead4d7ae"]]);const ga={class:"list"},Oa=u("div",{class:"tip"},[u("span",null,[u("span",{class:"important-text"},"重要"),y(" 请确认被保险人是否存在下列问题，请如实告知，否则将对您的理赔权益或合同效力产生影响 ")])],-1),Pa={class:"title"},Ca={class:"item"},Va={class:"footer"},La=y("不符合"),ka=y("符合，立即投保"),Da=e({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth","onCloseHealthByMask"],setup(e,{emit:a}){const o=e,c=De(),v=I(o.show),m=I(o.activeIndex),p=h((()=>{var e;return null==(e=o.contentList[m.value])?void 0:e.attachmentUri})),f=h((()=>{var e;return null==(e=o.contentList[m.value])?void 0:e.attachmentType})),y=I(!0),g=e=>{"allFalse"===e&&(y.value=!1,a("update:show",!1)),a("onConfirmHealth",e)};return t((()=>o),(()=>{v.value=o.show,m.value=o.activeIndex}),{deep:!0,immediate:!0}),(t,o)=>{const m=n("ProFilePreview"),I=n("VanButton"),h=n("van-config-provider"),O=n("ProPopup");return l(),C(O,{show:v.value,"onUpdate:show":o[2]||(o[2]=e=>v.value=e),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:o[3]||(o[3]=e=>{y.value&&a("onCloseHealthByMask")})},{default:r((()=>[i(h,{"theme-vars":d(c),class:"custom-provider"},{default:r((()=>[u("div",ga,[Oa,u("div",Pa,s(e.contentList[0].attachmentName),1),u("div",Ca,[(l(),C(m,{key:d(p),content:d(p),type:d(f)},null,8,["content","type"]))])]),u("div",Va,[i(I,{block:"",round:"",class:"left",onClick:o[0]||(o[0]=e=>g("N"))},{default:r((()=>[La])),_:1}),i(I,{type:"primary",plain:"",block:"",round:"",onClick:o[1]||(o[1]=e=>g("allFalse"))},{default:r((()=>[ka])),_:1})])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}}),Sa=(e,a="YYYY-MM-DD")=>w(e).format(a),wa=(e,a=0,t="day",n="YYYY-MM-DD")=>w(e).add(a,t).format(n),Aa=(e,a=0,t="day",n="YYYY-MM-DD")=>w(e).subtract(a,t).format(n);const ba=e=>(V("data-v-a31a6cd0"),e=e(),L(),e),Na={class:"com-period-cell"},Fa={key:0,class:"period-custom-cell period-check-btn-cell"},xa=ba((()=>u("div",{class:"period-cell-label"},"保障期间",-1))),qa={class:"period-cell-content"},Ta=ba((()=>u("div",{class:"period-cell-label"},"生效日期",-1))),Ra={class:"period-cell-content period-custom-cell-content"},Ea={key:2,class:"period-custom-cell period-common-cell"},Ua=ba((()=>u("div",{class:"period-cell-label"},"保障期限",-1))),Ba={class:"period-cell-content"},ja=ba((()=>u("div",{class:"picker-custom-title"},"选择年月",-1))),_a=y("确 定");var Ma=j(e({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:v,emit:m}){const p=e;I({});const f=(e,a)=>"year"===e?`${a}年`:"month"===e?`${a}月`:"day"===e?`${a}日`:a,y=I(new Date),O=Ne("RISK_INSURANCE_PERIOD"),C=a({formInfo:p.formInfo});t((()=>C.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(y.value=new Date(e))}));const V=I(),L=I([]);t([()=>p.insureDetail,()=>C.formInfo.activePlanCode],(()=>{var e;if(C.formInfo.insuranceStartDate="",C.formInfo.insuranceEndDate="",C.formInfo.commencementTime="",p.insureDetail)if(p.insureDetail.productRelationPlanVOList&&p.insureDetail.productRelationPlanVOList.length>0){let a=0;const t=p.insureDetail.productRelationPlanVOList.findIndex((e=>e.planCode===C.formInfo.activePlanCode));t>-1&&(a=t);const n=((null==(e=p.insureDetail.productRelationPlanVOList[a])?void 0:e.productRiskVoList[0].riskDetailVOList)||[]).find((e=>1===e.riskType));n&&(V.value=n)}else{const e=(p.insureDetail.productRiskVoList[0].riskDetailVOList||[]).find((e=>1===e.riskType));e&&(V.value=e)}}),{deep:!0,immediate:!0}),t([()=>V.value,()=>O.value],(()=>{L.value=[],Array.isArray(O.value)&&O.value.length>1&&V.value&&(L.value=(V.value.riskInsureLimitVO.insurancePeriodValueList||[]).map((e=>{const a=O.value.find((a=>a.value===e));return a?{label:a.name,value:a.value}:null})).filter((e=>!!e))),L.value.length>0?L.value.findIndex((e=>e.value===C.formInfo.insurancePeriodValue))<0&&(C.formInfo.insurancePeriodValue=L.value[0].value):C.formInfo.insurancePeriodValue=ce.YEAR_1}),{deep:!0,immediate:!0});const k=h((()=>{var e,a;return(null==(e=V.value)?void 0:e.insuranceStartType)?String(null==(a=V.value)?void 0:a.insuranceStartType):le.CURRENT_DAY})),D=h((()=>{var e,a;return(null==(e=V.value)?void 0:e.insuranceEndType)?String(null==(a=V.value)?void 0:a.insuranceEndType):oe.CURRENT_DAY})),[S,w]=g(!1),b=()=>{w(!0)},N=new Date(wa(new Date,1,"day")),F=h((()=>{var e;if(k.value===le.CUSTOM_DAY){const a=null==(e=V.value)?void 0:e.riskInsureLimitVO.maxInsuranceDay;if(!a)return new Date;const t=wa(new Date,Number(a),"day");return new Date(t)}return new Date})),x=e=>{C.formInfo.insuranceStartDate=`${Sa(e)} 00:00:00`,w(!1)},q=()=>{w(!1)};return t([()=>k.value,()=>C.formInfo.insurancePeriodValue,()=>C.formInfo.insuranceStartDate],(()=>{if(!C.formInfo.insurancePeriodValue)return;const[e,a]=C.formInfo.insurancePeriodValue.split("_");if(C.formInfo.insuranceStartDate||(k.value===le.CUSTOM_DAY||k.value===le.NEXT_DAY?C.formInfo.insuranceStartDate=`${wa(new Date,1,"day")} 00:00:00`:C.formInfo.insuranceStartDate=`${Sa(new Date)} 00:00:00`),"to"!==e){const t=`${Aa(C.formInfo.insuranceStartDate,1,"day")} 00:00:00`;D.value===oe.CURRENT_DAY?C.formInfo.insuranceEndDate=`${wa(t,Number(a),e)} 23:59:59`:C.formInfo.insuranceEndDate=`${wa(C.formInfo.insuranceStartDate,Number(a),e)} 00:00:00`}else{let t=C.formInfo.tenantOrderInsuredList[0].birthday;C.formInfo.tenantOrderInsuredList[0].certType===Q.CERT&&C.formInfo.tenantOrderInsuredList[0].certNo&&G(C.formInfo.tenantOrderInsuredList[0].certNo)&&(t=K(C.formInfo.tenantOrderInsuredList[0].certNo));const n=`${Aa(t,1,"day")} 00:00:00`;"single"===a&&(C.formInfo.insuranceEndDate="9999-99-99 23:59:59"),D.value===oe.CURRENT_DAY?C.formInfo.insuranceEndDate=`${wa(n,Number(a),e)} 23:59:59`:C.formInfo.insuranceEndDate=`${wa(t,Number(a),e)} 00:00:00`}}),{immediate:!0}),v({}),(e,a)=>{const t=n("ProRadioButton"),v=n("ProSvg"),m=n("van-config-provider"),p=n("VanButton"),I=n("van-datetime-picker"),h=n("ProPopup");return l(),o(c,null,[i(m,{"theme-vars":d(Se)},{default:r((()=>[u("div",Na,[L.value.length>1?(l(),o("div",Fa,[xa,u("div",qa,[i(t,{modelValue:d(C).formInfo.insurancePeriodValue,"onUpdate:modelValue":a[0]||(a[0]=e=>d(C).formInfo.insurancePeriodValue=e),options:L.value},null,8,["modelValue","options"])])])):P("",!0),d(k)===d(le).CUSTOM_DAY?(l(),o("div",{key:1,class:"period-custom-cell period-common-cell",onClick:b},[Ta,u("div",Ra,[u("span",null,s(d(C).formInfo.insuranceStartDate?d(Sa)(d(C).formInfo.insuranceStartDate,"YYYY.MM.DD HH:mm:ss"):""),1),i(v,{class:"custom--arrow-right",name:"arrow-right"})])])):P("",!0),d(k)!==d(le).CUSTOM_DAY?(l(),o("div",Ea,[Ua,u("div",Ba,s(d(C).formInfo.insuranceStartDate?d(Sa)(d(C).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+s(d(C).formInfo.insuranceEndDate?d(Sa)(d(C).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])):P("",!0)])])),_:1},8,["theme-vars"]),i(h,{show:d(S),"onUpdate:show":a[3]||(a[3]=e=>A(S)?S.value=e:null),height:"340",closeable:!0},{default:r((()=>[i(I,{modelValue:y.value,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value=e),type:"date",title:"选择年月","min-date":d(N),"max-date":d(F),formatter:f,"visible-item-count":5,onConfirm:x,onCancel:q},{cancel:r((()=>[])),title:r((()=>[ja])),confirm:r((()=>[i(p,{type:"primary",round:"",block:"",class:"linear-btn custom-picker-btn",onClick:a[1]||(a[1]=e=>S.value=!1)},{default:r((()=>[_a])),_:1})])),_:1},8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-a31a6cd0"]]);const Ha=e=>(V("data-v-79203e3b"),e=e(),L(),e),Ya={class:"com-payment-type"},Qa={class:"title"},Ga={key:0,class:"picture-payment-content"},Ka=["onClick"],Wa=["src"],za=["src"],Xa={key:1,class:"custom-cell check-btn-cell"},Ja=Ha((()=>u("div",{class:"cell-label"},"保障方案",-1))),Za={class:"cell-content"},$a={key:0,class:"picture-payment-content"},et=["onClick"],at=["src"],tt=["src"],nt={key:1,class:"default-payment-content"},lt=[Ha((()=>u("div",{class:"pay-method"},[u("span",{class:"method"},s("按月交费")),u("span",{class:"acount"},s("共12期"))],-1)))],ot=[Ha((()=>u("div",null,[u("div",{class:"tip"},[u("span",null,s("比按月支付最高省16%"))]),u("div",{class:"triangle"}),u("div",{class:"pay-method"},[u("span",{class:"method"},s("一次交清")),u("span",{class:"acount"},s("比月交保费省最高2014元"))])],-1)))],it={key:2,class:"custom-cell check-btn-cell"},rt=Ha((()=>u("div",{class:"cell-label"},"交费方式",-1))),ut={class:"cell-content"},st={class:"custom-cell common-cell"},dt=Ha((()=>u("div",{class:"cell-label"},"实付保费",-1))),ct={key:0,class:"cell-content actual-premium"},vt={class:"cell-content actual-premium"},mt={key:0,class:"actual-premium actual-premium-month-tip"},pt={key:0,class:"feerate-explain"},ft={class:"content"},yt=Ha((()=>u("div",{class:"triangle-top"},null,-1)));var It=j(e({props:{showConfig:{type:Object,default:()=>{}},formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}},configDetail:{type:Object,default:()=>{}},isMultiplePlan:{type:Boolean,default:!1},premiumInfo:{type:Object,default:()=>{}}},emits:["update-active-plan"],setup(e,{expose:p,emit:f}){const y=e;I({});const g=a({formInfo:y.formInfo}),O=I([]),V=I(),L=I(),k=h((()=>{var e;return"1"===String(null==(e=V.value)?void 0:e.paymentFrequencyFlag)}));h((()=>{var e;return null==(e=L.value)?void 0:e.productPremiumVOList.find((e=>e.paymentFrequency===g.formInfo.paymentFrequency))}));const D=h((()=>y.premiumInfo.premiumLoadingText?y.premiumInfo.premiumLoadingText:`${y.premiumInfo.premium||""}${y.premiumInfo.unit||""}`)),S=h((()=>{if(L){const{premiumExplain:e,premiumExplainViewName:a,premiumExplainUri:t}=L.value||{};return{premiumExplain:e,premiumExplainUri:t,premiumExplainViewName:a}}return null})),w=h((()=>S.value&&S.value.premiumExplain&&S.value.premiumExplainViewName));t((()=>y.configDetail),(()=>{var e;y.isMultiplePlan&&y.configDetail&&(O.value=null==(e=y.configDetail.tenantProductInsureVO)?void 0:e.planList)}),{immediate:!0,deep:!0}),t([()=>y.configDetail,()=>y.isMultiplePlan,()=>g.formInfo.activePlanCode],(()=>{if(y.configDetail)if(y.isMultiplePlan){let e=0;const a=y.configDetail.tenantProductInsureVO.planList.findIndex((e=>e.planCode===g.formInfo.activePlanCode));a>-1&&(e=a),V.value=y.configDetail.tenantProductInsureVO.planList[e].productPlanInsureConditionVO,L.value=y.configDetail.tenantProductInsureVO.planList[e]}else V.value=y.configDetail.tenantProductInsureVO.planInsureVO.productPlanInsureConditionVO,L.value=y.configDetail.tenantProductInsureVO.planInsureVO}),{deep:!0,immediate:!0});const A=h((()=>{var e;if(V.value&&V.value.paymentFrequency){return((null==(e=V.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1})),N=I(!1);t((()=>V.value),(()=>{var e;if(V.value){const a=(null==(e=V.value.paymentFrequency)?void 0:e.split(","))||[];if(1===a.length)return g.formInfo.paymentFrequency=V.value.paymentFrequency,void(N.value=!1);if(2===a.length&&a.filter((e=>![ie.SINGLE,ie.MONTH].includes(e))).length<1)return void(N.value=!0);N.value=!1}}),{immediate:!0,deep:!0});const F=h((()=>{var e;return V.value?null==(e=V.value.paymentFrequencyList||[])?void 0:e.map((e=>({...e,paymentFrequency:e.skinValue}))):[]})),x=h((()=>F.value.length>0)),q=h((()=>y.isMultiplePlan?y.configDetail.tenantProductInsureVO.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[])),T=h((()=>{var e,a;if(V.value){const t=(null==(e=V.value.paymentFrequency)?void 0:e.split(","))||[];return 1===t.length&&(g.formInfo.paymentFrequency=t[0]),null==(a=t||[])?void 0:a.map((e=>({label:re[e],value:e})))}return[]})),R=e=>{g.formInfo.paymentFrequency=e},E=e=>{g.formInfo.activePlanCode=e},U=()=>{var e,a;(null==(e=S.value)?void 0:e.premiumExplainUri)?he({fileType:"pdf",fileUri:null==(a=S.value)?void 0:a.premiumExplainUri}):b("无费率文件！")};return p({}),(a,t)=>{const p=n("ProRadioButton"),f=n("templat"),I=n("ProDivider"),h=n("van-config-provider");return l(),C(h,{"theme-vars":d(Se)},{default:r((()=>[u("div",Ya,[u("div",Qa,s(d(A)?"交费方式":"保障计划"),1),e.isMultiplePlan?(l(),o(c,{key:0},[d(q).length>0?(l(),o("div",Ga,[(l(!0),o(c,null,v(d(q),(e=>(l(),o("div",{key:e.planCode,class:m("picture-payment-item"),onClick:a=>E(e.planCode)},[d(g).formInfo.activePlanCode==e.planCode?(l(),o("img",{key:0,src:e.selectedPic},null,8,Wa)):(l(),o("img",{key:1,src:e.unSelectedPic},null,8,za))],8,Ka)))),128))])):(l(),o("div",Xa,[Ja,u("div",Za,[i(p,{modelValue:d(g).formInfo.activePlanCode,"onUpdate:modelValue":t[0]||(t[0]=e=>d(g).formInfo.activePlanCode=e),options:O.value,prop:{value:"planCode",label:"planName"},onChange:E},null,8,["modelValue","options"])])]))],64)):P("",!0),d(k)?(l(),C(f,{key:1},{default:r((()=>[d(x)&&d(F).length>1?(l(),o("div",$a,[(l(!0),o(c,null,v(d(F),(e=>(l(),o("div",{key:e.paymentFrequency,class:m("picture-payment-item"),onClick:a=>R(e.paymentFrequency)},[d(g).formInfo.paymentFrequency==e.paymentFrequency?(l(),o("img",{key:0,src:e.selectedPic},null,8,at)):(l(),o("img",{key:1,src:e.unSelectedPic},null,8,tt))],8,et)))),128))])):N.value?(l(),o("div",nt,[u("div",{class:m("com-payment-type-item "+(d(g).formInfo.paymentFrequency==d(ie).MONTH?"active":"")),onClick:t[1]||(t[1]=e=>R(d(ie).MONTH))},lt,2),u("div",{class:m("com-payment-type-item "+(d(g).formInfo.paymentFrequency==d(ie).SINGLE?"active":"")),onClick:t[2]||(t[2]=e=>R(d(ie).SINGLE))},ot,2)])):d(T).length>1?(l(),o("div",it,[rt,u("div",ut,[i(p,{modelValue:d(g).formInfo.paymentFrequency,"onUpdate:modelValue":t[3]||(t[3]=e=>d(g).formInfo.paymentFrequency=e),options:d(T)},null,8,["modelValue","options"])])])):P("",!0)])),_:1})):P("",!0),i(Ma,{"form-info":d(g).formInfo,"insure-detail":e.insureDetail,"config-detail":e.configDetail},null,8,["form-info","insure-detail","config-detail"]),d(D)&&d(w)?(l(),o(c,{key:2},[u("div",st,[dt,y.premiumInfo.premiumLoadingText?(l(),o("div",ct,s(d(D)),1)):(l(),o(c,{key:1},[u("div",vt,s(d(D))+s("5"===d(g).formInfo.paymentFrequency?"/月":""),1),"5"===d(g).formInfo.paymentFrequency?(l(),o("div",mt," 共12期 ")):P("",!0)],64))]),d(w)?(l(),o("div",pt,[u("div",ft,[yt,u("div",null,[u("span",null,s(d(S).premiumExplain||""),1),u("span",{class:"file-name",onClick:U},"《"+s(d(S).premiumExplainViewName||"")+"》",1)])])])):P("",!0)],64)):P("",!0)]),i(I)])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-79203e3b"]]);const ht=e=>(V("data-v-32f7a42d"),e=e(),L(),e),gt={class:"page-internet-product-detail"},Ot={class:"info"},Pt={class:"custom-page-form"},Ct={key:2,class:"footer-area"},Vt={class:"price"},Lt={key:0},kt=y(s("立即投保")),Dt=ht((()=>u("div",{id:"xinaoDialog"},null,-1)));var St=j(e({setup(e){var a,v;const m=De();N();const p=F(),{productCode:f="BWYL2021",tenantId:y,phoneNo:g,agentCode:O="",agencyCode:V,saleChannelId:L,paymentMethod:k,certNo:S,templateId:w,pageCode:A,from:j,extraInfo:_,insurerCode:M,orderNo:H}=p.query;let Y={};try{Y=JSON.parse(decodeURIComponent(_))}catch(Oa){}const{openId:G}=Y,K=I(),ne=I(),le=I(),oe=I(!1),re=I(),he=I(),Se=I(),we=I(""),Ae=I(""),Ne=I(!1),Re=I(!1),Ee=I(0),Ue=I(!1);I(!1);const Be=I(!1),je=I({}),_e=I({}),He=I(!1),Ye=I(!1);let Qe="";const Ge=I(!0),Ke="jumpToPage",We=I({tenantId:y,agencyId:V,agentCode:O,orderCategory:1,saleChannelId:L,venderCode:M,productCode:f,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:ie.SINGLE,insurancePeriodValue:ce.YEAR_1,commencementTime:"",tenantOrderHolder:{socialFlag:ue.HAS,certType:Q.CERT,extInfo:{hasSocialInsurance:ue.HAS}},tenantOrderInsuredList:[{dontFetchDefaultInfo:!1,socialFlag:ue.HAS,relationToHolder:se.SELF,certType:Q.CERT,extInfo:{occupationCodeList:[],hasSocialInsurance:ue.HAS},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:y,productCode:null==(a=re.value)?void 0:a.productCode,productName:null==(v=re.value)?void 0:v.productName,premium:Se.value||0}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",successJumpUrl:"",pageCode:"productInfo",extraInfo:Y,templateId:null==Y?void 0:Y.templateId},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),ze=h((()=>{var e,a,t,n,l,o;return!!re.value&&!!((null==(a=null==(e=re.value)?void 0:e.tenantProductInsureVO)?void 0:a.planList)&&Array.isArray(null==(n=null==(t=re.value)?void 0:t.tenantProductInsureVO)?void 0:n.planList)&&(null==(o=null==(l=re.value)?void 0:l.tenantProductInsureVO)?void 0:o.planList.length)>0)}));G&&Z({openId:G},(e=>{_e.value=e}));const Xe=h((()=>{if(_e.value){const e=[];return Object.keys(_e.value).forEach((a=>{e.push(..._e.value[a])})),e}return[]})),Je=h((()=>Xe.value.length>0)),Ze=h((()=>{var e,a,t;let n={};if(ze.value?We.value.activePlanCode&&(n=(null==(e=he.value)?void 0:e.planFactor[We.value.activePlanCode])||{}):(null==(a=he.value)?void 0:a.productFactor)&&(n=null==(t=he.value)?void 0:t.productFactor),Je.value&&n[1]){const e=n[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay));e>-1&&(n[1][e].isDisplay=2)}return n})),$e=h((()=>{if(Ze.value[1]){if(Ze.value[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay))>-1)return!0}return!1}));t((()=>ze.value),(()=>{var e,a;ze.value&&(We.value.activePlanCode=null==(a=null==(e=re.value)?void 0:e.tenantProductInsureVO)?void 0:a.planList[0].planCode)}),{immediate:!0});const ea=h((()=>{var e,a,t;return ze.value?(null==(a=null==(e=he.value)?void 0:e.productRelationPlanVOList.find((e=>e.planCode===We.value.activePlanCode)))?void 0:a.productRiskVoList)||[]:(null==(t=he.value)?void 0:t.productRiskVoList)||[]})),aa=h((()=>{var e;if(!re.value)return{};if(ze.value){const a=null==(e=re.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===We.value.activePlanCode));return a||{}}return re.value.tenantProductInsureVO.planInsureVO})),na=()=>{var e,a;if(aa.value&&(null==(e=aa.value)?void 0:e.productPremiumVOList)){const e=null==(a=aa.value)?void 0:a.productPremiumVOList.find((e=>e.paymentFrequency===We.value.paymentFrequency));e&&(Se.value=e.paymentFrequencyValue?Number(e.paymentFrequencyValue):null,we.value=e.premiumUnit)}};t([()=>aa.value,()=>We.value.activePlanCode,()=>We.value.paymentFrequency],(()=>{setTimeout((()=>{na()}),800)}),{deep:!0,immediate:!0});const la=e=>{We.value.activePlanCode=e},oa=h((()=>{var e,a,t;if((null==(e=he.value)?void 0:e.productQuestionnaireVOList)&&(null==(a=he.value)?void 0:a.productQuestionnaireVOList.length)>0){const e=null==(t=he.value)?void 0:t.productQuestionnaireVOList[0];if(e){const{basicInfo:{questionnaireType:a},questions:t}=e.questionnaireDetailResponseVO||{};return"2"===String(a)?[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:t,attachmentType:"question"}]:[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:t[0].content,attachmentType:ge(String(t[0].textType),t[0].content)}]}}return[]})),ia=I();t([()=>ze.value,()=>We.value.activePlanCode,()=>re.value],(()=>{var e,a;let t=null;if(ze.value&&re.value){const a=null==(e=re.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===(We.value.activePlanCode||"")));a&&(t=null==a?void 0:a.attachmentVOList)}else re.value&&(t=null==(a=re.value)?void 0:a.tenantProductInsureVO.planInsureVO.attachmentVOList);ia.value=t?Object.keys(t).map((e=>(t[e].forEach((e=>{e.attachmentType=ge(String(e.attachmentType),e.attachmentUri)})),{attachmentName:e,attachmentList:t[e]}))):[]}),{immediate:!0});const ra=async(e,a)=>{const t=await xe(e),{code:n,data:l}=t;"10000"===n&&(null==a||a())},ua=()=>{ne.value.handleClickTab()("tab3")},sa=e=>{Object.assign(We.value.tenantOrderHolder,e)},da=e=>{Object.assign(We.value.tenantOrderInsuredList[0],e)},ca=e=>{Ee.value=e,Re.value=!0},va=async()=>{try{Ye.value=!0,await Le(((e={},a={},t={})=>{var n;const l={...t},o={tenantId:y,riskList:(null==(n=l.tenantOrderInsuredList[0])?void 0:n.tenantOrderProductList[0].riskVOList)||[],riskPremium:a,productId:null==e?void 0:e.productBasicInfoVO.id};return l.extInfo.iseeBizNo=Qe,l.productCode=e.productBasicInfoVO.productCode,l.commencementTime=l.insuranceStartDate,l.expiryDate=l.insuranceEndDate,l.tenantOrderInsuredList=l.tenantOrderInsuredList.map((e=>({...e,planCode:We.value.activePlanCode?We.value.activePlanCode:null}))),l.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:Se.value,productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:We.value.activePlanCode?We.value.activePlanCode:null,tenantOrderRiskList:Ce(o)},l})(he.value,je.value,We.value),(async(e,a)=>{a===Ke?(null==e?void 0:e.orderNo)&&await(async e=>{try{const{code:a,data:t}=await ye({orderNo:e,tenantId:y});"10000"===a&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await Le(t,(()=>{Ye.value=!1})))}catch(Oa){Ye.value=!1}})(null==e?void 0:e.orderNo):Ye.value=!1}))}catch(Oa){Ye.value=!1}},ma=async(e,a,t,n=!0)=>{var l,o;try{const i=Pe(t).map((a=>({...a,paymentFrequency:e.paymentFrequency,insurancePeriodValue:e.insurancePeriodValue,coveragePeriod:e.insurancePeriodValue}))),r={tenantId:y,productCode:null==(l=re.value)?void 0:l.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,holder:{personVO:{...e.tenantOrderHolder,socialFlag:e.tenantOrderHolder.extInfo.hasSocialInsurance}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance},productPlanVOList:[{insurerCode:a.productBasicInfoVO.insurerCode,planCode:We.value.activePlanCode?We.value.activePlanCode:null,riskVOList:i}]})))};Ye.value=!0;const{code:u,message:s}=await pe(r);if("10000"===u){Be.value||J(He,"正在保费试算请稍候"),Ae.value="保费试算中...";const{code:e,data:a}=await fe(r);if("10000"===e)if(He.value=!1,Ae.value="",We.value.tenantOrderInsuredList[0].tenantOrderProductList=null==(o=r.insuredVOList[0])?void 0:o.productPlanVOList,Se.value=a.premium,We.value.premium=a.premium,We.value.orderAmount=a.premium,We.value.orderRealAmount=a.premium,n)Ye.value=!1;else{const e={};a.riskPremiumDetailVOList&&a.riskPremiumDetailVOList.length&&a.riskPremiumDetailVOList.forEach((a=>{e[a.riskCode]={premium:a.premium,amount:a.amount}})),je.value=e,ia.value.length>0?(Ge.value=!1,ca(0)):oa.value.length>0?Ne.value=!0:await va()}else Ye.value=!1,Ae.value=""}else Ye.value=!1,b(s)}catch(Oa){Ae.value="",He.value=!1,Ye.value=!1}},fa=async()=>{var e;try{Ne.value=!1,Re.value=!1,K.value&&(null==(e=K.value)||e.validateForm().then((async()=>{var e;if(Je.value||!$e.value)await ma(We.value,he.value,ea.value,!1);else{const a=null==(e=We.value.tenantOrderHolder)?void 0:e.verificationCode;if(!a||!Oe(a))return void b({message:"请输入正确的验证码"});const{code:t,data:n}=await qe(We.value.tenantOrderHolder.mobile,a);"10000"===t&&await ma(We.value,he.value,ea.value,!1)}})))}catch(a){}},ya=e=>{"allFalse"===e?(Ne.value=!1,va()):U.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{Ye.value=!1,Ne.value=!1}))},Ia=()=>{Re.value=!1,oa.value.length<1?va():Ne.value=!0},ga=()=>{Ne.value=!1,Re.value=!1,Ye.value=!1};t((()=>We.value.tenantOrderInsuredList[0].relationToHolder),(()=>{We.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=se.SELF}),{deep:!0,immediate:!0}),t([()=>We.value.tenantOrderInsuredList[0].birthday,()=>We.value.tenantOrderInsuredList[0].name,()=>We.value.tenantOrderInsuredList[0].gender,()=>We.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance,()=>We.value.activePlanCode,()=>We.value.paymentFrequency,()=>We.value.insurancePeriodValue],B((()=>{const{name:e,birthday:a,gender:t,extInfo:{hasSocialInsurance:n}}=We.value.tenantOrderInsuredList[0];a&&t&&We.value.paymentFrequency&&e&&ke(e)?ma(We.value,he.value,ea.value):na()}),500)),t((()=>We.value.tenantOrderInsuredList[0]),(e=>{if(W(_e.value))return null;const a=_e.value[e.relationToHolder]||[];return 1===a.length&&(ve.SELF!==e.relationToHolder?We.value.tenantOrderInsuredList[0].dontFetchDefaultInfo||(We.value.tenantOrderInsuredList[0].dontFetchDefaultInfo=!0,We.value.tenantOrderInsuredList[0].certNo=We.value.tenantOrderInsuredList[0].certNo?We.value.tenantOrderInsuredList[0].certNo:a[0].cert[0].certNo,We.value.tenantOrderInsuredList[0].name=We.value.tenantOrderInsuredList[0].name?We.value.tenantOrderInsuredList[0].name:a[0].cert[0].certName):We.value.tenantOrderHolder.dontFetchDefaultInfo||(We.value.tenantOrderHolder.dontFetchDefaultInfo=!0,We.value.tenantOrderHolder.certNo=We.value.tenantOrderHolder.certNo?We.value.tenantOrderHolder.certNo:a[0].cert[0].certNo,We.value.tenantOrderHolder.name=We.value.tenantOrderHolder.name?We.value.tenantOrderHolder.name:a[0].cert[0].certName)),!1}),{immediate:!0,deep:!0});return x((()=>{q(le,(([{isIntersecting:e}],a)=>{oe.value=!e}))})),X(),T((()=>{var e,a;const t=Te.get(de);if(t){const{tenantOrderHolder:n,tenantOrderInsuredList:l}=t;if(n&&(We.value.tenantOrderHolder={...n,socialFlag:(null==(e=n.extInfo)?void 0:e.hasSocialInsurance)||ue.HAS}),Array(l)&&l[0]){const e=l[0]||{};if(We.value.activePlanCode=e.planCode,e.tenantOrderProductList&&e.tenantOrderProductList[0]&&e.tenantOrderProductList[0].tenantOrderRiskList){const t=null==(a=e.tenantOrderProductList[0].tenantOrderRiskList)?void 0:a.find((e=>"1"===String(e.riskType)));t&&(We.value.paymentFrequency=(null==t?void 0:t.paymentFrequency)?String(null==t?void 0:t.paymentFrequency):ie.SINGLE)}}}})),R((()=>{(async()=>{var e,a;const t=await Ie({productCode:f,withInsureInfo:!0,tenantId:y});"10000"===t.code&&(Be.value=!0,re.value={...t.data},document.title=(null==(a=null==(e=t.data)?void 0:e.tenantProductInsureVO)?void 0:a.productName)||"");const n=await me({productCode:f});"10000"===n.code&&(he.value=n.data)})(),setTimeout((async()=>{Qe=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),E((()=>{He.value=!1,Te.remove(de)})),(e,a)=>{const t=n("van-config-provider");return l(),o(c,null,[i(t,{"theme-vars":d(m)},{default:r((()=>{var e,t,n,v,p,f,y,I,h;return[u("div",gt,[u("div",Ot,[i($,{url:null==(t=null==(e=re.value)?void 0:e.tenantProductInsureVO)?void 0:t.banner[0]},null,8,["url"]),(null==(v=null==(n=re.value)?void 0:n.tenantProductInsureVO)?void 0:v.bannerMove)?(l(),C($,{key:0,url:null==(f=null==(p=re.value)?void 0:p.tenantProductInsureVO)?void 0:f.bannerMove[0],onClick:ua},null,8,["url"])):P("",!0),u("div",{ref_key:"observeRef",ref:le},null,512)]),i(ta,{"show-service-config":"","data-source":null==(y=re.value)?void 0:y.tenantProductInsureVO,"is-multiple-plan":d(ze),"active-plan-code":We.value.activePlanCode,"payment-frequency":We.value.paymentFrequency,"premium-info":{premium:Se.value,unit:we.value,premiumLoadingText:Ae.value},onUpdateActivePlan:la},null,8,["data-source","is-multiple-plan","active-plan-code","payment-frequency","premium-info"]),i(pa,{ref_key:"detailScrollRef",ref:ne,detail:re.value},{form:r((()=>[u("div",Pt,[i(Ve,{ref_key:"formRef",ref:K,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":We.value,"need-desensitize":"","send-sms-code":ra,"factor-object":d(Ze)||{}},D({_:2},[d(Xe).length>1?{name:"holderName",fn:r((()=>[i(Me,{"user-info":We.value.tenantOrderHolder,data:d(Xe),onChange:sa},null,8,["user-info","data"])]))}:void 0,d(Xe).length>1?{name:"insurerName",fn:r((()=>[i(Me,{title:"选择被保人","user-info":We.value.tenantOrderInsuredList[0],data:d(Xe),onChange:da},null,8,["user-info","data"])]))}:void 0]),1032,["form-info","factor-object"])]),i(It,{"form-info":We.value,"insure-detail":he.value,"config-detail":re.value,"is-multiple-plan":d(ze),"premium-info":{premium:Se.value,unit:we.value,premiumLoadingText:Ae.value},onUpdateActivePlan:la},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","premium-info"])])),_:1},8,["detail"]),(null==(I=re.value)?void 0:I.tenantProductInsureVO.inscribedContent)?(l(),C(ee,{key:0,"inscribed-content":null==(h=re.value)?void 0:h.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):P("",!0),ia.value&&ia.value.length>0?(l(),C(ae,{key:1,"attachement-list":ia.value,"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>ca(e))},null,8,["attachement-list"])):P("",!0),oe.value?(l(),o("div",Ct,[u("div",Vt,[Ae.value?(l(),o("span",Lt,s(Ae.value),1)):(l(),o(c,{key:1},[u("span",null,s(d(z)(Se.value)),1),u("span",null,s(we.value),1)],64))]),i(Fe,{disabled:Ye.value,shadow:!1,"theme-vars":d(m),class:"right",text:"立即投保",onClick:fa},{default:r((()=>[kt])),_:1},8,["disabled","theme-vars"])])):P("",!0)]),Be.value?(l(),C(te,{key:0,"product-detail":re.value},null,8,["product-detail"])):P("",!0),Dt]})),_:1},8,["theme-vars"]),i(Da,{show:Ne.value,"onUpdate:show":a[1]||(a[1]=e=>Ne.value=e),"content-list":d(oa),"active-index":0,onOnConfirmHealth:ya,onOnCloseHealthByMask:ga},null,8,["show","content-list"]),Re.value?(l(),C(be,{key:0,show:Re.value,"onUpdate:show":a[2]||(a[2]=e=>Re.value=e),"content-list":ia.value,"is-only-view":Ge.value,"active-index":Ee.value,text:Ge.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:Ia,onOnCloseFilePreviewByMask:ga},null,8,["show","content-list","is-only-view","active-index","text"])):P("",!0),i(ha,{"is-show":Ue.value},null,8,["is-show"])],64)}}}),[["__scopeId","data-v-32f7a42d"]]);export{St as default};

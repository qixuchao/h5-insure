import{_ as e,d as a,S as t,E as s,c as l,g as n,f as r,w as o,F as i,h as d,e as c,m as u,n as p,t as v,V as m,L as f,j as h,l as y,ao as g,at as b,X as I,Y as O,i as A,bY as L,c0 as _,bp as x,r as k,bt as C,c7 as P,bk as T,I as E,a as V,am as D,c8 as w,bZ as j,u as R,J as N,b2 as S,a8 as H,b$ as B,aD as F,H as U,ag as q,G as z,bR as M,T as G,ai as $,c9 as Q,bT as J,c1 as W}from"./index-5239afda.js";import{d as Y}from"./debounce-910624d9.js";import{i as Z,b as K,p as X,g as ee}from"./trial-f5b40a6d.js";import{b as ae}from"./product-079656a3.js";import{n as te}from"./nextStep-eea0eacf.js";import{g as se,C as le,I as ne,S as re,O as oe,l as ie}from"./infoCollection-2434be00.js";import{u as de,P as ce}from"./index-9c10bc4b.js";import{v as ue,g as pe,r as ve,t as me}from"./utils-40e09760.js";import{v as fe}from"./validator-5a13dc82.js";import{B as he}from"./index-f1ac80ff.js";import{s as ye,c as ge}from"./phoneVerify-b2ad2b56.js";import be from"./index-04cde60b.js";import{c as Ie,t as Oe,_ as Ae}from"./index-3bd514d5.js";import"./trial-04861e1a.js";import"./pdfh5-008ca364.js";import"./isObject-cd478a85.js";import"./isObjectLike-f858f31d.js";import"./core-19e81f25.js";import"./constant-c3f28a3b.js";import"./_nodeUtil-ef4cea77.js";const Le={class:"refueling-package-com"},_e=(e=>(I("data-v-7e34c868"),e=e(),O(),e))((()=>A("div",{class:"title"},"加油包",-1)));var xe=e(a({props:{packageProductList:{type:Array,default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:3}},setup(e){const a=e,[I,O]=t(!1),A=s((()=>a.packageProductList.length>a.count&&(!!a.isShowClose||!I.value))),L=()=>{O()},_=s((()=>a.packageProductList.length<=a.count||I.value?a.packageProductList:a.packageProductList.slice(0,a.count)));return(e,a)=>{const t=y,s=g,O=b;return l(),n("div",Le,[_e,r(O,{ref:"formRef"},{default:o((()=>[(l(!0),n(i,null,d(u(_),((e,a)=>(l(),c(s,{key:`${e.value}_${a}`,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,label:e.packageName,required:"",placeholder:"请选择"},{input:o((()=>[r(t,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,options:u(se),disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","options","disabled"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])))),128)),u(A)?(l(),n("div",{key:0,class:"show-more",onClick:L},[p(v(u(I)?"收起":"查看更多")+" ",1),r(m,{name:"down",class:f(["icon",{showMore:u(I)}])},null,8,["class"])])):h("",!0)])),_:1},512)])}}}),[["__scopeId","data-v-7e34c868"]]);const ke={class:"spec"},Ce={key:1,class:"spec"};var Pe=e(a({props:{dataSource:{default:()=>({spec:[],settlementProcessVO:{},questionList:[]})}},setup(e,{expose:a}){const t=e,p=L((()=>_((()=>import("./index-5239afda.js").then((function(e){return e.cG}))),["static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js"]))),v=L((()=>_((()=>import("./index-da9f1087.js")),["static/js/index-da9f1087.js","static/css/index-f22f2764.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js"]))),f=L((()=>_((()=>import("./index-5239afda.js").then((function(e){return e.cE}))),["static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js"]))),y=L((()=>_((()=>import("./index-4d0a66ec.js")),["static/js/index-4d0a66ec.js","static/css/index-7b3feb06.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js"]))),g=L((()=>_((()=>import("./index-4724e766.js")),["static/js/index-4724e766.js","static/css/index-bfbfdd15.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js","static/js/index-587d164f.js"]))),{dataSource:b}=x(t),I=k(),O=k([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),V=s((()=>b.value.spec&&b.value.spec.length>0)),D=s((()=>{var e,a,t,s;const l=b.value.settlementProcessVO.settlementProcessType;return!!(l===le.WORD&&(null==(e=b.value.settlementProcessVO)?void 0:e.settlementProcessList)&&(null==(a=b.value.settlementProcessVO)?void 0:a.settlementProcessList.length)>0||l===le.IMAGE&&(null==(t=b.value.settlementProcessVO)?void 0:t.settlementProcessPicList)&&(null==(s=b.value.settlementProcessVO)?void 0:s.settlementProcessPicList.length)>0)})),w=s((()=>b.value.questionList&&b.value.questionList.length>0)),j=s((()=>{let e=[...O.value];return V.value||(e=e.filter((e=>"tab1"!==e.slotName))),D.value||w.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>{var e;return null==(e=I.value)?void 0:e.handleClickTab}}),(e,a)=>{const t=E,s=m;return l(),c(u(p),{ref_key:"scrollRef",ref:I,class:"tabs",list:u(j),sticky:"",scrollspy:""},C({tab3:o((()=>[T(e.$slots,"form",{},void 0,!0)])),_:2},[u(V)?{name:"tab1",fn:o((()=>[A("div",ke,[(l(!0),n(i,null,d(u(b).spec||[],((e,a)=>(l(),c(P,{key:a},{fallback:o((()=>[r(s,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:o((()=>[(l(),c(t,{key:a,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),r(u(f))])]))}:void 0,u(D)||u(w)?{name:"tab2",fn:o((()=>{var e;return[u(D)?(l(),n(i,{key:0},[(null==(e=u(b).settlementProcessVO)?void 0:e.settlementProcessType)===u(le).WORD?(l(),c(u(y),{key:0,title:"理赔说明"},{default:o((()=>{var e;return[r(u(v),{list:null==(e=u(b).settlementProcessVO)?void 0:e.settlementProcessList},null,8,["list"])]})),_:1})):(l(),n("div",Ce,[(l(),c(P,null,{fallback:o((()=>[r(s,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:o((()=>{var e;return[(l(!0),n(i,null,d((null==(e=u(b).settlementProcessVO)?void 0:e.settlementProcessPicList)||[],((e,a)=>(l(),c(t,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),r(u(f))],64)):h("",!0),u(w)?(l(),n(i,{key:1},[r(u(y),{title:"常见问题"},{default:o((()=>[r(u(g),{list:u(b).questionList},null,8,["list"])])),_:1}),r(u(f))],64)):h("",!0)]}))}:void 0]),1032,["list"])}}}),[["__scopeId","data-v-cbff6950"]]);const Te={class:"trial-button-wrap"},Ee={class:"footer-area"},Ve={class:"price"},De={key:0},we=p("立即投保"),je=a({props:{premium:{default:0},tenantProductDetail:{default:()=>({})},planCode:{default:""},loadingText:{default:""}},emits:["onClick"],setup(e,{emit:a}){const t=e,s=k(""),d=k("");return D([()=>t.premium,()=>t.tenantProductDetail,()=>t.planCode],(([e])=>{var a,l;const{tenantProductInsureVO:n}=t.tenantProductDetail||{};let r={};r=(null==(a=null==n?void 0:n.planList)?void 0:a.length)?((null==n?void 0:n.planList)||[]).find((e=>e.planCode===t.planCode)):null==n?void 0:n.planInsureVO;const{paymentFrequencyValue:o,premiumUnit:i,actualPremiumUnit:c}=(null==(l=null==r?void 0:r.productPremiumVOList)?void 0:l[0])||{};e?(d.value=c,s.value=e&&`${e}`):(d.value=i,s.value=o&&`${o}`)}),{deep:!0,immediate:!0}),(t,c)=>(l(),n("div",Te,[A("div",Ee,[A("div",Ve,[e.loadingText?(l(),n("span",De,v(e.loadingText),1)):(l(),n(i,{key:1},[A("span",null,v(s.value),1),A("span",null,v(d.value),1)],64))]),r(be,{shadow:!1,class:"right",onClick:c[0]||(c[0]=e=>a("onClick"))},{default:o((()=>[T(t.$slots,"default",{},(()=>[we]))])),_:3})])]))}});const Re=e=>(I("data-v-102bef40"),e=e(),O(),e),Ne={key:0},Se=[Re((()=>A("div",{class:"__skeleton_short_content__"},[A("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[A("div",{class:"page-internet-product-detail"},[A("div",{class:"info"},[A("div",{class:"van-image banner",style:{width:"100%",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[A("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1676527379&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=tkscLe6oOZYjnRIA%2B7AiMS3bOs0%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),A("div")]),A("div",{class:"guarantee-list"},[A("div",{class:"header"},[A("span",null,[A("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"保障计划")]),A("span",null,[A("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"查看详情")])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"一般医疗保险金")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高300万")])])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"重大疾病医疗保险金")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤质子重离子医疗")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤院外特定药品费用医疗")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤特定器械耗材费用医疗责任 （适用于女性被保险人）")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高100万")])])]),A("div",{class:"show-more"},[A("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"查看更多 "),A("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[A("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),A("div",{class:"feerate-view sk-border"},[A("span",null,[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00元/年起")])])]),A("div",{class:"com-divider"}),A("div",{class:"tabs",sticky:"",scrollspy:""},[A("div",null,[A("div",{class:"van-sticky"},[A("div",{class:"van-tabs"},[A("div",{id:"tab-list",class:"tab-list"},[A("a",{class:"tab-title active",title:"产品亮点"},[A("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"产品亮点")]),A("a",{class:"tab-title",title:"理赔说明"},[A("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"理赔说明")]),A("a",{class:"tab-title",title:"我要投保"},[A("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"我要投保")])])])])]),A("div",{class:"tab-content"},[A("div",{id:"tab1"},[A("div",{class:"spec"},[A("div",{class:"van-image detail-img",style:{width:"100%"}},[A("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)))],He={class:"page-internet-product-detail"},Be={class:"info"},Fe={class:"custom-page-form"},Ue=Re((()=>A("div",{class:"form-title"},"请填写投保信息",-1))),qe=p("立即投保"),ze=Re((()=>A("div",{id:"xinaoDialog"},null,-1)));var Me=e(a({setup(e){w(),L((()=>_((()=>import("./index-7a1a03f4.js")),["static/js/index-7a1a03f4.js","static/css/index-ea588f10.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-04cde60b.js","static/css/index-19d9cc6b.css","static/js/utils-40e09760.js","static/js/infoCollection-2434be00.js","static/js/trial-04861e1a.js"])));const a=L((()=>_((()=>import("./index-a55f191c.js")),["static/js/index-a55f191c.js","static/css/index-c743ae40.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js"]))),t=L((()=>_((()=>import("./index-4af36a80.js")),["static/js/index-4af36a80.js","static/css/index-8fb5d6c6.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js","static/js/infoCollection-2434be00.js","static/js/trial-04861e1a.js"])));L((()=>_((()=>import("./index-04cde60b.js")),["static/js/index-04cde60b.js","static/css/index-19d9cc6b.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js"]))),L((()=>_((()=>import("./index-51fa9b60.js")),["static/js/index-51fa9b60.js","static/css/index-6733e696.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js","static/js/infoCollection-2434be00.js","static/js/relativeTime-fde2a46e.js","static/js/validator-5a13dc82.js","static/js/useDicData-2fe3e43e.js"]))),L((()=>_((()=>import("./index-812916d1.js")),["static/js/index-812916d1.js","static/css/index-a14d73ae.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js"]))),L((()=>_((()=>import("./index-04a5da3c.js")),["static/js/index-04a5da3c.js","static/css/index-607986ff.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js"]))),L((()=>_((()=>import("./index-480664f7.js")),["static/js/index-480664f7.js","static/css/index-b9ba3011.css","static/js/index-5239afda.js","static/css/index-b48bd80e.css","static/js/pdfh5-008ca364.js"])));const p=j();R();const v=V(),{productCode:m="",tenantId:f,agentCode:y="",agencyCode:g,saleChannelId:b,extraInfo:I,insurerCode:O,preview:x}=v.query;let C={};try{C=JSON.parse(decodeURIComponent(I))}catch(ga){}const{openId:P}=C;k();const T=k(),E=k(),se=k(!1),le=k({}),be=k({}),Le=k(!1),_e=k(!1),ke=k(0),Ce=k(!1),Te=k({}),Ee=k({}),Ve=k(!0),De=k(!0),we=k(!0),Re=k(""),Me=k([]);k({});const Ge=k({}),$e=k({}),Qe=k([]),Je=k(),We=k(),Ye=N({holder:{formData:{},schema:[],trialFactorCodes:[],config:{name:{},verificationCode:{sendSMSCode:async({mobile:e},a)=>{const t=await ye(e),{code:s}=t;"10000"===s&&"function"==typeof a&&a()}},certType:{},certNo:{label:"身份证号"},occupation:{dictCode:Ie(O)}}},insuredList:[{formData:{},schema:[],trialFactorCodes:[],config:{relationToHolder:{label:""},certNo:{label:"身份证号"}}}]});P&&de({openId:P},(e=>{Ee.value=e})),k({imgUrl:"",desc:"",title:"",link:window.location.href});const Ze=(e=>{const{tenantId:a,agentCode:t="",agencyCode:s,saleChannelId:l,extraInfo:n,insurerCode:r}=V().query;let o={};try{o=JSON.parse(decodeURIComponent(n))}catch(ga){}const i=k({agencyId:s,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"",pageCode:"",iseeBizNo:"",extraInfo:{}},orderCategory:1,saleUserId:t,saleChannelId:l,tenantId:a,venderCode:r,tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:a}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}});return"[object Object]"==={}.toString.call(e)&&Object.assign(i.value,e),i})({extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:C,templateId:(null==C?void 0:C.templateId)||"1",iseeBizNo:""}}),Ke=k({}),Xe=s((()=>!!x)),ea=k([]),aa=async()=>{await Z({productCode:m}).then((({data:e,code:a})=>{var t;"10000"===a&&(Ce.value=!0,be.value=e,Ge.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],Qe.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),we.value=!1,ae({productCode:m}).then((({code:e,data:a})=>{var t,s,l,n;if("10000"===e){const{productInsureMaterialVOList:e,productQuestionnaireVOList:r}=a,{basicInfo:{questionnaireType:o},questions:i,questionnaireName:d}=(null==(t=null==r?void 0:r[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};2===o&&(ea.value=[{attachmentName:d,attachmentUri:i,attachmentType:"question"}]),ea.value=[{attachmentName:d,attachmentUri:null==(s=null==i?void 0:i[0])?void 0:s.content,attachmentType:pe(String(null==(l=null==i?void 0:i[0])?void 0:l.textType),null==(n=null==i?void 0:i[0])?void 0:n.content)}]}}))},ta=s((()=>{if(Ee.value){const e=[];return Object.keys(Ee.value).forEach((a=>{e.push(...Ee.value[a])})),e}return[]})),sa=s((()=>ta.value.length>0)),la=k([]),na=e=>{Ge.value=(be.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},ra=()=>{T.value.handleClickTab()("tab3")};k([]);const oa=k([]),ia=async()=>{try{await te(((e={},a={},t={})=>{var s;const l={...t},n={tenantId:f,riskList:(null==(s=l.tenantOrderInsuredList[0])?void 0:s.tenantOrderProductList[0].riskVOList)||[],riskPremium:a,productId:e.id};return l.extInfo.iseeBizNo=Re.value,l.productCode=e.productCode,l.commencementTime=l.insuranceStartDate,l.expiryDate=l.insuranceEndDate,l.tenantOrderHolder={...l.tenantOrderHolder,certType:l.tenantOrderHolder.certType||q.CERT,certNo:(l.tenantOrderHolder.certNo||"").toLocaleUpperCase(),extInfo:{...l.tenantOrderHolder.extInfo}},l.tenantOrderInsuredList=l.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||q.CERT,certNo:(e.certNo||"").toLocaleUpperCase(),planCode:Ge.value.planCode,extInfo:{...e.extInfo}}))),l.tenantOrderInsuredList[0].tenantOrderProductList[0]={productCode:e.productCode,productName:e.productName,planCode:Ge.value.planCode,tenantOrderRiskList:me(n)},l})(be.value,Te.value,Ze.value),(async(e,a)=>{a===W.JUMP_PAGE&&(null==e?void 0:e.orderNo)&&await(async e=>{try{const{code:a,data:t}=await ee({orderNo:e,tenantId:f});"10000"===a&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await te(t))}catch(ga){}})(null==e?void 0:e.orderNo)}))}catch(ga){}},da=k(""),ca=k(0),ua=async(e,a,t,s=!0)=>{var l;const{chargePeriod:n,coveragePeriod:r,paymentFrequency:o,insuranceEndDate:i,insuranceStartDate:d}=Ke.value;da.value="保费试算中...";const c=ve(t).map((e=>({...e,paymentFrequency:o,chargePeriod:n,coveragePeriod:r}))),u={tenantId:f,productCode:a.productCode,insuranceStartDate:d,insuranceEndDate:i,holder:{personVO:{...e.tenantOrderHolder,socialFlag:null==(l=e.tenantOrderHolder.extInfo)?void 0:l.hasSocialInsurance,certType:e.tenantOrderHolder.certType||q.CERT}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance,certType:e.certType||q.CERT},productPlanVOList:[{insurerCode:O,planCode:Ge.value.planCode,riskVOList:c}]})))},{code:p,message:v}=await K(u);if("10000"===p){const{code:e,data:a}=await X(u);if("10000"===e){if(da.value="",Ze.value.tenantOrderInsuredList[0].tenantOrderProductList=u.insuredVOList[0].productPlanVOList,ca.value=null==a?void 0:a.premium,Ze.value.premium=a.premium,Ze.value.orderAmount=a.premium,Ze.value.orderRealAmount=a.premium,!s){const e={};a.riskPremiumDetailVOList&&a.riskPremiumDetailVOList.length&&a.riskPremiumDetailVOList.forEach((a=>{e[a.riskCode]={premium:a.premium,amount:a.amount}})),Te.value=e,oa.value.length>0?(Ve.value=!1,m=0,ke.value=m,_e.value=!0):ea.value.length>0?Le.value=!0:await ia()}}else da.value=""}else da.value="",G(v);var m},pa=()=>{const e=[];return Me.value.filter((e=>e.value===ne.INSURE)).forEach((a=>{e.push(...a.productRiskVoList)})),e},va=async()=>{if(ca.value)ia();else try{Le.value=!1,_e.value=!1,Je.value&&Je.value.validate().then((async()=>{var e;if(sa.value)await ua(Ze.value,be.value,[...la.value,...pa()],!1);else{const a=null==(e=Ze.value.tenantOrderHolder)?void 0:e.verificationCode;if(!ue(a))return void G({message:"请输入正确的验证码"});const{code:t,data:s}=await ge(Ze.value.tenantOrderHolder.mobile,a);"10000"===t&&await ua(Ze.value,be.value,[...la.value,...pa()],!1)}})).catch((()=>{const e=document.querySelector(".form-title");e&&e.scrollIntoView()}))}catch(e){}},ma=e=>{"allFalse"===e?(Le.value=!1,ia()):$.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{Le.value=!1}))},fa=()=>{Le.value=!1,_e.value=!1,Ve.value=!0};D((()=>Ze.value.tenantOrderInsuredList[0].relationToHolder),(()=>{Me.value&&Me.value.forEach((e=>{e.value=ne.UN_INSURE})),De.value=!1,S((()=>{const{certType:e,extInfo:a}=Ze.value.tenantOrderInsuredList[0];a&&!a.hasSocialInsurance&&(Ze.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=re.HAS),De.value=!0}))}),{deep:!0,immediate:!0}),D([()=>Ye.holder.formData,()=>Ye.insuredList],(([e,a])=>{Object.assign(Ze.value,(({holder:e,insuredList:a=[]})=>{const t=["birthday","certEndDate","certEndType","certNo","certStartDate","verificationCode","certType","email","gender","mobile","name","id","insuredBeneficiaryType","relationToHolder","relationToMainInsured"],s=e=>{const a={extInfo:{}};return"[object Object]"==={}.toString.call(e)&&Object.keys(e).forEach((s=>{t.includes(s)?a[s]=e[s]:a.extInfo[s]=e[s]})),a};return{tenantOrderHolder:s(e),tenantOrderInsuredList:(a||[]).map((e=>s(e)))}})({holder:e,insuredList:a.map((e=>e.formData))}))}),{deep:!0});const ha=()=>{const{name:e,birthday:a,gender:t,certType:s,extInfo:{hasSocialInsurance:l}}=Ze.value.tenantOrderInsuredList[0];return!!(a&&t&&Ze.value.paymentFrequency&&e&&fe(e)&&l)},ya=()=>{ha()&&(da.value="保费试算中...")};return D([()=>Ge.value,()=>Ke.value.paymentFrequency],(()=>{ya()}),{deep:!0,immediate:!0}),D((()=>[...Ye.holder.trialFactorCodes.map((e=>Ye.holder.formData[e])),...Ye.insuredList.reduce(((e,a,t)=>(e.push(...a.trialFactorCodes.map((e=>Ye.insuredList[t].formData[e]))),e)),[])]),((...e)=>{}),{deep:!0,immediate:!0}),D([()=>Ze.value.tenantOrderInsuredList[0].birthday,()=>Ze.value.tenantOrderInsuredList[0].name,()=>Ze.value.tenantOrderInsuredList[0].gender,()=>Ze.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance,()=>Ze.value.activePlanCode,()=>Ze.value.paymentFrequency,()=>Ze.value.insurancePeriodValue,()=>Me.value],Y((()=>{if(ha()){if(Xe.value)return;ua(Ze.value,be.value,[...la.value,...pa()])}else ya()}),500),{deep:!0}),D((()=>Ye.holder.formData),((...e)=>{Ye.insuredList.forEach(((e,a)=>{const{formData:t,schema:s}=e||{};"1"===t.relationToHolder&&Object.assign(e.formData,Ye.holder.formData)}))}),{deep:!0,immediate:!0}),D((()=>Ge.value),(()=>{let{productFactor:e}=Ge.value;const{oilPackageProductVOList:a,planCode:t,insureProductRiskVOList:s}=Ge.value;sa.value&&e[1]&&(e=e[1].filter((e=>"verificationCode"!==e.code))),Ke.value.planCode=t,la.value=s,$e.value=(s||[]).find((e=>e.mainRiskFlag===H.YES)),Me.value=(a||[]).map((e=>({...e,value:ne.UN_INSURE})));const[l,n,r]=Oe(e);Ye.holder={...Ye.holder,...l},Ye.insuredList[0]={...Ye.insuredList[0],...n}}),{deep:!0,immediate:!0}),D((()=>Ye.insuredList.map(((e,a)=>Ye.insuredList[a].formData.relationToHolder))),((e,a)=>{Ye.insuredList.forEach(((e,a)=>{const{formData:t,schema:s,config:l}=e||{},n="1"===t.relationToHolder,r="3"===t.relationToHolder;l.certNo.label="身份证号"+(r?"(户口簿)":""),e.schema.forEach((e=>{e.relationToHolder=t.relationToHolder,e.hidden=!e.isSelfInsuredNeed&&n})),n?Object.assign(e.formData,{...Ye.insuredList[a].formData,...Ye.holder.formData}):Object.assign(e.formData,{...Object.keys(e.formData).reduce(((e,a)=>(e[a]="",e)),{}),relationToHolder:t.relationToHolder})}))}),{immediate:!0,deep:!0}),S((()=>{B(E,(([{isIntersecting:e}],a)=>{se.value=!e}))})),F((()=>{var e;const a=U.get(oe);if(a){const{tenantOrderHolder:t,tenantOrderInsuredList:s}=a;if(t&&(Ze.value.tenantOrderHolder={...t,certType:t.certType||q.CERT}),Array(s)&&s[0]){const a=s[0]||{};if(Ze.value.activePlanCode=a.planCode,a.tenantOrderProductListtenantOrderProductList&&a.tenantOrderProductList[0]&&a.tenantOrderProductList[0].tenantOrderRiskList){const t=null==(e=a.tenantOrderProductList[0].tenantOrderRiskList)?void 0:e.find((e=>"1"===String(e.riskType)));t&&(Ze.value.paymentFrequency=(null==t?void 0:t.paymentFrequency)?String(null==t?void 0:t.paymentFrequency):ie.SINGLE)}}}})),z((()=>{we.value=!0,aa(),setTimeout((async()=>{Re.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),M((()=>{U.remove(oe)})),(e,s)=>{const v=Q,m=J;return l(),n(i,null,[we.value?(l(),n("div",Ne,Se)):(l(),c(m,{key:1,"data-skeleton-root":"SHORT","theme-vars":u(p)},{default:o((()=>{var e,a,s,p,m,f;return[A("div",He,[A("div",Be,[r(he,{"data-skeleton-type":"img",url:null==(a=null==(e=le.value)?void 0:e.tenantProductInsureVO)?void 0:a.banner[0]},null,8,["url"]),(null==(p=null==(s=le.value)?void 0:s.tenantProductInsureVO)?void 0:p.bannerMove)?(l(),c(he,{key:0,url:null==(f=null==(m=le.value)?void 0:m.tenantProductInsureVO)?void 0:f.bannerMove[0],onClick:ra},null,8,["url"])):h("",!0),A("div",{ref_key:"observeRef",ref:E},null,512)]),(l(),c(Pe,{key:0,ref:"tenantProductDetailScrollRef","data-source":le.value.tenantProductInsureVO},{form:o((()=>[A("div",Fe,[Ue,r(u(Ae),{ref_key:"holderFormRef",ref:Je,title:"本人信息（投保人）",model:u(Ye).holder.formData,schema:u(Ye).holder.schema,config:u(Ye).holder.config},null,8,["model","schema","config"]),(l(!0),n(i,null,d(u(Ye).insuredList,((e,a)=>(l(),c(u(Ae),{ref_for:!0,ref_key:"insuredFormRef",ref:We,key:a,title:"为谁投保（被保人）",model:u(Ye).insuredList[a].formData,schema:e.schema,config:e.config},null,8,["model","schema","config"])))),128))]),r(u(t),{"form-info":Ke.value,"risk-info":$e.value,"tenant-product-detail":le.value,"plan-list":Qe.value,"premium-info":{premium:ca.value,premiumLoadingText:da.value},onUpdateActivePlan:na},null,8,["form-info","risk-info","tenant-product-detail","plan-list","premium-info"]),Me.value.length>0?(l(),c(xe,{key:0,"package-product-list":Me.value},null,8,["package-product-list"])):h("",!0)])),_:1},8,["data-source"])),r(v),r(v),se.value?(l(),c(je,{key:1,premium:ca.value,"loading-text":da.value,"plan-code":Ge.value.planCode,"tenant-product-detail":{},onClick:va},{default:o((()=>[qe])),_:1},8,["premium","loading-text","plan-code"])):h("",!0)]),Ce.value?(l(),c(ce,{key:0,"product-detail":le.value},null,8,["product-detail"])):h("",!0),ze]})),_:1},8,["theme-vars"])),r(u(a),{show:Le.value,"onUpdate:show":s[0]||(s[0]=e=>Le.value=e),"content-list":ea.value,"active-index":0,onOnConfirmHealth:ma,onOnCloseHealthByMask:fa},null,8,["show","content-list"])],64)}}}),[["__scopeId","data-v-102bef40"]]);export{Me as default};

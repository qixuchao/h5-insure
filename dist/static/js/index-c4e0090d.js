import{d as e,a4 as a,a5 as n,g as t,h as l,i,j as o,z as s,a6 as d,E as u,a7 as r,O as c,o as v,c as p,u as _,b as m,F as I,a as f,l as b,q as O,w as C,a8 as h,m as g,a9 as y,aa as j,ab as E}from"./index-a701edf7.js";import{g as L,i as T}from"./trial-be4721b4.js";import{a as k,b as A}from"./product-ad97da6e.js";import{_ as P}from"./TrialButton-5287fae2.js";import{u as S}from"./useAttachment-35fb6d62.js";import{g as N}from"./utils-e08fe015.js";import{q as w}from"./createProposal-eb924eda.js";import{u as x}from"./useOrder-0f74fb68.js";import"./index-04ea7ba0.js";import"./infoCollection-c01830c2.js";import"./trial-d97dbb4f.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";const R={key:0},V={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},F={class:"info"},B={key:1,class:"preview-placeholder"},D=f("br",null,null,-1),U=f("div",{id:"insureButton"},null,-1),q=f("div",{id:"xinaoDialog"},null,-1),G=e({name:"InsuranceLong"}),M=e({...G,setup(e){const G=a((()=>n((()=>import("./index-656b47d6.js")),["static/js/index-656b47d6.js","static/css/index-c23f272e.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css"]))),M=a((()=>n((()=>import("./index-5453f771.js")),["static/js/index-5453f771.js","static/css/index-79104747.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css","static/js/infoCollection-c01830c2.js"]))),z=a((()=>n((()=>import("./index-2ae69418.js")),["static/js/index-2ae69418.js","static/css/index-491cbbd3.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css"])));a((()=>n((()=>import("./index-f8bf4e28.js").then((function(e){return e.a}))),["static/js/index-f8bf4e28.js","static/css/index-50785b3e.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css","static/js/debounce-6981b306.js","static/js/isObjectLike-a9798079.js","static/js/cloneDeep-5d541e55.js","static/js/keysIn-131bbce9.js","static/js/_getTag-0507d0b1.js","static/js/TrialButton-5287fae2.js","static/css/TrialButton-dea42d8e.css","static/js/index-04ea7ba0.js","static/css/index-bbfdd7ec.css","static/js/trial-be4721b4.js","static/js/config-98e8d477.js","static/js/useOrder-0f74fb68.js","static/js/merge-e7788e50.js"])));const J=a((()=>n((()=>import("./index-bd58f829.js")),["static/js/index-bd58f829.js","static/css/index-ebb5282b.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css"]))),Q=a((()=>n((()=>import("./Video-e05f664a.js")),["static/js/Video-e05f664a.js","static/css/Video-20262b6f.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css"]))),W=a((()=>n((()=>import("./index-c8918fd3.js")),["static/js/index-c8918fd3.js","static/css/index-a34f0b1b.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css","static/js/utils-e08fe015.js","static/js/infoCollection-c01830c2.js","static/js/trial-d97dbb4f.js"]))),X=a((()=>n((()=>import("./index-19030bf8.js")),["static/js/index-19030bf8.js","static/css/index-889d75b4.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css","static/js/product-ad97da6e.js","static/js/useThread-637a02aa.js"]))),Y=a((()=>n((()=>import("./index-90cacb9b.js")),["static/js/index-90cacb9b.js","static/css/index-fa4edf2a.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css","static/js/theme-94cf7d00.js","static/js/index-04ea7ba0.js","static/css/index-bbfdd7ec.css","static/js/utils-e08fe015.js","static/js/infoCollection-c01830c2.js","static/js/trial-d97dbb4f.js"]))),$=a((()=>n((()=>import("./index-5a9fb64b.js")),["static/js/index-5a9fb64b.js","static/css/index-eabeb59f.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css"]))),H=a((()=>n((()=>import("./index-9d595f9b.js")),["static/js/index-9d595f9b.js","static/css/index-cb73c937.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css"])));t();const K=l(),{productCode:Z="",tenantId:ee,agentCode:ae="",agencyCode:ne,saleChannelId:te,proposalId:le,extraInfo:ie,orderNo:oe,insurerCode:se,preview:de,trialPreview:ue}=K.query;let re={};try{re=JSON.parse(decodeURIComponent(ie))}catch(Je){}const{openId:ce,proposalInsuredId:ve,saTenantId:pe=""}=re;i();const _e=i(),me=i(),Ie=i(!1),fe=i({}),be=i({}),Oe=i(!1),Ce=i(0),he=i(!1);i({});const ge=i(!0);i(!0);const ye=i(!0),je=i(""),Ee=i({}),Le=i({}),Te=i([]),ke=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Ae=i({});o((()=>!!de||!!ue));const Pe=o((()=>!!ue));i();const Se=()=>{y("premiumTrial",K.query)},Ne=i([]),we=i(),xe=i(),Re=x(),Ve=i(!1),Fe=async()=>{!Pe.value&&k({productCode:Z}).then((({data:e,code:a})=>{if("10000"===a){fe.value=e;const{wxShareConfig:a,showWXShare:n,title:t,desc:l,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};n?Object.assign(ke.value,{...a,imgUrl:a.image,isShare:n}):Object.assign(ke.value,{title:t,desc:l,imgUrl:i,isShare:n})}})),oe||le||(Ve.value=!0),oe&&L({orderNo:oe,tenantId:ee}).then((({code:e,data:a})=>{"10000"===e&&(a.productCode=Z,xe.value=a,Ve.value=!0)})),le&&w({id:le,tenantId:pe||ee}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:n}=a;xe.value=Object.assign(Re.value,{productCode:Z,productName:"",renewFlag:"",holder:e,tenantId:ee,insuredList:(n||[]).filter((e=>e.id===+ve)).map((e=>({...e,productList:e.productList.filter((e=>e.productCode===Z))})))}),Ve.value=!0}})),await T({productCode:Z,isTenant:!1}).then((({data:e,code:a})=>{var n;"10000"===a&&(Ie.value=!0,he.value=!0,be.value=e,Ee.value=null==(n=e.productPlanInsureVOList)?void 0:n[0],Te.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),ye.value=!1,A({productCode:Z}).then((({code:e,data:a})=>{var n,t,l,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:o}=a;we.value=e||[];const{basicInfo:{questionnaireType:s},questions:d,questionnaireName:u}=(null==(n=null==o?void 0:o[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};2===s&&(Ne.value=[{attachmentName:u,attachmentUri:d,attachmentType:"question"}]),Ne.value=[{attachmentName:u,attachmentUri:null==(t=null==d?void 0:d[0])?void 0:t.content,attachmentType:N(String(null==(l=null==d?void 0:d[0])?void 0:l.textType),null==(i=null==d?void 0:d[0])?void 0:i.content)}]}}))};s((()=>Ae.value.planCode),(e=>{Ee.value=(be.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Be=()=>{_e.value.handleClickTab()("insureButton")};i(""),i(0);const{fileList:De,mustReadFileCount:Ue,popupFileList:qe}=S(Ee,we),Ge=e=>{Ee.value=(be.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},Me=()=>{Oe.value=!1,ge.value=!0},ze=()=>{Oe.value=!1,ge.value=!0};return s((()=>Ee.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:n}=Ee.value;Ae.value.planCode=e,Le.value=(n||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),u((()=>{r(me,(([{isIntersecting:e}],a)=>{Ie.value=!0}))})),c((()=>{ye.value=!0,Fe(),setTimeout((async()=>{je.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var n,t,l,i,o,s,d,u,r,c,y,L,T,k,A,S,N,w,x,K;const Z=j,ee=E;return v(),p(I,null,[_(ye)?(v(),p("div",R)):(v(),p("div",V,[m(Z),_(Pe)?(v(),p("div",B,[h("当前页面仅用于保费试算预览"),D,h("不展示其他产品相关配置信息")])):(v(),p(I,{key:0},[f("div",F,[1==(null==(t=null==(n=_(fe))?void 0:n.BASIC_INFO)?void 0:t.bannerType)&&(null==(i=null==(l=_(fe))?void 0:l.BASIC_INFO)?void 0:i.banner.length)?(v(),b(_(z),{key:0,"data-skeleton-type":"img",images:null==(s=null==(o=_(fe))?void 0:o.BASIC_INFO)?void 0:s.banner},null,8,["images"])):O("",!0),2==(null==(u=null==(d=_(fe))?void 0:d.BASIC_INFO)?void 0:u.bannerType)&&(null==(c=null==(r=_(fe))?void 0:r.BASIC_INFO)?void 0:c.video.length)?(v(),b(_(Q),{key:1,"data-skeleton-type":"img",src:null==(y=_(fe))?void 0:y.BASIC_INFO.video[0]},null,8,["src"])):O("",!0),(null==(k=null==(T=null==(L=_(fe))?void 0:L.BASIC_INFO)?void 0:T.bannerMove)?void 0:k.length)?(v(),b(_(z),{key:2,url:null==(N=null==(S=null==(A=_(fe))?void 0:A.BASIC_INFO)?void 0:S.bannerMove)?void 0:N[0],onClick:Be},null,8,["url"])):O("",!0),f("div",{ref_key:"observeRef",ref:me},null,512)]),m(_(G),{"data-source":null==(w=_(fe))?void 0:w.BASIC_INFO},null,8,["data-source"]),(null==(x=_(fe))?void 0:x.GUARANTEE)?(v(),b(_(W),{key:0,"show-service-config":"","data-source":_(fe),"plan-list":_(Te),onUpdateActivePlan:Ge},null,8,["data-source","plan-list"])):O("",!0),f("div",{class:"trial-text-btn",onClick:Se},"算一算保费"),m(_(J),{"data-source":null==(K=_(fe))?void 0:K.ISSUE_CONDITION},null,8,["data-source"]),m(_(M),{ref_key:"detailScrollRef",ref:_e,"data-source":_(fe)},null,8,["data-source"]),m(ee,null,{default:C((()=>{var e,a,n;return[(null==(e=_(fe).SIGNATURE)?void 0:e.inscribedContent)?(v(),b(_($),{key:0,"inscribed-content":null==(n=null==(a=_(fe))?void 0:a.SIGNATURE)?void 0:n.inscribedContent},null,8,["inscribed-content"])):O("",!0)]})),_:1}),m(ee,null,{default:C((()=>{var e;return[(null==(e=_(De))?void 0:e.length)?(v(),b(_(H),{key:0,"attachment-list":_(De),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{Ce.value=e,Oe.value=!0})(e))},null,8,["attachment-list"])):O("",!0)]})),_:1})],64)),U,m(P)])),m(ee,null,{default:C((()=>[_(he)&&!_(Pe)?(v(),b(_(X),{key:0,"product-detail":_(fe)},null,8,["product-detail"])):O("",!0)])),_:1}),q,m(ee,null,{default:C((()=>[_(Oe)?(v(),b(_(Y),{key:0,show:_(Oe),"onUpdate:show":a[1]||(a[1]=e=>g(Oe)?Oe.value=e:null),"content-list":_(ge)?_(De):_(qe),"is-only-view":_(ge),"active-index":_(Ce),text:_(ge)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":_(ge)?0:_(Ue),onSubmit:Me,onOnCloseFilePreviewByMask:ze},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):O("",!0)])),_:1})],64)}}});export{M as default};

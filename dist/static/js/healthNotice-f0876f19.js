import{d as e,u as t,a,r as o,o as s,b as n,c as i,e as r,f as c,g as u,_ as d,h as l,i as p,w as f,j as m,k as I,D as j,l as q,m as v,n as y,B as h,p as N,P as T,q as C}from"./index-30e705a3.js";import{q as O}from"./product-814ea8f5.js";import{g as b}from"./utils-c33645f9.js";import{P as g}from"./index-58e4e4e9.js";import{n as x}from"./nextStep-8c46c6ff.js";import{u as _}from"./useOrder-d74da5fa.js";import{P as E,B as k}from"./constants-7afb7c3d.js";import"./pdfh5-008ca364.js";import"./infoCollection-217056ff.js";import"./trial-5d843ccc.js";import"./core-afa6fc45.js";import"./constant-8927d485.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";const w=1;const P={class:"long-health-notice-wrap"},$={class:"footer-btn"},Q=e({__name:"healthNotice",setup(e){const Q=t(),S=a(),U=_();console.log("route",Q);const{productCode:B,orderNo:D,templateId:L,tenantId:V,preview:A,questionnaireId:G}=Q.query,J=o({}),M=o(),R=o(),z=()=>{j.confirm({title:"",message:`${R.value||""}不符合当前产品投保条件，请选择其他产品`}).then((()=>{q()})).catch((()=>{}))},F=()=>{M.value?S.push({path:`${Q.path}/${M.value}`,query:{...Q.query,questionnaireId:M.value}}):A?N(E.QUESTION_NOTICE,Q.query):x(U.value,((e,t)=>{t===T.JUMP_PAGE&&C(e.nextPageCode,Q.query)}))};return s((()=>{!A&&(async()=>{const{code:e,data:t}=await v({orderNo:D,tenantId:V});"10000"===e&&Object.assign(U.value,t,{extInfo:{...t.extInfo,templateId:L,pageCode:E.QUESTION_NOTICE,buttonCode:k.QUESTION_NOTICE}})})(),(async()=>{var e;const{code:t,data:a}=await O({productCode:B});if("10000"===t){const{productQuestionnaireVOList:t}=a||{};let o=t[0]||{};if((null==t?void 0:t.length)>1)if(G){const e=t.findIndex((e=>`${e.id}`===G));t[e]&&(o=t[e]),t[e+1]&&(M.value=t[e+1].id)}else M.value=null==(e=t[1])?void 0:e.id;const{questionnaireDetailResponseVO:s,questionnaireId:n,questionnaireName:i}=o||{},{questions:r,basicInfo:c}=s||{},{objectType:u,questionnaireType:d}=c||{};if(R.value=u,d===w){const{content:e,textType:t}=(null==r?void 0:r[0])||{};J.value={content:e,contentType:b(`${t}`,e),questionnaireId:n,questionnaireName:i}}else J.value={content:r,contentType:"question",questionnaireId:n,questionnaireName:i}}})()})),(e,t)=>{const a=y,o=h;return n(),i("div",P,[r(a),c(J).content?(n(),u(d,{key:0,type:c(J).contentType,content:c(J).content},null,8,["type","content"])):l("",!0),p("div",$,[r(o,{onClick:z},{default:f((()=>[m("部分为是")])),_:1}),r(g,{shadow:!1,onClick:F},{default:f((()=>[I(e.$slots,"default",{},(()=>[m("以上皆否")]))])),_:3})])])}}});export{Q as default};

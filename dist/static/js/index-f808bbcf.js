import{g as O,v as N,L as G,r as v,h as _,m as y,y as o,n as l,z as e,I as S,F as D,E as q,V as me,C as E,M as ge,J as T,s as R,k as m,a6 as x,A as ke,a1 as H,a2 as J,B as A,X,j as U,ah as Ce,a5 as Z,af as ye,Q as Ie,x as Pe,W as Le}from"./vendor-50171071.js";import{_ as z,v as $e,w as we,x as Ve,i as be}from"./index-718d16f0.js";import{q as xe}from"./index-4b25bde2.js";import{u as Se,P as Fe}from"./index-3baf460d.js";import{a as Be,P as Ee}from"./da-50c20360.js";import{q as De}from"./proposalList-8f88847a.js";import"./trial-8856209e.js";import"./trial-1fdebccb.js";import"./useStorage-fc1bfbf9.js";const Ae={class:"com-product-item"},Te={class:"content-wrap"},Re={class:"product-image"},Ue={class:"insure-name"},Ne={class:"product-info"},Oe={class:"title"},qe={class:"description"},ze={class:"tags"},Me=O({props:{productInfo:{default:()=>({})}},setup(a){const c=a,{productInfo:i}=N(c),b=G({checked:!1});return N(b),(h,k)=>{const I=v("van-image");return _(),y("div",Ae,[o("div",Te,[o("div",Re,[l(I,{src:e(i).fileUrl},null,8,["src"]),o("p",Ue,S(e(i).insurerName),1)]),o("div",Ne,[o("p",Oe,S(e(i).title),1),o("p",qe,S(e(i).text),1),o("p",ze,[(_(!0),y(D,null,q(e(i).tags,(p,d)=>(_(),y("span",{key:d,class:"tag"},S(p),1))),128))])]),me(h.$slots,"checkedProduct",{},void 0,!0)])])}}});var We=z(Me,[["__scopeId","data-v-ecb0026c"]]);const Q=a=>(H("data-v-06a1a284"),a=a(),J(),a),je={class:"com-tab-filter"},Xe={class:"article-mid"},Ge={class:"article-tag"},He=["onClick"],Je={class:"trianele-out"},Qe=Q(()=>o("span",null,null,-1)),Ye=Q(()=>o("div",{class:"text"},"\u7B5B\u9009",-1)),Ke={class:"popup-inner"},Ze=Q(()=>o("div",{class:"popup-title"},"\u4FDD\u9669\u516C\u53F8",-1)),eo={class:"footer-button"},oo=A("\u91CD\u7F6E"),to=A("\u786E\u5B9A"),so=O({props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(a,{emit:c}){const{isPopShow:i,openPop:b,closePop:h}=$e(!1),k=G({insureList:[],checkedInsure:[]}),{insureList:I,checkedInsure:p}=N(k),d=E(""),n=(L,f)=>{d.value=f,c("onSelectInsure",{selectInsureCode:p.value,selectCategory:d.value})},C=()=>{p.value=[]},P=()=>{c("onSelectInsure",{selectInsureCode:p.value,selectCategory:d.value}),h()};return ge(()=>{xe().then(L=>{const{code:f,data:$}=L;f==="10000"&&(I.value=$==null?void 0:$.map(w=>({label:w.abbreviation,value:w.insurerCode})))})}),(L,f)=>{const $=v("van-button"),w=v("van-popup");return _(),y("div",je,[o("div",Xe,[o("div",Ge,[(_(!0),y(D,null,q(e(we),(s,g)=>(_(),y("div",{key:g,class:T(["tag-item",{checked:d.value==g}]),onClick:F=>n(s==null?void 0:s.value,g)},[o("div",{class:T(["tag-out",{checked:d.value==g}])},[o("div",{class:T(["tag-item-text",{checked:d.value==g}])},S(s.label),3)],2),o("div",Je,[o("div",{class:T({triangle:d.value==g})},null,2)])],10,He))),128))]),a.filter?(_(),y("div",{key:0,class:"filter",onClick:f[0]||(f[0]=(...s)=>e(b)&&e(b)(...s))},[Qe,Ye,l(Ve,{name:"filter"})])):R("",!0),l(w,{show:e(i),position:"right","close-on-click-overlay":"",style:ke(a.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:e(h)},{default:m(()=>[o("div",Ke,[Ze,l(be,{modelValue:e(p),"onUpdate:modelValue":f[1]||(f[1]=s=>x(p)?p.value=s:null),options:e(I)},null,8,["modelValue","options"])]),o("div",eo,[l($,{plain:"",type:"primary",onClick:C},{default:m(()=>[oo]),_:1}),l($,{type:"primary",onClick:P},{default:m(()=>[to]),_:1})])]),_:1},8,["show","style","onClickOverlay"])])])}}});var ao=z(so,[["__scopeId","data-v-06a1a284"]]);const lo=a=>(H("data-v-1c708713"),a=a(),J(),a),no={class:"com-trial-product-wrapper"},uo={class:"container"},ro=lo(()=>o("span",{class:"title"}," \u5DF2\u9009\u4EA7\u54C1 ",-1)),co={class:"popup-body"},io={class:"cell-title"},po={class:"title"},_o=O({props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(a,{emit:c}){const i=a,b=E([]),h=E([]),k=E({isShow:i.isShow}),I=()=>{c("close")},p=()=>{h.value=[],c("checked",[])},d=n=>{var C,P,L;(L=(P=(C=b==null?void 0:b.value)==null?void 0:C[n])==null?void 0:P.toggle)==null||L.call(P),c("checked",h.value)};return X(()=>i.isShow,n=>{k.value.isShow=n}),X(()=>i.modalValue,(n=[])=>{h.value=n},{deep:!0,immediate:!0}),(n,C)=>{const P=v("van-checkbox"),L=v("VanCell"),f=v("van-cell-group"),$=v("van-checkbox-group"),w=v("VanPopup");return _(),y("div",no,[l(w,{show:k.value.isShow,"onUpdate:show":C[1]||(C[1]=s=>k.value.isShow=s),position:"bottom",onClose:I},{default:m(()=>[o("div",uo,[o("div",{class:"popup-header"},[o("span",{class:"clear-all",onClick:p}," \u6E05\u7A7A\u9009\u9879 "),ro,o("span",{onClick:I},"X")]),o("div",co,[l($,{modelValue:h.value,"onUpdate:modelValue":C[0]||(C[0]=s=>h.value=s)},{default:m(()=>[l(f,{inset:""},{default:m(()=>[(_(!0),y(D,null,q(a.proposalList,s=>(_(),U(L,{key:s.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:s.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:g=>d(s.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":m(()=>[l(P,{ref_for:!0,ref:g=>b.value[s.proposalInsuredList[0].proposalInsuredProductList[0].productId]=g,shape:"square",name:s.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:Ce(g=>d(s.proposalInsuredList[0].proposalInsuredProductList[0].productId),["stop"])},null,8,["name","onClick"])]),title:m(()=>[o("div",io,[o("div",po,S(s.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])])])]),_:1},8,["show"])])}}});var vo=z(_o,[["__scopeId","data-v-1c708713"]]);const ho=a=>(H("data-v-f2c257b2"),a=a(),J(),a),fo={class:"search-wrap"},mo={class:"page-proposal-list"},go={class:"check-button"},ko={key:0,class:"van-sticky"},Co={class:"add-plan"},yo=A(" \u5DF2\u9009"),Io={class:"has-select-product"},Po=A("\u6B3E\u4EA7\u54C1 "),Lo=ho(()=>o("span",{class:"icon"},null,-1)),$o=A("\u6DFB\u52A0\u8BA1\u5212\u4E66"),wo=O({props:{isCreateProposal:{type:Boolean,default:!0}},setup(a){const c=G({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0}),{searchValue:i,tagLists:b,isOpen:h,loading:k,finished:I,refreshing:p,productList:d,selectProduct:n,insurerCodeList:C,showCategory:P,productTotal:L,showFooter:f}=N(c),[$,w]=Z(),[s,g]=Z(),F=Se(),M=ye(),ee=Ie(),{isCreateProposal:B}=ee.query,oe=E(B?"repeatAdd":"add"),W=()=>{De({title:i.value,insurerCodeList:C.value,showCategory:P.value,excludeProductIdList:F.$state.excludeProduct||[],pageNum:1,pageSize:999}).then(u=>{const{code:t,data:V,total:j}=u;t==="10000"&&(console.log(V),d.value=V==null?void 0:V.datas,L.value=j)})},te=u=>{W()},se=u=>{const{selectInsureCode:t,selectCategory:V}=u;C.value=t,P.value=V,W()},Y=()=>{p.value&&(d.value=[],p.value=!1),W(),k.value=!1,L.value===d.value.length&&(I.value=!0)},ae=()=>{M.push({path:"historyProposalList"})},le=Pe(()=>{var V;const{birthday:u,gender:t}=((V=F.$state.proposalInfo.proposalInsuredList)==null?void 0:V[0])||{};return{birthday:u,gender:t}}),ne=u=>{f.value=!1,c.productId=u.productId,w(!0)},ue=u=>{c.selectProduct=u},re=()=>{const u=c.proposalList.filter(t=>c.selectProduct.includes(t.proposalInsuredList[0].proposalInsuredProductList[0].productId));F.setTrialData(u),M.push({path:"/proposal/createProposal"})},ce=()=>{w(!1)},de=u=>{if(B){c.proposalList.push(u),f.value=!0,w(!1);return}F.setTrialData([u]),w(!1),M.push({path:"/proposal/createProposal"})},ie=()=>{I.value=!0,k.value=!0,Y()};return X(()=>n,u=>{console.log("newVal",u)},{deep:!0,immediate:!0}),(u,t)=>{const V=v("van-search"),j=v("van-checkbox"),pe=v("van-checkbox-group"),_e=v("van-list"),ve=v("van-pull-refresh"),he=v("van-button"),fe=v("ProPageWrap");return _(),y(D,null,[l(fe,{class:"page-proposal"},{default:m(()=>[o("div",fo,[l(V,{modelValue:e(i),"onUpdate:modelValue":t[0]||(t[0]=r=>x(i)?i.value=r:null),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",shape:"round",class:"search",onSearch:te},null,8,["modelValue"]),l(ao,{filter:e(h),"onUpdate:filter":t[1]||(t[1]=r=>x(h)?h.value=r:null),"filter-class":"filter-area",onOnSelectInsure:se},null,8,["filter"])]),o("div",mo,[l(ve,{modelValue:e(p),"onUpdate:modelValue":t[4]||(t[4]=r=>x(p)?p.value=r:null),onRefresh:ie},{default:m(()=>[l(_e,{loading:e(k),"onUpdate:loading":t[3]||(t[3]=r=>x(k)?k.value=r:null),finished:e(I),"finished-text":"\u5DF2\u7ECF\u5230\u5E95\u4E86\u54E6",onLoad:Y},{default:m(()=>[(_(!0),y(D,null,q(e(d),r=>(_(),U(We,{key:r.id,"product-info":r==null?void 0:r.showConfig,onClick:K=>ne(r)},Le({_:2},[e(B)?{name:"checkedProduct",fn:m(()=>[o("div",go,[l(pe,{modelValue:e(n),"onUpdate:modelValue":t[2]||(t[2]=K=>x(n)?n.value=K:null)},{default:m(()=>[l(j,{name:r.productId,shape:"square"},null,8,["name"])]),_:2},1032,["modelValue"])])])}:void 0]),1032,["product-info","onClick"]))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])]),e(B)&&e(f)?(_(),y("div",ko,[o("div",Co,[o("p",{class:"has-select",onClick:t[5]||(t[5]=r=>e(g)(!0))},[yo,o("span",Io,S(e(n).length),1),Po,Lo]),l(he,{type:"primary",disabled:!e(n).length,onClick:re},{default:m(()=>[$o]),_:1},8,["disabled"])])])):R("",!0),l(vo,{modelValue:e(n),"onUpdate:modelValue":t[6]||(t[6]=r=>x(n)?n.value=r:null),"proposal-list":e(c).proposalList,"is-show":e(s),onClose:t[7]||(t[7]=r=>e(g)(!1)),onChecked:ue},null,8,["modelValue","proposal-list","is-show"]),e($)?(_(),U(Fe,{key:1,"is-show":e($),type:oe.value,insured:e(le),"product-id":e(c).productId,onClose:ce,onFinished:de},null,8,["is-show","type","insured","product-id"])):R("",!0)]),_:1}),e(B)?R("",!0):(_(),U(Ee,{key:0,"button-image":e(Be),onClick:ae},null,8,["button-image"]))],64)}}});var To=z(wo,[["__scopeId","data-v-f2c257b2"]]);export{To as default};

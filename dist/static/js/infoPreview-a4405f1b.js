import{d as e,o as a,c as t,b as n,w as o,F as s,n as r,l as i,a as l,u as c,a6 as d,q as u,cc as p,aF as f,a4 as m,a5 as y,h,g as v,r as k,i as I,av as j,m as _,ac as b,a0 as g,aw as w,ad as P,f as C,a8 as L,aD as D,aC as x,bk as S,aa as E,aq as V,ae as N}from"./index-232d6b3e.js";import{_ as R}from"./PayInfo-65d1cbec.js";import{g as A,m as O}from"./trial-b51ee881.js";import{n as q}from"./nextStep-3371c4f6.js";import{c as F}from"./product-bda7008e.js";import{u as U}from"./useOrder-f55c4c3b.js";import{P as M,a as T}from"./constants-6162d78d.js";import{P as Y}from"./index-4ddd2acf.js";import{P as $}from"./index-87d13bcd.js";import{R as J,c as z}from"./trial-4365c5a5.js";import{a as G}from"./utils-0af605ab.js";import"./bankCard-fc4c2ef3.js";import"./core-e1bfa0cf.js";import"./constant-8927d485.js";import"./index-f75f529c.js";import"./empth-c0adfdba.js";import"./cloneDeep-a3b2a8f9.js";import"./lodash-a761e69b.js";import"./infoCollection-7637a8da.js";import"./index-3b8a38f9.js";import"./search-0a6b033f.js";const K={class:"com-insured-part-wrapper"},W={class:"content-wrapper"},B={class:"risk-item"},H=e({__name:"InsureInfo",props:{productData:{default:()=>[]},totalPremium:{default:0}},setup:e=>(e,m)=>{const y=p,h=f;return a(),t("div",K,[n(h,{title:"保障信息","show-icon":!1},{default:o((()=>[(a(!0),t(s,null,r(e.productData,(e=>(a(),t(s,{key:e.productCode},[(a(!0),t(s,null,r(e.riskList,(e=>(a(),i(h,{key:e.riskCode,title:e.riskName},{default:o((()=>{var o;return[l("div",W,[l("div",B,[e.riskType===c(J).MAIN_RISK?(a(),t(s,{key:0},[n(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),n(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])],64)):(a(),t(s,{key:1},[n(y,{title:e.riskName,content:"投保"},null,8,["title"]),e.exemptFlag===c(d).YES?(a(),i(y,{key:0,title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])):(null==(o=e.liabilityList)?void 0:o.length)?(a(),t(s,{key:1},[n(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),n(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"]),n(y,{title:"交费方式",content:c(z)[e.paymentFrequency]},null,8,["content"])],64)):u("",!0)],64)),n(y,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),n(y,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])]})),_:2},1032,["title"])))),128))],64)))),128))])),_:1})])}});const Q={class:"long-info-preview"},X={class:"footer-btn"},Z=l("span",null,"分享",-1),ee=e({__name:"infoPreview",setup(e){const d=m((()=>y((()=>import("./index-95d70fd9.js")),["static/js/index-95d70fd9.js","static/css/index-fa4edf2a.css","static/js/index-232d6b3e.js","static/css/index-2278f771.css","static/js/theme-94cf7d00.js","static/js/index-87d13bcd.js","static/css/index-bbfdd7ec.css","static/js/utils-730de5fd.js","static/js/infoCollection-7637a8da.js","static/js/trial-4365c5a5.js"])));m((()=>y((()=>import("./index-1d17023e.js")),["static/js/index-1d17023e.js","static/css/index-cb73c937.css","static/js/index-232d6b3e.js","static/css/index-2278f771.css"])));const p=h(),J=v(),z=U(),K={1:T.holderSign,2:T.insuredSign,3:T.agentSign},{productCode:W="",tenantId:B,agentCode:ee="",agencyCode:ae,saleChannelId:te,isShare:ne,orderNo:oe,extraInfo:se,insurerCode:re,objectType:ie="1",preview:le}=p.query;let ce={};try{ce=JSON.parse(decodeURIComponent(se))}catch(ge){}const de=k({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),ue=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,pe=I({imgUrl:"",desc:"",title:"",link:ue}),fe=I(),me=I(),ye=I(!1);I(0);const he=I(!1),ve=I(),ke=()=>{q(z.value,((e,a)=>{a===D.JUMP_PAGE&&ve.value.handleShare()}))},Ie=async()=>{le?x(M.INFO_PREVIEW,p.query):J.push({path:K[ie],query:p.query})},je=I(),_e=I(),be=I([]);return j((()=>{(async()=>{let e={};const{code:a,data:t}=await A({orderNo:oe,tenantId:B});"10000"===a&&(Object.assign(z.value,t),e=G(t.insuredList[0].productList),je.value=t,he.value=!0),F(e).then((({code:e,data:a})=>{var t,n;"10000"===e&&(be.value=null==(n=null==(t=a.riskMaterialList)?void 0:t[0])?void 0:n.productMaterialList)})),O(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:t}=e;_e.value=t;const{payInfo:n}=S(t);de.payInfo={...de.payInfo,...n}}}))})()})),(e,p)=>{var m,y;const h=E,v=V,k=f,I=N;return a(),t("div",Q,[n(h),n(H,{"product-data":null==(y=null==(m=c(z).insuredList)?void 0:m[0])?void 0:y.productList},null,8,["product-data"]),c(_e)?(a(),i(Y,{key:0,ref_key:"personalInfoRef",ref:me,modelValue:c(je),"onUpdate:modelValue":p[0]||(p[0]=e=>_(je)?je.value=e:null),"product-factor":c(_e),"is-view":""},null,8,["modelValue","product-factor"])):u("",!0),c(de).payInfo.schema.length?(a(),i(c(R),{key:1,ref_key:"payInfoRef",ref:fe,modelValue:c(z).tenantOrderPayInfoList,"onUpdate:modelValue":p[1]||(p[1]=e=>c(z).tenantOrderPayInfoList=e),schema:c(de).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):u("",!0),n(k,{title:"产品资料","show-line":!1,"show-icon":!1},{default:o((()=>[(a(!0),t(s,null,r(c(be),((e,t)=>(a(),i(v,{key:t,"is-link":"",label:e.materialName,onClick:e=>{ye.value=!0}},null,8,["label","onClick"])))),128))])),_:1}),l("div",X,[!c(ne)&&c(pe).isShare&&c(b)()?(a(),i(P,g({key:0},c(pe),{class:"share-btn",onClick:w(ke,["stop"])}),{default:o((()=>[n(I,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),Z])),_:1},16,["onClick"])):u("",!0),n($,{shadow:!1,onClick:Ie},{default:o((()=>[C(e.$slots,"default",{},(()=>[L("下一步")]))])),_:3})]),n(c(d))])}}});export{ee as default};

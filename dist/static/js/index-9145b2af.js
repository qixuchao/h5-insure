import{d as e,h as a,o as t,c as l,a as s,e as n,b as o,F as i,q as d,m as c,_ as r,aC as u,aD as m,cP as p,i as v,j as f,k as b,B as y,O as g,u as h,p as _,dq as j,w as N,a9 as k,T as x}from"./index-cc9313dd.js";import{P as C}from"./index-cb8772e5.js";import{_ as I}from"./index-4f5a8880.js";import{L as D}from"./index-0399dd35.js";import{I as q}from"./infoItem-b3a9f732.js";import{O}from"./OperateBtn-4771d639.js";import{q as S}from"./order-0a4a5a6b.js";import"./empty-ae586b6c.js";import"./constants-4b08cf92.js";const w={class:"com-order-item"},U={class:"header"},V={class:"product-name"},B={class:"status"},L={class:"info"},P={class:"info-bottom"},T=(e=>(u("data-v-3afe64b6"),e=e(),m(),e))((()=>s("div",{style:{width:"25%"}},[s("img",{src:"/static/png/tree-0f48942e.png",alt:"",style:{width:"80%"}})],-1))),z={class:"footer"};var A=r(e({__name:"item",props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup:(e,{emit:r})=>(a(),(a,r)=>{var u;return t(),l("div",w,[s("div",U,[s("div",V,n(e.detail.productName),1),s("div",B,n(e.detail.orderStatusDesc),1)]),s("div",L,[o(q,{label:"订单号",content:e.detail.orderNo,line:"","is-copy":""},null,8,["content"]),(t(!0),l(i,null,d(e.detail.applicationNo||[""],(e=>(t(),c(q,{key:e,label:"投保单号",content:e,line:"","is-copy":""},null,8,["content"])))),128)),o(q,{label:"保单号",content:e.detail.policyNo,line:"","is-copy":""},null,8,["content"]),s("div",P,[s("div",null,[o(q,{label:"投保人",content:e.detail.holderName,line:""},null,8,["content"]),o(q,{label:"被保人",content:null==(u=e.detail.insuredName)?void 0:u[0],line:""},null,8,["content"]),o(q,{label:"创建时间",content:e.detail.orderStartDate,line:""},null,8,["content"]),o(q,{label:"保费：",content:`${e.detail.premium}`,line:""},null,8,["content"])]),T])]),s("div",z,[o(O,{detail:e.detail},null,8,["detail"])])])})}),[["__scopeId","data-v-3afe64b6"]]);const F={class:"page-order"},R={key:1,class:"empty-box"};var $=r(e({__name:"index",setup(e){p(),a();const s=v(),{type:n,tenantId:r,agentCode:u}=s.query,m=f({"-1":1,0:2,1:3,2:4}[n]||0),q=f(1),O=f(!1),w=f(!1),U=f(!1),V=f([]);f(0),f(0),f(0);const B=[{title:"全部",status:""},{title:"待处理",status:"-1"},{title:"待支付",status:"0"},{title:"已完成",status:"1"},{title:"已失效",status:"2"}],L=b((()=>(V.value=[],B[m.value].status))),P=()=>{x.loading({message:"加载中...",forbidClick:!0}),O.value=!0,S({condition:{orderTopStatus:L.value,tenantId:r,agentCode:u},pageSize:10,pageNum:q.value}).then((e=>{const{code:a,data:t}=e;"10000"===a&&t&&(O.value=!1,w.value=!1,1===q.value?V.value=t.datas||[]:V.value=V.value.concat(t.datas||[]),t.datas.length<10&&(U.value=!0))})).then((()=>{x.clear()}))},T=()=>{q.value+=1,P()},z=()=>{q.value=1,P()};return y(L,(()=>{q.value=1,P()})),g((()=>{P()})),(e,a)=>{const s=D,n=I,p=C;return t(),l("div",F,[o(j,{active:h(m),"onUpdate:active":a[0]||(a[0]=e=>_(m)?m.value=e:null),list:B,class:"tab","title-active-color":"#c41e21"},null,8,["active"]),o(p,{modelValue:h(w),"onUpdate:modelValue":a[2]||(a[2]=e=>_(w)?w.value=e:null),onRefresh:z},{default:N((()=>[h(V).length?(t(),c(s,{key:0,loading:h(O),"onUpdate:loading":a[1]||(a[1]=e=>_(O)?O.value=e:null),class:"body",finished:h(U),onLoad:T},{default:N((()=>[(t(!0),l(i,null,d(h(V),((e,a)=>(t(),c(A,{key:a,detail:e,onClick:a=>(e=>{const{orderNo:a}=e;k("orderDetail",{orderNo:a,agentCode:u,tenantId:r})})(e),onAfterDelete:z},null,8,["detail","onClick"])))),128))])),_:1},8,["loading","finished"])):(t(),l("div",R,[o(n,{title:"暂无投保单","empty-class":"empty-select"})]))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-1163fbb2"]]);export{$ as default};

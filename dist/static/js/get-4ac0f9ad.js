import{v as e,d as a,i as n,j as t,by as l,bz as u,z as i,b6 as o,b as s,V as r,W as c,a0 as d,bA as v,B as m,K as p,C as b,bB as f,bj as h,E as g,bC as y,D as w,bt as S,bD as x,H as V}from"./index-a3c15377.js";import{a as C,M as I}from"./keysIn-131bbce9.js";import{i as B}from"./debounce-6981b306.js";import{S as j}from"./isObjectLike-a9798079.js";const[M,P]=e("stepper"),T=(e,a)=>String(e)===String(a);const z=V(a({name:M,props:{min:m(1),max:m(1/0),name:m(""),step:m(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:p,showMinus:p,showInput:p,longPress:p,allowEmpty:Boolean,modelValue:b,inputWidth:b,buttonSize:b,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:m(1),decimalLength:b},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:a}){const m=a=>{const{min:n,max:t,allowEmpty:l,decimalLength:u}=e;return l&&""===a||(a=""===(a=f(String(a),!e.integer))?0:+a,a=Number.isNaN(a)?+n:a,a=Math.max(Math.min(+t,a),+n),h(u)&&(a=a.toFixed(+u))),a};let p;const b=n(),V=n((()=>{var n;const t=null!=(n=e.modelValue)?n:e.defaultValue,l=m(t);return T(l,e.modelValue)||a("update:modelValue",l),l})()),C=t((()=>e.disabled||e.disableMinus||V.value<=+e.min)),I=t((()=>e.disabled||e.disablePlus||V.value>=+e.max)),B=t((()=>({width:l(e.inputWidth),height:l(e.buttonSize)}))),j=t((()=>u(e.buttonSize))),M=a=>{e.beforeChange?S(e.beforeChange,{args:[a],done(){V.value=a}}):V.value=a},z=()=>{if("plus"===p&&I.value||"minus"===p&&C.value)return void a("overlimit",p);const n="minus"===p?-e.step:+e.step,t=m(x(+V.value,n));M(t),a(p)},E=a=>{const n=a.target,{value:t}=n,{decimalLength:l}=e;let u=f(String(t),!e.integer);if(h(l)&&u.includes(".")){const e=u.split(".");u=`${e[0]}.${e[1].slice(0,+l)}`}e.beforeChange?n.value=String(V.value):T(t,u)||(n.value=u);const i=u===String(+u);M(i?+u:u)},L=n=>{var t;e.disableInput?null==(t=b.value)||t.blur():a("focus",n)},$=e=>{const n=e.target,t=m(n.value);n.value=String(t),V.value=t,g((()=>{a("blur",e),y()}))};let k,A;const F=()=>{A=setTimeout((()=>{z(),F()}),200)},N=a=>{e.longPress&&(clearTimeout(A),k&&w(a))},W=a=>{e.disableInput&&w(a)},D=a=>({onClick:e=>{w(e),p=a,z()},onTouchstartPassive:()=>{p=a,e.longPress&&(k=!1,clearTimeout(A),A=setTimeout((()=>{k=!0,z(),F()}),600))},onTouchend:N,onTouchcancel:N});return i((()=>[e.max,e.min,e.integer,e.decimalLength]),(()=>{const e=m(V.value);T(e,V.value)||(V.value=e)})),i((()=>e.modelValue),(e=>{T(e,V.value)||(V.value=m(e))})),i(V,(n=>{a("update:modelValue",n),a("change",n,{name:e.name})})),o((()=>e.modelValue)),()=>s("div",{role:"group",class:P([e.theme])},[r(s("button",d({type:"button",style:j.value,class:[P("minus",{disabled:C.value}),{[v]:!C.value}],"aria-disabled":C.value||void 0},D("minus")),null),[[c,e.showMinus]]),r(s("input",{ref:b,type:e.integer?"tel":"text",role:"spinbutton",class:P("input"),value:V.value,style:B.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":V.value,onBlur:$,onInput:E,onFocus:L,onMousedown:W},null),[[c,e.showInput]]),r(s("button",d({type:"button",style:j.value,class:[P("plus",{disabled:I.value}),{[v]:!I.value}],"aria-disabled":I.value||void 0},D("plus")),null),[[c,e.showPlus]])])}}));var E=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,L=/^\w*$/;function $(e,a){if("function"!=typeof e||null!=a&&"function"!=typeof a)throw new TypeError("Expected a function");var n=function(){var t=arguments,l=a?a.apply(this,t):t[0],u=n.cache;if(u.has(l))return u.get(l);var i=e.apply(this,t);return n.cache=u.set(l,i)||u,i};return n.cache=new($.Cache||I),n}$.Cache=I;var k,A,F,N=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,W=/\\(\\)?/g,D=(k=function(e){var a=[];return 46===e.charCodeAt(0)&&a.push(""),e.replace(N,(function(e,n,t,l){a.push(t?l.replace(W,"$1"):n||e)})),a},A=$(k,(function(e){return 500===F.size&&F.clear(),e})),F=A.cache,A),O=D;var H=j?j.prototype:void 0,K=H?H.toString:void 0;function q(e){if("string"==typeof e)return e;if(C(e))return function(e,a){for(var n=-1,t=null==e?0:e.length,l=Array(t);++n<t;)l[n]=a(e[n],n,e);return l}(e,q)+"";if(B(e))return K?K.call(e):"";var a=e+"";return"0"==a&&1/e==-Infinity?"-0":a}function G(e,a){return C(e)?e:function(e,a){if(C(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!B(e))||L.test(e)||!E.test(e)||null!=a&&e in Object(a)}(e,a)?[e]:O(function(e){return null==e?"":q(e)}(e))}function J(e){if("string"==typeof e||B(e))return e;var a=e+"";return"0"==a&&1/e==-Infinity?"-0":a}function Q(e,a,n){var t=null==e?void 0:function(e,a){for(var n=0,t=(a=G(a,e)).length;null!=e&&n<t;)e=e[J(a[n++])];return n&&n==t?e:void 0}(e,a);return void 0===t?n:t}export{z as S,Q as g};

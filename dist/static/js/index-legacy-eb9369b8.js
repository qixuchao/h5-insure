!function(){var e=document.createElement("style");e.innerHTML=".page-verify .card .people[data-v-5fe4c6ba]{flex:1;margin-left:.53333rem;display:flex;align-items:center}.page-verify .card .people .name[data-v-5fe4c6ba]{font-size:.4rem;font-weight:600;color:#393d46}.page-verify .card .people .status[data-v-5fe4c6ba]{margin-left:.26667rem;text-align:center;width:1.2rem;height:.53333rem;line-height:.53333rem;border-radius:.05333rem;border:1px solid #99a9c0;font-size:.32rem;color:#99a9c0}.page-verify .card .people .status.verified[data-v-5fe4c6ba]{color:#0d6efe;border-color:#0d6efe}.page-verify .card .verify-item[data-v-5fe4c6ba]{display:flex;align-items:center;height:1.41333rem;line-height:1.41333rem;font-size:.4rem;color:#393d46}.page-verify .card .verify-item .no[data-v-5fe4c6ba]{margin-left:.64rem}.page-verify .card .verify-item .action[data-v-5fe4c6ba]{flex:1;display:flex;align-items:center;justify-content:flex-end;color:#99a9c0}.page-verify .card .verify-item .action .icon[data-v-5fe4c6ba]{margin-left:.13333rem;color:#99a9c0;font-size:.32rem}.page-verify .sign-card .resign[data-v-5fe4c6ba]{font-size:.37333rem;color:#0d6efe}.page-verify .sign-card .sign-body[data-v-5fe4c6ba]{padding-bottom:.4rem}.page-verify .sign-card .sign-body .date[data-v-5fe4c6ba]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-verify .sign-card .sign-body .file[data-v-5fe4c6ba]{margin-top:.21333rem;font-size:.37333rem;color:#393d46;line-height:.53333rem}.page-verify .sign-card .sign-body .file .file-name[data-v-5fe4c6ba]{color:#0d6efe}.page-verify .sign-card .sign-body .file .file-name .dun-hao[data-v-5fe4c6ba]{color:#393d46}.page-verify .footer[data-v-5fe4c6ba]{position:static;justify-content:space-between}.page-verify .footer .refresh-btn[data-v-5fe4c6ba]{width:.93333rem;border:none;color:#0d6efe;font-size:.4rem;line-height:.37333rem;text-align:center}.page-verify .footer .refresh-btn .text[data-v-5fe4c6ba]{margin-top:.13333rem;font-size:.32rem}.page-verify .footer[data-v-5fe4c6ba] .com-share{flex:1;margin-left:.26667rem}.page-verify .footer .submit-btn[data-v-5fe4c6ba]{flex:1}\n",document.head.appendChild(e),System.register(["./vendor-legacy-b51aec28.js","./index-legacy-7f3d0096.js","./index-legacy-4a85cce3.js","./index-legacy-da7eca94.js","./verify-legacy-451f9645.js","./order-legacy-e1e2c746.js","./inform-legacy-7c7f6b5c.js"],(function(e){"use strict";var t,a,r,n,o,i,l,d,c,s,v,u,f,g,p,y,m,h,b,C,I,N,x,T,O,E,j,L,k,w,D,H,S,_,R,U,z,P,$,q,A,G,M,Y,F,Q,B,J;return{setters:[function(e){t=e.g,a=e.O,r=e.a9,n=e.E,o=e.d,i=e.y,l=e.h,d=e.r,c=e.j,s=e.k,v=e.m,u=e.z,f=e.p,g=e.J,p=e.n,y=e.L,m=e.t,h=e.A,b=e.G,C=e.F,I=e.a4,N=e.a5,x=e.C,T=e.T,O=e.D},function(e){E=e.q},function(e){j=e._,L=e.S,k=e.L,w=e.M,D=e.q,H=e.l,S=e.Q,_=e.r,R=e.H,U=e.n,z=e.P,P=e.R,$=e.T,q=e.B},function(e){A=e._},function(e){G=e.f,M=e.s,Y=e.g,F=e.a},function(e){Q=e.a},function(e){B=e.l,J=e.g}],execute:function(){const V=e=>(I("data-v-5fe4c6ba"),e=e(),N(),e),W={class:"page-verify"},K={class:"people"},X={class:"name"},Z={class:"verify-item"},ee=V((()=>u("div",{class:"label"},"证件号码",-1))),te={class:"no"},ae=x(" 去认证 "),re={class:"sign-body"},ne={class:"date"},oe={class:"file"},ie=x(" 签名将被用于以下文件： "),le={class:"footer-button footer"},de=V((()=>u("div",{class:"text"},"刷新",-1))),ce=x("分享"),se=x("提交"),ve=t({setup(e){const t=1,I=2,N=a(),x=r(),j=(()=>{const e=N.query;return e.orderCode&&(e.orderNo=e.orderCode,delete e.orderCode),e})(),{saleUserId:V="D1234567-1",tenantId:ve="9991000007",templateId:ue=1,productCode:fe="CQ75CQ76",insurerCode:ge="ancheng",isShare:pe,orderCode:ye,orderNo:me,productCategory:he}=j,be=new L({source:"localStorage"}),Ce=n([]),Ie=n([]),Ne=n([]),xe=n([]),Te=n(),Oe=n(),Ee=[],je=n(""),Le=n(),ke=o().format("YYYY-MM-DD"),we=()=>{var e;null===(e=Oe.value)||void 0===e||e.clear()},De=(e,t)=>{let a=window.location.href;a=a.includes("orderCode")?a:a.replace("orderNo","orderCode"),F({callbackUrl:a,certiNo:e,faceAuthMode:"TENCENT",userName:t,tenantId:9991000007}).then((a=>{const{code:r,data:n}=a;if("10000"===r){const{originalUrl:a,serialNo:r}=n;window.location.href=a,be.set("verifyData",{serialNo:r,certNo:e,name:t})}}))},He=e=>`${e}`===w.CERT,Se=()=>{var e,a,r,n,o;(null===(e=Oe.value)||void 0===e?void 0:e.isEmpty())?T.fail("请投保人签名"):Ee.some((e=>e.isEmpty()))?T.fail("请被保人签名"):(null===(a=Te.value.tenantOrderHolder)||void 0===a||null===(r=a.extInfo)||void 0===r?void 0:r.isCert)!==t&&He(null===(n=Te.value.tenantOrderHolder)||void 0===n?void 0:n.certType)?T.fail("请投保人去认证"):null!==(o=Te.value.tenantOrderInsuredList)&&void 0!==o&&o.some((e=>{var a;return(null===(a=e.extInfo)||void 0===a?void 0:a.isCert)!==t&&He(e.certType)}))?T.fail("请被保人去认证"):_({orderNo:ye||me,saleUserId:V,tenantId:ve}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(a.orderStatus!==Q.PENDING?R("paymentResult",j):O.confirm({title:"提示",message:"请确认信息填写无误后，再进行支付"}).then((()=>{var e,a;const r=null===(e=Oe.value)||void 0===e?void 0:e.save();Promise.all([M("HOLDER",r,null===(a=Te.value)||void 0===a?void 0:a.id,`${ve}`),...Ee.map((e=>{var t;return M("INSURED",e.save(),null===(t=Te.value)||void 0===t?void 0:t.id,`${ve}`)}))]).then((()=>{U({...Te.value,pageCode:"sign",operateOption:{withSignInfo:!0},extInfo:{...Te.value.extInfo,pageCode:"sign",templateId:ue,shareFlag:pe?"Y":"N"},venderCode:ge}).then((e=>{const{code:a,data:r}=e;"10000"===t&&r.success&&x.push({path:z[r.pageAction.data.nextPageCode],query:{orderNo:ye||me,saleUserId:V,tenantId:ve}})}))}))})))}))},_e=(e=!1)=>{_({orderNo:ye||me,saleUserId:V,tenantId:ve}).then((t=>{const{code:a,data:r}=t;if("10000"===a){var n,o;if(Te.value=r,e)(null==r||null===(n=r.tenantOrderHolder)||void 0===n||null===(o=n.extInfo)||void 0===o?void 0:o.isCert)===I||null!=r&&r.tenantOrderInsuredList.some((e=>{var t;return(null===(t=e.extInfo)||void 0===t?void 0:t.isCert)===I}))?T("用户未完身份认证及签字"):null!=r&&r.tenantOrderAttachmentList.find((e=>e.category===P.ELECTRIC_SIGN&&e.objectType===$.HOLDER))&&null!=r&&r.tenantOrderAttachmentList.find((e=>e.category===P.ELECTRIC_SIGN&&e.objectType===$.INSURED))||T("用户未完身份认证及签字");setTimeout((()=>{let e=0;r.tenantOrderAttachmentList.forEach((t=>{t.category===P.ELECTRIC_SIGN&&(t.objectType===$.HOLDER?(Oe.value.clear(),Oe.value.setDataURL(t.fileBase64)):t.objectType===$.INSURED&&(Ee[e].clear(),Ee[e].setDataURL(t.fileBase64),e+=1))}))}))}}))},Re=()=>{_e(!0)},Ue=i((()=>{const e={...j,isShare:1,sharePageCode:"sign"};return`${window.location.origin}/phoneVerify?${E.stringify(e)}`}));return l((()=>{_e(),(()=>{const e={orderNo:ye||me,productCode:fe,tenantId:ve,objectType:1},t={insurerCode:ge,orderNo:me,productCategory:he,tenantId:ve,noticeType:4,objectType:1};Y({...e}).then((({code:e,data:t})=>{"10000"===e&&(Ie.value=t||[])})),Y({...e,objectType:2}).then((({code:e,data:t})=>{"10000"===e&&(Ce.value=t||[])})),B({...t}).then((({code:e,data:t})=>{"10000"===e&&(xe.value=t||[])})),B({...t,noticeType:5,objectType:2}).then((({code:e,data:t})=>{"10000"===e&&(Ne.value=t||[])}))})();const e=be.get("verifyData");if(e){const{serialNo:t,certNo:a,name:r}=e;G({certiNo:a,orderNo:ye||me,serialNo:t,tenantId:ve,userName:r}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(be.remove("verifyData"),_e())}))}})),(e,a)=>{const r=d("ProPDFviewer"),n=d("van-button"),o=d("ProPageWrap");return c(),s(o,null,{default:v((()=>[u("div",W,[f(k,{type:"warning",title:"尊敬的客户，本次投保需要进行身份认证",content:"本产品投保需要对投保人、被保人进行实名认证，您购买本产品的累计总保费已超过20万，按监管要求，需要提供投保人、被保人、指定受益人证件影像，本产品非本人投保且带身故责任、需对投保人、被保人（成人）的投保意愿进行签字确认。"}),f(H,{title:"投保人",class:"card"},{extra:v((()=>{var e,a,r,n,o,i,l,d,s,v;return[u("div",K,[u("div",X,g(null===(e=Te.value)||void 0===e||null===(a=e.tenantOrderHolder)||void 0===a?void 0:a.name),1),He(null===(r=Te.value)||void 0===r||null===(n=r.tenantOrderHolder)||void 0===n?void 0:n.certType)?(c(),p("div",{key:0,class:y(["status",{verified:(null===(o=Te.value)||void 0===o||null===(i=o.tenantOrderHolder)||void 0===i||null===(l=i.extInfo)||void 0===l?void 0:l.isCert)===t}])},g((null===(d=Te.value)||void 0===d||null===(s=d.tenantOrderHolder)||void 0===s||null===(v=s.extInfo)||void 0===v?void 0:v.isCert)===t?"已认证":"待认证"),3)):m("",!0)])]})),default:v((()=>{var e,r,n,o,i,l,d;return[u("div",Z,[ee,u("div",te,g(null===(e=Te.value)||void 0===e||null===(r=e.tenantOrderHolder)||void 0===r?void 0:r.certNo),1),(null===(n=Te.value)||void 0===n||null===(o=n.tenantOrderHolder)||void 0===o||null===(i=o.extInfo)||void 0===i?void 0:i.isCert)!==t&&He(null===(l=Te.value)||void 0===l||null===(d=l.tenantOrderHolder)||void 0===d?void 0:d.certType)?(c(),p("div",{key:0,class:"action",onClick:a[0]||(a[0]=e=>(e=>{var t,a,r,n;-1===e?De(null===(t=Te.value.tenantOrderHolder)||void 0===t?void 0:t.certNo,null===(a=Te.value.tenantOrderHolder)||void 0===a?void 0:a.name):De(null===(r=Te.value.tenantOrderInsuredList[e])||void 0===r?void 0:r.certNo,null===(n=Te.value.tenantOrderInsuredList[e])||void 0===n?void 0:n.name)})(-1))},[ae,f(D,{name:"right_arrow",class:"icon"})])):m("",!0)])]})),_:1}),f(H,{title:"投保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:v((()=>[u("div",{class:"resign",onClick:we},"重签")])),default:v((()=>[f(S,{ref_key:"holderSign",ref:Oe,class:"sign"},null,512),u("div",re,[u("div",ne,"签名日期： "+g(h(ke)),1),u("div",oe,[ie,(c(!0),p(C,null,b(Ie.value,((e,t)=>(c(),s(r,{key:`holderFileList-${t}`,class:"file",title:`《${e.materialName}》`,content:e.materialContent,type:h(q)(e.materialContent,e.materialSource+""),onClick:a[1]||(a[1]=()=>"")},null,8,["title","content","type"])))),128)),(c(!0),p(C,null,b(xe.value,((e,t)=>(c(),s(r,{key:`holderQuestionList-${t}`,class:"file",title:`《${e.title}》`,content:Le.value,type:je.value,onClick:()=>(e=>{const{id:t,objectType:a}=e;je.value="",Le.value="";const r={1:"pdf",2:"richText",3:"link"};J({insurerCode:ge,id:t,objectType:a,productCategory:he,orderNo:me,tenantId:ve}).then((({code:e,data:t})=>{if("10000"===e){const{textType:e,content:a,questionType:n}=(null==t?void 0:t[0])||{};2===n?(je.value="question",Le.value=t):(1===e&&a.includes("png")?je.value="picture":je.value=r[e],Le.value=a)}}))})(e)},null,8,["title","content","type","onClick"])))),128))])])])),_:1}),u("div",le,[h(pe)?m("",!0):(c(),p("div",{key:0,class:"refresh-btn",onClick:Re},[u("div",null,[f(D,{name:"refresh"})]),de])),h(pe)?m("",!0):(c(),s(A,{key:1,title:"邀请您进行身份认证",desc:"邀请您进行身份认证",link:h(Ue)},{default:v((()=>[f(n,{plain:"",type:"primary",class:"share-btn"},{default:v((()=>[ce])),_:1})])),_:1},8,["link"])),f(n,{type:"primary",class:"submit-btn",onClick:Se},{default:v((()=>[se])),_:1})])])])),_:1})}}});e("default",j(ve,[["__scopeId","data-v-5fe4c6ba"]]))}}}))}();

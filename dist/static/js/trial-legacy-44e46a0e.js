!function(){var e=document.createElement("style");e.innerHTML=".com-personal-info-wrapper .placeholder[data-v-375c57be]{color:#99a9c0}.com-risk-card-wrapper.part-card[data-v-4aef94c8]{background-color:#fff;margin-bottom:.26667rem}.com-risk-card-wrapper .delete-risk[data-v-4aef94c8]{display:flex;align-items:center;justify-content:center;margin-top:.06667rem}.com-risk-card-wrapper .delete-risk .svg-icon[data-v-4aef94c8]{font-size:.42667rem}.com-risk-card-wrapper .custom-field[data-v-4aef94c8]{display:flex;flex-direction:column}.com-risk-card-wrapper .custom-field .field-tip[data-v-4aef94c8]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .popup-title[data-v-1f13cbe8]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem;font-size:.45333rem;font-weight:600;color:#393d46}.com-risk-list-wrapper .risk-list[data-v-1f13cbe8]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper[data-v-1f13cbe8] .van-cell-group--inset{border-bottom:1px solid #eeeff4}.com-risk-list-wrapper[data-v-1f13cbe8] .van-cell-group--inset .van-cell{padding:.30667rem 0}.com-risk-list-wrapper .cell-title[data-v-1f13cbe8]{display:flex;flex-direction:column}.com-risk-list-wrapper .cell-title .title-desc[data-v-1f13cbe8]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .footer-bar[data-v-1f13cbe8]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.risk-list-wrapper[data-v-1afa9508]{margin-bottom:3.13333rem}.risk-list-wrapper .add-rider-risk[data-v-1afa9508]{background-color:#fff;margin-top:-.26667rem;height:1.41333rem;display:flex;align-items:center;justify-content:space-between;padding:var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding)}.risk-list-wrapper .add-rider-risk .left-part[data-v-1afa9508]{font-weight:400;color:#99a9c0;font-size:.4rem}\n",document.head.appendChild(e),System.register(["./vendor-legacy-82e10760.js","./trial-legacy-7abd5ff1.js","./index-legacy-58637b52.js","./useDicData-legacy-ecdfbf4b.js"],(function(e){"use strict";var i,a,o,l,t,n,r,d,s,u,m,c,p,f,v,k,y,g,V,I,b,h,D,L,C,O,R,P,w,A,x,_,T,F,M,U,q,N,E,j;return{setters:[function(e){i=e.g,a=e.a5,o=e.E,l=e.a4,t=e.M,n=e.y,r=e.d,d=e.r,s=e.j,u=e.n,m=e.p,c=e.m,p=e.A,f=e.k,v=e.t,k=e.a6,y=e.o,g=e.X,V=e.z,I=e.J,b=e.F,h=e.G,D=e.ak,L=e.al,C=e.a1,O=e.a2,R=e.C,P=e.D},function(e){w=e.S,A=e.a,x=e.R,_=e.b,T=e.A,F=e.c,M=e.L,U=e.d},function(e){q=e._,N=e.c,E=e.b},function(e){j=e.u}],execute:function(){const $={class:"com-personal-info-wrapper"};e("P",q(i({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(e,{expose:i}){var y,g;const V=e,I=j(`${null===(y=V.insuredCode)||void 0===y||null===(g=y.toLocaleUpperCase)||void 0===g?void 0:g.call(y)}_OCCUPATION`),[b,h]=a(),D=o(),L=l("source")||{},C=t({formInfo:V.formInfo,occupationalText:""}),O=n((()=>{const e=(e=>{const i=e||[];for(let a=0;a<i.length;a++)for(let e=a+1;e<i.length;e++){const o=i[a].split("_"),l=i[e].split("_"),t=i[a];o[0]===l[0]?o>l&&(i[a]=i[e],i[e]=t):"age"===o[0]&&(i[a]=i[e],i[e]=t)}return i})(null==V?void 0:V.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],a=i(e[0]),o=i(e[e.length-1]),l=r().subtract(a[0],"age"===a[1]?"year":"day").format("YYYY-MM-DD"),t=r().subtract(o[0],"age"===o[1]?"year":"day").format("YYYY-MM-DD");return{minAge:new Date(t),maxAge:new Date(l)}}));return i({validateForm:()=>new Promise(((e,i)=>{null==D||D.value.validate().then((()=>{e("")}),(()=>{i()}))})),ageRangeObj:O.value}),(i,a)=>{const o=d("VanField"),l=d("ProRadioButton"),t=d("VanForm"),n=d("van-datetime-picker"),y=d("van-popup");return s(),u("div",$,[m(t,{ref_key:"formRef",ref:D,"input-align":"right","error-message-align":"right"},{default:c((()=>["proposal"===p(L).type&&("add"===p(L).type||"repeatAdd"===p(L).type)||"proposal"!==p(L).type&&(e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY"))?(s(),f(o,{key:0,modelValue:p(C).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>p(C).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink",readonly:"","is-link":"",placeholder:"请选择",onClick:a[1]||(a[1]=e=>p(h)(!0))},null,8,["modelValue"])):v("",!0),"proposal"===p(L).type&&("add"===p(L).type||"repeatAdd"===p(L).type)||"proposal"!==p(L).type&&(e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER"))?(s(),f(o,{key:1,modelValue:p(C).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>p(C).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:c((()=>[m(l,{modelValue:p(C).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>p(C).formInfo.gender=e),options:p(w)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):v("",!0),e.factorList.includes("SOCIAL_INS")?(s(),f(o,{key:2,modelValue:p(C).formInfo.socialFlag,"onUpdate:modelValue":a[5]||(a[5]=e=>p(C).formInfo.socialFlag=e),name:"socialFlag",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:c((()=>[m(l,{modelValue:p(C).formInfo.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=e=>p(C).formInfo.socialFlag=e),options:p(A)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):v("",!0),e.factorList.includes("OCCUPATION_CATEGORY")?(s(),f(N,{key:3,modelValue:p(C).formInfo.occupationClass,"onUpdate:modelValue":a[6]||(a[6]=e=>p(C).formInfo.occupationClass=e),required:"",name:"occupationClass",label:"职业类型","data-source":p(I),mapping:{label:"value",value:"code",children:"children"},"show-full-value":""},null,8,["modelValue","data-source"])):v("",!0)])),_:1},512),m(y,{show:p(b),"onUpdate:show":a[9]||(a[9]=e=>k(b)?b.value=e:null),position:"bottom"},{default:c((()=>[m(n,{type:"date","min-date":p(O).minAge,"max-date":p(O).maxAge,onConfirm:a[7]||(a[7]=e=>{p(C).formInfo.birthday=p(r)(e).format("YYYY-MM-DD"),p(h)(!1)}),onCancel:a[8]||(a[8]=e=>p(h)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-375c57be"]]));const Y={class:"com-risk-card-wrapper part-card"},S={class:"custom-field"},z={class:"field-tip"},G={class:"custom-field"},B={class:"field-tip"},K={class:"custom-field"},H={class:"field-tip"},J={key:0},X={key:9,class:"liab-desc"};var Q=q(i({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(e){const i=e,a=o({}),r=l("premium")||{};a.value=l("enumList")||{};const k=o({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),D=t({formInfo:i.formInfo}),L=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"[object Object]"==={}.toString.call(e)&&Object.keys(e).length),C=(e,i,a={})=>{let o=i;return Array.isArray(i)||(o=[`${o}`]),(e||[]).filter((e=>o.includes(`${e.value}`)||o.includes(e.value)))},O=n((()=>{var e,a,o,l,t;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?C(i.enums.RISK_INSURANCE_PERIOD,(null===(t=i.originData.riskInsureLimitVO)||void 0===t?void 0:t.insurancePeriodValueList)||[]):2===(null===(a=i.originData)||void 0===a?void 0:a.periodType)?C([{value:"year_1",name:"1年"}],["year_1"]):C(null===(o=i.enums)||void 0===o?void 0:o.RISK_INSURANCE_PERIOD,(null===(l=i.mainRiskData.riskInsureLimitVO)||void 0===l?void 0:l.insurancePeriodValueList)||[])})),R=n((()=>{var e,a,o,l,t,n,r,d;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?C(null==i||null===(t=i.enums)||void 0===t?void 0:t.RISK_PAYMENT_PERIOD,(null===(n=i.originData.riskInsureLimitVO)||void 0===n?void 0:n.paymentPeriodValueList)||[]):1===(null===(a=i.originData)||void 0===a?void 0:a.exemptFlag)?C(x,[`${null==i||null===(r=i.originData)||void 0===r||null===(d=r.riskInsureLimitVO)||void 0===d?void 0:d.paymentPeriodRule}`]):2===(null===(o=i.originData)||void 0===o?void 0:o.periodType)?C([{value:"year_1",name:"1年交"}],["year_1"]):C(i.enums.RISK_PAYMENT_PERIOD,(null===(l=i.mainRiskData.riskInsureLimitVO)||void 0===l?void 0:l.paymentPeriodValueList)||[])})),P=n((()=>{var e,a,o,l,t;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?C(_,(null===(l=i.originData.riskInsureLimitVO)||void 0===l?void 0:l.paymentFrequencyList)||[]):1===(null===(a=i.originData.riskInsureLimitVO)||void 0===a?void 0:a.paymentTypeRule)?C(_,(null===(t=i.mainRiskData.riskInsureLimitVO)||void 0===t?void 0:t.paymentFrequencyList)||[]):C(_,(null===(o=i.mainRiskData.riskInsureLimitVO)||void 0===o?void 0:o.paymentFrequencyList)||[])})),w=n((()=>{var e,a;let o=0,l=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(o=e.minAmount,l=e.maxAmount),o>e.minAmount&&(o=e.minAmount),l<e.maxAmount&&(l=e.maxAmount)})),D.formInfo.amount=D.formInfo.amount||o,{min:o,max:l}})),A=n((()=>{var e,a;let o=0,l=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(o=e.minPremium,l=e.maxPremium),o>e.minPremium&&(o=e.minPremium),l<e.maxPremium&&(l=e.maxPremium)})),D.formInfo.premium=D.formInfo.premium||o,{min:o,max:l}})),q=n((()=>{var e,a,o,l;const t=(null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.minCopy)||1,n=null===(o=i.originData)||void 0===o||null===(l=o.riskCalcMethodInfoVO)||void 0===l?void 0:l.maxCopy;return D.formInfo.copy=`${D.formInfo.copy||t||1}`,{min:t,max:n}})),N=(e,a,o)=>{var l,t;const n=(null===(l=i.originData)||void 0===l||null===(t=l.riskCalcMethodInfoVO)||void 0===t?void 0:t.increaseDecreaseNum)||1;if("sumInsured"===o){if(w.value.max&&+e>w.value.max)return`金额最大${w.value.max}元`;if(+e<w.value.min)return`金额最小${w.value.min}元`}else{if(A.value.max&&+e>A.value.max)return`金额最大${A.value.max}元`;if(+e<A.value.min)return`金额最小${A.value.min}元`}return+e%n==0?"":`金额必须是${n}的倍数`};return y((()=>{var e,a;const o={riskType:i.originData.riskType,riskId:i.originData.id,riskName:i.originData.riskName,riskCode:i.originData.riskCode,mainRiskCode:1!==i.originData.riskType?null===(e=i.mainRiskData)||void 0===e?void 0:e.riskCode:void 0,mainRiskId:1!==i.originData.riskType?null===(a=i.mainRiskData)||void 0===a?void 0:a.id:void 0,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType})))};Object.assign(null==D?void 0:D.formInfo,o)})),g((()=>{var e;return null===(e=D.formInfo)||void 0===e?void 0:e.paymentFrequency}),((e=0)=>{var a,o,l;[3].includes((null===(a=i.originData.riskCalcMethodInfoVO)||void 0===a?void 0:a.saleMethod)||0)&&((null===(o=i.originData)||void 0===o||null===(l=o.riskCalcMethodInfoVO)||void 0===l?void 0:l.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(D.formInfo,{amount:i.perCopyAmount,premium:i.perCopyPremium})}));1==+e&&"single"!==D.formInfo.chargePeriod&&(D.formInfo.chargePeriod="single")})),g((()=>{var e;return null===(e=D.formInfo)||void 0===e?void 0:e.copy}),(e=>{var a,o;4===(null===(a=i.originData.riskCalcMethodInfoVO)||void 0===a?void 0:a.saleMethod)&&(D.formInfo.amount=null===(o=i.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.fixedAmount)})),g((()=>{var e;return null===(e=D.formInfo)||void 0===e?void 0:e.chargePeriod}),(e=>{"single"===e&&1!=+(D.formInfo.paymentFrequency||0)&&(D.formInfo.paymentFrequency=1)})),g((()=>null==i?void 0:i.mainRiskInfo),(e=>{var a,o,l,t,n,r;e&&2===i.originData.riskType&&(1===(null===(a=i.originData)||void 0===a||null===(o=a.riskInsureLimitVO)||void 0===o?void 0:o.insurancePeriodRule)&&(e.coveragePeriod?k.value.coveragePeriod.disabled=!0:k.value.coveragePeriod.prevent=!0,D.formInfo.coveragePeriod=e.coveragePeriod||""),1===(null===(l=i.originData)||void 0===l||null===(t=l.riskInsureLimitVO)||void 0===t?void 0:t.paymentPeriodRule)&&(e.chargePeriod?k.value.chargePeriod.disabled=!0:k.value.chargePeriod.prevent=!0,D.formInfo.chargePeriod=e.chargePeriod||""),1===(null===(n=i.originData)||void 0===n||null===(r=n.riskInsureLimitVO)||void 0===r?void 0:r.paymentTypeRule)&&(e.paymentFrequency?k.value.paymentFrequency.disabled=!0:k.value.paymentFrequency.prevent=!0,D.formInfo.paymentFrequency=e.paymentFrequency||0))}),{immediate:!0,deep:!0}),(i,a)=>{var o,l,t,n,y,g,x,_,E,j,$,Q,W,Z,ee,ie,ae,oe,le,te,ne,re,de,se,ue,me,ce,pe,fe,ve;const ke=d("ProSvg"),ye=d("ProTitle"),ge=d("VanStepper"),Ve=d("VanField"),Ie=d("ProRadioButton"),be=d("ProExpand");return s(),u("div",Y,[m(ye,{"risk-type":e.originData.riskType,title:e.originData.riskName},{default:c((()=>[e.removeRiskList.includes(e.originData.id)?(s(),u("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=i=>e.removeRisk(e.originData.id))},[m(ke,{name:"delete",color:"#0d6efe"})])):v("",!0)])),_:1},8,["risk-type","title"]),1===(null===(o=e.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.saleMethod)&&2===e.originData.exemptFlag?(s(),f(Ve,{key:0,modelValue:p(D).formInfo.amount,"onUpdate:modelValue":a[2]||(a[2]=e=>p(D).formInfo.amount=e),label:"保额",name:"amount",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>N(...e,"sumInsured")}]},{input:c((()=>{var i,o;return[V("div",S,[m(ge,{modelValue:p(D).formInfo.amount,"onUpdate:modelValue":a[1]||(a[1]=e=>p(D).formInfo.amount=e),"input-width":"64px",min:p(w).min,step:(null===(i=e.originData.riskCalcMethodInfoVO)||void 0===i?void 0:i.increaseDecreaseNum)||1,max:p(w).max},null,8,["modelValue","min","step","max"]),V("span",z,I(`金额最低${p(w).min}元，为${(null===(o=e.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):v("",!0),2===(null===(l=e.originData)||void 0===l||null===(t=l.riskCalcMethodInfoVO)||void 0===t?void 0:t.saleMethod)?(s(),f(Ve,{key:1,modelValue:p(D).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>p(D).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>N(...e,"premium")}]},{input:c((()=>{var i,o,l,t;return[V("div",G,[m(ge,{modelValue:p(D).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>p(D).formInfo.premium=e),step:(null===(i=e.originData)||void 0===i||null===(o=i.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1,min:p(A).min,"input-width":"64px",max:p(A).max},null,8,["modelValue","step","min","max"]),V("span",B,I(`金额最低${p(A).min}元，为${(null===(l=e.originData)||void 0===l||null===(t=l.riskCalcMethodInfoVO)||void 0===t?void 0:t.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):v("",!0),3===(null===(n=e.originData)||void 0===n||null===(y=n.riskCalcMethodInfoVO)||void 0===y?void 0:y.saleMethod)||4===(null===(g=e.originData)||void 0===g||null===(x=g.riskCalcMethodInfoVO)||void 0===x?void 0:x.saleMethod)&&(null!==(_=e.originData)&&void 0!==_&&null!==(E=_.riskCalcMethodInfoVO)&&void 0!==E&&E.minCopy||null!==(j=e.originData)&&void 0!==j&&null!==($=j.riskCalcMethodInfoVO)&&void 0!==$&&$.maxCopy)?(s(),f(Ve,{key:2,modelValue:p(D).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>p(D).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:c((()=>[V("div",K,[m(ge,{modelValue:p(D).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>p(D).formInfo.copy=e),step:1,min:p(q).min,max:p(q).max},null,8,["modelValue","min","max"]),V("span",H,I(`${p(q).min}份起购，最多购买${p(q).max}份`),1)])])),_:1},8,["modelValue"])):v("",!0),[1].includes((null===(Q=e.originData.riskCalcMethodInfoVO)||void 0===Q?void 0:Q.saleMethod)||0)&&1!==(null===(W=e.originData)||void 0===W?void 0:W.exemptFlag)||!(e.originData.riskCalcMethodInfoVO.fixedAmount||null!==(Z=p(r))&&void 0!==Z&&Z[null===(ee=e.originData)||void 0===ee?void 0:ee.riskCode])?v("",!0):(s(),f(Ve,{key:3,label:"保额"},{input:c((()=>{var i,a,o,l;return[V("div",null,I((null===(i=e.originData.riskCalcMethodInfoVO)||void 0===i?void 0:i.fixedAmount)||(null===(a=p(r))||void 0===a||null===(o=a[null===(l=e.originData)||void 0===l?void 0:l.riskCode])||void 0===o?void 0:o.amount)),1)]})),_:1})),L(null===(ie=e.originData)||void 0===ie||null===(ae=ie.riskInsureLimitVO)||void 0===ae?void 0:ae.insurancePeriodValueList)&&L(null===(oe=e.originData)||void 0===oe||null===(le=oe.riskInsureLimitVO)||void 0===le?void 0:le.insurancePeriodRule)?v("",!0):(s(),f(Ve,{key:4,modelValue:p(D).formInfo.coveragePeriod,"onUpdate:modelValue":a[8]||(a[8]=e=>p(D).formInfo.coveragePeriod=e),label:"保障期间",name:"coveragePeriod",rules:[{required:!0,message:"请选择保障期间"}]},{input:c((()=>[m(Ie,{modelValue:p(D).formInfo.coveragePeriod,"onUpdate:modelValue":a[7]||(a[7]=e=>p(D).formInfo.coveragePeriod=e),disabled:k.value.coveragePeriod.disabled,prevent:k.value.coveragePeriod.prevent?"请先选择主险保障期间":"",options:p(O),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),L(null===(te=e.originData)||void 0===te||null===(ne=te.riskInsureLimitVO)||void 0===ne?void 0:ne.paymentPeriodValueList)&&L(null===(re=e.originData)||void 0===re||null===(de=re.riskInsureLimitVO)||void 0===de?void 0:de.paymentPeriodRule)?v("",!0):(s(),f(Ve,{key:5,modelValue:p(D).formInfo.chargePeriod,"onUpdate:modelValue":a[10]||(a[10]=e=>p(D).formInfo.chargePeriod=e),label:"交费期间",name:"chargePeriod",rules:[{required:!0,message:"请选择交费期间"}]},{input:c((()=>[m(Ie,{modelValue:p(D).formInfo.chargePeriod,"onUpdate:modelValue":a[9]||(a[9]=e=>p(D).formInfo.chargePeriod=e),disabled:k.value.chargePeriod.disabled,prevent:k.value.chargePeriod.prevent?"请先选择主险交费期间":"",options:p(R),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),L(null===(se=e.originData.riskInsureLimitVO)||void 0===se?void 0:se.paymentFrequencyList)&&L(null===(ue=e.originData.riskInsureLimitVO)||void 0===ue?void 0:ue.paymentPeriodRule)?v("",!0):(s(),f(Ve,{key:6,modelValue:p(D).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>p(D).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:c((()=>[m(Ie,{modelValue:p(D).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>p(D).formInfo.paymentFrequency=e),disabled:k.value.paymentFrequency.disabled,prevent:k.value.paymentFrequency.prevent?"请先选择主险交费方式":"",options:p(P)},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),L(null===(me=e.originData)||void 0===me||null===(ce=me.riskInsureLimitVO)||void 0===ce?void 0:ce.annuityDrawValueList)?v("",!0):(s(),f(Ve,{key:7,modelValue:p(D).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>p(D).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate",rules:[{required:!0,message:"请选择领取时间"}]},{input:c((()=>{var i;return[m(Ie,{modelValue:p(D).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>p(D).formInfo.annuityDrawDate=e),options:C(p(T),(null===(i=e.originData.riskInsureLimitVO)||void 0===i?void 0:i.annuityDrawValueList)||[])},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),L(null===(pe=e.originData)||void 0===pe||null===(fe=pe.riskInsureLimitVO)||void 0===fe?void 0:fe.annuityDrawFrequencyList)?v("",!0):(s(),f(Ve,{key:8,modelValue:p(D).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>p(D).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType",rules:[{required:!0,message:"请选择领取方式"}]},{input:c((()=>{var i;return[m(Ie,{modelValue:p(D).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>p(D).formInfo.annuityDrawType=e),options:C(p(F),(null===(i=e.originData.riskInsureLimitVO)||void 0===i?void 0:i.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),(s(!0),u(b,null,h(e.originData.riskLiabilityInfoVOList||[],((i,a)=>(s(),u("div",{key:a},[1===i.optionalFlag?(s(),f(Ve,{key:0,modelValue:p(D).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(D).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:c((()=>{var o,l;return[V("div",null,[L(i.liabilityAttributeValueList)?(s(),u("span",J,"50万")):(s(),f(Ie,{key:1,modelValue:p(D).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(D).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:C(p(M),null===(o=e.originData.riskLiabilityInfoVOList)||void 0===o||null===(l=o[a])||void 0===l?void 0:l.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(s(),f(Ve,{key:1,modelValue:p(D).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(D).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:c((()=>{var o,l;return[V("div",null,[L(i.liabilityAttributeValueList)?(s(),f(Ie,{key:0,modelValue:p(D).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(D).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:p(U)},null,8,["modelValue","onUpdate:modelValue","options"])):(s(),f(Ie,{key:1,modelValue:p(D).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(D).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:C(p(M),null===(o=e.originData.riskLiabilityInfoVOList)||void 0===o||null===(l=o[a])||void 0===l?void 0:l.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"]))])))),128)),null!==(ve=e.originData)&&void 0!==ve&&ve.relationDesc?(s(),u("div",X,[m(be,{title:"责任投保说明"},{default:c((()=>[V("div",null,I(e.originData.relationDesc),1)])),_:1})])):v("",!0)])}}}),[["__scopeId","data-v-4aef94c8"]]);const W={class:"com-risk-list-wrapper"},Z=(e=>(C("data-v-1f13cbe8"),e=e(),O(),e))((()=>V("div",{class:"popup-title"},"选择附加险",-1))),ee={class:"risk-list"},ie={class:"cell-title"},ae={class:"title"},oe={class:"footer-bar"},le=R("确认"),te=i({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const a=e,l=o([]),n=o([]),r=o([...a.disabled]),v=t({show:a.show,currentChecked:[...a.modelValue]}),k=e=>{var i,o,t;if(r.value.includes(e))return;((e,i)=>{if(!a.collocationList.length)return i?void(v.currentChecked=[]):void v.currentChecked.push(e);let o=v.currentChecked,l=r.value;i?(a.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?o=o.filter((a=>a!==i.collocationRiskId||a!==e)):3===i.collocationType?(o=o.filter((i=>i!==e)),l=l.filter((e=>e!==i.collocationRiskId))):o=o.filter((i=>i!==e)))})),v.currentChecked=o,r.value=l):(a.collocationList.forEach((a=>{e===a.riskId&&(i||(2===a.collocationType?o.push(a.collocationRiskId):3===a.collocationType&&l.push(a.collocationRiskId),o.push(e)))})),v.currentChecked.push(...o),r.value=l)})(e,v.currentChecked.includes(e)),null==l||null===(i=l.value)||void 0===i||null===(o=i[e])||void 0===o||null===(t=o.toggle)||void 0===t||t.call(o)},y=()=>{i("close")},C=()=>{const e=a.riskList.filter((e=>v.currentChecked.includes(e.id)));i("update:modelValue",[...new Set(n.value)]),i("finished",e,r.value),i("close")};return D((()=>{l.value=[]})),g((()=>v.currentChecked),(e=>{n.value=e}),{deep:!0,immediate:!0}),g((()=>a.modelValue),(e=>{n.value=e||[],r.value.push(...e||[])}),{deep:!0,immediate:!0}),(i,a)=>{const o=d("van-checkbox"),t=d("VanCell"),g=d("van-cell-group"),D=d("van-checkbox-group"),O=d("VanButton"),R=d("VanPopup");return s(),u("div",W,[m(R,{show:p(v).show,"onUpdate:show":a[1]||(a[1]=e=>p(v).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:y},{default:c((()=>[Z,V("div",ee,[m(D,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e)},{default:c((()=>[m(g,{inset:""},{default:c((()=>[(s(!0),u(b,null,h(e.riskList,(e=>(s(),f(t,{key:e.id,title:e.riskName,disabled:r.value.includes(e.id),onClick:i=>k(e.id)},{"right-icon":c((()=>[m(o,{ref_for:!0,ref:i=>l.value[e.id]=i,shape:"square",disabled:r.value.includes(e.id),name:e.id,onClick:L((i=>k(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:c((()=>[V("div",ie,[V("div",ae,I(e.riskName),1)])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),V("div",oe,[m(O,{type:"primary",disabled:!p(v).currentChecked.length,block:"",onClick:C},{default:c((()=>[le])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var ne=e("a",q(te,[["__scopeId","data-v-1f13cbe8"]]));const re={class:"risk-list-wrapper"},de={key:0,class:"add-rider-risk"},se={class:"left-part"},ue=R("+ 附加险");e("R",q(i({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(e){const i=e,n=l("source")||{},[r,k]=a(!1);o(null),o(null);const y=t({mainRiskInfo:i.riskInfo,riskInfo:i.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),D=(e,i)=>{y.currentRiskList=y.currentRiskList.concat(e),y.disabledList=i},L=e=>{P.confirm({message:"确定要删除附加险么？"}).then((()=>{var i;const a=[e];((null===(i=y.mainRiskData)||void 0===i?void 0:i.collocationVOList)||[]).forEach((i=>{e!==i.riskId||2!==i.collocationType&&3!==i.collocationType||a.push(i.collocationRiskId)})),y.checkedList=y.checkedList.filter((e=>!a.includes(e))),y.currentRiskList=y.currentRiskList.filter((e=>!a.includes(e.id)||(Object.assign(y.riskInfo,{[e.id]:void 0}),!1))),y.disabledList=y.disabledList.filter((e=>!a.includes(e)))})).catch((()=>{}))};return g((()=>y.currentRiskList),(e=>{const a=[y.mainRiskData,...e];let o=[],l=[];const t=[];a.forEach(((e,i)=>{var a,n,r;const d=(null==e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.riskFactorRelationList)||[];o=o.concat(d.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),l=l.concat(d.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),t.push(null==e||null===(n=e.riskInsureLimitVO)||void 0===n?void 0:n.minHolderAge,null==e||null===(r=e.riskInsureLimitVO)||void 0===r?void 0:r.maxHolderAge)})),(e||[]).forEach((e=>{var i,a;const o={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,riskName:e.riskName,mainRiskCode:1!==e.riskType?null===(i=y.mainRiskData)||void 0===i?void 0:i.riskCode:void 0,mainRiskId:1!==e.riskType?null===(a=y.mainRiskData)||void 0===a?void 0:a.id:void 0,riskCategory:e.riskCategory,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType})))};y.riskInfo[e.id]||Object.assign(y.riskInfo,{[e.id]:o})})),i.pickFactor({insuredFactorList:[...new Set(o)],holderFactorList:[...new Set(l)],ageRange:t})}),{deep:!0,immediate:!0}),g((()=>i.riskInfo),(e=>{y.mainRiskInfo=Object.values(e||{}).find((e=>1===(null==e?void 0:e.riskType)))||{}}),{deep:!0,immediate:!0}),g((()=>i.originData),(e=>{let i=[];const a=[];"proposal"===n.origin&&"add"!==n.type&&"repeatAdd"!==n.type?((e||[]).forEach((e=>{1===e.riskType&&(y.mainRiskData=e),i.push(e)})),i=i.filter((e=>n.showRiskList.includes(e.id)))):(e||[]).forEach((e=>{1===e.riskType?(y.mainRiskData=e,i.push(e)):2===e.collocationType?i.push(e):a.push(e)})),y.riderRiskList=a,y.currentRiskList=i}),{deep:!0,immediate:!0}),(i,a)=>{var o,l,t;const g=d("ProCheckButton");return s(),u("div",re,[(s(!0),u(b,null,h(p(y).currentRiskList,((i,a)=>(s(),f(Q,{key:i.id,"form-info":p(y).riskInfo[i.id],index:a,enums:e.enums,"main-risk-data":p(y).mainRiskData,"main-risk-info":p(y).mainRiskInfo,"origin-data":i,"remove-risk":L,"remove-risk-list":p(y).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),(null===(o=p(y).riderRiskList)||void 0===o?void 0:o.length)-(null===(l=p(y).checkedList)||void 0===l?void 0:l.length)&&"proposal"!==p(n).origin?(s(),u("div",de,[V("span",se,I(`共有${p(y).riderRiskList.length-p(y).checkedList.length}款附加险可以添加`),1),m(g,{activated:"",onClick:a[0]||(a[0]=e=>p(k)(!0))},{default:c((()=>[ue])),_:1})])):v("",!0),p(r)?(s(),f(ne,{key:1,modelValue:p(y).checkedList,"onUpdate:modelValue":a[1]||(a[1]=e=>p(y).checkedList=e),show:p(r),disabled:p(y).disabledList,"risk-list":p(y).riderRiskList,"collocation-list":(null===(t=p(y).mainRiskData)||void 0===t?void 0:t.collocationVOList)||[],onFinished:D,onClose:a[2]||(a[2]=e=>p(k)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):v("",!0)])}}}),[["__scopeId","data-v-1afa9508"]]));e("i",((e={})=>E.post("/api/app/insure/product/insureProductDetail",e))),e("p",(e=>E.post("/api/app/insure/insurance/premiumCalc",e)))}}}))}();

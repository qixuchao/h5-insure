import{d as a,a as e,u as s,r as t,aH as i,R as o,b as l,c as n,i as r,e as d,w as c,U as p,a4 as u,f as m,a0 as v,Y as f,ae as b,j as g,af as w,B as h,aJ as k,ad as y}from"./index-a248c81d.js";import{S as C}from"./index-fd39041b.js";import{P as I}from"./index-fa6d9fe2.js";import{q as N,s as j,c as x}from"./scribing-e982e686.js";const _={class:"page-scribing-preview-wrap"},L=r("div",{class:"header-tip"},"点击文字框可进行修改",-1),T={class:"scribing-list"},E=["onClick"],H=["src"],V={class:"footer-btn"},q={class:"popup-body"},A={class:"popup-footer"},D=a({name:"scribingPreview"}),P=a({...D,setup(a){const D=e(),P=s(),S=t([]),{orderNo:U,text:Y,tenantId:B,orderId:J}=P.query,O=t({}),[R,$]=i(!1),z=t(),F=async()=>{const{code:a,data:e}=await N({orderId:J,tenantId:B,contentType:y.HANDLE});"10000"===a&&(S.value=e.riskTranscriptionList,z.value=e.status)},G=()=>{$(!1)},K=()=>{O.value.image&&j({orderNo:U,tenantId:B,riskTranscriptionList:[{...O.value,status:2}]}).then((({code:a,data:e})=>{"10000"===a&&($(!1),F())}))},M=()=>{x({content:Y,image:"",orderNo:U,tenantId:B,transcriptionType:y.HANDLE}).then((({code:a})=>{"10000"===a&&D.back()}))},Q=t(!1);return o((()=>{Q.value=!0,F()})),(a,e)=>{const s=C,t=w,i=h,o=k;return l(),n(p,null,[r("div",_,[L,r("div",T,[d(s,{wrap:""},{default:c((()=>[(l(!0),n(p,null,u(m(S),((a,e)=>(l(),n("div",{key:e,class:v("scribing-item "+(+a.status!==m(f).YES?"activity":"")),onClick:e=>{return s=a,O.value={...s,image:""},void $(!0);var s}},[r("img",{src:a.thumbnail,alt:""},null,8,H)],10,E)))),128))])),_:1})]),r("div",V,[d(I,{shadow:!1,onClick:M},{default:c((()=>[b(a.$slots,"default",{},(()=>[g("确认")]))])),_:3})])]),d(o,{show:m(R),teleport:".page-scribing-preview-wrap",class:"sign-popup",title:m(O).content,closeable:!1,position:"center",onClose:G},{default:c((()=>[r("div",q,[d(t,{modelValue:m(O).image,"onUpdate:modelValue":e[0]||(e[0]=a=>m(O).image=a),"has-bg":"",placeholder:m(O).content,closeable:""},null,8,["modelValue","placeholder"])]),r("div",A,[d(i,{onClick:G},{default:c((()=>[g("取消")])),_:1}),d(i,{type:"primary",plain:"",disabled:m(z)===m(f).NO,onClick:K},{default:c((()=>[g("确定")])),_:1},8,["disabled"])])])),_:1},8,["show","title"])],64)}}});export{P as default};

var le=Object.defineProperty,ue=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var K=(e,t,r)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y=(e,t)=>{for(var r in t||(t={}))ce.call(t,r)&&K(e,r,t[r]);if(G)for(var r of G(t))de.call(t,r)&&K(e,r,t[r]);return e},b=(e,t)=>ue(e,ie(t));import{g as k,j as N,n as W,z as n,J as Y,A as f,t as pe,a4 as me,a5 as ve,a9 as _e,O as fe,E as p,h as he,r as F,k as ge,m as j,p as v,T as w}from"./vendor-06835924.js";import{S as Ie}from"./infoCollection-b0426750.js";import{_ as P,a1 as De}from"./index-283d2cb8.js";import{c as Ce,_ as xe}from"./index-92e77691.js";import{a as ye}from"./order-b675ac95.js";import{d as we,i as Se,a as Oe,s as $e,e as Be,E as Ee}from"./trial-3e362cc3.js";import{t as Ue}from"./theme-eeb93d73.js";import{n as be,i as Fe,m as ke,a as Ne,g as Pe,t as Re,d as Le,b as z}from"./utils-61126066.js";import{p as Ve}from"./product-3e3197b1.js";import"./trial-14caae05.js";const Ae={class:"com-field-info"},Me={class:"title"},qe={class:"desc"},Te=k({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(e){return(t,r)=>(N(),W("div",Ae,[n("div",Me,Y(e.title),1),n("div",qe,Y(e.desc),1)]))}});var S=P(Te,[["__scopeId","data-v-74e2bdf6"]]);const Q=e=>(me("data-v-39527d44"),e=e(),ve(),e),Je={key:0,class:"pro-modal"},He=Q(()=>n("div",{class:"pro-overlay"},null,-1)),Ge={class:"pro-modal-wrapper"},Ke=Q(()=>n("div",{class:"pro-modal-content"},[n("p",null,"\u606D\u559C\u60A8"),n("p",null,"\u4FDD\u969C\u5347\u7EA7\u6210\u529F")],-1)),Ye=["src"],je=k({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(e,{emit:t}){const r=e,_=()=>{t("on-close")};return(u,R)=>r.isShow?(N(),W("div",Je,[He,n("div",Ge,[n("div",{class:"pro-modal-body"},[Ke,n("div",{class:"pro-modal-btn",onClick:_},"\u6211\u77E5\u9053\u4E86")]),n("div",{class:"pro-modal-close",onClick:_},[n("img",{src:f(Ce)},null,8,Ye)])])])):pe("",!0)}});var ze=P(je,[["__scopeId","data-v-39527d44"]]);const We={class:"page-activity-upgrade"},Qe=["src"],Xe={class:"container"},Ze={class:"main-form"},et=k({setup(e){const t=_e(),r=fe(),{productCode:_="BWYL2022",tenantId:u,orderNo:R,agentCode:X="",from:Z}=r.query,m=p(),h=p(),o=p(),g=p(),O=p(),x=p(),$=p(!1),B=Z==="check",E=p(!1),ee=p(0),te=()=>{$.value=!1},ae=async()=>{var c,d,I,D,C;const s=Pe({tenantId:u,applicationNo:o.value.applicationNo,policyNo:o.value.policyNo,saleUserId:X,saleChannelId:o.value.saleChannelId,orderStatus:ye.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:m.value,insureDetail:h.value,paymentMethod:(d=(c=o.value.extInfo)==null?void 0:c.extraInfo)==null?void 0:d.paymentMethod,renewalDK:(D=(I=o.value.extInfo)==null?void 0:I.extraInfo)==null?void 0:D.renewalDK,successJumpUrl:"",premium:g.value,holder:b(y({},o.value.tenantOrderHolder),{socialFlag:o.value.tenantOrderHolder.extInfo.hasSocialInsurance}),insured:b(y({},o.value.tenantOrderInsuredList[0]),{socialFlag:o.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:Re({tenantId:u,riskList:Le(h.value.productRiskVoList[0].riskDetailVOList,m.value),riskPremium:{},productId:(C=m.value)==null?void 0:C.id})}),a=await $e(s),{code:i,data:l}=a;return i==="10000"?l.data:""},L=s=>`${De}/chuangxin/baigebao/orderDetail?orderNo=${s}&productCode=${_}&tenantId=${u}`,oe=async()=>{try{const s=z({tenantId:u,premium:g.value,orderDetail:o.value,productDetail:m.value,insureDetail:h.value,successJumpUrl:""}),a=await Be(s),{code:i,data:l}=a;i==="10000"&&(g.value=l.installmentPremium,x.value=l.signUrl),w.clear()}catch(s){console.log(s)}},se=async s=>{const a=z({tenantId:u,premium:g.value,orderDetail:o.value,productDetail:m.value,insureDetail:h.value,successJumpUrl:L(s)}),i=await Ee(y({orderNo:s},a)),{code:l,data:c}=i;l==="10000"&&(B?t.replace(`/chuangxin/baigebao/orderDetail?orderNo=${s}&productCode=${_}&tenantId=${u}`):$.value=!0)},V=async s=>{try{w.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"});const a=await ae(),i=await we({tenantId:u,applicationNo:o.value.applicationNo});if(x.value){const l=encodeURIComponent(encodeURIComponent(L(a))),c=`${x.value}&successUrl=${l}`;B?window.location.href=c:window.location.href=x.value}else se(a)}catch(a){console.log(a),w.clear()}},ne=async s=>{B?E.value=!0:V()},re=()=>{w.loading({forbidClick:!0,duration:20*1e3,message:"\u8BD5\u7B97\u4E2D"});const s=Ve({productCode:_,withInsureInfo:!0,tenantId:u}),a=Se({productCode:_}),i=Oe({orderNo:R,tenantId:u});Promise.all([s,a,i]).then(([l,c,d])=>{l.code==="10000"&&(m.value=l.data),c.code==="10000"&&(h.value=c.data),d.code==="10000"&&(o.value=d.data,O.value=d.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),oe()})};return he(()=>{re()}),(s,a)=>{const i=F("ProRadioButton"),l=F("ProField"),c=F("van-config-provider");return N(),ge(c,{"theme-vars":f(Ue)},{default:j(()=>{var d,I,D,C,A,M,q,T,J,H;return[n("div",We,[n("img",{src:(I=(d=m.value)==null?void 0:d.tenantProductInsureVO)==null?void 0:I.banner[0],class:"banner"},null,8,Qe),n("div",Xe,[n("div",Ze,[v(S,{title:"\u59D3\u540D",desc:f(be)((C=(D=o.value)==null?void 0:D.tenantOrderInsuredList)==null?void 0:C[0].name)},null,8,["desc"]),v(S,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:f(Fe)((M=(A=o.value)==null?void 0:A.tenantOrderInsuredList)==null?void 0:M[0].certNo)},null,8,["desc"]),v(S,{title:"\u624B\u673A\u53F7\u7801",desc:f(ke)((T=(q=o.value)==null?void 0:q.tenantOrderHolder)==null?void 0:T.mobile)},null,8,["desc"]),v(S,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${f(Ne)(g.value||0)}\u5143 / \u6BCF\u6708`},null,8,["desc"]),v(l,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:j(()=>[v(i,{modelValue:O.value,"onUpdate:modelValue":a[0]||(a[0]=U=>O.value=U),disabled:!0,options:f(Ie)},null,8,["modelValue","options"])]),_:1}),n("div",{class:"submit",onClick:ne})])]),v(ze,{"is-show":$.value,onOnClose:te},null,8,["is-show"])]),v(xe,{show:E.value,"onUpdate:show":a[1]||(a[1]=U=>E.value=U),"content-list":(H=(J=m.value)==null?void 0:J.tenantProductInsureVO)==null?void 0:H.attachmentVOList,"active-index":ee.value,text:"\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u544A\u77E5\u5185\u5BB9",onSubmit:V},null,8,["show","content-list","active-index"])]}),_:1},8,["theme-vars"])}}});var pt=P(et,[["__scopeId","data-v-d9257de8"]]);export{pt as default};

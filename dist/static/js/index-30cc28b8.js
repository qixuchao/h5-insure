var X=Object.defineProperty;var P=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var j=(u,n,r)=>n in u?X(u,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[n]=r,M=(u,n)=>{for(var r in n||(n={}))Z.call(n,r)&&j(u,r,n[r]);if(P)for(var r of P(n))ee.call(n,r)&&j(u,r,n[r]);return u};import{g as ue,C as S,d as te,M as se,r as U,h as D,j as ae,k as E,y as e,n as F,I as f,J as V,m as v,s as y,z as A,E as b,F as x,a1 as ne,a2 as oe,B as h,T as $,D as re}from"./vendor-afffae61.js";import{b as O,_ as ie,S as ce,x as le,m as Y,h as N,y as z,N as I}from"./index-6bbeb80b.js";import{a as de,n as Be}from"./index-ad04bdee.js";const _e=u=>O.post("/api/app/insure/insurance/customerFace",u),De=u=>O.post("/api/app/insure/insurance/saveCustomerFaceResult",u),Q=(u,n,r,C)=>{const l={bizObjectType:u,docCategory:"ELECTRIC_SIGN",docType:"png",fileBase64:n,orderId:r,tenantId:C};return O.post("/api/app/insure/insurance/saveCustomerSignResult",l)},Ee=u=>O.post("/api/app/insure/insurance/listProductManuscripts",u);const W=u=>(ne("data-v-a0051748"),u=u(),oe(),u),Fe={class:"page-verify"},fe={class:"people"},ve={class:"name"},Ce={class:"verify-item"},pe=W(()=>e("div",{class:"label"},"\u8EAB\u4EFD\u8BC1\u53F7\u7801",-1)),he={class:"no"},Ae=h(" \u53BB\u8BA4\u8BC1 "),me={class:"sign-body"},ge={class:"date"},ye={class:"file"},Ne=h(" \u7B7E\u540D\u5C06\u88AB\u7528\u4E8E\u4EE5\u4E0B\u6587\u4EF6\uFF1A"),Ie={key:0,class:"dun-hao"},Oe={class:"people"},ke={class:"name"},Se={class:"verify-item"},be=W(()=>e("div",{class:"label"},"\u8EAB\u4EFD\u8BC1\u53F7\u7801",-1)),xe={class:"no"},we=["onClick"],Re=h(" \u53BB\u8BA4\u8BC1 "),Le=["onClick"],Te={class:"sign-body"},He={class:"date"},Pe={class:"file"},je=h(" \u7B7E\u540D\u5C06\u88AB\u7528\u4E8E\u4EE5\u4E0B\u6587\u4EF6\uFF1A"),Me={key:0,class:"dun-hao"},Ue={class:"footer-button footer"},Ve=h("\u63D0\u4EA4"),$e=ue({setup(u){const n="2022072810590219649",r=new ce({source:"localStorage"}),C=S([]),l=S(),m=S(),g=[],w=te().format("YYYY-MM-DD"),G=()=>{var t;(t=m.value)==null||t.clear()},J=t=>{g[t].clear()},R=(t,s)=>{_e({callbackUrl:window.location.href,certiNo:"2022072710380711215",faceAuthMode:"TENCENT",userName:s,tenantId:9991000007}).then(i=>{const{code:c,data:d}=i;if(c==="10000"){const{originalUrl:o,serialNo:B}=d;window.location.href=o,r.set("verifyData",{serialNo:B,certNo:t,name:s})}})},L=t=>{var s,i,c,d;t===-1?R((s=l.value.tenantOrderHolder)==null?void 0:s.certNo,(i=l.value.tenantOrderHolder)==null?void 0:i.name):R((c=l.value.tenantOrderInsuredList[t])==null?void 0:c.certNo,(d=l.value.tenantOrderInsuredList[t])==null?void 0:d.name)},q=t=>{t&&g.every(s=>s!==t)&&g.push(t)},K=()=>{var s;if((s=m.value)==null?void 0:s.isEmpty()){$.fail("\u8BF7\u6295\u4FDD\u4EBA\u7B7E\u540D");return}if(g.some(i=>i.isEmpty())){$.fail("\u8BF7\u88AB\u4FDD\u4EBA\u7B7E\u540D");return}re.confirm({title:"\u63D0\u793A",message:"\u8BF7\u786E\u8BA4\u4FE1\u606F\u586B\u5199\u65E0\u8BEF\u540E\uFF0C\u518D\u8FDB\u884C\u652F\u4ED8"}).then(()=>{var c;const i=(c=m.value)==null?void 0:c.save();Promise.all([Q("HOLDER",i,n,9991000007),...g.map(d=>Q("INSURED",d.save(),n,9991000007))]).then(()=>{Be(M({},l.value))})})};return se(()=>{de({orderNo:n,saleUserId:"D1234567-1",tenantId:"9991000007"}).then(s=>{const{code:i,data:c}=s;i==="10000"&&(l.value=c,c.tenantOrderAttachmentList.forEach(d=>{d.category===21&&d.objectType===2&&m.value.setDataURL(d.fileBase64)}))}),Ee({orderNo:"2022011815151382958351",productCode:"CQ75CQ76",tenantId:9991000007}).then(s=>{const{code:i,data:c}=s;i==="10000"&&(C.value=c)});const t=r.get("verifyData");if(t){const{serialNo:s,certNo:i,name:c}=t;De({certiNo:i,orderNo:n,serialNo:s,tenantId:9991000007,userName:c}).then(d=>{r.remove("verifyData")})}}),(t,s)=>{const i=U("van-button"),c=U("ProPageWrap");return D(),ae(c,null,{default:E(()=>{var d;return[e("div",Fe,[F(le,{type:"warning",title:"\u5C0A\u656C\u7684\u5BA2\u6237\uFF0C\u672C\u6B21\u6295\u4FDD\u9700\u8981\u8FDB\u884C\u8EAB\u4EFD\u8BA4\u8BC1",content:"\u672C\u4EA7\u54C1\u6295\u4FDD\u9700\u8981\u5BF9\u6295\u4FDD\u4EBA\u3001\u88AB\u4FDD\u4EBA\u8FDB\u884C\u5B9E\u540D\u8BA4\u8BC1\uFF0C\u60A8\u8D2D\u4E70\u672C\u4EA7\u54C1\u7684\u7D2F\u8BA1\u603B\u4FDD\u8D39\u5DF2\u8D85\u8FC720\u4E07\uFF0C\u6309\u76D1\u7BA1\u8981\u6C42\uFF0C\u9700\u8981\u63D0\u4F9B\u6295\u4FDD\u4EBA\u3001\u88AB\u4FDD\u4EBA\u3001\u6307\u5B9A\u53D7\u76CA\u4EBA\u8BC1\u4EF6\u5F71\u50CF\uFF0C\u672C\u4EA7\u54C1\u975E\u672C\u4EBA\u6295\u4FDD\u4E14\u5E26\u8EAB\u6545\u8D23\u4EFB\u3001\u9700\u5BF9\u6295\u4FDD\u4EBA\u3001\u88AB\u4FDD\u4EBA\uFF08\u6210\u4EBA\uFF09\u7684\u6295\u4FDD\u610F\u613F\u8FDB\u884C\u7B7E\u5B57\u786E\u8BA4\u3002"}),F(N,{title:"\u6295\u4FDD\u4EBA",class:"card"},{extra:E(()=>{var o,B,a,_,p,k,T,H;return[e("div",fe,[e("div",ve,f((B=(o=l.value)==null?void 0:o.tenantOrderHolder)==null?void 0:B.name),1),e("div",{class:V(["status",{verified:(p=(_=(a=l.value)==null?void 0:a.tenantOrderHolder)==null?void 0:_.extInfo)==null?void 0:p.isCert}])},f(((H=(T=(k=l.value)==null?void 0:k.tenantOrderHolder)==null?void 0:T.extInfo)==null?void 0:H.isCert)?"\u5DF2\u8BA4\u8BC1":"\u5F85\u8BA4\u8BC1"),3)])]}),default:E(()=>{var o,B,a,_,p;return[e("div",Ce,[pe,e("div",he,f((B=(o=l.value)==null?void 0:o.tenantOrderHolder)==null?void 0:B.certNo),1),((p=(_=(a=l.value)==null?void 0:a.tenantOrderHolder)==null?void 0:_.extInfo)==null?void 0:p.isCert)?y("",!0):(D(),v("div",{key:0,class:"action",onClick:s[0]||(s[0]=k=>L(-1))},[Ae,F(Y,{name:"right_arrow",class:"icon"})]))])]}),_:1}),F(N,{title:"\u6295\u4FDD\u4EBA\u7B7E\u540D","show-icon":!1,class:"sign-card","show-line":!1},{extra:E(()=>[e("div",{class:"resign",onClick:G},"\u91CD\u7B7E")]),default:E(()=>[F(z,{ref_key:"holderSign",ref:m,class:"sign"},null,512),e("div",me,[e("div",ge,"\u7B7E\u540D\u65E5\u671F\uFF1A "+f(A(w)),1),e("div",ye,[Ne,(D(!0),v(x,null,b(C.value.filter(o=>o.noticeObject===A(I).HOLDER),(o,B)=>(D(),v("span",{key:B,class:"file-name"},[h(f(`\u300A${o.materialName}\u300B`),1),B!==C.value.filter(a=>a.noticeObject===A(I).HOLDER).length-1?(D(),v("span",Ie,"\u3001")):y("",!0)]))),128))])])]),_:1}),(D(!0),v(x,null,b((d=l.value)==null?void 0:d.tenantOrderInsuredList,(o,B)=>(D(),v("div",{key:B},[F(N,{title:"\u88AB\u4FDD\u4EBA",class:"card"},{extra:E(()=>{var a,_;return[e("div",Oe,[e("div",ke,f(o.name),1),e("div",{class:V(["status",{verified:(a=o.extInfo)==null?void 0:a.isCert}])},f(((_=o.extInfo)==null?void 0:_.isCert)?"\u5DF2\u8BA4\u8BC1":"\u5F85\u8BA4\u8BC1"),3)])]}),default:E(()=>{var a;return[e("div",Se,[be,e("div",xe,f(o.certNo),1),((a=o.extInfo)==null?void 0:a.isCert)?y("",!0):(D(),v("div",{key:0,class:"action",onClick:_=>L(B)},[Re,F(Y,{name:"right_arrow",class:"icon"})],8,we))])]}),_:2},1024),F(N,{title:"\u88AB\u4FDD\u4EBA\u7B7E\u540D","show-icon":!1,class:"sign-card","show-line":!1},{extra:E(()=>[e("div",{class:"resign",onClick:a=>J(B)},"\u91CD\u7B7E",8,Le)]),default:E(()=>[F(z,{ref_for:!0,ref:q,class:"sign"}),e("div",Te,[e("div",He,"\u7B7E\u540D\u65E5\u671F\uFF1A "+f(A(w)),1),e("div",Pe,[je,(D(!0),v(x,null,b(C.value.filter(a=>a.noticeObject===A(I).INSURED),(a,_)=>(D(),v("span",{key:_,class:"file-name"},[h(f(`\u300A${a.materialName}\u300B`),1),_!==C.value.filter(p=>p.noticeObject===A(I).INSURED).length-1?(D(),v("span",Me,"\u3001")):y("",!0)]))),128))])])]),_:2},1024)]))),128)),e("div",Ue,[F(i,{type:"primary",class:"submit-btn",onClick:K},{default:E(()=>[Ve]),_:1})])])]}),_:1})}}});var Ge=ie($e,[["__scopeId","data-v-a0051748"]]);export{Ge as default};

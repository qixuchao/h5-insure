import{_ as e,d as a,aV as t,aW as s,cC as l,i,h as o,af as r,j as c,bc as n,l as d,m as u,o as m,p,w as v,a as f,u as y,q as b,f as h,b as w,v as N,bi as T,cL as g,y as _,b3 as x,bo as I,bp as j,cM as C}from"./index-121bf526.js";import{p as P,f as q}from"./policy-f4d867af.js";import z from"./index-a371ebca.js";const F=e=>(I("data-v-65fca035"),e=e(),j(),e),U={class:"page-verify-face"},k=F((()=>f("div",{class:"title face-title"},"人脸识别",-1))),E={class:"face-verify-img"},L=["src"],S=F((()=>f("div",{class:"face-verify-tip"},[f("div",{class:"title"},"操作时请您配合"),f("ol",null,[f("li",null,"请调亮手机屏幕亮度，确保光线充足"),f("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),f("li",null,"请确保真实本人操作")])],-1))),V={class:"attachment"},B={class:"footer-button"},M=a({name:"verifyFace"});var A=e(a({...M,setup(e){const a=t((()=>s((()=>import("./index-93ca63c9.js")),["static/js/index-93ca63c9.js","static/css/index-fa4edf2a.css","static/js/index-121bf526.js","static/css/index-c7bb1a0c.css","static/js/theme-94cf7d00.js","static/js/index-6a63fd37.js","static/css/index-bbfdd7ec.css","static/js/utils-862d51c0.js","static/js/infoCollection-d8102ce1.js","static/js/trial-3edb45f3.js"]))),I=l(),j=i(),F=o(),{isFirst:M,tenantId:A,objectType:D,orderNo:O,biz_id:W,nextPageCode:$}=j.query,R=I.get(`${r}_orderDetail`),G=c(),H=c(!0),J=c(),K=c([{attachmentName:"隐私政策",attachmentList:[{materialName:"隐私政策",materialContent:P,materialSource:"pdf"}]}]),Q=c(!1),X=()=>{J.value?(()=>{const{userName:e,certiNo:a,certType:t}=G.value,s={tenantId:A,faceAuthMode:"TENCENT",callbackUrl:window.location.href.replace("isFirst=1","isFirst=0"),bizNo:O,userName:e,certiNo:a,certType:t};C(s).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})():T.alert({message:"请先同意隐私政策",confirmButtonText:"我知道了"})};n((()=>{const{holder:e,insuredList:a}=R;if("holder"===D){const{name:a,certNo:t,certType:s,id:l}=e;G.value={userName:a,certiNo:t,certType:s,objectId:l}}else{const{name:e,certNo:t,certType:s,id:l}=(null==a?void 0:a[0])||{};G.value={userName:e,certiNo:t,certType:s,objectId:l}}W&&(()=>{const{userName:e,objectId:a,certType:t}=G.value,s={bizId:W,certType:t,objectId:a,objectType:`${D}`.toLocaleUpperCase(),orderNo:O,tenantId:A};g(s).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status?(delete j.query.biz_id,delete j.query.nextPageCode,F.push({path:_.infoPreview,query:j.query})):H.value=!1}))})()}));const Y=c();return d((()=>{setTimeout((async()=>{Y.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const s=x,l=u("ProPageWrap");return m(),p(l,null,{default:v((()=>{var e;return[f("div",U,[k,f("div",E,[f("img",{src:y(q),alt:""},null,8,L)]),S,f("div",V,[(null==(e=y(K))?void 0:e.length)?(m(),p(z,{key:0,modelValue:y(J),"onUpdate:modelValue":t[0]||(t[0]=e=>b(J)?J.value=e:null),"attachment-list":y(K),"has-bg-color":!1,"is-show-radio":"","pre-text":"本人同意利安人寿采集本人人脸信息，用于向国家法规许可的验证机构进行本人身份验证。本人已仔细阅读并知晓","suffix-text":"，并同意授权。",onPreviewFile:t[1]||(t[1]=()=>Q.value=!0)},null,8,["modelValue","attachment-list"])):h("",!0)]),f("div",B,[w(s,{type:"primary",class:"submit-btn",onClick:X},{default:v((()=>[N("同意拍摄")])),_:1})])]),y(Q)?(m(),p(y(a),{key:0,show:y(Q),"onUpdate:show":t[2]||(t[2]=e=>b(Q)?Q.value=e:null),"content-list":y(K),"is-only-view":"","active-index":0,text:"我已阅读","force-read-cound":0,onSubmit:t[3]||(t[3]=()=>Q.value=!1),onOnCloseFilePreviewByMask:t[4]||(t[4]=()=>Q.value=!1)},null,8,["show","content-list"])):h("",!0)]})),_:1})}}}),[["__scopeId","data-v-65fca035"]]);export{A as default};

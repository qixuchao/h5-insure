import{d as a,i as e,z as s,o as l,c as u,a as t,f as n,u as i,q as o,b as r,w as d,a8 as c,e as p,c5 as v,m,F as f,_ as b,c6 as g,an as y,bh as h,c7 as C,a2 as S,c8 as w}from"./index-27d17939.js";const _={class:"sign-wrap"},k=["src"],T={class:"popup-body"},I={class:"sign-container-wrap"},V={class:"operate-bar"},O={class:"btns"},R=a({name:"sign"});var z=b(a({...R,props:{option:{default:{}},modelValue:{default:""}},emits:["update:modelValue","submitSign"],setup(a,{expose:b,emit:S}){const w=a,R=e(!1),z=e(),P=e(""),j=e(!0),x=()=>{var a;R.value=!0,null==(a=z.value)||a.clear(),setTimeout((()=>{var a;null==(a=z.value)||a.setDataURL(P.value),w.modelValue?j.value=!1:j.value=!0}))},F=()=>{g({images:[P.value],className:"customer-sign-preview"})},N=()=>{R.value=!1},E=()=>{var a,e;null==(e=null==(a=z.value)?void 0:a.clear)||e.call(a),P.value="",j.value=!0,S("update:modelValue","")},L=()=>{var a;P.value=null==(a=z.value)?void 0:a.save(),S("update:modelValue",P.value),S("submitSign",P.value),R.value=!1};return s((()=>w.modelValue),(()=>{P.value=w.modelValue}),{immediate:!0}),b({rewrite:E,openSign:x}),(a,e)=>{const s=y,b=h,g=C;return l(),u(f,null,[t("div",_,[n(a.$slots,"signImg",{data:i(P)},(()=>[i(P)?(l(),u("img",{key:0,class:"preview-sign",src:i(P),alt:"",onClick:F},null,8,k)):o("",!0),r(s,{type:"primary",round:"",size:"small",onClick:x},{default:d((()=>[c(p(i(P)?"重新签名":"点击签字"),1)])),_:1})]),!0)]),r(g,{show:i(R),"onUpdate:show":e[1]||(e[1]=a=>m(R)?R.value=a:null),position:"bottom",style:{height:"100%",overflow:"hidden"}},{default:d((()=>[t("div",T,[t("div",I,[r(v,{ref_key:"signRef",ref:z,placeholder:"请在此处签名",onStroke:e[0]||(e[0]=a=>j.value=!1)},null,512),t("div",V,[t("span",null,[r(b,{name:"info",color:"#ffaf22"}),c(" 请投保人正楷签署您的签名:")]),t("div",O,[r(s,{type:"default",class:"btn",onClick:N},{default:d((()=>[c("返回")])),_:1}),r(s,{type:"default",class:"btn",onClick:E},{default:d((()=>[c("重写")])),_:1}),r(s,{type:"primary",class:"btn",disabled:i(j),onClick:L},{default:d((()=>[c("确定签字")])),_:1},8,["disabled"])])])])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-6461f207"]]);const P=a=>S({url:"/api/app/insure/insurance/customerFace",method:"POST",data:a}),j=a=>S({url:"/api/app/insure/insurance/saveCustomerFaceResult",method:"POST",data:a}),x=(a,e,s,l,u)=>{const t={bizObjectType:a,bizObjectId:u,docCategory:"ELECTRIC_SIGN",docType:"png",fileBase64:e,docName:`${w[a]}电子签名`,orderId:s,tenantId:l};return S({url:"/api/app/insure/insurance/saveCustomerSignResult",method:"POST",data:t})},F=(a={})=>S({url:"/api/app/insure/insurance/signatureConfirm",method:"POST",data:a});export{z as S,F as a,P as b,j as f,x as s};

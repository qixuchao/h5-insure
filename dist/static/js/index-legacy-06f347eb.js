!function(){var e=document.createElement("style");e.innerHTML=".com-product-list-wrapper .content[data-v-cd47605e]{padding:0 var(--zaui-card-border, .4rem)}.com-product-list-wrapper .premium-total[data-v-cd47605e]{padding:0 var(--zaui-card-border, .4rem);font-size:.34667rem;font-weight:400;color:#333;margin:.26667rem 0 .4rem}.com-product-list-wrapper .premium-total .premium[data-v-cd47605e]{color:var(--zaui-price, #ff5840);font-weight:600}.com-product-list-wrapper .risk-item-wrapper[data-v-cd47605e]{margin:var(--zaui-card-border, .4rem);background-color:#f6f6fa;border-radius:.26667rem}.com-product-list-wrapper .risk-item-wrapper[data-v-cd47605e] .card-title .van-cell{background-color:#f6f6fa;padding-bottom:0;border-radius:.26667rem}.com-product-list-wrapper .risk-item-wrapper[data-v-cd47605e] .card-title:after{display:none}.com-product-list-wrapper .risk-item-wrapper .premium[data-v-cd47605e]{color:var(--zaui-price, #ff5840);font-weight:600}.com-product-list-wrapper .risk-item-wrapper .risk-premium[data-v-cd47605e]{color:#333;font-weight:400;font-size:.34667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor[data-v-cd47605e]{display:flex;justify-content:space-between;margin-bottom:.26667rem;border-bottom:1px dashed #EEEFF4}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor[data-v-cd47605e]{display:flex;flex-direction:column;align-items:center;padding:.37333rem 0 .26667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor .factor-value[data-v-cd47605e]{width:100%;text-align:center;font-size:.37333rem;font-family:Arial-BoldMT,Arial,self;font-weight:400;color:#393d46;line-height:.42667rem;margin-bottom:.10667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor .factor-name[data-v-cd47605e]{width:100%;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC,serif;font-weight:400;color:#99a9c0;line-height:.44rem}.com-product-list-wrapper .risk-item-wrapper .operate-bar[data-v-cd47605e]{display:flex;align-content:center;justify-content:flex-end;padding-bottom:.26667rem}.com-product-list-wrapper .risk-item-wrapper .operate-bar .border[data-v-cd47605e]{border:.02667rem solid #e6e6eb}.com-product-list-wrapper .risk-item-wrapper .operate-bar[data-v-cd47605e] .com-check-btn{margin-left:.21333rem;background-color:#fff}.com-product-list-wrapper .risk-item-wrapper .operate-bar .btn-rider-risk[data-v-cd47605e]{display:flex;align-items:center}.com-product-list-wrapper .risk-item-wrapper .operate-bar .btn-rider-risk .btn-plus[data-v-cd47605e]{font-size:.48rem;margin:0 .13333rem .13333rem}.page-create-wrapper[data-v-4f24fb6d]{background-color:var(--zaui-global-bg, #f2f5fc)}.page-create-wrapper .border-radius[data-v-4f24fb6d]{border-radius:var(--zaui-border-radius-card, .26667rem)}.page-create-wrapper .border-radius .plan-name[data-v-4f24fb6d]{font-weight:600}.page-create-wrapper[data-v-4f24fb6d] .com-card-wrap{border-radius:var(--zaui-border-radius-card, .26667rem)}.page-create-wrapper[data-v-4f24fb6d] .com-card-wrap .body{padding:0}.page-create-wrapper .container[data-v-4f24fb6d]{padding:.4rem .4rem 2.4rem}.page-create-wrapper .container .operate-bar[data-v-4f24fb6d]{width:100%;justify-content:center;display:flex;margin-top:.26667rem}.page-create-wrapper .container .operate-bar[data-v-4f24fb6d] .com-check-btn{height:.90667rem;width:3.2rem}.page-create-wrapper .footer-bar[data-v-4f24fb6d]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:var(--zaui-card-border, .4rem);display:flex;justify-content:space-between;align-items:center;border-top:1px solid #EEEFF4}.page-create-wrapper .footer-bar .trial-result[data-v-4f24fb6d]{width:5.86667rem;font-size:.45333rem;font-weight:400}.page-create-wrapper .footer-bar .trial-result .result-num[data-v-4f24fb6d]{margin-left:.21333rem;color:var(--zaui-price, #ff5840);font-weight:600}.page-create-wrapper .footer-bar .trial-operate button[data-v-4f24fb6d]{width:3.73333rem}\n",document.head.appendChild(e),System.register(["./index-legacy-d48fadb4.js","./index-legacy-1ff858fa.js","./index-legacy-4f918bb1.js","./createProposal-legacy-71e92b3a.js","./useDicData-legacy-1d200a4e.js","./pdfh5-legacy-9f98dc45.js","./trial-legacy-47c3e936.js","./index-legacy-cfaa3b45.js","./index-legacy-9bcc34c4.js","./trial-legacy-07f83934.js"],(function(e){"use strict";var r,a,t,o,d,i,s,l,p,c,n,u,m,f,v,k,g,b,h,I,w,y,L,R,P,V,_,j,x,C,D,z,E,O,T,S,U,F,N,$,q,A,M,H;return{setters:[function(e){r=e._,a=e.d,t=e.S,o=e.r,d=e.E,i=e.an,s=e.c,l=e.h,p=e.F,c=e.i,n=e.j,u=e.f,m=e.n,f=e.t,v=e.g,k=e.aU,g=e.e,b=e.w,h=e.k,I=e.aV,w=e.aG,y=e.X,L=e.Y,R=e.u,P=e.a,V=e.aE,_=e.b,j=e.aM,x=e.a7,C=e.aj,D=e.y,z=e.P,E=e.aP,O=e.m,T=e.aW,S=e.B},function(e){U=e.A},function(e){F=e.R,N=e.u,$=e.P},function(e){q=e.q,A=e.a,M=e.b},function(e){H=e.u},function(){},function(){},function(){},function(){},function(){}],execute:function(){const B=e=>(y("data-v-cd47605e"),e=e(),L(),e),K={class:"com-product-list-wrapper"},W={class:"risk-item-wrapper"},Y={class:"content"},G={class:"risk-premium"},X={class:"premium"},J={class:"risk-factor"},Q={class:"factor"},Z={class:"factor-value"},ee=B((()=>n("span",{class:"factor-name"}," 保额(元) ",-1))),re={class:"factor"},ae={class:"factor-value"},te=B((()=>n("span",{class:"factor-name"}," 保障期间 ",-1))),oe={class:"factor"},de={class:"factor-value"},ie=B((()=>n("span",{class:"factor-name"}," 缴费期间 ",-1))),se={class:"operate-bar"},le=B((()=>n("span",{class:"btn-plus"},"+",-1))),pe={key:0,class:"premium-total"},ce={class:"premium"};var ne=r(a({__name:"index",props:{productRiskList:{default:()=>[]},productInfo:{default:()=>({})},productData:{default:()=>({})},pickProductPremium:{type:Function,default:()=>{}},productNum:{default:0}},emits:["deleteRisk","updateRisk","addRiderRisk"],setup(e,{emit:r}){const a=e,[y,L]=t(),R=o({checkedList:[],disabledList:[],riderRiskList:[],mainRiskData:{},totalPremium:0,currentRiskRecord:{},productRiskList:[]}),P=H("RISK_PAYMENT_PERIOD"),V=H("RISK_INSURANCE_PERIOD"),_=d((()=>{var e,r;return(null===(e=a.productData)||void 0===e||null===(r=e.productRiskVoList)||void 0===r?void 0:r[0].riskDetailVOList.filter((e=>1===e.collocationType)))||[]})),j=d((()=>{var e,r;const t=a.productRiskList.map((e=>e.riskId)),o=((null===(e=a.productData)||void 0===e||null===(r=e.productRiskVoList)||void 0===r?void 0:r[0].riskDetailVOList)||[]).filter((e=>t.includes(e.id)&&1===e.collocationType));return _.value.length-o.length})),x=d((()=>e=>{var r,t;const o=(null===(r=a.productData)||void 0===r||null===(t=r.productRiskVoList)||void 0===t?void 0:t[0].riskDetailVOList.find((r=>r.id!==e)))||{};let d=!1;return d=!!a.productNum||2===o.riskType&&1===o.collocationType,d})),C=d((()=>{var e,r;return(null===(e=a.productData)||void 0===e||null===(r=e.productRiskVoList)||void 0===r?void 0:r[0].riskDetailVOList.find((e=>1===e.riskType)))||{}})),D=d((()=>C.value.collocationVOList||[])),z=(e,t)=>{const o=e.map((e=>e.id)).filter((e=>!R.value.disabledList.includes(e)));r("addRiderRisk",o,a.productInfo)};return i((()=>a.productInfo),(e=>{var r;let t=0;(e.proposalProductRiskList||[]).forEach((e=>{t+=e.premium})),null===(r=a.pickProductPremium)||void 0===r||r.call(a,{[`${e.productId}`]:t}),R.value.totalPremium=t}),{deep:!0,immediate:!0}),i((()=>a.productRiskList),(e=>{const r=[],a=[],t=[];(e||[]).forEach((e=>{1===e.riskType?r.unshift(e):(a.push(e.riskId),t.push(e.riskId),r.push(e))})),R.value.disabledList=a,R.value.checkedList=t,R.value.productRiskList=r}),{deep:!0,immediate:!0}),(e,t)=>{const o=I,d=w;return s(),l("div",K,[(s(!0),l(p,null,c(v(R).productRiskList,(e=>{var t,i;return s(),l("div",{key:e.riskId},[n("div",W,[u(o,{"risk-type":e.riskType,title:e.riskName,class:"no-border"},null,8,["risk-type","title"]),n("div",Y,[n("div",G,[m(" 保费:"),n("span",X,"￥"+f(null===(t=e.premium)||void 0===t?void 0:t.toLocaleString()),1)]),n("div",J,[n("div",Q,[n("span",Z,f(null===(i=e.amount)||void 0===i?void 0:i.toLocaleString()),1),ee]),n("div",re,[n("span",ae,f(v(k)(v(V),e.coveragePeriod)),1),te]),n("div",oe,[n("span",de,f(v(k)(v(P),e.chargePeriod)),1),ie])]),n("div",se,[v(x)(e.riskId)?(s(),g(d,{key:0,round:32,class:"border",onClick:t=>{r("deleteRisk",e,a.productInfo)}},{default:b((()=>[m("删除")])),_:2},1032,["onClick"])):h("",!0),v(j)?(s(),g(d,{key:1,activated:"",round:32,class:"btn-rider-risk",onClick:r=>{return a=e,L(!0),void(R.value.currentRiskRecord=a);var a}},{default:b((()=>[le,m(" 附加险")])),_:2},1032,["onClick"])):h("",!0),u(d,{activated:"",round:32,onClick:t=>{r("updateRisk",e,a.productInfo)}},{default:b((()=>[m("修改")])),_:2},1032,["onClick"])])])])])})),128)),v(R).productRiskList.length>1?(s(),l("div",pe,[m(" 保费: "),n("span",ce,"￥"+f(v(R).totalPremium.toLocaleString()),1)])):h("",!0),v(y)?(s(),g(F,{key:1,modelValue:v(R).checkedList,"onUpdate:modelValue":t[0]||(t[0]=e=>v(R).checkedList=e),show:v(y),disabled:v(R).disabledList,"risk-list":v(_),"collocation-list":v(D),onFinished:z,onClose:t[1]||(t[1]=e=>v(L)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):h("",!0)])}}}),[["__scopeId","data-v-cd47605e"]]);const ue={class:"container"},me=(e=>(y("data-v-4f24fb6d"),e=e(),L(),e))((()=>n("span",{class:"plan-name"},"计划书名称",-1))),fe={class:"operate-bar"},ve={class:"footer-bar"},ke={class:"trial-result"},ge={class:"result-num"},be={class:"trial-operate"},he=a({__name:"index",setup(e){const r=[{name:"保存修改"},{name:"另存为新计划书"}],[a,k]=t(),[I,y]=t(),L=o({proposalHolder:{},proposalInsuredList:[{name:"",gender:"",birthday:"",proposalInsuredProductList:[]}],proposalName:"",totalPremium:0,relationUserType:2}),F=R(),H=P(),B=N(),{id:K,type:W="add",isCreateProposal:Y}=H.query,G=o({productId:0,productCollection:{},productInfo:{},productPremium:{},riderRisk:{},type:"add",currentRisk:[]}),X=o();o({}),o([]),d((()=>({min:"",max:""})));const J=()=>{X.value.validate().then((()=>{M(L.value).then((({code:e,data:r})=>{"10000"===e&&(B.$reset(),B.proposalId=r,F.push({path:"/compositionProposal",query:{id:r}}))}))}))},Q=()=>{!K&&B.proposalId?y(!0):J()},Z=(e,r)=>{r&&(L.value.id=null),J()},ee=(e,r,a)=>r?/^.{1,20}$/.test(r)?"":`${e}不能超过20个字符`:"",re=(e={})=>{Object.assign(G.value.productPremium,e),L.value.totalPremium=Object.values(G.value.productPremium).reduce(((e,r)=>e+r),0)},ae=(e,r)=>{const a=r;C.confirm({message:"确认删除该险种？"}).then((()=>{1===e.riskType?(L.value.proposalInsuredList[0].proposalInsuredProductList=L.value.proposalInsuredList[0].proposalInsuredProductList.filter((e=>e.productId!==a.productId)),re({[a.productId]:0})):a.proposalProductRiskList=a.proposalProductRiskList.filter((r=>r.riskId!==e.riskId))}))},te=(e,r)=>{G.value.productId=r.productId,G.value.productInfo=r,G.value.type="edit",G.value.currentRisk=[e.riskId],k(!0)},oe=(e,r)=>{G.value.productId=r.productId,G.value.productInfo=r,G.value.type="addRiderRisk",G.value.currentRisk=e,k(!0)},de=e=>{L.value.proposalInsuredList[0].proposalInsuredProductList=L.value.proposalInsuredList[0].proposalInsuredProductList.map((r=>{let a=r;return r.productId===e.proposalInsuredList[0].proposalInsuredProductList[0].productId&&(a={...e.proposalInsuredList[0].proposalInsuredProductList[0]}),a})),k(!1)},ie=()=>{B.setProposalInfo(L.value),B.setTrialData([]),B.setExcludeProduct(Object.keys(G.value.productCollection)),F.push({path:"/proposalList",query:{isCreateProposal:"1",...H.query}})},se=()=>{k(!1)};return V((()=>{const e=B.$state.trialData,r=B.$state.proposalInfo,a=B.$state.proposalId;K&&!Y||a?(((e={})=>{q(e).then((({code:e,data:r})=>{"10000"===e&&Object.assign(L.value,r)}))})({id:K||a}),B.$reset()):!Object.keys(r).length&&e.length?Object.assign(L.value,e[0]):Object.keys(r).length&&e.length?(r.proposalInsuredList[0].proposalInsuredProductList.push(...e[0].proposalInsuredList[0].proposalInsuredProductList),L.value=r):Object.keys(r).length&&!e.length&&(L.value=r),B.setTrialData([])})),i((()=>{var e;return null===(e=L.value.proposalInsuredList[0].proposalInsuredProductList)||void 0===e?void 0:e.length}),(()=>{const e=L.value.proposalInsuredList[0].proposalInsuredProductList.map((e=>({productId:e.productId,source:2})));A({voList:e}).then((({code:e,data:r})=>{"10000"===e&&(G.value.productCollection=r)})).finally((()=>{}))})),(e,t)=>{const o=D,d=z,i=E,k=O,R=T,P=w,V=S,C=U,F=_("ProPageWrap");return s(),g(F,{class:"page-create-wrapper"},{default:b((()=>{var e;return[n("div",ue,[u(R,{ref_key:"formRef",ref:X,"input-align":"right","error-message-align":"right"},{default:b((()=>[u(d,{"show-line":!1},{default:b((()=>[u(o,{modelValue:v(L).proposalName,"onUpdate:modelValue":t[0]||(t[0]=e=>v(L).proposalName=e),class:"border-radius",name:"proposalName",placeholder:"请输入计划书名称",rules:[{validator:(...e)=>ee("计划书名称",...e)}]},{label:b((()=>[me])),_:1},8,["modelValue","rules"])])),_:1}),u(d,{title:"被保人信息"},{default:b((()=>[u(o,{modelValue:v(L).proposalInsuredList[0].name,"onUpdate:modelValue":t[1]||(t[1]=e=>v(L).proposalInsuredList[0].name=e),name:"name",label:"姓名",rules:[{validator:(...e)=>ee("姓名",...e)}],placeholder:"请输入（选填）"},null,8,["modelValue","rules"]),u(i,{modelValue:v(L).proposalInsuredList[0].birthday,"onUpdate:modelValue":t[2]||(t[2]=e=>v(L).proposalInsuredList[0].birthday=e),name:"birthday",label:"出生日期",type:"date","is-link":"",readonly:"",placeholder:"请选择",rules:[{required:!0,message:"请选择"}]},null,8,["modelValue"]),u(o,{modelValue:v(L).proposalInsuredList[0].gender,"onUpdate:modelValue":t[4]||(t[4]=e=>v(L).proposalInsuredList[0].gender=e),name:"gender",label:"性别",class:"border-radius",rules:[{required:!0,message:"请选择"}]},{input:b((()=>[u(k,{modelValue:v(L).proposalInsuredList[0].gender,"onUpdate:modelValue":t[3]||(t[3]=e=>v(L).proposalInsuredList[0].gender=e),options:v(j)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])])),_:1})])),_:1},512),(s(!0),l(p,null,c(v(L).proposalInsuredList[0].proposalInsuredProductList||[],(e=>(s(),g(d,{key:e.productId,"show-line":!1},{default:b((()=>{var r,a;return[u(ne,{"product-risk-list":e.proposalProductRiskList,"product-info":e,"product-num":(null===(r=v(L).proposalInsuredList[0])||void 0===r||null===(a=r.proposalInsuredProductList)||void 0===a?void 0:a.length)-1,"product-data":v(G).productCollection[e.productId],"pick-product-premium":re,onAddRiderRisk:oe,onUpdateRisk:te,onDeleteRisk:ae},null,8,["product-risk-list","product-info","product-num","product-data"])]})),_:2},1024)))),128)),n("div",fe,[u(P,{activated:"",round:34,onClick:ie},{default:b((()=>[m("添加主险")])),_:1})])]),n("div",ve,[n("span",ke,[m("总保费"),n("span",ge,"￥"+f(v(L).totalPremium.toLocaleString()),1)]),n("div",be,[u(V,{type:"primary",onClick:Q},{default:b((()=>[m("保存并预览")])),_:1})])]),v(a)?(s(),g($,{key:0,"is-show":v(a),type:v(G).type,"rider-risk":(null===(e=v(G).riderRisk)||void 0===e?void 0:e[v(G).productId])||[],"product-data":v(G).productCollection[v(G).productId],"form-info":v(G).productInfo,holder:v(L).proposalHolder,insured:v(L).proposalInsuredList[0],"current-risk":v(G).currentRisk,onClose:se,onFinished:de},null,8,["is-show","type","rider-risk","product-data","form-info","holder","insured","current-risk"])):h("",!0),u(C,{show:v(I),"onUpdate:show":t[5]||(t[5]=e=>x(I)?I.value=e:null),actions:r,"cancel-text":"取消","close-on-click-action":"",onCancel:t[6]||(t[6]=e=>v(y)(!1)),onSelect:Z},null,8,["show"])]})),_:1})}}});e("default",r(he,[["__scopeId","data-v-4f24fb6d"]]))}}}))}();

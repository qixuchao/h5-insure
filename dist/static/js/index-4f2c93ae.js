import{m as e,E as a,Q as s,s as l,t as o,y as t,G as r,z as u,H as d,O as i,F as n,L as c,$ as p,r as v,o as h,P as m,B as f,x as g,W as y,I,J as k,a7 as L,a8 as C,a1 as P,v as w,ae as b,V,ac as _,u as x,e as S,a0 as j}from"./vendor-ec128989.js";import{e as U,Z as O}from"./empty-90b46331.js";import{_ as q,W as $,X as B,Z as D,$ as F,a0 as N}from"./index-851d6f85.js";import{u as T,P as W}from"./index-7ccaa833.js";import{P as z}from"./index-095dc584.js";import{q as A}from"./proposalList-27affafc.js";import"./index-85c41e77.js";import"./trial-5fa0ea82.js";import"./useDicData-f1fa0114.js";import"./trial-3ce4ad40.js";const Z={class:"com-product-item"},E={class:"content-wrap"},G={class:"product-image"},H={class:"insure-name"},J={class:"product-info"},Q={class:"title"},R={class:"description"},X={class:"tags"};var K=q(e({props:{productInfo:{default:()=>({})}},setup(e){const v=e,{productInfo:h}=a(v),m=s({checked:!1});return a(m),(e,a)=>{const s=l("van-image");return o(),t("div",Z,[r("div",E,[r("div",G,[u(s,{src:d(h).fileUrl},null,8,["src"]),r("p",H,i(d(h).insurerName),1)]),r("div",J,[r("p",Q,i(d(h).title),1),r("p",R,i(d(h).text),1),r("p",X,[(o(!0),t(n,null,c(d(h).tags,((e,a)=>(o(),t("span",{key:a,class:"tag"},i(e),1)))),128))])]),p(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-a61e69d6"]]);const M=e=>(L("data-v-397146ec"),e=e(),C(),e),Y={class:"com-tab-filter"},ee={class:"article-mid"},ae={class:"article-tag"},se=["onClick"],le={class:"trianele-out"},oe=M((()=>r("span",null,null,-1))),te={class:"popup-inner"},re=M((()=>r("div",{class:"popup-title"},"保险公司",-1))),ue={class:"footer-button"},de=k("重置"),ie=k("确定");var ne=q(e({props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(e,{emit:p}){const{isPopShow:k,openPop:L,closePop:C}=$(!1),P=s({insureList:[],checkedInsure:[]}),{insureList:w,checkedInsure:b}=a(P),V=v(""),_=()=>{b.value=[]},x=()=>{p("onSelectInsure",{selectInsureCode:b.value,selectCategory:V.value}),C()};return h((()=>{B().then((e=>{const{code:a,data:s}=e;"10000"===a&&(w.value=null==s?void 0:s.map((e=>({label:e.abbreviation,value:e.insurerCode}))))}))})),(a,s)=>{const v=l("van-button"),h=l("van-popup");return o(),t("div",Y,[r("div",ee,[r("div",ae,[(o(!0),t(n,null,c(d(D),((e,a)=>(o(),t("div",{key:a,class:m(["tag-item",{checked:V.value==e.value}]),onClick:a=>((e,a)=>{V.value=a,p("onSelectInsure",{selectInsureCode:b.value,selectCategory:V.value})})(null==e||e.value,e.value)},[r("div",{class:m(["tag-out",{checked:V.value==e.value}])},[r("div",{class:m(["tag-item-text",{checked:V.value==e.value}])},i(e.label),3)],2),r("div",le,[r("div",{class:m({triangle:V.value==e.value})},null,2)])],10,se)))),128))]),e.filter?(o(),t("div",{key:0,class:"filter",onClick:s[0]||(s[0]=(...e)=>d(L)&&d(L)(...e))},[oe,r("div",{class:m(["text",{"has-select-condition":d(b).length>0}])},"筛选",2),u(F,{name:"filter"})])):f("",!0),u(h,{show:d(k),position:"right","close-on-click-overlay":"",style:I(e.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:d(C)},{default:g((()=>[r("div",te,[re,u(N,{modelValue:d(b),"onUpdate:modelValue":s[1]||(s[1]=e=>y(b)?b.value=e:null),options:d(w)},null,8,["modelValue","options"])]),r("div",ue,[u(v,{plain:"",type:"primary",onClick:_},{default:g((()=>[de])),_:1}),u(v,{type:"primary",onClick:x},{default:g((()=>[ie])),_:1})])])),_:1},8,["show","style","onClickOverlay"])])])}}}),[["__scopeId","data-v-397146ec"]]);const ce={class:"com-trial-product-wrapper"},pe={class:"container"},ve=(e=>(L("data-v-1cf5306a"),e=e(),C(),e))((()=>r("span",{class:"title"}," 已选产品 ",-1))),he={class:"popup-body"},me={class:"cell-title"},fe={class:"title"};var ge=q(e({props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(e,{emit:a}){const s=e,d=v([]),p=v([]),h=v({isShow:s.isShow}),m=()=>{a("close")},f=()=>{p.value=[],a("checked",[])},y=e=>{var s,l,o;null==(o=null==(l=null==(s=null==d?void 0:d.value)?void 0:s[e])?void 0:l.toggle)||o.call(l),a("checked",p.value)};return P((()=>s.isShow),(e=>{h.value.isShow=e})),P((()=>s.modalValue),((e=[])=>{p.value=e}),{deep:!0,immediate:!0}),(a,s)=>{const v=l("van-checkbox"),I=l("VanCell"),k=l("van-cell-group"),L=l("van-checkbox-group"),C=l("VanPopup");return o(),t("div",ce,[u(C,{show:h.value.isShow,"onUpdate:show":s[1]||(s[1]=e=>h.value.isShow=e),position:"bottom",onClose:m},{default:g((()=>[r("div",pe,[r("div",{class:"popup-header"},[r("span",{class:"clear-all",onClick:f}," 清空选项 "),ve,r("span",{class:"close",onClick:m})]),r("div",he,[u(L,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e)},{default:g((()=>[u(k,{inset:""},{default:g((()=>[(o(!0),t(n,null,c(e.proposalList,(e=>(o(),w(I,{key:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:e.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:a=>y(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":g((()=>[u(v,{ref_for:!0,ref:a=>d.value[e.proposalInsuredList[0].proposalInsuredProductList[0].productId]=a,shape:"square",name:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:b((a=>y(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)),["stop"])},null,8,["name","onClick"])])),title:g((()=>[r("div",me,[r("div",fe,i(e.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-1cf5306a"]]);const ye=e=>(L("data-v-4a6b9c72"),e=e(),C(),e),Ie={class:"search-wrap"},ke={class:"page-proposal-list"},Le={class:"check-button"},Ce={key:1,class:"van-sticky"},Pe={class:"add-plan"},we=k(" 已选"),be={class:"has-select-product"},Ve=k("款产品 "),_e=ye((()=>r("span",{class:"icon"},null,-1))),xe=k("添加计划书");var Se=q(e({props:{isCreateProposal:{type:Boolean,default:!0}},setup(e){const p=s({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0}),{searchValue:h,tagLists:m,isOpen:I,loading:k,finished:L,refreshing:C,productList:P,selectProduct:b,insurerCodeList:q,showCategory:$,productTotal:B,showFooter:D}=a(p),[F,N]=V(),[Z,E]=V(),G=T(),H=_(),J=x(),{isCreateProposal:Q}=J.query,R=v(Q?"repeatAdd":"add"),X=()=>{A({title:h.value,insurerCodeList:q.value,showCategory:$.value,excludeProductIdList:G.$state.excludeProduct||[],pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:l}=e;"10000"===a&&(P.value=null==s?void 0:s.datas,B.value=l)}))},M=e=>{X()},Y=e=>{const{selectInsureCode:a,selectCategory:s}=e;q.value=a,$.value=s,X()},ee=()=>{C.value&&(P.value=[],C.value=!1),X(),k.value=!1,B.value===P.value.length&&(L.value=!0)},ae=()=>{H.push({path:"historyProposalList"})},se=S((()=>{var e;const{birthday:a,gender:s}=(null==(e=G.$state.proposalInfo.proposalInsuredList)?void 0:e[0])||{};return{birthday:a,gender:s}})),le=S((()=>P.value.length>0)),oe=e=>{p.selectProduct=e},te=()=>{const e=p.proposalList.filter((e=>p.selectProduct.includes(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)));G.setTrialData(e),H.push({path:"/proposal/createProposal"})},re=()=>{N(!1)},ue=e=>{if(Q)return p.proposalList.push(e),D.value=!0,p.selectProduct.push(e.proposalInsuredList[0].proposalInsuredProductList[0].productId),void N(!1);G.setTrialData([e]),N(!1),H.push({path:"/proposal/createProposal",query:J.query})},de=()=>{L.value=!0,k.value=!0,ee()};return(e,a)=>{const s=l("van-search"),v=l("van-checkbox"),m=l("van-checkbox-group"),V=l("van-list"),_=l("van-pull-refresh"),x=l("van-button"),S=l("ProPageWrap");return o(),t(n,null,[u(S,{class:"page-proposal"},{default:g((()=>[r("div",Ie,[u(s,{modelValue:d(h),"onUpdate:modelValue":a[0]||(a[0]=e=>y(h)?h.value=e:null),placeholder:"搜索计划书",shape:"round",class:"search",onSearch:M},null,8,["modelValue"]),d(le)?(o(),w(ne,{key:0,filter:d(I),"onUpdate:filter":a[1]||(a[1]=e=>y(I)?I.value=e:null),"filter-class":"filter-area",onOnSelectInsure:Y},null,8,["filter"])):f("",!0)]),r("div",ke,[u(_,{modelValue:d(C),"onUpdate:modelValue":a[4]||(a[4]=e=>y(C)?C.value=e:null),onRefresh:de},{default:g((()=>[u(V,{loading:d(k),"onUpdate:loading":a[3]||(a[3]=e=>y(k)?k.value=e:null),finished:d(L),"finished-text":d(le)?"- 已经到底了哦 -":"",onLoad:ee},{default:g((()=>[(o(!0),t(n,null,c(d(P),(e=>(o(),w(K,{key:e.id,"product-info":null==e?void 0:e.showConfig,onClick:a=>{return s=e,D.value=!1,p.productId=s.productId,void N(!0);var s}},j({_:2},[d(Q)?{name:"checkedProduct",fn:g((()=>[r("div",Le,[u(m,{modelValue:d(b),"onUpdate:modelValue":a[2]||(a[2]=e=>y(b)?b.value=e:null)},{default:g((()=>[u(v,{name:e.productId,shape:"square"},null,8,["name"])])),_:2},1032,["modelValue"])])]))}:void 0]),1032,["product-info","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])]),d(le)?f("",!0):(o(),w(O,{key:0,"empty-img":d(U),title:"没有找到相关内容~","empty-class":"empty-select"},null,8,["empty-img"])),d(Q)&&d(D)?(o(),t("div",Ce,[r("div",Pe,[r("p",{class:"has-select",onClick:a[5]||(a[5]=e=>d(E)(!d(Z)))},[we,r("span",be,i(d(b).length),1),Ve,_e]),u(x,{type:"primary",disabled:!d(b).length,onClick:te},{default:g((()=>[xe])),_:1},8,["disabled"])])])):f("",!0),u(ge,{modelValue:d(b),"onUpdate:modelValue":a[6]||(a[6]=e=>y(b)?b.value=e:null),"proposal-list":d(p).proposalList,"is-show":d(Z),onClose:a[7]||(a[7]=e=>d(E)(!1)),onChecked:oe},null,8,["modelValue","proposal-list","is-show"]),d(F)?(o(),w(W,{key:2,"is-show":d(F),type:R.value,insured:d(se),"product-id":d(p).productId,onClose:re,onFinished:ue},null,8,["is-show","type","insured","product-id"])):f("",!0)])),_:1}),d(Q)?f("",!0):(o(),w(z,{key:0,"button-image":d("/static/assets/lishijihuashu.b3e3552e.png"),onClick:ae},null,8,["button-image"]))],64)}}}),[["__scopeId","data-v-4a6b9c72"]]);export{Se as default};

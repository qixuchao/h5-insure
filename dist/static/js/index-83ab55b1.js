import{reactive as e,onBeforeMount as t,onMounted as l,watch as a,ref as u,inject as i,computed as o,provide as n,nextTick as r}from"vue";import{d as s}from"./debounce-6981b306.js";import{c as d}from"./cloneDeep-6abacc69.js";import{_ as c,O as V,Q as p,K as m,R as f,u as k,a as v,j as I,G as y,T as h,b as g,p as L}from"./index-deb4ddfb.js";import{a as C,P as b}from"./index-9ba6d482.js";import{_ as R}from"./index-11981141.js";import{_ as N}from"./box-title-70dc1627.js";import{_ as E}from"./index-97a63e34.js";import{_ as x}from"./empty-ae586b6c.js";import{R as B}from"./trial-a75330fd.js";import{u as P,b as S,p as T,q as O,c as w}from"./trial-90e504aa.js";import{i as D,b as F}from"./isObjectLike-a9798079.js";import{u as _}from"./useOrder-d6d1fc9b.js";import{t as M}from"./utils-8df944cf.js";import{P as Y,B as A}from"./constants-7afb7c3d.js";import{n as j}from"./nextStep-0d38f4c6.js";function U(e){return function(e){return"number"==typeof e||D(e)&&"[object Number]"==F(e)}(e)&&e!=+e}const $={key:0},X={key:0,class:"risk2-field"},q=Vue.defineComponent({name:"ProductRiskList"});var K=c(Vue.defineComponent({...q,props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:""})},showMainRisk:{type:Boolean,default:()=>!0},defaultValue:{type:Object,default:()=>{}}},emits:["trialChange"],setup(u,{emit:i}){const o=u,n=e({loading:!1,show:!0,select:{},list:[],userData:{},riskIsInsure:{},submitData:{},disabledRiskInfo:[],risksDefaultValue:{}}),r=e=>{const t=[];return e.riskLiabilityInfoVOList.map((e=>(1!=+e.showFlag&&t.push({...e}),[]))),t},s=(e,t,l)=>{var a;n.riskIsInsure[t].data=e;const u=[...n.disabledRiskInfo];null==(a=o.dataSource.insureProductRiskVOList)||a.forEach((e=>{if(1!==e.mainRiskFlag){const t=n.riskIsInsure[e.riskId];t.data&&Object.keys(t.data).length>0&&"1"===t.selected&&u.push(t.data)}})),i("trialChange",u,l)},d=(e,t)=>{var l;null==(l=o.dataSource.productRiskRelationVOList)||l.forEach((l=>{1!==l.collocationType&&(t.riskId===l.riskId?(n.riskIsInsure[t.riskId]&&n.riskIsInsure[t.riskId].selected,2===l.collocationType&&n.riskIsInsure[l.collocationRiskId]&&(n.riskIsInsure[l.collocationRiskId].selected=e),3===l.collocationType&&n.riskIsInsure[l.collocationRiskId]&&"1"===e&&(n.riskIsInsure[l.collocationRiskId].selected="1"===e?"2":"1")):t.riskId===l.collocationRiskId&&(3===l.collocationType&&"1"===e&&n.riskIsInsure[l.riskId]&&(n.riskIsInsure[l.riskId].selected="1"===e?"2":"1"),2===l.collocationType&&n.riskIsInsure[l.riskId]&&(n.riskIsInsure[l.riskId].selected=e)))})),"2"===e?s({},t.riskId):(e=>{var t,l,a,u,i,o,n,d,c,V,p,m;if(1!==(null==e?void 0:e.factorDisPlayFlag)){const f=null==(t=null==e?void 0:e.productRiskInsureLimitVO)?void 0:t.amountPremiumConfigVO,k={riskCategory:e.riskCategory,riskCode:e.riskCode,riskName:e.riskName,riskId:e.riskId,riskType:e.riskType,mainRiskId:e.mainRiskId,mainRiskCode:e.mainRiskCode,liabilityList:r(e)};k.chargePeriod=(null==(a=null==(l=null==e?void 0:e.productRiskInsureLimitVO)?void 0:l.paymentPeriodValueList)?void 0:a.length)>0&&(null==(u=null==e?void 0:e.productRiskInsureLimitVO)?void 0:u.paymentPeriodValueList[0].code)||null,k.coveragePeriod=(null==(o=null==(i=null==e?void 0:e.productRiskInsureLimitVO)?void 0:i.insurancePeriodValueList)?void 0:o.length)>0&&(null==(n=null==e?void 0:e.productRiskInsureLimitVO)?void 0:n.insurancePeriodValueList[0].code)||null,k.paymentFrequency=(null==(c=null==(d=null==e?void 0:e.productRiskInsureLimitVO)?void 0:d.paymentFrequencyList)?void 0:c.length)>0&&(null==(V=null==e?void 0:e.productRiskInsureLimitVO)?void 0:V.paymentFrequencyList[0].code)||null;let v=0;1===f.displayType?v=(null==f?void 0:f.minStepValue)>0?null==f?void 0:f.minStepValue:0:3===f.displayType&&2===f.requireCopies?v=(null==(p=null==f?void 0:f.displayValues)?void 0:p.length)>0?null==f?void 0:f.displayValues[0].value:0:3===f.displayType&&1===f.requireCopies?(v=(null==(m=null==f?void 0:f.displayValues)?void 0:m.length)>0?null==f?void 0:f.displayValues[0].value:0,k.copy=f.minCopiesValue):2===f.displayType?k.copy=f.minCopiesValue:v=0,1===f.saleMethod?k.initialAmount=v:k.initialPremium=v,s(k,e.riskId)}})(t)};return t((()=>{(()=>{var e,t;n.disabledRiskInfo=[];let l=null;if(null==(e=o.dataSource.insureProductRiskVOList)||e.forEach((e=>{var t;const a=1!==e.mainRiskFlag?null==(t=o.dataSource.productRiskRelationVOList)?void 0:t.find((t=>t.collocationRiskId===e.riskId)):{};1===e.mainRiskFlag&&(l=e),n.riskIsInsure[e.riskId]?(n.riskIsInsure[e.riskId].data=null,n.riskIsInsure[e.riskId].relation=a,n.riskIsInsure[e.riskId].isMust=!1):n.riskIsInsure[e.riskId]={selected:"2",data:null,relation:a,isMust:!1}})),l){const e=null==(t=o.dataSource.productRiskRelationVOList)?void 0:t.filter((e=>e.riskId===l.riskId));if(!e)return;null==e||e.forEach((e=>{var t,l,a,u,i,d,c,V,p,m,f,k,v,I,y;if(2===e.collocationType){n.riskIsInsure[e.collocationRiskId].selected="1",n.riskIsInsure[e.collocationRiskId].isMust=!0;const h=null==(t=o.dataSource.insureProductRiskVOList)?void 0:t.find((t=>e.collocationRiskId===t.riskId));if(h&&1!==h.factorDisPlayFlag&&(null==(l=null==h?void 0:h.productRiskInsureLimitVO)?void 0:l.amountPremiumConfigVO)){const t=null==(a=h.riskLiabilityInfoVOList)?void 0:a.every((e=>1!==e.showFlag)),l=null==(u=null==h?void 0:h.productRiskInsureLimitVO)?void 0:u.amountPremiumConfigVO;if(t){n.riskIsInsure[e.collocationRiskId].isDisabled=!0;const t={riskCategory:h.riskCategory,riskCode:h.riskCode,riskName:h.riskName,riskId:h.riskId,riskType:h.riskType,mainRiskId:h.mainRiskId,mainRiskCode:h.mainRiskCode,liabilityList:r(h)};t.chargePeriod=(null==(d=null==(i=null==h?void 0:h.productRiskInsureLimitVO)?void 0:i.paymentPeriodValueList)?void 0:d.length)>0&&(null==(c=null==h?void 0:h.productRiskInsureLimitVO)?void 0:c.paymentPeriodValueList[0].code)||null,t.coveragePeriod=(null==(p=null==(V=null==h?void 0:h.productRiskInsureLimitVO)?void 0:V.insurancePeriodValueList)?void 0:p.length)>0&&(null==(m=null==h?void 0:h.productRiskInsureLimitVO)?void 0:m.insurancePeriodValueList[0].code)||null,t.paymentFrequency=(null==(k=null==(f=null==h?void 0:h.productRiskInsureLimitVO)?void 0:f.paymentFrequencyList)?void 0:k.length)>0&&(null==(v=null==h?void 0:h.productRiskInsureLimitVO)?void 0:v.paymentFrequencyList[0].code)||null;let a=0;1===l.displayType?a=(null==l?void 0:l.minStepValue)>0?null==l?void 0:l.minStepValue:0:3===l.displayType&&2===l.requireCopies?a=(null==(I=null==l?void 0:l.displayValues)?void 0:I.length)>0?null==l?void 0:l.displayValues[0].value:0:3===l.displayType&&1===l.requireCopies?(a=(null==(y=null==l?void 0:l.displayValues)?void 0:y.length)>0?null==l?void 0:l.displayValues[0].value:0,t.copy=l.minCopiesValue):2===l.displayType&&(t.copy=l.minCopiesValue),1===l.saleMethod?t.initialAmount=a:t.initialPremium=a,n.disabledRiskInfo.push(t),s(t,h.riskId)}}}3===e.collocationType&&(n.riskIsInsure[e.collocationRiskId].selected="2",n.riskIsInsure[e.collocationRiskId].isMust=!0)}))}})()})),l((()=>{n.loading=!0})),a((()=>n.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),a((()=>o.defaultValue),(e=>{(null==e?void 0:e.length)>0&&e.forEach((e=>{n.risksDefaultValue[e.riskCode]=e,n.riskIsInsure[e.riskId]?(n.riskIsInsure[e.riskId].selected="1",s(e,e.riskId)):n.riskIsInsure[e.riskId]={selected:"1",isMust:!1}}))}),{deep:!0,immediate:!0}),(e,t)=>{const l=Vue.resolveComponent("van-switch"),a=Vue.resolveComponent("VanField");return Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(u.dataSource.insureProductRiskVOList,(t=>{var i,o;return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:t.riskCode},[(!u.showMainRisk&&1!==t.mainRiskFlag||u.showMainRisk)&&(null==(o=null==(i=Vue.unref(n).riskIsInsure)?void 0:i[t.riskId])?void 0:o.relation)?(Vue.openBlock(),Vue.createElementBlock("div",$,[Vue.createVNode(a,{modelValue:Vue.unref(n).riskIsInsure[t.riskId].selected,"onUpdate:modelValue":e=>Vue.unref(n).riskIsInsure[t.riskId].selected=e,label:t.riskName,name:"selected","label-width":"50%",border:!1,class:"risk-select-field risk-name"},{input:Vue.withCtx((()=>[Vue.createVNode(l,{modelValue:Vue.unref(n).riskIsInsure[t.riskId].selected,"onUpdate:modelValue":e=>Vue.unref(n).riskIsInsure[t.riskId].selected=e,"active-value":"1","inactive-value":"2",size:"0.74rem",disabled:Vue.unref(n).riskIsInsure[t.riskId].isMust,style:{"margin-right":"8px"},onChange:e=>d(e,t)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"]),"1"===Vue.unref(n).riskIsInsure[t.riskId].selected?(Vue.openBlock(),Vue.createElementBlock("div",X,[Vue.createVNode(R,{modelValue:Vue.unref(n).riskIsInsure[t.riskId].data,"onUpdate:modelValue":e=>Vue.unref(n).riskIsInsure[t.riskId].data=e,"origin-data":t,"product-factor":u.dataSource.productFactor,"default-value":Vue.unref(n).risksDefaultValue[t.riskCode],onTrialChange:(e,l)=>s(e,t.riskId,l)},null,8,["modelValue","onUpdate:modelValue","origin-data","product-factor","default-value","onTrialChange"])])):Vue.createCommentVNode("",!0),1===t.exemptFlag&&"1"===Vue.unref(n).riskIsInsure[t.riskId].selected?Vue.renderSlot(e.$slots,"holderForm",{key:1},void 0,!0):Vue.createCommentVNode("",!0)])):Vue.createCommentVNode("",!0)],64)})),128)}}}),[["__scopeId","data-v-04703dac"]]);const z={class:"pro-radio-wrap"},Q=Vue.defineComponent({name:"PlanSelect"}),H=Vue.defineComponent({...Q,props:{planList:{default:()=>[]},defaultPlan:{default:()=>{}}},emits:["planChange"],setup(e,{emit:t}){const a=e,u=Vue.ref("");let i=!1;return l((()=>{a.defaultPlan&&(i=!0,u.value=a.defaultPlan.planCode)})),Vue.watch((()=>u),(e=>{i||t("planChange",u.value),i&&(i=!1)}),{deep:!0,immediate:!0}),(e,t)=>{const l=Vue.resolveComponent("ProRadioButton"),i=Vue.resolveComponent("ProField");return e.planList.length>0?(Vue.openBlock(),Vue.createBlock(i,{key:0,modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),label:"保障计划",name:"planCode",class:"risk-select-field"},{input:Vue.withCtx((()=>[Vue.createElementVNode("div",z,[Vue.createVNode(l,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),options:a.planList.map((e=>({label:e.planName,value:e.planCode})))},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):Vue.createCommentVNode("",!0)}}});var W=c(Vue.defineComponent({__name:"ScrollWrap",props:{moduleValue:{type:Number,default:0},scrollX:{type:Boolean,default:!1},scrollY:{type:Boolean,default:!1}},emits:["update:modelValue","update:needFixed"],setup(t,{emit:n}){const r=t,s=e({offsetX:0,offsetY:0,startX:0,startY:0}),d=u(null),c=u(null),{width:m,height:f}=V(d),{width:k,height:v}=V(c),I=i("PRO_TABLE_KEY"),y=o((()=>{const e=m.value>k.value+4;return n("update:needFixed",e),e})),h=o((()=>f.value>v.value+4)),{direction:g}=p(d,{passive:!1,onSwipeStart(e){const{clientX:t,clientY:l}=e.touches[0];s.startX=t,s.startY=l},onSwipe(e){const{clientX:t,clientY:l}=e.touches[0];if(["LEFT","RIGHT"].includes(g.value)){const e=s.offsetX-(s.startX-t);e>-m.value+k.value&&e<0&&(s.offsetX=e,I.state.offsetX=s.offsetX),s.startX=t}if(["UP","DOWN"].includes(g.value)){const e=s.offsetY-(s.startY-l);e>-f.value+v.value&&e<0&&(s.offsetY=e,I.state.offsetY=s.offsetY),s.startY=l}},onSwipeEnd(e){}}),L=o((()=>r.scrollX||r.scrollY?`transform: translate(${r.scrollX?`${s.offsetX}px`:0},${r.scrollY?`${s.offsetY}px`:0} );`:""));return a((()=>null==I?void 0:I.state),(()=>{const{offsetX:e,offsetY:t}=(null==I?void 0:I.state)||{};y.value&&(s.offsetX=e),h.value&&(s.offsetY=t)}),{deep:!0,immediate:!0}),l((()=>{var e;c.value=null==(e=d.value)?void 0:e.parentElement})),(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",{ref_key:"swiperEl",ref:d,class:"scroll-wrap",style:Vue.normalizeStyle(Vue.unref(L))},[Vue.renderSlot(e.$slots,"default",{},void 0,!0)],4))}}),[["__scopeId","data-v-0ba94815"]]);const G={class:"pro-com-table-wrap"},J={ref:"tableHeadRef",class:"com-table"},Z={class:"com-table-head"},ee={class:"com-table-row"},te={ref:"tableBodyRef",class:"com-table"},le={class:"com-table-head"},ae={class:"com-table-row"},ue={class:"com-table-body"};var ie=c(Vue.defineComponent({__name:"Table",props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},translateY:{type:Number,default:0}},emits:["update:modelValue","update:needFixed"],setup(e,{emit:t}){const l=e=>{t("update:needFixed",e)};return(t,a)=>(Vue.openBlock(),Vue.createElementBlock("div",G,[Vue.createVNode(W,{ref:"tableScroll",class:"pro-table-head","scroll-x":"","onUpdate:needFixed":l},{default:Vue.withCtx((()=>[Vue.createElementVNode("table",J,[Vue.createElementVNode("thead",Z,[Vue.createElementVNode("tr",ee,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.columns,((e,t)=>(Vue.openBlock(),Vue.createElementBlock("th",{key:t,class:Vue.normalizeClass(["table-cell",`table-cell-${t}`]),style:Vue.normalizeStyle({minWidth:`${e.width||80}px`})},Vue.toDisplayString(e.title),7)))),128))])])],512)])),_:1},512),Vue.createVNode(W,{ref:"tableScroll",class:"pro-table-body","scroll-y":"","scroll-x":""},{default:Vue.withCtx((()=>[Vue.createElementVNode("table",te,[Vue.createElementVNode("thead",le,[Vue.createElementVNode("tr",ae,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.columns,((e,t)=>(Vue.openBlock(),Vue.createElementBlock("th",{key:t,class:Vue.normalizeClass(["table-cell",`table-cell-${t}`]),style:Vue.normalizeStyle({minWidth:`${e.width||80}px`})},Vue.toDisplayString(e.title),7)))),128))])]),Vue.createElementVNode("tbody",ue,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.data,((t,l)=>(Vue.openBlock(),Vue.createElementBlock("tr",{key:l,class:"com-table-row"},[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.columns,((e,a)=>(Vue.openBlock(),Vue.createElementBlock("td",{key:a,class:Vue.normalizeClass(["table-cell"])},[Vue.createElementVNode("span",null,Vue.toDisplayString(e.render?e.render(t,l):t[e.key]),1)])))),128))])))),128))])],512)])),_:1},512)]))}}),[["__scopeId","data-v-f37eb4be"]]);const oe=e=>(Vue.pushScopeId("data-v-0cf962f9"),e=e(),Vue.popScopeId(),e),ne={key:0,class:"pro-table-wrap"},re={key:1,class:"no-data-wrap"},se=[oe((()=>Vue.createElementVNode("img",{src:x,alt:"暂无数据"},null,-1))),oe((()=>Vue.createElementVNode("span",null,"暂无数据～",-1)))];var de=c(Vue.defineComponent({__name:"ProTable",props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]}},setup(t){const l=t;Vue.ref(null),Vue.ref(null);const a=e({translateY:0,translateX:0,offsetX:0,offsetY:0,needFixed:!1});n("PRO_TABLE_KEY",{state:a});const u=Vue.computed((()=>m(l.columns)?l.columns.filter((e=>e.fixed)):[])),i=e=>{a.needFixed=e};return(e,l)=>t.data&&t.data.length?(Vue.openBlock(),Vue.createElementBlock("div",ne,[Vue.createVNode(ie,{"translate-y":Vue.unref(a).translateY,"onUpdate:translateY":l[0]||(l[0]=e=>Vue.unref(a).translateY=e),columns:t.columns,data:t.data,"onUpdate:needFixed":i},null,8,["translate-y","columns","data"]),Vue.unref(a).needFixed?(Vue.openBlock(),Vue.createBlock(ie,{key:0,"translate-y":Vue.unref(a).translateY,"onUpdate:translateY":l[1]||(l[1]=e=>Vue.unref(a).translateY=e),class:"pro-table-fixed",style:{width:"160px"},columns:u.value,data:t.data},null,8,["translate-y","columns","data"])):Vue.createCommentVNode("",!0)])):(Vue.openBlock(),Vue.createElementBlock("div",re,se))}}),[["__scopeId","data-v-0cf962f9"]]);const ce={class:"benefit-table"},Ve=Vue.defineComponent({__name:"BenefitTable",props:{dataSource:{}},setup(e){const t=e,l=o((()=>m(t.dataSource.headers)?t.dataSource.headers.map(((e,t)=>({title:e,key:`header_${t}`,fixed:t<2}))):[])),a=o((()=>m(t.dataSource.dataList)?t.dataSource.dataList.map((e=>{const t={};return e.forEach(((e,l)=>{t[`header_${l}`]=e})),t})):[]));return(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",ce,[Vue.createVNode(de,{columns:Vue.unref(l),data:Vue.unref(a),"is-clone":!0},null,8,["columns","data"])]))}});const pe=e=>(Vue.pushScopeId("data-v-5e4dfbe9"),e=e(),Vue.popScopeId(),e),me={key:0,class:"benefit-container"},fe={key:0,class:"benefit"},ke=pe((()=>Vue.createElementVNode("div",{class:"line"},null,-1))),ve={class:"box-title box-title-chart"},Ie=pe((()=>Vue.createElementVNode("img",{class:"tl",src:N,alt:""},null,-1))),ye=pe((()=>Vue.createElementVNode("img",{class:"transform-z180 tr",src:N,alt:""},null,-1))),he={key:0},ge={class:"box"},Le={class:"box-title"},Ce=pe((()=>Vue.createElementVNode("img",{class:"tl",src:N,alt:""},null,-1))),be=pe((()=>Vue.createElementVNode("img",{class:"transform-z180 tr",src:N,alt:""},null,-1))),Re={class:"box-price"},Ne={class:"text1"},Ee={class:"text2"},xe={key:1},Be={key:2,style:{width:"100%, minWidth: 338px"}},Pe={class:"slider"},Se={style:{flex:"1",margin:"0px 5px"}},Te={class:"custom-button"},Oe=pe((()=>Vue.createElementVNode("p",{class:"slider-dec"},"拖动按钮查看不同年龄保障",-1))),we={class:"btn-two"},De={key:1,class:"benefit-container"},Fe={key:0},_e={class:"benefit"},Me=pe((()=>Vue.createElementVNode("div",{class:"line"},null,-1))),Ye=pe((()=>Vue.createElementVNode("div",null,[Vue.createElementVNode("div",{class:"box"},[Vue.createElementVNode("p",{class:"box-title"},[Vue.createElementVNode("img",{class:"tl",src:N,alt:""}),Vue.createTextVNode(" 保单年度"),Vue.createElementVNode("span",null,"-"),Vue.createTextVNode("年度，被保人"),Vue.createElementVNode("span",null,"-"),Vue.createTextVNode("岁时 "),Vue.createElementVNode("img",{class:"transform-z180 tr",src:N,alt:""})]),Vue.createElementVNode("div",{class:"box-price"})])],-1))),Ae={class:"slider"},je={class:"opt lf"},Ue={style:{flex:"1",margin:"0px 5px"}},$e=pe((()=>Vue.createElementVNode("div",{class:"custom-button"},"0 岁",-1))),Xe={class:"opt rg"},qe=pe((()=>Vue.createElementVNode("p",{class:"slider-dec"},"拖动按钮查看不同年龄保障",-1))),Ke={class:"btn-two"},ze={key:1,class:"empty-box"},Qe=Vue.defineComponent({name:"Benefit"});var He=c(Vue.defineComponent({...Qe,props:{dataSource:{default:()=>({showTypeList:["1"]})},productInfo:{default:()=>null}},setup(e){var t;const l=e,i="1",o="2",n="3",r=u(0),s=u(0),d=u(0),c=u(),V=u(0),p=u(null==(t=l.dataSource.showTypeList)?void 0:t[0]),m=u(),k=e=>{if(!(null==e?void 0:e.benefitRiskResultVOList))return;const t=null==e?void 0:e.benefitRiskResultVOList[r.value];s.value=t.ageBegin+1,V.value=t.ageBegin+1,d.value=t.ageEnd},v=()=>{var e,t,a,u,i,o;const n=null==(t=null==(e=l.dataSource)?void 0:e.benefitRiskResultVOList)?void 0:t[r.value];m.value=null==(i=null==(u=null==(a=l.dataSource)?void 0:a.benefitRiskResultVOList)?void 0:u[r.value].benefitRiskTableResultVOList)?void 0:i[0];const{a:p,year:f}=((e,t)=>{const l=[],a=[];for(let u=e,i=0;u<=t;u++,i++)l.push(u.toString()),a.push(i+1);return{a:l,year:a}})(s.value,d.value),k={index:p.indexOf(V.value.toString()),age:p,year:f,result:null==(o=null==n?void 0:n.benefitRiskItemResultVOList)?void 0:o[0]};c.value=k},I=()=>{V.value>d.value-1||(V.value+=1,v())},y=()=>{V.value>s.value&&(V.value-=1,v())},h=e=>{r.value=e.name,k(l.dataSource),v()};return a((()=>l.dataSource),(e=>{var t;e&&(k(e),v(),p.value=null==(t=e.showTypeList)?void 0:t[0])}),{deep:!0,immediate:!0}),a(V,(()=>{v()})),(e,t)=>{var a;const u=Vue.resolveComponent("ProSvg"),k=Vue.resolveComponent("van-slider"),v=Vue.resolveComponent("van-button"),g=Vue.resolveComponent("van-tab"),L=Vue.resolveComponent("van-tabs"),C=Vue.resolveComponent("ProEmpty");return(null==(a=e.dataSource)?void 0:a.benefitRiskResultVOList)?(Vue.openBlock(),Vue.createElementBlock("div",me,[Vue.createVNode(L,{active:Vue.unref(r),onClickTab:h},{default:Vue.withCtx((()=>{var e;return[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(null==(e=l.dataSource)?void 0:e.benefitRiskResultVOList,((e,a)=>(Vue.openBlock(),Vue.createBlock(g,{key:a,name:a,title:e.riskName},{default:Vue.withCtx((()=>{var e,h,g,L,C,b,R,N,x,B,P,S,T,O,w,D;return[a==Vue.unref(r)?(Vue.openBlock(),Vue.createElementBlock("div",fe,[ke,Vue.withDirectives(Vue.createElementVNode("p",ve,[Ie,Vue.createTextVNode(" 保单年度"),Vue.createElementVNode("span",null,Vue.toDisplayString(null==(g=null==(e=Vue.unref(c))?void 0:e.year)?void 0:g[null==(h=Vue.unref(c))?void 0:h.index]),1),Vue.createTextVNode("年度，被保人"),Vue.createElementVNode("span",null,Vue.toDisplayString(null==(b=null==(L=Vue.unref(c))?void 0:L.age)?void 0:b[null==(C=Vue.unref(c))?void 0:C.index]),1),Vue.createTextVNode("岁时 "),ye],512),[[Vue.vShow,Vue.unref(p)===o]]),Vue.unref(p)===i?(Vue.openBlock(),Vue.createElementBlock("div",he,[Vue.createElementVNode("div",ge,[Vue.createElementVNode("p",Le,[Ce,Vue.createTextVNode(" 保单年度"),Vue.createElementVNode("span",null,Vue.toDisplayString(null==(x=null==(R=Vue.unref(c))?void 0:R.year)?void 0:x[null==(N=Vue.unref(c))?void 0:N.index]),1),Vue.createTextVNode("年度，被保人"),Vue.createElementVNode("span",null,Vue.toDisplayString(null==(S=null==(B=Vue.unref(c))?void 0:B.age)?void 0:S[null==(P=Vue.unref(c))?void 0:P.index]),1),Vue.createTextVNode("岁时 "),be]),Vue.createElementVNode("div",Re,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(null==(O=null==(T=Vue.unref(c))?void 0:T.result)?void 0:O.headers,((e,t)=>{var l,a,u,i,o,n,r,s,d,V;return Vue.openBlock(),Vue.createElementBlock("div",{key:t,style:{width:"33%"}},[Vue.createElementVNode("p",Ne,Vue.toDisplayString(("0"==(null==(o=null==(i=null==(a=null==(l=Vue.unref(c))?void 0:l.result)?void 0:a.dataList)?void 0:i[null==(u=Vue.unref(c))?void 0:u.index])?void 0:o[t])?"0":Vue.unref(f)(Number(null==(V=null==(d=null==(r=null==(n=Vue.unref(c))?void 0:n.result)?void 0:r.dataList)?void 0:d[null==(s=Vue.unref(c))?void 0:s.index])?void 0:V[t])))||"0"),1),Vue.createElementVNode("p",Ee,Vue.toDisplayString(e)+"(元）",1)])})),128))])])])):Vue.createCommentVNode("",!0),Vue.unref(p)===n?(Vue.openBlock(),Vue.createElementBlock("div",xe,[Vue.createVNode(Ve,{"data-source":Vue.unref(m)},null,8,["data-source"])])):Vue.createCommentVNode("",!0),Vue.unref(p)==o?(Vue.openBlock(),Vue.createElementBlock("div",Be,[Vue.createVNode(E,{min:Vue.unref(s),max:Vue.unref(d),current:Vue.unref(V),data:null==(D=null==(w=Vue.unref(c))?void 0:w.result)?void 0:D.benefitRiskItemList},null,8,["min","max","current","data"])])):Vue.createCommentVNode("",!0),Vue.unref(p)!=n?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:3},[Vue.createElementVNode("div",Pe,[Vue.createElementVNode("div",{class:"opt lf",onClick:y},[Vue.createVNode(u,{name:"minus"})]),Vue.createElementVNode("div",Se,[Vue.unref(s)?(Vue.openBlock(),Vue.createBlock(k,{key:0,modelValue:Vue.unref(V),"onUpdate:modelValue":t[0]||(t[0]=e=>Vue.isRef(V)?V.value=e:null),min:Vue.unref(s),max:Vue.unref(d),"bar-height":"8px"},{button:Vue.withCtx((()=>[Vue.createElementVNode("div",Te,Vue.toDisplayString(Vue.unref(V))+" 岁",1)])),_:1},8,["modelValue","min","max"])):Vue.createCommentVNode("",!0)]),Vue.createElementVNode("div",{class:"opt rg",onClick:I},[Vue.createVNode(u,{name:"plus"})])]),Oe],64)):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",we,[l.dataSource.showTypeList.includes(i)?(Vue.openBlock(),Vue.createBlock(v,{key:0,round:"",plain:Vue.unref(p)!==i,type:"primary",class:"btn",onClick:t[1]||(t[1]=e=>p.value=i)},{default:Vue.withCtx((()=>[Vue.createTextVNode("图表展示")])),_:1},8,["plain"])):Vue.createCommentVNode("",!0),l.dataSource.showTypeList.includes(o)?(Vue.openBlock(),Vue.createBlock(v,{key:1,round:"",plain:Vue.unref(p)!==o,type:"primary",class:"btn",onClick:t[2]||(t[2]=e=>p.value=o)},{default:Vue.withCtx((()=>[Vue.createTextVNode("趋势展示")])),_:1},8,["plain"])):Vue.createCommentVNode("",!0),l.dataSource.showTypeList.includes(n)?(Vue.openBlock(),Vue.createBlock(v,{key:2,round:"",plain:Vue.unref(p)!==n,type:"primary",class:"btn",onClick:t[3]||(t[3]=e=>p.value=n)},{default:Vue.withCtx((()=>[Vue.createTextVNode("表格展示")])),_:1},8,["plain"])):Vue.createCommentVNode("",!0)])])):Vue.createCommentVNode("",!0)]})),_:2},1032,["name","title"])))),128))]})),_:1},8,["active"])])):(Vue.openBlock(),Vue.createElementBlock("div",De,[l.productInfo?(Vue.openBlock(),Vue.createElementBlock("div",Fe,[Vue.createVNode(L,{active:Vue.unref(r),onClickTab:h},{default:Vue.withCtx((()=>[(Vue.openBlock(),Vue.createBlock(g,{key:1,name:1,title:e.productInfo.insureProductRiskVOList[0].riskName},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",_e,[Me,Ye,Vue.createElementVNode("div",Ae,[Vue.createElementVNode("div",je,[Vue.createVNode(u,{name:"minus"})]),Vue.createElementVNode("div",Ue,[Vue.createVNode(k,{modelValue:Vue.unref(V),"onUpdate:modelValue":t[4]||(t[4]=e=>Vue.isRef(V)?V.value=e:null),min:0,max:80,"bar-height":"8px",disabled:""},{button:Vue.withCtx((()=>[$e])),_:1},8,["modelValue"])]),Vue.createElementVNode("div",Xe,[Vue.createVNode(u,{name:"plus"})])]),qe,Vue.createElementVNode("div",Ke,[Vue.createVNode(v,{round:"",plain:!0,type:"primary",class:"btn",disabled:""},{default:Vue.withCtx((()=>[Vue.createTextVNode("图表展示")])),_:1}),Vue.createVNode(v,{round:"",plain:!1,type:"primary",class:"btn",disabled:""},{default:Vue.withCtx((()=>[Vue.createTextVNode("趋势展示")])),_:1}),Vue.createVNode(v,{round:"",plain:!1,type:"primary",class:"btn",disabled:""},{default:Vue.withCtx((()=>[Vue.createTextVNode("表格展示")])),_:1})])])])),_:1},8,["title"]))])),_:1},8,["active"])])):(Vue.openBlock(),Vue.createElementBlock("div",ze,[Vue.createVNode(C,{title:"试算结果正在计算中...","empty-class":"empty-select"})]))]))}}}),[["__scopeId","data-v-5e4dfbe9"]]);const We={key:0,class:"head-warning-wrap"},Ge=Vue.createElementVNode("div",{class:"warning-icon"},[Vue.createElementVNode("span",null,"!")],-1),Je={class:"warning-text"},Ze=Vue.defineComponent({name:"HeadWaring"}),et=Vue.defineComponent({...Ze,props:{labels:{default:()=>[]}},setup:e=>(e,t)=>e.labels.length>0?(Vue.openBlock(),Vue.createElementBlock("div",We,[Ge,Vue.createElementVNode("div",Je,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(e.labels,(e=>(Vue.openBlock(),Vue.createElementBlock("span",{key:e},Vue.toDisplayString(e),1)))),128))])])):Vue.createCommentVNode("",!0)}),tt=(e,t,l)=>{const a=e,{holder:u}=l,i=l.insuredList[0],o=(t||"").split("_");if(o.length<2)return t;if(U(Number(o[1])))return t;if(o[1]-=1,1===a.exemptFlag){if("to"===o[0]){let e=0;1===a.exemptType?(null==u?void 0:u.birthday)&&(e=parseInt(""+((new Date).getTime()-new Date(u.birthday).getTime())/31536e6,10)):2===a.exemptType&&(null==i?void 0:i.birthday)&&(e=parseInt(""+(+(new Date).getTime()-new Date(i.birthday).getTime())/31536e6,10)),o[1]=+o[1]-e}o[0]="year"}return o.join("_")},lt=(e,t)=>{const l=[],a={};return null==e||e.forEach((e=>{a[e.riskId]=e})),null==t||t.forEach((e=>{var t,u,i,o;const{collocationType:n,collocationRiskId:r,riskId:s}=e;switch(n){case 2:{const e=null==(t=a[s])?void 0:t.riskName,i=null==(u=a[r])?void 0:u.riskName;l.push(`${e} 和 ${i} 必须同时投保`);break}case 3:{const e=null==(i=a[s])?void 0:i.riskName,t=null==(o=a[r])?void 0:o.riskName;l.push(`${e} 和 ${t} 不能同时投保`);break}}})),l};const at={class:"com-body"},ut={class:"trial-body"},it={class:"container"},ot=(e=>(Vue.pushScopeId("data-v-27c79744"),e=e(),Vue.popScopeId(),e))((()=>Vue.createElementVNode("div",{class:"empty"},null,-1))),nt=Vue.defineComponent({name:"TrialBody"});var rt=c(Vue.defineComponent({...nt,props:{dataSource:{default:()=>[]},productInfo:{default:()=>({productCode:"",productName:"",insurerCode:"",tenantId:"",planList:[]})},tenantProductDetail:{default:()=>({})},hideBenefit:{type:Boolean,default:!1},hidePopupButton:{type:Boolean,default:!1},title:{default:"算一算保费"},defaultData:{default:null},isTrial:{type:Boolean,default:!1},defaultOrder:{default:()=>({})}},emits:["trialStart","trialEnd","update:userData"],setup(u,{expose:i,emit:n}){const c=u,V=Vue.ref(null),p=k();v();const{tenantId:f,templateId:N,preview:E}=p.query,x=Vue.ref(),D=e({loading:!1,show:!1,select:{},list:[],userData:{},riskIsInsure:{},submitData:{},riskList:[{}],mainRiskVO:{},ifPersonalInfoSuccess:!1,trialMsg:"",trialResultPremium:0,trialResult:{initialPremium:0,initialAmount:0},isAniShow:!1,defaultValue:null,isAutoChange:!1,planIndex:0,isSkipFirstTrial:!1,hadSkipFirstTrial:!1,isQuerying:!1,currentPlanCode:""}),F=_();Vue.ref();const U=Vue.ref(),$=Vue.ref(c.dataSource),X=Vue.ref([]),q=e=>{const{holder:t,insuredList:l}=e||{};t&&(D.submitData.holder=t),l&&l.length>0&&l.forEach(((e,t)=>{var l;D.submitData.insuredList&&D.submitData.insuredList.length>t?D.submitData.insuredList[t]=e:((null==(l=D.submitData)?void 0:l.insuredList)||(D.submitData.insuredList=[]),D.submitData.insuredList.push(e))}))},z=o((()=>c.productInfo.planList&&c.productInfo.planList.length>2)),Q=(e,t)=>{if(e){const l=["birthday","age","gender","id"];t.includes("occupationCodeList")&&l.push("occupationClass"),Object.keys(e).forEach((a=>{[...t,...l].includes(a)||(e[a]=null)}))}},W=(e,t=(e=>!0))=>m(e)?e.filter(t).map((e=>e.code)):[],G=()=>{console.log("--current plan = ",$.value),console.log("---current submit = ",D.submitData);const e=d(D.submitData);if(!z.value)return e;const{1:t,2:l,3:a}=$.value.productFactor||{};if(e.holder&&Q(e.holder,W(t)),e.insuredList){const t=["productList","beneficiaryList"],u=W(l,(e=>"2"!==String(e.subModuleType))),i=W(l,(e=>"2"===String(e.subModuleType))),o=m(i),n=W(a),r=m(n);e.insuredList.forEach(((e,l)=>{var a,s;Q(e,[...l>=1&&o?i:u,...t,...r?["insuredBeneficiaryType"]:[]]),(null==(a=e.beneficiaryList)?void 0:a.length)>0&&(r?e.beneficiaryList.forEach((e=>Q(e,n))):e.beneficiaryList.length=0),e.planCode=$.value.planCode;const d=(null==(s=e.productList[0])?void 0:s.riskList)||[],c=$.value.insureProductRiskVOList||[];if(d&&c){const t=d.filter((e=>null!==c.find((t=>t.riskCode===e.riskCode))));e.productList[0].riskList=t}}))}return e},J=Vue.ref(),Z=Vue.ref({}),ee=["annuityDrawDate","coveragePeriod","chargePeriod","paymentFrequency"],te=e=>{var t,l,a,u,i,o;if(null==(l=null==(t=null==e?void 0:e.data)?void 0:t[0])?void 0:l.productRiskDyInsureFactorVOList){const t=[];if(null==(a=$.value)||a.insureProductRiskVOList.forEach((l=>{var a,u;const i=null==(u=null==(a=null==e?void 0:e.data)?void 0:a[0])?void 0:u.productRiskDyInsureFactorVOList.find((e=>e.riskCode===l.riskCode));if(i){l.productRiskInsureLimitVO={...l.productRiskInsureLimitVO,...i};const e=D.riskList.find((e=>e.riskCode===l.riskCode));let a=!1;b.forEach((t=>{if(ee.indexOf(t.valueKey)>=0){const u=l.productRiskInsureLimitVO[t.configKey];if(u&&e){const l=u.find((l=>l.code===e[t.valueKey]));if(l&&2===l.useFlag){const l=u.find((e=>1===e.defaultFlag));e[t.valueKey]=l.code,a=!0}}}})),a&&t.push({...e,...i,riskCode:l.riskCode})}})),t.length>0&&(null==(o=null==(i=null==(u=D.defaultValue)?void 0:u.insuredList)?void 0:i[0])?void 0:o.productList))return t.forEach((e=>{var t,l,a;D.defaultValue.insuredList[0].productList=null==(a=null==(l=null==(t=D.defaultValue)?void 0:t.insuredList)?void 0:l[0])?void 0:a.productList.map((t=>(t.riskList=null==t?void 0:t.riskList.map((t=>(t.riskCode===e.riskCode&&(t=e),t))),t)))})),!1}return!0},le=async(e,t=!0)=>{D.trialMsg="试算中...",D.trialResultPremium=0,D.loading=!0,n("trialStart");let l=!1;if(t){const{code:t}=await P(e);l="10000"===t}!l&&t||(D.isQuerying=!0,c.hideBenefit||S(e).then((e=>{e.data&&e.code===y&&(Z.value=e.data)})).finally((()=>{D.loading=!1})),T(e).then((t=>{var l,a;if(t.data&&t.code===y){(null==(l=null==t?void 0:t.data)?void 0:l.errorInfo)&&h(`${null==(a=null==t?void 0:t.data)?void 0:a.errorInfo}`),D.trialMsg="",D.trialResultPremium=t.data.initialPremium,D.trialResult=t.data;const u={};t.data.riskPremiumDetailVOList&&t.data.riskPremiumDetailVOList.length&&t.data.riskPremiumDetailVOList.forEach((e=>{u[e.riskCode]={initialAmount:e.initialAmount,initialPremium:e.initialPremium}})),J.value=u,n("trialEnd",t.data,e)}})).finally((()=>{D.loading=!1,D.isQuerying=!1})))},ae=s((async()=>{console.log(">>>>>调用试算<<<<<",D.ifPersonalInfoSuccess,x.value.canTrail());const{productCode:e,productName:t}=c.productInfo||{};if(D.ifPersonalInfoSuccess||x.value.canTrail()){D.submitData.productCode=e,D.submitData.productName=t,D.submitData.tenantId=c.productInfo.tenantId,D.riskList=D.riskList.map((e=>(e=>{var t,l,a,u;const i=null==(t=$.value.insureProductRiskVOList)?void 0:t.find((t=>e.riskId===t.riskId));if(i&&1!==i.mainRiskFlag){const t=null==(a=null==(l=$.value)?void 0:l.productRiskRelationVOList)?void 0:a.filter((e=>{var t;if(e.collocationRiskId===i.riskId&&3!==e.collocationType){const l=null==(t=$.value.insureProductRiskVOList)?void 0:t.find((t=>e.riskId===t.riskId));if(l&&l.riskType===B.MAIN_RISK)return!0}return!1})),o=t.length>0?t[0]:null;if(o){const t=null==(u=D.riskList)?void 0:u.find((e=>e.riskId===o.riskId));b.forEach((l=>{l.ruleKey&&i.productRiskInsureLimitVO&&t&&(1===i.productRiskInsureLimitVO[l.ruleKey]&&(e[l.valueKey]=t[l.valueKey]),3===i.productRiskInsureLimitVO[l.ruleKey]&&(1!==i.exemptFlag?e[l.valueKey]=tt(i,t[l.valueKey],D.submitData):e[l.valueKey]=tt(i,t[l.ruleValueKey],D.submitData)))}))}}return e})(e))),D.submitData.insuredList&&D.submitData.insuredList.forEach((l=>{l.productList=[{productCode:e,productName:t,riskList:D.riskList}]}));const l=G();console.log(">>>数据构建<<<",l),await le(l)}}),300),ue=async e=>{var t;const{insuredList:l,isFirstInsuredChange:a}=e;if(q(e),D.ifPersonalInfoSuccess=!0,a){console.log("处理第一被保人修改的dy变化"),D.isQuerying=!0;const e=await O({calcProductFactorList:[{planCode:$.value.planCode,productCode:c.productInfo.productCode,riskEditVOList:[{insureProductRiskVO:null==(t=$.value.insureProductRiskVOList)?void 0:t[0]}]}],...l[0]});if(D.isQuerying=!1,!te(e))return}console.log("投被保人的信息回传 ",e),ae()},ie=async(e,t)=>{var l,a,u,i;if(t){const o=d(e);delete o.insurancePeriodValueList,delete o.paymentFrequencyList,delete o.paymentPeriodValueList;if(ee.indexOf(t.key)>=0&&`${t.oldValue}`!=`${t.newValue}`){const n={};switch(t.key){case"annuityDrawDate":n.changeType=3;break;case"coveragePeriod":n.changeType=2;break;case"chargePeriod":n.changeType=1}const r=null==(a=null==(l=D.submitData)?void 0:l.insuredList)?void 0:a[0],s=null==(i=null==(u=$.value)?void 0:u.insureProductRiskVOList)?void 0:i.find((t=>t.riskCode===e.riskCode));if(!D.isAutoChange){D.isQuerying=!0;const t=await O({calcProductFactorList:[{planCode:$.value.planCode,productCode:c.productInfo.productCode,riskEditVOList:[{insureProductRiskVO:s,insureRiskEditReqVO:{riskId:e.riskId,riskCode:e.riskCode,...o,...n}}]}],...r});D.isQuerying=!1;const l=te(t);return l||(D.isAutoChange=!0),l}D.isAutoChange=!1}}return!0},oe=async(e,t)=>{D.mainRiskVO=e;await ie(e,t)&&(D.riskList.length>0&&(D.riskList[0]=e),console.log("标准险种的信息回传",e),ae())},ne=async(e,t)=>{if(D.riskList=[D.mainRiskVO,...e],console.log("附加险列表数据回传",e),t){const l=e.find((e=>e.riskCode===t.riskCode));if(!(await ie(l,t)))return}ae()},re=e=>{var t,l,a,u;D.userData=e,D.defaultValue=e;const i=(null==(t=e.insuredList)?void 0:t[0].productList.findIndex((e=>e.planCode===$.value.planCode)))||0;D.planIndex=-1===i?0:i,D.riskList=(null==(u=null==(a=null==(l=null==e?void 0:e.insuredList)?void 0:l[0].productList)?void 0:a[D.planIndex])?void 0:u.riskList)||[],le(e,!0)},se=async e=>{var t;if(c.defaultData){const e=c.defaultData.find((e=>e.productCode===c.productInfo.productCode))||c.defaultData[0];re(e),q(null==(t=c.defaultData)?void 0:t[0])}else X.value.push($.value.planCode),await(async()=>{var e;const t=await w({calcProductFactorList:[{planCode:$.value.planCode,productCode:c.productInfo.productCode}]});if(t.data){const l=t.data.find((e=>e.productCode===c.productInfo.productCode))||t.data[0];re(l),q(null==(e=t.data)?void 0:e[0])}})()},de=async e=>{var t,l;const a=c.productInfo.planList.findIndex((t=>t.planCode===e)),u=(null==(l=null==(t=D.defaultValue)?void 0:t.insuredList)?void 0:l[0].productList.findIndex((t=>t.planCode===e)))||0,i=a>=0?c.productInfo.planList[a]:null;i&&(D.currentPlanCode=e,$.value=i,D.planIndex=u>=0?u:0,D.defaultValue.insuredList[0].productList[D.planIndex].riskList=D.riskList,X.value.findIndex((t=>t===e))<0&&X.value.push(e))};t((()=>{var e,t;D.select={},D.list=[],D.userData={},D.riskIsInsure={},D.submitData={},D.riskList=[{}],D.mainRiskVO={},D.ifPersonalInfoSuccess=!1,D.trialMsg="",D.trialResultPremium=0,D.riskIsInsure={},null==(t=null==(e=$.value)?void 0:e.insureProductRiskVOList)||t.forEach((e=>{var t;const l=null==(t=$.value.productRiskRelationVOList)?void 0:t.find((t=>t.collocationRiskId===e.riskId));l&&(D.riskIsInsure[e.riskCode]={selected:"2",data:null,relation:l})}))})),l((()=>{$.value=c.dataSource,D.loading=!0,D.show=!0,D.isAniShow=!0,D.isSkipFirstTrial=!0,D.hadSkipFirstTrial=!1,r((()=>{se()}))}));return i({getTrialSuccessFlag:()=>D.trialResultPremium>0,validate:()=>x.value.validate(!1),validateTrialFields:()=>x.value.validateTrialFields(),validateHolder:e=>{var t;return null==(t=x.value)?void 0:t.validateHolder(e)},getUserData:()=>({...D.userData}),onShare:e=>{var t;D.trialResultPremium&&(null==(t=V.value)||t.validate().then((()=>{Object.assign(F.value,c.defaultOrder,{extInfo:{...F.value.extInfo,buttonCode:A.TRIAL_PREMIUM,pageCode:Y.TRIAL_PREMIUM,templateId:N}});const t=M(c.productInfo,J.value,F.value);j(t,((t,l)=>{l===g.JUMP_PAGE&&(U.value.link=`${window.location.href}&isShare=1&orderNo=${t.orderNo}`,e())})),console.log("---- validate success ----")})))},onNext:()=>{var e;const{productCode:t,productName:l}=c.productInfo;E?I(Y.TRIAL_PREMIUM,p.query):D.trialResultPremium&&(null==(e=V.value)||e.validate().then((()=>{Object.assign(F.value,c.defaultOrder,{extInfo:{templateId:N,...F.value.extInfo,...c.defaultOrder.extInfo||{},buttonCode:A.TRIAL_PREMIUM,pageCode:Y.TRIAL_PREMIUM}}),console.log("dealMixData()",G());const e=M({...G(),productCode:t,productName:l},D.trialResult,F.value);j(e,((e,t)=>{t===g.JUMP_PAGE&&L(e.nextPageCode,{...p.query,orderNo:e.orderNo})})),console.log("---- validate success ----")})),D.loading=!1,D.show=!0,D.isAniShow=!0)},dealMixData:G}),a((()=>D.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),a((()=>D.userData),(e=>{if(e){const{holder:t,insuredList:l}=e||{},a={holder:t,insuredList:l};Object.assign(D.submitData,a),n("update:userData",a)}}),{deep:!0}),a((()=>c.dataSource),(e=>{$.value=e}),{deep:!0,immediate:!0}),(e,t)=>{var l,a,u,i,o,n,r,s;return Vue.openBlock(),Vue.createElementBlock("div",at,[Vue.renderSlot(e.$slots,"trialHead",{},void 0,!0),Vue.createElementVNode("div",ut,[Vue.createVNode(et,{labels:Vue.unref(lt)((null==(l=$.value)?void 0:l.insureProductRiskVOList)||[],$.value.productRiskRelationVOList)},null,8,["labels"]),Vue.createElementVNode("div",it,[!e.hideBenefit&&(null==(a=Z.value)?void 0:a.benefitRiskResultVOList)?(Vue.openBlock(),Vue.createBlock(He,{key:0,class:"benefit-wrap","data-source":Z.value,"product-info":$.value,"show-type-list":Z.value.showTypList},null,8,["data-source","product-info","show-type-list"])):Vue.createCommentVNode("",!0),Vue.unref(z)?(Vue.openBlock(),Vue.createBlock(H,{key:1,"plan-list":e.productInfo.planList,"default-plan":$.value,onPlanChange:de},null,8,["plan-list","default-plan"])):Vue.createCommentVNode("",!0),$.value.productFactor?(Vue.openBlock(),Vue.createBlock(Vue.unref(C),{ref_key:"personalInfoRef",ref:x,key:$.value.planCode,modelValue:Vue.unref(D).userData,"onUpdate:modelValue":t[0]||(t[0]=e=>Vue.unref(D).userData=e),"is-trial":e.isTrial,"product-factor":$.value.productFactor,"multi-insured-config":null==(u=$.value)?void 0:u.multiInsuredConfigVO,onTrailChange:ue},null,8,["modelValue","is-trial","product-factor","multi-insured-config"])):Vue.createCommentVNode("",!0),(Vue.openBlock(),Vue.createBlock(R,{ref_key:"insureInfosRef",ref:V,key:$.value.planCode,"origin-data":null==(i=$.value.insureProductRiskVOList)?void 0:i[0],"product-factor":$.value.productFactor,"default-value":Vue.unref(D).defaultValue?null==(n=null==(o=Vue.unref(D).defaultValue)?void 0:o.insuredList[0].productList[Vue.unref(D).planIndex])?void 0:n.riskList[0]:null,"trial-result":Vue.unref(D).trialResult,onTrialChange:oe},null,8,["origin-data","product-factor","default-value","trial-result"])),$.value.insureProductRiskVOList?(Vue.openBlock(),Vue.createBlock(K,{key:$.value.planCode,"data-source":$.value,"show-main-risk":!1,"default-value":Vue.unref(D).defaultValue?null==(s=null==(r=Vue.unref(D).defaultValue)?void 0:r.insuredList[0].productList[Vue.unref(D).planIndex])?void 0:s.riskList:[],onTrialChange:ne},{holderForm:Vue.withCtx((()=>{var l;return[e.isTrial&&e.dataSource.productFactor?(Vue.openBlock(),Vue.createBlock(Vue.unref(C),{key:0,ref_key:"personalInfoRef",ref:x,modelValue:Vue.unref(D).userData,"onUpdate:modelValue":t[1]||(t[1]=e=>Vue.unref(D).userData=e),"is-trial":e.isTrial,"is-only-holder":!0,"product-factor":e.dataSource.productFactor,"multi-insured-config":null==(l=e.dataSource)?void 0:l.multiInsuredConfigVO,onTrailChange:ue},null,8,["modelValue","is-trial","product-factor","multi-insured-config"])):Vue.createCommentVNode("",!0)]})),_:1},8,["data-source","default-value"])):Vue.createCommentVNode("",!0),ot])]),Vue.renderSlot(e.$slots,"trialBtn",{trialData:Vue.unref(D).submitData,riskPremium:Vue.unref(D).trialResult,loading:Vue.unref(D).isQuerying,personalInfoRef:x.value},void 0,!0)])}}}),[["__scopeId","data-v-27c79744"]]);export{rt as T,U as i};

import{d as e,aE as a,aF as t,u as o,t as n,r as i,o as s,a4 as r,b as l,Y as c,w as d,f as u,e as m,i as f,c as p,W as h,X as v,Z as g,ad as y,g as _,aH as j}from"./index-3300826d.js";import{t as I}from"./SchemaRenderField.vue_vue_type_style_index_0_scoped_true_lang-fe6cebc4.js";/* empty css              */import"./bankCard-07bf592d.js";import{_ as b}from"./index-aa4b8783.js";import{_ as C}from"./PayInfo-32c2cd57.js";import{s as w}from"./phoneVerify-2f15fb99.js";import{g as x,i as V}from"./trial-fa78661d.js";import{_ as O}from"./TrialButton-6ad69654.js";import{n as L}from"./nextStep-576c2fe1.js";import{u as P}from"./useAttachment-f13b9a4a.js";import{a as F,q as k}from"./product-276c1373.js";import{g as T}from"./utils-a8052624.js";import{u as D}from"./useOrder-2c46487b.js";import{p as R}from"./pageJump-ce50f880.js";import{B as N,P as S}from"./constants-7afb7c3d.js";import"./pdfh5-008ca364.js";import"./keysIn-3ff85984.js";import"./isObjectLike-a9798079.js";import"./debounce-eed12388.js";import"./index-99b3573f.js";import"./index-3e34be93.js";import"./core-13a4c4c2.js";import"./constant-c3f28a3b.js";import"./infoCollection-aa0e608b.js";import"./trial-28355e02.js";const q={class:"long-info-collection"},E=e({__name:"infoPreview",setup(e){const E=a((()=>t((()=>import("./index-bcbd5785.js")),["static/js/index-bcbd5785.js","static/css/index-fa4edf2a.css","static/js/index-3300826d.js","static/css/index-ee278efc.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-3e34be93.js","static/css/index-d2586a0a.css","static/js/utils-a8052624.js","static/js/infoCollection-aa0e608b.js","static/js/trial-28355e02.js"]))),U=a((()=>t((()=>import("./index-ff48f28b.js")),["static/js/index-ff48f28b.js","static/css/index-3329e46f.css","static/js/index-3300826d.js","static/css/index-ee278efc.css","static/js/pdfh5-008ca364.js"]))),A=o(),B=D(),{productCode:W="",tenantId:M,agentCode:H="",agencyCode:J,saleChannelId:Q,orderNo:X,extraInfo:Y,insurerCode:Z,preview:z}=A.query;let G={};try{G=JSON.parse(decodeURIComponent(Y))}catch(_e){}const K=n({isView:!1,holder:{formData:{},schema:[],trialFactorCodes:[],config:{name:{},verificationCode:{sendSMSCode:async({mobile:e},a)=>{const t=await w(e),{code:o}=t;"10000"===o&&"function"==typeof a&&a()}},certType:{},certNo:{}}},insuredList:[{formData:{},schema:[],trialFactorCodes:[],config:{relationToHolder:{label:""},certNo:{}}}],payInfo:{schema:[],config:[],formData:[]}}),$=i({imgUrl:"",desc:"",title:"",link:window.location.href}),ee=i(),ae=i(),te=i({}),oe=i({}),ne=i([]),ie=i(),se=i(),re=i(!1),le=i(!1),ce=i(0),de=i(!0),{fileList:ue,mustReadFileCount:me,popupFileList:fe}=P(se,ie),pe=i(!1),he=()=>{le.value=!1,de.value=!0,ne.value.length<1||(re.value=!0)},ve=()=>{re.value=!1,le.value=!1,de.value=!0},ge=async()=>{Object.assign(B.value,{extInfo:{...B.value.extInfo,buttonCode:N.INFO_PREVIEW,pageCode:S.INFO_PREVIEW}}),L(B.value,((e,a)=>{R(e.nextPageCode,A.query)}))},ye=async()=>{F({productCode:W,tenantId:M,isTenant:!z}).then((({data:e,code:a})=>{if("10000"===a){te.value=e,document.title=e.BASIC_INFO.title||"";const{title:a,desc:o,image:n}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{},[i=""]=n||[];t={title:a,desc:o,image:i},$.value={desc:t.desc||"你好，这里是描述",imgUrl:t.image,title:t.title,link:window.location.href},console.log("shareInfo",$.value)}var t})),x({orderNo:X,tenantId:M}).then((({code:e,data:a})=>{"10000"===e&&Object.assign(B.value,a)})),k({productCode:W}).then((({code:e,data:a})=>{var t,o,n,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:s}=a;ie.value=e||[];const{basicInfo:{questionnaireType:r},questions:l,questionnaireName:c}=(null==(t=null==s?void 0:s[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};r&&(ne.value=2===r?[{attachmentName:c,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:c,attachmentUri:null==(o=null==l?void 0:l[0])?void 0:o.content,attachmentType:T(String(null==(n=null==l?void 0:l[0])?void 0:n.textType),null==(i=null==l?void 0:l[0])?void 0:i.content)}])}})),await V({productCode:W,isTenant:!z}).then((({data:e,code:a})=>{var t;if("10000"===a){oe.value=e,se.value=null==(t=e.productPlanInsureVOList)?void 0:t[0];const[a,o,n,i]=I(e.productPlanInsureVOList[0].productFactor||{});K.holder={...K.holder,...a},K.insuredList[0]={...K.insuredList[0],...o[0]},K.payInfo={...K.payInfo,...i}}}))};return s((()=>{ye()})),(e,a)=>{const t=j,o=r("ProPageWrap");return l(),c(o,null,{default:d((()=>[u("div",q,[m(f(b),{ref_key:"holderFormRef",ref:ee,title:"本人信息（投保人）",model:f(K).holder.formData,schema:f(K).holder.schema,config:f(K).holder.config,autocomplete:""},null,8,["model","schema","config"]),(l(!0),p(h,null,v(f(K).insuredList,((e,a)=>(l(),p(h,{key:a},[m(f(b),{ref_for:!0,ref_key:"insuredFormRef",ref:ae,title:"为谁投保（被保人）",model:f(K).insuredList[a].formData,schema:e.schema,config:e.config,autocomplete:""},null,8,["model","schema","config"]),m(f(b),{ref_for:!0,ref_key:"insuredFormRef",ref:ae,title:"受益人",model:f(K).insuredList[a].formData,schema:e.schema,config:e.config,autocomplete:""},null,8,["model","schema","config"])],64)))),128)),f(K).payInfo.schema.length?(l(),c(f(C),{key:0,modelValue:f(K).payInfo.formData,"onUpdate:modelValue":a[0]||(a[0]=e=>f(K).payInfo.formData=e),schema:f(K).payInfo.schema,"is-view":f(K).isView},null,8,["modelValue","schema","is-view"])):g("",!0),m(t,null,{default:d((()=>{var e;return[(null==(e=f(ue))?void 0:e.length)?(l(),c(f(U),{key:0,modelValue:f(pe),"onUpdate:modelValue":a[1]||(a[1]=e=>y(pe)?pe.value=e:null),"attachment-list":f(ue),"is-show-radio":"","pre-text":"投保人阅读并接受",onPreviewFile:a[2]||(a[2]=e=>(e=>{ce.value=e,le.value=!0})(e))},null,8,["modelValue","attachment-list"])):g("",!0)]})),_:1}),m(O,{"is-share":"",premium:0,"share-info":f($),"loading-text":"123","payment-frequency":"1","tenant-product-detail":f(te),onClick:ge},{default:d((()=>[_("下一步")])),_:1},8,["share-info","tenant-product-detail"]),f(le)?(l(),c(f(E),{key:1,show:f(le),"onUpdate:show":a[3]||(a[3]=e=>y(le)?le.value=e:null),"content-list":f(de)?f(ue):f(fe),"is-only-view":f(de),"active-index":f(ce),text:f(de)?"关闭":"我已逐页阅读并确认告知内容","force-read-count":f(de)?0:f(me),onSubmit:he,onOnCloseFilePreviewByMask:ve},null,8,["show","content-list","is-only-view","active-index","text","force-read-count"])):g("",!0)])])),_:1})}}});export{E as default};

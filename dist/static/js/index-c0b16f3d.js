import{G as e,d as t,aY as a,c as n,A as r,E as o,h as l,g as s,k as d,f as i,L as u,i as c,w as p,U as v,V as f,e as m,W as y,bi as I,u as C,a as k,r as b,a1 as g,m as N,B as _,b as h,ad as L,cp as O,y as P,ag as S,cG as D,j as Y,bv as T,D as $,T as j,Q as x,cI as G,cH as R}from"./index-e193e8da.js";import{d as w}from"./order-51988c3c.js";import{f as A}from"./trial-89c66c3a.js";import{g as E,h as q}from"./infoCollection-659b8fd9.js";import{R as H,I as M,P as W,d as B}from"./trial-ff4a49b1.js";import"./pdfh5-008ca364.js";const U={class:"com-field-info"},V={key:0,class:"label"},X={class:"content"};var Z=e(t({__name:"fieldInfo",props:{label:{type:String,default:""},content:{type:String,default:""}},setup(e){const t=a();return(a,u)=>(n(),r("div",U,[e.label?(n(),r("div",V,o(e.label),1)):l("",!0),s(t).label?d(a.$slots,"label",{key:1},void 0,!0):l("",!0),i("div",X,o(e.content),1),s(t).content?d(a.$slots,"content",{key:2},void 0,!0):l("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const F={class:"com-insured-part-wrapper"},J={class:"content-wrapper"},K={class:"product-name"},Q={class:"risk-item"};var z=e(t({__name:"InsuredPart",props:{productData:{default:()=>({})}},setup(e){const t=e,a=u((()=>{var e,a;const n={riderRiskList:[],amount:0},r=null==(e=t.productData)?void 0:e.tenantOrderRiskList.find((e=>e.riskType===H.MAIN_RISK));return Object.assign(n,r),null==(a=t.productData)||a.tenantOrderRiskList.forEach((e=>{n.riderRiskList.push(e.riskName||"")})),n})),l=(e,t)=>-1!==t.indexOf("$")?t.replace("$",`${e}`):`${e||""}${t}`;return(t,d)=>{const u=y,C=I;return n(),r("div",F,[c(C,{title:"保障信息"},{default:p((()=>[i("div",J,[i("div",K,o(e.productData.productName),1),i("div",Q,[c(u,{title:"保障期间",content:l(s(a).insurancePeriodValue,s(M)[s(a).insurancePeriodType])},null,8,["content"]),c(u,{title:"交费期间",content:l(s(a).paymentPeriod,s(W)[s(a).paymentPeriodType])},null,8,["content"]),c(u,{title:"交费方式",content:s(B)[s(a).paymentFrequency]},null,8,["content"]),(n(!0),r(v,null,f(s(a).riderRiskList,((e,t)=>(n(),m(u,{key:t,title:e,content:"投保"},null,8,["title"])))),128)),c(u,{title:"首期保费",class:"price",content:e.productData.premium.toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])])),_:1})])}}}),[["__scopeId","data-v-620b42ef"]]);const ee={key:0,class:"page-order-detail"},te={class:"card"},ae={class:"header"},ne={class:"product-name"},re={class:"company-name"},oe={class:"status"},le={key:0,class:"footer-button"},se={key:1,class:"footer-button"},de={key:2,class:"footer-button"};var ie=e(t({__name:"index",setup(e){const t=C(),a=k(),d=b(),{query:{orderNo:u,agentCode:y,tenantId:I,abbreviation:H,productCategory:M}}=t,W=()=>{$.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{d.value&&w(d.value.id,d.value.orderStatus).then((e=>{const{code:t,data:a}=e;"10000"===t&&j.success("删除成功")}))}))},B=b(!1),U=()=>{var e,t;if(d.value){if((()=>{var e,t;if(!d.value)return!1;const{agencyId:n,saleChannelId:r,orderTopStatus:o}=d.value,l=null==(t=null==(e=d.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;if(!(D.PENDING!==o&&D.PAYING!==o||l!==R.ZXYS&&l!==R.BWYL)){const e={[R.ZXYS]:"/internet/productDetail/package",[R.BWYL]:"/internet/productDetail"};return a.push({path:e[l],query:{productCode:l,saleChannelId:r,agentCode:y,tenantId:I,agencyCode:n,orderNo:u}}),!0}return!1})())return;const{id:n,extInfo:{templateId:r,pageCode:o,extraInfo:l},agencyId:s,venderCode:i,orderStatus:c}=d.value,p={insurerCode:i,productCode:null==(t=null==(e=d.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode,tenantId:d.value.tenantId,agencyCode:d.value.agencyId,agentCode:d.value.agentCode,saleChannelId:null==l?void 0:l.saleChannelId};B.value=!0,A(p).then((e=>{if(console.log("投保链接==",e.data),"10000"===e.code)if([E.LONG,E.NIANJIN].includes(q(`${r}`))){const t=e.data.split("?")[1],n=x.parse(t);a.push({path:G[c],query:{...n,extraInfo:n.extraInfo,orderNo:u}})}else window.location.href=`${e.data}&orderNo=${u}`}))}};return g((()=>{N({orderNo:u,agentCode:y,tenantId:I}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(d.value=a)}))})),(e,t)=>{const a=_,u=h("ProPageWrap"),y=L("loading");return n(),m(u,null,{default:p((()=>{var e,t,u,I,C,k,b,g,N,_,h;return[s(d)?(n(),r("div",ee,[i("div",te,[c(Z,null,{label:p((()=>{var e,t,a,n;return[i("div",ae,[i("div",ne,o(null==(a=null==(t=null==(e=s(d))?void 0:e.tenantOrderInsuredList[0])?void 0:t.tenantOrderProductList[0])?void 0:a.productName),1),i("div",re,o(((null==(n=s(d))?void 0:n.abbreviation)||"").substring(0,6)),1)])]})),content:p((()=>{var e;return[i("div",oe,o(s(d)?s(O)[null==(e=s(d))?void 0:e.orderStatus]:""),1)]})),_:1}),c(Z,{label:"投保单号",content:null==(e=s(d))?void 0:e.orderNo},null,8,["content"]),c(Z,{label:"创建时间",content:s(P)(null==(t=s(d))?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),c(Z,{label:"投保人",content:null==(I=null==(u=s(d))?void 0:u.tenantOrderHolder)?void 0:I.name},null,8,["content"]),(n(!0),r(v,null,f((null==(C=s(d))?void 0:C.tenantOrderInsuredList)||[],((e,t)=>(n(),m(Z,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),c(z,{"product-data":null==(g=null==(b=null==(k=s(d))?void 0:k.tenantOrderInsuredList[0])?void 0:b.tenantOrderProductList)?void 0:g[0],class:"insure-info"},null,8,["product-data"]),S((n(),r("div",null,[(null==(N=s(d))?void 0:N.orderTopStatus)===s(D).PENDING?(n(),r("div",le,[c(a,{type:"primary",onClick:T(W,["stop"])},{default:p((()=>[Y("删除")])),_:1},8,["onClick"]),c(a,{type:"primary",onClick:T(U,["stop"])},{default:p((()=>[Y("去处理")])),_:1},8,["onClick"])])):l("",!0),(null==(_=s(d))?void 0:_.orderTopStatus)===s(D).PAYING?(n(),r("div",se,[c(a,{type:"primary",onClick:T(W,["stop"])},{default:p((()=>[Y("删除")])),_:1},8,["onClick"]),c(a,{type:"primary",onClick:T(U,["stop"])},{default:p((()=>[Y("去支付")])),_:1},8,["onClick"])])):l("",!0),(null==(h=s(d))?void 0:h.orderTopStatus)===s(D).TIMEOUT?(n(),r("div",de,[c(a,{type:"primary",onClick:T(W,["stop"])},{default:p((()=>[Y("删除")])),_:1},8,["onClick"])])):l("",!0)])),[[y,s(B)]])])):l("",!0)]})),_:1})}}}),[["__scopeId","data-v-5b47ffe1"]]);export{ie as default};

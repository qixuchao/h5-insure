import{d as a,r as e,R as l,c as s,A as u,f as t,k as n,g as i,h as o,i as d,w as r,j as c,E as p,bz as v,a2 as m,U as f,bA as b,B as g,ax as y,bB as h,q as w,bC as C}from"./index-e193e8da.js";const k={class:"sign-wrap"},S=["src"],_={class:"popup-body"},V={class:"sign-container-wrap"},I={class:"operate-bar"},T={class:"btns"},R=a({name:"sign"}),j=a({...R,props:{option:{default:{}},modelValue:{default:""}},emits:["update:modelValue","submitSign"],setup(a,{expose:w,emit:C}){const R=a,j=e(!1),x=e(),z=e(""),O=e(!0),B=()=>{var a;j.value=!0,null==(a=x.value)||a.clear(),setTimeout((()=>{var a;null==(a=x.value)||a.setDataURL(z.value),R.modelValue?O.value=!1:O.value=!0}))},E=()=>{b({images:[z.value],className:"customer-sign-preview"})},N=()=>{j.value=!1},U=()=>{var a,e;null==(e=null==(a=x.value)?void 0:a.clear)||e.call(a),z.value="",O.value=!0,C("update:modelValue","")},A=()=>{var a;z.value=null==(a=x.value)?void 0:a.save(),C("update:modelValue",z.value),C("submitSign",z.value),j.value=!1};return l((()=>R.modelValue),(()=>{z.value=R.modelValue}),{immediate:!0}),w({rewrite:U,openSign:B}),(a,e)=>{const l=g,b=y,w=h;return s(),u(f,null,[t("div",k,[n(a.$slots,"signImg",{data:i(z)},(()=>[i(z)?(s(),u("img",{key:0,class:"preview-sign",src:i(z),alt:"",onClick:E},null,8,S)):o("",!0),d(l,{type:"primary",round:"",size:"small",onClick:B},{default:r((()=>[c(p(i(z)?"重新签名":"点击签字"),1)])),_:1})]))]),d(w,{show:i(j),"onUpdate:show":e[1]||(e[1]=a=>m(j)?j.value=a:null),position:"bottom",style:{height:"100%",overflow:"hidden"}},{default:r((()=>[t("div",_,[t("div",V,[d(v,{ref_key:"signRef",ref:x,placeholder:"请在此处签名",onStroke:e[0]||(e[0]=a=>O.value=!1)},null,512),t("div",I,[t("span",null,[d(b,{name:"info",color:"#ffaf22"}),c(" 请投保人正楷签署您的签名:")]),t("div",T,[d(l,{type:"default",class:"btn",onClick:N},{default:r((()=>[c("返回")])),_:1}),d(l,{type:"default",class:"btn",onClick:U},{default:r((()=>[c("重写")])),_:1}),d(l,{type:"primary",class:"btn",disabled:i(O),onClick:A},{default:r((()=>[c("确定签字")])),_:1},8,["disabled"])])])])])])),_:1},8,["show"])],64)}}}),x=a=>w({url:"/api/app/insure/insurance/customerFace",method:"POST",data:a}),z=(a,e,l,s,u)=>{const t={bizObjectType:a,bizObjectId:u,docCategory:"ELECTRIC_SIGN",docType:"png",fileBase64:e,docName:`${C[a]}电子签名`,orderId:l,tenantId:s};return w({url:"/api/app/insure/insurance/saveCustomerSignResult",method:"POST",data:t})};export{j as _,x as f,z as s};

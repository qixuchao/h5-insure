import{d as e,r as a,I as l,v as t,as as s,b as i,Y as o,w as d,e as r,i as u,ad as v,Z as n,f as c,g as A,x as p,ab as f,_ as w,B as m,aZ as C,ae as h}from"./index-3300826d.js";import{t as y}from"./theme-ea709837.js";const B={class:"item"},b={class:"footer"},k=e({name:"filePreview"}),g=e({...k,props:{show:{type:Boolean,default:!1},contentList:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},text:{type:String,default:""},beforeReadOverText:{type:String,default:"同意，下一条"},forceReadCount:{type:Number,default:0}},emits:["update:show","submit","onCloseFilePreview"],setup(e,{emit:k}){const g=e,x=a(g.show),Q=a(!0),U=a(g.contentList.map(((e,a)=>({...e,disabled:!0,readDisabled:!0})))),I=a(g.activeIndex),L=a(0),j=a(null),R=l((()=>{var e,a;return null==(a=null==(e=U.value)?void 0:e[I.value])?void 0:a.attachmentUri})),D=l((()=>{var e;return null==(e=U.value[I.value])?void 0:e.readDisabled})),J=l((()=>!(I.value>=g.forceReadCount-1)&&(!(L.value>=g.forceReadCount)&&(L.value<g.forceReadCount&&I.value!==g.forceReadCount-1)))),F=()=>{I.value+=1},V=()=>{k("update:show",!1),k("submit")};t((()=>g),(()=>{x.value=g.show,I.value=g.activeIndex}),{deep:!0,immediate:!0});const N=e=>{var a,l,t;if(e){const s=(null==(a=e.target)?void 0:a.scrollHeight)||e.scrollHeight,i=(null==(l=e.target)?void 0:l.scrollTop)||e.scrollTop,o=(null==(t=e.target)?void 0:t.clientHeight)||e.clientHeight;Math.floor(s-i-15)<=o&&Q.value&&U.value[I.value].readDisabled&&(U.value[I.value].disabled=!1,U.value[I.value].readDisabled=!1,U.value[I.value+1].disabled=!1,L.value+=1)}};return t((()=>I.value),(()=>{Q.value=!1,g.show&&(L.value>=g.forceReadCount&&U.value.forEach((e=>{e.disabled=!1,e.readDisabled=!1})),setTimeout((()=>{Q.value=!0}),800)),s((()=>{setTimeout((()=>{N(j.value)}),2e3)}))}),{immediate:!0}),(a,l)=>{const t=f,s=w,Q=m,L=C,O=h;return i(),o(O,{show:u(x),"onUpdate:show":l[1]||(l[1]=e=>v(x)?x.value=e:null),class:"file-preview-popup-wrap",closeable:!1,onClose:l[2]||(l[2]=e=>k("onCloseFilePreview"))},{default:d((()=>[r(L,{"theme-vars":u(y),class:"custom-provider"},{default:d((()=>[u(x)?(i(),o(t,{key:0,active:u(I),"onUpdate:active":l[0]||(l[0]=e=>v(I)?I.value=e:null),list:u(U).map(((e,a)=>({title:e.attachmentName,disabled:a!=u(I)&&(e.disabled||!1),slotName:`guarantee-${a}`}))),class:"tab"},null,8,["active","list"])):n("",!0),c("div",{ref_key:"previewRef",ref:j,class:"list",onScroll:N},[c("div",B,[(i(),o(s,{key:u(R),content:u(R),type:"pdf","forbid-click":!0},null,8,["content"]))])],544),c("div",b,[u(J)?(i(),o(Q,{key:0,disabled:u(D),type:"primary",block:"",round:"",onClick:F},{default:d((()=>[A(p(`${e.beforeReadOverText}(${u(I)+1}/${e.forceReadCount})`),1)])),_:1},8,["disabled"])):(i(),o(Q,{key:1,disabled:u(D),type:"primary",block:"",round:"",onClick:V},{default:d((()=>[A(p(g.text),1)])),_:1},8,["disabled"]))])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});var x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAAB0CAMAAABjROYVAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAB4UExURUdwTP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////4MhPqcAAAAndFJOUwCSevYF7un6TRG1/diZNTvQSQt1GWWMH0VQAstuxoNe4kDgLeSoJ7BYGnQAAARqSURBVHjaxVvZdqMwDBXBAQyBLJCNZiNpy///4RzJNG6HBhM1tu/LzOlxucWSrxYLeBLiMynz9Li4TuN4el0c07xMPgXYQ3XOZ3HbIWs14ll+riwQiiSYtYOYBclr37gIonYEoqCAF0GW39/xkgaH5fy2lULI7W2+PATp5fv7lvIVlKfp3XTHU7OCGgj0T/efVXM63o09Pf2VttqEX8/KlysYwGqZf/114aYCPsSko4zTvRixfJ/GHe2E7VO7zpbRRI42xiTqbLvj7exHS3g/rOAJrA7vLeGDsceJslC0Fk8bZR0pL0ie/cWNkp2c4Yk1yFzp1eapP3h7bBFvBVtN3lrEcQujMaetjcsa2KjLmLZ4DiOxD0l6ij9KJwlVuIdRWJNBUvlnLUvJLdYwApMWMQEG2I+ihfEZXoJzPIp1TYZI4EVIyD3WBh/Kxrvc+IOQ7QeXhPieHE7+I7dTtGcCL0VCm/dQJQTp0BlejDNp0yNF3JhdjX9yNg/2gTQBLIBU4lerVWjQqwQLkBc0awV9YMyOC7CCIsaoDj3scAtKsIQSn77ree4M42cNllBjfJ2JXzwsK8Aaiqx/MirUjRwsIkdhqnpHNJJgETL6/7DKkGKBVazxVSVonDC/FWAVAvPhE9whURcOYBkHVAj54xRFK7CMVfRDCWYMoWcK/ww6FCiAEqxDohgWoBCYo4sMFuEikOwFOtoEQBC418M5cRNROyXaPawquwXNcAaGviPucXQqjAe7HUhlEko1jQIjpve4GhgUkFYMshKnQmDUwuDuu0sYwqIdYNWciAUMYfnlvxU+aviQhm2P9QFnFg4fVVxadcnaEQxvOsCqOc1vCscu3cyVJJptqln7nGabapHPO5M25rDUZ+1zmsNjo4wq8LdMuruLe6y/csY7k/7iIgGfWHSDCUmP9cGPTcBk9BMS0kAGK4uzTkkeSrI+g5XDqXyyhJziN4eVwwkHct+U9IjDyuEkTUrpuM6Bw8rhhDlKEanNDRisLE64kWpd27bdAoOVxQlbLA0BQ5wEBiuLEyQGb8CnCGCwsjhB4PqOlMHK4lSk3fYyWFmcanuVI7kjJUdSR8bd9tKRUeLgzpFIHJQMujsyJINK8N2JAwm+Cm3uZJBCmwri7gSfgrhKV9yFNkpXdGJmP4jrxEyloK7SFUpBdbLtIjHTyTaVFa5SUCordAHlItnWBZQqFd2UFVQq6qLYfgGli2Jd/rsoFXX5rxsd/KJYIzQ3OgZaOrzyP1sYWzqG5hWz0WFuXuk2nf2WDrXpxjckG2Q1NK9oQWNsSBpar5w2nbn16rfJXDtop9eqne7j4sDLFYmPyyAv114+LvicXmXW6irz0aXtxfGlLcXVzOL1tI+LeC8jB26HK2IarvAxRuJjYMbHaJC/ISj/417+B9v0CN/Vwgif72FF/2OZ/AFUDT2A6mvU1v9Qsf/xaf+D4vyR+MwwEs8e/u9h9PA//zOHd8ZnDj4+6PD/6Qr/Ix0C/yMdL58j/QO30Foo+DZolwAAAABJRU5ErkJggg==";export{g as _,x as c};

import{d as e,t as a,r as s,o as l,c as o,a as t,b as r,u as d,e as i,n as u,f as c,g as n,_ as p,I as m,h as v,i as g,j as f,k as h,l as C,m as y,p as L,w as k,q as _,F as I,s as P,P as b,v as w,x,T as V,y as T,z as j,A as U}from"./index-acb153ab.js";import{P as N}from"./index-270166eb.js";import{L as z}from"./index-f54e539c.js";import{T as M,a as F}from"./index-d54ae44e.js";import{q}from"./product-e75223fe.js";import{P as B}from"./trial-80149aea.js";const O={class:"com-product-item"},R={class:"content-wrap"},S={class:"product-image"},D={class:"company-name"},W={class:"product-info"},A={class:"title"},E={class:"description"},G={class:"price-item"},$={class:"price"};var H=p(e({__name:"productItem",props:{productInfo:{default:()=>({})},errorMsg:{default:""}},setup(e){const p=e,{productInfo:v}=a(p),g=s({checked:!1});return a(g),(e,a)=>{var s;const p=m;return l(),o("div",O,[t("div",R,[t("div",S,[r(p,{src:d(v).image},null,8,["src"]),t("div",D,i(null==(s=d(v).insurerName)?void 0:s.slice(0,6)),1),d(v).label?(l(),o("div",{key:0,class:u({tag:!0,news:"新品"===d(v).label,push:"推荐"===d(v).label})},i(d(v).label),3)):c("",!0)]),t("div",W,[t("p",A,i(d(v).productFullName),1),t("p",E,i(d(v).desc),1),t("p",G,[t("span",$,i(d(v).price),1),t("span",null,i(d(v).amountUnit),1)])]),n(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-2ef5a5b8"]]);const J={class:"search-wrap"},K={class:"article-tag"},Q=["onClick"],X={class:"page-proposal-list"},Y=e({name:"productList"});var Z=p(e({...Y,setup(e){const n=v();g();const p=s({searchValue:"",tagLists:[],loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],productCategory:"",productTotal:0,checked:"",productCode:void 0,proposalList:[],showFooter:!0,productName:"",productCodeList:[],errorMsgMap:{},excludeProductCodeList:[],isCreateProposal:!1,selectedProductList:[],firstLoading:!0}),m=f(),{searchValue:O,tagLists:R,loading:S,finished:D,refreshing:W,productList:A,selectProduct:E,insurerCodeList:G,productCategory:$,productTotal:Y,showFooter:Z}=a(p),ee=f(1),ae=()=>{p.firstLoading&&V.loading("加载中..."),q({keyword:O.value,insurerCodeList:G.value,productCategory:$.value,productClass:ee.value,pageNum:1,pageSize:999},{loading:!0}).then((e=>{const{code:a,data:s,total:l}=e;"10000"===a&&(A.value=s,Y.value=l)})).finally((()=>{V.clear(),p.firstLoading=!1}))},se=f(0),le=()=>{var e;W.value&&(A.value=[],W.value=!1),ae(),S.value=!1,Y.value===(null==(e=A.value)?void 0:e.length)&&(D.value=!0)},oe=h((()=>{var e;return(null==(e=A.value)?void 0:e.length)>0})),te=()=>{D.value=!0,S.value=!0,le()};return C((()=>{setTimeout((async()=>{m.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const s=M,v=F,g=j,f=U,h=z,C=N,V=y("ProPageWrap");return l(),L(V,{class:"page-proposal"},{default:k((()=>[t("div",J,[r(g,{modelValue:d(O),"onUpdate:modelValue":a[1]||(a[1]=e=>_(O)?O.value=e:null),placeholder:"请输入产品名称进行搜索",onCancel:ae,onSearch:ae},{default:k((()=>[t("div",K,[(l(!0),o(I,null,P(d(b),((e,a)=>(l(),o("div",{key:a,class:u(["tag-item",{checked:d(se)===a}]),onClick:s=>((e,a)=>{se.value=a,$.value=e,ae()})(e.value,a)},[t("div",{class:u(["tag-out",{checked:d(se)==a}])},[t("div",{class:u(["tag-item-text",{checked:d(se)==a}])},i(e.label),3)],2)],10,Q)))),128))]),r(v,{modelValue:d(ee),"onUpdate:modelValue":a[0]||(a[0]=e=>_(ee)?ee.value=e:null),disabled:"","active-color":"var(--van-primary-color)","inactive-color":"black",fixed:!1,onChange:ae},{default:k((()=>[r(s,{name:1},{default:k((()=>[w("非组合产品")])),_:1}),r(s,{name:4},{default:k((()=>[w("组合产品")])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])]),r(C,{modelValue:d(W),"onUpdate:modelValue":a[3]||(a[3]=e=>_(W)?W.value=e:null),onRefresh:te},{default:k((()=>[d(oe)||d(p).firstLoading?c("",!0):(l(),L(f,{key:0,"empty-img":d(x),title:"暂无产品","empty-class":"empty-select"},null,8,["empty-img"])),t("div",X,[r(h,{loading:d(S),"onUpdate:loading":a[2]||(a[2]=e=>_(S)?S.value=e:null),finished:d(D),"finished-text":d(oe)?"- 已经到底了哦 -":"",onLoad:le},{default:k((()=>[(l(!0),o(I,null,P(d(A),(e=>(l(),L(H,{key:e.id,"product-info":e,"error-msg":d(p).errorMsgMap[e.productCode],onClick:a=>(async e=>{let a=T.premiumTrial;const{insurerCode:s="",productCode:l="",templateId:o,productClass:t}=e;[B.SINGLE_PRODUCT,B.TWO_PRODUCT].includes(t)&&(a=T.productInfo),n.push({path:a,query:{insurerCode:s,productCode:l,tenantId:9991000011,templateId:o,iseeBizNo:m.value}})})(e)},null,8,["product-info","error-msg","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-51334390"]]);export{Z as default};

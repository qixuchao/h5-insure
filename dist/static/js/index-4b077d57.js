var A=Object.defineProperty;var I=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var N=(t,s,e)=>s in t?A(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e,B=(t,s)=>{for(var e in s||(s={}))w.call(s,e)&&N(t,e,s[e]);if(I)for(var e of I(s))L.call(s,e)&&N(t,e,s[e]);return t};import{g as T,a0 as b,C as c,L as q,v as P,M,h as R,j as E,r as g,k as l,y as o,I as m,z as F,m as d,n as k,F as U,E as W,s as Z,B as v,a2 as j,a3 as z}from"./vendor-e9263418.js";import{_ as J}from"./empth-f2366666.js";import{b as O}from"./businessCard-3a9ed3c6.js";import{_ as Y}from"./plugin-vue_export-helper-46f75680.js";import"./index-b8742a0a.js";var $="/static/assets/star-visit.a63b0ccc.png";const x=t=>(j("data-v-08d9e131"),t=t(),z(),t),G={className:"total"},H=v(" \u5171\u6709"),K={className:"primary"},Q=v("\u4F4D\u7528\u6237\u8BBF\u95EE\u60A8\u7684\u540D\u7247 "),X={key:0,className:"cardv-content"},ee=["title"],se=["onClick"],te={className:"item-info"},ae={className:"item-info-content"},oe={className:"info-content"},ne={className:"info-name"},ie={key:0,src:$,alt:"",class:"mf"},ce={className:"intro-time"},le={className:"intro-img-label"},ue=v(" \u7D2F\u8BA1\u8BBF\u95EE"),re={className:"primary"},de=v("\u6B21 "),_e={key:1,class:"empty"},me=x(()=>o("img",{src:J,alt:""},null,-1)),ve=x(()=>o("p",null,"\u6682\u65F6\u6CA1\u6709\u7528\u6237\u8BBF\u95EE\u54E6\uFF5E",-1)),pe=[me,ve],he=T({setup(t){const s=b(),e=c(""),p=c(!1),h=c(!1);c("0"),c(!1);const y=c(1),D=q({collectList:[]}),{collectList:u}=P(D),C=async(n,r=1,f=10)=>{const{data:i}=await O({pageNum:r,pageSize:f,queryBean:B({},n)});y.value=r;const{total:_}=i.data;p.value=!1,e.value=_,sessionStorage.setItem("card_list",JSON.stringify(i.data.list)),u.value=[...u.value,...i.data.list],_<=u.value.length?h.value=!0:h.value=!1,console.log(">>>>>>>",i.data.list)},V=n=>{console.log("relatedCustomerId::::",n.relatedCustomerId),n.relatedCustomerId?(console.log("\u6211\u5DF2\u7ECF\u5173\u8054\u4E86"),s.push({name:"customerDetail",query:{agentCustomerId:n.relatedCustomerId,customerType:n.relatedCustomerType},hash:"#1"})):(console.log("\u6211\u6CA1\u6709\u5173\u8054\u4E86"),s.push({path:"/visitorDetail",query:{shareId:n.shareId,tenantId:n.tenantId,visitId:n.id}}))};M(async()=>{C({})});const S=()=>{C({},y.value+1)};return(n,r)=>{const f=g("VanImage"),i=g("van-list"),_=g("ZaPageWrap");return l(),R(_,{"main-class":"page-card-visitor"},{default:E(()=>[o("div",G,[H,o("span",K,m(e.value?e.value:0),1),Q]),F(u).length?(l(),d("div",X,[k(i,{loading:p.value,"onUpdate:loading":r[0]||(r[0]=a=>p.value=a),finished:h.value,offset:-50,"finished-text":"- \u6CA1\u6709\u66F4\u591A\u4E86 -",onLoad:S},{default:E(()=>[(l(!0),d(U,null,W(F(u),a=>(l(),d("div",{key:a,className:"visitor-items",title:a},[o("div",{className:"visitor-item",onClick:fe=>V(a)},[o("div",te,[k(f,{class:"image-photo",round:"true",fit:"cover",src:a.wechatImageUrl},null,8,["src"]),o("div",ae,[o("div",oe,[o("div",ne,m(a.relatedCustomerId?a.relatedCustomerName:a.wechatNickname),1),a.icon==="Y"?(l(),d("img",ie)):Z("",!0)]),o("div",ce,m(a.visitDateTimeStr),1)]),o("span",le,[ue,o("span",re,m(a.visitTypeCount),1),de])])],8,se)],8,ee))),128))]),_:1},8,["loading","finished"])])):(l(),d("div",_e,pe))]),_:1})}}});var Ee=Y(he,[["__scopeId","data-v-08d9e131"]]);export{Ee as default};

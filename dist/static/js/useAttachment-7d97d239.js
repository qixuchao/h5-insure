import{_ as e,d as a,bX as l,r as t,E as n,am as s,S as i,bR as u,z as o,c as r,g as d,i as c,m as v,F as p,h as m,L as f,t as C,j as y,e as _,n as h,f as L,V as b,a2 as g,w as k,A,c8 as E,c9 as I,b6 as S,a3 as x,a5 as F,a7 as T,X as w,Y as M,bY as O,c0 as P,bp as N,bt as R,ca as U,bk as D,I as j,cb as W,b1 as V,af as $,a8 as q}from"./index-dae3ff12.js";import{o as z,g as B}from"./utils-97e71bd2.js";import{C as G}from"./infoCollection-89fc213f.js";import{P as Y}from"./index-6f81a24b.js";const Q={class:"guarantee-list"},X=(e=>(w("data-v-5b599be4"),e=e(),M(),e))((()=>c("span",null,"保障计划",-1))),K={key:0,class:"plan-list"},H=["onClick"],J={key:2,class:"feerate-view"},Z={key:0},ee={class:"extinfo-info-list"},ae={class:"guarantee-detail"},le={class:"content"};var te=e(a({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},planList:{type:Array,require:!1,default:()=>[]}},emits:["updateActivePlan"],setup(e,{emit:a}){var w,M;const O=e;l((e=>({"3f706bc1":P.value})));const P=t(""),N=t((null==(M=null==(w=O.planList)?void 0:w[0])?void 0:M.planCode)||void 0),R=t(),U=t([]),D=t([]),j=t(),W=n((()=>!!O.planList.length));s([()=>O.dataSource,()=>N.value],(()=>{var e,a;U.value=(null==(a=((null==(e=O.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===N.value)))?void 0:a.data)||[]}),{immediate:!0,deep:!0});const V=n((()=>{var e;return(null==(e=O.dataSource)?void 0:e.rateUri)||""})),$=n((()=>!!(j.value&&j.value.paymentFrequencyValue&&j.value.premiumUnit&&V))),[q,B]=i(!1),G=n((()=>{var e;return!(!U.value||!(null==(e=U.value)?void 0:e.length))&&(U.value.length>O.count&&(!!O.isShowClose||!q.value))})),Y=()=>{B()},te=n((()=>{var e;return U.value&&(null==(e=U.value)?void 0:e.length)?U.value.length<=O.count||q.value?U.value:U.value.slice(0,O.count):[]})),ne=t(!1),se=e=>{const a=e||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,"A"===a.target.tagName&&a.target.href&&(E()?I("",a.target.href):window.open(a.target.href))},ie=()=>{ne.value=!0,S((()=>{var e,a;null==(a=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||a.addEventListener("click",se,!1)}))};u((()=>{var e,a;null==(a=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||a.removeEventListener("click",se,!1)}));const ue=()=>{z({fileType:"pdf",fileUri:V.value})},oe=e=>{N.value=O.planList[e.name].planCode};return(l,t)=>{var n,s;const i=x,u=F,E=T,I=o("dompurify-html");return r(),d(p,null,[c("div",Q,[c("div",{class:"header"},[X,c("span",{onClick:ie},"查看详情")]),v(W)?(r(),d("div",K,[(r(!0),d(p,null,m(e.planList,((e,l)=>(r(),d("div",{key:`${e.planCode}_${l}`,class:f("plan-list-item "+(e.planCode===N.value?"plan-list-item-active":"")),onClick:l=>{return t=e.planCode,N.value=t,R.value=O.planList.findIndex((e=>e.planCode===t)),void a("updateActivePlan",t);var t}},[c("span",null,C(e.planName),1)],10,H)))),128))])):y("",!0),(r(!0),d(p,null,m(v(te),((e,a)=>(r(),_(i,{key:a,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),v(G)?(r(),d("div",{key:1,class:"show-more",onClick:Y},[h(C(v(q)?"收起":"查看更多")+" ",1),L(b,{name:"arrow-down-dobule",class:f(["icon",{showMore:v(q)}])},null,8,["class"])])):y("",!0),v($)?(r(),d("div",J,[c("span",null,C(`${(null==(n=j.value)?void 0:n.paymentFrequencyValue)||""}${(null==(s=j.value)?void 0:s.premiumUnit)||""}`),1),v(V)?(r(),d("span",{key:0,onClick:ue},"查看保费")):y("",!0)])):y("",!0)]),L(g),L(E,{show:ne.value,"onUpdate:show":t[1]||(t[1]=e=>ne.value=e),title:"保障详情",class:"guarantee-popup"},{default:k((()=>[D.value&&D.value.length>0?(r(),d("div",Z,[c("div",ee,[(r(!0),d(p,null,m(D.value,((e,a)=>(r(),_(i,{key:a,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),L(g)])):y("",!0),v(W)?(r(),_(u,{key:1,active:R.value,"onUpdate:active":t[0]||(t[0]=e=>R.value=e),list:e.planList.map(((e,a)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:oe},null,8,["active","list"])):y("",!0),c("div",ae,[(r(!0),d(p,null,m(U.value,((e,a)=>(r(),d("div",{key:a,class:"guarantee-item"},[L(i,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),A(c("div",le,null,512),[[I,e.tips]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-5b599be4"]]);const ne={class:"spec"},se={class:"rich-text"},ie={key:1,class:"spec"},ue={class:"rich-text"},oe={key:1,class:"spec"},re={class:"rich-text"},de=a({props:{dataSource:{default:()=>({SPECIAL_FEATURE:[],CLAIM_CASE:{},CLAIM_FLOW:[],ISSUE_NOTICE:[],FAQ:[]})}},setup(e,{expose:a}){const l=e,s=O((()=>P((()=>import("./index-dae3ff12.js").then((function(e){return e.cK}))),["static/js/index-dae3ff12.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"])));O((()=>P((()=>import("./index-2539faa0.js")),["static/js/index-2539faa0.js","static/css/index-f22f2764.css","static/js/index-dae3ff12.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"])));const i=O((()=>P((()=>import("./index-dae3ff12.js").then((function(e){return e.cI}))),["static/js/index-dae3ff12.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"]))),u=O((()=>P((()=>import("./index-73931886.js")),["static/js/index-73931886.js","static/css/index-7b3feb06.css","static/js/index-dae3ff12.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"]))),f=O((()=>P((()=>import("./index-0299a50f.js")),["static/js/index-0299a50f.js","static/css/index-194b9c66.css","static/js/index-dae3ff12.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js","static/js/index-f5e9a8fb.js"]))),{dataSource:C}=N(l),h=t(),g=t([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),E=n((()=>{var e,a;return null==(a=null==(e=C.value.SPECIAL_FEATURE)?void 0:e.spec)?void 0:a.length})),I=n((()=>{var e,a,l,t;const n=null==(e=C.value.CLAIM_FLOW)?void 0:e.processCaseType;return!!(n===G.WORD&&(null==(a=C.value.CLAIM_FLOW)?void 0:a.processContent)||n===G.IMAGE&&(null==(t=null==(l=C.value.CLAIM_FLOW)?void 0:l.processCasePicList)?void 0:t.length))})),S=n((()=>{var e,a,l,t,n;const s=null==(a=null==(e=C.value)?void 0:e.CLAIM_CASE)?void 0:a.claimCaseType;return!!(s===G.WORD&&(null==(l=C.value.CLAIM_CASE)?void 0:l.claimContent)||s===G.IMAGE&&(null==(n=null==(t=C.value.CLAIM_CASE)?void 0:t.claimCasePicList)?void 0:n.length))})),x=n((()=>{var e,a;return null==(a=null==(e=C.value)?void 0:e.ISSUE_NOTICE)?void 0:a.noticeContent})),F=n((()=>{var e,a;return null==(a=null==(e=C.value)?void 0:e.FAQ)?void 0:a.length})),T=n((()=>{let e=[...g.value];return E.value||(e=e.filter((e=>"tab1"!==e.slotName))),I.value||S.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>{var e;return null==(e=h.value)?void 0:e.handleClickTab}}),(e,a)=>{const l=j,t=b,n=o("dompurify-html");return r(),_(v(s),{ref_key:"scrollRef",ref:h,class:"tabs",list:v(T),sticky:"",scrollspy:""},R({tab3:k((()=>[D(e.$slots,"form")])),_:2},[v(E)?{name:"tab1",fn:k((()=>{var e;return[c("div",ne,[(r(!0),d(p,null,m((null==(e=v(C).SPECIAL_FEATURE)?void 0:e.spec)||[],((e,a)=>(r(),_(U,{key:a},{fallback:k((()=>[L(t,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:k((()=>[(r(),_(l,{key:a,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),L(v(i))])]}))}:void 0,v(I)||v(S)||v(x)||v(F)?{name:"tab2",fn:k((()=>{var e,a;return[v(I)?(r(),d(p,{key:0},[(null==(e=v(C).CLAIM_FLOW)?void 0:e.processCaseType)===v(G).WORD?(r(),_(v(u),{key:0,class:"tab-card",title:"理赔说明"},{default:k((()=>{var e;return[A(c("div",se,null,512),[[n,null==(e=v(C).CLAIM_FLOW)?void 0:e.processContent]])]})),_:1})):(r(),d("div",ie,[(r(),_(U,null,{fallback:k((()=>[L(t,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:k((()=>{var e;return[(r(!0),d(p,null,m((null==(e=v(C).CLAIM_FLOW)?void 0:e.processCasePicList)||[],((e,a)=>(r(),_(l,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(v(i))],64)):y("",!0),v(S)?(r(),d(p,{key:1},[(null==(a=v(C).CLAIM_CASE)?void 0:a.claimCaseType)===v(G).WORD?(r(),_(v(u),{key:0,class:"tab-card",title:"理赔案例"},{default:k((()=>{var e;return[A(c("div",ue,null,512),[[n,null==(e=v(C).CLAIM_CASE)?void 0:e.claimContent]])]})),_:1})):(r(),d("div",oe,[(r(),_(U,null,{fallback:k((()=>[L(t,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:k((()=>{var e;return[(r(!0),d(p,null,m((null==(e=v(C).CLAIM_CASE)?void 0:e.claimCasePicList)||[],((e,a)=>(r(),_(l,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(v(i))],64)):y("",!0),v(x)?(r(),d(p,{key:2},[L(v(u),{class:"tab-card",title:"投保须知"},{default:k((()=>{var e;return[A(c("div",re,null,512),[[n,null==(e=v(C).ISSUE_NOTICE)?void 0:e.noticeContent]])]})),_:1}),L(v(i))],64)):y("",!0),v(F)?(r(),d(p,{key:3},[L(v(u),{title:"常见问题"},{default:k((()=>{var e,a;return[L(v(f),{list:null==(a=null==(e=v(C).FAQ)?void 0:e[0])?void 0:a.data},null,8,["list"])]})),_:1}),L(v(i))],64)):y("",!0)]}))}:void 0]),1032,["list"])}}});const ce={class:"trial-button-wrap"},ve={class:"footer-area"},pe=c("span",null,"分享",-1),me={class:"price"},fe={key:0},Ce=h("立即投保"),ye=a({props:{premium:{default:0},tenantProductDetail:{default:()=>({})},planCode:{default:void 0},loadingText:{default:""},paymentFrequency:{default:""},shareInfo:{default:()=>({})}},emits:["onClick"],setup(e,{emit:a}){const l=e,n=t(""),i=t(""),u=W();return s([()=>l.premium,()=>l.tenantProductDetail,()=>l.paymentFrequency,()=>l.planCode],(([e])=>{const{PREMIUM:a=[]}=l.tenantProductDetail||{};let t={};if(null==a?void 0:a.length){t=(a||[]).find((e=>e.planCode===l.planCode||!e.planCode))||{};const s=((null==t?void 0:t.data)||[]).find((e=>e.paymentFrequency===l.paymentFrequency)),{premium:u,minActualUnit:o}=s||{};e?(i.value=o,n.value=e&&`${e}`):(i.value=u,n.value="")}else e&&(i.value="",n.value=e&&`${e}`)}),{deep:!0,immediate:!0}),(l,t)=>{const s=b,o=$;return r(),d("div",ce,[c("div",ve,[v(u)?(r(),_(o,V({key:0},e.shareInfo,{class:"share-btn"}),{default:k((()=>[L(s,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),pe])),_:1},16)):y("",!0),c("div",me,[e.loadingText?(r(),d("span",fe,C(e.loadingText),1)):(r(),d(p,{key:1},[c("span",null,C(n.value),1),c("span",null,C(i.value),1)],64))]),L(Y,{shadow:!1,class:"right",onClick:t[0]||(t[0]=e=>a("onClick"))},{default:k((()=>[D(l.$slots,"default",{},(()=>[Ce]))])),_:3})])])}}});var _e=(e,a)=>{const l=t([]),n=t(0),i=t([]);return s([()=>{var a;return null==(a=e.value)?void 0:a.planCode},()=>a.value],(([e,a])=>{let t=null;if(null==a?void 0:a.length){const l=(a||[]).find((a=>a.planCode===e||!a.planCode));l&&(t=null==l?void 0:l.productMaterialMap)}t?(l.value=Object.keys(t).map((e=>({attachmentName:e,attachmentList:t[e].map((e=>({...e,materialSource:B(`${null==e?void 0:e.materialSource}`,null==e?void 0:e.materialContent)})))}))),i.value=l.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.popUpFlag===q.YES))}))).filter((e=>e.attachmentList.length)),n.value=i.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.mustReadFlag===q.YES))}))).filter((e=>e.attachmentList.length)).length||0):l.value=[]}),{deep:!0,immediate:!0}),{fileList:l,popupFileList:i,mustReadFileCount:n}};export{te as G,de as _,ye as a,_e as u};

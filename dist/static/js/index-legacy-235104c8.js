!function(){var e=document.createElement("style");e.innerHTML=".net-sale-wrap[data-v-7aafae48]{padding-bottom:1.33333rem;background:#f1f5fc}.net-sale-wrap .footer-button[data-v-7aafae48]{justify-content:space-between}.net-sale-wrap .product-name[data-v-7aafae48]{font-size:.48rem;font-weight:500;line-height:1.06667rem}.net-sale-wrap .part[data-v-7aafae48]{background-color:#fff;padding:0 var(--zaui-page-border, .4rem)}.net-sale-wrap .part .common-cell-wrapper[data-v-7aafae48]{height:1.38667rem;align-items:center;width:100%;display:inline-flex}.net-sale-wrap .part .common-cell-wrapper[data-v-7aafae48] .cell-container{align-items:flex-start;justify-content:center;width:100%;color:var(--van-field-label-color);font-size:.4rem}.net-sale-wrap .radio-group[data-v-7aafae48]{width:100%}.net-sale-wrap .radio-group .radio-btn[data-v-7aafae48]{justify-content:space-between}.net-sale-wrap .price[data-v-7aafae48]{color:#393d46;font-size:.45333rem;font-weight:400}.net-sale-wrap .price span[data-v-7aafae48]{color:var(--van-primary-color);font-weight:700}.net-sale-wrap .right[data-v-7aafae48]{width:3.73333rem;background:var(--van-primary-color);border-color:var(--van-primary-color)}.net-sale-wrap .footer[data-v-7aafae48]{margin-top:.66667rem;padding:0 var(--zaui-page-border, .4rem)}\n",document.head.appendChild(e),System.register(["./index-legacy-43a5136e.js","./debounce-legacy-0dc0a967.js","./utils-legacy-444081e8.js","./product-legacy-9152c3f1.js","./trial-legacy-81ec425e.js","./index-legacy-1a3ad2d0.js","./theme-legacy-14f266cb.js","./nextStep-legacy-e9298524.js","./index-legacy-c76c15c9.js","./pdfh5-legacy-783b46b8.js","./infoCollection-legacy-6a8d7197.js","./useStorage-legacy-3910edd8.js","./trial-legacy-51e8e930.js","./relativeTime-legacy-e44dda2a.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-910879ef.js","./core-legacy-29b4828d.js","./index-legacy-8806fe1e.js"],(function(e){"use strict";var a,t,n,r,o,l,i,d,u,c,s,p,f,v,m,I,y,g,O,L,w,h,C,V,b,j,P,R,T,D,x,k,E;return{setters:[function(e){a=e._,t=e.d,n=e.a,r=e.r,o=e.x,l=e.a8,i=e.y,d=e.b,u=e.c,c=e.e,s=e.w,p=e.f,f=e.i,v=e.t,m=e.l,I=e.j,y=e.$,g=e.a5,O=e.K,L=e.L,w=e.a3,h=e.T},function(e){C=e.d},function(e){V=e.r,b=e.t},function(e){j=e.p},function(e){P=e.i,R=e.b,T=e.p},function(e){D=e.default},function(e){x=e.u},function(e){k=e.n},function(e){E=e.default},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const B=e=>(O("data-v-7aafae48"),e=e(),L(),e),N={class:"net-sale-wrap"},Y={class:"part product-name"},H=B((()=>f("span",null,null,-1))),$=B((()=>f("span",null,null,-1))),_={class:"part"},F={class:"footer"};e("default",a(t({setup(e){const a=x(),t=n(),{productCode:O="HTEJBX",tenantId:L="9991000001",agentCode:B="",agencyCode:z,saleChannelId:M,extraInfo:S,preview:A}=t.query,U=r(),q=r("0"),J=r(),W=r(),G=r(),K=r([{}]),X=r([]),Q=r({}),Z=r("");let ee={};try{ee=JSON.parse(decodeURIComponent(S))}catch(ue){}const ae=r({agencyId:z,agentCode:B,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"EVENT_NETSALE_underWrite",pageCode:"infoCollection",templateId:ee.templateId,iseeBizNo:Z.value,extraInfo:ee},orderCategory:1,saleUserId:B,saleChannelId:M,tenantId:L,venderCode:"",tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"xinao",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:L}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),te=o((()=>(J.value?.productRelationPlanVOList?.length||0)>1)),ne=r();l([()=>G.value,()=>W.value,()=>q.value],(()=>{const{premium:e}=G.value||{};if(e)ne.value=e&&`￥${e}元`;else{const{tenantProductInsureVO:e}=W.value||{};let a={};a=e?.planList?.length?(e?.planList||[]).find((e=>e.planCode===q.value)):e?.planInsureVO;const{paymentFrequencyValue:t,premiumUnit:n}=a?.productPremiumVOList?.[0]||{};ne.value=t&&`￥${t}${n||"元"}`}}),{deep:!0,immediate:!0});const re=o((()=>{let e=[];return e=J.value?.productRelationPlanVOList?.length?J.value?.productRelationPlanVOList.find((e=>e.planCode===q.value))?.productRiskVoList||[]:J.value?.productRiskVoList||[],e})),oe=o((()=>1===((re.value||[])?.[0]?.riskDetailVOList?.[0]?.insuranceStartType||1)?`${y(new Date).format("YYYY-MM-DD")} 00:00:00`:`${y(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`)),le=o((()=>{const e=re.value||[],{insuranceEndType:a,riskInsureLimitVO:t}=e?.[0]?.riskDetailVOList?.[0]||{},{insurancePeriodValueList:n}=t||{},[r,o]=(n?.[0]||"").split("_");return 1===a?`${y(new Date).add(o||0,r).format("YYYY-MM-DD")} 23:59:59`:a?`${y(new Date).add(o,r).format("YYYY-MM-DD")} 00:00:00`:""})),ie=async()=>{ae.value.venderCode=J.value?.productBasicInfoVO.insurerCode,ae.value.orderAmount=G.value?.premium,ae.value.orderRealAmount=G.value?.premium,ae.value.commencementTime=oe.value,ae.value.expiryDate=le.value,ae.value.extInfo&&(ae.value.extInfo.iseeBizNo=Z.value),ae.value.tenantOrderInsuredList&&(ae.value.tenantOrderInsuredList[0].planCode=q.value),k(((e,a,t)=>{const n={},r=(e=[])=>{(e||[]).forEach((e=>{n[e.riskCode]=e,e.riskPremiumDetailVOList?.length&&r(e.riskPremiumDetailVOList)}))};r(a?.riskPremiumDetailVOList);const o={...t},l={tenantId:L,riskList:X.value?.[0].riskVOList||[],riskPremium:n,productId:e?.productBasicInfoVO.id||0};return o.tenantOrderHolder&&(o.tenantOrderHolder.certType=o.tenantOrderHolder.certType||w.CERT),o.tenantOrderInsuredList&&(o.tenantOrderInsuredList[0].certType=o.tenantOrderInsuredList[0].certType||w.CERT,o.tenantOrderInsuredList[0].tenantOrderProductList=[{premium:G.value?.premium,productCode:e?.productBasicInfoVO.productCode,productName:e?.productBasicInfoVO.productName,tenantOrderRiskList:b(l)}]),o})(J.value,G.value,ae.value),((e,a)=>{"jumpToPage"===a&&h("提交成功")}))},de=async()=>{U.value?.validateForm().then((()=>{g.confirm({title:"分享",message:`即将向客户【${ae.value?.tenantOrderHolder?.name}】发送投保确认信息,请确认是否继续？`}).then((()=>{A||ie()}))}))};l([()=>ae.value.tenantOrderInsuredList?.[0].name,()=>ae.value.tenantOrderInsuredList?.[0].birthday,()=>q.value],C((([e,a])=>{e&&a&&(A||(async(e,a,t)=>{const n={holder:{personVO:{certType:w.CERT,...e.tenantOrderHolder}},insuredVOList:(e?.tenantOrderInsuredList||[]).map((e=>({insuredCode:"",personVO:{...e,certType:w.CERT},productPlanVOList:[{insurerCode:a?.productBasicInfoVO.insurerCode,planCode:q.value||"0",riskVOList:V(t)}]}))),productCode:a?.productBasicInfoVO.productCode,productId:a?.productBasicInfoVO.id,tenantId:L},{code:r}=await R(n);if("10000"===r){const{code:e,data:a}=await T(n);"10000"===e?(G.value=a,X.value=n?.insuredVOList?.[0]?.productPlanVOList||[]):G.value=void 0}})(ae.value,J.value,re.value))}),500));return l((()=>q.value),(()=>{K.value&&(Q.value=K.value[q.value])})),i((()=>{(async()=>{await j({productCode:O,withInsureInfo:!0,tenantId:L}).then((({code:e,data:a})=>{"10000"===e&&(W.value=a,document.title=a.tenantProductInsureVO?.productName||"")})),P({productCode:O}).then((({code:e,data:a})=>{"10000"===e&&(J.value=a,K.value=a.planFactor,a.productRelationPlanVOList?.length&&(q.value=a.productRelationPlanVOList[0].planCode||""),a.productFactor?Q.value=a.productFactor:a.planFactor&&(Q.value=a.planFactor[q.value]))}))})(),setTimeout((async()=>{Z.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const n=d("ProRadioButton"),r=d("ProCard"),o=d("ProCell"),l=d("ProPageWrap"),i=d("van-config-provider");return u(),c(i,{"theme-vars":m(a)},{default:s((()=>[p(l,null,{default:s((()=>[f("div",N,[f("div",Y,v(J.value?.productBasicInfoVO?.productFullName),1),m(te)?(u(),c(r,{key:0,"show-line":!1,title:"保障年期"},{default:s((()=>[p(n,{modelValue:q.value,"onUpdate:modelValue":t[0]||(t[0]=e=>q.value=e),class:"radio-group",prop:{label:"planName",value:"planCode"},options:J.value?.productRelationPlanVOList},null,8,["modelValue","options"])])),_:1})):I("",!0),p(D,{ref_key:"formRef",ref:U,"title-collection":{HOLDER:"投保人",INSURER:"被保人",BENEFICIARY:"收益人"},"form-info":ae.value,"send-sms-code":()=>{},"input-align":"left","factor-object":Q.value},{holderName:s((()=>[H])),insurerName:s((()=>[$])),_:1},8,["form-info","send-sms-code","factor-object"]),f("div",_,[p(o,{title:"保费",content:ne.value},null,8,["content"]),p(o,{title:"保障期间",content:`${m(oe).split(" ")[0]}~${m(le).split(" ")[0]}`},null,8,["content"])]),f("div",F,[p(E,{shadow:!1,text:"分享用户确认投保",onClick:de})])])])),_:1})])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-7aafae48"]]))}}}))}();

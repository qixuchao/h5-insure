import{d as e,a4 as a,a5 as l,h as n,i as t,j as i,k as o,z as s,a6 as d,E as r,a7 as u,O as c,o as v,c as p,u as _,b as m,F as I,a as f,m as C,f as O,w as h,a8 as y,p as g,a9 as E,aa as L,ab as j,ac as k}from"./index-7b64144b.js";import{i as b,q as w,s as A}from"./trial-d37aea02.js";import{a as P,b as T}from"./product-101a47cd.js";import{_ as S}from"./TrialButton-9041cd82.js";import{q as x}from"./createProposal-9e92310f.js";import{u as N}from"./useOrder-e13a3e9d.js";import{p as R,d as V}from"./utils-111d723c.js";import"./index-1f707f1c.js";import"./format-31cde443.js";import"./utils-7f57304c.js";import"./infoCollection-7ae41058.js";import"./trial-33c0c141.js";const B={key:0},F={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},D={class:"info"},U={key:1,class:"preview-placeholder"},q=f("br",null,null,-1),M=f("div",{id:"insureButton"},null,-1),G=f("div",{id:"xinaoDialog"},null,-1),z=e({name:"InsuranceLong"}),H=e({...z,setup(e){const z=a((()=>l((()=>import("./index-ee5a21cd.js")),["static/js/index-ee5a21cd.js","static/css/index-c23f272e.css","static/js/index-7b64144b.js","static/css/index-571755cf.css"]))),H=a((()=>l((()=>import("./index-19919913.js")),["static/js/index-19919913.js","static/css/index-79104747.css","static/js/index-7b64144b.js","static/css/index-571755cf.css","static/js/infoCollection-7ae41058.js"]))),J=a((()=>l((()=>import("./index-8a9a75fe.js")),["static/js/index-8a9a75fe.js","static/css/index-491cbbd3.css","static/js/index-7b64144b.js","static/css/index-571755cf.css"])));a((()=>l((()=>import("./index-be3e128e.js")),["static/js/index-be3e128e.js","static/css/index-50785b3e.css","static/js/index-7b64144b.js","static/css/index-571755cf.css","static/js/cloneDeep-bd058310.js","static/js/TrialButton-9041cd82.js","static/css/TrialButton-dea42d8e.css","static/js/index-1f707f1c.js","static/css/index-bbfdd7ec.css","static/js/format-31cde443.js","static/js/useOrder-e13a3e9d.js"])));const W=a((()=>l((()=>import("./index-2c0aa8f9.js")),["static/js/index-2c0aa8f9.js","static/css/index-ebb5282b.css","static/js/index-7b64144b.js","static/css/index-571755cf.css"]))),X=a((()=>l((()=>import("./Video-901f1887.js")),["static/js/Video-901f1887.js","static/css/Video-20262b6f.css","static/js/index-7b64144b.js","static/css/index-571755cf.css"]))),Y=a((()=>l((()=>import("./index-baecde2a.js")),["static/js/index-baecde2a.js","static/css/index-a34f0b1b.css","static/js/index-7b64144b.js","static/css/index-571755cf.css","static/js/jsbridgePromise-1a7f0ae2.js","static/js/utils-7f57304c.js","static/js/infoCollection-7ae41058.js","static/js/trial-33c0c141.js"]))),$=a((()=>l((()=>import("./index-3e649012.js")),["static/js/index-3e649012.js","static/css/index-b01c516e.css","static/js/index-7b64144b.js","static/css/index-571755cf.css","static/js/product-101a47cd.js","static/js/useThread-637a02aa.js","static/js/jsbridgePromise-1a7f0ae2.js"]))),K=a((()=>l((()=>import("./index-5a63933d.js")),["static/js/index-5a63933d.js","static/css/index-fa4edf2a.css","static/js/index-7b64144b.js","static/css/index-571755cf.css","static/js/theme-94cf7d00.js","static/js/index-1f707f1c.js","static/css/index-bbfdd7ec.css","static/js/utils-7f57304c.js","static/js/infoCollection-7ae41058.js","static/js/trial-33c0c141.js"]))),Q=a((()=>l((()=>import("./index-f24ec87a.js")),["static/js/index-f24ec87a.js","static/css/index-eabeb59f.css","static/js/index-7b64144b.js","static/css/index-571755cf.css"]))),Z=a((()=>l((()=>import("./index-9065307b.js")),["static/js/index-9065307b.js","static/css/index-bf024e9b.css","static/js/index-7b64144b.js","static/css/index-571755cf.css"]))),ee=n(),ae=t(),{productCode:le="",tenantId:ne,agentCode:te="",agencyCode:ie,saleChannelId:oe,proposalId:se,proposalInsuredId:de,extraInfo:re,orderNo:ue,insurerCode:ce,preview:ve,trialPreview:pe}=ae.query;let _e={};try{_e=JSON.parse(decodeURIComponent(re))}catch(ze){}const{openId:me,saTenantId:Ie=""}=_e;i();const fe=i(),Ce=i(),Oe=i(!1),he=i({}),ye=i({}),ge=i(!1),Ee=i(0),Le=i(!1);i({});const je=i(!0);i(!0);const ke=i(!0),be=i(""),we=i({}),Ae=i({}),Pe=i([]),Te=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Se=i({});o((()=>!!ve||!!pe));const xe=o((()=>!!pe));i();const Ne=()=>{E("premiumTrial",ae.query)},Re=N(),Ve=i(!1);s((()=>Se.value.planCode),(e=>{we.value=(ye.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Be=()=>{fe.value.handleClickTab()("insureButton")};i(""),i(0);const Fe=e=>{we.value=(ye.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},De=()=>{ge.value=!1,je.value=!0},Ue=()=>{ge.value=!1,je.value=!0},qe=i([]),Me=async()=>{var e,a;const{code:l,data:n}=await w({calcProductFactorList:[{productCode:le}]});if("10000"===l){Object.assign(Re.value,n);(e=>{T(e).then((({code:e,data:a})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:l}=V(a);qe.value=e.concat(l)}}))})(R(null==(a=null==(e=n.insuredList)?void 0:e[0])?void 0:a.productList))}},Ge=async()=>{const{code:e,data:a}=await A(Re.value);"10000"===e&&ee.push({path:L.questionNotice,query:{...ae.query,orderNo:a}})};return s((()=>we.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:l}=we.value;Se.value.planCode=e,Ae.value=(l||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),r((()=>{u(Ce,(([{isIntersecting:e}],a)=>{Oe.value=!0}))})),c((()=>{ke.value=!0,se||Me(),(async()=>{!xe.value&&P({productCode:le}).then((({data:e,code:a})=>{if("10000"===a){he.value=e;const{wxShareConfig:a,showWXShare:l,title:n,desc:t,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};l?Object.assign(Te.value,{...a,imgUrl:a.image,isShare:l}):Object.assign(Te.value,{title:n,desc:t,imgUrl:i,isShare:l})}})),ue||se||(Ve.value=!0),se&&x({id:se,tenantId:Ie||ne}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:l}=a,n=(le||"").split(",");Object.assign(Re.value,{renewFlag:"",holder:e,tenantId:ne,proposalId:se,insuredList:(l||[]).filter((e=>e.id===+de)).map((e=>({...e,productList:e.productList.filter((e=>n.includes(e.productCode)))})))}),Ve.value=!0}})),await b({productCode:le,isTenant:!1}).then((({data:e,code:a})=>{var l;"10000"===a&&(Oe.value=!0,Le.value=!0,ye.value=e,we.value=null==(l=e.productPlanInsureVOList)?void 0:l[0],Pe.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),ke.value=!1})(),setTimeout((async()=>{be.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var l,n,t,i,o,s,d,r,u,c,E,L,b,w,A,P,T,x,N,R;const V=j,ee=k;return v(),p(I,null,[_(ke)?(v(),p("div",B)):(v(),p("div",F,[m(V),_(xe)?(v(),p("div",U,[y("当前页面仅用于保费试算预览"),q,y("不展示其他产品相关配置信息")])):(v(),p(I,{key:0},[f("div",D,[1==(null==(n=null==(l=_(he))?void 0:l.BASIC_INFO)?void 0:n.bannerType)&&(null==(i=null==(t=_(he))?void 0:t.BASIC_INFO)?void 0:i.banner.length)?(v(),C(_(J),{key:0,"data-skeleton-type":"img",images:null==(s=null==(o=_(he))?void 0:o.BASIC_INFO)?void 0:s.banner},null,8,["images"])):O("",!0),2==(null==(r=null==(d=_(he))?void 0:d.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=_(he))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),C(_(X),{key:1,"data-skeleton-type":"img",src:null==(E=_(he))?void 0:E.BASIC_INFO.video[0]},null,8,["src"])):O("",!0),(null==(w=null==(b=null==(L=_(he))?void 0:L.BASIC_INFO)?void 0:b.bannerMove)?void 0:w.length)?(v(),C(_(J),{key:2,url:null==(T=null==(P=null==(A=_(he))?void 0:A.BASIC_INFO)?void 0:P.bannerMove)?void 0:T[0],onClick:Be},null,8,["url"])):O("",!0),f("div",{ref_key:"observeRef",ref:Ce},null,512)]),m(_(z),{"data-source":null==(x=_(he))?void 0:x.BASIC_INFO},null,8,["data-source"]),(null==(N=_(he))?void 0:N.GUARANTEE)?(v(),C(_(Y),{key:0,"show-service-config":"","data-source":_(he),"plan-list":_(Pe),onUpdateActivePlan:Fe},null,8,["data-source","plan-list"])):O("",!0),f("div",{class:"trial-text-btn",onClick:Ne},"算一算保费"),m(_(W),{"data-source":null==(R=_(he))?void 0:R.ISSUE_CONDITION},null,8,["data-source"]),m(_(H),{ref_key:"detailScrollRef",ref:fe,"data-source":_(he)},null,8,["data-source"]),m(ee,null,{default:h((()=>{var e,a,l;return[(null==(e=_(he).SIGNATURE)?void 0:e.inscribedContent)?(v(),C(_(Q),{key:0,"inscribed-content":null==(l=null==(a=_(he))?void 0:a.SIGNATURE)?void 0:l.inscribedContent},null,8,["inscribed-content"])):O("",!0)]})),_:1}),m(ee,null,{default:h((()=>{var e;return[(null==(e=_(qe))?void 0:e.length)?(v(),C(_(Z),{key:0,"attachment-list":_(qe),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{Ee.value=e,ge.value=!0})(e))},null,8,["attachment-list"])):O("",!0)]})),_:1})],64)),M,m(S,{onHandleClick:Ge})])),m(ee,null,{default:h((()=>[_(Le)&&!_(xe)?(v(),C(_($),{key:0,"product-detail":_(he)},null,8,["product-detail"])):O("",!0)])),_:1}),G,m(ee,null,{default:h((()=>[_(ge)?(v(),C(_(K),{key:0,show:_(ge),"onUpdate:show":a[1]||(a[1]=e=>g(ge)?ge.value=e:null),"content-list":_(je)?_(qe):[],"is-only-view":_(je),"active-index":_(Ee),text:_(je)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,onSubmit:De,onOnCloseFilePreviewByMask:Ue},null,8,["show","content-list","is-only-view","active-index","text"])):O("",!0)])),_:1})],64)}}});export{H as default};

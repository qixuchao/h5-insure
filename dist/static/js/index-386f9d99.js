var ue=Object.defineProperty,ce=Object.defineProperties;var de=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var K=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x=(e,t)=>{for(var r in t||(t={}))pe.call(t,r)&&K(e,r,t[r]);if(J)for(var r of J(t))me.call(t,r)&&K(e,r,t[r]);return e},b=(e,t)=>ce(e,de(t));import{h as N,k as P,p as Q,A as n,L as Y,B as h,v as ve,a5 as _e,a6 as fe,aa as he,P as Ie,G as p,j as ge,r as k,m as De,n as j,s as _,T as S}from"./vendor-e4a03b96.js";import{S as Ce}from"./infoCollection-d20bf72e.js";import{_ as L,a4 as we}from"./index-3eb7c939.js";import{c as ye}from"./close-df102554.js";import{_ as xe}from"./index-952a430d.js";import{a as Se}from"./order-584e5a0b.js";import{d as Be,i as Oe,a as $e,s as Ue,e as Ee,E as Fe}from"./trial-12ab92ce.js";import{t as be}from"./theme-eeb93d73.js";import{n as ke,i as Ne,m as Pe,a as Le,g as Re,t as Ve,c as Ae,d as W}from"./utils-77c8d279.js";import{p as Me}from"./product-6569880d.js";import"./trial-b203d7cd.js";const Te={class:"com-field-info"},qe={class:"title"},ze={class:"desc"},Ge=N({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(e){return(t,r)=>(P(),Q("div",Te,[n("div",qe,Y(e.title),1),n("div",ze,Y(e.desc),1)]))}});var B=L(Ge,[["__scopeId","data-v-74e2bdf6"]]);const X=e=>(_e("data-v-39527d44"),e=e(),fe(),e),He={key:0,class:"pro-modal"},Je=X(()=>n("div",{class:"pro-overlay"},null,-1)),Ke={class:"pro-modal-wrapper"},Ye=X(()=>n("div",{class:"pro-modal-content"},[n("p",null,"\u606D\u559C\u60A8"),n("p",null,"\u4FDD\u969C\u5347\u7EA7\u6210\u529F")],-1)),je=["src"],We=N({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(e,{emit:t}){const r=e,f=()=>{t("on-close")};return(i,R)=>r.isShow?(P(),Q("div",He,[Je,n("div",Ke,[n("div",{class:"pro-modal-body"},[Ye,n("div",{class:"pro-modal-btn",onClick:f},"\u6211\u77E5\u9053\u4E86")]),n("div",{class:"pro-modal-close",onClick:f},[n("img",{src:h(ye)},null,8,je)])])])):ve("",!0)}});var Qe=L(We,[["__scopeId","data-v-39527d44"]]);const Xe={class:"page-activity-upgrade"},Ze=["src"],et={class:"container"},tt={class:"main-form"},at=N({setup(e){const t=he(),r=Ie(),{productCode:f="BWYL2022",tenantId:i,orderNo:R,agentCode:Z="",saleChannelId:ee="",from:te}=r.query,m=p(),I=p(),o=p(),g=p(),O=p(),w=p(),$=p(!1),U=te==="check",E=p(!1),ae=p(0);let y="";const oe=()=>{$.value=!1},se=async()=>{var c,d,v,D,C;const s=Re({tenantId:i,applicationNo:o.value.applicationNo,policyNo:o.value.policyNo,saleUserId:Z,saleChannelId:ee||o.value.saleChannelId,orderStatus:Se.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:m.value,insureDetail:I.value,paymentMethod:(d=(c=o.value.extInfo)==null?void 0:c.extraInfo)==null?void 0:d.paymentMethod,renewalDK:(D=(v=o.value.extInfo)==null?void 0:v.extraInfo)==null?void 0:D.renewalDK,iseeBizNo:y,successJumpUrl:"",premium:g.value,holder:b(x({},o.value.tenantOrderHolder),{socialFlag:o.value.tenantOrderHolder.extInfo.hasSocialInsurance}),insured:b(x({},o.value.tenantOrderInsuredList[0]),{socialFlag:o.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:Ve({tenantId:i,riskList:Ae(I.value.productRiskVoList[0].riskDetailVOList,m.value,!0),riskPremium:{},productId:(C=m.value)==null?void 0:C.id})}),a=await Ue(s),{code:u,data:l}=a;return u==="10000"?l.data:""},V=s=>`${we}/chuangxin/baigebao/orderDetail?orderNo=${s}&productCode=${f}&tenantId=${i}`,ne=async()=>{try{const s=W({tenantId:i,premium:g.value,orderDetail:o.value,productDetail:m.value,insureDetail:I.value,successJumpUrl:"",iseeBizNo:y}),a=await Ee(s),{code:u,data:l}=a;u==="10000"&&(g.value=l.installmentPremium,w.value=l.signUrl),S.clear()}catch(s){console.log(s)}},re=async s=>{const a=W({tenantId:i,premium:g.value,orderDetail:o.value,productDetail:m.value,insureDetail:I.value,successJumpUrl:V(s),iseeBizNo:y}),u=await Fe(x({orderNo:s},a)),{code:l,data:c}=u;l==="10000"&&(U?t.replace(`/chuangxin/baigebao/orderDetail?orderNo=${s}&productCode=${f}&tenantId=${i}`):$.value=!0)},A=async s=>{try{S.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"});const a=await se(),u=await Be({tenantId:i,applicationNo:o.value.applicationNo});if(w.value){const l=encodeURIComponent(encodeURIComponent(V(a))),c=`${w.value}&successUrl=${l}`;U?window.location.href=c:window.location.href=w.value}else re(a)}catch(a){console.log(a),S.clear()}},le=async s=>{U?E.value=!0:A()},ie=()=>{S.loading({forbidClick:!0,duration:20*1e3,message:"\u8BD5\u7B97\u4E2D"});const s=Me({productCode:f,withInsureInfo:!0,tenantId:i}),a=Oe({productCode:f}),u=$e({orderNo:R,tenantId:i});Promise.all([s,a,u]).then(([l,c,d])=>{var v;l.code==="10000"&&(m.value=l.data,document.title=((v=l.data)==null?void 0:v.productFullName)||""),c.code==="10000"&&(I.value=c.data),d.code==="10000"&&(o.value=d.data,O.value=d.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),ne()})};return ge(()=>{ie(),setTimeout(async()=>{y=window.getIseeBiz&&await window.getIseeBiz()},1500)}),(s,a)=>{const u=k("ProRadioButton"),l=k("ProField"),c=k("van-config-provider");return P(),De(c,{"theme-vars":h(be)},{default:j(()=>{var d,v,D,C,M,T,q,z,G,H;return[n("div",Xe,[n("img",{src:(v=(d=m.value)==null?void 0:d.tenantProductInsureVO)==null?void 0:v.banner[0],class:"banner"},null,8,Ze),n("div",et,[n("div",tt,[_(B,{title:"\u59D3\u540D",desc:h(ke)((C=(D=o.value)==null?void 0:D.tenantOrderInsuredList)==null?void 0:C[0].name)},null,8,["desc"]),_(B,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:h(Ne)((T=(M=o.value)==null?void 0:M.tenantOrderInsuredList)==null?void 0:T[0].certNo)},null,8,["desc"]),_(B,{title:"\u624B\u673A\u53F7\u7801",desc:h(Pe)((z=(q=o.value)==null?void 0:q.tenantOrderHolder)==null?void 0:z.mobile)},null,8,["desc"]),_(B,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${h(Le)(g.value||0)}\u5143 / \u6BCF\u6708`},null,8,["desc"]),_(l,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:j(()=>[_(u,{modelValue:O.value,"onUpdate:modelValue":a[0]||(a[0]=F=>O.value=F),disabled:!0,options:h(Ce)},null,8,["modelValue","options"])]),_:1}),n("div",{class:"submit",onClick:le})])]),_(Qe,{"is-show":$.value,onOnClose:oe},null,8,["is-show"])]),_(xe,{show:E.value,"onUpdate:show":a[1]||(a[1]=F=>E.value=F),"content-list":(H=(G=m.value)==null?void 0:G.tenantProductInsureVO)==null?void 0:H.attachmentVOList,"active-index":ae.value,text:"\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u544A\u77E5\u5185\u5BB9",onSubmit:A},null,8,["show","content-list","active-index"])]}),_:1},8,["theme-vars"])}}});var _t=L(at,[["__scopeId","data-v-4ed241a3"]]);export{_t as default};

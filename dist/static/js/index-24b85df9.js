import{g as Y,a9 as L,r as A,j as v,n as b,z as t,J as m,A as S,d as W,p as g,m as C,ab as T,t as P,a4 as w,a5 as V,C as F,D as j,T as q,E,y as H,_ as $,h as z,k as x,G as J,F as X}from"./vendor-17026bfd.js";import{_ as M,b as O,ae as f,k as Z,s as K}from"./index-9488b55c.js";import{d as Q,g as ee}from"./order-a4a62645.js";import{O as te,b as U,a as B}from"./order-a61cf381.js";const R=e=>(w("data-v-26118e08"),e=e(),V(),e),ae={class:"com-order-item"},se={class:"header"},oe={class:"product-name"},de={class:"company-name"},ne={class:"status"},ue={class:"info"},ie={class:"info-item"},re=R(()=>t("div",{class:"label"},"\u6295\u4FDD\u4EBA",-1)),le={class:"desc"},ce={class:"info-item"},_e=R(()=>t("div",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),pe={class:"desc"},ve={class:"footer"},he={class:"fee"},me=F(" \u4FDD\u8D39\uFF1A"),fe={class:"money"},ge={key:0,class:"buttons"},Ce=F("\u5220\u9664"),ye=F("\u53BB\u5904\u7406"),Ie={key:1,class:"buttons"},De=F("\u53BB\u652F\u4ED8"),Se={key:2,class:"buttons"},Ee=F("\u5220\u9664"),be=Y({props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup(e,{emit:y}){const s=e,_=L(),I=()=>{j.confirm({title:"",message:"\u786E\u8BA4\u8981\u5220\u9664\u8BE5\u8BA2\u5355\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{Q(s.detail.id,s.detail.orderStatus).then(o=>{const{code:a,data:d}=o;a==="10000"&&(q.success("\u5220\u9664\u6210\u529F"),y("afterDelete"))})})},l=()=>{const{goodsCode:o,orderNo:a,id:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyId:i,saleChannelId:h,orderStatus:D}=s.detail;if((B.PENDING===D||B.PAYING===D||B.UP_PROCESSING===D)&&[f.ZXYS,f.BWYL,f.BWYLUP].includes(o)){const G={[f.ZXYS]:"/internet/productDetail/package",[f.BWYL]:"/internet/productDetail",[f.BWYLUP]:"/internet/guaranteeUpgrade"};return _.push({path:G[o],query:{productCode:o,saleChannelId:h,agentCode:p,tenantId:n,agencyCode:i,orderNo:a}}),!0}return!1},N=()=>{const{goodsCode:o,orderNo:a,id:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyId:i}=s.detail;l()||_.push({path:O.payInfo,query:{productCode:o,orderNo:a,orderId:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyCode:i}})},k=()=>{const{goodsCode:o,orderNo:a,id:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyId:i,saleChannelId:h,orderStatus:D}=s.detail;l()||_.push({path:O[s.detail.pageCode],query:{productCode:o,orderNo:a,orderId:d,agentCode:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyCode:i,isFromOrderList:"1"}})};return(o,a)=>{const d=A("van-button");return v(),b("div",ae,[t("div",se,[t("div",oe,m(e.detail.goodsName),1),t("div",de,m(e.detail.abbreviation),1),t("div",ne,m(S(te)[e.detail.orderStatus]),1)]),t("div",ue,[t("div",ie,[re,t("div",le,m(e.detail.policyHolder),1)]),t("div",ce,[_e,t("div",pe,m(S(W)(e.detail.orderStartDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),t("div",ve,[t("div",he,[me,t("span",fe,"\uFFE5"+m(e.detail.prem),1)]),e.detail.orderTopStatus===S(U).PENDING?(v(),b("div",ge,[g(d,{class:"button",onClick:T(I,["stop"])},{default:C(()=>[Ce]),_:1},8,["onClick"]),g(d,{class:"button primary",onClick:T(k,["stop"])},{default:C(()=>[ye]),_:1},8,["onClick"])])):P("",!0),e.detail.orderTopStatus===S(U).PAYING?(v(),b("div",Ie,[g(d,{class:"button primary",onClick:T(N,["stop"])},{default:C(()=>[De]),_:1},8,["onClick"])])):P("",!0),e.detail.orderTopStatus===S(U).TIMEOUT?(v(),b("div",Se,[g(d,{class:"button",onClick:T(I,["stop"])},{default:C(()=>[Ee]),_:1},8,["onClick"])])):P("",!0)])])}}});var Fe=M(be,[["__scopeId","data-v-26118e08"]]);const Ne={class:"page-order"},ke=Y({setup(e){L();const y=E(0),s=E(1),_=E(!1),I=E(!1),l=E([]),N=[{title:"\u5168\u90E8",status:""},{title:"\u5F85\u5904\u7406",status:"-1"},{title:"\u5F85\u652F\u4ED8",status:"0"},{title:"\u5DF2\u5B8C\u6210",status:"1"},{title:"\u5DF2\u5931\u6548",status:"2"}],k=H(()=>N[y.value].status),o=r=>{const{orderNo:n,saleUserId:u,tenantId:c,abbreviation:i,productCategory:h}=r;K("orderDetail",{orderNo:n,agentCode:u,tenantId:c,abbreviation:i,productCategory:h})},a=()=>{_.value=!0,ee({condition:{orderTopStatus:k.value},pageSize:10,pageNum:s.value}).then(r=>{_.value=!1;const{code:n,data:u}=r;n==="10000"&&(s.value===1?l.value=u.datas:l.value=[...l.value,...u.datas]),I.value=l.value.length>=u.total})},d=()=>{s.value+=1,a()},p=()=>{s.value=1,a()};return $(k,()=>{s.value=1,a()}),z(()=>{a()}),(r,n)=>{const u=A("van-list"),c=A("ProPageWrap");return v(),x(c,{"main-class":"page-order-list"},{default:C(()=>[t("div",Ne,[g(Z,{active:y.value,"onUpdate:active":n[0]||(n[0]=i=>y.value=i),list:N,"small-gap":"",class:"tab"},null,8,["active"]),g(u,{class:"body",loading:_.value,finished:I.value,onLoad:d},{default:C(()=>[(v(!0),b(X,null,J(l.value,(i,h)=>(v(),x(Fe,{key:h,detail:i,onClick:D=>o(i),onAfterDelete:p},null,8,["detail","onClick"]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var Ae=M(ke,[["__scopeId","data-v-5f493360"]]);export{Ae as default};

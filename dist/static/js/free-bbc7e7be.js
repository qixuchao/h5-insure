import{i as e,ax as t,r as a,N as o,$ as n,m as l,s as r,B as i,C as s,t as d,Z as u,a5 as c,a6 as p,P as f,k as A,l as m,p as v,L as h,F as I,G as y,aa as g,ay as C,n as w,H as b,x as P}from"./vendor-87894311.js";import{P as k}from"./index-2753e9c0.js";import{B as j}from"./index-cfd307e3.js";import{_ as D}from"./index-72ed6f4e.js";import{a as O,s as x}from"./phoneVerify-3cbc3d3d.js";import{_ as B}from"./index-881f6d78.js";import{q as T,p as F,g as N}from"./product-54c4302a.js";import{i as V,t as E,n as _}from"./trial-fecf4a18.js";import{f as U}from"./utils-69f3424a.js";import{u as H}from"./theme-b9409b06.js";import"./check-detail-c292a89b.js";import"./infoCollection-2a6bd55e.js";import"./relativeTime-89dc646e.js";import"./useDicData-333b2a5a.js";import"./useStorage-2847e8df.js";import"./trial-1ceefc83.js";var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAMAAACBgxnEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA8UExURUdwTPpkAPpkAPpkAPlkAPlkAP9fAPpkAP9jAPljAPljAPlkAPdhAP9VAPhlAPpjAPpiAPpkAPlhAPpkAKrbDd8AAAATdFJOUwCe3XX6YBgzC+yKwSIDTrE+0C9Hm6hZAAAAf0lEQVR42u2MSw6AIAxEi6CCf+j976ommvG3omxMOqv2vczQmZa3tPRMptdZndVZndXZf892/JGOxN68qUEr24/zk84jSvne93fae3Qk3scrjZeWzDcVaNUQIvRDOGkYQOU+hYMmsBJ+cTt1C0gZP7mNTvhL+Zq5xlfOW4tb6le9ZDBDk4RvXwAAAABJRU5ErkJggg==";const Z={class:"free-crad"},L={class:"container"},S={class:"title"},z=["src"],G=(e=>(c("data-v-5e63eef8"),e=e(),p(),e))((()=>i("span",null,"最后一步 填写信息",-1))),M=["src"];var q=B(e({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}}},setup(e){const c=e;t((e=>({"3e2712f6":c.colors[0],"3e2712b8":c.colors[1]})));const p=a(),f=o({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"手机号"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"验证码"}],2:[],3:[]},isFirst:!0}),A=async(e,t)=>{const a=c.isFirst?O:x,o=await a(e),{code:n,data:l}=o;"10000"===n&&(null==t||t())};return n((()=>c.isFirst),(()=>{var e;c.isFirst||(f.factorObj=null==(e=c.insureDetail)?void 0:e.productFactor)})),(t,a)=>(l(),r("div",Z,[i("div",L,[i("div",S,[i("img",{src:s(R)},null,8,z),G,i("img",{src:s(R)},null,8,M)]),d(D,{ref_key:"formRef",ref:p,"send-sms-code":A,"form-info":e.detail,"factor-object":s(f).factorObj},null,8,["form-info","factor-object"]),u(t.$slots,"default",{},void 0,!0)])]))}}),[["__scopeId","data-v-5e63eef8"]]);const J={class:"pre-body"},Q={class:"header"},X=["src"],$={class:"company-name"},K={class:"content"},Y=y(" 为了更好地保护您的个人信息，请在使用前点击阅读、充分理解"),W=y("相关内容，我们对您使用过程中可能出现的个人信息收集、使用、共享和保护等情况进行了详细说明。 您已进入投保流程，请仔细阅读"),ee=y("、投保须知、保险条款等信息，为维护您的合法权益，您的操作轨迹将被记录。 "),te={class:"footer"};var ae=B(e({props:{productDetail:{type:Object,default:()=>{}}},setup(e){const t=e,n=f(),{tenantId:u=""}=n.query,c=a(!0),p=a(!1),y=o({insureConfig:{insureName:"",tenantName:""}}),g=a({title:"",link:""}),C=(e,t)=>{var a;p.value=!p.value,g.value.link=null==(a=y.insureConfig)?void 0:a[t].link,g.value.title=e.target.innerText};return A((()=>{c.value=!1,(async()=>{const{code:e,data:a}=await T({insureCode:t.productDetail.insurerCode,tenantId:u});"10000"===e&&(y.insureConfig=a),c.value=!0})()})),(e,t)=>{var a;const o=m("ProPopup"),n=m("ProFilePreview");return l(),r(I,null,[d(o,{class:"pre-notice-wrap",show:c.value,closeable:!1,height:"395px"},{default:v((()=>[i("div",J,[i("div",Q,[i("img",{src:s("/static/assets/logo.65e1895e.png")},null,8,X),i("div",$," 由"+h(s(y).insureConfig.tenantName)+"提供保险经纪服务，"+h(s(y).insureConfig.insureName)+"承保 ",1)]),i("div",K,[Y,i("span",{onClick:t[0]||(t[0]=e=>C(e,"privacyAgreement"))},"《用户隐私协议》"),W,i("span",{onClick:t[1]||(t[1]=e=>C(e,"notification"))},"《客户告知书》"),ee]),i("div",te,[d(k,{shadow:!1,text:"我知道了",onClick:t[2]||(t[2]=e=>c.value=!1)})])])])),_:1},8,["show"]),d(o,{show:p.value,"onUpdate:show":t[3]||(t[3]=e=>p.value=e),class:"pre-notice-wrap",title:null==(a=g.value)?void 0:a.title,position:"bottom",style:{height:"600px"}},{default:v((()=>{var e;return[d(n,{content:null==(e=g.value)?void 0:e.link,type:"link"},null,8,["content"])]})),_:1},8,["show","title"])],64)}}}),[["__scopeId","data-v-863c83c2"]]);const oe={class:"page-free-product-detail"},ne={class:"product-desc"},le=["src"],re={key:0,class:"page-free-footer"};var ie=B(e({setup(e){t((e=>({d4931e7a:s(Z).colors[1]})));const n=H(),u=g(),c=f(),{productCode:p="",openId:h="",tenantId:y="",indirectCode:D="123",saleUserId:O="",saleChannelId:x="",extraInfo:B}=c.query;let T="";const R=a(),Z=o({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},banner:"",productDesc:[],newAuth:!0,insureDetail:{},loading:!0,showBtn:!1}),L=async()=>{var e,t,a,o;const n=Z.newAuth?E:_;let l={loginType:"2",openId:h,thirdUserType:"XINAO_WECHAT",indirectCode:D};Z.newAuth?(l.loginName=Z.order.tenantOrderHolder.mobile,l.password=Z.order.tenantOrderHolder.verificationCode):l=U({order:Z.order,tenantId:y,extraInfo:JSON.parse(B),detail:Z.detail,insureDetail:Z.insureDetail,iseeBizNo:T,saleUserId:O,saleChannelId:x,pageCode:"infoCollection",buttonCode:"EVENT_FREE_multiIssuePolicy"});try{const{code:r,data:i}=await n(l);"10000"===r&&(!Z.newAuth&&(null==(t=null==(e=i.pageAction)?void 0:e.data)?void 0:t.orderNo)&&u.push(`/baseInsurance/orderDetail?from=free&tenantId=${y}&orderNo=${null==(o=null==(a=i.pageAction)?void 0:a.data)?void 0:o.orderNo}&productCode=${p}`),Z.newAuth=!1)}catch(r){}};return A((()=>{(async()=>{Z.loading=!0;const e=F({productCode:p,withInsureInfo:!0,tenantId:y}),t=V({productCode:p}),a=N({openId:h});await Promise.all([e,t,a]).then((([e,t,a])=>{var o,n,l;if("10000"===e.code){Z.detail=e.data,Z.banner=null==(o=Z.detail.tenantProductInsureVO)?void 0:o.banner[0];const{colorEnd:t,colorStart:a}=(null==(n=Z.detail.tenantProductInsureVO)?void 0:n.backgroundInsureVO)||{};Z.colors=[a,t],Z.productDesc=Z.detail.tenantProductInsureVO.spec||[],document.title=Z.detail.productFullName||""}"10000"===t.code&&(Z.insureDetail=t.data,Z.insureDetail.productFactor[2]=null==(l=Z.insureDetail.productFactor)?void 0:l[2].map((e=>{var t,a;return"relationToHolder"===e.code&&1===e.isDisplay&&(e.title="被保人",Z.order.tenantOrderInsuredList[0].relationToHolder=(null==(a=null==(t=e.attributeValueList)?void 0:t[0])?void 0:a.code)||""),e}))),"10000"===a.code&&(Z.newAuth=!a.data),Z.loading=!1}))})(),setTimeout((async()=>{T=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),C(R,(([{isIntersecting:e}],t)=>{Z.showBtn=!e})),(e,t)=>{const a=m("van-config-provider");return l(),w(a,{"theme-vars":s(n)},{default:v((()=>[i("div",oe,[d(j,{url:s(Z).banner},null,8,["url"]),d(q,{"is-first":s(Z).newAuth,"insure-detail":s(Z).insureDetail,detail:s(Z).order,colors:s(Z).colors},{default:v((()=>[d(k,{ref_key:"root",ref:R,class:"submit-btn","is-gradient":!1,text:s(Z).newAuth?"立即领取":"激活保障",onClick:L},null,8,["text"])])),_:1},8,["is-first","insure-detail","detail","colors"]),i("div",ne,[(l(!0),r(I,null,b(s(Z).productDesc,((e,t)=>(l(),r("img",{key:t,src:e},null,8,le)))),128))]),s(Z).showBtn?(l(),r("footer",re,[d(k,{"is-gradient":!1,text:s(Z).newAuth?"立即领取":"激活保障"},null,8,["text"])])):P("",!0)]),s(Z).loading?P("",!0):(l(),w(ae,{key:0,"product-detail":s(Z).detail},null,8,["product-detail"]))])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-6100716b"]]);export{ie as default};

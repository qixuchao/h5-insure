import{_ as a,d as e,i as s,h as l,O as t,k as r,o,l as d,w as n,a as u,e as i,u as c,V as v,m as I,b_ as p,p as b,b as m,a8 as C,b$ as f,c0 as _,c1 as N,T as h,c2 as T,a9 as S,an as E,at as O,au as y}from"./index-232d6b3e.js";import{c as P}from"./format-b5e9d8b9.js";import{u as g}from"./useOrder-f55c4c3b.js";const j={class:"page-phone-verify"},A=(a=>(O("data-v-69a530b5"),a=a(),y(),a))((()=>u("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息填写",-1))),D={class:"phone"},U={class:"input-wrapper"};var k=a(e({__name:"phoneVerify",setup(a){const e=g(),O=s(""),y=s(""),k=s(0);let q;const w=l(),{agentCode:F,tenantId:R,templateId:V,productCode:W,insurerCode:x,orderNo:G,orderCode:$}=w.query,L=()=>{_(O.value).then((({code:a})=>{"10000"===a&&(k.value=60,q=setInterval((()=>{k.value-=1,k.value<=0&&clearInterval(q)}),1e3))}))},M=()=>{N(O.value,y.value).then((({code:a,data:s})=>{"10000"===a&&s?(h.success("验证成功"),e.value.orderStatus===T.PROCESSING?S("infoCollection",{...w.query,isShare:1}):[T.WAIT_IDENTIFICATION,T.IDENTIFICATION_COMPLETE,T.IN_IDENTIFICATION,T.UNDER_WRITING_SUCCESS].includes(e.value.orderStatus)&&S("infoPreview",{...w.query,isShare:1})):h.fail("验证失败")}))};return t((()=>{f({orderNo:$||G,saleUserId:F,tenantId:R}).then((({code:a,data:s})=>{var l;"10000"===a&&(Object.assign(e.value,s),O.value=null==(l=null==s?void 0:s.holder)?void 0:l.mobile)}))})),(a,e)=>{const s=E,l=r("ProPageWrap");return o(),d(l,null,{default:n((()=>[u("div",j,[A,u("div",D,i(c(P)(c(O)||"")),1),u("div",U,[v(u("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>I(y)?y.value=a:null),placeholder:"请输入验证码",class:"input"},null,512),[[p,c(y)]]),u("div",{class:b(["btn",{second:c(k)}]),onClick:L},i(c(k)?`${c(k)}s`:"发送验证码"),3)]),m(s,{type:"primary",class:"submit-btn",onClick:M},{default:n((()=>[C("下一步")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-69a530b5"]]);export{k as default};

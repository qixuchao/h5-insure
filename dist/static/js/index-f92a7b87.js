var T=Object.defineProperty,E=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var w=(l,a,e)=>a in l?T(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,B=(l,a)=>{for(var e in a||(a={}))R.call(a,e)&&w(l,e,a[e]);if(V)for(var e of V(a))N.call(a,e)&&w(l,e,a[e]);return l},S=(l,a)=>E(l,I(a));import{f as j}from"./utils-ffe91e11.js";import{_ as F}from"./index-4efca34e.js";import{g as $,a0 as A,S as U,h as f,A as y,o as c,E as z,X as D,k as i,B as p,a1 as C,H as G,J as g,m as P,R as H,r as J,z as O,i as k,t as b,U as X,G as K}from"./vendor-efd23fdb.js";import{_ as M}from"./index-121362bf.js";const Q=$({props:{placeholder:{default:"\u8BF7\u8F93\u5165"},label:{default:""},title:{default:""},block:{type:Boolean,default:!1},isLink:{type:Boolean,default:!1},rules:{default:()=>[]},required:{type:Boolean,default:!1},isView:{type:Boolean,default:!1},validateType:{default:()=>[]}},emits:["click"],setup(l,{emit:a}){const e=l,u=A(),o=U("formProps")||{},m=f(()=>{let t=[];return e.rules&&e.rules.length>0&&(t=[...e.rules]),e.required&&(t=[...t,{required:!0,message:`${e.isLink?"\u8BF7\u9009\u62E9":"\u8BF7\u8F93\u5165"}${e.label}`}]),e.validateType&&e.validateType.length>0&&(t=[...t,...e.validateType.map(r=>j(r,e.label))]),t}),h=()=>{!e.isView&&!o.isView&&a("click")},v=f(()=>e.isView||o.isView?!1:e.isLink);return(t,r)=>{const d=y("VanField");return c(),z(d,P(t.$attrs,{label:l.label,"input-align":"right","is-link":i(v),placeholder:l.placeholder,rules:i(m),class:["com-pro-field",{block:l.block}],readonly:i(o).isView||l.isView,onClick:h}),D({_:2},[i(u).label?{name:"label",fn:p(()=>[C(t.$slots,"label",{},()=>[G(g(l.label),1)],!0)])}:void 0,i(u).input?{name:"input",fn:p(()=>[C(t.$slots,"input",{},void 0,!0)])}:void 0]),1040,["label","is-link","placeholder","rules","class","readonly"])}}});var ne=F(Q,[["__scopeId","data-v-6a3b98c0"]]);const W={key:0,class:"displayValue"},Y={key:1,class:"placeholder"},Z=$({props:{modelValue:{type:[String,Number],default:""},dataSource:{type:Array,default:()=>[]},title:{type:String,default:""},label:{type:String,default:""},isLink:{type:Boolean,default:!0},placeholder:{type:String,default:"\u8BF7\u9009\u62E9"},isView:{type:Boolean,default:!1},required:{type:Boolean,default:!1},mapping:{type:Object,default:()=>({label:"label",value:"value",children:"children"})}},emits:["update:show","confirm","cancel","update:modelValue"],setup(l,{emit:a}){const e=l,[u,o]=H(!1),m=()=>{o(!0)},h=n=>{var s;!((s=n==null?void 0:n[0])==null?void 0:s.value)||(a("update:modelValue",n[0].value),o(!1))},v=()=>{o(!1)},t=J([]),r=f(()=>e.modelValue?e.dataSource.findIndex(n=>n[e.mapping.value]===e.modelValue):""),d=f(()=>{const n=e.dataSource.find(s=>`${s[e.mapping.value]}`==`${e.modelValue}`);return n?n[e.mapping.label]:e.modelValue||""});return O(()=>e.dataSource,(n=[])=>{t.value=n.map(s=>S(B({},s),{text:s[e.mapping.label],value:s[e.mapping.value],children:null}))},{deep:!0,immediate:!0}),(n,s)=>{const q=y("ProField"),x=y("van-picker");return c(),k(K,null,[b(q,P({"model-value":l.modelValue},n.$attrs,{"is-link":l.isLink,label:l.label,"is-view":l.isView,required:l.required,onClick:m}),{input:p(()=>[i(d)?(c(),k("span",W,g(i(d)),1)):(c(),k("span",Y,g(l.placeholder),1))]),_:1},16,["model-value","is-link","label","is-view","required"]),b(M,{show:i(u),"onUpdate:show":s[0]||(s[0]=L=>X(u)?u.value=L:null),height:40,closeable:!1},{default:p(()=>[b(x,{title:l.title||l.label,columns:t.value,"default-index":i(r),onCancel:v,onConfirm:h},null,8,["title","columns","default-index"])]),_:1},8,["show"])],64)}}});var se=F(Z,[["__scopeId","data-v-64e41aa4"]]);export{ne as P,se as a};

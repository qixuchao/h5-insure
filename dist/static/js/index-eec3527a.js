var ie=Object.defineProperty,pe=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var Y=(e,n,r)=>n in e?ie(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,v=(e,n)=>{for(var r in n||(n={}))ve.call(n,r)&&Y(e,r,n[r]);if(X)for(var r of X(n))ce.call(n,r)&&Y(e,r,n[r]);return e},c=(e,n)=>pe(e,me(n));import{g as ue,E as f,X as ee,y as Ee,j as A,n as M,p as u,A as y,m as D,a1 as ye,a2 as be,z as B,C as z,Q as De,aj as Ie,h as fe,r as L,k as H,t as ae,G as Re,F as ge,T as Ce,L as Te,J as Fe}from"./vendor-83047d1f.js";import{_ as le,h as V,F as _,m as ke,U as Ae,G as g,H as E,I as W,l as q,P as Be}from"./index-b38321f8.js";import{c as S}from"./utils-b6782348.js";import{u as _e}from"./useDicData-08474610.js";import{P as Ve}from"./index-93ab78bd.js";import{c as Se,a as he,n as Le}from"./index-35f19a9b.js";var P=(e=>(e[e.REAL_TIME=1]="REAL_TIME",e[e.BATCH=2]="BATCH",e))(P||{});const $=[{value:1,label:"\u5B9E\u65F6\u8F6C\u8D26"},{value:2,label:"\u6279\u91CF\u6263\u6B3E"}];S($);var J=(e=>(e[e.DEBIT=1]="DEBIT",e[e.CREDIT=2]="CREDIT",e[e.PRE_PAY=3]="PRE_PAY",e[e.PRE_CREDIT=4]="PRE_CREDIT",e[e.OTHER=5]="OTHER",e))(J||{});const te=[{value:1,label:"\u501F\u8BB0\u5361"},{value:2,label:"\u8D37\u8BB0\u5361"},{value:3,label:"\u9884\u4ED8\u8D39\u5361"},{value:4,label:"\u51C6\u8D37\u8BB0\u5361"},{value:5,label:"\u5176\u4ED6"}];S(te);var F=(e=>(e[e.FIRST_TERM=1]="FIRST_TERM",e[e.RENEW_TERM=2]="RENEW_TERM",e[e.REPRISE=3]="REPRISE",e[e.OTHER=4]="OTHER",e))(F||{});const oe=[{value:1,label:"\u9996\u671F\u652F\u4ED8"},{value:2,label:"\u7EED\u671F\u652F\u4ED8"},{value:3,label:"\u5E74\u91D1\u9886\u53D6"},{value:4,label:"\u5176\u4ED6"}];S(oe);var C=(e=>(e[e.FIRST_SAME=1]="FIRST_SAME",e[e.RENEW_SAME=2]="RENEW_SAME",e[e.OTHER=3]="OTHER",e))(C||{});const xe=[{value:1,label:"\u540C\u9996\u671F"},{value:2,label:"\u540C\u7EED\u671F"},{value:3,label:"\u5176\u4ED6"}];S(oe);var ne=(e=>(e[e.AUTOMATIC_PADDING=1]="AUTOMATIC_PADDING",e[e.CANCEL=2]="CANCEL",e))(ne||{});const de=[{value:1,label:"\u81EA\u52A8\u57AB\u4ED8"},{value:2,label:"\u4E2D\u6B62\u5408\u540C"}];S(de);const Ne=e=>(ye("data-v-b4bb0f9e"),e=e(),be(),e),Oe={class:"com-bank-card-info"},Ge=Ne(()=>B("span",{class:"field-title"},[z("\u94F6\u884C\u5361\u7167\u7247 "),B("span",{class:"sub-title"},"(\u9700\u4E0A\u4F20\u6B63\u53CD\u4E24\u9762)")],-1)),we=ue({props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:n}){const r=e,x=_e("BANK"),s=f({bankCardType:J.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),N=d=>d&&d.length===2?!0:"\u8BF7\u4E0A\u4F20\u94F6\u884C\u5361\u6B63\u53CD\u9762\u7167\u7247";ee(()=>r.modelValue,d=>{s.value=d},{immediate:!0}),ee(s,d=>{n("update:modelValue",d)});const h=Ee(()=>x.value.map(d=>({label:d.name,value:d.code})));return(d,i)=>(A(),M("div",Oe,[u(V,{modelValue:s.value.bankCardType,"onUpdate:modelValue":i[0]||(i[0]=p=>s.value.bankCardType=p),label:"\u5361\u7247\u7C7B\u578B",name:"bankCardType","data-source":y(te),"is-view":""},null,8,["modelValue","data-source"]),u(_,{modelValue:s.value.bankCardNo,"onUpdate:modelValue":i[1]||(i[1]=p=>s.value.bankCardNo=p),label:"\u94F6\u884C\u5361\u53F7",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"]),u(_,{"model-value":e.holderName,label:"\u6301\u5361\u4EBA",name:"accountName","is-view":""},null,8,["model-value"]),u(V,{modelValue:s.value.payBank,"onUpdate:modelValue":i[2]||(i[2]=p=>s.value.payBank=p),name:"payBank",label:"\u5F00\u6237\u94F6\u884C","data-source":y(h),required:""},null,8,["modelValue","data-source"]),u(_,{label:"\u94F6\u884C\u5361\u7167\u7247",block:"","label-width":"100%",name:"images",rules:[{validator:N}]},{label:D(()=>[Ge]),input:D(()=>[u(ke,{modelValue:s.value.images,"onUpdate:modelValue":i[3]||(i[3]=p=>s.value.images=p),"max-count":2,"upload-type":y(Ae).BANK_CARD},null,8,["modelValue","upload-type"])]),_:1},8,["rules"]),u(_,{modelValue:s.value.mobile,"onUpdate:modelValue":i[4]||(i[4]=p=>s.value.mobile=p),label:"\u9884\u7559\u624B\u673A\u53F7",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])]))}});var K=le(we,[["__scopeId","data-v-b4bb0f9e"]]),je="/static/assets/bank.588e555f.pdf";const He={class:"page-bank-card"},We={class:"reprise-card-list"},qe=["onClick"],Ke={class:"agree"},Me=z(" \u6295\u4FDD\u4EBA\u9605\u8BFB\u5E76\u63A5\u53D7 "),Pe={class:"footer-button footer"},$e=z("\u4E0B\u4E00\u6B65"),ze=ue({setup(e){const n=De(),r=Ie(),{orderNo:x="2022072710380711215",agentCode:s="D1234567-1",tenantId:N="9991000007",templateId:h=1}=n.query,d={bankCardType:J.DEBIT};let i={};const p=f(""),m=f({payMethod:P.REAL_TIME,bankData:c(v({},d),{imagesId:[],images:[]})}),o=f({payMethod:P.REAL_TIME,expiryMethod:ne.AUTOMATIC_PADDING,bankData:c(v({},d),{imagesId:[],images:[]}),payInfoType:C.FIRST_SAME}),b=f({bankData:c(v({},d),{imagesId:[],images:[]})}),k=f(C.FIRST_SAME),O=f(!1),Q=f(),U=f(),Z=f(),re=R=>{k.value=R},se=()=>{var R,l,I;if(!O.value){Ce.fail("\u8BF7\u52FE\u9009\u540C\u610F\u94F6\u884C\u8F6C\u8D26\u6388\u6743");return}Promise.all([(R=Q.value)==null?void 0:R.validate(),(l=U.value)==null?void 0:l.validate(),(I=Z.value)==null?void 0:I.validate()]).then(a=>{const G=[c(v({},a[0]),{id:m.value.id,paymentType:F.FIRST_TERM}),c(v({},a[1]),{id:o.value.id,paymentType:F.RENEW_TERM}),c(v({},a[2]),{id:b.value.id,paymentType:F.REPRISE,payInfoType:k.value})],T=[{category:E.OBVERSE_BANK_CARD,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:g.INIT_SIGN,type:"png",uri:a[0].images[0],id:m.value.bankData.imagesId[0]},{category:E.REVERSE_BANK_CARD,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:g.INIT_SIGN,type:"png",uri:a[0].images[1],id:m.value.bankData.imagesId[1]}];o.value.payInfoType===C.OTHER&&(T.push({category:E.OBVERSE_BANK_CARD,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:g.RENEWAL_SIGN,type:"png",uri:a[1].images[0],id:o.value.bankData.imagesId[0]}),T.push({category:E.REVERSE_BANK_CARD,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:g.RENEWAL_SIGN,type:"png",uri:a[1].images[1],id:o.value.bankData.imagesId[1]})),k.value===C.OTHER&&(T.push({category:E.OBVERSE_BANK_CARD,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:g.ANNUAL_SIGN,type:"png",uri:a[2].images[0],id:b.value.bankData.imagesId[0]}),T.push({category:E.REVERSE_BANK_CARD,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:g.ANNUAL_SIGN,type:"png",uri:a[2].images[1],id:b.value.bankData.imagesId[1]})),Le(c(v({},i),{pageCode:"payInfo",tenantOrderPayInfoList:G,extInfo:c(v({},i.extInfo),{templateId:h,pageCode:"payInfo"}),operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:T})).then(t=>{const{code:w,data:j}=t;w==="10000"&&j.success&&r.push({path:Be[j.pageAction.data.nextPageCode],query:n.query})})})};return fe(()=>{Se({pageCode:"payInfo",templateId:h}).then(R=>{console.log("res",R)}),he({orderNo:x,saleUserId:s,tenantId:N}).then(R=>{const{code:l,data:I}=R;l==="10000"&&I&&(i=I,p.value=I.tenantOrderHolder.name,I.tenantOrderPayInfoList.forEach(a=>{a.paymentType===F.FIRST_TERM?(m.value=a,m.value.bankData=c(v(v({},d),a),{images:[],imagesId:[]})):a.paymentType===F.RENEW_TERM?(o.value=a,o.value.bankData=c(v({},a),{images:[],imagesId:[]})):a.paymentType===F.REPRISE&&(b.value=a,b.value.bankData=c(v({},a),{images:[],imagesId:[]}),k.value=a.payInfoType)}),I.tenantOrderAttachmentList.forEach(a=>{a.objectType===g.INIT_SIGN?(a.category===E.OBVERSE_BANK_CARD&&(m.value.bankData.images[0]=a.uri,m.value.bankData.imagesId[0]=a.id),a.category===E.REVERSE_BANK_CARD&&(m.value.bankData.images[1]=a.uri,m.value.bankData.imagesId[1]=a.id)):a.objectType===g.RENEWAL_SIGN?(a.category===E.OBVERSE_BANK_CARD&&(o.value.bankData.images[0]=a.uri,o.value.bankData.imagesId[0]=a.id),a.category===E.REVERSE_BANK_CARD&&(o.value.bankData.images[1]=a.uri,o.value.bankData.imagesId[1]=a.id)):a.objectType===g.ANNUAL_SIGN&&(a.category===E.OBVERSE_BANK_CARD&&(b.value.bankData.images[0]=a.uri,b.value.bankData.imagesId[0]=a.id),a.category===E.REVERSE_BANK_CARD&&(b.value.bankData.images[1]=a.uri,b.value.bankData.imagesId[1]=a.id))}))})}),(R,l)=>{const I=L("van-switch"),a=L("van-checkbox"),G=L("van-button"),T=L("ProPageWrap");return A(),H(T,null,{default:D(()=>[B("div",He,[u(q,{title:"\u9996\u671F\u652F\u4ED8"},{default:D(()=>[u(W,{ref_key:"form1",ref:Q},{default:D(()=>[u(V,{modelValue:m.value.payMethod,"onUpdate:modelValue":l[0]||(l[0]=t=>m.value.payMethod=t),name:"payMethod",required:"",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":y($)},null,8,["modelValue","data-source"]),u(K,{modelValue:m.value.bankData,"onUpdate:modelValue":l[1]||(l[1]=t=>m.value.bankData=t),"holder-name":p.value},null,8,["modelValue","holder-name"])]),_:1},512)]),_:1}),u(q,{title:"\u7EED\u671F\u652F\u4ED8"},{default:D(()=>[u(W,{ref_key:"form2",ref:U},{default:D(()=>[u(_,{label:"\u540C\u9996\u671F",name:"payInfoType"},{input:D(()=>[u(I,{modelValue:o.value.payInfoType,"onUpdate:modelValue":l[2]||(l[2]=t=>o.value.payInfoType=t),size:"22","active-value":y(C).FIRST_SAME,"inactive-value":y(C).OTHER},null,8,["modelValue","active-value","inactive-value"])]),_:1}),u(V,{modelValue:o.value.payMethod,"onUpdate:modelValue":l[3]||(l[3]=t=>o.value.payMethod=t),name:"payMethod",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":y($),required:""},null,8,["modelValue","data-source"]),u(V,{modelValue:o.value.expiryMethod,"onUpdate:modelValue":l[4]||(l[4]=t=>o.value.expiryMethod=t),name:"expiryMethod",label:"\u4FDD\u8D39\u903E\u671F\u672A\u652F\u4ED8","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":y(de),required:"","label-width":"200"},null,8,["modelValue","data-source"]),o.value.payInfoType!==y(C).FIRST_SAME?(A(),H(K,{key:0,modelValue:o.value.bankData,"onUpdate:modelValue":l[5]||(l[5]=t=>o.value.bankData=t),"holder-name":p.value},null,8,["modelValue","holder-name"])):ae("",!0)]),_:1},512)]),_:1}),u(q,{title:"\u5E74\u91D1\u9886\u53D6\u94F6\u884C\u5361",class:"reprise-card","show-divider":!1},{default:D(()=>[B("div",We,[(A(!0),M(ge,null,Re(y(xe),(t,w)=>(A(),M("div",{key:w,class:Te(["reprise-card-item",{selected:k.value===t.value}]),onClick:j=>re(t.value)},Fe(t.label),11,qe))),128))]),u(W,{ref_key:"form3",ref:Z},{default:D(()=>[k.value===y(C).OTHER?(A(),H(K,{key:0,modelValue:b.value.bankData,"onUpdate:modelValue":l[6]||(l[6]=t=>b.value.bankData=t),"holder-name":p.value},null,8,["modelValue","holder-name"])):ae("",!0)]),_:1},512)]),_:1}),B("div",Ke,[u(a,{modelValue:O.value,"onUpdate:modelValue":l[7]||(l[7]=t=>O.value=t),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),Me,u(Ve,{class:"file",title:"\u300A\u94F6\u884C\u8F6C\u8D26\u6388\u6743\u300B",url:y(je)},null,8,["url"])]),B("div",Pe,[u(G,{type:"primary",onClick:se},{default:D(()=>[$e]),_:1})])])]),_:1})}}});var aa=le(ze,[["__scopeId","data-v-7fadadd8"]]);export{aa as default};

import{m as a,r as e,u as s,o as t,s as r,t as l,v as o,x as n,G as d,O as u,H as v,M as c,at as i,P as p,z as m,J as f,T as I,a7 as y,a8 as _}from"./vendor-ec128989.js";import{_ as b,g as h,s as C}from"./index-851d6f85.js";import{s as N,c as P}from"./phoneVerify-d4cef50a.js";import{c as j}from"./format-12461bbc.js";import{a as E}from"./order-866a8201.js";const g={class:"page-phone-verify"},S=(a=>(y("data-v-29510ea1"),a=a(),_(),a))((()=>d("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息预",-1))),U={class:"phone"},q={class:"input-wrapper"},x=f("下一步");var D=b(a({setup(a){const f=e(""),y=e(""),_=e(0);let b;const D=s(),{agentCode:G,tenantId:R,templateId:T,productCode:k,insurerCode:w,orderNo:A}=D.query,H=()=>{N(f.value).then((({code:a})=>{"10000"===a&&(_.value=60,b=setInterval((()=>{_.value-=1,_.value<=0&&clearInterval(b)}),1e3))}))},M=()=>{P(f.value,y.value).then((({code:a,data:e})=>{"10000"===a&&e?(I.success("验证成功"),C("infoPreview",D.query)):I.fail("验证失败")}))};return t((()=>{h({orderNo:A,saleUserId:G,tenantId:R}).then((a=>{var e;const{code:s,data:t}=a;"10000"===s&&([E.PENDING,E.PAYMENT_FAILED,E.UNDER_WRITING_SUCCESS].includes(t.orderStatus)?f.value=null==(e=null==t?void 0:t.tenantOrderHolder)?void 0:e.mobile:C("paymentResult",D.query))}))})),(a,e)=>{const s=r("van-button"),t=r("ProPageWrap");return l(),o(t,null,{default:n((()=>[d("div",g,[S,d("div",U,u(v(j)(f.value)),1),d("div",q,[c(d("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>y.value=a),placeholder:"请输入验证码",class:"input"},null,512),[[i,y.value]]),d("div",{class:p(["btn",{second:_.value}]),onClick:H},u(_.value?`${_.value}s`:"发送验证码"),3)]),m(s,{type:"primary",class:"submit-btn",onClick:M},{default:n((()=>[x])),_:1})])])),_:1})}}}),[["__scopeId","data-v-29510ea1"]]);export{D as default};

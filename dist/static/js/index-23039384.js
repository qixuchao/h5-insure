import{ad as e,_ as n,d as a,r as o,J as t,an as r,E as l,S as i,ah as s,aJ as c,aL as u,c as m,h as d,f,w as p,j as v,g as I,k as D,F as y,t as k,a7 as Y,n as b,m as V,V as h,bT as S,B as g,b9 as w,a8 as L,X as E,Y as M,e as _,a2 as x}from"./index-e9f0a73f.js";import{m as $,n as O}from"./infoCollection-add22923.js";import"./trial-fe502f13.js";import"./pdfh5-008ca364.js";const C=(n,a="YYYY-MM-DD")=>e(n).format(a),N=(n,a=0,o="day",t="YYYY-MM-DD")=>e(n).add(a,o).format(t),T=(n,a=0,o="day",t="YYYY-MM-DD")=>e(n).subtract(a,o).format(t);const U=e=>(E("data-v-19cc96dc"),e=e(),M(),e),P={class:"com-period-cell"},R={key:0,class:"period-custom-cell period-check-btn-cell"},F=U((()=>v("div",{class:"period-cell-label"},"保障期间",-1))),q={class:"period-cell-content"},A=U((()=>v("div",{class:"period-cell-label"},"生效日期",-1))),j={class:"period-cell-content period-custom-cell-content"},H=U((()=>v("div",{class:"period-cell-label"},"保障期限",-1))),J={class:"period-cell-content period-custom-cell-content"},X={key:2,class:"period-custom-cell period-common-cell"},B=U((()=>v("div",{class:"period-cell-label"},"保障期限",-1))),z={class:"period-cell-content"},G=U((()=>v("div",{class:"picker-custom-title"},"保险开始生效日期",-1)));var K=n(a({__name:"index",props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})}},emits:["onReset","onUpdate","onVerify"],setup(n,{expose:a,emit:E}){const M=n;o({});const _=(e,n)=>"year"===e?`${n}年`:"month"===e?`${n}月`:"day"===e?`${n}日`:n,x=o(new Date),U=t({formInfo:M.formInfo}),K=o(!0);o([]),r((()=>U.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(x.value=new Date(e))}));const Q=l((()=>{var e;const{insurancePeriodValueList:n=[]}=(null==(e=M.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n.length?(U.formInfo.coveragePeriod||(U.formInfo.coveragePeriod=n[0].code),n):[]})),W=l((()=>{var e;const{insuranceStartType:n}=(null==(e=M.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),Z=l((()=>{var e;const{insuranceEndType:n}=(null==(e=M.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),[ee,ne]=i(!1),ae=()=>{K.value&&ne(!0)},oe=l((()=>{var e,n;if(`${W.value}`===$.CUSTOM_DAY){const a=null==(n=null==(e=M.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(a&&a.indexOf(",")){const[e,n]=a.split(",");return new Date(N(new Date,Number(e),"day"))}}return new Date(N(new Date,1,"day"))})),te=l((()=>{var e,n;if(`${W.value}`===$.CUSTOM_DAY){const a=null==(n=null==(e=M.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(!a)return new Date;if(a.indexOf(",")){const[e,n]=a.split(",");return new Date(N(new Date,Number(n),"day"))}const o=N(new Date,Number(a),"day");return new Date(o)}return new Date})),re=e=>{U.formInfo.insuranceStartDate=`${C(e)} 00:00:00`,ne(!1)},le=()=>{ne(!1)};return r((()=>M.riskInfo),(()=>{const{productRiskInsureLimitVO:e}=M.riskInfo||{};if(e){const{insurancePeriodValueList:n,paymentFrequencyList:a=[]}=e||{};Q.value=n}}),{deep:!0,immediate:!0}),r([()=>W.value,()=>U.formInfo.coveragePeriod,()=>U.formInfo.insuranceStartDate,()=>M.riskInfo],(()=>{var n,a;if(!U.formInfo.coveragePeriod)return;const[o,t]=U.formInfo.coveragePeriod.split("_");if(!U.formInfo.insuranceStartDate)if(`${W.value}`===$.CUSTOM_DAY){const e=null==(a=null==(n=M.riskInfo)?void 0:n.productRiskInsureLimitVO)?void 0:a.maxInsuranceDay;if(e)if(e.indexOf(",")){const[n,a]=e.split(",");U.formInfo.insuranceStartDate=`${N(new Date,Number(n),"day")} 00:00:00`,K.value=n!==a}else U.formInfo.insuranceStartDate=`${N(new Date,e,"day")} 00:00:00`;else U.formInfo.insuranceStartDate=`${N(new Date,1,"day")} 00:00:00`}else`${W.value}`===$.NEXT_DAY?U.formInfo.insuranceStartDate=`${N(new Date,1,"day")} 00:00:00`:U.formInfo.insuranceStartDate=`${C(new Date)} 00:00:00`;if("to"!==o)T(U.formInfo.insuranceStartDate,1,"day"),`${Z.value}`===O.CURRENT_DAY?U.formInfo.insuranceEndDate=`${e(U.formInfo.insuranceStartDate).add(Number(t),o).subtract(1,"day").format("YYYY-MM-DD")} 23:59:59`:U.formInfo.insuranceEndDate=`${N(U.formInfo.insuranceStartDate,Number(t),o)} 00:00:00`;else{let e=U.formInfo.tenantOrderInsuredList[0].birthday;U.formInfo.tenantOrderInsuredList[0].certType===s.CERT&&U.formInfo.tenantOrderInsuredList[0].certNo&&c(U.formInfo.tenantOrderInsuredList[0].certNo)&&(e=u(U.formInfo.tenantOrderInsuredList[0].certNo));const n=`${T(e,1,"day")} 00:00:00`;"single"===t&&(U.formInfo.insuranceEndDate="9999-99-99 23:59:59"),`${Z.value}`===O.CURRENT_DAY?U.formInfo.insuranceEndDate=`${N(n,Number(t),o)} 23:59:59`:U.formInfo.insuranceEndDate=`${N(e,Number(t),o)} 00:00:00`}}),{immediate:!0,deep:!0}),a({}),(e,n)=>{const a=V,o=h,t=S,r=g,l=w,i=L;return m(),d(y,null,[f(t,null,{default:p((()=>[v("div",P,[I(Q).length>1?(m(),d("div",R,[F,v("div",q,[f(a,{modelValue:I(U).formInfo.coveragePeriod,"onUpdate:modelValue":n[0]||(n[0]=e=>I(U).formInfo.coveragePeriod=e),prop:{label:"value",value:"code"},options:I(Q)},null,8,["modelValue","options"])])])):D("",!0),I(W)+""===I($).CUSTOM_DAY?(m(),d("div",{key:1,class:"period-custom-cell period-common-cell",onClick:ae},[I(K)?(m(),d(y,{key:0},[A,v("div",j,[v("span",null,k(I(U).formInfo.insuranceStartDate?I(C)(I(U).formInfo.insuranceStartDate,"YYYY.MM.DD HH:mm:ss"):""),1),f(o,{class:"custom--arrow-right",name:"arrow-right"})])],64)):(m(),d(y,{key:1},[H,v("div",J,[v("span",null,k(I(U).formInfo.insuranceStartDate?I(C)(I(U).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+k(I(U).formInfo.insuranceEndDate?I(C)(I(U).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])],64))])):D("",!0),I(W)+""!==I($).CUSTOM_DAY?(m(),d("div",X,[B,v("div",z,k(I(U).formInfo.insuranceStartDate?I(C)(I(U).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+k(I(U).formInfo.insuranceEndDate?I(C)(I(U).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])):D("",!0)])])),_:1}),f(i,{show:I(ee),"onUpdate:show":n[3]||(n[3]=e=>Y(ee)?ee.value=e:null),height:340,closeable:!0},{default:p((()=>[f(l,{modelValue:I(x),"onUpdate:modelValue":n[2]||(n[2]=e=>Y(x)?x.value=e:null),type:"date",title:"保险开始生效日期","min-date":I(oe),"max-date":I(te),formatter:_,"visible-item-count":5,class:"custom-date-picker",onConfirm:re,onCancel:le},{cancel:p((()=>[])),title:p((()=>[G])),confirm:p((()=>[f(r,{type:"primary",round:"",block:"",class:"linear-btn custom-picker-btn",onClick:n[1]||(n[1]=e=>ee.value=!1)},{default:p((()=>[b("确 定")])),_:1})])),_:1},8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-19cc96dc"]]);const Q=e=>(E("data-v-1c3b7430"),e=e(),M(),e),W={class:"com-payment-type"},Z={class:"title"},ee={key:0,class:"custom-cell check-btn-cell"},ne=Q((()=>v("div",{class:"cell-label"},"保障方案",-1))),ae={class:"cell-content"},oe={key:1,class:"custom-cell check-btn-cell"},te=Q((()=>v("div",{class:"cell-label"},"交费方式",-1))),re={class:"cell-content"},le={key:2,class:"custom-cell check-btn-cell"},ie=Q((()=>v("div",{class:"cell-label"},"交费期间",-1))),se={class:"cell-content"},ce={key:3,class:"custom-cell common-cell"},ue=Q((()=>v("div",{class:"cell-label"},"实付保费",-1))),me={key:0,class:"cell-content actual-premium"},de={class:"cell-content actual-premium"},fe={key:0,class:"actual-premium actual-premium-month-tip"};var pe=n(a({__name:"index",props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})},tenantProductDetail:{default:()=>({})},planList:{default:()=>[]}},setup(e){const n=e;o({});const a=t({formInfo:n.formInfo}),i=o(),s=o(),c=o([]),u=o([]),Y=l((()=>{var e;return!!(null==(e=n.planList)?void 0:e.length)})),b=l((()=>{var e,o;if(null==(e=n.premiumInfo)?void 0:e.premiumLoadingText)return n.premiumInfo.premiumLoadingText;if(n.tenantProductDetail.length){const e=((null==n?void 0:n.tenantProductDetail)||[]).find((e=>e.planCode===a.formInfo.planCode||!e.planCode))||{},{premium:t,minActualUnit:r}=(e.data||[]).find((e=>e.paymentFrequency===a.formInfo.paymentFrequency))||{};return(null==(o=n.premiumInfo)?void 0:o.premium)?`${n.premiumInfo.premium||""}${r}`:t}return""})),h=l((()=>{if(s){const{premiumExplain:e,premiumExplainViewName:n,premiumExplainUri:a}=s.value||{};return{premiumExplain:e,premiumExplainUri:a,premiumExplainViewName:n}}return null}));l((()=>h.value&&h.value.premiumExplain&&h.value.premiumExplainViewName));const g=l((()=>{var e;if(i.value&&i.value.paymentFrequency){return((null==(e=i.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1}));return r((()=>n.riskInfo),(()=>{var e,o;const{productRiskInsureLimitVO:t}=n.riskInfo||{};if(t){const{paymentFrequencyList:n=[],paymentPeriodValueList:r}=t||{};a.formInfo.paymentFrequency=null==(e=null==n?void 0:n[0])?void 0:e.code,a.formInfo.chargePeriod=null==(o=null==r?void 0:r[0])?void 0:o.code,c.value=r,u.value=n}}),{deep:!0,immediate:!0}),(o,t)=>{const r=V,l=x,i=S;return m(),_(i,null,{default:p((()=>{var o;return[v("div",W,[v("div",Z,k(I(g)?"交费方式":"保障计划"),1),I(Y)?(m(),d("div",ee,[ne,v("div",ae,[f(r,{modelValue:I(a).formInfo.planCode,"onUpdate:modelValue":t[0]||(t[0]=e=>I(a).formInfo.planCode=e),options:e.planList,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])])):D("",!0),I(u).length>1?(m(),d("div",oe,[te,v("div",re,[f(r,{modelValue:I(a).formInfo.paymentFrequency,"onUpdate:modelValue":t[1]||(t[1]=e=>I(a).formInfo.paymentFrequency=e),prop:{label:"value",value:"code"},options:I(u)},null,8,["modelValue","options"])])])):D("",!0),I(c).length>1?(m(),d("div",le,[ie,v("div",se,[f(r,{modelValue:I(a).formInfo.chargePeriod,"onUpdate:modelValue":t[2]||(t[2]=e=>I(a).formInfo.chargePeriod=e),prop:{label:"value",value:"code"},options:I(c)},null,8,["modelValue","options"])])])):D("",!0),f(K,{"form-info":I(a).formInfo,"risk-info":e.riskInfo},null,8,["form-info","risk-info"]),I(b)?(m(),d("div",ce,[ue,(null==(o=n.premiumInfo)?void 0:o.premiumLoadingText)?(m(),d("div",me,k(I(b)),1)):(m(),d(y,{key:1},[v("div",de,k(I(b)),1),"5"===I(a).formInfo.paymentFrequency?(m(),d("div",fe," 共12期 ")):D("",!0)],64))])):D("",!0)]),f(l)]})),_:1})}}}),[["__scopeId","data-v-1c3b7430"]]);export{pe as default};

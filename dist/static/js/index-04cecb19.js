var ue=Object.defineProperty,le=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var q=(e,o,n)=>o in e?ue(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,I=(e,o)=>{for(var n in o||(o={}))oe.call(o,n)&&q(e,n,o[n]);if(W)for(var n of W(o))ne.call(o,n)&&q(e,n,o[n]);return e},g=(e,o)=>le(e,te(o));import{g as M,C as f,X as z,x as de,h as T,m as w,n as t,z as y,k as c,a1 as J,a2 as Q,y as C,B as H,ae as re,M as se,r as R,j as A,s as G,E as ie,F as pe,J as ve,I as me}from"./vendor-89e50ef2.js";import{_ as Z,d as V,z as B,i as ce,U as ye,A as _,h as x}from"./index-b98bfe67.js";import{u as be}from"./useDicData-cffa9831.js";import{c as fe,a as De,n as Ie}from"./index-e009ac36.js";const ge=e=>Array.isArray(e)&&e.length>0,Ee=e=>[void 0,null].includes(e);function h(e=[],o={label:"label",value:"value"}){if(!ge(e))return{};const{label:n,value:r}=o,u={};return e.forEach(s=>{const m=s[`${r}`];Ee(m)||(u[`${m}`]=s[`${n}`])}),u}var O=(e=>(e[e.REAL_TIME=1]="REAL_TIME",e[e.BATCH=2]="BATCH",e))(O||{});const j=[{value:1,label:"\u5B9E\u65F6\u8F6C\u8D26"},{value:2,label:"\u6279\u91CF\u6263\u6B3E"}];h(j);var X=(e=>(e[e.DEBIT=1]="DEBIT",e[e.CREDIT=2]="CREDIT",e[e.PRE_PAY=3]="PRE_PAY",e[e.PRE_CREDIT=4]="PRE_CREDIT",e[e.OTHER=5]="OTHER",e))(X||{});const P=[{value:1,label:"\u501F\u8BB0\u5361"},{value:2,label:"\u8D37\u8BB0\u5361"},{value:3,label:"\u9884\u4ED8\u8D39\u5361"},{value:4,label:"\u51C6\u8D37\u8BB0\u5361"},{value:5,label:"\u5176\u4ED6"}];h(P);var F=(e=>(e[e.FIRST_TERM=1]="FIRST_TERM",e[e.RENEW_TERM=2]="RENEW_TERM",e[e.REPRISE=3]="REPRISE",e[e.OTHER=4]="OTHER",e))(F||{});const K=[{value:1,label:"\u9996\u671F\u652F\u4ED8"},{value:2,label:"\u7EED\u671F\u652F\u4ED8"},{value:3,label:"\u5E74\u91D1\u9886\u53D6"},{value:4,label:"\u5176\u4ED6"}];h(K);var E=(e=>(e[e.FIRST_SAME=1]="FIRST_SAME",e[e.RENEW_SAME=2]="RENEW_SAME",e[e.OTHER=3]="OTHER",e))(E||{});const ke=[{value:1,label:"\u540C\u9996\u671F"},{value:2,label:"\u540C\u7EED\u671F"},{value:3,label:"\u5176\u4ED6"}];h(K);var U=(e=>(e[e.AUTOMATIC_PADDING=1]="AUTOMATIC_PADDING",e[e.CANCEL=2]="CANCEL",e))(U||{});const N=[{value:1,label:"\u81EA\u52A8\u57AB\u4ED8"},{value:2,label:"\u4E2D\u6B62\u5408\u540C"}];h(N);const Fe=e=>(J("data-v-b4bb0f9e"),e=e(),Q(),e),Ce={class:"com-bank-card-info"},Te=Fe(()=>C("span",{class:"field-title"},[H("\u94F6\u884C\u5361\u7167\u7247 "),C("span",{class:"sub-title"},"(\u9700\u4E0A\u4F20\u6B63\u53CD\u4E24\u9762)")],-1)),Be=M({props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:o}){const n=e,r=be("BANK"),u=f({bankCardType:X.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),s=i=>i&&i.length===2?!0:"\u8BF7\u4E0A\u4F20\u94F6\u884C\u5361\u6B63\u53CD\u9762\u7167\u7247";z(()=>n.modelValue,i=>{u.value=i},{immediate:!0}),z(u,i=>{o("update:modelValue",i)});const m=de(()=>r.value.map(i=>({label:i.name,value:i.code})));return(i,p)=>(T(),w("div",Ce,[t(V,{modelValue:u.value.bankCardType,"onUpdate:modelValue":p[0]||(p[0]=v=>u.value.bankCardType=v),label:"\u5361\u7247\u7C7B\u578B",name:"bankCardType","data-source":y(P),"is-view":""},null,8,["modelValue","data-source"]),t(B,{modelValue:u.value.bankCardNo,"onUpdate:modelValue":p[1]||(p[1]=v=>u.value.bankCardNo=v),label:"\u94F6\u884C\u5361\u53F7",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"]),t(B,{"model-value":e.holderName,label:"\u6301\u5361\u4EBA",name:"accountName","is-view":""},null,8,["model-value"]),t(V,{modelValue:u.value.payBank,"onUpdate:modelValue":p[2]||(p[2]=v=>u.value.payBank=v),name:"payBank",label:"\u5F00\u6237\u94F6\u884C","data-source":y(m),required:""},null,8,["modelValue","data-source"]),t(B,{label:"\u94F6\u884C\u5361\u7167\u7247",block:"","label-width":"100%",name:"images",rules:[{validator:s}]},{label:c(()=>[Te]),input:c(()=>[t(ce,{modelValue:u.value.images,"onUpdate:modelValue":p[3]||(p[3]=v=>u.value.images=v),"max-count":2,"upload-type":y(ye).BANK_CARD},null,8,["modelValue","upload-type"])]),_:1},8,["rules"]),t(B,{modelValue:u.value.mobile,"onUpdate:modelValue":p[4]||(p[4]=v=>u.value.mobile=v),label:"\u9884\u7559\u624B\u673A\u53F7",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])]))}});var L=Z(Be,[["__scopeId","data-v-b4bb0f9e"]]);const Ve=e=>(J("data-v-14a0f1c4"),e=e(),Q(),e),he={class:"page-bank-card"},Re={class:"reprise-card-list"},Se=["onClick"],Ae={class:"agree"},_e=H(" \u6295\u4FDD\u4EBA\u9605\u8BFB\u5E76\u63A5\u53D7 "),xe=Ve(()=>C("div",{class:"file"},"\u300A\u94F6\u884C\u8F6C\u8D26\u6388\u6743\u300B",-1)),Le={class:"footer-button footer"},we=H("\u4E0B\u4E00\u6B65"),Oe=M({setup(e){re();let o={};const n=f(""),r=f({payMethod:O.REAL_TIME,bankData:{}}),u=f({payMethod:O.REAL_TIME,expiryMethod:U.AUTOMATIC_PADDING,bankData:{},payInfoType:E.FIRST_SAME}),s=f({bankData:{}}),m=f(E.FIRST_SAME),i=f(!1),p=f(),v=f(),$=f(),Y=D=>{m.value=D},ee=()=>{var D,l,b;Promise.all([(D=p.value)==null?void 0:D.validate(),(l=v.value)==null?void 0:l.validate(),(b=$.value)==null?void 0:b.validate()]).then(a=>{const S=[g(I({},a[0]),{id:r.value.id,paymentType:F.FIRST_TERM}),g(I({},a[1]),{id:u.value.id,paymentType:F.RENEW_TERM}),g(I({},a[2]),{id:s.value.id,paymentType:F.REPRISE,payInfoType:m.value})],k=[{category:24,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:5,type:"png",uri:a[0].images[0],id:r.value.bankData.imagesId[0]},{category:25,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:5,type:"png",uri:a[0].images[1],id:r.value.bankData.imagesId[1]}];u.value.payInfoType===E.OTHER&&(k.push({category:24,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:6,type:"png",uri:a[1].images[0],id:u.value.bankData.imagesId[0]}),k.push({category:25,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:6,type:"png",uri:a[1].images[1],id:u.value.bankData.imagesId[1]})),m.value===E.OTHER&&(k.push({category:24,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:7,type:"png",uri:a[2].images[0],id:s.value.bankData.imagesId[0]}),k.push({category:25,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:7,type:"png",uri:a[2].images[1],id:s.value.bankData.imagesId[1]})),Ie(g(I({},o),{pageCode:"payInfo",tenantOrderPayInfoList:S,extInfo:g(I({},o.extInfo),{templateId:"1",pageCode:"payInfo"}),operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:k}))})};return se(()=>{fe({pageCode:"payInfo",templateId:1}).then(D=>{console.log("res",D)}),De({orderNo:"2022072710380711215",saleUserId:"D1234567-1",tenantId:"9991000007"}).then(D=>{const{code:l,data:b}=D;l==="10000"&&b&&(o=b,n.value=b.tenantOrderHolder.name,b.tenantOrderPayInfoList.forEach(a=>{a.paymentType===F.FIRST_TERM?(r.value=a,r.value.bankData=g(I({},a),{images:[],imagesId:[]})):a.paymentType===F.RENEW_TERM?(u.value=a,u.value.bankData=g(I({},a),{images:[],imagesId:[]})):a.paymentType===F.REPRISE&&(s.value=a,s.value.bankData=g(I({},a),{images:[],imagesId:[]}),m.value=a.payInfoType)}),b.tenantOrderAttachmentList.forEach(a=>{a.objectType===5?(a.category===24&&(r.value.bankData.images[0]=a.uri,r.value.bankData.imagesId[0]=a.id),a.category===25&&(r.value.bankData.images[1]=a.uri,r.value.bankData.imagesId[1]=a.id)):a.objectType===6?(a.category===24&&(u.value.bankData.images[0]=a.uri,u.value.bankData.imagesId[0]=a.id),a.category===25&&(u.value.bankData.images[1]=a.uri,u.value.bankData.imagesId[1]=a.id)):a.objectType===7&&(a.category===24&&(s.value.bankData.images[0]=a.uri,s.value.bankData.imagesId[0]=a.id),a.category===25&&(s.value.bankData.images[1]=a.uri,s.value.bankData.imagesId[1]=a.id))}))})}),(D,l)=>{const b=R("van-switch"),a=R("van-checkbox"),S=R("van-button"),k=R("ProPageWrap");return T(),A(k,null,{default:c(()=>[C("div",he,[t(x,{title:"\u9996\u671F\u652F\u4ED8"},{default:c(()=>[t(_,{ref_key:"form1",ref:p},{default:c(()=>[t(V,{modelValue:r.value.payMethod,"onUpdate:modelValue":l[0]||(l[0]=d=>r.value.payMethod=d),name:"payMethod",required:"",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":y(j)},null,8,["modelValue","data-source"]),t(L,{modelValue:r.value.bankData,"onUpdate:modelValue":l[1]||(l[1]=d=>r.value.bankData=d),"holder-name":n.value},null,8,["modelValue","holder-name"])]),_:1},512)]),_:1}),t(x,{title:"\u7EED\u671F\u652F\u4ED8"},{default:c(()=>[t(_,{ref_key:"form2",ref:v},{default:c(()=>[t(B,{label:"\u540C\u9996\u671F",name:"payInfoType"},{input:c(()=>[t(b,{modelValue:u.value.payInfoType,"onUpdate:modelValue":l[2]||(l[2]=d=>u.value.payInfoType=d),size:"22","active-value":y(E).FIRST_SAME,"inactive-value":y(E).OTHER},null,8,["modelValue","active-value","inactive-value"])]),_:1}),t(V,{modelValue:u.value.payMethod,"onUpdate:modelValue":l[3]||(l[3]=d=>u.value.payMethod=d),name:"payMethod",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":y(j),required:""},null,8,["modelValue","data-source"]),t(V,{modelValue:u.value.expiryMethod,"onUpdate:modelValue":l[4]||(l[4]=d=>u.value.expiryMethod=d),name:"expiryMethod",label:"\u4FDD\u8D39\u903E\u671F\u672A\u652F\u4ED8","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":y(N),required:"","label-width":"200"},null,8,["modelValue","data-source"]),u.value.payInfoType!==y(E).FIRST_SAME?(T(),A(L,{key:0,modelValue:u.value.bankData,"onUpdate:modelValue":l[5]||(l[5]=d=>u.value.bankData=d),"holder-name":n.value},null,8,["modelValue","holder-name"])):G("",!0)]),_:1},512)]),_:1}),t(x,{title:"\u5E74\u91D1\u9886\u53D6\u94F6\u884C\u5361",class:"reprise-card","show-divider":!1},{default:c(()=>[C("div",Re,[(T(!0),w(pe,null,ie(y(ke),(d,ae)=>(T(),w("div",{key:ae,class:ve(["reprise-card-item",{selected:m.value===d.value}]),onClick:je=>Y(d.value)},me(d.label),11,Se))),128))]),t(_,{ref_key:"form3",ref:$},{default:c(()=>[m.value===y(E).OTHER?(T(),A(L,{key:0,modelValue:s.value.bankData,"onUpdate:modelValue":l[6]||(l[6]=d=>s.value.bankData=d),"holder-name":n.value},null,8,["modelValue","holder-name"])):G("",!0)]),_:1},512)]),_:1}),C("div",Ae,[t(a,{modelValue:i.value,"onUpdate:modelValue":l[7]||(l[7]=d=>i.value=d),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),_e,xe]),C("div",Le,[t(S,{type:"primary",onClick:ee},{default:c(()=>[we]),_:1})])])]),_:1})}}});var Ge=Z(Oe,[["__scopeId","data-v-14a0f1c4"]]);export{Ge as default};

!function(){var e=document.createElement("style");e.innerHTML=".page-salesman-inform .van-cell[data-v-1d1c7e90]{display:flex;align-items:center;padding:.4rem 0}.page-salesman-inform .van-cell[data-v-1d1c7e90] .van-cell__title{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:var(--zaui-aide-text-stress, #0d6efe);line-height:.56rem}.page-salesman-inform .van-cell[data-v-1d1c7e90] .van-cell__value{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#99a9c0;line-height:.56rem}.page-salesman-inform .van-cell .active[data-v-1d1c7e90],.page-salesman-inform[data-v-1d1c7e90] .is-active .van-cell__value span{color:var(--van-primary-color, var(--zaui-brand))}.page-salesman-inform .resign[data-v-1d1c7e90]{font-size:.37333rem;color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .date[data-v-1d1c7e90]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-salesman-inform .inform-file[data-v-1d1c7e90]{display:flex;position:absolute;bottom:2.33333rem;padding:0 .4rem}.page-salesman-inform .inform-file .tips[data-v-1d1c7e90]{margin-left:.29333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#393d46;line-height:.53333rem}.page-salesman-inform .inform-file .tips>span[data-v-1d1c7e90]{color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .inform-file .next-btn[data-v-1d1c7e90]{padding:.4rem 0}.page-salesman-inform .inform-file .next-btn .van-button[data-v-1d1c7e90]{border-radius:.10667rem}\n",document.head.appendChild(e),System.register(["./vendor-legacy-80c9b6be.js","./index-legacy-9bc5dba8.js","./inform-legacy-d01fbc20.js","./useStorage-legacy-f7274131.js","./verify-legacy-41d04642.js","./notice-legacy-6932be1e.js"],(function(e){"use strict";var a,t,n,i,o,l,r,s,c,d,u,g,f,m,p,v,y,h,C,b,x,T,_,k,I,S,j,D,N,P,q,L,z,E,A,F,R;return{setters:[function(e){a=e.m,t=e.ab,n=e.u,i=e.r,o=e.d,l=e.P,r=e.o,s=e.s,c=e.t,d=e.v,u=e.x,g=e.U,f=e.C,m=e.J,p=e.O,v=e.F,y=e.I,h=e.E,C=e.N,b=e.H,x=e.T},function(e){T=e._,_=e.a,k=e.E,I=e.g,S=e.A,j=e.t,D=e.n,N=e.N,P=e.b},function(e){q=e.l,L=e.g},function(e){z=e.s},function(e){E=e.s},function(e){A=e.d,F=e.A,R=e.e}],execute:function(){const w={class:"date"},M={class:"inform-file"},U={class:"tips"},Y=b(" 您的签名将被用于"),B=b("文件 "),G={class:"footer-button"},O=b("下一步"),V=a({setup(e){const a=t(),b=n(),{productCode:T="MMBBSF",agentCode:V="65434444",tenantId:H="9991000007",agencyCode:$="3311222",insurerCode:J="zhongan",productCategory:W=1,templateId:K=1,orderNo:Q="2022080217103534947"}=b.query,X=i(null),Z=i(!1),ee=o().format("YYYY-MM-DD"),ae=i(""),te=i(),ne=()=>{X.value?.clear()},ie=l({noticeType:"",materialSource:"",noticeList:[],pageData:{}});r((()=>{I({orderNo:Q,saleUserId:V,tenantId:H}).then((({code:e,data:a})=>{"10000"===e&&(Object.assign(ie.pageData,a),a.tenantOrderAttachmentList.forEach((e=>{e.category===S.ELECTRIC_SIGN&&e.objectType===j.AGENT&&X.value.setDataURL(e.fileBase64)})))})),q({insurerCode:J,orderNo:Q,productCategory:W,tenantId:H,noticeType:F,objectType:R}).then((({code:e,data:a})=>{"10000"===e&&(ie.noticeList=[...ie.noticeList,...a])}))}));const oe=()=>{if(!(ie.noticeList&&ie.noticeList.every((e=>1===e.isDone))))return void x("请完成所有告知进行下一步");if(X.value?.isEmpty())return void x("请完成代理人签字进行下一步");if(!Z.value)return void x("请勾选同意签名");const e=X.value?.save();E("AGENT",e,ie.pageData.id,H).then((e=>{e&&D({...ie.pageData,extInfo:{...ie.pageData.extInfo,templateId:K,pageCode:"salesNotice",buttonCode:N.salesNotice},venderCode:J}).then((({code:e,data:t})=>{"10000"===e&&"jumpToPage"===t.pageAction.pageAction&&a.push({path:P[t.pageAction.data.nextPageCode],query:{...b.query}})}))}))};return(e,t)=>{const n=s("van-cell"),i=s("ProSign"),o=s("van-checkbox"),l=s("van-button"),r=s("ProPageWrap");return c(),d(r,{class:"page-salesman-inform"},{default:u((()=>[g(_,{title:"营销员告知书"},{default:u((()=>[(c(!0),f(y,null,m(v(ie).noticeList,(e=>(c(),d(n,{key:e.id,class:p({"is-active":2===e.isDone}),title:`《${e.title}》`,"is-link":"",value:""+(1===e.isDone?"已完成":"去完成"),onClick:t=>{return n=e,z.set("questionData",n),void a.push({path:"/healthNotice",query:{questionnaireType:n.questionnaireType,...b.query}});var n}},null,8,["class","title","value","onClick"])))),128))])),_:1}),g(_,{title:"营销员签字","show-divider":!1,"show-line":!1},{extra:u((()=>[h("div",{class:"resign",onClick:ne},"重签")])),default:u((()=>[g(i,{ref_key:"agentSignRef",ref:X,selector:"sign2"},null,512),h("div",w,"签名日期： "+C(v(ee)),1)])),_:1}),h("div",M,[g(o,{modelValue:Z.value,"onUpdate:modelValue":t[0]||(t[0]=e=>Z.value=e),shape:"square"},null,8,["modelValue"]),h("p",U,[Y,(c(!0),f(y,null,m(v(ie).noticeList,((e,a)=>(c(),d(k,{key:a,class:"file",title:`《${e.title}》`,content:te.value,type:ae.value,onClick:a=>(e=>{const{id:a,objectType:t}=e,n={1:"pdf",2:"richText",3:"link"};L({insurerCode:J,id:a,objectType:t,productCategory:W,orderNo:Q,tenantId:H}).then((({code:e,data:a})=>{"10000"===e&&(a?.[0].questionType===A?(ae.value="question",te.value=a):(1===a?.[0].textType&&a?.[0].content.includes("png")?ae.value="picture":ae.value=n[a?.[0].textType],te.value=a?.[0].content))}))})(e)},null,8,["title","content","type","onClick"])))),128)),B])]),h("div",G,[g(l,{type:"primary",block:"",onClick:oe},{default:u((()=>[O])),_:1})])])),_:1})}}});e("default",T(V,[["__scopeId","data-v-1d1c7e90"]]))}}}))}();

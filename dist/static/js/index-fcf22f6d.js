var Z=Object.defineProperty,ee=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var q=(e,a,t)=>a in e?Z(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,D=(e,a)=>{for(var t in a||(a={}))te.call(a,t)&&q(e,t,a[t]);if(V)for(var t of V(a))oe.call(a,t)&&q(e,t,a[t]);return e},w=(e,a)=>ee(e,ae(a));import{g as F,j as $,n as H,z as o,J as T,A as C,t as se,a4 as ne,a5 as re,O as le,E as m,h as ue,r as E,k as ie,m as A,p as _,T as M}from"./vendor-fba8f663.js";import{S as ce}from"./infoCollection-b0426750.js";import{_ as b,a1 as de}from"./index-927a024e.js";import{c as pe}from"./close-df102554.js";import{a as me}from"./order-b675ac95.js";import{i as _e,a as ve,s as fe,e as he,E as Ie}from"./trial-4283610d.js";import{t as ge}from"./theme-eeb93d73.js";import{a as De,g as ye,t as Ce,c as Se,d as J}from"./utils-0e486c8b.js";import{p as Oe}from"./product-bb46a113.js";import"./trial-4ef548e7.js";const xe={class:"com-field-info"},we={class:"title"},Ee={class:"desc"},Fe=F({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(e){return(a,t)=>($(),H("div",xe,[o("div",we,T(e.title),1),o("div",Ee,T(e.desc),1)]))}});var y=b(Fe,[["__scopeId","data-v-74e2bdf6"]]);const G=e=>(ne("data-v-39527d44"),e=e(),re(),e),$e={key:0,class:"pro-modal"},be=G(()=>o("div",{class:"pro-overlay"},null,-1)),ke={class:"pro-modal-wrapper"},Ue=G(()=>o("div",{class:"pro-modal-content"},[o("p",null,"\u606D\u559C\u60A8"),o("p",null,"\u4FDD\u969C\u5347\u7EA7\u6210\u529F")],-1)),Be=["src"],Ne=F({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(e,{emit:a}){const t=e,u=()=>{a("on-close")};return(k,U)=>t.isShow?($(),H("div",$e,[be,o("div",ke,[o("div",{class:"pro-modal-body"},[Ue,o("div",{class:"pro-modal-btn",onClick:u},"\u6211\u77E5\u9053\u4E86")]),o("div",{class:"pro-modal-close",onClick:u},[o("img",{src:C(pe)},null,8,Be)])])])):se("",!0)}});var Pe=b(Ne,[["__scopeId","data-v-39527d44"]]);const Le={class:"page-activity-upgrade"},Re=["src"],Ve={class:"container"},qe={class:"main-form"},Te=F({setup(e){const a=le(),{productCode:t="BWYL2022",tenantId:u,orderNo:k,agentCode:U}=a.query,p=m(),v=m(),s=m(),f=m(),S=m(),O=m(),x=m(!1),K=()=>{x.value=!1},Y=async()=>{var d,c,h,I,g;const r=ye({tenantId:u,applicationNo:s.value.applicationNo,policyNo:s.value.policyNo,saleUserId:U,saleChannelId:s.value.saleChannelId,orderStatus:me.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:p.value,insureDetail:v.value,paymentMethod:(c=(d=s.value.extInfo)==null?void 0:d.extraInfo)==null?void 0:c.paymentMethod,renewalDK:(I=(h=s.value.extInfo)==null?void 0:h.extraInfo)==null?void 0:I.renewalDK,successJumpUrl:"",premium:f.value,holder:w(D({},s.value.tenantOrderHolder),{socialFlag:s.value.tenantOrderHolder.extInfo.hasSocialInsurance}),insured:w(D({},s.value.tenantOrderInsuredList[0]),{socialFlag:s.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:Ce({tenantId:u,riskList:Se(v.value.productRiskVoList[0].riskDetailVOList,p.value),riskPremium:{},productId:(g=p.value)==null?void 0:g.id})}),n=await fe(r),{code:i,data:l}=n;return i==="10000"?l.data:""},j=r=>`${de}/chuangxin/baigebao/orderDetail?orderNo=${r}&productCode=${t}&tenantId=${u}`,B=async()=>{const r=J({tenantId:u,premium:f.value,orderDetail:s.value,productDetail:p.value,insureDetail:v.value,successJumpUrl:""}),n=await he(r),{code:i,data:l}=n;i==="10000"&&(f.value=l.installmentPremium,O.value=l.signUrl)},z=async r=>{const n=J({tenantId:u,premium:f.value,orderDetail:s.value,productDetail:p.value,insureDetail:v.value,successJumpUrl:j(r)}),i=await Ie(D({orderNo:r},n)),{code:l,data:d}=i;l==="10000"&&(x.value=!0)},W=async r=>{try{M.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"}),await B();const n=await Y();O.value?window.location.href=O.value:z(n)}catch(n){console.log(n),M.clear()}},Q=()=>{const r=Oe({productCode:t,withInsureInfo:!0,tenantId:u}),n=_e({productCode:t}),i=ve({orderNo:k,tenantId:u});Promise.all([r,n,i]).then(([l,d,c])=>{l.code==="10000"&&(p.value=l.data),d.code==="10000"&&(v.value=d.data),c.code==="10000"&&(s.value=c.data,S.value=c.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),B()})};return ue(()=>{Q()}),(r,n)=>{const i=E("ProRadioButton"),l=E("ProField"),d=E("van-config-provider");return $(),ie(d,{"theme-vars":C(ge)},{default:A(()=>{var c,h,I,g,N,P,L,R;return[o("div",Le,[o("img",{src:(h=(c=p.value)==null?void 0:c.tenantProductInsureVO)==null?void 0:h.banner[0],class:"banner"},null,8,Re),o("div",Ve,[o("div",qe,[_(y,{title:"\u59D3\u540D",desc:(g=(I=s.value)==null?void 0:I.tenantOrderInsuredList)==null?void 0:g[0].name},null,8,["desc"]),_(y,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(P=(N=s.value)==null?void 0:N.tenantOrderInsuredList)==null?void 0:P[0].certNo},null,8,["desc"]),_(y,{title:"\u624B\u673A\u53F7\u7801",desc:(R=(L=s.value)==null?void 0:L.tenantOrderHolder)==null?void 0:R.mobile},null,8,["desc"]),_(y,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${C(De)(f.value||0)}\u5143 / \u6BCF\u6708`},null,8,["desc"]),_(l,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:A(()=>[_(i,{modelValue:S.value,"onUpdate:modelValue":n[0]||(n[0]=X=>S.value=X),disabled:!0,options:C(ce)},null,8,["modelValue","options"])]),_:1}),o("div",{class:"submit",onClick:W})])]),_(Pe,{"is-show":x.value,onOnClose:K},null,8,["is-show"])])]}),_:1},8,["theme-vars"])}}});var Xe=b(Te,[["__scopeId","data-v-564573bc"]]);export{Xe as default};

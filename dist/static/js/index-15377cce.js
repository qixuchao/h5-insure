import{aJ as e,d as s,r as a,bR as t,t as o,bH as l,v as i,bI as r,e as n,aN as d,aP as u,bj as c,aT as p,as as m,bS as h,aW as v,z as f,aB as g,b as y,c as b,f as C,i as I,x as k,W as L,X as j,h as x,bT as _,I as P,ax as w,$ as V,bU as S,o as T,y as D,Z as U,w as O,bV as q,ad as N,g as $,R as B,aq as F,B as H,an as R,U as z,V as A,Y as W,bx as Y,by as J,bz as Z,bA as M,bB as X,N as E,a as G,u as K,a4 as Q,aw as ee}from"./index-3300826d.js";import{L as se}from"./index-f7353bd4.js";import{S as ae}from"./index-67e047c7.js";import{Z as te}from"./index-34a98020.js";import{e as oe}from"./empty-c926d8ec.js";import{q as le,a as ie}from"./proposalList-0af9a542.js";import{u as re,P as ne,T as de}from"./index-5218a57f.js";import{P as ue}from"./index-91fd325d.js";import{q as ce}from"./trial-fa78661d.js";import"./pdfh5-008ca364.js";import"./index-e8d7649c.js";import"./index-8a71e66b.js";import"./infoCollection-aa0e608b.js";import"./SchemaRenderField.vue_vue_type_style_index_0_scoped_true_lang-fe6cebc4.js";import"./bankCard-07bf592d.js";import"./phoneVerify-2f15fb99.js";import"./keysIn-3ff85984.js";import"./isObjectLike-a9798079.js";/* empty css              */import"./index-aa4b8783.js";import"./debounce-eed12388.js";import"./index-99b3573f.js";import"./cloneDeep-91e31c47.js";import"./TrialButton-6ad69654.js";import"./index-3e34be93.js";import"./utils-5bf67951.js";import"./box-title-e323f85f.js";import"./index-193bab3c.js";import"./echarts-ac920fed.js";import"./Table-be8cdc6c.js";import"./useOrder-2c46487b.js";import"./utils-e5bca207.js";import"./trial-28355e02.js";import"./utils-a8052624.js";import"./constants-7afb7c3d.js";import"./nextStep-576c2fe1.js";import"./core-13a4c4c2.js";import"./constant-c3f28a3b.js";import"./pageJump-ce50f880.js";import"./useDicData-bdf2d123.js";import"./index-aea4611b.js";const[pe,me,he]=e("pull-refresh"),ve=["pulling","loosing","success"];const fe=v(s({name:pe,props:{disabled:Boolean,modelValue:Boolean,headHeight:d(50),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:u,successDuration:d(500),animationDuration:d(300)},emits:["change","refresh","update:modelValue"],setup(e,{emit:s,slots:d}){let u;const v=a(),f=a(),g=t(v),y=o({status:"normal",distance:0,duration:0}),b=l(),C=()=>{if(50!==e.headHeight)return{height:`${e.headHeight}px`}},I=()=>"loading"!==y.status&&"success"!==y.status&&!e.disabled,k=(a,t)=>{const o=+(e.pullDistance||e.headHeight);y.distance=a,y.status=t?"loading":0===a?"normal":a<o?"pulling":"loosing",s("change",{status:y.status,distance:a})},L=()=>{const{status:s}=y;return"normal"===s?"":e[`${s}Text`]||he(s)},j=()=>{const{status:e,distance:s}=y;if(d[e])return d[e]({distance:s});const a=[];return ve.includes(e)&&a.push(n("div",{class:me("text")},[L()])),"loading"===e&&a.push(n(c,{class:me("loading")},{default:L})),a},x=e=>{u=0===h(g.value),u&&(y.duration=0,b.start(e))},_=e=>{I()&&x(e)},P=()=>{u&&b.deltaY.value&&I()&&(y.duration=+e.animationDuration,"loosing"===y.status?(k(+e.headHeight,!0),s("update:modelValue",!0),m((()=>s("refresh")))):k(0))};return i((()=>e.modelValue),(s=>{y.duration=+e.animationDuration,s?k(+e.headHeight,!0):d.success||e.successText?(y.status="success",setTimeout((()=>{k(0)}),+e.successDuration)):k(0,!1)})),r("touchmove",(s=>{if(I()){u||x(s);const{deltaY:a}=b;b.move(s),u&&a.value>=0&&b.isVertical()&&(p(s),k((s=>{const a=+(e.pullDistance||e.headHeight);return s>a&&(s=s<2*a?a+(s-a)/2:1.5*a+(s-2*a)/4),Math.round(s)})(a.value)))}}),{target:f}),()=>{var e;const s={transitionDuration:`${y.duration}ms`,transform:y.distance?`translate3d(0,${y.distance}px, 0)`:""};return n("div",{ref:v,class:me()},[n("div",{ref:f,class:me("track"),style:s,onTouchstartPassive:_,onTouchend:P,onTouchcancel:P},[n("div",{class:me("head"),style:C()},[j()]),null==(e=d.default)?void 0:e.call(d)])])}}}));const ge={class:"com-product-item"},ye={class:"content-wrap"},be={class:"product-image"},Ce={class:"insure-name"},Ie={class:"product-info"},ke={class:"title"},Le={class:"description"},je={class:"tags"};var xe=f(s({__name:"productItem",props:{productInfo:{default:()=>({})}},setup(e){const s=e,{productInfo:a}=g(s),t=o({checked:!1});return g(t),(e,s)=>{var t,o,l,i;const r=_;return y(),b("div",ge,[C("div",ye,[C("div",be,[n(r,{src:null==(t=I(a).showConfig)?void 0:t.fileUrl},null,8,["src"]),C("p",Ce,k((I(a).insurerName||"").substring(0,6)),1)]),C("div",Ie,[C("p",ke,k(null==(o=I(a).showConfig)?void 0:o.title),1),C("p",Le,k(null==(l=I(a).showConfig)?void 0:l.text),1),C("p",je,[(y(!0),b(L,null,j(null==(i=I(a).showConfig)?void 0:i.tags,((e,s)=>(y(),b("span",{key:s,class:"tag"},k(e),1)))),128))])]),x(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-4265a5a8"]]);const _e=["xlink:href"],Pe=s({__name:"index",props:{name:{type:String,required:!0},color:{type:String,default:""}},setup(e){const s=e,a=P((()=>`#icon-${s.name}`)),t=P((()=>s.name?`svg-icon icon-${s.name}`:"svg-icon"));return(s,o)=>(y(),b("svg",w({class:I(t)},s.$attrs,{style:{color:e.color}}),[C("use",{"xlink:href":I(a)},null,8,_e)],16))}});const we=e=>(z("data-v-72eaf171"),e=e(),A(),e),Ve={class:"com-tab-filter"},Se={class:"article-mid"},Te={class:"article-tag"},De=["onClick"],Ue=we((()=>C("span",null,null,-1))),Oe={class:"popup-inner"},qe=we((()=>C("div",{class:"popup-title"},"保险公司",-1))),Ne={class:"footer-button"};var $e=f(s({__name:"insureFilter",props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(e,{emit:s}){const{isPopShow:t,openPop:l,closePop:i}=function(e=!1){const s=a(e);return{isPopShow:s,openPop:e=>{e instanceof Function&&e(),s.value=!0},closePop:e=>{s.value=!1,e instanceof Function&&e()}}}(!1),r=o({insureList:[],checkedInsure:[],productCategoryList:[]}),{insureList:d,checkedInsure:u}=g(r),c=a(""),p=()=>{u.value=[]},m=()=>{s("onSelectInsure",{selectInsureCode:u.value,selectCategory:c.value}),i()};return V((()=>{S().then((e=>{const{code:s,data:a}=e;"10000"===s&&(d.value=null==a?void 0:a.map((e=>({label:e.abbreviation,value:e.insurerCode}))))}))})),T((()=>{le().then((e=>{const{code:s,data:a}=e||{};"10000"===s&&F(a)&&(r.productCategoryList=[{productCategoryName:"全部",productCategoryId:""},...a])}))})),(a,o)=>{const h=H,v=R;return y(),b("div",Ve,[C("div",Se,[C("div",Te,[(y(!0),b(L,null,j(I(r).productCategoryList,((e,a)=>(y(),b("div",{key:a,class:D(["tag-item",{checked:I(c)==a}]),onClick:t=>((e,a)=>{c.value=a,s("onSelectInsure",{selectInsureCode:u.value,selectCategory:c.value})})(null==e||e.productCategoryId,a)},[C("div",{class:D(["tag-out",{checked:I(c)==a}])},[C("div",{class:D(["tag-item-text",{checked:I(c)==a}])},k(e.productCategoryName),3)],2)],10,De)))),128))]),e.filter?(y(),b("div",{key:0,class:"filter",onClick:o[0]||(o[0]=(...e)=>I(l)&&I(l)(...e))},[Ue,C("div",{class:D(["text",{"has-select-condition":I(u).length>0}])},"筛选",2),n(Pe,{name:"filter"})])):U("",!0),n(v,{show:I(t),position:"right","close-on-click-overlay":"",style:B(e.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:I(i)},{default:O((()=>[C("div",Oe,[qe,n(q,{modelValue:I(u),"onUpdate:modelValue":o[1]||(o[1]=e=>N(u)?u.value=e:null),options:I(d)},null,8,["modelValue","options"])]),C("div",Ne,[n(h,{plain:"",type:"primary",onClick:p},{default:O((()=>[$("重置")])),_:1}),n(h,{type:"primary",onClick:m},{default:O((()=>[$("确定")])),_:1})])])),_:1},8,["show","style","onClickOverlay"])])])}}}),[["__scopeId","data-v-72eaf171"]]);const Be={class:"com-trial-product-wrapper"},Fe={class:"container"},He=(e=>(z("data-v-1cf5306a"),e=e(),A(),e))((()=>C("span",{class:"title"}," 已选产品 ",-1))),Re={class:"popup-body"},ze={class:"cell-title"},Ae={class:"title"};var We=f(s({__name:"index",props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(e,{emit:s}){const t=e,o=a([]),l=a([]),r=a({isShow:t.isShow}),d=()=>{s("close")},u=()=>{l.value=[],s("checked",[])},c=e=>{var a,t,i;null==(i=null==(t=null==(a=null==o?void 0:o.value)?void 0:a[e])?void 0:t.toggle)||i.call(t),s("checked",l.value)};return i((()=>t.isShow),(e=>{r.value.isShow=e})),i((()=>t.modalValue),((e=[])=>{l.value=e}),{deep:!0,immediate:!0}),(s,a)=>{const t=J,i=Z,p=M,m=X,h=R;return y(),b("div",Be,[n(h,{show:I(r).isShow,"onUpdate:show":a[1]||(a[1]=e=>I(r).isShow=e),position:"bottom",onClose:d},{default:O((()=>[C("div",Fe,[C("div",{class:"popup-header"},[C("span",{class:"clear-all",onClick:u}," 清空选项 "),He,C("span",{class:"close",onClick:d})]),C("div",Re,[n(m,{modelValue:I(l),"onUpdate:modelValue":a[0]||(a[0]=e=>N(l)?l.value=e:null)},{default:O((()=>[n(p,{inset:""},{default:O((()=>[(y(!0),b(L,null,j(e.proposalList,(e=>(y(),W(i,{key:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:e.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:s=>c(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":O((()=>[n(t,{ref_for:!0,ref:s=>I(o)[e.proposalInsuredList[0].proposalInsuredProductList[0].productId]=s,shape:"square",name:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:Y((s=>c(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)),["stop"])},null,8,["name","onClick"])])),title:O((()=>[C("div",ze,[C("div",Ae,k(e.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-1cf5306a"]]);const Ye={class:"search-wrap"},Je={class:"page-proposal-list"},Ze={class:"check-button"},Me={key:1,class:"van-sticky"},Xe={class:"add-plan"},Ee={class:"has-select-product"},Ge=(e=>(z("data-v-e1a3517c"),e=e(),A(),e))((()=>C("span",{class:"icon"},null,-1))),Ke=s({name:"proposalList"});var Qe=f(s({...Ke,props:{isCreateProposal:{type:Boolean,default:!0}},setup(e){const s=o({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0,productName:"",productCodeList:[]}),{searchValue:t,tagLists:l,isOpen:i,loading:r,finished:d,refreshing:u,productList:c,selectProduct:p,insurerCodeList:m,showCategory:h,productTotal:v,showFooter:f}=g(s),[x,_]=E(),[w,V]=E(),S=re(),T=G(),D=K(),{isCreateProposal:q}=D.query,B=a(q?"repeatAdd":"add"),F=()=>{ie({title:t.value,insurerCodeList:m.value,showCategory:h.value,excludeProductCodeList:[],pageNum:1,pageSize:999}).then((e=>{const{code:s,data:a,total:t}=e;"10000"===s&&(c.value=null==a?void 0:a.datas,v.value=t)}))},R=e=>{F()},z=e=>{const{selectInsureCode:s,selectCategory:a}=e;m.value=s,h.value=a,F()},A=()=>{u.value&&(c.value=[],u.value=!1),F(),r.value=!1,v.value===c.value.length&&(d.value=!0)},Y=()=>{T.push({path:"historyProposalList"})},Z=P((()=>{var e;const{birthday:s,gender:a}=(null==(e=S.$state.proposalInfo.proposalInsuredList)?void 0:e[0])||{};return{birthday:s,gender:a}})),M=P((()=>c.value.length>0)),le=async e=>{const{code:a,data:t}=await ce({calcProductFactorList:[{productCode:e}]});"10000"===a&&(({productCode:e,holder:a,insuredVOList:t}={})=>{const{personVO:o,productPlanVOList:l}=(null==t?void 0:t[0])||{};s.productName})(t[0])},pe=e=>{s.selectProduct=e},me=()=>{const e=s.proposalList.filter((e=>s.selectProduct.includes(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)));S.setTrialData(e),T.push({path:"/proposal/createProposal"})},he=()=>{_(!1)},ve=e=>{if(q)return s.proposalList.push(e),f.value=!0,s.selectProduct.push(e.proposalInsuredList[0].proposalInsuredProductList[0].productId),void _(!1);S.setTrialData([e]),_(!1),T.push({path:"/proposal/createProposal",query:D.query})},ge=()=>{d.value=!0,r.value=!0,A()};return(e,a)=>{const o=ae,l=J,m=X,h=se,v=fe,g=H,_=Q("ProPageWrap");return y(),b(L,null,[n(_,{class:"page-proposal"},{default:O((()=>[C("div",Ye,[n(o,{modelValue:I(t),"onUpdate:modelValue":a[0]||(a[0]=e=>N(t)?t.value=e:null),placeholder:"搜索计划书",shape:"round",class:"search",onSearch:R},null,8,["modelValue"]),n($e,{filter:I(i),"onUpdate:filter":a[1]||(a[1]=e=>N(i)?i.value=e:null),"filter-class":"filter-area",onOnSelectInsure:z},null,8,["filter"])]),I(M)?U("",!0):(y(),W(te,{key:0,"empty-img":I(oe),title:"没有找到相关内容~","empty-class":"empty-select"},null,8,["empty-img"])),C("div",Je,[n(v,{modelValue:I(u),"onUpdate:modelValue":a[4]||(a[4]=e=>N(u)?u.value=e:null),onRefresh:ge},{default:O((()=>[n(h,{loading:I(r),"onUpdate:loading":a[3]||(a[3]=e=>N(r)?r.value=e:null),finished:I(d),"finished-text":I(M)?"- 已经到底了哦 -":"",onLoad:A},{default:O((()=>[(y(!0),b(L,null,j(I(c),(e=>(y(),W(xe,{key:e.id,"product-info":e,onClick:a=>(({productCode:e})=>{f.value=!1,s.productId=e,le(e),T.push({path:"/proposal/createProposal",query:{productCode:e}})})(e)},ee({_:2},[I(q)?{name:"checkedProduct",fn:O((()=>[C("div",Ze,[n(m,{modelValue:I(p),"onUpdate:modelValue":a[2]||(a[2]=e=>N(p)?p.value=e:null)},{default:O((()=>[n(l,{name:e.productId,shape:"square"},null,8,["name"])])),_:2},1032,["modelValue"])])])),key:"0"}:void 0]),1032,["product-info","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])]),I(q)&&I(f)?(y(),b("div",Me,[C("div",Xe,[C("p",{class:"has-select",onClick:a[5]||(a[5]=e=>I(V)(!I(w)))},[$(" 已选"),C("span",Ee,k(I(p).length),1),$("款产品 "),Ge]),n(g,{type:"primary",disabled:!I(p).length,onClick:me},{default:O((()=>[$("添加计划书")])),_:1},8,["disabled"])])])):U("",!0),n(We,{modelValue:I(p),"onUpdate:modelValue":a[6]||(a[6]=e=>N(p)?p.value=e:null),"proposal-list":I(s).proposalList,"is-show":I(w),onClose:a[7]||(a[7]=e=>I(V)(!1)),onChecked:pe},null,8,["modelValue","proposal-list","is-show"]),I(x)?(y(),W(ne,{key:2,"is-show":I(x),type:I(B),insured:I(Z),"product-id":I(s).productId,onClose:he,onFinished:ve},null,8,["is-show","type","insured","product-id"])):U("",!0),n(de)])),_:1}),I(q)?U("",!0):(y(),W(ue,{key:0,"button-image":I("/static/png/lishijihuashu-b6958e78.png"),onClick:Y},null,8,["button-image"]))],64)}}}),[["__scopeId","data-v-e1a3517c"]]);export{Qe as default};

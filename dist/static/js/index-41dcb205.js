import{q as a,a as e}from"./product-ff633dbd.js";import{an as s,_ as t,d as n,a as l,z as o,r,S as i,aU as u,x as c,y as d,b as p,c as v,h as f,f as h,w,j as m,g as y,n as g,t as k,k as C,X as b,F as _,aR as x,K as P,L as I}from"./index-637b8a09.js";const j=(e,t,n)=>{s((()=>{(async()=>{try{const{code:s,data:n}=await a(e);if("10000"===s){const a={};n.forEach((e=>{a[e.relationCode]||(a[e.relationCode]=[]),a[e.relationCode].push(e)})),null==t||t(a)}}catch(s){null==n||n(!1)}})()}))};const E={class:"header"},F=["src"],N={class:"content"},O=(a=>(P("data-v-354b6ac9"),a=a(),I(),a))((()=>m("h4",null,"温馨提示，您已进入投保流程：",-1))),S={class:"footer"},q={key:0},A={class:"review-pdf"};var D=t(n({__name:"index",props:{productDetail:{type:Object,default:()=>{}}},setup(a){const s=a,t=l(),{tenantId:n=""}=t.query,P=o({insureConfig:{insureName:"",tenantName:""}}),I=r(!1),j=r(!1),D=new i({source:"sessionStorage"}),R=u({time:4e3,onFinish:()=>{D.set("PRENOTICE-isShow","1")}}),T=r({title:"",link:""}),U=c((()=>R.current.value.seconds)),z=c((()=>{if(T.value.link){const a=(T.value.link||"").split("?");return"pdf"===(a[0]||"").substr(a[0].lastIndexOf(".")+1)?"pdf":"picture"}return"link"})),B=()=>{I.value=!1};return d((()=>{(async()=>{const{code:a,data:t}=await e({insureCode:s.productDetail.insurerCode,tenantId:n});"10000"===a&&(P.insureConfig=t,x((()=>{R.start()}))),I.value=!0})()})),(a,e)=>{var s;const t=p("VanButton"),n=p("ProPopup"),l=p("ProFilePreview");return v(),f(_,null,[h(n,{class:"pre-notice-wrap",show:y(I),closeable:!1,height:45},{default:w((()=>{var a;return[m("div",E,[m("img",{src:y("/static/assets/header-logo.fadf5dcd.png")},null,8,F)]),m("div",N,[O,m("p",null,[g(" 请仔细阅读免责条款、投保须知等信息，请您重点阅读并知晓 "),m("span",{class:"file-name",onClick:e[0]||(e[0]=a=>((a,e)=>{var s;j.value=!j.value,T.value.link=null==(s=P.insureConfig)?void 0:s[e].link,T.value.title=a.target.innerText})(a,"privacyAgreement"))}," 《"+k((null==(a=y(P).insureConfig.privacyAgreement)?void 0:a.title)||"用户隐私协议")+"》 ",1),g(" ，为维护您的合法权益，您的操作轨迹将被记录。 ")])]),m("div",S,[h(t,{type:"primary",block:"",round:"",onClick:B},{default:w((()=>[g(" 好的 "),y(U)?(v(),f("span",q,k(y(U))+"s",1)):C("",!0)])),_:1})])]})),_:1},8,["show"]),h(n,{show:y(j),"onUpdate:show":e[1]||(e[1]=a=>b(j)?j.value=a:null),class:"pre-notice-wrap",title:null==(s=y(T))?void 0:s.title,position:"bottom",style:{overflow:"hidden"}},{default:w((()=>{var a;return[m("div",A,[h(l,{content:null==(a=y(T))?void 0:a.link,type:y(z)},null,8,["content","type"])])]})),_:1},8,["show","title"])],64)}}}),[["__scopeId","data-v-354b6ac9"]]);export{D as P,j as u};

var re=Object.defineProperty,ie=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var Y=(r,u,e)=>u in r?re(r,u,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[u]=e,H=(r,u)=>{for(var e in u||(u={}))de.call(u,e)&&Y(r,e,u[e]);if(X)for(var e of X(u))me.call(u,e)&&Y(r,e,u[e]);return r},M=(r,u)=>ie(r,ce(u));import{g as $,E as p,M as j,_ as Z,r as _,j as B,k as x,m as g,p as h,A as a,z as s,J as pe,L as q,T as P,n as R,t as G,a4 as ve,a5 as _e,y as z,C as O,O as fe,a9 as he,h as Fe,G as Ce,F as Be}from"./vendor-06835924.js";import{R as be}from"./infoCollection-b0426750.js";import{s as De,c as ge}from"./phoneVerify-da7acaed.js";import{v as Q,a as Ee,b as ye}from"./validator-ebd71d12.js";import{F as T,g as we}from"./utils-a032a005.js";import{G as Ie,_ as ke}from"./index-d5dc592b.js";import{g as xe,m as Ve,i as Ae}from"./trial-64fa1591.js";import{p as Ne}from"./product-2a3b3c67.js";import{t as ee}from"./theme-eeb93d73.js";import{c as Se}from"./close-df102554.js";import{_ as Pe}from"./index-8934e5d6.js";import"./trial-13a17249.js";const $e=$({props:{isCheck:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>{}}},emits:["on-verify"],setup(r,{emit:u}){var m;const e=r,l=p({}),i=p(!1),E=30,d=p(0),v=p("\u83B7\u53D6\u9A8C\u8BC1\u7801"),t=j({mobile:(m=e.userInfo)==null?void 0:m.mobile,smsCode:""}),D=f=>Q(f)?!0:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7",y=()=>{if(d.value>0)return;d.value=E;const f=()=>{v.value=`${d.value}s`,d.value-=1};f();const o=setInterval(()=>{d.value===0?(v.value="\u83B7\u53D6\u9A8C\u8BC1\u7801",d.value=0,clearInterval(o)):f()},1e3)},F=async()=>{d.value>0||l==null||l.value.validate("mobile").then(async()=>{const f=await De(t.mobile),{code:o,data:I}=f;o==="10000"&&(i.value=!0,P({message:"\u77ED\u4FE1\u53D1\u9001\u6210\u529F\uFF0C\u8BF7\u67E5\u6536"}),y())})},w=async()=>{const f=await ge(t.mobile,t.smsCode),{data:o}=f;o&&u("on-verify",t)},b=async()=>{l==null||l.value.validate().then(async()=>{w()})};return Z(()=>t,()=>{Q(t.mobile)&&Ee(t.smsCode)&&i.value&&w()},{deep:!0,immediate:!0}),(f,o)=>{const I=_("van-field"),L=_("van-cell-group"),A=_("VanForm");return B(),x(A,{ref_key:"formRef",ref:l,"label-width":"80"},{default:g(()=>[h(L,null,{default:g(()=>[h(I,{modelValue:a(t).mobile,"onUpdate:modelValue":o[0]||(o[0]=N=>a(t).mobile=N),name:"mobile",label:"\u624B\u673A\u53F7",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",maxlength:a(T).MOBILE,rules:[{validator:D}]},null,8,["modelValue","maxlength","rules"]),h(I,{modelValue:a(t).smsCode,"onUpdate:modelValue":o[1]||(o[1]=N=>a(t).smsCode=N),type:"digit",name:"smsCode",label:"\u9A8C\u8BC1\u7801",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",maxlength:a(T).SMS_CODE},{button:g(()=>[s("div",{class:q(["sms-code",{"count-down":d.value>0}]),onClick:F},pe(v.value),3)]),_:1},8,["modelValue","maxlength"])]),_:1}),s("div",{class:q([{"check-submit":e.isCheck},{submit:!e.isCheck}]),onClick:b},null,2)]),_:1},512)}}}),Oe=$({props:{isCheck:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>{}}},emits:["on-submit"],setup(r,{emit:u}){const e=r,l=p({}),i=j({name:e.userInfo.name,certNo:e.userInfo.certNo}),E=t=>Ie(i.certNo)?!0:"\u8BF7\u586B\u5199\u6B63\u786E\u7684\u8BC1\u4EF6\u53F7",d=t=>ye(t)?!0:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u59D3\u540D",v=()=>{l==null||l.value.validate().then(async t=>{u("on-submit",i)})};return(t,D)=>{const y=_("van-field"),F=_("van-cell-group"),w=_("VanForm");return B(),x(w,{ref_key:"formRef",ref:l,"label-width":"80"},{default:g(()=>[h(F,null,{default:g(()=>[h(y,{modelValue:a(i).name,"onUpdate:modelValue":D[0]||(D[0]=b=>a(i).name=b),name:"name",label:"\u59D3\u540D",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",maxlength:a(T).NAME,rules:[{validator:d}]},null,8,["modelValue","maxlength","rules"]),h(y,{modelValue:a(i).certNo,"onUpdate:modelValue":D[1]||(D[1]=b=>a(i).certNo=b),name:"certNo",label:"\u8EAB\u4EFD\u8BC1",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:a(T).ID_CARD,rules:[{validator:E}]},null,8,["modelValue","maxlength","rules"])]),_:1}),s("div",{class:q([{"check-submit":e.isCheck},{submit:!e.isCheck}]),onClick:v},null,2)]),_:1},512)}}});var Le="/static/assets/title-step1.97cb9efa.png",Ue="/static/assets/title-step2.258af5e9.png";const te=r=>(ve("data-v-a6bc1804"),r=r(),_e(),r),Te={key:0,class:"pro-modal"},He=te(()=>s("div",{class:"pro-overlay"},null,-1)),Me={class:"pro-modal-wrapper"},qe=te(()=>s("div",{class:"pro-modal-content"},[s("p",null,"\u606D\u559C\u60A8"),s("p",null,"\u9886\u53D6\u6210\u529F")],-1)),Re=["src"],ze=$({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(r,{emit:u}){const e=r,l=()=>{u("on-close")};return(i,E)=>e.isShow?(B(),R("div",Te,[He,s("div",Me,[s("div",{class:"pro-modal-body"},[qe,s("div",{class:"pro-modal-btn",onClick:l},"\u6211\u77E5\u9053\u4E86")]),s("div",{class:"pro-modal-close",onClick:l},[s("img",{src:a(Se)},null,8,Re)])])])):G("",!0)}});var je=ke(ze,[["__scopeId","data-v-a6bc1804"]]);const Ge={class:"list"},Je={class:"item"},Ke={class:"footer"},We=O("\u90E8\u5206\u4E3A\u662F"),Xe=O("\u5168\u90E8\u4E3A\u5426"),Ye=$({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth"],setup(r,{emit:u}){const e=r,l=p(e.show),i=p(e.activeIndex),E=z(()=>{var v;return(v=e.contentList[i.value])==null?void 0:v.attachmentUri}),d=v=>{u("update:show",!1),u("onConfirmHealth",v)};return Z(()=>e,()=>{l.value=e.show,i.value=e.activeIndex},{deep:!0,immediate:!0}),(v,t)=>{const D=_("ProTab"),y=_("ProFilePreview"),F=_("VanButton"),w=_("van-config-provider"),b=_("ProPopup");return B(),x(b,{show:l.value,"onUpdate:show":t[3]||(t[3]=m=>l.value=m),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:t[4]||(t[4]=m=>u("update:show",!1))},{default:g(()=>[h(w,{"theme-vars":a(ee)},{default:g(()=>[l.value?(B(),x(D,{key:0,active:i.value,"onUpdate:active":t[0]||(t[0]=m=>i.value=m),list:r.contentList.map((m,f)=>({title:m.attachmentName,slotName:`guarantee-${f}`})),class:"tab"},null,8,["active","list"])):G("",!0),s("div",Ge,[s("div",Je,[(B(),x(y,{key:a(E),content:a(E),type:"pdf"},null,8,["content"]))])]),s("div",Ke,[h(F,{type:"primary",block:"",round:"",onClick:t[1]||(t[1]=m=>d("N"))},{default:g(()=>[We]),_:1}),h(F,{type:"primary",plain:"",block:"",round:"",onClick:t[2]||(t[2]=m=>d("allFalse"))},{default:g(()=>[Xe]),_:1})])]),_:1},8,["theme-vars"])]),_:1},8,["show"])}}});const Qe={class:"page-activity-invite"},Ze=["src"],et={class:"container"},tt={class:"main-form"},ot={class:"title"},ut=["src"],nt={class:"agree"},at={class:"check-wrap"},st=O(" \u6211\u5DF2\u9605\u8BFB\u5E76\u540C\u610F "),lt={key:2,class:"tips"},rt=O(" \u4EA7\u54C1\u4ECB\u7ECD\u9875\u9762\u4EC5\u4F9B\u53C2\u8003\uFF0C\u5177\u4F53\u8D23\u4EFB\u63CF\u8FBE\u4EE5\u4FDD\u9669\u5408\u540C\u4E3A\u51C6\uFF0C\u4F17\u5B89\u4FDD\u9669\u6700\u8FD1\u5B63\u5EA6\u507F\u4ED8\u80FD\u529B\u7B26\u5408\u76D1\u7BA1\u8981\u6C42\uFF0C\u8BE6\u60C5\u8BF7\u53C2\u89C1\u4F17\u5B89\u4FDD\u9669\u5B98\u7F51 ("),it=s("a",{href:"https://www.zhongan.com"},"www.zhongan.com",-1),ct=O("\uFF09\u507F\u4ED8\u80FD\u529B\u4FE1\u606F\u62AB\u9732\uFF0C\u8BE5\u4FDD\u9669\u4EA7\u54C1\u7531\u4F17\u5B89\u5728\u7EBF\u8D22\u4EA7\u4FDD\u9669\u80A1\u4EFD\u6709\u9650\u516C\u53F8\u627F\u4FDD\u5E76\u8D1F\u8D23\u7406\u8D54\u3002 "),dt=[rt,it,ct],yt=$({setup(r){const u=fe(),e=he(),{productCode:l="7X9",tenantId:i="",phoneNo:E,saleChannelId:d,agentCode:v="",paymentMethod:t,from:D}=u.query,y=p(!0),F=D==="check",w=p(!1),b=p(!1),m=p(!1),f=p(0),o=j({title:Le,attachmentList:[],userInfo:{mobile:E,certNo:"",name:""},agree:!1}),I=p(),L=p(),A=p(!1),N=z(()=>{var n,c;return((c=(n=I.value)==null?void 0:n.tenantProductInsureVO)==null?void 0:c.attachmentVOList.filter(C=>C.attachmentName==="\u5065\u5EB7\u544A\u77E5"))||[]}),J=z(()=>{var n,c;return((c=(n=I.value)==null?void 0:n.tenantProductInsureVO)==null?void 0:c.attachmentVOList.filter(C=>C.attachmentName!=="\u5065\u5EB7\u544A\u77E5"))||[]}),oe=async n=>{var U,S;o.userInfo.mobile=n.mobile;const c=await xe({holderPhone:o.userInfo.mobile,productCode:l,tenantId:i}),{code:C,data:k}=c;C==="10000"&&(o.userInfo.name=(U=k.tenantOrderHolder)==null?void 0:U.name,o.userInfo.certNo=(S=k.tenantOrderHolder)==null?void 0:S.certNo),o.title=Ue,y.value=!1},K=async n=>{if((n==null?void 0:n.certNo)&&(o.userInfo.certNo=n==null?void 0:n.certNo),(n==null?void 0:n.name)&&(o.userInfo.name=n==null?void 0:n.name),F&&!w.value){m.value=!0;return}if(!o.agree){P("\u8BF7\u52FE\u9009\u534F\u8BAE");return}try{P({message:"\u9886\u53D6\u4E2D...",forbidClick:!0,loadingType:"spinner"});const c=we({tenantId:i,detail:I.value,insureDetail:L.value,saleChannelId:d,saleUserId:v,holder:o.userInfo,insured:M(H({},o.userInfo),{relationToHolder:be.SELF}),paymentMethod:t,renewalDK:"",successJumpUrl:"",premium:0,orderStatus:"",orderTopStatus:"",tenantOrderRiskList:[]}),C=await Ve(c),{code:k}=C;if(k==="10000"){if(F){P.clear(),A.value=!0;return}e.push({path:"/chuangxin/baigebao/productDetail",query:M(H({},u.query),{tenantId:i,phoneNo:o.userInfo.mobile,certNo:o.userInfo.certNo,name:o.userInfo.name,productCode:"BWYL2021",agentCode:v})})}}catch(c){console.log(c),P.clear()}},ue=()=>{w.value=!0,K()},ne=n=>{n==="allFalse"&&(b.value=!0)},ae=()=>{A.value=!1},se=async()=>{const n=Ne({productCode:l,withInsureInfo:!0,tenantId:i}),c=Ae({productCode:l});Promise.all([n,c]).then(([C,k])=>{C.code==="10000"&&(I.value=C.data),k.code==="10000"&&(L.value=k.data)})};return Fe(()=>{se()}),(n,c)=>{const C=_("van-checkbox"),k=_("ProPDFviewer"),U=_("van-config-provider");return B(),x(U,{"theme-vars":a(ee)},{default:g(()=>{var S,W;return[s("div",Qe,[s("img",{src:(W=(S=I.value)==null?void 0:S.tenantProductInsureVO)==null?void 0:W.banner[0],class:"banner"},null,8,Ze),s("div",et,[s("div",tt,[s("div",ot,[s("img",{src:a(o).title},null,8,ut)]),y.value?(B(),x($e,{key:0,"is-check":F,"user-info":a(o).userInfo,onOnVerify:oe},null,8,["user-info"])):(B(),x(Oe,{key:1,"is-check":F,"user-info":a(o).userInfo,onOnSubmit:K},null,8,["user-info"])),s("div",nt,[s("div",at,[h(C,{modelValue:a(o).agree,"onUpdate:modelValue":c[0]||(c[0]=V=>a(o).agree=V),name:"agree",shape:"square"},null,8,["modelValue"])]),s("div",null,[st,(B(!0),R(Be,null,Ce(a(J)||[],(V,le)=>(B(),x(k,{key:le,class:"file-name",title:`\u300A${V.attachmentName}\u300B`,content:V.attachmentUri,type:"pdf"},null,8,["title","content"]))),128))])]),F?(B(),R("div",lt,dt)):G("",!0)])])]),h(je,{"is-show":A.value,onOnClose:ae},null,8,["is-show"]),h(Pe,{show:b.value,"onUpdate:show":c[1]||(c[1]=V=>b.value=V),"content-list":a(J),"active-index":f.value,text:"\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u544A\u77E5\u5185\u5BB9",onSubmit:ue},null,8,["show","content-list","active-index"]),h(Ye,{show:m.value,"onUpdate:show":c[2]||(c[2]=V=>m.value=V),"content-list":a(N),"active-index":0,onOnConfirmHealth:ne},null,8,["show","content-list"])]}),_:1},8,["theme-vars"])}}});export{yt as default};

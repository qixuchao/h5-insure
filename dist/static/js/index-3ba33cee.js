import{_ as e,d as a,a as s,r as t,J as o,E as i,cd as r,an as l,c as n,h as d,f as u,g as c,F as p,i as m,e as f,aE as v,G as k,w as h,k as I,y as g,A as V,j as b,n as y,t as O,a4 as C,bB as _,a7 as x,V as R,B as L,bE as S,bF as F,X as j,Y as w,b4 as T,a8 as D}from"./index-64058e19.js";import{l as P}from"./ProAddress.vue_vue_type_style_index_0_scoped_true_lang-99d84559.js";import"./index-fe560866.js";import{I as N}from"./index-49acdd08.js";import{c as E,t as U,_ as B}from"./index-ce3a7829.js";import{S as H}from"./index-274f076e.js";import{f as M,p as q}from"./trial-f8b8eb28.js";import{_ as z}from"./TrialButton-cd7d7b34.js";import{S as W,_ as A}from"./box-title-87fd98bb.js";import{_ as $}from"./index-6444bf79.js";import{T as Z}from"./Table-7d42cc0a.js";import"./pdfh5-008ca364.js";import"./isObjectLike-f858f31d.js";import"./_nodeUtil-ef4cea77.js";import"./index-96efc8d8.js";import"./echarts-5af64754.js";import"./empty-ae586b6c.js";var G=e(a({__name:"PersonalInfo",props:{productFactor:{default:()=>({})},modelValue:{default:()=>({})}},emits:["update:modelValue","trailChange"],setup(e,{expose:a,emit:v}){const k=e,{query:{insurerCode:h}={}}=s(),I=t(null),g=t(null),V=o({validated:!1,holder:{personVO:{},schema:[],trialFactorCodes:[],config:{occupation:{dictCode:E(h)}}},insured:{schema:[],trialFactorCodes:[],config:{occupation:{dictCode:E(h)}},insuredVOList:[{personVO:{}}]}}),b=i((()=>r(V.holder.schema)!==r(V.insured.schema))),y=()=>{var e,a;const s=null==(e=g.value)?void 0:e.map((e=>null==e?void 0:e.validate()));return Promise.all([null==(a=I.value)?void 0:a.validate(),...s])};return l((()=>k.productFactor),(()=>{const[e,a]=U(k.productFactor,!0);Object.assign(V.holder,e),Object.assign(V.insured,a)}),{deep:!0,immediate:!0}),l([()=>V.holder.personVO,()=>V.insured.insuredVOList],(()=>{const e={holder:V.holder.personVO,insuredVOList:V.insured.insuredVOList};v("update:modelValue",e),(()=>{const e=!!r(V.holder.trialFactorCodes)&&V.holder.trialFactorCodes.some((e=>{const a=V.holder.personVO[e];return P.exports.isNil(a)||""===a})),a=!!r(V.insured.trialFactorCodes)&&V.insured.trialFactorCodes.some((e=>V.insured.insuredVOList.some((a=>{const s=a.personVO[e];return P.exports.isNil(s)||""===s}))));return e||a})()||y().then((()=>{V.validated=!0,v("trailChange",e)})).catch((()=>{V.validated=!1}))}),{deep:!0}),a({validate:y}),(e,a)=>(n(),d(p,null,[u(c(B),{ref_key:"holderInfoRef",ref:I,title:c(b)?"":"投保人信息",class:"trail-personal-info",model:c(V).holder.personVO,schema:c(V).holder.schema,config:c(V).holder.config},null,8,["title","model","schema","config"]),(n(!0),d(p,null,m(c(V).insured.insuredVOList,((e,a)=>(n(),f(c(B),{ref_for:!0,ref_key:"insuredFormRef",ref:g,key:a,class:"trail-personal-info",title:c(b)?"":"被保人信息",model:e.personVO,schema:c(V).insured.schema,config:c(V).insured.config},null,8,["title","model","schema","config"])))),128))],64))}}),[["__scopeId","data-v-a2c06736"]]);const J={key:0},X={key:0,class:"risk2-field"};var Y=e(a({__name:"index",props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:""})},showMainRisk:{type:Boolean,default:()=>!0}},emits:["trialChange"],setup(e,{emit:a}){const s=e;console.log("pop data source = ",s.dataSource);const i=o({loading:!1,show:!0,select:{},list:[],userData:{},riskIsInsure:{},submitData:{}}),r=t(),f=t({tenantId:"9991000007",productCode:"BDFZCHUN",holder:{personVO:{extInfo:{},certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456"}},insuredVOList:[{insuredCode:"",relationToHolder:"1",personVO:{extInfo:{hasSocialInsurance:"1"},relationToHolder:"1",certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456",socialFlag:"1"},productPlanVOList:[{insurerCode:"zhongan",planCode:"",riskVOList:[{amount:"6000000",chargePeriod:"year_5",copy:1,coveragePeriod:"to_68",paymentFrequency:"2",riskCategory:4,riskCode:"CBE00CHUN",riskName:"(勿动)利益演示测试",riskId:10325,riskType:1}]}]}]}),V=(e,t)=>{i.riskIsInsure[t].data=e;const o=[];s.dataSource.insureProductRiskVOList.forEach((e=>{if(1!==e.mainRiskFlag){const a=i.riskIsInsure[e.riskId];a.data&&Object.keys(a.data).length>0&&o.push(a.data)}})),a("trialChange",o)};return v((()=>{(()=>{i.riskIsInsure={};let e=null;s.dataSource.insureProductRiskVOList.forEach((a=>{const t=1!==a.mainRiskFlag?s.dataSource.productRiskRelationVOList.find((e=>e.collocationRiskId===a.riskId)):{};1===a.mainRiskFlag&&(e=a),i.riskIsInsure[a.riskId]={selected:"2",data:null,relation:t,isMust:!1}})),e&&s.dataSource.productRiskRelationVOList.filter((a=>a.riskId===e.riskId)).forEach((e=>{2===e.collocationType&&(i.riskIsInsure[e.collocationRiskId].selected="1",i.riskIsInsure[e.collocationRiskId].isMust=!0)}))})()})),k((()=>{i.loading=!0,M(f.value).then((e=>{r.value=e.data})).finally((()=>{i.loading=!1}))})),l((()=>i.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(a,t)=>{const o=H,r=g;return n(!0),d(p,null,m(e.dataSource.insureProductRiskVOList,(a=>(n(),d(p,{key:a.riskCode},[(!e.showMainRisk&&1!==a.mainRiskFlag||e.showMainRisk)&&c(i).riskIsInsure[a.riskId].relation?(n(),d("div",J,[u(r,{modelValue:c(i).riskIsInsure[a.riskId].selected,"onUpdate:modelValue":e=>c(i).riskIsInsure[a.riskId].selected=e,label:a.riskName,name:"selected","label-width":"50%",border:!1,class:"risk-select-field"},{input:h((()=>[u(o,{modelValue:c(i).riskIsInsure[a.riskId].selected,"onUpdate:modelValue":e=>c(i).riskIsInsure[a.riskId].selected=e,"active-value":"1","inactive-value":"2",size:"26px",disabled:c(i).riskIsInsure[a.riskId].isMust,onChange:e=>{return t=e,o=a,console.log("----data = ",o),s.dataSource.productRiskRelationVOList.forEach((e=>{})),void("2"===t&&V({},o.riskId));var t,o}},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"]),"1"===c(i).riskIsInsure[a.riskId].selected?(n(),d("div",X,[u(N,{modelValue:c(i).riskIsInsure[a.riskId].data,"onUpdate:modelValue":e=>c(i).riskIsInsure[a.riskId].data=e,"origin-data":a,"product-factor":e.dataSource.productFactor,onTrialChange:e=>V(e,a.riskId)},null,8,["modelValue","onUpdate:modelValue","origin-data","product-factor","onTrialChange"])])):I("",!0)])):I("",!0)],64)))),128)}}}),[["__scopeId","data-v-28780074"]]);const K={class:"benefit-table"},Q=a({__name:"Table",props:{dataSource:null},setup(e){const a=e,s=i((()=>{const e=a.dataSource.headers.length,s=12*a.dataSource.headers.join("").length+20*a.dataSource.headers.length;return a.dataSource.headers.map(((a,t)=>{const o=s>320?12*a.length+20:Math.max(12*a.length+20,320/e);return console.log("totalWordWidth:",s,"titleWidth:",o,"word-width:",12*a.length+20),{title:a,key:`header_${t}`,fixed:t<2,minWidth:o}}))})),t=i((()=>a.dataSource.dataList.map((e=>{const a={};return e.forEach(((e,s)=>{a[`header_${s}`]=e})),a}))));return k((()=>{})),(e,a)=>(n(),d("div",K,[u(Z,{"top-height":400,columns:c(s),data:c(t),"is-clone":!0},null,8,["columns","data"])]))}});const ee=e=>(j("data-v-da5503ea"),e=e(),w(),e),ae={class:"benefit-container"},se={key:0,class:"benefit"},te=ee((()=>b("div",{class:"line"},null,-1))),oe={class:"box-title box-title-chart"},ie=ee((()=>b("img",{class:"tl",src:A,alt:""},null,-1))),re=ee((()=>b("img",{class:"transform-z180 tr",src:A,alt:""},null,-1))),le={key:0},ne={class:"box"},de={class:"box-title"},ue=ee((()=>b("img",{class:"tl",src:A,alt:""},null,-1))),ce=ee((()=>b("img",{class:"transform-z180 tr",src:A,alt:""},null,-1))),pe={class:"box-price"},me={class:"text1"},fe={class:"text2"},ve={key:1},ke={key:2,style:{width:"100%, minWidth: 338px"}},he={class:"slider"},Ie={style:{flex:"1",margin:"0px 5px"}},ge={class:"custom-button"},Ve=ee((()=>b("p",{class:"slider-dec"},"拖动按钮查看不同年龄保障",-1))),be={class:"btn-two"};var ye=e(a({__name:"index",props:{dataSource:{default:()=>[{}]},showTypeList:{default:()=>["1"]}},setup(e){const a=e,s="1",o="2",i="3",r=t(0),v=t(0),k=t(0),g=t(),j=t(0),w=t("3"),T=t(),D=e=>{if(!(null==e?void 0:e.benefitRiskResultVOList))return;const a=null==e?void 0:e.benefitRiskResultVOList[r.value];v.value=a.ageBegin+1,j.value=a.ageBegin+1,k.value=a.ageEnd},P=()=>{var e,s,t,o,i;const l=null==(s=null==(e=a.dataSource)?void 0:e.benefitRiskResultVOList)?void 0:s[r.value];T.value=null==(o=null==(t=a.dataSource)?void 0:t.benefitRiskResultVOList)?void 0:o[r.value].benefitRiskTableResultVOList[0];const{a:n,year:d}=((e,a)=>{const s=[],t=[];for(let o=e,i=0;o<=a;o++,i++)s.push(o.toString()),t.push(i+1);return{a:s,year:t}})(v.value,k.value),u={index:n.indexOf(j.value.toString()),age:n,year:d,result:null==(i=null==l?void 0:l.benefitRiskItemResultVOList)?void 0:i[0]};g.value=u},N=()=>{j.value>k.value-1||(j.value+=1,P())},E=()=>{j.value>v.value&&(j.value-=1,P())},U=e=>{r.value=e.name,D(a.dataSource),P()};return l((()=>a.dataSource),(e=>{e&&(D(e),P())}),{deep:!0,immediate:!0}),l(j,(()=>{P()})),(e,t)=>{const l=R,D=W,P=L,B=S,H=F;return n(),d("div",ae,[u(H,{active:c(r),onClickTab:U},{default:h((()=>{var e;return[(n(!0),d(p,null,m(null==(e=a.dataSource)?void 0:e.benefitRiskResultVOList,((e,a)=>(n(),f(B,{key:a,name:a,title:e.riskName},{default:h((()=>{var e,R,L,S,F,U,B,H,M,q,z,W,A,Z,G,J;return[a==c(r)?(n(),d("div",se,[te,V(b("p",oe,[ie,y(" 保单年度"),b("span",null,O(null==(L=null==(e=c(g))?void 0:e.year)?void 0:L[null==(R=c(g))?void 0:R.index]),1),y("年度，被保人"),b("span",null,O(null==(U=null==(S=c(g))?void 0:S.age)?void 0:U[null==(F=c(g))?void 0:F.index]),1),y("岁时 "),re],512),[[C,c(w)===o]]),c(w)===i?(n(),d("div",le,[b("div",ne,[b("p",de,[ue,y(" 保单年度"),b("span",null,O(null==(M=null==(B=c(g))?void 0:B.year)?void 0:M[null==(H=c(g))?void 0:H.index]),1),y("年度，被保人"),b("span",null,O(null==(W=null==(q=c(g))?void 0:q.age)?void 0:W[null==(z=c(g))?void 0:z.index]),1),y("岁时 "),ce]),b("div",pe,[(n(!0),d(p,null,m(null==(Z=null==(A=c(g))?void 0:A.result)?void 0:Z.headers,((e,a)=>{var s,t,o,i,r;return n(),d("div",{key:a,style:{width:"33%"}},[b("p",me,O(c(_)(Number(null==(r=null==(i=null==(t=null==(s=c(g))?void 0:s.result)?void 0:t.dataList)?void 0:i[null==(o=c(g))?void 0:o.index])?void 0:r[a]))),1),b("p",fe,O(e)+"(元）",1)])})),128))])])])):I("",!0),c(w)===s?(n(),d("div",ve,[u(Q,{"data-source":c(T)},null,8,["data-source"])])):I("",!0),c(w)==o?(n(),d("div",ke,[u($,{min:c(v),max:c(k),current:c(j),data:null==(J=null==(G=c(g))?void 0:G.result)?void 0:J.benefitRiskItemList},null,8,["min","max","current","data"])])):I("",!0),b("div",he,[b("div",{class:"opt lf",onClick:E},[u(l,{name:"minus"})]),b("div",Ie,[c(v)?(n(),f(D,{key:0,modelValue:c(j),"onUpdate:modelValue":t[0]||(t[0]=e=>x(j)?j.value=e:null),min:c(v),max:c(k),"bar-height":"8px"},{button:h((()=>[b("div",ge,O(c(j))+" 岁",1)])),_:1},8,["modelValue","min","max"])):I("",!0)]),b("div",{class:"opt rg",onClick:N},[u(l,{name:"plus"})])]),Ve,b("div",be,[u(P,{round:"",plain:c(w)!==i,type:"primary",class:"btn",onClick:t[1]||(t[1]=e=>w.value=i)},{default:h((()=>[y("图表展示")])),_:1},8,["plain"]),u(P,{round:"",plain:c(w)!==o,type:"primary",class:"btn",onClick:t[2]||(t[2]=e=>w.value=o)},{default:h((()=>[y("趋势展示")])),_:1},8,["plain"]),u(P,{round:"",plain:c(w)!==s,type:"primary",class:"btn",onClick:t[3]||(t[3]=e=>w.value=s)},{default:h((()=>[y("表格展示")])),_:1},8,["plain"])])])):I("",!0)]})),_:2},1032,["name","title"])))),128))]})),_:1},8,["active"])])}}}),[["__scopeId","data-v-da5503ea"]]);const Oe={class:"trial-button"},Ce={class:"com-body"},_e={class:"header"},xe=(e=>(j("data-v-f26543be"),e=e(),w(),e))((()=>b("span",null,"算一算保费",-1))),Re={class:"container"};var Le=e(a({__name:"index",props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:"",insurerCode:"",tenantId:""})}},setup(e,{expose:a}){const s=e,i="试算中...",r=t(null);console.log("pop data source = ",s.dataSource);const m=o({loading:!1,show:!0,select:{},list:[],userData:{},riskIsInsure:{},submitData:{},riskVOList:[{}],mainRiskVO:{},ifPersonalInfoSuccess:!1,trialResult:i}),g=()=>{var e;null==(e=r.value)||e.validate().then((()=>{console.log("---- validate success ----")})),m.loading=!1,m.show=!0},V=()=>{m.show=!1,m.loading=!1},O=t(),C=t({tenantId:"9991000007",productCode:"BDFZCHUN",holder:{personVO:{extInfo:{},certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456"}},insuredVOList:[{insuredCode:"",relationToHolder:"1",personVO:{extInfo:{hasSocialInsurance:"1"},relationToHolder:"1",certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456",socialFlag:"1"},productPlanVOList:[{insurerCode:"zhongan",planCode:"",riskVOList:[{amount:"6000000",chargePeriod:"year_5",copy:1,coveragePeriod:"to_68",paymentFrequency:"2",riskCategory:4,riskCode:"CBE00CHUN",riskName:"(勿动)利益演示测试",riskId:10325,riskType:1}]}]}]}),_=()=>{m.riskIsInsure={},s.dataSource.insureProductRiskVOList.forEach((e=>{const a=s.dataSource.productRiskRelationVOList.find((a=>a.collocationRiskId===e.riskId));m.riskIsInsure[e.riskCode]={selected:"2",data:null,relation:a}}))},x=P.exports.debounce((()=>{m.ifPersonalInfoSuccess&&(m.submitData.productCode=s.productInfo.productCode,m.submitData.tenantId=s.productInfo.tenantId,m.submitData.insuredVOList[0].productPlanVOList=[{insurerCode:s.productInfo.insurerCode,planCode:s.dataSource.planCode,riskVOList:m.riskVOList}],console.log(">>>数据构建<<<",m.submitData),m.trialResult=i,q(m.submitData).then((e=>{m.trialResult=`${e.data.premium}元`})).finally((()=>{})))}),300),R=e=>{const{holder:a,insuredVOList:s}=e;a&&(m.submitData.holder={personVO:a}),s&&s.length>0&&s.forEach(((e,a)=>{m.submitData.insuredVOList&&m.submitData.insuredVOList.length>a?m.submitData.insuredVOList[a].personVO=e.personVO:m.submitData.insuredVOList=[{personVO:e.personVO}]})),m.ifPersonalInfoSuccess=!0,console.log("投被保人的信息回传 ",m.submitData,e),x()},S=e=>{m.mainRiskVO=e,m.riskVOList.length>0&&(m.riskVOList[0]=e),console.log("标准险种的信息回传",e),x()},F=e=>{m.riskVOList=[m.mainRiskVO,...e],console.log("附加险列表数据回传",e),x()};return v((()=>{_()})),k((()=>{m.loading=!0,M(C.value).then((e=>{O.value=e.data})).finally((()=>{m.loading=!1}))})),l((()=>m.show),(e=>{e&&_()})),a({open:()=>{m.show=!0}}),l((()=>m.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(a,s)=>{const t=L,o=T,i=D;return n(),d(p,null,[b("div",Oe,[u(t,{type:"primary",onClick:s[0]||(s[0]=e=>c(m).show=!0)},{default:h((()=>[y("立即投保")])),_:1})]),u(i,{class:"com-trial-wrap",style:{height:"620px"},show:c(m).show,closeable:!1,onClose:V},{default:h((()=>[b("div",Ce,[b("div",_e,[xe,u(o,{name:"cross",onClick:s[1]||(s[1]=e=>c(m).show=!1)})]),b("div",Re,[u(ye,{"data-source":O.value},null,8,["data-source"]),e.dataSource.productFactor?(n(),f(c(G),{key:0,ref:"personalInfoRef",modelValue:c(m).userData,"onUpdate:modelValue":s[2]||(s[2]=e=>c(m).userData=e),"product-factor":e.dataSource.productFactor,onTrailChange:R},null,8,["modelValue","product-factor"])):I("",!0),u(N,{ref_key:"insureInfosRef",ref:r,"origin-data":e.dataSource.insureProductRiskVOList[0],"product-factor":e.dataSource.productFactor,onTrialChange:S},null,8,["origin-data","product-factor"]),u(Y,{"data-source":e.dataSource,"show-main-risk":!1,onTrialChange:F},null,8,["data-source"])]),u(z,{"is-share":!1,premium:100,"loading-text":c(m).trialResult,"plan-code":"todo计划的code","payment-frequency":"guaranteeObj.paymentFrequency","tenant-product-detail":"tenantProductDetail",onClick:g},{default:h((()=>[y("立即投保")])),_:1},8,["loading-text","payment-frequency"])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-f26543be"]]);export{Le as default};

!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-bank-card-info .field-title .sub-title[data-v-b4bb0f9e]{font-size:.34667rem;color:#99a9c0}@charset "UTF-8";.page-bank-card[data-v-83699cb4] .com-card-wrap .body{padding:0}.page-bank-card .reprise-card .reprise-card-list[data-v-83699cb4]{padding:0 .4rem;height:1.41333rem;display:flex;justify-content:space-between;align-items:center}.page-bank-card .reprise-card .reprise-card-list .reprise-card-item[data-v-83699cb4]{text-align:center;width:2.88rem;height:.8rem;line-height:.8rem;background:#f6f7fc;border-radius:.10667rem;color:#393d46;font-size:.34667rem}.page-bank-card .reprise-card .reprise-card-list .reprise-card-item.selected[data-v-83699cb4]{background:rgba(13,110,254,.1);border:1px solid #0d6efe;color:#0d6efe}.page-bank-card .agree[data-v-83699cb4]{height:1.41333rem;display:flex;align-items:center;font-size:.37333rem;color:#393d46;background:#f2f5fc;padding:0 .4rem}.page-bank-card .agree .checkbox[data-v-83699cb4]{margin-right:.29333rem}.page-bank-card .agree .file[data-v-83699cb4]{color:#0d6efe}.page-bank-card .footer[data-v-83699cb4]{position:static}\n',document.head.appendChild(e),System.register(["./vendor-legacy-388e7174.js","./index-legacy-8707f6ce.js","./index-legacy-a1d66b6e.js","./index-legacy-fcabd39e.js","./utils-legacy-20e4723c.js","./useDicData-legacy-1ec44e3e.js","./index-legacy-71c63e34.js","./utils-legacy-ebafda1e.js","./index-legacy-daa8e631.js"],(function(e){"use strict";var a,l,t,d,n,o,u,i,r,s,c,m,p,v,b,g,y,f,T,I,k,E,h,R,V,_,D,A,M,C,P,S,N,x,U,j,O,w,F;return{setters:[function(e){a=e.g,l=e.M,t=e.r,d=e.A,n=e.o,o=e.i,u=e.t,i=e.B,r=e.a1,s=e.m,c=e.z,m=e.h,p=e.k,v=e.P,b=e.Q,g=e.j,y=e.H,f=e.v,T=e.K,I=e.p,k=e.E,E=e.O,h=e.F,R=e.G,V=e.T,_=e.$,D=e.J},function(e){A=e.P},function(e){M=e._,C=e.e,P=e.U,S=e.P},function(e){N=e.a,x=e.P},function(e){U=e.c},function(e){j=e.u},function(e){O=e.c,w=e.a,F=e.n},function(){},function(){}],execute:function(){const H={class:"com-form-wrapper"},B=a({props:{labelAlign:{default:"left"},inputAlign:{default:"right"},errorMessageAlign:{default:"right"},isView:{type:Boolean,default:!1}},setup(e,{expose:a}){l("formProps",{isView:e.isView});const c=t({}),m=()=>c.value.getValues();return a({getValues:m,submit:()=>{c.value.submit()},validate:e=>new Promise(((a,l)=>{c.value.validate(e).then((()=>{a(m())})).catch((e=>{l(e)}))})),resetValidation:e=>{c.value.resetValidation(e)},getValidationStatus:"",scrollToField:(e,a)=>{c.value.scrollToField(e,a)}}),(a,l)=>{const t=d("VanForm");return n(),o("div",H,[u(t,s({ref_key:"formRef",ref:c,"label-align":e.labelAlign,"input-align":e.inputAlign,"error-message-align":e.errorMessageAlign},a.$attrs),{default:i((()=>[r(a.$slots,"default",{},void 0,!0)])),_:3},16,["label-align","input-align","error-message-align"])])}}});var L=M(B,[["__scopeId","data-v-87b879f4"]]),q=(e=>(e[e.REAL_TIME=1]="REAL_TIME",e[e.BATCH=2]="BATCH",e))(q||{});const W=[{value:1,label:"实时转账"},{value:2,label:"批量扣款"}];U(W);var z=(e=>(e[e.DEBIT=1]="DEBIT",e[e.CREDIT=2]="CREDIT",e[e.PRE_PAY=3]="PRE_PAY",e[e.PRE_CREDIT=4]="PRE_CREDIT",e[e.OTHER=5]="OTHER",e))(z||{});const G=[{value:1,label:"借记卡"},{value:2,label:"贷记卡"},{value:3,label:"预付费卡"},{value:4,label:"准贷记卡"},{value:5,label:"其他"}];U(G);var K=(e=>(e[e.FIRST_TERM=1]="FIRST_TERM",e[e.RENEW_TERM=2]="RENEW_TERM",e[e.REPRISE=3]="REPRISE",e[e.OTHER=4]="OTHER",e))(K||{});const $=[{value:1,label:"首期支付"},{value:2,label:"续期支付"},{value:3,label:"年金领取"},{value:4,label:"其他"}];U($);var Y=(e=>(e[e.FIRST_SAME=1]="FIRST_SAME",e[e.RENEW_SAME=2]="RENEW_SAME",e[e.OTHER=3]="OTHER",e))(Y||{});const J=[{value:1,label:"同首期"},{value:2,label:"同续期"},{value:3,label:"其他"}];U($);var Q=(e=>(e[e.AUTOMATIC_PADDING=1]="AUTOMATIC_PADDING",e[e.CANCEL=2]="CANCEL",e))(Q||{});const X=[{value:1,label:"自动垫付"},{value:2,label:"中止合同"}];U(X);const Z={class:"com-bank-card-info"},ee=(e=>(v("data-v-b4bb0f9e"),e=e(),b(),e))((()=>g("span",{class:"field-title"},[y("银行卡照片 "),g("span",{class:"sub-title"},"(需上传正反两面)")],-1)));var ae=M(a({props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:a}){const l=e,d=j("BANK"),r=t({bankCardType:z.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),s=e=>!(!e||2!==e.length)||"请上传银行卡正反面照片";c((()=>l.modelValue),(e=>{r.value=e}),{immediate:!0}),c(r,(e=>{a("update:modelValue",e)}));const v=m((()=>d.value.map((e=>({label:e.name,value:e.code})))));return(a,l)=>(n(),o("div",Z,[u(N,{modelValue:r.value.bankCardType,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value.bankCardType=e),label:"卡片类型",name:"bankCardType","data-source":p(G),"is-view":""},null,8,["modelValue","data-source"]),u(x,{modelValue:r.value.bankCardNo,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value.bankCardNo=e),label:"银行卡号",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"]),u(x,{"model-value":e.holderName,label:"持卡人",name:"accountName","is-view":""},null,8,["model-value"]),u(N,{modelValue:r.value.payBank,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value.payBank=e),name:"payBank",label:"开户银行","data-source":p(v),required:""},null,8,["modelValue","data-source"]),u(x,{label:"银行卡照片",block:"","label-width":"100%",name:"images",rules:[{validator:s}]},{label:i((()=>[ee])),input:i((()=>[u(C,{modelValue:r.value.images,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value.images=e),"max-count":2,"upload-type":p(P).BANK_CARD},null,8,["modelValue","upload-type"])])),_:1},8,["rules"]),u(x,{modelValue:r.value.mobile,"onUpdate:modelValue":l[4]||(l[4]=e=>r.value.mobile=e),label:"预留手机号",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])]))}}),[["__scopeId","data-v-b4bb0f9e"]]);const le=e=>(v("data-v-83699cb4"),e=e(),b(),e),te={class:"page-bank-card"},de={class:"reprise-card-list"},ne=["onClick"],oe={class:"agree"},ue=y(" 投保人阅读并接受 "),ie=le((()=>g("div",{class:"file"},"《银行转账授权》",-1))),re={class:"footer-button footer"},se=y("下一步"),ce=a({setup(e){const a=f(),l=T(),{orderNo:r="2022072710380711215",saleUserId:s="D1234567-1",tenantId:c="9991000007",templateId:m=1}=a.query;let v={};const b=t(""),y=t({payMethod:q.REAL_TIME,bankData:{imagesId:[]}}),M=t({payMethod:q.REAL_TIME,expiryMethod:Q.AUTOMATIC_PADDING,bankData:{imagesId:[]},payInfoType:Y.FIRST_SAME}),C=t({bankData:{imagesId:[]}}),P=t(Y.FIRST_SAME),U=t(!1),j=t(),H=t(),B=t(),z=()=>{var e,a,t;U.value?Promise.all([null===(e=j.value)||void 0===e?void 0:e.validate(),null===(a=H.value)||void 0===a?void 0:a.validate(),null===(t=B.value)||void 0===t?void 0:t.validate()]).then((e=>{const a=[{...e[0],id:y.value.id,paymentType:K.FIRST_TERM},{...e[1],id:M.value.id,paymentType:K.RENEW_TERM},{...e[2],id:C.value.id,paymentType:K.REPRISE,payInfoType:P.value}],t=[{category:24,name:"首期签约银行卡正面",objectType:5,type:"png",uri:e[0].images[0],id:y.value.bankData.imagesId[0]},{category:25,name:"首期签约银行卡背面",objectType:5,type:"png",uri:e[0].images[1],id:y.value.bankData.imagesId[1]}];M.value.payInfoType===Y.OTHER&&(t.push({category:24,name:"续期签约银行卡正面",objectType:6,type:"png",uri:e[1].images[0],id:M.value.bankData.imagesId[0]}),t.push({category:25,name:"续期签约银行卡正面",objectType:6,type:"png",uri:e[1].images[1],id:M.value.bankData.imagesId[1]})),P.value===Y.OTHER&&(t.push({category:24,name:"年金签约银行卡正面",objectType:7,type:"png",uri:e[2].images[0],id:C.value.bankData.imagesId[0]}),t.push({category:25,name:"年金签约银行卡正面",objectType:7,type:"png",uri:e[2].images[1],id:C.value.bankData.imagesId[1]})),F({...v,pageCode:"payInfo",tenantOrderPayInfoList:a,extInfo:{...v.extInfo,templateId:"1",pageCode:"payInfo"},operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:t}).then((e=>{const{code:a,data:t}=e;"10000"===a&&t.success&&l.push({path:S[t.pageAction.data.nextPageCode],query:{orderNo:r,saleUserId:s,tenantId:c}})}))})):V.fail("请勾选同意银行转账授权")};return I((()=>{O({pageCode:"payInfo",templateId:1}).then((e=>{})),w({orderNo:r,saleUserId:s,tenantId:c}).then((e=>{const{code:a,data:l}=e;"10000"===a&&l&&(v=l,b.value=l.tenantOrderHolder.name,l.tenantOrderPayInfoList.forEach((e=>{e.paymentType===K.FIRST_TERM?(y.value=e,y.value.bankData={...e,images:[],imagesId:[]}):e.paymentType===K.RENEW_TERM?(M.value=e,M.value.bankData={...e,images:[],imagesId:[]}):e.paymentType===K.REPRISE&&(C.value=e,C.value.bankData={...e,images:[],imagesId:[]},P.value=e.payInfoType)})),l.tenantOrderAttachmentList.forEach((e=>{5===e.objectType?(24===e.category&&(y.value.bankData.images[0]=e.uri,y.value.bankData.imagesId[0]=e.id),25===e.category&&(y.value.bankData.images[1]=e.uri,y.value.bankData.imagesId[1]=e.id)):6===e.objectType?(24===e.category&&(M.value.bankData.images[0]=e.uri,M.value.bankData.imagesId[0]=e.id),25===e.category&&(M.value.bankData.images[1]=e.uri,M.value.bankData.imagesId[1]=e.id)):7===e.objectType&&(24===e.category&&(C.value.bankData.images[0]=e.uri,C.value.bankData.imagesId[0]=e.id),25===e.category&&(C.value.bankData.images[1]=e.uri,C.value.bankData.imagesId[1]=e.id))})))}))})),(e,a)=>{const l=d("van-switch"),t=d("van-checkbox"),r=d("van-button"),s=d("ProPageWrap");return n(),k(s,null,{default:i((()=>[g("div",te,[u(A,{title:"首期支付"},{default:i((()=>[u(L,{ref_key:"form1",ref:j},{default:i((()=>[u(N,{modelValue:y.value.payMethod,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.payMethod=e),name:"payMethod",required:"",label:"支付方式","is-link":"",placeholder:"请选择","data-source":p(W)},null,8,["modelValue","data-source"]),u(ae,{modelValue:y.value.bankData,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.bankData=e),"holder-name":b.value},null,8,["modelValue","holder-name"])])),_:1},512)])),_:1}),u(A,{title:"续期支付"},{default:i((()=>[u(L,{ref_key:"form2",ref:H},{default:i((()=>[u(x,{label:"同首期",name:"payInfoType"},{input:i((()=>[u(l,{modelValue:M.value.payInfoType,"onUpdate:modelValue":a[2]||(a[2]=e=>M.value.payInfoType=e),size:"22","active-value":p(Y).FIRST_SAME,"inactive-value":p(Y).OTHER},null,8,["modelValue","active-value","inactive-value"])])),_:1}),u(N,{modelValue:M.value.payMethod,"onUpdate:modelValue":a[3]||(a[3]=e=>M.value.payMethod=e),name:"payMethod",label:"支付方式","is-link":"",placeholder:"请选择","data-source":p(W),required:""},null,8,["modelValue","data-source"]),u(N,{modelValue:M.value.expiryMethod,"onUpdate:modelValue":a[4]||(a[4]=e=>M.value.expiryMethod=e),name:"expiryMethod",label:"保费逾期未支付","is-link":"",placeholder:"请选择","data-source":p(X),required:"","label-width":"200"},null,8,["modelValue","data-source"]),M.value.payInfoType!==p(Y).FIRST_SAME?(n(),k(ae,{key:0,modelValue:M.value.bankData,"onUpdate:modelValue":a[5]||(a[5]=e=>M.value.bankData=e),"holder-name":b.value},null,8,["modelValue","holder-name"])):E("",!0)])),_:1},512)])),_:1}),u(A,{title:"年金领取银行卡",class:"reprise-card","show-divider":!1},{default:i((()=>[g("div",de,[(n(!0),o(R,null,h(p(J),((e,a)=>(n(),o("div",{key:a,class:_(["reprise-card-item",{selected:P.value===e.value}]),onClick:a=>{return l=e.value,void(P.value=l);var l}},D(e.label),11,ne)))),128))]),u(L,{ref_key:"form3",ref:B},{default:i((()=>[P.value===p(Y).OTHER?(n(),k(ae,{key:0,modelValue:C.value.bankData,"onUpdate:modelValue":a[6]||(a[6]=e=>C.value.bankData=e),"holder-name":b.value},null,8,["modelValue","holder-name"])):E("",!0)])),_:1},512)])),_:1}),g("div",oe,[u(t,{modelValue:U.value,"onUpdate:modelValue":a[7]||(a[7]=e=>U.value=e),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),ue,ie]),g("div",re,[u(r,{type:"primary",onClick:z},{default:i((()=>[se])),_:1})])])])),_:1})}}});e("default",M(ce,[["__scopeId","data-v-83699cb4"]]))}}}))}();

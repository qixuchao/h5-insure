!function(){var e=document.createElement("style");e.innerHTML=".com-select .com-select-container[data-v-a821acd4]{padding:.4rem}.com-select .com-select-container .radio-item[data-v-a821acd4]{margin:.26667rem 0}.com-select .com-select-container .radio-item .radio-item-wrapper[data-v-a821acd4]{padding:0 .42667rem}.com-select .com-select-container .radio-item .radio-item-wrapper p[data-v-a821acd4]{font-size:.4rem;font-family:PingFangSC-Semibold,PingFang SC,serif;color:#393d46;margin:.06667rem 0}.com-select .com-select-container .radio-item .radio-item-wrapper .name[data-v-a821acd4]{font-weight:600;margin-right:.4rem}.com-select .com-select-container .radio-item .radio-item-wrapper .phone[data-v-a821acd4]{font-weight:400}.page-info-wrapper{padding-bottom:2rem}.page-info-wrapper .com-card .com-card-wrap .body{padding:0}.page-info-wrapper .beneficiary-part .part-title{display:flex;align-items:center;justify-content:space-between;padding:0 var(--zaui-card-border, .4rem);background-color:var(--zaui-global-bg, #f2f5fc);height:1.2rem}.page-info-wrapper .beneficiary-part .part-title .title{font-size:.4rem;font-weight:600;color:#393d46}.page-info-wrapper .left{flex:0 0 50%}.page-info-wrapper .left .trial-result{font-size:.45333rem;color:#393d46}.page-info-wrapper .left .trial-result .result-num{margin-left:.17333rem;color:var(--zaui-price, #ff5840);font-weight:700;margin-left:.21333rem}.page-info-wrapper .left .result-desc{font-size:.32rem;color:#666}.page-info-wrapper .operate-btn{width:50%}.page-info-wrapper .radio-item-wrapper{padding:0}.page-info-wrapper .radio-item-wrapper p{font-size:.4rem;color:#393d46;margin:.06667rem 0;word-break:break-all}.page-info-wrapper .radio-item-wrapper .name{font-weight:600;margin-right:.4rem}.page-info-wrapper .radio-item-wrapper .phone{font-weight:400}\n",document.head.appendChild(e),System.register(["./index-legacy-c3cd4036.js","./trial-legacy-38734377.js","./trial-legacy-1104cc07.js","./useDicData-legacy-8a523723.js","./infoCollection-legacy-51f077ba.js","./index-legacy-da73529a.js","./pdfh5-legacy-9f98dc45.js","./relativeTime-legacy-4b5b6d28.js"],(function(e){"use strict";var t,n,r,a,i,o,d,l,s,u,c,p,f,m,I,y,O,v,L,g,b,C,h,w,x,P,k,E,T,V,R,A,_,H,N,B,j,D,S,U,F,Y,z,M;return{setters:[function(e){t=e._,n=e.d,r=e.r,a=e.ac,i=e.b,o=e.c,d=e.e,l=e.w,s=e.j,u=e.f,c=e.g,p=e.X,f=e.h,m=e.F,I=e.i,y=e.t,O=e.n,v=e.Y,L=e.u,g=e.a,b=e.G,C=e.z,h=e.x,w=e.an,x=e.O,P=e.k,k=e.a0,E=e.p,T=e.a7,V=e.a8,R=e.N,A=e.T,_=e.C,H=e.D},function(e){N=e.p},function(e){B=e.P,j=e.I,D=e.R},function(e){S=e.u},function(e){U=e.R,F=e.a,Y=e.B,z=e.b},function(e){M=e._},function(){},function(){}],execute:function(){const q={class:"com-select-container"},$={class:"radio-item-wrapper"},G={class:"name"},K={class:"hone"},W={class:"address"},X={class:"footer-button"},J=n({__name:"index",props:{dataSource:{type:Array,default:()=>[]},show:{type:Boolean,default:!1},modelValue:{type:[String,Number],default:null}},emits:["update","update:modelValue","submit","close"],setup(e,{emit:t}){const n=e,L=r(n.modelValue),g=r(n.show),b=()=>{t("submit",L.value),g.value=!1},C=()=>{t("close")};return a((()=>n.modelValue),(e=>{L.value=e})),a((()=>L.value),(e=>{t("update:modelValue",e)})),(t,n)=>{const r=i("van-radio"),a=i("van-radio-group"),h=i("VanButton");return o(),d(v,{show:c(g),"onUpdate:show":n[1]||(n[1]=e=>p(g)?g.value=e:null),class:"com-select",title:"选择保单通讯信息",onClose:C},{default:l((()=>[s("div",q,[u(a,{modelValue:c(L),"onUpdate:modelValue":n[0]||(n[0]=e=>p(L)?L.value=e:null)},{default:l((()=>[(o(!0),f(m,null,I(e.dataSource,((e,t)=>(o(),d(r,{key:t,name:t+1,class:"radio-item"},{default:l((()=>[s("div",$,[s("p",null,[s("span",G,y(e.contactName),1),s("span",K,y(e.contactPhoneNo),1)]),s("p",W,y(e.contactAddress),1)])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])]),s("div",X,[u(h,{plain:"",type:"primary"},{default:l((()=>[O("取消")])),_:1}),u(h,{type:"primary",onClick:b},{default:l((()=>[O("确认")])),_:1})])])),_:1},8,["show"])}}});var Q=t(J,[["__scopeId","data-v-a821acd4"]]);const Z={key:0,class:"beneficiary-part"},ee={class:"part-title"},te={class:"title"},ne={class:"radio-item-wrapper"},re={class:"name"},ae={class:"hone"},ie={class:"address"},oe={class:"footer-button","safe-area-inset-bottom":""},de={class:"left"},le={class:"trial-result"},se={class:"result-num"},ue=s("div",{class:"result-desc"},"实际保费以后续为准",-1),ce={class:"operate-btn"};e("default",n({__name:"index",setup(e){const t=L(),n=g(),{templateId:v=1,orderNo:q="2022072710380711215",productCode:$,tenantId:G="9991000007",proposalId:K,insurerCode:W="kunlunhealth"}=n.query,[X,J]=b(),pe="/infoPreview"===n.path?"infoPreview":"infoCollection",fe=S("NATIONAL_REGION_CODE"),me=r({}),Ie=r({extInfo:{pageCode:pe},tenantOrderHolder:{extInfo:{occupationCodeList:[]},holderType:1},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),ye=r(null),Oe=r([]),ve=r([]),Le=r([]),ge=r([]),be=r([]),Ce=C({beneficiaryId:0,nextPage:"",currentAddress:null,isLoading:!0}),he=h((()=>[{contactAddress:Ie.value.tenantOrderHolder?.extInfo?.familyAddress,contactName:Ie.value.tenantOrderHolder.name,contactPhoneNo:Ie.value.tenantOrderHolder.mobile},{contactAddress:Ie.value.tenantOrderHolder?.extInfo?.workAddress,contactName:Ie.value.tenantOrderHolder.name,contactPhoneNo:Ie.value.tenantOrderHolder.mobile},{contactAddress:Ie.value.tenantOrderInsuredList[0]?.extInfo?.familyAddress,contactName:Ie.value.tenantOrderInsuredList[0]?.name,contactPhoneNo:Ie.value.tenantOrderInsuredList[0]?.mobile},{contactAddress:Ie.value.tenantOrderInsuredList[0]?.extInfo?.workAddress,contactName:Ie.value.tenantOrderInsuredList[0].name,contactPhoneNo:Ie.value.tenantOrderInsuredList[0].mobile}].filter((e=>e.contactAddress&&e.contactName&&e.contactPhoneNo))||[])),we=h((()=>Ce.currentAddress?he.value[Ce.currentAddress-1]||{}:Ie.value.extInfo?.contactInfo?.[0]||{})),xe=e=>{const t={};return e.map((e=>{const{initialAmount:n,annuityDrawFrequency:r,annuityDrawType:a,paymentFrequency:i,paymentPeriod:o,paymentPeriodType:d,insurancePeriodType:l,insurancePeriodValue:s,riskCode:u,riskType:c,initialPremium:p,liabilityDetails:f,extInfo:m}=e,{riskId:I,copy:y}=m,O={amount:n,annuityDrawDate:r,annuityDrawType:a,paymentFrequency:i,riskId:I,copy:y,chargePeriod:o?`${B[d]}_${o}`:B[d],coveragePeriod:s?`${j[l]}_${s}`:j[l],riskCode:u,riskType:c,premium:p,liabilityVOList:f.map((e=>({...e,liabilityAttributeValue:e.refundMethod,liabilityAttributeCode:e.refundMethod&&1})))};return c===D.MAIN_RISK?(t.mainRiskCode=u,t.mainRiskId=I):Object.assign(O,t),O}))},Pe=()=>{ye.value?.validate().then((()=>{const{birthday:e,gender:r,extInfo:a}=Ie.value.tenantOrderHolder,{hasSocialInsurance:i,occupationCodeList:o}=a,{birthday:d,gender:l,extInfo:s,tenantOrderProductList:u}=Ie.value.tenantOrderInsuredList[0],{hasSocialInsurance:c,occupationCodeList:p}=s,f={holder:{personVO:{birthday:k(e).format("YYYY-MM-DD"),gender:r,socialFlag:i,occupationCodeList:o}},productCode:$,insuredVOList:[{insurerCode:W,personVO:{birthday:k(d).format("YYYY-MM-DD"),gender:l,socialFlag:c,occupationCodeList:p},productPlanVOList:[{insurerCode:W,planCode:"",riskVOList:xe(u[0].tenantOrderRiskList)}]}]};N({...f}).then((({code:e,data:r})=>{if("10000"===e){const e={},a=(t=[])=>{(t||[]).forEach((t=>{e[t.riskCode]=t,t.riskPremiumDetailVOList?.length&&a(t.riskPremiumDetailVOList)}))};a(r.riskPremiumDetailVOList),Ie.value.tenantOrderInsuredList[0].tenantOrderProductList[0]={...Ie.value.tenantOrderInsuredList[0].tenantOrderProductList[0],premium:r.premium,tenantOrderRiskList:Ie.value.tenantOrderInsuredList[0].tenantOrderProductList[0].tenantOrderRiskList.map((t=>({...t,initialAmount:e[t.riskCode].amount,initialPremium:e[t.riskCode].premium})))},(()=>{const e={...Ie.value};e.extInfo={...e.extInfo,contactInfo:[we.value],buttonCode:R.infoCollection},e.tenantOrderAttachmentList=[{category:T.OBVERSE_CERT,objectType:V.HOLDER,objectId:Ie.value.tenantOrderHolder.id,name:"投保人证件正面",uri:Oe.value[0],id:Le.value[0]},{category:T.REVERSE_CERT,objectType:V.HOLDER,objectId:Ie.value.tenantOrderHolder.id,name:"投保人证件背面",uri:Oe.value[1],id:Le.value[1]},{category:T.OBVERSE_CERT,objectType:V.INSURED,objectId:Ie.value.tenantOrderInsuredList[0].id,name:"被保人证件正面",uri:ve.value[0]||Oe.value[0],id:ge.value[1]},{category:T.REVERSE_CERT,objectType:V.INSURED,objectId:Ie.value.tenantOrderInsuredList[0].id,name:"被保人证件背面",uri:ve.value[1]||Oe.value[1],id:ge.value[1]}].filter((e=>e.uri)),ye.value?.validate().then((r=>{if(e.tenantOrderInsuredList[0].insuredBeneficiaryType===z.SPECIFY){const t={};if(e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.forEach((e=>{t[e.benefitOrder]?t[e.benefitOrder].sum+=Number(e.benefitRate):t[e.benefitOrder]={sum:Number(e.benefitRate)}})),Object.values(t).some((e=>100!==e.sum)))return void A.fail("同一顺位的受益人比例之和必须为100")}_(e).then((({code:e,data:r})=>{"10000"===e&&"jumpToPage"===r.pageAction.pageAction&&t.push({path:H[r.pageAction.data.nextPageCode],query:n.query})}))}))})()}}))}))},ke=e=>{},Ee=()=>{Ce.beneficiaryId+=1,Ie.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.push({id:Ce.beneficiaryId,extInfo:{}})};return w((()=>{E({orderNo:q,tenantId:G}).then((({code:e,data:t})=>{if("10000"===e){const e=t;e.extInfo={...e.extInfo,pageCode:pe,templateId:v},e.tenantOrderHolder=e.tenantOrderHolder||{holderType:1},e.tenantOrderHolder.extInfo={...e.tenantOrderHolder.extInfo,occupationCodeList:e.tenantOrderHolder.extInfo?.occupationCodeList||[]},e.tenantOrderInsuredList[0].extInfo={...e.tenantOrderInsuredList[0].extInfo,occupationCodeList:e.tenantOrderInsuredList[0].extInfo?.occupationCodeList||[]},e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map((e=>{const t=e;return t.extInfo={...t.extInfo,occupationCodeList:t.extInfo?.occupationCodeList||[]},t})),e.tenantOrderAttachmentList.forEach((e=>{e.category===T.OBVERSE_CERT?e.objectType===V.HOLDER?(Oe.value[0]=e.uri,Le.value[0]=e.id):e.objectType===V.INSURED&&(ve.value[0]=e.uri,ge.value[0]=e.id):e.category===T.REVERSE_CERT&&(e.objectType===V.HOLDER?(Oe.value[1]=e.uri,Le.value[1]=e.id):e.objectType===V.INSURED&&(ve.value[1]=e.uri,Le.value[1]=e.id))})),Object.assign(Ie.value,e)}})).finally((()=>{Ce.isLoading=!1})),x({pageCode:"infoCollection",templateId:v}).then((({code:e,data:t})=>{if("10000"===e){const e={BENEFICIARY:[],INSURER:[],HOLDER:[]};t.productInsureFactorList.forEach((t=>{(e[t.moduleType]=e[t.moduleType]||[]).push(t)})),me.value=e}}))})),a([()=>Ie.value.tenantOrderInsuredList[0].relationToHolder,()=>Ie.value.tenantOrderHolder],(()=>{`${Ie.value.tenantOrderInsuredList[0].relationToHolder}`===U.SELF&&Object.assign(Ie.value.tenantOrderInsuredList[0],Ie.value.tenantOrderHolder,{id:Ie.value.tenantOrderInsuredList[0].id,extInfo:{...Ie.value.tenantOrderHolder.extInfo,insureProvinceCode:Ie.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,insureCityCode:Ie.value.tenantOrderInsuredList[0].extInfo.insureCityCode,insureAreaCode:Ie.value.tenantOrderInsuredList[0].extInfo.insureAreaCode}})}),{deep:!0,immediate:!0}),(e,t)=>{const n=i("ProCard"),r=i("ProRadioButton"),a=i("ProField"),v=i("ProCascader"),L=i("ProSvg"),g=i("VanButton"),b=i("ProCheckButton"),C=i("van-cell"),h=i("ProForm"),w=i("ProPageWrap");return o(),d(w,{class:"page-info-wrapper"},{default:l((()=>[c(Ce).isLoading?P("",!0):(o(),d(h,{key:0,ref_key:"formRef",ref:ye},{default:l((()=>[u(n,{title:"投保人"},{default:l((()=>[u(M,{images:c(Oe),"onUpdate:images":t[0]||(t[0]=e=>p(Oe)?Oe.value=e:null),"form-info":c(Ie).tenantOrderHolder,"factor-list":c(me).HOLDER,prefix:"holder"},null,8,["images","form-info","factor-list"])])),_:1}),u(n,{title:"被保人"},{default:l((()=>[u(a,{modelValue:c(Ie).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[2]||(t[2]=e=>c(Ie).tenantOrderInsuredList[0].relationToHolder=e),label:"为谁保单",name:"relationToHolder",placeholder:"请选择"},{input:l((()=>[u(r,{modelValue:c(Ie).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[1]||(t[1]=e=>c(Ie).tenantOrderInsuredList[0].relationToHolder=e),options:c(F)},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),1!=+c(Ie).tenantOrderInsuredList[0].relationToHolder?(o(),d(M,{key:0,images:c(ve),"onUpdate:images":t[3]||(t[3]=e=>p(ve)?ve.value=e:null),"form-info":c(Ie).tenantOrderInsuredList[0],"factor-list":c(me).INSURER||[],prefix:"insure"},null,8,["images","form-info","factor-list"])):P("",!0),u(v,{modelValue:c(Ie).tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:modelValue":t[4]||(t[4]=e=>c(Ie).tenantOrderInsuredList[0].extInfo.insureAreaCode=e),field1:c(Ie).tenantOrderInsuredList[0].extInfo.insureProvinceCode,"onUpdate:field1":t[5]||(t[5]=e=>c(Ie).tenantOrderInsuredList[0].extInfo.insureProvinceCode=e),field2:c(Ie).tenantOrderInsuredList[0].extInfo.insureCityCode,"onUpdate:field2":t[6]||(t[6]=e=>c(Ie).tenantOrderInsuredList[0].extInfo.insureCityCode=e),field3:c(Ie).tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:field3":t[7]||(t[7]=e=>c(Ie).tenantOrderInsuredList[0].extInfo.insureAreaCode=e),label:"投保地区",name:"insureAreaCode",placeholder:"请选择","is-link":"",required:"","data-source":c(fe),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","data-source"])])),_:1}),u(n,{title:"受益人"},{default:l((()=>[u(a,{modelValue:c(Ie).tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[9]||(t[9]=e=>c(Ie).tenantOrderInsuredList[0].insuredBeneficiaryType=e),label:"受益人类型",name:"insuredBeneficiaryType",placeholder:"请选择"},{input:l((()=>[u(r,{modelValue:c(Ie).tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[8]||(t[8]=e=>c(Ie).tenantOrderInsuredList[0].insuredBeneficiaryType=e),options:c(Y)},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),2==c(Ie).tenantOrderInsuredList[0].insuredBeneficiaryType?(o(),f("div",Z,[(o(!0),f(m,null,I(c(Ie).tenantOrderInsuredList[0].tenantOrderBeneficiaryList,((e,n)=>(o(),f("div",{key:e.beneficiaryId||e.id,class:"beneficiary-item"},[s("div",ee,[s("span",te,y(`受益人${n+1}`),1),u(L,{name:"delete",onClick:t=>{return n=e,void(Ie.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=Ie.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.filter((e=>e.beneficiaryId!==n.beneficiaryId||n.id!==e.id)));var n}},{default:l((()=>[O("删除")])),_:2},1032,["onClick"])]),u(M,{images:c(be),"onUpdate:images":t[10]||(t[10]=e=>p(be)?be.value=e:null),"form-info":e,"factor-list":c(me).BENEFICIARY||[],prefix:`beneficiary-${n}`,"beneficiary-list":c(Ie).tenantOrderInsuredList[0].tenantOrderBeneficiaryList},null,8,["images","form-info","factor-list","prefix","beneficiary-list"])])))),128)),u(g,{onClick:Ee},{default:l((()=>[O("+添加受益人")])),_:1})])):P("",!0)])),_:1}),u(n,{title:"保单通讯信息"},{default:l((()=>[Object.keys(c(we))?.length?(o(),d(C,{key:1,title:"单元格","is-link":"",onClick:t[12]||(t[12]=e=>c(J)(!0))},{title:l((()=>[s("div",ne,[s("p",null,[s("span",re,y(c(we).contactName),1),s("span",ae,y(c(we).contactPhoneNo),1)]),s("p",ie,y(c(we).contactAddress),1)])])),_:1})):(o(),d(b,{key:0,activated:"",onClick:t[11]||(t[11]=e=>c(J)(!0))},{default:l((()=>[O("选择保单通讯信息")])),_:1}))])),_:1})])),_:1},512)),s("div",oe,[s("div",de,[s("div",le,[O(" 首期"),s("span",se,"￥"+y(c(Ie).tenantOrderInsuredList?.[0]?.tenantOrderProductList?.[0].premium?.toLocaleString?.()),1)]),ue]),s("div",ce,[u(g,{block:"",type:"primary",onClick:Pe},{default:l((()=>[O("下一步")])),_:1})])]),c(X)?(o(),d(Q,{key:1,modelValue:c(Ce).currentAddress,"onUpdate:modelValue":t[13]||(t[13]=e=>c(Ce).currentAddress=e),show:c(X),"data-source":c(he),onSubmit:ke,onClose:t[14]||(t[14]=e=>c(J)(!1))},null,8,["modelValue","show","data-source"])):P("",!0)])),_:1})}}}))}}}))}();

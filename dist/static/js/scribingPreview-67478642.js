import{d as a,a as e,u as s,r as t,aI as i,R as l,b as o,c as n,i as r,e as d,w as c,U as p,a4 as u,f,a0 as m,Y as b,af as v,j as g,ag as w,B as h,aK as k,ae as y}from"./index-b03f65fc.js";import{S as I}from"./index-0e9c02f4.js";import{P as C}from"./index-ff7c796f.js";import{q as N,s as _,c as j}from"./scribing-e3b91caa.js";const x={class:"page-scribing-preview-wrap"},L=r("div",{class:"header-tip"},"点击文字框可进行修改",-1),T={class:"scribing-list"},E=["onClick"],V=["src"],q={class:"footer-btn"},A={class:"popup-body"},D={class:"popup-footer"},H=a({name:"scribingPreview"}),P=a({...H,setup(a){const H=e(),P=s(),R=t([{content:"想"}]),{orderNo:S,text:U,tenantId:Y,orderId:B}=P.query,K=t({}),[O,$]=i(!1),z=t(),F=t(),G=async()=>{const{code:a,data:e}=await N({orderId:B,tenantId:Y,contentType:y.HANDLE});"10000"===a&&(R.value=e.riskTranscriptionList,z.value=e.status)},J=()=>{F.value.clear(),$(!1)},M=()=>{K.value.image&&_({orderNo:S,tenantId:Y,riskTranscriptionList:[{...K.value,status:2}]}).then((({code:a,data:e})=>{"10000"===a&&($(!1),G())}))},Q=()=>{j({content:U,image:"",orderNo:S,tenantId:Y,transcriptionType:y.HANDLE}).then((({code:a})=>{"10000"===a&&H.back()}))},W=t(!1);return l((()=>{W.value=!0,G()})),(a,e)=>{const s=I,t=h,i=k;return o(),n(p,null,[r("div",x,[L,r("div",T,[d(s,{wrap:""},{default:c((()=>[(o(!0),n(p,null,u(f(R),((a,e)=>(o(),n("div",{key:e,class:m("scribing-item "+(+a.status!==f(b).YES?"activity":"")),onClick:e=>{return s=a,K.value={...s,image:""},void $(!0);var s}},[r("img",{src:a.thumbnail,alt:""},null,8,V)],10,E)))),128))])),_:1})]),r("div",q,[d(C,{shadow:!1,disabled:f(z)===f(b).NO,onClick:Q},{default:c((()=>[v(a.$slots,"default",{},(()=>[g("确认")]))])),_:3},8,["disabled"])])]),d(i,{show:f(O),teleport:".page-scribing-preview-wrap",class:"sign-popup",title:f(K).content,closeable:!1,position:"center",onClose:J},{default:c((()=>[r("div",A,[d(w,{ref_key:"signRef",ref:F,modelValue:f(K).image,"onUpdate:modelValue":e[0]||(e[0]=a=>f(K).image=a),"has-bg":"",placeholder:f(K).content,closeable:""},null,8,["modelValue","placeholder"])]),r("div",D,[d(t,{onClick:J},{default:c((()=>[g("取消")])),_:1}),d(t,{type:"primary",plain:"",disabled:!f(K).image,onClick:M},{default:c((()=>[g("确定")])),_:1},8,["disabled"])])])),_:1},8,["show","title"])],64)}}});export{P as default};

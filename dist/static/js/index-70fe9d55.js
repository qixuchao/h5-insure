import{v as e,d as a,k as t,y as r,l,by as n,b5 as o,A as i,b as s,B as u,C as d,R as c,D as v,cj as m,bD as b,bz as g,bw as h,H as p}from"./index-dc5ec44c.js";const[f,y]=e("slider");const V=p(a({name:f,props:{min:u(0),max:u(100),step:u(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:d,buttonSize:d,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}},emits:["change","drag-end","drag-start","update:modelValue"],setup(e,{emit:a,slots:u}){let d,p,f;const V=t(),N=t(),x=t(),w=r(),C=l((()=>Number(e.max)-Number(e.min))),S=l((()=>{const a=e.vertical?"width":"height";return{background:e.inactiveColor,[a]:n(e.barHeight)}})),B=a=>e.range&&Array.isArray(a),k=()=>{const{modelValue:a,min:t}=e;return B(a)?100*(a[1]-a[0])/C.value+"%":100*(a-Number(t))/C.value+"%"},z=l((()=>{const a={[e.vertical?"height":"width"]:k(),background:e.activeColor};x.value&&(a.transition="none");return a[e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left"]=(()=>{const{modelValue:a,min:t}=e;return B(a)?100*(a[0]-Number(t))/C.value+"%":"0%"})(),a})),A=a=>{const t=+e.min,r=+e.max,l=+e.step;a=h(a,t,r);const n=Math.round((a-t)/l)*l;return b(t,n)},H=(e,a)=>JSON.stringify(e)===JSON.stringify(a),T=(t,r)=>{t=B(t)?(a=>{var t,r;const l=null!=(t=a[0])?t:Number(e.min),n=null!=(r=a[1])?r:Number(e.max);return l>n?[n,l]:[l,n]})(t).map(A):A(t),H(t,e.modelValue)||a("update:modelValue",t),r&&!H(t,f)&&a("change",t)},X=a=>{if(a.stopPropagation(),e.disabled||e.readonly)return;const{min:t,reverse:r,vertical:l,modelValue:n}=e,o=c(V),i=l?o.height:o.width,s=Number(t)+(l?r?o.bottom-a.clientY:a.clientY-o.top:r?o.right-a.clientX:a.clientX-o.left)/i*C.value;if(B(n)){const[e,a]=n;T(s<=(e+a)/2?[s,a]:[e,s],!0)}else T(s,!0)},Y=t=>{e.disabled||e.readonly||("dragging"===x.value&&(T(p,!0),a("drag-end",t)),x.value="")},j=a=>{if("number"==typeof a){return y("button-wrapper",["left","right"][a])}return y("button-wrapper",e.reverse?"left":"right")},D=(a,t)=>{if("number"==typeof t){const e=u[0===t?"left-button":"right-button"];if(e)return e({value:a})}return u.button?u.button({value:a}):s("div",{class:y("button"),style:g(e.buttonSize)},null)},J=a=>{const t="number"==typeof a?e.modelValue[a]:e.modelValue;return s("div",{ref:N,role:"slider",class:j(a),tabindex:e.disabled?void 0:0,"aria-valuemin":e.min,"aria-valuenow":t,"aria-valuemax":e.max,"aria-disabled":e.disabled||void 0,"aria-readonly":e.readonly||void 0,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstartPassive:t=>{"number"==typeof a&&(d=a),(a=>{e.disabled||e.readonly||(w.start(a),p=e.modelValue,f=B(p)?p.map(A):A(p),x.value="start")})(t)},onTouchend:Y,onTouchcancel:Y,onClick:m},[D(t,a)])};return T(e.modelValue),o((()=>e.modelValue)),i("touchmove",(t=>{if(e.disabled||e.readonly)return;"start"===x.value&&a("drag-start",t),v(t,!0),w.move(t),x.value="dragging";const r=c(V);let l=(e.vertical?w.deltaY.value:w.deltaX.value)/(e.vertical?r.height:r.width)*C.value;if(e.reverse&&(l=-l),B(f)){const a=e.reverse?1-d:d;p[a]=f[a]+l}else p=f+l;T(p)}),{target:N}),()=>s("div",{ref:V,style:S.value,class:y({vertical:e.vertical,disabled:e.disabled}),onClick:X},[s("div",{class:y("bar"),style:z.value},[e.range?[J(0),J(1)]:J()])])}}));export{V as S};

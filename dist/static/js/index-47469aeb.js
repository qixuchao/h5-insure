import{d as e,u as t,a as n,r as o,z as i,L as r,R as a,c as l,A as s,i as d,w as u,g as c,e as f,a3 as I,k as v,h as p,Z as m,aP as L,bp as O,aO as R,cj as b,ab as E,ck as C}from"./index-9880ea8b.js";import{R as x}from"./infoCollection-7989f272.js";import{_ as w}from"./PersonalInfo-8c7bceda.js";import{u as S}from"./useDicData-b52103ad.js";const H={class:"page-info-wrapper"},U=e({name:"insureForm"}),h=e({...U,props:{factorObject:null,formInfo:{default:()=>({})},isView:{type:Boolean,default:!1},sendSmsCode:{type:Function,default:(e,t)=>{}},titleCollection:{default:()=>({})},inputAlign:{default:"left"},needDesensitize:{type:Boolean,default:!1}},setup(e,{expose:E}){const U=e,{insurerCode:h=""}=t().query;n(),t();const N=S(`${h.toLocaleUpperCase()}_OCCUPATION`),j=o({}),V=o({extInfo:{},tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:""}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),y=o(null),g=o([]),T=o([]);o([]),o([]);o([]);i({beneficiaryId:0,nextPage:"",currentAddress:null,isLoading:!0});const D=r((()=>{var e,t;const n={INSURER:{},HOLDER:{}};return((null==(e=j.value)?void 0:e.INSURER)||[]).forEach((e=>{n.INSURER[e.code]=e})),((null==(t=j.value)?void 0:t.HOLDER)||[]).forEach((e=>{n.HOLDER[e.code]=e})),n})),_=(e,t)=>{var n,o,i;return(null==(i=null==(o=null==(n=D.value)?void 0:n[t])?void 0:o[e])?void 0:i.isDisplay)===m.YES},k=(e,t)=>{var n,o;return(null==(o=null==(n=D.value)?void 0:n[t])?void 0:o[e].isMustInput)===m.YES},A=(e,t,n)=>{var o,i,r;return(null==(r=null==(i=null==(o=D.value)?void 0:o[n])?void 0:i[e])?void 0:r[t])||""},P=(e,t)=>{const n=e;return Object.keys(n).forEach((e=>{t.includes(e)||(n[e]="")})),n};return E({validateForm:e=>new Promise(((t,n)=>{var o;null==(o=y.value)||o.validate(e).then((()=>{t(V.value)}),(()=>{n()}))}))}),a((()=>U.factorObject),(()=>{const e={BENEFICIARY:U.factorObject[3],INSURER:U.factorObject[2],HOLDER:U.factorObject[1]};j.value=e}),{immediate:!0,deep:!0}),a([()=>V.value.tenantOrderInsuredList[0].relationToHolder,()=>V.value.tenantOrderHolder],(([e],[t])=>{var n,o,i,r;`${V.value.tenantOrderInsuredList[0].relationToHolder}`===x.SELF?(Object.assign(V.value.tenantOrderInsuredList[0],{...P(null==(o=null==(n=V.value)?void 0:n.tenantOrderInsuredList)?void 0:o[0],["extInfo","relationToHolder","tenantOrderBeneficiaryList","tenantOrderProductList"]),extInfo:{occupationCodeList:[]}}),Object.assign(V.value.tenantOrderInsuredList[0],V.value.tenantOrderHolder,{id:V.value.tenantOrderInsuredList[0].id,extInfo:{...V.value.tenantOrderHolder.extInfo,insureProvinceCode:V.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,insureCityCode:V.value.tenantOrderInsuredList[0].extInfo.insureCityCode,insureAreaCode:V.value.tenantOrderInsuredList[0].extInfo.insureAreaCode}})):e===t||U.isView||Object.assign(V.value.tenantOrderInsuredList[0],{...P(null==(r=null==(i=V.value)?void 0:i.tenantOrderInsuredList)?void 0:r[0],["extInfo","relationToHolder","tenantOrderBeneficiaryList","tenantOrderProductList"]),extInfo:{occupationCodeList:[]}})}),{deep:!0}),a((()=>U.formInfo),(()=>{Object.keys(U.formInfo).length&&(V.value=U.formInfo)}),{deep:!0,immediate:!0}),(t,n)=>{const o=L,i=O,r=R,a=b,m=C;return l(),s("div",H,[d(m,{ref_key:"formRef",ref:y,"show-error":"","show-error-message":!1,"input-align":e.inputAlign},{default:u((()=>{var s,m,L,O;return[(null==(s=c(j).HOLDER)?void 0:s.length)?(l(),f(i,{key:0,"show-line":!1,"show-divider":!1,title:null==(m=e.titleCollection)?void 0:m.HOLDER},{default:u((()=>[d(w,{images:c(g),"onUpdate:images":n[1]||(n[1]=e=>I(g)?g.value=e:null),"form-info":c(V).tenantOrderHolder,"factor-list":c(j).HOLDER,prefix:"holder","is-view":e.isView,"need-desensitize":e.needDesensitize,"send-sms-code":e.sendSmsCode},{name:u((()=>[v(t.$slots,"holderName")])),default:u((()=>{var t,i;return[_("gasNumberCollection","HOLDER")&&(null==(i=null==(t=c(V).tenantOrderSubjectList)?void 0:t[0])?void 0:i.extInfo)?(l(),f(o,{key:0,modelValue:c(V).tenantOrderSubjectList[0].subjectNo,"onUpdate:modelValue":n[0]||(n[0]=e=>c(V).tenantOrderSubjectList[0].subjectNo=e),label:A("gasNumberCollection","title","HOLDER"),name:"subjectNo",required:k("gasNumberCollection","HOLDER"),"is-view":e.isView,maxlength:100},null,8,["modelValue","label","required","is-view"])):p("",!0)]})),_:3},8,["images","form-info","factor-list","is-view","need-desensitize","send-sms-code"])])),_:3},8,["title"])):p("",!0),(null==(L=c(j).INSURER)?void 0:L.length)?(l(),f(i,{key:1,"show-line":!1,"show-divider":!1,title:null==(O=e.titleCollection)?void 0:O.INSURER},{default:u((()=>[_("relationToHolder","INSURER")?(l(),f(o,{key:0,modelValue:c(V).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":n[3]||(n[3]=e=>c(V).tenantOrderInsuredList[0].relationToHolder=e),class:"relation-holder",name:"insure_relationToHolder",required:k("relationToHolder","INSURER"),label:A("relationToHolder","title","INSURER")},{input:u((()=>[d(r,{modelValue:c(V).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":n[2]||(n[2]=e=>c(V).tenantOrderInsuredList[0].relationToHolder=e),"is-view":e.isView,prop:{label:"value",value:"code"},options:A("relationToHolder","attributeValueList","INSURER")||[]},null,8,["modelValue","is-view","options"])])),_:1},8,["modelValue","required","label"])):p("",!0),e.isView||1!=+c(V).tenantOrderInsuredList[0].relationToHolder?(l(),f(w,{key:1,images:c(T),"onUpdate:images":n[4]||(n[4]=e=>I(T)?T.value=e:null),"form-info":c(V).tenantOrderInsuredList[0],"factor-list":c(j).INSURER||[],prefix:"insure","need-desensitize":e.needDesensitize,"send-sms-code":e.sendSmsCode,"is-view":e.isView},{name:u((()=>[v(t.$slots,"insurerName")])),_:3},8,["images","form-info","factor-list","need-desensitize","send-sms-code","is-view"])):p("",!0),_("social","INSURER")?(l(),f(o,{key:2,modelValue:c(V).tenantOrderInsuredList[0].extInfo.hasSocialInsurance,"onUpdate:modelValue":n[6]||(n[6]=e=>c(V).tenantOrderInsuredList[0].extInfo.hasSocialInsurance=e),label:A("social","title","INSURER"),name:"insure_hasSocialInsurance",required:k("social","INSURER")},{input:u((()=>[d(r,{modelValue:c(V).tenantOrderInsuredList[0].extInfo.hasSocialInsurance,"onUpdate:modelValue":n[5]||(n[5]=e=>c(V).tenantOrderInsuredList[0].extInfo.hasSocialInsurance=e),disabled:e.isView,prop:{label:"value",value:"code"},options:A("social","attributeValueList","INSURER")||[]},null,8,["modelValue","disabled","options"])])),_:1},8,["modelValue","label","required"])):p("",!0),_("occupation","INSURER")?(l(),f(a,{key:3,modelValue:c(V).tenantOrderInsuredList[0].extInfo.occupationCodeList[0],"onUpdate:modelValue":n[7]||(n[7]=e=>c(V).tenantOrderInsuredList[0].extInfo.occupationCodeList[0]=e),field0:c(V).tenantOrderInsuredList[0].extInfo.occupationCodeList[0],"onUpdate:field0":n[8]||(n[8]=e=>c(V).tenantOrderInsuredList[0].extInfo.occupationCodeList[0]=e),field1:c(V).tenantOrderInsuredList[0].extInfo.occupationCodeList[1],"onUpdate:field1":n[9]||(n[9]=e=>c(V).tenantOrderInsuredList[0].extInfo.occupationCodeList[1]=e),field2:c(V).tenantOrderInsuredList[0].extInfo.occupationCodeList[2],"onUpdate:field2":n[10]||(n[10]=e=>c(V).tenantOrderInsuredList[0].extInfo.occupationCodeList[2]=e),label:A("occupation","title","INSURER"),name:"insure_occupationCodeList","is-view":e.isView,required:k("occupation","INSURER"),"data-source":c(N),mapping:{label:"value",value:"code",children:"children"},"is-link":""},null,8,["modelValue","field0","field1","field2","label","is-view","required","data-source"])):p("",!0)])),_:3},8,["title"])):p("",!0),p("",!0)]})),_:3},8,["input-align"])])}}});export{h as _};

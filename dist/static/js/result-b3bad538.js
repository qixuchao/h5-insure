import{_ as e,d as a,j as t,i as o,h as s,k as r,dR as l,l as n,o as d,c as u,b as i,u as c,w as p,a as m,e as v,F as f,s as y,v as N,p as b,q as I,y as S,dY as h,bi as C,e2 as E,a$ as L,b3 as _,bo as A,bp as k}from"./index-824426db.js";import{P as g}from"./index-f52f9793.js";import{g as w}from"./trial-6e3873a5.js";import{I as T}from"./infoItem-fbca6bcb.js";import{t as q}from"./format-31cde443.js";const P={class:"page-insure-result"},R={class:"page-insure-result-wrap"},j={class:"header"},D={class:"content"},U={class:"content-header"},Y={class:"product-name"},x=(e=>(A("data-v-5141b5eb"),e=e(),k(),e))((()=>m("span",null,"保障中",-1))),B={class:"content-list"},O={class:"footer-button"},F=a({name:"OrderResult"});var M=e(a({...F,setup(e){const a=t({orderNo:"",holderName:"",orderAmount:"",orderStatus:""}),A=o(),k=s(),F=t(!1),{orderNo:M="",preview:V,saleUserId:z="",tenantId:G="",templateId:J=1}=A.query,$=t({});r((e=>a.value&&[l.SUCCESS,l.PAYMENT_SUCCESS,l.ACCEPT_POLICY].some((e=>{var t;return e===(null==(t=a.value)?void 0:t.orderStatus)}))));const H=r((e=>a.value&&[l.PAYMENT_FAILED,l.INSURER_REJECT,l.TIMEOUT,l.FAILED,l.CANCELED].some((e=>{var t;return e===(null==(t=a.value)?void 0:t.orderStatus)}))));r((()=>a.value.orderStatus===l.PAYING));const K=()=>{k.push({path:S.orderList,query:A.query})},Q=()=>{k.push({path:S.updateBankInfo,query:A.query})},W=()=>{w({orderNo:M,tenantId:G}).then((e=>{var t,o,s;const{code:r,data:l}=e;if("10000"===r){F.value=!1;const{holder:{name:e},policyNo:r,insuredList:n,applicationReqList:d}=l;$.value=l,null==(t=l.tenantOrderPaymentInfoList)||t[0];const{productName:u,riskList:i}=(null==(s=null==(o=null==n?void 0:n[0])?void 0:o.productList)?void 0:s[0])||{};let c=d.map((e=>e.applicationNo));(null==r?void 0:r.length)&&(c=r),a.value={holderName:e,productName:u,policyList:c,validateDate:"",coverage:null==i?void 0:i[0].coverage,orderStatusDesc:h[l.orderStatus],orderStatus:l.orderStatus,orderNo:l.orderNo,orderAmount:q(l.orderAmount)}}}))},X=()=>{C.confirm({title:"投保提示",message:"选择转批扣后将对该笔订单进行转换批次扣款，提交后将无法操作变更卡号，再次划款",cancelButtonText:"返回重选"}).then((async()=>{const{code:e,data:a}=await E({orderNo:M,tenantId:G});"10000"===e&&W()}))};n((()=>{V||W()}));const Z=t();return n((()=>{setTimeout((async()=>{Z.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const o=L,s=_,r=g;return d(),u("div",P,[i(o,{"order-status":c($).orderStatus},null,8,["order-status"]),i(r,{modelValue:c(F),"onUpdate:modelValue":t[0]||(t[0]=e=>I(F)?F.value=e:null),onRefresh:W},{default:p((()=>[m("div",R,[m("div",j,v(c($).orderStatusDesc),1),m("div",D,[m("div",U,[m("h4",Y,v(c(a).productName),1),x]),i(T,{label:"投保人:",content:c(a).holderName,line:""},null,8,["content"]),i(T,{label:"投/保单号:",line:""},{content:p((()=>[m("div",B,[(d(!0),u(f,null,y(c(a).policyList,(e=>(d(),u("p",{key:e},v(e),1)))),128))])])),_:1}),i(T,{label:"保费:",content:c(a).orderAmount,line:""},null,8,["content"])]),m("div",O,[c(H)?(d(),u(f,{key:0},[i(s,{type:"primary",plain:"",onClick:Q},{default:p((()=>[N("变更卡号")])),_:1}),i(s,{type:"primary",onClick:X},{default:p((()=>[N("线下扣款")])),_:1})],64)):(d(),b(s,{key:1,block:"",type:"primary",onClick:K},{default:p((()=>[N("确定")])),_:1}))])])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-5141b5eb"]]);export{M as default};

import{d as e,h as r,i as a,k as t,bR as o,o as d,c as n,u as s,F as i,p as l,w as c,v as u,d4 as p,f as m,_ as h,y,aY as C,bi as f,b3 as I,cD as N,cE as k,cG as g,dG as B}from"./index-a5faea38.js";import{c as $}from"./order-424b0b18.js";const z={class:"operate-wrap"},b=e({name:"operateBtn"});var F=h(e({...b,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:h}){const b=e,F=r(),S=a(),{tenantId:w,nextPageCode:x,isShare:_}=S.query,q=t((()=>"/orderRecordList"===S.path)),T=t((()=>{const{orderTopStatus:e,productClassFlag:r,orderStatus:a}=b.detail;return!("-1"!==e||y.orderList!==S.path||"underWritingFailed"===a&&r===C.YES||["manualUnderWriting","offlinePayment","paymentFailed"].includes(a))})),v=t((()=>{const{showCancelButton:e}=b.detail;return e===C.YES})),D=t((()=>{const{orderStatus:e}=b.detail;return["offlinePayment","manualUnderWriting","paymentFailed"].includes(e)})),P=t((()=>{const{showDeleteButton:e}=b.detail;return e===C.YES})),j=()=>{const{orderStatus:e,orderNo:r,insurerCode:a,underwriteFlag:t,templateId:o,iseeBizNo:d}=b.detail;let n=y.sign;("collectInfo"===e||"underWritingFailed"===e&&t===C.NO)&&(n=y.infoCollection),F.push({path:n,query:{...S.query,tenantId:w,orderNo:r,insurerCode:a,templateId:o,iseeBizNo:d}})},E=()=>{const{orderId:e,orderNo:r}=b.detail||{};F.push({path:"orderTrajectory",query:{...S.query,orderId:e,orderNo:r}})},W=()=>{const{orderNo:e,orderId:r}=b.detail;_?f.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{h("handleCancel")})):$({tenantId:w,orderNo:e,type:1,cancelFlag:1}).then((({code:e,data:r})=>{"10000"===e&&f.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:r,holderGender:a,orderId:t,orderNo:o,insurerCode:d,iseeBizNo:n,templateId:s}=b.detail||{},i=r,l=`${N[a]}士`;k({shareType:0,title:`${g.cancel.title}`,desc:g.cancel.desc.replace("{name}",`${i}${l}`),url:`${window.location.href}&objectType=${e}&insurerCode=${d}&templateId=${s}&isShare=1&orderNo=${o}&iseeBizNo=${n}&orderId=${t}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:B})})("holder")}))}))},Y=()=>{const{orderNo:e,orderId:r}=b.detail;y.orderList!==S.path&&f.confirm({message:"保单取消后不可恢复，是否确认？",confirmButtonText:"是",cancelButtonText:"否"}).then((()=>{$({tenantId:w,orderNo:e,cancelFlag:2}).then((({code:e,data:r})=>{"10000"===e&&F.back()}))}))},G=()=>{const{orderNo:e,orderId:r,insurerCode:a,iseeBizNo:t}=b.detail;F.push({path:y.updateBankInfo,query:{tenantId:w,orderNo:e,orderId:r,insurerCode:a,nextPageCode:"orderDetail",iseeBizNo:t}})};return(e,r)=>{const a=I,t=o;return d(),n("div",z,[s(q)?(d(),l(t,{key:1,label:"",value:"查看订单状态","is-link":"",onClick:p(E,["stop"])},null,8,["onClick"])):(d(),n(i,{key:0},[s(T)?(d(),l(a,{key:0,type:"primary",size:"small",onClick:p(j,["stop"])},{default:c((()=>[u("去处理")])),_:1},8,["onClick"])):m("",!0),s(v)?(d(),l(a,{key:1,type:"primary",plain:"",size:"small",onClick:p(W,["stop"])},{default:c((()=>[u("撤单")])),_:1},8,["onClick"])):m("",!0),s(D)?(d(),l(a,{key:2,plain:"",size:"small",onClick:p(G,["stop"])},{default:c((()=>[u("银行卡修改")])),_:1},8,["onClick"])):m("",!0),s(P)?(d(),l(a,{key:3,plain:"",size:"small",onClick:Y},{default:c((()=>[u("取消订单")])),_:1})):m("",!0)],64))])}}}),[["__scopeId","data-v-d37e8ad4"]]);export{F as O};

import{d as e,o as t,c as a,b as n,w as o,a as s,F as i,n as r,u as l,e as c,a6 as d,l as u,q as m,cc as p,aF as f,a4 as I,a5 as v,h,r as y,i as g,av as P,m as b,ac as _,a0 as j,aw as C,ad as O,f as w,a8 as k,aD as S,aC as x,a9 as L,cb as N,bk as V,aa as E,ae as A}from"./index-2b9d0680.js";import{_ as D}from"./PayInfo-5b23326d.js";import{g as F,i as R}from"./trial-965388ea.js";import{n as T}from"./nextStep-7750099b.js";import{u as U}from"./useAttachment-588b5d0a.js";import{a as q,b as B}from"./product-08531ce5.js";import{g as M}from"./utils-e47be992.js";import{u as W}from"./useOrder-ad5f75e9.js";import{P as Y,B as $}from"./constants-71331306.js";import{P as J}from"./index-179aba3f.js";import{P as G}from"./index-23854e29.js";import{R as z,c as H}from"./trial-564daf23.js";import"./bankCard-06890d2f.js";import"./core-1c9da9f8.js";import"./constant-8927d485.js";import"./infoCollection-0e6a7bcb.js";import"./index-81cc4aef.js";import"./empth-c0adfdba.js";import"./cloneDeep-040d2827.js";import"./lodash-9c569bef.js";import"./index-3cdcbb8c.js";import"./search-afead9f3.js";const K={class:"com-insured-part-wrapper"},Q={class:"content-wrapper"},X={class:"risk-name"},Z=e({__name:"InsureInfo",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup:e=>(I,v)=>{const h=p,y=f;return t(),a("div",K,[n(y,{title:"保障信息"},{default:o((()=>{var o;return[s("div",Q,[(t(!0),a(i,null,r((null==(o=e.productData)?void 0:o.riskList)||[],((e,o)=>{var r;return t(),a("div",{key:o,class:"risk-item"},[e.riskType===l(z).MAIN_RISK?(t(),a(i,{key:0},[s("p",X,c(e.riskName),1),n(h,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),n(h,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])],64)):(t(),a(i,{key:1},[n(h,{title:e.riskName,content:"投保"},null,8,["title"]),e.exemptFlag===l(d).YES?(t(),u(h,{key:0,title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])):(null==(r=e.liabilityList)?void 0:r.length)?(t(),a(i,{key:1},[n(h,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),n(h,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"]),n(h,{title:"交费方式",content:l(H)[e.paymentFrequency]},null,8,["content"])],64)):m("",!0)],64)),n(h,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),n(h,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])})),128)),n(h,{title:"首期总保费",class:"price",content:(e.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])]})),_:1})])}});const ee={class:"long-info-preview"},te={class:"footer-btn"},ae=s("span",null,"分享",-1),ne=e({__name:"infoPreview",setup(e){I((()=>v((()=>import("./index-72c1abb9.js")),["static/js/index-72c1abb9.js","static/css/index-fa4edf2a.css","static/js/index-2b9d0680.js","static/css/index-5e17b29b.css","static/js/theme-94cf7d00.js","static/js/index-23854e29.js","static/css/index-bbfdd7ec.css","static/js/utils-e47be992.js","static/js/infoCollection-0e6a7bcb.js","static/js/trial-564daf23.js"]))),I((()=>v((()=>import("./index-0c44047b.js")),["static/js/index-0c44047b.js","static/css/index-cb73c937.css","static/js/index-2b9d0680.js","static/css/index-5e17b29b.css"])));const i=h(),r=W(),{productCode:c="",tenantId:d,agentCode:p="",agencyCode:f,saleChannelId:z,isShare:H,orderNo:K,extraInfo:Q,insurerCode:X,preview:ne}=i.query;let oe={};try{oe=JSON.parse(decodeURIComponent(Q))}catch(be){}const se=y({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),ie=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,re=g({imgUrl:"",desc:"",title:"",link:ie}),le=g(),ce=g(),de=g({}),ue=g({}),me=g([]),pe=g(),fe=g({});g(!1),g(!1),g(0),g(!0),U(fe,pe),g(!1);const Ie=g(!1),ve=g(),he=()=>{T(r.value,((e,t)=>{t===S.JUMP_PAGE&&ve.value.handleShare()}))},ye=async()=>{ne?x(Y.INFO_PREVIEW,i.query):(Object.assign(r.value,{extInfo:{...r.value.extInfo,buttonCode:$.INFO_PREVIEW,pageCode:Y.INFO_PREVIEW}}),T(r.value,((e,t)=>{t===S.JUMP_PAGE&&L(e.nextPageCode,i.query)})))};y({tenantOrderPayInfoList:[]});const ge=g(),Pe=async()=>{q({productCode:c,tenantId:d}).then((({data:e,code:t})=>{if("10000"===t){de.value=e;const{wxShareConfig:t,showWXShare:a,title:n,desc:o,image:s}=(null==e?void 0:e.PRODUCT_LIST)||{};a?Object.assign(re.value,{...t,imgUrl:t.image,isShare:a}):Object.assign(re.value,{title:n,desc:o,imgUrl:s,isShare:a}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&N(e.BASIC_INFO.themeType)}})),K&&F({orderNo:K,tenantId:d}).then((({code:e,data:t})=>{"10000"===e&&(Object.assign(r.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),ge.value=t,Ie.value=!0)})),B({productCode:c}).then((({code:e,data:t})=>{var a,n,o,s;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=t;pe.value=e||[];const{basicInfo:{questionnaireType:r},questions:l,questionnaireName:c}=(null==(a=null==i?void 0:i[0])?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};r&&(me.value=2===r?[{attachmentName:c,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:c,attachmentUri:null==(n=null==l?void 0:l[0])?void 0:n.content,attachmentType:M(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(s=null==l?void 0:l[0])?void 0:s.content)}])}})),await R({productCode:c,isTenant:!ne}).then((({data:e,code:t})=>{var a,n;if("10000"===t){ue.value=e,fe.value=(null==(a=e.productPlanInsureVOList)?void 0:a[0])||{};const{payInfo:t}=V(null==(n=fe.value)?void 0:n.productFactor);se.payInfo={...se.payInfo,...t}}}))};return P((()=>{Pe()})),(e,i)=>{var c,d,p;const f=E,I=A;return t(),a("div",ee,[n(f),(null==(c=l(fe))?void 0:c.productFactor)?(t(),u(J,{key:0,ref_key:"personalInfoRef",ref:ce,modelValue:l(ge),"onUpdate:modelValue":i[0]||(i[0]=e=>b(ge)?ge.value=e:null),"product-factor":null==(d=l(fe))?void 0:d.productFactor,"multi-insured-config":null==(p=l(fe))?void 0:p.multiInsuredConfigVO,"is-view":""},{riskInfo:o((({insuredIndex:e})=>{var t,a,o;return[n(Z,{"product-data":null==(o=null==(a=null==(t=l(r).insuredList)?void 0:t[`${e}`])?void 0:a.productList)?void 0:o[0],"total-premium":l(r).orderAmount},null,8,["product-data","total-premium"])]})),_:1},8,["modelValue","product-factor","multi-insured-config"])):m("",!0),l(se).payInfo.schema.length?(t(),u(l(D),{key:1,ref_key:"payInfoRef",ref:le,modelValue:l(r).tenantOrderPayInfoList,"onUpdate:modelValue":i[1]||(i[1]=e=>l(r).tenantOrderPayInfoList=e),schema:l(se).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):m("",!0),s("div",te,[!l(H)&&l(re).isShare&&l(_)()?(t(),u(O,j({key:0},l(re),{class:"share-btn",onClick:C(he,["stop"])}),{default:o((()=>[n(I,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ae])),_:1},16,["onClick"])):m("",!0),n(G,{shadow:!1,onClick:ye},{default:o((()=>[w(e.$slots,"default",{},(()=>[k("下一步")]))])),_:3})])])}}});export{ne as default};

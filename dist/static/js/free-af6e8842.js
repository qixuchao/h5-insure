import{h as N,at as O,r as H,N as T,$ as U,m as w,s as F,B as s,C as t,t as _,Z as K,a5 as Y,a6 as q,aa as L,P as M,j as Q,k as W,n as j,p as b,H as k,F as z}from"./vendor-e88cb016.js";import{P as E}from"./index-0da7cb87.js";import{B as J}from"./index-50ab5b1a.js";import{_ as X,f as $}from"./utils-d73aaf58.js";import{a as G,s as Z}from"./phoneVerify-645cbfa0.js";import{_ as x}from"./index-1492183a.js";import{p as ee,g as te}from"./product-f0f08262.js";import{i as oe,t as re,n as ae}from"./trial-4b8a59c8.js";import{u as se}from"./theme-e4a7893d.js";import"./check-detail-60b0cbde.js";import"./infoCollection-10178fb2.js";import"./relativeTime-0177496a.js";import"./useDicData-e57eabd6.js";import"./trial-4e211944.js";var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAYAAAC2Xen2AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVqADAAQAAAABAAAAHgAAAABxFx1vAAABtUlEQVRoBe2ZP06EUBDGv2eWdTtbay9goZ2FlYmVra0a9AbrIfQGuqK9nTeQxE6LvcDWtnSrCDhDsgQR2LcbpuBlSDYM84bv2/ll+JNgsGT79rFHJe+Vsv3hBB+VnMhhX/03RGioKBSs0BAoWAUrREBIVidWwQoREJLViVWwQgSEZHViFawQASFZnVgFK0RASFYnVsEKERCS1YlVsEIEhGR1YoXAmi8fNwYYd6mfAbebE1zbaLrqT0wB+vwR0O7cBoRFzSN9trmwqCtKXPTPbwVehEuT4aXodM2ANVhr1dNd9M/BmmckgwSnBCRcFUqpPmQN1irlrEIX/fNbwaL77ApbcYZXZNhd5Kz2BlPP4NDcIbKqbyhyyf8PWO43O8N2PMAbhTsN/VfTM+8HB+YJn9WFdY5d8c9vBWUADChNcURP9qWguIZru4LK/8MV/39gublRgJlJcUxh26UdcQ3X8jldbi7414JlSMMAU3rKn1A4r4E25zWuqVnrJNV3/0awTMd7QJia/G2h/KRPOMdrnRBsEemzfytY7nl0T++3Bn7RP8V5rkjIBs77xz7G/JPF2KzeN/9fBin2izf9UfQAAAAASUVORK5CYII=";const ne=n=>(Y("data-v-dcd9ca58"),n=n(),q(),n),le={class:"free-crad"},ie={class:"container"},de={class:"title"},ue=["src"],ce=ne(()=>s("span",null,"\u6700\u540E\u4E00\u6B65 \u586B\u5199\u4FE1\u606F",-1)),Ae=["src"],pe=N({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}}},setup(n){const o=n;O(r=>({"06237d6f":o.colors[0],"06237d8e":o.colors[1]}));const h=H(),B=T({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u624B\u673A\u53F7"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u9A8C\u8BC1\u7801"}],2:[],3:[]},isFirst:!0}),I=()=>{var r;B.factorObj=(r=o.insureDetail)==null?void 0:r.productFactor,console.log(o.insureDetail,"detail====")},g=async(r,u)=>{const y=await(o.isFirst?G:Z)(r),{code:C,data:e}=y;console.log(h.value.validateForm(),"slslslw=="),C==="10000"&&(u==null||u())};return U(()=>o.isFirst,()=>{o.isFirst||I()}),(r,u)=>(w(),F("div",le,[s("div",ie,[s("div",de,[s("img",{src:t(R)},null,8,ue),ce,s("img",{src:t(R)},null,8,Ae)]),_(X,{ref_key:"formRef",ref:h,"send-sms-code":g,"form-info":n.detail,"factor-object":t(B).factorObj},null,8,["form-info","factor-object"]),K(r.$slots,"default",{},void 0,!0)])]))}});var fe=x(pe,[["__scopeId","data-v-dcd9ca58"]]);const me={class:"page-free-product-detail"},_e={class:"product-desc"},he=["src"],Be={class:"page-free-footer"},Ie=N({setup(n){O(A=>({"1685a58e":t(e).colors[1]}));const o=se(),h=L(),B=M(),{productCode:I="BWYL2021",openId:g="oKugN52glZx_hhg7liu0WpWcmD5o",tenantId:r="9991000001",indirectCode:u="123",saleUserId:V="",saleChannelId:y=""}=B.query;console.log("-----themeVars",o);let C="";const e=T({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},banner:"",productDesc:[],newAuth:!0,insureDetail:{}}),S=async()=>{const A=ee({productCode:I,withInsureInfo:!0,tenantId:0}),a=oe({productCode:I}),c=te({openId:g});await Promise.all([A,a,c]).then(([l,i,p])=>{var f,m;if(l.code==="10000"){e.detail=l.data,e.banner=(f=e.detail.tenantProductInsureVO)==null?void 0:f.banner[0];const{colorEnd:d,colorStart:D}=e.detail.tenantProductInsureVO.backgroundInsureVO;e.colors=[D,d],e.productDesc=e.detail.tenantProductInsureVO.spec||[],document.title=e.detail.productFullName||""}i.code==="10000"&&(e.insureDetail=i.data,e.insureDetail.productFactor[2]=(m=e.insureDetail.productFactor)==null?void 0:m[2].map(d=>{var D,v;return d.code==="relationToHolder"&&d.isDisplay===1&&(d.title="\u88AB\u4FDD\u4EBA",e.order.tenantOrderInsuredList[0].relationToHolder=((v=(D=d.attributeValueList)==null?void 0:D[0])==null?void 0:v.code)||""),d})),p.code==="10000"&&(e.newAuth=!p.data)})},P=async()=>{var c,l,i,p;const A=e.newAuth?re:ae;let a={loginType:"2",openId:g,thirdUserType:"XINAO_WECHAT",indirectCode:u};e.newAuth?(a.loginName=e.order.tenantOrderHolder.mobile,a.password=e.order.tenantOrderHolder.verificationCode):a=$({order:e.order,tenantId:r,detail:e.detail,insureDetail:e.insureDetail,iseeBizNo:C,saleUserId:V,saleChannelId:y,pageCode:"infoCollection",buttonCode:"EVENT_FREE_multiIssuePolicy"}),console.log("params",a);try{const{code:f,data:m}=await A(a);f==="10000"&&(!e.newAuth&&((l=(c=m.pageAction)==null?void 0:c.data)==null?void 0:l.orderNo)&&h.push(`/baseInsurance/orderDetail?source=free&tenantId=${r}&orderNo=${(p=(i=m.pageAction)==null?void 0:i.data)==null?void 0:p.orderNo}`),e.newAuth=!1)}catch{console.log("e")}};return Q(()=>{S(),setTimeout(async()=>{C=window.getIseeBiz&&await window.getIseeBiz()},1500)}),(A,a)=>{const c=W("van-config-provider");return w(),j(c,{"theme-vars":t(o)},{default:b(()=>[s("div",me,[_(J,{url:t(e).banner},null,8,["url"]),_(fe,{"is-first":t(e).newAuth,"insure-detail":t(e).insureDetail,detail:t(e).order,colors:t(e).colors},{default:b(()=>[_(E,{text:t(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C",onClick:P},null,8,["text"])]),_:1},8,["is-first","insure-detail","detail","colors"]),s("div",_e,[(w(!0),F(z,null,k(t(e).productDesc,(l,i)=>(w(),F("img",{key:i,src:l},null,8,he))),128))]),s("footer",Be,[_(E,{text:t(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C"},null,8,["text"])])])]),_:1},8,["theme-vars"])}}});var xe=x(Ie,[["__scopeId","data-v-8f5c532c"]]);export{xe as default};

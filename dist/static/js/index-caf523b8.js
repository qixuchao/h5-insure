import{d as e,u as n,r as s,A as o,a6 as a,L as i,Z as t,cg as r,b as l,c as u,e as d,w as c,f as p,i as f,h as g,b2 as m,j as v,E as C,a0 as y,$ as w,G as b,W as h,B as k,aH as R,_}from"./index-69623b55.js";import{b as I}from"./product-bc92078a.js";import{u as L}from"./useThread-c502137a.js";const S={key:0,class:"header"},j=["src"],x={key:1,class:"statement up"},U={key:3,class:"statement"},E={class:"footer"},T={key:0},D={class:"review-pdf"},N=e({name:"preNotice"});var O=b(e({...N,props:{productDetail:{default:()=>({})}},setup(e){const b=e,N=n(),{tenantId:O="",productCode:q,preview:A}=N.query,B=s(),G=o({insureConfig:{logoLocation:void 0,logoUrl:"",readingReminder:"",acceptReminder:"",readingSeconds:0,buttonTitle:"我知道了"}}),H=s(!1),P=s(!1),W=new a({source:"sessionStorage"});let Z;const $=s({title:"",link:""}),z=s(),F=i((()=>{if($.value.link){const e=($.value.link||"").split("?"),n=(e[0]||"").substr(e[0].lastIndexOf(".")+1);return console.log("urlList",n),"pdf"===n?"pdf":"picture"}return"link"})),J=()=>{H.value=!1};return t((()=>{!A&&(async()=>{const{code:e,data:n}=await I({insureCode:b.productDetail.insurerCode,productCode:q,tenantId:O});"10000"===e&&(G.insureConfig=n,z.value=G.insureConfig.readingSeconds||0,Z=L({start:()=>{console.log("开始轮询"),z.value-=1},stop:()=>{console.log("结束轮询"),W.set("PRENOTICE-isShow","1")},time:1e3,number:G.insureConfig.readingSeconds||0}),h((()=>{Z.run()}))),H.value=!0})()})),(e,n)=>{var s;const o=k,a=R,i=_,t=r("dompurify-html");return l(),u(w,null,[d(a,{class:"pre-notice-wrap",show:p(H),closeable:!1,height:"auto",style:{"padding-bottom":"30px"}},{default:c((()=>[p(G).insureConfig.logoUrl?(l(),u("div",S,[f("img",{src:p(G).insureConfig.logoUrl},null,8,j)])):g("",!0),1===p(G).insureConfig.logoLocation&&p(G).insureConfig.acceptReminder?m((l(),u("div",x,null,512)),[[t,p(G).insureConfig.acceptReminder]]):g("",!0),p(G).insureConfig.readingReminder?(l(),u("div",{key:2,ref_key:"noticeRef",ref:B,class:"content"},[m(f("div",null,null,512),[[t,p(G).insureConfig.readingReminder]])],512)):g("",!0),2===p(G).insureConfig.logoLocation&&p(G).insureConfig.acceptReminder?m((l(),u("div",U,null,512)),[[t,p(G).insureConfig.acceptReminder]]):g("",!0),f("div",E,[d(o,{type:"primary",block:"",round:"",onClick:J},{default:c((()=>[v(" 好的 "),p(z)?(l(),u("span",T,C(p(z))+"s",1)):g("",!0)])),_:1})])])),_:1},8,["show"]),d(a,{show:p(P),"onUpdate:show":n[0]||(n[0]=e=>y(P)?P.value=e:null),class:"pre-notice-wrap",title:null==(s=p($))?void 0:s.title,position:"bottom",style:{overflow:"hidden"}},{default:c((()=>{var e;return[f("div",D,[d(i,{content:null==(e=p($))?void 0:e.link,type:p(F)},null,8,["content","type"])])]})),_:1},8,["show","title"])],64)}}}),[["__scopeId","data-v-28ab7968"]]);export{O as default};

import{d as e,k as i,r as n,z as r,o,n as l,w as a,g as s,u as t,aN as d,_ as c,l as u,aw as m,aO as p,c as f,b as v,F as y,f as h,s as g,a8 as V,av as O,aG as b,aP as T,i as I,aE as L,T as w,aM as x,aQ as S,a0 as C,a as k,al as j,ao as F,ap as N,aq as _}from"./index-dc5ec44c.js";import{S as B}from"./index-92719e63.js";import{_ as H,a as $}from"./empth-c0adfdba.js";import{c as M}from"./cloneDeep-5d541e55.js";import{d as P}from"./debounce-6981b306.js";import{m as J}from"./merge-e7788e50.js";import{c as E,g as R,r as U,P as q,v as A,a as D,i as K,t as z}from"./index-7d2ccc5b.js";import"./PayInfo-9d519310.js";import{h as Y}from"./trial-7511f230.js";import{B as G}from"./infoCollection-9802e33b.js";import{L as Q}from"./index-249a6b13.js";import{S as W}from"./search-66b52172.js";const X=e({name:"BeneficiaryItem"});var Z=c(e({...X,props:{modelValue:{default:()=>({})},schema:{default:()=>[]},config:{default:()=>({})},isView:{type:Boolean,default:!1},isTrial:{type:Boolean,default:!1},title:{default:"受益人"}},emits:["update:modelValue","trailChange"],setup(e,{expose:c,emit:u}){const m=e,p=i(null),f=n({validated:!1,schema:[],config:{},personVO:{}});return r((()=>m.config),(e=>{e&&Object.assign(f.config,e)}),{deep:!0,immediate:!0}),r((()=>m.schema),(e=>{e&&Object.assign(f.schema,M(m.schema))}),{deep:!0,immediate:!0}),r((()=>m.modelValue),((e,i)=>{JSON.stringify(e)!==JSON.stringify(i)&&(E("受益人数据变动了"),Object.assign(f.personVO,e))}),{deep:!0,immediate:!0}),r((()=>f.personVO),(e=>{e&&u("update:modelValue",e)}),{deep:!0,immediate:!0}),r((()=>{var e;return null==(e=f.personVO)?void 0:e.relationToInsured}),((e,i)=>{if(e===i)return!1;E("受益人与被保人关系变动了");const{certType:n}=f.personVO||{},[r,o]=R(f.schema,{certType:n,relationToHolder:e});return J(f.config,o),!m.isView&&e&&i&&Object.assign(f.personVO,{...U(f.personVO,(e=>!(r&&"certType"===e))),relationToInsured:e}),!1}),{immediate:!0}),c({validate:e=>D(p,m.trialFactorCodes,e),validateTrialFields:()=>A({personVO:f.personVO,trialFactorCodes:m.trialFactorCodes})}),(e,i)=>(o(),l(t(q),{ref_key:"formRef",ref:p,class:"personal-info-card",title:e.title,model:t(f).personVO,schema:t(f).schema,config:t(f).config,"is-view":e.isView,"extra-provision":{objectType:t(d).BENEFICIARY,objectId:t(f).personVO.id}},{cardTitleExtra:a((()=>[s(e.$slots,"default",{},void 0,!0)])),customer:a((()=>[s(e.$slots,"customer",{},void 0,!0)])),_:3},8,["title","model","schema","config","is-view","extra-provision"]))}}),[["__scopeId","data-v-844ffeca"]]);const ee=["onClick"],ie=e({name:"InsuredItem"});var ne=c(e({...ie,props:{modelValue:{default:()=>({})},title:{default:""},holderPersonVO:{},schema:{default:()=>[]},config:{default:()=>({})},isView:{type:Boolean,default:!1},isTrial:{type:Boolean,default:!1},trialFactorCodes:{default:()=>[]},multiBeneficiaryMaxNum:{default:null},beneficiaryList:{default:()=>[]},beneficiarySchema:{default:()=>[]}},emits:["update:modelValue","update:beneficiaryList"],setup(e,{expose:c,emit:I}){const L=e,w=i(null),x=i(null),S=i(null),C={schema:[],trialFactorCodes:[],config:{},personVO:{}},k=n({validated:!1,schema:[],config:{},personVO:{},beneficiaryTypeSchemaList:[],beneficiarySchemaList:[],beneficiaryList:[]}),j=()=>{k.beneficiaryList.push(M({...C,nanoid:p(),schema:L.beneficiarySchema}))},F=u((()=>!L.multiBeneficiaryMaxNum||k.beneficiaryList.length<L.multiBeneficiaryMaxNum)),N=u((()=>!k.schema.filter((e=>{var i;return!(e.hidden||(null==(i=k.config[e.name])?void 0:i.hidden))})).length)),_=u((()=>k.schema.filter((e=>e.isSelfInsuredNeed)).map((e=>e.name)))),B=u((()=>m(L.beneficiarySchema))),H=u((()=>{var e;return String(null==(e=k.personVO)?void 0:e.insuredBeneficiaryType)===G.SPECIFY}));return r((()=>L.holderPersonVO),(e=>{var i;E("------投保人信息变动了-----");const{id:n,...r}=e||{};if("1"===String(null==(i=k.personVO)?void 0:i.relationToHolder)){const e=m(_.value)?Object.keys(r).reduce(((e,i)=>([..._.value,"occupationClass"].includes(i)&&!["birthday","age","gender"].includes(i)||(e[i]=r[i]),e)),{}):r;Object.assign(k.personVO,e)}}),{deep:!0,immediate:!0}),r((()=>L.beneficiarySchema),(e=>{k.beneficiarySchemaList=m(e)?e.filter((e=>"insuredBeneficiaryType"!==e.name)):[],k.beneficiaryTypeSchemaList=m(e)?e.filter((e=>"insuredBeneficiaryType"===e.name)):[]}),{deep:!0,immediate:!0}),r(H,((e,i)=>{String(e)!==String(i)&&(E("受益人类型关系变动了"),e?!m(k.beneficiaryList)&&j():k.beneficiaryList=[])}),{immediate:!0}),r((()=>M(k.beneficiaryList).map((e=>({personVO:e.personVO,nanoid:e.nanoid})))),((e,i)=>{JSON.stringify(e)!==JSON.stringify(i)&&I("update:beneficiaryList",e)}),{deep:!0,immediate:!0}),r((()=>{var e;return null==(e=k.personVO)?void 0:e.relationToHolder}),((e,i)=>{if(!e)return;E("与投保人关系变动了");const{personVO:n,schema:r=[],config:o}=k||{},{id:l,...a}=L.holderPersonVO||{},s="1"===String(n.relationToHolder),[t,d]=R(r,n);if(J(o,d),r.forEach((e=>{e.relationToHolder=n.relationToHolder,e.hidden=!e.isSelfInsuredNeed&&s})),!L.isView&&i&&String(e)!==String(i)){let e={...n,...a};s||(e={...U(n,(e=>!(t&&"certType"===e))),relationToHolder:n.relationToHolder}),Object.assign(k.personVO,e)}}),{deep:!0}),r((()=>{var e;return null==(e=k.personVO)?void 0:e.relationToMainInsured}),((e,i)=>{if(!e)return;E("次被保人与主被保人关系变动了");const{personVO:n,schema:r=[],config:o}=k||{},{certType:l}=n||{},[a,s]=R(r,{certType:l,relationToHolder:e});J(o,s),!L.isView&&i&&String(e)!==String(i)&&Object.assign(k.personVO,{...U(n,(e=>!(a&&"certType"===e))),relationToMainInsured:n.relationToMainInsured})})),r((()=>L.config),(e=>{e&&Object.assign(k.config,e)}),{deep:!0,immediate:!0}),r((()=>L.schema),((e,i)=>{e&&JSON.stringify(e)!==JSON.stringify(i)&&Object.assign(k.schema,M(e))}),{deep:!0,immediate:!0}),r((()=>L.modelValue),((e,i)=>{if(JSON.stringify(e)!==JSON.stringify(i)){const{beneficiaryList:i,...n}=e;J(k.personVO,n)}}),{deep:!0,immediate:!0}),r((()=>M(L.beneficiaryList)),((e,i)=>{JSON.stringify(e)!==JSON.stringify(i)&&(k.beneficiaryList=m(e)?e.map((e=>({...e,nanoid:e.nanoid||p()}))):[])}),{deep:!0,immediate:!0}),r((()=>k.personVO),(e=>{e&&I("update:modelValue",e)}),{deep:!0,immediate:!0}),c({validate:e=>{var i;return Promise.all([D(w,L.trialFactorCodes,e),D(x,[],e),...(null==(i=S.value)?void 0:i.map((i=>i.validate(e))))||[]])},validateTrialFields:()=>A({personVO:k.personVO,trialFactorCodes:L.trialFactorCodes})}),(e,i)=>{const n=b,r=T;return o(),f(y,null,[v(t(q),{ref_key:"insuredFormRef",ref:w,class:"personal-info-card",title:t(N)?"":e.title,model:t(k).personVO,schema:t(k).schema,config:t(k).config,"is-view":e.isView,"extra-provision":{objectType:t(d).INSURED,objectId:t(k).personVO.id}},{cardTitleExtra:a((()=>[s(e.$slots,"default",{},void 0,!0)])),customer:a((()=>[s(e.$slots,"customer",{},void 0,!0)])),_:3},8,["title","model","schema","config","is-view","extra-provision"]),t(B)?(o(),f(y,{key:0},[v(t(q),{ref_key:"beneficiaryTypeFormRef",ref:x,class:"personal-info-card",title:"受益人",model:t(k).personVO,schema:t(k).beneficiaryTypeSchemaList,"is-view":e.isView},null,8,["model","schema","is-view"]),t(H)?(o(),f(y,{key:0},[(o(!0),f(y,null,h(t(k).beneficiaryList,((i,r)=>(o(),l(Z,{ref_for:!0,ref_key:"beneficiaryFormRef",ref:S,key:`${i.nanoid}_${r}`,modelValue:i.personVO,"onUpdate:modelValue":e=>i.personVO=e,title:`受益人${r+1}`,schema:t(k).beneficiarySchemaList,config:i.config,"is-view":e.isView},{customer:a((()=>[s(e.$slots,"benefitCustomer",{index:r},void 0,!0)])),default:a((()=>[r>0&&!e.isView?(o(),f("span",{key:0,class:"delete-button",onClick:e=>(e=>{O.confirm({message:"确定要删除该受益人吗？"}).then((()=>{k.beneficiaryList.splice(e,1)}))})(r)},[v(n,{name:"delete"})],8,ee)):g("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue","title","schema","config","is-view"])))),128)),!e.isView&&t(F)?(o(),f("span",{key:0,class:"add-button",onClick:j},[v(r,{name:"plus"}),V("添加受益人")])):g("",!0)],64)):g("",!0)],64)):g("",!0),s(e.$slots,"riskList",{},void 0,!0)],64)}}}),[["__scopeId","data-v-608c924a"]]);const re=e=>(N("data-v-1f25c3a8"),e=e(),_(),e),oe=[re((()=>k("img",{src:H},null,-1)))],le=["onClick"],ae=[re((()=>k("img",{src:H},null,-1)))],se=["onClick"],te=[re((()=>k("img",{src:H},null,-1)))],de=["onClick"],ce={class:"search-bar"},ue=["src"],me={key:1,class:"empth"},pe=[re((()=>k("p",null,[k("img",{src:$,class:"ig"})],-1))),re((()=>k("p",{class:"p1"},"暂时还没有客户哦～",-1)))],fe=e({name:"PersonalInfo"});var ve=c(e({...fe,props:{productFactor:{default:()=>({})},modelValue:{default:()=>({})},isTrial:{type:Boolean,default:!1},isView:{type:Boolean,default:!1},isOnlyHolder:{type:Boolean,default:!1},multiInsuredConfig:{}},emits:["update:modelValue","trailChange","trailValidateFailed","closeCustomerPopoup"],setup(e,{expose:c,emit:N}){const _=e,H=I(),$=L(),{isShare:U,saleChannelId:G}=H.query,X=i(null),Z=i(null),ee=n({count:0,slotProps:{},uniqKey:"",currentIndex:0,currentBenifitIndex:0,currentType:"",keyword:void 0,show:!1,list:[],config:{},trialValidated:!1,holder:{personVO:{},schema:[],trialFactorCodes:[],config:{}},beneficiarySchema:[],initInsuredIList:[],insured:[]}),ie=async e=>{var i,n;ee.keyword;const r={pageNum:1,pageSize:999,queryBean:{keyword:ee.keyword||""}},o=await Y(r),l=[];Object.keys((null==(i=null==o?void 0:o.data)?void 0:i.customerMaps)||{}).forEach((e=>{var i;l.push({label:e,children:null==(i=null==o?void 0:o.data)?void 0:i.customerMaps[e]})})),ee.list=l,ee.count=null==(n=null==o?void 0:o.data)?void 0:n.count},re=()=>{ie(ee.keyword)},fe=()=>{ie()},ve=u((()=>!_.isTrial||_.isOnlyHolder)),ye=(e,i,n)=>{ee.currentType=e,"benifit"!==e?ee.currentIndex=i:(ee.currentIndex=i,ee.currentBenifitIndex=n),ee.uniqKey=p(),ie(),ee.show=!0},he=()=>{setTimeout((()=>{ee.show=!1}),300)},ge=()=>"holder"===ee.currentType?ee.holder.schema.map((e=>e.name))||[]:"insured"===ee.currentType?ee.insured[ee.currentIndex].schema.map((e=>e.name))||[]:"benifit"===ee.currentType?ee.beneficiarySchema.map((e=>e.name))||[]:void 0,Ve=u((()=>{var e,i;return null==(i=null==(e=null==ee?void 0:ee.holder)?void 0:e.personVO)?void 0:i.name})),Oe=u((()=>{var e,i;return null==(i=null==(e=null==ee?void 0:ee.holder)?void 0:e.personVO)?void 0:i.gender})),be=u((()=>{var e,i;return null==(i=null==(e=null==ee?void 0:ee.holder)?void 0:e.personVO)?void 0:i.birthday})),Te=u((()=>{var e,i;return null==(i=null==(e=null==ee?void 0:ee.holder)?void 0:e.personVO)?void 0:i.certType})),Ie=u((()=>{var e,i;return null==(i=null==(e=null==ee?void 0:ee.holder)?void 0:e.personVO)?void 0:i.certNo})),Le=(e,i)=>{var n,r,o,l,a;console.log("convertCustomerData",e);const s=null==(n=null==e?void 0:e.contactInfo)?void 0:n.find((e=>"01"===e.contactType)),t=null==(r=null==e?void 0:e.contactInfo)?void 0:r.find((e=>"02"===e.contactType)),d=null==e?void 0:e.certInfo.filter((e=>"1"===e.certType)),c={name:null==e?void 0:e.name,gender:null==e?void 0:e.gender,birthday:null==e?void 0:e.birthday,mobile:(null==s?void 0:s.contactNo)||null,email:(null==t?void 0:t.contactNo)||null,certNo:(null==(o=null==d?void 0:d[0])?void 0:o.certNo)||null,certType:(null==(l=null==d?void 0:d[0])?void 0:l.certType)||null};console.log("insureKeys",ge());const u=null==(a=ge())?void 0:a.reduce(((e,i)=>c.hasOwnProperty(i)?{...e,[i]:c[i]}:e),{});return console.log("extractedObject===",u),console.log("state.holder.schema=====",ee.holder.schema),u},we=e=>{var i,n,r,o,l,a,s,t,d,c,u;if(ee.show=!1,"holder"===ee.currentType&&Object.assign((null==(i=null==ee?void 0:ee.holder)?void 0:i.personVO)||{},Le(e)),"insured"===ee.currentType){const i=null==(n=null==ee?void 0:ee.insured[ee.currentIndex])?void 0:n.schema.some((e=>"relationToHolder"===e.name&&e.attributeValueList.some((e=>"1"===e.code)))),{name:l,gender:a,birthday:s,certType:t,certNo:d}=Le(e);if(Ve.value===l&&Oe.value===a&&be.value===s&&Te.value===t&&Ie.value===d)return i?void Object.assign((null==(r=null==ee?void 0:ee.insured[ee.currentIndex])?void 0:r.personVO)||{},{relationToHolder:"1"}):void w("与投保人关系未配置本人");Object.assign((null==(o=null==ee?void 0:ee.insured[ee.currentIndex])?void 0:o.personVO)||{},Le(e))}if("benifit"===ee.currentType){const{name:i,gender:n,birthday:r,certType:o,certNo:m}=Le(e);(null==(l=null==ee?void 0:ee.insured[ee.currentIndex])?void 0:l.personVO.name)===i&&(null==(a=null==ee?void 0:ee.insured[ee.currentIndex])?void 0:a.personVO.gender)===n&&(null==(s=null==ee?void 0:ee.insured[ee.currentIndex])?void 0:s.personVO.birthday)===r&&(null==(t=null==ee?void 0:ee.insured[ee.currentIndex])?void 0:t.personVO.certType)===o&&(null==(d=null==ee?void 0:ee.insured[ee.currentIndex])?void 0:d.personVO.certNo)===m?w("指定受益人不可为被保人本人"):Object.assign((null==(u=null==(c=null==ee?void 0:ee.insured[ee.currentIndex])?void 0:c.beneficiaryList[ee.currentBenifitIndex])?void 0:u.personVO)||{},Le(e))}},xe=()=>{var e;const i=!Z.value||(null==(e=Z.value)?void 0:e.every((e=>e.validateTrialFields())));return(!X.value||A(ee.holder))&&i},Se=e=>{var i;return Promise.all([...(null==(i=Z.value)?void 0:i.map((i=>i.validate(e))))||[],D(X,ee.holder.trialFactorCodes,e)])},Ce=e=>{const{productList:i,config:n,schema:r,trialFactorCodes:o,beneficiaryList:l,personVO:a,nanoid:s,...t}=e||{};return t},ke=()=>{const{length:e,[e-1]:i}=ee.initInsuredIList;ee.insured.push(M({...i,nanoid:p()}))},je=u((()=>{const{multiInsuredMaxNum:e,multiInsuredSupportFlag:i}=ee.config;return i&&(!e||ee.insured.length<e)})),Fe=u((()=>m(ee.holder.schema))),Ne=u((()=>ee.insured.some((e=>m(e.schema))))),_e=(e,i)=>m(e)?e.reduce(((e,n)=>(e[n]=i[n],e)),{}):{},Be=(e,i,n={})=>!!m(e)&&JSON.stringify(_e(e,i))!==JSON.stringify(_e(e,n));return r((()=>{var e;return null==(e=ee.holder.personVO)?void 0:e.certType}),P(((e,i)=>{if(`${e}`==`${i}`)return!1;E("投保人信息变动了====");const[n,r]=R(ee.holder.schema,{certType:e});return J(ee.holder.config,r),!1}),300)),r([()=>{var e;return{...null==(e=ee.holder)?void 0:e.personVO}},()=>ee.insured.map((e=>{const{beneficiaryList:i,personVO:n}=e||{};return{...n,beneficiaryList:m(i)?i.map((e=>({...e.personVO}))):[]}}))],P(((e,i)=>{var n,r,o,l;const[a,s]=e,t=((e,i)=>{const n=Be(ee.holder.trialFactorCodes,null==e?void 0:e[0],null==i?void 0:i[0]),r=ee.insured.some(((e,n)=>{var r;const{trialFactorCodes:o,personVO:l}=e;return Be(o,l,null==(r=i[1])?void 0:r[n])}));return n||r})([a,s],i);E(`投被保人信息变动了---${t}`);const{insuredList:d}=_.modelValue,c={holder:a,insuredList:s.map(((e,i)=>({...(null==d?void 0:d[i])||{},...e})))};if(null==(n=ee.config)?void 0:n.isSpouseInsured){const[e,i]=s.map((e=>null==e?void 0:e.gender));if(e&&i&&String(e)===String(i))return w("被保人性别与投保要求不符")}if(JSON.stringify(null==(r=null==s?void 0:s[0])?void 0:r.personVO),Ce(null==(l=null==(o=_.modelValue)?void 0:o.insuredList)?void 0:l[0]),console.log("-------result = ",c),N("update:modelValue",c),!xe())return ee.trialValidated=!1,N("trailValidateFailed",c);Se(!0).then((()=>{ee.trialValidated=!0,t&&!_.isOnlyHolder&&N("trailChange",c)})).catch((()=>{ee.trialValidated=!1,N("trailValidateFailed",c)}))}),500),{deep:!0}),r([()=>_.productFactor,()=>_.isTrial],P(((e,i)=>{if(K(e,i)||!(null==e?void 0:e[0]))return!1;E("投被保人要素变动了");const{insuredFactorCodes:n,holderFactorCodes:r}=x(S)||{},{holder:o,insured:l,beneficiary:a,config:s}=z(e[0],{isTrial:e[1],..._.multiInsuredConfig,insuredFactorCodes:n,holderFactorCodes:r});return Object.assign(ee.holder,o),ee.config=s,m(l)&&(ee.initInsuredIList=l.map((e=>({...e,beneficiaryList:[]})))),ee.beneficiarySchema=M((null==a?void 0:a.schema)||[]),!1}),300),{deep:!0,immediate:!0}),r((()=>{var e,i,n,r;return null==(r=null==(n=null==(i=null==(e=null==ee?void 0:ee.insured)?void 0:e[ee.currentIndex])?void 0:i.beneficiaryList)?void 0:n[ee.currentBenifitIndex])?void 0:r.personVO}),((e,i)=>{var n,r,o,l;(null==(l=null==(o=null==(r=null==(n=null==ee?void 0:ee.insured)?void 0:n[ee.currentIndex])?void 0:r.beneficiaryList)?void 0:o[ee.currentBenifitIndex])?void 0:l.personVO)&&(null==e?void 0:e.relationToInsured)!==(null==i?void 0:i.relationToInsured)&&(E("受益人关系变动了+++++"),ee.insured[ee.currentIndex].beneficiaryList[ee.currentBenifitIndex].personVO={relationToInsured:null==e?void 0:e.relationToInsured})}),{deep:!0,immediate:!0}),r([()=>{const{holder:e,insuredList:i=[]}=_.modelValue;console.log("表单数据",M(e));const n=m(i)?i.map((e=>({config:e.config,personVO:Ce(e),beneficiaryList:m(e.beneficiaryList)?e.beneficiaryList.map((({config:e,...i})=>({config:e,personVO:Ce(i)}))):[]}))):[];return[null==e?void 0:e.config,Ce(e),n]},()=>ee.config,()=>ee.initInsuredIList],P((([[e,i,n]])=>{E("投被保人数据变动了"),Object.assign(ee.holder.config,e),console.log("投保人数据===",M(ee.holder.personVO),M(i)),console.log("投保人数据===",M(ee.holder.personVO),M(i)),Object.assign(ee.holder.personVO,i);const{length:r}=n||[],{length:o}=ee.insured,{length:l,0:a={},[l-1]:s}=ee.initInsuredIList,{multiInsuredMaxNum:t=1,multiInsuredMinNum:d=1,multiInsuredSupportFlag:c}=(null==ee?void 0:ee.config)||{},u=_.isView||r>o?Math.min(r,t):o||d;ee.insured=Array.from({length:u}).reduce(((e,i,r)=>{const{personVO:o,config:l={},beneficiaryList:t}=(null==n?void 0:n[r])||{},d=M(0===r?a:s);return e[r]?J(e[r],{...M(d),personVO:o,config:l,beneficiaryList:t}):e[r]={...d,personVO:o,config:l,beneficiaryList:t,nanoid:p()},e}),ee.insured)}),500),{deep:!0,immediate:!0}),r((()=>ee.list),((e,i)=>{e&&(ee.list=e)})),c({validate:Se,validateTrialFields:xe,validateHolder:(...e)=>{var i;return null==(i=X.value)?void 0:i.validate(...e)},canTrail:()=>ee.trialValidated}),(e,i)=>{const n=b,r=T,c=j,u=B,m=F;return o(),f(y,null,[t(Fe)&&t(ve)?(o(),l(t(q),{key:0,ref_key:"holderFormRef",ref:X,title:"投保人信息",class:"personal-info-card",model:t(ee).holder.personVO,schema:t(ee).holder.schema,config:t(ee).holder.config,"is-view":e.isView,"extra-provision":{objectType:t(d).HOLDER,objectId:t(ee).holder.personVO.id}},{customer:a((()=>[(o(),f("div",{key:0,class:"choose-customer",onClick:i[0]||(i[0]=e=>ye("holder",1,0))},oe))])),_:1},8,["model","schema","config","is-view","extra-provision"])):g("",!0),t(Ne)&&!e.isOnlyHolder?(o(),f(y,{key:1},[(o(!0),f(y,null,h(t(ee).insured,((i,r)=>{var d;return o(),l(ne,C({ref_for:!0,ref_key:"insuredFormRef",ref:Z,key:`${i.nanoid}_${r}`,modelValue:i.personVO,"onUpdate:modelValue":e=>i.personVO=e,"beneficiary-list":i.beneficiaryList,"onUpdate:beneficiaryList":e=>i.beneficiaryList=e,title:""+(t(ee).insured.length>1?`被保人${r+1}`:"被保人信息"),"holder-person-v-o":t(ee).holder.personVO},i,{"beneficiary-schema":t(ee).beneficiarySchema,"is-view":e.isView,"multi-beneficiary-num":null==(d=t(ee).config)?void 0:d.multiBeneficiaryMaxNum}),{riskList:a((()=>[s(e.$slots,"riskInfo",{insuredIndex:r},void 0,!0)])),customer:a((()=>[1==+i.personVO.relationToHolder||t(U)||e.isView||e.isTrial||t($)?g("",!0):(o(),f("div",{key:0,class:"choose-customer",onClick:e=>ye("insured",r,0)},ae,8,le))])),benefitCustomer:a((i=>[t(U)||e.isView||e.isTrial||t($)?g("",!0):(o(),f("div",{key:0,class:"choose-customer",onClick:e=>ye("benifit",r,null==i?void 0:i.index)},te,8,se))])),default:a((()=>[!e.isView&&r+1>t(ee).config.multiInsuredMinNum?(o(),f("span",{key:0,class:"delete-button",onClick:e=>(e=>{O.confirm({message:"确定要删除该被保人吗？"}).then((()=>{ee.insured.splice(e,1)}))})(r)},[v(n,{name:"delete",color:"var(--van-primary-color)"})],8,de)):g("",!0)])),_:2},1040,["modelValue","onUpdate:modelValue","beneficiary-list","onUpdate:beneficiaryList","title","holder-person-v-o","beneficiary-schema","is-view","multi-beneficiary-num"])})),128)),!e.isView&&t(je)?(o(),l(c,{key:0,class:"add-button-wrap"},{title:a((()=>[k("span",{class:"add-button",onClick:ke},[v(r,{name:"plus"}),V("添加被保人")])])),_:1})):g("",!0)],64)):g("",!0),t(ee).show?(o(),l(m,{key:2,round:!1,show:t(ee).show,closeable:!1,onClose:he,onClosed:e.onClosePopupAfterAni},{default:a((()=>[k("div",ce,[v(u,{modelValue:t(ee).keyword,"onUpdate:modelValue":i[1]||(i[1]=e=>t(ee).keyword=e),placeholder:"客户 姓名/手机号",class:"icon-sercher",onSearch:re,onCancel:fe},{"left-icon":a((()=>[k("img",{src:t(W),alt:"",class:"search-icon-img",style:{width:"22px",height:"23px"}},null,8,ue)])),_:1},8,["modelValue"])]),t(ee).count?(o(),l(Q,{key:0,data:t(ee).list,type:e.order,disabled:!1,onOnClose:we},null,8,["data","type"])):(o(),f("div",me,pe))])),_:1},8,["show","onClosed"])):g("",!0)],64)}}}),[["__scopeId","data-v-1f25c3a8"]]);export{ve as P};

var z=Object.defineProperty,W=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var P=(a,e,t)=>e in a?z(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,y=(a,e)=>{for(var t in e||(e={}))Q.call(e,t)&&P(a,t,e[t]);if(L)for(var t of L(e))X.call(e,t)&&P(a,t,e[t]);return a},V=(a,e)=>W(a,G(e));import{g as T,j as U,n as N,z as D,J as E,O as Z,E as c,h as ee,r as O,A as k,p as m,m as b,C as te,T as ae}from"./vendor-667a94d7.js";import{_ as A}from"./index-d0831898.js";import{i as oe,a as ne,s as se,e as re,E as ue}from"./trial-c8488e9f.js";import{p as le}from"./product-44aa0e08.js";import{S as ie}from"./infoCollection-242da9b6.js";import{g as de,l as ce,a as me,t as pe,c as _e,d as q}from"./utils-3fe1f311.js";import"./trial-32d87b01.js";const ve={class:"com-field-info"},fe={class:"title"},Ie={class:"desc"},De=T({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(a){return(e,t)=>(U(),N("div",ve,[D("div",fe,E(a.title),1),D("div",Ie,E(a.desc),1)]))}});var C=A(De,[["__scopeId","data-v-35c1ec17"]]);const ge={class:"page-activity-upgrade"},he=["src"],xe={class:"container"},ye={class:"main-form"},Oe=T({setup(a){const e=Z(),{productCode:t="BWYL2022",tenantId:p,orderId:M,extInfo:$}=e.query,F=de($),{phoneNo:Ce,saleChannelId:R,paymentMethod:Ee,certNo:Fe,name:Se}=F,d=c(),g=c(),s=c(),_=c(),h=c(),x=c(),j=async()=>{var i,r,v,f,I;const u=me({tenantId:p,saleChannelId:R,orderStatus:"",orderTopStatus:"",detail:d.value,paymentMethod:(r=(i=s.value.extInfo)==null?void 0:i.extraInfo)==null?void 0:r.paymentMethod,renewalDK:(f=(v=s.value.extInfo)==null?void 0:v.extraInfo)==null?void 0:f.renewalDK,successJumpUrl:"",premium:_.value,holder:s.value.tenantOrderHolder,insured:V(y({},s.value.tenantOrderInsuredList[0]),{socialFlag:s.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:pe({tenantId:p,riskList:_e(g.value.productRiskVoList[0].riskDetailVOList,d.value),riskPremium:{},productId:(I=d.value)==null?void 0:I.id})}),o=await se(u),{code:l,data:n}=o;return l==="10000"?n.data:""},S=async()=>{const u=q({tenantId:p,premium:_.value,orderDetail:s.value,productDetail:d.value,insureDetail:g.value}),o=await re(u),{code:l,data:n}=o;l==="10000"&&(_.value=n.installmentPremium,x.value=n.signUrl)},H=async u=>{const o=q({tenantId:p,premium:_.value,orderDetail:s.value,productDetail:d.value,insureDetail:g.value}),l=await ue(y({id:u},o)),{code:n,data:i}=l;n==="10000"&&ae("\u4FDD\u969C\u5347\u7EA7\u6210\u529F")},J=async u=>{await S();const o=await j();x.value?window.location.href=x.value:H(o)},K=()=>{const u=le({productCode:t,withInsureInfo:!0}),o=oe({productCode:t}),l=ne({id:M||F.orderId,tenantId:p});Promise.all([u,o,l]).then(([n,i,r])=>{console.log(n,i,r),n.code==="10000"&&(d.value=n.data),i.code==="10000"&&(g.value=i.data),r.code==="10000"&&(s.value=r.data,h.value=r.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),S()})};return ee(()=>{K()}),(u,o)=>{var r,v,f,I,w,B;const l=O("ProRadioButton"),n=O("ProField"),i=O("VanButton");return U(),N("div",ge,[D("img",{class:"logo",src:k(ce)},null,8,he),D("div",xe,[D("div",ye,[m(C,{title:"\u59D3\u540D",desc:(v=(r=s.value)==null?void 0:r.tenantOrderInsuredList)==null?void 0:v[0].name},null,8,["desc"]),m(C,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(I=(f=s.value)==null?void 0:f.tenantOrderInsuredList)==null?void 0:I[0].certNo},null,8,["desc"]),m(C,{title:"\u624B\u673A\u53F7\u7801",desc:(B=(w=s.value)==null?void 0:w.tenantOrderHolder)==null?void 0:B.mobile},null,8,["desc"]),m(n,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:b(()=>[m(l,{modelValue:h.value,"onUpdate:modelValue":o[0]||(o[0]=Y=>h.value=Y),disabled:!0,options:k(ie)},null,8,["modelValue","options"])]),_:1}),m(i,{class:"upgrade-btn",type:"primary",block:!0,onClick:J},{default:b(()=>[te("\u5347\u7EA7\u4FDD\u969C("+E(_.value)+")",1)]),_:1})])])])}}});var Te=A(Oe,[["__scopeId","data-v-a2b7cae4"]]);export{Te as default};

var Y=Object.defineProperty,z=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var L=(o,e,t)=>e in o?Y(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,y=(o,e)=>{for(var t in e||(e={}))G.call(e,t)&&L(o,t,e[t]);if(F)for(var t of F(e))Q.call(e,t)&&L(o,t,e[t]);return o},P=(o,e)=>z(o,W(e));import{g as U,j as V,n as T,z as m,J as k,O as X,E as c,h as Z,r as B,A as q,p as I,m as ee,T as O}from"./vendor-667a94d7.js";import{_ as A}from"./index-a0b73b03.js";import{i as te,a as ae,s as oe,e as se,E as ne}from"./trial-67fe491f.js";import{p as re}from"./product-6a3bb421.js";import{S as le}from"./infoCollection-242da9b6.js";import{g as ie,l as ue,a as de,t as ce,c as me,d as b}from"./utils-69a1d834.js";import"./trial-c49ed419.js";const pe={class:"com-field-info"},ve={class:"title"},_e={class:"desc"},fe=U({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(o){return(e,t)=>(V(),T("div",pe,[m("div",ve,k(o.title),1),m("div",_e,k(o.desc),1)]))}});var C=A(fe,[["__scopeId","data-v-34962902"]]);const Ie={class:"page-activity-upgrade"},De=["src"],ge={class:"container"},he={class:"main-form"},xe=U({setup(o){const e=X(),{productCode:t="BWYL2022",tenantId:p,orderId:N,extInfo:M}=e.query,E=ie(M),{phoneNo:ye,saleChannelId:$,paymentMethod:Oe,certNo:Ce,name:Ee}=E,d=c(),D=c(),n=c(),g=c(),h=c(),x=c(),R=async()=>{var r,l,v,_,f;const i=de({tenantId:p,saleChannelId:$,orderStatus:"",orderTopStatus:"",detail:d.value,paymentMethod:(l=(r=n.value.extInfo)==null?void 0:r.extraInfo)==null?void 0:l.paymentMethod,renewalDK:(_=(v=n.value.extInfo)==null?void 0:v.extraInfo)==null?void 0:_.renewalDK,successJumpUrl:"",premium:g.value,holder:n.value.tenantOrderHolder,insured:P(y({},n.value.tenantOrderInsuredList[0]),{socialFlag:n.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:ce({tenantId:p,riskList:me(D.value.productRiskVoList[0].riskDetailVOList,d.value),riskPremium:{},productId:(f=d.value)==null?void 0:f.id})}),a=await oe(i),{code:u,data:s}=a;return u==="10000"?s.data:""},S=async()=>{const i=b({tenantId:p,premium:g.value,orderDetail:n.value,productDetail:d.value,insureDetail:D.value}),a=await se(i),{code:u,data:s}=a;u==="10000"&&(g.value=s.installmentPremium,x.value=s.signUrl)},j=async i=>{const a=b({tenantId:p,premium:g.value,orderDetail:n.value,productDetail:d.value,insureDetail:D.value}),u=await ne(y({id:i},a)),{code:s,data:r}=u;s==="10000"&&O("\u4FDD\u969C\u5347\u7EA7\u6210\u529F")},H=async i=>{try{O.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"}),await S();const a=await R();x.value?window.location.href=x.value:j(a)}catch(a){console.log(a),O.clear()}},J=()=>{const i=re({productCode:t,withInsureInfo:!0}),a=te({productCode:t}),u=ae({id:N||E.orderId,tenantId:p});Promise.all([i,a,u]).then(([s,r,l])=>{console.log(s,r,l),s.code==="10000"&&(d.value=s.data),r.code==="10000"&&(D.value=r.data),l.code==="10000"&&(n.value=l.data,h.value=l.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),S()})};return Z(()=>{J()}),(i,a)=>{var r,l,v,_,f,w;const u=B("ProRadioButton"),s=B("ProField");return V(),T("div",Ie,[m("img",{class:"logo",src:q(ue)},null,8,De),m("div",ge,[m("div",he,[I(C,{title:"\u59D3\u540D",desc:(l=(r=n.value)==null?void 0:r.tenantOrderInsuredList)==null?void 0:l[0].name},null,8,["desc"]),I(C,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(_=(v=n.value)==null?void 0:v.tenantOrderInsuredList)==null?void 0:_[0].certNo},null,8,["desc"]),I(C,{title:"\u624B\u673A\u53F7\u7801",desc:(w=(f=n.value)==null?void 0:f.tenantOrderHolder)==null?void 0:w.mobile},null,8,["desc"]),I(s,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:ee(()=>[I(u,{modelValue:h.value,"onUpdate:modelValue":a[0]||(a[0]=K=>h.value=K),disabled:!0,options:q(le)},null,8,["modelValue","options"])]),_:1}),m("div",{class:"submit",onClick:H})])])])}}});var be=A(xe,[["__scopeId","data-v-85029188"]]);export{be as default};

import{_ as a,d as e,r as s,a as t,z as l,b as r,c as d,e as o,w as n,i as u,t as i,l as c,s as p,ax as v,C as f,f as m,n as I,p as b,a4 as h,T as y,L as C,M as _}from"./index-dd407709.js";import{s as N,c as j}from"./phoneVerify-a171e50f.js";import{c as E}from"./format-12461bbc.js";import{a as P}from"./order-d7076fed.js";import"./pdfh5-3b8067b2.js";import"./pdfdist-964d560e.js";const S={class:"page-phone-verify"},U=(a=>(C("data-v-29510ea1"),a=a(),_(),a))((()=>u("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息预",-1))),g={class:"phone"},q={class:"input-wrapper"},w=I("下一步");var x=a(e({setup(a){const e=s(""),I=s(""),C=s(0);let _;const x=t(),{agentCode:D,tenantId:R,templateId:T,productCode:k,insurerCode:A,orderNo:G}=x.query,L=()=>{N(e.value).then((({code:a})=>{"10000"===a&&(C.value=60,_=setInterval((()=>{C.value-=1,C.value<=0&&clearInterval(_)}),1e3))}))},M=()=>{j(e.value,I.value).then((({code:a,data:e})=>{"10000"===a&&e?(y.success("验证成功"),h("infoPreview",x.query)):y.fail("验证失败")}))};return l((()=>{b({orderNo:G,saleUserId:D,tenantId:R}).then((a=>{var s;const{code:t,data:l}=a;"10000"===t&&([P.PENDING,P.PAYMENT_FAILED,P.UNDER_WRITING_SUCCESS].includes(l.orderStatus)?e.value=null==(s=null==l?void 0:l.tenantOrderHolder)?void 0:s.mobile:h("paymentResult",x.query))}))})),(a,s)=>{const t=r("van-button"),l=r("ProPageWrap");return d(),o(l,null,{default:n((()=>[u("div",S,[U,u("div",g,i(c(E)(e.value)),1),u("div",q,[p(u("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>I.value=a),placeholder:"请输入验证码",class:"input"},null,512),[[v,I.value]]),u("div",{class:f(["btn",{second:C.value}]),onClick:L},i(C.value?`${C.value}s`:"发送验证码"),3)]),m(t,{type:"primary",class:"submit-btn",onClick:M},{default:n((()=>[w])),_:1})])])),_:1})}}}),[["__scopeId","data-v-29510ea1"]]);export{x as default};

import{d as a,a as e,u as s,r as t,aH as i,R as o,b as n,c as l,i as r,e as d,w as c,U as p,a4 as u,f as m,a0 as f,Y as v,ae as g,j as b,af as w,B as h,aJ as y,ad as k}from"./index-f782a611.js";import{S as C}from"./index-0989116e.js";import{P as I}from"./index-1fad3741.js";import{q as j,s as x,c as N}from"./scribing-3b3f9226.js";const _={class:"page-scribing-preview-wrap"},E=r("div",{class:"header-tip"},"点击文字框可进行修改",-1),H={class:"scribing-list"},L=["onClick"],T=["src"],V={class:"footer-btn"},q={class:"popup-body"},A={class:"popup-footer"},D=a({name:"scribingPreview"}),P=a({...D,setup(a){const D=e(),P=s(),S=t([]),{orderNo:U,text:Y,tenantId:B,orderId:J}=P.query,R=t({}),[$,z]=i(!1);t(!1);const F=async()=>{const{code:a,data:e}=await j({orderId:J,tenantId:B,contentType:k.HANDLE});"10000"===a&&(S.value=e)},G=()=>{z(!1)},K=()=>{R.value.image&&x({orderNo:U,tenantId:B,riskTranscriptionList:[{...R.value,status:2}]}).then((({code:a,data:e})=>{"10000"===a&&(z(!1),F())}))},M=()=>{N({content:Y,image:"",orderNo:U,tenantId:B,transcriptionType:k.HANDLE}).then((({code:a})=>{"10000"===a&&D.back()}))},O=t(!1);return o((()=>{O.value=!0,F()})),(a,e)=>{const s=C,t=w,i=h,o=y;return n(),l(p,null,[r("div",_,[E,r("div",H,[d(s,{wrap:""},{default:c((()=>[(n(!0),l(p,null,u(m(S),((a,e)=>(n(),l("div",{key:e,class:f("scribing-item "+(+a.status!==m(v).YES?"activity":"")),onClick:e=>{return s=a,R.value={...s,image:""},void z(!0);var s}},[r("img",{src:a.thumbnail,alt:""},null,8,T)],10,L)))),128))])),_:1})]),r("div",V,[d(I,{shadow:!1,onClick:M},{default:c((()=>[g(a.$slots,"default",{},(()=>[b("确认")]))])),_:3})])]),d(o,{show:m($),teleport:".page-scribing-preview-wrap",class:"sign-popup",title:m(R).content,closeable:!1,position:"center",onClose:G},{default:c((()=>[r("div",q,[d(t,{modelValue:m(R).image,"onUpdate:modelValue":e[0]||(e[0]=a=>m(R).image=a),"has-bg":"",placeholder:m(R).content,closeable:""},null,8,["modelValue","placeholder"])]),r("div",A,[d(i,{onClick:G},{default:c((()=>[b("取消")])),_:1}),d(i,{type:"primary",plain:"",onClick:K},{default:c((()=>[b("确定")])),_:1})])])),_:1},8,["show","title"])],64)}}});export{P as default};

!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.page-verify .card .people[data-v-2b51d3cc]{flex:1;margin-left:.53333rem;display:flex;align-items:center}.page-verify .card .people .name[data-v-2b51d3cc]{font-size:.4rem;font-weight:600;color:#393d46}.page-verify .card .people .status[data-v-2b51d3cc]{margin-left:.26667rem;text-align:center;width:1.2rem;height:.53333rem;line-height:.53333rem;border-radius:.05333rem;border:1px solid #99a9c0;font-size:.32rem;color:#99a9c0}.page-verify .card .people .status.verified[data-v-2b51d3cc]{color:#0d6efe;border-color:#0d6efe}.page-verify .card .verify-item[data-v-2b51d3cc]{display:flex;align-items:center;height:1.41333rem;line-height:1.41333rem;font-size:.4rem;color:#393d46}.page-verify .card .verify-item .no[data-v-2b51d3cc]{margin-left:.64rem}.page-verify .card .verify-item .action[data-v-2b51d3cc]{flex:1;display:flex;align-items:center;justify-content:flex-end;color:#99a9c0}.page-verify .card .verify-item .action .icon[data-v-2b51d3cc]{margin-left:.13333rem;color:#99a9c0;font-size:.32rem}.page-verify .sign-card .resign[data-v-2b51d3cc]{font-size:.37333rem;color:#0d6efe}.page-verify .sign-card .sign-body[data-v-2b51d3cc]{padding-bottom:.4rem}.page-verify .sign-card .sign-body .date[data-v-2b51d3cc]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-verify .sign-card .sign-body .file[data-v-2b51d3cc]{margin-top:.21333rem;font-size:.37333rem;color:#393d46;line-height:.53333rem}.page-verify .sign-card .sign-body .file .file-name[data-v-2b51d3cc]{color:#0d6efe}.page-verify .sign-card .sign-body .file .file-name .dun-hao[data-v-2b51d3cc]{color:#393d46}.page-verify .footer[data-v-2b51d3cc]{position:static;justify-content:space-between}.page-verify .footer .refresh-btn[data-v-2b51d3cc]{width:.66667rem;border:none;color:#0d6efe;font-size:.26667rem;line-height:.37333rem;text-align:center}.page-verify .footer .refresh-btn .text[data-v-2b51d3cc]{margin-top:.13333rem}.page-verify .footer .submit-btn[data-v-2b51d3cc]{flex:1}\n',document.head.appendChild(e),System.register(["./vendor-legacy-6a0a73a6.js","./index-legacy-f03afd46.js","./index-legacy-be44285a.js"],(function(e){"use strict";var a,t,i,r,n,l,o,d,s,c,v,f,u,m,g,p,y,b,h,N,x,C,I,O,k,w,D,E,_,j,H,L;return{setters:[function(e){a=e.g,t=e.C,i=e.d,r=e.M,n=e.r,l=e.h,o=e.j,d=e.k,s=e.y,c=e.n,v=e.I,f=e.J,u=e.m,m=e.s,g=e.z,p=e.E,y=e.F,b=e.a1,h=e.a2,N=e.B,x=e.T,C=e.D},function(e){I=e.b,O=e._,k=e.S,w=e.x,D=e.m,E=e.h,_=e.y,j=e.N},function(e){H=e.a,L=e.n}],execute:function(){const R=(e,a,t,i)=>{const r={bizObjectType:e,docCategory:"ELECTRIC_SIGN",docType:"png",fileBase64:a,orderId:t,tenantId:i};return I.post("/api/app/insure/insurance/saveCustomerSignResult",r)};const z=e=>(b("data-v-2b51d3cc"),e=e(),h(),e),T={class:"page-verify"},S={class:"people"},U={class:"name"},M={class:"verify-item"},B=z((()=>s("div",{class:"label"},"身份证号码",-1))),F={class:"no"},P=N(" 去认证 "),Y={class:"sign-body"},A={class:"date"},Q={class:"file"},$=N(" 签名将被用于以下文件："),G={key:0,class:"dun-hao"},J={class:"people"},W={class:"name"},q={class:"verify-item"},K=z((()=>s("div",{class:"label"},"身份证号码",-1))),V={class:"no"},X=["onClick"],Z=N(" 去认证 "),ee=["onClick"],ae={class:"sign-body"},te={class:"date"},ie={class:"file"},re=N(" 签名将被用于以下文件："),ne={key:0,class:"dun-hao"},le={class:"footer-button footer"},oe=N("提交"),de=a({setup(e){const a="2022072810590219649",b=new k({source:"localStorage"}),h=t([]),O=t(),z=t(),de=[],se=i().format("YYYY-MM-DD"),ce=()=>{var e;null===(e=z.value)||void 0===e||e.clear()},ve=(e,a)=>{var t;(t={callbackUrl:window.location.href,certiNo:"2022072710380711215",faceAuthMode:"TENCENT",userName:a,tenantId:9991000007},I.post("/api/app/insure/insurance/customerFace",t)).then((t=>{const{code:i,data:r}=t;if("10000"===i){const{originalUrl:t,serialNo:i}=r;window.location.href=t,b.set("verifyData",{serialNo:i,certNo:e,name:a})}}))},fe=e=>{var a,t,i,r;-1===e?ve(null===(a=O.value.tenantOrderHolder)||void 0===a?void 0:a.certNo,null===(t=O.value.tenantOrderHolder)||void 0===t?void 0:t.name):ve(null===(i=O.value.tenantOrderInsuredList[e])||void 0===i?void 0:i.certNo,null===(r=O.value.tenantOrderInsuredList[e])||void 0===r?void 0:r.name)},ue=e=>{e&&de.every((a=>a!==e))&&de.push(e)},me=()=>{var e;(null===(e=z.value)||void 0===e?void 0:e.isEmpty())?x.fail("请投保人签名"):de.some((e=>e.isEmpty()))?x.fail("请被保人签名"):C.confirm({title:"提示",message:"请确认信息填写无误后，再进行支付"}).then((()=>{var e;const a=null===(e=z.value)||void 0===e?void 0:e.save();Promise.all([R("HOLDER",a,2779003,9991000007),...de.map((e=>R("INSURED",e.save(),2779003,9991000007)))]).then((()=>{L({...O.value})}))}))};return r((()=>{var e;H({orderNo:a,saleUserId:"D1234567-1",tenantId:"9991000007"}).then((e=>{const{code:a,data:t}=e;if("10000"===a){O.value=t;let e=0;t.tenantOrderAttachmentList.forEach((a=>{21===a.category&&(2===a.objectType?z.value.setDataURL(a.fileBase64):1===a.objectType&&(de[e].setDataURL(a.fileBase64),e+=1))}))}})),(e={orderNo:"2022011815151382958351",productCode:"CQ75CQ76",tenantId:9991000007},I.post("/api/app/insure/insurance/listProductManuscripts",e)).then((e=>{const{code:a,data:t}=e;"10000"===a&&(h.value=t||[])}));const t=b.get("verifyData");if(t){const{serialNo:e,certNo:i,name:r}=t;(e=>I.post("/api/app/insure/insurance/saveCustomerFaceResult",e))({certiNo:i,orderNo:a,serialNo:e,tenantId:9991000007,userName:r}).then((e=>{b.remove("verifyData")}))}})),(e,a)=>{const t=n("van-button"),i=n("ProPageWrap");return l(),o(i,null,{default:d((()=>{var e;return[s("div",T,[c(w,{type:"warning",title:"尊敬的客户，本次投保需要进行身份认证",content:"本产品投保需要对投保人、被保人进行实名认证，您购买本产品的累计总保费已超过20万，按监管要求，需要提供投保人、被保人、指定受益人证件影像，本产品非本人投保且带身故责任、需对投保人、被保人（成人）的投保意愿进行签字确认。"}),c(E,{title:"投保人",class:"card"},{extra:d((()=>{var e,a,t,i,r,n,l,o;return[s("div",S,[s("div",U,v(null===(e=O.value)||void 0===e||null===(a=e.tenantOrderHolder)||void 0===a?void 0:a.name),1),s("div",{class:f(["status",{verified:null===(t=O.value)||void 0===t||null===(i=t.tenantOrderHolder)||void 0===i||null===(r=i.extInfo)||void 0===r?void 0:r.isCert}])},v(null!==(n=O.value)&&void 0!==n&&null!==(l=n.tenantOrderHolder)&&void 0!==l&&null!==(o=l.extInfo)&&void 0!==o&&o.isCert?"已认证":"待认证"),3)])]})),default:d((()=>{var e,t,i,r,n;return[s("div",M,[B,s("div",F,v(null===(e=O.value)||void 0===e||null===(t=e.tenantOrderHolder)||void 0===t?void 0:t.certNo),1),null!==(i=O.value)&&void 0!==i&&null!==(r=i.tenantOrderHolder)&&void 0!==r&&null!==(n=r.extInfo)&&void 0!==n&&n.isCert?m("",!0):(l(),u("div",{key:0,class:"action",onClick:a[0]||(a[0]=e=>fe(-1))},[P,c(D,{name:"right_arrow",class:"icon"})]))])]})),_:1}),c(E,{title:"投保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:d((()=>[s("div",{class:"resign",onClick:ce},"重签")])),default:d((()=>[c(_,{ref_key:"holderSign",ref:z,class:"sign"},null,512),s("div",Y,[s("div",A,"签名日期： "+v(g(se)),1),s("div",Q,[$,(l(!0),u(y,null,p(h.value.filter((e=>e.noticeObject===g(j).HOLDER)),((e,a)=>(l(),u("span",{key:a,class:"file-name"},[N(v(`《${e.materialName}》`),1),a!==h.value.filter((e=>e.noticeObject===g(j).HOLDER)).length-1?(l(),u("span",G,"、")):m("",!0)])))),128))])])])),_:1}),(l(!0),u(y,null,p(null===(e=O.value)||void 0===e?void 0:e.tenantOrderInsuredList,((e,a)=>(l(),u("div",{key:a},[c(E,{title:"被保人",class:"card"},{extra:d((()=>{var a,t;return[s("div",J,[s("div",W,v(e.name),1),s("div",{class:f(["status",{verified:null===(a=e.extInfo)||void 0===a?void 0:a.isCert}])},v(null!==(t=e.extInfo)&&void 0!==t&&t.isCert?"已认证":"待认证"),3)])]})),default:d((()=>{var t;return[s("div",q,[K,s("div",V,v(e.certNo),1),null!==(t=e.extInfo)&&void 0!==t&&t.isCert?m("",!0):(l(),u("div",{key:0,class:"action",onClick:e=>fe(a)},[Z,c(D,{name:"right_arrow",class:"icon"})],8,X))])]})),_:2},1024),c(E,{title:"被保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:d((()=>[s("div",{class:"resign",onClick:e=>(e=>{de[e].clear()})(a)},"重签",8,ee)])),default:d((()=>[c(_,{ref_for:!0,ref:ue,class:"sign"}),s("div",ae,[s("div",te,"签名日期： "+v(g(se)),1),s("div",ie,[re,(l(!0),u(y,null,p(h.value.filter((e=>e.noticeObject===g(j).INSURED)),((e,a)=>(l(),u("span",{key:a,class:"file-name"},[N(v(`《${e.materialName}》`),1),a!==h.value.filter((e=>e.noticeObject===g(j).INSURED)).length-1?(l(),u("span",ne,"、")):m("",!0)])))),128))])])])),_:2},1024)])))),128)),s("div",le,[c(t,{type:"primary",class:"submit-btn",onClick:me},{default:d((()=>[oe])),_:1})])])]})),_:1})}}});e("default",O(de,[["__scopeId","data-v-2b51d3cc"]]))}}}))}();

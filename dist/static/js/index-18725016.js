var X=Object.defineProperty;var P=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var j=(t,c,o)=>c in t?X(t,c,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[c]=o,U=(t,c)=>{for(var o in c||(c={}))Z.call(c,o)&&j(t,o,c[o]);if(P)for(var o of P(c))ee.call(c,o)&&j(t,o,c[o]);return t};import{g as ue,C as k,d as te,M as se,r as M,h as D,j as ae,k as E,y as u,n as F,I as f,J as V,m as v,s as y,z as m,E as S,F as x,a1 as ne,a2 as oe,B as h,T as $,D as re}from"./vendor-89e50ef2.js";import{b,_ as ie,S as ce,x as le,m as Y,h as I,y as z,N}from"./index-b98bfe67.js";import{a as de,n as Be}from"./index-e009ac36.js";const _e=t=>b.post("/api/app/insure/insurance/customerFace",t),De=t=>b.post("/api/app/insure/insurance/saveCustomerFaceResult",t),Q=(t,c,o,C)=>{const l={bizObjectType:t,docCategory:"ELECTRIC_SIGN",docType:"png",fileBase64:c,orderId:o,tenantId:C};return b.post("/api/app/insure/insurance/saveCustomerSignResult",l)},Ee=t=>b.post("/api/app/insure/insurance/listProductManuscripts",t);const W=t=>(ne("data-v-2b51d3cc"),t=t(),oe(),t),Fe={class:"page-verify"},fe={class:"people"},ve={class:"name"},Ce={class:"verify-item"},pe=W(()=>u("div",{class:"label"},"\u8EAB\u4EFD\u8BC1\u53F7\u7801",-1)),he={class:"no"},Ae=h(" \u53BB\u8BA4\u8BC1 "),me={class:"sign-body"},ge={class:"date"},ye={class:"file"},Ie=h(" \u7B7E\u540D\u5C06\u88AB\u7528\u4E8E\u4EE5\u4E0B\u6587\u4EF6\uFF1A"),Ne={key:0,class:"dun-hao"},be={class:"people"},Oe={class:"name"},ke={class:"verify-item"},Se=W(()=>u("div",{class:"label"},"\u8EAB\u4EFD\u8BC1\u53F7\u7801",-1)),xe={class:"no"},Re=["onClick"],we=h(" \u53BB\u8BA4\u8BC1 "),Le=["onClick"],Te={class:"sign-body"},He={class:"date"},Pe={class:"file"},je=h(" \u7B7E\u540D\u5C06\u88AB\u7528\u4E8E\u4EE5\u4E0B\u6587\u4EF6\uFF1A"),Ue={key:0,class:"dun-hao"},Me={class:"footer-button footer"},Ve=h("\u63D0\u4EA4"),$e=ue({setup(t){const c="2022072810590219649",o=new ce({source:"localStorage"}),C=k([]),l=k(),g=k(),A=[],R=te().format("YYYY-MM-DD"),G=()=>{var s;(s=g.value)==null||s.clear()},J=s=>{A[s].clear()},w=(s,a)=>{_e({callbackUrl:window.location.href,certiNo:"2022072710380711215",faceAuthMode:"TENCENT",userName:a,tenantId:9991000007}).then(r=>{const{code:i,data:B}=r;if(i==="10000"){const{originalUrl:e,serialNo:d}=B;window.location.href=e,o.set("verifyData",{serialNo:d,certNo:s,name:a})}})},L=s=>{var a,r,i,B;s===-1?w((a=l.value.tenantOrderHolder)==null?void 0:a.certNo,(r=l.value.tenantOrderHolder)==null?void 0:r.name):w((i=l.value.tenantOrderInsuredList[s])==null?void 0:i.certNo,(B=l.value.tenantOrderInsuredList[s])==null?void 0:B.name)},q=s=>{s&&A.every(a=>a!==s)&&A.push(s)},K=()=>{var a;if((a=g.value)==null?void 0:a.isEmpty()){$.fail("\u8BF7\u6295\u4FDD\u4EBA\u7B7E\u540D");return}if(A.some(r=>r.isEmpty())){$.fail("\u8BF7\u88AB\u4FDD\u4EBA\u7B7E\u540D");return}re.confirm({title:"\u63D0\u793A",message:"\u8BF7\u786E\u8BA4\u4FE1\u606F\u586B\u5199\u65E0\u8BEF\u540E\uFF0C\u518D\u8FDB\u884C\u652F\u4ED8"}).then(()=>{var i;const r=(i=g.value)==null?void 0:i.save();Promise.all([Q("HOLDER",r,2779003,9991000007),...A.map(B=>Q("INSURED",B.save(),2779003,9991000007))]).then(()=>{Be(U({},l.value))})})};return se(()=>{de({orderNo:c,saleUserId:"D1234567-1",tenantId:"9991000007"}).then(a=>{const{code:r,data:i}=a;if(r==="10000"){l.value=i;let B=0;i.tenantOrderAttachmentList.forEach(e=>{e.category===21&&(e.objectType===2?g.value.setDataURL(e.fileBase64):e.objectType===1&&(A[B].setDataURL(e.fileBase64),B+=1))})}}),Ee({orderNo:"2022011815151382958351",productCode:"CQ75CQ76",tenantId:9991000007}).then(a=>{const{code:r,data:i}=a;r==="10000"&&(C.value=i||[])});const s=o.get("verifyData");if(s){const{serialNo:a,certNo:r,name:i}=s;De({certiNo:r,orderNo:c,serialNo:a,tenantId:9991000007,userName:i}).then(B=>{o.remove("verifyData")})}}),(s,a)=>{const r=M("van-button"),i=M("ProPageWrap");return D(),ae(i,null,{default:E(()=>{var B;return[u("div",Fe,[F(le,{type:"warning",title:"\u5C0A\u656C\u7684\u5BA2\u6237\uFF0C\u672C\u6B21\u6295\u4FDD\u9700\u8981\u8FDB\u884C\u8EAB\u4EFD\u8BA4\u8BC1",content:"\u672C\u4EA7\u54C1\u6295\u4FDD\u9700\u8981\u5BF9\u6295\u4FDD\u4EBA\u3001\u88AB\u4FDD\u4EBA\u8FDB\u884C\u5B9E\u540D\u8BA4\u8BC1\uFF0C\u60A8\u8D2D\u4E70\u672C\u4EA7\u54C1\u7684\u7D2F\u8BA1\u603B\u4FDD\u8D39\u5DF2\u8D85\u8FC720\u4E07\uFF0C\u6309\u76D1\u7BA1\u8981\u6C42\uFF0C\u9700\u8981\u63D0\u4F9B\u6295\u4FDD\u4EBA\u3001\u88AB\u4FDD\u4EBA\u3001\u6307\u5B9A\u53D7\u76CA\u4EBA\u8BC1\u4EF6\u5F71\u50CF\uFF0C\u672C\u4EA7\u54C1\u975E\u672C\u4EBA\u6295\u4FDD\u4E14\u5E26\u8EAB\u6545\u8D23\u4EFB\u3001\u9700\u5BF9\u6295\u4FDD\u4EBA\u3001\u88AB\u4FDD\u4EBA\uFF08\u6210\u4EBA\uFF09\u7684\u6295\u4FDD\u610F\u613F\u8FDB\u884C\u7B7E\u5B57\u786E\u8BA4\u3002"}),F(I,{title:"\u6295\u4FDD\u4EBA",class:"card"},{extra:E(()=>{var e,d,n,_,p,O,T,H;return[u("div",fe,[u("div",ve,f((d=(e=l.value)==null?void 0:e.tenantOrderHolder)==null?void 0:d.name),1),u("div",{class:V(["status",{verified:(p=(_=(n=l.value)==null?void 0:n.tenantOrderHolder)==null?void 0:_.extInfo)==null?void 0:p.isCert}])},f(((H=(T=(O=l.value)==null?void 0:O.tenantOrderHolder)==null?void 0:T.extInfo)==null?void 0:H.isCert)?"\u5DF2\u8BA4\u8BC1":"\u5F85\u8BA4\u8BC1"),3)])]}),default:E(()=>{var e,d,n,_,p;return[u("div",Ce,[pe,u("div",he,f((d=(e=l.value)==null?void 0:e.tenantOrderHolder)==null?void 0:d.certNo),1),((p=(_=(n=l.value)==null?void 0:n.tenantOrderHolder)==null?void 0:_.extInfo)==null?void 0:p.isCert)?y("",!0):(D(),v("div",{key:0,class:"action",onClick:a[0]||(a[0]=O=>L(-1))},[Ae,F(Y,{name:"right_arrow",class:"icon"})]))])]}),_:1}),F(I,{title:"\u6295\u4FDD\u4EBA\u7B7E\u540D","show-icon":!1,class:"sign-card","show-line":!1},{extra:E(()=>[u("div",{class:"resign",onClick:G},"\u91CD\u7B7E")]),default:E(()=>[F(z,{ref_key:"holderSign",ref:g,class:"sign"},null,512),u("div",me,[u("div",ge,"\u7B7E\u540D\u65E5\u671F\uFF1A "+f(m(R)),1),u("div",ye,[Ie,(D(!0),v(x,null,S(C.value.filter(e=>e.noticeObject===m(N).HOLDER),(e,d)=>(D(),v("span",{key:d,class:"file-name"},[h(f(`\u300A${e.materialName}\u300B`),1),d!==C.value.filter(n=>n.noticeObject===m(N).HOLDER).length-1?(D(),v("span",Ne,"\u3001")):y("",!0)]))),128))])])]),_:1}),(D(!0),v(x,null,S((B=l.value)==null?void 0:B.tenantOrderInsuredList,(e,d)=>(D(),v("div",{key:d},[F(I,{title:"\u88AB\u4FDD\u4EBA",class:"card"},{extra:E(()=>{var n,_;return[u("div",be,[u("div",Oe,f(e.name),1),u("div",{class:V(["status",{verified:(n=e.extInfo)==null?void 0:n.isCert}])},f(((_=e.extInfo)==null?void 0:_.isCert)?"\u5DF2\u8BA4\u8BC1":"\u5F85\u8BA4\u8BC1"),3)])]}),default:E(()=>{var n;return[u("div",ke,[Se,u("div",xe,f(e.certNo),1),((n=e.extInfo)==null?void 0:n.isCert)?y("",!0):(D(),v("div",{key:0,class:"action",onClick:_=>L(d)},[we,F(Y,{name:"right_arrow",class:"icon"})],8,Re))])]}),_:2},1024),F(I,{title:"\u88AB\u4FDD\u4EBA\u7B7E\u540D","show-icon":!1,class:"sign-card","show-line":!1},{extra:E(()=>[u("div",{class:"resign",onClick:n=>J(d)},"\u91CD\u7B7E",8,Le)]),default:E(()=>[F(z,{ref_for:!0,ref:q,class:"sign"}),u("div",Te,[u("div",He,"\u7B7E\u540D\u65E5\u671F\uFF1A "+f(m(R)),1),u("div",Pe,[je,(D(!0),v(x,null,S(C.value.filter(n=>n.noticeObject===m(N).INSURED),(n,_)=>(D(),v("span",{key:_,class:"file-name"},[h(f(`\u300A${n.materialName}\u300B`),1),_!==C.value.filter(p=>p.noticeObject===m(N).INSURED).length-1?(D(),v("span",Ue,"\u3001")):y("",!0)]))),128))])])]),_:2},1024)]))),128)),u("div",Me,[F(r,{type:"primary",class:"submit-btn",onClick:K},{default:E(()=>[Ve]),_:1})])])]}),_:1})}}});var Ge=ie($e,[["__scopeId","data-v-2b51d3cc"]]);export{Ge as default};

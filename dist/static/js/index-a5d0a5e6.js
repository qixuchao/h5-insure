import{d as e,R as a,U as n,a as t,u as l,r as o,L as i,V as s,Y as d,W as u,X as r,Z as c,b as v,c as p,f as _,e as m,$ as I,i as f,g as C,h as O,w as h,j as b,a0 as g,a1 as y,n as L,a2 as A}from"./index-c26f5a93.js";import{g as j,i as E}from"./trial-44de14b5.js";import{a as S,q as T}from"./product-d78387f3.js";import{u as k}from"./useAttachment-b620ecda.js";import{g as N}from"./utils-1af35aa3.js";import{q as P}from"./createProposal-708248eb.js";import{u as R}from"./useOrder-df0ef165.js";import"./infoCollection-c963ab8b.js";import"./trial-d2eb8ecc.js";import"./merge-84cb998c.js";import"./keysIn-b1e7a5ec.js";import"./isObjectLike-a9798079.js";const w={key:0},x={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},V={class:"info"},F={key:1,class:"preview-placeholder"},B=f("br",null,null,-1),D=f("div",{id:"insureButton"},null,-1),U=f("div",{id:"xinaoDialog"},null,-1),q=e({name:"InsuranceLong"}),G=e({...q,setup(e){const q=a((()=>n((()=>import("./index-7d9939c3.js")),["static/js/index-7d9939c3.js","static/css/index-c23f272e.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css"]))),G=a((()=>n((()=>import("./index-3787f784.js")),["static/js/index-3787f784.js","static/css/index-79104747.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css","static/js/infoCollection-c963ab8b.js"]))),M=a((()=>n((()=>import("./index-4d00b047.js")),["static/js/index-4d00b047.js","static/css/index-491cbbd3.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css"])));a((()=>n((()=>import("./index-33b0c22d.js")),["static/js/index-33b0c22d.js","static/css/index-db4d7ea7.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css","static/js/debounce-6981b306.js","static/js/isObjectLike-a9798079.js","static/js/cloneDeep-f5e28e96.js","static/js/keysIn-b1e7a5ec.js","static/js/_getTag-5c78de73.js","static/js/TrialButton-32a5df2d.js","static/css/TrialButton-ca460c56.css","static/js/index-59249ec8.js","static/css/index-827a8544.css","static/js/trial-44de14b5.js","static/js/config-98e8d477.js","static/js/isNaN-beb28144.js","static/js/useOrder-df0ef165.js","static/js/merge-84cb998c.js"])));const z=a((()=>n((()=>import("./index-fe54bf90.js")),["static/js/index-fe54bf90.js","static/css/index-ebb5282b.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css"]))),W=a((()=>n((()=>import("./Video-2907cba0.js")),["static/js/Video-2907cba0.js","static/css/Video-20262b6f.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css"]))),X=a((()=>n((()=>import("./index-224273aa.js")),["static/js/index-224273aa.js","static/css/index-51c81f95.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css","static/js/utils-1af35aa3.js","static/js/infoCollection-c963ab8b.js","static/js/trial-d2eb8ecc.js"]))),Y=a((()=>n((()=>import("./index-950ff6f3.js")),["static/js/index-950ff6f3.js","static/css/index-1ab06bdf.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css","static/js/product-d78387f3.js","static/js/useThread-c502137a.js"]))),$=a((()=>n((()=>import("./index-9cb31290.js")),["static/js/index-9cb31290.js","static/css/index-fa4edf2a.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css","static/js/theme-65292714.js","static/js/index-59249ec8.js","static/css/index-827a8544.css","static/js/utils-1af35aa3.js","static/js/infoCollection-c963ab8b.js","static/js/trial-d2eb8ecc.js"]))),J=a((()=>n((()=>import("./index-2f33dd65.js")),["static/js/index-2f33dd65.js","static/css/index-eabeb59f.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css"]))),Q=a((()=>n((()=>import("./index-30e340b4.js")),["static/js/index-30e340b4.js","static/css/index-4640d9aa.css","static/js/index-c26f5a93.js","static/css/index-9494d932.css"])));t();const Z=l(),{productCode:H="",tenantId:K,agentCode:ee="",agencyCode:ae,saleChannelId:ne,proposalId:te,extraInfo:le,orderNo:oe,insurerCode:ie,preview:se,trialPreview:de}=Z.query;let ue={};try{console.log("extInfo",decodeURIComponent(le)),ue=JSON.parse(decodeURIComponent(le))}catch(Ge){}o();const re=o(),ce=o(),ve=o(!1),pe=o({}),_e=o({}),me=o(!1),Ie=o(0),fe=o(!1);o({});const Ce=o(!0);o(!0);const Oe=o(!0),he=o(""),be=o({}),ge=o({}),ye=o([]),Le=o({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Ae=o({});i((()=>!!se||!!de));const je=i((()=>!!de)),Ee=o(),Se=()=>{Ee.value.open()},Te=o([]),ke=o(),Ne=o(),Pe=R(),Re=o(!1),we=async()=>{!je.value&&S({productCode:H,tenantId:K}).then((({data:e,code:a})=>{if("10000"===a){pe.value=e;const{wxShareConfig:a,showWXShare:n,title:t,desc:l,image:o}=(null==e?void 0:e.PRODUCT_LIST)||{};n?Object.assign(Le.value,{...a,imgUrl:a.image,isShare:n}):Object.assign(Le.value,{title:t,desc:l,imgUrl:o,isShare:n}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&y(e.BASIC_INFO.themeType)}})),oe||te||(Re.value=!0),oe&&j({orderNo:oe,tenantId:K}).then((({code:e,data:a})=>{"10000"===e&&(a.productCode=H,Ne.value=a,Re.value=!0)})),te&&P({id:te,tenantId:K}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:n}=a;Ne.value=Object.assign(Pe.value,{productCode:H,productName:"",renewFlag:"",holder:e,tenantId:K,insuredList:(n||[]).map((e=>({...e,productList:e.productList.filter((e=>e.productCode===H))})))}),Re.value=!0}})),await E({productCode:H,isTenant:!1}).then((({data:e,code:a})=>{var n;"10000"===a&&(ve.value=!0,fe.value=!0,_e.value=e,be.value=null==(n=e.productPlanInsureVOList)?void 0:n[0],ye.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),Oe.value=!1,T({productCode:H}).then((({code:e,data:a})=>{var n,t,l,o;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=a;ke.value=e||[];const{basicInfo:{questionnaireType:s},questions:d,questionnaireName:u}=(null==(n=null==i?void 0:i[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};2===s&&(Te.value=[{attachmentName:u,attachmentUri:d,attachmentType:"question"}]),Te.value=[{attachmentName:u,attachmentUri:null==(t=null==d?void 0:d[0])?void 0:t.content,attachmentType:N(String(null==(l=null==d?void 0:d[0])?void 0:l.textType),null==(o=null==d?void 0:d[0])?void 0:o.content)}]}}))};s((()=>Ae.value.planCode),(e=>{be.value=(_e.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const xe=()=>{re.value.handleClickTab()("insureButton")};o(""),o(0);const{fileList:Ve,mustReadFileCount:Fe,popupFileList:Be}=k(be,ke),De=e=>{be.value=(_e.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},Ue=()=>{me.value=!1,Ce.value=!0},qe=()=>{me.value=!1,Ce.value=!0};return s((()=>be.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:n}=be.value;Ae.value.planCode=e,ge.value=(n||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),u((()=>{r(ce,(([{isIntersecting:e}],a)=>{ve.value=!0}))})),c((()=>{Oe.value=!0,we(),setTimeout((async()=>{he.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var n,t,l,o,i,s,d,u,r,c,y,j,E,S,T,k,N,P,R,Z;const H=L,K=A;return v(),p(I,null,[_(Oe)?(v(),p("div",w)):(v(),p("div",x,[m(H),_(je)?(v(),p("div",F,[b("当前页面仅用于保费试算预览"),B,b("不展示其他产品相关配置信息")])):(v(),p(I,{key:0},[f("div",V,[1==(null==(t=null==(n=_(pe))?void 0:n.BASIC_INFO)?void 0:t.bannerType)&&(null==(o=null==(l=_(pe))?void 0:l.BASIC_INFO)?void 0:o.banner.length)?(v(),C(_(M),{key:0,"data-skeleton-type":"img",images:null==(s=null==(i=_(pe))?void 0:i.BASIC_INFO)?void 0:s.banner},null,8,["images"])):O("",!0),2==(null==(u=null==(d=_(pe))?void 0:d.BASIC_INFO)?void 0:u.bannerType)&&(null==(c=null==(r=_(pe))?void 0:r.BASIC_INFO)?void 0:c.video.length)?(v(),C(_(W),{key:1,"data-skeleton-type":"img",src:null==(y=_(pe))?void 0:y.BASIC_INFO.video[0]},null,8,["src"])):O("",!0),(null==(S=null==(E=null==(j=_(pe))?void 0:j.BASIC_INFO)?void 0:E.bannerMove)?void 0:S.length)?(v(),C(_(M),{key:2,url:null==(N=null==(k=null==(T=_(pe))?void 0:T.BASIC_INFO)?void 0:k.bannerMove)?void 0:N[0],onClick:xe},null,8,["url"])):O("",!0),f("div",{ref_key:"observeRef",ref:ce},null,512)]),m(_(q),{"data-source":null==(P=_(pe))?void 0:P.BASIC_INFO},null,8,["data-source"]),(null==(R=_(pe))?void 0:R.GUARANTEE)?(v(),C(_(X),{key:0,"show-service-config":"","data-source":_(pe),"plan-list":_(ye),onUpdateActivePlan:De},null,8,["data-source","plan-list"])):O("",!0),f("div",{class:"trial-text-btn",onClick:Se},"算一算保费"),m(_(z),{"data-source":null==(Z=_(pe))?void 0:Z.ISSUE_CONDITION},null,8,["data-source"]),m(_(G),{ref_key:"detailScrollRef",ref:re,"data-source":_(pe)},null,8,["data-source"]),m(K,null,{default:h((()=>{var e,a,n;return[(null==(e=_(pe).SIGNATURE)?void 0:e.inscribedContent)?(v(),C(_(J),{key:0,"inscribed-content":null==(n=null==(a=_(pe))?void 0:a.SIGNATURE)?void 0:n.inscribedContent},null,8,["inscribed-content"])):O("",!0)]})),_:1}),m(K,null,{default:h((()=>{var e;return[(null==(e=_(Ve))?void 0:e.length)?(v(),C(_(Q),{key:0,"attachment-list":_(Ve),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{Ie.value=e,me.value=!0})(e))},null,8,["attachment-list"])):O("",!0)]})),_:1})],64)),D])),m(K,null,{default:h((()=>[_(fe)&&!_(je)?(v(),C(_(Y),{key:0,"product-detail":_(pe)},null,8,["product-detail"])):O("",!0)])),_:1}),U,m(K,null,{default:h((()=>[_(me)?(v(),C(_($),{key:0,show:_(me),"onUpdate:show":a[1]||(a[1]=e=>g(me)?me.value=e:null),"content-list":_(Ce)?_(Ve):_(Be),"is-only-view":_(Ce),"active-index":_(Ie),text:_(Ce)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":_(Ce)?0:_(Fe),onSubmit:Ue,onOnCloseFilePreviewByMask:qe},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):O("",!0)])),_:1})],64)}}});export{G as default};

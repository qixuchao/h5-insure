!function(){var e=document.createElement("style");e.innerHTML='.free-crad .page-info-wrapper .com-card-wrap .header.showLine{display:none}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell{background:#f6f6f6;border-radius:.21333rem;margin-bottom:.32rem;min-height:1.17333rem;padding:0 .42667rem;display:flex;align-items:center}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell .van-field__label{width:1.82667rem;margin-top:0;margin-bottom:0;padding-right:.13333rem}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell .van-cell__value .van-field__body{width:100%}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell:after{border-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell:after{border-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-field__label{width:1.76rem;margin-top:0;margin-bottom:0;padding-right:.13333rem}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body{width:100%}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder{padding-right:0;padding-left:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder:before{content:" ";margin-top:.13333rem;width:.10667rem;height:.48rem;background:var(--van-primary-color);margin-right:.21333rem;border-radius:0px .12rem .12rem 0px}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder .van-cell__title{margin-top:.10667rem}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap{width:100%}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn{display:flex;justify-content:flex-start}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn .btn-wrapper{margin:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn .btn-wrapper .com-check-btn{min-width:1.33333rem;border-radius:.53333rem!important;margin:0 .10667rem .13333rem 0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell:after{border-bottom:0}.free-crad[data-v-6cc132c6]{padding:0 .42667rem;background:linear-gradient(var(--7c399bd7),var(--7c399bf6))}.free-crad .container[data-v-6cc132c6]{padding:.61333rem .53333rem .26667rem;background:#ffffff;text-align:center;border-radius:.53333rem}.free-crad .container .title[data-v-6cc132c6]{height:.44rem;margin-bottom:.53333rem;display:flex;align-items:center;justify-content:center}.free-crad .container .title span[data-v-6cc132c6]{font-size:.42667rem;font-family:PingFangSC-Semibold,PingFang SC;font-weight:600;color:#333;line-height:.42667rem;margin:0 .29333rem}.free-crad .container .title img[data-v-6cc132c6]{height:.4rem}.free-crad .container .holder-form[data-v-6cc132c6]{height:4.66667rem}.page-free-product-detail[data-v-76f49958]{background:var(--349b61b4);padding-bottom:3.14667rem}.page-free-product-detail .inscribedContent-content[data-v-76f49958]{background-color:transparent}.page-free-product-detail .submit-btn[data-v-76f49958]{margin-top:.4rem}.page-free-product-detail .product-desc[data-v-76f49958]{margin-top:.42667rem}.page-free-product-detail .product-desc img[data-v-76f49958]{width:100%}.page-free-product-detail .page-free-footer[data-v-76f49958]{position:fixed;width:100%;bottom:0;padding:0 .93333rem .93333rem;box-sizing:border-box}\n',document.head.appendChild(e),System.register(["./index-legacy-1c541a55.js","./product-legacy-0ce85eff.js","./trial-legacy-6942cc96.js","./phoneVerify-legacy-b2a65972.js","./index-legacy-47f796db.js","./nextStep-legacy-fd358853.js","./trial-legacy-5a3545ab.js","./utils-legacy-3b18b716.js","./theme-legacy-c4a283a8.js","./index-legacy-d88e6deb.js","./index-legacy-6385f4d6.js","./pdfdist-legacy-31dd6e9b.js","./core-legacy-c284c686.js","./index-legacy-3fda8a40.js","./useStorage-legacy-d7b4762b.js","./infoCollection-legacy-00a984cd.js","./relativeTime-legacy-ef5c9ef2.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-a2973079.js"],(function(e,r){"use strict";var t,a,n,o,i,d,l,c,s,u,p,f,m,g,w,v,b,h,y,A,I,O,_,C,x,P,D,k,j,V,F,L,T,N,H,E,B,S,Y,M,U,R,z,$,Z,G,J;return{setters:[function(e){t=e._,a=e.d,n=e.aY,o=e.r,i=e.z,d=e.a7,l=e.c,c=e.g,s=e.i,u=e.l,p=e.t,f=e.e,m=e.a8,g=e.aZ,w=e.u,v=e.a,b=e.x,h=e.y,y=e.a_,A=e.a$,I=e.b,O=e.w,_=e.f,C=e.j,x=e.h,P=e.F,D=e.b0,k=e.T,j=e.b1,V=e.$},function(e){F=e.p,L=e.g},function(e){T=e.i,N=e.t},function(e){H=e.a,E=e.s,B=e.c},function(e){S=e.u,Y=e.B,M=e.P},function(e){U=e.n},function(e){R=e.j},function(e){z=e.v,$=e.f},function(e){Z=e.u},function(e){G=e.default},function(e){J=e.default},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAMAAACBgxnEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA8UExURUdwTPpkAPpkAPpkAPlkAPlkAP9fAPpkAP9jAPljAPljAPlkAPdhAP9VAPhlAPpjAPpiAPpkAPlhAPpkAKrbDd8AAAATdFJOUwCe3XX6YBgzC+yKwSIDTrE+0C9Hm6hZAAAAf0lEQVR42u2MSw6AIAxEi6CCf+j976ommvG3omxMOqv2vczQmZa3tPRMptdZndVZndXZf892/JGOxN68qUEr24/zk84jSvne93fae3Qk3scrjZeWzDcVaNUQIvRDOGkYQOU+hYMmsBJ+cTt1C0gZP7mNTvhL+Zq5xlfOW4tb6le9ZDBDk4RvXwAAAABJRU5ErkJggg==";const X={class:"free-crad"},q={class:"container"},K={class:"title"},W=["src"],ee=["src"],re=a({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}},previewMode:{type:Boolean,default:!1}},setup(e,{expose:r}){const t=e;n((e=>({"7c399bd7":t.colors[0],"7c399bf6":t.colors[1]})));const a=o(),g=i({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:1,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"手机号"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:1,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"验证码"}],2:[],3:[]},isFirst:!0}),w=async({mobile:e,type:r},n)=>{if(a.value){if(t.previewMode)return void n?.();a.value?.validateForm(`${r}_mobile`).then((async()=>{const r=t.isFirst?H:E,a=await r(e),{code:o,data:i}=a;"10000"===o&&n?.()}))}};return d((()=>t.isFirst),(()=>{t.isFirst||(g.factorObj=t.insureDetail?.productFactor)})),r({validateForm:()=>new Promise(((e,r)=>{a.value.validateForm().then((r=>{e(!0)})).catch((()=>{r()}))}))}),(r,t)=>(l(),c("div",X,[s("div",q,[s("div",K,[s("img",{src:u(Q)},null,8,W),s("span",null,p(e.isFirst?"凭手机号 免费领取":"最后一步 填写信息"),1),s("img",{src:u(Q)},null,8,ee)]),(l(),f(J,{ref_key:"formRef",ref:a,key:e.isFirst?1:2,"send-sms-code":w,"need-desensitize":"","form-info":e.detail,"factor-object":u(g).factorObj},null,8,["form-info","factor-object"])),m(r.$slots,"default",{},void 0,!0)])]))}});var te=t(re,[["__scopeId","data-v-6cc132c6"]]);const ae={class:"page-free-product-detail"},ne={class:"product-desc"},oe={key:1,class:"page-free-footer"};e("default",t(a({setup(e){n((e=>({"349b61b4":u(pe).colors[1]})));const t=g((()=>D((()=>r.import("./index-legacy-613bdcdf.js")),void 0))),a=g((()=>D((()=>r.import("./index-legacy-3b2b3a77.js")),void 0))),p=g((()=>D((()=>r.import("./index-legacy-a2913108.js")),void 0))),m=Z(),H=w(),E=v(),{productCode:J="",agencyCode:Q="",tenantId:X="",saleUserId:q="",saleChannelId:K="",extraInfo:W,preview:ee}=E.query;let re={};try{re=JSON.parse(decodeURIComponent(W))}catch(Ae){}const{openId:ie,indirectCode:de="",agentCode:le}=re,ce=o(),se=o(),ue=o(),pe=i({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},relationList:{},banner:"",productDesc:[],newAuth:!0,isValidateCode:!1,insureDetail:{},loading:!0,isSelfInsure:!0,showBtn:!1,activeIndex:0,showFilePreview:!1,isOnlyView:!0}),fe=o();ie&&S({openId:ie},(e=>{pe.relationList=e}));const me=b((()=>!!ee)),ge=()=>{const e=pe.insureDetail.productRiskVoList||[],{insuranceEndType:r,riskInsureLimitVO:t}=e?.[0]?.riskDetailVOList?.[0]||{},{insurancePeriodValueList:a}=t||{},[n,o]=(a?.[0]||"").split("_");return 1===r?`${V(new Date).add(o||0,n).format("YYYY-MM-DD")} 23:59:59`:r?`${V(new Date).add(o,n).format("YYYY-MM-DD")} 00:00:00`:""},we=async()=>{pe.loading=!0;const e=F({productCode:J,withInsureInfo:!0,tenantId:X}),r=T({productCode:J}),t=L({openId:ie});await Promise.all([e,r,t]).then((([e,r,t])=>{if("10000"===e.code){pe.detail=e.data,pe.banner=pe.detail.tenantProductInsureVO?.banner[0];const{colorEnd:r,colorStart:t}=pe.detail.tenantProductInsureVO?.backgroundInsureVO||{};pe.colors=[t,r],pe.productDesc=pe.detail.tenantProductInsureVO.spec||[],document.title=pe.detail?.tenantProductInsureVO?.productName||""}if("10000"===r.code&&(pe.insureDetail=r.data,pe.insureDetail.productFactor[1].forEach((e=>{"verificationCode"===e.code&&1===e.isDisplay&&(pe.isValidateCode=!0)})),pe.insureDetail.productFactor[2]=pe.insureDetail.productFactor?.[2].map((e=>("relationToHolder"===e.code&&1===e.isDisplay&&(e.title="被保人",pe.order.tenantOrderInsuredList[0].relationToHolder=e.attributeValueList?.[0]?.code||""),e)))),"10000"===t.code&&(pe.newAuth=!t.data,pe.isSelfInsure=!!t.data,t.data)){const e=t.data;pe.order.tenantOrderHolder={certNo:e?.certiNo,extInfo:{},mobile:e?.mobile,name:e?.name}}(()=>{let e={};if(e=pe.detail.tenantProductInsureVO.planInsureVO?.attachmentVOList||[],!e)return void(fe.value=[]);const r={2:"richText",3:"link"};fe.value=Object.keys(e).map((t=>(e[t].forEach((e=>{if("1"===e.attachmentType){const r=e.attachmentUri.split("?"),t=r[0].substr(r[0].lastIndexOf(".")+1);e.attachmentType="pdf"===t?"pdf":"picture"}else e.attachmentType=r[e.attachmentType]})),{attachmentName:t,attachmentList:e[t]})))||[]})(),pe.loading=!1}))},ve=async()=>{let e={loginType:"2",openId:ie,thirdUserType:"XINAO_WECHAT",indirectCode:de};try{if(pe.newAuth?(e.loginName=pe.order.tenantOrderHolder.mobile,e.password=pe.order.tenantOrderHolder.verificationCode):e=$({order:pe.order,tenantId:X,extraInfo:re,commencementTime:1===((pe.insureDetail.productRiskVoList||[])?.[0]?.riskDetailVOList?.[0]?.insuranceStartType||1)?`${V(new Date).format("YYYY-MM-DD")} 00:00:00`:`${V(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`,expiryDate:ge(),detail:pe.detail,insureDetail:pe.insureDetail,iseeBizNo:ce.value,agentCode:le,agencyCode:Q,saleUserId:q,templateId:re?.templateId,saleChannelId:K,pageCode:"infoCollection",buttonCode:"EVENT_FREE_multiIssuePolicy"}),pe.newAuth)if(me.value)pe.newAuth=!1;else{const{code:r,data:t}=await N(e);"10000"===r&&(pe.newAuth=!1)}else U(e,((e,r)=>{r===j.JUMP_PAGE&&e.orderNo&&H.push(`/baseInsurance/orderDetail?from=free&tenantId=${X}&orderNo=${e.orderNo}&productCode=${J}`)}))}catch(r){}},be=async()=>await(async()=>{if(me.value)return!0;await ue.value.validateForm();const e=pe.order.tenantOrderHolder?.verificationCode;if((pe.isValidateCode||pe.newAuth)&&(!e||!z(e)))return k({message:"请输入正确的验证码"}),!1;if(pe.newAuth||!pe.isValidateCode)return!0;const{code:r,data:t}=await B(pe.order.tenantOrderHolder.mobile,e);return!!t})()?(pe.newAuth||0===fe.value.length?ve():(pe.isOnlyView=!1,pe.showFilePreview=!0),!1):null,he=()=>{pe.showFilePreview=!1,pe.isOnlyView=!0},ye=()=>{pe.showFilePreview=!1,pe.isOnlyView=!0,ve()};return h((()=>{we(),setTimeout((async()=>{ce.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),d((()=>pe.order.tenantOrderInsuredList[0]),(e=>{if(y(pe.relationList)||pe.newAuth)return null;const r=pe.relationList[e.relationToHolder]||[];return 1===r.length&&(R.SELF!==e.relationToHolder?(pe.order.tenantOrderInsuredList[0].certNo=pe.order.tenantOrderInsuredList[0].certNo?pe.order.tenantOrderInsuredList[0].certNo:r[0].cert[0].certNo,pe.order.tenantOrderInsuredList[0].name=pe.order.tenantOrderInsuredList[0].name?pe.order.tenantOrderInsuredList[0].name:r[0].cert[0].certName,pe.order.tenantOrderInsuredList[0].mobile=pe.order.tenantOrderInsuredList[0].mobile?pe.order.tenantOrderInsuredList[0].mobile:r[0].contact[0].contactNo):pe.isSelfInsure&&(pe.isSelfInsure=!1,pe.order.tenantOrderHolder.certNo=pe.order.tenantOrderHolder.certNo?pe.order.tenantOrderHolder.certNo:r[0].cert[0].certNo,pe.order.tenantOrderHolder.name=pe.order.tenantOrderHolder.name?pe.order.tenantOrderHolder.name:r[0].cert[0].certName,pe.order.tenantOrderHolder.mobile=pe.order.tenantOrderHolder.mobile?pe.order.tenantOrderHolder.mobile:r[0].contact[0].contactNo)),!1}),{immediate:!0,deep:!0}),A(se,(([{isIntersecting:e}],r)=>{pe.showBtn=!e})),(e,r)=>{const n=I("van-image"),o=I("van-config-provider");return l(),f(o,{"theme-vars":u(m)},{default:O((()=>[s("div",ae,[_(Y,{url:u(pe).banner},null,8,["url"]),_(te,{ref_key:"formRef",ref:ue,"is-first":u(pe).newAuth,"insure-detail":u(pe).insureDetail,detail:u(pe).order,colors:u(pe).colors,"preview-mode":u(me)},{default:O((()=>[_(G,{ref_key:"root",ref:se,class:"submit-btn",disabled:!u(pe).newAuth&&u(me),"is-gradient":!1,text:u(pe).newAuth?"立即领取":"激活保障",onClick:be},null,8,["disabled","text"]),!u(pe).newAuth&&fe.value&&fe.value.length>0?(l(),f(u(a),{key:0,"attachement-list":fe.value,"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:r[0]||(r[0]=e=>(e=>{pe.isOnlyView=!0,pe.activeIndex=e,pe.showFilePreview=!0})(e))},null,8,["attachement-list"])):C("",!0)])),_:1},8,["is-first","insure-detail","detail","colors","preview-mode"]),s("div",ne,[(l(!0),c(P,null,x(u(pe).productDesc,((e,r)=>(l(),f(n,{key:r,width:"100%","lazy-load":"",src:e,class:""},null,8,["src"])))),128))]),u(pe).detail?.tenantProductInsureVO?.inscribedContent?(l(),f(u(t),{key:0,"inscribed-content":u(pe).detail?.tenantProductInsureVO?.inscribedContent},null,8,["inscribed-content"])):C("",!0),u(pe).showBtn?(l(),c("footer",oe,[_(G,{disabled:!u(pe).newAuth&&u(me),"is-gradient":!1,text:u(pe).newAuth?"立即领取":"激活保障",onClick:be},null,8,["disabled","text"])])):C("",!0)]),u(pe).showFilePreview&&0!==fe.value.length?(l(),f(u(p),{key:0,show:u(pe).showFilePreview,"onUpdate:show":r[1]||(r[1]=e=>u(pe).showFilePreview=e),"content-list":fe.value,"is-only-view":u(pe).isOnlyView,"active-index":u(pe).activeIndex,text:u(pe).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-cound":0,"on-close-file-preview":"",onSubmit:ye,onOnCloseFilePreview:he},null,8,["show","content-list","is-only-view","active-index","text"])):C("",!0),u(pe).loading?C("",!0):(l(),f(M,{key:1,"product-detail":u(pe).detail},null,8,["product-detail"]))])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-76f49958"]]))}}}))}();

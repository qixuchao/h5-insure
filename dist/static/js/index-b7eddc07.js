var Te=Object.defineProperty,xe=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Ue=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var Re=(n,a,g)=>a in n?Te(n,a,{enumerable:!0,configurable:!0,writable:!0,value:g}):n[a]=g,K=(n,a)=>{for(var g in a||(a={}))Ue.call(a,g)&&Re(n,g,a[g]);if(he)for(var g of he(a))Me.call(a,g)&&Re(n,g,a[g]);return n},H=(n,a)=>xe(n,Be(a));import{g as S,Q as Ee,E as M,a7 as Y,M as j,y as $,d as q,_ as U,r as R,j as I,n as x,p as C,m as F,A as i,k as A,t as h,R as Ne,o as $e,z as P,J as _,F as W,G as z,al as _e,am as we,a4 as qe,a5 as Ye,C as Pe,D as Se}from"./vendor-e057bbeb.js";import{S as je,a as Ge,R as Ke,b as Q,A as He,c as Qe,L as Oe,d as We}from"./trial-f1a1d7e6.js";import{_ as G,c as ze}from"./index-91380cd7.js";import{u as Je}from"./useDicData-60c186ad.js";const Xe={class:"com-personal-info-wrapper"},Ze=S({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(n,{expose:a}){var D,m;const g=n,T=Je(`${(m=(D=g.insuredCode)==null?void 0:D.toLocaleUpperCase)==null?void 0:m.call(D)}_OCCUPATION`),[b,t]=Ee(),V=M(),L=Y("source")||{},c=j({formInfo:g.formInfo,occupationalText:"",occupationCodeList:[]}),k=()=>new Promise((y,e)=>{V==null||V.value.validate().then(()=>{y("")},()=>{e()})}),O=y=>{const e=y||[];for(let o=0;o<e.length;o++)for(let l=o+1;l<e.length;l++){const d=e[o].split("_"),u=e[l].split("_"),p=e[o];d[0]===u[0]?d>u&&(e[o]=e[l],e[l]=p):d[0]==="age"&&(e[o]=e[l],e[l]=p)}return e},r=$(()=>{const y=O(g==null?void 0:g.ageRange),e=(p="")=>{const f=+p.split("_")[1],w=p.split("_")[0];return[f,w]},o=e(y[0]),l=e(y[y.length-1]),d=q().subtract(o[0],o[1]==="age"?"year":"day").format("YYYY-MM-DD"),u=q().subtract(l[0],l[1]==="age"?"year":"day").format("YYYY-MM-DD");return{minAge:new Date(u),maxAge:new Date(d)}});return U(()=>c.formInfo.occupationCodeList,y=>{console.log("newVal",y)},{deep:!0,immediate:!0}),a({validateForm:k,ageRangeObj:r.value}),(y,e)=>{const o=R("VanField"),l=R("ProRadioButton"),d=R("VanForm"),u=R("van-datetime-picker"),p=R("van-popup");return I(),x("div",Xe,[C(d,{ref_key:"formRef",ref:V,"input-align":"right","error-message-align":"right"},{default:F(()=>[i(L).type==="proposal"&&(i(L).type==="add"||i(L).type==="repeatAdd")||i(L).type!=="proposal"&&(n.factorList.includes("APPLICANT.AGE")||n.factorList.includes("AGE")||n.factorList.includes("DAY")||n.factorList.includes("APPLICANT.DAY"))?(I(),A(o,{key:0,modelValue:i(c).formInfo.birthday,"onUpdate:modelValue":e[0]||(e[0]=f=>i(c).formInfo.birthday=f),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F",class:"isLink",readonly:"","is-link":"",formatter:f=>f&&i(q)(f).format("YYYY-MM-DD"),placeholder:"\u8BF7\u9009\u62E9",onClick:e[1]||(e[1]=f=>i(t)(!0))},null,8,["modelValue","formatter"])):h("",!0),i(L).type==="proposal"&&(i(L).type==="add"||i(L).type==="repeatAdd")||i(L).type!=="proposal"&&(n.factorList.includes("APPLICANT.GENDER")||n.factorList.includes("GENDER"))?(I(),A(o,{key:1,modelValue:i(c).formInfo.gender,"onUpdate:modelValue":e[3]||(e[3]=f=>i(c).formInfo.gender=f),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},{input:F(()=>[C(l,{modelValue:i(c).formInfo.gender,"onUpdate:modelValue":e[2]||(e[2]=f=>i(c).formInfo.gender=f),options:i(je)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):h("",!0),n.factorList.includes("SOCIAL_INS")||n.factorList.includes("APPLICANT.SOCIAL_INS")?(I(),A(o,{key:2,modelValue:i(c).formInfo.socialFlag,"onUpdate:modelValue":e[5]||(e[5]=f=>i(c).formInfo.socialFlag=f),name:"socialFlag",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u793E\u4FDD"}]},{input:F(()=>[C(l,{modelValue:i(c).formInfo.socialFlag,"onUpdate:modelValue":e[4]||(e[4]=f=>i(c).formInfo.socialFlag=f),options:i(Ge)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):h("",!0),n.factorList.includes("OCCUPATION_CATEGORY")||n.factorList.includes("APPLICANT.OCCUPATION_CATEGORY")?(I(),A(ze,{key:3,modelValue:i(c).formInfo.occupationCodeList[0],"onUpdate:modelValue":e[6]||(e[6]=f=>i(c).formInfo.occupationCodeList[0]=f),field0:i(c).formInfo.occupationCodeList[0],"onUpdate:field0":e[7]||(e[7]=f=>i(c).formInfo.occupationCodeList[0]=f),field1:i(c).formInfo.occupationCodeList[1],"onUpdate:field1":e[8]||(e[8]=f=>i(c).formInfo.occupationCodeList[1]=f),field2:i(c).formInfo.occupationCodeList[2],"onUpdate:field2":e[9]||(e[9]=f=>i(c).formInfo.occupationCodeList[2]=f),required:"",name:"occupationCodeList",label:"\u804C\u4E1A\u7C7B\u578B","data-source":i(T),mapping:{label:"value",value:"code",children:"children"},"show-full-value":"","need-key":"name"},null,8,["modelValue","field0","field1","field2","data-source"])):h("",!0)]),_:1},512),C(p,{show:i(b),"onUpdate:show":e[12]||(e[12]=f=>Ne(b)?b.value=f:null),position:"bottom"},{default:F(()=>[C(u,{type:"date","min-date":i(r).minAge,"max-date":i(r).maxAge,onConfirm:e[10]||(e[10]=f=>{i(c).formInfo.birthday=i(q)(f).format("YYYY-MM-DD"),i(t)(!1)}),onCancel:e[11]||(e[11]=f=>i(t)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"])])}}});var Pi=G(Ze,[["__scopeId","data-v-257eb948"]]);const ei={class:"com-risk-card-wrapper part-card"},ii={class:"custom-field"},ti={class:"field-tip"},oi={class:"custom-field"},ai={class:"field-tip"},ni={class:"custom-field"},ui={class:"field-tip"},ri={key:0},li={key:9,class:"liab-desc"},si=S({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(n){const a=n,g=M({}),T=Y("premium")||{};g.value=Y("enumList")||{};const b=M({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),t=j({formInfo:a.formInfo}),V=e=>typeof e!="boolean"&&!e||Array.isArray(e)&&!e.length?!0:{}.toString.call(e)==="[object Object]"?Object.keys(e).length:!1,L=(e,o,l={})=>{let d=o;return Array.isArray(o)||(d=[`${d}`]),(e||[]).filter(u=>d.includes(`${u.value}`)||d.includes(u.value))},c=$(()=>{var e,o,l,d,u;return((e=a.originData)==null?void 0:e.riskType)===1?L(a.enums.RISK_INSURANCE_PERIOD,((o=a.originData.riskInsureLimitVO)==null?void 0:o.insurancePeriodValueList)||[]):((l=a.originData)==null?void 0:l.periodType)===2?L([{value:"year_1",name:"1\u5E74"}],["year_1"]):L((d=a.enums)==null?void 0:d.RISK_INSURANCE_PERIOD,((u=a.mainRiskData.riskInsureLimitVO)==null?void 0:u.insurancePeriodValueList)||[])}),k=$(()=>{var e,o,l,d,u,p,f,w;return((e=a.originData)==null?void 0:e.riskType)===1?L((o=a==null?void 0:a.enums)==null?void 0:o.RISK_PAYMENT_PERIOD,((l=a.originData.riskInsureLimitVO)==null?void 0:l.paymentPeriodValueList)||[]):((d=a.originData)==null?void 0:d.exemptFlag)===1?L(Ke,[`${(p=(u=a==null?void 0:a.originData)==null?void 0:u.riskInsureLimitVO)==null?void 0:p.paymentPeriodRule}`]):((f=a.originData)==null?void 0:f.periodType)===2?L([{value:"year_1",name:"1\u5E74\u4EA4"}],["year_1"]):L(a.enums.RISK_PAYMENT_PERIOD,((w=a.mainRiskData.riskInsureLimitVO)==null?void 0:w.paymentPeriodValueList)||[])}),O=$(()=>{var e,o,l,d,u;return((e=a.originData)==null?void 0:e.riskType)===1?L(Q,((o=a.originData.riskInsureLimitVO)==null?void 0:o.paymentFrequencyList)||[]):((l=a.originData.riskInsureLimitVO)==null?void 0:l.paymentTypeRule)===1?L(Q,((d=a.mainRiskData.riskInsureLimitVO)==null?void 0:d.paymentFrequencyList)||[]):L(Q,((u=a.mainRiskData.riskInsureLimitVO)==null?void 0:u.paymentFrequencyList)||[])}),r=$(()=>{var l,d;let e=0,o=0;return(((d=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:d.paymentMethodLimitList)||[]).forEach((u,p)=>{p===0&&(e=u.minAmount,o=u.maxAmount),e>u.minAmount&&(e=u.minAmount),o<u.maxAmount&&(o=u.maxAmount)}),t.formInfo.amount=t.formInfo.amount||e,{min:e,max:o}}),D=$(()=>{var l,d;let e=0,o=0;return(((d=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:d.paymentMethodLimitList)||[]).forEach((u,p)=>{p===0&&(e=u.minPremium,o=u.maxPremium),e>u.minPremium&&(e=u.minPremium),o<u.maxPremium&&(o=u.maxPremium)}),t.formInfo.premium=t.formInfo.premium||e,{min:e,max:o}}),m=$(()=>{var l,d,u,p;const e=((d=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:d.minCopy)||1,o=(p=(u=a.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:p.maxCopy;return t.formInfo.copy=`${t.formInfo.copy||e||1}`,{min:e,max:o}}),y=(e,o,l)=>{var u,p;const d=((p=(u=a.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:p.increaseDecreaseNum)||1;if(l==="sumInsured"){if(r.value.max&&+e>r.value.max)return`\u91D1\u989D\u6700\u5927${r.value.max}\u5143`;if(+e<r.value.min)return`\u91D1\u989D\u6700\u5C0F${r.value.min}\u5143`}else{if(D.value.max&&+e>D.value.max)return`\u91D1\u989D\u6700\u5927${D.value.max}\u5143`;if(+e<D.value.min)return`\u91D1\u989D\u6700\u5C0F${D.value.min}\u5143`}return+e%d===0?"":`\u91D1\u989D\u5FC5\u987B\u662F${d}\u7684\u500D\u6570`};return $e(()=>{var o,l;const e={riskType:a.originData.riskType,riskId:a.originData.id,riskName:a.originData.riskName,riskCode:a.originData.riskCode,mainRiskCode:a.originData.riskType!==1?(o=a.mainRiskData)==null?void 0:o.riskCode:void 0,mainRiskId:a.originData.riskType!==1?(l=a.mainRiskData)==null?void 0:l.id:void 0,riskCategory:a.originData.riskCategory,liabilityVOList:(a.originData.riskLiabilityInfoVOList||[]).map(d=>H(K({},d),{liabilityAttributeCode:d.liabilityAttributeType,liabilityCode:d.liabilityCode,liabilityRateType:d.liabilityRateType}))};Object.assign(t==null?void 0:t.formInfo,e)}),U(()=>{var e;return(e=t.formInfo)==null?void 0:e.paymentFrequency},(e=0)=>{var o,l,d;[3].includes(((o=a.originData.riskCalcMethodInfoVO)==null?void 0:o.saleMethod)||0)&&(((d=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:d.paymentMethodLimitList)||[]).forEach(u=>{+u.paymentFrequency==+e&&Object.assign(t.formInfo,{amount:u.perCopyAmount,premium:u.perCopyPremium})}),+e==1&&t.formInfo.chargePeriod!=="single"&&(t.formInfo.chargePeriod="single")}),U(()=>{var e;return(e=t.formInfo)==null?void 0:e.copy},e=>{var o,l;((o=a.originData.riskCalcMethodInfoVO)==null?void 0:o.saleMethod)===4&&(t.formInfo.amount=(l=a.originData.riskCalcMethodInfoVO)==null?void 0:l.fixedAmount)}),U(()=>{var e;return(e=t.formInfo)==null?void 0:e.chargePeriod},e=>{e==="single"&&+(t.formInfo.paymentFrequency||0)!=1&&(t.formInfo.paymentFrequency=1)}),U(()=>a==null?void 0:a.mainRiskInfo,e=>{var o,l,d,u,p,f;e&&a.originData.riskType===2&&(((l=(o=a.originData)==null?void 0:o.riskInsureLimitVO)==null?void 0:l.insurancePeriodRule)===1&&(e.coveragePeriod?b.value.coveragePeriod.disabled=!0:b.value.coveragePeriod.prevent=!0,t.formInfo.coveragePeriod=e.coveragePeriod||""),((u=(d=a.originData)==null?void 0:d.riskInsureLimitVO)==null?void 0:u.paymentPeriodRule)===1&&(e.chargePeriod?b.value.chargePeriod.disabled=!0:b.value.chargePeriod.prevent=!0,t.formInfo.chargePeriod=e.chargePeriod||""),((f=(p=a.originData)==null?void 0:p.riskInsureLimitVO)==null?void 0:f.paymentTypeRule)===1&&(e.paymentFrequency?b.value.paymentFrequency.disabled=!0:b.value.paymentFrequency.prevent=!0,t.formInfo.paymentFrequency=e.paymentFrequency||0))},{immediate:!0,deep:!0}),(e,o)=>{var J,X,Z,ee,ie,te,oe,ae,ne,ue,re,le,se,de,me,fe,ce,pe,ye,ge,Ie,ke,De,Ve,Le,ve,be,Fe,Ce,Ae;const l=R("ProSvg"),d=R("ProTitle"),u=R("VanStepper"),p=R("VanField"),f=R("ProRadioButton"),w=R("ProExpand");return I(),x("div",ei,[C(d,{"risk-type":n.originData.riskType,title:n.originData.riskName},{default:F(()=>[n.removeRiskList.includes(n.originData.id)?(I(),x("div",{key:0,class:"delete-risk",onClick:o[0]||(o[0]=s=>n.removeRisk(n.originData.id))},[C(l,{name:"delete",color:"#0d6efe"})])):h("",!0)]),_:1},8,["risk-type","title"]),((J=n.originData.riskCalcMethodInfoVO)==null?void 0:J.saleMethod)===1&&n.originData.exemptFlag===2?(I(),A(p,{key:0,modelValue:i(t).formInfo.amount,"onUpdate:modelValue":o[2]||(o[2]=s=>i(t).formInfo.amount=s),label:"\u4FDD\u989D",name:"amount",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...s)=>y(...s,"sumInsured")}]},{input:F(()=>{var s,v;return[P("div",ii,[C(u,{modelValue:i(t).formInfo.amount,"onUpdate:modelValue":o[1]||(o[1]=E=>i(t).formInfo.amount=E),"input-width":"64px",min:i(r).min,step:((s=n.originData.riskCalcMethodInfoVO)==null?void 0:s.increaseDecreaseNum)||1,max:i(r).max},null,8,["modelValue","min","step","max"]),P("span",ti,_(`\u91D1\u989D\u6700\u4F4E${i(r).min}\u5143\uFF0C\u4E3A${((v=n.originData.riskCalcMethodInfoVO)==null?void 0:v.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):h("",!0),((Z=(X=n.originData)==null?void 0:X.riskCalcMethodInfoVO)==null?void 0:Z.saleMethod)===2?(I(),A(p,{key:1,modelValue:i(t).formInfo.premium,"onUpdate:modelValue":o[4]||(o[4]=s=>i(t).formInfo.premium=s),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...s)=>y(...s,"premium")}]},{input:F(()=>{var s,v,E,B;return[P("div",oi,[C(u,{modelValue:i(t).formInfo.premium,"onUpdate:modelValue":o[3]||(o[3]=N=>i(t).formInfo.premium=N),step:((v=(s=n.originData)==null?void 0:s.riskCalcMethodInfoVO)==null?void 0:v.increaseDecreaseNum)||1,min:i(D).min,"input-width":"64px",max:i(D).max},null,8,["modelValue","step","min","max"]),P("span",ai,_(`\u91D1\u989D\u6700\u4F4E${i(D).min}\u5143\uFF0C\u4E3A${((B=(E=n.originData)==null?void 0:E.riskCalcMethodInfoVO)==null?void 0:B.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):h("",!0),((ie=(ee=n.originData)==null?void 0:ee.riskCalcMethodInfoVO)==null?void 0:ie.saleMethod)===3||((oe=(te=n.originData)==null?void 0:te.riskCalcMethodInfoVO)==null?void 0:oe.saleMethod)===4&&(((ne=(ae=n.originData)==null?void 0:ae.riskCalcMethodInfoVO)==null?void 0:ne.minCopy)||((re=(ue=n.originData)==null?void 0:ue.riskCalcMethodInfoVO)==null?void 0:re.maxCopy))?(I(),A(p,{key:2,modelValue:i(t).formInfo.copy,"onUpdate:modelValue":o[6]||(o[6]=s=>i(t).formInfo.copy=s),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:F(()=>[P("div",ni,[C(u,{modelValue:i(t).formInfo.copy,"onUpdate:modelValue":o[5]||(o[5]=s=>i(t).formInfo.copy=s),step:1,min:i(m).min,max:i(m).max},null,8,["modelValue","min","max"]),P("span",ui,_(`${i(m).min}\u4EFD\u8D77\u8D2D\uFF0C\u6700\u591A\u8D2D\u4E70${i(m).max}\u4EFD`),1)])]),_:1},8,["modelValue"])):h("",!0),(![1].includes(((le=n.originData.riskCalcMethodInfoVO)==null?void 0:le.saleMethod)||0)||((se=n.originData)==null?void 0:se.exemptFlag)===1)&&(n.originData.riskCalcMethodInfoVO.fixedAmount||((me=i(T))==null?void 0:me[(de=n.originData)==null?void 0:de.riskCode]))?(I(),A(p,{key:3,label:"\u4FDD\u989D"},{input:F(()=>{var s,v,E,B;return[P("div",null,_(((s=n.originData.riskCalcMethodInfoVO)==null?void 0:s.fixedAmount)||((B=(E=i(T))==null?void 0:E[(v=n.originData)==null?void 0:v.riskCode])==null?void 0:B.amount)),1)]}),_:1})):h("",!0),!V((ce=(fe=n.originData)==null?void 0:fe.riskInsureLimitVO)==null?void 0:ce.insurancePeriodValueList)||!V((ye=(pe=n.originData)==null?void 0:pe.riskInsureLimitVO)==null?void 0:ye.insurancePeriodRule)?(I(),A(p,{key:4,modelValue:i(t).formInfo.coveragePeriod,"onUpdate:modelValue":o[8]||(o[8]=s=>i(t).formInfo.coveragePeriod=s),label:"\u4FDD\u969C\u671F\u95F4",name:"coveragePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4FDD\u969C\u671F\u95F4"}]},{input:F(()=>[C(f,{modelValue:i(t).formInfo.coveragePeriod,"onUpdate:modelValue":o[7]||(o[7]=s=>i(t).formInfo.coveragePeriod=s),disabled:b.value.coveragePeriod.disabled,prevent:b.value.coveragePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4FDD\u969C\u671F\u95F4":"",options:i(c),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):h("",!0),!V((Ie=(ge=n.originData)==null?void 0:ge.riskInsureLimitVO)==null?void 0:Ie.paymentPeriodValueList)||!V((De=(ke=n.originData)==null?void 0:ke.riskInsureLimitVO)==null?void 0:De.paymentPeriodRule)?(I(),A(p,{key:5,modelValue:i(t).formInfo.chargePeriod,"onUpdate:modelValue":o[10]||(o[10]=s=>i(t).formInfo.chargePeriod=s),label:"\u4EA4\u8D39\u671F\u95F4",name:"chargePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u671F\u95F4"}]},{input:F(()=>[C(f,{modelValue:i(t).formInfo.chargePeriod,"onUpdate:modelValue":o[9]||(o[9]=s=>i(t).formInfo.chargePeriod=s),disabled:b.value.chargePeriod.disabled,prevent:b.value.chargePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u671F\u95F4":"",options:i(k),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):h("",!0),!V((Ve=n.originData.riskInsureLimitVO)==null?void 0:Ve.paymentFrequencyList)||!V((Le=n.originData.riskInsureLimitVO)==null?void 0:Le.paymentPeriodRule)?(I(),A(p,{key:6,modelValue:i(t).formInfo.paymentFrequency,"onUpdate:modelValue":o[12]||(o[12]=s=>i(t).formInfo.paymentFrequency=s),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u65B9\u5F0F"}]},{input:F(()=>[C(f,{modelValue:i(t).formInfo.paymentFrequency,"onUpdate:modelValue":o[11]||(o[11]=s=>i(t).formInfo.paymentFrequency=s),disabled:b.value.paymentFrequency.disabled,prevent:b.value.paymentFrequency.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u65B9\u5F0F":"",options:i(O)},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):h("",!0),V((be=(ve=n.originData)==null?void 0:ve.riskInsureLimitVO)==null?void 0:be.annuityDrawValueList)?h("",!0):(I(),A(p,{key:7,modelValue:i(t).formInfo.annuityDrawDate,"onUpdate:modelValue":o[14]||(o[14]=s=>i(t).formInfo.annuityDrawDate=s),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65F6\u95F4"}]},{input:F(()=>{var s;return[C(f,{modelValue:i(t).formInfo.annuityDrawDate,"onUpdate:modelValue":o[13]||(o[13]=v=>i(t).formInfo.annuityDrawDate=v),options:L(i(He),((s=n.originData.riskInsureLimitVO)==null?void 0:s.annuityDrawValueList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),V((Ce=(Fe=n.originData)==null?void 0:Fe.riskInsureLimitVO)==null?void 0:Ce.annuityDrawFrequencyList)?h("",!0):(I(),A(p,{key:8,modelValue:i(t).formInfo.annuityDrawType,"onUpdate:modelValue":o[16]||(o[16]=s=>i(t).formInfo.annuityDrawType=s),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65B9\u5F0F"}]},{input:F(()=>{var s;return[C(f,{modelValue:i(t).formInfo.annuityDrawType,"onUpdate:modelValue":o[15]||(o[15]=v=>i(t).formInfo.annuityDrawType=v),options:L(i(Qe),((s=n.originData.riskInsureLimitVO)==null?void 0:s.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),(I(!0),x(W,null,z(n.originData.riskLiabilityInfoVOList||[],(s,v)=>(I(),x("div",{key:v},[s.optionalFlag===1&&!V(s.liabilityAttributeValueList)?(I(),A(p,{key:0,modelValue:i(t).formInfo.liabilityVOList[v].liabilityAttributeValue,"onUpdate:modelValue":E=>i(t).formInfo.liabilityVOList[v].liabilityAttributeValue=E,label:s.liabilityName,name:"liabilityAttributeValue",rules:[{required:s.liabilityAttributeValue,message:`\u8BF7\u9009\u62E9${s.liabilityName}`}]},{input:F(()=>{var E,B;return[P("div",null,[V(s.liabilityAttributeValueList)?(I(),x("span",ri,"50\u4E07")):(I(),A(f,{key:1,modelValue:i(t).formInfo.liabilityVOList[v].liabilityAttributeValue,"onUpdate:modelValue":N=>i(t).formInfo.liabilityVOList[v].liabilityAttributeValue=N,options:L(i(Oe),(B=(E=n.originData.riskLiabilityInfoVOList)==null?void 0:E[v])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):h("",!0),s.optionalFlag!==1?(I(),A(p,{key:1,modelValue:i(t).formInfo.liabilityVOList[v].liabilityAttributeValue,"onUpdate:modelValue":E=>i(t).formInfo.liabilityVOList[v].liabilityAttributeValue=E,label:s.liabilityName,name:"liabilityAttributeValue"},{input:F(()=>{var E,B;return[P("div",null,[V(s.liabilityAttributeValueList)?(I(),A(f,{key:0,modelValue:i(t).formInfo.liabilityVOList[v].liabilityAttributeValue,"onUpdate:modelValue":N=>i(t).formInfo.liabilityVOList[v].liabilityAttributeValue=N,options:i(We)},null,8,["modelValue","onUpdate:modelValue","options"])):(I(),A(f,{key:1,modelValue:i(t).formInfo.liabilityVOList[v].liabilityAttributeValue,"onUpdate:modelValue":N=>i(t).formInfo.liabilityVOList[v].liabilityAttributeValue=N,options:L(i(Oe),(B=(E=n.originData.riskLiabilityInfoVOList)==null?void 0:E[v])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label"])):h("",!0)]))),128)),((Ae=n.originData)==null?void 0:Ae.relationDesc)?(I(),x("div",li,[C(w,{title:"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E"},{default:F(()=>[P("div",null,_(n.originData.relationDesc),1)]),_:1})])):h("",!0)])}}});var di=G(si,[["__scopeId","data-v-5eec8cac"]]);const mi=n=>(qe("data-v-1f13cbe8"),n=n(),Ye(),n),fi={class:"com-risk-list-wrapper"},ci=mi(()=>P("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),pi={class:"risk-list"},yi={class:"cell-title"},gi={class:"title"},Ii={class:"footer-bar"},ki=Pe("\u786E\u8BA4"),Di=S({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(n,{emit:a}){const g=n,T=M([]),b=M([]),t=M([...g.disabled]),V=j({show:g.show,currentChecked:[...g.modelValue]}),L=(r,D)=>{if(!g.collocationList.length){if(D){V.currentChecked=[];return}V.currentChecked.push(r);return}let m=V.currentChecked,y=t.value;D?(g.collocationList.forEach(e=>{r===e.riskId&&(e.collocationType===2?m=m.filter(o=>o!==e.collocationRiskId||o!==r):e.collocationType===3?(m=m.filter(o=>o!==r),y=y.filter(o=>o!==e.collocationRiskId)):m=m.filter(o=>o!==r))}),V.currentChecked=m,t.value=y):(g.collocationList.forEach(e=>{r===e.riskId&&(D||(e.collocationType===2?m.push(e.collocationRiskId):e.collocationType===3&&y.push(e.collocationRiskId),m.push(r)))}),V.currentChecked.push(...m),t.value=y)},c=r=>{var m,y,e;if(t.value.includes(r))return;const D=V.currentChecked.includes(r);L(r,D),(e=(y=(m=T==null?void 0:T.value)==null?void 0:m[r])==null?void 0:y.toggle)==null||e.call(y)},k=()=>{a("close")},O=()=>{const r=g.riskList.filter(D=>V.currentChecked.includes(D.id));a("update:modelValue",[...new Set(b.value)]),a("finished",r,t.value),a("close")};return _e(()=>{T.value=[]}),U(()=>V.currentChecked,r=>{b.value=r},{deep:!0,immediate:!0}),U(()=>g.modelValue,r=>{b.value=r||[],t.value.push(...r||[])},{deep:!0,immediate:!0}),(r,D)=>{const m=R("van-checkbox"),y=R("VanCell"),e=R("van-cell-group"),o=R("van-checkbox-group"),l=R("VanButton"),d=R("VanPopup");return I(),x("div",fi,[C(d,{show:i(V).show,"onUpdate:show":D[1]||(D[1]=u=>i(V).show=u),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",round:"",position:"bottom",closeable:"",onClose:k},{default:F(()=>[ci,P("div",pi,[C(o,{modelValue:b.value,"onUpdate:modelValue":D[0]||(D[0]=u=>b.value=u)},{default:F(()=>[C(e,{inset:""},{default:F(()=>[(I(!0),x(W,null,z(n.riskList,u=>(I(),A(y,{key:u.id,title:u.riskName,disabled:t.value.includes(u.id),onClick:p=>c(u.id)},{"right-icon":F(()=>[C(m,{ref_for:!0,ref:p=>T.value[u.id]=p,shape:"square",disabled:t.value.includes(u.id),name:u.id,onClick:we(p=>c(u.id),["stop"])},null,8,["disabled","name","onClick"])]),title:F(()=>[P("div",yi,[P("div",gi,_(u.riskName),1)])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),P("div",Ii,[C(l,{type:"primary",disabled:!i(V).currentChecked.length,block:"",onClick:O},{default:F(()=>[ki]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var Vi=G(Di,[["__scopeId","data-v-1f13cbe8"]]);const Li={class:"risk-list-wrapper"},vi={key:0,class:"add-rider-risk"},bi={class:"left-part"},Fi=Pe("+ \u9644\u52A0\u9669"),Ci=S({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(n){const a=n,g=Y("source")||{},[T,b]=Ee(!1);M(null),M(null);const t=j({mainRiskInfo:a.riskInfo,riskInfo:a.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),V=(c,k)=>{t.currentRiskList=t.currentRiskList.concat(c),t.disabledList=k},L=c=>{Se.confirm({message:"\u786E\u5B9A\u8981\u5220\u9664\u9644\u52A0\u9669\u4E48\uFF1F"}).then(()=>{var O;const k=[c];(((O=t.mainRiskData)==null?void 0:O.collocationVOList)||[]).forEach(r=>{c===r.riskId&&(r.collocationType===2||r.collocationType===3)&&k.push(r.collocationRiskId)}),t.checkedList=t.checkedList.filter(r=>!k.includes(r)),t.currentRiskList=t.currentRiskList.filter(r=>k.includes(r.id)?(Object.assign(t.riskInfo,{[r.id]:void 0}),!1):!0),t.disabledList=t.disabledList.filter(r=>!k.includes(r))}).catch(()=>{})};return U(()=>t.currentRiskList,c=>{const k=[t.mainRiskData,...c];let O=[],r=[];const D=[];k.forEach((m,y)=>{var o,l,d;const e=((o=m==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:o.riskFactorRelationList)||[];O=O.concat(e.filter(u=>u.factorObject==="insured").map(u=>u.factorCode)),r=r.concat(e.filter(u=>u.factorObject==="holder").map(u=>u.factorCode)),D.push((l=m==null?void 0:m.riskInsureLimitVO)==null?void 0:l.minHolderAge,(d=m==null?void 0:m.riskInsureLimitVO)==null?void 0:d.maxHolderAge)}),(c||[]).forEach(m=>{var e,o;const y={riskType:m.riskType,riskId:m.id,riskCode:m.riskCode,riskName:m.riskName,mainRiskCode:m.riskType!==1?(e=t.mainRiskData)==null?void 0:e.riskCode:void 0,mainRiskId:m.riskType!==1?(o=t.mainRiskData)==null?void 0:o.id:void 0,riskCategory:m.riskCategory,liabilityVOList:(m.riskLiabilityInfoVOList||[]).map(l=>H(K({},l),{liabilityAttributeCode:l.liabilityAttributeType,liabilityCode:l.liabilityCode,liabilityRateType:l.liabilityRateType}))};t.riskInfo[m.id]||Object.assign(t.riskInfo,{[m.id]:y})}),a.pickFactor({insuredFactorList:[...new Set(O)],holderFactorList:[...new Set(r)],ageRange:D})},{deep:!0,immediate:!0}),U(()=>a.riskInfo,c=>{t.mainRiskInfo=Object.values(c||{}).find(k=>(k==null?void 0:k.riskType)===1)||{}},{deep:!0,immediate:!0}),U(()=>a.originData,c=>{let k=[];const O=[];g.origin==="proposal"&&!(g.type==="add"||g.type==="repeatAdd")?((c||[]).forEach(r=>{r.riskType===1&&(t.mainRiskData=r),k.push(r)}),k=k.filter(r=>g.showRiskList.includes(r.id))):(c||[]).forEach(r=>{r.riskType===1?(t.mainRiskData=r,k.push(r)):r.collocationType===2?k.push(r):O.push(r)}),t.riderRiskList=O,t.currentRiskList=k},{deep:!0,immediate:!0}),(c,k)=>{var r,D,m;const O=R("ProCheckButton");return I(),x("div",Li,[(I(!0),x(W,null,z(i(t).currentRiskList,(y,e)=>(I(),A(di,{key:y.id,"form-info":i(t).riskInfo[y.id],index:e,enums:n.enums,"main-risk-data":i(t).mainRiskData,"main-risk-info":i(t).mainRiskInfo,"origin-data":y,"remove-risk":L,"remove-risk-list":i(t).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"]))),128)),((r=i(t).riderRiskList)==null?void 0:r.length)-((D=i(t).checkedList)==null?void 0:D.length)&&i(g).origin!=="proposal"?(I(),x("div",vi,[P("span",bi,_(`\u5171\u6709${i(t).riderRiskList.length-i(t).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),C(O,{activated:"",onClick:k[0]||(k[0]=y=>i(b)(!0))},{default:F(()=>[Fi]),_:1})])):h("",!0),i(T)?(I(),A(Vi,{key:1,modelValue:i(t).checkedList,"onUpdate:modelValue":k[1]||(k[1]=y=>i(t).checkedList=y),show:i(T),disabled:i(t).disabledList,"risk-list":i(t).riderRiskList,"collocation-list":((m=i(t).mainRiskData)==null?void 0:m.collocationVOList)||[],onFinished:V,onClose:k[2]||(k[2]=y=>i(b)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):h("",!0)])}}});var Ti=G(Ci,[["__scopeId","data-v-1afa9508"]]);export{Pi as P,Ti as R,Vi as a};

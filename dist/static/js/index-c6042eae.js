var T=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var g=(l,a,e)=>a in l?T(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,k=(l,a)=>{for(var e in a||(a={}))H.call(a,e)&&g(l,e,a[e]);if(U)for(var e of U(a))P.call(a,e)&&g(l,e,a[e]);return l},C=(l,a)=>K(l,Q(a));import{t as Y}from"./theme-ea709837.js";import{g as O,E as u,y as b,_ as E,r as i,j as c,k as v,m as p,p as Z,t as j,z as m,A as n,C as M,J as R}from"./vendor-505c98f2.js";var W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAAB0CAMAAABjROYVAAAAAXNSR0IArs4c6QAAAT5QTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////tGB6DAAAAGl0Uk5TAAIEBQYHCgsMDxAREhMUGRoeICctMzQ4OTo7PUBBREZISUpLTE1OT1JbYWNnaG1wdHV2eXp7g4uNkZSVlpecnaivsLG4ubvFxsfKy87S1dfY2d/g4eLk5+jp6uzt7/Dz9Pb3+fr7/P3+/72HPAAABS9JREFUaN7Fm/0/G00QwEfloaUpRb1WKaXo4yVUCBpvqaDeizxIEUnI9///B54f7hKJXu72Lnu5+c3H7H4/t5mdnZmdFXEnjZ3jkXgieXh2k83enB0mE/HIeGej+Cdtk/GTPBaSP4lPtvkAfDW6eoytHK+OvtKK/BC7RkGuYx90Ed9Ejp7nLVzsrMyM9HV1hEOhcEdX38jMys5F4fn/R5E3GpDvorfFCXPJ6GCzlU7zYDSZK2rdRt/VajvL9+Zc6bXh13aar4d/pE3V++VarCq0mDG/cWsipKA+sWV+b2Yx5JX56dS0j4Ww6pDwgmlxJ588Ids3jOGXs01uhjXNXhrjNtrdM78Yv9DVtOuF+mf6yrCCL2693VIB4Gmtxcsitaw9ARSWXPnH93sA7Hd7NYfuXwDsvVcfMpAGyM01eDf8hrkcQHpAdcDXB4Dzntq2eM85wMNXNe1vjwDbrbX6stZtgMdvKrrfAfiuw2srT/UdID+l56yYyitRvwFkxnSdUGMZAIcV/voI/OnXdxL3/wEeba1p4AHIaGSK9GeAB5ud8z4N5MdEq4w9AumqXqJxD2BKNMsUwF41j7ikba9YbIilKudKAdj2I3bdBgqWZ057Gvjd6ge09RxIW52vG0CuR3yRnhywYRGbAMz5lRzMAfwVwYROgf0Gv6AN+8DpyyBkEXjqFt+k+wlYfBHfZoA1H5MvWQMylfHwMnDV4ie05QpYrsgd7oF/xVeZBu7LM44ocBnyFxq6BKJledktMCs+yyxw+5zTRYDrJr+hTddApPTnEbAgvssCcFTKs4Fc2H9oOAcUc/UYsGmv/zZ2cHcQe1uDgojIFhAzaxjXwISt9sf/AEgNVVMYMhU+2k4zAVwb1ZBRIG27X96mzBw7WyWUGcuaCinbbw2lgVEREVl19ICxUh3DmlpillavivwAVkVE5BgYttU9wJZaxuTAdqJh4FhEpA3I2dYw5A47ajmTO9uJXueANhGZBJKi+qV/UyuYDl8qSWBSROKVLtH+N/2bWsl0+E0lCsRF5AQYdNilqarUF8yUw04dBE5EGvNQaHbwJUPZKtQXzOyQw0TNBcg3Sidw4ZwbWFPHsgAOG6pCLoBOGQd2xBvVPVN2gHGZB1bEE9UDU1aAiKwDM+KF6oUpM8C6/AQ+ixeqF6aMAD9lF+gVL1QvTOkFduUQ6JJaqapM6QIO5QzokBqpykzpAM7kBlAPVayp6kwJAzeSBVxEvFZUF0wJAVm3UAuqG6YJdbe8FlRXTHN5XRlS7VDDkNxsGQ3La2yZJNBXP0PqA5KSAEbqt2VGgIS6w9fjHGaAuEQUjzZNbtA42hQPcV0O3zjE1cIVbUebEa4oBWbaDnEzMFMJQfWFK2YIqhJs6wvMisG2QlqhLwQtphUKCZS2YLuUQCmkitrSilKq6CoprjGBek6KndN/XaliWfrvXOjQlRSXFTokBmzVI/0vK+k4F680FToqileOZTpNJZ2KMp1zQfJjyql4lXIuXr0oSDqXXnWU6V6UXgMpMhvl9Ok6l9MDuTgI5ookkMsg36+9flldewVywRfMVaZxaXte50vbQK6ng7mID6blwKfmirxtc0UwbSTBNMwE0xoUTBNUMO1ewTS2FVv4fte1hS+YZkUdbZn7rtsyg2lAlVpabUNeW20lmKZiqa19+vSTV3N4bhTfVGsU36y9UVwCaYkXCaT5X8TymUNv8ZlDrz/PHIxcve4POoxqSP2frphWVe9HOiX/2Dk+v57YLT5H2k2sz7t/jvQ/OUv8Dn3rFHYAAAAASUVORK5CYII=";const z={class:"item"},q={class:"footer"},$=O({props:{show:{type:Boolean,default:!1},contentList:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},text:{type:String,default:""},beforeReadOverText:{type:String,default:"\u540C\u610F\uFF0C\u4E0B\u4E00\u6761"},forceReadCound:{type:Number,default:0}},emits:["update:show","submit"],setup(l,{emit:a}){const e=l,f=u(e.show),s=u(e.contentList.map((o,r)=>C(k({},o),{disabled:!0,readDisabled:!0}))),t=u(e.activeIndex),A=u(0),D=u(null),V=b(()=>{var o,r;return(r=(o=s.value)==null?void 0:o[t.value])==null?void 0:r.attachmentUri}),h=b(()=>s.value[t.value].readDisabled),F=b(()=>t.value>=e.forceReadCound-1||A.value>=e.forceReadCound?!1:A.value<e.forceReadCound?t.value!==e.forceReadCound-1:!1),X=()=>{t.value+=1},x=()=>{a("update:show",!1),a("submit")};E(()=>e,()=>{f.value=e.show,t.value=e.activeIndex},{deep:!0,immediate:!0});const w=o=>{o&&Math.floor(o.target.scrollHeight-o.target.scrollTop)===o.target.clientHeight&&s.value[t.value].readDisabled&&(s.value[t.value].disabled=!1,s.value[t.value].readDisabled=!1,s.value[t.value+1].disabled=!1,A.value+=1)};return E(()=>t.value,()=>{e.show&&(A.value>=e.forceReadCound&&s.value.forEach(o=>{o.disabled=!1,o.readDisabled=!1}),window.removeEventListener("scroll",w,!0),setTimeout(()=>{window.addEventListener("scroll",w,!0)},1e3))},{immediate:!0}),(o,r)=>{const N=i("ProTab"),G=i("ProFilePreview"),B=i("VanButton"),I=i("van-config-provider"),S=i("ProPopup");return c(),v(S,{show:f.value,"onUpdate:show":r[1]||(r[1]=d=>f.value=d),height:80,class:"file-preview-popup-wrap",closeable:!1},{default:p(()=>[Z(I,{"theme-vars":n(Y)},{default:p(()=>[f.value?(c(),v(N,{key:0,active:t.value,"onUpdate:active":r[0]||(r[0]=d=>t.value=d),list:s.value.map((d,y)=>({title:d.attachmentName,disabled:y==t.value?!1:d.disabled||!1,slotName:`guarantee-${y}`})),class:"tab"},null,8,["active","list"])):j("",!0),m("div",{ref_key:"previewRef",ref:D,class:"list",onScroll:w},[m("div",z,[(c(),v(G,{key:n(V),content:n(V),type:"pdf"},null,8,["content"]))])],544),m("div",q,[n(F)?(c(),v(B,{key:0,disabled:n(h),type:"primary",block:"",round:"",onClick:X},{default:p(()=>[M(R(`${l.beforeReadOverText}(${t.value+1}/${l.forceReadCound})`),1)]),_:1},8,["disabled"])):(c(),v(B,{key:1,disabled:n(h),type:"primary",block:"",round:"",onClick:x},{default:p(()=>[M(R(e.text),1)]),_:1},8,["disabled"]))])]),_:1},8,["theme-vars"])]),_:1},8,["show"])}}});export{$ as _,W as c};

!function(){var e=document.createElement("style");e.innerHTML=".net-sale-wrap[data-v-f9a99178]{padding-bottom:1.33333rem;background:#f1f5fc}.net-sale-wrap .footer-button[data-v-f9a99178]{justify-content:space-between}.net-sale-wrap .product-name[data-v-f9a99178]{font-size:.48rem;font-weight:500;line-height:1.06667rem}.net-sale-wrap .part[data-v-f9a99178]{background-color:#fff;padding:0 var(--zaui-page-border, .4rem)}.net-sale-wrap .part .common-cell-wrapper[data-v-f9a99178]{height:1.38667rem;align-items:center;width:100%;display:inline-flex}.net-sale-wrap .part .common-cell-wrapper[data-v-f9a99178] .cell-container{align-items:flex-start;justify-content:center;width:100%;color:var(--van-field-label-color);font-size:.4rem}.net-sale-wrap .radio-group[data-v-f9a99178]{width:100%}.net-sale-wrap .radio-group .radio-btn[data-v-f9a99178]{justify-content:space-between}.net-sale-wrap .price[data-v-f9a99178]{color:#393d46;font-size:.45333rem;font-weight:400}.net-sale-wrap .price span[data-v-f9a99178]{color:var(--van-primary-color);font-weight:700}.net-sale-wrap .right[data-v-f9a99178]{width:3.73333rem;background:var(--van-primary-color);border-color:var(--van-primary-color)}.net-sale-wrap .footer[data-v-f9a99178]{margin-top:.66667rem;padding:0 var(--zaui-page-border, .4rem)}\n",document.head.appendChild(e),System.register(["./index-legacy-d5c9e76a.js","./debounce-legacy-839a1984.js","./utils-legacy-fe4b3a32.js","./product-legacy-c24f05c5.js","./trial-legacy-5b0231dd.js","./index-legacy-3f20fb09.js","./theme-legacy-14f266cb.js","./nextStep-legacy-b7d19185.js","./index-legacy-d67cb742.js","./infoCollection-legacy-de6b2bf0.js","./pdfh5-legacy-9f98dc45.js","./isObjectLike-legacy-c9ae9091.js","./useStorage-legacy-0eb9f2bd.js","./trial-legacy-2533c12a.js","./relativeTime-legacy-4b5b6d28.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-917e8d54.js","./core-legacy-624aee72.js"],(function(e){"use strict";var t,a,n,r,o,i,d,l,u,c,s,p,f,m,v,I,y,O,g,L,D,w,C,V,h,Y,b,j,x,T,k,R,P,M,N,E;return{setters:[function(e){t=e._,a=e.d,n=e.a,r=e.r,o=e.a0,i=e.x,d=e.aa,l=e.y,u=e.b,c=e.c,s=e.e,p=e.w,f=e.f,m=e.j,v=e.t,I=e.g,y=e.X,O=e.k,g=e.a6,L=e.K,D=e.L,w=e.a4,C=e.T},function(e){V=e.d},function(e){h=e.r,Y=e.t},function(e){b=e.p},function(e){j=e.i,x=e.b,T=e.p},function(e){k=e.default},function(e){R=e.u},function(e){P=e.n},function(e){M=e.default},function(e){N=e.m,E=e.n},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const H=e=>(L("data-v-f9a99178"),e=e(),D(),e),B={class:"net-sale-wrap"},_={class:"part product-name"},S=H((()=>m("span",null,null,-1))),U=H((()=>m("span",null,null,-1))),$={class:"part"},F={class:"footer"};e("default",t(a({__name:"index",setup(e){const t=R(),a=n(),{productCode:L="HTEJBX",tenantId:D="9991000001",agentCode:H="",agencyCode:A,saleChannelId:z,extraInfo:q,preview:J}=a.query,W=r(),X=r("0"),G=r(),K=r(),Q=r(),Z=r([{}]),ee=r([]),te=r({}),ae=r(""),ne=r({min:new Date(o().add(1,"day").format("YYYY-MM-DD")),max:new Date,currentDate:""});let re={};try{re=JSON.parse(decodeURIComponent(q))}catch(me){}const oe=r({agencyId:A,agentCode:H,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"EVENT_NETSALE_underWrite",pageCode:"infoCollection",templateId:re.templateId,iseeBizNo:ae.value,extraInfo:re},orderCategory:1,saleUserId:H,saleChannelId:z,tenantId:D,venderCode:"",tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"xinao",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:D}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),ie=i((()=>(G.value?.productRelationPlanVOList?.length||0)>1)),de=r();d([()=>Q.value,()=>K.value,()=>X.value],(()=>{const{premium:e}=Q.value||{};if(e)de.value=e&&`￥${e}元`;else{const{tenantProductInsureVO:e}=K.value||{};let t={};t=e?.planList?.length?(e?.planList||[]).find((e=>e.planCode===X.value)):e?.planInsureVO;const{paymentFrequencyValue:a,premiumUnit:n}=t?.productPremiumVOList?.[0]||{};de.value=a&&`￥${a}${n||"元"}`}}),{deep:!0,immediate:!0});const le=i((()=>{let e=[];e=G.value?.productRelationPlanVOList?.length?G.value?.productRelationPlanVOList.find((e=>e.planCode===X.value))?.productRiskVoList||[]:G.value?.productRiskVoList||[];const{insuranceStartType:t,riskInsureLimitVO:a}=e?.[0]?.riskDetailVOList?.[0]||{},{maxInsuranceDay:n}=a||{};if(t===+N.CUSTOM_DAY){const[e,t]=(n||"").split(",");e&&t&&t!==e?(ne.value.min=new Date(o(new Date).add(+e||0,"day").format("YYYY-MM-DD")),ne.value.max=new Date(o(new Date).add(+t||0,"day").format("YYYY-MM-DD"))):e&&t&&t===e?ne.value.currentDate=o(new Date).add(t,"day").format("YYYY-MM-DD HH:mm:ss"):t||(ne.value.max=new Date(o(new Date).add(+t||0,"day").format("YYYY-MM-DD")))}return e})),ue=i((()=>{const{insuranceStartType:e,riskInsureLimitVO:t}=le.value?.[0]?.riskDetailVOList?.[0]||{},{maxInsuranceDay:a}=t||{};if(e!==+N.CUSTOM_DAY)return!0;const[n,r]=(a||"").split(",");return n===r})),ce=i((()=>{const e=(le.value||[])?.[0]?.riskDetailVOList?.[0]?.insuranceStartType||1;return ne.value.currentDate?`${o(ne.value.currentDate).format("YYYY-MM-DD")} 00:00:00`:e===+N.CURRENT_DAY?`${o(new Date).format("YYYY-MM-DD HH:mm:ss")}`:`${o(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`})),se=i((()=>{const e=le.value||[],{insuranceEndType:t,riskInsureLimitVO:a}=e?.[0]?.riskDetailVOList?.[0]||{},{insurancePeriodValueList:n}=a||{},[r,i]=(n?.[0]||"").split("_");return t===+E.CURRENT_DAY?`${o(ce.value).add(i||0,r).subtract(1,"day").format("YYYY-MM-DD")} 23:59:59`:t?`${o(ce.value).add(i,r).format("YYYY-MM-DD")} 00:00:00`:""})),pe=async()=>{oe.value.venderCode=G.value?.productBasicInfoVO.insurerCode,oe.value.orderAmount=Q.value?.premium,oe.value.orderRealAmount=Q.value?.premium,oe.value.commencementTime=ce.value,oe.value.expiryDate=se.value,oe.value.extInfo&&(oe.value.extInfo.iseeBizNo=ae.value),oe.value.tenantOrderInsuredList&&(oe.value.tenantOrderInsuredList[0].planCode=X.value),P(((e,t,a)=>{const n={},r=(e=[])=>{(e||[]).forEach((e=>{n[e.riskCode]=e,e.riskPremiumDetailVOList?.length&&r(e.riskPremiumDetailVOList)}))};r(t?.riskPremiumDetailVOList);const o={...a},i={tenantId:D,riskList:ee.value?.[0].riskVOList||[],riskPremium:n,productId:e?.productBasicInfoVO.id||0};return o.tenantOrderHolder&&(o.tenantOrderHolder.certType=o.tenantOrderHolder.certType||w.CERT,o.tenantOrderHolder.certNo=(o.tenantOrderHolder.certNo||"").toLocaleUpperCase()),o.tenantOrderInsuredList&&(o.tenantOrderInsuredList[0].certType=o.tenantOrderInsuredList[0].certType||w.CERT,o.tenantOrderInsuredList[0].certNo=(o.tenantOrderInsuredList[0].certNo||"").toLocaleUpperCase(),o.tenantOrderInsuredList[0].tenantOrderProductList=[{premium:Q.value?.premium,productCode:e?.productBasicInfoVO.productCode,productName:e?.productBasicInfoVO.productName,tenantOrderRiskList:Y(i)}]),o})(G.value,Q.value,oe.value),((e,t)=>{"jumpToPage"===t&&C("提交成功")}))},fe=async()=>{W.value?.validateForm().then((()=>{g.confirm({title:"分享",message:`即将向客户【${oe.value?.tenantOrderHolder?.name}】发送投保确认信息,请确认是否继续？`}).then((()=>{J||pe()}))}))};d([()=>oe.value.tenantOrderInsuredList?.[0].name,()=>oe.value.tenantOrderInsuredList?.[0].birthday,()=>X.value],V((([e,t])=>{e&&t&&(J||(async(e,t,a)=>{const n={holder:{personVO:{certType:w.CERT,...e.tenantOrderHolder,socialFlag:`${e.tenantOrderHolder?.extInfo?.hasSocialInsurance||""}`,occupationCodeList:e.tenantOrderHolder?.extInfo?.occupationCodeList}},insuredVOList:(e?.tenantOrderInsuredList||[]).map((e=>({insuredCode:"",personVO:{...e,certType:w.CERT,socialFlag:`${e?.extInfo?.hasSocialInsurance||""}`,occupationCodeList:e?.extInfo?.occupationCodeList},productPlanVOList:[{insurerCode:t?.productBasicInfoVO.insurerCode,planCode:X.value||"",riskVOList:h(a)}]}))),productCode:t?.productBasicInfoVO.productCode,productId:t?.productBasicInfoVO.id,tenantId:D},{code:r}=await x(n);if("10000"===r){const{code:e,data:t}=await T(n);"10000"===e?(Q.value=t,ee.value=n?.insuredVOList?.[0]?.productPlanVOList||[]):Q.value=void 0}})(oe.value,G.value,le.value))}),500));return d((()=>X.value),(()=>{Z.value&&(te.value=Z.value[X.value])})),l((()=>{(async()=>{await b({productCode:L,withInsureInfo:!0,tenantId:D}).then((({code:e,data:t})=>{"10000"===e&&(K.value=t,document.title=t.tenantProductInsureVO?.productName||"")})),j({productCode:L}).then((({code:e,data:t})=>{"10000"===e&&(G.value=t,Z.value=t.planFactor,t.productRelationPlanVOList?.length&&(X.value=t.productRelationPlanVOList[0].planCode||""),t.productFactor?te.value=t.productFactor:t.planFactor&&(te.value=t.planFactor[X.value]))}))})(),setTimeout((async()=>{ae.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const n=u("ProRadioButton"),r=u("ProCard"),o=u("ProCell"),i=u("ProDatePicker"),d=u("ProPageWrap"),l=u("van-config-provider");return c(),s(l,{"theme-vars":I(t)},{default:p((()=>[f(d,null,{default:p((()=>[m("div",B,[m("div",_,v(I(G)?.productBasicInfoVO?.productFullName),1),I(ie)?(c(),s(r,{key:0,"show-line":!1,title:"保障年期"},{default:p((()=>[f(n,{modelValue:I(X),"onUpdate:modelValue":a[0]||(a[0]=e=>y(X)?X.value=e:null),class:"radio-group",prop:{label:"planName",value:"planCode"},options:I(G)?.productRelationPlanVOList},null,8,["modelValue","options"])])),_:1})):O("",!0),f(k,{ref_key:"formRef",ref:W,"title-collection":{HOLDER:"投保人",INSURER:"被保人",BENEFICIARY:"收益人"},"form-info":I(oe),"send-sms-code":()=>{},"input-align":"left","factor-object":I(te)},{holderName:p((()=>[S])),insurerName:p((()=>[U])),_:1},8,["form-info","send-sms-code","factor-object"]),m("div",$,[f(o,{title:"保费",content:I(de)},null,8,["content"]),I(ue)?(c(),s(o,{key:0,title:"保障期间",content:`${I(ce).split(" ")[0]}~${I(se).split(" ")[0]}`},null,8,["content"])):(c(),s(i,{key:1,modelValue:I(ne).currentDate,"onUpdate:modelValue":a[1]||(a[1]=e=>I(ne).currentDate=e),label:"生效日期",name:"currentDate",type:"date",min:I(ne).min,max:I(ne).max,required:!0},null,8,["modelValue","min","max"]))]),m("div",F,[f(M,{shadow:!1,text:"分享用户确认投保",onClick:fe})])])])),_:1})])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-f9a99178"]]))}}}))}();

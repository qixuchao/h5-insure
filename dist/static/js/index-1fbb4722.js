import{g as I,E as l,O as A,h as y,r as p,j as S,k,m as _,z as u,J as v,A as E,H as w,aq as P,L as T,p as N,a4 as V,a5 as q,C as O,T as C}from"./vendor-276186d8.js";import{b as m,_ as z,r as H,K as J}from"./index-4a73f85b.js";import{b as M}from"./format-d78bf325.js";const Q=e=>m.post("/api/app/insure/insurance/sendSmsCodeToC",{},{params:{mobile:e}}),U=(e,s)=>m.post("/api/app/insure/insurance/checkSmsCode",{},{params:{mobile:e,smsCode:s}});const W=e=>(V("data-v-37951b0a"),e=e(),q(),e),j={class:"page-phone-verify"},K=W(()=>u("div",{class:"title"},"\u901A\u8FC7\u6295\u4FDD\u4EBA\u624B\u673A\u53F7\u9A8C\u8BC1\u540E\uFF0C\u53EF\u8FDB\u884C\u6295\u4FDD\u4FE1\u606F\u9884",-1)),L={class:"phone"},R={class:"input-wrapper"},$=O("\u4E0B\u4E00\u6B65"),G=I({setup(e){const s=l(""),c=l(""),a=l(0);let i;const d=A(),{saleUserId:h="D1234567-1",tenantId:f="9991000007",templateId:X=1,productCode:Y="CQ75CQ76",insurerCode:Z="ancheng",orderNo:B}=d.query,D=()=>{i=setInterval(()=>{a.value-=1,a.value<=0&&clearInterval(i)},1e3)},F=()=>{H({orderNo:B,saleUserId:h,tenantId:f}).then(t=>{var r;const{code:o,data:n}=t;o==="10000"&&(s.value=(r=n==null?void 0:n.tenantOrderHolder)==null?void 0:r.mobile)})},b=()=>{Q(s.value).then(({code:t})=>{t==="10000"&&(a.value=60,D())})},g=()=>{U(s.value,c.value).then(({code:t,data:o})=>{t==="10000"&&o?(C.success("\u9A8C\u8BC1\u6210\u529F"),J("infoPreview",d.query)):C.fail("\u9A8C\u8BC1\u5931\u8D25")})};return y(()=>{F()}),(t,o)=>{const n=p("van-button"),r=p("ProPageWrap");return S(),k(r,null,{default:_(()=>[u("div",j,[K,u("div",L,v(E(M)(s.value)),1),u("div",R,[w(u("input",{"onUpdate:modelValue":o[0]||(o[0]=x=>c.value=x),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",class:"input"},null,512),[[P,c.value]]),u("div",{class:T(["btn",{second:a.value}]),onClick:b},v(a.value?`${a.value}s`:"\u53D1\u9001\u9A8C\u8BC1\u7801"),3)]),N(n,{type:"primary",class:"submit-btn",onClick:g},{default:_(()=>[$]),_:1})])]),_:1})}}});var te=z(G,[["__scopeId","data-v-37951b0a"]]);export{te as default};

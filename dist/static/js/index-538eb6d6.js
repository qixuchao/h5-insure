import{g as q,C as l,a4 as Y,r as C,k as d,m,n as _,j as S,F as O,E,y as a,I as B,B as Q,G as U,H as x,a2 as H,a3 as P,a0 as X,L as ee,M as ae,h as R,z as A,T as j,J as Z,s as te}from"./vendor-e9263418.js";import{g as se,a as le}from"./article-20e0fb3d.js";import{u as oe,Z as ne,d as ie,O as ce}from"./index-b8742a0a.js";import{_ as W}from"./plugin-vue_export-helper-46f75680.js";import{_ as ue}from"./index-e4c11be9.js";import{_ as re}from"./index-654379f5.js";import{o as de}from"./jsbridge-7ca0f033.js";const F=o=>(H("data-v-0022aa93"),o=o(),P(),o),ve={class:"com-article-list"},_e=["onClick"],he={class:"item-left"},fe={class:"article-title"},pe={class:"article-small-tag"},ge={class:"small-tag-left"},me={class:"small-tag-out"},ye={class:"tag-text"},Ce={class:"shenglvhao"},ke=F(()=>a("div",{class:"shenglvhao-item"},null,-1)),$e=F(()=>a("div",{class:"shenglvhao-item"},null,-1)),Ie=F(()=>a("div",{class:"shenglvhao-item"},null,-1)),Le=[ke,$e,Ie],we={class:"list-item-img"},Ne=["src"],be=q({props:{articlelist:{type:Array,default:()=>[]},status:{type:Object,default:()=>{}}},emits:["on-article-click","on-refresh","on-load","update:status"],setup(o,{emit:h}){const y=o,f=l(!1),v=l(!1),p=l(!1);Y(()=>y.status,(i,c)=>{f.value=i.loading,v.value=i.finished,p.value=i.refreshing},{immediate:!0,deep:!0}),Y([f,v,p],(i,c)=>{h("update:status",i)});const k=i=>{h("on-article-click",i)},n=()=>{h("on-refresh")},s=()=>{h("on-load")};return(i,c)=>{const D=C("ZaSvg"),$=C("van-list"),I=C("van-pull-refresh");return d(),m("div",ve,[_(I,{modelValue:p.value,"onUpdate:modelValue":c[1]||(c[1]=t=>p.value=t),onRefresh:n},{default:S(()=>[_($,{loading:f.value,"onUpdate:loading":c[0]||(c[0]=t=>f.value=t),finished:v.value,"finished-text":"- \u6CA1\u6709\u66F4\u591A\u4E86 -",onLoad:s},{default:S(()=>[(d(!0),m(O,null,E(o.articlelist,(t,L)=>{var w,N;return d(),m("div",{key:L,class:"article-list-item",onClick:g=>k(t)},[a("div",he,[a("div",fe,B(t.title),1),a("div",pe,[a("div",ge,[_(D,{name:"eyes",class:"eyes"}),Q(B(`${t.totalHeat} \u9605\u8BFB`),1)]),a("div",me,[(d(!0),m(O,null,E(((w=t.labelCategory)==null?void 0:w.infoLabelDTOList.slice(0,2))||[],(g,T)=>(d(),m("div",{key:`${L}-${T}`,class:"tag-div"},[a("div",ye,B(g.labelName&&g.labelName.length>4?`${g.labelName.slice(0,4)}..`:g.labelName||""),1)]))),128)),U(a("div",Ce,Le,512),[[x,((N=t.labelCategory)==null?void 0:N.infoLabelDTOList.length)>2]])])])]),a("div",we,[a("img",{src:t.coverImage,alt:""},null,8,Ne)])],8,_e)}),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])])}}});var Ae=W(be,[["__scopeId","data-v-0022aa93"]]);const Be=o=>(H("data-v-808521a4"),o=o(),P(),o),Se={class:"top"},De={class:"article-search-area"},Te=["src"],Ve={class:"popup-inner"},Oe=Be(()=>a("div",{class:"popup-title"},"\u5168\u90E8\u5206\u7C7B",-1)),Ee={class:"popup-tag-out"},Ue=["onClick"],xe=q({setup(o){const{getIconUrl:h}=oe(),y=X(),f=l(0),v=l([]),p=l(!0),k=l(""),n=l([]),s=ee({loading:!1,finished:!1,refreshing:!1}),i=l(!1),c=l(0),D=l(10),$=l({}),I=l(!1);window.needOpenWebview=e=>{e==="need"&&(I.value=!0)},console.log(222);const t=l(!1),L=e=>{I.value?de({title:e.title,url:`${ce}/articleDetail?articleId=${e.articleId}&flag=Y&isInnerEntry=Y&isOuterUrl=${e.articleType==="02"?"Y":"N"}`}):y.push({path:"./articleDetail",query:{articleId:e.articleId,flag:"Y",isInnerEntry:"Y",isOuterUrl:e.articleType==="02"?"Y":"N"}})},w=()=>{console.log("search focus>>>"),y.push("./searchArticle")},N=()=>{console.log("icon click>>>"),y.push("./myArticle")},g=e=>{[s.loading,s.finished,s.refreshing]=e},T=()=>{le({queryBean:$.value,pageNum:c.value,pageSize:10}).then(e=>{console.log(e),(e.data.data===null||e.data.data.list===null||e.data.data.list.length===0||e.data.data.list.length<D.value)&&(s.finished=!0),e.data.data.pageNum===1?n.value=e.data.data.list:n.value=n.value.concat(e.data.data.list),s.loading=!1,t.value=!1}).catch(e=>{console.log(e),j.fail("\u52A0\u8F7D\u5931\u8D25"),s.loading=!1,s.finished=!0,t.value=!1})},z=()=>{console.log("fuzijianload"),s.refreshing&&(n.value=[],s.refreshing=!1),c.value+=1,c.value===1&&(t.value=!0),T()},V=()=>{console.log("fuzujian refresh"),s.finished=!1,s.loading=!0,c.value=0,z()},G=e=>{$.value={labelCategoryId:e},n.value=[],window.scrollTo(0,0),V()},M=()=>{se({}).then(e=>{const{data:u}=e;u.data.unshift({labelCategoryName:"\u5168\u90E8",id:""}),v.value=u.data}).catch(e=>{j.fail("\u6807\u7B7E\u67E5\u8BE2\u5931\u8D25"),console.log(e)}),n.value=[],V()};return ae(()=>{M()}),(e,u)=>{const J=C("van-search"),K=C("van-popup");return d(),R(A(ne),{"main-class":"page-article"},{default:S(()=>[a("div",Se,[a("div",De,[_(J,{modelValue:k.value,"onUpdate:modelValue":u[0]||(u[0]=r=>k.value=r),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",shape:"round","left-icon":A(h)("target.searchImg"),class:"search",onClickInput:w},null,8,["modelValue","left-icon"]),a("img",{src:A(h)("article.articleHomeTop"),alt:"",class:"search-after-icon",onClick:N},null,8,Te)]),_(ie,{tagList:v.value,"onUpdate:tagList":u[1]||(u[1]=r=>v.value=r),filter:p.value,"onUpdate:filter":u[2]||(u[2]=r=>p.value=r),"filter-class":"filter-area",onCurrentIndex:G},null,8,["tagList","filter"])]),U(_(Ae,{articlelist:n.value,status:A(s),"onUpdate:status":g,onOnLoad:z,onOnArticleClick:L,onOnRefresh:V},null,8,["articlelist","status"]),[[x,n.value.length!==0&&!t.value]]),_(K,{show:i.value,"onUpdate:show":u[3]||(u[3]=r=>i.value=r),position:"right",style:{width:"75%",height:"100%"}},{default:S(()=>[a("div",Ve,[Oe,a("div",Ee,[(d(!0),m(O,null,E(v.value,(r,b)=>(d(),m("div",{key:b,class:Z(["popup-tag-item",{checked:f.value==b}]),onClick:Fe=>e.onPopTagClick(r.id,b)},[a("div",{class:Z(["pop-tag",{checked:f.value==b}])},B(r.labelCategoryName),3)],10,Ue))),128))])])]),_:1},8,["show"]),U(_(ue,{title:"\u6682\u65E0\u6587\u7AE0",class:"empty-class"},null,512),[[x,n.value.length===0&&!t.value]]),t.value?(d(),R(re,{key:0,vertical:!0})):te("",!0)]),_:1})}}});var Pe=W(xe,[["__scopeId","data-v-808521a4"]]);export{Pe as default};

import{aZ as e,bD as i,bO as r,bp as a,d as o,r as s,cf as t,bj as n,N as d,cg as l,R as f,bn as c,bm as u,e as g,O as h,bt as p,br as b,b1 as v,b2 as m}from"./index-1f35fe76.js";const[x,T,k]=e("list");const B=m(o({name:x,props:{error:Boolean,offset:i(300),loading:Boolean,finished:Boolean,errorText:String,direction:r("down"),loadingText:String,finishedText:String,immediateCheck:a},emits:["load","update:error","update:loading"],setup(e,{emit:i,slots:r}){const a=s(e.loading),o=s(),m=s(),x=t(),B=n(o),C=()=>{h((()=>{if(a.value||e.finished||e.error||!1===(null==x?void 0:x.value))return;const{offset:r,direction:s}=e,t=p(B);if(!t.height||b(o))return;let n=!1;const d=p(m);n="up"===s?t.top-d.top<=r:d.bottom-t.bottom<=r,n&&(a.value=!0,i("update:loading",!0),i("load"))}))},S=()=>{if(e.finished){const i=r.finished?r.finished():e.finishedText;if(i)return g("div",{class:T("finished-text")},[i])}},j=()=>{i("update:error",!1),C()},w=()=>{if(e.error){const i=r.error?r.error():e.errorText;if(i)return g("div",{role:"button",class:T("error-text"),tabindex:0,onClick:j},[i])}},O=()=>{if(a.value&&!e.finished)return g("div",{class:T("loading")},[r.loading?r.loading():g(v,{class:T("loading-icon")},{default:()=>[e.loadingText||k("loading")]})])};return d((()=>[e.loading,e.finished,e.error]),C),x&&d(x,(e=>{e&&C()})),l((()=>{a.value=e.loading})),f((()=>{e.immediateCheck&&C()})),c({check:C}),u("scroll",C,{target:B,passive:!0}),()=>{var i;const s=null==(i=r.default)?void 0:i.call(r),t=g("div",{ref:m,class:T("placeholder")},null);return g("div",{ref:o,role:"feed",class:T(),"aria-busy":a.value},["down"===e.direction?s:t,O(),S(),w(),"up"===e.direction?s:t])}}}));export{B as L};

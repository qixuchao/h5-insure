import{g as tt,a0 as et,L as T,k as p,m as S,E as J,y as e,I as L,z as a,a1 as nt,G as h,H as f,J as K,F as Q,B as M,a2 as ct,a3 as dt,C as n,M as rt,h as z,j as v,r as U,n as c,s as j,T as P}from"./vendor-e9263418.js";import{u as at,S as vt}from"./index-b8742a0a.js";import{b as ht,c as ft,d as gt}from"./article-20e0fb3d.js";import{_ as _t}from"./plugin-vue_export-helper-46f75680.js";import{_ as W}from"./index-654379f5.js";import{E as Z,S as X}from"./Empty-9e778902.js";const H=E=>(ct("data-v-db35fda8"),E=E(),dt(),E),mt={class:"item-right-content"},pt=["onClick"],Ct={class:"top-left"},yt=["src"],Bt={class:"name-area"},Et={class:"top-name"},kt={class:"top-check-times"},Vt=M(" \u7D2F\u8BA1\u8BBF\u95EE"),Ft=M("\u6B21 "),It={class:"time"},Dt={class:"time-text"},St=["src"],Lt=H(()=>e("div",{class:"content-mid"},[e("div",{class:"triangle"})],-1)),At={class:"content-bottom"},$t={class:"content-bottom-top"},bt={class:"title-name"},wt={class:"spread"},Nt=["onClick"],Ut={class:"spread-text"},Tt=M(" \u7ECF\u8FC7\u4E86"),Ot=M("\u6B21\u4F20\u64AD "),xt=["src"],qt=["src"],zt={class:"item-bottom"},Mt={class:"road-list"},Rt={class:"road-item-left"},Gt=["src"],Yt={key:1,class:"road-left-div"},jt=H(()=>e("div",{class:"point"},null,-1)),Pt=[jt],Wt={class:"line"},Zt={class:"road-item-right"},Ht=["src"],Jt={class:"road-name"},Kt=["onClick"],Qt=H(()=>e("div",{class:"text"},"\u6536\u8D77\u4F20\u64AD",-1)),Xt=["src"],te=["src"],ee=tt({props:{visitorslist:{type:Array,default:()=>[]}},setup(E){const A=E,{getIconUrl:g}=at(),$=et();T(A.visitorslist);const d=T([]),C=o=>{d.includes(o)?d.splice(d.indexOf(o),1):d.push(o)},I=o=>{o.relatedCustomerId?(console.log("\u6211\u5DF2\u7ECF\u5173\u8054\u4E86"),$.push({name:"customerDetail",query:{agentCustomerId:o.relatedCustomerId,customerType:o.relatedCustomerType},hash:"#1"})):(console.log("\u6211\u6CA1\u6709\u5173\u8054\u4E86"),$.push({path:"/visitorDetail",query:{shareId:o.shareId,tenantId:o.tenantId,visitId:o.id}}))};return(o,b)=>(p(!0),S(Q,null,J(E.visitorslist,(s,u)=>(p(),S("div",{key:u,class:"visitor-list-item"},[e("div",{class:K(["item-top",{active:!a(d).includes(u)}])},[e("div",mt,[e("div",{class:"content-top",onClick:_=>I(s)},[e("div",Ct,[e("img",{src:s.wechatImageUrl,alt:"",class:"head-image"},null,8,yt),e("div",Bt,[e("div",Et,L(s.relatedCustomerId?s.relatedCustomerName:s.wechatNickname),1),e("div",kt,[Vt,e("span",null,L(s.visitContentCount||0),1),Ft])])]),e("div",It,[e("div",Dt,L(s.visitDateTimeStr),1),e("img",{src:a(g)("article.rightImg"),alt:"",class:"time-right-img"},null,8,St)])],8,pt),Lt,e("div",At,[e("div",$t,[e("div",bt,L(`\u9605\u8BFB\u7206\u6587  \u300A ${s.lastVisitContentTitle} \u300B`),1),e("div",wt,[e("div",{class:"spread-inner",onClick:nt(_=>C(u),["stop"])},[e("span",Ut,[Tt,e("span",null,L(s.visitorVOList.length-1||0),1),Ot]),h(e("img",{src:a(g)("article.downImg"),alt:"",class:K(["down-image",{active:a(d).includes(u)}])},null,10,xt),[[f,!a(d).includes(u)]])],8,Nt)]),h(e("img",{src:a(g)("article.lineImg"),alt:"",class:"right-line"},null,8,qt),[[f,!a(d).includes(u)]])]),h(e("div",zt,[e("div",Mt,[(p(!0),S(Q,null,J(s.visitorVOList,(_,r)=>(p(),S("div",{key:`${u}-${r}`,class:"road-list-item"},[e("div",Rt,[r==0||s.visitorVOList.length-1===r?(p(),S("img",{key:0,src:r==0?a(g)("article.firstImg"):s.visitorVOList.length-1===r?a(g)("article.endImg"):null,alt:"",class:"road-left-image"},null,8,Gt)):(p(),S("div",Yt,Pt)),h(e("div",Wt,null,512),[[f,s.visitorVOList.length-1!==r]])]),e("div",Zt,[e("img",{src:_.wechatImageUrl,alt:"",class:"road-image"},null,8,Ht),e("div",Jt,L(_.wechatNickname),1)])]))),128))]),e("div",{class:"pick-up",onClick:_=>C(u)},[Qt,e("img",{src:a(g)("article.downImg"),alt:"",class:"pick-img"},null,8,Xt)],8,Kt),h(e("img",{src:a(g)("article.lineImg"),alt:"",class:"right-line"},null,8,te),[[f,a(d).includes(u)]])],512),[[f,a(d).includes(u)]])])])],2)]))),128))}});var ae=_t(ee,[["__scopeId","data-v-db35fda8"]]);const le={class:"my-visitor"},se={class:"my-share"},ie={class:"my-collection"},ve=tt({setup(E){const{getIconUrl:A}=at(),g=et(),$=n(0),d=new vt({source:"localStorage"}),C=n(!1),I=n(!1),o=n(!1),b=n(0),s=n(!1),u=n(!1),_=n(!1),r=n(!1),O=n(0),k=n(!1),w=n(!1),x=n(!1),N=n(!1),q=n(0),V=n(!1),y=T([]),m=T([]),B=T([]),D=l=>{l==="visit"&&(o.value&&(m.splice(0,m.length),o.value=!1),b.value+=1,b.value===1&&(s.value=!0),ht({queryBean:{},pageNum:b.value,pageSize:10}).then(t=>{console.log(t.data.data,"!!!!!!!!!!!!!!!!"),(t.data.data===null||t.data.data.list===null||t.data.data.list.length===0||t.data.data.list.length<10)&&(C.value=!1,I.value=!0),(t.data.data.list!==null||t.data.data.list.length!==0)&&m.push(...t.data.data.list),C.value=!1,s.value=!1}).catch(t=>{console.log(t),P.fail("\u52A0\u8F7D\u5931\u8D25"),I.value=!0,s.value=!1}).finally(()=>{C.value=!1,o.value=!1,s.value=!1})),l==="share"&&(N.value&&(y.splice(0,y.length),N.value=!1),q.value+=1,q.value===1&&(V.value=!0),ft({queryBean:{},pageNum:q.value,pageSize:10}).then(t=>{console.log(t.data.data,"share"),(t.data.data===null||t.data.data.list===null||t.data.data.list.length===0||t.data.data.list.length<10)&&(x.value=!0),(t.data.data.list!==null||t.data.data.list.length!==0)&&y.push(...t.data.data.list),w.value=!1,V.value=!1}).catch(t=>{console.log(t),P.fail("\u52A0\u8F7D\u5931\u8D25"),x.value=!0,V.value=!1}).finally(()=>{w.value=!1,N.value=!1,V.value=!1})),l==="collect"&&(r.value&&(B.splice(0,B.length),r.value=!1),O.value+=1,O.value===1&&(k.value=!0),gt({queryBean:{},pageNum:O.value,pageSize:10}).then(t=>{(t.data.data===null||t.data.data.list===null||t.data.data.list.length===0||t.data.data.list.length<10)&&(_.value=!0),(t.data.data.list!==null||t.data.data.list.length!==0)&&B.push(...t.data.data.list),u.value=!1,k.value=!1}).catch(t=>{console.log(t),P.fail("\u52A0\u8F7D\u5931\u8D25"),_.value=!0,k.value=!1}).finally(()=>{u.value=!1,r.value=!1,k.value=!1}))},F=l=>{l==="visit"&&(I.value=!1,C.value=!0,b.value=0,D("visit")),l==="share"&&(x.value=!1,w.value=!0,q.value=0,D("share")),l==="collect"&&(_.value=!1,u.value=!0,O.value=0,D("collect"))},lt=l=>{console.log(l,"tabclcik>>>>"),l.title==="\u6211\u7684\u8BBF\u5BA2"?(m.splice(0,m.length),F("visit")):l.title==="\u6211\u7684\u5206\u4EAB"?(y.splice(0,y.length),F("share")):l.title==="\u6211\u7684\u6536\u85CF"&&(B.splice(0,B.length),F("collect"))},st=l=>{console.log("fuzujianitem",l),d.set("myShareArticleDetailInfo",l),g.push({name:"MyShare",params:l})},it=l=>{g.push({path:"./articleDetail",query:{articleId:l.articleId,flag:"Y",isInnerEntry:"Y",isOuterUrl:(l==null?void 0:l.articleType)==="02"?"Y":"N"}})};return rt(()=>{m.splice(0,m.length),F("visit")}),(l,t)=>{const R=U("van-list"),G=U("van-pull-refresh"),Y=U("van-tab"),ot=U("van-tabs"),ut=U("ZaPageWrap");return p(),z(ut,{id:"outer","main-class":"page-myArticle"},{default:v(()=>[e("div",null,[c(ot,{active:$.value,"onUpdate:active":t[12]||(t[12]=i=>$.value=i),class:"vant-tab-all",onClickTab:lt},{default:v(()=>[c(Y,{title:"\u6211\u7684\u8BBF\u5BA2"},{default:v(()=>[e("div",le,[h(e("div",null,[c(G,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=i=>o.value=i),onRefresh:t[3]||(t[3]=i=>F("visit"))},{default:v(()=>[c(R,{loading:C.value,"onUpdate:loading":t[0]||(t[0]=i=>C.value=i),finished:I.value,"finished-text":"- \u5DF2\u7ECF\u5230\u5E95\u4E86\u54E6 -",onLoad:t[1]||(t[1]=i=>D("visit"))},{default:v(()=>[c(ae,{visitorslist:a(m)},null,8,["visitorslist"])]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])],512),[[f,a(m).length!==0&&!s.value]]),h(c(Z,{text:"\u6682\u65E0\u8BBF\u5BA2\u7684\u5185\u5BB9\u54E6",emptyimg:a(A)("article.emptyBoxImg")},null,8,["emptyimg"]),[[f,a(m).length===0&&!s.value]]),s.value?(p(),z(W,{key:0,vertical:!0})):j("",!0)])]),_:1}),c(Y,{title:"\u6211\u7684\u5206\u4EAB"},{default:v(()=>[e("div",se,[h(e("div",null,[c(G,{modelValue:N.value,"onUpdate:modelValue":t[6]||(t[6]=i=>N.value=i),onRefresh:t[7]||(t[7]=i=>F("share"))},{default:v(()=>[c(R,{loading:w.value,"onUpdate:loading":t[4]||(t[4]=i=>w.value=i),finished:x.value,"finished-text":"- \u5DF2\u7ECF\u5230\u5E95\u4E86\u54E6 -",onLoad:t[5]||(t[5]=i=>D("share"))},{default:v(()=>[c(X,{sharelist:a(y),"is-share":"",onOnGoclick:st},null,8,["sharelist"])]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])],512),[[f,a(y).length!==0&&!V.value]]),h(c(Z,{text:"\u6682\u65E0\u5206\u4EAB\u7684\u5185\u5BB9\u54E6",emptyimg:a(A)("article.emptyBoxImg")},null,8,["emptyimg"]),[[f,a(y).length===0&&!V.value]]),V.value?(p(),z(W,{key:0,vertical:!0})):j("",!0)])]),_:1}),c(Y,{title:"\u6211\u7684\u6536\u85CF"},{default:v(()=>[e("div",ie,[h(e("div",null,[c(G,{modelValue:r.value,"onUpdate:modelValue":t[10]||(t[10]=i=>r.value=i),onRefresh:t[11]||(t[11]=i=>F("collect"))},{default:v(()=>[c(R,{loading:u.value,"onUpdate:loading":t[8]||(t[8]=i=>u.value=i),finished:_.value,"finished-text":"- \u5DF2\u7ECF\u5230\u5E95\u4E86\u54E6 -",onLoad:t[9]||(t[9]=i=>D("collect"))},{default:v(()=>[c(X,{sharelist:a(B),onOnGoclick:it},null,8,["sharelist"])]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])],512),[[f,a(B).length!==0&&!k.value]]),k.value?(p(),z(W,{key:0,vertical:!0})):j("",!0),h(c(Z,{text:"\u6CA1\u6709\u6536\u85CF\u7684\u5185\u5BB9\u54E6",emptyimg:a(A)("article.emptyBoxImg")},null,8,["emptyimg"]),[[f,a(B).length===0&&!k.value]])])]),_:1})]),_:1},8,["active"])])]),_:1})}}});export{ve as default};

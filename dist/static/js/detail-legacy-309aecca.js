!function(){var e=document.createElement("style");e.innerHTML=".customer-sign-preview{background:rgb(222,222,222)}.customer-sign-preview .van-image__img{object-fit:contain;height:100vw;transform:rotate(270deg) translate(-68%)}.popup-body{width:100%;height:100%}.preview-sign{width:1.33333rem;height:1.33333rem;transform:rotate(270deg);margin-right:.26667rem;background:rgba(222,222,222,.6)}.sign-container-wrap{width:100%;padding-left:2rem;height:100%;display:flex;flex-direction:row-reverse;justify-content:space-between;overflow:hidden}.sign-container-wrap .operate-bar{position:absolute;width:100vh;display:flex;margin:.26667rem;transform:rotate(90deg);padding-left:1.33333rem;justify-content:space-between;align-items:center;transform:rotate(90deg) translate3d(95vh,8.8rem,0);padding:.26667rem;transform-origin:right}.sign-container-wrap .operate-bar .btn{width:3.2rem;margin-right:.26667rem}.sign-container-wrap .com-sign-wrapper{width:100%;height:100%}.sign-container-wrap .com-sign-wrapper .placeholder{transform:rotate(90deg)}.net-sale-detail-wrap{padding:0 var(--zaui-page-border, .4rem) 1.33333rem;background-color:#f4f4f4}.net-sale-detail-wrap .product-name{padding:.26667rem 0 .08rem}.net-sale-detail-wrap .insured-info{padding:.2rem 0}.net-sale-detail-wrap .file-list-card{width:100%}.net-sale-detail-wrap .file-list-card .body{padding:0!important}.net-sale-detail-wrap .file-list-card .body .van-cell{align-items:center}.net-sale-detail-wrap .com-card{border-radius:.10667rem;overflow:hidden}.net-sale-detail-wrap .com-card .header{background-color:#f4f4f4;margin:0!important}.net-sale-detail-wrap .com-card .com-cell-wrapper.border:last-child{border:none!important}.net-sale-detail-wrap .common-cell-wrapper{height:1.38667rem;align-items:center;width:100%;display:inline-flex}.net-sale-detail-wrap .common-cell-wrapper .cell-container{align-items:flex-start;justify-content:center;width:100%;font-size:.42667rem}.net-sale-detail-wrap .common-cell-wrapper .cell-container .left-part{color:var(--zaui-text)!important}.net-sale-detail-wrap .common-cell-wrapper .cell-container .right-part{color:#9f9c9f;font-weight:500}.net-sale-detail-wrap .sign-cell{display:flex;align-items:center;justify-content:space-between;padding:.26667rem 0}.net-sale-detail-wrap .sign-cell .sign-wrap{display:flex;align-items:center}.net-sale-detail-wrap .van-cell .van-field__value{align-items:flex-end!important;align-self:center}.net-sale-detail-wrap .van-cell .van-field__value input,.net-sale-detail-wrap .van-cell .van-field__value .van-field__body input,.net-sale-detail-wrap .van-cell .van-field__value .van-field__body .com-radio-btn-wrap,.net-sale-detail-wrap .van-cell .van-field__value .van-field__body .displayValue{color:#9f9c9f;font-weight:500}.pre-notice-wrap{width:100%}.pre-notice-wrap .body{overflow:scroll}.pre-notice-wrap .body .footer{margin-top:.66667rem;position:absolute;bottom:0;width:100%;background-color:#fff;padding:.26667rem 5% 0;margin:0 auto;left:0;right:0}.pre-notice-wrap .pre-body{padding:.66667rem .42667rem 0;height:100%}.pre-notice-wrap .pre-body .header{line-height:1;border:none}.pre-notice-wrap .pre-body .header img{height:.58667rem}.pre-notice-wrap .pre-body .header .company-name{margin-top:.26667rem;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:500;color:#333;line-height:.44rem}.pre-notice-wrap .pre-body .content{margin-top:.42667rem;padding:.42667rem;background:#fcf4f0;border-radius:.26667rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#333;line-height:.56rem;border:1px solid #fff1de;border-top-color:#fee6dd}.pre-notice-wrap .pre-body .content span{color:#006afc}.footer{margin-top:.66667rem}\n",document.head.appendChild(e),System.register(["./index-legacy-db3cc191.js","./trial-legacy-5fc5c5ac.js","./index-legacy-e1dd4f36.js","./verify-legacy-c856fc70.js","./nextStep-legacy-2cb5b650.js","./product-legacy-beb8c839.js","./order-legacy-2c48ef7a.js","./index-legacy-b2313c7b.js","./index-legacy-c31ea577.js","./useDicData-legacy-1dbde2d2.js","./trial-legacy-ec3695da.js","./pdfh5-legacy-9f98dc45.js","./infoCollection-legacy-3ea31819.js","./relativeTime-legacy-4b5b6d28.js","./validator-legacy-5e43cc69.js","./core-legacy-975bd7e3.js","./constant-legacy-c9c30061.js","./theme-legacy-14f266cb.js","./utils-legacy-5a56657b.js"],(function(e){"use strict";var t,n,a,l,i,o,r,d,c,s,u,f,p,m,v,g,h,w,y,b,I,C,_,x,O,j,k,L,N,E,T,S,P,V,R,H,U,A,F,B,D,z,$,G,q,M;return{setters:[function(e){t=e.d,n=e.r,a=e.c,l=e.h,i=e.j,o=e.g,r=e.k,d=e.f,c=e.w,s=e.n,u=e.t,f=e.af,p=e.a7,m=e.F,v=e.ck,g=e.B,h=e.b4,w=e.b3,y=e.b_,b=e.a,I=e.u,C=e.G,_=e.C,x=e.b,O=e.e,j=e.i,k=e.T,L=e.a3,N=e.P,E=e.aF,T=e.aQ,S=e.a8,P=e.bT,V=e.a9},function(e){R=e.g,H=e.i},function(e){U=e._},function(e){A=e.s},function(e){F=e.n},function(e){B=e.p},function(e){D=e.O,z=e.a},function(e){$=e.P},function(e){G=e.default},function(e){q=e.u},function(e){M=e.a},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const W={class:"sign-wrap"},Y=["src"],Q={class:"popup-body"},Z={class:"sign-container-wrap"},J={class:"operate-bar"},K={class:"btns"},X=t({__name:"index",props:{option:{default:{}},modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const y=n(!1),b=n(),I=n(""),C=n(!0),_=()=>{var e;y.value=!0,null===(e=b.value)||void 0===e||e.clear()},x=()=>{v({images:[I.value],className:"customer-sign-preview"})},O=()=>{y.value=!1},j=()=>{var e,t;null===(e=b.value)||void 0===e||null===(t=e.clear)||void 0===t||t.call(e)},k=()=>{var e;I.value=null===(e=b.value)||void 0===e?void 0:e.save(),t("update:modelValue",I.value),y.value=!1};return(e,t)=>{const n=g,v=h,L=w;return a(),l(m,null,[i("div",W,[o(I)?(a(),l("img",{key:0,class:"preview-sign",src:o(I),alt:"",onClick:x},null,8,Y)):r("",!0),d(n,{type:"primary",round:"",size:"small",onClick:_},{default:c((()=>[s(u(o(I)?"重新签名":"点击签字"),1)])),_:1})]),d(L,{show:o(y),"onUpdate:show":t[1]||(t[1]=e=>p(y)?y.value=e:null),position:"bottom",style:{height:"100%",overflow:"hidden"}},{default:c((()=>[i("div",Q,[i("div",Z,[d(f,{ref_key:"signRef",ref:b,placeholder:"请在此处签名",onStroke:t[0]||(t[0]=e=>C.value=!1)},null,512),i("div",J,[i("span",null,[d(v,{name:"info",color:"#ffaf22"}),s(" 请投保人正楷签署您的签名:")]),i("div",K,[d(n,{type:"default",class:"btn",onClick:O},{default:c((()=>[s("返回")])),_:1}),d(n,{type:"default",class:"btn",onClick:j},{default:c((()=>[s("重写")])),_:1}),d(n,{type:"primary",class:"btn",disabled:o(C),onClick:k},{default:c((()=>[s("确定签字")])),_:1},8,["disabled"])])])])])])),_:1},8,["show"])],64)}}});const ee={key:0,class:"net-sale-detail-wrap"},te={class:"sign-cell"},ne=i("div",{class:"sign-label"},"签名",-1),ae={class:"footer"},le={class:"footer"};e("default",t({__name:"detail",setup(e){const t=y(),s=b(),u=I(),{orderNo:f="2022113021181894998",tenantId:v="9991000001"}=s.query,g=n({}),h=n(!1),w=q("NATIONAL_REGION_CODE"),W=n({commencementTime:"",expiryDate:"",extInfo:{buttonCode:"EVENT_NETSALE_airSignature",pageCode:"infoCollection",templateId:3,iseeBizNo:""},orderCategory:1,tenantId:v,venderCode:"",tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:v}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),Y=n(!1),Q=n(),Z=n(),J=n(),K=n(""),ie=n(""),oe=n(!1),re=n(!1),de=n(0),ce=n([]),se=n(""),ue=n("");n("");const fe=n([]),pe=()=>{oe.value=!1,re.value=!1},me=async()=>{oe.value=!1,re.value=!0,await A("HOLDER",K.value,W.value.id,`${v}`),F(W.value)},ve=async()=>{const{data:e,code:t}=await B({productCode:ue.value,tenantId:v,withInsureInfo:!0});"10000"===t&&(J.value=e,(()=>{let e={};var t,n,a,l,i,o;if(e=ie.value?(null===(t=((null===(n=J.value)||void 0===n||null===(a=n.tenantProductInsureVO)||void 0===a?void 0:a.planList)||[]).find((e=>e.planCode===ie.value)))||void 0===t?void 0:t.attachmentVOList)||[]:(null===(l=J.value)||void 0===l||null===(i=l.tenantProductInsureVO)||void 0===i||null===(o=i.planInsureVO)||void 0===o?void 0:o.attachmentVOList)||[],!e)return void(ce.value=[]);const r={2:"richText",3:"link"};ce.value=Object.keys(e).map((t=>(e[t].forEach((e=>{if("1"===e.attachmentType){const t=e.attachmentUri.split("?"),n=t[0].substr(t[0].lastIndexOf(".")+1);e.attachmentType="pdf"===n?"pdf":"picture"}else e.attachmentType=r[e.attachmentType]})),{attachmentName:t,attachmentList:e[t]})))||[],fe.value=ce.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.mustReadFlag===V.YES))}))).filter((e=>e.attachmentList.length))})())},ge=async()=>{const{code:e,data:t}=await R({orderNo:f,tenantId:v});var n;"10000"===e&&(t.extInfo.buttonCode="EVENT_NETSALE_airSignature",W.value=t,ie.value=null===(n=t.tenantOrderInsuredList[0])||void 0===n?void 0:n.planCode,ue.value=t.tenantOrderInsuredList[0].tenantOrderProductList[0].productCode,h.value=!0,(e=>{const t=e.find((e=>1===e.riskType));var n,a;t&&(se.value=(n=t.insurancePeriodValue,-1!==(a=M[t.insurancePeriodType]).indexOf("$")?a.replace("$",`${n}`):`${n||""}${a}`))})(t.tenantOrderInsuredList[0].tenantOrderProductList[0].tenantOrderRiskList||[]),(async()=>{const{code:e,data:t}=await H({productCode:ue.value,tenantId:v});"10000"===e&&(Z.value=t,g.value=t.productFactor)})(),ve(),t.orderStatus!==z.UNDER_WRITING_SUCCESS&&u.push({path:"/baseInsurance/orderDetail",query:{...s.query,productCode:ue.value,ISEE_BIZ:t.extInfo.iseeBizNo}}))},he=async()=>{K.value?(re.value=!1,fe.value.length?oe.value=!0:me()):k("请先签字")};return C((()=>{ge()})),(e,n)=>{const s=L,u=N,f=E,v=_,y=x("ProPageWrap"),b=T,I=S,C=P;return a(),O(C,{"theme-vars":o(t)},{default:c((()=>{var e;return[d(y,null,{default:c((()=>{var e;return[null!==(e=o(Z))&&void 0!==e&&e.productBasicInfoVO?(a(),l("div",ee,[d(u,null,{default:c((()=>{var e;return[d(s,{title:"产品名称",content:null===(e=o(Z))||void 0===e?void 0:e.productBasicInfoVO.productFullName},null,8,["content"])]})),_:1}),o(W).id?(a(),O(u,{key:0,"show-line":!1,title:"投保信息"},{default:c((()=>{var e,t,a,l;return[d(s,{title:"保费",content:o(W).orderAmount+"元"},null,8,["content"]),d(s,{title:"保险期限",content:o(se)},null,8,["content"]),d(s,{title:"起保日期",content:o(W).commencementTime},null,8,["content"]),d(s,{title:"终保日期",content:o(W).expiryDate},null,8,["content"]),d(s,{title:"保单状态",content:o(D)[o(W).orderStatus]},null,8,["content"]),d(s,{title:"订单编号",content:o(W).orderNo},null,8,["content"]),d(f,{modelValue:o(W).tenantOrderHolder.extInfo.familyAreaCode,"onUpdate:modelValue":n[0]||(n[0]=e=>o(W).tenantOrderHolder.extInfo.familyAreaCode=e),field1:o(W).tenantOrderHolder.extInfo.familyProvinceCode,"onUpdate:field1":n[1]||(n[1]=e=>o(W).tenantOrderHolder.extInfo.familyProvinceCode=e),field2:o(W).tenantOrderHolder.extInfo.familyCityCode,"onUpdate:field2":n[2]||(n[2]=e=>o(W).tenantOrderHolder.extInfo.familyCityCode=e),field3:o(W).tenantOrderHolder.extInfo.familyAreaCode,"onUpdate:field3":n[3]||(n[3]=e=>o(W).tenantOrderHolder.extInfo.familyAreaCode=e),label:"房产所在地",name:"familyProvinceCode","is-link":"","is-view":"",class:"insured-info","data-source":o(w),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","data-source"]),d(s,{title:"详细地址",content:null===(e=o(W).tenantOrderHolder)||void 0===e||null===(t=e.extInfo)||void 0===t?void 0:t.familyAddress},null,8,["content"]),d(s,{title:"燃气编号",content:null===(a=o(W).tenantOrderSubjectList)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.subjectNo},null,8,["content"])]})),_:1})):r("",!0),o(h)?(a(),O(U,{key:1,ref:"formRef","title-collection":{HOLDER:"投保人信息",INSURER:"被保人信息",BENEFICIARY:"受益人"},"is-view":!0,"form-info":o(W),"factor-object":o(g),"input-align":"right"},null,8,["form-info","factor-object"])):r("",!0),d(u,{title:"阅读条款合同",class:"file-list-card"},{default:c((()=>[(a(!0),l(m,null,j(o(ce),((e,t)=>(a(),O(v,{key:t,title:e.attachmentName,"is-link":"",onClick:t=>{return n=e.attachmentName,a=e.attachmentList,Y.value=!0,void(Q.value={title:n,fileContent:null==a?void 0:a[0]});var n,a}},null,8,["title","onClick"])))),128))])),_:1}),d(u,{title:"客户签名"},{default:c((()=>[i("div",te,[ne,d(X,{modelValue:o(K),"onUpdate:modelValue":n[4]||(n[4]=e=>p(K)?K.value=e:null)},null,8,["modelValue"])])])),_:1}),i("div",ae,[d($,{shadow:!1,text:"提 交",onClick:he})])])):r("",!0)]})),_:1}),d(I,{show:o(Y),"onUpdate:show":n[6]||(n[6]=e=>p(Y)?Y.value=e:null),class:"pre-notice-wrap",title:null===(e=o(Q))||void 0===e?void 0:e.title,position:"bottom",style:{height:"600px"}},{default:c((()=>{var e,t,a,l;return[d(b,{content:null===(e=o(Q))||void 0===e||null===(t=e.fileContent)||void 0===t?void 0:t.attachmentUri,type:null===(a=o(Q))||void 0===a||null===(l=a.fileContent)||void 0===l?void 0:l.attachmentType},null,8,["content","type"]),i("div",le,[d($,{shadow:!1,text:"关闭",onClick:n[5]||(n[5]=e=>Y.value=!1)})])]})),_:1},8,["show","title"]),o(oe)&&0!==o(fe).length?(a(),O(G,{key:0,show:o(oe),"onUpdate:show":n[7]||(n[7]=e=>p(oe)?oe.value=e:null),"content-list":o(fe),"is-only-view":o(re),"active-index":o(de),text:o(re)?"关闭":"我已逐页阅读上述内容并同意","force-read-cound":0,"on-close-file-preview":"",onSubmit:me,onOnCloseFilePreview:pe,onOnCloseFilePreviewByMask:n[8]||(n[8]=e=>oe.value=!1)},null,8,["show","content-list","is-only-view","active-index","text"])):r("",!0)]})),_:1},8,["theme-vars"])}}}))}}}))}();

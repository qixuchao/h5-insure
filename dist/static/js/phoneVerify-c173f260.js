import{_ as e,d as a,i as l,h as t,j as o,O as s,l as d,o as r,m as c,w as i,a as n,e as m,u,cu as p,b as f,V as b,W as v,cm as y,cn as h,a8 as g,bp as N,co as C,cp as j,ai as _,aE as T,aF as I,cA as V,cz as q}from"./index-674cff0a.js";import{g as U}from"./trial-93cf8634.js";import{c as x}from"./format-31cde443.js";import{u as k}from"./useOrder-4b01043d.js";import{P as w}from"./constants-4b08cf92.js";const z=e=>(T("data-v-a3cdfd64"),e=e(),I(),e),P={class:"page-phone-verify"},E={class:"title"},S=z((()=>n("div",{class:"title face-title"},"人脸识别",-1))),$={class:"face-verify-img"},L=["src"],O=z((()=>n("div",{class:"face-verify-tip"},[n("div",{class:"title"},"操作时请您配合"),n("ol",null,[n("li",null,"请调亮手机屏幕亮度，确保光线充足"),n("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),n("li",null,"请确保真实本人操作")])],-1))),A={class:"tips"},W=["src"];var F=e(a({__name:"phoneVerify",setup(e){const a=k(),T=l(),I=t(),{agentCode:z,tenantId:F,nextPageCode:M,biz_id:R,orderNo:B,objectType:D,orderCode:G}=T.query,H=o({mobile:"",verifyCode:""}),J=o(),K=o(),Q=()=>{U({orderNo:G||B,tenantId:F}).then((({code:e,data:l})=>{if("10000"===e){Object.assign(a.value,l);const{holder:e,insuredList:t}=l;if("holder"===D){const{name:a,certNo:l,certType:t,id:o,mobile:s}=e;H.value.mobile=s,K.value={userName:a,certiNo:l,certType:t,objectId:o}}else{const{name:e,certNo:a,certType:l,id:o,mobile:s}=(null==t?void 0:t[0])||{};H.value.mobile=s,K.value={userName:e,certiNo:a,certType:l,objectId:o}}R&&(()=>{const{objectId:e,certType:a}=K.value,l={bizId:R,certType:a,objectId:e,objectType:`${D}`.toLocaleUpperCase(),orderNo:B,tenantId:F};V(l).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status&&(delete T.query.biz_id,delete T.query.nextPageCode,I.push({path:w[`${M}`],query:{...T.query,isShare:1}}))}))})()}}))},X=()=>{var e,a;null==(a=null==(e=J.value)?void 0:e.validate)||a.call(e).then((()=>{(()=>{const{userName:e,certiNo:a,certType:l}=K.value,t={tenantId:F,faceAuthMode:"TENCENT",callbackUrl:window.location.href,bizNo:B,userName:e,certiNo:a,certType:l};q(t).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})()}))};return s((()=>{Q()})),(e,a)=>{const l=N,t=C,o=j,s=_,T=d("ProPageWrap");return r(),c(T,null,{default:i((()=>[n("div",P,[n("div",E,m(`${u(p)[u(D).toLocaleUpperCase()]}手机号验证 ${u(x)(u(H).mobile||"")}`),1),f(o,{ref_key:"formRef",ref:J,"validate-method":"toast",model:u(H)},{default:i((()=>[b(f(l,{modelValue:u(H).mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>u(H).mobile=e),label:"被保人手机号",name:"mobile",maxlength:"11",required:""},null,8,["modelValue"]),[[v,!1]]),f(t,{modelValue:u(H).verifyCode,"onUpdate:modelValue":a[1]||(a[1]=e=>u(H).verifyCode=e),"related-name":"mobile",label:" ",maxlength:"6","input-align":"left",placeholder:"请输入验证码",name:"verifyCode",rules:[{required:!0,message:"请输入验证码"}],"send-s-m-s-code":u(y),"check-s-m-s-code":u(h)},null,8,["modelValue","send-s-m-s-code","check-s-m-s-code"])])),_:1},8,["model"]),S,n("div",$,[n("img",{src:u("/static/png/face_img-4ac5b4e1.png"),alt:""},null,8,L)]),O,f(s,{type:"primary",class:"submit-btn",onClick:X},{default:i((()=>[g("开始验证")])),_:1}),n("div",A,[n("img",{src:u("/static/png/face_tip-d70e081d.png"),alt:""},null,8,W)])])])),_:1})}}}),[["__scopeId","data-v-a3cdfd64"]]);export{F as default};

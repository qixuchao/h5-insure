import{g as y,E as i,O as A,h as E,r as p,j as b,k,m as _,z as n,J as v,A as N,H as P,ar as T,L as w,p as O,a4 as R,a5 as U,C as V,T as C}from"./vendor-24fcd424.js";import{b as f,_ as q,r as M,K as m}from"./index-690a863c.js";import{b as z}from"./format-d78bf325.js";import{a as H}from"./order-ad7bcd6c.js";const J=e=>f.post("/api/app/insure/insurance/sendSmsCodeToC",{},{params:{mobile:e}}),Q=(e,s)=>f.post("/api/app/insure/insurance/checkSmsCode",{},{params:{mobile:e,smsCode:s}});const W=e=>(R("data-v-f8994558"),e=e(),U(),e),j={class:"page-phone-verify"},G=W(()=>n("div",{class:"title"},"\u901A\u8FC7\u6295\u4FDD\u4EBA\u624B\u673A\u53F7\u9A8C\u8BC1\u540E\uFF0C\u53EF\u8FDB\u884C\u6295\u4FDD\u4FE1\u606F\u9884",-1)),K={class:"phone"},L={class:"input-wrapper"},$=V("\u4E0B\u4E00\u6B65"),X=y({setup(e){const s=i(""),c=i(""),t=i(0);let d;const l=A(),{saleUserId:h="D1234567-1",tenantId:D="9991000007",templateId:Y=1,productCode:Z="CQ75CQ76",insurerCode:ee="ancheng",orderNo:B}=l.query,F=()=>{d=setInterval(()=>{t.value-=1,t.value<=0&&clearInterval(d)},1e3)},I=()=>{M({orderNo:B,saleUserId:h,tenantId:D}).then(a=>{var r;const{code:o,data:u}=a;o==="10000"&&(u.orderStatus!==H.PENDING?m("paymentResult",l.query):s.value=(r=u==null?void 0:u.tenantOrderHolder)==null?void 0:r.mobile)})},S=()=>{J(s.value).then(({code:a})=>{a==="10000"&&(t.value=60,F())})},g=()=>{Q(s.value,c.value).then(({code:a,data:o})=>{a==="10000"&&o?(C.success("\u9A8C\u8BC1\u6210\u529F"),m("infoPreview",l.query)):C.fail("\u9A8C\u8BC1\u5931\u8D25")})};return E(()=>{I()}),(a,o)=>{const u=p("van-button"),r=p("ProPageWrap");return b(),k(r,null,{default:_(()=>[n("div",j,[G,n("div",K,v(N(z)(s.value)),1),n("div",L,[P(n("input",{"onUpdate:modelValue":o[0]||(o[0]=x=>c.value=x),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",class:"input"},null,512),[[T,c.value]]),n("div",{class:w(["btn",{second:t.value}]),onClick:S},v(t.value?`${t.value}s`:"\u53D1\u9001\u9A8C\u8BC1\u7801"),3)]),O(u,{type:"primary",class:"submit-btn",onClick:g},{default:_(()=>[$]),_:1})])]),_:1})}}});var ue=q(X,[["__scopeId","data-v-f8994558"]]);export{ue as default};

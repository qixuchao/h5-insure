!function(){var e=document.createElement("style");e.innerHTML=".refueling-package-com{background:#fff}.refueling-package-com .title{background:#ffffff;font-size:.42667rem;font-weight:500;color:#333;line-height:.4rem;padding:.4rem .33333rem}.refueling-package-com .van-cell{align-items:center}.refueling-package-com .van-cell .van-field__label{min-width:4rem!important}.refueling-package-com .show-more{padding:.4rem 0;width:100%;display:flex;justify-content:center;align-items:center;font-size:.34667rem;color:var(--van-primary-color, var(--zaui-brand))}.refueling-package-com .show-more .icon{margin-left:.13333rem;font-size:.26667rem;transition:transform .5s}.refueling-package-com .show-more .icon.showMore{transform:rotate(180deg)}.page-internet-product-detail{padding-bottom:2rem;background:#f1f5fc}.page-internet-product-detail .custom-page-form{background:#ffffff}.page-internet-product-detail .custom-page-form .form-title{padding:.53333rem 0px .13333rem;text-align:center;font-size:.53333rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#333}.page-internet-product-detail .custom-page-form .com-card-wrap .header{margin-left:0!important}.page-internet-product-detail .custom-page-form .com-card-wrap .header .title-wrapper .title:before{margin-right:.37333rem!important}.page-internet-product-detail .custom-page-form .com-card-wrap .relation-holder .van-cell__title{display:none}.page-internet-product-detail .custom-page-form :deep(.radio-btn){justify-content:flex-start}.page-internet-product-detail .custom-page-form :deep(.radio-btn) .btn-wrapper{margin-left:0!important;margin-right:.10667rem!important}.page-internet-product-detail .footer-area{width:100%;height:2rem;position:fixed;bottom:0;left:0;display:flex;align-items:center;border-top:1px solid #EEEFF4;padding:0 .4rem;background:#ffffff;z-index:10;justify-content:space-between;border-radius:.4rem .4rem 0px 0px}.page-internet-product-detail .footer-area :deep(.com-share){width:1.02667rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.page-internet-product-detail .footer-area :deep(.com-share) span{font-size:.32rem;color:var(--zaui-text, #393d46)}.page-internet-product-detail .price{color:#393d46;font-size:.45333rem;font-weight:400;width:3.6rem;margin:0 .26667rem}.page-internet-product-detail .price span{color:var(--van-primary-color);font-weight:700}.page-internet-product-detail .price span:last-child{font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400}.page-internet-product-detail .right{width:4rem;height:1.17333rem;border-radius:.58667rem}\n",document.head.appendChild(e),System.register(["./index-legacy-ce28e08c.js","./trial-legacy-908445ad.js","./product-legacy-69b06249.js","./nextStep-legacy-3f81e8be.js","./infoCollection-legacy-ab7f3f8b.js","./useAddressList-legacy-33f31df3.js","./utils-legacy-1b04a8f2.js","./index-legacy-73aa2885.js","./useAttachment-legacy-aa446342.js","./index-legacy-65d0c4eb.js","./phoneVerify-legacy-2904d23d.js","./TrialButton-legacy-ebd49549.js","./index-legacy-97fe99a8.js","./trial-legacy-8f05b5dc.js","./pdfh5-legacy-9f98dc45.js","./core-legacy-73237ec5.js","./constant-legacy-c9c30061.js","./index-legacy-2586c33e.js","./isObjectLike-legacy-7cedb542.js","./_nodeUtil-legacy-acbb75ec.js"],(function(e,t){"use strict";var a,n,r,o,l,i,s,d,c,u,p,m,v,f,g,h,y,b,A,x,I,k,C,O,w,L,T,S,j,P,E,_,R,N,D,F,H,B,V,U,q,z,M,G,Q,J,W,Y,Z,$,K,X,ee,te,ae,ne,re,oe,le,ie,se,de,ce,ue,pe,me,ve,fe,ge,he;return{setters:[function(e){a=e.d,n=e.S,r=e.E,o=e.c,l=e.h,i=e.f,s=e.w,d=e.F,c=e.i,u=e.g,p=e.e,m=e.n,v=e.t,f=e.V,g=e.L,h=e.k,y=e.j,b=e.m,A=e.ap,x=e.au,I=e.a,k=e.r,C=e.bY,O=e.bZ,w=e.b_,L=e.u,T=e.J,S=e.an,j=e.b6,P=e.a9,E=e.aE,_=e.H,R=e.ah,N=e.G,D=e.bR,F=e.a7,H=e.T,B=e.aj,V=e.c0,U=e.c7,q=e.bT,z=e.c1},function(e){M=e.i,G=e.b,Q=e.p,J=e.g},function(e){W=e.b,Y=e.c},function(e){Z=e.n},function(e){$=e.g,K=e.I,X=e.O,ee=e.l,te=e.S},function(e){ae=e.u},function(e){ne=e.r,re=e.v,oe=e.g,le=e.t},function(e){ie=e._},function(e){se=e.u,de=e.G,ce=e._},function(e){ue=e.P},function(e){pe=e.s,me=e.c},function(e){ve=e._},function(e){fe=e.c,ge=e.t,he=e._},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const ye={class:"refueling-package-com"},be=y("div",{class:"title"},"加油包",-1),Ae=a({__name:"index",props:{packageProductList:{type:Array,default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:3}},setup(e){const t=e,[a,y]=n(!1),I=r((()=>t.packageProductList.length>t.count&&(!!t.isShowClose||!a.value))),k=()=>{y()},C=r((()=>t.packageProductList.length<=t.count||a.value?t.packageProductList:t.packageProductList.slice(0,t.count)));return(e,t)=>{const n=b,r=A,y=x;return o(),l("div",ye,[be,i(y,{ref:"formRef"},{default:s((()=>[(o(!0),l(d,null,c(u(C),((e,t)=>(o(),p(r,{key:`${e.value}_${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.packageName,required:"",placeholder:"请选择"},{input:s((()=>[i(n,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:u($),disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","options","disabled"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])))),128)),u(I)?(o(),l("div",{key:0,class:"show-more",onClick:k},[m(v(u(a)?"收起":"查看更多")+" ",1),i(f,{name:"down",class:g(["icon",{showMore:u(a)}])},null,8,["class"])])):h("",!0)])),_:1},512)])}}});const xe={key:0},Ie=[y("div",{class:"__skeleton_short_content__"},[y("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[y("div",{class:"page-internet-product-detail"},[y("div",{class:"info"},[y("div",{class:"van-image banner",style:{width:"100%",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[y("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1676527379&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=tkscLe6oOZYjnRIA%2B7AiMS3bOs0%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),y("div")]),y("div",{class:"guarantee-list"},[y("div",{class:"header"},[y("span",null,[y("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"保障计划")]),y("span",null,[y("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"查看详情")])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"一般医疗保险金")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高300万")])])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"重大疾病医疗保险金")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤质子重离子医疗")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤院外特定药品费用医疗")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤特定器械耗材费用医疗责任 （适用于女性被保险人）")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高100万")])])]),y("div",{class:"show-more"},[y("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"查看更多 "),y("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[y("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),y("div",{class:"feerate-view sk-border"},[y("span",null,[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00元/年起")])])]),y("div",{class:"com-divider"}),y("div",{class:"tabs",sticky:"",scrollspy:""},[y("div",null,[y("div",{class:"van-sticky"},[y("div",{class:"van-tabs"},[y("div",{id:"tab-list",class:"tab-list"},[y("a",{class:"tab-title active",title:"产品亮点"},[y("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"产品亮点")]),y("a",{class:"tab-title",title:"理赔说明"},[y("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"理赔说明")]),y("a",{class:"tab-title",title:"我要投保"},[y("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"我要投保")])])])])]),y("div",{class:"tab-content"},[y("div",{id:"tab1"},[y("div",{class:"spec"},[y("div",{class:"van-image detail-img",style:{width:"100%"}},[y("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)],ke={class:"page-internet-product-detail"},Ce={class:"info"},Oe={class:"custom-page-form"},we=y("div",{class:"form-title"},"请填写投保信息",-1),Le=y("div",{id:"xinaoDialog"},null,-1);e("default",a({__name:"short",setup(e){var a;const n=C((()=>O((()=>t.import("./index-legacy-9f1363ac.js")),void 0))),v=C((()=>O((()=>t.import("./index-legacy-b7472c59.js")),void 0))),f=C((()=>O((()=>t.import("./index-legacy-ded72ecf.js")),void 0))),g=C((()=>O((()=>t.import("./index-legacy-81bacd2c.js")),void 0))),b=C((()=>O((()=>t.import("./index-legacy-708d2c9f.js")),void 0))),A=w();L();const x=I(),{productCode:$="",tenantId:ye,agentCode:be="",agencyCode:Te,saleChannelId:Se,extraInfo:je,insurerCode:Pe,preview:Ee}=x.query;let _e={};try{console.log("extInfo",decodeURIComponent(je)),_e=JSON.parse(decodeURIComponent(je))}catch(jt){}const{openId:Re}=_e;k();const Ne=k(),De=k(),Fe=k(!1),He=k({}),Be=k({}),Ve=k(!1),Ue=k(!1),qe=k(0),ze=k(!1),Me=k({}),Ge=k({}),Qe=k(!0),Je=k(!0),We=k(!0),Ye=k(""),Ze=k([]);k({});const $e=k({}),Ke=k({}),Xe=k([]),et=k(),tt=k(),at=T({holder:{formData:{},schema:[],trialFactorCodes:[],config:{name:{},verificationCode:{sendSMSCode:async({mobile:e},t)=>{const a=await pe(e),{code:n}=a;"10000"===n&&"function"==typeof t&&t()}},certType:{},certNo:{},occupation:{dictCode:fe(Pe)}}},insuredList:[{formData:{},schema:[],trialFactorCodes:[],config:{relationToHolder:{label:""},certNo:{}}}]});Re&&ae({openId:Re},(e=>{Ge.value=e}));const nt=k({imgUrl:"",desc:"",title:"",link:window.location.href}),rt=(e=>{const{tenantId:t,agentCode:a="",agencyCode:n,saleChannelId:r,extraInfo:o,insurerCode:l}=I().query;let i={};try{i=JSON.parse(decodeURIComponent(o))}catch(jt){}const s=k({agencyId:n,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"",pageCode:"",iseeBizNo:"",extraInfo:{}},orderCategory:1,saleUserId:a,saleChannelId:r,tenantId:t,venderCode:l,tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:t}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}});return"[object Object]"==={}.toString.call(e)&&Object.assign(s.value,e),s})({extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:_e,templateId:(null===(a=_e)||void 0===a?void 0:a.templateId)||"1",iseeBizNo:""}}),ot=k({}),lt=r((()=>!!Ee)),it=k([]),st=k(),dt=async()=>{W({productCode:$,tenantId:ye,isTenant:!Ee}).then((({data:e,code:t})=>{if("10000"===t){He.value=e,document.title=e.BASIC_INFO.title||"";const{title:t,desc:n,image:r}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{};a={title:t,desc:n,image:r},nt.value={desc:a.desc||"你好，这里是描述",imgUrl:a.image,title:a.title,link:window.location.href}}var a})),await M({productCode:$,isTenant:!Ee}).then((({data:e,code:t})=>{var a;"10000"===t&&(ze.value=!0,Be.value=e,$e.value=null===(a=e.productPlanInsureVOList)||void 0===a?void 0:a[0],Xe.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),We.value=!1,Y({productCode:$}).then((({code:e,data:t})=>{if("10000"===e){var a,n,r,o;const{productMaterialPlanVOList:e,productQuestionnaireVOList:l}=t;st.value=e||[];const{basicInfo:{questionnaireType:i},questions:s,questionnaireName:d}=(null==l||null===(a=l[0])||void 0===a?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};2===i&&(it.value=[{attachmentName:d,attachmentUri:s,attachmentType:"question"}]),it.value=[{attachmentName:d,attachmentUri:null==s||null===(n=s[0])||void 0===n?void 0:n.content,attachmentType:oe(String(null==s||null===(r=s[0])||void 0===r?void 0:r.textType),null==s||null===(o=s[0])||void 0===o?void 0:o.content)}]}}))},ct=r((()=>{if(Ge.value){const e=[];return Object.keys(Ge.value).forEach((t=>{e.push(...Ge.value[t])})),e}return[]})),ut=r((()=>ct.value.length>0)),pt=k([]),mt=e=>{console.log("currentPlanObj.value",e,$e.value)};S((()=>ot.value.planCode),(e=>{$e.value=(Be.value.productPlanInsureVOList||[]).find((t=>t.planCode===e))}));const vt=()=>{Ne.value.handleClickTab()("tab3")},ft=k(""),gt=k(0),ht=async()=>{try{await Z(((e={},t={},a={})=>{var n;const r={...a},o={tenantId:ye,riskList:(null===(n=r.tenantOrderInsuredList[0])||void 0===n?void 0:n.tenantOrderProductList[0].riskVOList)||[],riskPremium:t,productId:e.id};return r.extInfo.iseeBizNo=Ye.value,r.productCode=e.productCode,r.commencementTime=r.insuranceStartDate,r.expiryDate=r.insuranceEndDate,r.tenantOrderHolder={...r.tenantOrderHolder,certType:r.tenantOrderHolder.certType||R.CERT,certNo:(r.tenantOrderHolder.certNo||"").toLocaleUpperCase(),extInfo:{...r.tenantOrderHolder.extInfo}},r.tenantOrderInsuredList=r.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||R.CERT,certNo:(e.certNo||"").toLocaleUpperCase(),planCode:$e.value.planCode,extInfo:{...e.extInfo}}))),r.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:gt.value,productCode:e.productCode,productName:e.productName,planCode:$e.value.planCode,tenantOrderRiskList:le(o)},r})(Be.value,Me.value,rt.value),(async(e,t)=>{t===z.JUMP_PAGE&&null!=e&&e.orderNo&&await(async e=>{try{const{code:t,data:a}=await J({orderNo:e,tenantId:ye});"10000"===t&&(a.extInfo={...a.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await Z(a))}catch(jt){}})(null==e?void 0:e.orderNo)}))}catch(jt){}},{fileList:yt,mustReadFileCount:bt,popupFileList:At}=se($e,st),xt=e=>{qe.value=e,Ue.value=!0},It=async(e,t,a=!0)=>{var n;const{chargePeriod:r,coveragePeriod:o,paymentFrequency:l,insuranceEndDate:i,insuranceStartDate:s}=ot.value;ft.value="保费试算中...";const d=ne(t).map((e=>({...e,paymentFrequency:l,chargePeriod:r,coveragePeriod:o}))),{tenantOrderHolder:c,tenantOrderInsuredList:u}=rt.value,p={tenantId:ye,productCode:e.productCode,insuranceStartDate:s,insuranceEndDate:i,holder:{personVO:{...c,socialFlag:null===(n=c.extInfo)||void 0===n?void 0:n.hasSocialInsurance,certType:c.certType||R.CERT}},insuredVOList:u.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance,certType:e.certType||R.CERT},productPlanVOList:[{insurerCode:Pe,planCode:$e.value.planCode,riskVOList:d}]})))},{code:m,message:v}=await G(p);if("10000"===m){const{code:e,data:t}=await Q(p);if("10000"===e){if(ft.value="",rt.value.tenantOrderInsuredList[0].tenantOrderProductList=p.insuredVOList[0].productPlanVOList,gt.value=null==t?void 0:t.premium,rt.value.premium=t.premium,rt.value.orderAmount=t.premium,rt.value.orderRealAmount=t.premium,!a){const e={};t.riskPremiumDetailVOList&&t.riskPremiumDetailVOList.length&&t.riskPremiumDetailVOList.forEach((t=>{e[t.riskCode]={premium:t.premium,amount:t.amount}})),Me.value=e,At.value.length>0?(Qe.value=!1,xt(0)):it.value.length>0?Ve.value=!0:await ht()}}else ft.value=""}else ft.value="",H(v)},kt=()=>{const e=[];return Ze.value.filter((e=>e.value===K.INSURE)).forEach((t=>{e.push(...t.productRiskVoList)})),e},Ct=async()=>{try{var e,t;if(Ve.value=!1,Ue.value=!1,et.value&&tt.value)Promise.all([null===(e=et.value)||void 0===e?void 0:e.validate(),null===(t=tt.value)||void 0===t?void 0:t[0].validate()]).then((async()=>{if(ut.value)await It(Be.value,[...pt.value,...kt()],!1);else{var e;const t=null===(e=rt.value.tenantOrderHolder)||void 0===e?void 0:e.verificationCode;if(!re(t))return void H({message:"请输入正确的验证码"});const{code:a,data:n}=await me(rt.value.tenantOrderHolder.mobile,t);"10000"===a&&await It(Be.value,[...pt.value,...kt()],!1)}})).catch((()=>{const e=document.querySelector(".form-title");e&&e.scrollIntoView()}))}catch(a){}},Ot=e=>{"allFalse"===e?(Ve.value=!1,ht()):B.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{Ve.value=!1}))},wt=()=>{Ue.value=!1,Qe.value=!0,it.value.length<1?ht():Ve.value=!0},Lt=()=>{Ve.value=!1,Ue.value=!1,Qe.value=!0};S((()=>rt.value.tenantOrderInsuredList[0].relationToHolder),((e,t)=>{e!==t&&Ze.value&&Ze.value.forEach((e=>{e.value=K.UN_INSURE})),Je.value=!1,j((()=>{const{certType:e,extInfo:t}=rt.value.tenantOrderInsuredList[0];t&&!t.hasSocialInsurance&&(rt.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=te.HAS),Je.value=!0}))}),{deep:!0,immediate:!0}),S([()=>at.holder.formData,()=>at.insuredList],(([e,t])=>{Object.assign(rt.value,(({holder:e,insuredList:t=[]})=>{const a=["birthday","certEndDate","certEndType","certNo","certStartDate","verificationCode","certType","email","gender","mobile","name","id","insuredBeneficiaryType","relationToHolder","relationToMainInsured"],n=e=>{const t={extInfo:{}};return"[object Object]"==={}.toString.call(e)&&Object.keys(e).forEach((n=>{a.includes(n)?t[n]=e[n]:t.extInfo[n]=e[n]})),t};return{tenantOrderHolder:n(e),tenantOrderInsuredList:(t||[]).map((e=>n(e)))}})({holder:e,insuredList:t.map((e=>e.formData))}))}),{deep:!0});const Tt=(e,t)=>e.find((e=>!t[e])),St=async()=>{const{trialFactorCodes:e,formData:t}=at.holder,{trialFactorCodes:a,formData:n}=at.insuredList[0];return new Promise(((r,o)=>{!Tt(e,t)&&!Tt(a,n)&&et.value&&tt.value?Promise.all([et.value.validate(e),tt.value[0].validate(a)]).then((()=>{r(!0)})).catch((()=>{o()})):o()}))};return S((()=>[...at.holder.trialFactorCodes.map((e=>at.holder.formData[e])),...at.insuredList.reduce(((e,t,a)=>(e.push(...t.trialFactorCodes.map((e=>at.insuredList[a].formData[e]))),e)),[]),ot.value.paymentFrequency,Ze.value]),((...e)=>{lt.value||St().then((()=>{It(Be.value,[...pt.value,...kt()])})).catch((()=>{St().then((()=>{ft.value="保费试算中..."}))}))}),{deep:!0}),S((()=>at.holder.formData),((...e)=>{at.insuredList.forEach(((e,t)=>{const{formData:a,schema:n}=e||{};"1"===a.relationToHolder&&Object.assign(e.formData,at.holder.formData)}))}),{deep:!0,immediate:!0}),S((()=>$e.value),(()=>{let{productFactor:e}=$e.value;const{oilPackageProductVOList:t,planCode:a,insureProductRiskVOList:n}=$e.value;ut.value&&e[1]&&(e=e[1].filter((e=>"verificationCode"!==e.code))),ot.value.planCode=a,pt.value=n,Ke.value=(n||[]).find((e=>e.mainRiskFlag===P.YES)),console.log("mainRiskInfo.value",Ke.value),Ze.value=(t||[]).map((e=>({...e,value:K.UN_INSURE})));const[r,o,l]=ge(e);at.holder={...at.holder,...r},at.insuredList[0]={...at.insuredList[0],...o}}),{deep:!0,immediate:!0}),S((()=>at.insuredList.map(((e,t)=>at.insuredList[t].formData.relationToHolder))),((e,t)=>{console.log("%c🔥 与投保人关系变动了","color:#1989fa;background:#5e4;padding:3px 5px;"),at.insuredList.forEach(((e,t)=>{const{formData:a,schema:n,config:r}=e||{},o="1"===a.relationToHolder,l="3"===a.relationToHolder;r.certNo.label="身份证号"+(l?"(户口簿)":""),e.schema.forEach((e=>{e.relationToHolder=a.relationToHolder,e.hidden=!e.isSelfInsuredNeed&&o})),o?Object.assign(e.formData,{...at.insuredList[t].formData,...at.holder.formData}):Object.assign(e.formData,{...Object.keys(e.formData).reduce(((e,t)=>(e[t]="",e)),{}),relationToHolder:a.relationToHolder})}))}),{immediate:!0,deep:!0}),j((()=>{V(De,(([{isIntersecting:e}],t)=>{Fe.value=!e}))})),E((()=>{const e=_.get(X);if(e){const{tenantOrderHolder:a,tenantOrderInsuredList:n}=e;if(a&&(rt.value.tenantOrderHolder={...a,certType:a.certType||R.CERT}),Array(n)&&n[0]){const e=n[0]||{};if(rt.value.activePlanCode=e.planCode,e.tenantOrderProductListtenantOrderProductList&&e.tenantOrderProductList[0]&&e.tenantOrderProductList[0].tenantOrderRiskList){var t;const a=null===(t=e.tenantOrderProductList[0].tenantOrderRiskList)||void 0===t?void 0:t.find((e=>"1"===String(e.riskType)));a&&(rt.value.paymentFrequency=null!=a&&a.paymentFrequency?String(null==a?void 0:a.paymentFrequency):ee.SINGLE)}}}})),N((()=>{We.value=!0,dt(),setTimeout((async()=>{Ye.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),D((()=>{_.remove(X)})),(e,t)=>{const a=U,r=q;return o(),l(d,null,[u(We)?(o(),l("div",xe,Ie)):(o(),p(r,{key:1,"data-skeleton-root":"SHORT","theme-vars":u(A)},{default:s((()=>{var e,n,r,v,A,x,I,k,C,O;return[y("div",ke,[y("div",Ce,[null!==(e=u(He))&&void 0!==e&&null!==(n=e.BASIC_INFO)&&void 0!==n&&n.banner.length?(o(),p(ie,{key:0,"data-skeleton-type":"img",url:null===(r=u(He))||void 0===r?void 0:r.BASIC_INFO.banner[0]},null,8,["url"])):h("",!0),null!==(v=u(He))&&void 0!==v&&null!==(A=v.BASIC_INFO)&&void 0!==A&&null!==(x=A.bannerMove)&&void 0!==x&&x.length?(o(),p(ie,{key:1,url:null===(I=u(He))||void 0===I||null===(k=I.BASIC_INFO)||void 0===k||null===(C=k.bannerMove)||void 0===C?void 0:C[0],onClick:vt},null,8,["url"])):h("",!0),y("div",{ref_key:"observeRef",ref:De},null,512)]),null!==(O=u(He))&&void 0!==O&&O.GUARANTEE?(o(),p(de,{key:0,"show-service-config":"","data-source":u(He),"plan-list":u(Xe)},null,8,["data-source","plan-list"])):h("",!0),i(ce,{ref_key:"detailScrollRef",ref:Ne,"order-detail":u(rt),"data-source":u(He)},{form:s((()=>[y("div",Oe,[we,i(u(he),{ref_key:"holderFormRef",ref:et,title:"本人信息（投保人）",model:u(at).holder.formData,schema:u(at).holder.schema,config:u(at).holder.config},null,8,["model","schema","config"]),(o(!0),l(d,null,c(u(at).insuredList,((e,t)=>(o(),p(u(he),{ref_for:!0,ref_key:"insuredFormRef",ref:tt,key:t,title:"为谁投保（被保人）",model:u(at).insuredList[t].formData,schema:e.schema,config:e.config},null,8,["model","schema","config"])))),128))]),i(u(f),{"form-info":u(ot),"risk-info":u(Ke),"tenant-product-detail":u(He).PREMIUM,"plan-list":u(Xe),"premium-info":{premium:u(gt),premiumLoadingText:u(ft)},onUpdateActivePlan:mt},null,8,["form-info","risk-info","tenant-product-detail","plan-list","premium-info"]),u(Ze).length>0?(o(),p(Ae,{key:0,"package-product-list":u(Ze)},null,8,["package-product-list"])):h("",!0)])),_:1},8,["order-detail","data-source"]),i(a,null,{default:s((()=>{var e,t,a;return[null!==(e=u(He).SIGNATURE)&&void 0!==e&&e.inscribedContent?(o(),p(u(g),{key:0,"inscribed-content":null===(t=u(He))||void 0===t||null===(a=t.SIGNATURE)||void 0===a?void 0:a.inscribedContent},null,8,["inscribed-content"])):h("",!0)]})),_:1}),i(a,null,{default:s((()=>{var e;return[null!==(e=u(yt))&&void 0!==e&&e.length?(o(),p(u(b),{key:0,"attachement-list":u(yt),"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>xt(e))},null,8,["attachement-list"])):h("",!0)]})),_:1}),u(Fe)?(o(),p(ve,{key:1,"is-share":u(He).PRODUCT_LIST.showWXShare,premium:u(gt),"share-info":u(nt),"loading-text":u(ft),"plan-code":u(ot).planCode,"payment-frequency":u(ot).paymentFrequency,"tenant-product-detail":u(He),onClick:Ct},{default:s((()=>[m("立即投保")])),_:1},8,["is-share","premium","share-info","loading-text","plan-code","payment-frequency","tenant-product-detail"])):h("",!0)]),u(ze)?(o(),p(ue,{key:0,"product-detail":u(He)},null,8,["product-detail"])):h("",!0),Le]})),_:1},8,["theme-vars"])),i(u(v),{show:u(Ve),"onUpdate:show":t[1]||(t[1]=e=>F(Ve)?Ve.value=e:null),"content-list":u(it),"active-index":0,onOnConfirmHealth:Ot,onOnCloseHealthByMask:Lt},null,8,["show","content-list"]),u(Ue)?(o(),p(u(n),{key:2,show:u(Ue),"onUpdate:show":t[2]||(t[2]=e=>F(Ue)?Ue.value=e:null),"content-list":u(Qe)?u(yt):u(At),"is-only-view":u(Qe),"active-index":u(qe),text:u(Qe)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":u(Qe)?0:u(bt),onSubmit:wt,onOnCloseFilePreviewByMask:Lt},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):h("",!0)],64)}}}))}}}))}();

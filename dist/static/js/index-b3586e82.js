import{_ as e,d as a,a as l,r as i,J as s,E as t,cf as o,am as n,c as r,g as d,f as u,m as c,F as v,h as p,e as m,aD as k,G as I,w as f,j as y,y as h,A as g,a4 as V,i as O,t as b,bB as C,n as R,V as L,B as S,bE as _,bF as x,X as w,Y as T,cm as P,b4 as F,a7 as j,bY as D,u as N,a8 as A,b6 as E,b$ as U,b as q,c0 as B,cn as M,c7 as K}from"./index-dae3ff12.js";import{p as z,c as G,i as W}from"./trial-b645c7f1.js";import{b as H,c as Y}from"./product-9a4e8498.js";import{_ as $}from"./index-335629ec.js";import{a as J,u as Q,G as X,_ as Z}from"./useAttachment-7d97d239.js";import{P as ee}from"./index-5fb5ba6d.js";import{g as ae}from"./utils-97e71bd2.js";import{l as le}from"./ProAddress.vue_vue_type_style_index_0_scoped_true_lang-13173ab9.js";import"./index-8907c337.js";import"./infoCollection-89fc213f.js";import{I as ie,P as se}from"./index-232d356a.js";import{c as te,t as oe,_ as ne}from"./index-79a47d57.js";import{S as re}from"./index-0ebcf706.js";import{_ as de}from"./index-5c222128.js";import{S as ue,_ as ce}from"./box-title-14c12a82.js";import{_ as ve}from"./index-04aa0453.js";import{T as pe}from"./Table-fbc12a39.js";import"./pdfh5-008ca364.js";import"./index-6f81a24b.js";import"./trial-75f9914d.js";import"./cloneDeep-aaa98338.js";import"./keysIn-b3061da8.js";import"./isObjectLike-d00d103b.js";import"./empty-ae586b6c.js";import"./echarts-798423e5.js";var me=e(a({props:{productFactor:{default:()=>({})},modelValue:{default:()=>({})}},emits:["update:modelValue","trailChange"],setup(e,{expose:a,emit:k}){const I=e,{query:{insurerCode:f}={}}=l(),y=i(null),h=i(null),g=s({validated:!1,holder:{personVO:{},schema:[],trialFactorCodes:[],config:{occupation:{dictCode:te(f)}}},insured:{schema:[],trialFactorCodes:[],config:{occupation:{dictCode:te(f)}},insuredVOList:[{personVO:{}}]}}),V=t((()=>o(g.holder.schema)!==o(g.insured.schema))),O=()=>{var e,a;const l=null==(e=h.value)?void 0:e.map((e=>null==e?void 0:e.validate()));return Promise.all([null==(a=y.value)?void 0:a.validate(),...l])},b=e=>{const a=["insureArea","residence","longArea","workAddress"],l={};return Object.keys(e).forEach((i=>{a.indexOf(i)>=0&&e[i]instanceof Object?Object.keys(e[i]).forEach((a=>{l[a]=e[i][a]})):l[i]=e[i]})),l};return n((()=>I.productFactor),(()=>{const[e,a]=oe(I.productFactor,!0);Object.assign(g.holder,e),Object.assign(g.insured,a)}),{deep:!0,immediate:!0}),n([()=>g.holder.personVO,()=>g.insured.insuredVOList],(()=>{const e={holder:b(g.holder.personVO),insuredVOList:g.insured.insuredVOList.map((e=>({...e,personVO:b(e.personVO)})))};k("update:modelValue",e),(()=>{const e=!!o(g.holder.trialFactorCodes)&&g.holder.trialFactorCodes.some((e=>{const a=g.holder.personVO[e];return le.exports.isNil(a)||""===a})),a=!!o(g.insured.trialFactorCodes)&&g.insured.trialFactorCodes.some((e=>g.insured.insuredVOList.some((a=>{const l=a.personVO[e];return le.exports.isNil(l)||""===l}))));return e||a})()||O().then((()=>{g.validated=!0,k("trailChange",e)})).catch((()=>{g.validated=!1}))}),{deep:!0}),a({validate:O}),(e,a)=>(r(),d(v,null,[u(c(ne),{ref_key:"holderInfoRef",ref:y,title:c(V)?"":"投保人信息",class:"trail-personal-info",model:c(g).holder.personVO,schema:c(g).holder.schema,config:c(g).holder.config},null,8,["title","model","schema","config"]),(r(!0),d(v,null,p(c(g).insured.insuredVOList,((e,a)=>(r(),m(c(ne),{ref_for:!0,ref_key:"insuredFormRef",ref:h,key:a,class:"trail-personal-info",title:c(V)?"":"被保人信息",model:e.personVO,schema:c(g).insured.schema,config:c(g).insured.config},null,8,["title","model","schema","config"])))),128))],64))}}),[["__scopeId","data-v-59f09530"]]);const ke={key:0},Ie={key:0,class:"risk2-field"};var fe=e(a({props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:""})},showMainRisk:{type:Boolean,default:()=>!0}},emits:["trialChange"],setup(e,{emit:a}){const l=e,i=s({loading:!1,show:!0,select:{},list:[],userData:{},riskIsInsure:{},submitData:{},disabledRiskInfo:[]}),t=e=>{const a=[];return e.riskLiabilityInfoVOList.map((e=>(1!=+e.showFlag&&a.push({...e}),[]))),a},o=(e,s)=>{var t;i.riskIsInsure[s].data=e;const o=[...i.disabledRiskInfo];null==(t=l.dataSource.insureProductRiskVOList)||t.forEach((e=>{if(1!==e.mainRiskFlag){const a=i.riskIsInsure[e.riskId];a.data&&Object.keys(a.data).length>0&&!a.isDisabled&&o.push(a.data)}})),a("trialChange",o)},m=(e,a)=>{var s;null==(s=l.dataSource.productRiskRelationVOList)||s.forEach((l=>{1!==l.collocationType&&(a.riskId===l.riskId?(i.riskIsInsure[a.riskId]&&i.riskIsInsure[a.riskId].selected,2===l.collocationType&&i.riskIsInsure[l.collocationRiskId]&&(i.riskIsInsure[l.collocationRiskId].selected=e),3===l.collocationType&&i.riskIsInsure[l.collocationRiskId]&&(i.riskIsInsure[l.collocationRiskId].selected="1"===e?"2":"1")):a.riskId===l.collocationRiskId&&(3===l.collocationType&&i.riskIsInsure[l.riskId]&&(i.riskIsInsure[l.riskId].selected="1"===e?"2":"1"),2===l.collocationType&&i.riskIsInsure[l.riskId]&&(i.riskIsInsure[l.riskId].selected=e)))})),"2"===e?o({},a.riskId):(e=>{var a,l,i,s,n,r;if(1!==(null==e?void 0:e.factorDisPlayFlag)){const d=null==(a=null==e?void 0:e.productRiskInsureLimitVO)?void 0:a.amountPremiumConfigVO,u={riskCategory:e.riskCategory,riskCode:e.riskCode,riskName:e.riskName,riskId:e.riskId,riskType:e.riskType,mainRiskId:e.mainRiskId,mainRiskCode:e.mainRiskCode,liabilityVOList:t(e)};u.chargePeriod=(null==(l=null==e?void 0:e.paymentPeriodValueList)?void 0:l.length)>0&&(null==e?void 0:e.paymentPeriodValueList[0].code)||null,u.coveragePeriod=(null==(i=null==e?void 0:e.insurancePeriodValueList)?void 0:i.length)>0&&(null==e?void 0:e.insurancePeriodValueList[0].code)||null,u.paymentFrequency=(null==(s=null==e?void 0:e.paymentFrequencyList)?void 0:s.length)>0&&(null==e?void 0:e.paymentFrequencyList[0].code)||null;let c=0;1===d.displayType?c=(null==d?void 0:d.minStepValue)>0?null==d?void 0:d.minStepValue:0:3===d.displayType&&2===d.requireCopies?c=(null==(n=null==d?void 0:d.displayValues)?void 0:n.length)>0?null==d?void 0:d.displayValues[0].value:0:3===d.displayType&&1===d.requireCopies?(c=(null==(r=null==d?void 0:d.displayValues)?void 0:r.length)>0?null==d?void 0:d.displayValues[0].value:0,u.copy=d.minCopiesValue):2===d.displayType?u.copy=d.minCopiesValue:c=0,1===d.saleMethod?u.amount=c:u.premium=c,o(u,e.riskId)}})(a)};return k((()=>{(()=>{var e,a;i.riskIsInsure={},i.disabledRiskInfo=[];let s=null;if(null==(e=l.dataSource.insureProductRiskVOList)||e.forEach((e=>{var a;const t=1!==e.mainRiskFlag?null==(a=l.dataSource.productRiskRelationVOList)?void 0:a.find((a=>a.collocationRiskId===e.riskId)):{};1===e.mainRiskFlag&&(s=e),i.riskIsInsure[e.riskId]={selected:"2",data:null,relation:t,isMust:!1}})),s){const e=null==(a=l.dataSource.productRiskRelationVOList)?void 0:a.filter((e=>e.riskId===s.riskId));if(!e)return;null==e||e.forEach((e=>{var a,s,n,r,d,u,c,v,p;if(2===e.collocationType){i.riskIsInsure[e.collocationRiskId].selected="1",i.riskIsInsure[e.collocationRiskId].isMust=!0;const m=null==(a=l.dataSource.insureProductRiskVOList)?void 0:a.find((a=>e.collocationRiskId===a.riskId));if(m&&1!==m.factorDisPlayFlag&&(null==(s=null==m?void 0:m.productRiskInsureLimitVO)?void 0:s.amountPremiumConfigVO)){const a=null==(n=m.riskLiabilityInfoVOList)?void 0:n.every((e=>1!==e.showFlag)),l=null==(r=null==m?void 0:m.productRiskInsureLimitVO)?void 0:r.amountPremiumConfigVO;if(a){i.riskIsInsure[e.collocationRiskId].isDisabled=!0;const a={riskCategory:m.riskCategory,riskCode:m.riskCode,riskName:m.riskName,riskId:m.riskId,riskType:m.riskType,mainRiskId:m.mainRiskId,mainRiskCode:m.mainRiskCode,liabilityVOList:t(m)};a.chargePeriod=(null==(d=null==m?void 0:m.paymentPeriodValueList)?void 0:d.length)>0&&(null==m?void 0:m.paymentPeriodValueList[0].code)||null,a.coveragePeriod=(null==(u=null==m?void 0:m.insurancePeriodValueList)?void 0:u.length)>0&&(null==m?void 0:m.insurancePeriodValueList[0].code)||null,a.paymentFrequency=(null==(c=null==m?void 0:m.paymentFrequencyList)?void 0:c.length)>0&&(null==m?void 0:m.paymentFrequencyList[0].code)||null;let s=0;1===l.displayType?s=(null==l?void 0:l.minStepValue)>0?null==l?void 0:l.minStepValue:0:3===l.displayType&&2===l.requireCopies?s=(null==(v=null==l?void 0:l.displayValues)?void 0:v.length)>0?null==l?void 0:l.displayValues[0].value:0:3===l.displayType&&1===l.requireCopies?(s=(null==(p=null==l?void 0:l.displayValues)?void 0:p.length)>0?null==l?void 0:l.displayValues[0].value:0,a.copy=l.minCopiesValue):2===l.displayType&&(a.copy=l.minCopiesValue),1===l.saleMethod?a.amount=s:a.premium=s,i.disabledRiskInfo.push(a),o(a,m.riskId)}}}3===e.collocationType&&(i.riskIsInsure[e.collocationRiskId].selected="2",i.riskIsInsure[e.collocationRiskId].isMust=!0)}))}})()})),I((()=>{i.loading=!0})),n((()=>i.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(a,l)=>{const s=re,t=h;return r(!0),d(v,null,p(e.dataSource.insureProductRiskVOList,(a=>(r(),d(v,{key:a.riskCode},[(!e.showMainRisk&&1!==a.mainRiskFlag||e.showMainRisk)&&c(i).riskIsInsure[a.riskId].relation?(r(),d("div",ke,[u(t,{modelValue:c(i).riskIsInsure[a.riskId].selected,"onUpdate:modelValue":e=>c(i).riskIsInsure[a.riskId].selected=e,label:a.riskName,name:"selected","label-width":"50%",border:!1,class:"risk-select-field risk-name"},{input:f((()=>[u(s,{modelValue:c(i).riskIsInsure[a.riskId].selected,"onUpdate:modelValue":e=>c(i).riskIsInsure[a.riskId].selected=e,"active-value":"1","inactive-value":"2",size:"26px",disabled:c(i).riskIsInsure[a.riskId].isMust,style:{"margin-right":"8px"},onChange:e=>m(e,a)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"]),"1"===c(i).riskIsInsure[a.riskId].selected?(r(),d("div",Ie,[u(ie,{modelValue:c(i).riskIsInsure[a.riskId].data,"onUpdate:modelValue":e=>c(i).riskIsInsure[a.riskId].data=e,"origin-data":a,"product-factor":e.dataSource.productFactor,onTrialChange:e=>o(e,a.riskId)},null,8,["modelValue","onUpdate:modelValue","origin-data","product-factor","onTrialChange"])])):y("",!0)])):y("",!0)],64)))),128)}}}),[["__scopeId","data-v-5e1ba7fc"]]);const ye={class:"benefit-table"},he=a({props:{dataSource:null},setup(e){const a=e,l=t((()=>{const e=a.dataSource.headers.length,l=12*a.dataSource.headers.join("").length+20*a.dataSource.headers.length;return a.dataSource.headers.map(((a,i)=>{const s=l>320?12*a.length+20:Math.max(12*a.length+20,320/e);return console.log("totalWordWidth:",l,"titleWidth:",s,"word-width:",12*a.length+20),{title:a,key:`header_${i}`,fixed:i<2,minWidth:s}}))})),i=t((()=>a.dataSource.dataList.map((e=>{const a={};return e.forEach(((e,l)=>{a[`header_${l}`]=e})),a}))));return I((()=>{})),(e,a)=>(r(),d("div",ye,[u(pe,{"top-height":400,columns:c(l),data:c(i),"is-clone":!0},null,8,["columns","data"])]))}});const ge=e=>(w("data-v-2cf800e4"),e=e(),T(),e),Ve={key:0,class:"benefit-container"},Oe={key:0,class:"benefit"},be=ge((()=>O("div",{class:"line"},null,-1))),Ce={class:"box-title box-title-chart"},Re=ge((()=>O("img",{class:"tl",src:ce,alt:""},null,-1))),Le=R(" 保单年度"),Se=R("年度，被保人"),_e=R("岁时 "),xe=ge((()=>O("img",{class:"transform-z180 tr",src:ce,alt:""},null,-1))),we={key:0},Te={class:"box"},Pe={class:"box-title"},Fe=ge((()=>O("img",{class:"tl",src:ce,alt:""},null,-1))),je=R(" 保单年度"),De=R("年度，被保人"),Ne=R("岁时 "),Ae=ge((()=>O("img",{class:"transform-z180 tr",src:ce,alt:""},null,-1))),Ee={class:"box-price"},Ue={class:"text1"},qe={class:"text2"},Be={key:1},Me={key:2,style:{width:"100%, minWidth: 338px"}},Ke={class:"slider"},ze={style:{flex:"1",margin:"0px 5px"}},Ge={class:"custom-button"},We=ge((()=>O("p",{class:"slider-dec"},"拖动按钮查看不同年龄保障",-1))),He={class:"btn-two"},Ye=R("图表展示"),$e=R("趋势展示"),Je=R("表格展示"),Qe={key:1};var Xe=e(a({props:{dataSource:{default:()=>({showTypeList:["1"]})}},setup(e){var a;const l=e,s="1",t="2",o="3",k=i(0),I=i(0),h=i(0),R=i(),w=i(0),T=i(null==(a=l.dataSource.showTypeList)?void 0:a[0]),P=i(),F=e=>{if(!(null==e?void 0:e.benefitRiskResultVOList))return;const a=null==e?void 0:e.benefitRiskResultVOList[k.value];I.value=a.ageBegin+1,w.value=a.ageBegin+1,h.value=a.ageEnd},j=()=>{var e,a,i,s,t,o;const n=null==(a=null==(e=l.dataSource)?void 0:e.benefitRiskResultVOList)?void 0:a[k.value];P.value=null==(t=null==(s=null==(i=l.dataSource)?void 0:i.benefitRiskResultVOList)?void 0:s[k.value].benefitRiskTableResultVOList)?void 0:t[0];const{a:r,year:d}=((e,a)=>{const l=[],i=[];for(let s=e,t=0;s<=a;s++,t++)l.push(s.toString()),i.push(t+1);return{a:l,year:i}})(I.value,h.value),u={index:r.indexOf(w.value.toString()),age:r,year:d,result:null==(o=null==n?void 0:n.benefitRiskItemResultVOList)?void 0:o[0]};R.value=u},D=()=>{w.value>h.value-1||(w.value+=1,j())},N=()=>{w.value>I.value&&(w.value-=1,j())},A=e=>{k.value=e.name,F(l.dataSource),j()};return n((()=>l.dataSource),(e=>{var a;e&&(F(e),j(),T.value=null==(a=e.showTypeList)?void 0:a[0])}),{deep:!0,immediate:!0}),n(w,(()=>{j()})),(a,i)=>{var n;const F=L,j=ue,E=S,U=_,q=x,B=de;return(null==(n=e.dataSource)?void 0:n.benefitRiskResultVOList)?(r(),d("div",Ve,[u(q,{active:k.value,onClickTab:A},{default:f((()=>{var e;return[(r(!0),d(v,null,p(null==(e=l.dataSource)?void 0:e.benefitRiskResultVOList,((e,a)=>(r(),m(U,{key:a,name:a,title:e.riskName},{default:f((()=>{var e,n,L,S,_,x,A,U,q,B,M,K,z,G,W,H;return[a==k.value?(r(),d("div",Oe,[be,g(O("p",Ce,[Re,Le,O("span",null,b(null==(L=null==(e=R.value)?void 0:e.year)?void 0:L[null==(n=R.value)?void 0:n.index]),1),Se,O("span",null,b(null==(x=null==(S=R.value)?void 0:S.age)?void 0:x[null==(_=R.value)?void 0:_.index]),1),_e,xe],512),[[V,T.value===t]]),T.value===s?(r(),d("div",we,[O("div",Te,[O("p",Pe,[Fe,je,O("span",null,b(null==(q=null==(A=R.value)?void 0:A.year)?void 0:q[null==(U=R.value)?void 0:U.index]),1),De,O("span",null,b(null==(K=null==(B=R.value)?void 0:B.age)?void 0:K[null==(M=R.value)?void 0:M.index]),1),Ne,Ae]),O("div",Ee,[(r(!0),d(v,null,p(null==(G=null==(z=R.value)?void 0:z.result)?void 0:G.headers,((e,a)=>{var l,i,s,t,o,n,u,v,p,m;return r(),d("div",{key:a,style:{width:"33%"}},[O("p",Ue,b("0"==(null==(o=null==(t=null==(i=null==(l=R.value)?void 0:l.result)?void 0:i.dataList)?void 0:t[null==(s=R.value)?void 0:s.index])?void 0:o[a])?"0":c(C)(Number(null==(m=null==(p=null==(u=null==(n=R.value)?void 0:n.result)?void 0:u.dataList)?void 0:p[null==(v=R.value)?void 0:v.index])?void 0:m[a]))),1),O("p",qe,b(e)+"(元）",1)])})),128))])])])):y("",!0),T.value===o?(r(),d("div",Be,[u(he,{"data-source":P.value},null,8,["data-source"])])):y("",!0),T.value==t?(r(),d("div",Me,[u(ve,{min:I.value,max:h.value,current:w.value,data:null==(H=null==(W=R.value)?void 0:W.result)?void 0:H.benefitRiskItemList},null,8,["min","max","current","data"])])):y("",!0),T.value!=o?(r(),d(v,{key:3},[O("div",Ke,[O("div",{class:"opt lf",onClick:N},[u(F,{name:"minus"})]),O("div",ze,[I.value?(r(),m(j,{key:0,modelValue:w.value,"onUpdate:modelValue":i[0]||(i[0]=e=>w.value=e),min:I.value,max:h.value,"bar-height":"8px"},{button:f((()=>[O("div",Ge,b(w.value)+" 岁",1)])),_:1},8,["modelValue","min","max"])):y("",!0)]),O("div",{class:"opt rg",onClick:D},[u(F,{name:"plus"})])]),We],64)):y("",!0),O("div",He,[l.dataSource.showTypeList.includes(s)?(r(),m(E,{key:0,round:"",plain:T.value!==s,type:"primary",class:"btn",onClick:i[1]||(i[1]=e=>T.value=s)},{default:f((()=>[Ye])),_:1},8,["plain"])):y("",!0),l.dataSource.showTypeList.includes(t)?(r(),m(E,{key:1,round:"",plain:T.value!==t,type:"primary",class:"btn",onClick:i[2]||(i[2]=e=>T.value=t)},{default:f((()=>[$e])),_:1},8,["plain"])):y("",!0),l.dataSource.showTypeList.includes(o)?(r(),m(E,{key:2,round:"",plain:T.value!==o,type:"primary",class:"btn",onClick:i[3]||(i[3]=e=>T.value=o)},{default:f((()=>[Je])),_:1},8,["plain"])):y("",!0)])])):y("",!0)]})),_:2},1032,["name","title"])))),128))]})),_:1},8,["active"])])):(r(),d("div",Qe,[u(B,{title:"试算前请完善投保信息","empty-class":"empty-select"})]))}}}),[["__scopeId","data-v-2cf800e4"]]);const Ze=e=>(w("data-v-0250f01c"),e=e(),T(),e),ea={class:"trial-button"},aa=R("立即投保"),la={class:"com-body"},ia={class:"header"},sa=Ze((()=>O("span",null,"算一算保费",-1))),ta={class:"container"},oa=Ze((()=>O("div",{class:"empty"},null,-1))),na=R("立即投保");var ra=e(a({props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:"",insurerCode:"",tenantId:""})},tenantProductDetail:{type:Object,default:()=>{}}},setup(e,{expose:a}){const l=e,t=i(null),o=s({loading:!1,show:!1,select:{},list:[],userData:{},riskIsInsure:{},submitData:{},riskVOList:[{}],mainRiskVO:{},ifPersonalInfoSuccess:!1,trialMsg:"",trialResult:0,isAniShow:!1}),p=()=>{var e;null==(e=t.value)||e.validate().then((()=>{console.log("---- validate success ----")})),o.loading=!1,o.show=!0,o.isAniShow=!0},h=()=>{o.show=!1,o.loading=!1},g=i({});i({tenantId:"9991000007",productCode:"BDFZCHUN",holder:{personVO:{extInfo:{},certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456"}},insuredVOList:[{insuredCode:"",relationToHolder:"1",personVO:{extInfo:{hasSocialInsurance:"1"},relationToHolder:"1",certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456",socialFlag:"1"},productPlanVOList:[{insurerCode:"zhongan",planCode:"",riskVOList:[{amount:"6000000",chargePeriod:"year_5",copy:1,coveragePeriod:"to_68",paymentFrequency:"2",riskCategory:4,riskCode:"CBE00CHUN",riskName:"(勿动)利益演示测试",riskId:10325,riskType:1}]}]}]});const V=()=>{var e,a;o.riskIsInsure={},null==(a=null==(e=null==l?void 0:l.dataSource)?void 0:e.insureProductRiskVOList)||a.forEach((e=>{var a;const i=null==(a=l.dataSource.productRiskRelationVOList)?void 0:a.find((a=>a.collocationRiskId===e.riskId));i&&(o.riskIsInsure[e.riskCode]={selected:"2",data:null,relation:i})}))},b=e=>{var a,i,s,t;const n=null==(a=l.dataSource.insureProductRiskVOList)?void 0:a.find((a=>e.riskId===a.riskId));if(n&&1!==n.mainRiskFlag){const a=null==(s=null==(i=l.dataSource)?void 0:i.productRiskRelationVOList)?void 0:s.find((e=>e.collocationRiskId===n.riskId));if(a){const l=null==(t=o.riskVOList)?void 0:t.find((e=>e.riskId===a.riskId));se.forEach((a=>{a.ruleKey&&n.productRiskInsureLimitVO&&l&&(1===n.productRiskInsureLimitVO[a.ruleKey]&&(e[a.valueKey]=l[a.valueKey]),3===n.productRiskInsureLimitVO[a.ruleKey]&&(e[a.valueKey]=((e,a,l)=>{var i,s,t,o;const n=e,{holder:r}=l,d=l.insuredVOList[0],u=(a||"").split("_");if(u[1]-=1,1===n.exemptFlag){if("to"===u[0]){let e=0;1===n.exemptType?(null==(i=null==r?void 0:r.personVO)?void 0:i.birthday)&&(e=parseInt(""+((new Date).getTime()-new Date(null==(s=r.personVO)?void 0:s.birthday).getTime())/31536e6,10)):2===n.exemptType&&(null==(t=null==d?void 0:d.personVO)?void 0:t.birthday)&&(e=parseInt(""+(+(new Date).getTime()-new Date(null==(o=d.personVO)?void 0:o.birthday).getTime())/31536e6,10)),u[1]=+u[1]-e}u[0]="year"}return u.join("_")})(n,l[a.valueKey],o.submitData)))}))}}return e},C=le.exports.debounce((()=>{o.ifPersonalInfoSuccess&&(o.submitData.productCode=l.productInfo.productCode,o.submitData.tenantId=l.productInfo.tenantId,o.riskVOList=o.riskVOList.map((e=>b(e))),o.submitData.insuredVOList[0].productPlanVOList=[{insurerCode:l.productInfo.insurerCode,planCode:l.dataSource.planCode,riskVOList:o.riskVOList}],console.log(">>>数据构建<<<",o.submitData),o.trialMsg="试算中...",o.trialResult=0,o.loading=!0,z(o.submitData).then((e=>{e.data&&e.code===P&&(o.trialMsg="",o.trialResult=e.data.premium)})).finally((()=>{o.loading=!1})),G(o.submitData).then((e=>{e.data&&e.code===P&&(g.value=e.data)})).finally((()=>{o.loading=!1})))}),300),R=e=>{const{holder:a,insuredVOList:l}=e;a&&(o.submitData.holder={personVO:{...a,socialFlag:a.hasSocialInsurance}}),l&&l.length>0&&l.forEach(((e,a)=>{o.submitData.insuredVOList&&o.submitData.insuredVOList.length>a?o.submitData.insuredVOList[a].personVO={...e.personVO,socialFlag:e.personVO.hasSocialInsurance}:o.submitData.insuredVOList=[{personVO:{...e.personVO,socialFlag:e.personVO.hasSocialInsurance}}]})),o.ifPersonalInfoSuccess=!0,console.log("投被保人的信息回传 ",o.submitData,e),C()},L=e=>{o.mainRiskVO=e,o.riskVOList.length>0&&(o.riskVOList[0]=e),console.log("标准险种的信息回传",e),C()},_=e=>{o.riskVOList=[o.mainRiskVO,...e],console.log("附加险列表数据回传",e),C()},x=()=>{console.log("--after"),o.isAniShow=!1};return k((()=>{V()})),I((()=>{o.loading=!0})),n((()=>o.show),(e=>{e&&(console.log("---reset"),o.select={},o.list=[],o.userData={},o.riskIsInsure={},o.submitData={},o.riskVOList=[{}],o.mainRiskVO={},o.ifPersonalInfoSuccess=!1,o.trialMsg="",o.trialResult=0,V())})),a({open:()=>{o.show=!0,o.isAniShow=!0}}),n((()=>o.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(a,i)=>{const s=S,n=F,k=j;return r(),d(v,null,[O("div",ea,[u(s,{type:"primary",onClick:i[0]||(i[0]=e=>c(o).show=!0)},{default:f((()=>[aa])),_:1})]),c(o).isAniShow||c(o).show?(r(),m(k,{key:0,class:"com-trial-wrap",show:c(o).show,closeable:!1,onClose:h,onClosed:x},{default:f((()=>{var a;return[O("div",la,[O("div",ia,[sa,u(n,{name:"cross",onClick:i[1]||(i[1]=e=>c(o).show=!1)})]),O("div",ta,[u(Xe,{"data-source":g.value,"show-type-list":g.value.showTypList},null,8,["data-source","show-type-list"]),e.dataSource.productFactor?(r(),m(c(me),{key:0,ref:"personalInfoRef",modelValue:c(o).userData,"onUpdate:modelValue":i[2]||(i[2]=e=>c(o).userData=e),"product-factor":e.dataSource.productFactor,onTrailChange:R},null,8,["modelValue","product-factor"])):y("",!0),u(ie,{ref_key:"insureInfosRef",ref:t,"origin-data":null==(a=e.dataSource.insureProductRiskVOList)?void 0:a[0],"product-factor":e.dataSource.productFactor,onTrialChange:L},null,8,["origin-data","product-factor"]),u(fe,{"data-source":e.dataSource,"show-main-risk":!1,onTrialChange:_},null,8,["data-source"]),oa]),u(J,{"is-share":!1,premium:c(o).trialResult,"loading-text":c(o).trialMsg,"plan-code":l.dataSource.planCode,"payment-frequency":c(o).mainRiskVO.paymentFrequency+"","tenant-product-detail":e.tenantProductDetail,onClick:p},{default:f((()=>[na])),_:1},8,["premium","loading-text","plan-code","payment-frequency","tenant-product-detail"])])]})),_:1},8,["show"])):y("",!0)],64)}}}),[["__scopeId","data-v-0250f01c"]]);const da={key:0},ua={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},ca={class:"info"},va={key:1,class:"preview-placeholder"},pa=[R("当前页面仅用于保费试算预览"),O("br",null,null,-1),R("不展示其他产品相关配置信息")],ma=O("div",{id:"insureButton"},null,-1),ka=O("div",{id:"xinaoDialog"},null,-1),Ia=a({setup(e){const a=D((()=>B((()=>import("./index-8a2782e3.js")),["static/js/index-8a2782e3.js","static/css/index-ea588f10.css","static/js/index-dae3ff12.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-6f81a24b.js","static/css/index-85f26bb0.css","static/js/utils-97e71bd2.js","static/js/infoCollection-89fc213f.js","static/js/trial-75f9914d.js"]))),s=D((()=>B((()=>import("./index-c3d44ed2.js")),["static/js/index-c3d44ed2.js","static/css/index-fcfc6922.css","static/js/index-dae3ff12.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"]))),o=D((()=>B((()=>import("./index-29cfee5c.js")),["static/js/index-29cfee5c.js","static/css/index-b9ba3011.css","static/js/index-dae3ff12.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"])));N();const p=l(),{productCode:k="",tenantId:h,agentCode:g="",agencyCode:V,saleChannelId:b,extraInfo:C,insurerCode:R,preview:L,trialPreview:S}=p.query;let _={};try{console.log("extInfo",decodeURIComponent(C)),_=JSON.parse(decodeURIComponent(C))}catch(Oe){}i();const x=i(),w=i(),T=i(!1),P=i({}),F=i({}),j=i(!1),z=i(0),G=i(!1);i({});const J=i(!0);i(!0);const le=i(!0),ie=i(""),se=i({}),te=i({}),oe=i([]),ne=i({imgUrl:"",desc:"",title:"",link:window.location.href}),re=i({});t((()=>!!L||!!S));const de=t((()=>!!S)),ue=i(),ce=()=>{ue.value.open()},ve=i([]),pe=i(),me=async()=>{!de.value&&H({productCode:k,tenantId:h,isTenant:!L}).then((({data:e,code:a})=>{if("10000"===a){P.value=e,document.title=e.BASIC_INFO.title||"";const{title:a,desc:i,image:s}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{};l={title:a,desc:i,image:s},ne.value={desc:l.desc||"你好，这里是描述",imgUrl:l.image,title:l.title,link:window.location.href},M(e.BASIC_INFO.themeType)}var l})),await W({productCode:k,isTenant:!L||!S}).then((({data:e,code:a})=>{var l;"10000"===a&&(T.value=!0,G.value=!0,F.value=e,se.value=null==(l=e.productPlanInsureVOList)?void 0:l[0],oe.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),le.value=!1,Y({productCode:k}).then((({code:e,data:a})=>{var l,i,s,t;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:o}=a;pe.value=e||[];const{basicInfo:{questionnaireType:n},questions:r,questionnaireName:d}=(null==(l=null==o?void 0:o[0])?void 0:l.questionnaireDetailResponseVO)||{basicInfo:{}};2===n&&(ve.value=[{attachmentName:d,attachmentUri:r,attachmentType:"question"}]),ve.value=[{attachmentName:d,attachmentUri:null==(i=null==r?void 0:r[0])?void 0:i.content,attachmentType:ae(String(null==(s=null==r?void 0:r[0])?void 0:s.textType),null==(t=null==r?void 0:r[0])?void 0:t.content)}]}}))};n((()=>re.value.planCode),(e=>{se.value=(F.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const ke=()=>{x.value.handleClickTab()("insureButton")};i(""),i(0);const{fileList:Ie,mustReadFileCount:fe,popupFileList:ye}=Q(se,pe),he=e=>{se.value=(F.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},ge=()=>{j.value=!1,J.value=!0},Ve=()=>{j.value=!1,J.value=!0};return n((()=>se.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:l}=se.value;re.value.planCode=e,te.value=(l||[]).find((e=>e.mainRiskFlag===A.YES))}),{deep:!0,immediate:!0}),E((()=>{U(w,(([{isIntersecting:e}],a)=>{T.value=!0}))})),I((()=>{le.value=!0,me(),setTimeout((async()=>{ie.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,l)=>{var i,t,n,p,k,I,g,V,b,C,L,S,_;const D=q("Video"),N=K;return r(),d(v,null,[le.value?(r(),d("div",da)):(r(),d("div",ua,[c(de)?(r(),d("div",va,pa)):(r(),d(v,{key:0},[O("div",ca,[(null==(t=null==(i=P.value)?void 0:i.BASIC_INFO)?void 0:t.banner.length)?(r(),m($,{key:0,"data-skeleton-type":"img",url:null==(n=P.value)?void 0:n.BASIC_INFO.banner[0]},null,8,["url"])):y("",!0),(null==(k=null==(p=P.value)?void 0:p.BASIC_INFO)?void 0:k.video.length)?(r(),m(D,{key:1,"data-skeleton-type":"img",src:null==(I=P.value)?void 0:I.BASIC_INFO.video[0]},null,8,["src"])):y("",!0),(null==(b=null==(V=null==(g=P.value)?void 0:g.BASIC_INFO)?void 0:V.bannerMove)?void 0:b.length)?(r(),m($,{key:2,url:null==(S=null==(L=null==(C=P.value)?void 0:C.BASIC_INFO)?void 0:L.bannerMove)?void 0:S[0],onClick:ke},null,8,["url"])):y("",!0),O("div",{ref_key:"observeRef",ref:w},null,512)]),(null==(_=P.value)?void 0:_.GUARANTEE)?(r(),m(X,{key:0,"show-service-config":"","data-source":P.value,"plan-list":oe.value,onUpdateActivePlan:he},null,8,["data-source","plan-list"])):y("",!0),O("div",{class:"trial-text-btn",onClick:ce},"算一算保费"),u(Z,{ref_key:"detailScrollRef",ref:x,"data-source":P.value},null,8,["data-source"]),u(N,null,{default:f((()=>{var e,a,l;return[(null==(e=P.value.SIGNATURE)?void 0:e.inscribedContent)?(r(),m(c(s),{key:0,"inscribed-content":null==(l=null==(a=P.value)?void 0:a.SIGNATURE)?void 0:l.inscribedContent},null,8,["inscribed-content"])):y("",!0)]})),_:1}),u(N,null,{default:f((()=>{var e;return[(null==(e=c(Ie))?void 0:e.length)?(r(),m(c(o),{key:0,"attachement-list":c(Ie),"pre-text":"请阅读",onPreviewFile:l[0]||(l[0]=e=>(e=>{z.value=e,j.value=!0})(e))},null,8,["attachement-list"])):y("",!0)]})),_:1})],64)),T.value?(r(),m(ra,{key:2,ref_key:"trialRef",ref:ue,"data-source":se.value,"product-info":{productCode:F.value.productCode,productName:F.value.productName,productId:"",tenantId:c(h),insurerCode:c(R)},"tenant-product-detail":P.value},null,8,["data-source","product-info","tenant-product-detail"])):y("",!0),ma])),G.value&&!c(de)?(r(),m(ee,{key:2,"product-detail":P.value},null,8,["product-detail"])):y("",!0),ka,j.value?(r(),m(c(a),{key:3,show:j.value,"onUpdate:show":l[1]||(l[1]=e=>j.value=e),"content-list":J.value?c(Ie):c(ye),"is-only-view":J.value,"active-index":z.value,text:J.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":J.value?0:c(fe),onSubmit:ge,onOnCloseFilePreviewByMask:Ve},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):y("",!0)],64)}}});export{Ia as default};

import{ad as e,_ as n,d as a,r as o,J as t,an as r,E as l,S as i,ah as s,aJ as c,aL as u,c as m,h as d,j as f,g as p,f as v,k as I,F as D,t as y,w as k,a7 as Y,n as b,m as V,V as h,B as S,b9 as g,a8 as w,X as L,Y as E,a2 as M}from"./index-183e9dd7.js";import{m as x,n as $}from"./infoCollection-ba25e5af.js";import"./trial-ce533b4c.js";import"./pdfh5-008ca364.js";const O=(n,a="YYYY-MM-DD")=>e(n).format(a),_=(n,a=0,o="day",t="YYYY-MM-DD")=>e(n).add(a,o).format(t),C=(n,a=0,o="day",t="YYYY-MM-DD")=>e(n).subtract(a,o).format(t);const N=e=>(L("data-v-8f4f620c"),e=e(),E(),e),T={class:"com-period-cell"},U={key:0,class:"period-custom-cell period-check-btn-cell"},P=N((()=>f("div",{class:"period-cell-label"},"保障期间",-1))),R={class:"period-cell-content"},F=N((()=>f("div",{class:"period-cell-label"},"生效日期",-1))),q={class:"period-cell-content period-custom-cell-content"},A=N((()=>f("div",{class:"period-cell-label"},"保障期限",-1))),j={class:"period-cell-content period-custom-cell-content"},H={key:2,class:"period-custom-cell period-common-cell"},J=N((()=>f("div",{class:"period-cell-label"},"保障期限",-1))),X={class:"period-cell-content"},B=N((()=>f("div",{class:"picker-custom-title"},"保险开始生效日期",-1)));var z=n(a({__name:"index",props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})}},emits:["onReset","onUpdate","onVerify"],setup(n,{expose:a,emit:L}){const E=n;o({});const M=(e,n)=>"year"===e?`${n}年`:"month"===e?`${n}月`:"day"===e?`${n}日`:n,N=o(new Date),z=t({formInfo:E.formInfo}),G=o(!0);o([]),r((()=>z.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(N.value=new Date(e))}));const K=l((()=>{var e;const{insurancePeriodValueList:n=[]}=(null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n.length?(z.formInfo.coveragePeriod||(z.formInfo.coveragePeriod=n[0].code),n):[]})),Q=l((()=>{var e;const{insuranceStartType:n}=(null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),W=l((()=>{var e;const{insuranceEndType:n}=(null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),[Z,ee]=i(!1),ne=()=>{G.value&&ee(!0)},ae=l((()=>{var e,n;if(`${Q.value}`===x.CUSTOM_DAY){const a=null==(n=null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(a&&a.indexOf(",")){const[e,n]=a.split(",");return new Date(_(new Date,Number(e),"day"))}}return new Date(_(new Date,1,"day"))})),oe=l((()=>{var e,n;if(`${Q.value}`===x.CUSTOM_DAY){const a=null==(n=null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(!a)return new Date;if(a.indexOf(",")){const[e,n]=a.split(",");return new Date(_(new Date,Number(n),"day"))}const o=_(new Date,Number(a),"day");return new Date(o)}return new Date})),te=e=>{z.formInfo.insuranceStartDate=`${O(e)} 00:00:00`,ee(!1)},re=()=>{ee(!1)};return r((()=>E.riskInfo),(()=>{const{productRiskInsureLimitVO:e}=E.riskInfo||{};if(e){const{insurancePeriodValueList:n,paymentFrequencyList:a=[]}=e||{};K.value=n}}),{deep:!0,immediate:!0}),r([()=>Q.value,()=>z.formInfo.coveragePeriod,()=>z.formInfo.insuranceStartDate,()=>E.riskInfo],(()=>{var n,a;if(!z.formInfo.coveragePeriod)return;const[o,t]=z.formInfo.coveragePeriod.split("_");if(!z.formInfo.insuranceStartDate)if(`${Q.value}`===x.CUSTOM_DAY){const e=null==(a=null==(n=E.riskInfo)?void 0:n.productRiskInsureLimitVO)?void 0:a.maxInsuranceDay;if(e)if(e.indexOf(",")){const[n,a]=e.split(",");z.formInfo.insuranceStartDate=`${_(new Date,Number(n),"day")} 00:00:00`,G.value=n!==a}else z.formInfo.insuranceStartDate=`${_(new Date,e,"day")} 00:00:00`;else z.formInfo.insuranceStartDate=`${_(new Date,1,"day")} 00:00:00`}else`${Q.value}`===x.NEXT_DAY?z.formInfo.insuranceStartDate=`${_(new Date,1,"day")} 00:00:00`:z.formInfo.insuranceStartDate=`${O(new Date)} 00:00:00`;if("to"!==o)C(z.formInfo.insuranceStartDate,1,"day"),`${W.value}`===$.CURRENT_DAY?z.formInfo.insuranceEndDate=`${e(z.formInfo.insuranceStartDate).add(Number(t),o).subtract(1,"day").format("YYYY-MM-DD")} 23:59:59`:z.formInfo.insuranceEndDate=`${_(z.formInfo.insuranceStartDate,Number(t),o)} 00:00:00`;else{let e=z.formInfo.tenantOrderInsuredList[0].birthday;z.formInfo.tenantOrderInsuredList[0].certType===s.CERT&&z.formInfo.tenantOrderInsuredList[0].certNo&&c(z.formInfo.tenantOrderInsuredList[0].certNo)&&(e=u(z.formInfo.tenantOrderInsuredList[0].certNo));const n=`${C(e,1,"day")} 00:00:00`;"single"===t&&(z.formInfo.insuranceEndDate="9999-99-99 23:59:59"),`${W.value}`===$.CURRENT_DAY?z.formInfo.insuranceEndDate=`${_(n,Number(t),o)} 23:59:59`:z.formInfo.insuranceEndDate=`${_(e,Number(t),o)} 00:00:00`}}),{immediate:!0,deep:!0}),a({}),(e,n)=>{const a=V,o=h,t=S,r=g,l=w;return m(),d(D,null,[f("div",T,[p(K).length>1?(m(),d("div",U,[P,f("div",R,[v(a,{modelValue:p(z).formInfo.coveragePeriod,"onUpdate:modelValue":n[0]||(n[0]=e=>p(z).formInfo.coveragePeriod=e),prop:{label:"value",value:"code"},options:p(K)},null,8,["modelValue","options"])])])):I("",!0),p(Q)+""===p(x).CUSTOM_DAY?(m(),d("div",{key:1,class:"period-custom-cell period-common-cell",onClick:ne},[p(G)?(m(),d(D,{key:0},[F,f("div",q,[f("span",null,y(p(z).formInfo.insuranceStartDate?p(O)(p(z).formInfo.insuranceStartDate,"YYYY.MM.DD HH:mm:ss"):""),1),v(o,{class:"custom--arrow-right",name:"arrow-right"})])],64)):(m(),d(D,{key:1},[A,f("div",j,[f("span",null,y(p(z).formInfo.insuranceStartDate?p(O)(p(z).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+y(p(z).formInfo.insuranceEndDate?p(O)(p(z).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])],64))])):I("",!0),p(Q)+""!==p(x).CUSTOM_DAY?(m(),d("div",H,[J,f("div",X,y(p(z).formInfo.insuranceStartDate?p(O)(p(z).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+y(p(z).formInfo.insuranceEndDate?p(O)(p(z).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])):I("",!0)]),v(l,{show:p(Z),"onUpdate:show":n[3]||(n[3]=e=>Y(Z)?Z.value=e:null),height:340,closeable:!0},{default:k((()=>[v(r,{modelValue:p(N),"onUpdate:modelValue":n[2]||(n[2]=e=>Y(N)?N.value=e:null),type:"date",title:"保险开始生效日期","min-date":p(ae),"max-date":p(oe),formatter:M,"visible-item-count":5,class:"custom-date-picker",onConfirm:te,onCancel:re},{cancel:k((()=>[])),title:k((()=>[B])),confirm:k((()=>[v(t,{type:"primary",round:"",block:"",class:"linear-btn custom-picker-btn",onClick:n[1]||(n[1]=e=>Z.value=!1)},{default:k((()=>[b("确 定")])),_:1})])),_:1},8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-8f4f620c"]]);const G=e=>(L("data-v-77fd8b83"),e=e(),E(),e),K={class:"com-payment-type"},Q={class:"title"},W={key:0,class:"custom-cell check-btn-cell"},Z=G((()=>f("div",{class:"cell-label"},"保障方案",-1))),ee={class:"cell-content"},ne={key:1,class:"custom-cell check-btn-cell"},ae=G((()=>f("div",{class:"cell-label"},"交费方式",-1))),oe={class:"cell-content"},te={key:2,class:"custom-cell check-btn-cell"},re=G((()=>f("div",{class:"cell-label"},"交费期间",-1))),le={class:"cell-content"},ie={key:3,class:"custom-cell common-cell"},se=G((()=>f("div",{class:"cell-label"},"实付保费",-1))),ce={key:0,class:"cell-content actual-premium"},ue={class:"cell-content actual-premium"},me={key:0,class:"actual-premium actual-premium-month-tip"};var de=n(a({__name:"index",props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})},tenantProductDetail:{default:()=>({})},planList:{default:()=>[]}},setup(e){const n=e;o({});const a=t({formInfo:n.formInfo}),i=o(),s=o(),c=o([]),u=o([]),k=l((()=>{var e;return!!(null==(e=n.planList)?void 0:e.length)})),Y=l((()=>{var e,o;if(null==(e=n.premiumInfo)?void 0:e.premiumLoadingText)return n.premiumInfo.premiumLoadingText;if(n.tenantProductDetail.length){const e=((null==n?void 0:n.tenantProductDetail)||[]).find((e=>e.planCode===a.formInfo.planCode||!e.planCode))||{},{premium:t,minActualUnit:r}=(e.data||[]).find((e=>e.paymentFrequency===a.formInfo.paymentFrequency))||{};return(null==(o=n.premiumInfo)?void 0:o.premium)?`${n.premiumInfo.premium||""}${r}`:t}return""})),b=l((()=>{if(s){const{premiumExplain:e,premiumExplainViewName:n,premiumExplainUri:a}=s.value||{};return{premiumExplain:e,premiumExplainUri:a,premiumExplainViewName:n}}return null}));l((()=>b.value&&b.value.premiumExplain&&b.value.premiumExplainViewName));const h=l((()=>{var e;if(i.value&&i.value.paymentFrequency){return((null==(e=i.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1}));return r((()=>n.riskInfo),(()=>{var e,o;const{productRiskInsureLimitVO:t}=n.riskInfo||{};if(t){const{paymentFrequencyList:n=[],paymentPeriodValueList:r}=t||{};a.formInfo.paymentFrequency=null==(e=null==n?void 0:n[0])?void 0:e.code,a.formInfo.chargePeriod=null==(o=null==r?void 0:r[0])?void 0:o.code,c.value=r,u.value=n}}),{deep:!0,immediate:!0}),(o,t)=>{var r;const l=V,i=M;return m(),d(D,null,[f("div",K,[f("div",Q,y(p(h)?"交费方式":"保障计划"),1),p(k)?(m(),d("div",W,[Z,f("div",ee,[v(l,{modelValue:p(a).formInfo.planCode,"onUpdate:modelValue":t[0]||(t[0]=e=>p(a).formInfo.planCode=e),options:e.planList,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])])):I("",!0),p(u).length>1?(m(),d("div",ne,[ae,f("div",oe,[v(l,{modelValue:p(a).formInfo.paymentFrequency,"onUpdate:modelValue":t[1]||(t[1]=e=>p(a).formInfo.paymentFrequency=e),prop:{label:"value",value:"code"},options:p(u)},null,8,["modelValue","options"])])])):I("",!0),p(c).length>1?(m(),d("div",te,[re,f("div",le,[v(l,{modelValue:p(a).formInfo.chargePeriod,"onUpdate:modelValue":t[2]||(t[2]=e=>p(a).formInfo.chargePeriod=e),prop:{label:"value",value:"code"},options:p(c)},null,8,["modelValue","options"])])])):I("",!0),v(z,{"form-info":p(a).formInfo,"risk-info":e.riskInfo},null,8,["form-info","risk-info"]),p(Y)?(m(),d("div",ie,[se,(null==(r=n.premiumInfo)?void 0:r.premiumLoadingText)?(m(),d("div",ce,y(p(Y)),1)):(m(),d(D,{key:1},[f("div",ue,y(p(Y)),1),"5"===p(a).formInfo.paymentFrequency?(m(),d("div",me," 共12期 ")):I("",!0)],64))])):I("",!0)]),v(i)],64)}}}),[["__scopeId","data-v-77fd8b83"]]);export{de as default};

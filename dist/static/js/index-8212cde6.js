import{_ as e,d as a,af as l,ag as n,dd as t,h as i,i as s,ay as o,aN as d,ad as r,ap as c,j as v,r as u,dC as f,dD as p,k as _,E as m,bH as b,ah as h,l as g,dE as y,ai as x,o as w,c as k,u as I,a as C,p as j,f as P,F as O,s as V,b as N,q as D,n as T,w as F,a8 as L,dF as R,ci as A,T as E,c4 as q,dG as S,aQ as B,c8 as $,I as U,dH as Y,ao as z,al as M,an as G,aC as H,aD as X,au as J}from"./index-89eabb88.js";import{a as Q,c as W}from"./product-f59bac3a.js";import{i as Z,g as K,s as ee}from"./trial-c71cbb3f.js";import{P as ae}from"./index-1a3a524d.js";import{n as le}from"./nextStep-d3729764.js";import{g as ne,t as te,r as ie}from"./utils-96c08b84.js";import se from"./index-6ed58604.js";import{P as oe}from"./index-115cf425.js";import de from"./index-b8550ba2.js";import{u as re}from"./useAttachment-b8d18325.js";import{u as ce}from"./useOrder-174dbf62.js";import{_ as ve,q as ue}from"./lian-18aa95d2.js";import"./PolicyInfo-4e119f21.js";import{P as fe}from"./constants-b39aa53b.js";import{u as pe}from"./useThread-637a02aa.js";import{I as _e}from"./index-fe5cc6cc.js";import"./cloneDeep-d96383ce.js";import"./infoCollection-318c6378.js";import"./questionnaire-42dcb602.js";import"./util-5f097283.js";import"./core-81a29728.js";import"./trial-0d6ae699.js";import"./jsbridgePromise-204cb700.js";const me=e=>(H("data-v-58ff4340"),e=e(),X(),e),be={key:0},he={class:"__skeleton_free5_content__"},ge={"theme-vars":"[object Object]",class:"page-free-product-detail sk"},ye={class:"content"},xe=me((()=>C("div",{class:"van-tabs van-tabs--line pro-tab custom-plan-tab"},[C("div",{class:"van-tabs__wrap"},[C("div",{role:"tablist",class:"van-tabs__nav van-tabs__nav--line van-tabs__nav--complete","aria-orientation":"horizontal"},[C("div",{id:"van-tabs-1-0",role:"tab",class:"van-tab van-tab--line van-tab--grow van-tab--active",tabindex:"0","aria-selected":"true","aria-controls":"van-tab-2"},[C("span",{class:"van-tab__text"},[C("span",{class:"sk-text",style:{"--fp":"10.00%","--sp":"90.00%","--lh":"20px"}},"计划一")])]),C("div",{id:"van-tabs-1-1",role:"tab",class:"van-tab van-tab--line van-tab--grow",tabindex:"-1","aria-selected":"false","aria-controls":"van-tab-3"},[C("span",{class:"van-tab__text"},[C("span",{class:"sk-text",style:{"--fp":"10.00%","--sp":"90.00%","--lh":"20px"}},"计划二")])]),C("div",{class:"van-tabs__line",style:{width:"28px",transform:"translateX(90.5px) translateX(-50%)",height:"4px","border-radius":"4px"}})])]),C("div",{class:"van-tabs__content"},[C("div",{id:"van-tab-2",role:"tabpanel",class:"van-tab__panel",tabindex:"0","aria-labelledby":"van-tabs-1-0",style:{}})])],-1))),we={class:"part"},ke={class:"part-header holder-header"},Ie={class:"svg-icon icon-free-arrow","font-size":"40px",style:{color:"var(--van-primary-color)"}},Ce=[me((()=>C("use",{"xlink:href":"#icon-free-arrow"},null,-1)))],je=me((()=>C("div",{class:"header"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"22.400139999999997px"}},"免费领取")],-1))),Pe={class:"svg-icon icon-free-arrow","font-size":"40px",style:{color:"var(--van-primary-color)"}},Oe=[me((()=>C("use",{"xlink:href":"#icon-free-arrow"},null,-1)))],Ve={class:"com-card com-pro-form-with-card com-card-body-no-padding personal-info-card holder"},Ne={class:"com-card-wrap"},De={class:"body",style:{height:"auto"}},Te={class:"van-form com-van-form"},Fe={class:"van-cell van-field com-van-field",textalign:"right",customfieldname:"[object Object]",remark:"",componentname:"[object Object]",nanoid:"Bc0wjU19UwIhyiefbs4zE",columns:""},Le=me((()=>C("div",{class:"van-cell__title van-field__label van-field__label--required"},[C("label",{id:"van-field-4-label",for:"van-field-4-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"姓名")])],-1))),Re={class:"van-cell__value van-field__value"},Ae={class:"van-field__body"},Ee=me((()=>C("input",{type:"text",id:"van-field-4-input",name:"name",class:"van-field__control van-field__control--left sk-input",placeholder:"请输入姓名",autocomplete:"off","aria-labelledby":"van-field-4-label"},null,-1))),qe={class:"van-field__right-icon"},Se={class:"choose-customer"},Be={class:"svg-icon icon-customer",style:{color:"rgb(51, 51, 51)"}},$e=[me((()=>C("use",{"xlink:href":"#icon-customer"},null,-1)))],Ue=me((()=>C("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item",role:"button",tabindex:"0",textalign:"right"},[C("div",{class:"van-cell__title van-field__label van-field__label--required"},[C("label",{id:"van-field-5-label",for:"van-field-5-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"证件类型")])]),C("div",{class:"van-cell__value van-field__value"},[C("div",{class:"van-field__body"},[C("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[C("div",{class:"custom-input-wrap"},[C("span",{class:"value-view-wrap",style:{}},[C("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"居民身份证")])])])])]),C("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Ye=me((()=>C("div",{class:"van-cell van-field com-van-field",textalign:"right",customfieldname:"[object Object]",remark:"",componentname:"[object Object]",nanoid:"cYX6njpk9PbIdM0Cc1uko",columns:""},[C("div",{class:"van-cell__title van-field__label van-field__label--required"},[C("label",{id:"van-field-6-label",for:"van-field-6-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"证件号码")])]),C("div",{class:"van-cell__value van-field__value"},[C("div",{class:"van-field__body"},[C("input",{type:"text",id:"van-field-6-input",name:"certNo",class:"van-field__control van-field__control--left sk-input",placeholder:"请输入证件号码",autocomplete:"off","aria-labelledby":"van-field-6-label"})])])],-1))),ze=me((()=>C("div",{class:"van-cell van-field com-van-field",textalign:"right",customfieldname:"[object Object]",remark:"",componentname:"[object Object]",nanoid:"f80BClgG7He6ZF8gYqnf0",columns:""},[C("div",{class:"van-cell__title van-field__label van-field__label--required"},[C("label",{id:"van-field-7-label",for:"van-field-7-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"手机号")])]),C("div",{class:"van-cell__value van-field__value"},[C("div",{class:"van-field__body"},[C("input",{type:"tel",inputmode:"numeric",id:"van-field-7-input",name:"mobile",class:"van-field__control van-field__control--left",placeholder:"请输入手机号",autocomplete:"off","aria-labelledby":"van-field-7-label"})])])],-1))),Me=me((()=>C("div",{class:"van-cell van-field com-van-field com-pro-sms-code",textalign:"right",customfieldname:"[object Object]",remark:"",componentname:"[object Object]",nanoid:"f6uaPlar0trUqrkDscy4s",columns:""},[C("div",{class:"van-cell__title van-field__label van-field__label--required"},[C("label",{id:"van-field-8-label",for:"van-field-8-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"验证码")])]),C("div",{class:"van-cell__value van-field__value"},[C("div",{class:"van-field__body"},[C("input",{type:"tel",inputmode:"numeric",id:"van-field-8-input",name:"verificationCode",class:"van-field__control van-field__control--left",placeholder:"请输入验证码",autocomplete:"off","aria-labelledby":"van-field-8-label"})])]),C("button",{type:"button",class:"van-button van-button--primary van-button--small van-button--plain extra-button sk-button"},[C("div",{class:"van-button__content"},[C("span",{class:"van-button__text"},[C("span",{class:"sk-text",style:{"--fp":"8.33%","--sp":"91.67%","--lh":"16.8px"}},"验证码")])])])],-1))),Ge=me((()=>C("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item com-van-field--hidden",role:"button",tabindex:"0",textalign:"right"},[C("div",{class:"van-cell__value van-cell__value--alone van-field__value"},[C("div",{class:"van-field__body"},[C("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[C("div",{class:"custom-input-wrap"},[C("span",{class:"placeholder"})])])])]),C("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),He=me((()=>C("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item",role:"button",tabindex:"0",textalign:"right"},[C("div",{class:"van-cell__title van-field__label van-field__label--required"},[C("label",{id:"van-field-10-label",for:"van-field-10-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"投保地区")])]),C("div",{class:"van-cell__value van-field__value"},[C("div",{class:"van-field__body"},[C("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[C("div",{class:"custom-input-wrap"},[C("span",{class:"placeholder"},[C("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择投保地区")])])])])]),C("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Xe=me((()=>C("div",{class:"van-cell van-cell--clickable van-field com-van-field com-van-field--hidden com-form-item com-van-field--hidden undefined",role:"button",tabindex:"0",textalign:"right",visible:"false"},[C("div",{class:"van-cell__title van-field__label van-field__label--required"},[C("label",{id:"van-field-11-label",for:"van-field-11-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"出生日期")])]),C("div",{class:"van-cell__value van-field__value"},[C("div",{class:"van-field__body"},[C("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[C("div",{class:"custom-input-wrap"},[C("span",{class:"placeholder"},[C("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择出生日期")])])])])]),C("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Je=me((()=>C("div",{class:"van-cell van-cell--clickable van-field com-van-field com-van-field--hidden com-form-item com-van-field--hidden",role:"button",tabindex:"0",textalign:"right",visible:"false"},[C("div",{class:"van-cell__title van-field__label van-field__label--required"},[C("label",{id:"van-field-12-label",for:"van-field-12-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"性别")])]),C("div",{class:"van-cell__value van-field__value"},[C("div",{class:"van-field__body"},[C("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[C("div",{class:"custom-input-wrap"},[C("span",{class:"placeholder"},[C("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择性别")])])])])]),C("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Qe=me((()=>C("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item undefined",role:"button",tabindex:"0",textalign:"right"},[C("div",{class:"van-cell__title van-field__label"},[C("label",{id:"van-field-13-label",for:"van-field-13-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"证件有效期")])]),C("div",{class:"van-cell__value van-field__value"},[C("div",{class:"van-field__body"},[C("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[C("div",{class:"custom-input-wrap"},[C("span",{class:"placeholder"},[C("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择证件有效期")])])])])]),C("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"}),C("div",{class:"wrap"},[C("div",{role:"checkbox",class:"van-checkbox",tabindex:"0","aria-checked":"false"},[C("div",{class:"van-checkbox__icon van-checkbox__icon--round"},[C("i",{class:"van-badge__wrapper van-icon van-icon-success sk-border"})]),C("span",{class:"van-checkbox__label"},[C("span",{class:"sk-text",style:{"--fp":"12.50%","--sp":"87.50%","--lh":"20px"}},"长期")])])])],-1))),We=me((()=>C("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item undefined",role:"button",tabindex:"0",textalign:"right"},[C("div",{class:"van-cell__title van-field__label"},[C("label",{id:"van-field-14-label",for:"van-field-14-input"},[C("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"证件起期")])]),C("div",{class:"van-cell__value van-field__value"},[C("div",{class:"van-field__body"},[C("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[C("div",{class:"custom-input-wrap"},[C("span",{class:"placeholder"},[C("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择证件起期")])])])])]),C("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Ze=R('<div class="com-card com-pro-form-with-card com-card-body-no-padding personal-info-card insured" data-v-58ff4340><div class="com-card-wrap" data-v-58ff4340><div class="header showLine" data-v-58ff4340><div class="title-wrapper" data-v-58ff4340><div class="title showIcon" data-v-58ff4340><span class="sk-text" style="--fp:33.33%;--sp:66.67%;--lh:45px;" data-v-58ff4340>被保人信息</span></div></div></div></div></div>',1),Ke=["theme-vars"],ea={class:"content"},aa={key:1,class:"part"},la=me((()=>C("div",{class:"part-header agent-header"},[C("span",{class:"header"},"代理人信息")],-1))),na={class:"part"},ta={class:"part-header holder-header"},ia=me((()=>C("div",{class:"header"},"免费领取",-1))),sa=me((()=>C("p",{class:"page-tip"},"同一被保险人仅限领取1份",-1)));var oa=e(a({__name:"index",setup(e){const a=l((()=>n((()=>import("./index-4df38c43.js")),["static/js/index-4df38c43.js","static/css/index-eabeb59f.css","static/js/index-89eabb88.js","static/css/index-3dd092cb.css"]))),R=l((()=>n((()=>import("./index-61268195.js")),["static/js/index-61268195.js","static/css/index-793d1580.css","static/js/index-89eabb88.js","static/css/index-3dd092cb.css"]))),H=l((()=>n((()=>import("./index-b1a7267d.js")),["static/js/index-b1a7267d.js","static/css/index-fa4edf2a.css","static/js/index-89eabb88.js","static/css/index-3dd092cb.css","static/js/theme-94cf7d00.js","static/js/index-115cf425.js","static/css/index-bbfdd7ec.css","static/js/utils-96c08b84.js","static/js/infoCollection-318c6378.js","static/js/trial-0d6ae699.js"]))),X=t(),me=i(),oa=s(),{productCode:da="",agentCode:ra="",tenantId:ca="",templateId:va,insurerCode:ua="",orderNo:fa,preview:pa,isShare:_a,date:ma}=oa.query,ba=o().format("YYYY-MM-DD");ma&&ma!==ba&&d.alert({message:"投保链接已过期",showConfirmButton:!1});const{agentCode:ha}=r.get(`${c}_userInfo`)||{},ga=v(),ya=v();v();const xa=v(),wa=v({}),ka=u({tenantProductDetail:{},insureProductDetail:{},submitData:{},riskVOList:[{}],userData:{},ifPersonalInfoSuccess:!1,currentRiskInfo:[],mainRiskInfo:{},currentPackageConfigVOList:[],planList:[],colors:["#fff"],detail:{},banner:"",productDesc:[],newAuth:!0,isValidateCode:!1,insureDetail:{},loading:!0,isSelfInsure:!0,showBtn:!1,activeIndex:0,formInfo:{},showFilePreview:!1,isOnlyView:!0,agree:!1}),Ia=v({}),Ca=ce({extInfo:{buttonCode:"EVENT_FREE_multiIssuePolicy",pageCode:"productInfo",templateId:va,iseeBizNo:""},periodType:f.free},oa),ja=v(),Pa=v(),Oa=v({}),Va=v([]),Na=v(),{fileList:Da,mustReadFileCount:Ta,popupFileList:Fa}=re(Oa,Na),La=v({title:"标题",desc:"描述",imgUrl:p,url:`${window.location.origin}${fe.faceVerify}`,link:`${window.location.origin}${fe.faceVerify}`}),Ra=_((()=>!!pa)),Aa=async()=>{ka.loading=!0;const e=Q({productCode:da}),a=Z({productCode:da,isTenant:!pa});await Promise.all([e,a]).then((([e,a])=>{var l;"10000"===e.code&&(ka.tenantProductDetail=e.data,document.title=e.data.BASIC_INFO.title||"",e.data.BASIC_INFO&&e.data.BASIC_INFO.themeType&&A(e.data.BASIC_INFO.themeType)),"10000"===a.code&&(ka.insureProductDetail=a.data,Oa.value=null==(l=a.data.productPlanInsureVOList)?void 0:l[0],ka.planList=(a.data.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode})))),W({productCode:da}).then((({code:e,data:a})=>{var l,n,t,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:s}=a;Na.value=e||[];const{basicInfo:{questionnaireType:o},questions:d,questionnaireName:r}=(null==(l=null==s?void 0:s[0])?void 0:l.questionnaireDetailResponseVO)||{basicInfo:{}};o&&(Va.value=2===o?[{attachmentName:r,attachmentUri:d,attachmentType:"question"}]:[{attachmentName:r,attachmentUri:null==(n=null==d?void 0:d[0])?void 0:n.content,attachmentType:ne(String(null==(t=null==d?void 0:d[0])?void 0:t.textType),null==(i=null==d?void 0:d[0])?void 0:i.content)}])}})),ka.loading=!1}))},Ea=v();v(!1);const qa=e=>{var a;Oa.value=null==(a=ka.insureProductDetail.productPlanInsureVOList)?void 0:a[e.name]};m((()=>Oa.value),(()=>{var e,a;const{planCode:l,insureProductRiskVOList:n,productFactor:t}=Oa.value;Ia.value.planCode=l,Ea.value=null==(a=null==(e=b(t))?void 0:e.agent)?void 0:a.schema,ka.currentRiskInfo=n,ka.mainRiskInfo=(n||[]).find((e=>e.mainRiskFlag===h.YES)),console.log("mainRiskInfo.value",ka.mainRiskInfo)}),{deep:!0,immediate:!0});const Sa=(e={},a={},l={})=>{const n={...l},{insuredList:t,holder:i}=l,{insuranceStartDate:s,insuranceEndDate:o}=ka.formInfo,d=ie([...ka.currentRiskInfo]).map((e=>({...e}))),r={tenantId:ca,riskList:d,riskPremium:a,productId:null==e?void 0:e.id};return n.extInfo.iseeBizNo=ga.value,n.productCode=null==e?void 0:e.productCode,n.commencementTime=s,n.expiryDate=o,n.premium=0,n.orderAmount=0,n.orderRealAmount=0,n.insuredList=t.map((a=>{var l;return{...a,nationalityCode:"CHN",certType:a.certType||J.CERT,certNo:(a.certNo||"").toLocaleUpperCase(),planCode:Oa.value.planCode,productList:[{premium:0,productCode:null==e?void 0:e.productCode,productName:null==e?void 0:e.productName,planCode:null==(l=Oa.value)?void 0:l.planCode,riskList:te(r)}]}})),n.holder.nationalityCode="CHN",n},Ba=v(),$a=v(!1),Ua=v(),Ya=v(!1),za=v(),Ma=v(!1),Ga=(e=!0)=>{K({orderNo:fa,tenantId:ca},{isLoading:e}).then((({code:e,data:a})=>{var l,n,t;"10000"===e&&(Ya.value=(null==(n=null==(l=a.insuredList)?void 0:l[0])?void 0:n.faceAuthFlag)===h.YES,Ya.value&&(za.value.isStart&&E("被保人认证完成"),za.value.stop()),Object.assign(Ca.value,a),$a.value=!!(null==(t=a.holder)?void 0:t.name),Ca.value.holder.config={name:{isView:$a.value}},ka.userData=a,$a.value&&(Ba.value.agentCode=Ua.value))}))};za.value=pe({start:()=>{Ga(!1),Ya.value=!1},stop:()=>{Ya.value=!0},time:1e4});const Ha=async()=>{var e,a;const l={insurerCode:ua,productCode:da,productId:"",productName:(null==(e=ka.insureProductDetail)?void 0:e.productName)||"",tenantId:ca},n=Sa(l,{},Object.assign(Ca.value,ka.userData));if(Ra.value)me.push(`/baseInsurance/orderDetail?from=free&tenantId=${ca}&orderNo=mockOrderNo&productCode=${da}&preview=true&templateView=${va}`);else try{if(_a)n.extInfo.buttonCode=S.free.underWriteAndIssue,Promise.all([null==(a=ja.value)?void 0:a.validate(),Pa.value.validate()]).then((e=>{var a;(()=>{var e;return!(null==(e=Ea.value)?void 0:e.length)||ra===Ba.value.agentCode})()?!(null==(a=Da.value)?void 0:a.length)||ka.agree?le(n,((e,a,l)=>{a===B.JUMP_PAGE&&e.orderNo?me.push({path:fe.paymentResult,query:{tenantId:ca,from:"free",orderNo:fa}}):a===B.JUMP_ALERT&&"faceAuth"===e.alertType&&d.confirm({message:l,confirmButtonText:"去分享",cancelButtonText:"被保人确认"}).then((()=>{const e={...oa.query,isShare:1,orderNo:fa,agentCode:ha,objectType:"insured",origin:"share"};wa.value={title:"标题",desc:"描述",imageUrl:p,url:`${window.location.origin}${fe.faceVerify}?${q.stringify(e)}`,link:`${window.location.origin}${fe.faceVerify}?${q.stringify(e)}`},xa.value.handleShare(wa.value),Ma.value=!0,za.value.run()})).catch((()=>{me.push({path:fe.faceVerify,query:{...oa.query,objectType:"insured",origin:"confirm"}})}))})):d.alert({message:"请先阅读投保文档",confirmButtonText:"我知道了"}):d.alert({message:"代理人工号有误，请核对后重新录入",confirmButtonText:"我知道了"})})).catch((e=>{$(".page-free-product-detail",".van-field--error")}));else{const{code:e,data:a}=await ee(n);if("10000"===e){const e={...oa.query,isShare:1,orderNo:a,agentCode:ha,date:o().format("YYYY-MM-DD")};wa.value={title:"标题",desc:"描述",imageUrl:p,link:`${window.location.origin}${window.location.pathname}?${q.stringify(e)}`,url:`${window.location.origin}${window.location.pathname}?${q.stringify(e)}`},xa.value.handleShare(wa.value)}}}catch(t){console.log("e")}},Xa=()=>{ka.showFilePreview=!1,ka.isOnlyView=!0},Ja=()=>{ka.showFilePreview=!1,ka.isOnlyView=!0,Ha()};g((()=>{ra&&ue({tenantId:ca,saleUserId:ra}).then((({code:e,data:a})=>{"10000"===e&&(Ua.value=a.agentCode,Ba.value={...a,agentCode:""},r.set(`${c}_userInfo`,a),Ga())})),Aa(),setTimeout((async()=>{ga.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)}));const Qa=y(ya);return x(ya,(([{isIntersecting:e}],a)=>{(e=>{Qa.bottom.value<0||Qa.top.value<0?ka.showBtn=!e:ka.showBtn=!1})(e)})),(e,l)=>{var n,t,i,s,o,d,r,c,v,u;const f=U,p=Y,_=z,m=M,b=G;return w(),k(O,null,[I(ka).loading?(w(),k("div",be,[C("div",he,[C("div",ge,[C("div",ye,[xe,C("div",we,[C("div",ke,[(w(),k("svg",Ie,Ce)),je,(w(),k("svg",Pe,Oe))]),C("div",Ve,[C("div",Ne,[C("div",De,[C("form",Te,[C("div",Fe,[Le,C("div",Re,[C("div",Ae,[Ee,C("div",qe,[C("div",Se,[(w(),k("svg",Be,$e))])])])])]),Ue,Ye,ze,Me,Ge,He,Xe,Je,Qe,We])])])]),Ze])])])])])):(w(),k("div",{key:1,"data-skeleton-root":"FREE5","theme-vars":I(X),class:"page-free-product-detail"},[1==(null==(t=null==(n=I(ka).tenantProductDetail)?void 0:n.BASIC_INFO)?void 0:t.bannerType)&&(null==(s=null==(i=I(ka).tenantProductDetail)?void 0:i.BASIC_INFO)?void 0:s.banner.length)?(w(),j(se,{key:0,"data-skeleton-type":"img","indicator-color":"#ddd",images:null==(o=I(ka).tenantProductDetail)?void 0:o.BASIC_INFO.banner},null,8,["images"])):P("",!0),C("div",ea,[(w(!0),k(O,null,V(null==(r=null==(d=I(ka).tenantProductDetail)?void 0:d.SPECIAL_FEATURE)?void 0:r.spec,((e,a)=>(w(),k("div",{key:a,class:"part image-part"},[N(f,{src:e},null,8,["src"])])))),128)),(null==(c=I(ka).planList)?void 0:c.length)>1?(w(),j(p,{key:0,active:e.currentActivePlanCodeIndex,"onUpdate:active":l[0]||(l[0]=a=>e.currentActivePlanCodeIndex=a),list:I(ka).planList.map(((e,a)=>({title:e.planName,slotName:e.planName}))),class:"custom-plan-tab",onClickTab:qa},null,8,["active","list"])):P("",!0),I(_a)?(w(),k("div",aa,[la,N(ve,{ref_key:"agentRef",ref:ja,modelValue:I(Ba),"onUpdate:modelValue":l[1]||(l[1]=e=>D(Ba)?Ba.value=e:null),"is-view":"",config:{agentCode:{isView:I($a)}},schema:I(Ea)},null,8,["modelValue","config","schema"])])):P("",!0),C("div",na,[C("div",ta,[N(_,{color:"var(--van-primary-color)","font-size":"40px",name:"free-arrow"}),ia,N(_,{color:"var(--van-primary-color)","font-size":"40px",name:"free-arrow"})]),(w(),j(ae,{key:I(Oa).planCode,ref_key:"personalInfoRef",ref:Pa,modelValue:I(ka).userData,"onUpdate:modelValue":l[2]||(l[2]=e=>I(ka).userData=e),"input-align":"left","is-view":I(Ma)||I(Ya),"error-message-align":"left","product-factor":null==(v=I(Oa))?void 0:v.productFactor,"multi-insured-config":null==(u=I(Oa))?void 0:u.multiInsuredConfigVO,onTrailChange:e.handlePersonalInfoChange},null,8,["modelValue","is-view","product-factor","multi-insured-config","onTrailChange"])),N(_e,{"form-info":I(ka).formInfo,"risk-info":I(ka).mainRiskInfo},null,8,["form-info","risk-info"]),sa,N(oe,{ref_key:"root",ref:ya,class:T({"submit-btn":!0,"is-first":!I(ka).newAuth}),"is-gradient":!1,disabled:I(Ma)&&!I(Ya),text:I(_a)?"领取保障并激活":"分享至客户",onClick:Ha},null,8,["class","disabled","text"]),I(_a)?(w(),j(m,{key:0},{default:F((()=>{var e;return[(null==(e=I(Da))?void 0:e.length)?(w(),j(I(R),{key:0,modelValue:I(ka).agree,"onUpdate:modelValue":l[3]||(l[3]=e=>I(ka).agree=e),"attachment-list":I(Da),"has-bg-color":!1,"is-show-radio":"","pre-text":"请阅读",onPreviewFile:l[4]||(l[4]=e=>(e=>{ka.isOnlyView=!0,ka.activeIndex=e,ka.showFilePreview=!0})(e))},null,8,["modelValue","attachment-list"])):P("",!0)]})),_:1})):P("",!0),N(m,null,{default:F((()=>{var e,l,n;return[(null==(e=I(ka).tenantProductDetail.SIGNATURE)?void 0:e.inscribedContent)?(w(),j(I(a),{key:0,"inscribed-content":null==(n=null==(l=I(ka).tenantProductDetail)?void 0:l.SIGNATURE)?void 0:n.inscribedContent},null,8,["inscribed-content"])):P("",!0)]})),_:1})])])],8,Ke)),I(ka).showFilePreview?(w(),j(I(H),{key:2,show:I(ka).showFilePreview,"onUpdate:show":l[5]||(l[5]=e=>I(ka).showFilePreview=e),"content-list":I(ka).isOnlyView?I(Da):I(Fa),"is-only-view":I(ka).isOnlyView,"active-index":I(ka).activeIndex,text:I(ka).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-count":I(ka).isOnlyView?0:I(Ta),onSubmit:Ja,onOnCloseFilePreviewByMask:Xa},null,8,["show","content-list","is-only-view","active-index","text","force-read-count"])):P("",!0),N(b,L({ref_key:"shareRef",ref:xa},I(La)),null,16),I(ka).loading?P("",!0):(w(),j(de,{key:3,"product-detail":I(ka).tenantProductDetail},null,8,["product-detail"]))],64)}}}),[["__scopeId","data-v-58ff4340"]]);export{oa as default};

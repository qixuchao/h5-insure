import{useSlots as e,computed as t,ref as o,onMounted as n}from"vue";import{_ as r,aI as u,u as a,a as l,g as d,aS as c,h as v,b7 as i,D as s,T as p,o as m,ba as f,b8 as N}from"./index-d66a20d8.js";/* empty css              */import{d as C}from"./order-e0b99dc6.js";import{d as k}from"./trial-0ac61dce.js";import{e as y,g as h}from"./infoCollection-e6a8a0ee.js";import{R as V,b as g}from"./trial-b3f7bf73.js";import"./pdfh5-e588f83d.js";const I={class:"com-field-info"},b={key:0,class:"label"},B={class:"content"};var x=r(vue.defineComponent({__name:"fieldInfo",props:{label:{type:String,default:""},content:{type:String,default:""}},setup(t){const o=e();return(e,n)=>(vue.openBlock(),vue.createElementBlock("div",I,[t.label?(vue.openBlock(),vue.createElementBlock("div",b,vue.toDisplayString(t.label),1)):vue.createCommentVNode("",!0),vue.unref(o).label?vue.renderSlot(e.$slots,"label",{key:1},void 0,!0):vue.createCommentVNode("",!0),vue.createElementVNode("div",B,vue.toDisplayString(t.content),1),vue.unref(o).content?vue.renderSlot(e.$slots,"content",{key:2},void 0,!0):vue.createCommentVNode("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const E={class:"com-insured-part-wrapper"},S={class:"content-wrapper"},_={class:"product-name"},D={class:"risk-item"};var L=r(vue.defineComponent({__name:"InsuredPart",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup(e){const o=e,n=t((()=>{var e,t;const n={riderRiskList:[],amount:0},r=null==(e=o.productData)?void 0:e.riskList.find((e=>e.riskType===V.MAIN_RISK));return Object.assign(n,r),null==(t=o.productData)||t.riskList.forEach((e=>{n.riderRiskList.push(e.riskName||"")})),n}));return(e,t)=>{const o=vue.resolveComponent("ProCell"),r=vue.resolveComponent("ProCard");return vue.openBlock(),vue.createElementBlock("div",E,[vue.createVNode(r,{title:"保障信息"},{default:vue.withCtx((()=>[vue.createElementVNode("div",S,[vue.createElementVNode("div",_,vue.toDisplayString(e.productData.productName),1),vue.createElementVNode("div",D,[vue.createVNode(o,{title:"保障期间",content:vue.unref(n).coveragePeriodDesc},null,8,["content"]),vue.createVNode(o,{title:"交费期间",content:vue.unref(n).chargePeriodDesc},null,8,["content"]),vue.createVNode(o,{title:"交费方式",content:vue.unref(g)[vue.unref(n).paymentFrequency]},null,8,["content"]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(n).riderRiskList,((e,t)=>(vue.openBlock(),vue.createBlock(o,{key:t,title:e,content:"投保"},null,8,["title"])))),128)),vue.createVNode(o,{title:"保障金额",content:(vue.unref(n).initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),vue.createVNode(o,{title:"首期保费",class:"price",content:(e.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])])),_:1})])}}}),[["__scopeId","data-v-51eb63ba"]]);const w={key:0,class:"page-order-detail"},T={class:"card"},Y={class:"header"},P={class:"product-name"},M={class:"company-name"},j={class:"status"},A={key:0,class:"footer-button"},G={key:1,class:"footer-button"},R={key:2,class:"footer-button"};var q=r(vue.defineComponent({__name:"index",setup(e){const t=u(),r=a(),V=l(),g=o(),{query:{orderNo:I,agentCode:b,tenantId:B,abbreviation:E,productCategory:S}}=r,_=()=>{s.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{g.value&&C(g.value.id,g.value.orderStatus).then((e=>{const{code:t,data:o}=e;"10000"===t&&p.success("删除成功")}))}))},D=o(!1),q=()=>{var e,t,o,n,r;if(g.value){if((()=>{var e,t,o;if(!g.value)return!1;const{agencyId:n,saleChannelId:r,orderTopStatus:u}=g.value,a=null==(o=null==(t=null==(e=g.value.insuredList)?void 0:e[0])?void 0:t.productList[0])?void 0:o.productCode;if(!(i.PENDING!==u&&i.PAYING!==u||a!==N.ZXYS&&a!==N.BWYL)){const e={[N.ZXYS]:"/internet/productDetail/package",[N.BWYL]:"/internet/productDetail"};return V.push({path:e[a],query:{productCode:a,saleChannelId:r,agentCode:b,tenantId:B,agencyCode:n,orderNo:I}}),!0}return!1})())return;const{id:u,extInfo:{templateId:a,pageCode:l,extraInfo:d},agencyId:c,insurerCode:v,orderStatus:s}=g.value,p={insurerCode:v,productCode:null==(o=null==(t=null==(e=g.value.insuredList)?void 0:e[0])?void 0:t.productList[0])?void 0:o.productCode,tenantId:g.value.tenantId,agencyCode:g.value.agencyId,agentCode:g.value.saleUserId,saleChannelId:null==d?void 0:d.saleChannelId,extraMap:{...null==(r=null==(n=g.value)?void 0:n.extInfo)?void 0:r.extraInfo,orderNo:g.value.orderNo}};D.value=!0,k(p).then((e=>{if(console.log("投保链接==",e.data),"10000"===e.code)if([y.LONG,y.NIANJIN].includes(h(`${a}`))){const t=e.data.split("?")[1],o=m.parse(t);V.push({path:f[s],query:{...o,extraInfo:o.extraInfo,orderNo:I,templateId:a}})}else window.location.href=e.data}))}};return n((()=>{d({orderNo:I,agentCode:b,tenantId:B}).then((e=>{const{code:t,data:o}=e;"10000"===t&&(g.value=o)}))})),(e,o)=>{const n=vue.resolveComponent("van-button"),r=vue.resolveComponent("van-config-provider"),u=vue.resolveDirective("loading");return vue.openBlock(),vue.createBlock(r,{"theme-vars":vue.unref(t)},{default:vue.withCtx((()=>{var e,t,o,r,a,l,d,s,p,m,f,N;return[vue.unref(g)?(vue.openBlock(),vue.createElementBlock("div",w,[vue.createElementVNode("div",T,[vue.createVNode(x,null,{label:vue.withCtx((()=>{var e,t,o,n;return[vue.createElementVNode("div",Y,[vue.createElementVNode("div",P,vue.toDisplayString(null==(o=null==(t=null==(e=vue.unref(g))?void 0:e.insuredList[0])?void 0:t.productList[0])?void 0:o.productName),1),vue.createElementVNode("div",M,vue.toDisplayString(((null==(n=vue.unref(g))?void 0:n.abbreviation)||"").substring(0,6)),1)])]})),content:vue.withCtx((()=>{var e;return[vue.createElementVNode("div",j,vue.toDisplayString(vue.unref(g)?vue.unref(c)[null==(e=vue.unref(g))?void 0:e.orderStatus]:""),1)]})),_:1}),vue.createVNode(x,{label:"投保单号",content:null==(e=vue.unref(g))?void 0:e.orderNo},null,8,["content"]),vue.createVNode(x,{label:"创建时间",content:vue.unref(v)(null==(t=vue.unref(g))?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),vue.createVNode(x,{label:"投保人",content:null==(r=null==(o=vue.unref(g))?void 0:o.holder)?void 0:r.name},null,8,["content"]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList((null==(a=vue.unref(g))?void 0:a.insuredList)||[],((e,t)=>(vue.openBlock(),vue.createBlock(x,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),vue.createVNode(L,{"product-data":null==(p=null==(s=null==(d=null==(l=vue.unref(g))?void 0:l.insuredList)?void 0:d[0])?void 0:s.productList)?void 0:p[0],"total-premium":vue.unref(g).orderAmount,class:"insure-info"},null,8,["product-data","total-premium"]),vue.withDirectives((vue.openBlock(),vue.createElementBlock("div",null,[(null==(m=vue.unref(g))?void 0:m.orderTopStatus)===vue.unref(i).PENDING?(vue.openBlock(),vue.createElementBlock("div",A,[vue.createVNode(n,{type:"primary",onClick:vue.withModifiers(_,["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode("删除")])),_:1},8,["onClick"]),vue.createVNode(n,{type:"primary",onClick:vue.withModifiers(q,["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode("去处理")])),_:1},8,["onClick"])])):vue.createCommentVNode("",!0),(null==(f=vue.unref(g))?void 0:f.orderTopStatus)===vue.unref(i).PAYING?(vue.openBlock(),vue.createElementBlock("div",G,[vue.createVNode(n,{type:"primary",onClick:vue.withModifiers(_,["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode("删除")])),_:1},8,["onClick"]),vue.createVNode(n,{type:"primary",onClick:vue.withModifiers(q,["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode("去支付")])),_:1},8,["onClick"])])):vue.createCommentVNode("",!0),(null==(N=vue.unref(g))?void 0:N.orderTopStatus)===vue.unref(i).TIMEOUT?(vue.openBlock(),vue.createElementBlock("div",R,[vue.createVNode(n,{type:"primary",onClick:vue.withModifiers(_,["stop"])},{default:vue.withCtx((()=>[vue.createTextVNode("删除")])),_:1},8,["onClick"])])):vue.createCommentVNode("",!0)])),[[u,vue.unref(D)]])])):vue.createCommentVNode("",!0)]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-e356e3ba"]]);export{q as default};

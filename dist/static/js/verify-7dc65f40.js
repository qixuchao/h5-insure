import{d as a,r as e,V as s,b as l,c as u,i as t,k as i,f as n,h as o,e as r,w as d,j as c,E as p,af as v,a0 as m,$ as f,ag as g,B as b,ah as y,ai as h,s as w,aj as C}from"./index-15837f9c.js";const k={class:"sign-wrap"},S=["src"],V={class:"popup-body"},_={class:"sign-container-wrap"},T={class:"operate-bar"},I={class:"btns"},j=a({name:"sign"}),O=a({...j,props:{option:{default:{}},modelValue:{default:""}},emits:["update:modelValue","submitSign"],setup(a,{expose:w,emit:C}){const j=a,O=e(!1),R=e(),x=e(""),z=e(!0),E=()=>{var a;O.value=!0,null==(a=R.value)||a.clear(),setTimeout((()=>{var a;null==(a=R.value)||a.setDataURL(x.value),j.modelValue?z.value=!1:z.value=!0}))},N=()=>{g({images:[x.value],className:"customer-sign-preview"})},P=()=>{O.value=!1},$=()=>{var a,e;null==(e=null==(a=R.value)?void 0:a.clear)||e.call(a),x.value="",z.value=!0,C("update:modelValue","")},B=()=>{var a;x.value=null==(a=R.value)?void 0:a.save(),C("update:modelValue",x.value),C("submitSign",x.value),O.value=!1};return s((()=>j.modelValue),(()=>{x.value=j.modelValue}),{immediate:!0}),w({rewrite:$,openSign:E}),(a,e)=>{const s=b,g=y,w=h;return l(),u(f,null,[t("div",k,[i(a.$slots,"signImg",{data:n(x)},(()=>[n(x)?(l(),u("img",{key:0,class:"preview-sign",src:n(x),alt:"",onClick:N},null,8,S)):o("",!0),r(s,{type:"primary",round:"",size:"small",onClick:E},{default:d((()=>[c(p(n(x)?"重新签名":"点击签字"),1)])),_:1})]))]),r(w,{show:n(O),"onUpdate:show":e[1]||(e[1]=a=>m(O)?O.value=a:null),position:"bottom",style:{height:"100%",overflow:"hidden"}},{default:d((()=>[t("div",V,[t("div",_,[r(v,{ref_key:"signRef",ref:R,placeholder:"请在此处签名",onStroke:e[0]||(e[0]=a=>z.value=!1)},null,512),t("div",T,[t("span",null,[r(g,{name:"info",color:"#ffaf22"}),c(" 请投保人正楷签署您的签名:")]),t("div",I,[r(s,{type:"default",class:"btn",onClick:P},{default:d((()=>[c("返回")])),_:1}),r(s,{type:"default",class:"btn",onClick:$},{default:d((()=>[c("重写")])),_:1}),r(s,{type:"primary",class:"btn",disabled:n(z),onClick:B},{default:d((()=>[c("确定签字")])),_:1},8,["disabled"])])])])])])),_:1},8,["show"])],64)}}}),R=a=>w({url:"/api/app/insure/insurance/customerFace",method:"POST",data:a}),x=a=>w({url:"/api/app/insure/insurance/saveCustomerFaceResult",method:"POST",data:a}),z=(a,e,s,l,u)=>{const t={bizObjectType:a,bizObjectId:u,docCategory:"ELECTRIC_SIGN",docType:"png",fileBase64:e,docName:`${C[a]}电子签名`,orderId:s,tenantId:l};return w({url:"/api/app/insure/insurance/saveCustomerSignResult",method:"POST",data:t})};export{O as _,R as a,x as f,z as s};

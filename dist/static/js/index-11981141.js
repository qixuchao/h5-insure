import{ref as e,reactive as a,onMounted as i,watch as u}from"vue";import{c as l}from"./cloneDeep-6abacc69.js";import{B as t,b as n,R as r}from"./index-9ba6d482.js";function o(e){return Object.keys(e)}const s=Vue.defineComponent({name:"InsureInfos"}),d=Vue.defineComponent({...s,props:{originData:{default:()=>({})},modelValue:{default:()=>({})},defaultValue:{default:()=>({})},trialResult:{default:()=>({})}},emits:["trialChange"],setup(s,{expose:d,emit:m}){const V=s,f=e(null),v=e({}),c=e({}),g=a({personalInfo:{},basicsAmount:"",basicsPremium:"",defaultValues:V.defaultValue,changeData:null,sValues:v.value});Vue.inject("premium"),c.value=Vue.inject("enumList")||{},i((()=>{}));const k=e=>{V.originData.mainRiskFlag,v.value.riskCategory=V.originData.riskCategory,v.value.riskCode=V.originData.riskCode,v.value.riskId=V.originData.riskId,v.value.riskType=V.originData.riskType,v.value.riskName=V.originData.riskName,v.value.riskType=V.originData.riskType,v.value.mainRiskCode=V.originData.mainRiskCode,v.value.mainRiskId=V.originData.mainRiskId,e?m("trialChange",v.value,e):m("trialChange",v.value)},p=(e,a)=>{a?v.value[a.key]=a.newValue:o(e).forEach((a=>{v.value[a]=e[a]})),k(a)},D=e=>{var a,i;1==+(null==(i=null==(a=V.originData)?void 0:a.productRiskInsureLimitVO)?void 0:i.amountPremiumConfigVO.saleMethod)?g.basicsAmount=null==e?void 0:e.initialAmount:g.basicsAmount=null==e?void 0:e.initialPremium,o(e).forEach((a=>{v.value[a]=e[a]})),k()},C=e=>{v.value.liabilityList=e,k()};return u((()=>V.defaultValue),(e=>{e&&(console.log("--default change ",e),g.defaultValues=l(e),v.value={...e})}),{deep:!0,immediate:!0}),u((()=>v.value),(e=>{g.sValues=e}),{deep:!0,immediate:!0}),d({validate:async()=>{var e;await(null==(e=f.value)?void 0:e.validate())}}),(e,a)=>{var i,u,l,o,s,d;const m=Vue.resolveComponent("ProCard");return 1===(null==(i=e.originData)?void 0:i.factorDisPlayFlag)?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createVNode(m,{title:"保障计划",class:"insurePlan","show-divider":!1}),Vue.createVNode(Vue.unref(t),{"v-model":Vue.unref(g).sValues,"origin-data":null==(l=null==(u=e.originData)?void 0:u.productRiskInsureLimitVO)?void 0:l.amountPremiumConfigVO,"defalut-value":Vue.unref(g).defaultValues,"trial-result":e.trialResult,onTrialChange:D},null,8,["v-model","origin-data","defalut-value","trial-result"]),Vue.createVNode(Vue.unref(n),{"v-model":Vue.unref(g).sValues,"use-data":Vue.unref(g).sValues,"origin-data":e.originData.productRiskInsureLimitVO,"risk-info":e.originData,"default-value":Vue.unref(g).defaultValues,onTrialChange:p},null,8,["v-model","use-data","origin-data","risk-info","default-value"]),Vue.createVNode(Vue.unref(r),{"data-source-folmulate":Vue.unref(v),"data-source":e.originData,params:{amountUnit:null==(s=null==(o=e.originData)?void 0:o.productRiskInsureLimitVO)?void 0:s.amountPremiumConfigVO.displayUnit,basicsAmount:Vue.unref(g).basicsAmount,basicsPremium:Vue.unref(g).basicsPremium,riskId:null==(d=e.originData)?void 0:d.riskId},"default-value":Vue.unref(g).defaultValues,onTrialChange:C},null,8,["data-source-folmulate","data-source","params","default-value"])],64)):Vue.createCommentVNode("",!0)}}});export{d as _};

import{_ as a,d as e,i as t,h as s,j as o,aG as n,o as r,c as d,u as i,m as l,p as c,f as u,a as p,b as m,w as f,a8 as v,aN as h,a9 as y,cS as I,bw as b,ai as g,cr as _,cs as j,ct as P}from"./index-674cff0a.js";import{_ as N}from"./PolicyInfo-59ea6f87.js";import{u as x}from"./useOrder-4b01043d.js";import{p as C}from"./utils-e7a66452.js";import{g as k,m as w}from"./trial-93cf8634.js";import{n as A}from"./nextStep-22b5c5c3.js";import{B as O,a as $}from"./constants-4b08cf92.js";import"./utils-5791cea2.js";import"./infoCollection-55a95873.js";import"./trial-2b724a0c.js";import"./core-ca2bb2ec.js";const B={class:"bank-info-wrap"},E={class:"footer-button"},G=e({name:"updateBankInfo"});var L=a(e({...G,setup(a){const e=t(),G=s(),{orderNo:L,isShare:S,tenantId:U,nextPageCode:D}=e.query,T=x(),V=o({schema:[],config:[],formData:[]}),q=o(!!S),F=o(),M=o(),R=()=>{G.back()},J=()=>{F.value&&F.value.validate(!1).then((a=>{a&&(T.value.tenantOrderPayInfoList=M,S?(T.value.extInfo.buttonCode=O.UPDATE_BANK_INFO_HOLDER,A(T.value,((a,t)=>{t===h.JUMP_PAGE&&y(a.nextPageCode,e.query)}),e)):(T.value.extInfo.buttonCode=O.UPDATE_BANK_INFO_AGENT,A(T.value,((a,e)=>{e===h.JUMP_PAGE&&((a,e)=>{const{holder:t,insured:s}=T.value;let o={name:t.name,gender:`${_[t.gender]}士`};"insured"===a&&(o={name:null==s?void 0:s[0].name,gender:`${_[null==s?void 0:s[0].gender]}士`}),j({shareType:0,title:`${P[e].title}`,desc:P[e].desc.replace("{name}",`${o.name}${o.gender},`),url:`${window.location.href}&objectType=${a}&isShare=1&nextPageCode=updateBankInfo`.replace("/updateBankInfo","/phoneVerify"),imageUrl:"https://aquarius-v100-test.oss-cn-hangzhou.aliyuncs.com/MyPicture/asdad.png"})})("holder","pay")}),e)))}))};return n((()=>{(async()=>{let a={};I({orderNo:L,tenantId:U}).then((({code:a,data:e})=>{"10000"===a&&(M.value=e.tenantOrderPayInfoList)}));const{code:e,data:t}=await k({orderNo:L,tenantId:U});"10000"===e&&(Object.assign(T.value,t,{extInfo:{...t.extInfo,buttonCode:O.SIGN,pageCode:$.SIGN}}),a=C(t.insuredList[0].productList)),w(a).then((({data:a,code:e})=>{if("10000"===e){const{productDetailResList:e,productFactor:t}=a,{payInfo:s}=b(t);V.value={...V.value,...s}}}))})()})),(a,e)=>{const t=g;return r(),d("div",B,[i(V).schema.length&&i(M)?(r(),l(N,{key:0,ref_key:"payInfoRef",ref:F,modelValue:i(M),"onUpdate:modelValue":e[0]||(e[0]=a=>c(M)?M.value=a:null),schema:i(V).schema,"is-view":i(q),"user-data":i(T)},null,8,["modelValue","schema","is-view","user-data"])):u("",!0),p("div",E,[m(t,{type:"primary",plain:"",onClick:R},{default:f((()=>[v("取消")])),_:1}),m(t,{type:"primary",onClick:J},{default:f((()=>[v("确认")])),_:1})])])}}}),[["__scopeId","data-v-61e78bea"]]);export{L as default};

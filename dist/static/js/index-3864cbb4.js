import{d as e,h as t,o as a,c as l,a as s,e as n,b as o,F as i,q as d,m as c,u as r,_ as u,aC as m,aD as p,cR as v,i as f,j as b,k as y,B as g,O as h,p as j,ds as _,w as C,a9 as N,T as k}from"./index-26f63535.js";import{P as x}from"./index-31a1b81c.js";import{_ as I}from"./index-a3d73d78.js";import{L as D}from"./index-01f3cedf.js";import{I as O}from"./infoItem-c8b3dcab.js";import{O as S}from"./OperateBtn-ef400fa2.js";import{t as q}from"./format-cf51a859.js";import{q as w}from"./order-23ec5443.js";import"./empty-ae586b6c.js";import"./constants-4b08cf92.js";const U={class:"com-order-item"},V={class:"header"},B={class:"product-name"},L={class:"status"},R={class:"info"},T={class:"info-bottom"},z=(e=>(m("data-v-40dd5e97"),e=e(),p(),e))((()=>s("div",{style:{width:"25%"}},[s("img",{src:"/static/png/tree-0f48942e.png",alt:"",style:{width:"80%"}})],-1))),A={class:"footer"};var F=u(e({__name:"item",props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup:(e,{emit:u})=>(t(),(t,u)=>{var m;return a(),l("div",U,[s("div",V,[s("div",B,n(e.detail.productName),1),s("div",L,n(e.detail.orderStatusDesc),1)]),s("div",R,[o(O,{label:"订单号",content:e.detail.orderNo,line:"","is-copy":""},null,8,["content"]),(a(!0),l(i,null,d(e.detail.applicationNo||[""],(e=>(a(),c(O,{key:e,label:"投保单号",content:e,line:"","is-copy":""},null,8,["content"])))),128)),o(O,{label:"保单号",content:e.detail.policyNo,line:"","is-copy":""},null,8,["content"]),s("div",T,[s("div",null,[o(O,{label:"投保人",content:e.detail.holderName,line:""},null,8,["content"]),o(O,{label:"被保人",content:null==(m=e.detail.insuredName)?void 0:m[0],line:""},null,8,["content"]),o(O,{label:"创建时间",content:e.detail.orderStartDate,line:""},null,8,["content"]),o(O,{label:"保费",content:r(q)(e.detail.premium),line:""},null,8,["content"])]),z])]),s("div",A,[o(S,{detail:e.detail},null,8,["detail"])])])})}),[["__scopeId","data-v-40dd5e97"]]);const P={class:"page-order"},E={key:1,class:"empty-box"};var G=u(e({__name:"index",setup(e){v(),t();const s=f(),{type:n,tenantId:u,agentCode:m}=s.query,p=b({"-1":1,0:2,1:3,2:4}[n]||0),O=b(1),S=b(!1),q=b(!1),U=b(!1),V=b([]);b(0),b(0),b(0);const B=[{title:"全部",status:""},{title:"待处理",status:"-1"},{title:"待支付",status:"0"},{title:"已完成",status:"3"},{title:"已失效",status:"2"}],L=y((()=>(V.value=[],B[p.value].status))),R=()=>{k.loading({message:"加载中...",forbidClick:!0}),S.value=!0,w({condition:{orderTopStatus:L.value,tenantId:u,agentCode:m},pageSize:10,pageNum:O.value}).then((e=>{const{code:t,data:a}=e;"10000"===t&&a&&(S.value=!1,q.value=!1,1===O.value?V.value=a.datas||[]:V.value=V.value.concat(a.datas||[]),a.datas.length<10&&(U.value=!0))})).then((()=>{k.clear()}))},T=()=>{O.value+=1,R()},z=()=>{O.value=1,R()};return g(L,(()=>{O.value=1,R()})),h((()=>{R()})),(e,t)=>{const s=D,n=I,v=x;return a(),l("div",P,[o(_,{active:r(p),"onUpdate:active":t[0]||(t[0]=e=>j(p)?p.value=e:null),list:B,class:"tab","title-active-color":"#c41e21"},null,8,["active"]),o(v,{modelValue:r(q),"onUpdate:modelValue":t[2]||(t[2]=e=>j(q)?q.value=e:null),onRefresh:z},{default:C((()=>[r(V).length?(a(),c(s,{key:0,loading:r(S),"onUpdate:loading":t[1]||(t[1]=e=>j(S)?S.value=e:null),class:"body",finished:r(U),onLoad:T},{default:C((()=>[(a(!0),l(i,null,d(r(V),((e,t)=>(a(),c(F,{key:t,detail:e,onClick:t=>(e=>{const{orderNo:t,insurerCode:a}=e;N("orderDetail",{orderNo:t,agentCode:m,tenantId:u,insurerCode:a})})(e),onAfterDelete:z},null,8,["detail","onClick"])))),128))])),_:1},8,["loading","finished"])):(a(),l("div",E,[o(n,{title:"暂无投保单","empty-class":"empty-select"})]))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-074c8268"]]);export{G as default};

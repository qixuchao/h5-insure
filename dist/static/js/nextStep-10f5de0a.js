import{g as e,h as t,bk as r,bl as a,aC as o,T as n,bm as s,az as u}from"./index-5f0b7c0f.js";import{s as i}from"./core-3af9d072.js";import{P as d}from"./constants-fe95ef6f.js";const{VITE_BASE:I}={VITE_BASE:"/",VITE_API_BASEURL:"/",VITE_APP_TITLE:"投保流程",VITE_THEME_COLOR:"#C41E21",VITE_APP_DESCRIPTION:"一种互联网投保的快速落地实现方案",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},l=e(),p=t(),c=async(e,t)=>{var c,E;const T=e,{extInfo:_,orderNo:A,tenantOrderInsuredList:f,tenantId:m}=T||{},{iseeBizNo:y,templateId:h}=_||{};if(A){const{productCode:e}=(null==(E=null==(c=null==f?void 0:f[0])?void 0:c.tenantOrderProductList)?void 0:E[0])||{};let t=`${window.location.origin}${I}baseInsurance/orderDetail?orderNo=${A}&tenantId=${m}&ISEE_BIZ=${y}&productCode=${e}`;h>200&&(t=`${window.location.origin}${I}baseInsurance/long/result?orderNo=${A}&templateId=${h}&tenantId=${m}&ISEE_BIZ=${y}&productCode=${e}`),T.extInfo.redirectUrl=t}const R=r();if(R.ext)try{T.ext=R.ext}catch($){console.error("ext 参数格式错误",R.ext,$)}const{code:L,data:P}=await a(T);if("10000"===L){const{pageAction:e,message:r,data:a}=P.pageAction||{};null==t||t(a,e),e===o.ALERT&&n(r),e===o.JUMP_URL&&i(null==a?void 0:a.paymentUrl),e===o.JUMP_ALERT&&(a.alertType===s.PAY_AUTH?u.confirm({title:"投保提示",message:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。",confirmButtonText:"去鉴权"}).then((()=>{l.push({path:d.payAuth,query:p.query})})):a.alertType===s.SIGN_FAIL?l.push({path:d.underWriteResult,query:{...p.query,underwriteStatus:s.SIGN_FAIL}}):a.alertType===s.PAY_FAIL?l.push({path:d.updateBankInfo,query:p.query}):a.alertType===s.QUESTIONNAIRE?u.confirm({confirmButtonText:"返回修改",message:"当前投被保人年龄、性别不符合健康告知规则，请修改健康告知"}).then((()=>{l.push({path:d.premiumTrial,query:p.query})})):a.alertType===s.UNDER_WRITE_FAIL&&l.push({path:d.underWriteResult,query:{...p.query,underwriteStatus:s.UNDER_WRITE_FAIL}}))}};export{c as n};

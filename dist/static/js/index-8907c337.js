import{av as e,d as a,r as l,E as s,ax as t,bb as u,am as n,aw as i,f as o,A as d,a4 as r,b1 as m,b5 as b,bc as v,aZ as c,ay as p,bd as g,be as h,b6 as f,bf as S,bg as w,bh as x,bi as y,aB as V}from"./index-dae3ff12.js";const[B,P]=e("stepper"),I=(e,a)=>String(e)===String(a);const M=V(a({name:B,props:{min:v(1),max:v(1/0),name:v(""),step:v(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:c,showMinus:c,showInput:c,longPress:c,allowEmpty:Boolean,modelValue:p,inputWidth:p,buttonSize:p,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:v(1),decimalLength:p},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:a}){const v=a=>{const{min:l,max:s,allowEmpty:t,decimalLength:u}=e;return t&&""===a||(a=""===(a=g(String(a),!e.integer))?0:+a,a=Number.isNaN(a)?+l:a,a=Math.max(Math.min(+s,a),+l),h(u)&&(a=a.toFixed(+u))),a};let c;const p=l(),V=l((()=>{var l;const s=null!=(l=e.modelValue)?l:e.defaultValue,t=v(s);return I(t,e.modelValue)||a("update:modelValue",t),t})()),B=s((()=>e.disabled||e.disableMinus||V.value<=+e.min)),M=s((()=>e.disabled||e.disablePlus||V.value>=+e.max)),T=s((()=>({width:t(e.inputWidth),height:t(e.buttonSize)}))),C=s((()=>u(e.buttonSize))),L=a=>{e.beforeChange?x(e.beforeChange,{args:[a],done(){V.value=a}}):V.value=a},z=()=>{if("plus"===c&&M.value||"minus"===c&&B.value)return void a("overlimit",c);const l="minus"===c?-e.step:+e.step,s=v(y(+V.value,l));L(s),a(c)},E=a=>{const l=a.target,{value:s}=l,{decimalLength:t}=e;let u=g(String(s),!e.integer);if(h(t)&&u.includes(".")){const e=u.split(".");u=`${e[0]}.${e[1].slice(0,+t)}`}e.beforeChange?l.value=String(V.value):I(s,u)||(l.value=u);const n=u===String(+u);L(n?+u:u)},F=l=>{var s;e.disableInput?null==(s=p.value)||s.blur():a("focus",l)},N=e=>{const l=e.target,s=v(l.value);l.value=String(s),V.value=s,f((()=>{a("blur",e),S()}))};let W,$;const j=()=>{$=setTimeout((()=>{z(),j()}),200)},k=a=>{e.longPress&&(clearTimeout($),W&&w(a))},A=a=>{e.disableInput&&w(a)},Z=a=>({onClick:e=>{w(e),c=a,z()},onTouchstartPassive:()=>{c=a,e.longPress&&(W=!1,clearTimeout($),$=setTimeout((()=>{W=!0,z(),j()}),600))},onTouchend:k,onTouchcancel:k});return n((()=>[e.max,e.min,e.integer,e.decimalLength]),(()=>{const e=v(V.value);I(e,V.value)||(V.value=e)})),n((()=>e.modelValue),(e=>{I(e,V.value)||(V.value=v(e))})),n(V,(l=>{a("update:modelValue",l),a("change",l,{name:e.name})})),i((()=>e.modelValue)),()=>o("div",{role:"group",class:P([e.theme])},[d(o("button",m({type:"button",style:C.value,class:[P("minus",{disabled:B.value}),{[b]:!B.value}],"aria-disabled":B.value||void 0},Z("minus")),null),[[r,e.showMinus]]),d(o("input",{ref:p,type:e.integer?"tel":"text",role:"spinbutton",class:P("input"),value:V.value,style:T.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":V.value,onBlur:N,onInput:E,onFocus:F,onMousedown:A},null),[[r,e.showInput]]),d(o("button",m({type:"button",style:C.value,class:[P("plus",{disabled:M.value}),{[b]:!M.value}],"aria-disabled":M.value||void 0},Z("plus")),null),[[r,e.showPlus]])])}}));export{M as S};

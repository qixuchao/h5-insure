import{_ as e,d as a,cn as t,i as r,h as s,bx as o,j as c,aE as i,o as d,c as n,a as l,b as p,w as u,a8 as y,ae as f,ag as b,aC as m,aD as v}from"./index-6bdd4662.js";import{f as N,a as T}from"./verify-fc153ccb.js";import{P as h}from"./constants-4b08cf92.js";const j=e=>(m("data-v-d736f206"),e=e(),v(),e),I={class:"page-verify-face"},C={class:"result-content"},g=j((()=>l("h4",null,"人脸识别验证失败",-1))),w=j((()=>l("p",{class:"desc"},"请保持在检测框内",-1))),_={class:"operate-btn"},x=a({name:"verifyFace"});var q=e(a({...x,setup(e){const a=t(),m=r(),v=s(),{isFirst:j,tenantId:x,objectType:q,orderNo:z,biz_id:E,nextPageCode:F}=m.query,P=a.get(`${o}_orderDetail`),U=c(),S=()=>{const{userName:e,certiNo:a,certType:t}=U.value,r={tenantId:x,faceAuthMode:"TENCENT",callbackUrl:window.location.href.replace("isFirst=1","isFirst=0"),bizNo:z,userName:e,certiNo:a,certType:t};N(r).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))};return i((()=>{const{holder:e,insuredList:a}=P;if("holder"===q){const{name:a,certNo:t,certType:r,id:s}=e;U.value={userName:a,certiNo:t,certType:r,objectId:s}}else{const{name:e,certNo:t,certType:r,id:s}=(null==a?void 0:a[0])||{};U.value={userName:e,certiNo:t,certType:r,objectId:s}}"1"===j&&S(),E&&(()=>{const{userName:e,objectId:a,certType:t}=U.value,r={bizId:E,certType:t,objectId:a,objectType:`${q}`.toLocaleUpperCase(),orderNo:z,tenantId:x};T(r).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status&&(delete m.query.biz_id,delete m.query.nextPageCode,v.push({path:h.infoPreview,query:m.query}))}))})()})),(e,a)=>{const t=f,r=b;return d(),n("div",I,[l("div",C,[p(t,{name:"wrong","font-size":"52px",color:"var(--van-primary-color)"}),g,w]),l("div",_,[p(r,{type:"primary",onClick:S},{default:u((()=>[y("再试一次")])),_:1})])])}}}),[["__scopeId","data-v-d736f206"]]);export{q as default};

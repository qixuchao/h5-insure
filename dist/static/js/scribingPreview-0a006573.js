import{d as a,a as e,u as s,r as t,aI as i,R as o,b as l,c as n,i as r,e as d,w as c,U as p,a4 as u,f as m,a0 as b,Y as v,af as f,j as g,ag as w,B as h,aK as k,ae as y}from"./index-fa689879.js";import{S as I}from"./index-1cd71385.js";import{P as C}from"./index-f1643686.js";import{q as N,s as j,c as x}from"./scribing-7f9b6d76.js";const _={class:"page-scribing-preview-wrap"},L=r("div",{class:"header-tip"},"点击文字框可进行修改",-1),T={class:"scribing-list"},E=["onClick"],V=["src"],q={class:"footer-btn"},A={class:"popup-body"},D={class:"popup-footer"},H=a({name:"scribingPreview"}),P=a({...H,setup(a){const H=e(),P=s(),S=t([]),{orderNo:U,text:Y,tenantId:B,orderId:K}=P.query,O=t({}),[R,$]=i(!1),z=t(),F=async()=>{const{code:a,data:e}=await N({orderId:K,tenantId:B,contentType:y.HANDLE});"10000"===a&&(S.value=e.riskTranscriptionList,z.value=e.status)},G=()=>{$(!1)},J=()=>{O.value.image&&j({orderNo:U,tenantId:B,riskTranscriptionList:[{...O.value,status:2}]}).then((({code:a,data:e})=>{"10000"===a&&($(!1),F())}))},M=()=>{x({content:Y,image:"",orderNo:U,tenantId:B,transcriptionType:y.HANDLE}).then((({code:a})=>{"10000"===a&&H.back()}))},Q=t(!1);return o((()=>{Q.value=!0,F()})),(a,e)=>{const s=I,t=w,i=h,o=k;return l(),n(p,null,[r("div",_,[L,r("div",T,[d(s,{wrap:""},{default:c((()=>[(l(!0),n(p,null,u(m(S),((a,e)=>(l(),n("div",{key:e,class:b("scribing-item "+(+a.status!==m(v).YES?"activity":"")),onClick:e=>{return s=a,O.value={...s,image:""},void $(!0);var s}},[r("img",{src:a.thumbnail,alt:""},null,8,V)],10,E)))),128))])),_:1})]),r("div",q,[d(C,{shadow:!1,disabled:m(z)===m(v).NO,onClick:M},{default:c((()=>[f(a.$slots,"default",{},(()=>[g("确认")]))])),_:3},8,["disabled"])])]),d(o,{show:m(R),teleport:".page-scribing-preview-wrap",class:"sign-popup",title:m(O).content,closeable:!1,position:"center",onClose:G},{default:c((()=>[r("div",A,[d(t,{modelValue:m(O).image,"onUpdate:modelValue":e[0]||(e[0]=a=>m(O).image=a),"has-bg":"",placeholder:m(O).content,closeable:""},null,8,["modelValue","placeholder"])]),r("div",D,[d(i,{onClick:G},{default:c((()=>[g("取消")])),_:1}),d(i,{type:"primary",plain:"",disabled:!m(O).image,onClick:J},{default:c((()=>[g("确定")])),_:1},8,["disabled"])])])),_:1},8,["show","title"])],64)}}});export{P as default};

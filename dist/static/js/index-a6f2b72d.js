import{g as E,M as R,E as v,x as I,ak as T,r as c,j as h,k as S,m as r,p as s,A as f,R as U,z as i,n as y,G as $,F as q,J as C,C as d,D as z,T as W}from"./vendor-276186d8.js";import{_ as j,F as G}from"./index-6219fdd4.js";import{P as H}from"./index-e0b6f8bb.js";import{h as J,d as M}from"./proposalList-149a49f0.js";import{c as O,a as K}from"./format-d78bf325.js";const Q={class:"proposal-content"},X={class:"title"},Y={class:"premium"},Z=d(" \u4FDD\u8D39\uFF1A"),w={class:"operate-btn"},ee=d("\u5220\u9664"),ae=d("\u7F16\u8F91"),te=d("\u9884\u89C8"),oe=E({setup(se){const k=[{title:"\u9669\u79CD\u540D\u79F0",dataIndex:"riskName",width:180},{title:"\u4FDD\u969C\u671F\u95F4",dataIndex:"coveragePeriod",render:e=>O(e==null?void 0:e.coveragePeriod)},{title:"\u7F34\u8D39\u671F\u95F4",dataIndex:"chargePeriod",width:110,render:e=>K(e==null?void 0:e.chargePeriod)},{title:"\u4FDD\u8D39",dataIndex:"premium",width:120}],x=R({historyList:[],searchValue:""}),p=v(!1),F=v(!1),n=v(1),{historyList:u,searchValue:l}=I(x),g=T(),_=()=>{J({name:l.value,pageNum:n.value,pageSize:20,relationUserType:2}).then(e=>{const{code:t,data:o}=e;t==="10000"&&(n.value===1?u.value=o.datas||[]:u.value=u.value.concat(o.datas),n.value+=1,p.value=!1,F.value=u.value.length>=o.total)})},D=()=>{_()},V=e=>{l.value=e,n.value=1,_()},B=e=>{z.confirm({message:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BA1\u5212\u4E66\uFF1F"}).then(()=>{M(e).then(t=>{const{code:o}=t;o==="10000"&&(W.success("\u5220\u9664\u6210\u529F"),n.value=1,_())})}).catch(()=>{})},L=e=>{g.push({path:"compositionProposal",query:{id:e}})},A=e=>{g.push({path:"/proposal/createProposal",query:{id:e}})};return(e,t)=>{const o=c("van-search"),m=c("van-button"),N=c("van-list"),b=c("ProPageWrap");return h(),S(b,{class:"page-history-proposal"},{default:r(()=>[s(o,{modelValue:f(l),"onUpdate:modelValue":t[0]||(t[0]=a=>U(l)?l.value=a:null),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",shape:"round",class:"search",onSearch:V},null,8,["modelValue"]),i("div",Q,[s(N,{loading:p.value,"onUpdate:loading":t[1]||(t[1]=a=>p.value=a),finished:F.value,"finished-text":"- \u6CA1\u6709\u66F4\u591A\u4E86 -",onLoad:D},{default:r(()=>[(h(!0),y(q,null,$(f(u),a=>(h(),y("div",{key:a.id,class:"proposal-item"},[i("div",X,C(a.proposalName),1),i("p",Y,[Z,i("span",null,"\xA5"+C(f(G)(a.totalPremium)),1)]),s(H,{columns:k,class:"table","data-source":a.proposalProductRiskVOList},null,8,["data-source"]),i("div",w,[s(m,{plain:"",round:"",type:"primary",class:"del-btn",onClick:P=>B(a.id)},{default:r(()=>[ee]),_:2},1032,["onClick"]),s(m,{plain:"",round:"",type:"primary",onClick:P=>A(a.id)},{default:r(()=>[ae]),_:2},1032,["onClick"]),s(m,{plain:"",round:"",type:"primary",onClick:P=>L(a.id)},{default:r(()=>[te]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var ce=j(oe,[["__scopeId","data-v-5f363c3e"]]);export{ce as default};

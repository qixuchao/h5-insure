import{v as t,d as e,j as s,y as o,x as a,cd as i,k as n,bO as l,A as r,O as c,z as d,Q as f,b as h,ce as p,K as u,C as g,cf as v,S as w,G as A,R as m,E as x,cg as C,ch as y,D as k,r as b,ci as z,X as N,cj as S,ck as I,H as L,cl as M,B as R,cm as V,bQ as E}from"./index-c77dbd25.js";const[O,G]=t("index-bar"),P={sticky:u,zIndex:g,teleport:[String,Object],highlightColor:String,stickyOffsetTop:v(0),indexList:{type:Array,default:function(){const t="A".charCodeAt(0);return Array(26).fill("").map(((e,s)=>String.fromCharCode(t+s)))}}},B=Symbol(O);var K=e({name:O,props:P,emits:["select","change"],setup(t,{emit:e,slots:u}){const g=s(),v=s(),b=s(""),z=o(),N=a(g),{children:S,linkChildren:I}=i(B);let L;I({props:t});const M=n((()=>{if(l(t.zIndex))return{zIndex:+t.zIndex+1}})),R=n((()=>{if(t.highlightColor)return{color:t.highlightColor}})),V=(e,s)=>{for(let o=S.length-1;o>=0;o--){const a=o>0?s[o-1].height:0;if(e+(t.sticky?a+t.stickyOffsetTop:0)>=s[o].top)return o}return-1},E=t=>S.find((e=>String(e.index)===t)),O=()=>{if(w(g))return;const{sticky:e,indexList:s}=t,o=A(N.value),a=m(N),i=S.map((t=>t.getRect(N.value,a)));let n=-1;if(L){const t=E(L);if(t){const e=t.getRect(N.value,a);n=V(e.top,i)}}else n=V(o,i);b.value=s[n],e&&S.forEach(((e,s)=>{const{state:l,$el:r}=e;if(s===n||s===n-1){const t=r.getBoundingClientRect();l.left=t.left,l.width=t.width}else l.left=null,l.width=null;if(s===n)l.active=!0,l.top=Math.max(t.stickyOffsetTop,i[s].top-o)+a.top;else if(s===n-1&&""===L){const t=i[n].top-o;l.active=t>0,l.top=t+a.top-i[s].height}else l.active=!1})),L=""},P=()=>{x(O)};r("scroll",O,{target:N,passive:!0}),c(P),d((()=>t.indexList),P),d(b,(t=>{t&&e("change",t)}));const K=s=>{L=String(s);const o=E(L);if(o){const s=A(N.value),a=m(N),{offsetHeight:i}=document.documentElement;if(o.$el.scrollIntoView(),s===i-a.height)return void O();t.sticky&&t.stickyOffsetTop&&C(y()-t.stickyOffsetTop),e("select",o.index)}},T=t=>{const{index:e}=t.dataset;e&&K(e)},U=t=>{T(t.target)};let j;const D=()=>h("div",{ref:v,class:G("sidebar"),style:M.value,onClick:U,onTouchstartPassive:z.start},[t.indexList.map((t=>{const e=t===b.value;return h("span",{class:G("index",{active:e}),style:e?R.value:void 0,"data-index":t},[t])}))]);return f({scrollTo:K}),r("touchmove",(t=>{if(z.move(t),z.isVertical()){k(t);const{clientX:e,clientY:s}=t.touches[0],o=document.elementFromPoint(e,s);if(o){const{index:t}=o.dataset;t&&j!==t&&(j=t,T(o))}}}),{target:v}),()=>{var e;return h("div",{ref:g,class:G()},[t.teleport?h(p,{to:t.teleport},{default:()=>[D()]}):D(),null==(e=u.default)?void 0:e.call(u)])}}});const[T,U]=t("index-anchor");const j=L(e({name:T,props:{index:g},setup(t,{slots:e}){const o=b({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),a=s(),{parent:i}=z(B);if(!i)return;const l=()=>o.active&&i.props.sticky,r=n((()=>{const{zIndex:t,highlightColor:e}=i.props;if(l())return N(S(t),{left:o.left?`${o.left}px`:void 0,width:o.width?`${o.width}px`:void 0,transform:o.top?`translate3d(0, ${o.top}px, 0)`:void 0,color:e})}));return f({state:o,getRect:(t,e)=>{const s=m(a);return o.rect.height=s.height,t===window||t===document.body?o.rect.top=s.top+y():o.rect.top=s.top+A(t)-e.top,o.rect}}),()=>{const s=l();return h("div",{ref:a,style:{height:s?`${o.rect.height}px`:void 0}},[h("div",{style:r.value,class:[U({sticky:s}),{[I]:s}]},[e.default?e.default():t.index])])}}})),D=L(K),[Q,W]=t("swipe-cell");const X=L(e({name:Q,props:{name:R(""),disabled:Boolean,leftWidth:g,rightWidth:g,beforeClose:Function,stopPropagation:Boolean},emits:["open","close","click"],setup(t,{emit:e,slots:a}){let i,c,d;const p=s(),u=s(),g=s(),v=b({offset:0,dragging:!1}),w=o(),A=t=>t.value?m(t).width:0,x=n((()=>l(t.leftWidth)?+t.leftWidth:A(u))),C=n((()=>l(t.rightWidth)?+t.rightWidth:A(g))),y=s=>{v.offset="left"===s?x.value:-C.value,i||(i=!0,e("open",{name:t.name,position:s}))},z=s=>{v.offset=0,i&&(i=!1,e("close",{name:t.name,position:s}))},N=e=>{t.disabled||(d=v.offset,w.start(e))},S=()=>{v.dragging&&(v.dragging=!1,(t=>{const e=Math.abs(v.offset),s=i?.85:.15,o="left"===t?x.value:C.value;o&&e>o*s?y(t):z(t)})(v.offset>0?"left":"right"),setTimeout((()=>{c=!1}),0))},I=(s="outside")=>{e("click",s),i&&!c&&E(t.beforeClose,{args:[{name:t.name,position:s}],done:()=>z(s)})},L=(t,e)=>s=>{e&&s.stopPropagation(),I(t)},R=(t,e)=>{const s=a[t];if(s)return h("div",{ref:e,class:W(t),onClick:L(t,!0)},[s()])};return f({open:y,close:z}),M(p,(()=>I("outside")),{eventName:"touchstart"}),r("touchmove",(e=>{if(t.disabled)return;const{deltaX:s}=w;if(w.move(e),w.isHorizontal()){c=!0,v.dragging=!0;(!i||s.value*d<0)&&k(e,t.stopPropagation),v.offset=V(s.value+d,-C.value,x.value)}}),{target:p}),()=>{var t;const e={transform:`translate3d(${v.offset}px, 0, 0)`,transitionDuration:v.dragging?"0s":".6s"};return h("div",{ref:p,class:W(),onClick:L("cell",c),onTouchstartPassive:N,onTouchend:S,onTouchcancel:S},[h("div",{class:W("wrapper"),style:e},[R("left",u),null==(t=a.default)?void 0:t.call(a),R("right",g)])])}}}));var H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAZlBMVEUAAAC0wNC1wdO/v/+zwNC0v9C0wM+0wNG2wdLCydm0wNC0wNC1wdCzwNC0wNC0wNC1wNC1v9G2wdS0wM+0wNC0wNCzwdG0wdCzwc+1wNK4wta6xtO1wdGzwNC0wc+1v9WzwdCzv89PygQeAAAAIXRSTlMA/DQE896qhEQLjvjX0cC5iUwk7Oamb2ZbKxkVf8d7GIfl18UPAAABK0lEQVRIx+1V25aDIAwkiEVUvNXe7G3z/z+5pKeHs2fJyqav7byIwwxJBKL64DUUi9ZL8V+1ti1gALRWqzwqjwBIoKevMvJ7j6SOAOzvq9nM8NQFPIezXkmngYewrA/jeKhLfLw2f6Y1GSB5p2PADokxE693LdB6x5/csSGudazhgrSa/lUVRcULpz8bMlRJXWQwZ8Yw0IxNeUvrDIyhDPzWMaVtAbFM+RMtZBUDS6FPCb3HAM3uJs3sE7oGRKNYGESoE3YXM2Wr2yVsHwxX3nANhl4cQVyD+CuJ90G407PwLOGX+LQK74MV3jjvRHcaYZJ0DcKmkPSldceSdL4yxsj2VpL7sdhER7Z7+5rKj47c/2FyNEoceUTHTckc0CmRA3BQEsetG5x6Z3wDxtkpoVPsMuQAAAAASUVORK5CYII=";export{j as I,X as S,D as a,H as b};

import{i as e,z as a,N as s,l,m as o,s as t,B as r,t as u,C as d,L as i,F as n,H as c,Z as p,r as v,k as h,M as m,x as f,p as g,U as y,E as k,G as I,a5 as C,a6 as L,$ as P,n as b,ac as w,R as V,aa as _,P as x,A as S,_ as j}from"./vendor-86ac9d42.js";import{e as U,Z as q}from"./empty-47f3c14f.js";import{_ as O,W as N,X as $,Z as B,$ as D,a0 as F}from"./index-0db00022.js";import{u as T,P as A}from"./index-50612932.js";import{P as Z}from"./index-fd582d98.js";import{q as z}from"./proposalList-a61089ff.js";import"./index-608a52a9.js";import"./trial-4bcd5b24.js";import"./useDicData-9109b518.js";import"./trial-cce58dca.js";const R={class:"com-product-item"},W={class:"content-wrap"},E={class:"product-image"},G={class:"insure-name"},H={class:"product-info"},M={class:"title"},X={class:"description"},J={class:"tags"};var K=O(e({props:{productInfo:{default:()=>({})}},setup(e){const v=e,{productInfo:h}=a(v),m=s({checked:!1});return a(m),(e,a)=>{const s=l("van-image");return o(),t("div",R,[r("div",W,[r("div",E,[u(s,{src:d(h).fileUrl},null,8,["src"]),r("p",G,i(d(h).insurerName),1)]),r("div",H,[r("p",M,i(d(h).title),1),r("p",X,i(d(h).text),1),r("p",J,[(o(!0),t(n,null,c(d(h).tags,((e,a)=>(o(),t("span",{key:a,class:"tag"},i(e),1)))),128))])]),p(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-a61e69d6"]]);const Q=e=>(C("data-v-397146ec"),e=e(),L(),e),Y={class:"com-tab-filter"},ee={class:"article-mid"},ae={class:"article-tag"},se=["onClick"],le={class:"trianele-out"},oe=Q((()=>r("span",null,null,-1))),te={class:"popup-inner"},re=Q((()=>r("div",{class:"popup-title"},"保险公司",-1))),ue={class:"footer-button"},de=I("重置"),ie=I("确定");var ne=O(e({props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(e,{emit:p}){const{isPopShow:I,openPop:C,closePop:L}=N(!1),P=s({insureList:[],checkedInsure:[]}),{insureList:b,checkedInsure:w}=a(P),V=v(""),_=()=>{w.value=[]},x=()=>{p("onSelectInsure",{selectInsureCode:w.value,selectCategory:V.value}),L()};return h((()=>{$().then((e=>{const{code:a,data:s}=e;"10000"===a&&(b.value=null==s?void 0:s.map((e=>({label:e.abbreviation,value:e.insurerCode}))))}))})),(a,s)=>{const v=l("van-button"),h=l("van-popup");return o(),t("div",Y,[r("div",ee,[r("div",ae,[(o(!0),t(n,null,c(d(B),((e,a)=>(o(),t("div",{key:a,class:m(["tag-item",{checked:V.value==e.value}]),onClick:a=>((e,a)=>{V.value=a,p("onSelectInsure",{selectInsureCode:w.value,selectCategory:V.value})})(null==e||e.value,e.value)},[r("div",{class:m(["tag-out",{checked:V.value==e.value}])},[r("div",{class:m(["tag-item-text",{checked:V.value==e.value}])},i(e.label),3)],2),r("div",le,[r("div",{class:m({triangle:V.value==e.value})},null,2)])],10,se)))),128))]),e.filter?(o(),t("div",{key:0,class:"filter",onClick:s[0]||(s[0]=(...e)=>d(C)&&d(C)(...e))},[oe,r("div",{class:m(["text",{"has-select-condition":d(w).length>0}])},"筛选",2),u(D,{name:"filter"})])):f("",!0),u(h,{show:d(I),position:"right","close-on-click-overlay":"",style:k(e.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:d(L)},{default:g((()=>[r("div",te,[re,u(F,{modelValue:d(w),"onUpdate:modelValue":s[1]||(s[1]=e=>y(w)?w.value=e:null),options:d(b)},null,8,["modelValue","options"])]),r("div",ue,[u(v,{plain:"",type:"primary",onClick:_},{default:g((()=>[de])),_:1}),u(v,{type:"primary",onClick:x},{default:g((()=>[ie])),_:1})])])),_:1},8,["show","style","onClickOverlay"])])])}}}),[["__scopeId","data-v-397146ec"]]);const ce={class:"com-trial-product-wrapper"},pe={class:"container"},ve=(e=>(C("data-v-1cf5306a"),e=e(),L(),e))((()=>r("span",{class:"title"}," 已选产品 ",-1))),he={class:"popup-body"},me={class:"cell-title"},fe={class:"title"};var ge=O(e({props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(e,{emit:a}){const s=e,d=v([]),p=v([]),h=v({isShow:s.isShow}),m=()=>{a("close")},f=()=>{p.value=[],a("checked",[])},y=e=>{var s,l,o;null==(o=null==(l=null==(s=null==d?void 0:d.value)?void 0:s[e])?void 0:l.toggle)||o.call(l),a("checked",p.value)};return P((()=>s.isShow),(e=>{h.value.isShow=e})),P((()=>s.modalValue),((e=[])=>{p.value=e}),{deep:!0,immediate:!0}),(a,s)=>{const v=l("van-checkbox"),k=l("VanCell"),I=l("van-cell-group"),C=l("van-checkbox-group"),L=l("VanPopup");return o(),t("div",ce,[u(L,{show:h.value.isShow,"onUpdate:show":s[1]||(s[1]=e=>h.value.isShow=e),position:"bottom",onClose:m},{default:g((()=>[r("div",pe,[r("div",{class:"popup-header"},[r("span",{class:"clear-all",onClick:f}," 清空选项 "),ve,r("span",{class:"close",onClick:m})]),r("div",he,[u(C,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=e=>p.value=e)},{default:g((()=>[u(I,{inset:""},{default:g((()=>[(o(!0),t(n,null,c(e.proposalList,(e=>(o(),b(k,{key:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:e.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:a=>y(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":g((()=>[u(v,{ref_for:!0,ref:a=>d.value[e.proposalInsuredList[0].proposalInsuredProductList[0].productId]=a,shape:"square",name:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:w((a=>y(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)),["stop"])},null,8,["name","onClick"])])),title:g((()=>[r("div",me,[r("div",fe,i(e.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-1cf5306a"]]);const ye=e=>(C("data-v-4a6b9c72"),e=e(),L(),e),ke={class:"search-wrap"},Ie={class:"page-proposal-list"},Ce={class:"check-button"},Le={key:1,class:"van-sticky"},Pe={class:"add-plan"},be=I(" 已选"),we={class:"has-select-product"},Ve=I("款产品 "),_e=ye((()=>r("span",{class:"icon"},null,-1))),xe=I("添加计划书");var Se=O(e({props:{isCreateProposal:{type:Boolean,default:!0}},setup(e){const p=s({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0}),{searchValue:h,tagLists:m,isOpen:k,loading:I,finished:C,refreshing:L,productList:P,selectProduct:w,insurerCodeList:O,showCategory:N,productTotal:$,showFooter:B}=a(p),[D,F]=V(),[R,W]=V(),E=T(),G=_(),H=x(),{isCreateProposal:M}=H.query,X=v(M?"repeatAdd":"add"),J=()=>{z({title:h.value,insurerCodeList:O.value,showCategory:N.value,excludeProductIdList:E.$state.excludeProduct||[],pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:l}=e;"10000"===a&&(P.value=null==s?void 0:s.datas,$.value=l)}))},Q=e=>{J()},Y=e=>{const{selectInsureCode:a,selectCategory:s}=e;O.value=a,N.value=s,J()},ee=()=>{L.value&&(P.value=[],L.value=!1),J(),I.value=!1,$.value===P.value.length&&(C.value=!0)},ae=()=>{G.push({path:"historyProposalList"})},se=S((()=>{var e;const{birthday:a,gender:s}=(null==(e=E.$state.proposalInfo.proposalInsuredList)?void 0:e[0])||{};return{birthday:a,gender:s}})),le=S((()=>P.value.length>0)),oe=e=>{p.selectProduct=e},te=()=>{const e=p.proposalList.filter((e=>p.selectProduct.includes(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)));E.setTrialData(e),G.push({path:"/proposal/createProposal"})},re=()=>{F(!1)},ue=e=>{if(M)return p.proposalList.push(e),B.value=!0,p.selectProduct.push(e.proposalInsuredList[0].proposalInsuredProductList[0].productId),void F(!1);E.setTrialData([e]),F(!1),G.push({path:"/proposal/createProposal",query:H.query})},de=()=>{C.value=!0,I.value=!0,ee()};return(e,a)=>{const s=l("van-search"),v=l("van-checkbox"),m=l("van-checkbox-group"),V=l("van-list"),_=l("van-pull-refresh"),x=l("van-button"),S=l("ProPageWrap");return o(),t(n,null,[u(S,{class:"page-proposal"},{default:g((()=>[r("div",ke,[u(s,{modelValue:d(h),"onUpdate:modelValue":a[0]||(a[0]=e=>y(h)?h.value=e:null),placeholder:"搜索计划书",shape:"round",class:"search",onSearch:Q},null,8,["modelValue"]),d(le)?(o(),b(ne,{key:0,filter:d(k),"onUpdate:filter":a[1]||(a[1]=e=>y(k)?k.value=e:null),"filter-class":"filter-area",onOnSelectInsure:Y},null,8,["filter"])):f("",!0)]),r("div",Ie,[u(_,{modelValue:d(L),"onUpdate:modelValue":a[4]||(a[4]=e=>y(L)?L.value=e:null),onRefresh:de},{default:g((()=>[u(V,{loading:d(I),"onUpdate:loading":a[3]||(a[3]=e=>y(I)?I.value=e:null),finished:d(C),"finished-text":d(le)?"- 已经到底了哦 -":"",onLoad:ee},{default:g((()=>[(o(!0),t(n,null,c(d(P),(e=>(o(),b(K,{key:e.id,"product-info":null==e?void 0:e.showConfig,onClick:a=>{return s=e,B.value=!1,p.productId=s.productId,void F(!0);var s}},j({_:2},[d(M)?{name:"checkedProduct",fn:g((()=>[r("div",Ce,[u(m,{modelValue:d(w),"onUpdate:modelValue":a[2]||(a[2]=e=>y(w)?w.value=e:null)},{default:g((()=>[u(v,{name:e.productId,shape:"square"},null,8,["name"])])),_:2},1032,["modelValue"])])]))}:void 0]),1032,["product-info","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])]),d(le)?f("",!0):(o(),b(q,{key:0,"empty-img":d(U),title:"没有找到相关内容~","empty-class":"empty-select"},null,8,["empty-img"])),d(M)&&d(B)?(o(),t("div",Le,[r("div",Pe,[r("p",{class:"has-select",onClick:a[5]||(a[5]=e=>d(W)(!d(R)))},[be,r("span",we,i(d(w).length),1),Ve,_e]),u(x,{type:"primary",disabled:!d(w).length,onClick:te},{default:g((()=>[xe])),_:1},8,["disabled"])])])):f("",!0),u(ge,{modelValue:d(w),"onUpdate:modelValue":a[6]||(a[6]=e=>y(w)?w.value=e:null),"proposal-list":d(p).proposalList,"is-show":d(R),onClose:a[7]||(a[7]=e=>d(W)(!1)),onChecked:oe},null,8,["modelValue","proposal-list","is-show"]),d(D)?(o(),b(A,{key:2,"is-show":d(D),type:X.value,insured:d(se),"product-id":d(p).productId,onClose:re,onFinished:ue},null,8,["is-show","type","insured","product-id"])):f("",!0)])),_:1}),d(M)?f("",!0):(o(),b(Z,{key:0,"button-image":d("/static/assets/lishijihuashu.b3e3552e.png"),onClick:ae},null,8,["button-image"]))],64)}}}),[["__scopeId","data-v-4a6b9c72"]]);export{Se as default};

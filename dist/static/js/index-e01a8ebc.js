import{q as e,a as t,u as n,Y as o,t as u,v as a}from"./index-d66a20d8.js";import{ref as r,watch as l,defineAsyncComponent as i,computed as d,nextTick as c,onMounted as v}from"vue";import{g as s,i as p}from"./trial-0ac61dce.js";import{a as m,q as f}from"./product-d1af8bd8.js";import{_ as C}from"./index-448eed68.js";import{V as k,G as I,_ as N}from"./index-6c231abf.js";import{P as B}from"./index-c13d1d4a.js";import{u as b}from"./useAttachment-2f6cf69c.js";import{g as h}from"./utils-57fec98c.js";import{_ as j}from"./index-d27c947d.js";import{q as g}from"./createProposal-edb2e0a1.js";import{u as y}from"./useOrder-d2812e23.js";import"./pdfh5-e588f83d.js";import"./infoCollection-e6a8a0ee.js";import"./trial-b3f7bf73.js";import"./debounce-6981b306.js";import"./isObjectLike-a9798079.js";import"./cloneDeep-6abacc69.js";import"./keysIn-131bbce9.js";import"./_getTag-d5b47d26.js";import"./TrialButton-4937b12b.js";import"./index-88613e6f.js";import"./index-973d3f66.js";/* empty css              */import"./merge-e7788e50.js";import"./PayInfo-b4b67b23.js";import"./phoneVerify-a37057a4.js";import"./useDicData-b539129e.js";import"./bankCard-54e59047.js";import"./index-88f21684.js";import"./index-ceb5d62e.js";import"./box-title-70dc1627.js";import"./index-293de2c7.js";import"./echarts-6ee22673.js";import"./empty-ae586b6c.js";import"./utils-7eb757b9.js";import"./constants-7afb7c3d.js";import"./nextStep-3971c3a9.js";import"./core-15eeb464.js";import"./constant-8927d485.js";const V={class:"com-insure-limit"},S=vue.defineComponent({name:"insureLimit"}),_=vue.defineComponent({...S,props:{dataSource:{default:()=>[]}},setup(e){const t=e,n=r([]);return l((()=>t.dataSource),(()=>{var e,o;n.value=((null==(o=null==(e=t.dataSource)?void 0:e[0])?void 0:o.data)||[]).filter((e=>e.conditionValue))}),{deep:!0,immediate:!0}),(e,t)=>{const o=vue.resolveComponent("ProCell");return vue.openBlock(),vue.createElementBlock("div",V,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(n),((e,t)=>(vue.openBlock(),vue.createBlock(o,{key:t,title:e.conditionName,content:e.conditionValue},null,8,["title","content"])))),128))])}}});const O={class:"product-desc-wrap"},x={class:"product-name"},E={class:"product-desc"},L=vue.defineComponent({name:"productDesc"}),w=vue.defineComponent({...L,props:{dataSource:{default:()=>({})}},setup:e=>(e,t)=>(vue.openBlock(),vue.createElementBlock("div",O,[vue.createElementVNode("div",x,vue.toDisplayString(e.dataSource.title),1),vue.createElementVNode("p",E,vue.toDisplayString(e.dataSource.productDesc),1)]))});const T={key:0},P={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},F={class:"info"},A={key:1,class:"preview-placeholder"},R=vue.createElementVNode("br",null,null,-1),D=vue.createElementVNode("div",{id:"insureButton"},null,-1),U=vue.createElementVNode("div",{id:"xinaoDialog"},null,-1),q=vue.defineComponent({name:"InsuranceLong"}),G=vue.defineComponent({...q,setup(V){const S=i((()=>e((()=>import("./index-4bd92c7d.js")),["static/js/index-4bd92c7d.js","static/css/index-fa4edf2a.css","static/js/index-d66a20d8.js","static/css/index-5064de6f.css","static/js/pdfh5-e588f83d.js","static/js/theme-65292714.js","static/js/index-88613e6f.js","static/css/index-827a8544.css","static/js/utils-57fec98c.js","static/js/infoCollection-e6a8a0ee.js","static/js/trial-b3f7bf73.js"]))),O=i((()=>e((()=>import("./index-da70ba18.js")),["static/js/index-da70ba18.js","static/css/index-eabeb59f.css","static/js/index-d66a20d8.js","static/css/index-5064de6f.css","static/js/pdfh5-e588f83d.js"]))),x=i((()=>e((()=>import("./index-37ac1006.js")),["static/js/index-37ac1006.js","static/css/index-4640d9aa.css"])));t();const E=n(),{productCode:L="",tenantId:q,agentCode:G="",agencyCode:M,saleChannelId:z,proposalId:Y,extraInfo:J,orderNo:Q,insurerCode:W,preview:X,trialPreview:$}=E.query;let H={};try{console.log("extInfo",decodeURIComponent(J)),H=JSON.parse(decodeURIComponent(J))}catch(xe){}r();const K=r(),Z=r(),ee=r(!1),te=r({}),ne=r({}),oe=r(!1),ue=r(0),ae=r(!1);r({});const re=r(!0);r(!0);const le=r(!0),ie=r(""),de=r({}),ce=r({}),ve=r([]),se=r({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),pe=r({});d((()=>!!X||!!$));const me=d((()=>!!$)),fe=r(),Ce=()=>{fe.value.open()},ke=r([]),Ie=r(),Ne=r(),Be=y(),be=r(!1),he=async()=>{!me.value&&m({productCode:L,tenantId:q}).then((({data:e,code:t})=>{if("10000"===t){te.value=e;const{wxShareConfig:t,showWXShare:n,title:o,desc:u,image:r}=(null==e?void 0:e.PRODUCT_LIST)||{};n?Object.assign(se.value,{...t,imgUrl:t.image,isShare:n}):Object.assign(se.value,{title:o,desc:u,imgUrl:r,isShare:n}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&a(e.BASIC_INFO.themeType)}})),Q||Y||(be.value=!0),Q&&s({orderNo:Q,tenantId:q}).then((({code:e,data:t})=>{"10000"===e&&(t.productCode=L,Ne.value=t,be.value=!0)})),Y&&g({id:Y,tenantId:q}).then((({code:e,data:t})=>{if("10000"===e){const{holder:e,insuredList:n}=t;Ne.value=Object.assign(Be.value,{productCode:L,productName:"",renewFlag:"",holder:e,tenantId:q,insuredList:(n||[]).map((e=>({...e,productList:e.productList.filter((e=>e.productCode===L))})))}),be.value=!0}})),await p({productCode:L,isTenant:!1}).then((({data:e,code:t})=>{var n;"10000"===t&&(ee.value=!0,ae.value=!0,ne.value=e,de.value=null==(n=e.productPlanInsureVOList)?void 0:n[0],ve.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),le.value=!1,f({productCode:L}).then((({code:e,data:t})=>{var n,o,u,a;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:r}=t;Ie.value=e||[];const{basicInfo:{questionnaireType:l},questions:i,questionnaireName:d}=(null==(n=null==r?void 0:r[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};2===l&&(ke.value=[{attachmentName:d,attachmentUri:i,attachmentType:"question"}]),ke.value=[{attachmentName:d,attachmentUri:null==(o=null==i?void 0:i[0])?void 0:o.content,attachmentType:h(String(null==(u=null==i?void 0:i[0])?void 0:u.textType),null==(a=null==i?void 0:i[0])?void 0:a.content)}]}}))};l((()=>pe.value.planCode),(e=>{de.value=(ne.value.productPlanInsureVOList||[]).find((t=>t.planCode===e))}));const je=()=>{K.value.handleClickTab()("insureButton")};r(""),r(0);const{fileList:ge,mustReadFileCount:ye,popupFileList:Ve}=b(de,Ie),Se=e=>{de.value=(ne.value.productPlanInsureVOList||[]).find((t=>t.planCode===e))},_e=()=>{oe.value=!1,re.value=!0},Oe=()=>{oe.value=!1,re.value=!0};return l((()=>de.value),(()=>{const{planCode:e,oilPackageProductVOList:t,insureProductRiskVOList:n}=de.value;pe.value.planCode=e,ce.value=(n||[]).find((e=>e.mainRiskFlag===o.YES))}),{deep:!0,immediate:!0}),c((()=>{u(Z,(([{isIntersecting:e}],t)=>{ee.value=!0}))})),v((()=>{le.value=!0,he(),setTimeout((async()=>{ie.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{var n,o,u,a,r,l,i,d,c,v,s,p,m,f,b,h,g,y,V,E;const L=vue.resolveComponent("ProNavigator"),G=vue.resolveComponent("ProLazyComponent");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.unref(le)?(vue.openBlock(),vue.createElementBlock("div",T)):(vue.openBlock(),vue.createElementBlock("div",P,[vue.createVNode(L),vue.unref(me)?(vue.openBlock(),vue.createElementBlock("div",A,[vue.createTextVNode("当前页面仅用于保费试算预览"),R,vue.createTextVNode("不展示其他产品相关配置信息")])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createElementVNode("div",F,[1==(null==(o=null==(n=vue.unref(te))?void 0:n.BASIC_INFO)?void 0:o.bannerType)&&(null==(a=null==(u=vue.unref(te))?void 0:u.BASIC_INFO)?void 0:a.banner.length)?(vue.openBlock(),vue.createBlock(C,{key:0,"data-skeleton-type":"img",images:null==(l=null==(r=vue.unref(te))?void 0:r.BASIC_INFO)?void 0:l.banner},null,8,["images"])):vue.createCommentVNode("",!0),2==(null==(d=null==(i=vue.unref(te))?void 0:i.BASIC_INFO)?void 0:d.bannerType)&&(null==(v=null==(c=vue.unref(te))?void 0:c.BASIC_INFO)?void 0:v.video.length)?(vue.openBlock(),vue.createBlock(k,{key:1,"data-skeleton-type":"img",src:null==(s=vue.unref(te))?void 0:s.BASIC_INFO.video[0]},null,8,["src"])):vue.createCommentVNode("",!0),(null==(f=null==(m=null==(p=vue.unref(te))?void 0:p.BASIC_INFO)?void 0:m.bannerMove)?void 0:f.length)?(vue.openBlock(),vue.createBlock(C,{key:2,url:null==(g=null==(h=null==(b=vue.unref(te))?void 0:b.BASIC_INFO)?void 0:h.bannerMove)?void 0:g[0],onClick:je},null,8,["url"])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{ref_key:"observeRef",ref:Z},null,512)]),vue.createVNode(w,{"data-source":null==(y=vue.unref(te))?void 0:y.BASIC_INFO},null,8,["data-source"]),(null==(V=vue.unref(te))?void 0:V.GUARANTEE)?(vue.openBlock(),vue.createBlock(I,{key:0,"show-service-config":"","data-source":vue.unref(te),"plan-list":vue.unref(ve),onUpdateActivePlan:Se},null,8,["data-source","plan-list"])):vue.createCommentVNode("",!0),vue.createElementVNode("div",{class:"trial-text-btn",onClick:Ce},"算一算保费"),vue.createVNode(_,{"data-source":null==(E=vue.unref(te))?void 0:E.ISSUE_CONDITION},null,8,["data-source"]),vue.createVNode(N,{ref_key:"detailScrollRef",ref:K,"data-source":vue.unref(te)},null,8,["data-source"]),vue.createVNode(G,null,{default:vue.withCtx((()=>{var e,t,n;return[(null==(e=vue.unref(te).SIGNATURE)?void 0:e.inscribedContent)?(vue.openBlock(),vue.createBlock(vue.unref(O),{key:0,"inscribed-content":null==(n=null==(t=vue.unref(te))?void 0:t.SIGNATURE)?void 0:n.inscribedContent},null,8,["inscribed-content"])):vue.createCommentVNode("",!0)]})),_:1}),vue.createVNode(G,null,{default:vue.withCtx((()=>{var e;return[(null==(e=vue.unref(ge))?void 0:e.length)?(vue.openBlock(),vue.createBlock(vue.unref(x),{key:0,"attachment-list":vue.unref(ge),"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{ue.value=e,oe.value=!0})(e))},null,8,["attachment-list"])):vue.createCommentVNode("",!0)]})),_:1})],64)),vue.unref(ee)&&vue.unref(be)?(vue.openBlock(),vue.createBlock(j,{key:2,ref_key:"trialRef",ref:fe,"data-source":vue.unref(de),"share-info":vue.unref(se),"is-share":vue.unref(se).isShare,"product-info":{productCode:vue.unref(ne).productCode,productName:vue.unref(ne).productName,productId:"",tenantId:vue.unref(q),insurerCode:vue.unref(W),planList:vue.unref(ne).productPlanInsureVOList},"default-data":vue.unref(Ne)?[vue.unref(Ne)]:null,"current-order-detail":vue.unref(Ne),"tenant-product-detail":vue.unref(te),"hide-benefit":1!==vue.unref(ne).openFlag},null,8,["data-source","share-info","is-share","product-info","default-data","current-order-detail","tenant-product-detail","hide-benefit"])):vue.createCommentVNode("",!0),D])),vue.unref(ae)&&!vue.unref(me)?(vue.openBlock(),vue.createBlock(B,{key:2,"product-detail":vue.unref(te)},null,8,["product-detail"])):vue.createCommentVNode("",!0),U,vue.unref(oe)?(vue.openBlock(),vue.createBlock(vue.unref(S),{key:3,show:vue.unref(oe),"onUpdate:show":t[1]||(t[1]=e=>vue.isRef(oe)?oe.value=e:null),"content-list":vue.unref(re)?vue.unref(ge):vue.unref(Ve),"is-only-view":vue.unref(re),"active-index":vue.unref(ue),text:vue.unref(re)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":vue.unref(re)?0:vue.unref(ye),onSubmit:_e,onOnCloseFilePreviewByMask:Oe},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):vue.createCommentVNode("",!0)],64)}}});export{G as default};

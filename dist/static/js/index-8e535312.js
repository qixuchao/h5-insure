var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var R=(e,t,a)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,S=(e,t)=>{for(var a in t||(t={}))ae.call(t,a)&&R(e,a,t[a]);if(V)for(var a of V(t))oe.call(t,a)&&R(e,a,t[a]);return e},q=(e,t)=>ee(e,te(t));import{g as E,j as b,n as H,z as o,J as T,A as w,t as se,a4 as ne,a5 as re,O as le,E as _,h as ie,r as O,k as ue,m as A,p as m,T as M}from"./vendor-667a94d7.js";import{S as de}from"./infoCollection-242da9b6.js";import{_ as k}from"./index-aaaeb354.js";import{c as ce}from"./close-df102554.js";import{a as pe}from"./order-b675ac95.js";import{i as _e,a as me,s as ve,e as fe,E as he}from"./trial-b82e060b.js";import{g as Ie,t as De,a as ge,c as ye,d as Ce,e as j}from"./theme-a2ceff24.js";import{p as xe}from"./product-de7477cb.js";import"./trial-a34b2702.js";const Se={class:"com-field-info"},Oe={class:"title"},we={class:"desc"},Ee=E({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(e){return(t,a)=>(b(),H("div",Se,[o("div",Oe,T(e.title),1),o("div",we,T(e.desc),1)]))}});var g=k(Ee,[["__scopeId","data-v-74e2bdf6"]]);const J=e=>(ne("data-v-303bee62"),e=e(),re(),e),be={key:0,class:"pro-modal"},ke=J(()=>o("div",{class:"pro-overlay"},null,-1)),Be={class:"pro-modal-wrapper"},Fe=J(()=>o("div",{class:"pro-modal-content"},[o("p",null,"\u606D\u559C\u60A8"),o("p",null,"\u4FDD\u969C\u5347\u7EA7\u6210\u529F")],-1)),Pe=["src"],$e=E({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(e,{emit:t}){const a=e,d=()=>{t("on-close")};return(B,F)=>a.isShow?(b(),H("div",be,[ke,o("div",Be,[o("div",{class:"pro-modal-body"},[Fe,o("div",{class:"pro-modal-btn",onClick:d},"\u6211\u77E5\u9053\u4E86")]),o("div",{class:"pro-modal-close",onClick:d},[o("img",{src:w(ce)},null,8,Pe)])])])):se("",!0)}});var Le=k($e,[["__scopeId","data-v-303bee62"]]);const Ue={class:"page-activity-upgrade"},Ne=["src"],Ve={class:"container"},Re={class:"main-form"},qe=E({setup(e){const t=le(),{productCode:a="BWYL2022",tenantId:d,orderId:B,extInfo:F}=t.query,K=Ie(F),p=_(),D=_(),s=_(),v=_(),y=_(),C=_(),x=_(!1),Y=()=>{x.value=!1},z=async()=>{var c,u,f,h,I;const l=ge({tenantId:d,applicationNo:s.value.applicationNo,policyNo:s.value.policyNo,saleChannelId:s.value.saleChannelId,orderStatus:pe.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:p.value,paymentMethod:(u=(c=s.value.extInfo)==null?void 0:c.extraInfo)==null?void 0:u.paymentMethod,renewalDK:(h=(f=s.value.extInfo)==null?void 0:f.extraInfo)==null?void 0:h.renewalDK,successJumpUrl:"",premium:v.value,holder:s.value.tenantOrderHolder,insured:q(S({},s.value.tenantOrderInsuredList[0]),{socialFlag:s.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:ye({tenantId:d,riskList:Ce(D.value.productRiskVoList[0].riskDetailVOList,p.value),riskPremium:{},productId:(I=p.value)==null?void 0:I.id})}),n=await ve(l),{code:i,data:r}=n;return i==="10000"?r.data:""},P=async()=>{const l=j({tenantId:d,premium:v.value,orderDetail:s.value,productDetail:p.value,insureDetail:D.value}),n=await fe(l),{code:i,data:r}=n;i==="10000"&&(v.value=r.installmentPremium,C.value=r.signUrl)},G=async l=>{const n=j({tenantId:d,premium:v.value,orderDetail:s.value,productDetail:p.value,insureDetail:D.value}),i=await he(S({id:l},n)),{code:r,data:c}=i;r==="10000"&&(x.value=!0)},W=async l=>{try{M.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"}),await P();const n=await z();C.value?window.location.href=C.value:G(n)}catch(n){console.log(n),M.clear()}},Q=()=>{const l=xe({productCode:a,withInsureInfo:!0}),n=_e({productCode:a}),i=me({id:B||K.orderId,tenantId:d});Promise.all([l,n,i]).then(([r,c,u])=>{r.code==="10000"&&(p.value=r.data),c.code==="10000"&&(D.value=c.data),u.code==="10000"&&(s.value=u.data,y.value=u.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),P()})};return ie(()=>{Q()}),(l,n)=>{const i=O("ProRadioButton"),r=O("ProField"),c=O("van-config-provider");return b(),ue(c,{"theme-vars":w(De)},{default:A(()=>{var u,f,h,I,$,L,U,N;return[o("div",Ue,[o("img",{src:(f=(u=p.value)==null?void 0:u.tenantProductInsureVO)==null?void 0:f.banner[0],class:"banner"},null,8,Ne),o("div",Ve,[o("div",Re,[m(g,{title:"\u59D3\u540D",desc:(I=(h=s.value)==null?void 0:h.tenantOrderInsuredList)==null?void 0:I[0].name},null,8,["desc"]),m(g,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(L=($=s.value)==null?void 0:$.tenantOrderInsuredList)==null?void 0:L[0].certNo},null,8,["desc"]),m(g,{title:"\u624B\u673A\u53F7\u7801",desc:(N=(U=s.value)==null?void 0:U.tenantOrderHolder)==null?void 0:N.mobile},null,8,["desc"]),m(g,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${v.value||"0"} / \u6BCF\u6708`},null,8,["desc"]),m(r,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:A(()=>[m(i,{modelValue:y.value,"onUpdate:modelValue":n[0]||(n[0]=X=>y.value=X),disabled:!0,options:w(de)},null,8,["modelValue","options"])]),_:1}),o("div",{class:"submit",onClick:W})])]),m(Le,{"is-show":x.value,onOnClose:Y},null,8,["is-show"])])]}),_:1},8,["theme-vars"])}}});var We=k(qe,[["__scopeId","data-v-e4b7f9a8"]]);export{We as default};

import{_ as a,d as e,i as s,h as t,g as l,O as o,k as r,o as n,l as d,w as c,a as u,e as i,u as p,V as v,m,ca as b,p as f,b as h,a8 as y,cb as _,cc as g,cd as I,T as j,an as C,at as k,au as q}from"./index-13a0c8c7.js";import{c as x}from"./format-b5e9d8b9.js";import{u as O}from"./useOrder-3dd61110.js";import{a as P}from"./constants-5480429b.js";const V={class:"page-phone-verify"},w=(a=>(k("data-v-1b25c50a"),a=a(),q(),a))((()=>u("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息填写",-1))),N={class:"phone"},U={class:"input-wrapper"};var T=a(e({__name:"phoneVerify",setup(a){const e=O(),k=s(""),q=s(""),T=s(0);let W;const $=t(),z=l(),{agentCode:A,tenantId:B,nextPageCode:D,orderNo:E,orderCode:F}=$.query,G=()=>{g(k.value).then((({code:a})=>{"10000"===a&&(T.value=60,W=setInterval((()=>{T.value-=1,T.value<=0&&clearInterval(W)}),1e3))}))},H=()=>{I(k.value,q.value).then((({code:a,data:e})=>{"10000"===a&&e?(j.success("验证成功"),z.push({path:P[D],query:$.query})):j.fail("验证失败")}))};return o((()=>{_({orderNo:F||E,saleUserId:A,tenantId:B}).then((({code:a,data:s})=>{var t;"10000"===a&&(Object.assign(e.value,s),k.value=null==(t=null==s?void 0:s.holder)?void 0:t.mobile)}))})),(a,e)=>{const s=C,t=r("ProPageWrap");return n(),d(t,null,{default:c((()=>[u("div",V,[w,u("div",N,i(p(x)(p(k)||"")),1),u("div",U,[v(u("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>m(q)?q.value=a:null),placeholder:"请输入验证码",class:"input"},null,512),[[b,p(q)]]),u("div",{class:f(["btn",{second:p(T)}]),onClick:G},i(p(T)?`${p(T)}s`:"发送验证码"),3)]),h(s,{type:"primary",class:"submit-btn",onClick:H},{default:c((()=>[y("下一步")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-1b25c50a"]]);export{T as default};

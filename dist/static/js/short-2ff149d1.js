import{i as e,N as t,l as n,m as a,s as i,t as r,p as s,B as l,L as o,C as c,F as u,H as d,M as m,I as p,J as g,d as v,r as f,$ as y,A as I,R as h,ag as C,x as T,n as P,G as D,a5 as k,a6 as O,Z as N,_ as b,U as w,T as V,aa as A,P as S,k as L,D as x}from"./vendor-87894311.js";import{d as U}from"./debounce-11332b2b.js";import{P as F}from"./index-2753e9c0.js";import{_ as R,e as M,i as E,a7 as B,C as q,I as _,K as Z,a1 as j}from"./index-881f6d78.js";import{u as H}from"./core-b714fabf.js";import{C as Y,k as Q,l as G,m as K,S as J,R as W,g as X}from"./infoCollection-2a6bd55e.js";import{i as $,p as z,g as ee}from"./trial-fecf4a18.js";import{p as te}from"./product-54c4302a.js";import{o as ne,r as ae,t as ie}from"./utils-69f3424a.js";import{n as re}from"./nextStep-40210eb7.js";import{u as se,t as le}from"./theme-b9409b06.js";import{B as oe}from"./index-cfd307e3.js";import{P as ce}from"./index-4ca9e3d6.js";import{L as ue}from"./loading-1c9c1d7b.js";import{u as de}from"./useDicData-333b2a5a.js";import{_ as me}from"./index-72ed6f4e.js";import"./index-e648c3c5.js";import"./useStorage-2847e8df.js";import"./trial-1ceefc83.js";import"./check-detail-c292a89b.js";import"./relativeTime-89dc646e.js";const pe={class:"customer-body"},ge={class:"header"},ve={class:"conatiner"},fe=["onClick"],ye={class:"name"};var Ie=R(e({props:{userInfo:{type:Object,default:()=>({})},relationCode:{type:String,default:"1"},title:{type:String,default:"选择投保人"}},emits:["change"],setup(e,{emit:v}){let f=[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"王大啦",certNo:"110101199003078910",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"001",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"},{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"李大霄",certNo:"110101199003070193",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"002",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"}];f=[...f,...f,...f];const y=t({loading:!1,select:f[0],list:f}),I=()=>{y.loading=!1,v("change",y.select)},h=()=>{y.loading=!1,(async()=>{y.loading=!0})()};return(t,v)=>{const f=n("ProSvg"),C=n("van-icon"),T=n("ProPopup");return a(),i(u,null,[r(f,{name:"customer",onClick:h}),r(T,{class:"customer-list",style:{height:"416px"},show:c(y).loading,closeable:!1},{default:s((()=>[l("div",pe,[l("div",ge,[l("span",null,o(e.title),1),r(C,{name:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAuRJREFUeF7t3DtOI0EQBuDfEtImXAdyNoIEAffYkIALrFZaMu4BiAQiyOE6myARoJI8kteyx/3469FWTTxT3fVNdY/dY/cCeVAFFtRoGQwJSi6CBE1QsgA5XFZogpIFyOGyQhOULEAOlxWaoGQBcris0CCglwB+ATgEcA/gFsAXuW/W4Q4AXAOQ3P4BuAPwUNuJlgqVBgVx9XheduSztgNBzv+xxDtb689VLWoL6CuAkw0Qo6Juw5QU3wD8rLnpLaDvAI62NDIa6hympPgB4Fgb9AbA75lGRkHdhSkpSq5/tEFl8n4CsD7fjDSnlmBKYZzXPmxbhrzAlXZIHmDRHlSqfW8FHRVVFVNQekBHQ1XHZICOgmqCyQKNjmqGyQSNimqKyQaNhmqOqQEaBdUFUwvUG9UNUxPUC9UVUxvUGtUd0wLUCjUEphWoNmoYTEtQLdRQmNagbNRwmB6gLNSQmF6gvahhMT1BW1FDY3qD1qLK+fKePPSrl94FZkmy9yipupdlI6czjYV4ORgBtLRS525cCMwIQ34VqaRSN6GGwYwG2lKpoTAjgk6ojwDm5ks5T+bVi2ivqaPMoetDP0F7H/XL62vn0RzyM/C1mFOoUKhRhnwrZjjUCKAlmPnBvnBOLcGchnR+9dyBWoM5/YKv5ZrCe8s5zWvI98D0XMtRm4niAcoAYcRQwbUGZUIwY9FwLUE1ADRiduFagWomrhm7GtcC1CJhizaKcLVBLRO1bGsrriaoR4Iebf6HqwXqmZhn293/AtlU+q4JVSwDqqxSsSs0AuZ0k136wgR1SUBhvaDoab7tJBZoREyXSmWARsY0R+0FHQHTFLUHdCRMM9RW0BExTVBbQHMDAvICc26RQQbNTVzIoLnNEBk0N8Iig0q41a3a5Gfaf2t3j+n6fqdzsdtWbTrp7EnUlo9Ne5K6ThoJSnZN0AQlC5DDZYUmKFmAHC4rNEHJAuRwWaEJShYgh8sKJYN+A6+yQmSPqqjtAAAAAElFTkSuQmCC"),onClick:v[0]||(v[0]=e=>c(y).loading=!1)},null,8,["name"])]),l("div",ve,[(a(!0),i(u,null,d(c(y).list,(e=>(a(),i("div",{key:e.customerId,class:m({item:!0,active:c(y).select.customerId===e.customerId}),onClick:t=>c(y).select=e},[l("span",ye,o(e.cert[0].certName),1),l("span",null,o(e.cert[0].certNo),1),p(r(C,{class:"check-icon",name:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAn9JREFUSEvtlktIVFEcxn/XXpM6Mz5zVBzR8oFUVARRUljhItKNhZC0qVYhZjMMFIG0aFUUtijKB0GEBL02WmZqRjlbFyWSYQ+EynKyh5baNHPi3hsNtzuj89Bp44G7Oec732/u//y/c0cSQgj+w5AWwNGqevRK/eMLXD0AAx2wu47ogD8OwcVyGHmuFnSJIQrgwR5o2Avfx3ynuL5insFPmuB6NXjcPmjhDqhunSew1wO3HNB9Xtur+SVQ0wZL4+YBPPkVmvdBf7sWmrcVau7Bsnhlfm6ba/SV2kTvB7TQlcVwpB0Mxr/zkvj8VigtvqYMjKnhx/jFY2jYAxMurUfuZqi9DwaTZl4SdQWCD4NgssChFpAPP9ThvAIth8HzU7szZxPUdsBys85REsetgrFhdUGKUcKtPDGLZsfLTXTnGHSe02uzN8LRTohN8OsjiSGnoH4nuKd8goLt6tub0wPDp8ahuQqetek11g1g64LYxID71ebquw2NlSC8PqExDQ5eg6JS/WbXG7WJ3vXr17LWga0b4pJmrJivq+XM3bBpxXLpd52A8pMQs1hdG+qFyxUwPqo3zlwL9m6IT5n1mLRxummDrn9CL1vkbYP9jSpUvol+TeuNM1aD/WHQydCCvV5oqkQpfSgjvUiFmtKC3qW/QNyTUF8KL53BmVgKwd4DZktw+j8q/zfXxCc4U4yS75nGinxwyNCMkKBKcgP+53K9htNb4NuIf9PUVeB4BAmZIUNnBsurw31wtgSmx7XmKbkqNDErLOjsYFkx8AAulPm+qck5KjTJGjY0OLCsetoKd0+p+ay6BMnZEUGDB0eM0RvM7fc4hB+4AA6hWJFJfwMaXAhFHVsobQAAAABJRU5ErkJggg==")},null,8,["name"]),[[g,c(y).select.customerId===e.customerId]])],10,fe)))),128))]),r(F,{shadow:!1,text:"确定",onClick:I})])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-71e988c8"]]);const he=(e,t="YYYY-MM-DD")=>v(e).format(t),Ce=(e,t=0,n="day",a="YYYY-MM-DD")=>v(e).add(t,n).format(a);const Te={class:"guarantee-list"},Pe=(e=>(k("data-v-2da31e52"),e=e(),O(),e))((()=>l("span",null,"保障计划",-1))),De={key:0,class:"picture-payment-content"},ke=["onClick"],Oe=["src"],Ne=["src"],be={key:1,class:"plan-list"},we=["onClick"],Ve={key:2,class:"feerate-view"},Ae={class:"guarantee-detail"},Se={key:0,class:"plan-list"},Le=["onClick"],xe={key:1},Ue={class:"extinfo-info-list"},Fe={class:"content"};var Re=R(e({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1}},emits:["update-active-plan"],setup(e,{emit:t}){var g;const v=e,k=f(null==(g=v.dataSource)?void 0:g.planList),O=f(v.activePlanCode);y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e;v.isMultiplePlan&&(k.value=null==(e=v.dataSource)?void 0:e.planList)}),{immediate:!0});const N=f([]),b=f([]),w=f(),V=I((()=>v.isMultiplePlan?v.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e,t,n,a;if(O.value=v.activePlanCode,v.isMultiplePlan){if(k.value&&k.value.length>0){let e=0;const t=k.value.findIndex((e=>e.planCode===O.value));t>-1&&(e=t),N.value=k.value[e].guaranteeItemVOS,b.value=k.value[e].extInfoVOList,w.value=null==(a=k.value[e])?void 0:a.productPremiumVOList[0]}}else N.value=null==(e=v.dataSource)?void 0:e.planInsureVO.guaranteeItemVOS,b.value=null==(t=v.dataSource)?void 0:t.planInsureVO.extInfoVOList,w.value=null==(n=v.dataSource)?void 0:n.planInsureVO.productPremiumVOList[0]}),{immediate:!0,deep:!0});const A=I((()=>{var e;return(null==(e=v.dataSource)?void 0:e.rateUri)||""})),S=I((()=>!!(w.value&&w.value.paymentFrequencyValue&&w.value.premiumUnit&&A))),[L,x]=h(!1),U=I((()=>{var e;return!(!N.value||!(null==(e=N.value)?void 0:e.length))&&(N.value.length>v.count&&(!!v.isShowClose||!L.value))})),F=()=>{x()},R=I((()=>{var e;return N.value&&(null==(e=N.value)?void 0:e.length)?N.value.length<=v.count||L.value?N.value:N.value.slice(0,v.count):[]})),B=e=>{O.value=e,t("update-active-plan",e)},q=f(!1),_=()=>{q.value=!0},Z=()=>{ne({fileType:"pdf",feeFileUri:A.value})};return(t,g)=>{var v,f;const y=n("ProCell"),I=n("ProPopup"),h=C("dompurify-html");return a(),i(u,null,[l("div",Te,[l("div",{class:"header"},[Pe,l("span",{onClick:_},"查看详情")]),e.isMultiplePlan?(a(),i(u,{key:0},[c(V).length>0?(a(),i("div",De,[(a(!0),i(u,null,d(c(V),(e=>(a(),i("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>B(e.planCode)},[O.value==e.planCode?(a(),i("img",{key:0,src:e.selectedPic},null,8,Oe)):(a(),i("img",{key:1,src:e.unSelectedPic},null,8,Ne))],8,ke)))),128))])):(a(),i("div",be,[(a(!0),i(u,null,d(k.value,((e,t)=>(a(),i("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===O.value?"plan-list-item-active":"")),onClick:t=>B(e.planCode)},[l("span",null,o(e.planName),1)],10,we)))),128))]))],64)):T("",!0),(a(!0),i(u,null,d(c(R),((e,t)=>(a(),P(y,{key:t,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),c(U)?(a(),i("div",{key:1,class:"show-more",onClick:F},[D(o(c(L)?"收起":"查看更多")+" ",1),r(M,{name:"down",class:m(["icon",{showMore:c(L)}])},null,8,["class"])])):T("",!0),c(S)?(a(),i("div",Ve,[l("span",null,o(`${(null==(v=w.value)?void 0:v.paymentFrequencyValue)||""}${(null==(f=w.value)?void 0:f.premiumUnit)||""}`),1),c(A)?(a(),i("span",{key:0,onClick:Z},"查看保费")):T("",!0)])):T("",!0)]),r(E),r(I,{show:q.value,"onUpdate:show":g[0]||(g[0]=e=>q.value=e),title:"保障详情",class:"guarantee-popup"},{default:s((()=>[l("div",Ae,[e.isMultiplePlan?(a(),i("div",Se,[(a(!0),i(u,null,d(k.value,((e,t)=>(a(),i("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===O.value?"plan-list-item-active":"")),onClick:t=>B(e.planCode)},[l("span",null,o(e.planName),1)],10,Le)))),128))])):T("",!0),b.value&&b.value.length>0?(a(),i("div",xe,[l("div",Ue,[(a(!0),i(u,null,d(b.value,((e,t)=>(a(),P(y,{key:t,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),r(E)])):T("",!0),(a(!0),i(u,null,d(N.value,((e,t)=>(a(),i("div",{key:t,class:"guarantee-item"},[r(y,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),p(l("div",Fe,null,512),[[h,e.content]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-2da31e52"]]);const Me={class:"com-custom-card"},Ee={class:"title"};var Be=R(e({props:{title:{type:String,required:!0}},setup:e=>(t,n)=>(a(),i("div",Me,[l("div",Ee,o(e.title),1),l("div",null,[N(t.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-059c21ee"]]);const qe={class:"question"},_e={class:"title"};var Ze=R(e({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup:e=>(t,i)=>{const c=n("ProSvg"),u=n("van-collapse-item");return a(),P(u,{name:e.name,class:"com-question-item"},{title:s((()=>[l("div",qe,[r(c,{name:"question"}),l("div",_e,o(e.question),1)])])),default:s((()=>[D(" "+o(e.answer),1)])),_:1},8,["name"])}}),[["__scopeId","data-v-0d7ea124"]]);const je={class:"com-question"};var He=R(e({props:{list:{type:Array,default:()=>[]}},setup(e){const t=e,[l,p]=h(!1),g=f([]),v=()=>{p()},y=I((()=>t.list.length<=4||l.value?t.list:t.list.slice(0,4)));return(t,p)=>{const f=n("van-collapse");return a(),i("div",je,[r(f,{modelValue:g.value,"onUpdate:modelValue":p[0]||(p[0]=e=>g.value=e)},{default:s((()=>[(a(!0),i(u,null,d(c(y),((e,t)=>(a(),P(Ze,{key:t,name:t.toString(),question:e.title,answer:e.desc},null,8,["name","question","answer"])))),128))])),_:1},8,["modelValue"]),e.list.length>4?(a(),i("div",{key:0,class:"show-more",onClick:v},[D(o(c(l)?"收起":"展开")+" ",1),r(M,{name:"down",class:m(["icon",{showMore:c(l)}])},null,8,["class"])])):T("",!0)])}}}),[["__scopeId","data-v-1b7e97e9"]]);const Ye={class:"spec"},Qe=["src"],Ge={key:1,class:"spec"},Ke=["src"];var Je=R(e({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:t}){const n=e,o=f(),m=f([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),p=I((()=>{var e,t,a,i;return(null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)&&(null==(i=null==(a=n.detail)?void 0:a.tenantProductInsureVO)?void 0:i.spec.length)>0})),g=I((()=>{var e,t,a,i,r,s,l,o,c,u,d,m,p,g;const v=null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType;return!!(v===Y.WORD&&(null==(r=null==(i=null==(a=n.detail)?void 0:a.tenantProductInsureVO)?void 0:i.settlementProcessVO)?void 0:r.settlementProcessList)&&(null==(o=null==(l=null==(s=n.detail)?void 0:s.tenantProductInsureVO)?void 0:l.settlementProcessVO)?void 0:o.settlementProcessList.length)>0||v===Y.IMAGE&&(null==(d=null==(u=null==(c=n.detail)?void 0:c.tenantProductInsureVO)?void 0:u.settlementProcessVO)?void 0:d.settlementProcessPicList)&&(null==(g=null==(p=null==(m=n.detail)?void 0:m.tenantProductInsureVO)?void 0:p.settlementProcessVO)?void 0:g.settlementProcessPicList.length)>0)})),v=I((()=>{var e,t,a,i;return(null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList)&&(null==(i=null==(a=n.detail)?void 0:a.tenantProductInsureVO)?void 0:i.questionList.length)>0})),y=I((()=>{let e=[...m.value];return p.value||(e=e.filter((e=>"tab1"!==e.slotName))),g.value||v.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return t({handleClickTab:()=>{var e;return null==(e=o.value)?void 0:e.handleClickTab}}),(e,t)=>(a(),P(B,{ref_key:"scrollRef",ref:o,class:"tabs",list:c(y),sticky:"",scrollspy:""},b({tab3:s((()=>[N(e.$slots,"form",{},void 0,!0)])),_:2},[c(p)?{name:"tab1",fn:s((()=>{var e,t;return[l("div",Ye,[(a(!0),i(u,null,d((null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)||[],((e,t)=>(a(),i("img",{key:t,src:e,class:"detail-img"},null,8,Qe)))),128)),r(E)])]}))}:void 0,c(g)||c(v)?{name:"tab2",fn:s((()=>{var e,t,l,o,m;return[c(g)?(a(),i(u,{key:0},[(null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType)===c(Y).WORD?(a(),P(Be,{key:0,title:"理赔流程"},{default:s((()=>{var e,t,a;return[r(ce,{list:null==(a=null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO)?void 0:a.settlementProcessList},null,8,["list"])]})),_:1})):(a(),i("div",Ge,[(a(!0),i(u,null,d((null==(m=null==(o=null==(l=n.detail)?void 0:l.tenantProductInsureVO)?void 0:o.settlementProcessVO)?void 0:m.settlementProcessPicList)||[],((e,t)=>(a(),i("img",{key:t,src:e,class:"detail-img"},null,8,Ke)))),128))])),r(E)],64)):T("",!0),c(v)?(a(),i(u,{key:1},[r(Be,{title:"常见问题"},{default:s((()=>{var e,t;return[r(He,{list:null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList},null,8,["list"])]})),_:1}),r(E)],64)):T("",!0)]}))}:void 0]),1032,["list"]))}}),[["__scopeId","data-v-4383aeea"]]);const We={key:0,class:"page-waiting"},Xe=["src"],$e=(e=>(k("data-v-ead4d7ae"),e=e(),O(),e))((()=>l("div",{class:"tips"},[l("p",null,"支付成功，承保中...")],-1)));var ze=R(e({props:{isShow:{type:Boolean,default:()=>{}}},setup(e){const t=e;return y((()=>t.isShow),(e=>{document.body.style.overflow=e?"hidden":"inherit"})),(e,n)=>t.isShow?(a(),i("div",We,[l("img",{class:"loading",src:c(ue)},null,8,Xe),$e])):T("",!0)}}),[["__scopeId","data-v-ead4d7ae"]]);const et={key:0,class:"item"},tt={key:1,class:"attachment-list"},nt=["onClick"],at={class:"attachment-list-item-name"},it={class:"attachment-list-item-icon"},rt={class:"footer"},st=e({props:{show:{type:Boolean,default:!1},contentList:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},text:{type:String,default:""},beforeReadOverText:{type:String,default:"同意，下一条"},forceReadCound:{type:Number,default:0},isOnlyView:{type:Boolean,default:!1}},emits:["update:show","submit","onCloseFilePreview"],setup(e,{emit:t}){const m=e,p=se(),g=f(m.show),v=f(m.contentList.map(((e,t)=>({...e,disabled:!0,readDisabled:!0})))),h=f(m.activeIndex),C=f(0),D=f(null),k=I((()=>{var e,t;return null==(t=null==(e=v.value)?void 0:e[h.value])?void 0:t.attachmentList})),O=I((()=>{var e;return null==(e=v.value[h.value])?void 0:e.readDisabled})),N=I((()=>!(h.value>=m.forceReadCound-1)&&(!(C.value>=m.forceReadCound)&&(C.value<m.forceReadCound&&h.value!==m.forceReadCound-1)))),b=()=>{h.value+=1},w=()=>{m.isOnlyView?t("update:show",!1):(t("update:show",!1),t("submit"))};y((()=>m),(()=>{g.value=m.show,h.value=m.activeIndex}),{deep:!0,immediate:!0});const V=e=>{e&&Math.floor(e.target.scrollHeight-e.target.scrollTop)===e.target.clientHeight&&v.value[h.value].readDisabled&&(v.value[h.value].disabled=!1,v.value[h.value].readDisabled=!1,v.value[h.value+1].disabled=!1,C.value+=1)};return y((()=>h.value),(()=>{m.show&&(C.value>=m.forceReadCound&&v.value.forEach((e=>{e.disabled=!1,e.readDisabled=!1})),D.value&&(D.value.scrollTop=0))}),{immediate:!0}),(f,y)=>{const I=n("ProTab"),C=n("ProFilePreview"),A=n("ProSvg"),S=n("van-config-provider"),L=n("ProPopup");return a(),P(L,{show:g.value,"onUpdate:show":y[1]||(y[1]=e=>g.value=e),class:"file-preview-popup-wrap",closeable:!1,onClose:y[2]||(y[2]=e=>t("onCloseFilePreview"))},{default:s((()=>[r(S,{"theme-vars":c(p),class:"custom-provider"},{default:s((()=>[g.value?(a(),P(I,{key:0,active:h.value,"onUpdate:active":y[0]||(y[0]=e=>h.value=e),list:v.value.map(((e,t)=>({title:e.attachmentName,disabled:t!=h.value&&(e.disabled||!1),slotName:`guarantee-${t}`}))),class:"tab"},null,8,["active","list"])):T("",!0),l("div",{ref_key:"previewRef",ref:D,class:"list",onScroll:V},[1===c(k).length?(a(),i("div",et,[(a(),P(C,{key:c(k)[0].attachmentName,content:c(k)[0].attachmentUri,type:c(k)[0].attachmentType,"forbid-click":!0},null,8,["content","type"]))])):(a(),i("div",tt,[(a(!0),i(u,null,d(c(k),((e,t)=>(a(),i("div",{key:t,class:"attachment-list-item",onClick:t=>(e=>{const t={fileType:e.attachmentType,fileUri:e.attachmentUri};ne(t)})(e)},[l("div",at,o(e.attachmentName),1),l("div",it,[r(A,{name:"arrow-right"})])],8,nt)))),128))]))],544),l("div",rt,[c(N)?(a(),P(F,{key:0,shadow:!1,"theme-vars":c(p),disabled:c(O),class:"right",text:`${e.beforeReadOverText}(${h.value+1}/${e.forceReadCound})`,onClick:b},null,8,["theme-vars","disabled","text"])):(a(),P(F,{key:1,disabled:c(O),shadow:!1,"theme-vars":c(p),text:m.text,onClick:w},null,8,["disabled","theme-vars","text"]))])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});const lt={class:"list"},ot={class:"item"},ct={class:"footer"},ut=D("部分为是"),dt=D("全部为否"),mt=e({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth","onCloseHealth"],setup(e,{emit:t}){const i=e,o=f(i.show),u=f(i.activeIndex),d=I((()=>{var e;return null==(e=i.contentList[u.value])?void 0:e.attachmentUri})),m=f(!0),p=e=>{m.value=!1,t("update:show",!1),t("onConfirmHealth",e)};return y((()=>i),(()=>{o.value=i.show,u.value=i.activeIndex}),{deep:!0,immediate:!0}),(i,g)=>{const v=n("ProTab"),f=n("ProFilePreview"),y=n("VanButton"),I=n("van-config-provider"),h=n("ProPopup");return a(),P(h,{show:o.value,"onUpdate:show":g[3]||(g[3]=e=>o.value=e),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:g[4]||(g[4]=e=>{m.value&&t("onCloseHealth")})},{default:s((()=>[r(I,{"theme-vars":c(le),class:"custom-provider"},{default:s((()=>[o.value?(a(),P(v,{key:0,active:u.value,"onUpdate:active":g[0]||(g[0]=e=>u.value=e),list:e.contentList.map(((e,t)=>({title:e.attachmentName,slotName:`guarantee-${t}`}))),class:"tab"},null,8,["active","list"])):T("",!0),l("div",lt,[l("div",ot,[(a(),P(f,{key:c(d),content:c(d),type:"pdf"},null,8,["content"]))])]),l("div",ct,[r(y,{type:"primary",block:"",round:"",onClick:g[1]||(g[1]=e=>p("N"))},{default:s((()=>[ut])),_:1}),r(y,{type:"primary",plain:"",block:"",round:"",onClick:g[2]||(g[2]=e=>p("allFalse"))},{default:s((()=>[dt])),_:1})])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});const pt=e=>(k("data-v-04787668"),e=e(),O(),e),gt={class:"com-period-cell"},vt={key:0,class:"custom-cell check-btn-cell"},ft=pt((()=>l("div",{class:"cell-label"},"保障期间",-1))),yt={class:"cell-content"},It=pt((()=>l("div",{class:"cell-label"},"生效日期",-1))),ht={class:"cell-content"},Ct={key:2,class:"custom-cell common-cell"},Tt=pt((()=>l("div",{class:"cell-label"},"保障期限",-1))),Pt={class:"cell-content"};var Dt=R(e({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:d,emit:m}){const p=e;f({});const g=(e,t)=>"year"===e?`${t}年`:"month"===e?`${t}月`:"day"===e?`${t}日`:t,C=f(new Date),P=de("RISK_INSURANCE_PERIOD"),D=t({formInfo:p.formInfo});y((()=>D.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(C.value=new Date(e))}));const k=f(),O=f([]);y([()=>p.insureDetail,()=>D.formInfo.activePlanCode],(()=>{var e;if(D.formInfo.insurancePeriodValue="",D.formInfo.insuranceStartDate="",D.formInfo.insuranceEndDate="",D.formInfo.commencementTime="",p.insureDetail)if(p.insureDetail.productRelationPlanVOList&&p.insureDetail.productRelationPlanVOList.length>0){let t=0;const n=p.insureDetail.productRelationPlanVOList.findIndex((e=>e.planCode===D.formInfo.activePlanCode));n>-1&&(t=n);const a=((null==(e=p.insureDetail.productRelationPlanVOList[t])?void 0:e.productRiskVoList[0].riskDetailVOList)||[]).find((e=>1===e.riskType));a&&(k.value=a)}else{const e=(p.insureDetail.productRiskVoList[0].riskDetailVOList||[]).find((e=>1===e.riskType));e&&(k.value=e)}}),{deep:!0,immediate:!0}),y([()=>k.value,()=>P.value],(()=>{O.value=[],Array.isArray(P.value)&&P.value.length>1&&k.value&&(O.value=(k.value.riskInsureLimitVO.insurancePeriodValueList||[]).map((e=>{const t=P.value.find((t=>t.value===e));return t?{label:t.name,value:t.value}:null})).filter((e=>!!e))),O.value.length>0&&(D.formInfo.insurancePeriodValue=O.value[0].value)}),{deep:!0,immediate:!0});const N=I((()=>{var e,t;return(null==(e=k.value)?void 0:e.riskInsureLimitVO.guaranteeStartDate)?String(null==(t=k.value)?void 0:t.riskInsureLimitVO.guaranteeStartDate):Q.CURRENT_DAY})),[b,V]=h(!1),A=()=>{V(!0)},S=new Date(Ce(new Date,1,"day")),L=I((()=>{var e;if(N.value===Q.CUSTOM_DAY){const t=null==(e=k.value)?void 0:e.riskInsureLimitVO.maxInsuranceDay;if(!t)return new Date;const n=Ce(new Date,Number(t),"day");return new Date(n)}return new Date})),x=e=>{D.formInfo.insuranceStartDate=`${he(e)} 00:00:00`,V(!1)},U=()=>{V(!1)},F=I((()=>{}));return y([()=>N.value,()=>F.value,()=>D.formInfo.insurancePeriodValue,()=>D.formInfo.insuranceStartDate],(()=>{if(!D.formInfo.insurancePeriodValue)return;const[e,t]=D.formInfo.insurancePeriodValue.split("_");if(D.formInfo.insuranceStartDate||(N.value===Q.CUSTOM_DAY||N.value===Q.NEXT_DAY?D.formInfo.insuranceStartDate=`${Ce(new Date,1,"day")} 00:00:00`:D.formInfo.insuranceStartDate=`${he(new Date)} 00:00:00`),"to"!==e){const n=`${((e,t=0,n="day",a="YYYY-MM-DD")=>v(e).subtract(t,n).format(a))(D.formInfo.insuranceStartDate,1,"day")} 00:00:00`;D.formInfo.insuranceEndDate=`${Ce(n,Number(t),e)} 23:59:59`}else D.formInfo.tenantOrderInsuredList[0].birthday,D.formInfo.tenantOrderInsuredList[0].certType===q.CERT&&D.formInfo.tenantOrderInsuredList[0].certNo&&_(D.formInfo.tenantOrderInsuredList[0].certNo)&&Z(D.formInfo.tenantOrderInsuredList[0].certNo),"single"===t&&(D.formInfo.insuranceEndDate="9999-99-99 23:59:59"),D.formInfo.insuranceEndDate=`${Ce(D.formInfo.insuranceStartDate,Number(t)-1,e)} 23:59:59`}),{immediate:!0}),d({}),(e,t)=>{const d=n("ProRadioButton"),m=n("van-config-provider"),p=n("van-datetime-picker"),v=n("ProPopup");return a(),i(u,null,[r(m,{"theme-vars":c(le)},{default:s((()=>[l("div",gt,[O.value.length>1?(a(),i("div",vt,[ft,l("div",yt,[r(d,{modelValue:c(D).formInfo.insurancePeriodValue,"onUpdate:modelValue":t[0]||(t[0]=e=>c(D).formInfo.insurancePeriodValue=e),options:O.value},null,8,["modelValue","options"])])])):T("",!0),c(N)===c(Q).CUSTOM_DAY?(a(),i("div",{key:1,class:"custom-cell common-cell",onClick:A},[It,l("div",ht,o(c(D).formInfo.insuranceStartDate),1)])):T("",!0),c(N)!==c(Q).CUSTOM_DAY?(a(),i("div",Ct,[Tt,l("div",Pt,o(c(he)(c(D).formInfo.insuranceStartDate))+" - "+o(c(he)(c(D).formInfo.insuranceEndDate)),1)])):T("",!0)])])),_:1},8,["theme-vars"]),r(v,{show:c(b),"onUpdate:show":t[2]||(t[2]=e=>w(b)?b.value=e:null),height:40,closeable:!1},{default:s((()=>[r(p,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),type:"date",title:"选择年月","min-date":c(S),"max-date":c(L),formatter:g,onConfirm:x,onCancel:U},null,8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-04787668"]]);const kt=e=>(k("data-v-59c01cba"),e=e(),O(),e),Ot={class:"com-payment-type"},Nt={class:"title"},bt={key:0,class:"picture-payment-content"},wt=["onClick"],Vt=["src"],At=["src"],St={key:1,class:"custom-cell check-btn-cell"},Lt=kt((()=>l("div",{class:"cell-label"},"保障方案",-1))),xt={class:"cell-content"},Ut={key:0,class:"picture-payment-content"},Ft=["onClick"],Rt=["src"],Mt=["src"],Et={key:1,class:"default-payment-content"},Bt=[kt((()=>l("div",{class:"pay-method"},[l("span",{class:"method"},o("按月交费")),l("span",{class:"acount"},o("共12期"))],-1)))],qt=[kt((()=>l("div",null,[l("div",{class:"tip"},[l("span",null,o("比按月支付最高省")),D(),l("span",null,"16%")]),l("div",{class:"triangle"}),l("div",{class:"pay-method"},[l("span",{class:"method"},o("一次交清")),l("span",{class:"acount"},o("比月交保费省最高2014元"))])],-1)))],_t={key:2,class:"custom-cell check-btn-cell"},Zt=kt((()=>l("div",{class:"cell-label"},"交费方式",-1))),jt={class:"cell-content"},Ht={class:"custom-cell common-cell"},Yt=kt((()=>l("div",{class:"cell-label"},"实付保费",-1))),Qt={class:"cell-content actual-premium"},Gt={key:0,class:"feerate-explain"},Kt={class:"content"},Jt=kt((()=>l("div",{class:"triangle-top"},null,-1)));var Wt=R(e({props:{showConfig:{type:Object,default:()=>{}},formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}},configDetail:{type:Object,default:()=>{}},isMultiplePlan:{type:Boolean,default:!1},premium:{type:[Number||null],default:null}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:p,emit:g}){const v=e;f({});const h=t({formInfo:v.formInfo}),C=f([]),D=f(),k=f(),O=I((()=>{var e;return"1"===String(null==(e=D.value)?void 0:e.paymentFrequencyFlag)})),N=I((()=>{var e;return null==(e=k.value)?void 0:e.productPremiumVOList.find((e=>e.paymentFrequency===h.formInfo.paymentFrequency))})),b=I((()=>v.premium&&N.value?`${v.premium}${N.value.premiumUnit||""}`:N.value?`${N.value.paymentFrequencyValue||""}${N.value.premiumUnit||""}`:"")),w=I((()=>{if(k){const{premiumExplain:e,premiumExplainViewName:t,premiumExplainUri:n}=k.value||{};return{premiumExplain:e,premiumExplainUri:n,premiumExplainViewName:t}}return null}));y((()=>v.configDetail),(()=>{var e;v.isMultiplePlan&&v.configDetail&&(C.value=null==(e=v.configDetail.tenantProductInsureVO)?void 0:e.planList)}),{immediate:!0,deep:!0}),y([()=>v.configDetail,()=>v.isMultiplePlan,()=>h.formInfo.activePlanCode],(()=>{if(v.configDetail)if(v.isMultiplePlan){let e=0;const t=v.configDetail.tenantProductInsureVO.planList.findIndex((e=>e.planCode===h.formInfo.activePlanCode));t>-1&&(e=t),D.value=v.configDetail.tenantProductInsureVO.planList[e].productPlanInsureConditionVO,k.value=v.configDetail.tenantProductInsureVO.planList[e]}else D.value=v.configDetail.tenantProductInsureVO.planInsureVO.productPlanInsureConditionVO,k.value=v.configDetail.tenantProductInsureVO.planInsureVO}),{deep:!0,immediate:!0});const A=I((()=>{var e;if(D.value&&D.value.paymentFrequency){return((null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1})),S=f(!1);y((()=>D.value),(()=>{var e;if(D.value){const t=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];if(1===t.length)return h.formInfo.paymentFrequency=D.value.paymentFrequency,void(S.value=!1);if(2===t.length&&t.filter((e=>![G.SINGLE,G.MONTH].includes(e))).length<1)return void(S.value=!0);S.value=!1}}),{immediate:!0,deep:!0});const L=I((()=>{var e;return D.value?null==(e=D.value.paymentFrequencyList||[])?void 0:e.map((e=>({...e,paymentFrequency:e.skinValue}))):[]})),x=I((()=>L.value.length>0)),U=I((()=>v.isMultiplePlan?v.configDetail.tenantProductInsureVO.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[])),F=I((()=>{var e,t;if(D.value){const n=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];return 1===n.length&&(h.formInfo.paymentFrequency=n[0]),null==(t=n||[])?void 0:t.map((e=>({label:K[e],value:e})))}return[]})),R=e=>{h.formInfo.paymentFrequency=e},M=()=>{var e,t;(null==(e=w.value)?void 0:e.premiumExplainUri)?ne({fileType:"pdf",fileUri:null==(t=w.value)?void 0:t.premiumExplainUri}):V("无费率文件！")};return p({}),(t,p)=>{const g=n("ProRadioButton"),v=n("templat"),f=n("ProDivider"),y=n("van-config-provider");return a(),P(y,{"theme-vars":c(le)},{default:s((()=>[l("div",Ot,[l("div",Nt,o(c(A)?"交费方式":"保障计划"),1),e.isMultiplePlan?(a(),i(u,{key:0},[c(U).length>0?(a(),i("div",bt,[(a(!0),i(u,null,d(c(U),(e=>(a(),i("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>{return n=e.planCode,void(h.formInfo.activePlanCode=n);var n}},[c(h).formInfo.activePlanCode==e.planCode?(a(),i("img",{key:0,src:e.selectedPic},null,8,Vt)):(a(),i("img",{key:1,src:e.unSelectedPic},null,8,At))],8,wt)))),128))])):(a(),i("div",St,[Lt,l("div",xt,[r(g,{modelValue:c(h).formInfo.activePlanCode,"onUpdate:modelValue":p[0]||(p[0]=e=>c(h).formInfo.activePlanCode=e),options:C.value,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])]))],64)):T("",!0),c(O)?(a(),P(v,{key:1},{default:s((()=>[c(x)?(a(),i("div",Ut,[(a(!0),i(u,null,d(c(L),(e=>(a(),i("div",{key:e.paymentFrequency,class:m("picture-payment-item"),onClick:t=>R(e.paymentFrequency)},[c(h).formInfo.paymentFrequency==e.paymentFrequency?(a(),i("img",{key:0,src:e.selectedPic},null,8,Rt)):(a(),i("img",{key:1,src:e.unSelectedPic},null,8,Mt))],8,Ft)))),128))])):S.value?(a(),i("div",Et,[l("div",{class:m("com-payment-type-item "+(c(h).formInfo.paymentFrequency==c(G).MONTH?"active":"")),onClick:p[1]||(p[1]=e=>R(c(G).MONTH))},Bt,2),l("div",{class:m("com-payment-type-item "+(c(h).formInfo.paymentFrequency==c(G).SINGLE?"active":"")),onClick:p[2]||(p[2]=e=>R(c(G).SINGLE))},qt,2)])):c(F).length>1?(a(),i("div",_t,[Zt,l("div",jt,[r(g,{modelValue:c(h).formInfo.paymentFrequency,"onUpdate:modelValue":p[3]||(p[3]=e=>c(h).formInfo.paymentFrequency=e),options:c(F)},null,8,["modelValue","options"])])])):T("",!0)])),_:1})):T("",!0),r(Dt,{"form-info":c(h).formInfo,"insure-detail":e.insureDetail,"config-detail":e.configDetail},null,8,["form-info","insure-detail","config-detail"]),c(N)&&c(N).premiumUnit?(a(),i(u,{key:2},[l("div",Ht,[Yt,l("div",Qt,o(c(b)),1)]),c(w)&&c(w).premiumExplain&&c(w).premiumExplainViewName?(a(),i("div",Gt,[l("div",Kt,[Jt,l("div",null,[l("span",null,o(c(w).premiumExplain||""),1),l("span",{class:"file-name",onClick:M},"《"+o(c(w).premiumExplainViewName||"")+"》",1)])])])):T("",!0)],64)):T("",!0)]),r(f)])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-59c01cba"]]);const Xt={class:"inscribedContent-content"},$t={class:"content"};var zt=R(e({props:{inscribedContent:{type:String,default:""}},setup(e){const t=e,n=f();return y((()=>t.inscribedContent),(e=>{n.value=e?e.replaceAll("\n","<br />"):""}),{immediate:!0,deep:!0}),(e,t)=>{const r=C("dompurify-html");return a(),i("div",Xt,[p(l("div",$t,null,512),[[r,n.value]])])}}}),[["__scopeId","data-v-702b2de2"]]);const en={class:"com-attachment-list"},tn=["onClick"];var nn=R(e({props:{preText:{type:String,default:""},attachementList:{type:Object,default:()=>{}}},emits:["preview-file"],setup:(e,{emit:t})=>(n,r)=>(a(),i("div",en,[l("span",null,o(e.preText),1),(a(!0),i(u,null,d(e.attachementList||[],((e,n)=>(a(),i("span",{key:n,class:"attachment-item",onClick:e=>(e=>{t("preview-file",e)})(n)}," 《"+o(e.attachmentName)+"》 ",9,tn)))),128))]))}),[["__scopeId","data-v-17da129e"]]);const an={class:"page-internet-product-detail"},rn={class:"info"},sn={class:"footer-area"},ln={class:"price"},on=D(" 总保费"),cn=D(o("立即投保"));var un=R(e({setup(e){var d,m;const p=se();A();const g=S(),{openId:v,productCode:h="BWYL2021",tenantId:C,phoneNo:D,agentCode:k="",saleChannelId:O,paymentMethod:N,certNo:b,name:w,templateId:R,pageCode:M,from:E,extraInfo:B,insurerCode:Z}=g.query;let Y={};try{Y=JSON.parse(decodeURIComponent(B))}catch(qe){}const Q=f({certNo:b,openId:v,tenantId:C,mobile:D}),K=f(),ne=f(),le=f(),ce=f(),ue=f(),de=f(!1),pe=f(!1),ge=f(!1),ve=f(0),fe=f(!1);f(!1),f();let ye="";const Ce=f(!0),Te="alert",Pe="jumpToPage",De=t({holder:{certNo:b,certType:q.CERT,mobile:D,name:w,socialFlag:J.HAS},insured:{certNo:b,certType:q.CERT,name:w,socialFlag:J.HAS,relationToHolder:W.SELF},paymentMethod:N,renewalDK:"Y",packageProductList:[],mobileSmsCode:"",activePlanCode:"",paymentFrequency:G.MONTH,insurancePeriodValue:"",commencementTime:he(new Date)}),ke=f({tenantId:C,agencyId:k,orderCategory:1,saleUserId:O,saleChannelId:O,venderCode:Z,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:G.MONTH,insurancePeriodValue:"",commencementTime:"",tenantOrderHolder:{extInfo:{},socialFlag:"1"},tenantOrderInsuredList:[{socialFlag:"1",relationToHolder:W.SELF,extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:C,productCode:null==(d=le.value)?void 0:d.productCode,productName:null==(m=le.value)?void 0:m.productName,premium:ue.value||0}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",successJumpUrl:"",pageCode:"productInfo",...Y},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),Oe=I((()=>{var e,t,n,a,i,r;return!!le.value&&!!((null==(t=null==(e=le.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList)&&Array.isArray(null==(a=null==(n=le.value)?void 0:n.tenantProductInsureVO)?void 0:a.planList)&&(null==(r=null==(i=le.value)?void 0:i.tenantProductInsureVO)?void 0:r.planList.length)>0)})),Ne=I((()=>{var e,t,n;if(Oe.value){if(ke.value.activePlanCode)return(null==(e=ce.value)?void 0:e.planFactor[ke.value.activePlanCode])||{}}else if(null==(t=ce.value)?void 0:t.productFactor)return null==(n=ce.value)?void 0:n.productFactor;return{}}));y((()=>Oe.value),(()=>{var e,t;Oe.value&&(ke.value.activePlanCode=null==(t=null==(e=le.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList[0].planCode)}),{immediate:!0});const be=I((()=>{var e,t,n;return Oe.value?(null==(t=null==(e=ce.value)?void 0:e.productRelationPlanVOList.find((e=>e.planCode===ke.value.activePlanCode)))?void 0:t.productRiskVoList)||[]:(null==(n=ce.value)?void 0:n.productRiskVoList)||[]})),we=e=>{ke.value.activePlanCode=e},Ve=I((()=>[])),Ae=f();y([()=>Oe.value,()=>ke.value.activePlanCode,()=>le.value],(()=>{var e,t;let n={};if(Oe.value){const t=null==(e=le.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===(ke.value.activePlanCode||"")));t&&(n=null==t?void 0:t.attachmentVOList)}else n=null==(t=le.value)?void 0:t.tenantProductInsureVO.planInsureVO.attachmentVOList;if(!n)return void(Ae.value=[]);const a={2:"richText",3:"link"};Ae.value=Object.keys(n).map((e=>(n[e].forEach((e=>{if("1"===e.attachmentType){const t=e.attachmentUri.split("?"),n=t[0].substr(t[0].lastIndexOf(".")+1);e.attachmentType="pdf"===n?"pdf":"picture"}else e.attachmentType=a[e.attachmentType]})),{attachmentName:e,attachmentList:n[e]})))}),{immediate:!0});const Se=()=>{ne.value.handleClickTab()("tab3")},Le=async()=>{await re(((e={},t={},n={})=>{var a;const i={...n},r={tenantId:C,riskList:(null==(a=i.tenantOrderInsuredList[0])?void 0:a.tenantOrderProductList[0].riskVOList)||[],riskPremium:t,productId:null==e?void 0:e.productBasicInfoVO.id};return i.extInfo.iseeBizNo=ye,i.commencementTime=i.insuranceStartDate,i.expiryDate=i.insuranceEndDate,i.tenantOrderInsuredList=i.tenantOrderInsuredList.map((e=>({...e,planCode:ke.value.activePlanCode?ke.value.activePlanCode:null}))),i.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:"",productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:ke.value.activePlanCode?ke.value.activePlanCode:null,tenantOrderRiskList:ie(r)},i})(ce.value,{},ke.value),(async(e,t)=>{t===Pe&&(null==e?void 0:e.orderNo)&&await(async e=>{const{code:t,data:n}=await ee({orderNo:e,tenantId:C});"10000"===t&&(n.extInfo={...n.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await re(n))})(null==e?void 0:e.orderNo)}))},xe=async()=>{try{await(async(e,t,n)=>{var a,i;const r=ae(n).map((t=>({...t,paymentFrequency:e.paymentFrequency,insurancePeriodValue:e.insurancePeriodValue}))),s={tenantId:C,productCode:null==(a=le.value)?void 0:a.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,holder:{personVO:e.tenantOrderHolder},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:e,productPlanVOList:[{insurerCode:t.productBasicInfoVO.insurerCode,planCode:ke.value.activePlanCode?ke.value.activePlanCode:null,riskVOList:r}]})))},{code:l,data:o}=await z(s);if("10000"===l){const{pageAction:e,message:t,data:n}=o.pageAction||{};if(e===Te)return void V(t);ke.value.tenantOrderInsuredList[0].tenantOrderProductList=null==(i=s.insuredVOList[0])?void 0:i.productPlanVOList,ue.value=o.premium,ke.value.orderAmount=o.premium,ke.value.orderRealAmount=o.premium,Le()}})(ke.value,ce.value,be.value)}catch(e){}},Ue=e=>{"allFalse"===e?(pe.value=!1,de.value=!0,xe()):x.confirm({message:"您当前的健康状况不符合该产品",confirmButtonText:"确定"}).then((()=>{window.history.back()})).catch((()=>{var e;null==(e=K.value)||e.reEditForm(),de.value=!1}))},Fe=()=>{var e;null==(e=K.value)||e.reEditForm(),de.value=!1},Me=()=>{pe.value=!1,Fe()},Ee=()=>{ge.value=!1,Fe()},Be=()=>{ge.value=!1,pe.value=!0};y([()=>De.insured.certNo,()=>De.insured.socialFlag,()=>De.packageProductList,()=>De.paymentFrequency],U((()=>{De.insured.certNo&&De.insured.socialFlag&&(()=>{const{holder:{certNo:e,mobile:t,name:n,socialFlag:a},insured:{certNo:i,name:r,socialFlag:s,relationToHolder:l},paymentMethod:o}=De;return!(!_(i)||!s)})()&&(async()=>{})()}),500),{deep:!0,immediate:!0});return H(),L((()=>{(async()=>{const e=te({productCode:h,withInsureInfo:!0,tenantId:C}),t=$({productCode:h});await Promise.all([e,t]).then((([e,t])=>{var n;"10000"===e.code&&(le.value={...e.data},document.title=(null==(n=e.data)?void 0:n.productFullName)||""),"10000"===t.code&&(ce.value=t.data)}))})(),setTimeout((async()=>{ye=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const d=n("van-config-provider");return a(),i(u,null,[r(d,{"theme-vars":c(p)},{default:s((()=>{var n,i,u,d,m,g,v,f,y;return[l("div",an,[l("div",rn,[r(oe,{url:null==(i=null==(n=le.value)?void 0:n.tenantProductInsureVO)?void 0:i.banner[0]},null,8,["url"]),(null==(d=null==(u=le.value)?void 0:u.tenantProductInsureVO)?void 0:d.bannerMove)?(a(),P(oe,{key:0,url:null==(g=null==(m=le.value)?void 0:m.tenantProductInsureVO)?void 0:g.bannerMove[0],onClick:Se},null,8,["url"])):T("",!0)]),r(Re,{"show-service-config":"","data-source":null==(v=le.value)?void 0:v.tenantProductInsureVO,"is-multiple-plan":c(Oe),"active-plan-code":ke.value.activePlanCode,onUpdateActivePlan:we},null,8,["data-source","is-multiple-plan","active-plan-code"]),r(Je,{ref_key:"detailScrollRef",ref:ne,detail:le.value},{form:s((()=>[r(me,{ref_key:"formRef",ref:K,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":ke.value,"send-sms-code":()=>{},"factor-object":c(Ne)||{}},{holderName:s((()=>[r(Ie,{"user-info":Q.value},null,8,["user-info"])])),insurerName:s((()=>[r(Ie,{title:"选择被保人","user-info":Q.value},null,8,["user-info"])])),_:1},8,["form-info","send-sms-code","factor-object"]),r(Wt,{"form-info":ke.value,"insure-detail":ce.value,"config-detail":le.value,"is-multiple-plan":c(Oe),"risk-info-period-list":e.riskInfoPeriodList,premium:ue.value},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","risk-info-period-list","premium"])])),_:1},8,["detail"]),(null==(f=le.value)?void 0:f.tenantProductInsureVO.inscribedContent)?(a(),P(zt,{key:0,"inscribed-content":null==(y=le.value)?void 0:y.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):T("",!0),Ae.value&&Ae.value.length>0?(a(),P(nn,{key:1,"attachement-list":Ae.value,"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{ve.value=e,ge.value=!0})(e))},null,8,["attachement-list"])):T("",!0),l("div",sn,[l("div",ln,[on,l("span",null,o(ue.value?"￥":"")+o(c(j)(ue.value))+" "+o(ue.value?ke.value.paymentFrequency==c(X).YEAR?"元/年":"元/月":""),1)]),r(F,{shadow:!1,"theme-vars":c(p),class:"right",text:"立即投保",onClick:xe},{default:s((()=>[cn])),_:1},8,["theme-vars"])])])]})),_:1},8,["theme-vars"]),r(mt,{show:pe.value,"onUpdate:show":t[1]||(t[1]=e=>pe.value=e),"content-list":c(Ve),"active-index":0,onOnConfirmHealth:Ue,onOnCloseHealth:Me},null,8,["show","content-list"]),ge.value?(a(),P(st,{key:0,show:ge.value,"onUpdate:show":t[2]||(t[2]=e=>ge.value=e),"content-list":Ae.value,"is-only-view":Ce.value,"active-index":ve.value,text:Ce.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:Be,onOnCloseFilePreview:Ee},null,8,["show","content-list","is-only-view","active-index","text"])):T("",!0),r(ze,{"is-show":fe.value},null,8,["is-show"])],64)}}}),[["__scopeId","data-v-450e9b35"]]);export{un as default};

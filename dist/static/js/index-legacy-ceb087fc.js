!function(){var e=document.createElement("style");e.innerHTML=".net-sale-wrap[data-v-d47aa7fe]{padding-bottom:1.33333rem;background:#f1f5fc}.net-sale-wrap .footer-button[data-v-d47aa7fe]{justify-content:space-between}.net-sale-wrap .product-name[data-v-d47aa7fe]{font-size:.48rem;font-weight:500;line-height:1.06667rem}.net-sale-wrap .part[data-v-d47aa7fe]{background-color:#fff;padding:0 var(--zaui-page-border, .4rem)}.net-sale-wrap .part .common-cell-wrapper[data-v-d47aa7fe]{height:1.38667rem;align-items:center;width:100%;display:inline-flex}.net-sale-wrap .part .common-cell-wrapper[data-v-d47aa7fe] .cell-container{align-items:flex-start;justify-content:center;width:100%;color:var(--van-field-label-color);font-size:.4rem}.net-sale-wrap .radio-group[data-v-d47aa7fe]{width:100%}.net-sale-wrap .radio-group .radio-btn[data-v-d47aa7fe]{justify-content:space-between}.net-sale-wrap .price[data-v-d47aa7fe]{color:#393d46;font-size:.45333rem;font-weight:400}.net-sale-wrap .price span[data-v-d47aa7fe]{color:var(--van-primary-color);font-weight:700}.net-sale-wrap .right[data-v-d47aa7fe]{width:3.73333rem;background:var(--van-primary-color);border-color:var(--van-primary-color)}.net-sale-wrap .footer[data-v-d47aa7fe]{margin-top:.66667rem;padding:0 var(--zaui-page-border, .4rem)}\n",document.head.appendChild(e),System.register(["./index-legacy-0ae312ea.js","./debounce-legacy-839a1984.js","./utils-legacy-eb043ef7.js","./product-legacy-9c29c044.js","./trial-legacy-9ed1aeb5.js","./index-legacy-ce787436.js","./nextStep-legacy-538880d6.js","./index-legacy-9b264e7a.js","./infoCollection-legacy-639b8a21.js","./pdfh5-legacy-9f98dc45.js","./isObjectLike-legacy-c9ae9091.js","./trial-legacy-260136ea.js","./relativeTime-legacy-4b5b6d28.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-395ff796.js","./core-legacy-dde77cd1.js","./constant-legacy-c9c30061.js"],(function(e){"use strict";var t,n,a,o,r,l,i,d,u,c,s,v,p,m,f,y,h,w,I,O,g,L,D,Y,C,V,b,T,E,j,x,k,R,P,M,N,H,_,B,S;return{setters:[function(e){t=e._,n=e.d,a=e.b_,o=e.a,r=e.r,l=e.ad,i=e.E,d=e.an,u=e.G,c=e.b,s=e.c,v=e.e,p=e.w,m=e.j,f=e.t,y=e.g,h=e.f,w=e.a7,I=e.k,O=e.aj,g=e.m,L=e.P,D=e.a3,Y=e.aP,C=e.X,V=e.Y,b=e.ah,T=e.T},function(e){E=e.d},function(e){j=e.r,x=e.t},function(e){k=e.p},function(e){R=e.i,P=e.b,M=e.p},function(e){N=e._},function(e){H=e.n},function(e){_=e.P},function(e){B=e.m,S=e.n},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){!function(){if("undefined"!=typeof window){var e,t="ontouchstart"in window;document.createTouch||(document.createTouch=function(e,t,a,o,r,l,i){return new n(t,a,{pageX:o,pageY:r,screenX:l,screenY:i,clientX:o-window.pageXOffset,clientY:r-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var e=o(),t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length=arguments.length,e}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var n=function(e,t,n,a,o){a=a||0,o=o||0,this.identifier=t,this.target=e,this.clientX=n.clientX+a,this.clientY=n.clientY+o,this.screenX=n.screenX+a,this.screenY=n.screenY+o,this.pageX=n.pageX+a,this.pageY=n.pageY+o},a=!1;d.multiTouchOffset=75,t||new d}function o(){var e=[];return e.item=function(e){return this[e]||null},e.identifiedTouch=function(e){return this[e+1]||null},e}function r(t){return function(n){var o,r,d;("mousedown"===n.type&&(a=!0),"mouseup"===n.type&&(a=!1),"mousemove"!==n.type||a)&&(("mousedown"===n.type||!e||e&&!e.dispatchEvent)&&(e=n.target),null==e.closest("[data-no-touch-simulate]")&&(o=t,r=n,(d=document.createEvent("Event")).initEvent(o,!0,!0),d.altKey=r.altKey,d.ctrlKey=r.ctrlKey,d.metaKey=r.metaKey,d.shiftKey=r.shiftKey,d.touches=i(r),d.targetTouches=i(r),d.changedTouches=l(r),e.dispatchEvent(d)),"mouseup"===n.type&&(e=null))}}function l(t){var a=o();return a.push(new n(e,1,t,0,0)),a}function i(e){return"mouseup"===e.type?o():l(e)}function d(){window.addEventListener("mousedown",r("touchstart"),!0),window.addEventListener("mousemove",r("touchmove"),!0),window.addEventListener("mouseup",r("touchend"),!0)}}();const U=e=>(C("data-v-d47aa7fe"),e=e(),V(),e),$={class:"net-sale-wrap"},F={class:"part product-name"},X=U((()=>m("span",null,null,-1))),A=U((()=>m("span",null,null,-1))),z={class:"part"},K={class:"footer"};e("default",t(n({__name:"index",setup(e){a();const t=o(),{productCode:n="HTEJBX",tenantId:C="9991000001",agentCode:V="",agencyCode:U,saleChannelId:q,extraInfo:G,preview:J}=t.query,W=r(),Q=r("0"),Z=r(),ee=r(),te=r(),ne=r([{}]),ae=r([]),oe=r({}),re=r(""),le=r({min:new Date(l().add(1,"day").format("YYYY-MM-DD")),max:new Date,currentDate:""});let ie={};try{ie=JSON.parse(decodeURIComponent(G))}catch(he){}const de=r({agencyId:U,agentCode:V,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"EVENT_NETSALE_underWrite",pageCode:"infoCollection",templateId:ie.templateId,iseeBizNo:re.value,extraInfo:ie},orderCategory:1,saleUserId:V,saleChannelId:q,tenantId:C,venderCode:"",tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"xinao",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:C}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),ue=i((()=>{var e,t;return((null===(e=Z.value)||void 0===e||null===(t=e.productRelationPlanVOList)||void 0===t?void 0:t.length)||0)>1})),ce=r();d([()=>te.value,()=>ee.value,()=>Q.value],(()=>{const{premium:e}=te.value||{};if(e)ce.value=e&&`￥${e}元`;else{var t,n,a;const{tenantProductInsureVO:e}=ee.value||{};let o={};o=null!=e&&null!==(t=e.planList)&&void 0!==t&&t.length?((null==e?void 0:e.planList)||[]).find((e=>e.planCode===Q.value)):null==e?void 0:e.planInsureVO;const{paymentFrequencyValue:r,premiumUnit:l}=(null===(n=o)||void 0===n||null===(a=n.productPremiumVOList)||void 0===a?void 0:a[0])||{};ce.value=r&&`￥${r}${l||"元"}`}}),{deep:!0,immediate:!0});const se=i((()=>{var e,t,n,a,o;let r=[];var i,d,u;null!==(e=Z.value)&&void 0!==e&&null!==(t=e.productRelationPlanVOList)&&void 0!==t&&t.length?r=(null===(i=Z.value)||void 0===i||null===(d=i.productRelationPlanVOList.find((e=>e.planCode===Q.value)))||void 0===d?void 0:d.productRiskVoList)||[]:r=(null===(u=Z.value)||void 0===u?void 0:u.productRiskVoList)||[];const{insuranceStartType:c,riskInsureLimitVO:s}=(null===(n=r)||void 0===n||null===(a=n[0])||void 0===a||null===(o=a.riskDetailVOList)||void 0===o?void 0:o[0])||{},{maxInsuranceDay:v}=s||{};if(c===+B.CUSTOM_DAY){const[e,t]=(v||"").split(",");e&&t&&t!==e?(le.value.min=new Date(l(new Date).add(+e||0,"day").format("YYYY-MM-DD")),le.value.max=new Date(l(new Date).add(+t||0,"day").format("YYYY-MM-DD"))):e&&t&&t===e?le.value.currentDate=l(new Date).add(t,"day").format("YYYY-MM-DD HH:mm:ss"):t||(le.value.max=new Date(l(new Date).add(+t||0,"day").format("YYYY-MM-DD")))}return r})),ve=i((()=>{var e,t,n;const{insuranceStartType:a,riskInsureLimitVO:o}=(null===(e=se.value)||void 0===e||null===(t=e[0])||void 0===t||null===(n=t.riskDetailVOList)||void 0===n?void 0:n[0])||{},{maxInsuranceDay:r}=o||{};if(a!==+B.CUSTOM_DAY)return!0;const[l,i]=(r||"").split(",");return l===i})),pe=i((()=>{var e,t,n;const a=se.value||[],o=(null==a||null===(e=a[0])||void 0===e||null===(t=e.riskDetailVOList)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.insuranceStartType)||1;return le.value.currentDate?`${l(le.value.currentDate).format("YYYY-MM-DD")} 00:00:00`:o===+B.CURRENT_DAY?`${l(new Date).format("YYYY-MM-DD HH:mm:ss")}`:`${l(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`})),me=i((()=>{var e,t;const n=se.value||[],{insuranceEndType:a,riskInsureLimitVO:o}=(null==n||null===(e=n[0])||void 0===e||null===(t=e.riskDetailVOList)||void 0===t?void 0:t[0])||{},{insurancePeriodValueList:r}=o||{};r||console.warn("insurancePeriodValueList","保障信息不存在");const[i,d]=((null==r?void 0:r[0])||"").split("_");return a===+S.CURRENT_DAY?`${l(pe.value).add(d||0,i).subtract(1,"day").format("YYYY-MM-DD")} 23:59:59`:a?`${l(pe.value).add(d,i).format("YYYY-MM-DD")} 00:00:00`:""})),fe=async()=>{var e,t,n;de.value.venderCode=null===(e=Z.value)||void 0===e?void 0:e.productBasicInfoVO.insurerCode,de.value.orderAmount=null===(t=te.value)||void 0===t?void 0:t.premium,de.value.orderRealAmount=null===(n=te.value)||void 0===n?void 0:n.premium,de.value.commencementTime=pe.value,de.value.expiryDate=me.value,de.value.extInfo&&(de.value.extInfo.iseeBizNo=re.value),de.value.tenantOrderInsuredList&&(de.value.tenantOrderInsuredList[0].planCode=Q.value),H(((e,t,n)=>{var a;const o={},r=(e=[])=>{(e||[]).forEach((e=>{var t;o[e.riskCode]=e,null!==(t=e.riskPremiumDetailVOList)&&void 0!==t&&t.length&&r(e.riskPremiumDetailVOList)}))};r(null==t?void 0:t.riskPremiumDetailVOList);const l={...n},i={tenantId:C,riskList:(null===(a=ae.value)||void 0===a?void 0:a[0].riskVOList)||[],riskPremium:o,productId:(null==e?void 0:e.productBasicInfoVO.id)||0};var d;return l.tenantOrderHolder&&(l.tenantOrderHolder.certType=l.tenantOrderHolder.certType||b.CERT,l.tenantOrderHolder.certNo=(l.tenantOrderHolder.certNo||"").toLocaleUpperCase()),l.tenantOrderInsuredList&&(l.tenantOrderInsuredList[0].certType=l.tenantOrderInsuredList[0].certType||b.CERT,l.tenantOrderInsuredList[0].certNo=(l.tenantOrderInsuredList[0].certNo||"").toLocaleUpperCase(),l.tenantOrderInsuredList[0].tenantOrderProductList=[{premium:null===(d=te.value)||void 0===d?void 0:d.premium,productCode:null==e?void 0:e.productBasicInfoVO.productCode,productName:null==e?void 0:e.productBasicInfoVO.productName,tenantOrderRiskList:x(i)}]),l})(Z.value,te.value,de.value),((e,t)=>{"jumpToPage"===t&&T("提交成功")}))},ye=async()=>{var e;null===(e=W.value)||void 0===e||e.validateForm().then((()=>{var e,t;O.confirm({title:"分享",message:`即将向客户【${null===(e=de.value)||void 0===e||null===(t=e.tenantOrderHolder)||void 0===t?void 0:t.name}】发送投保确认信息,请确认是否继续？`}).then((()=>{J||fe()}))}))};d([()=>{var e;return null===(e=de.value.tenantOrderInsuredList)||void 0===e?void 0:e[0].name},()=>{var e;return null===(e=de.value.tenantOrderInsuredList)||void 0===e?void 0:e[0].birthday},()=>Q.value],E((([e,t])=>{e&&t&&(J||(async(e,t,n)=>{var a,o,r,l;const i={holder:{personVO:{certType:b.CERT,...e.tenantOrderHolder,socialFlag:`${(null===(a=e.tenantOrderHolder)||void 0===a||null===(o=a.extInfo)||void 0===o?void 0:o.hasSocialInsurance)||""}`,occupationCodeList:null===(r=e.tenantOrderHolder)||void 0===r||null===(l=r.extInfo)||void 0===l?void 0:l.occupationCodeList}},insuredVOList:((null==e?void 0:e.tenantOrderInsuredList)||[]).map((e=>{var a,o;return{insuredCode:"",personVO:{...e,certType:b.CERT,socialFlag:`${(null==e||null===(a=e.extInfo)||void 0===a?void 0:a.hasSocialInsurance)||""}`,occupationCodeList:null==e||null===(o=e.extInfo)||void 0===o?void 0:o.occupationCodeList},productPlanVOList:[{insurerCode:null==t?void 0:t.productBasicInfoVO.insurerCode,planCode:Q.value||"",riskVOList:j(n)}]}})),productCode:null==t?void 0:t.productBasicInfoVO.productCode,productId:null==t?void 0:t.productBasicInfoVO.id,tenantId:C},{code:d}=await P(i);if("10000"===d){const{code:e,data:t}=await M(i);var u,c;"10000"===e?(te.value=t,ae.value=(null==i||null===(u=i.insuredVOList)||void 0===u||null===(c=u[0])||void 0===c?void 0:c.productPlanVOList)||[]):te.value=void 0}})(de.value,Z.value,se.value))}),500));return d((()=>Q.value),(()=>{ne.value&&(oe.value=ne.value[Q.value])})),u((()=>{(async()=>{await k({productCode:n,withInsureInfo:!0,tenantId:C}).then((({code:e,data:t})=>{var n;"10000"===e&&(ee.value=t,document.title=(null===(n=t.tenantProductInsureVO)||void 0===n?void 0:n.productName)||"")})),R({productCode:n}).then((({code:e,data:t})=>{var n;"10000"===e&&(Z.value=t,ne.value=t.planFactor,null!==(n=t.productRelationPlanVOList)&&void 0!==n&&n.length&&(Q.value=t.productRelationPlanVOList[0].planCode||""),t.productFactor?oe.value=t.productFactor:t.planFactor&&(oe.value=t.planFactor[Q.value]))}))})(),setTimeout((async()=>{re.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const n=g,a=L,o=D,r=Y,l=c("ProPageWrap");return s(),v(l,null,{default:p((()=>{var e,l;return[m("div",$,[m("div",F,f(null===(e=y(Z))||void 0===e||null===(l=e.productBasicInfoVO)||void 0===l?void 0:l.productFullName),1),y(ue)?(s(),v(a,{key:0,"show-line":!1,title:"保障年期"},{default:p((()=>{var e;return[h(n,{modelValue:y(Q),"onUpdate:modelValue":t[0]||(t[0]=e=>w(Q)?Q.value=e:null),class:"radio-group",prop:{label:"planName",value:"planCode"},options:null===(e=y(Z))||void 0===e?void 0:e.productRelationPlanVOList},null,8,["modelValue","options"])]})),_:1})):I("",!0),h(N,{ref_key:"formRef",ref:W,"title-collection":{HOLDER:"投保人",INSURER:"被保人",BENEFICIARY:"收益人"},"form-info":y(de),"send-sms-code":()=>{},"input-align":"left","factor-object":y(oe)},{holderName:p((()=>[X])),insurerName:p((()=>[A])),_:1},8,["form-info","send-sms-code","factor-object"]),m("div",z,[h(o,{title:"保费",content:y(ce)},null,8,["content"]),y(ve)?(s(),v(o,{key:0,title:"保障期间",content:`${y(pe).split(" ")[0]}~${y(me).split(" ")[0]}`},null,8,["content"])):(s(),v(r,{key:1,modelValue:y(le).currentDate,"onUpdate:modelValue":t[1]||(t[1]=e=>y(le).currentDate=e),label:"生效日期",name:"currentDate",type:"date",min:y(le).min,max:y(le).max,required:!0},null,8,["modelValue","min","max"]))]),m("div",K,[h(_,{shadow:!1,text:"分享用户确认投保",onClick:ye})])])]})),_:1})}}}),[["__scopeId","data-v-d47aa7fe"]]))}}}))}();

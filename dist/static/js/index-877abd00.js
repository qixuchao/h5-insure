var F=Object.defineProperty;var E=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var L=(o,t,e)=>t in o?F(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,A=(o,t)=>{for(var e in t||(t={}))I.call(t,e)&&L(o,e,t[e]);if(E)for(var e of E(t))T.call(t,e)&&L(o,e,t[e]);return o};import{_ as b}from"./empth-f2366666.js";import{g as q,C as c,L as O,v as $,a0 as z,M,m as d,n as h,z as y,y as _,j as C,r as k,k as i,F as P,E as U,h as V,A as Y}from"./vendor-e9263418.js";import{s as j,q as G}from"./poster-34ef176f.js";import{d as J}from"./index-b8742a0a.js";const H={class:"poster-list"},K={class:"imgs-wrap"},Q={key:0},W={key:1,class:"empth"},X=_("img",{src:b,alt:""},null,-1),Z=_("p",null,"\u6682\u65F6\u6CA1\u6709\u6D77\u62A5\u54E6",-1),ee=[X,Z],ie=q({setup(o){const t=c(!1),e=c(!1),r=c("0"),v=c(1),S=O({dataList:[],tagList:[{labelCategoryName:"\u70ED\u95E8\u63A8\u8350",id:"0"}]}),{dataList:n,tagList:m}=$(S),w=z(),p=async(a,s=1,l=12)=>{e.value=!1;const{data:u}=await j({pageNum:s,pageSize:l,queryBean:A({},a)});v.value=s;const{total:g}=u.data;t.value=!1,n.value=[...n.value,...u.data.list],sessionStorage.setItem("p_list",JSON.stringify(n.value)),(r.value==="0"||g<=n.value.length)&&(e.value=!0)},N=async()=>{const{data:a}=await G({dictCode:"POSTER_CATEGORY"});let s=[];s=a.data.map(l=>({labelCategoryName:l.itemName,id:l.itemCode})),m.value=m.value.concat(s)};M(async()=>{p({isRecommend:"Y"}),N()});const B=()=>{p({posterCategory:r.value==="0"?void 0:r.value},v.value+1)},D=a=>{sessionStorage.setItem("p_index",a),w.push({name:"posterDetail"})},R=(a,s)=>{r.value=a,n.value=[],v.value=1,p({posterCategory:a==="0"?void 0:a})};return(a,s)=>{const l=k("van-col"),u=k("van-row"),g=k("van-list");return i(),d("div",H,[h(J,{"tag-list":y(m),filter:!0,onCurrentIndex:R},null,8,["tag-list"]),_("div",K,[y(n).length?(i(),d("div",Q,[h(g,{loading:t.value,"onUpdate:loading":s[0]||(s[0]=f=>t.value=f),finished:e.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:B},{default:C(()=>[h(u,{gutter:"15"},{default:C(()=>[(i(!0),d(P,null,U(y(n),(f,x)=>(i(),V(l,{key:x,span:"8",onClick:te=>D(x)},{default:C(()=>[_("div",{class:"post-item",style:Y({backgroundImage:`url(${f.posterUrlShort})`})},null,4)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["loading","finished"])])):(i(),d("div",W,ee))])])}}});export{ie as default};

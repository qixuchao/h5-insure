import{d as e,a4 as a,a5 as t,h as n,i as l,k as i,l as o,z as d,a6 as s,E as r,a7 as u,O as c,o as v,c as p,u as _,b as m,F as I,a as f,n as h,s as C,w as O,a8 as b,p as g,a9 as y,aa as L}from"./index-dc5ec44c.js";import{g as k,i as E}from"./trial-7511f230.js";import{q as j,a as T}from"./product-f84ae251.js";import{u as A}from"./useAttachment-5e865318.js";import{g as N}from"./utils-1748d4d5.js";import{q as P}from"./createProposal-7f54c8a8.js";import{u as S}from"./useOrder-055f3aa3.js";import"./infoCollection-9802e33b.js";import"./trial-ce912ff9.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";const w={key:0},R={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},x={class:"info"},V={key:1,class:"preview-placeholder"},F=f("br",null,null,-1),D=f("div",{id:"insureButton"},null,-1),B=f("div",{id:"xinaoDialog"},null,-1),U=e({name:"InsuranceLong"}),q=e({...U,setup(e){const U=a((()=>t((()=>import("./index-87655bed.js")),["static/js/index-87655bed.js","static/css/index-c23f272e.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css"]))),q=a((()=>t((()=>import("./index-68d8cebe.js")),["static/js/index-68d8cebe.js","static/css/index-79104747.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css","static/js/infoCollection-9802e33b.js"]))),G=a((()=>t((()=>import("./index-7ab6c025.js")),["static/js/index-7ab6c025.js","static/css/index-491cbbd3.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css"]))),M=a((()=>t((()=>import("./index-02e541ab.js").then((function(e){return e.a}))),["static/js/index-02e541ab.js","static/css/index-50785b3e.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css","static/js/debounce-6981b306.js","static/js/isObjectLike-a9798079.js","static/js/cloneDeep-5d541e55.js","static/js/keysIn-131bbce9.js","static/js/_getTag-0507d0b1.js","static/js/TrialButton-81277d85.js","static/css/TrialButton-dea42d8e.css","static/js/index-af91b1ee.js","static/css/index-bbfdd7ec.css","static/js/trial-7511f230.js","static/js/config-98e8d477.js","static/js/useOrder-055f3aa3.js","static/js/merge-e7788e50.js"]))),z=a((()=>t((()=>import("./index-f954bd4a.js")),["static/js/index-f954bd4a.js","static/css/index-ebb5282b.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css"]))),J=a((()=>t((()=>import("./Video-573ea1bb.js")),["static/js/Video-573ea1bb.js","static/css/Video-20262b6f.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css"]))),Q=a((()=>t((()=>import("./index-a622c06f.js")),["static/js/index-a622c06f.js","static/css/index-a34f0b1b.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css","static/js/utils-1748d4d5.js","static/js/infoCollection-9802e33b.js","static/js/trial-ce912ff9.js"]))),W=a((()=>t((()=>import("./index-7e4e8188.js")),["static/js/index-7e4e8188.js","static/css/index-889d75b4.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css","static/js/product-f84ae251.js","static/js/useThread-637a02aa.js"]))),X=a((()=>t((()=>import("./index-eca4a0a9.js")),["static/js/index-eca4a0a9.js","static/css/index-fa4edf2a.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css","static/js/theme-94cf7d00.js","static/js/index-af91b1ee.js","static/css/index-bbfdd7ec.css","static/js/utils-1748d4d5.js","static/js/infoCollection-9802e33b.js","static/js/trial-ce912ff9.js"]))),Y=a((()=>t((()=>import("./index-07ee8f78.js")),["static/js/index-07ee8f78.js","static/css/index-eabeb59f.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css"]))),$=a((()=>t((()=>import("./index-031330e3.js")),["static/js/index-031330e3.js","static/css/index-cb73c937.css","static/js/index-dc5ec44c.js","static/css/index-c3745f58.css"])));n();const H=l(),{productCode:K="",tenantId:Z,agentCode:ee="",agencyCode:ae,saleChannelId:te,proposalId:ne,extraInfo:le,orderNo:ie,insurerCode:oe,preview:de,trialPreview:se}=H.query;let re={};try{re=JSON.parse(decodeURIComponent(le))}catch(Je){}const{openId:ue,proposalInsuredId:ce,saTenantId:ve=""}=re;i();const pe=i(),_e=i(),me=i(!1),Ie=i({}),fe=i({}),he=i(!1),Ce=i(0),Oe=i(!1);i({});const be=i(!0);i(!0);const ge=i(!0),ye=i(""),Le=i({}),ke=i({}),Ee=i([]),je=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Te=i({});o((()=>!!de||!!se));const Ae=o((()=>!!se)),Ne=i(),Pe=()=>{Ne.value.open()},Se=i([]),we=i(),Re=i(),xe=S(),Ve=i(!1),Fe=async()=>{!Ae.value&&j({productCode:K,tenantId:Z}).then((({data:e,code:a})=>{if("10000"===a){Ie.value=e;const{wxShareConfig:a,showWXShare:t,title:n,desc:l,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};t?Object.assign(je.value,{...a,imgUrl:a.image,isShare:t}):Object.assign(je.value,{title:n,desc:l,imgUrl:i,isShare:t})}})),ie||ne||(Ve.value=!0),ie&&k({orderNo:ie,tenantId:Z}).then((({code:e,data:a})=>{"10000"===e&&(a.productCode=K,Re.value=a,Ve.value=!0)})),ne&&P({id:ne,tenantId:ve||Z}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:t}=a;Re.value=Object.assign(xe.value,{productCode:K,productName:"",renewFlag:"",holder:e,tenantId:Z,insuredList:(t||[]).filter((e=>e.id===+ce)).map((e=>({...e,productList:e.productList.filter((e=>e.productCode===K))})))}),Ve.value=!0}})),await E({productCode:K,isTenant:!1}).then((({data:e,code:a})=>{var t;"10000"===a&&(me.value=!0,Oe.value=!0,fe.value=e,Le.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],Ee.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),ge.value=!1,T({productCode:K}).then((({code:e,data:a})=>{var t,n,l,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:o}=a;we.value=e||[];const{basicInfo:{questionnaireType:d},questions:s,questionnaireName:r}=(null==(t=null==o?void 0:o[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};2===d&&(Se.value=[{attachmentName:r,attachmentUri:s,attachmentType:"question"}]),Se.value=[{attachmentName:r,attachmentUri:null==(n=null==s?void 0:s[0])?void 0:n.content,attachmentType:N(String(null==(l=null==s?void 0:s[0])?void 0:l.textType),null==(i=null==s?void 0:s[0])?void 0:i.content)}]}}))};d((()=>Te.value.planCode),(e=>{Le.value=(fe.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const De=()=>{pe.value.handleClickTab()("insureButton")};i(""),i(0);const{fileList:Be,mustReadFileCount:Ue,popupFileList:qe}=A(Le,we),Ge=e=>{Le.value=(fe.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},Me=()=>{he.value=!1,be.value=!0},ze=()=>{he.value=!1,be.value=!0};return d((()=>Le.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:t}=Le.value;Te.value.planCode=e,ke.value=(t||[]).find((e=>e.mainRiskFlag===s.YES))}),{deep:!0,immediate:!0}),r((()=>{u(_e,(([{isIntersecting:e}],a)=>{me.value=!0}))})),c((()=>{ge.value=!0,Fe(),setTimeout((async()=>{ye.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var t,n,l,i,o,d,s,r,u,c,k,E,j,T,A,N,P,S,H,K;const ee=y,ae=L;return v(),p(I,null,[_(ge)?(v(),p("div",w)):(v(),p("div",R,[m(ee),_(Ae)?(v(),p("div",V,[b("当前页面仅用于保费试算预览"),F,b("不展示其他产品相关配置信息")])):(v(),p(I,{key:0},[f("div",x,[1==(null==(n=null==(t=_(Ie))?void 0:t.BASIC_INFO)?void 0:n.bannerType)&&(null==(i=null==(l=_(Ie))?void 0:l.BASIC_INFO)?void 0:i.banner.length)?(v(),h(_(G),{key:0,"data-skeleton-type":"img",images:null==(d=null==(o=_(Ie))?void 0:o.BASIC_INFO)?void 0:d.banner},null,8,["images"])):C("",!0),2==(null==(r=null==(s=_(Ie))?void 0:s.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=_(Ie))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),h(_(J),{key:1,"data-skeleton-type":"img",src:null==(k=_(Ie))?void 0:k.BASIC_INFO.video[0]},null,8,["src"])):C("",!0),(null==(T=null==(j=null==(E=_(Ie))?void 0:E.BASIC_INFO)?void 0:j.bannerMove)?void 0:T.length)?(v(),h(_(G),{key:2,url:null==(P=null==(N=null==(A=_(Ie))?void 0:A.BASIC_INFO)?void 0:N.bannerMove)?void 0:P[0],onClick:De},null,8,["url"])):C("",!0),f("div",{ref_key:"observeRef",ref:_e},null,512)]),m(_(U),{"data-source":null==(S=_(Ie))?void 0:S.BASIC_INFO},null,8,["data-source"]),(null==(H=_(Ie))?void 0:H.GUARANTEE)?(v(),h(_(Q),{key:0,"show-service-config":"","data-source":_(Ie),"plan-list":_(Ee),onUpdateActivePlan:Ge},null,8,["data-source","plan-list"])):C("",!0),f("div",{class:"trial-text-btn",onClick:Pe},"算一算保费"),m(_(z),{"data-source":null==(K=_(Ie))?void 0:K.ISSUE_CONDITION},null,8,["data-source"]),m(_(q),{ref_key:"detailScrollRef",ref:pe,"data-source":_(Ie)},null,8,["data-source"]),m(ae,null,{default:O((()=>{var e,a,t;return[(null==(e=_(Ie).SIGNATURE)?void 0:e.inscribedContent)?(v(),h(_(Y),{key:0,"inscribed-content":null==(t=null==(a=_(Ie))?void 0:a.SIGNATURE)?void 0:t.inscribedContent},null,8,["inscribed-content"])):C("",!0)]})),_:1}),m(ae,null,{default:O((()=>{var e;return[(null==(e=_(Be))?void 0:e.length)?(v(),h(_($),{key:0,"attachment-list":_(Be),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{Ce.value=e,he.value=!0})(e))},null,8,["attachment-list"])):C("",!0)]})),_:1})],64)),_(me)&&_(Ve)?(v(),h(_(M),{key:2,ref_key:"trialRef",ref:Ne,"data-source":_(Le),"share-info":_(je),"is-share":_(je).isShare,"product-info":{productCode:_(fe).productCode,productName:_(fe).productName,productId:"",tenantId:_(Z),insurerCode:_(oe),planList:_(fe).productPlanInsureVOList},"default-data":_(Re)?[_(Re)]:null,"current-order-detail":_(Re),"tenant-product-detail":_(Ie),"hide-benefit":1!==_(fe).openFlag},null,8,["data-source","share-info","is-share","product-info","default-data","current-order-detail","tenant-product-detail","hide-benefit"])):C("",!0),D])),m(ae,null,{default:O((()=>[_(Oe)&&!_(Ae)?(v(),h(_(W),{key:0,"product-detail":_(Ie)},null,8,["product-detail"])):C("",!0)])),_:1}),B,m(ae,null,{default:O((()=>[_(he)?(v(),h(_(X),{key:0,show:_(he),"onUpdate:show":a[1]||(a[1]=e=>g(he)?he.value=e:null),"content-list":_(be)?_(Be):_(qe),"is-only-view":_(be),"active-index":_(Ce),text:_(be)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":_(be)?0:_(Ue),onSubmit:Me,onOnCloseFilePreviewByMask:ze},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):C("",!0)])),_:1})],64)}}});export{q as default};

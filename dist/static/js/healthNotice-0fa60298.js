import{ref as e,onBeforeMount as t}from"vue";import{u as o,a as n,P as a,D as s,c as r,g as i,j as u,b as c,p as d}from"./index-deb4ddfb.js";import{q as l}from"./product-c166a0f6.js";import{g as p}from"./utils-f063477c.js";import{P as m}from"./index-593ee4c8.js";import{n as f}from"./nextStep-0d38f4c6.js";import{u as V}from"./useOrder-d6d1fc9b.js";import{P as v,B as j}from"./constants-7afb7c3d.js";import"./pdfh5-e588f83d.js";import"./infoCollection-f930e52f.js";import"./trial-a75330fd.js";/* empty css              */import"./core-5f3b09dd.js";import"./constant-8927d485.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";const I=1;const N={class:"long-health-notice-wrap"},q={class:"footer-btn"},y=Vue.defineComponent({__name:"healthNotice",setup(y){const C=o(),b=n(),h=V();console.log("route",C);const{productCode:x,orderNo:T,templateId:g,tenantId:O,preview:k,questionnaireId:E}=C.query,_=e({}),w=e(),P=e(),B=()=>{s.confirm({title:"",message:`${P.value||""}不符合当前产品投保条件，请选择其他产品`}).then((()=>{r()})).catch((()=>{}))},$=()=>{w.value?b.push({path:`${C.path}/${w.value}`,query:{...C.query,questionnaireId:w.value}}):k?u(v.QUESTION_NOTICE,C.query):f(h.value,((e,t)=>{t===c.JUMP_PAGE&&d(e.nextPageCode,C.query)}))};return t((()=>{!k&&(async()=>{const{code:e,data:t}=await i({orderNo:T,tenantId:O});"10000"===e&&Object.assign(h.value,t,{extInfo:{...t.extInfo,templateId:g,pageCode:v.QUESTION_NOTICE,buttonCode:j.QUESTION_NOTICE}})})(),(async()=>{var e;const{code:t,data:o}=await l({productCode:x});if("10000"===t){const{productQuestionnaireVOList:t}=o||{};let n=t[0]||{};if((null==t?void 0:t.length)>1)if(E){const e=t.findIndex((e=>`${e.id}`===E));t[e]&&(n=t[e]),t[e+1]&&(w.value=t[e+1].id)}else w.value=null==(e=t[1])?void 0:e.id;const{questionnaireDetailResponseVO:a,questionnaireId:s,questionnaireName:r}=n||{},{questions:i,basicInfo:u}=a||{},{objectType:c,questionnaireType:d}=u||{};if(P.value=c,d===I){const{content:e,textType:t}=(null==i?void 0:i[0])||{};_.value={content:e,contentType:p(`${t}`,e),questionnaireId:s,questionnaireName:r}}else _.value={content:i,contentType:"question",questionnaireId:s,questionnaireName:r}}})()})),(e,t)=>{const o=Vue.resolveComponent("ProNavigator"),n=Vue.resolveComponent("VanButton");return Vue.openBlock(),Vue.createElementBlock("div",N,[Vue.createVNode(o),Vue.unref(_).content?(Vue.openBlock(),Vue.createBlock(a,{key:0,type:Vue.unref(_).contentType,content:Vue.unref(_).content},null,8,["type","content"])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",q,[Vue.createVNode(n,{onClick:B},{default:Vue.withCtx((()=>[Vue.createTextVNode("部分为是")])),_:1}),Vue.createVNode(m,{shadow:!1,onClick:$},{default:Vue.withCtx((()=>[Vue.renderSlot(e.$slots,"default",{},(()=>[Vue.createTextVNode("以上皆否")]))])),_:3})])])}}});export{y as default};

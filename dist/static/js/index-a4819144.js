var ne=Object.defineProperty,re=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var q=(f,d,s)=>d in f?ne(f,d,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[d]=s,S=(f,d)=>{for(var s in d||(d={}))ae.call(d,s)&&q(f,s,d[s]);if(V)for(var s of V(d))se.call(d,s)&&q(f,s,d[s]);return f},w=(f,d)=>re(f,oe(d));import{g as Q,r as p,h as m,m as D,n as a,k as c,y as I,I as P,F as W,E as z,z as u,af as ue,Q as de,a5 as ie,C as F,L as le,o as ce,X as fe,j as C,s as U,B as k}from"./vendor-d47732e4.js";import{_ as pe,P as me}from"./index-42c3a21d.js";import{c as _e,n as Ie,a as ye}from"./index-4cb261aa.js";import{_ as Y,R as ve,B as Ae,A as Le,a as Oe}from"./index-d8163959.js";import{I as M,e as Be}from"./trial-a2bba1a6.js";import"./useDicData-5e8f3451.js";const Ee={class:"com-insured-part-wrapper"},De={class:"content-wrapper"},ge={class:"product-name"},Fe=Q({props:{productData:{default:()=>({})}},setup(f){const d=(s,v)=>v.indexOf("$")!==-1?v.replace("$",`${s}`):`${s}${v}`;return(s,v)=>{const A=p("ProCell"),j=p("ProCard");return m(),D("div",Ee,[a(j,{title:"\u4FDD\u969C\u8BE6\u60C5"},{default:c(()=>{var b;return[I("div",De,[I("div",ge,P(f.productData.productName),1),(m(!0),D(W,null,z(((b=f.productData)==null?void 0:b.tenantOrderRiskList)||[],_=>(m(),D("div",{key:_.id,class:"risk-item"},[a(A,{title:"\u4FDD\u969C\u671F\u95F4",content:d(_.insurancePeriodValue,u(M)[_.insurancePeriodType])},null,8,["content"]),a(A,{title:"\u4EA4\u8D39\u671F\u95F4",content:d(_.paymentPeriod,u(M)[_.paymentPeriodType])},null,8,["content"]),a(A,{title:"\u4EA4\u8D39\u65B9\u5F0F",content:u(Be)[_.paymentFrequency]},null,8,["content"]),a(A,{title:"\u4FDD\u969C\u91D1\u989D",content:_.initialAmount.toLocaleString()},null,8,["content"]),a(A,{title:"\u9996\u671F\u4FDD\u8D39",content:_.initialPremium.toLocaleString()},null,8,["content"])]))),128))])]}),_:1})])}}});var Ce=pe(Fe,[["__scopeId","data-v-27f46c48"]]);const Pe={key:0,class:"beneficiary-part"},be={class:"part-title"},he={class:"title"},Te=k("\u5220\u9664"),Ne=k("+\u6DFB\u52A0\u53D7\u76CA\u4EBA"),xe=k("\u9009\u62E9\u4FDD\u5355\u901A\u8BAF\u4FE1\u606F"),Re={class:"radio-item-wrapper"},He={class:"name"},ke={class:"hone"},je={class:"address"},Se={class:"footer-button"},Ue=k("\u4E0B\u4E00\u6B65"),ze=Q({setup(f){const d=ue(),s=de(),{templateId:v=1,orderNo:A="2022072710380711215",tenantId:j="9991000007"}=s.query,[b,_]=ie(),$=s.path==="/infoPreview"?"infoPreview":"infoCollection",h=F({}),r=F({extInfo:{pageCode:$},tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{},tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0}}),G=F(null),L=F([]),O=F([]),l=le({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),X=()=>{const n=S({},r.value);n.tenantOrderAttachmentList=[{category:22,objectType:2,objectId:r.value.tenantOrderHolder.id,name:"\u6295\u4FDD\u4EBA\u8BC1\u4EF6\u6B63\u9762",uri:L.value[0]},{category:23,objectType:2,objectId:r.value.tenantOrderHolder.id,name:"\u6295\u4FDD\u4EBA\u8BC1\u4EF6\u80CC\u9762",uri:L.value[1]},{category:22,objectType:3,objectId:r.value.tenantOrderInsuredList[0].id,name:"\u88AB\u4FDD\u4EBA\u8BC1\u4EF6\u6B63\u9762",uri:O.value[0]},{category:23,objectType:3,objectId:r.value.tenantOrderInsuredList[0].id,name:"\u88AB\u4FDD\u4EBA\u8BC1\u4EF6\u80CC\u9762",uri:O.value[1]}],Ie(n).then(({code:e,data:t})=>{e==="10000"&&t.pageAction.pageAction==="jumpToPage"&&d.push({path:me[t.pageAction.data.nextPageCode],query:s.query})})},J=n=>{console.log("value",n)},K=()=>{l.beneficiaryId+=1,r.value.tenantOrderInsuredList[0].beneficiaryReqList.push({id:l.beneficiaryId,extInfo:{}})},Z=n=>{r.value.tenantOrderInsuredList[0].beneficiaryReqList=r.value.tenantOrderInsuredList[0].beneficiaryReqList.filter(e=>e.beneficiaryId!==n.beneficiaryId)},ee=()=>{ye({orderNo:A,tenantId:j}).then(({code:n,data:e})=>{if(n==="10000"){const t=e;t.extInfo=w(S({},t.extInfo),{pageCode:$,templateId:v}),t.tenantOrderHolder=t.tenantOrderHolder||{},t.tenantOrderHolder.extInfo=t.tenantOrderHolder.extInfo||{},t.tenantOrderInsuredList[0].extInfo=t.tenantOrderInsuredList[0].extInfo||{},t.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=t.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map(o=>{const y=o;return y.extInfo={},y}),t.tenantOrderAttachmentList.forEach(o=>{o.category,o.objectType,o.category===22?o.objectType===2?L[0]=o.uri:o.objectType===3&&(O[0]=o.uri):o.category===23&&(o.objectType===2?L[1]=o.uri:o.objectType===3&&(O[1]=o.uri))}),Object.assign(r.value,t)}}).finally(()=>{l.isLoading=!1})};return ce(()=>{ee(),_e({pageCode:"infoCollection",templateId:v}).then(({code:n,data:e})=>{if(n==="10000"){const t={BENEFICIARY:[],INSURER:[],HOLDER:[]};e.productInsureFactorList.forEach(o=>{(t[o.moduleType]=t[o.moduleType]||[]).push(o)}),h.value=t}})}),fe(()=>r.value,n=>{var e,t,o,y,T,g,N,x,R,H;if(n){const B=[{contactAddress:((t=(e=n.tenantOrderHolder)==null?void 0:e.extInfo)==null?void 0:t.familyAddress)||1231123,contactName:n.tenantOrderHolder.name||123131,contactPhoneNo:n.tenantOrderHolder.mobile||123132},{contactAddress:(y=(o=n.tenantOrderHolder)==null?void 0:o.extInfo)==null?void 0:y.workAddress,contactName:n.tenantOrderHolder.name,contactPhoneNo:n.tenantOrderHolder.mobile},{contactAddress:(g=(T=n.tenantOrderInsuredList[0])==null?void 0:T.extInfo)==null?void 0:g.familyAddress,contactName:(N=n.tenantOrderInsuredList[0])==null?void 0:N.name,contactPhoneNo:(x=n.tenantOrderInsuredList[0])==null?void 0:x.mobile},{contactAddress:(H=(R=n.tenantOrderInsuredList[0])==null?void 0:R.extInfo)==null?void 0:H.workAddress,contactName:n.tenantOrderInsuredList[0].name,contactPhoneNo:n.tenantOrderInsuredList[0].mobile}];l.addressList=B.filter(E=>E.contactAddress&&E.contactName&&E.contactPhoneNo)}},{deep:!0,immediate:!0}),(n,e)=>{const t=p("ProCard"),o=p("ProRadioButton"),y=p("ProField"),T=p("ProSvg"),g=p("VanButton"),N=p("ProCheckButton"),x=p("van-cell"),R=p("ProForm"),H=p("ProPageWrap");return m(),C(H,{class:"page-info-wrapper"},{default:c(()=>[u(l).isLoading?U("",!0):(m(),C(R,{key:0,ref_key:"formRef",ref:G,"is-view":""},{default:c(()=>{var B,E;return[a(Ce,{"product-data":(E=(B=r.value.tenantOrderInsuredList[0])==null?void 0:B.tenantOrderProductList)==null?void 0:E[0]},null,8,["product-data"]),a(t,{title:"\u6295\u4FDD\u4EBA"},{default:c(()=>[a(Y,{images:L.value,"onUpdate:images":e[0]||(e[0]=i=>L.value=i),"form-info":r.value.tenantOrderHolder,"factor-list":h.value.HOLDER},null,8,["images","form-info","factor-list"])]),_:1}),a(t,{title:"\u88AB\u4FDD\u4EBA"},{default:c(()=>[a(y,{modelValue:r.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":e[2]||(e[2]=i=>r.value.tenantOrderInsuredList[0].relationToHolder=i),label:"\u4E3A\u8C01\u4FDD\u5355",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:c(()=>[a(o,{modelValue:r.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":e[1]||(e[1]=i=>r.value.tenantOrderInsuredList[0].relationToHolder=i),options:u(ve)},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),r.value.tenantOrderInsuredList[0].relationToHolder!=="0"?(m(),C(Y,{key:0,images:O.value,"onUpdate:images":e[3]||(e[3]=i=>O.value=i),"form-info":r.value.tenantOrderInsuredList[0],"factor-list":h.value.INSURER||[]},null,8,["images","form-info","factor-list"])):U("",!0),a(y,{label:"\u6295\u4FDD\u5730\u533A",name:"type",placeholder:"\u8BF7\u9009\u62E9","is-link":""})]),_:1}),a(t,{title:"\u53D7\u76CA\u4EBA"},{default:c(()=>[a(y,{modelValue:r.value.tenantOrderInsuredList[0].beneficiaryType,"onUpdate:modelValue":e[5]||(e[5]=i=>r.value.tenantOrderInsuredList[0].beneficiaryType=i),label:"\u53D7\u76CA\u4EBA\u7C7B\u578B",name:"beneficiaryType",placeholder:"\u8BF7\u9009\u62E9"},{input:c(()=>[a(o,{modelValue:r.value.tenantOrderInsuredList[0].beneficiaryType,"onUpdate:modelValue":e[4]||(e[4]=i=>r.value.tenantOrderInsuredList[0].beneficiaryType=i),options:u(Ae)},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),r.value.tenantOrderInsuredList[0].beneficiaryType==2?(m(),D("div",Pe,[(m(!0),D(W,null,z(r.value.tenantOrderInsuredList[0].beneficiaryReqList,(i,te)=>(m(),D("div",{key:i.beneficiaryId,class:"beneficiary-item"},[I("div",be,[I("span",he,P(`\u53D7\u76CA\u4EBA${te+1}`),1),a(T,{name:"delete",onClick:$e=>Z(i)},{default:c(()=>[Te]),_:2},1032,["onClick"])]),a(Oe,{"form-info":i,"factor-list":h.value.BENEFICIARY},null,8,["form-info","factor-list"])]))),128)),a(g,{onClick:K},{default:c(()=>[Ne]),_:1})])):U("",!0)]),_:1}),a(t,{title:"\u4FDD\u5355\u901A\u8BAF\u4FE1\u606F"},{default:c(()=>[u(l).currentAddress?(m(),C(x,{key:1,title:"\u5355\u5143\u683C","is-link":""},{title:c(()=>[I("div",Re,[I("p",null,[I("span",He,P(u(l).addressList[u(l).currentAddress-1].contactName),1),I("span",ke,P(u(l).addressList[u(l).currentAddress-1].contactPhoneNo),1)]),I("p",je,P(u(l).addressList[u(l).currentAddress-1].contactAddress),1)])]),_:1})):(m(),C(N,{key:0,activated:"",onClick:e[6]||(e[6]=i=>u(_)(!0))},{default:c(()=>[xe]),_:1}))]),_:1})]}),_:1},512)),I("div",Se,[a(g,{block:"",type:"primary",onClick:X},{default:c(()=>[Ue]),_:1})]),a(Le,{modelValue:u(l).currentAddress,"onUpdate:modelValue":e[7]||(e[7]=B=>u(l).currentAddress=B),show:u(b),"data-source":u(l).addressList,onSubmit:J},null,8,["modelValue","show","data-source"])]),_:1})}}});export{ze as default};

import{_ as e,d as a,aV as t,aW as o,i as s,h as n,y as i,r as l,j as r,E as c,T as d,bc as u,l as m,o as p,c as f,b as v,u as y,p as h,q as b,f as I,a as j,w,F as V,s as k,aY as x,b0 as g,a8 as q,d7 as S,b1 as T,g as _,v as C,b4 as L,bk as P,bj as E,bb as N,bO as O,a$ as U,bR as R,ar as D,b2 as Q,d8 as F,bo as A,bp as $,c8 as B}from"./index-d6f6d527.js";import{P as M,a as Y}from"./PolicyInfo-765e84dc.js";import{g as z,m as J}from"./trial-57d9822d.js";import{n as W}from"./nextStep-490256e5.js";import{b as G,l as X}from"./product-76128e81.js";import{u as H}from"./useOrder-e0a4cc43.js";import{P as K}from"./index-b0aaefa2.js";import{P as Z}from"./index-5befd2e3.js";import{_ as ee}from"./InsureInfo-880962fe.js";import{p as ae,d as te}from"./utils-c83c4ee5.js";import{I as oe}from"./insuranceNotificationInformation-a22584ff.js";import{Q as se}from"./notice-dd5e1d1a.js";import{P as ne,g as ie}from"./utils-b07ee1da.js";import{Q as le}from"./questionnaire-42dcb602.js";import re from"./index-2eb9692b.js";import{p as ce}from"./policy-e45b602a.js";import"./cloneDeep-ddabc67b.js";import"./core-49f8c1e7.js";import"./utils-6fc810bd.js";import"./createProposal-f2e4b92c.js";import"./trial-445275f4.js";import"./infoCollection-82a9c136.js";import"./util-3536b4e2.js";import"./format-31cde443.js";import"./index-031a0257.js";import"./index-5837c6ad.js";const de=e=>(A("data-v-5afad4fc"),e=e(),$(),e),ue={class:"long-info-preview"},me={class:"insurance-notification-information card"},pe=de((()=>j("span",null,"，并通过上述内容和销售人员的说明理解保险条款及退保损失、保险单现金价值、理赔要求、保险责任是否有等待期、免赔额、犹豫期等关键信息，本人同意遵守。",-1))),fe=de((()=>j("br",null,null,-1))),ve=de((()=>j("span",{class:"extra-text"},[C("本人已认真阅读并知晓"),j("span",{style:{color:"var(--van-primary-color)"}},"《隐私政策》"),C("，并同意授权。")],-1))),ye={class:"footer-btn"},he=de((()=>j("span",null,"分享",-1)));var be=e(a({__name:"infoPreview",setup(e){const a=t((()=>o((()=>import("./index-45e0362d.js")),["static/js/index-45e0362d.js","static/css/index-fa4edf2a.css","static/js/index-d6f6d527.js","static/css/index-f0b43caa.css","static/js/theme-94cf7d00.js","static/js/index-5befd2e3.js","static/css/index-bbfdd7ec.css","static/js/utils-b07ee1da.js","static/js/infoCollection-82a9c136.js","static/js/trial-445275f4.js"]))),A=s(),$=n(),de=H(),be={holder:i.holderSign,insured:i.insuredSign,agent:i.agentSign},{productCode:Ie="",tenantId:je,agentCode:we="",agencyCode:Ve,saleChannelId:ke,isShare:xe,orderNo:ge,extraInfo:qe,insurerCode:Se,objectType:Te="1",preview:_e}=A.query;let Ce={};try{Ce=JSON.parse(decodeURIComponent(qe))}catch(ta){}const Le=l({isView:!1,personalInfo:{},policyInfo:{schema:[],config:[],formData:{}},payInfo:{schema:[],config:[],formData:[]},customerQuestions:[]}),Pe=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,Ee=r({imgUrl:"",desc:"",title:"",link:Pe}),Ne=r(),Oe=r(),Ue=r(!1),Re=r(!1),De=r(0),Qe=r(!1),Fe=r(!1),Ae=r(!1),$e=r(!1),Be=r([]),Me=()=>{Fe.value=!0},Ye=r([]),ze=e=>{Be.value.forEach(((a,t)=>{e===t&&(Ye.value[t]=x.YES,a.readStatus=x.YES)}))},Je=()=>{Re.value=!1},We=({file:e,type:a},t)=>{L.set(ne,{fileUri:e,fileType:a}),$.push({path:"/template/filePreview",query:{fileId:e.id}}),t()},Ge=r(),Xe=()=>{W(de.value,((e,a)=>{a===P.JUMP_PAGE&&Ge.value.handleShare()}))},He=async()=>{_e?E(N.INFO_PREVIEW,A.query):Ue.value?Fe.value?Ae.value?$.push({path:be[Te],query:A.query}):d("请您确认已阅读并同意以上内容"):d("请您完成文档阅读"):d("请您确认已如实履行健康告知义务")};c((()=>Ae.value),(()=>{Ae.value&&(Fe.value||d("请您确认已阅读并同意以上内容"))}),{immediate:!0,deep:!0});const Ke=r(),Ze=r(),ea=async()=>{let e={};const{code:a,data:t}=await z({orderNo:ge,tenantId:je});"10000"===a&&(Object.assign(de.value,t),e=ae(t.insuredList[0].productList),Ke.value=t,Qe.value=!0),(async e=>{let a=[];const{code:t,data:o}=await B({orderNo:ge,tenantId:je});"10000"===t&&(a=o.productQuestionnaireVOList);const{code:s,data:n}=await X(e);if("10000"===s){const{productQuestionnaireVOList:e}=n||{},t=e.filter((e=>e.businessType!==se.VISIT));Le.customerQuestions=t.map((e=>{const{questionnaireDetailResponseVO:t,questionnaireId:o,questionnaireName:s}=e||{},{questions:n,basicInfo:i}=t||{},{objectType:l,questionnaireType:r}=i||{};if(r===le.TEXT){const{content:a,textType:t}=(null==n?void 0:n[0])||{};return{content:a,contentType:ie(`${t}`,a),questionnaireId:o,questionnaireName:s,objectType:e.objectType}}const c=(a||[]).find((e=>e.questionnaireId===o));return{...t,contentType:"question",...null==c?void 0:c.questionnaireDetailResponseVO,questionnaireId:o,objectType:e.objectType,questionnaireName:s}}))}})({productCodeList:e.productList.map((e=>e.productCode))}),G(e).then((({code:e,data:a})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:t}=te(a),o={attachmentList:[{materialContent:ce,materialName:"隐私政策",materialSource:"pdf"}],attachmentName:"隐私政策"};Be.value=e.concat(t).concat([o]),Le.fileList=Be.value.map((e=>({tabName:e.attachmentName,isExpand:!0,readStatus:2,files:e.attachmentList.map((e=>({name:e.materialName,file:e.materialContent,type:e.materialSource,mustRead:!0})))})))}})),J(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:t}=e;Ze.value=t;const{payInfo:o,other:s}=O(t);Le.payInfo={...Le.payInfo,...o},Le.policyInfo={...Le.policyInfo,...s}}}))};u((()=>{ea()}));const aa=r();return m((()=>{setTimeout((async()=>{aa.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{var o,s,n,i;const l=U,r=R,c=D,d=Q,u=F;return p(),f("div",ue,[v(l),v(ee,{"product-data":null==(s=null==(o=y(de).insuredList)?void 0:o[0])?void 0:s.productList},null,8,["product-data"]),(null==(n=Object.keys(y(Ze)||{}))?void 0:n.length)?(p(),h(K,{key:0,ref_key:"personalInfoRef",ref:Oe,modelValue:y(Ke),"onUpdate:modelValue":t[0]||(t[0]=e=>b(Ke)?Ke.value=e:null),"product-factor":y(Ze),"is-view":""},null,8,["modelValue","product-factor"])):I("",!0),y(Le).payInfo.schema.length?(p(),h(y(M),{key:1,ref_key:"payInfoRef",ref:Ne,modelValue:y(de).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>y(de).tenantOrderPayInfoList=e),schema:y(Le).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):I("",!0),y(Le).policyInfo.schema.length?(p(),h(y(Y),{key:2,modelValue:y(de).extInfo,"onUpdate:modelValue":t[2]||(t[2]=e=>y(de).extInfo=e),schema:y(Le).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):I("",!0),j("div",me,[v(oe,{modelValue:y(Ue),"onUpdate:modelValue":t[3]||(t[3]=e=>b(Ue)?Ue.value=e:null),title:"投保告知信息",data:y(Le).customerQuestions||[],"display-status":""},null,8,["modelValue","data"])]),v(c,{title:"授权与须知","show-line":!1,"show-icon":!1,class:"material-read-card"},{default:w((()=>[(p(!0),f(V,null,k(y(Be),((e,a)=>(p(),h(r,{key:a,"is-link":"",value:e.readStatus===y(x).YES?"已读":"未读",title:e.attachmentName,onClick:e=>(e=>{De.value=e,$e.value=!0})(a)},null,8,["value","title","onClick"])))),128))])),_:1}),(null==(i=y(Be))?void 0:i.length)?(p(),h(re,{key:3,modelValue:y(Ae),"onUpdate:modelValue":t[4]||(t[4]=e=>b(Ae)?Ae.value=e:null),"attachment-list":y(Be),"has-bg-color":!1,"is-show-radio":"","is-view":"","pre-text":"本人已认真阅读",onPreviewFile:t[5]||(t[5]=()=>Re.value=!0)},{suffixText:w((()=>[pe,fe,ve])),_:1},8,["modelValue","attachment-list"])):I("",!0),j("div",ye,[!y(xe)&&y(Ee).isShare&&y(g)()?(p(),h(T,q({key:0},y(Ee),{class:"share-btn",onClick:S(Xe,["stop"])}),{default:w((()=>[v(d,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),he])),_:1},16,["onClick"])):I("",!0),v(Z,{shadow:!1,onClick:He},{default:w((()=>[_(e.$slots,"default",{},(()=>[C("下一步")]),!0)])),_:3})]),y(Re)?(p(),h(y(a),{key:4,show:y(Re),"onUpdate:show":t[6]||(t[6]=e=>b(Re)?Re.value=e:null),"content-list":[y(Be)[y(De)]],"is-only-view":"","active-index":0,text:"我已阅读","force-read-cound":0,onOnCloseFilePreviewByMask:Je},null,8,["show","content-list"])):I("",!0),y($e)?(p(),h(u,{key:5,modelValue:y($e),"onUpdate:modelValue":t[7]||(t[7]=e=>b($e)?$e.value=e:null),closeable:"","close-on-click-overlay":"","read-list":y(Ye),"active-index":y(De),"auto-check":!1,"data-source":y(Le).fileList,"ok-text":"我已阅读，已充分理解，并会遵守相关要求",onClickBtn:We,onSubmit:Me,onUpdateFileStatus:ze},null,8,["modelValue","read-list","active-index","data-source"])):I("",!0)])}}}),[["__scopeId","data-v-5afad4fc"]]);export{be as default};

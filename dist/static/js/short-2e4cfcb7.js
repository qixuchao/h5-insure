import{d as e,aY as a,r as t,a7 as n,x as l,G as r,aR as i,b as s,q as u,c as o,g as d,i as c,F as v,l as p,h as m,B as f,t as y,j as O,e as I,n as h,f as g,I as P,Q as L,w as A,s as x,_ as C,aZ as b,b0 as k,aJ as V,b5 as _,a8 as S,u as T,a as w,a_ as E,a2 as H,a$ as F,an as R,y as N,aP as D,aK as j,T as q,a4 as B,K as U,L as z}from"./index-1ae7243e.js";import{d as M}from"./debounce-a70580da.js";import{i as G,b as Q,p as $,g as W}from"./trial-587655cb.js";import{p as K}from"./product-d384b189.js";import{n as Y}from"./nextStep-ac75e4a8.js";import{C as J,S as X,R as Z,O as ee,m as ae}from"./infoCollection-ccadc0c6.js";import{k as te,j as ne}from"./trial-23019837.js";import{u as le,B as re,P as ie}from"./index-0fac77e2.js";import{u as se}from"./theme-65292714.js";import{o as ue,g as oe,v as de,r as ce,t as ve}from"./utils-25aa3af5.js";import{v as pe}from"./validator-5a13dc82.js";import{s as me,c as fe}from"./phoneVerify-df985a91.js";import{s as ye}from"./useStorage-c20632eb.js";import"./pdfdist-29dd12d8.js";import"./core-086e0698.js";import"./index-cc27a4f0.js";import"./index-c6883828.js";import"./logo-e4245f5a.js";const Oe={class:"base-insurance-guarantee guarantee-list"},Ie=c("span",null,"保障计划",-1),he={key:0,class:"picture-payment-content"},ge=["onClick"],Pe=["src"],Le=["src"],Ae={key:1,class:"plan-list"},xe=["onClick"],Ce={key:2,class:"feerate-view"},be={key:0},ke={class:"extinfo-info-list"},Ve={class:"guarantee-detail"},_e={class:"content"},Se=e({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1},paymentFrequency:{type:String,default:""},premiumInfo:{type:Object,default:()=>{}}},emits:["update-active-plan"],setup(e,{emit:C}){var b;const k=e;a((e=>({a04e248e:$.value})));const V=t(null==(b=k.dataSource)?void 0:b.planList),_=t(k.activePlanCode),S=t();n([()=>k.dataSource,()=>k.activePlanCode],(()=>{var e,a;k.isMultiplePlan&&(V.value=null==(e=k.dataSource)?void 0:e.planList,_.value=k.activePlanCode,S.value=null==(a=k.dataSource)?void 0:a.planList.findIndex((e=>e.planCode===_.value)))}),{immediate:!0});const T=t([]),w=t([]),E=t(),H=l((()=>k.isMultiplePlan?k.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));n([()=>k.dataSource,()=>k.activePlanCode,()=>k.paymentFrequency,()=>_.value],(()=>{var e,a,t,n,l;if(k.isMultiplePlan){if(V.value&&V.value.length>0){let e=0;const a=V.value.findIndex((e=>e.planCode===_.value));a>-1&&(e=a),T.value=V.value[e].guaranteeItemVOS,w.value=V.value[e].extInfoVOList;const t=V.value[e].productPremiumVOList.find((e=>e.paymentFrequency===k.paymentFrequency));E.value=t||(null==(l=V.value[e])?void 0:l.productPremiumVOList[0])}}else{T.value=null==(e=k.dataSource)?void 0:e.planInsureVO.guaranteeItemVOS,w.value=null==(a=k.dataSource)?void 0:a.planInsureVO.extInfoVOList;const l=null==(t=k.dataSource)?void 0:t.planInsureVO.productPremiumVOList.find((e=>e.paymentFrequency===k.paymentFrequency));E.value=l||(null==(n=k.dataSource)?void 0:n.planInsureVO.productPremiumVOList[0])}}),{immediate:!0,deep:!0});const F=l((()=>{var e;return(null==(e=k.dataSource)?void 0:e.rateUri)||""})),R=l((()=>!!(E.value&&E.value.paymentFrequencyValue&&E.value.premiumUnit&&F))),[N,D]=r(!1),j=l((()=>{var e;return!(!T.value||!(null==(e=T.value)?void 0:e.length))&&(T.value.length>k.count&&(!!k.isShowClose||!N.value))})),q=()=>{D()},B=l((()=>{var e;return T.value&&(null==(e=T.value)?void 0:e.length)?T.value.length<=k.count||N.value?T.value:T.value.slice(0,k.count):[]})),U=e=>{var a;_.value=e,S.value=null==(a=k.dataSource)?void 0:a.planList.findIndex((e=>e.planCode===_.value))},z=t(!1),M=()=>{z.value=!0},G=()=>{ue({fileType:"pdf",fileUri:F.value})},Q=e=>{_.value=V.value[e.name].planCode},$=t("");return n([()=>_.value,()=>z.value],(()=>{i((()=>{(()=>{var e,a;const t=((null==(e=document.querySelector(".guarantee-popup .extinfo-info-list"))?void 0:e.clientHeight)||0)+1,n=t+((null==(a=document.querySelector(".guarantee-popup .custom-plan-tab"))?void 0:a.clientHeight)||0)+(t?5:0);$.value=`calc( 100% - ${n}px )`})()}))})),(a,t)=>{var n,l;const r=s("ProCell"),i=s("ProTab"),C=s("ProPopup"),b=u("dompurify-html");return o(),d(v,null,[c("div",Oe,[c("div",{class:"header"},[Ie,c("span",{onClick:M},"查看详情")]),e.isMultiplePlan?(o(),d(v,{key:0},[p(H).length>0?(o(),d("div",he,[(o(!0),d(v,null,m(p(H),(e=>(o(),d("div",{key:e.planCode,class:f("picture-payment-item"),onClick:a=>U(e.planCode)},[_.value==e.planCode?(o(),d("img",{key:0,src:e.selectedPic},null,8,Pe)):(o(),d("img",{key:1,src:e.unSelectedPic},null,8,Le))],8,ge)))),128))])):(o(),d("div",Ae,[(o(!0),d(v,null,m(V.value,((e,a)=>(o(),d("div",{key:`${e.planCode}_${a}`,class:f("plan-list-item "+(e.planCode===_.value?"plan-list-item-active":"")),onClick:a=>U(e.planCode)},[c("span",null,y(e.planName),1)],10,xe)))),128))]))],64)):O("",!0),(o(!0),d(v,null,m(p(B),((e,a)=>(o(),I(r,{key:a,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),p(j)?(o(),d("div",{key:1,class:"show-more",onClick:q},[h(y(p(N)?"收起":"查看更多")+" ",1),g(P,{name:"arrow-down-dobule",class:f(["icon",{showMore:p(N)}])},null,8,["class"])])):O("",!0),p(R)?(o(),d("div",Ce,[c("span",null,y(`${(null==(n=E.value)?void 0:n.paymentFrequencyValue)||""}${(null==(l=E.value)?void 0:l.premiumUnit)||""}`),1),p(F)?(o(),d("span",{key:0,onClick:G},"查看保费")):O("",!0)])):O("",!0)]),g(L),g(C,{show:z.value,"onUpdate:show":t[1]||(t[1]=e=>z.value=e),title:"保障详情",class:"guarantee-popup"},{default:A((()=>[w.value&&w.value.length>0?(o(),d("div",be,[c("div",ke,[(o(!0),d(v,null,m(w.value,((e,a)=>(o(),I(r,{key:a,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),g(L)])):O("",!0),e.isMultiplePlan?(o(),I(i,{key:1,active:S.value,"onUpdate:active":t[0]||(t[0]=e=>S.value=e),list:V.value.map(((e,a)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:Q},null,8,["active","list"])):O("",!0),c("div",Ve,[(o(!0),d(v,null,m(T.value,((e,a)=>(o(),d("div",{key:a,class:"guarantee-item"},[g(r,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),x(c("div",_e,null,512),[[b,e.content]])])))),128))])])),_:1},8,["show"])],64)}}});const Te={class:"spec"},we={key:1,class:"spec"};var Ee=C(e({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:a}){const n=e,r=b((()=>k((()=>import("./index-1ae7243e.js").then((function(e){return e.bo}))),["static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),i=b((()=>k((()=>import("./index-8fcd6ed8.js")),["static/js/index-8fcd6ed8.js","static/css/index-f22f2764.css","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),u=b((()=>k((()=>import("./index-1ae7243e.js").then((function(e){return e.bm}))),["static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),f=b((()=>k((()=>import("./index-89bbe555.js")),["static/js/index-89bbe555.js","static/css/index-7b3feb06.css","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),y=b((()=>k((()=>import("./index-b57a5315.js")),["static/js/index-b57a5315.js","static/css/index-bfbfdd15.css","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),h=t(),P=t([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),L=l((()=>{var e,a,t,l;return(null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.spec)&&(null==(l=null==(t=n.detail)?void 0:t.tenantProductInsureVO)?void 0:l.spec.length)>0})),x=l((()=>{var e,a,t,l,r,i,s,u,o,d,c,v,p,m;const f=null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO.settlementProcessType;return!!(f===J.WORD&&(null==(r=null==(l=null==(t=n.detail)?void 0:t.tenantProductInsureVO)?void 0:l.settlementProcessVO)?void 0:r.settlementProcessList)&&(null==(u=null==(s=null==(i=n.detail)?void 0:i.tenantProductInsureVO)?void 0:s.settlementProcessVO)?void 0:u.settlementProcessList.length)>0||f===J.IMAGE&&(null==(c=null==(d=null==(o=n.detail)?void 0:o.tenantProductInsureVO)?void 0:d.settlementProcessVO)?void 0:c.settlementProcessPicList)&&(null==(m=null==(p=null==(v=n.detail)?void 0:v.tenantProductInsureVO)?void 0:p.settlementProcessVO)?void 0:m.settlementProcessPicList.length)>0)})),C=l((()=>{var e,a,t,l;return(null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.questionList)&&(null==(l=null==(t=n.detail)?void 0:t.tenantProductInsureVO)?void 0:l.questionList.length)>0})),T=l((()=>{let e=[...P.value];return L.value||(e=e.filter((e=>"tab1"!==e.slotName))),x.value||C.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>{var e;return null==(e=h.value)?void 0:e.handleClickTab}}),(e,a)=>{const t=s("van-image"),l=s("ProSvg");return o(),I(p(r),{ref_key:"scrollRef",ref:h,class:"tabs",list:p(T),sticky:"",scrollspy:""},V({tab3:A((()=>[S(e.$slots,"form",{},void 0,!0)])),_:2},[p(L)?{name:"tab1",fn:A((()=>{var e,a;return[c("div",Te,[(o(!0),d(v,null,m((null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.spec)||[],((e,a)=>(o(),I(_,{key:a},{fallback:A((()=>[g(l,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>[(o(),I(t,{key:a,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),g(p(u))])]}))}:void 0,p(x)||p(C)?{name:"tab2",fn:A((()=>{var e,a;return[p(x)?(o(),d(v,{key:0},[(null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO.settlementProcessType)===p(J).WORD?(o(),I(p(f),{key:0,title:"理赔说明"},{default:A((()=>{var e,a,t;return[g(p(i),{list:null==(t=null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:t.settlementProcessList},null,8,["list"])]})),_:1})):(o(),d("div",we,[(o(),I(_,null,{fallback:A((()=>[g(l,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var e,a,l;return[(o(!0),d(v,null,m((null==(l=null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:l.settlementProcessPicList)||[],((e,a)=>(o(),I(t,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),g(p(u))],64)):O("",!0),p(C)?(o(),d(v,{key:1},[g(p(f),{title:"常见问题"},{default:A((()=>{var e,a;return[g(p(y),{list:null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.questionList},null,8,["list"])]})),_:1}),g(p(u))],64)):O("",!0)]}))}:void 0]),1032,["list"])}}}),[["__scopeId","data-v-717e916d"]]);const He=e=>(U("data-v-6a9530c2"),e=e(),z(),e),Fe={key:0},Re=[He((()=>c("div",{class:"__skeleton_short_content__"},[c("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[c("div",{class:"page-internet-product-detail"},[c("div",{class:"info"},[c("div",{class:"van-image banner",style:{width:"375px",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[c("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1672370686&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=9cXeLDrownXrYpVvPikShh7u2Fw%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),c("div")]),c("div",{class:"base-insurance-guarantee guarantee-list"},[c("div",{class:"header"},[c("span",null,[c("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"保障计划")]),c("span",null,[c("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"查看详情")])]),c("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[c("div",{class:"cell-container"},[c("div",{class:"left-part large"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"一般医疗保险金")]),c("div",{class:"divider"}),c("div",{class:"right-part"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高300万")])])]),c("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[c("div",{class:"cell-container"},[c("div",{class:"left-part large"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"重大疾病医疗保险金")]),c("div",{class:"divider"}),c("div",{class:"right-part"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),c("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[c("div",{class:"cell-container"},[c("div",{class:"left-part large"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤质子重离子医疗")]),c("div",{class:"divider"}),c("div",{class:"right-part"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),c("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[c("div",{class:"cell-container"},[c("div",{class:"left-part large"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤院外特定药品费用医疗")]),c("div",{class:"divider"}),c("div",{class:"right-part"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),c("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[c("div",{class:"cell-container"},[c("div",{class:"left-part large"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤特定器械耗材费用医疗责任 （适用于女性被保险人）")]),c("div",{class:"divider"}),c("div",{class:"right-part"},[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高100万")])])]),c("div",{class:"show-more"},[c("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"查看更多 "),c("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[c("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),c("div",{class:"feerate-view sk-border"},[c("span",null,[c("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00元/年起")])])]),c("div",{class:"com-divider"}),c("div",{class:"tabs",sticky:"",scrollspy:""},[c("div",null,[c("div",{class:"van-sticky"},[c("div",{class:"van-tabs"},[c("div",{id:"tab-list",class:"tab-list"},[c("a",{class:"tab-title active",title:"产品亮点"},[c("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"产品亮点")]),c("a",{class:"tab-title",title:"理赔说明"},[c("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"理赔说明")]),c("a",{class:"tab-title",title:"我要投保"},[c("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"我要投保")])])])])]),c("div",{class:"tab-content"},[c("div",{id:"tab1"},[c("div",{class:"spec"},[c("div",{class:"van-image detail-img",style:{width:"100%"}},[c("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)))],Ne={class:"page-internet-product-detail"},De={class:"info"},je={class:"custom-page-form"},qe=He((()=>c("div",{class:"form-title"},"请填写投保信息",-1))),Be={key:2,class:"footer-area"},Ue={class:"price"},ze={key:0},Me=h(y("立即投保")),Ge=He((()=>c("div",{id:"xinaoDialog"},null,-1)));var Qe=C(e({setup(e){var a,r;const u=b((()=>k((()=>import("./index-435470d4.js")),["static/js/index-435470d4.js","static/css/index-ea588f10.css","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js","static/js/theme-65292714.js","static/js/index-c6883828.js","static/css/index-2dbcd337.css","static/js/utils-25aa3af5.js","static/js/infoCollection-ccadc0c6.js","static/js/useStorage-c20632eb.js","static/js/trial-23019837.js"]))),m=b((()=>k((()=>import("./index-eea8133c.js")),["static/js/index-eea8133c.js","static/css/index-092fbb09.css","static/js/theme-65292714.js","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),f=b((()=>k((()=>import("./index-6227db6d.js")),["static/js/index-6227db6d.js","static/css/index-82fdec80.css","static/js/infoCollection-ccadc0c6.js","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js","static/js/useDicData-d458a698.js","static/js/trial-23019837.js","static/js/utils-25aa3af5.js","static/js/useStorage-c20632eb.js"]))),h=b((()=>k((()=>import("./index-c6883828.js")),["static/js/index-c6883828.js","static/css/index-2dbcd337.css","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),P=b((()=>k((()=>import("./index-5ece8cc8.js")),["static/js/index-5ece8cc8.js","static/css/index-6733e696.css","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js","static/js/infoCollection-ccadc0c6.js","static/js/relativeTime-188be6ed.js","static/js/validator-5a13dc82.js","static/js/useDicData-d458a698.js"]))),L=b((()=>k((()=>import("./index-6cce36e7.js")),["static/js/index-6cce36e7.js","static/css/index-a14d73ae.css","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),x=b((()=>k((()=>import("./index-c0b69e58.js")),["static/js/index-c0b69e58.js","static/css/index-607986ff.css","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),C=b((()=>k((()=>import("./index-a581f930.js")),["static/js/index-a581f930.js","static/css/index-b9ba3011.css","static/js/index-1ae7243e.js","static/css/index-a126266b.css","static/js/pdfdist-29dd12d8.js"]))),_=se();T();const S=w(),{productCode:U="",tenantId:z,agentCode:J="",agencyCode:ue,saleChannelId:Oe,extraInfo:Ie,insurerCode:he,preview:ge}=S.query;let Pe={};try{Pe=JSON.parse(decodeURIComponent(Ie))}catch(_a){}const{openId:Le}=Pe,Ae=t(),xe=t(),Ce=t(),be=t(!1),ke=t(),Ve=t(),_e=t(!1),Te=t(!1),we=t(0),He=t(!1),Qe=t({}),$e=t({}),We=t(!0),Ke=t(!0),Ye=t(!0),Je=t(""),Xe=t(),Ze=t(),ea=t(""),aa=t(""),ta=t("");Le&&le({openId:Le},(e=>{$e.value=e}));const na="jumpToPage",la=t({tenantId:z,agencyId:ue,agentCode:J,orderCategory:1,saleChannelId:Oe,venderCode:he,productCode:U,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:"",premium:0,insurancePeriodValue:te.YEAR_1,commencementTime:"",tenantOrderHolder:{extInfo:{hasSocialInsurance:X.HAS}},tenantOrderInsuredList:[{dontFetchDefaultInfo:!1,relationToHolder:Z.SELF,extInfo:{hasSocialInsurance:X.HAS},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:z,productCode:(null==(a=ke.value)?void 0:a.productCode)||"",planCode:"",productName:(null==(r=ke.value)?void 0:r.productName)||"",premium:Xe.value||0,tenantOrderRiskList:[]}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:Pe,templateId:(null==Pe?void 0:Pe.templateId)||"1",iseeBizNo:""},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),ra=l((()=>!!ge)),ia=l((()=>{var e,a,t,n,l,r;return!!ke.value&&!!((null==(a=null==(e=ke.value)?void 0:e.tenantProductInsureVO)?void 0:a.planList)&&Array.isArray(null==(n=null==(t=ke.value)?void 0:t.tenantProductInsureVO)?void 0:n.planList)&&(null==(r=null==(l=ke.value)?void 0:l.tenantProductInsureVO)?void 0:r.planList.length)>0)})),sa=l((()=>{if($e.value){const e=[];return Object.keys($e.value).forEach((a=>{e.push(...$e.value[a])})),e}return[]})),ua=l((()=>sa.value.length>0)),oa=l((()=>{var e,a,t;let n={};if((null==(e=Ve.value)?void 0:e.productFactor)?n=null==(a=Ve.value)?void 0:a.productFactor:la.value.activePlanCode&&(n=(null==(t=Ve.value)?void 0:t.planFactor[la.value.activePlanCode])||{}),ua.value&&n[1]){const e=n[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay));e>-1&&(n[1][e].isDisplay=2)}return n})),da=l((()=>{if(oa.value[1]){if(oa.value[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay))>-1)return!0}return!1}));n((()=>ia.value),(()=>{var e,a;ia.value&&(la.value.activePlanCode=la.value.activePlanCode?la.value.activePlanCode:null==(a=null==(e=ke.value)?void 0:e.tenantProductInsureVO)?void 0:a.planList[0].planCode)}),{immediate:!0});const ca=l((()=>{var e,a,t;return ia.value?(null==(a=null==(e=Ve.value)?void 0:e.productRelationPlanVOList.find((e=>e.planCode===la.value.activePlanCode)))?void 0:a.productRiskVoList)||[]:(null==(t=Ve.value)?void 0:t.productRiskVoList)||[]})),va=l((()=>{var e;if(!ke.value)return{};if(ia.value){const a=null==(e=ke.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===la.value.activePlanCode));return a||{}}return ke.value.tenantProductInsureVO.planInsureVO})),pa=e=>{la.value.activePlanCode=e},ma=l((()=>{var e,a,t;if((null==(e=Ve.value)?void 0:e.productQuestionnaireVOList)&&(null==(a=Ve.value)?void 0:a.productQuestionnaireVOList.length)>0){const e=null==(t=Ve.value)?void 0:t.productQuestionnaireVOList[0];if(e){const{basicInfo:{questionnaireType:a},questions:t}=e.questionnaireDetailResponseVO||{};return"2"===String(a)?[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:t,attachmentType:"question"}]:[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:t[0].content,attachmentType:oe(String(t[0].textType),t[0].content)}]}}return[]})),fa=t();n([()=>ia.value,()=>la.value.activePlanCode,()=>ke.value],(()=>{var e,a;let t=null;if(ia.value&&ke.value){const a=null==(e=ke.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===(la.value.activePlanCode||"")));a&&(t=null==a?void 0:a.attachmentVOList)}else ke.value&&(t=null==(a=ke.value)?void 0:a.tenantProductInsureVO.planInsureVO.attachmentVOList);fa.value=t?Object.keys(t).map((e=>(t[e].forEach((e=>{e.attachmentType=oe(String(e.attachmentType),e.attachmentUri)})),{attachmentName:e,attachmentList:t[e]}))):[]}),{immediate:!0});const ya=async({mobile:e,type:a},t)=>{var n;if(Ae.value){if(ra.value)return void(null==t||t());null==(n=Ae.value)||n.validateForm(`${a}_mobile`).then((async()=>{const a=await me(e),{code:n,data:l}=a;"10000"===n&&(null==t||t())}))}},Oa=()=>{xe.value.handleClickTab()("tab3")},Ia=e=>{Ke.value=!1,Object.assign(la.value.tenantOrderHolder,e),i((()=>{Ke.value=!0}))},ha=e=>{Ke.value=!1,Object.assign(la.value.tenantOrderInsuredList[0],e),i((()=>{Ke.value=!0}))},ga=e=>{we.value=e,Te.value=!0},Pa=async()=>{try{await Y(((e={},a={},t={})=>{var n;const l={...t},r={tenantId:z,riskList:(null==(n=l.tenantOrderInsuredList[0])?void 0:n.tenantOrderProductList[0].riskVOList)||[],riskPremium:a,productId:null==e?void 0:e.productBasicInfoVO.id};return l.extInfo.iseeBizNo=Je.value,l.productCode=e.productBasicInfoVO.productCode,l.commencementTime=l.insuranceStartDate,l.expiryDate=l.insuranceEndDate,l.paymentFrequency=l.paymentFrequency||ae.SINGLE,l.tenantOrderHolder={...l.tenantOrderHolder,socialFlag:l.tenantOrderHolder.extInfo.hasSocialInsurance||X.HAS,certType:l.tenantOrderHolder.certType||H.CERT,extInfo:{...l.tenantOrderHolder.extInfo,hasSocialInsurance:l.tenantOrderHolder.extInfo.hasSocialInsurance||X.HAS}},l.tenantOrderInsuredList=l.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||H.CERT,socialFlag:e.socialFlag||X.HAS,planCode:la.value.activePlanCode?la.value.activePlanCode:null}))),l.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:Xe.value,productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:la.value.activePlanCode?la.value.activePlanCode:null,tenantOrderRiskList:ve(r)},l})(Ve.value,Qe.value,la.value),(async(e,a)=>{a===na&&(null==e?void 0:e.orderNo)&&await(async e=>{try{const{code:a,data:t}=await W({orderNo:e,tenantId:z});"10000"===a&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await Y(t))}catch(_a){}})(null==e?void 0:e.orderNo)}))}catch(_a){}},La=async(e,a,t,n=!0)=>{var l;try{ta.value="保费试算中...";const r=ce(t).map((a=>({...a,paymentFrequency:e.paymentFrequency||ae.SINGLE,insurancePeriodValue:e.insurancePeriodValue,coveragePeriod:e.insurancePeriodValue}))),i={tenantId:z,productCode:null==(l=ke.value)?void 0:l.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,paymentFrequency:e.paymentFrequency||ae.SINGLE,holder:{personVO:{...e.tenantOrderHolder,socialFlag:e.tenantOrderHolder.extInfo.hasSocialInsurance||X.HAS,certType:e.tenantOrderHolder.certType||H.CERT,extInfo:{...e.tenantOrderHolder.extInfo,hasSocialInsurance:e.tenantOrderHolder.extInfo.hasSocialInsurance||X.HAS}}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance||X.HAS,certType:e.certType||H.CERT,extInfo:{...e.extInfo,hasSocialInsurance:e.extInfo.hasSocialInsurance||X.HAS}},productPlanVOList:[{insurerCode:a.productBasicInfoVO.insurerCode,planCode:la.value.activePlanCode?la.value.activePlanCode:null,riskVOList:r}]})))},{code:s,message:u}=await Q(i);if("10000"===s){const{code:e,data:a}=await $(i);if("10000"===e){if(ta.value="",la.value.tenantOrderInsuredList[0].tenantOrderProductList=i.insuredVOList[0].productPlanVOList,Xe.value=null==a?void 0:a.premium,la.value.premium=a.premium,la.value.orderAmount=a.premium,la.value.orderRealAmount=a.premium,!n){const e={};a.riskPremiumDetailVOList&&a.riskPremiumDetailVOList.length&&a.riskPremiumDetailVOList.forEach((a=>{e[a.riskCode]={premium:a.premium,amount:a.amount}})),Qe.value=e,fa.value.length>0?(We.value=!1,ga(0)):ma.value.length>0?_e.value=!0:await Pa()}}else ta.value=""}else ta.value="",q(u)}catch(_a){ta.value=""}},Aa=async()=>{var e;try{_e.value=!1,Te.value=!1,Ae.value&&(null==(e=Ae.value)||e.validateForm().then((async()=>{var e;if(ua.value||!da.value)await La(la.value,Ve.value,ca.value,!1);else{const a=null==(e=la.value.tenantOrderHolder)?void 0:e.verificationCode;if(!a||!de(a))return void q({message:"请输入正确的验证码"});const{code:t,data:n}=await fe(la.value.tenantOrderHolder.mobile,a);"10000"===t&&await La(la.value,Ve.value,ca.value,!1)}})))}catch(a){}},xa=e=>{"allFalse"===e?(_e.value=!1,Pa()):B.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{_e.value=!1}))},Ca=()=>{Te.value=!1,ma.value.length<1?Pa():_e.value=!0},ba=()=>{_e.value=!1,Te.value=!1};n((()=>la.value.tenantOrderInsuredList[0].relationToHolder),(()=>{Ke.value=!1,i((()=>{la.value.tenantOrderInsuredList[0]&&la.value.tenantOrderInsuredList[0].extInfo&&!la.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance&&(la.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=X.HAS),Ke.value=!0}))}),{deep:!0,immediate:!0});const ka=()=>{const{name:e,birthday:a,gender:t,certType:n,extInfo:{hasSocialInsurance:l}}=la.value.tenantOrderInsuredList[0];return!!(a&&t&&la.value.paymentFrequency&&e&&pe(e)&&l)},Va=()=>{if(ka()&&(ta.value="保费试算中..."),va.value&&va.value.productPremiumVOList){const e=va.value.productPremiumVOList.find((e=>e.paymentFrequency===la.value.paymentFrequency));e&&(Xe.value=null,Ze.value=e.paymentFrequencyValue?Number(e.paymentFrequencyValue):null,ea.value=e.premiumUnit,aa.value=e.actualPremiumUnit)}};n([()=>va.value,()=>la.value.activePlanCode,()=>la.value.paymentFrequency],(()=>{Va()}),{deep:!0,immediate:!0}),n([()=>la.value.tenantOrderInsuredList[0].birthday,()=>la.value.tenantOrderInsuredList[0].name,()=>la.value.tenantOrderInsuredList[0].gender,()=>la.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance,()=>la.value.activePlanCode,()=>la.value.paymentFrequency,()=>la.value.insurancePeriodValue],M((()=>{if(ka()){if(ra.value)return;La(la.value,Ve.value,ca.value)}else Va()}),500)),n((()=>la.value.tenantOrderInsuredList[0]),(e=>{if(E($e.value))return null;const a=$e.value[e.relationToHolder]||[];return 1===a.length&&(ne.SELF!==e.relationToHolder?la.value.tenantOrderInsuredList[0].dontFetchDefaultInfo||(la.value.tenantOrderInsuredList[0].dontFetchDefaultInfo=!0,la.value.tenantOrderInsuredList[0].certNo=la.value.tenantOrderInsuredList[0].certNo?la.value.tenantOrderInsuredList[0].certNo:a[0].cert[0].certNo,la.value.tenantOrderInsuredList[0].name=la.value.tenantOrderInsuredList[0].name?la.value.tenantOrderInsuredList[0].name:a[0].cert[0].certName,la.value.tenantOrderInsuredList[0].certType=la.value.tenantOrderInsuredList[0].certType?la.value.tenantOrderInsuredList[0].certType:a[0].cert[0].certType||H.CERT,la.value.tenantOrderInsuredList[0].mobile=la.value.tenantOrderInsuredList[0].mobile?la.value.tenantOrderInsuredList[0].mobile:a[0].contact[0].contactNo):la.value.tenantOrderHolder.dontFetchDefaultInfo||(la.value.tenantOrderHolder.dontFetchDefaultInfo=!0,la.value.tenantOrderHolder.certNo=la.value.tenantOrderHolder.certNo?la.value.tenantOrderHolder.certNo:a[0].cert[0].certNo,la.value.tenantOrderHolder.name=la.value.tenantOrderHolder.name?la.value.tenantOrderHolder.name:a[0].cert[0].certName,la.value.tenantOrderHolder.mobile=la.value.tenantOrderHolder.mobile?la.value.tenantOrderHolder.mobile:a[0].contact[0].contactNo,la.value.tenantOrderHolder.certType=la.value.tenantOrderHolder.certType?la.value.tenantOrderHolder.certType:a[0].cert[0].certType||H.CERT)),!1}),{immediate:!0,deep:!0});return i((()=>{F(Ce,(([{isIntersecting:e}],a)=>{be.value=!e}))})),R((()=>{var e;const a=ye.get(ee);if(a){const{tenantOrderHolder:t,tenantOrderInsuredList:n}=a;if(t&&(la.value.tenantOrderHolder={...t,certType:t.certType||H.CERT}),Array(n)&&n[0]){const a=n[0]||{};if(la.value.activePlanCode=a.planCode,a.tenantOrderProductListtenantOrderProductList&&a.tenantOrderProductList[0]&&a.tenantOrderProductList[0].tenantOrderRiskList){const t=null==(e=a.tenantOrderProductList[0].tenantOrderRiskList)?void 0:e.find((e=>"1"===String(e.riskType)));t&&(la.value.paymentFrequency=(null==t?void 0:t.paymentFrequency)?String(null==t?void 0:t.paymentFrequency):ae.SINGLE)}}}})),N((()=>{Ye.value=!0,(async()=>{await K({productCode:U,withInsureInfo:!0,tenantId:z}).then((e=>{var a,t;"10000"===e.code&&(ke.value={...e.data},document.title=(null==(t=null==(a=e.data)?void 0:a.tenantProductInsureVO)?void 0:t.productName)||"")})),await G({productCode:U}).then((e=>{"10000"===e.code&&(He.value=!0,Ve.value=e.data)})),Ye.value=!1})(),setTimeout((async()=>{Je.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),D((()=>{ye.remove(ee)})),(e,a)=>{const t=s("van-config-provider");return o(),d(v,null,[Ye.value?(o(),d("div",Fe,Re)):(o(),I(t,{key:1,"data-skeleton-root":"SHORT","theme-vars":p(_)},{default:A((()=>{var e,t,n,l,r,i,s,u,m;return[c("div",Ne,[c("div",De,[g(re,{"data-skeleton-type":"img",url:null==(t=null==(e=ke.value)?void 0:e.tenantProductInsureVO)?void 0:t.banner[0]},null,8,["url"]),(null==(l=null==(n=ke.value)?void 0:n.tenantProductInsureVO)?void 0:l.bannerMove)?(o(),I(re,{key:0,url:null==(i=null==(r=ke.value)?void 0:r.tenantProductInsureVO)?void 0:i.bannerMove[0],onClick:Oa},null,8,["url"])):O("",!0),c("div",{ref_key:"observeRef",ref:Ce},null,512)]),g(Se,{"show-service-config":"","data-source":null==(s=ke.value)?void 0:s.tenantProductInsureVO,"is-multiple-plan":p(ia),"active-plan-code":la.value.activePlanCode,"payment-frequency":la.value.paymentFrequency,"premium-info":{premium:Xe.value,unit:ea.value,premiumLoadingText:ta.value},onUpdateActivePlan:pa},null,8,["data-source","is-multiple-plan","active-plan-code","payment-frequency","premium-info"]),g(Ee,{ref_key:"detailScrollRef",ref:xe,detail:ke.value},{form:A((()=>[c("div",je,[qe,g(p(P),{ref_key:"formRef",ref:Ae,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":la.value,"need-desensitize":Ke.value,"send-sms-code":ya,"factor-object":p(oa)||{}},V({_:2},[p(sa).length>1?{name:"holderName",fn:A((()=>[g(p(L),{"user-info":la.value.tenantOrderHolder,data:p(sa),onChange:Ia},null,8,["user-info","data"])]))}:void 0,p(sa).length>1?{name:"insurerName",fn:A((()=>[g(p(L),{title:"选择被保人","user-info":la.value.tenantOrderInsuredList[0],data:p(sa),onChange:ha},null,8,["user-info","data"])]))}:void 0]),1032,["form-info","need-desensitize","factor-object"])]),g(p(f),{"form-info":la.value,"insure-detail":Ve.value,"config-detail":ke.value,"is-multiple-plan":p(ia),"premium-info":{premium:Xe.value,unit:ea.value,minPremiun:Ze.value,actualUnit:aa.value,premiumLoadingText:ta.value},onUpdateActivePlan:pa},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","premium-info"])])),_:1},8,["detail"]),(null==(u=ke.value)?void 0:u.tenantProductInsureVO.inscribedContent)?(o(),I(p(x),{key:0,"inscribed-content":null==(m=ke.value)?void 0:m.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):O("",!0),fa.value&&fa.value.length>0?(o(),I(p(C),{key:1,"attachement-list":fa.value,"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>ga(e))},null,8,["attachement-list"])):O("",!0),be.value?(o(),d("div",Be,[c("div",Ue,[ta.value?(o(),d("span",ze,y(ta.value),1)):Xe.value?(o(),d(v,{key:1},[c("span",null,y(p(j)(Xe.value)),1),c("span",null,y(aa.value||"元"),1)],64)):(o(),d(v,{key:2},[c("span",null,y(Ze.value),1),c("span",null,y(ea.value),1)],64))]),g(p(h),{disabled:p(ra),shadow:!1,"theme-vars":p(_),class:"right",text:"立即投保",onClick:Aa},{default:A((()=>[Me])),_:1},8,["disabled","theme-vars"])])):O("",!0)]),He.value?(o(),I(ie,{key:0,"product-detail":ke.value},null,8,["product-detail"])):O("",!0),Ge]})),_:1},8,["theme-vars"])),g(p(m),{show:_e.value,"onUpdate:show":a[1]||(a[1]=e=>_e.value=e),"content-list":p(ma),"active-index":0,onOnConfirmHealth:xa,onOnCloseHealthByMask:ba},null,8,["show","content-list"]),Te.value?(o(),I(p(u),{key:2,show:Te.value,"onUpdate:show":a[2]||(a[2]=e=>Te.value=e),"content-list":fa.value,"is-only-view":We.value,"active-index":we.value,text:We.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:Ca,onOnCloseFilePreviewByMask:ba},null,8,["show","content-list","is-only-view","active-index","text"])):O("",!0)],64)}}}),[["__scopeId","data-v-6a9530c2"]]);export{Qe as default};

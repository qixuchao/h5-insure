import{_ as a,d as e,i as t,h as s,j as o,aH as n,l as r,o as d,c as i,u as l,p as u,q as c,f,a as p,b as m,w as v,v as I,aF as y,aQ as h,ai as g,d1 as b,aG as P,bJ as _,ar as j,cD as w,cE as x,cF as C}from"./index-fb028d1a.js";import{P as N}from"./PolicyInfo-3ad2f943.js";import{u as k}from"./useOrder-c221b577.js";import{p as A}from"./utils-bd8255ed.js";import{g as B,m as E}from"./trial-629a6ac9.js";import{n as O}from"./nextStep-4238a2d6.js";import"./utils-fac4edaf.js";import"./infoCollection-b086ffa0.js";import"./trial-175fa670.js";import"./core-77f373a5.js";const $={class:"bank-info-wrap"},D={class:"footer-button"},G=e({name:"updateBankInfo"});var L=a(e({...G,setup(a){const e=t(),G=s(),{orderNo:L,isShare:T,tenantId:U,nextPageCode:F}=e.query,S=k(),q=o({schema:[],config:[],formData:[]}),V=o(!!T),z=o(),J=o(),M=()=>{G.back()},R=()=>{z.value&&z.value.validate(!1).then((a=>{a&&(S.value.tenantOrderPayInfoList=J,T?(S.value.extInfo.buttonCode=y.UPDATE_BANK_INFO_HOLDER,O(S.value,((a,t)=>{t===h.JUMP_PAGE&&g(a.nextPageCode,e.query)}),e)):(S.value.extInfo.buttonCode=y.UPDATE_BANK_INFO_AGENT,O(S.value,((a,e)=>{e===h.JUMP_PAGE&&((a,e)=>{const{holder:t,insured:s}=S.value;let o={name:t.name,gender:`${w[t.gender]}士`};"insured"===a&&(o={name:null==s?void 0:s[0].name,gender:`${w[null==s?void 0:s[0].gender]}士`}),x({shareType:0,title:`${C[e].title}`,desc:C[e].desc.replace("{name}",`${o.name}${o.gender},`),url:`${window.location.href}&objectType=${a}&isShare=1&nextPageCode=updateBankInfo`.replace("/updateBankInfo","/phoneVerify"),imageUrl:"https://aquarius-v100-test.oss-cn-hangzhou.aliyuncs.com/MyPicture/asdad.png"})})("holder","pay")}),e)))}))};n((()=>{(async()=>{let a={};b({orderNo:L,tenantId:U}).then((({code:a,data:e})=>{"10000"===a&&(J.value=e.tenantOrderPayInfoList)}));const{code:e,data:t}=await B({orderNo:L,tenantId:U});"10000"===e&&(Object.assign(S.value,t,{extInfo:{...t.extInfo,buttonCode:y.SIGN,pageCode:P.SIGN}}),a=A(t.insuredList[0].productList)),E(a).then((({data:a,code:e})=>{if("10000"===e){const{productDetailResList:e,productFactor:t}=a,{payInfo:s}=_(t);q.value={...q.value,...s}}}))})()}));const H=o();return r((()=>{setTimeout((async()=>{H.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(a,e)=>{const t=j;return d(),i("div",$,[l(q).schema.length&&l(J)?(d(),u(N,{key:0,ref_key:"payInfoRef",ref:z,modelValue:l(J),"onUpdate:modelValue":e[0]||(e[0]=a=>c(J)?J.value=a:null),schema:l(q).schema,"is-view":l(V),"user-data":l(S)},null,8,["modelValue","schema","is-view","user-data"])):f("",!0),p("div",D,[m(t,{type:"primary",plain:"",onClick:M},{default:v((()=>[I("取消")])),_:1}),m(t,{type:"primary",onClick:R},{default:v((()=>[I("确认")])),_:1})])])}}}),[["__scopeId","data-v-88f61764"]]);export{L as default};

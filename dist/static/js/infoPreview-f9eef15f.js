import{E as e,d as t,c as n,y as a,i as o,w as r,f as s,R as i,U as l,z as d,g as c,e as u,V as p,bf as f,W as m,X as I,u as v,x as y,r as h,K as O,Y as P,o as _,b as j,h as b,aS as g,aw as C,bs as L,k as V,j as w,P as x,a9 as k}from"./index-811aa171.js";import{t as S}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-221e9d34.js";/* empty css              */import"./bankCard-183fe83c.js";import{_ as E}from"./PayInfo-d068f507.js";import{c as R,i as N}from"./trial-8f723024.js";import{n as T}from"./nextStep-ed78daa7.js";import{u as A}from"./useAttachment-5e4b41ca.js";import{a as D,q as U}from"./product-def3af7b.js";import{g as q}from"./utils-17df2e2e.js";import{u as F}from"./useOrder-9858190b.js";import{p as $}from"./pageJump-30a0dc2e.js";import{B as W,P as B}from"./constants-7afb7c3d.js";import{P as J}from"./index-a807578c.js";import"./infoCollection-7f9729ad.js";import{P as Y}from"./index-297ff860.js";import{I as M,P as z,b as G}from"./trial-d59dfaef.js";import"./pdfh5-008ca364.js";import"./phoneVerify-981ac1f3.js";import"./_initCloneObject-0663309f.js";import"./isObjectLike-a9798079.js";import"./index-c184b165.js";import"./debounce-eed12388.js";import"./index-48c76a81.js";import"./core-b0a6c656.js";import"./constant-c3f28a3b.js";import"./cloneDeep-1de8e9b0.js";const H={class:"com-insured-part-wrapper"},X={class:"content-wrapper"};var K=e(t({__name:"InsureInfo",props:{productData:{default:()=>({})}},setup(e){const t=(e,t)=>-1!==t.indexOf("$")?t.replace("$",`${e}`):`${e||""}${t}`;return(m,I)=>{const v=p,y=f;return n(),a("div",H,[o(y,{title:"保障信息"},{default:r((()=>{var r;return[s("div",X,[(n(!0),a(i,null,l((null==(r=e.productData)?void 0:r.tenantOrderRiskList)||[],((r,p)=>(n(),a("div",{key:p,class:"risk-item"},[s("p",null,d(r.riskName),1),o(v,{title:"保障期间",content:t(r.insurancePeriodValue,c(M)[r.insurancePeriodType])},null,8,["content"]),o(v,{title:"交费期间",content:t(r.paymentPeriod,c(z)[r.paymentPeriodType])},null,8,["content"]),o(v,{title:"交费方式",content:c(G)[r.paymentFrequency]},null,8,["content"]),(n(!0),a(i,null,l(r.liabilityDetails,((e,t)=>(n(),u(v,{key:t,title:e.liabilityName,content:"投保"},null,8,["title"])))),128)),o(v,{title:"保障金额",content:(r.currentAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(v,{title:"首期保费",class:"price",content:(e.productData.premium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])))),128))])]})),_:1})])}}}),[["__scopeId","data-v-3733d720"]]);const Q={class:"long-info-preview"},Z={class:"footer-btn"},ee=s("span",null,"分享",-1),te=t({__name:"infoPreview",setup(e){m((()=>I((()=>import("./index-db6dd320.js")),["static/js/index-db6dd320.js","static/css/index-fa4edf2a.css","static/js/index-811aa171.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js","static/js/index-297ff860.js","static/css/index-827a8544.css","static/js/utils-17df2e2e.js","static/js/infoCollection-7f9729ad.js","static/js/trial-d59dfaef.js"]))),m((()=>I((()=>import("./index-df50c954.js")),["static/js/index-df50c954.js","static/css/index-3329e46f.css","static/js/index-811aa171.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js"])));const t=v(),a=F(),{productCode:i="",tenantId:l,agentCode:d="",agencyCode:p,saleChannelId:f,isShare:M,orderNo:z,extraInfo:G,insurerCode:H,preview:X}=t.query;let te={};try{te=JSON.parse(decodeURIComponent(G))}catch(he){}const ne=y({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),ae=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,oe=h({imgUrl:"",desc:"",title:"",link:ae}),re=h(),se=h(),ie=h({}),le=h({}),de=h([]),ce=h(),ue=h({});h(!1),h(!1),h(0),h(!0),A(ue,ce),h(!1);const pe=h(!1);h(),O((()=>{var e,t;const{insureProductRiskVOList:n}=(null==(t=null==(e=le.value)?void 0:e.productPlanInsureVOList)?void 0:t[0])||{};return(n||[]).find((e=>e.mainRiskFlag===P.YES))}));const fe=h(),me=()=>{T(a.value,((e,t)=>{t===x.JUMP_PAGE&&fe.value.handleShare()}))},Ie=async()=>{Object.assign(a.value,{extInfo:{...a.value.extInfo,buttonCode:W.INFO_PREVIEW,pageCode:B.INFO_PREVIEW}}),T(a.value,((e,n)=>{n===x.JUMP_PAGE&&$(e.nextPageCode,t.query)}))},ve=y({tenantOrderPayInfoList:[]}),ye=async()=>{D({productCode:i,tenantId:l,isTenant:!X}).then((({data:e,code:t})=>{if("10000"===t){ie.value=e,document.title=e.BASIC_INFO.title||"";let t={};const{wxShareConfig:n,showWXShare:a}=(null==e?void 0:e.PRODUCT_LIST)||{};if(n){const{title:e,desc:o,image:r}=n||{},[s=""]=r||[];t={title:e,desc:o,image:s,isShare:a}}else{const{title:n,desc:a,image:o}=(null==e?void 0:e.PRODUCT_LIST)||{};t={title:n,desc:a,image:o,isShare:!1}}Object.assign(oe.value,t)}})),R({orderNo:z,tenantId:l}).then((({code:e,data:t})=>{"10000"===e&&(ve.tenantOrderPayInfoList=t.tenantOrderPayInfoList,Object.assign(a.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),(()=>{const e={},{tenantOrderHolder:t,tenantOrderInsuredList:n}=a.value;e.holder={personVO:{...t,...t.extInfo}},e.insuredVOList=(n||[]).map((e=>({personVO:{...e,...e.extInfo,beneficiaryList:e.tenantOrderBeneficiaryList.map((e=>({personVO:e})))}}))),Object.assign(ne.personalInfo,e)})(),pe.value=!0)})),U({productCode:i}).then((({code:e,data:t})=>{var n,a,o,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:s}=t;ce.value=e||[];const{basicInfo:{questionnaireType:i},questions:l,questionnaireName:d}=(null==(n=null==s?void 0:s[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};i&&(de.value=2===i?[{attachmentName:d,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(a=null==l?void 0:l[0])?void 0:a.content,attachmentType:q(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(r=null==l?void 0:l[0])?void 0:r.content)}])}})),await N({productCode:i,isTenant:!X}).then((({data:e,code:t})=>{var n,a;if("10000"===t){le.value=e,ue.value=(null==(n=e.productPlanInsureVOList)?void 0:n[0])||{};const{payInfo:t}=S(null==(a=ue.value)?void 0:a.productFactor);ne.payInfo={...ne.payInfo,...t}}}))};return _((()=>{ye()})),(e,t)=>{const i=k,l=j("ProPageWrap");return n(),u(l,null,{default:r((()=>{var l,d,p,f,m,I,v;return[s("div",Q,[o(K,{"product-data":null==(p=null==(d=null==(l=c(a).tenantOrderInsuredList)?void 0:l[1])?void 0:d.tenantOrderProductList)?void 0:p[0]},null,8,["product-data"]),(null==(f=c(ue))?void 0:f.productFactor)?(n(),u(c(J),{key:0,ref_key:"personalInfoRef",ref:se,modelValue:c(ne).personalInfo,"onUpdate:modelValue":t[0]||(t[0]=e=>c(ne).personalInfo=e),"product-factor":null==(m=c(ue))?void 0:m.productFactor,"multi-insured-num":null==(v=null==(I=c(ue))?void 0:I.multiInsuredConfigVO)?void 0:v.multiInsuredNum,"is-view":""},null,8,["modelValue","product-factor","multi-insured-num"])):b("",!0),c(ne).payInfo.schema.length?(n(),u(c(E),{key:1,ref_key:"payInfoRef",ref:re,modelValue:c(ve).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>c(ve).tenantOrderPayInfoList=e),schema:c(ne).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):b("",!0),s("div",Z,[!c(M)&&c(oe).isShare?(n(),u(g,C({key:0},c(oe),{class:"share-btn",onClick:L(me,["stop"])}),{default:r((()=>[o(i,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ee])),_:1},16,["onClick"])):b("",!0),o(Y,{shadow:!1,onClick:Ie},{default:r((()=>[V(e.$slots,"default",{},(()=>[w("下一步")]))])),_:3})])])]})),_:3})}}});export{te as default};

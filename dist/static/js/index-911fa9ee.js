import{a8 as e,ac as o,av as a,bb as t,X as l,ag as n,ae as r,aA as u,ah as d,ad as c,a9 as s,af as i,bc as V,as as m,u as p,bd as v,D as f,T as b}from"./index-deb4ddfb.js";import{ref as g,onMounted as h}from"vue";/* empty css              */import{g as N,P as k,u as y,a as C,l as S}from"./core-5f3b09dd.js";import{u as x}from"./theme-65292714.js";import"./pdfh5-e588f83d.js";const[B,w]=e("radio-group"),E={disabled:Boolean,iconSize:o,direction:String,modelValue:a,checkedColor:String},P=Symbol(B);const D=n(Vue.defineComponent({name:B,props:E,emits:["change","update:modelValue"],setup(e,{emit:o,slots:a}){const{linkChildren:n}=t(P);return Vue.watch((()=>e.modelValue),(e=>o("change",e))),n({props:e,updateValue:e=>o("update:modelValue",e)}),l((()=>e.modelValue)),()=>{var o;return Vue.createVNode("div",{class:w([e.direction]),role:"radiogroup"},[null==(o=a.default)?void 0:o.call(a)])}}})),T={name:a,shape:r("round"),disabled:Boolean,iconSize:o,modelValue:a,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var j=Vue.defineComponent({props:u({},T,{bem:d(Function),role:String,parent:Object,checked:Boolean,bindGroup:c}),emits:["click","toggle"],setup(e,{emit:o,slots:a}){const t=Vue.ref(),l=o=>{if(e.parent&&e.bindGroup)return e.parent.props[o]},n=Vue.computed((()=>l("disabled")||e.disabled)),r=Vue.computed((()=>l("direction"))),u=Vue.computed((()=>{const o=e.checkedColor||l("checkedColor");if(o&&e.checked&&!n.value)return{borderColor:o,backgroundColor:o}})),d=a=>{const{target:l}=a,r=t.value,u=r===l||(null==r?void 0:r.contains(l));n.value||!u&&e.labelDisabled||o("toggle"),o("click",a)},c=()=>{const{bem:o,shape:r,checked:d}=e,c=e.iconSize||l("iconSize");return Vue.createVNode("div",{ref:t,class:o("icon",[r,{disabled:n.value,checked:d}]),style:{fontSize:s(c)}},[a.icon?a.icon({checked:d,disabled:n.value}):Vue.createVNode(i,{name:"success",style:u.value},null)])},V=()=>{if(a.default)return Vue.createVNode("span",{class:e.bem("label",[e.labelPosition,{disabled:n.value}])},[a.default()])};return()=>{const o="left"===e.labelPosition?[V(),c()]:[c(),V()];return Vue.createVNode("div",{role:e.role,class:e.bem([{disabled:n.value,"label-disabled":e.labelDisabled},r.value]),tabindex:n.value?void 0:0,"aria-checked":e.checked,onClick:d},[o])}}});const[z,W]=e("radio");const A=n(Vue.defineComponent({name:z,props:T,emits:["update:modelValue"],setup(e,{emit:o,slots:a}){const{parent:t}=V(P),l=()=>{t?t.updateValue(e.name):o("update:modelValue",e.name)};return()=>Vue.createVNode(j,Vue.mergeProps({bem:W,role:"radio",parent:t,checked:(t?t.props.modelValue:e.modelValue)===e.name,onToggle:l},e),m(a,["default","icon"]))}}));const _={class:"pay-amount"},I={class:"amount"},U={class:"order-info"},F={class:"order-name"},G={class:"order-no"},O={key:0},X={class:"pay-wrapper"},q=["src"],J=Vue.defineComponent({name:"Cashier"}),L=Vue.defineComponent({...J,setup(e){var o;const a=x(),t=p().query,l=N(t.payWay||k.WXPAY);console.log(t.payWay,"-----",l);const n=g(),r=g(!1),u=g(null==(o=l[0])?void 0:o.name);g("h5");const d=()=>{C({...n.value,payWay:u.value,code:t.code,extraInfo:JSON.stringify({wxCode:t.code})}).then((e=>{f.confirm({message:"请确认是否已完成支付",showCancelButton:!0,confirmButtonText:"支付成功",cancelButtonText:"遇到问题",theme:"round-button",className:"custom-dialog",teleport:".page-cashier-pay"}).then((()=>{n.value&&(window.location.href=n.value.redirectUrl),console.log("订单信息",n.value)})).catch((()=>{n.value&&(window.location.href=n.value.redirectUrl)}))}))},{copy:c,copied:s,isSupported:i}=v({source:""}),V=()=>{var e;c(null==(e=n.value)?void 0:e.orderNo),b("复制成功")};return y(),h((()=>{r.value=!0,S({orderNo:t.orderNo||"P2211220947519991000001750022183",tenantId:t.tenantId||"9991000001"}).then((e=>{console.log("获取订单信息",e),"10000"===e.code&&(n.value=e.data)})).finally((()=>{r.value=!1}))})),(e,o)=>{const t=Vue.resolveComponent("ProSvg"),r=Vue.resolveComponent("VanButton"),c=Vue.resolveComponent("ProPageWrap"),s=Vue.resolveComponent("van-config-provider");return Vue.openBlock(),Vue.createBlock(s,{"theme-vars":Vue.unref(a)},{default:Vue.withCtx((()=>[Vue.createVNode(c,{title:"收银台","main-class":"page-cashier-pay"},{default:Vue.withCtx((()=>{var e,a,c;return[Vue.createElementVNode("div",_,[Vue.createTextVNode(" ￥"),Vue.createElementVNode("span",I,Vue.toDisplayString(null==(e=Vue.unref(n))?void 0:e.orderAmt),1)]),Vue.createElementVNode("div",U,[Vue.createElementVNode("div",F,Vue.toDisplayString(null==(a=Vue.unref(n))?void 0:a.orderName),1),Vue.createElementVNode("div",G,[Vue.createTextVNode(" 订单号： "+Vue.toDisplayString((null==(c=Vue.unref(n))?void 0:c.orderNo)+" ")+" ",1),Vue.unref(i)?(Vue.openBlock(),Vue.createElementBlock("span",O,[Vue.createVNode(t,{name:"copy",onClick:V})])):Vue.createCommentVNode("",!0)])]),Vue.createElementVNode("div",X,[Vue.createVNode(Vue.unref(D),{modelValue:Vue.unref(u),"onUpdate:modelValue":o[0]||(o[0]=e=>Vue.isRef(u)?u.value=e:null)},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(l),(e=>(Vue.openBlock(),Vue.createElementBlock("div",{key:e.name,class:"pay-item"},[Vue.createElementVNode("span",null,[Vue.createElementVNode("img",{src:e.img},null,8,q),Vue.createTextVNode(Vue.toDisplayString(e.title),1)]),Vue.createVNode(Vue.unref(A),{name:e.name},null,8,["name"])])))),128))])),_:1},8,["modelValue"])]),Vue.createVNode(r,{type:"primary",disabled:!Vue.unref(u),round:"",size:"large",block:"",onClick:d},{default:Vue.withCtx((()=>{var e;return[Vue.createTextVNode("确认付款 ￥"+Vue.toDisplayString(null==(e=Vue.unref(n))?void 0:e.orderAmt),1)]})),_:1},8,["disabled"])]})),_:1})])),_:1},8,["theme-vars"])}}});export{L as default};

import{h as fe,R as Se,P as me,G as p,d as ue,z as re,$ as M,r as L,B as U,k as t,p as ee,m as d,n as c,s as C,v as i,A as ae,E as Be,aa as De,N as de,o as He,F as ge,H as Me,L as Ye,l as je,j as Ke,D as We,T as H,Y as Ze}from"./vendor-4d9de129.js";import{p as ce,s as Ge,u as Je,a as ze}from"./trial-36a523c5.js";import{C as b,V as J,I as Ae,J as se,K as Qe,Y as pe,_ as Xe,a4 as ye}from"./index-6cd418a3.js";import{e as _e,R as $,S as Ce,g as ea}from"./infoCollection-7811d22e.js";import{r as aa}from"./relativeTime-4ed25667.js";import{u as Ve}from"./useDicData-6e77ca44.js";import{g as Fe,o as Ee,a as xe,t as la,b as ua,d as oe}from"./utils-a1dea2d7.js";import{u as oa}from"./theme-775c7ab9.js";import"./order-33544381.js";import{d as be,a as ta,_ as ra}from"./auth-e39b0213.js";import"./trial-42e9c7ea.js";const na={key:0,class:"com-personal-wrapper"},ia={class:"date-extra"},da=Be("\u957F\u671F"),sa=ae("span",{class:"input-extra"},"\u4E07",-1),fa=ae("span",{class:"input-extra"},"\u4E07",-1),ma=ae("span",{class:"input-extra"},"%",-1),ie=fe({props:{formInfo:{default:()=>({})},factorList:{default:()=>[]},images:{default:()=>[]},isView:{type:Boolean,default:!1},prefix:{default:""},beneficiaryList:{default:()=>[]}},emits:["update:images"],setup(o,{emit:Y}){const B=o;Se();const{venderCode:y=""}=me().query,te=Ve(`${y.toLocaleUpperCase()}_OCCUPATION`),g=Ve("NATIONAL_REGION_CODE"),O=p([]),R=p(!1),e=p({formInfo:B.formInfo,birth:{min:new Date("1900-01-01"),max:new Date},certEndDate:{min:new Date("1900-01-01"),max:new Date("2099-12-31")},occupationalText:""});ue.extend(aa);const S=p(B.formInfo.certEndType===2),D=re(()=>{const n={};return B.factorList.forEach(a=>{n[a.code]=a}),console.log("factorObj",D),n}),w=n=>{e.value.formInfo.certNo=n.personIdCard,e.value.formInfo.name=n.personName,e.value.formInfo.certEndDate=ue(n.validDateEnd,"YYYYMMDD").toDate()},r=n=>D.value&&D.value[n]&&D.value[n].isDisplay===pe.YES,s=n=>D.value&&D.value[n]&&D.value[n].isMustInput===pe.YES,u=(n,a)=>{var V,m;return((m=(V=D.value)==null?void 0:V[n])==null?void 0:m[a])||""},z=re(()=>[b.CERT,b.HOUSE_HOLD].includes(`${e.value.formInfo.certType}`)?[J.ID_CARD]:`${e.value.formInfo.certType}`===b.BIRTH?[J.BIRTH]:`${e.value.formInfo.certType}`===b.PASSPORT?[J.PASSPORT]:[]),N=(n,a)=>s("attachment")?e.value.formInfo.certEndType===2||e.value.formInfo.certEndDate?"":"\u8BF7\u9009\u62E9\u6709\u6548\u671F\u81F3":"",q=(n,a)=>/^\d{1,10}(\.\d{1,2})?$/.test(n)?"":"\u5E74\u6536\u5165\u6700\u591A\u5F55\u516510\u4F4D\u6570\u5B57",T=(n,a)=>/^[1-9]$|^[1-9][0-9]$|^100$/.test(n)?"":"\u6536\u76CA\u6BD4\u4F8B\u53EA\u80FD\u586B\u51991-100\u7684\u6B63\u6574\u6570",A=(n,a,V)=>a.length>n?`\u6700\u5927\u4E0D\u80FD\u8D85\u8FC7${n}\u4E2A\u5B57\u7B26`:"",j=(n,a)=>{var V,m,f,E,Q,X,_;if(!r("nationality"))return"";if(((m=(V=e.value.formInfo)==null?void 0:V.extInfo)==null?void 0:m.nationalityCode)==="CHN"){if(![b.CERT,b.HOUSE_HOLD,b.BIRTH,b.MILITARY_CARD].includes(`${n}`))return"\u56FD\u7C4D\u4E3A\u4E2D\u56FD\u65F6\uFF0C\u8BC1\u4EF6\u7C7B\u578B\u53EA\u5141\u8BB8\u9009\u62E9\u8EAB\u4EFD\u8BC1\u3001\u6237\u53E3\u672C\u3001\u51FA\u751F\u8BC1\u3001\u519B\u5B98\u8BC1"}else if(["HKG","MAC"].includes((E=(f=e.value.formInfo)==null?void 0:f.extInfo)==null?void 0:E.nationalityCode)){if(![b.HK_MACAO_RESIDENCE_PERMIT,b.HONGKONG_MACAO].includes(`${n}`))return"\u56FD\u7C4D\u4E3A\u4E2D\u56FD\u9999\u6E2F\u3001\u4E2D\u56FD\u6FB3\u95E8\u65F6\uFF0C\u8BC1\u4EF6\u7C7B\u578B\u53EA\u5141\u8BB8\u9009\u62E9\u6E2F\u6FB3\u901A\u884C\u8BC1\u3001\u6E2F\u6FB3\u5C45\u6C11\u5C45\u4F4F\u8BC1"}else if(((X=(Q=e.value.formInfo)==null?void 0:Q.extInfo)==null?void 0:X.nationalityCode)==="TWN"){if(![b.TAIWAN_RESIDENCE_PERMIT,b.TAIWAN_TRAVEL].includes(`${n}`))return"\u56FD\u7C4D\u4E3A\u4E2D\u56FD\u53F0\u6E7E\u65F6\uFF0C\u8BC1\u4EF6\u7C7B\u578B\u53EA\u5141\u8BB8\u9009\u62E9\u53F0\u6E7E\u901A\u884C\u8BC1\u3001\u53F0\u6E7E\u5C45\u6C11\u5C45\u4F4F\u8BC1"}else if(![b.PASSPORT,b.FOREIGN_PERMANENT].includes(`${n}`))return"\u56FD\u7C4D\u4E3A\u975E\u4E2D\u56FD\u3001\u6E2F\u6FB3\u53F0\u65F6\uFF0C\u8BC1\u4EF6\u7C7B\u578B\u53EA\u5141\u8BB8\u9009\u62E9\u62A4\u7167\u3001\u5916\u56FD\u4EBA\u6C38\u4E45\u5C45\u7559\u8EAB\u4EFD\u8BC1";return ue().year()-ue((_=e.value.formInfo)==null?void 0:_.birthday).year()>2&&n===b.BIRTH?"\u5E74\u9F84\u5927\u4E8E\u7B49\u4E8E2\u5468\u5C81\u65F6\uFF0C\u8BC1\u4EF6\u7C7B\u578B\u4E0D\u80FD\u9009\u62E9\u51FA\u751F\u8BC1":""},K=n=>Array.isArray(n)&&n.length===2&&n[0]&&n[1]?"":"\u8BF7\u4E0A\u4F20\u8EAB\u4EFD\u8BC1\u6B63\u53CD\u9762\u7167\u7247",W=n=>B.beneficiaryList.filter(a=>a.relationToInsured===_e.SPOUSE).length>=2?"\u5DF2\u5B58\u5728\u914D\u5076\u5173\u7CFB\u7684\u53D7\u76CA\u4EBA":"";return M(()=>S.value,n=>{n?(e.value.formInfo.certEndType=2,e.value.formInfo.certEndDate=""):e.value.formInfo.certEndType=1},{immediate:!0}),M(()=>e.value.formInfo.certType,n=>{[b.CERT,b.HOUSE_HOLD].includes(n)?R.value=!0:R.value=!1},{deep:!0,immediate:!0}),M(()=>e.value.formInfo.certNo,n=>{Ae(n)&&(e.value.formInfo.gender=+se(n),e.value.formInfo.birthday=ue(new Date(Qe(n))).format("YYYY-MM-DD"))},{deep:!0,immediate:!0}),M(()=>B.images,n=>{O.value=n},{immediate:!0}),M(()=>B.formInfo,()=>{e.value.formInfo=B.formInfo},{deep:!0,immediate:!0}),M(O,n=>{Y("update:images",n)},{deep:!0}),(n,a)=>{const V=L("ProRadioButton"),m=L("ProField"),f=L("ProDatePicker"),E=L("ProPicker"),Q=L("ProIDCardUpload"),X=L("ProImageUpload"),_=L("van-checkbox"),Z=L("ProCascader");return Object.keys(U(D)).length?(t(),ee("div",na,[r("relationToHolder")?(t(),d(m,{key:0,modelValue:e.value.formInfo.relationToInsured,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.formInfo.relationToInsured=l),name:`${o.prefix}_relationToInsured`,required:s("relationToHolder"),label:u("relationToHolder","title"),rules:[{validator:W}]},{input:c(()=>[C(V,{modelValue:e.value.formInfo.relationToInsured,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.formInfo.relationToInsured=l),"is-view":o.isView,options:u("relationToHolder","attributeValueList")},null,8,["modelValue","is-view","options"])]),_:1},8,["modelValue","name","required","label","rules"])):i("",!0),r("insuredBeneficiaryType")?(t(),d(m,{key:1,modelValue:e.value.formInfo.insuredBeneficiaryType,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.formInfo.insuredBeneficiaryType=l),label:u("insuredBeneficiaryType","title"),name:"insuredBeneficiaryType",placeholder:"\u8BF7\u9009\u62E9"},{input:c(()=>[C(V,{modelValue:e.value.formInfo.insuredBeneficiaryType,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.formInfo.insuredBeneficiaryType=l),options:u("insuredBeneficiaryType","attributeValueList")},null,8,["modelValue","options"])]),_:1},8,["modelValue","label"])):i("",!0),r("insuredRelation")?(t(),d(m,{key:2,modelValue:e.value.formInfo.insuredRelation,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.formInfo.insuredRelation=l),label:u("insuredRelation","title"),name:"insuredRelation",placeholder:"\u8BF7\u9009\u62E9"},{input:c(()=>[C(V,{modelValue:e.value.formInfo.insuredRelation,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.formInfo.insuredRelation=l),options:u("insuredRelation","attributeValueList")},null,8,["modelValue","options"])]),_:1},8,["modelValue","label"])):i("",!0),r("name")?(t(),d(m,{key:3,modelValue:e.value.formInfo.name,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.formInfo.name=l),label:u("name","title"),name:`${o.prefix}_name`,required:s("name")},null,8,["modelValue","label","name","required"])):i("",!0),r("sex")?(t(),d(m,{key:4,modelValue:e.value.formInfo.gender,"onUpdate:modelValue":a[8]||(a[8]=l=>e.value.formInfo.gender=l),required:s("sex"),label:u("sex","title"),name:`${o.prefix}_gender`,placeholder:"\u8BF7\u9009\u62E9","is-view":R.value},{input:c(()=>[C(V,{modelValue:e.value.formInfo.gender,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.formInfo.gender=l),disabled:R.value,"is-view":o.isView,options:u("sex","attributeValueList")},null,8,["modelValue","disabled","is-view","options"])]),_:1},8,["modelValue","required","label","name","is-view"])):i("",!0),r("birthDate")?(t(),d(f,{key:5,modelValue:e.value.formInfo.birthday,"onUpdate:modelValue":a[9]||(a[9]=l=>e.value.formInfo.birthday=l),label:u("birthDate","title"),name:`${o.prefix}_birthday`,min:e.value.birth.min,max:e.value.birth.max,type:"date",required:s("birthDate")},null,8,["modelValue","label","name","min","max","required"])):i("",!0),r("certType")?(t(),d(E,{key:6,modelValue:e.value.formInfo.certType,"onUpdate:modelValue":a[10]||(a[10]=l=>e.value.formInfo.certType=l),label:u("certType","title"),name:`${o.prefix}_certType`,"data-source":u("certType","attributeValueList"),required:s("certType"),rules:[{validator:j}]},null,8,["modelValue","label","name","data-source","required","rules"])):i("",!0),r("certImage")&&e.value.formInfo.certType+""=="1"?(t(),d(m,{key:7,label:"\u8EAB\u4EFD\u8BC1\u4E0A\u4F20",block:"",required:s("certImage"),rules:[{validator:K}],name:`${o.prefix}_idCard`},{input:c(()=>[C(Q,{modelValue:O.value,"onUpdate:modelValue":a[11]||(a[11]=l=>O.value=l),"is-view":o.isView,onOnOCR:w},null,8,["modelValue","is-view"])]),_:1},8,["required","rules","name"])):i("",!0),r("certImage")&&e.value.formInfo.certType&&e.value.formInfo.certType+""!="1"?(t(),d(m,{key:8,label:u("certImage","title"),block:"",required:s("certImage")},{input:c(()=>[C(X,{modelValue:O.value,"onUpdate:modelValue":a[12]||(a[12]=l=>O.value=l),"max-count":1},null,8,["modelValue"])]),_:1},8,["label","required"])):i("",!0),r("certNo")?(t(),d(m,{key:9,modelValue:e.value.formInfo.certNo,"onUpdate:modelValue":a[13]||(a[13]=l=>e.value.formInfo.certNo=l),label:u("certNo","title"),name:`${o.prefix}_certNo`,required:s("certNo"),placeholder:"\u8BF7\u8F93\u5165",maxlength:18,"validate-type":U(z)},null,8,["modelValue","label","name","required","validate-type"])):i("",!0),r("certExpiry")?(t(),d(f,{key:10,modelValue:e.value.formInfo.certEndDate,"onUpdate:modelValue":a[15]||(a[15]=l=>e.value.formInfo.certEndDate=l),label:u("certExpiry","title"),name:`${o.prefix}_certEndDate`,type:"date",min:e.value.certEndDate.min,max:e.value.certEndDate.max,"is-view":S.value||o.isView,read:"",rules:[{validator:N}]},{extra:c(()=>[ae("div",ia,[C(_,{modelValue:S.value,"onUpdate:modelValue":a[14]||(a[14]=l=>S.value=l),"icon-size":16,disabled:o.isView},{default:c(()=>[da]),_:1},8,["modelValue","disabled"])])]),_:1},8,["modelValue","label","name","min","max","is-view","rules"])):i("",!0),r("age")?(t(),d(m,{key:11,modelValue:e.value.formInfo.name,"onUpdate:modelValue":a[16]||(a[16]=l=>e.value.formInfo.name=l),label:u("age","title"),name:`${o.prefix}_age`,required:s("age")},null,8,["modelValue","label","name","required"])):i("",!0),r("residence")?(t(),d(Z,{key:12,modelValue:e.value.formInfo.extInfo.provinceCode,"onUpdate:modelValue":a[17]||(a[17]=l=>e.value.formInfo.extInfo.provinceCode=l),field1:e.value.formInfo.extInfo.provinceCode,"onUpdate:field1":a[18]||(a[18]=l=>e.value.formInfo.extInfo.provinceCode=l),field2:e.value.formInfo.extInfo.cityCode,"onUpdate:field2":a[19]||(a[19]=l=>e.value.formInfo.extInfo.cityCode=l),field3:e.value.formInfo.extInfo.areaCode,"onUpdate:field3":a[20]||(a[20]=l=>e.value.formInfo.extInfo.areaCode=l),label:u("residence","title"),name:`${o.prefix}_provinceCode`,placeholder:"\u8BF7\u9009\u62E9","is-link":"",required:s("residence"),"data-source":U(g),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","label","name","required","data-source"])):i("",!0),r("social")?(t(),d(m,{key:13,modelValue:e.value.formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[22]||(a[22]=l=>e.value.formInfo.extInfo.hasSocialInsurance=l),label:u("social","title"),name:`${o.prefix}_hasSocialInsurance`,placeholder:"\u8BF7\u9009\u62E9",required:s("social")},{input:c(()=>[C(V,{modelValue:e.value.formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[21]||(a[21]=l=>e.value.formInfo.extInfo.hasSocialInsurance=l),"is-view":o.isView,options:u("social","attributeValueList")},null,8,["modelValue","is-view","options"])]),_:1},8,["modelValue","label","name","required"])):i("",!0),r("height")?(t(),d(m,{key:14,modelValue:e.value.formInfo.name,"onUpdate:modelValue":a[23]||(a[23]=l=>e.value.formInfo.name=l),label:u("height","title"),name:`${o.prefix}_height`,required:s("height")},null,8,["modelValue","label","name","required"])):i("",!0),r("weight")?(t(),d(m,{key:15,modelValue:e.value.formInfo.name,"onUpdate:modelValue":a[24]||(a[24]=l=>e.value.formInfo.name=l),label:u("weight","title"),name:`${o.prefix}_weight`,required:s("weight")},null,8,["modelValue","label","name","required"])):i("",!0),r("BMI")?(t(),d(m,{key:16,modelValue:e.value.formInfo.name,"onUpdate:modelValue":a[25]||(a[25]=l=>e.value.formInfo.name=l),label:u("BMI","title"),name:`${o.prefix}_BMI`,required:s("BMI")},null,8,["modelValue","label","name","required"])):i("",!0),r("insuredRiskManagementLevel")?(t(),d(m,{key:17,modelValue:e.value.formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[27]||(a[27]=l=>e.value.formInfo.extInfo.hasSocialInsurance=l),label:u("insuredRiskManagementLevel","title"),name:`${o.prefix}_hasSocialInsurance`,placeholder:"\u8BF7\u9009\u62E9",required:s("insuredRiskManagementLevel")},{input:c(()=>[C(V,{modelValue:e.value.formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[26]||(a[26]=l=>e.value.formInfo.extInfo.hasSocialInsurance=l),"is-view":o.isView,options:u("insuredRiskManagementLevel","attributeValueList")},null,8,["modelValue","is-view","options"])]),_:1},8,["modelValue","label","name","required"])):i("",!0),r("purchaseOtherInsurance")?(t(),d(m,{key:18,modelValue:e.value.formInfo.extInfo.purchaseOtherInsurance,"onUpdate:modelValue":a[29]||(a[29]=l=>e.value.formInfo.extInfo.purchaseOtherInsurance=l),label:u("purchaseOtherInsurance","title"),name:`${o.prefix}_purchaseOtherInsurance`,placeholder:"\u8BF7\u9009\u62E9",required:s("purchaseOtherInsurance")},{input:c(()=>[C(V,{modelValue:e.value.formInfo.extInfo.hasSocialInsurance,"onUpdate:modelValue":a[28]||(a[28]=l=>e.value.formInfo.extInfo.hasSocialInsurance=l),"is-view":o.isView,options:u("purchaseOtherInsurance","attributeValueList")},null,8,["modelValue","is-view","options"])]),_:1},8,["modelValue","label","name","required"])):i("",!0),r("injuryInsurance")?(t(),d(m,{key:19,modelValue:e.value.formInfo.extInfo.injuryInsurance,"onUpdate:modelValue":a[31]||(a[31]=l=>e.value.formInfo.extInfo.injuryInsurance=l),label:u("injuryInsurance","title"),name:`${o.prefix}_hasSocialInsurance`,placeholder:"\u8BF7\u9009\u62E9",required:s("injuryInsurance")},{input:c(()=>[C(V,{modelValue:e.value.formInfo.extInfo.injuryInsurance,"onUpdate:modelValue":a[30]||(a[30]=l=>e.value.formInfo.extInfo.injuryInsurance=l),"is-view":o.isView,options:u("injuryInsurance","attributeValueList")},null,8,["modelValue","is-view","options"])]),_:1},8,["modelValue","label","name","required"])):i("",!0),r("insureArea")?(t(),d(Z,{key:20,label:u("insureArea","title"),name:"insureAreaCode",placeholder:"\u8BF7\u9009\u62E9","is-link":"",required:s("insureArea"),"data-source":U(g),mapping:{label:"name",value:"code",children:"children"}},null,8,["label","required","data-source"])):i("",!0),r("occupation")?(t(),d(Z,{key:21,modelValue:e.value.formInfo.extInfo.occupationCodeList[0],"onUpdate:modelValue":a[32]||(a[32]=l=>e.value.formInfo.extInfo.occupationCodeList[0]=l),field0:e.value.formInfo.extInfo.occupationCodeList[0],"onUpdate:field0":a[33]||(a[33]=l=>e.value.formInfo.extInfo.occupationCodeList[0]=l),field1:e.value.formInfo.extInfo.occupationCodeList[1],"onUpdate:field1":a[34]||(a[34]=l=>e.value.formInfo.extInfo.occupationCodeList[1]=l),field2:e.value.formInfo.extInfo.occupationCodeList[2],"onUpdate:field2":a[35]||(a[35]=l=>e.value.formInfo.extInfo.occupationCodeList[2]=l),label:u("occupation","title"),name:`${o.prefix}_occupationCodeList`,placeholder:"\u8BF7\u9009\u62E9",required:s("occupation"),"data-source":U(te),mapping:{label:"value",value:"code",children:"children"},"is-link":""},null,8,["modelValue","field0","field1","field2","label","name","required","data-source"])):i("",!0),r("personalAnnualIncome")?(t(),d(m,{key:22,modelValue:e.value.formInfo.extInfo.personalAnnualIncome,"onUpdate:modelValue":a[36]||(a[36]=l=>e.value.formInfo.extInfo.personalAnnualIncome=l),label:u("personalAnnualIncome","title"),name:`${o.prefix}_personalAnnualIncome`,required:s("personalAnnualIncome"),placeholder:"\u8BF7\u8F93\u5165",rules:[{validator:q}]},{extra:c(()=>[sa]),_:1},8,["modelValue","label","name","required","rules"])):i("",!0),r("familyAnnualIncome")?(t(),d(m,{key:23,modelValue:e.value.formInfo.extInfo.familyAnnualIncome,"onUpdate:modelValue":a[37]||(a[37]=l=>e.value.formInfo.extInfo.familyAnnualIncome=l),label:u("familyAnnualIncome","title"),name:`${o.prefix}_familyAnnualIncome`,placeholder:"\u8BF7\u8F93\u5165",rules:[{validator:q}],required:s("familyAnnualIncome")},{extra:c(()=>[fa]),_:1},8,["modelValue","label","name","rules","required"])):i("",!0),r("country")?(t(),d(E,{key:24,modelValue:e.value.formInfo.extInfo.nationalityCode,"onUpdate:modelValue":a[38]||(a[38]=l=>e.value.formInfo.extInfo.nationalityCode=l),label:u("country","title"),name:`${o.prefix}_nationalityCode`,"data-source":u("country","attributeValueList"),mapping:{label:"name",value:"code",children:"child"},placeholder:"\u8BF7\u9009\u62E9",required:s("country"),"is-link":""},null,8,["modelValue","label","name","data-source","required"])):i("",!0),r("hasUsCard")?(t(),d(m,{key:25,modelValue:e.value.formInfo.extInfo.hasUsCard,"onUpdate:modelValue":a[40]||(a[40]=l=>e.value.formInfo.extInfo.hasUsCard=l),label:u("hasUsCard","title"),name:`${o.prefix}_hasUsCard`,placeholder:"\u8BF7\u9009\u62E9",required:s("hasUsCard")},{input:c(()=>[C(V,{modelValue:e.value.formInfo.extInfo.hasUsCard,"onUpdate:modelValue":a[39]||(a[39]=l=>e.value.formInfo.extInfo.hasUsCard=l),"is-view":o.isView,options:u("hasUsCard","attributeValueList")},null,8,["modelValue","is-view","options"])]),_:1},8,["modelValue","label","name","required"])):i("",!0),r("marritalStatus")?(t(),d(E,{key:26,modelValue:e.value.formInfo.extInfo.marriageStatus,"onUpdate:modelValue":a[41]||(a[41]=l=>e.value.formInfo.extInfo.marriageStatus=l),label:u("marritalStatus","title"),name:`${o.prefix}_marriageStatus`,placeholder:"\u8BF7\u9009\u62E9","data-source":u("marritalStatus","attributeValueList"),"is-link":"",required:s("marritalStatus")},null,8,["modelValue","label","name","data-source","required"])):i("",!0),r("degree")?(t(),d(E,{key:27,modelValue:e.value.formInfo.extInfo.educationDegree,"onUpdate:modelValue":a[42]||(a[42]=l=>e.value.formInfo.extInfo.educationDegree=l),label:u("degree","title"),name:`${o.prefix}_educationDegree`,"data-source":u("degree","attributeValueList"),mapping:{label:"name",value:"code",children:"child"},placeholder:"\u8BF7\u9009\u62E9",required:s("degree"),"is-link":""},null,8,["modelValue","label","name","data-source","required"])):i("",!0),r("mobile")?(t(),d(m,{key:28,modelValue:e.value.formInfo.mobile,"onUpdate:modelValue":a[43]||(a[43]=l=>e.value.formInfo.mobile=l),label:u("mobile","title"),name:`${o.prefix}_mobile`,placeholder:"\u8BF7\u8F93\u5165",maxlength:11,required:s("mobile"),"validate-type":[U(J).PHONE]},null,8,["modelValue","label","name","required","validate-type"])):i("",!0),r("verificationCode")?(t(),d(m,{key:29,modelValue:e.value.formInfo.verificationCode,"onUpdate:modelValue":a[44]||(a[44]=l=>e.value.formInfo.verificationCode=l),label:u("verificationCode","title"),name:`${o.prefix}_verificationCode`,required:s("verificationCode")},null,8,["modelValue","label","name","required"])):i("",!0),r("isSmoke")?(t(),d(m,{key:30,modelValue:e.value.formInfo.isSmoke,"onUpdate:modelValue":a[46]||(a[46]=l=>e.value.formInfo.isSmoke=l),required:s("isSmoke"),label:u("isSmoke","title"),name:`${o.prefix}_isSmoke`,placeholder:"\u8BF7\u9009\u62E9","is-view":R.value},{input:c(()=>[C(V,{modelValue:e.value.formInfo.isSmoke,"onUpdate:modelValue":a[45]||(a[45]=l=>e.value.formInfo.isSmoke=l),"is-view":o.isView,options:u("isSmoke","attributeValueList")},null,8,["modelValue","is-view","options"])]),_:1},8,["modelValue","required","label","name","is-view"])):i("",!0),r("contactNo")?(t(),d(m,{key:31,modelValue:e.value.formInfo.contactNo,"onUpdate:modelValue":a[47]||(a[47]=l=>e.value.formInfo.contactNo=l),label:u("contactNo","title"),name:`${o.prefix}_contactNo`,required:s("contactNo")},null,8,["modelValue","label","name","required"])):i("",!0),r("email")?(t(),d(m,{key:32,modelValue:e.value.formInfo.email,"onUpdate:modelValue":a[48]||(a[48]=l=>e.value.formInfo.email=l),label:u("email","title"),name:`${o.prefix}_email`,placeholder:"\u8BF7\u8F93\u5165",required:s("email"),"validate-type":[U(J).EMAIL]},null,8,["modelValue","label","name","required","validate-type"])):i("",!0),r("homeAddress")?(t(),d(Z,{key:33,modelValue:e.value.formInfo.extInfo.familyAreaCode,"onUpdate:modelValue":a[49]||(a[49]=l=>e.value.formInfo.extInfo.familyAreaCode=l),field1:e.value.formInfo.extInfo.familyProvinceCode,"onUpdate:field1":a[50]||(a[50]=l=>e.value.formInfo.extInfo.familyProvinceCode=l),field2:e.value.formInfo.extInfo.familyCityCode,"onUpdate:field2":a[51]||(a[51]=l=>e.value.formInfo.extInfo.familyCityCode=l),field3:e.value.formInfo.extInfo.familyAreaCode,"onUpdate:field3":a[52]||(a[52]=l=>e.value.formInfo.extInfo.familyAreaCode=l),label:u("homeAddress","title"),name:`${o.prefix}_familyProvinceCode`,placeholder:"\u8BF7\u9009\u62E9","is-link":"",required:s("homeAddress"),"data-source":U(g),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","label","name","required","data-source"])):i("",!0),r("homeAddressDetail")?(t(),d(m,{key:34,modelValue:e.value.formInfo.extInfo.familyAddress,"onUpdate:modelValue":a[53]||(a[53]=l=>e.value.formInfo.extInfo.familyAddress=l),label:u("homeAddressDetail","title"),name:`${o.prefix}_familyAddress`,placeholder:"\u8BF7\u8F93\u5165",rules:[{validator:(...l)=>A(100,...l)}],required:s("homeAddressDetail")},null,8,["modelValue","label","name","rules","required"])):i("",!0),r("homePostalCode")?(t(),d(m,{key:35,modelValue:e.value.formInfo.extInfo.familyZipCode,"onUpdate:modelValue":a[54]||(a[54]=l=>e.value.formInfo.extInfo.familyZipCode=l),label:u("homePostalCode","title"),name:`${o.prefix}_familyZipCode`,placeholder:"\u8BF7\u8F93\u5165",required:s("homePostalCode"),"validate-type":[U(J).ZIP_CODE]},null,8,["modelValue","label","name","required","validate-type"])):i("",!0),r("workAddress")?(t(),d(Z,{key:36,modelValue:e.value.formInfo.extInfo.workAreaCode,"onUpdate:modelValue":a[55]||(a[55]=l=>e.value.formInfo.extInfo.workAreaCode=l),field1:e.value.formInfo.extInfo.workProvinceCode,"onUpdate:field1":a[56]||(a[56]=l=>e.value.formInfo.extInfo.workProvinceCode=l),field2:e.value.formInfo.extInfo.workCityCode,"onUpdate:field2":a[57]||(a[57]=l=>e.value.formInfo.extInfo.workCityCode=l),field3:e.value.formInfo.extInfo.workAreaCode,"onUpdate:field3":a[58]||(a[58]=l=>e.value.formInfo.extInfo.workAreaCode=l),label:u("workAddress","title"),name:`${o.prefix}_workProvinceCode`,placeholder:"\u8BF7\u9009\u62E9","is-link":"",required:s("workAddress"),"data-source":U(g),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","label","name","required","data-source"])):i("",!0),r("workAddressDetail")?(t(),d(m,{key:37,modelValue:e.value.formInfo.extInfo.workAddress,"onUpdate:modelValue":a[59]||(a[59]=l=>e.value.formInfo.extInfo.workAddress=l),label:u("workAddressDetail","title"),name:`${o.prefix}_workAddress`,placeholder:"\u8BF7\u8F93\u5165",rules:[{validator:(...l)=>A(100,...l)}],required:s("workAddressDetail")},null,8,["modelValue","label","name","rules","required"])):i("",!0),r("workPostalCode")?(t(),d(m,{key:38,modelValue:e.value.formInfo.extInfo.workZipCode,"onUpdate:modelValue":a[60]||(a[60]=l=>e.value.formInfo.extInfo.workZipCode=l),label:u("workPostalCode","title"),required:s("workZipCode"),name:`${o.prefix}_workPostCode`,placeholder:"\u8BF7\u8F93\u5165","validate-type":[U(J).ZIP_CODE]},null,8,["modelValue","label","required","name","validate-type"])):i("",!0),r("companyName")?(t(),d(m,{key:39,modelValue:e.value.formInfo.extInfo.workStation,"onUpdate:modelValue":a[61]||(a[61]=l=>e.value.formInfo.extInfo.workStation=l),label:u("companyName","title"),name:`${o.prefix}_workPostCode`,placeholder:"\u8BF7\u8F93\u5165",rules:[{validator:(...l)=>A(20,...l)}],required:s("companyName")},null,8,["modelValue","label","name","rules","required"])):i("",!0),r("workContent")?(t(),d(m,{key:40,modelValue:e.value.formInfo.extInfo.workContent,"onUpdate:modelValue":a[62]||(a[62]=l=>e.value.formInfo.extInfo.workContent=l),label:u("workContent","title"),name:`${o.prefix}_workContent`,required:s("workContent"),placeholder:"\u8BF7\u8F93\u5165",rules:[{validator:(...l)=>A(100,...l)}]},null,8,["modelValue","label","name","required","rules"])):i("",!0),r("chineseTaxResident")?(t(),d(m,{key:41,modelValue:e.value.formInfo.extInfo.chineseTaxResident,"onUpdate:modelValue":a[64]||(a[64]=l=>e.value.formInfo.extInfo.chineseTaxResident=l),label:u("chineseTaxResident","title"),name:`${o.prefix}_taxResident`,required:s("chineseTaxResident"),placeholder:"\u8BF7\u8F93\u5165"},{input:c(()=>[C(V,{modelValue:e.value.formInfo.extInfo.chineseTaxResident,"onUpdate:modelValue":a[63]||(a[63]=l=>e.value.formInfo.extInfo.chineseTaxResident=l),"is-view":o.isView,options:u("chineseTaxResident","attributeValueList")},null,8,["modelValue","is-view","options"])]),_:1},8,["modelValue","label","name","required"])):i("",!0),r("taxResident")?(t(),d(E,{key:42,modelValue:e.value.formInfo.taxResident,"onUpdate:modelValue":a[65]||(a[65]=l=>e.value.formInfo.taxResident=l),label:u("taxResident","title"),name:`${o.prefix}_benefitOrder`,"data-source":u("taxResident","attributeValueList"),required:s("taxResident")},null,8,["modelValue","label","name","data-source","required"])):i("",!0),r("partTimeJob")?(t(),d(m,{key:43,modelValue:e.value.formInfo.extInfo.isPartTime,"onUpdate:modelValue":a[67]||(a[67]=l=>e.value.formInfo.extInfo.isPartTime=l),label:u("partTimeJob","title"),name:`${o.prefix}_isPartTime`,required:s("partTimeJob"),placeholder:"\u8BF7\u8F93\u5165"},{input:c(()=>[C(V,{modelValue:e.value.formInfo.extInfo.isPartTime,"onUpdate:modelValue":a[66]||(a[66]=l=>e.value.formInfo.extInfo.isPartTime=l),"is-view":o.isView,options:u("partTimeJob","attributeValueList")},null,8,["modelValue","is-view","options"])]),_:1},8,["modelValue","label","name","required"])):i("",!0),r("gasNumberCollection")?(t(),d(m,{key:44,modelValue:e.value.formInfo.extInfo.gasNumberCollection,"onUpdate:modelValue":a[68]||(a[68]=l=>e.value.formInfo.extInfo.gasNumberCollection=l),label:u("gasNumberCollection","title"),name:`${o.prefix}_gasNumberCollection`,required:s("gasNumberCollection"),placeholder:"\u8BF7\u8F93\u5165",rules:[{validator:(...l)=>A(100,...l)}]},null,8,["modelValue","label","name","required","rules"])):i("",!0),r("benefitOrder")?(t(),d(E,{key:45,modelValue:e.value.formInfo.benefitOrder,"onUpdate:modelValue":a[69]||(a[69]=l=>e.value.formInfo.benefitOrder=l),label:u("benefitOrder","title"),name:`${o.prefix}_benefitOrder`,"data-source":u("benefitOrder","attributeValueList"),required:s("benefitOrder")},null,8,["modelValue","label","name","data-source","required"])):i("",!0),r("benefitRate")?(t(),d(m,{key:46,modelValue:e.value.formInfo.benefitRate,"onUpdate:modelValue":a[70]||(a[70]=l=>e.value.formInfo.benefitRate=l),required:s("benefitRate"),name:`${o.prefix}_benefitRate`,rules:[{validator:T}],label:u("benefitRate","title")},{extra:c(()=>[ma]),_:1},8,["modelValue","required","name","rules","label"])):i("",!0)])):i("",!0)}}});const Ia={class:"page-info-wrapper"},va={key:0,class:"beneficiary-part"},ca={class:"part-title"},pa={class:"title"},ya=Be("\u5220\u9664"),Ca=fe({props:{factorObject:null,formData:{default:()=>({})},isView:{type:Boolean,default:!1}},setup(o){const Y=o;De(),me();const B=p({}),y=p({tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),te=p(null),g=p([]),O=p([]);p([]),p([]);const R=p([]);de({beneficiaryId:0,nextPage:"",currentAddress:null,isLoading:!0});const e=D=>{y.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=y.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.filter(w=>w.beneficiaryId!==D.beneficiaryId||D.id!==w.id)},S=()=>{Object.assign(y.value.tenantOrderInsuredList[0],y.value.tenantOrderHolder,{id:y.value.tenantOrderInsuredList[0].id,extInfo:{...y.value.tenantOrderHolder.extInfo,insureProvinceCode:y.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,insureCityCode:y.value.tenantOrderInsuredList[0].extInfo.insureCityCode,insureAreaCode:y.value.tenantOrderInsuredList[0].extInfo.insureAreaCode}})};return He(()=>{const D={BENEFICIARY:Y.factorObject[3],INSURER:Y.factorObject[2],HOLDER:Y.factorObject[1]};B.value=D}),M([()=>y.value.tenantOrderInsuredList[0].relationToHolder,()=>y.value.tenantOrderHolder],()=>{`${y.value.tenantOrderInsuredList[0].relationToHolder}`===$.SELF&&S()},{deep:!0,immediate:!0}),(D,w)=>{const r=L("ProCard"),s=L("ProSvg"),u=L("ProForm");return t(),ee("div",Ia,[C(u,{ref_key:"formRef",ref:te},{default:c(()=>{var z,N,q;return[(z=B.value.HOLDER)!=null&&z.length?(t(),d(r,{key:0,"show-divider":!1,title:"\u672C\u4EBA\u4FE1\u606F\uFF08\u6295\u4FDD\u4EBA\uFF09"},{default:c(()=>[C(ie,{images:g.value,"onUpdate:images":w[0]||(w[0]=T=>g.value=T),"form-info":y.value.tenantOrderHolder,"factor-list":B.value.HOLDER,prefix:"holder","is-view":o.isView},null,8,["images","form-info","factor-list","is-view"])]),_:1})):i("",!0),(N=B.value.INSURER)!=null&&N.length?(t(),d(r,{key:1,"show-divider":!1,title:"\u4E3A\u8C01\u6295\u4FDD\uFF08\u88AB\u4FDD\u4EBA\uFF09"},{default:c(()=>[+y.value.tenantOrderInsuredList[0].relationToHolder!=1?(t(),d(ie,{key:0,images:O.value,"onUpdate:images":w[1]||(w[1]=T=>O.value=T),"form-info":y.value.tenantOrderInsuredList[0],"factor-list":B.value.INSURER||[],prefix:"insure","is-view":o.isView},null,8,["images","form-info","factor-list","is-view"])):i("",!0)]),_:1})):i("",!0),(q=B.value.BENEFICIARY)!=null&&q.length?(t(),d(r,{key:2,"show-divider":!1,title:"\u53D7\u76CA\u4EBA"},{default:c(()=>[y.value.tenantOrderInsuredList[0].insuredBeneficiaryType==2?(t(),ee("div",va,[(t(!0),ee(ge,null,Me(y.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList,(T,A)=>(t(),ee("div",{key:T.beneficiaryId||T.id,class:"beneficiary-item"},[ae("div",ca,[ae("span",pa,Ye(`\u53D7\u76CA\u4EBA${A+1}`),1),C(s,{name:"delete",onClick:j=>e(T)},{default:c(()=>[ya]),_:2},1032,["onClick"])]),C(ie,{images:R.value,"onUpdate:images":w[2]||(w[2]=j=>R.value=j),"form-info":T,"factor-list":B.value.BENEFICIARY||[],prefix:`beneficiary-${A}`,"is-view":o.isView,"beneficiary-list":y.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList},null,8,["images","form-info","factor-list","prefix","is-view","beneficiary-list"])]))),128))])):i("",!0)]),_:1})):i("",!0)]}),_:1},512)])}}});const Va=fe({setup(o){const Y=oa(),B=De(),y=me(),{productCode:te="BWYL2021",tenantId:g,orderNo:O,phoneNo:R,agentCode:e="",saleChannelId:S,paymentMethod:D,certNo:w,name:r,pageCode:s,from:u}=y.query,z={1:[{attributeValues:null,code:"certNo",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u8BC1\u4EF6\u53F7\u7801"},{attributeValues:null,code:"name",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u59D3\u540D"}],2:[],3:[]},N=p(),q=p(),T=p(),A=p(),j=s==="payBack",K=p(!1),W=p(!1),n=p(!1),a=p(0);p(!1),p(!1);const V=p({show:!1,html:""});let m="";const f=de({holder:{certNo:w,certType:b.CERT,mobile:R,name:r,socialFlag:Ce.HAS},insured:{certNo:w,certType:b.CERT,name:r,socialFlag:Ce.HAS,relationToHolder:$.SELF},paymentMethod:D,renewalDK:"Y",paymentFrequency:ea.YEAR,packageProductList:[],mobileSmsCode:""});p(be),p(be);const E=de({showInsure:!j,canInsure:!1,canUpgrade:!1}),Q=re(()=>{var I,v;return((v=(I=q.value)==null?void 0:I.tenantProductInsureVO)==null?void 0:v.attachmentVOList.filter(F=>F.attachmentName==="\u5065\u5EB7\u544A\u77E5"))||[]}),X=re(()=>{var I,v;return((v=(I=q.value)==null?void 0:I.tenantProductInsureVO)==null?void 0:v.attachmentVOList.filter(F=>F.attachmentName!=="\u5065\u5EB7\u544A\u77E5"))||[]}),_=()=>{if(f.holder.certNo){const I=oe(f.holder.certNo,"year"),v=se(f.holder.certNo);if(I<18)return H("\u6295\u4FDD\u4EBA\u5E74\u9F84\u5FC5\u987B\u5927\u4E8E18\u5C81\uFF01"),!1;if(f.insured.certNo&&f.insured.relationToHolder===$.MATE){const F=se(f.insured.certNo);if(v===F)return H("\u88AB\u4FDD\u4EBA\u4E3A\u914D\u5076\u65F6\uFF0C\u6027\u522B\u4E0D\u53EF\u76F8\u540C\uFF01"),!1}}if(f.insured.certNo){const I=oe(f.insured.certNo,"day"),v=oe(f.insured.certNo,"year");if(f.insured.relationToHolder===$.CHILD&&I<30)return H("\u88AB\u4FDD\u4EBA\u4E3A\u5B50\u5973\u65F6\uFF0C\u5E74\u9F84\u5FC5\u987B\u5927\u4E8E\u7B49\u4E8E30\u5929\uFF01"),!1;if(f.insured.relationToHolder===$.PARENT&&v>=71)return H("\u88AB\u4FDD\u4EBA\u4E3A\u7236\u6BCD\u65F6\uFF0C\u5E74\u9F84\u5FC5\u987B\u5C0F\u4E8E\u7B49\u4E8E70\u5C81\uFF01"),!1}if([$.CHILD,$.PARENT].includes(f.insured.relationToHolder)){const I=oe(f.holder.certNo,"year"),v=oe(f.insured.certNo,"year");if(f.insured.relationToHolder===$.CHILD&&I-v<18)return H("\u6295\u4FDD\u4EBA\u548C\u5B50\u5973\u5E74\u9F84\u5FC5\u987B\u76F8\u5DEE18\u5C81\uFF01"),!1;if(f.insured.relationToHolder===$.PARENT&&v-I<18)return H("\u6295\u4FDD\u4EBA\u548C\u7236\u6BCD\u5E74\u9F84\u5FC5\u987B\u76F8\u5DEE18\u5C81\uFF01"),!1}return!0},Z=()=>{const{holder:{certNo:I,mobile:v,name:F,socialFlag:k},insured:{certNo:x,name:P,socialFlag:h,relationToHolder:G},paymentMethod:le}=f;return!!(Ae(x)&&!!h)},l=()=>{B.push({path:"/internet/guaranteeUpgrade",query:{...y.query,tenantId:g,productCode:"BWYL2022",orderNo:O,agentCode:e}})},ke=async I=>{H.loading({message:"\u6838\u4FDD\u4E2D...",forbidClick:!0});try{const v=await Je(I),{code:F}=v;if(F==="10000"){H.loading({message:"\u6838\u4FDD\u4E2D...",forbidClick:!0});const k=await ze({orderNo:I.orderNo,tenantId:g}),{data:x}=k;k.code==="10000"&&(x.type===2?(V.value={show:!0,html:x.paymentUrl},console.log("data.paymentUrl",V.value),Ze(()=>{console.log("document.forms",document.forms);const P=document.getElementById("cashierSubmit");P==null||P.addEventListener("submit",h=>{h.preventDefault()}),P==null||P.submit()})):window.location.href=x.paymentUrl)}E.canInsure=!0}catch{E.canInsure=!0}},we=I=>`${ye}/pay?orderNo=${I}&saleUserId=${e}&tenantId=${g}`,Te=I=>`${ye}/internet/payFail?tenantId=${g}&orderNo=${I}&agentCode=${e}&pageCode=payBack&from=${u||"normal"}`,Ue=async I=>{console.log("risk",I);const v=ua({tenantId:g,saleUserId:e,saleChannelId:S,detail:q.value,insureDetail:T.value,paymentMethod:f.paymentMethod,paymentFrequency:f.paymentFrequency,renewalDK:f.renewalDK,iseeBizNo:m,successJumpUrl:"",premium:A.value,holder:f.holder,insured:f.insured,tenantOrderRiskList:I,orderStatus:"",orderTopStatus:""});try{const F=await Ge(v),{code:k,data:x}=F;k==="10000"&&ke({...v,orderNo:x.data,extInfo:{extraInfo:{renewalDK:f.renewalDK,paymentMethod:f.paymentMethod,paymentFrequency:f.paymentFrequency,successJumpUrl:we(x.data),failUrl:Te(x.data)},iseeBizNo:m}})}catch{E.canInsure=!0}},qe=async()=>{const{calcData:I,riskVOList:v}=Fe({holder:f.holder,insured:f.insured,tenantId:g,productDetail:q.value,insureDetail:T.value,paymentFrequency:f.paymentFrequency,packageRiskIdList:Ee(f.packageProductList)},!1,xe);if(!Array.isArray(v)||v.length<1)return A.value=null,{};const F=await ce(I),{code:k,data:x}=F;return k==="10000"?(A.value=x.premium,{condition:v,data:x}):(A.value=null,{})},Le=I=>{a.value=I,n.value=!0},Oe=()=>new Promise((I,v)=>{var F,k;(k=(F=N.value)==null?void 0:F.validateForm)==null||k.call(F).then(async()=>{var ve;if(!_()){E.canInsure=!0;return}if(!(((ve=N.value)==null?void 0:ve.isAgreeFile)||K.value)){K.value=!1,n.value=!0,Le(0);return}const{calcData:P,riskVOList:h}=Fe({holder:f.holder,insured:f.insured,tenantId:g,productDetail:q.value,insureDetail:T.value,paymentFrequency:f.paymentFrequency,packageRiskIdList:Ee(f.packageProductList)},!1,xe);(!Array.isArray(h)||h.length<1)&&(A.value=null,v(new Error));const G=await ce(P),{code:le,data:ne}=G;le==="10000"?(A.value=ne.premium,I({condition:h,data:ne})):(A.value=null,v(new Error))}).catch(()=>{E.canInsure=!0})}),Pe=async()=>{var I;if(j){l();return}E.canInsure=!1;try{const{condition:v,data:F}=await Oe(),k={},x=(h=[])=>{(h||[]).forEach(G=>{var le;k[G.riskCode]=G,(le=G.riskPremiumDetailVOList)!=null&&le.length&&x(G.riskPremiumDetailVOList)})};x(F.riskPremiumDetailVOList);const P=la({tenantId:g,riskList:v,riskPremium:k,productId:(I=q.value)==null?void 0:I.id});Ue(P)}catch{E.canInsure=!0}},Re=I=>{I==="allFalse"?(W.value=!1,K.value=!0,Pe(),E.canInsure=!0):We.confirm({message:"\u60A8\u5F53\u524D\u7684\u5065\u5EB7\u72B6\u51B5\u4E0D\u7B26\u5408\u8BE5\u4EA7\u54C1",confirmButtonText:"\u786E\u5B9A"}).then(()=>{window.history.back()}).catch(()=>{var v;(v=N.value)==null||v.reEditForm(),K.value=!1,E.canInsure=!0})},Ie=()=>{var I;(I=N.value)==null||I.reEditForm(),K.value=!1,E.canInsure=!0},Ne=()=>{console.log("onCloseHealthPopup========"),W.value=!1,Ie()},he=()=>{console.log("onCloseFilePreview========"),n.value=!1,Ie()},$e=()=>{n.value=!1,W.value=!0};return M([()=>f.insured.certNo,()=>f.insured.socialFlag,()=>f.packageProductList,()=>f.paymentFrequency],je.exports.debounce(()=>{f.insured.certNo&&f.insured.socialFlag&&Z()&&qe()},500),{deep:!0,immediate:!0}),Ke(()=>{setTimeout(async()=>{m=window.getIseeBiz&&await window.getIseeBiz()},1500)}),(I,v)=>{const F=L("ProPageWrap"),k=L("van-config-provider");return t(),ee(ge,null,[C(k,{"theme-vars":U(Y)},{default:c(()=>[C(F,{class:"net-sale-wrap"},{default:c(()=>[C(Ca,{ref_key:"formRef",ref:N,"form-info":q.value,"factor-object":z},null,8,["form-info"])]),_:1})]),_:1},8,["theme-vars"]),C(ta,{show:W.value,"onUpdate:show":v[0]||(v[0]=x=>W.value=x),"content-list":U(Q),"active-index":0,onOnConfirmHealth:Re,onOnCloseHealth:Ne},null,8,["show","content-list"]),n.value?(t(),d(ra,{key:0,show:n.value,"onUpdate:show":v[1]||(v[1]=x=>n.value=x),"content-list":U(X),"active-index":a.value,text:"\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u544A\u77E5\u5185\u5BB9","force-read-cound":2,"on-close-file-preview":"",onSubmit:$e,onOnCloseFilePreview:he},null,8,["show","content-list","active-index"])):i("",!0)],64)}}});var Ua=Xe(Va,[["__scopeId","data-v-496d57cf"]]);export{Ua as default};

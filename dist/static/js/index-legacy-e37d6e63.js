!function(){var e=document.createElement("style");e.innerHTML=".page-salesman-inform .van-cell[data-v-6f1bc28e]{display:flex;align-items:center;padding:.4rem 0}.page-salesman-inform .van-cell[data-v-6f1bc28e] .van-cell__title{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:var(--zaui-aide-text-stress, #0d6efe);line-height:.56rem}.page-salesman-inform .van-cell[data-v-6f1bc28e] .van-cell__value{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#99a9c0;line-height:.56rem}.page-salesman-inform .van-cell .active[data-v-6f1bc28e],.page-salesman-inform[data-v-6f1bc28e] .is-active .van-cell__value span{color:var(--van-primary-color, var(--zaui-brand))}.page-salesman-inform .resign[data-v-6f1bc28e]{font-size:.37333rem;color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .date[data-v-6f1bc28e]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-salesman-inform .inform-file[data-v-6f1bc28e]{display:flex;position:absolute;bottom:2.33333rem;padding:0 .4rem}.page-salesman-inform .inform-file .tips[data-v-6f1bc28e]{margin-left:.29333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#393d46;line-height:.53333rem}.page-salesman-inform .inform-file .tips>span[data-v-6f1bc28e]{color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .inform-file .next-btn[data-v-6f1bc28e]{padding:.4rem 0}.page-salesman-inform .inform-file .next-btn .van-button[data-v-6f1bc28e]{border-radius:.10667rem}\n",document.head.appendChild(e),System.register(["./index-legacy-67f9b994.js","./inform-legacy-6ba9fc4f.js","./verify-legacy-d80e5e38.js","./notice-legacy-eefb6daa.js","./pdfh5-legacy-9f98dc45.js"],(function(e){"use strict";var a,t,n,i,o,l,r,s,c,d,u,f,g,p,m,v,y,h,b,C,T,x,_,k,j,D,I,L,q,N,P,S,z,F,A,E,w,M,R,B,G,Y;return{setters:[function(e){a=e._,t=e.d,n=e.u,i=e.a,o=e.r,l=e.ad,r=e.J,s=e.G,c=e.C,d=e.v,u=e.b,f=e.c,g=e.e,p=e.w,m=e.f,v=e.P,y=e.h,h=e.F,b=e.i,C=e.g,T=e.L,x=e.j,_=e.t,k=e.a7,j=e.n,D=e.aa,I=e.p,L=e.ak,q=e.al,N=e.H,P=e.T,S=e.M,z=e.N,F=e.O,A=e.af,E=e.B},function(e){w=e.l,M=e.g},function(e){R=e.s},function(e){B=e.d,G=e.A,Y=e.e},function(){}],execute:function(){const O={class:"date"},U={class:"inform-file"},V={class:"tips"},H={class:"footer-button"},$=t({__name:"index",setup(e){const a=n(),t=i(),{productCode:$="MMBBSF",agentCode:J="65434444",tenantId:W="9991000007",agencyCode:K="3311222",insurerCode:Q="zhongan",productCategory:X=1,templateId:Z=1,orderNo:ee="2022080217103534947"}=t.query,ae=o(null),te=o(!1),ne=l().format("YYYY-MM-DD"),ie=o(""),oe=o(),le=()=>{var e;null===(e=ae.value)||void 0===e||e.clear()},re=r({noticeType:"",materialSource:"",noticeList:[],pageData:{}});s((()=>{I({orderNo:ee,saleUserId:J,tenantId:W}).then((({code:e,data:a})=>{"10000"===e&&(Object.assign(re.pageData,a),a.tenantOrderAttachmentList.forEach((e=>{e.category===L.ELECTRIC_SIGN&&e.objectType===q.AGENT&&ae.value.setDataURL(e.fileBase64)})))})),w({insurerCode:Q,orderNo:ee,productCategory:X,tenantId:W,noticeType:G,objectType:Y}).then((({code:e,data:a})=>{"10000"===e&&(re.noticeList=[...re.noticeList,...a])}))}));const se=()=>{var e,n;if(!(re.noticeList&&re.noticeList.every((e=>1===e.isDone))))return void P("请完成所有告知进行下一步");if(null!==(e=ae.value)&&void 0!==e&&e.isEmpty())return void P("请完成代理人签字进行下一步");if(!te.value)return void P("请勾选同意签名");const i=null===(n=ae.value)||void 0===n?void 0:n.save();R("AGENT",i,re.pageData.id,W).then((e=>{e&&S({...re.pageData,extInfo:{...re.pageData.extInfo,templateId:Z,pageCode:"salesNotice",buttonCode:z.salesNotice},venderCode:Q}).then((({code:e,data:n})=>{"10000"===e&&"jumpToPage"===n.pageAction.pageAction&&a.push({path:F[n.pageAction.data.nextPageCode],query:{...t.query}})}))}))};return(e,n)=>{const i=c,o=A,l=d,r=E,s=u("ProPageWrap");return f(),g(s,{class:"page-salesman-inform"},{default:p((()=>[m(v,{title:"营销员告知书"},{default:p((()=>[(f(!0),y(h,null,b(C(re).noticeList,(e=>(f(),g(i,{key:e.id,class:T({"is-active":2===e.isDone}),title:`《${e.title}》`,"is-link":"",value:""+(1===e.isDone?"已完成":"去完成"),onClick:n=>{return i=e,N.set("questionData",i),void a.push({path:"/healthNotice",query:{questionnaireType:i.questionnaireType,...t.query}});var i}},null,8,["class","title","value","onClick"])))),128))])),_:1}),m(v,{title:"营销员签字","show-divider":!1,"show-line":!1},{extra:p((()=>[x("div",{class:"resign",onClick:le},"重签")])),default:p((()=>[m(o,{ref_key:"agentSignRef",ref:ae,selector:"sign2"},null,512),x("div",O,"签名日期： "+_(C(ne)),1)])),_:1}),x("div",U,[m(l,{modelValue:C(te),"onUpdate:modelValue":n[0]||(n[0]=e=>k(te)?te.value=e:null),shape:"square"},null,8,["modelValue"]),x("p",V,[j(" 您的签名将被用于"),(f(!0),y(h,null,b(C(re).noticeList,((e,a)=>(f(),g(D,{key:a,class:"file",title:`《${e.title}》`,content:C(oe),type:C(ie),onClick:a=>(e=>{const{id:a,objectType:t}=e,n={1:"pdf",2:"richText",3:"link"};M({insurerCode:Q,id:a,objectType:t,productCategory:X,orderNo:ee,tenantId:W}).then((({code:e,data:a})=>{"10000"===e&&((null==a?void 0:a[0].questionType)===B?(ie.value="question",oe.value=a):(1===(null==a?void 0:a[0].textType)&&null!=a&&a[0].content.includes("png")?ie.value="picture":ie.value=n[null==a?void 0:a[0].textType],oe.value=null==a?void 0:a[0].content))}))})(e)},null,8,["title","content","type","onClick"])))),128)),j("文件 ")])]),x("div",H,[m(r,{type:"primary",block:"",onClick:se},{default:p((()=>[j("下一步")])),_:1})])])),_:1})}}});e("default",a($,[["__scopeId","data-v-6f1bc28e"]]))}}}))}();

import{_ as e,d as a,i as s,h as t,j as o,aE as n,o as r,c as d,u as i,m as l,f as c,a as u,b as p,w as m,a8 as f,aL as h,a9 as y,bs as v,ag as g,ck as I,cl as j,cm as b,bV as k}from"./index-4ae91e98.js";import{_ as C}from"./PolicyInfo-ede78016.js";import{u as P}from"./useOrder-0802f588.js";import{p as x}from"./utils-f9e9a9a4.js";import{s as $,g as _,m as w}from"./trial-ad6d976f.js";import{n as L}from"./nextStep-03a1c6ec.js";import{B as S,a as V}from"./constants-62d1c4af.js";import"./utils-3abe963e.js";import"./infoCollection-3579fe70.js";import"./trial-94dafdeb.js";import"./core-0937c4f4.js";const B={class:"bank-info-wrap"},N={class:"footer-button"},O=a({name:"updateBankInfo"});var U=e(a({...O,setup(e){const a=s(),O=t(),{orderNo:U,isShare:q,tenantId:G,nextPageCode:D}=a.query,E=P(),M=o({schema:[],config:[],formData:[]}),R=o(!!q),T=o(),z=()=>{O.back()},A=()=>{T.value&&T.value.validate(!1).then((e=>{e&&(q?L(E.value,((e,s)=>{s===h.JUMP_PAGE&&y(e.nextPageCode,a.query)}),a):$(E.value).then((({code:e,data:a})=>{"10000"===e&&((e,a)=>{const{holder:s,insured:t}=E.value;let o={name:s.name,gender:`${I[s.gender]}士`};"insured"===e&&(o={name:null==t?void 0:t[0].name,gender:`${I[null==t?void 0:t[0].gender]}士`}),j({shareType:0,title:`${b[a].title}（${k[e.toLocaleUpperCase()]}）`,desc:b[a].desc.replace("{name}",`${o.name}${o.gender},`),url:`${window.location.href}&objectType=${e}&isShare=1&nextPageCode=updateBankInfo`.replace("/updateBankInfo","/phoneVerify"),imageUrl:"https://aquarius-v100-test.oss-cn-hangzhou.aliyuncs.com/MyPicture/asdad.png"})})("holder","pay")})))}))};return n((()=>{(async()=>{let e={};const{code:a,data:s}=await _({orderNo:U,tenantId:G});"10000"===a&&(Object.assign(E.value,s,{extInfo:{...s.extInfo,buttonCode:S.SIGN,pageCode:V.SIGN}}),e=x(s.insuredList[0].productList)),w(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:s}=e,{payInfo:t}=v(s);M.value={...M.value,...t}}}))})()})),(e,a)=>{const s=g;return r(),d("div",B,[i(M).schema.length?(r(),l(C,{key:0,ref_key:"payInfoRef",ref:T,modelValue:i(E).tenantOrderPayInfoList,"onUpdate:modelValue":a[0]||(a[0]=e=>i(E).tenantOrderPayInfoList=e),schema:i(M).schema,"is-view":i(R)},null,8,["modelValue","schema","is-view"])):c("",!0),u("div",N,[p(s,{type:"primary",plain:"",onClick:z},{default:m((()=>[f("取消")])),_:1}),p(s,{type:"primary",onClick:A},{default:m((()=>[f("确认")])),_:1})])])}}}),[["__scopeId","data-v-31721e96"]]);export{U as default};

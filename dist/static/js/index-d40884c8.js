import{d as e,h as t,o as a,c as l,a as s,e as n,b as o,F as d,q as i,m as c,u as r,_ as u,aC as m,aD as p,cP as v,i as f,j as b,k as y,B as g,O as h,p as j,dq as _,w as C,a9 as N,T as k}from"./index-c385ff03.js";import{P as x}from"./index-d74b97bf.js";import{_ as I}from"./index-47048e8d.js";import{L as D}from"./index-90d60454.js";import{I as q}from"./infoItem-9cdbe6e7.js";import{O}from"./OperateBtn-e91d0007.js";import{t as S}from"./format-666c4946.js";import{q as w}from"./order-38005c23.js";import"./empty-ae586b6c.js";import"./constants-4b08cf92.js";const U={class:"com-order-item"},V={class:"header"},B={class:"product-name"},L={class:"status"},P={class:"info"},T={class:"info-bottom"},z=(e=>(m("data-v-40dd5e97"),e=e(),p(),e))((()=>s("div",{style:{width:"25%"}},[s("img",{src:"/static/png/tree-0f48942e.png",alt:"",style:{width:"80%"}})],-1))),A={class:"footer"};var F=u(e({__name:"item",props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup:(e,{emit:u})=>(t(),(t,u)=>{var m;return a(),l("div",U,[s("div",V,[s("div",B,n(e.detail.productName),1),s("div",L,n(e.detail.orderStatusDesc),1)]),s("div",P,[o(q,{label:"订单号",content:e.detail.orderNo,line:"","is-copy":""},null,8,["content"]),(a(!0),l(d,null,i(e.detail.applicationNo||[""],(e=>(a(),c(q,{key:e,label:"投保单号",content:e,line:"","is-copy":""},null,8,["content"])))),128)),o(q,{label:"保单号",content:e.detail.policyNo,line:"","is-copy":""},null,8,["content"]),s("div",T,[s("div",null,[o(q,{label:"投保人",content:e.detail.holderName,line:""},null,8,["content"]),o(q,{label:"被保人",content:null==(m=e.detail.insuredName)?void 0:m[0],line:""},null,8,["content"]),o(q,{label:"创建时间",content:e.detail.orderStartDate,line:""},null,8,["content"]),o(q,{label:"保费",content:r(S)(e.detail.premium),line:""},null,8,["content"])]),z])]),s("div",A,[o(O,{detail:e.detail},null,8,["detail"])])])})}),[["__scopeId","data-v-40dd5e97"]]);const R={class:"page-order"},E={key:1,class:"empty-box"};var G=u(e({__name:"index",setup(e){v(),t();const s=f(),{type:n,tenantId:u,agentCode:m}=s.query,p=b({"-1":1,0:2,1:3,2:4}[n]||0),q=b(1),O=b(!1),S=b(!1),U=b(!1),V=b([]);b(0),b(0),b(0);const B=[{title:"全部",status:""},{title:"待处理",status:"-1"},{title:"待支付",status:"0"},{title:"已完成",status:"1"},{title:"已失效",status:"2"}],L=y((()=>(V.value=[],B[p.value].status))),P=()=>{k.loading({message:"加载中...",forbidClick:!0}),O.value=!0,w({condition:{orderTopStatus:L.value,tenantId:u,agentCode:m},pageSize:10,pageNum:q.value}).then((e=>{const{code:t,data:a}=e;"10000"===t&&a&&(O.value=!1,S.value=!1,1===q.value?V.value=a.datas||[]:V.value=V.value.concat(a.datas||[]),a.datas.length<10&&(U.value=!0))})).then((()=>{k.clear()}))},T=()=>{q.value+=1,P()},z=()=>{q.value=1,P()};return g(L,(()=>{q.value=1,P()})),h((()=>{P()})),(e,t)=>{const s=D,n=I,v=x;return a(),l("div",R,[o(_,{active:r(p),"onUpdate:active":t[0]||(t[0]=e=>j(p)?p.value=e:null),list:B,class:"tab","title-active-color":"#c41e21"},null,8,["active"]),o(v,{modelValue:r(S),"onUpdate:modelValue":t[2]||(t[2]=e=>j(S)?S.value=e:null),onRefresh:z},{default:C((()=>[r(V).length?(a(),c(s,{key:0,loading:r(O),"onUpdate:loading":t[1]||(t[1]=e=>j(O)?O.value=e:null),class:"body",finished:r(U),onLoad:T},{default:C((()=>[(a(!0),l(d,null,i(r(V),((e,t)=>(a(),c(F,{key:t,detail:e,onClick:t=>(e=>{const{orderNo:t,insurerCode:a}=e;N("orderDetail",{orderNo:t,agentCode:m,tenantId:u,insurerCode:a})})(e),onAfterDelete:z},null,8,["detail","onClick"])))),128))])),_:1},8,["loading","finished"])):(a(),l("div",E,[o(n,{title:"暂无投保单","empty-class":"empty-select"})]))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-d708826c"]]);export{G as default};

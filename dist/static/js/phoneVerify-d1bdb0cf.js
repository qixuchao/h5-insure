import{G as a,d as e,r as s,u as r,a1 as t,b as l,c as o,e as n,w as d,f as u,E as c,g as i,ag as p,a2 as v,bD as I,F as m,i as f,j as C,m as N,T as b,bE as h,p as _,B as E,al as T,am as S}from"./index-3c7e3218.js";import{s as y,c as O}from"./phoneVerify-890f1586.js";import{c as j}from"./format-12461bbc.js";import{u as g}from"./useOrder-2537193b.js";import"./pdfh5-008ca364.js";const D={class:"page-phone-verify"},P=(a=>(T("data-v-5c8c646c"),a=a(),S(),a))((()=>u("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息填写",-1))),A={class:"phone"},F={class:"input-wrapper"};var U=a(e({__name:"phoneVerify",setup(a){const e=g(),T=s(""),S=s(""),U=s(0);let q;const w=r(),{agentCode:G,tenantId:R,templateId:V,productCode:W,insurerCode:k,orderNo:x}=w.query,B=()=>{y(T.value).then((({code:a})=>{"10000"===a&&(U.value=60,q=setInterval((()=>{U.value-=1,U.value<=0&&clearInterval(q)}),1e3))}))},H=()=>{O(T.value,S.value).then((({code:a,data:s})=>{"10000"===a&&s?(b.success("验证成功"),e.value.orderStatus===h.PROCESSING?_("infoCollection",{...w.query,isShare:1}):[h.WAIT_IDENTIFICATION,h.IDENTIFICATION_COMPLETE,h.IN_IDENTIFICATION,h.UNDER_WRITING_SUCCESS].includes(e.value.orderStatus)&&_("infoPreview",{...w.query,isShare:1})):b.fail("验证失败")}))};return t((()=>{N({orderNo:x,saleUserId:G,tenantId:R}).then((({code:a,data:s})=>{var r;"10000"===a&&(Object.assign(e.value,s),T.value=null==(r=null==s?void 0:s.tenantOrderHolder)?void 0:r.mobile)}))})),(a,e)=>{const s=E,r=l("ProPageWrap");return o(),n(r,null,{default:d((()=>[u("div",D,[P,u("div",A,c(i(j)(i(T)||"")),1),u("div",F,[p(u("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>v(S)?S.value=a:null),placeholder:"请输入验证码",class:"input"},null,512),[[I,i(S)]]),u("div",{class:m(["btn",{second:i(U)}]),onClick:B},c(i(U)?`${i(U)}s`:"发送验证码"),3)]),f(s,{type:"primary",class:"submit-btn",onClick:H},{default:d((()=>[C("下一步")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-5c8c646c"]]);export{U as default};

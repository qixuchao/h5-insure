import{_ as e,d as t,h as a,o as l,c as s,a as n,e as o,b as d,F as i,q as c,m as r,u,aC as m,aD as p,cP as v,i as f,j as b,k as y,B as g,O as h,p as j,dq as _,w as C,a9 as N,T as k}from"./index-2ddfdf05.js";import{P as x}from"./index-c09cd98d.js";import{_ as I}from"./index-b0fff8eb.js";import{L as D}from"./index-744f15ad.js";import{I as q}from"./infoItem-c757a5ea.js";import{O}from"./OperateBtn-a94ad372.js";import{t as S}from"./format-666c4946.js";import{q as w}from"./order-b395f3c3.js";import"./empty-ae586b6c.js";import"./constants-4b08cf92.js";const U={class:"com-order-item"},V={class:"header"},B={class:"product-name"},L={class:"status"},P={class:"info"},T={class:"info-bottom"},z=(e=>(m("data-v-40dd5e97"),e=e(),p(),e))((()=>n("div",{style:{width:"25%"}},[n("img",{src:"/static/png/tree-0f48942e.png",alt:"",style:{width:"80%"}})],-1))),A={class:"footer"};var F=e(t({__name:"item",props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup:(e,{emit:t})=>(a(),(t,a)=>{var m;return l(),s("div",U,[n("div",V,[n("div",B,o(e.detail.productName),1),n("div",L,o(e.detail.orderStatusDesc),1)]),n("div",P,[d(q,{label:"订单号",content:e.detail.orderNo,line:"","is-copy":""},null,8,["content"]),(l(!0),s(i,null,c(e.detail.applicationNo||[""],(e=>(l(),r(q,{key:e,label:"投保单号",content:e,line:"","is-copy":""},null,8,["content"])))),128)),d(q,{label:"保单号",content:e.detail.policyNo,line:"","is-copy":""},null,8,["content"]),n("div",T,[n("div",null,[d(q,{label:"投保人",content:e.detail.holderName,line:""},null,8,["content"]),d(q,{label:"被保人",content:null==(m=e.detail.insuredName)?void 0:m[0],line:""},null,8,["content"]),d(q,{label:"创建时间",content:e.detail.orderStartDate,line:""},null,8,["content"]),d(q,{label:"保费",content:u(S)(e.detail.premium),line:""},null,8,["content"])]),z])]),n("div",A,[d(O,{detail:e.detail},null,8,["detail"])])])})}),[["__scopeId","data-v-40dd5e97"]]);const R={class:"page-order"},E={key:1,class:"empty-box"};var G=e(t({__name:"index",setup(e){v(),a();const t=f(),{type:n,tenantId:o,agentCode:m}=t.query,p=b({"-1":1,0:2,1:3,2:4}[n]||0),q=b(1),O=b(!1),S=b(!1),U=b(!1),V=b([]);b(0),b(0),b(0);const B=[{title:"全部",status:""},{title:"待处理",status:"-1"},{title:"待支付",status:"0"},{title:"已完成",status:"1"},{title:"已失效",status:"2"}],L=y((()=>(V.value=[],B[p.value].status))),P=()=>{k.loading({message:"加载中...",forbidClick:!0}),O.value=!0,w({condition:{orderTopStatus:L.value,tenantId:o,agentCode:m},pageSize:10,pageNum:q.value}).then((e=>{const{code:t,data:a}=e;"10000"===t&&a&&(O.value=!1,S.value=!1,1===q.value?V.value=a.datas||[]:V.value=V.value.concat(a.datas||[]),a.datas.length<10&&(U.value=!0))})).then((()=>{k.clear()}))},T=()=>{q.value+=1,P()},z=()=>{q.value=1,P()};return g(L,(()=>{q.value=1,P()})),h((()=>{P()})),(e,t)=>{const a=D,n=I,v=x;return l(),s("div",R,[d(_,{active:u(p),"onUpdate:active":t[0]||(t[0]=e=>j(p)?p.value=e:null),list:B,class:"tab","title-active-color":"#c41e21"},null,8,["active"]),d(v,{modelValue:u(S),"onUpdate:modelValue":t[2]||(t[2]=e=>j(S)?S.value=e:null),onRefresh:z},{default:C((()=>[u(V).length?(l(),r(a,{key:0,loading:u(O),"onUpdate:loading":t[1]||(t[1]=e=>j(O)?O.value=e:null),class:"body",finished:u(U),onLoad:T},{default:C((()=>[(l(!0),s(i,null,c(u(V),((e,t)=>(l(),r(F,{key:t,detail:e,onClick:t=>(e=>{const{orderNo:t,insurerCode:a}=e;N("orderDetail",{orderNo:t,agentCode:m,tenantId:o,insurerCode:a})})(e),onAfterDelete:z},null,8,["detail","onClick"])))),128))])),_:1},8,["loading","finished"])):(l(),s("div",E,[d(n,{title:"暂无投保单","empty-class":"empty-select"})]))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-d708826c"]]);export{G as default};

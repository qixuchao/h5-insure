import{h as R,at as O,r as x,N as T,$ as S,m as B,s as w,B as s,C as t,t as p,Z as P,a5 as H,a6 as K,aa as U,P as Y,j as q,k as L,n as M,p as v,H as Q,F as W}from"./vendor-e88cb016.js";import{P as b}from"./index-f18f44ff.js";import{B as j}from"./index-5e02f433.js";import{_ as k}from"./index-249c2374.js";import{a as z,s as J}from"./phoneVerify-0a42bcf6.js";import{_ as N}from"./index-47352d37.js";import{p as X,g as G}from"./product-5b814f2a.js";import{i as Z,t as $,n as ee}from"./trial-2cfe4dde.js";import{f as te}from"./utils-7c77a7eb.js";import{u as oe}from"./theme-e4a7893d.js";import"./check-detail-60b0cbde.js";import"./infoCollection-2d7dfb8c.js";import"./relativeTime-0177496a.js";import"./useDicData-0bc16c8c.js";import"./trial-0b9cd392.js";var E="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAYAAAC2Xen2AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVqADAAQAAAABAAAAHgAAAABxFx1vAAABtUlEQVRoBe2ZP06EUBDGv2eWdTtbay9goZ2FlYmVra0a9AbrIfQGuqK9nTeQxE6LvcDWtnSrCDhDsgQR2LcbpuBlSDYM84bv2/ll+JNgsGT79rFHJe+Vsv3hBB+VnMhhX/03RGioKBSs0BAoWAUrREBIVidWwQoREJLViVWwQgSEZHViFawQASFZnVgFK0RASFYnVsEKERCS1YlVsEIEhGR1YoXAmi8fNwYYd6mfAbebE1zbaLrqT0wB+vwR0O7cBoRFzSN9trmwqCtKXPTPbwVehEuT4aXodM2ANVhr1dNd9M/BmmckgwSnBCRcFUqpPmQN1irlrEIX/fNbwaL77ApbcYZXZNhd5Kz2BlPP4NDcIbKqbyhyyf8PWO43O8N2PMAbhTsN/VfTM+8HB+YJn9WFdY5d8c9vBWUADChNcURP9qWguIZru4LK/8MV/39gublRgJlJcUxh26UdcQ3X8jldbi7414JlSMMAU3rKn1A4r4E25zWuqVnrJNV3/0awTMd7QJia/G2h/KRPOMdrnRBsEemzfytY7nl0T++3Bn7RP8V5rkjIBs77xz7G/JPF2KzeN/9fBin2izf9UfQAAAAASUVORK5CYII=";const re=a=>(H("data-v-dcd9ca58"),a=a(),K(),a),se={class:"free-crad"},ae={class:"container"},ne={class:"title"},le=["src"],ie=re(()=>s("span",null,"\u6700\u540E\u4E00\u6B65 \u586B\u5199\u4FE1\u606F",-1)),de=["src"],ue=R({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}}},setup(a){const o=a;O(r=>({"06237d6f":o.colors[0],"06237d8e":o.colors[1]}));const f=x(),c=T({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u624B\u673A\u53F7"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u9A8C\u8BC1\u7801"}],2:[],3:[]},isFirst:!0}),m=()=>{var r;c.factorObj=(r=o.insureDetail)==null?void 0:r.productFactor,console.log(o.insureDetail,"detail====")},I=async(r,n)=>{const g=await(o.isFirst?z:J)(r),{code:D,data:d}=g;console.log(f.value.validateForm(),"slslslw=="),D==="10000"&&(n==null||n())};return S(()=>o.isFirst,()=>{o.isFirst||m()}),(r,n)=>(B(),w("div",se,[s("div",ae,[s("div",ne,[s("img",{src:t(E)},null,8,le),ie,s("img",{src:t(E)},null,8,de)]),p(k,{ref_key:"formRef",ref:f,"send-sms-code":I,"form-info":a.detail,"factor-object":t(c).factorObj},null,8,["form-info","factor-object"]),P(r.$slots,"default",{},void 0,!0)])]))}});var ce=N(ue,[["__scopeId","data-v-dcd9ca58"]]);const Ae={class:"page-free-product-detail"},pe={class:"product-desc"},fe=["src"],me={class:"page-free-footer"},_e=R({setup(a){O(d=>({d9383e08:t(e).colors[1]}));const o=oe();U();const f=Y(),{productCode:c="BWYL2021",openId:m="oKugN52glZx_hhg7liu0WpWcmD5o",tenantId:I="9991000001",indirectCode:r="123"}=f.query;console.log("-----themeVars",o);let n="";const e=T({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},banner:"",productDesc:[],newAuth:!0,insureDetail:{}}),g=async()=>{const d=X({productCode:c,withInsureInfo:!0,tenantId:0}),l=Z({productCode:c}),u=G({openId:m});await Promise.all([d,l,u]).then(([A,_,y])=>{var F,C;if(A.code==="10000"){e.detail=A.data,e.banner=(F=e.detail.tenantProductInsureVO)==null?void 0:F.banner[0];const{colorEnd:i,colorStart:h}=e.detail.tenantProductInsureVO.backgroundInsureVO;e.colors=[h,i],e.productDesc=e.detail.tenantProductInsureVO.spec||[],document.title=e.detail.productFullName||""}_.code==="10000"&&(e.insureDetail=_.data,e.insureDetail.productFactor[2]=(C=e.insureDetail.productFactor)==null?void 0:C[2].map(i=>{var h,V;return i.code==="relationToHolder"&&i.isDisplay===1&&(i.title="\u88AB\u4FDD\u4EBA",e.order.tenantOrderInsuredList[0].relationToHolder=((V=(h=i.attributeValueList)==null?void 0:h[0])==null?void 0:V.code)||""),i})),y.code==="10000"&&(e.newAuth=!y.data)})},D=async()=>{const d=e.newAuth?$:ee;let l={loginType:"2",openId:m,thirdUserType:"XINAO_WECHAT",indirectCode:r};e.newAuth?(l.loginName=e.order.tenantOrderHolder.mobile,l.password=e.order.tenantOrderHolder.verificationCode):l=te({order:e.order,tenantId:I,detail:e.detail,insureDetail:e.insureDetail,iseeBizNo:n,buttonCode:"EVENT_FREE_multiIssuePolicy"});try{const{code:u,data:A}=await d(l);u==="10000"&&(e.newAuth=!1)}catch{console.log("e")}};return q(()=>{g(),setTimeout(async()=>{n=window.getIseeBiz&&await window.getIseeBiz()},1500)}),(d,l)=>{const u=L("van-config-provider");return B(),M(u,{"theme-vars":t(o)},{default:v(()=>[s("div",Ae,[p(j,{url:t(e).banner},null,8,["url"]),p(ce,{"is-first":t(e).newAuth,"insure-detail":t(e).insureDetail,detail:t(e).order,colors:t(e).colors},{default:v(()=>[p(b,{text:t(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C",onClick:D},null,8,["text"])]),_:1},8,["is-first","insure-detail","detail","colors"]),s("div",pe,[(B(!0),w(W,null,Q(t(e).productDesc,(A,_)=>(B(),w("img",{key:_,src:A},null,8,fe))),128))]),s("footer",me,[p(b,{text:t(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C"},null,8,["text"])])])]),_:1},8,["theme-vars"])}}});var Te=N(_e,[["__scopeId","data-v-f4d21a84"]]);export{Te as default};

import{d as a,i as e,z as l,o as s,c as u,a as t,f as o,u as i,q as n,b as d,w as r,a8 as v,e as c,cf as p,m,F as f,_ as g,cg as b,ag as w,bg as y,ch as _}from"./index-c2b6bc52.js";const h={class:"sign-wrap"},k=["src"],V={class:"popup-body"},C={class:"sign-container-wrap"},S={class:"operate-bar"},x={class:"btns"},z=a({name:"sign"});var I=g(a({...z,props:{option:{default:{}},modelValue:{default:""}},emits:["update:modelValue","submitSign"],setup(a,{expose:g,emit:z}){const I=a,R=e(!1),U=e(),j=e(""),q=e(!0),D=()=>{var a;R.value=!0,null==(a=U.value)||a.clear(),setTimeout((()=>{var a;null==(a=U.value)||a.setDataURL(j.value),I.modelValue?q.value=!1:q.value=!0}))},F=()=>{b({images:[j.value],className:"customer-sign-preview"})},L=()=>{R.value=!1},N=()=>{var a,e;null==(e=null==(a=U.value)?void 0:a.clear)||e.call(a),j.value="",q.value=!0,z("update:modelValue","")},T=()=>{var a;j.value=null==(a=U.value)?void 0:a.save(),z("update:modelValue",j.value),z("submitSign",j.value),R.value=!1};return l((()=>I.modelValue),(()=>{j.value=I.modelValue}),{immediate:!0}),g({rewrite:N,openSign:D}),(a,e)=>{const l=w,g=y,b=_;return s(),u(f,null,[t("div",h,[o(a.$slots,"signImg",{data:i(j)},(()=>[i(j)?(s(),u("img",{key:0,class:"preview-sign",src:i(j),alt:"",onClick:F},null,8,k)):n("",!0),d(l,{type:"primary",round:"",size:"small",onClick:D},{default:r((()=>[v(c(i(j)?"重新签名":"点击签字"),1)])),_:1})]),!0)]),d(b,{show:i(R),"onUpdate:show":e[1]||(e[1]=a=>m(R)?R.value=a:null),position:"bottom",style:{height:"100%",overflow:"hidden"}},{default:r((()=>[t("div",V,[t("div",C,[d(p,{ref_key:"signRef",ref:U,placeholder:"请在此处签名",onStroke:e[0]||(e[0]=a=>q.value=!1)},null,512),t("div",S,[t("span",null,[d(g,{name:"info",color:"#ffaf22"}),v(" 请投保人正楷签署您的签名:")]),t("div",x,[d(l,{type:"default",class:"btn",onClick:L},{default:r((()=>[v("返回")])),_:1}),d(l,{type:"default",class:"btn",onClick:N},{default:r((()=>[v("重写")])),_:1}),d(l,{type:"primary",class:"btn",disabled:i(q),onClick:T},{default:r((()=>[v("确定签字")])),_:1},8,["disabled"])])])])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-6461f207"]]);export{I as S};

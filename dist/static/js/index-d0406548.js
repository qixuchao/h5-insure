var X=Object.defineProperty,Z=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var q=(e,a,t)=>a in e?X(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,D=(e,a)=>{for(var t in a||(a={}))ae.call(a,t)&&q(e,t,a[t]);if(R)for(var t of R(a))te.call(a,t)&&q(e,t,a[t]);return e},w=(e,a)=>Z(e,ee(a));import{g as F,j as k,n as J,z as o,J as T,A as C,t as oe,a4 as se,a5 as ne,O as re,E as _,h as le,r as E,k as ie,m as A,p as m,T as M}from"./vendor-894ab2f1.js";import{S as ue}from"./infoCollection-b0426750.js";import{_ as b}from"./index-51274998.js";import{c as de}from"./close-df102554.js";import{a as ce}from"./order-b675ac95.js";import{i as pe,a as _e,s as me,e as ve,E as fe}from"./trial-9bc4659d.js";import{t as he}from"./theme-eeb93d73.js";import{a as Ie,g as ge,t as De,c as ye,d as H}from"./utils-bef5abd0.js";import{p as Ce}from"./product-3c1a6d11.js";import"./trial-04fa888a.js";const Se={class:"com-field-info"},xe={class:"title"},Oe={class:"desc"},we=F({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(e){return(a,t)=>(k(),J("div",Se,[o("div",xe,T(e.title),1),o("div",Oe,T(e.desc),1)]))}});var y=b(we,[["__scopeId","data-v-74e2bdf6"]]);const K=e=>(se("data-v-39527d44"),e=e(),ne(),e),Ee={key:0,class:"pro-modal"},Fe=K(()=>o("div",{class:"pro-overlay"},null,-1)),ke={class:"pro-modal-wrapper"},be=K(()=>o("div",{class:"pro-modal-content"},[o("p",null,"\u606D\u559C\u60A8"),o("p",null,"\u4FDD\u969C\u5347\u7EA7\u6210\u529F")],-1)),Be=["src"],Pe=F({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(e,{emit:a}){const t=e,l=()=>{a("on-close")};return(B,P)=>t.isShow?(k(),J("div",Ee,[Fe,o("div",ke,[o("div",{class:"pro-modal-body"},[be,o("div",{class:"pro-modal-btn",onClick:l},"\u6211\u77E5\u9053\u4E86")]),o("div",{class:"pro-modal-close",onClick:l},[o("img",{src:C(de)},null,8,Be)])])])):oe("",!0)}});var Ne=b(Pe,[["__scopeId","data-v-39527d44"]]);const Ue={class:"page-activity-upgrade"},$e=["src"],Le={class:"container"},Ve={class:"main-form"},Re=F({setup(e){const a=re(),{productCode:t="BWYL2022",tenantId:l,orderNo:B,agentCode:P}=a.query,p=_(),v=_(),s=_(),f=_(),S=_(),x=_(),O=_(!1),Y=()=>{O.value=!1},j=async()=>{var c,d,h,I,g;const i=ge({tenantId:l,applicationNo:s.value.applicationNo,policyNo:s.value.policyNo,saleUserId:P,saleChannelId:s.value.saleChannelId,orderStatus:ce.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:p.value,insureDetail:v.value,paymentMethod:(d=(c=s.value.extInfo)==null?void 0:c.extraInfo)==null?void 0:d.paymentMethod,renewalDK:(I=(h=s.value.extInfo)==null?void 0:h.extraInfo)==null?void 0:I.renewalDK,successJumpUrl:"",premium:f.value,holder:w(D({},s.value.tenantOrderHolder),{socialFlag:s.value.tenantOrderHolder.extInfo.hasSocialInsurance}),insured:w(D({},s.value.tenantOrderInsuredList[0]),{socialFlag:s.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:De({tenantId:l,riskList:ye(v.value.productRiskVoList[0].riskDetailVOList,p.value),riskPremium:{},productId:(g=p.value)==null?void 0:g.id})}),n=await me(i),{code:u,data:r}=n;return u==="10000"?r.data:""},N=async()=>{const i=H({tenantId:l,premium:f.value,orderDetail:s.value,productDetail:p.value,insureDetail:v.value}),n=await ve(i),{code:u,data:r}=n;u==="10000"&&(f.value=r.installmentPremium,x.value=r.signUrl)},z=async i=>{const n=H({tenantId:l,premium:f.value,orderDetail:s.value,productDetail:p.value,insureDetail:v.value}),u=await fe(D({orderNo:i},n)),{code:r,data:c}=u;r==="10000"&&(O.value=!0)},G=async i=>{try{M.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"}),await N();const n=await j();x.value?window.location.href=x.value:z(n)}catch(n){console.log(n),M.clear()}},W=()=>{const i=Ce({productCode:t,withInsureInfo:!0,tenantId:l}),n=pe({productCode:t}),u=_e({orderNo:B,tenantId:l});Promise.all([i,n,u]).then(([r,c,d])=>{r.code==="10000"&&(p.value=r.data),c.code==="10000"&&(v.value=c.data),d.code==="10000"&&(s.value=d.data,S.value=d.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),N()})};return le(()=>{W()}),(i,n)=>{const u=E("ProRadioButton"),r=E("ProField"),c=E("van-config-provider");return k(),ie(c,{"theme-vars":C(he)},{default:A(()=>{var d,h,I,g,U,$,L,V;return[o("div",Ue,[o("img",{src:(h=(d=p.value)==null?void 0:d.tenantProductInsureVO)==null?void 0:h.banner[0],class:"banner"},null,8,$e),o("div",Le,[o("div",Ve,[m(y,{title:"\u59D3\u540D",desc:(g=(I=s.value)==null?void 0:I.tenantOrderInsuredList)==null?void 0:g[0].name},null,8,["desc"]),m(y,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:($=(U=s.value)==null?void 0:U.tenantOrderInsuredList)==null?void 0:$[0].certNo},null,8,["desc"]),m(y,{title:"\u624B\u673A\u53F7\u7801",desc:(V=(L=s.value)==null?void 0:L.tenantOrderHolder)==null?void 0:V.mobile},null,8,["desc"]),m(y,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${C(Ie)(f.value||0)}\u5143 / \u6BCF\u6708`},null,8,["desc"]),m(r,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:A(()=>[m(u,{modelValue:S.value,"onUpdate:modelValue":n[0]||(n[0]=Q=>S.value=Q),disabled:!0,options:C(ue)},null,8,["modelValue","options"])]),_:1}),o("div",{class:"submit",onClick:G})])]),m(Ne,{"is-show":O.value,onOnClose:Y},null,8,["is-show"])])]}),_:1},8,["theme-vars"])}}});var We=b(Re,[["__scopeId","data-v-1dfbb110"]]);export{We as default};

import{_ as e,d as a,u as t,a as o,r as s,G as i,C as l,b as n,c,e as r,w as u,f as d,h as p,F as v,i as y,g as m,K as C,j as f,n as g,p as k,T as j,L as h,N as q,M as N,P as T,B as b}from"./index-d9e24409.js";import{l as I}from"./inform-93c1449c.js";import{Q as D,a as _,H as x,b as P,I as S,c as $}from"./notice-a5228c22.js";import{s as A}from"./useStorage-4a1c3ae4.js";import{g as B}from"./verify-a2980f69.js";import"./pdfh5-008ca364.js";const M={class:"footer-button"};var O=e(a({__name:"index",setup(e){const a=t(),O=o(),{productCode:F="MMBBSF",agentCode:L="65434444",tenantId:w=9991000007,agencyCode:z="3311222",insurerCode:G="zhongan",productCategory:H=1,templateId:K=1,orderNo:Q="2022080217103534947"}=O.query,U=s([]),W=s({});s(!1);const E=s([]),J=s([]),R=e=>U.value.filter((a=>a.objectType===e)),V=e=>{var t;A.set("questionData",e),a.push({path:"/healthNotice",query:{materialType:(null==e?void 0:e.materialSource)?"product":"question",questionnaireType:(null==e?void 0:e.materialSource)?1:e.questionnaireType,orderId:null==(t=W.value)?void 0:t.id,...O.query}})},X=()=>{[...E.value,...J.value,...U.value].every((e=>1===e.isDone))?(Object.assign(W.value,{pageCode:"questionNotice",tenantOrderNoticeList:U.value}),h({...W.value,extInfo:{...W.value.extInfo,pageCode:"questionNotice",buttonCode:q.questionNotice},venderCode:G}).then((({code:e,data:t})=>{"10000"===e&&"jumpToPage"===t.pageAction.pageAction&&a.push({path:N[t.pageAction.data.nextPageCode],query:O.query})}))):j("请完成所有告知进行下一步")};return i((()=>{(()=>{const e={insurerCode:G,orderNo:Q,productCategory:H,tenantId:w};Promise.all([I({...e,noticeType:x,objectType:P}),I({...e,noticeType:S,objectType:$})]).then((([{code:e,data:a},{code:t,data:o}])=>{"10000"===e&&"10000"===t&&(U.value=[...a,...o])}))})(),(()=>{const e={orderNo:Q,productCode:F,tenantId:w,objectType:P};B({...e}).then((({code:e,data:a})=>{"10000"===e&&(J.value=a||[])})),B({...e,objectType:$}).then((({code:e,data:a})=>{"10000"===e&&(E.value=a||[])}))})(),k({orderNo:Q,saleUserId:L,tenantId:w}).then((({code:e,data:a})=>{"10000"===e&&Object.assign(W.value,a)}))})),(e,a)=>{const t=l,o=T,s=b,i=n("ProPageWrap");return c(),r(i,{class:"page-question-notice"},{default:u((()=>[d(o,{title:"投保人"},{default:u((()=>[(c(!0),p(v,null,y(R(m(D)),(e=>(c(),r(t,{key:e.id,class:C({"is-active":e.isDone===m(_)}),title:`《${e.title}》`,"is-link":"",value:""+(e.isDone===m(D)?"已完成":"去完成"),onClick:a=>V(e)},null,8,["class","title","value","onClick"])))),128)),(c(!0),p(v,null,y(m(J),(e=>(c(),r(t,{key:e.id,class:C({"is-active":e.isDone===m(_)}),title:`《${e.materialName}》`,"is-link":"",value:""+(e.isDone===m(D)?"已完成":"去完成"),onClick:a=>V(e)},null,8,["class","title","value","onClick"])))),128))])),_:1}),d(o,{title:"被保人"},{default:u((()=>[(c(!0),p(v,null,y(R(m(_)),(e=>(c(),r(t,{key:e.id,class:C({"is-active":e.isDone===m(_)}),title:`《${e.title}》`,"is-link":"",value:""+(e.isDone===m(D)?"已完成":"去完成"),onClick:a=>V(e)},null,8,["class","title","value","onClick"])))),128)),(c(!0),p(v,null,y(m(E),(e=>(c(),r(t,{key:e.id,class:C({"is-active":e.isDone===m(_)}),title:`《${e.materialName}》`,"is-link":"",value:""+(e.isDone===m(D)?"已完成":"去完成"),onClick:a=>V(e)},null,8,["class","title","value","onClick"])))),128))])),_:1}),f("div",M,[d(s,{type:"primary",onClick:X},{default:u((()=>[g("下一步")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-698a4f87"]]);export{O as default};

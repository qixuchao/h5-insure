import{h as T,N as R,G as f,y as U,aa as S,z as $,r as d,k as p,m as D,n as i,s as u,B as n,U as q,A as c,p as k,H as z,L as C,F as H,v as W,E as m,D as Z,T as G}from"./vendor-0e135a62.js";import{_ as M,a1 as O}from"./index-77081846.js";import{Z as j,e as J}from"./empty-bd4cead7.js";import{P as K}from"./index-1a6c0ee6.js";import{d as Q,h as X}from"./proposalList-e8e85d39.js";import{a as Y,b as w,t as ee}from"./format-12461bbc.js";const ae={class:"proposal-content"},te={class:"title"},se={class:"premium"},oe=m(" \u4FDD\u8D39\uFF1A"),ue={class:"operate-btn"},ne=m("\u5220\u9664"),le=m("\u7F16\u8F91"),re=m("\u9884\u89C8"),ie=T({setup(ce){const x=[{title:"\u9669\u79CD\u540D\u79F0",dataIndex:"riskName",width:180},{title:"\u4FDD\u969C\u671F\u95F4",dataIndex:"coveragePeriod",render:e=>Y(e==null?void 0:e.coveragePeriod)},{title:"\u7F34\u8D39\u671F\u95F4",dataIndex:"chargePeriod",width:110,render:e=>w(e==null?void 0:e.chargePeriod)},{title:"\u4FDD\u8D39",dataIndex:"premium",width:120,render:e=>ee(e==null?void 0:e.premium)}],B=R({historyList:[],searchValue:""}),_=f(!1),y=f(!1),l=f(1),{historyList:o,searchValue:r}=U(B),g=S(),v=()=>{X({name:r.value,pageNum:l.value,pageSize:20,relationUserType:2}).then(e=>{const{code:t,data:s}=e;t==="10000"&&(l.value===1?o.value=s.datas||[]:o.value=o.value.concat(s.datas),l.value+=1,_.value=!1,y.value=o.value.length>=s.total)})},A=()=>{v()},F=$(()=>o.value.length>0),E=e=>{r.value=e,l.value=1,v()},V=e=>{Z.confirm({message:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BA1\u5212\u4E66\uFF1F"}).then(()=>{Q(e).then(t=>{const{code:s}=t;s==="10000"&&(G.success("\u5220\u9664\u6210\u529F"),l.value=1,v())})}).catch(()=>{})},L=e=>{g.push({path:"compositionProposal",query:{id:e}})},N=e=>{g.push({path:"/proposal/createProposal",query:{id:e}})};return(e,t)=>{const s=d("van-search"),h=d("van-button"),b=d("van-list"),I=d("ProPageWrap");return p(),D(I,{class:"page-history-proposal"},{default:i(()=>[u(s,{modelValue:n(r),"onUpdate:modelValue":t[0]||(t[0]=a=>q(r)?r.value=a:null),placeholder:"\u8BF7\u8F93\u5165\u88AB\u4FDD\u4EBA\u59D3\u540D/\u8BA1\u5212\u4E66\u540D\u79F0",shape:"round",class:"search",onSearch:E},null,8,["modelValue"]),c("div",ae,[u(b,{loading:_.value,"onUpdate:loading":t[1]||(t[1]=a=>_.value=a),finished:y.value,"finished-text":n(F)?"- \u6CA1\u6709\u66F4\u591A\u4E86 -":"",onLoad:A},{default:i(()=>[(p(!0),k(H,null,z(n(o),a=>(p(),k("div",{key:a.id,class:"proposal-item"},[c("div",te,C(a.proposalName)+"\u8BA1\u5212\u4E66",1),c("p",se,[oe,c("span",null,"\xA5"+C(n(O)(a.totalPremium)),1)]),u(K,{columns:x,class:"table","data-source":a.proposalProductRiskVOList},null,8,["data-source"]),c("div",ue,[u(h,{plain:"",round:"",type:"primary",class:"del-btn",onClick:P=>V(a.id)},{default:i(()=>[ne]),_:2},1032,["onClick"]),u(h,{plain:"",round:"",type:"primary",onClick:P=>N(a.id)},{default:i(()=>[le]),_:2},1032,["onClick"]),u(h,{plain:"",round:"",type:"primary",onClick:P=>L(a.id)},{default:i(()=>[re]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["loading","finished","finished-text"])]),n(F)?W("",!0):(p(),D(j,{key:0,"empty-img":n(J),title:"\u6682\u65E0\u5386\u53F2\u8BA1\u5212\u4E66","empty-class":"empty-select"},null,8,["empty-img"]))]),_:1})}}});var fe=M(ie,[["__scopeId","data-v-36b7a1a3"]]);export{fe as default};

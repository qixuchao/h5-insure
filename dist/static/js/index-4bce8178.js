import{ac as e,_ as n,d as a,r as o,J as t,am as r,E as l,S as i,ag as s,aI as u,aK as c,c as m,g as d,f,w as p,i as v,m as I,j as D,F as y,t as k,b5 as Y,n as b,l as V,V as g,bT as w,B as S,bi as L,a7 as h,X as E,Y as O,e as M,a2 as x}from"./index-9effc651.js";import{m as C,n as _}from"./infoCollection-d7c085e7.js";import"./trial-c6e14b52.js";import"./pdfh5-008ca364.js";const N=(n,a="YYYY-MM-DD")=>e(n).format(a),T=(n,a=0,o="day",t="YYYY-MM-DD")=>e(n).add(a,o).format(t),P=(n,a=0,o="day",t="YYYY-MM-DD")=>e(n).subtract(a,o).format(t);const U=e=>(E("data-v-003d209e"),e=e(),O(),e),$={class:"com-period-cell"},R={key:0,class:"period-custom-cell period-check-btn-cell"},F=U((()=>v("div",{class:"period-cell-label"},"保障期间",-1))),q={class:"period-cell-content"},A=U((()=>v("div",{class:"period-cell-label"},"生效日期",-1))),j={class:"period-cell-content period-custom-cell-content"},H=U((()=>v("div",{class:"period-cell-label"},"保障期限",-1))),X={class:"period-cell-content period-custom-cell-content"},B={key:2,class:"period-custom-cell period-common-cell"},J=U((()=>v("div",{class:"period-cell-label"},"保障期限",-1))),K={class:"period-cell-content"},z=U((()=>v("div",{class:"picker-custom-title"},"保险开始生效日期",-1))),G=b("确 定");var Q=n(a({props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})}},emits:["onReset","onUpdate","onVerify"],setup(n,{expose:a,emit:b}){const E=n;o({});const O=(e,n)=>"year"===e?`${n}年`:"month"===e?`${n}月`:"day"===e?`${n}日`:n,M=o(new Date),x=t({formInfo:E.formInfo}),U=o(!0),Q=o();o([]),r((()=>x.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(M.value=new Date(e))}));const W=l((()=>{var e;const{insurancePeriodValueList:n=[]}=(null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n.length?(x.formInfo.coveragePeriod||(x.formInfo.coveragePeriod=n[0].code),n):[]})),Z=l((()=>{var e;const{insuranceStartType:n}=(null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),ee=l((()=>{var e;const{insuranceEndType:n}=(null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),[ne,ae]=i(!1),oe=()=>{U.value&&ae(!0)},te=l((()=>{var e,n;if(Z.value===C.CUSTOM_DAY){const a=null==(n=null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(a&&a.indexOf(",")){const[e,n]=a.split(",");return new Date(T(new Date,Number(e),"day"))}}return new Date(T(new Date,1,"day"))})),re=l((()=>{var e,n;if(Z.value===C.CUSTOM_DAY){const a=null==(n=null==(e=E.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(!a)return new Date;if(a.indexOf(",")){const[e,n]=a.split(",");return new Date(T(new Date,Number(n),"day"))}const o=T(new Date,Number(a),"day");return new Date(o)}return new Date})),le=e=>{x.formInfo.insuranceStartDate=`${N(e)} 00:00:00`,ae(!1)},ie=()=>{ae(!1)};return r((()=>E.riskInfo),(()=>{const{productRiskInsureLimitVO:e}=E.riskInfo||{};if(e){const{amountPremiumConfigVO:n,insurancePeriodValueList:a,paymentFrequencyList:o=[],paymentPeriodValueList:t}=e||{};W.value=a}}),{deep:!0,immediate:!0}),r([()=>Z.value,()=>x.formInfo.coveragePeriod,()=>x.formInfo.insuranceStartDate,()=>Q.value],(()=>{var n,a;if(!x.formInfo.coveragePeriod)return;const[o,t]=x.formInfo.coveragePeriod.split("_");if(!x.formInfo.insuranceStartDate)if(Z.value===C.CUSTOM_DAY){const e=null==(a=null==(n=E.riskInfo)?void 0:n.productRiskInsureLimitVO)?void 0:a.maxInsuranceDay;if(e)if(e.indexOf(",")){const[n,a]=e.split(",");x.formInfo.insuranceStartDate=`${T(new Date,Number(n),"day")} 00:00:00`,U.value=n!==a}else x.formInfo.insuranceStartDate=`${T(new Date,e,"day")} 00:00:00`;else x.formInfo.insuranceStartDate=`${T(new Date,1,"day")} 00:00:00`}else Z.value===C.NEXT_DAY?x.formInfo.insuranceStartDate=`${T(new Date,1,"day")} 00:00:00`:x.formInfo.insuranceStartDate=`${N(new Date)} 00:00:00`;if("to"!==o)P(x.formInfo.insuranceStartDate,1,"day"),ee.value===_.CURRENT_DAY?x.formInfo.insuranceEndDate=`${e(new Date(x.formInfo.insuranceStartDate)).add(Number(t),o).subtract(1,"day")} 23:59:59`:x.formInfo.insuranceEndDate=`${T(x.formInfo.insuranceStartDate,Number(t),o)} 00:00:00`;else{let e=x.formInfo.tenantOrderInsuredList[0].birthday;x.formInfo.tenantOrderInsuredList[0].certType===s.CERT&&x.formInfo.tenantOrderInsuredList[0].certNo&&u(x.formInfo.tenantOrderInsuredList[0].certNo)&&(e=c(x.formInfo.tenantOrderInsuredList[0].certNo));const n=`${P(e,1,"day")} 00:00:00`;"single"===t&&(x.formInfo.insuranceEndDate="9999-99-99 23:59:59"),ee.value===_.CURRENT_DAY?x.formInfo.insuranceEndDate=`${T(n,Number(t),o)} 23:59:59`:x.formInfo.insuranceEndDate=`${T(e,Number(t),o)} 00:00:00`}}),{immediate:!0}),a({}),(e,n)=>{const a=V,o=g,t=w,r=S,l=L,i=h;return m(),d(y,null,[f(t,null,{default:p((()=>[v("div",$,[I(W).length>1?(m(),d("div",R,[F,v("div",q,[f(a,{modelValue:I(x).formInfo.coveragePeriod,"onUpdate:modelValue":n[0]||(n[0]=e=>I(x).formInfo.coveragePeriod=e),prop:{label:"value",value:"code"},options:I(W)},null,8,["modelValue","options"])])])):D("",!0),I(Z)===I(C).CUSTOM_DAY?(m(),d("div",{key:1,class:"period-custom-cell period-common-cell",onClick:oe},[U.value?(m(),d(y,{key:0},[A,v("div",j,[v("span",null,k(I(x).formInfo.insuranceStartDate?I(N)(I(x).formInfo.insuranceStartDate,"YYYY.MM.DD HH:mm:ss"):""),1),f(o,{class:"custom--arrow-right",name:"arrow-right"})])],64)):(m(),d(y,{key:1},[H,v("div",X,[v("span",null,k(I(x).formInfo.insuranceStartDate?I(N)(I(x).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+k(I(x).formInfo.insuranceEndDate?I(N)(I(x).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])],64))])):D("",!0),I(Z)!==I(C).CUSTOM_DAY?(m(),d("div",B,[J,v("div",K,k(I(x).formInfo.insuranceStartDate?I(N)(I(x).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+k(I(x).formInfo.insuranceEndDate?I(N)(I(x).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])):D("",!0)])])),_:1}),f(i,{show:I(ne),"onUpdate:show":n[3]||(n[3]=e=>Y(ne)?ne.value=e:null),height:340,closeable:!0},{default:p((()=>[f(l,{modelValue:M.value,"onUpdate:modelValue":n[2]||(n[2]=e=>M.value=e),type:"date",title:"保险开始生效日期","min-date":I(te),"max-date":I(re),formatter:O,"visible-item-count":5,class:"custom-date-picker",onConfirm:le,onCancel:ie},{cancel:p((()=>[])),title:p((()=>[z])),confirm:p((()=>[f(r,{type:"primary",round:"",block:"",class:"linear-btn custom-picker-btn",onClick:n[1]||(n[1]=e=>ne.value=!1)},{default:p((()=>[G])),_:1})])),_:1},8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-003d209e"]]);const W=e=>(E("data-v-9b3dc196"),e=e(),O(),e),Z={class:"com-payment-type"},ee={class:"title"},ne={key:0,class:"custom-cell check-btn-cell"},ae=W((()=>v("div",{class:"cell-label"},"保障方案",-1))),oe={class:"cell-content"},te={key:1,class:"custom-cell check-btn-cell"},re=W((()=>v("div",{class:"cell-label"},"交费方式",-1))),le={class:"cell-content"},ie={key:2,class:"custom-cell check-btn-cell"},se=W((()=>v("div",{class:"cell-label"},"交费期间",-1))),ue={class:"cell-content"},ce={key:3,class:"custom-cell common-cell"},me=W((()=>v("div",{class:"cell-label"},"实付保费",-1))),de={key:0,class:"cell-content actual-premium"},fe={class:"cell-content actual-premium"},pe={key:0,class:"actual-premium actual-premium-month-tip"};var ve=n(a({props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})},tenantProductDetail:{default:()=>({})},planList:{default:()=>[]}},setup(e){const n=e;o({});const a=t({formInfo:n.formInfo}),i=o(),s=o(),u=o([]),c=o([]),Y=l((()=>{var e;return!!(null==(e=n.planList)?void 0:e.length)})),b=l((()=>{var e,o;if(null==(e=n.premiumInfo)?void 0:e.premiumLoadingText)return n.premiumInfo.premiumLoadingText;const t=n.tenantProductDetail.find((e=>e.planCode===a.formInfo.planCode))||{},{premium:r,minActualUnit:l}=(t.data||[]).find((e=>e.paymentFrequency===a.formInfo.paymentFrequency))||{};return(null==(o=n.premiumInfo)?void 0:o.premium)?`${n.premiumInfo.premium||""}${l}`:r})),g=l((()=>{if(s){const{premiumExplain:e,premiumExplainViewName:n,premiumExplainUri:a}=s.value||{};return{premiumExplain:e,premiumExplainUri:a,premiumExplainViewName:n}}return null}));l((()=>g.value&&g.value.premiumExplain&&g.value.premiumExplainViewName));const S=l((()=>{var e;if(i.value&&i.value.paymentFrequency){return((null==(e=i.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1}));return r((()=>n.riskInfo),(()=>{var e,o;const{productRiskInsureLimitVO:t}=n.riskInfo||{};if(t){const{paymentFrequencyList:n=[],paymentPeriodValueList:r}=t||{};a.formInfo.paymentFrequency=null==(e=null==n?void 0:n[0])?void 0:e.code,a.formInfo.chargePeriod=null==(o=null==r?void 0:r[0])?void 0:o.code,u.value=r,c.value=n}}),{deep:!0,immediate:!0}),(o,t)=>{const r=V,l=x,i=w;return m(),M(i,null,{default:p((()=>{var o;return[v("div",Z,[v("div",ee,k(I(S)?"交费方式":"保障计划"),1),I(Y)?(m(),d("div",ne,[ae,v("div",oe,[f(r,{modelValue:I(a).formInfo.planCode,"onUpdate:modelValue":t[0]||(t[0]=e=>I(a).formInfo.planCode=e),options:e.planList,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])])):D("",!0),c.value.length>1?(m(),d("div",te,[re,v("div",le,[f(r,{modelValue:I(a).formInfo.paymentFrequency,"onUpdate:modelValue":t[1]||(t[1]=e=>I(a).formInfo.paymentFrequency=e),prop:{label:"value",value:"code"},options:c.value},null,8,["modelValue","options"])])])):D("",!0),u.value.length>1?(m(),d("div",ie,[se,v("div",ue,[f(r,{modelValue:I(a).formInfo.chargePeriod,"onUpdate:modelValue":t[2]||(t[2]=e=>I(a).formInfo.chargePeriod=e),prop:{label:"value",value:"code"},options:u.value},null,8,["modelValue","options"])])])):D("",!0),f(Q,{"form-info":I(a).formInfo,"risk-info":e.riskInfo},null,8,["form-info","risk-info"]),I(b)?(m(),d("div",ce,[me,(null==(o=n.premiumInfo)?void 0:o.premiumLoadingText)?(m(),d("div",de,k(I(b)),1)):(m(),d(y,{key:1},[v("div",fe,k(I(b)),1),"5"===I(a).formInfo.paymentFrequency?(m(),d("div",pe," 共12期 ")):D("",!0)],64))])):D("",!0)]),f(l)]})),_:1})}}}),[["__scopeId","data-v-9b3dc196"]]);export{ve as default};

import{d as e,t as a,r as s,o as t,c as o,a as l,b as r,u as d,e as c,F as i,f as u,g as n,_ as p,I as m,h as g,i as v,j as f,k as h,l as C,m as L,w as y,n as k,P as _,p as P,q as I,s as x,T as b}from"./index-ec1c03b4.js";import{P as j}from"./index-f54828ac.js";import{L as w}from"./index-68074e7b.js";import{_ as V}from"./index-ad3e624e.js";import{S as T}from"./index-53476e74.js";import{_ as U}from"./empty-ae586b6c.js";import{q as M}from"./product-b2bfa067.js";import{P as F}from"./trial-672aeef3.js";const N={class:"com-product-item"},S={class:"content-wrap"},q={class:"product-image"},O={class:"product-info"},R={class:"title"},D={class:"description"},W={class:"tags"},z={class:"price-item"},E={class:"price"};var G=p(e({__name:"productItem",props:{productInfo:{default:()=>({})},errorMsg:{default:""}},setup(e){const p=e,{productInfo:g}=a(p),v=s({checked:!1});return a(v),(e,a)=>{var s;const p=m;return t(),o("div",N,[l("div",S,[l("div",q,[r(p,{src:d(g).image},null,8,["src"])]),l("div",O,[l("p",R,c(d(g).productFullName),1),l("p",D,c(d(g).desc),1),l("p",W,[(t(!0),o(i,null,u(null==(s=d(g).showConfig)?void 0:s.tags,((e,a)=>(t(),o("span",{key:a,class:"tag"},c(e),1)))),128))]),l("p",z,[l("span",E,c(d(g).price),1),l("span",null,c(d(g).amountUnit),1)])]),n(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-5f5ba554"]]);const $={class:"search-wrap"},A={class:"article-tag"},B=["onClick"],H={class:"page-proposal-list"},J=e({name:"productList"});var K=p(e({...J,setup(e){const n=g();v();const p=s({searchValue:"",tagLists:[],loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],productCategory:"",productTotal:0,checked:"",productCode:void 0,proposalList:[],showFooter:!0,productName:"",productCodeList:[],errorMsgMap:{},excludeProductCodeList:[],isCreateProposal:!1,selectedProductList:[],firstLoading:!0}),{searchValue:m,tagLists:N,loading:S,finished:q,refreshing:O,productList:R,selectProduct:D,insurerCodeList:W,productCategory:z,productTotal:E,showFooter:J}=a(p),K=()=>{p.firstLoading&&b.loading("加载中..."),M({keyword:m.value,insurerCodeList:W.value,productCategory:z.value,pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:t}=e;"10000"===a&&(R.value=s,E.value=t)})).finally((()=>{b.clear(),p.firstLoading=!1}))},Q=e=>{K()},X=f(0),Y=()=>{var e;O.value&&(R.value=[],O.value=!1),K(),S.value=!1,E.value===(null==(e=R.value)?void 0:e.length)&&(q.value=!0)},Z=h((()=>{var e;return(null==(e=R.value)?void 0:e.length)>0})),ee=()=>{q.value=!0,S.value=!0,Y()};return(e,a)=>{const s=T,g=V,v=w,f=j,h=C("ProPageWrap");return t(),L(h,{class:"page-proposal"},{default:y((()=>[l("div",$,[r(s,{modelValue:d(m),"onUpdate:modelValue":a[0]||(a[0]=e=>k(m)?m.value=e:null),placeholder:"请输入产品名称进行搜索",shape:"round",class:"search","clear-trigger":"always","show-action":"",clearable:"",onSearch:Q},null,8,["modelValue"]),l("div",A,[(t(!0),o(i,null,u(d(_),((e,a)=>(t(),o("div",{key:a,class:P(["tag-item",{checked:d(X)===a}]),onClick:s=>((e,a)=>{X.value=a,z.value=e,K()})(e.value,a)},[l("div",{class:P(["tag-out",{checked:d(X)==a}])},[l("div",{class:P(["tag-item-text",{checked:d(X)==a}])},c(e.label),3)],2)],10,B)))),128))])]),d(Z)||d(p).firstLoading?I("",!0):(t(),L(g,{key:0,"empty-img":d(U),title:"暂无产品","empty-class":"empty-select"},null,8,["empty-img"])),l("div",H,[r(f,{modelValue:d(O),"onUpdate:modelValue":a[2]||(a[2]=e=>k(O)?O.value=e:null),onRefresh:ee},{default:y((()=>[r(v,{loading:d(S),"onUpdate:loading":a[1]||(a[1]=e=>k(S)?S.value=e:null),finished:d(q),"finished-text":d(Z)?"- 已经到底了哦 -":"",onLoad:Y},{default:y((()=>[(t(!0),o(i,null,u(d(R),(e=>(t(),L(G,{key:e.id,"product-info":e,"error-msg":d(p).errorMsgMap[e.productCode],onClick:a=>(async e=>{let a=x.premiumTrial;const{insurerCode:s="",productCode:t="",templateId:o,productClass:l}=e;[F.SINGLE_PRODUCT,F.TWO_PRODUCT].includes(l)&&(a=x.productInfo),n.push({path:a,query:{insurerCode:s,productCode:t,tenantId:9991000011,templateId:o}})})(e)},null,8,["product-info","error-msg","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])])])),_:1})}}}),[["__scopeId","data-v-e9081460"]]);export{K as default};

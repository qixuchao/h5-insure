import{k as e,O as t,p as n,s as a,B as r,S as i,v as s,C as l,M as o,E as c,H as u,I as d,N as m,J as g,L as p,d as v,r as f,$ as y,b as I,R as h,ag as C,y as T,t as P,G as D,a5 as O,a6 as N,Z as V,_ as k,U as A,T as S,aa as w,u as b,o as L,D as x}from"./vendor-9bab628e.js";import{d as U}from"./debounce-a0c8763d.js";import{P as R}from"./index-c9ce648b.js";import{_ as E,e as F,i as M,a7 as q,C as B,I as Z,K as _,ac as j,a1 as Y}from"./index-e8321a04.js";import{C as H,k as Q,l as G,m as K,S as J,R as W,g as X}from"./infoCollection-0441555b.js";import{i as z,g as $,b as ee,p as te}from"./trial-7b87e75c.js";import{p as ne}from"./product-32b413c6.js";import{o as ae,g as re,r as ie,t as se}from"./utils-d1f1072f.js";import{_ as le,n as oe}from"./nextStep-5ffe675b.js";import{u as ce,t as ue}from"./theme-467ed2f7.js";import{B as de,A as me,P as ge,_ as pe}from"./index-ca306fad.js";import{P as ve}from"./index-c6e8accc.js";import{L as fe}from"./loading-1c9c1d7b.js";import{u as ye}from"./useDicData-56383341.js";import{s as Ie}from"./phoneVerify-5acdb728.js";import"./useStorage-1238b604.js";import"./trial-7d56ee72.js";import"./relativeTime-043d4e7b.js";const he={class:"customer-body"},Ce={class:"header"},Te={class:"conatiner"},Pe=["onClick"],De={class:"name"};var Oe=E(e({props:{userInfo:{type:Object,default:()=>({})},relationCode:{type:String,default:"1"},title:{type:String,default:"选择投保人"}},emits:["change"],setup(e,{emit:v}){let f=[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"王大啦",certNo:"110101199003078910",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"001",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"},{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"李大霄",certNo:"110101199003070193",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"002",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"}];f=[...f,...f,...f];const y=t({loading:!1,select:f[0],list:f}),I=()=>{y.loading=!1,v("change",y.select)},h=()=>{y.loading=!1,(async()=>{y.loading=!0})()};return(t,v)=>{const f=n("ProSvg"),C=n("van-icon"),T=n("ProPopup");return a(),r(u,null,[i(f,{name:"customer",onClick:h}),i(T,{class:"customer-list",style:{height:"416px"},show:c(y).loading,closeable:!1},{default:s((()=>[l("div",he,[l("div",Ce,[l("span",null,o(e.title),1),i(C,{name:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAuRJREFUeF7t3DtOI0EQBuDfEtImXAdyNoIEAffYkIALrFZaMu4BiAQiyOE6myARoJI8kteyx/3469FWTTxT3fVNdY/dY/cCeVAFFtRoGQwJSi6CBE1QsgA5XFZogpIFyOGyQhOULEAOlxWaoGQBcris0CCglwB+ATgEcA/gFsAXuW/W4Q4AXAOQ3P4BuAPwUNuJlgqVBgVx9XheduSztgNBzv+xxDtb689VLWoL6CuAkw0Qo6Juw5QU3wD8rLnpLaDvAI62NDIa6hympPgB4Fgb9AbA75lGRkHdhSkpSq5/tEFl8n4CsD7fjDSnlmBKYZzXPmxbhrzAlXZIHmDRHlSqfW8FHRVVFVNQekBHQ1XHZICOgmqCyQKNjmqGyQSNimqKyQaNhmqOqQEaBdUFUwvUG9UNUxPUC9UVUxvUGtUd0wLUCjUEphWoNmoYTEtQLdRQmNagbNRwmB6gLNSQmF6gvahhMT1BW1FDY3qD1qLK+fKePPSrl94FZkmy9yipupdlI6czjYV4ORgBtLRS525cCMwIQ34VqaRSN6GGwYwG2lKpoTAjgk6ojwDm5ks5T+bVi2ivqaPMoetDP0F7H/XL62vn0RzyM/C1mFOoUKhRhnwrZjjUCKAlmPnBvnBOLcGchnR+9dyBWoM5/YKv5ZrCe8s5zWvI98D0XMtRm4niAcoAYcRQwbUGZUIwY9FwLUE1ADRiduFagWomrhm7GtcC1CJhizaKcLVBLRO1bGsrriaoR4Iebf6HqwXqmZhn293/AtlU+q4JVSwDqqxSsSs0AuZ0k136wgR1SUBhvaDoab7tJBZoREyXSmWARsY0R+0FHQHTFLUHdCRMM9RW0BExTVBbQHMDAvICc26RQQbNTVzIoLnNEBk0N8Iig0q41a3a5Gfaf2t3j+n6fqdzsdtWbTrp7EnUlo9Ne5K6ThoJSnZN0AQlC5DDZYUmKFmAHC4rNEHJAuRwWaEJShYgh8sKJYN+A6+yQmSPqqjtAAAAAElFTkSuQmCC"),onClick:v[0]||(v[0]=e=>c(y).loading=!1)},null,8,["name"])]),l("div",Te,[(a(!0),r(u,null,d(c(y).list,(e=>(a(),r("div",{key:e.customerId,class:m({item:!0,active:c(y).select.customerId===e.customerId}),onClick:t=>c(y).select=e},[l("span",De,o(e.cert[0].certName),1),l("span",null,o(e.cert[0].certNo),1),g(i(C,{class:"check-icon",name:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAn9JREFUSEvtlktIVFEcxn/XXpM6Mz5zVBzR8oFUVARRUljhItKNhZC0qVYhZjMMFIG0aFUUtijKB0GEBL02WmZqRjlbFyWSYQ+EynKyh5baNHPi3hsNtzuj89Bp44G7Oec732/u//y/c0cSQgj+w5AWwNGqevRK/eMLXD0AAx2wu47ogD8OwcVyGHmuFnSJIQrgwR5o2Avfx3ynuL5insFPmuB6NXjcPmjhDqhunSew1wO3HNB9Xtur+SVQ0wZL4+YBPPkVmvdBf7sWmrcVau7Bsnhlfm6ba/SV2kTvB7TQlcVwpB0Mxr/zkvj8VigtvqYMjKnhx/jFY2jYAxMurUfuZqi9DwaTZl4SdQWCD4NgssChFpAPP9ThvAIth8HzU7szZxPUdsBys85REsetgrFhdUGKUcKtPDGLZsfLTXTnGHSe02uzN8LRTohN8OsjiSGnoH4nuKd8goLt6tub0wPDp8ahuQqetek11g1g64LYxID71ebquw2NlSC8PqExDQ5eg6JS/WbXG7WJ3vXr17LWga0b4pJmrJivq+XM3bBpxXLpd52A8pMQs1hdG+qFyxUwPqo3zlwL9m6IT5n1mLRxummDrn9CL1vkbYP9jSpUvol+TeuNM1aD/WHQydCCvV5oqkQpfSgjvUiFmtKC3qW/QNyTUF8KL53BmVgKwd4DZktw+j8q/zfXxCc4U4yS75nGinxwyNCMkKBKcgP+53K9htNb4NuIf9PUVeB4BAmZIUNnBsurw31wtgSmx7XmKbkqNDErLOjsYFkx8AAulPm+qck5KjTJGjY0OLCsetoKd0+p+ay6BMnZEUGDB0eM0RvM7fc4hB+4AA6hWJFJfwMaXAhFHVsobQAAAABJRU5ErkJggg==")},null,8,["name"]),[[p,c(y).select.customerId===e.customerId]])],10,Pe)))),128))]),i(R,{shadow:!1,text:"确定",onClick:I})])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-71e988c8"]]);const Ne=(e,t="YYYY-MM-DD")=>v(e).format(t),Ve=(e,t=0,n="day",a="YYYY-MM-DD")=>v(e).add(t,n).format(a);const ke={class:"guarantee-list"},Ae=(e=>(O("data-v-2da31e52"),e=e(),N(),e))((()=>l("span",null,"保障计划",-1))),Se={key:0,class:"picture-payment-content"},we=["onClick"],be=["src"],Le=["src"],xe={key:1,class:"plan-list"},Ue=["onClick"],Re={key:2,class:"feerate-view"},Ee={class:"guarantee-detail"},Fe={key:0,class:"plan-list"},Me=["onClick"],qe={key:1},Be={class:"extinfo-info-list"},Ze={class:"content"};var _e=E(e({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1}},emits:["update-active-plan"],setup(e,{emit:t}){var p;const v=e,O=f(null==(p=v.dataSource)?void 0:p.planList),N=f(v.activePlanCode);y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e;v.isMultiplePlan&&(O.value=null==(e=v.dataSource)?void 0:e.planList)}),{immediate:!0});const V=f([]),k=f([]),A=f(),S=I((()=>v.isMultiplePlan?v.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e,t,n,a;if(N.value=v.activePlanCode,v.isMultiplePlan){if(O.value&&O.value.length>0){let e=0;const t=O.value.findIndex((e=>e.planCode===N.value));t>-1&&(e=t),V.value=O.value[e].guaranteeItemVOS,k.value=O.value[e].extInfoVOList,A.value=null==(a=O.value[e])?void 0:a.productPremiumVOList[0]}}else V.value=null==(e=v.dataSource)?void 0:e.planInsureVO.guaranteeItemVOS,k.value=null==(t=v.dataSource)?void 0:t.planInsureVO.extInfoVOList,A.value=null==(n=v.dataSource)?void 0:n.planInsureVO.productPremiumVOList[0]}),{immediate:!0,deep:!0});const w=I((()=>{var e;return(null==(e=v.dataSource)?void 0:e.rateUri)||""})),b=I((()=>!!(A.value&&A.value.paymentFrequencyValue&&A.value.premiumUnit&&w))),[L,x]=h(!1),U=I((()=>{var e;return!(!V.value||!(null==(e=V.value)?void 0:e.length))&&(V.value.length>v.count&&(!!v.isShowClose||!L.value))})),R=()=>{x()},E=I((()=>{var e;return V.value&&(null==(e=V.value)?void 0:e.length)?V.value.length<=v.count||L.value?V.value:V.value.slice(0,v.count):[]})),q=e=>{N.value=e,t("update-active-plan",e)},B=f(!1),Z=()=>{B.value=!0},_=()=>{ae({fileType:"pdf",feeFileUri:w.value})};return(t,p)=>{var v,f;const y=n("ProCell"),I=n("ProPopup"),h=C("dompurify-html");return a(),r(u,null,[l("div",ke,[l("div",{class:"header"},[Ae,l("span",{onClick:Z},"查看详情")]),e.isMultiplePlan?(a(),r(u,{key:0},[c(S).length>0?(a(),r("div",Se,[(a(!0),r(u,null,d(c(S),(e=>(a(),r("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>q(e.planCode)},[N.value==e.planCode?(a(),r("img",{key:0,src:e.selectedPic},null,8,be)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,Le))],8,we)))),128))])):(a(),r("div",xe,[(a(!0),r(u,null,d(O.value,((e,t)=>(a(),r("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===N.value?"plan-list-item-active":"")),onClick:t=>q(e.planCode)},[l("span",null,o(e.planName),1)],10,Ue)))),128))]))],64)):T("",!0),(a(!0),r(u,null,d(c(E),((e,t)=>(a(),P(y,{key:t,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),c(U)?(a(),r("div",{key:1,class:"show-more",onClick:R},[D(o(c(L)?"收起":"查看更多")+" ",1),i(F,{name:"down",class:m(["icon",{showMore:c(L)}])},null,8,["class"])])):T("",!0),c(b)?(a(),r("div",Re,[l("span",null,o(`${(null==(v=A.value)?void 0:v.paymentFrequencyValue)||""}${(null==(f=A.value)?void 0:f.premiumUnit)||""}`),1),c(w)?(a(),r("span",{key:0,onClick:_},"查看保费")):T("",!0)])):T("",!0)]),i(M),i(I,{show:B.value,"onUpdate:show":p[0]||(p[0]=e=>B.value=e),title:"保障详情",class:"guarantee-popup"},{default:s((()=>[l("div",Ee,[e.isMultiplePlan?(a(),r("div",Fe,[(a(!0),r(u,null,d(O.value,((e,t)=>(a(),r("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===N.value?"plan-list-item-active":"")),onClick:t=>q(e.planCode)},[l("span",null,o(e.planName),1)],10,Me)))),128))])):T("",!0),k.value&&k.value.length>0?(a(),r("div",qe,[l("div",Be,[(a(!0),r(u,null,d(k.value,((e,t)=>(a(),P(y,{key:t,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),i(M)])):T("",!0),(a(!0),r(u,null,d(V.value,((e,t)=>(a(),r("div",{key:t,class:"guarantee-item"},[i(y,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),g(l("div",Ze,null,512),[[h,e.content]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-2da31e52"]]);const je={class:"com-custom-card"},Ye={class:"title"};var He=E(e({props:{title:{type:String,required:!0}},setup:e=>(t,n)=>(a(),r("div",je,[l("div",Ye,o(e.title),1),l("div",null,[V(t.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-059c21ee"]]);const Qe={class:"question"},Ge={class:"title"};var Ke=E(e({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup:e=>(t,r)=>{const c=n("ProSvg"),u=n("van-collapse-item");return a(),P(u,{name:e.name,class:"com-question-item"},{title:s((()=>[l("div",Qe,[i(c,{name:"question"}),l("div",Ge,o(e.question),1)])])),default:s((()=>[D(" "+o(e.answer),1)])),_:1},8,["name"])}}),[["__scopeId","data-v-0d7ea124"]]);const Je={class:"com-question"};var We=E(e({props:{list:{type:Array,default:()=>[]}},setup(e){const t=e,[l,g]=h(!1),p=f([]),v=()=>{g()},y=I((()=>t.list.length<=4||l.value?t.list:t.list.slice(0,4)));return(t,g)=>{const f=n("van-collapse");return a(),r("div",Je,[i(f,{modelValue:p.value,"onUpdate:modelValue":g[0]||(g[0]=e=>p.value=e)},{default:s((()=>[(a(!0),r(u,null,d(c(y),((e,t)=>(a(),P(Ke,{key:t,name:t.toString(),question:e.title,answer:e.desc},null,8,["name","question","answer"])))),128))])),_:1},8,["modelValue"]),e.list.length>4?(a(),r("div",{key:0,class:"show-more",onClick:v},[D(o(c(l)?"收起":"展开")+" ",1),i(F,{name:"down",class:m(["icon",{showMore:c(l)}])},null,8,["class"])])):T("",!0)])}}}),[["__scopeId","data-v-1b7e97e9"]]);const Xe={class:"spec"},ze={key:1,class:"spec"},$e=["src"];var et=E(e({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:t}){const o=e,m=f(),g=f([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),p=I((()=>{var e,t,n,a;return(null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)&&(null==(a=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:a.spec.length)>0})),v=I((()=>{var e,t,n,a,r,i,s,l,c,u,d,m,g,p;const v=null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType;return!!(v===H.WORD&&(null==(r=null==(a=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:r.settlementProcessList)&&(null==(l=null==(s=null==(i=o.detail)?void 0:i.tenantProductInsureVO)?void 0:s.settlementProcessVO)?void 0:l.settlementProcessList.length)>0||v===H.IMAGE&&(null==(d=null==(u=null==(c=o.detail)?void 0:c.tenantProductInsureVO)?void 0:u.settlementProcessVO)?void 0:d.settlementProcessPicList)&&(null==(p=null==(g=null==(m=o.detail)?void 0:m.tenantProductInsureVO)?void 0:g.settlementProcessVO)?void 0:p.settlementProcessPicList.length)>0)})),y=I((()=>{var e,t,n,a;return(null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList)&&(null==(a=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:a.questionList.length)>0})),h=I((()=>{let e=[...g.value];return p.value||(e=e.filter((e=>"tab1"!==e.slotName))),v.value||y.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return t({handleClickTab:()=>{var e;return null==(e=m.value)?void 0:e.handleClickTab}}),(e,t)=>{const g=n("van-image");return a(),P(q,{ref_key:"scrollRef",ref:m,class:"tabs",list:c(h),sticky:"",scrollspy:""},k({tab3:s((()=>[V(e.$slots,"form",{},void 0,!0)])),_:2},[c(p)?{name:"tab1",fn:s((()=>{var e,t;return[l("div",Xe,[(a(!0),r(u,null,d((null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)||[],((e,t)=>(a(),P(g,{key:t,class:"detail-img",width:"100%","lazy-load":"",src:e},null,8,["src"])))),128)),i(M)])]}))}:void 0,c(v)||c(y)?{name:"tab2",fn:s((()=>{var e,t,n,l,m;return[c(v)?(a(),r(u,{key:0},[(null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType)===c(H).WORD?(a(),P(He,{key:0,title:"理赔流程"},{default:s((()=>{var e,t,n;return[i(ve,{list:null==(n=null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO)?void 0:n.settlementProcessList},null,8,["list"])]})),_:1})):(a(),r("div",ze,[(a(!0),r(u,null,d((null==(m=null==(l=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:l.settlementProcessVO)?void 0:m.settlementProcessPicList)||[],((e,t)=>(a(),r("img",{key:t,src:e,class:"detail-img"},null,8,$e)))),128))])),i(M)],64)):T("",!0),c(y)?(a(),r(u,{key:1},[i(He,{title:"常见问题"},{default:s((()=>{var e,t;return[i(We,{list:null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList},null,8,["list"])]})),_:1}),i(M)],64)):T("",!0)]}))}:void 0]),1032,["list"])}}}),[["__scopeId","data-v-72590bd3"]]);const tt={key:0,class:"page-waiting"},nt=["src"],at=(e=>(O("data-v-ead4d7ae"),e=e(),N(),e))((()=>l("div",{class:"tips"},[l("p",null,"支付成功，承保中...")],-1)));var rt=E(e({props:{isShow:{type:Boolean,default:()=>{}}},setup(e){const t=e;return y((()=>t.isShow),(e=>{document.body.style.overflow=e?"hidden":"inherit"})),(e,n)=>t.isShow?(a(),r("div",tt,[l("img",{class:"loading",src:c(fe)},null,8,nt),at])):T("",!0)}}),[["__scopeId","data-v-ead4d7ae"]]);const it={class:"list"},st=l("div",{class:"tip"},[l("span",null,[l("span",{class:"important-text"},"重要"),D(" 请确认被保险人是否存在下列问题，请如实告知，否则将对您的理赔权益或合同效力产生影响 ")])],-1),lt={class:"title"},ot={class:"item"},ct={class:"footer"},ut=D("不符合"),dt=D("符合，立即投保"),mt=e({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth","onCloseHealth"],setup(e,{emit:t}){const r=e,u=ce(),d=f(r.show),m=f(r.activeIndex),g=I((()=>{var e;return null==(e=r.contentList[m.value])?void 0:e.attachmentUri})),p=I((()=>{var e;return null==(e=r.contentList[m.value])?void 0:e.attachmentType})),v=f(!0),h=e=>{"allFalse"===e&&(v.value=!1,t("update:show",!1)),t("onConfirmHealth",e)};return y((()=>r),(()=>{d.value=r.show,m.value=r.activeIndex}),{deep:!0,immediate:!0}),(r,m)=>{const f=n("ProFilePreview"),y=n("VanButton"),I=n("van-config-provider"),C=n("ProPopup");return a(),P(C,{show:d.value,"onUpdate:show":m[2]||(m[2]=e=>d.value=e),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:m[3]||(m[3]=e=>{v.value&&t("onCloseHealth")})},{default:s((()=>[i(I,{"theme-vars":c(u),class:"custom-provider"},{default:s((()=>[l("div",it,[st,l("div",lt,o(e.contentList[0].attachmentName),1),l("div",ot,[(a(),P(f,{key:c(g),content:c(g),type:c(p)},null,8,["content","type"]))])]),l("div",ct,[i(y,{block:"",round:"",class:"left",onClick:m[0]||(m[0]=e=>h("N"))},{default:s((()=>[ut])),_:1}),i(y,{type:"primary",plain:"",block:"",round:"",onClick:m[1]||(m[1]=e=>h("allFalse"))},{default:s((()=>[dt])),_:1})])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});const gt=e=>(O("data-v-00ff7c41"),e=e(),N(),e),pt={class:"com-period-cell"},vt={key:0,class:"custom-cell check-btn-cell"},ft=gt((()=>l("div",{class:"cell-label"},"保障期间",-1))),yt={class:"cell-content"},It=gt((()=>l("div",{class:"cell-label"},"生效日期",-1))),ht={class:"cell-content"},Ct={key:2,class:"custom-cell common-cell"},Tt=gt((()=>l("div",{class:"cell-label"},"保障期限",-1))),Pt={class:"cell-content"};var Dt=E(e({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:d,emit:m}){const g=e;f({});const p=(e,t)=>"year"===e?`${t}年`:"month"===e?`${t}月`:"day"===e?`${t}日`:t,C=f(new Date),P=ye("RISK_INSURANCE_PERIOD"),D=t({formInfo:g.formInfo});y((()=>D.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(C.value=new Date(e))}));const O=f(),N=f([]);y([()=>g.insureDetail,()=>D.formInfo.activePlanCode],(()=>{var e;if(D.formInfo.insurancePeriodValue="",D.formInfo.insuranceStartDate="",D.formInfo.insuranceEndDate="",D.formInfo.commencementTime="",g.insureDetail)if(g.insureDetail.productRelationPlanVOList&&g.insureDetail.productRelationPlanVOList.length>0){let t=0;const n=g.insureDetail.productRelationPlanVOList.findIndex((e=>e.planCode===D.formInfo.activePlanCode));n>-1&&(t=n);const a=((null==(e=g.insureDetail.productRelationPlanVOList[t])?void 0:e.productRiskVoList[0].riskDetailVOList)||[]).find((e=>1===e.riskType));a&&(O.value=a)}else{const e=(g.insureDetail.productRiskVoList[0].riskDetailVOList||[]).find((e=>1===e.riskType));e&&(O.value=e)}}),{deep:!0,immediate:!0}),y([()=>O.value,()=>P.value],(()=>{N.value=[],Array.isArray(P.value)&&P.value.length>1&&O.value&&(N.value=(O.value.riskInsureLimitVO.insurancePeriodValueList||[]).map((e=>{const t=P.value.find((t=>t.value===e));return t?{label:t.name,value:t.value}:null})).filter((e=>!!e))),N.value.length>0&&(D.formInfo.insurancePeriodValue=N.value[0].value)}),{deep:!0,immediate:!0});const V=I((()=>{var e,t;return(null==(e=O.value)?void 0:e.riskInsureLimitVO.guaranteeStartDate)?String(null==(t=O.value)?void 0:t.riskInsureLimitVO.guaranteeStartDate):Q.CURRENT_DAY})),[k,S]=h(!1),w=()=>{S(!0)},b=new Date(Ve(new Date,1,"day")),L=I((()=>{var e;if(V.value===Q.CUSTOM_DAY){const t=null==(e=O.value)?void 0:e.riskInsureLimitVO.maxInsuranceDay;if(!t)return new Date;const n=Ve(new Date,Number(t),"day");return new Date(n)}return new Date})),x=e=>{D.formInfo.insuranceStartDate=`${Ne(e)} 00:00:00`,S(!1)},U=()=>{S(!1)},R=I((()=>{}));return y([()=>V.value,()=>R.value,()=>D.formInfo.insurancePeriodValue,()=>D.formInfo.insuranceStartDate],(()=>{if(!D.formInfo.insurancePeriodValue)return;const[e,t]=D.formInfo.insurancePeriodValue.split("_");if(D.formInfo.insuranceStartDate||(V.value===Q.CUSTOM_DAY||V.value===Q.NEXT_DAY?D.formInfo.insuranceStartDate=`${Ve(new Date,1,"day")} 00:00:00`:D.formInfo.insuranceStartDate=`${Ne(new Date)} 00:00:00`),"to"!==e){const n=`${((e,t=0,n="day",a="YYYY-MM-DD")=>v(e).subtract(t,n).format(a))(D.formInfo.insuranceStartDate,1,"day")} 00:00:00`;D.formInfo.insuranceEndDate=`${Ve(n,Number(t),e)} 23:59:59`}else D.formInfo.tenantOrderInsuredList[0].birthday,D.formInfo.tenantOrderInsuredList[0].certType===B.CERT&&D.formInfo.tenantOrderInsuredList[0].certNo&&Z(D.formInfo.tenantOrderInsuredList[0].certNo)&&_(D.formInfo.tenantOrderInsuredList[0].certNo),"single"===t&&(D.formInfo.insuranceEndDate="9999-99-99 23:59:59"),D.formInfo.insuranceEndDate=`${Ve(D.formInfo.insuranceStartDate,Number(t)-1,e)} 23:59:59`}),{immediate:!0}),d({}),(e,t)=>{const d=n("ProRadioButton"),m=n("van-config-provider"),g=n("van-datetime-picker"),v=n("ProPopup");return a(),r(u,null,[i(m,{"theme-vars":c(ue)},{default:s((()=>[l("div",pt,[N.value.length>1?(a(),r("div",vt,[ft,l("div",yt,[i(d,{modelValue:c(D).formInfo.insurancePeriodValue,"onUpdate:modelValue":t[0]||(t[0]=e=>c(D).formInfo.insurancePeriodValue=e),options:N.value},null,8,["modelValue","options"])])])):T("",!0),c(V)===c(Q).CUSTOM_DAY?(a(),r("div",{key:1,class:"custom-cell common-cell",onClick:w},[It,l("div",ht,o(c(D).formInfo.insuranceStartDate),1)])):T("",!0),c(V)!==c(Q).CUSTOM_DAY?(a(),r("div",Ct,[Tt,l("div",Pt,o(c(D).formInfo.insuranceStartDate?c(Ne)(c(D).formInfo.insuranceStartDate):"")+" - "+o(c(D).formInfo.insuranceEndDate?c(Ne)(c(D).formInfo.insuranceEndDate):""),1)])):T("",!0)])])),_:1},8,["theme-vars"]),i(v,{show:c(k),"onUpdate:show":t[2]||(t[2]=e=>A(k)?k.value=e:null),height:40,closeable:!1},{default:s((()=>[i(g,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),type:"date",title:"选择年月","min-date":c(b),"max-date":c(L),formatter:p,onConfirm:x,onCancel:U},null,8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-00ff7c41"]]);const Ot=e=>(O("data-v-0daa05e6"),e=e(),N(),e),Nt={class:"com-payment-type"},Vt={class:"title"},kt={key:0,class:"picture-payment-content"},At=["onClick"],St=["src"],wt=["src"],bt={key:1,class:"custom-cell check-btn-cell"},Lt=Ot((()=>l("div",{class:"cell-label"},"保障方案",-1))),xt={class:"cell-content"},Ut={key:0,class:"picture-payment-content"},Rt=["onClick"],Et=["src"],Ft=["src"],Mt={key:1,class:"default-payment-content"},qt=[Ot((()=>l("div",{class:"pay-method"},[l("span",{class:"method"},o("按月交费")),l("span",{class:"acount"},o("共12期"))],-1)))],Bt=[Ot((()=>l("div",null,[l("div",{class:"tip"},[l("span",null,o("比按月支付最高省")),D(),l("span",null,"16%")]),l("div",{class:"triangle"}),l("div",{class:"pay-method"},[l("span",{class:"method"},o("一次交清")),l("span",{class:"acount"},o("比月交保费省最高2014元"))])],-1)))],Zt={key:2,class:"custom-cell check-btn-cell"},_t=Ot((()=>l("div",{class:"cell-label"},"交费方式",-1))),jt={class:"cell-content"},Yt={class:"custom-cell common-cell"},Ht=Ot((()=>l("div",{class:"cell-label"},"实付保费",-1))),Qt={class:"cell-content actual-premium"},Gt={key:0,class:"feerate-explain"},Kt={class:"content"},Jt=Ot((()=>l("div",{class:"triangle-top"},null,-1)));var Wt=E(e({props:{showConfig:{type:Object,default:()=>{}},formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}},configDetail:{type:Object,default:()=>{}},isMultiplePlan:{type:Boolean,default:!1},premium:{type:[Number||null],default:null}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:g,emit:p}){const v=e;f({});const h=t({formInfo:v.formInfo}),C=f([]),D=f(),O=f(),N=I((()=>{var e;return"1"===String(null==(e=D.value)?void 0:e.paymentFrequencyFlag)})),V=I((()=>{var e;return null==(e=O.value)?void 0:e.productPremiumVOList.find((e=>e.paymentFrequency===h.formInfo.paymentFrequency))})),k=I((()=>v.premium&&V.value?`${v.premium}${V.value.premiumUnit||""}`:V.value?`${V.value.paymentFrequencyValue||""}${V.value.premiumUnit||""}`:"")),A=I((()=>{if(O){const{premiumExplain:e,premiumExplainViewName:t,premiumExplainUri:n}=O.value||{};return{premiumExplain:e,premiumExplainUri:n,premiumExplainViewName:t}}return null}));y((()=>v.configDetail),(()=>{var e;v.isMultiplePlan&&v.configDetail&&(C.value=null==(e=v.configDetail.tenantProductInsureVO)?void 0:e.planList)}),{immediate:!0,deep:!0}),y([()=>v.configDetail,()=>v.isMultiplePlan,()=>h.formInfo.activePlanCode],(()=>{if(v.configDetail)if(v.isMultiplePlan){let e=0;const t=v.configDetail.tenantProductInsureVO.planList.findIndex((e=>e.planCode===h.formInfo.activePlanCode));t>-1&&(e=t),D.value=v.configDetail.tenantProductInsureVO.planList[e].productPlanInsureConditionVO,O.value=v.configDetail.tenantProductInsureVO.planList[e]}else D.value=v.configDetail.tenantProductInsureVO.planInsureVO.productPlanInsureConditionVO,O.value=v.configDetail.tenantProductInsureVO.planInsureVO}),{deep:!0,immediate:!0});const w=I((()=>{var e;if(D.value&&D.value.paymentFrequency){return((null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1})),b=f(!1);y((()=>D.value),(()=>{var e;if(D.value){const t=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];if(1===t.length)return h.formInfo.paymentFrequency=D.value.paymentFrequency,void(b.value=!1);if(2===t.length&&t.filter((e=>![G.SINGLE,G.MONTH].includes(e))).length<1)return void(b.value=!0);b.value=!1}}),{immediate:!0,deep:!0});const L=I((()=>{var e;return D.value?null==(e=D.value.paymentFrequencyList||[])?void 0:e.map((e=>({...e,paymentFrequency:e.skinValue}))):[]})),x=I((()=>L.value.length>0)),U=I((()=>v.isMultiplePlan?v.configDetail.tenantProductInsureVO.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[])),R=I((()=>{var e,t;if(D.value){const n=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];return 1===n.length&&(h.formInfo.paymentFrequency=n[0]),null==(t=n||[])?void 0:t.map((e=>({label:K[e],value:e})))}return[]})),E=e=>{h.formInfo.paymentFrequency=e},F=()=>{var e,t;(null==(e=A.value)?void 0:e.premiumExplainUri)?ae({fileType:"pdf",fileUri:null==(t=A.value)?void 0:t.premiumExplainUri}):S("无费率文件！")};return g({}),(t,g)=>{const p=n("ProRadioButton"),v=n("templat"),f=n("ProDivider"),y=n("van-config-provider");return a(),P(y,{"theme-vars":c(ue)},{default:s((()=>[l("div",Nt,[l("div",Vt,o(c(w)?"交费方式":"保障计划"),1),e.isMultiplePlan?(a(),r(u,{key:0},[c(U).length>0?(a(),r("div",kt,[(a(!0),r(u,null,d(c(U),(e=>(a(),r("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>{return n=e.planCode,void(h.formInfo.activePlanCode=n);var n}},[c(h).formInfo.activePlanCode==e.planCode?(a(),r("img",{key:0,src:e.selectedPic},null,8,St)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,wt))],8,At)))),128))])):(a(),r("div",bt,[Lt,l("div",xt,[i(p,{modelValue:c(h).formInfo.activePlanCode,"onUpdate:modelValue":g[0]||(g[0]=e=>c(h).formInfo.activePlanCode=e),options:C.value,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])]))],64)):T("",!0),c(N)?(a(),P(v,{key:1},{default:s((()=>[c(x)&&c(L).length>1?(a(),r("div",Ut,[(a(!0),r(u,null,d(c(L),(e=>(a(),r("div",{key:e.paymentFrequency,class:m("picture-payment-item"),onClick:t=>E(e.paymentFrequency)},[c(h).formInfo.paymentFrequency==e.paymentFrequency?(a(),r("img",{key:0,src:e.selectedPic},null,8,Et)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,Ft))],8,Rt)))),128))])):b.value?(a(),r("div",Mt,[l("div",{class:m("com-payment-type-item "+(c(h).formInfo.paymentFrequency==c(G).MONTH?"active":"")),onClick:g[1]||(g[1]=e=>E(c(G).MONTH))},qt,2),l("div",{class:m("com-payment-type-item "+(c(h).formInfo.paymentFrequency==c(G).SINGLE?"active":"")),onClick:g[2]||(g[2]=e=>E(c(G).SINGLE))},Bt,2)])):c(R).length>1?(a(),r("div",Zt,[_t,l("div",jt,[i(p,{modelValue:c(h).formInfo.paymentFrequency,"onUpdate:modelValue":g[3]||(g[3]=e=>c(h).formInfo.paymentFrequency=e),options:c(R)},null,8,["modelValue","options"])])])):T("",!0)])),_:1})):T("",!0),i(Dt,{"form-info":c(h).formInfo,"insure-detail":e.insureDetail,"config-detail":e.configDetail},null,8,["form-info","insure-detail","config-detail"]),c(V)&&c(V).premiumUnit?(a(),r(u,{key:2},[l("div",Yt,[Ht,l("div",Qt,o(c(k)),1)]),c(A)&&c(A).premiumExplain&&c(A).premiumExplainViewName?(a(),r("div",Gt,[l("div",Kt,[Jt,l("div",null,[l("span",null,o(c(A).premiumExplain||""),1),l("span",{class:"file-name",onClick:F},"《"+o(c(A).premiumExplainViewName||"")+"》",1)])])])):T("",!0)],64)):T("",!0)]),i(f)])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-0daa05e6"]]);const Xt={class:"inscribedContent-content"},zt={class:"content"};var $t=E(e({props:{inscribedContent:{type:String,default:""}},setup(e){const t=e,n=f();return y((()=>t.inscribedContent),(e=>{n.value=e?e.replaceAll("\n","<br />"):""}),{immediate:!0,deep:!0}),(e,t)=>{const i=C("dompurify-html");return a(),r("div",Xt,[g(l("div",zt,null,512),[[i,n.value]])])}}}),[["__scopeId","data-v-702b2de2"]]);const en={class:"page-internet-product-detail"},tn={class:"info"},nn={class:"footer-area"},an={class:"price"},rn=D(" 总保费"),sn=D(o("立即投保"));var ln=E(e({setup(e){var d,m;const g=ce();w();const p=b(),{openId:v,productCode:h="BWYL2021",tenantId:C,phoneNo:D,agentCode:O="",saleChannelId:N,paymentMethod:V,certNo:k,name:A,templateId:E,pageCode:F,from:M,extraInfo:q,insurerCode:Z}=p.query;let _={};try{_=JSON.parse(decodeURIComponent(q))}catch(Qe){}const H=f({certNo:k,openId:v,tenantId:C,mobile:D}),Q=f(),K=f(),ae=f(),ue=f(),ve=f(),fe=f(!1),ye=f(!1),he=f(0),Ce=f(!1);f(!1);const Te=f(!1),Pe=f();let De="";const Ve=f(!0),ke="alert",Ae="jumpToPage";t({holder:{certNo:k,certType:B.CERT,mobile:D,name:A,socialFlag:J.HAS,extInfo:{hasSocialInsurance:J.HAS}},insured:{certNo:k,certType:B.CERT,name:A,socialFlag:J.HAS,relationToHolder:W.SELF},paymentMethod:V,renewalDK:"Y",packageProductList:[],mobileSmsCode:"",activePlanCode:"",paymentFrequency:G.YEAR,insurancePeriodValue:"",commencementTime:Ne(new Date)});const Se=f({tenantId:C,agencyId:O,orderCategory:1,saleUserId:N,saleChannelId:N,venderCode:Z,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:G.YEAR,insurancePeriodValue:"",commencementTime:"",tenantOrderHolder:{socialFlag:J.HAS,extInfo:{hasSocialInsurance:J.HAS}},tenantOrderInsuredList:[{socialFlag:J.HAS,relationToHolder:W.SELF,extInfo:{occupationCodeList:[],hasSocialInsurance:J.HAS},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:C,productCode:null==(d=ae.value)?void 0:d.productCode,productName:null==(m=ae.value)?void 0:m.productName,premium:ve.value||0}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",successJumpUrl:"",pageCode:"productInfo",extraInfo:_,templateId:null==_?void 0:_.templateId},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),we=I((()=>{var e,t,n,a,r,i;return!!ae.value&&!!((null==(t=null==(e=ae.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList)&&Array.isArray(null==(a=null==(n=ae.value)?void 0:n.tenantProductInsureVO)?void 0:a.planList)&&(null==(i=null==(r=ae.value)?void 0:r.tenantProductInsureVO)?void 0:i.planList.length)>0)})),be=I((()=>{var e,t,n;if(we.value){if(Se.value.activePlanCode)return(null==(e=ue.value)?void 0:e.planFactor[Se.value.activePlanCode])||{}}else if(null==(t=ue.value)?void 0:t.productFactor)return null==(n=ue.value)?void 0:n.productFactor;return{}}));I((()=>{if(be.value){return!!be.value.find((e=>"verificationCode"===e.code&&1===e.isDisplay))}return!1})),y((()=>we.value),(()=>{var e,t;we.value&&(Se.value.activePlanCode=null==(t=null==(e=ae.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList[0].planCode)}),{immediate:!0});const Le=I((()=>{var e,t,n;return we.value?(null==(t=null==(e=ue.value)?void 0:e.productRelationPlanVOList.find((e=>e.planCode===Se.value.activePlanCode)))?void 0:t.productRiskVoList)||[]:(null==(n=ue.value)?void 0:n.productRiskVoList)||[]})),xe=e=>{Se.value.activePlanCode=e},Ue=I((()=>{var e,t,n;if((null==(e=ue.value)?void 0:e.productQuestionnaireVOList)&&(null==(t=ue.value)?void 0:t.productQuestionnaireVOList.length)>0){const e=null==(n=ue.value)?void 0:n.productQuestionnaireVOList[0];if(e){const{basicInfo:{questionnaireType:t},questions:n}=e.questionnaireDetailResponseVO||{};return 2===t?[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:n,attachmentType:"question"}]:[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:n[0].content,attachmentType:re(String(t),n[0].content)}]}}return[]})),Re=f();y([()=>we.value,()=>Se.value.activePlanCode,()=>ae.value],(()=>{var e,t;let n=null;if(we.value&&ae.value){const t=null==(e=ae.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===(Se.value.activePlanCode||"")));t&&(n=null==t?void 0:t.attachmentVOList)}else ae.value&&(n=null==(t=ae.value)?void 0:t.tenantProductInsureVO.planInsureVO.attachmentVOList);Re.value=n?Object.keys(n).map((e=>(n[e].forEach((e=>{e.attachmentType=re(String(e.attachmentType),e.attachmentUri)})),{attachmentName:e,attachmentList:n[e]}))):[]}),{immediate:!0});const Ee=async(e,t)=>{const n=await Ie(e),{code:a,data:r}=n;"10000"===a&&(null==t||t())},Fe=()=>{K.value.handleClickTab()("tab3")},Me=e=>{he.value=e,ye.value=!0},qe=async()=>{const{code:e,data:t}=await $({orderNo:Pe.value,tenantId:C});"10000"===e&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await oe(t))},Be=async()=>{await oe(((e={},t={},n={})=>{var a;const r={...n},i={tenantId:C,riskList:(null==(a=r.tenantOrderInsuredList[0])?void 0:a.tenantOrderProductList[0].riskVOList)||[],riskPremium:t,productId:null==e?void 0:e.productBasicInfoVO.id};return r.extInfo.iseeBizNo=De,r.commencementTime=r.insuranceStartDate,r.expiryDate=r.insuranceEndDate,r.tenantOrderInsuredList=r.tenantOrderInsuredList.map((e=>({...e,planCode:Se.value.activePlanCode?Se.value.activePlanCode:null}))),r.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:"",productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:Se.value.activePlanCode?Se.value.activePlanCode:null,tenantOrderRiskList:se(i)},r})(ue.value,{},Se.value),(async(e,t)=>{t===Ae&&(null==e?void 0:e.orderNo)&&(Pe.value=null==e?void 0:e.orderNo,Re.value.length>0?(Ve.value=!1,Me(0)):Ue.value.length>0?fe.value=!0:await qe())}))},Ze=async(e,t,n,a=!0)=>{var r,i;const s=ie(n).map((t=>({...t,paymentFrequency:e.paymentFrequency,insurancePeriodValue:e.insurancePeriodValue}))),l={tenantId:C,productCode:null==(r=ae.value)?void 0:r.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,holder:{personVO:{...e.tenantOrderHolder,socialFlag:e.tenantOrderHolder.extInfo.hasSocialInsurance}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance},productPlanVOList:[{insurerCode:t.productBasicInfoVO.insurerCode,planCode:Se.value.activePlanCode?Se.value.activePlanCode:null,riskVOList:s}]})))},{code:o,message:c}=await ee(l);if("10000"===o){const{code:e,data:t}=await te(l);if("10000"===e){const{pageAction:e,message:n,data:r}=t.pageAction||{};if(e===ke)return void S(n);Se.value.tenantOrderInsuredList[0].tenantOrderProductList=null==(i=l.insuredVOList[0])?void 0:i.productPlanVOList,ve.value=t.premium,Se.value.orderAmount=t.premium,Se.value.orderRealAmount=t.premium,a||Be()}}else S(c)},je=async()=>{try{await Ze(Se.value,ue.value,Le.value,!1)}catch(e){}},Ye=e=>{"allFalse"===e?(fe.value=!1,qe()):x.confirm({message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{fe.value=!1}))},He=()=>{ye.value=!1,Ue.value.length<1?qe():fe.value=!0};y([()=>Se.value.tenantOrderInsuredList[0].birth,()=>Se.value.tenantOrderInsuredList[0].gender,()=>Se.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance],U((async()=>{const{birth:e,gender:t,extInfo:{hasSocialInsurance:n}}=Se.value.tenantOrderInsuredList[0];e&&t&&n&&await Ze(Se.value,ue.value,Le.value)}),500),{deep:!0,immediate:!0});return j(),L((()=>{(async()=>{var e;const t=await ne({productCode:h,withInsureInfo:!0,tenantId:C});"10000"===t.code&&(Te.value=!0,ae.value={...t.data},document.title=(null==(e=t.data)?void 0:e.productFullName)||"");const n=await z({productCode:h});"10000"===n.code&&(ue.value=n.data)})(),setTimeout((async()=>{De=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const d=n("van-config-provider");return a(),r(u,null,[i(d,{"theme-vars":c(g)},{default:s((()=>{var n,r,u,d,m,p,v,f,y;return[l("div",en,[l("div",tn,[i(de,{url:null==(r=null==(n=ae.value)?void 0:n.tenantProductInsureVO)?void 0:r.banner[0]},null,8,["url"]),(null==(d=null==(u=ae.value)?void 0:u.tenantProductInsureVO)?void 0:d.bannerMove)?(a(),P(de,{key:0,url:null==(p=null==(m=ae.value)?void 0:m.tenantProductInsureVO)?void 0:p.bannerMove[0],onClick:Fe},null,8,["url"])):T("",!0)]),i(_e,{"show-service-config":"","data-source":null==(v=ae.value)?void 0:v.tenantProductInsureVO,"is-multiple-plan":c(we),"active-plan-code":Se.value.activePlanCode,onUpdateActivePlan:xe},null,8,["data-source","is-multiple-plan","active-plan-code"]),i(et,{ref_key:"detailScrollRef",ref:K,detail:ae.value},{form:s((()=>[i(le,{ref_key:"formRef",ref:Q,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":Se.value,"send-sms-code":Ee,"factor-object":c(be)||{}},{holderName:s((()=>[i(Oe,{"user-info":H.value},null,8,["user-info"])])),insurerName:s((()=>[i(Oe,{title:"选择被保人","user-info":H.value},null,8,["user-info"])])),_:1},8,["form-info","factor-object"]),i(Wt,{"form-info":Se.value,"insure-detail":ue.value,"config-detail":ae.value,"is-multiple-plan":c(we),"risk-info-period-list":e.riskInfoPeriodList,premium:ve.value},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","risk-info-period-list","premium"])])),_:1},8,["detail"]),(null==(f=ae.value)?void 0:f.tenantProductInsureVO.inscribedContent)?(a(),P($t,{key:0,"inscribed-content":null==(y=ae.value)?void 0:y.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):T("",!0),Re.value&&Re.value.length>0?(a(),P(me,{key:1,"attachement-list":Re.value,"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>Me(e))},null,8,["attachement-list"])):T("",!0),l("div",nn,[l("div",an,[rn,l("span",null,o(ve.value?"￥":"")+o(c(Y)(ve.value))+" "+o(ve.value?Se.value.paymentFrequency==c(X).YEAR?"元/年":"元/月":""),1)]),i(R,{shadow:!1,"theme-vars":c(g),class:"right",text:"立即投保",onClick:je},{default:s((()=>[sn])),_:1},8,["theme-vars"])])]),Te.value?(a(),P(ge,{key:0,"product-detail":ae.value},null,8,["product-detail"])):T("",!0)]})),_:1},8,["theme-vars"]),i(mt,{show:fe.value,"onUpdate:show":t[1]||(t[1]=e=>fe.value=e),"content-list":c(Ue),"active-index":0,onOnConfirmHealth:Ye},null,8,["show","content-list"]),ye.value?(a(),P(pe,{key:0,show:ye.value,"onUpdate:show":t[2]||(t[2]=e=>ye.value=e),"content-list":Re.value,"is-only-view":Ve.value,"active-index":he.value,text:Ve.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:He},null,8,["show","content-list","is-only-view","active-index","text"])):T("",!0),i(rt,{"is-show":Ce.value},null,8,["is-show"])],64)}}}),[["__scopeId","data-v-6e7ad2d4"]]);export{ln as default};

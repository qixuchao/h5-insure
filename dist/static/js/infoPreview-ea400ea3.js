import{d as e,o as t,c as n,b as a,w as o,F as s,s as i,p as r,a as l,u as c,ag as u,f as d,d2 as p,aS as m,ae as f,af as y,i as h,h as I,aj as v,r as g,j as k,aH as w,l as j,q as b,am as P,a8 as q,d3 as C,an as _,g as L,v as V,aQ as x,aP as N,aG as D,bJ as S,ak as O,bH as T,ao as E,c6 as R}from"./index-fd9ed705.js";import{P as Q,a as A}from"./PolicyInfo-ceee3db7.js";import{g as U,m as F}from"./trial-ce3ee623.js";import{n as M}from"./nextStep-64078f34.js";import{b as $,l as z}from"./product-1fd2b694.js";import{u as B}from"./useOrder-44313ef8.js";import{P as J}from"./index-95ac3b7c.js";import{P as Y}from"./index-e507090a.js";import{R as G,c as H}from"./trial-71a920e2.js";import{p as K,d as W}from"./utils-ed49fb0f.js";import{I as X}from"./insuranceNotificationInformation-eaa327c9.js";import{Q as Z}from"./notice-33e6eedd.js";import{g as ee}from"./utils-3b8bee91.js";import{Q as te}from"./questionnaire-42dcb602.js";import"./core-0bc63e0f.js";import"./cloneDeep-651db0b6.js";import"./infoCollection-67c34215.js";import"./util-95507d37.js";import"./index-78ee8c56.js";import"./index-17c4b144.js";const ne={class:"com-insured-part-wrapper"},ae={class:"content-wrapper"},oe={class:"risk-item"},se=e({__name:"InsureInfo",props:{productData:{default:()=>[]},totalPremium:{default:0}},setup:e=>(e,f)=>{const y=p,h=m;return t(),n("div",ne,[a(h,{title:"保障信息","show-icon":!1},{default:o((()=>[(t(!0),n(s,null,i(e.productData,(e=>(t(),n(s,{key:e.productCode},[(t(!0),n(s,null,i(e.riskList,(e=>(t(),r(h,{key:e.riskCode,title:e.riskName},{default:o((()=>{var o;return[l("div",ae,[l("div",oe,[e.riskType===c(G).MAIN_RISK?(t(),n(s,{key:0},[a(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),a(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])],64)):(t(),n(s,{key:1},[a(y,{title:e.riskName,content:"投保"},null,8,["title"]),e.exemptFlag===c(u).YES?(t(),r(y,{key:0,title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])):(null==(o=e.liabilityList)?void 0:o.length)?(t(),n(s,{key:1},[a(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),a(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"]),a(y,{title:"交费方式",content:c(H)[e.paymentFrequency]},null,8,["content"])],64)):d("",!0)],64)),a(y,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),a(y,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])]})),_:2},1032,["title"])))),128))],64)))),128))])),_:1})])}});const ie={class:"long-info-preview"},re={class:"insurance-notification-information card"},le={class:"footer-btn"},ce=l("span",null,"分享",-1),ue=e({__name:"infoPreview",setup(e){const u=f((()=>y((()=>import("./index-df44085f.js")),["static/js/index-df44085f.js","static/css/index-fa4edf2a.css","static/js/index-fd9ed705.js","static/css/index-f7829d26.css","static/js/theme-94cf7d00.js","static/js/index-e507090a.js","static/css/index-bbfdd7ec.css","static/js/utils-3b8bee91.js","static/js/infoCollection-67c34215.js","static/js/trial-71a920e2.js"]))),p=h(),G=I(),H=B(),ne={holder:v.holderSign,insured:v.insuredSign,agent:v.agentSign},{productCode:ae="",tenantId:oe,agentCode:ue="",agencyCode:de,saleChannelId:pe,isShare:me,orderNo:fe,extraInfo:ye,insurerCode:he,objectType:Ie="1",preview:ve}=p.query;let ge={};try{ge=JSON.parse(decodeURIComponent(ye))}catch(Re){}const ke=g({isView:!1,personalInfo:{},policyInfo:{schema:[],config:[],formData:{}},payInfo:{schema:[],config:[],formData:[]},customerQuestions:[]}),we=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,je=k({imgUrl:"",desc:"",title:"",link:we}),be=k(),Pe=k(),qe=k(!1),Ce=k(0),_e=k(!1),Le=()=>{qe.value=!1},Ve=k(),xe=()=>{M(H.value,((e,t)=>{t===x.JUMP_PAGE&&Ve.value.handleShare()}))},Ne=async()=>{ve?N(D.INFO_PREVIEW,p.query):G.push({path:ne[Ie],query:p.query})},De=k(),Se=k(),Oe=k([]),Te=async()=>{let e={};const{code:t,data:n}=await U({orderNo:fe,tenantId:oe});"10000"===t&&(Object.assign(H.value,n),e=K(n.insuredList[0].productList),De.value=n,_e.value=!0),(async e=>{let t=[];const{code:n,data:a}=await R({orderNo:fe,tenantId:oe});"10000"===n&&(t=a.productQuestionnaireVOList);const{code:o,data:s}=await z(e);if("10000"===o){const{productQuestionnaireVOList:e}=s||{},n=e.filter((e=>e.businessType!==Z.VISIT));ke.customerQuestions=n.map((e=>{const{questionnaireDetailResponseVO:n,questionnaireId:a,questionnaireName:o}=e||{},{questions:s,basicInfo:i}=n||{},{objectType:r,questionnaireType:l}=i||{};if(l===te.TEXT){const{content:e,textType:t}=(null==s?void 0:s[0])||{};return{content:e,contentType:ee(`${t}`,e),questionnaireId:a,questionnaireName:o}}const c=(t||[]).find((e=>e.questionnaireId===a));return{...n,contentType:"question",...null==c?void 0:c.questionnaireDetailResponseVO,questionnaireId:a,questionnaireName:o}}))}})({productCodeList:e.productList.map((e=>e.productCode))}),$(e).then((({code:e,data:t})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:n}=W(t);Oe.value=e.concat(n)}})),F(e).then((({data:e,code:t})=>{if("10000"===t){const{productDetailResList:t,productFactor:n}=e;Se.value=n;const{payInfo:a,other:o}=S(n);ke.payInfo={...ke.payInfo,...a},ke.policyInfo={...ke.policyInfo,...o}}}))};w((()=>{Te()}));const Ee=k();return j((()=>{setTimeout((async()=>{Ee.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,p)=>{var f,y,h;const I=O,v=T,g=m,k=E;return t(),n("div",ie,[a(I),a(se,{"product-data":null==(y=null==(f=c(H).insuredList)?void 0:f[0])?void 0:y.productList},null,8,["product-data"]),(null==(h=Object.keys(c(Se)||{}))?void 0:h.length)?(t(),r(J,{key:0,ref_key:"personalInfoRef",ref:Pe,modelValue:c(De),"onUpdate:modelValue":p[0]||(p[0]=e=>b(De)?De.value=e:null),"product-factor":c(Se),"is-view":""},null,8,["modelValue","product-factor"])):d("",!0),c(ke).payInfo.schema.length?(t(),r(c(Q),{key:1,ref_key:"payInfoRef",ref:be,modelValue:c(H).tenantOrderPayInfoList,"onUpdate:modelValue":p[1]||(p[1]=e=>c(H).tenantOrderPayInfoList=e),schema:c(ke).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):d("",!0),c(ke).policyInfo.schema.length?(t(),r(c(A),{key:2,modelValue:c(H).extInfo,"onUpdate:modelValue":p[2]||(p[2]=e=>c(H).extInfo=e),schema:c(ke).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):d("",!0),l("div",re,[a(X,{title:"投保告知信息",data:c(ke).customerQuestions||[]},null,8,["data"])]),a(g,{title:"产品资料","show-line":!1,"show-icon":!1},{default:o((()=>[(t(!0),n(s,null,i(c(Oe),((e,n)=>(t(),r(v,{key:n,"is-link":"",title:e.attachmentName,onClick:e=>(e=>{Ce.value=e,qe.value=!0})(n)},null,8,["title","onClick"])))),128))])),_:1}),l("div",le,[!c(me)&&c(je).isShare&&c(P)()?(t(),r(_,q({key:0},c(je),{class:"share-btn",onClick:C(xe,["stop"])}),{default:o((()=>[a(k,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ce])),_:1},16,["onClick"])):d("",!0),a(Y,{shadow:!1,onClick:Ne},{default:o((()=>[L(e.$slots,"default",{},(()=>[V("下一步")]))])),_:3})]),c(qe)?(t(),r(c(u),{key:3,show:c(qe),"onUpdate:show":p[3]||(p[3]=e=>b(qe)?qe.value=e:null),"content-list":[c(Oe)[c(Ce)]],"is-only-view":"","active-index":0,text:"关闭","force-read-cound":0,onOnCloseFilePreviewByMask:Le},null,8,["show","content-list"])):d("",!0)])}}});export{ue as default};

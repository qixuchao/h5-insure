import{_ as e}from"./index-70107b3b.js";import{i as a,l as t,m as l,n as s,P as o,r as i,N as n,k as r,s as u,t as d,p as c,B as v,C as p,L as m,F as h,G as f,H as y,M as b,A as w,$ as g,x as C}from"./vendor-6e9e6128.js";import{q as k}from"./product-7775d88e.js";import{P as x}from"./index-3e9c8b97.js";import{u as P}from"./theme-467ed2f7.js";import{o as _}from"./utils-b1ef6430.js";var N=e(a({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""}},setup(e){const a=e;return(e,o)=>{const i=t("van-image");return l(),s(i,{width:"100%",class:"banner","lazy-load":"",src:a.url},null,8,["src"])}}}),[["__scopeId","data-v-0852e55a"]]);const T={class:"pre-body"},R={class:"header"},j=["src"],B={class:"company-name"},I={class:"content"},D=f(" 为了更好地保护您的个人信息，请在使用前点击阅读、充分理解"),L=f("相关内容，我们对您使用过程中可能出现的个人信息收集、使用、共享和保护等情况进行了详细说明。 您已进入投保流程，请仔细阅读"),O=f("、投保须知、保险条款等信息，为维护您的合法权益，您的操作轨迹将被记录。 "),S={class:"footer"};var U=e(a({props:{productDetail:{type:Object,default:()=>{}}},setup(e){const a=e,s=o(),{tenantId:f=""}=s.query,y=i(!1),b=i(!1),w=n({insureConfig:{insureName:"",tenantName:""}}),g=i({title:"",link:""}),C=(e,a)=>{var t;b.value=!b.value,g.value.link=null==(t=w.insureConfig)?void 0:t[a].link,g.value.title=e.target.innerText};return r((()=>{(async()=>{const{code:e,data:t}=await k({insureCode:a.productDetail.insurerCode,tenantId:f});"10000"===e&&(w.insureConfig=t),y.value=!0})()})),(e,a)=>{var s;const o=t("ProPopup"),i=t("ProFilePreview");return l(),u(h,null,[d(o,{class:"pre-notice-wrap","close-on-click-overlay":!1,show:y.value,closeable:!1,height:"395px"},{default:c((()=>[v("div",T,[v("div",R,[v("img",{src:p("/static/assets/logo.65e1895e.png")},null,8,j),v("div",B," 由"+m(p(w).insureConfig.tenantName)+"提供保险经纪服务，"+m(p(w).insureConfig.insureName)+"承保 ",1)]),v("div",I,[D,v("span",{onClick:a[0]||(a[0]=e=>C(e,"privacyAgreement"))},"《用户隐私协议》"),L,v("span",{onClick:a[1]||(a[1]=e=>C(e,"notification"))},"《客户告知书》"),O]),v("div",S,[d(x,{shadow:!1,text:"我知道了",onClick:a[2]||(a[2]=e=>y.value=!1)})])])])),_:1},8,["show"]),d(o,{show:b.value,"onUpdate:show":a[3]||(a[3]=e=>b.value=e),class:"pre-notice-wrap",title:null==(s=g.value)?void 0:s.title,position:"bottom",style:{height:"600px"}},{default:c((()=>{var e;return[d(i,{content:null==(e=g.value)?void 0:e.link,type:"link"},null,8,["content"])]})),_:1},8,["show","title"])],64)}}}),[["__scopeId","data-v-79a863b0"]]);const F=["onClick"];var $=e(a({props:{preText:{type:String,default:""},hasBgColor:{type:Boolean,default:!0},attachementList:{type:Object,default:()=>{}}},emits:["preview-file"],setup:(e,{emit:a})=>(t,s)=>(l(),u("div",{class:b({"com-attachment-list":!0,"has-bg":e.hasBgColor})},[v("span",null,m(e.preText),1),(l(!0),u(h,null,y(e.attachementList||[],((e,t)=>(l(),u("span",{key:t,class:"attachment-item",onClick:e=>(e=>{a("preview-file",e)})(t)}," 《"+m(e.attachmentName)+"》 ",9,F)))),128))],2))}),[["__scopeId","data-v-4c895668"]]);const A={key:0,class:"item"},H={key:1,class:"attachment-list"},q=["onClick"],M={class:"attachment-list-item-name"},V={class:"attachment-list-item-icon"},z={class:"footer"},E=a({props:{show:{type:Boolean,default:!1},contentList:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},text:{type:String,default:""},beforeReadOverText:{type:String,default:"同意，下一条"},forceReadCound:{type:Number,default:0},isOnlyView:{type:Boolean,default:!1}},emits:["update:show","submit","onCloseFilePreview"],setup(e,{emit:a}){const o=e,n=P(),r=i(o.show),f=i(o.contentList.map(((e,a)=>({...e,disabled:!0,readDisabled:!0})))),b=i(o.activeIndex),k=i(0),N=i(null),T=w((()=>{var e,a;return null==(a=null==(e=f.value)?void 0:e[b.value])?void 0:a.attachmentList})),R=w((()=>{var e;return null==(e=f.value[b.value])?void 0:e.readDisabled})),j=w((()=>!(b.value>=o.forceReadCound-1)&&(!(k.value>=o.forceReadCound)&&(k.value<o.forceReadCound&&b.value!==o.forceReadCound-1)))),B=()=>{b.value+=1},I=()=>{o.isOnlyView?a("update:show",!1):(a("update:show",!1),a("submit"))};g((()=>o),(()=>{r.value=o.show,b.value=o.activeIndex}),{deep:!0,immediate:!0});const D=e=>{e&&Math.floor(e.target.scrollHeight-e.target.scrollTop)===e.target.clientHeight&&f.value[b.value].readDisabled&&(f.value[b.value].disabled=!1,f.value[b.value].readDisabled=!1,f.value[b.value+1].disabled=!1,k.value+=1)};return g((()=>b.value),(()=>{o.show&&(k.value>=o.forceReadCound&&f.value.forEach((e=>{e.disabled=!1,e.readDisabled=!1})),N.value&&(N.value.scrollTop=0))}),{immediate:!0}),(i,w)=>{const g=t("ProTab"),k=t("ProFilePreview"),P=t("ProSvg"),L=t("van-config-provider"),O=t("ProPopup");return l(),s(O,{show:r.value,"onUpdate:show":w[1]||(w[1]=e=>r.value=e),class:"file-preview-popup-wrap",closeable:!1,onClose:w[2]||(w[2]=e=>a("onCloseFilePreview"))},{default:c((()=>[d(L,{"theme-vars":p(n),class:"custom-provider"},{default:c((()=>[r.value?(l(),s(g,{key:0,active:b.value,"onUpdate:active":w[0]||(w[0]=e=>b.value=e),list:f.value.map(((e,a)=>({title:e.attachmentName,disabled:a!=b.value&&(e.disabled||!1),slotName:`guarantee-${a}`}))),class:"tab"},null,8,["active","list"])):C("",!0),v("div",{ref_key:"previewRef",ref:N,class:"list",onScroll:D},[1===p(T).length?(l(),u("div",A,[(l(),s(k,{key:p(T)[0].attachmentName,content:p(T)[0].attachmentUri,type:p(T)[0].attachmentType,"forbid-click":!0},null,8,["content","type"]))])):(l(),u("div",H,[(l(!0),u(h,null,y(p(T),((e,a)=>(l(),u("div",{key:a,class:"attachment-list-item",onClick:a=>(e=>{const a={fileType:e.attachmentType,fileUri:e.attachmentUri};_(a)})(e)},[v("div",M,m(e.attachmentName),1),v("div",V,[d(P,{name:"arrow-right"})])],8,q)))),128))]))],544),v("div",z,[p(j)?(l(),s(x,{key:0,shadow:!1,"theme-vars":p(n),disabled:p(R),class:"right",text:`${e.beforeReadOverText}(${b.value+1}/${e.forceReadCound})`,onClick:B},null,8,["theme-vars","disabled","text"])):(l(),s(x,{key:1,disabled:p(R),shadow:!1,"theme-vars":p(n),text:o.text,onClick:I},null,8,["disabled","theme-vars","text"]))])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});export{$ as A,N as B,U as P,E as _};

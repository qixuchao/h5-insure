import{h as z,N as ve,k as Z,m as n,s as o,t as _,p as U,B as i,L as S,C as t,F as x,H as W,M as ne,I as Ce,J as ut,d as De,r as C,$ as G,A as F,R as Te,ag as $e,x as M,n as X,G as de,a5 as ye,a6 as _e,Z as Re,_ as ct,U as dt,T as mt,aa as pt,P as gt,l as ft,j as vt,D as yt}from"./vendor-902054a7.js";import{P as Ue}from"./index-77abe60a.js";import{_ as ee,e as qe,i as ge,a7 as _t,C as Ie,I as Ze,K as ht,a1 as It}from"./index-84e52064.js";import{C as he,k as ue,l as se,m as Ct,S as Le,R as Ee,g as Dt}from"./infoCollection-06729193.js";import{i as Tt,n as be,p as Pt,g as Ot}from"./trial-80db563f.js";import{p as At}from"./product-577c8f86.js";import{o as Ye,r as Nt,t as kt}from"./utils-f9b0d761.js";import{t as He,u as St}from"./theme-fdbb0f53.js";import{B as Be}from"./index-bfb3ad68.js";import{P as Vt}from"./index-17f311b4.js";import{L as Ft}from"./loading-1c9c1d7b.js";import{_ as wt,a as Lt}from"./index-b1a9af19.js";import{u as Et}from"./useDicData-a1a7d9a2.js";import{_ as bt}from"./index-65d2063a.js";import"./useStorage-fc2bd838.js";import"./trial-1f149b67.js";import"./check-detail-c292a89b.js";import"./relativeTime-cdc592a9.js";var Bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAuRJREFUeF7t3DtOI0EQBuDfEtImXAdyNoIEAffYkIALrFZaMu4BiAQiyOE6myARoJI8kteyx/3469FWTTxT3fVNdY/dY/cCeVAFFtRoGQwJSi6CBE1QsgA5XFZogpIFyOGyQhOULEAOlxWaoGQBcris0CCglwB+ATgEcA/gFsAXuW/W4Q4AXAOQ3P4BuAPwUNuJlgqVBgVx9XheduSztgNBzv+xxDtb689VLWoL6CuAkw0Qo6Juw5QU3wD8rLnpLaDvAI62NDIa6hympPgB4Fgb9AbA75lGRkHdhSkpSq5/tEFl8n4CsD7fjDSnlmBKYZzXPmxbhrzAlXZIHmDRHlSqfW8FHRVVFVNQekBHQ1XHZICOgmqCyQKNjmqGyQSNimqKyQaNhmqOqQEaBdUFUwvUG9UNUxPUC9UVUxvUGtUd0wLUCjUEphWoNmoYTEtQLdRQmNagbNRwmB6gLNSQmF6gvahhMT1BW1FDY3qD1qLK+fKePPSrl94FZkmy9yipupdlI6czjYV4ORgBtLRS525cCMwIQ34VqaRSN6GGwYwG2lKpoTAjgk6ojwDm5ks5T+bVi2ivqaPMoetDP0F7H/XL62vn0RzyM/C1mFOoUKhRhnwrZjjUCKAlmPnBvnBOLcGchnR+9dyBWoM5/YKv5ZrCe8s5zWvI98D0XMtRm4niAcoAYcRQwbUGZUIwY9FwLUE1ADRiduFagWomrhm7GtcC1CJhizaKcLVBLRO1bGsrriaoR4Iebf6HqwXqmZhn293/AtlU+q4JVSwDqqxSsSs0AuZ0k136wgR1SUBhvaDoab7tJBZoREyXSmWARsY0R+0FHQHTFLUHdCRMM9RW0BExTVBbQHMDAvICc26RQQbNTVzIoLnNEBk0N8Iig0q41a3a5Gfaf2t3j+n6fqdzsdtWbTrp7EnUlo9Ne5K6ThoJSnZN0AQlC5DDZYUmKFmAHC4rNEHJAuRwWaEJShYgh8sKJYN+A6+yQmSPqqjtAAAAAElFTkSuQmCC",xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAn9JREFUSEvtlktIVFEcxn/XXpM6Mz5zVBzR8oFUVARRUljhItKNhZC0qVYhZjMMFIG0aFUUtijKB0GEBL02WmZqRjlbFyWSYQ+EynKyh5baNHPi3hsNtzuj89Bp44G7Oec732/u//y/c0cSQgj+w5AWwNGqevRK/eMLXD0AAx2wu47ogD8OwcVyGHmuFnSJIQrgwR5o2Avfx3ynuL5insFPmuB6NXjcPmjhDqhunSew1wO3HNB9Xtur+SVQ0wZL4+YBPPkVmvdBf7sWmrcVau7Bsnhlfm6ba/SV2kTvB7TQlcVwpB0Mxr/zkvj8VigtvqYMjKnhx/jFY2jYAxMurUfuZqi9DwaTZl4SdQWCD4NgssChFpAPP9ThvAIth8HzU7szZxPUdsBys85REsetgrFhdUGKUcKtPDGLZsfLTXTnGHSe02uzN8LRTohN8OsjiSGnoH4nuKd8goLt6tub0wPDp8ahuQqetek11g1g64LYxID71ebquw2NlSC8PqExDQ5eg6JS/WbXG7WJ3vXr17LWga0b4pJmrJivq+XM3bBpxXLpd52A8pMQs1hdG+qFyxUwPqo3zlwL9m6IT5n1mLRxummDrn9CL1vkbYP9jSpUvol+TeuNM1aD/WHQydCCvV5oqkQpfSgjvUiFmtKC3qW/QNyTUF8KL53BmVgKwd4DZktw+j8q/zfXxCc4U4yS75nGinxwyNCMkKBKcgP+53K9htNb4NuIf9PUVeB4BAmZIUNnBsurw31wtgSmx7XmKbkqNDErLOjsYFkx8AAulPm+qck5KjTJGjY0OLCsetoKd0+p+ay6BMnZEUGDB0eM0RvM7fc4hB+4AA6hWJFJfwMaXAhFHVsobQAAAABJRU5ErkJggg==";const Mt={class:"customer-body"},$t={class:"header"},Rt={class:"conatiner"},Ut=["onClick"],qt={class:"name"},Zt=z({props:{userInfo:{type:Object,default:()=>({})},relationCode:{type:String,default:"1"},title:{type:String,default:"\u9009\u62E9\u6295\u4FDD\u4EBA"}},emits:["change"],setup(u,{emit:D}){let a=[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"\u738B\u5927\u5566",certNo:"110101199003078910",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"001",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"},{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"\u674E\u5927\u9704",certNo:"110101199003070193",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"002",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"}];a=[...a,...a,...a];const r=ve({loading:!1,select:a[0],list:a}),g=async()=>{r.loading=!0},v=()=>{r.loading=!1,D("change",r.select)},h=()=>{r.loading=!1,g()};return(l,b)=>{const V=Z("ProSvg"),d=Z("van-icon"),f=Z("ProPopup");return n(),o(x,null,[_(V,{name:"customer",onClick:h}),_(f,{class:"customer-list",style:{height:"416px"},show:t(r).loading,closeable:!1},{default:U(()=>[i("div",Mt,[i("div",$t,[i("span",null,S(u.title),1),_(d,{name:t(Bt),onClick:b[0]||(b[0]=T=>t(r).loading=!1)},null,8,["name"])]),i("div",Rt,[(n(!0),o(x,null,W(t(r).list,T=>(n(),o("div",{key:T.customerId,class:ne({item:!0,active:t(r).select.customerId===T.customerId}),onClick:w=>t(r).select=T},[i("span",qt,S(T.cert[0].certName),1),i("span",null,S(T.cert[0].certNo),1),Ce(_(d,{class:"check-icon",name:t(xt)},null,8,["name"]),[[ut,t(r).select.customerId===T.customerId]])],10,Ut))),128))]),_(Ue,{shadow:!1,text:"\u786E\u5B9A",onClick:v})])]),_:1},8,["show"])],64)}}});var xe=ee(Zt,[["__scopeId","data-v-71e988c8"]]);const pe=(u,D="YYYY-MM-DD")=>De(u).format(D),ce=(u,D=0,a="day",r="YYYY-MM-DD")=>De(u).add(D,a).format(r),Yt=(u,D=0,a="day",r="YYYY-MM-DD")=>De(u).subtract(D,a).format(r);const Ht=u=>(ye("data-v-9a094e48"),u=u(),_e(),u),Qt={class:"guarantee-list"},jt=Ht(()=>i("span",null,"\u4FDD\u969C\u8BA1\u5212",-1)),Gt={key:0,class:"picture-payment-content"},Kt=["onClick"],Wt=["src"],Jt=["src"],Xt={key:1,class:"plan-list"},zt=["onClick"],en={key:2,class:"feerate-view"},tn={class:"guarantee-detail"},nn={key:0,class:"plan-list"},rn=["onClick"],an={key:1},sn={class:"extinfo-info-list"},on={class:"content"},ln=z({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1}},emits:["update-active-plan"],setup(u,{emit:D}){var m;const a=u,r=C((m=a.dataSource)==null?void 0:m.planList),g=C(a.activePlanCode);G([()=>a.dataSource,()=>a.activePlanCode],()=>{var e;a.isMultiplePlan&&(r.value=(e=a.dataSource)==null?void 0:e.planList)},{immediate:!0});const v=C([]),h=C([]),l=C(),b=F(()=>a.isMultiplePlan?a.dataSource.planList.map(e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null).filter(e=>!!e):[]);G([()=>a.dataSource,()=>a.activePlanCode],()=>{var e,s,y,L;if(g.value=a.activePlanCode,!a.isMultiplePlan)v.value=(e=a.dataSource)==null?void 0:e.planInsureVO.guaranteeItemVOS,h.value=(s=a.dataSource)==null?void 0:s.planInsureVO.extInfoVOList,l.value=(y=a.dataSource)==null?void 0:y.planInsureVO.productPremiumVOList[0];else if(r.value&&r.value.length>0){let q=0;const K=r.value.findIndex(N=>N.planCode===g.value);K>-1&&(q=K),v.value=r.value[q].guaranteeItemVOS,h.value=r.value[q].extInfoVOList,l.value=(L=r.value[q])==null?void 0:L.productPremiumVOList[0]}},{immediate:!0,deep:!0});const V=F(()=>{var e;return((e=a.dataSource)==null?void 0:e.rateUri)||""}),d=F(()=>!!(l.value&&l.value.paymentFrequencyValue&&l.value.premiumUnit&&!!V)),[f,T]=Te(!1),w=F(()=>{var e;return!v.value||!((e=v.value)!=null&&e.length)?!1:v.value.length>a.count?a.isShowClose?!0:!f.value:!1}),Q=()=>{T()},j=F(()=>{var e;return!v.value||!((e=v.value)!=null&&e.length)?[]:v.value.length<=a.count||f.value?v.value:v.value.slice(0,a.count)}),Y=e=>{g.value=e,D("update-active-plan",e)},$=C(!1),R=()=>{$.value=!0},p=()=>{Ye({fileType:"pdf",feeFileUri:V.value})};return(e,s)=>{var K,N;const y=Z("ProCell"),L=Z("ProPopup"),q=$e("dompurify-html");return n(),o(x,null,[i("div",Qt,[i("div",{class:"header"},[jt,i("span",{onClick:R},"\u67E5\u770B\u8BE6\u60C5")]),u.isMultiplePlan?(n(),o(x,{key:0},[t(b).length>0?(n(),o("div",Gt,[(n(!0),o(x,null,W(t(b),O=>(n(),o("div",{key:O.planCode,class:ne("picture-payment-item"),onClick:J=>Y(O.planCode)},[g.value==O.planCode?(n(),o("img",{key:0,src:O.selectedPic},null,8,Wt)):(n(),o("img",{key:1,src:O.unSelectedPic},null,8,Jt))],8,Kt))),128))])):(n(),o("div",Xt,[(n(!0),o(x,null,W(r.value,(O,J)=>(n(),o("div",{key:`${O.planCode}_${J}`,class:ne(`plan-list-item ${O.planCode===g.value?"plan-list-item-active":""}`),onClick:fe=>Y(O.planCode)},[i("span",null,S(O.planName),1)],10,zt))),128))]))],64)):M("",!0),(n(!0),o(x,null,W(t(j),(O,J)=>(n(),X(y,{key:J,class:"guarantee-item",title:O.title,content:O.desc,border:!1},null,8,["title","content"]))),128)),t(w)?(n(),o("div",{key:1,class:"show-more",onClick:Q},[de(S(t(f)?"\u6536\u8D77":"\u67E5\u770B\u66F4\u591A")+" ",1),_(qe,{name:"down",class:ne(["icon",{showMore:t(f)}])},null,8,["class"])])):M("",!0),t(d)?(n(),o("div",en,[i("span",null,S(`${((K=l.value)==null?void 0:K.paymentFrequencyValue)||""}${((N=l.value)==null?void 0:N.premiumUnit)||""}`),1),t(V)?(n(),o("span",{key:0,onClick:p},"\u67E5\u770B\u4FDD\u8D39")):M("",!0)])):M("",!0)]),_(ge),_(L,{show:$.value,"onUpdate:show":s[0]||(s[0]=O=>$.value=O),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:U(()=>[i("div",tn,[u.isMultiplePlan?(n(),o("div",nn,[(n(!0),o(x,null,W(r.value,(O,J)=>(n(),o("div",{key:`${O.planCode}_${J}`,class:ne(`plan-list-item ${O.planCode===g.value?"plan-list-item-active":""}`),onClick:fe=>Y(O.planCode)},[i("span",null,S(O.planName),1)],10,rn))),128))])):M("",!0),h.value&&h.value.length>0?(n(),o("div",an,[i("div",sn,[(n(!0),o(x,null,W(h.value,(O,J)=>(n(),X(y,{key:J,title:O.name,content:O.description,border:!1,size:"small"},null,8,["title","content"]))),128))]),_(ge)])):M("",!0),(n(!0),o(x,null,W(v.value,(O,J)=>(n(),o("div",{key:J,class:"guarantee-item"},[_(y,{title:O.title,content:O.desc,border:!1,size:"small"},null,8,["title","content"]),Ce(i("div",on,null,512),[[q,O.content]])]))),128))])]),_:1},8,["show"])],64)}}});var un=ee(ln,[["__scopeId","data-v-9a094e48"]]);const cn={class:"com-custom-card"},dn={class:"title"},mn=z({props:{title:{type:String,required:!0}},setup(u){return(D,a)=>(n(),o("div",cn,[i("div",dn,S(u.title),1),i("div",null,[Re(D.$slots,"default",{},void 0,!0)])]))}});var Me=ee(mn,[["__scopeId","data-v-059c21ee"]]);const pn={class:"question"},gn={class:"title"},fn=z({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup(u){return(D,a)=>{const r=Z("ProSvg"),g=Z("van-collapse-item");return n(),X(g,{name:u.name,class:"com-question-item"},{title:U(()=>[i("div",pn,[_(r,{name:"question"}),i("div",gn,S(u.question),1)])]),default:U(()=>[de(" "+S(u.answer),1)]),_:1},8,["name"])}}});var vn=ee(fn,[["__scopeId","data-v-0d7ea124"]]);const yn={class:"com-question"},_n=z({props:{list:{type:Array,default:()=>[]}},setup(u){const D=u,[a,r]=Te(!1),g=C([]),v=()=>{r()},h=F(()=>D.list.length<=4||a.value?D.list:D.list.slice(0,4));return(l,b)=>{const V=Z("van-collapse");return n(),o("div",yn,[_(V,{modelValue:g.value,"onUpdate:modelValue":b[0]||(b[0]=d=>g.value=d)},{default:U(()=>[(n(!0),o(x,null,W(t(h),(d,f)=>(n(),X(vn,{key:f,name:f.toString(),question:d.title,answer:d.desc},null,8,["name","question","answer"]))),128))]),_:1},8,["modelValue"]),u.list.length>4?(n(),o("div",{key:0,class:"show-more",onClick:v},[de(S(t(a)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),_(qe,{name:"down",class:ne(["icon",{showMore:t(a)}])},null,8,["class"])])):M("",!0)])}}});var hn=ee(_n,[["__scopeId","data-v-1b7e97e9"]]);const In={class:"spec"},Cn=["src"],Dn={key:1,class:"spec"},Tn=["src"],Pn=z({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(u,{expose:D}){const a=u,r=C(),g=C([{title:"\u4EA7\u54C1\u4EAE\u70B9",slotName:"tab1"},{title:"\u7406\u8D54\u8BF4\u660E",slotName:"tab2"},{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab3"}]),v=F(()=>{var d,f,T,w;return((f=(d=a.detail)==null?void 0:d.tenantProductInsureVO)==null?void 0:f.spec)&&((w=(T=a.detail)==null?void 0:T.tenantProductInsureVO)==null?void 0:w.spec.length)>0}),h=F(()=>{var f,T,w,Q,j,Y,$,R,p,m,e,s,y,L;const d=(T=(f=a.detail)==null?void 0:f.tenantProductInsureVO)==null?void 0:T.settlementProcessVO.settlementProcessType;return!!(d===he.WORD&&((j=(Q=(w=a.detail)==null?void 0:w.tenantProductInsureVO)==null?void 0:Q.settlementProcessVO)==null?void 0:j.settlementProcessList)&&((R=($=(Y=a.detail)==null?void 0:Y.tenantProductInsureVO)==null?void 0:$.settlementProcessVO)==null?void 0:R.settlementProcessList.length)>0||d===he.IMAGE&&((e=(m=(p=a.detail)==null?void 0:p.tenantProductInsureVO)==null?void 0:m.settlementProcessVO)==null?void 0:e.settlementProcessPicList)&&((L=(y=(s=a.detail)==null?void 0:s.tenantProductInsureVO)==null?void 0:y.settlementProcessVO)==null?void 0:L.settlementProcessPicList.length)>0)}),l=F(()=>{var d,f,T,w;return((f=(d=a.detail)==null?void 0:d.tenantProductInsureVO)==null?void 0:f.questionList)&&((w=(T=a.detail)==null?void 0:T.tenantProductInsureVO)==null?void 0:w.questionList.length)>0}),b=F(()=>{let d=[...g.value];return v.value||(d=d.filter(f=>f.slotName!=="tab1")),!h.value&&!l.value&&(d=d.filter(f=>f.slotName!=="tab2")),d});return D({handleClickTab:()=>{var d;return(d=r.value)==null?void 0:d.handleClickTab}}),(d,f)=>(n(),X(_t,{ref_key:"scrollRef",ref:r,class:"tabs",list:t(b),sticky:"",scrollspy:""},ct({tab3:U(()=>[Re(d.$slots,"form",{},void 0,!0)]),_:2},[t(v)?{name:"tab1",fn:U(()=>{var T,w;return[i("div",In,[(n(!0),o(x,null,W(((w=(T=a.detail)==null?void 0:T.tenantProductInsureVO)==null?void 0:w.spec)||[],(Q,j)=>(n(),o("img",{key:j,src:Q,class:"detail-img"},null,8,Cn))),128)),_(ge)])]})}:void 0,t(h)||t(l)?{name:"tab2",fn:U(()=>{var T,w,Q,j,Y;return[t(h)?(n(),o(x,{key:0},[((w=(T=a.detail)==null?void 0:T.tenantProductInsureVO)==null?void 0:w.settlementProcessVO.settlementProcessType)===t(he).WORD?(n(),X(Me,{key:0,title:"\u7406\u8D54\u6D41\u7A0B"},{default:U(()=>{var $,R,p;return[_(Vt,{list:(p=(R=($=a.detail)==null?void 0:$.tenantProductInsureVO)==null?void 0:R.settlementProcessVO)==null?void 0:p.settlementProcessList},null,8,["list"])]}),_:1})):(n(),o("div",Dn,[(n(!0),o(x,null,W(((Y=(j=(Q=a.detail)==null?void 0:Q.tenantProductInsureVO)==null?void 0:j.settlementProcessVO)==null?void 0:Y.settlementProcessPicList)||[],($,R)=>(n(),o("img",{key:R,src:$,class:"detail-img"},null,8,Tn))),128))])),_(ge)],64)):M("",!0),t(l)?(n(),o(x,{key:1},[_(Me,{title:"\u5E38\u89C1\u95EE\u9898"},{default:U(()=>{var $,R;return[_(hn,{list:(R=($=a.detail)==null?void 0:$.tenantProductInsureVO)==null?void 0:R.questionList},null,8,["list"])]}),_:1}),_(ge)],64)):M("",!0)]})}:void 0]),1032,["list"]))}});var On=ee(Pn,[["__scopeId","data-v-4383aeea"]]);const An=u=>(ye("data-v-ead4d7ae"),u=u(),_e(),u),Nn={key:0,class:"page-waiting"},kn=["src"],Sn=An(()=>i("div",{class:"tips"},[i("p",null,"\u652F\u4ED8\u6210\u529F\uFF0C\u627F\u4FDD\u4E2D...")],-1)),Vn=z({props:{isShow:{type:Boolean,default:()=>{}}},setup(u){const D=u;return G(()=>D.isShow,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow="inherit"}),(a,r)=>D.isShow?(n(),o("div",Nn,[i("img",{class:"loading",src:t(Ft)},null,8,kn),Sn])):M("",!0)}});var Fn=ee(Vn,[["__scopeId","data-v-ead4d7ae"]]);const Pe=u=>(ye("data-v-04787668"),u=u(),_e(),u),wn={class:"com-period-cell"},Ln={key:0,class:"custom-cell check-btn-cell"},En=Pe(()=>i("div",{class:"cell-label"},"\u4FDD\u969C\u671F\u95F4",-1)),bn={class:"cell-content"},Bn=Pe(()=>i("div",{class:"cell-label"},"\u751F\u6548\u65E5\u671F",-1)),xn={class:"cell-content"},Mn={key:2,class:"custom-cell common-cell"},$n=Pe(()=>i("div",{class:"cell-label"},"\u4FDD\u969C\u671F\u9650",-1)),Rn={class:"cell-content"},Un=z({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate","onVerify"],setup(u,{expose:D,emit:a}){const r=u;C({});const g=(p,m)=>p==="year"?`${m}\u5E74`:p==="month"?`${m}\u6708`:p==="day"?`${m}\u65E5`:m,v=C(new Date),h=Et("RISK_INSURANCE_PERIOD"),l=ve({formInfo:r.formInfo});G(()=>l.formInfo.insuranceStartDate,p=>{p&&typeof p=="string"&&(v.value=new Date(p))});const b=C(),V=C([]);G([()=>r.insureDetail,()=>l.formInfo.activePlanCode],()=>{var p;if(console.log("===========================planChange=================="),l.formInfo.insurancePeriodValue="",l.formInfo.insuranceStartDate="",l.formInfo.insuranceEndDate="",l.formInfo.commencementTime="",r.insureDetail)if(r.insureDetail.productRelationPlanVOList&&r.insureDetail.productRelationPlanVOList.length>0){let m=0;const e=r.insureDetail.productRelationPlanVOList.findIndex(L=>L.planCode===l.formInfo.activePlanCode);e>-1&&(m=e);const y=(((p=r.insureDetail.productRelationPlanVOList[m])==null?void 0:p.productRiskVoList[0].riskDetailVOList)||[]).find(L=>L.riskType===1);y&&(b.value=y)}else{const e=(r.insureDetail.productRiskVoList[0].riskDetailVOList||[]).find(s=>s.riskType===1);e&&(b.value=e)}},{deep:!0,immediate:!0}),G([()=>b.value,()=>h.value],()=>{V.value=[],Array.isArray(h.value)&&h.value.length>1&&b.value&&(V.value=(b.value.riskInsureLimitVO.insurancePeriodValueList||[]).map(p=>{const m=h.value.find(e=>e.value===p);return m?{label:m.name,value:m.value}:null}).filter(p=>!!p)),V.value.length>0&&(l.formInfo.insurancePeriodValue=V.value[0].value)},{deep:!0,immediate:!0});const d=F(()=>{var p,m;return(p=b.value)!=null&&p.riskInsureLimitVO.guaranteeStartDate?String((m=b.value)==null?void 0:m.riskInsureLimitVO.guaranteeStartDate):ue.CURRENT_DAY}),[f,T]=Te(!1),w=()=>{T(!0)},Q=new Date(ce(new Date,1,"day")),j=F(()=>{var p;if(d.value===ue.CUSTOM_DAY){const m=(p=b.value)==null?void 0:p.riskInsureLimitVO.maxInsuranceDay;if(!m)return new Date;const e=ce(new Date,Number(m),"day");return new Date(e)}return new Date}),Y=p=>{l.formInfo.insuranceStartDate=`${pe(p)} 00:00:00`,T(!1)},$=()=>{T(!1)},R=F(()=>{});return G([()=>d.value,()=>R.value,()=>l.formInfo.insurancePeriodValue,()=>l.formInfo.insuranceStartDate],()=>{if(!l.formInfo.insurancePeriodValue)return;console.log("================cellperiod================"),console.log("state.formInfo.insurancePeriodValue",l.formInfo.insurancePeriodValue),console.log("riskGuaranteeStartDateType",d.value);const[p,m]=l.formInfo.insurancePeriodValue.split("_");if(l.formInfo.insuranceStartDate||(d.value===ue.CUSTOM_DAY?l.formInfo.insuranceStartDate=`${ce(new Date,1,"day")} 00:00:00`:d.value===ue.NEXT_DAY?l.formInfo.insuranceStartDate=`${ce(new Date,1,"day")} 00:00:00`:l.formInfo.insuranceStartDate=`${pe(new Date)} 00:00:00`),p!=="to"){const e=`${Yt(l.formInfo.insuranceStartDate,1,"day")} 00:00:00`;l.formInfo.insuranceEndDate=`${ce(e,Number(m),p)} 23:59:59`}else l.formInfo.tenantOrderInsuredList[0].birthday,l.formInfo.tenantOrderInsuredList[0].certType===Ie.CERT&&l.formInfo.tenantOrderInsuredList[0].certNo&&Ze(l.formInfo.tenantOrderInsuredList[0].certNo)&&ht(l.formInfo.tenantOrderInsuredList[0].certNo),m==="single"&&(l.formInfo.insuranceEndDate="9999-99-99 23:59:59"),l.formInfo.insuranceEndDate=`${ce(l.formInfo.insuranceStartDate,Number(m)-1,p)} 23:59:59`},{immediate:!0}),D({}),(p,m)=>{const e=Z("ProRadioButton"),s=Z("van-config-provider"),y=Z("van-datetime-picker"),L=Z("ProPopup");return n(),o(x,null,[_(s,{"theme-vars":t(He)},{default:U(()=>[i("div",wn,[V.value.length>1?(n(),o("div",Ln,[En,i("div",bn,[_(e,{modelValue:t(l).formInfo.insurancePeriodValue,"onUpdate:modelValue":m[0]||(m[0]=q=>t(l).formInfo.insurancePeriodValue=q),options:V.value},null,8,["modelValue","options"])])])):M("",!0),t(d)===t(ue).CUSTOM_DAY?(n(),o("div",{key:1,class:"custom-cell common-cell",onClick:w},[Bn,i("div",xn,S(t(l).formInfo.insuranceStartDate),1)])):M("",!0),t(d)!==t(ue).CUSTOM_DAY?(n(),o("div",Mn,[$n,i("div",Rn,S(t(pe)(t(l).formInfo.insuranceStartDate))+" - "+S(t(pe)(t(l).formInfo.insuranceEndDate)),1)])):M("",!0)])]),_:1},8,["theme-vars"]),_(L,{show:t(f),"onUpdate:show":m[2]||(m[2]=q=>dt(f)?f.value=q:null),height:40,closeable:!1},{default:U(()=>[_(y,{modelValue:v.value,"onUpdate:modelValue":m[1]||(m[1]=q=>v.value=q),type:"date",title:"\u9009\u62E9\u5E74\u6708","min-date":t(Q),"max-date":t(j),formatter:g,onConfirm:Y,onCancel:$},null,8,["modelValue","min-date","max-date"])]),_:1},8,["show"])],64)}}});var qn=ee(Un,[["__scopeId","data-v-04787668"]]);const me=u=>(ye("data-v-59c01cba"),u=u(),_e(),u),Zn={class:"com-payment-type"},Yn={class:"title"},Hn={key:0,class:"picture-payment-content"},Qn=["onClick"],jn=["src"],Gn=["src"],Kn={key:1,class:"custom-cell check-btn-cell"},Wn=me(()=>i("div",{class:"cell-label"},"\u4FDD\u969C\u65B9\u6848",-1)),Jn={class:"cell-content"},Xn={key:0,class:"picture-payment-content"},zn=["onClick"],er=["src"],tr=["src"],nr={key:1,class:"default-payment-content"},rr=me(()=>i("div",{class:"pay-method"},[i("span",{class:"method"},S("\u6309\u6708\u4EA4\u8D39")),i("span",{class:"acount"},S("\u517112\u671F"))],-1)),ar=[rr],sr=me(()=>i("div",null,[i("div",{class:"tip"},[i("span",null,S("\u6BD4\u6309\u6708\u652F\u4ED8\u6700\u9AD8\u7701")),de(),i("span",null,"16%")]),i("div",{class:"triangle"}),i("div",{class:"pay-method"},[i("span",{class:"method"},S("\u4E00\u6B21\u4EA4\u6E05")),i("span",{class:"acount"},S("\u6BD4\u6708\u4EA4\u4FDD\u8D39\u7701\u6700\u9AD82014\u5143"))])],-1)),ir=[sr],or={key:2,class:"custom-cell check-btn-cell"},lr=me(()=>i("div",{class:"cell-label"},"\u4EA4\u8D39\u65B9\u5F0F",-1)),ur={class:"cell-content"},cr={class:"custom-cell common-cell"},dr=me(()=>i("div",{class:"cell-label"},"\u5B9E\u4ED8\u4FDD\u8D39",-1)),mr={class:"cell-content actual-premium"},pr={key:0,class:"feerate-explain"},gr={class:"content"},fr=me(()=>i("div",{class:"triangle-top"},null,-1)),vr=z({props:{showConfig:{type:Object,default:()=>{}},formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}},configDetail:{type:Object,default:()=>{}},isMultiplePlan:{type:Boolean,default:!1},premium:{type:[Number||null],default:null}},emits:["onReset","onUpdate","onVerify"],setup(u,{expose:D,emit:a}){const r=u;C({});const g=ve({formInfo:r.formInfo}),v=C([]),h=C(),l=C(),b=F(()=>{var e;return String((e=h.value)==null?void 0:e.paymentFrequencyFlag)==="1"}),V=F(()=>{var e;return(e=l.value)==null?void 0:e.productPremiumVOList.find(s=>s.paymentFrequency===g.formInfo.paymentFrequency)}),d=F(()=>r.premium&&V.value?`${r.premium}${V.value.premiumUnit||""}`:V.value?`${V.value.paymentFrequencyValue||""}${V.value.premiumUnit||""}`:""),f=F(()=>{if(l){const{premiumExplain:e,premiumExplainViewName:s,premiumExplainUri:y}=l.value||{};return{premiumExplain:e,premiumExplainUri:y,premiumExplainViewName:s}}return null});G(()=>r.configDetail,()=>{var e;r.isMultiplePlan&&r.configDetail&&(v.value=(e=r.configDetail.tenantProductInsureVO)==null?void 0:e.planList)},{immediate:!0,deep:!0}),G([()=>r.configDetail,()=>r.isMultiplePlan,()=>g.formInfo.activePlanCode],()=>{if(r.configDetail)if(r.isMultiplePlan){let e=0;const s=r.configDetail.tenantProductInsureVO.planList.findIndex(y=>y.planCode===g.formInfo.activePlanCode);s>-1&&(e=s),h.value=r.configDetail.tenantProductInsureVO.planList[e].productPlanInsureConditionVO,l.value=r.configDetail.tenantProductInsureVO.planList[e]}else h.value=r.configDetail.tenantProductInsureVO.planInsureVO.productPlanInsureConditionVO,l.value=r.configDetail.tenantProductInsureVO.planInsureVO},{deep:!0,immediate:!0});const T=F(()=>{var e;return h.value&&h.value.paymentFrequency?(((e=h.value.paymentFrequency)==null?void 0:e.split(","))||[]).length>1:!1}),w=C(!1);G(()=>h.value,()=>{var e;if(h.value){const s=((e=h.value.paymentFrequency)==null?void 0:e.split(","))||[];if(s.length===1){g.formInfo.paymentFrequency=h.value.paymentFrequency,w.value=!1;return}if(s.length===2&&s.filter(y=>![se.SINGLE,se.MONTH].includes(y)).length<1){w.value=!0;return}w.value=!1}},{immediate:!0,deep:!0});const Q=F(()=>{var e;return h.value?(e=h.value.paymentFrequencyList||[])==null?void 0:e.map(s=>({...s,paymentFrequency:s.skinValue})):[]}),j=F(()=>Q.value.length>0),Y=F(()=>r.isMultiplePlan?r.configDetail.tenantProductInsureVO.planList.map(e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null).filter(e=>!!e):[]),$=F(()=>{var e,s;if(h.value){const y=((e=h.value.paymentFrequency)==null?void 0:e.split(","))||[];return y.length===1&&(console.log("paymentFrequencyList======",y),g.formInfo.paymentFrequency=y[0]),(s=y||[])==null?void 0:s.map(L=>({label:Ct[L],value:L}))}return[]}),R=e=>{console.log("type",e),g.formInfo.paymentFrequency=e},p=e=>{g.formInfo.activePlanCode=e},m=()=>{var e,s;if(!((e=f.value)!=null&&e.premiumExplainUri)){mt("\u65E0\u8D39\u7387\u6587\u4EF6\uFF01");return}Ye({fileType:"pdf",fileUri:(s=f.value)==null?void 0:s.premiumExplainUri})};return D({}),(e,s)=>{const y=Z("ProRadioButton"),L=Z("templat"),q=Z("ProDivider"),K=Z("van-config-provider");return n(),X(K,{"theme-vars":t(He)},{default:U(()=>[i("div",Zn,[i("div",Yn,S(t(T)?"\u4EA4\u8D39\u65B9\u5F0F":"\u4FDD\u969C\u8BA1\u5212"),1),u.isMultiplePlan?(n(),o(x,{key:0},[t(Y).length>0?(n(),o("div",Hn,[(n(!0),o(x,null,W(t(Y),N=>(n(),o("div",{key:N.planCode,class:ne("picture-payment-item"),onClick:O=>p(N.planCode)},[t(g).formInfo.activePlanCode==N.planCode?(n(),o("img",{key:0,src:N.selectedPic},null,8,jn)):(n(),o("img",{key:1,src:N.unSelectedPic},null,8,Gn))],8,Qn))),128))])):(n(),o("div",Kn,[Wn,i("div",Jn,[_(y,{modelValue:t(g).formInfo.activePlanCode,"onUpdate:modelValue":s[0]||(s[0]=N=>t(g).formInfo.activePlanCode=N),options:v.value,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])]))],64)):M("",!0),t(b)?(n(),X(L,{key:1},{default:U(()=>[t(j)?(n(),o("div",Xn,[(n(!0),o(x,null,W(t(Q),N=>(n(),o("div",{key:N.paymentFrequency,class:ne("picture-payment-item"),onClick:O=>R(N.paymentFrequency)},[t(g).formInfo.paymentFrequency==N.paymentFrequency?(n(),o("img",{key:0,src:N.selectedPic},null,8,er)):(n(),o("img",{key:1,src:N.unSelectedPic},null,8,tr))],8,zn))),128))])):w.value?(n(),o("div",nr,[i("div",{class:ne(`com-payment-type-item ${t(g).formInfo.paymentFrequency==t(se).MONTH?"active":""}`),onClick:s[1]||(s[1]=N=>R(t(se).MONTH))},ar,2),i("div",{class:ne(`com-payment-type-item ${t(g).formInfo.paymentFrequency==t(se).SINGLE?"active":""}`),onClick:s[2]||(s[2]=N=>R(t(se).SINGLE))},ir,2)])):t($).length>1?(n(),o("div",or,[lr,i("div",ur,[_(y,{modelValue:t(g).formInfo.paymentFrequency,"onUpdate:modelValue":s[3]||(s[3]=N=>t(g).formInfo.paymentFrequency=N),options:t($)},null,8,["modelValue","options"])])])):M("",!0)]),_:1})):M("",!0),_(qn,{"form-info":t(g).formInfo,"insure-detail":u.insureDetail,"config-detail":u.configDetail},null,8,["form-info","insure-detail","config-detail"]),t(V)&&t(V).premiumUnit?(n(),o(x,{key:2},[i("div",cr,[dr,i("div",mr,S(t(d)),1)]),t(f)&&t(f).premiumExplain&&t(f).premiumExplainViewName?(n(),o("div",pr,[i("div",gr,[fr,i("div",null,[i("span",null,S(t(f).premiumExplain||""),1),i("span",{class:"file-name",onClick:m},"\u300A"+S(t(f).premiumExplainViewName||"")+"\u300B",1)])])])):M("",!0)],64)):M("",!0)]),_(q)]),_:1},8,["theme-vars"])}}});var yr=ee(vr,[["__scopeId","data-v-59c01cba"]]);const _r={class:"inscribedContent-content"},hr={class:"content"},Ir=z({props:{inscribedContent:{type:String,default:""}},setup(u){const D=u,a=C();return G(()=>D.inscribedContent,r=>{r?a.value=r.replaceAll(`
`,"<br />"):a.value=""},{immediate:!0,deep:!0}),(r,g)=>{const v=$e("dompurify-html");return n(),o("div",_r,[Ce(i("div",hr,null,512),[[v,a.value]])])}}});var Cr=ee(Ir,[["__scopeId","data-v-702b2de2"]]);const Dr={class:"com-attachment-list"},Tr=["onClick"],Pr=z({props:{preText:{type:String,default:""},attachementList:{type:Object,default:()=>{}}},emits:["preview-file"],setup(u,{emit:D}){const a=r=>{D("preview-file",r)};return(r,g)=>(n(),o("div",Dr,[i("span",null,S(u.preText),1),(n(!0),o(x,null,W(u.attachementList||[],(v,h)=>(n(),o("span",{key:h,class:"attachment-item",onClick:l=>a(h)}," \u300A"+S(v.attachmentName)+"\u300B ",9,Tr))),128))]))}});var Or=ee(Pr,[["__scopeId","data-v-17da129e"]]);const Ar={class:"page-internet-product-detail"},Nr={class:"info"},kr={class:"footer-area"},Sr={class:"price"},Vr=de(" \u603B\u4FDD\u8D39"),Fr=de(S("\u7ACB\u5373\u6295\u4FDD")),wr=z({setup(u){var Se,Ve;const D=St();pt();const a=gt(),{openId:r,productCode:g="BWYL2021",tenantId:v,orderNo:h,phoneNo:l,agentCode:b="",saleChannelId:V,paymentMethod:d,certNo:f,name:T,templateId:w,pageCode:Q,from:j,extraInfo:Y,insurerCode:$}=a.query;let R={};try{R=JSON.parse(decodeURIComponent(Y))}catch{}const p=C({certNo:f,openId:r,tenantId:v,mobile:l}),m=C(),e=C(),s=C(),y=C(),L=C(),q=C(!1),K=C(!1),N=C(!1),O=C(0),J=C(!1);C(!1);let fe="";const Oe=C(!0),ie=ve({holder:{certNo:f,certType:Ie.CERT,mobile:l,name:T,socialFlag:Le.HAS},insured:{certNo:f,certType:Ie.CERT,name:T,socialFlag:Le.HAS,relationToHolder:Ee.SELF},paymentMethod:d,renewalDK:"Y",packageProductList:[],mobileSmsCode:"",activePlanCode:"",paymentFrequency:se.MONTH,insurancePeriodValue:"",commencementTime:pe(new Date)}),E=C({tenantId:v,agencyId:b,orderCategory:1,saleUserId:V,saleChannelId:V,venderCode:$,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:se.MONTH,insurancePeriodValue:"",commencementTime:"",tenantOrderHolder:{extInfo:{},socialFlag:"1"},tenantOrderInsuredList:[{socialFlag:"1",relationToHolder:Ee.SELF,extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:v,productCode:(Se=s.value)==null?void 0:Se.productCode,productName:(Ve=s.value)==null?void 0:Ve.productName,premium:L.value||0}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",successJumpUrl:"",pageCode:"productInfo",...R},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),re=F(()=>{var c,P,A,I,k,B;return s.value?!!(((P=(c=s.value)==null?void 0:c.tenantProductInsureVO)==null?void 0:P.planList)&&Array.isArray((I=(A=s.value)==null?void 0:A.tenantProductInsureVO)==null?void 0:I.planList)&&((B=(k=s.value)==null?void 0:k.tenantProductInsureVO)==null?void 0:B.planList.length)>0):!1}),Qe=F(()=>{var c,P,A;if(re.value){if(E.value.activePlanCode)return((c=y.value)==null?void 0:c.planFactor[E.value.activePlanCode])||{}}else if((P=y.value)!=null&&P.productFactor)return(A=y.value)==null?void 0:A.productFactor;return{}});G(()=>re.value,()=>{var c,P;re.value&&(E.value.activePlanCode=(P=(c=s.value)==null?void 0:c.tenantProductInsureVO)==null?void 0:P.planList[0].planCode)},{immediate:!0});const Ae=F(()=>{var c,P,A;return re.value?((P=(c=y.value)==null?void 0:c.productRelationPlanVOList.find(I=>I.planCode===E.value.activePlanCode))==null?void 0:P.productRiskVoList)||[]:((A=y.value)==null?void 0:A.productRiskVoList)||[]}),je=c=>{E.value.activePlanCode=c},Ge=F(()=>[]),oe=C();G([()=>re.value,()=>E.value.activePlanCode,()=>s.value],()=>{var A,I;let c={};if(console.log("isMultiplePlan",re.value),re.value){const k=(A=s.value)==null?void 0:A.tenantProductInsureVO.planList.find(B=>B.planCode===(E.value.activePlanCode||""));k&&(c=k==null?void 0:k.attachmentVOList)}else console.log("detail.value?.tenantProductInsureVO.planInsureVO",s.value),c=(I=s.value)==null?void 0:I.tenantProductInsureVO.planInsureVO.attachmentVOList;if(!c){oe.value=[];return}const P={2:"richText",3:"link"};oe.value=Object.keys(c).map(k=>(c[k].forEach(B=>{if(B.attachmentType==="1"){const H=B.attachmentUri.split("?"),te=H[0].substr(H[0].lastIndexOf(".")+1);console.log("type",te),te==="pdf"?B.attachmentType="pdf":B.attachmentType="picture"}else B.attachmentType=P[B.attachmentType]}),{attachmentName:k,attachmentList:c[k]}))},{immediate:!0});const Ke=()=>{console.log("detailScrollRef.value",e.value),e.value.handleClickTab()("tab3")},We=()=>{const{holder:{certNo:c,mobile:P,name:A,socialFlag:I},insured:{certNo:k,name:B,socialFlag:H,relationToHolder:te},paymentMethod:le}=ie;return!!(Ze(k)&&!!H)},Je=(c={},P={},A={})=>{var B,H;const I={...A};console.log("currentOrderDetail==========",(B=I.tenantOrderInsuredList[0])==null?void 0:B.tenantOrderProductList[0].riskVOList);const k={tenantId:v,riskList:((H=I.tenantOrderInsuredList[0])==null?void 0:H.tenantOrderProductList[0].riskVOList)||[],riskPremium:P,productId:c==null?void 0:c.productBasicInfoVO.id};return I.extInfo.iseeBizNo=fe,I.commencementTime=I.insuranceStartDate,I.expiryDate=I.insuranceEndDate,I.tenantOrderInsuredList=I.tenantOrderInsuredList.map(te=>({...te,planCode:E.value.activePlanCode?E.value.activePlanCode:null})),I.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:"",productCode:c.productBasicInfoVO.productCode,productName:c.productBasicInfoVO.productName,planCode:E.value.activePlanCode?E.value.activePlanCode:null,tenantOrderRiskList:kt(k)},I},Xe=async c=>{const{code:P,data:A}=await Ot({orderNo:c,tenantId:v});if(P==="10000"){A.extInfo={...A.extInfo,buttonCode:"EVENT_SHORT_underWrite"};const{code:I,data:k}=await be(A);I==="10000"&&console.log("res=====",k),Object.assign(E.value,A)}},ze=async c=>{var I,k,B,H;const{code:P,data:A}=await be(Je(y.value,{},E.value));console.log("data",A),(k=(I=A.pageAction)==null?void 0:I.data)!=null&&k.orderNo&&(console.log("23233322332"),await Xe((H=(B=A.pageAction)==null?void 0:B.data)==null?void 0:H.orderNo))},et=async()=>{},tt=c=>{O.value=c,N.value=!0},nt=async(c,P,A)=>{var te,le;const I=Nt(A).map(ae=>({...ae,paymentFrequency:c.paymentFrequency,insurancePeriodValue:c.insurancePeriodValue}));console.log("orderDetail.value.activePlanCode",E.value.activePlanCode);const k={tenantId:v,productCode:(te=s.value)==null?void 0:te.productCode,insuranceStartDate:c.insuranceStartDate,insuranceEndDate:c.insuranceEndDate,commencementTime:c.insuranceStartDate,expiryDate:c.insuranceEndDate,holder:{personVO:c.tenantOrderHolder},insuredVOList:c.tenantOrderInsuredList.map(ae=>({insuredCode:"",relationToHolder:ae.relationToHolder,personVO:ae,productPlanVOList:[{insurerCode:P.productBasicInfoVO.insurerCode,planCode:E.value.activePlanCode?E.value.activePlanCode:null,riskVOList:I}]}))},{code:B,data:H}=await Pt(k);E.value.tenantOrderInsuredList[0].tenantOrderProductList=(le=k.insuredVOList[0])==null?void 0:le.productPlanVOList,E.value.orderAmount=H.premium,E.value.orderRealAmount=H.premium},Ne=async()=>{try{console.log("currentRiskInfo.value",Ae.value),await nt(E.value,y.value,Ae.value),ze({})}catch{}},rt=c=>{c==="allFalse"?(K.value=!1,q.value=!0,Ne()):yt.confirm({message:"\u60A8\u5F53\u524D\u7684\u5065\u5EB7\u72B6\u51B5\u4E0D\u7B26\u5408\u8BE5\u4EA7\u54C1",confirmButtonText:"\u786E\u5B9A"}).then(()=>{window.history.back()}).catch(()=>{var P;(P=m.value)==null||P.reEditForm(),q.value=!1})},ke=()=>{var c;(c=m.value)==null||c.reEditForm(),q.value=!1},at=()=>{K.value=!1,ke()},st=()=>{N.value=!1,ke()},it=()=>{N.value=!1,K.value=!0};G([()=>ie.insured.certNo,()=>ie.insured.socialFlag,()=>ie.packageProductList,()=>ie.paymentFrequency],ft.exports.debounce(()=>{ie.insured.certNo&&ie.insured.socialFlag&&We()&&et()},500),{deep:!0,immediate:!0});const ot=async()=>{const c=At({productCode:g,withInsureInfo:!0,tenantId:v}),P=Tt({productCode:g});await Promise.all([c,P]).then(([A,I])=>{var k;A.code==="10000"&&(s.value={...A.data},document.title=((k=A.data)==null?void 0:k.productFullName)||""),I.code==="10000"&&(y.value=I.data)})};return vt(()=>{ot(),setTimeout(async()=>{fe=window.getIseeBiz&&await window.getIseeBiz()},1500)}),(c,P)=>{const A=Z("van-config-provider");return n(),o(x,null,[_(A,{"theme-vars":t(D)},{default:U(()=>{var I,k,B,H,te,le,ae,Fe,we;return[i("div",Ar,[i("div",Nr,[_(Be,{url:(k=(I=s.value)==null?void 0:I.tenantProductInsureVO)==null?void 0:k.banner[0]},null,8,["url"]),(H=(B=s.value)==null?void 0:B.tenantProductInsureVO)!=null&&H.bannerMove?(n(),X(Be,{key:0,url:(le=(te=s.value)==null?void 0:te.tenantProductInsureVO)==null?void 0:le.bannerMove[0],onClick:Ke},null,8,["url"])):M("",!0)]),_(un,{"show-service-config":"","data-source":(ae=s.value)==null?void 0:ae.tenantProductInsureVO,"is-multiple-plan":t(re),"active-plan-code":E.value.activePlanCode,onUpdateActivePlan:je},null,8,["data-source","is-multiple-plan","active-plan-code"]),_(On,{ref_key:"detailScrollRef",ref:e,detail:s.value},{form:U(()=>[_(bt,{ref_key:"formRef",ref:m,"title-collection":{HOLDER:"\u672C\u4EBA\u4FE1\u606F\uFF08\u6295\u4FDD\u4EBA\uFF09",INSURER:"\u4E3A\u8C01\u6295\u4FDD\uFF08\u88AB\u4FDD\u4EBA\uFF09"},"form-info":E.value,"send-sms-code":()=>{},"factor-object":t(Qe)||{}},{holderName:U(()=>[_(xe,{"user-info":p.value},null,8,["user-info"])]),insurerName:U(()=>[_(xe,{title:"\u9009\u62E9\u88AB\u4FDD\u4EBA","user-info":p.value},null,8,["user-info"])]),_:1},8,["form-info","send-sms-code","factor-object"]),_(yr,{"form-info":E.value,"insure-detail":y.value,"config-detail":s.value,"is-multiple-plan":t(re),"risk-info-period-list":c.riskInfoPeriodList,premium:L.value},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","risk-info-period-list","premium"])]),_:1},8,["detail"]),(Fe=s.value)!=null&&Fe.tenantProductInsureVO.inscribedContent?(n(),X(Cr,{key:0,"inscribed-content":(we=s.value)==null?void 0:we.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):M("",!0),oe.value&&oe.value.length>1?(n(),X(Or,{key:1,"attachement-list":oe.value,"pre-text":"\u8BF7\u9605\u8BFB",onPreviewFile:P[0]||(P[0]=lt=>tt(lt))},null,8,["attachement-list"])):M("",!0),i("div",kr,[i("div",Sr,[Vr,i("span",null,S(L.value?"\uFFE5":"")+S(t(It)(L.value))+" "+S(L.value?E.value.paymentFrequency==t(Dt).YEAR?"\u5143/\u5E74":"\u5143/\u6708":""),1)]),_(Ue,{shadow:!1,"theme-vars":t(D),class:"right",text:"\u7ACB\u5373\u6295\u4FDD",onClick:Ne},{default:U(()=>[Fr]),_:1},8,["theme-vars"])])])]}),_:1},8,["theme-vars"]),_(wt,{show:K.value,"onUpdate:show":P[1]||(P[1]=I=>K.value=I),"content-list":t(Ge),"active-index":0,onOnConfirmHealth:rt,onOnCloseHealth:at},null,8,["show","content-list"]),N.value?(n(),X(Lt,{key:0,show:N.value,"onUpdate:show":P[2]||(P[2]=I=>N.value=I),"content-list":oe.value,"is-only-view":Oe.value,"active-index":O.value,text:Oe.value?"\u5173\u95ED":"\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u544A\u77E5\u5185\u5BB9","force-read-cound":0,"on-close-file-preview":"",onSubmit:it,onOnCloseFilePreview:st},null,8,["show","content-list","is-only-view","active-index","text"])):M("",!0),_(Fn,{"is-show":J.value},null,8,["is-show"])],64)}}});var Jr=ee(wr,[["__scopeId","data-v-19eae554"]]);export{Jr as default};

import{d as e,r as a,j as l,E as n,o as t,p as i,u as s,bv as o,ab as d,_ as c,af as r,ag as v,dd as u,h as p,i as f,ay as m,aN as _,ad as b,ap as h,dC as g,k as y,bH as x,ah as w,l as k,dD as I,ai as C,c as j,a as P,f as O,F as V,s as N,b as D,q as T,n as F,w as L,dE as R,ch as A,T as E,dF as S,bW as q,dG as B,aQ as U,c8 as $,I as Y,dH as z,ao as M,al as G,an as H,aC as X,aD as J,au as Q}from"./index-aaa8bb0a.js";import{a as W,c as Z}from"./product-8c233683.js";import{i as K,g as ee,s as ae}from"./trial-f688ef19.js";import{P as le}from"./index-a5b91c23.js";import{n as ne}from"./nextStep-db1051c0.js";import{g as te,t as ie,r as se}from"./utils-d9f93827.js";import oe from"./index-4b20445f.js";import{P as de}from"./index-54f5a3a7.js";import ce from"./index-9b4d1a52.js";import{u as re}from"./useAttachment-0deba69d.js";import{u as ve}from"./useOrder-3b64102a.js";import"./PolicyInfo-26794306.js";import{P as ue}from"./constants-b39aa53b.js";import{u as pe}from"./useThread-637a02aa.js";import"./cloneDeep-5804d04e.js";import"./infoCollection-88d162d3.js";import"./questionnaire-42dcb602.js";import"./util-1601ff31.js";import"./core-182586d6.js";import"./trial-039b421f.js";import"./jsbridgePromise-1a7f0ae2.js";const fe=e({name:"policyInfo"}),me=e({...fe,props:{schema:{default:()=>[]},config:{default:()=>[]},modelValue:{default:()=>{}},isView:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{expose:d,emit:c}){const r=e,v=a({schema:{},modelValue:{},config:{}}),u=l();return n([()=>r.schema,()=>r.config],(()=>{v.schema=r.schema,v.config=r.config}),{deep:!0,immediate:!0}),n((()=>r.modelValue),((e,a)=>{e!==a&&Object.assign(v.modelValue,e)}),{deep:!0,immediate:!0}),n((()=>v.modelValue),(e=>{c("update:modelValue",e)}),{deep:!0,immediate:!0}),d({validate:()=>{var e;return null==(e=u.value)?void 0:e.validate()}}),(e,a)=>(t(),i(s(o),{ref_key:"agentInfoFormRef",ref:u,class:"agent",schema:s(v).schema,model:s(v).modelValue,config:s(v).config,title:"代理人信息","is-view":e.isView},null,8,["schema","model","config","is-view"]))}});const _e=e=>(X("data-v-883f5b38"),e=e(),J(),e),be={key:0},he={class:"__skeleton_free5_content__"},ge={"theme-vars":"[object Object]",class:"page-free-product-detail sk"},ye={class:"content"},xe=_e((()=>P("div",{class:"van-tabs van-tabs--line pro-tab custom-plan-tab"},[P("div",{class:"van-tabs__wrap"},[P("div",{role:"tablist",class:"van-tabs__nav van-tabs__nav--line van-tabs__nav--complete","aria-orientation":"horizontal"},[P("div",{id:"van-tabs-1-0",role:"tab",class:"van-tab van-tab--line van-tab--grow van-tab--active",tabindex:"0","aria-selected":"true","aria-controls":"van-tab-2"},[P("span",{class:"van-tab__text"},[P("span",{class:"sk-text",style:{"--fp":"10.00%","--sp":"90.00%","--lh":"20px"}},"计划一")])]),P("div",{id:"van-tabs-1-1",role:"tab",class:"van-tab van-tab--line van-tab--grow",tabindex:"-1","aria-selected":"false","aria-controls":"van-tab-3"},[P("span",{class:"van-tab__text"},[P("span",{class:"sk-text",style:{"--fp":"10.00%","--sp":"90.00%","--lh":"20px"}},"计划二")])]),P("div",{class:"van-tabs__line",style:{width:"28px",transform:"translateX(90.5px) translateX(-50%)",height:"4px","border-radius":"4px"}})])]),P("div",{class:"van-tabs__content"},[P("div",{id:"van-tab-2",role:"tabpanel",class:"van-tab__panel",tabindex:"0","aria-labelledby":"van-tabs-1-0",style:{}})])],-1))),we={class:"part"},ke={class:"part-header holder-header"},Ie={class:"svg-icon icon-free-arrow","font-size":"40px",style:{color:"var(--van-primary-color)"}},Ce=[_e((()=>P("use",{"xlink:href":"#icon-free-arrow"},null,-1)))],je=_e((()=>P("div",{class:"header"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"22.400139999999997px"}},"免费领取")],-1))),Pe={class:"svg-icon icon-free-arrow","font-size":"40px",style:{color:"var(--van-primary-color)"}},Oe=[_e((()=>P("use",{"xlink:href":"#icon-free-arrow"},null,-1)))],Ve={class:"com-card com-pro-form-with-card com-card-body-no-padding personal-info-card holder"},Ne={class:"com-card-wrap"},De={class:"body",style:{height:"auto"}},Te={class:"van-form com-van-form"},Fe={class:"van-cell van-field com-van-field",textalign:"right",customfieldname:"[object Object]",remark:"",componentname:"[object Object]",nanoid:"Bc0wjU19UwIhyiefbs4zE",columns:""},Le=_e((()=>P("div",{class:"van-cell__title van-field__label van-field__label--required"},[P("label",{id:"van-field-4-label",for:"van-field-4-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"姓名")])],-1))),Re={class:"van-cell__value van-field__value"},Ae={class:"van-field__body"},Ee=_e((()=>P("input",{type:"text",id:"van-field-4-input",name:"name",class:"van-field__control van-field__control--left sk-input",placeholder:"请输入姓名",autocomplete:"off","aria-labelledby":"van-field-4-label"},null,-1))),Se={class:"van-field__right-icon"},qe={class:"choose-customer"},Be={class:"svg-icon icon-customer",style:{color:"rgb(51, 51, 51)"}},Ue=[_e((()=>P("use",{"xlink:href":"#icon-customer"},null,-1)))],$e=_e((()=>P("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item",role:"button",tabindex:"0",textalign:"right"},[P("div",{class:"van-cell__title van-field__label van-field__label--required"},[P("label",{id:"van-field-5-label",for:"van-field-5-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"证件类型")])]),P("div",{class:"van-cell__value van-field__value"},[P("div",{class:"van-field__body"},[P("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[P("div",{class:"custom-input-wrap"},[P("span",{class:"value-view-wrap",style:{}},[P("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"居民身份证")])])])])]),P("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Ye=_e((()=>P("div",{class:"van-cell van-field com-van-field",textalign:"right",customfieldname:"[object Object]",remark:"",componentname:"[object Object]",nanoid:"cYX6njpk9PbIdM0Cc1uko",columns:""},[P("div",{class:"van-cell__title van-field__label van-field__label--required"},[P("label",{id:"van-field-6-label",for:"van-field-6-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"证件号码")])]),P("div",{class:"van-cell__value van-field__value"},[P("div",{class:"van-field__body"},[P("input",{type:"text",id:"van-field-6-input",name:"certNo",class:"van-field__control van-field__control--left sk-input",placeholder:"请输入证件号码",autocomplete:"off","aria-labelledby":"van-field-6-label"})])])],-1))),ze=_e((()=>P("div",{class:"van-cell van-field com-van-field",textalign:"right",customfieldname:"[object Object]",remark:"",componentname:"[object Object]",nanoid:"f80BClgG7He6ZF8gYqnf0",columns:""},[P("div",{class:"van-cell__title van-field__label van-field__label--required"},[P("label",{id:"van-field-7-label",for:"van-field-7-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"手机号")])]),P("div",{class:"van-cell__value van-field__value"},[P("div",{class:"van-field__body"},[P("input",{type:"tel",inputmode:"numeric",id:"van-field-7-input",name:"mobile",class:"van-field__control van-field__control--left",placeholder:"请输入手机号",autocomplete:"off","aria-labelledby":"van-field-7-label"})])])],-1))),Me=_e((()=>P("div",{class:"van-cell van-field com-van-field com-pro-sms-code",textalign:"right",customfieldname:"[object Object]",remark:"",componentname:"[object Object]",nanoid:"f6uaPlar0trUqrkDscy4s",columns:""},[P("div",{class:"van-cell__title van-field__label van-field__label--required"},[P("label",{id:"van-field-8-label",for:"van-field-8-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"验证码")])]),P("div",{class:"van-cell__value van-field__value"},[P("div",{class:"van-field__body"},[P("input",{type:"tel",inputmode:"numeric",id:"van-field-8-input",name:"verificationCode",class:"van-field__control van-field__control--left",placeholder:"请输入验证码",autocomplete:"off","aria-labelledby":"van-field-8-label"})])]),P("button",{type:"button",class:"van-button van-button--primary van-button--small van-button--plain extra-button sk-button"},[P("div",{class:"van-button__content"},[P("span",{class:"van-button__text"},[P("span",{class:"sk-text",style:{"--fp":"8.33%","--sp":"91.67%","--lh":"16.8px"}},"验证码")])])])],-1))),Ge=_e((()=>P("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item com-van-field--hidden",role:"button",tabindex:"0",textalign:"right"},[P("div",{class:"van-cell__value van-cell__value--alone van-field__value"},[P("div",{class:"van-field__body"},[P("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[P("div",{class:"custom-input-wrap"},[P("span",{class:"placeholder"})])])])]),P("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),He=_e((()=>P("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item",role:"button",tabindex:"0",textalign:"right"},[P("div",{class:"van-cell__title van-field__label van-field__label--required"},[P("label",{id:"van-field-10-label",for:"van-field-10-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"投保地区")])]),P("div",{class:"van-cell__value van-field__value"},[P("div",{class:"van-field__body"},[P("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[P("div",{class:"custom-input-wrap"},[P("span",{class:"placeholder"},[P("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择投保地区")])])])])]),P("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Xe=_e((()=>P("div",{class:"van-cell van-cell--clickable van-field com-van-field com-van-field--hidden com-form-item com-van-field--hidden undefined",role:"button",tabindex:"0",textalign:"right",visible:"false"},[P("div",{class:"van-cell__title van-field__label van-field__label--required"},[P("label",{id:"van-field-11-label",for:"van-field-11-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"出生日期")])]),P("div",{class:"van-cell__value van-field__value"},[P("div",{class:"van-field__body"},[P("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[P("div",{class:"custom-input-wrap"},[P("span",{class:"placeholder"},[P("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择出生日期")])])])])]),P("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Je=_e((()=>P("div",{class:"van-cell van-cell--clickable van-field com-van-field com-van-field--hidden com-form-item com-van-field--hidden",role:"button",tabindex:"0",textalign:"right",visible:"false"},[P("div",{class:"van-cell__title van-field__label van-field__label--required"},[P("label",{id:"van-field-12-label",for:"van-field-12-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"性别")])]),P("div",{class:"van-cell__value van-field__value"},[P("div",{class:"van-field__body"},[P("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[P("div",{class:"custom-input-wrap"},[P("span",{class:"placeholder"},[P("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择性别")])])])])]),P("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Qe=_e((()=>P("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item undefined",role:"button",tabindex:"0",textalign:"right"},[P("div",{class:"van-cell__title van-field__label"},[P("label",{id:"van-field-13-label",for:"van-field-13-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"证件有效期")])]),P("div",{class:"van-cell__value van-field__value"},[P("div",{class:"van-field__body"},[P("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[P("div",{class:"custom-input-wrap"},[P("span",{class:"placeholder"},[P("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择证件有效期")])])])])]),P("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"}),P("div",{class:"wrap"},[P("div",{role:"checkbox",class:"van-checkbox",tabindex:"0","aria-checked":"false"},[P("div",{class:"van-checkbox__icon van-checkbox__icon--round"},[P("i",{class:"van-badge__wrapper van-icon van-icon-success sk-border"})]),P("span",{class:"van-checkbox__label"},[P("span",{class:"sk-text",style:{"--fp":"12.50%","--sp":"87.50%","--lh":"20px"}},"长期")])])])],-1))),We=_e((()=>P("div",{class:"van-cell van-cell--clickable van-field com-van-field com-form-item undefined",role:"button",tabindex:"0",textalign:"right"},[P("div",{class:"van-cell__title van-field__label"},[P("label",{id:"van-field-14-label",for:"van-field-14-input"},[P("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"证件起期")])]),P("div",{class:"van-cell__value van-field__value"},[P("div",{class:"van-field__body"},[P("div",{class:"van-field__control van-field__control--left van-field__control--custom"},[P("div",{class:"custom-input-wrap"},[P("span",{class:"placeholder"},[P("span",{class:"sk-text",style:{"--fp":"18.75%","--sp":"81.25%","--lh":"24px"}},"请选择证件起期")])])])])]),P("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"})],-1))),Ze=R('<div class="com-card com-pro-form-with-card com-card-body-no-padding personal-info-card insured" data-v-883f5b38><div class="com-card-wrap" data-v-883f5b38><div class="header showLine" data-v-883f5b38><div class="title-wrapper" data-v-883f5b38><div class="title showIcon" data-v-883f5b38><span class="sk-text" style="--fp:33.33%;--sp:66.67%;--lh:45px;" data-v-883f5b38>被保人信息</span></div></div></div></div></div>',1),Ke=["theme-vars"],ea={class:"content"},aa={key:1,class:"part"},la=_e((()=>P("div",{class:"part-header agent-header"},[P("span",{class:"header"},"代理人信息")],-1))),na={class:"part"},ta={class:"part-header holder-header"},ia=_e((()=>P("div",{class:"header"},"免费领取",-1))),sa=_e((()=>P("p",{class:"page-tip"},"同一被保险人仅限领取1份",-1)));var oa=c(e({__name:"index",setup(e){const o=r((()=>v((()=>import("./index-7c7a1fec.js")),["static/js/index-7c7a1fec.js","static/css/index-eabeb59f.css","static/js/index-aaa8bb0a.js","static/css/index-839a5189.css"]))),c=r((()=>v((()=>import("./index-5cd02bda.js")),["static/js/index-5cd02bda.js","static/css/index-bf024e9b.css","static/js/index-aaa8bb0a.js","static/css/index-839a5189.css"]))),R=r((()=>v((()=>import("./index-55330cd5.js")),["static/js/index-55330cd5.js","static/css/index-fa4edf2a.css","static/js/index-aaa8bb0a.js","static/css/index-839a5189.css","static/js/theme-94cf7d00.js","static/js/index-54f5a3a7.js","static/css/index-bbfdd7ec.css","static/js/utils-d9f93827.js","static/js/infoCollection-88d162d3.js","static/js/trial-039b421f.js"]))),X=u(),J=p(),fe=f(),{productCode:_e="",agentCode:oa="",tenantId:da="",templateId:ca,insurerCode:ra="",orderNo:va,preview:ua,isShare:pa,date:fa}=fe.query;fa!==m().format("YYYY-MM-DD")&&_.alert({message:"投保链接已过期",showConfirmButton:!1});const{agentCode:ma}=b.get(`${h}_userInfo`)||{},_a=l(),ba=l();l();const ha=l(),ga=l({}),ya=a({tenantProductDetail:{},insureProductDetail:{},submitData:{},riskVOList:[{}],userData:{},ifPersonalInfoSuccess:!1,currentRiskInfo:[],mainRiskInfo:{},currentPackageConfigVOList:[],planList:[],colors:["#fff"],detail:{},banner:"",productDesc:[],newAuth:!0,isValidateCode:!1,insureDetail:{},loading:!0,isSelfInsure:!0,showBtn:!1,activeIndex:0,showFilePreview:!1,isOnlyView:!0}),xa=l({}),wa=ve({extInfo:{buttonCode:"EVENT_FREE_multiIssuePolicy",pageCode:"productInfo",templateId:ca,iseeBizNo:""},periodType:g.free},fe),ka=l(),Ia=l(),Ca=l({}),ja=l([]),Pa=l(),{fileList:Oa,mustReadFileCount:Va,popupFileList:Na}=re(Ca,Pa);l({imgUrl:"",desc:"",title:"",link:""});const Da=y((()=>!!ua)),Ta=async()=>{ya.loading=!0;const e=W({productCode:_e}),a=K({productCode:_e,isTenant:!ua});await Promise.all([e,a]).then((([e,a])=>{var l;"10000"===e.code&&(ya.tenantProductDetail=e.data,document.title=e.data.BASIC_INFO.title||"",e.data.BASIC_INFO&&e.data.BASIC_INFO.themeType&&A(e.data.BASIC_INFO.themeType)),"10000"===a.code&&(ya.insureProductDetail=a.data,Ca.value=null==(l=a.data.productPlanInsureVOList)?void 0:l[0],ya.planList=(a.data.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode})))),Z({productCode:_e}).then((({code:e,data:a})=>{var l,n,t,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:s}=a;Pa.value=e||[];const{basicInfo:{questionnaireType:o},questions:d,questionnaireName:c}=(null==(l=null==s?void 0:s[0])?void 0:l.questionnaireDetailResponseVO)||{basicInfo:{}};o&&(ja.value=2===o?[{attachmentName:c,attachmentUri:d,attachmentType:"question"}]:[{attachmentName:c,attachmentUri:null==(n=null==d?void 0:d[0])?void 0:n.content,attachmentType:te(String(null==(t=null==d?void 0:d[0])?void 0:t.textType),null==(i=null==d?void 0:d[0])?void 0:i.content)}])}})),ya.loading=!1}))},Fa=l();l(!1);const La=e=>{var a;Ca.value=null==(a=ya.insureProductDetail.productPlanInsureVOList)?void 0:a[e.name]};n((()=>Ca.value),(()=>{var e,a;const{planCode:l,insureProductRiskVOList:n,productFactor:t}=Ca.value;xa.value.planCode=l,Fa.value=null==(a=null==(e=x(t))?void 0:e.agent)?void 0:a.schema,ya.currentRiskInfo=n,ya.mainRiskInfo=(n||[]).find((e=>e.mainRiskFlag===w.YES)),console.log("mainRiskInfo.value",ya.mainRiskInfo)}),{deep:!0,immediate:!0});const Ra=(e={},a={},l={})=>{const n={...l},{insuredList:t,holder:i}=l,s=se([...ya.currentRiskInfo]).map((e=>({...e}))),o={tenantId:da,riskList:s,riskPremium:a,productId:null==e?void 0:e.id};return n.extInfo.iseeBizNo=_a.value,n.productCode=null==e?void 0:e.productCode,n.commencementTime=n.insuranceStartDate,n.expiryDate=n.insuranceEndDate,n.premium=0,n.orderAmount=0,n.orderRealAmount=0,n.insuredList=t.map((a=>{var l;return{...a,nationalityCode:"CHN",certType:a.certType||Q.CERT,certNo:(a.certNo||"").toLocaleUpperCase(),planCode:Ca.value.planCode,productList:[{premium:0,productCode:null==e?void 0:e.productCode,productName:null==e?void 0:e.productName,planCode:null==(l=Ca.value)?void 0:l.planCode,riskList:ie(o)}]}})),n.holder.nationalityCode="CHN",n},Aa=l(),Ea=l(!1),Sa=l(),qa=l(!0),Ba=l(),Ua=l(!1),$a=(e=!0)=>{ee({orderNo:va,tenantId:da},{isLoading:e}).then((({code:e,data:a})=>{var l,n,t;"10000"===e&&(qa.value=(null==(n=null==(l=a.insuredList)?void 0:l[0])?void 0:n.faceAuthFlag)===w.YES,qa.value&&(Ba.value.isStart&&E("被保人认证完成"),Ba.value.stop()),Object.assign(wa.value,a),Ea.value=!!(null==(t=a.holder)?void 0:t.name),wa.value.holder.config={name:{isView:Ea.value}},ya.userData=a,Ea.value&&(Aa.value.agentCode=Sa.value))}))};Ba.value=pe({start:()=>{$a(!1),qa.value=!1},stop:()=>{qa.value=!0},time:1e4});const Ya=async()=>{var e,a;const l={insurerCode:ra,productCode:_e,productId:"",productName:(null==(e=ya.insureProductDetail)?void 0:e.productName)||"",tenantId:da},n=Ra(l,{},Object.assign(wa.value,ya.userData));if(Da.value)J.push(`/baseInsurance/orderDetail?from=free&tenantId=${da}&orderNo=mockOrderNo&productCode=${_e}&preview=true&templateView=${ca}`);else try{if(pa)n.extInfo.buttonCode=B.free.underWriteAndIssue,Promise.all([null==(a=ka.value)?void 0:a.validate,Ia.value.validate()]).then((e=>{oa===Aa.value.agentCode?ne(n,((e,a,l)=>{a===U.JUMP_PAGE&&e.orderNo?J.push({path:ue.paymentResult,query:{tenantId:da,from:"free",orderNo:va}}):a===U.JUMP_ALERT&&"faceAuth"===e.alertType&&_.confirm({message:l,confirmButtonText:"去分享",cancelButtonText:"被保人确认"}).then((()=>{const e={...fe.query,isShare:1,orderNo:va,agentCode:ma,objectType:"insured",origin:"share"};ga.value={title:"标题",desc:"描述",imageUrl:S,url:`${window.location.origin}${window.location.pathname}?${q.stringify(e)}`,link:`${window.location.origin}${window.location.pathname}?${q.stringify(e)}`},ha.value.handleShare(ga.value),Ua.value=!0,Ba.value.run()})).catch((()=>{J.push({path:ue.faceVerify,query:{...fe.query,objectType:"insured",origin:"confirm"}})}))})):_.alert({message:"代理人工号有误，请核对后重新录入",confirmButtonText:"我知道了"})})).catch((e=>{$(".page-free-product-detail",".van-field--error")}));else{const{code:e,data:a}=await ae(n);if("10000"===e){const e={...fe.query,isShare:1,orderNo:a,agentCode:ma,date:m().format("YYYY-MM-DD")};ga.value={title:"标题",desc:"描述",imageUrl:S,link:`${window.location.origin}${window.location.pathname}?${q.stringify(e)}`,url:`${window.location.origin}${window.location.pathname}?${q.stringify(e)}`},ha.value.handleShare(ga.value)}}}catch(t){console.log("e")}},za=()=>{ya.showFilePreview=!1,ya.isOnlyView=!0},Ma=()=>{ya.showFilePreview=!1,ya.isOnlyView=!0,Ya()},Ga=()=>{var e;(e={tenantId:da,saleUserId:oa},d({url:"/api/app/policy/agent/query",method:"POST",data:e})).then((({code:e,data:a})=>{"10000"===e&&(Sa.value=a.agentCode,Aa.value={...a,agentCode:""},$a())}))};k((()=>{oa&&Ga(),Ta(),setTimeout((async()=>{_a.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)}));const Ha=I(ba);return C(ba,(([{isIntersecting:e}],a)=>{(e=>{Ha.bottom.value<0||Ha.top.value<0?ya.showBtn=!e:ya.showBtn=!1})(e)})),(e,a)=>{var l,n,d,r,v,u,p,f,m,_;const b=Y,h=z,g=M,y=G,x=H;return t(),j(V,null,[s(ya).loading?(t(),j("div",be,[P("div",he,[P("div",ge,[P("div",ye,[xe,P("div",we,[P("div",ke,[(t(),j("svg",Ie,Ce)),je,(t(),j("svg",Pe,Oe))]),P("div",Ve,[P("div",Ne,[P("div",De,[P("form",Te,[P("div",Fe,[Le,P("div",Re,[P("div",Ae,[Ee,P("div",Se,[P("div",qe,[(t(),j("svg",Be,Ue))])])])])]),$e,Ye,ze,Me,Ge,He,Xe,Je,Qe,We])])])]),Ze])])])])])):(t(),j("div",{key:1,"data-skeleton-root":"FREE5","theme-vars":s(X),class:"page-free-product-detail"},[1==(null==(n=null==(l=s(ya).tenantProductDetail)?void 0:l.BASIC_INFO)?void 0:n.bannerType)&&(null==(r=null==(d=s(ya).tenantProductDetail)?void 0:d.BASIC_INFO)?void 0:r.banner.length)?(t(),i(oe,{key:0,"data-skeleton-type":"img","indicator-color":"#ddd",images:null==(v=s(ya).tenantProductDetail)?void 0:v.BASIC_INFO.banner},null,8,["images"])):O("",!0),P("div",ea,[(t(!0),j(V,null,N(null==(p=null==(u=s(ya).tenantProductDetail)?void 0:u.SPECIAL_FEATURE)?void 0:p.spec,((e,a)=>(t(),j("div",{key:a,class:"part image-part"},[D(b,{src:e},null,8,["src"])])))),128)),(null==(f=s(ya).planList)?void 0:f.length)>1?(t(),i(h,{key:0,active:e.currentActivePlanCodeIndex,"onUpdate:active":a[0]||(a[0]=a=>e.currentActivePlanCodeIndex=a),list:s(ya).planList.map(((e,a)=>({title:e.planName,slotName:e.planName}))),class:"custom-plan-tab",onClickTab:La},null,8,["active","list"])):O("",!0),s(pa)?(t(),j("div",aa,[la,D(me,{ref_key:"agentRef",ref:ka,modelValue:s(Aa),"onUpdate:modelValue":a[1]||(a[1]=e=>T(Aa)?Aa.value=e:null),"is-view":"",config:{agentCode:{isView:s(Ea)}},schema:s(Fa)},null,8,["modelValue","config","schema"])])):O("",!0),P("div",na,[P("div",ta,[D(g,{color:"var(--van-primary-color)","font-size":"40px",name:"free-arrow"}),ia,D(g,{color:"var(--van-primary-color)","font-size":"40px",name:"free-arrow"})]),(t(),i(le,{key:s(Ca).planCode,ref_key:"personalInfoRef",ref:Ia,modelValue:s(ya).userData,"onUpdate:modelValue":a[2]||(a[2]=e=>s(ya).userData=e),"input-align":"left","is-view":s(Ua)||s(qa),"error-message-align":"left","product-factor":null==(m=s(Ca))?void 0:m.productFactor,"multi-insured-config":null==(_=s(Ca))?void 0:_.multiInsuredConfigVO,onTrailChange:e.handlePersonalInfoChange},null,8,["modelValue","is-view","product-factor","multi-insured-config","onTrailChange"])),sa,D(de,{ref_key:"root",ref:ba,class:F({"submit-btn":!0,"is-first":!s(ya).newAuth}),"is-gradient":!1,disabled:s(Ua)&&!s(qa),text:s(pa)?"领取保障并激活":"分享至客户",onClick:Ya},null,8,["class","disabled","text"]),s(pa)?(t(),i(y,{key:0},{default:L((()=>{var e;return[(null==(e=s(Oa))?void 0:e.length)?(t(),i(s(c),{key:0,"attachment-list":s(Oa),"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:a[3]||(a[3]=e=>(e=>{ya.isOnlyView=!0,ya.activeIndex=e,ya.showFilePreview=!0})(e))},null,8,["attachment-list"])):O("",!0)]})),_:1})):O("",!0),D(y,null,{default:L((()=>{var e,a,l;return[(null==(e=s(ya).tenantProductDetail.SIGNATURE)?void 0:e.inscribedContent)?(t(),i(s(o),{key:0,"inscribed-content":null==(l=null==(a=s(ya).tenantProductDetail)?void 0:a.SIGNATURE)?void 0:l.inscribedContent},null,8,["inscribed-content"])):O("",!0)]})),_:1})])])],8,Ke)),s(ya).showFilePreview?(t(),i(s(R),{key:2,show:s(ya).showFilePreview,"onUpdate:show":a[4]||(a[4]=e=>s(ya).showFilePreview=e),"content-list":s(ya).isOnlyView?s(Oa):s(Na),"is-only-view":s(ya).isOnlyView,"active-index":s(ya).activeIndex,text:s(ya).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-count":s(ya).isOnlyView?0:s(Va),onSubmit:Ma,onOnCloseFilePreviewByMask:za},null,8,["show","content-list","is-only-view","active-index","text","force-read-count"])):O("",!0),D(x,{ref_key:"shareRef",ref:ha},null,512),s(ya).loading?O("",!0):(t(),i(ce,{key:3,"product-detail":s(ya).tenantProductDetail},null,8,["product-detail"]))],64)}}}),[["__scopeId","data-v-883f5b38"]]);export{oa as default};

!function(){var e=document.createElement("style");e.innerHTML=".guarantee-list[data-v-ac4580b0]{background:#ffffff;padding:.66667rem .53333rem 0px}.guarantee-list .header[data-v-ac4580b0]{display:flex;justify-content:space-between;align-items:center}.guarantee-list .header span[data-v-ac4580b0]{display:inline-block;color:#333}.guarantee-list .header span[data-v-ac4580b0]:first-child{height:.74667rem;line-height:.74667rem;font-size:.53333rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500}.guarantee-list .header span[data-v-ac4580b0]:last-child{height:.49333rem;font-size:.34667rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#006afc;line-height:.49333rem}.guarantee-list .feerate-view[data-v-ac4580b0]{padding:.42667rem 0px;border-top:1px solid #eeeeee;display:flex;justify-content:space-between}.guarantee-list .feerate-view span[data-v-ac4580b0]{display:inline-block;height:.53333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#666;line-height:.53333rem}.guarantee-list .feerate-view span[data-v-ac4580b0]:last-child{color:var(--van-primary-color, var(--zaui-brand))}.guarantee-list .show-more[data-v-ac4580b0]{padding:.21333rem 0 .42667rem;width:100%;display:flex;justify-content:center;align-items:center;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#999}.guarantee-list .show-more .icon[data-v-ac4580b0]{margin-left:.13333rem;font-size:.26667rem;transition:transform .5s}.guarantee-list .show-more .icon.showMore[data-v-ac4580b0]{transform:rotate(180deg)}.guarantee-list .service-config img[data-v-ac4580b0]{width:100%}.guarantee-popup[data-v-ac4580b0]{position:relative}.guarantee-popup .body[data-v-ac4580b0]{display:flex;flex-direction:column}.guarantee-popup .body .extinfo-info-list[data-v-ac4580b0]{padding:.21333rem .53333rem}.guarantee-popup .body .custom-plan-tab[data-v-ac4580b0] .van-tab__text{font-size:.42667rem!important;font-family:PingFangSC-Medium,PingFang SC!important;font-weight:500}.guarantee-popup .body .custom-plan-tab[data-v-ac4580b0] .van-tab--active .van-tab__text{color:var(--van-primary-color)!important}.guarantee-popup .body .custom-plan-tab[data-v-ac4580b0] .van-tabs__line{background:var(--van-primary-color)!important}.guarantee-popup .body .guarantee-detail[data-v-ac4580b0]{flex:1;height:var(--541c7141);overflow-y:scroll}.guarantee-popup .body .guarantee-detail .plan-list[data-v-ac4580b0]{padding:.53333rem .53333rem 0px}.guarantee-popup .body .guarantee-detail .guarantee-item[data-v-ac4580b0]{margin-top:.10667rem;padding:0 .53333rem}.guarantee-popup .body .guarantee-detail .guarantee-item[data-v-ac4580b0] .right-part{color:var(--van-primary-color)!important}.guarantee-popup .body .guarantee-detail .guarantee-item[data-v-ac4580b0]:first-child{margin-top:.21333rem!important}.guarantee-popup .body .guarantee-detail .guarantee-item .content[data-v-ac4580b0]{font-size:.34667rem;color:#393d46;line-height:.58667rem;padding-bottom:.21333rem}.plan-list[data-v-ac4580b0]{display:flex;width:100%;overflow-x:scroll;overflow-y:hidden;flex-wrap:nowrap;justify-content:flex-start;padding:.4rem 0px}.plan-list[data-v-ac4580b0]::-webkit-scrollbar{display:none}.plan-list .plan-list-item[data-v-ac4580b0]{min-width:2.8rem;height:1.01333rem;line-height:1.01333rem;text-align:center;border-radius:.10667rem;background:#f6f6f6;margin-right:.26667rem}.plan-list .plan-list-item[data-v-ac4580b0]:last-child{margin-right:0}.plan-list .plan-list-item span[data-v-ac4580b0]{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#666}.plan-list .plan-list-item-active[data-v-ac4580b0]{border:1px solid var(--van-primary-color);background:#fff3eb}.plan-list .plan-list-item-active span[data-v-ac4580b0]{color:var(--van-primary-color)}.picture-payment-content[data-v-ac4580b0]{padding:0px 0px .42667rem;display:flex;flex-wrap:nowrap;overflow:scroll;justify-content:space-between}.picture-payment-content[data-v-ac4580b0]::-webkit-scrollbar{display:none}.picture-payment-content .picture-payment-item[data-v-ac4580b0]{width:4.25333rem;height:1.26667rem;margin-top:.42667rem;margin-right:.42667rem}.picture-payment-content .picture-payment-item[data-v-ac4580b0]:last-child{margin-right:0!important}.picture-payment-content .picture-payment-item img[data-v-ac4580b0]{width:4.25333rem;height:1.26667rem}.guarantee-popup .header{border-bottom:none!important}.guarantee-popup .body{height:calc(100% - 1.46667rem)!important}.guarantee-popup .van-popup__close-icon--top-right{top:.53333rem!important}.tabs[data-v-717e916d] .tab-title{font-size:.42667rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500}.tabs[data-v-717e916d] .active:after{width:.64rem!important;height:.08rem!important;border-radius:.05333rem!important}.spec img[data-v-717e916d]{width:100%;display:block}.spec .van-image__error[data-v-717e916d]{font-size:.8rem}.sub-title[data-v-717e916d]{font-size:.34667rem;font-weight:400;color:#99a9c0;line-height:.50667rem;margin-bottom:.13333rem}.tab-1-content[data-v-717e916d]{font-size:.34667rem;font-weight:400;color:#393d46;line-height:.50667rem;margin-top:.33333rem;margin-bottom:.53333rem}[data-v-717e916d] .com-time-line .item .left .num{background:var(--van-primary-background-color);border:1px solid var(--van-primary-color)}[data-v-717e916d] .com-time-line .item .left .num:after{border-left:1px dashed var(--van-primary-background-color);border-right:1px dashed var(--van-primary-background-color)}.page-internet-product-detail[data-v-386644ac]{padding-bottom:2rem;background:#f1f5fc}.page-internet-product-detail .custom-page-form[data-v-386644ac]{background:#ffffff}.page-internet-product-detail .custom-page-form .form-title[data-v-386644ac]{padding:.53333rem 0px .13333rem;text-align:center;font-size:.53333rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#333}.page-internet-product-detail .custom-page-form[data-v-386644ac] .com-card-wrap .header{margin-left:0!important}.page-internet-product-detail .custom-page-form[data-v-386644ac] .com-card-wrap .header .title-wrapper .title:before{margin-right:.37333rem!important}.page-internet-product-detail .custom-page-form[data-v-386644ac] .com-card-wrap .relation-holder .van-cell__title{display:none}.page-internet-product-detail .custom-page-form[data-v-386644ac] .radio-btn{justify-content:flex-start}.page-internet-product-detail .custom-page-form[data-v-386644ac] .radio-btn .btn-wrapper{margin-left:0!important;margin-right:.10667rem!important}.page-internet-product-detail .footer-area[data-v-386644ac]{width:100%;height:2rem;position:fixed;bottom:0;left:0;display:flex;align-items:center;border-top:1px solid #EEEFF4;padding:0 .4rem;background:#ffffff;z-index:10;justify-content:space-between;border-radius:.4rem .4rem 0px 0px}.page-internet-product-detail .price[data-v-386644ac]{color:#393d46;font-size:.45333rem;font-weight:400}.page-internet-product-detail .price span[data-v-386644ac]{color:var(--van-primary-color);font-weight:700}.page-internet-product-detail .price span[data-v-386644ac]:last-child{font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400}.page-internet-product-detail .right[data-v-386644ac]{width:4.26667rem;height:1.17333rem;border-radius:.58667rem}\n",document.head.appendChild(e),System.register(["./index-legacy-d9740408.js","./debounce-legacy-fad00851.js","./trial-legacy-2a498e97.js","./product-legacy-a8395de5.js","./nextStep-legacy-c7f65261.js","./infoCollection-legacy-49731afa.js","./trial-legacy-c5f0d366.js","./index-legacy-db943732.js","./theme-legacy-14f266cb.js","./utils-legacy-6715680b.js","./validator-legacy-5e43cc69.js","./phoneVerify-legacy-38df69d3.js","./useStorage-legacy-79134f63.js","./pdfdist-legacy-3ac4c460.js","./core-legacy-fe5dd65e.js","./index-legacy-6167ce30.js","./index-legacy-ec738c3a.js","./logo-legacy-553bc5c2.js"],(function(e,t){"use strict";var a,n,r,l,i,o,u,d,c,s,p,v,m,f,g,y,h,b,O,I,P,C,x,L,w,S,k,V,F,T,H,j,N,q,_,R,E,D,z,B,A,M,U,$,G,Q,W,J,K,Y,Z,X,ee,te,ae,ne,re,le,ie,oe,ue,de,ce,se,pe,ve,me,fe,ge,ye,he;return{setters:[function(e){a=e._,n=e.d,r=e.aY,l=e.r,i=e.a7,o=e.x,u=e.G,d=e.aR,c=e.b,s=e.q,p=e.c,v=e.g,m=e.i,f=e.F,g=e.l,y=e.h,h=e.B,b=e.t,O=e.j,I=e.e,P=e.n,C=e.f,x=e.I,L=e.Q,w=e.w,S=e.s,k=e.K,V=e.L,F=e.aZ,T=e.b0,H=e.aJ,j=e.b5,N=e.a8,q=e.u,_=e.a,R=e.a_,E=e.a2,D=e.a$,z=e.an,B=e.y,A=e.aP,M=e.aK,U=e.T,$=e.a4},function(e){G=e.d},function(e){Q=e.i,W=e.b,J=e.p,K=e.g},function(e){Y=e.p},function(e){Z=e.n},function(e){X=e.C,ee=e.S,te=e.R,ae=e.O,ne=e.m},function(e){re=e.k,le=e.j},function(e){ie=e.u,oe=e.B,ue=e.P},function(e){de=e.u},function(e){ce=e.o,se=e.g,pe=e.v,ve=e.r,me=e.t},function(e){fe=e.v},function(e){ge=e.s,ye=e.c},function(e){he=e.s},function(){},function(){},function(){},function(){},function(){}],execute:function(){const be={class:"guarantee-list"},Oe=(e=>(k("data-v-ac4580b0"),e=e(),V(),e))((()=>m("span",null,"保障计划",-1))),Ie={key:0,class:"picture-payment-content"},Pe=["onClick"],Ce=["src"],xe=["src"],Le={key:1,class:"plan-list"},we=["onClick"],Se={key:2,class:"feerate-view"},ke={key:0},Ve={class:"extinfo-info-list"},Fe={class:"guarantee-detail"},Te={class:"content"},He=n({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1},paymentFrequency:{type:String,default:""},premiumInfo:{type:Object,default:()=>{}}},emits:["update-active-plan"],setup(e,{emit:t}){const a=e;r((e=>({"541c7141":G.value})));const n=l(a.dataSource?.planList),k=l(a.activePlanCode),V=l();i([()=>a.dataSource,()=>a.activePlanCode],(()=>{a.isMultiplePlan&&(n.value=a.dataSource?.planList,k.value=a.activePlanCode,V.value=a.dataSource?.planList.findIndex((e=>e.planCode===k.value)))}),{immediate:!0});const F=l([]),T=l([]),H=l(),j=o((()=>a.isMultiplePlan?a.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));i([()=>a.dataSource,()=>a.activePlanCode,()=>a.paymentFrequency,()=>k.value],(()=>{if(a.isMultiplePlan){if(n.value&&n.value.length>0){let e=0;const t=n.value.findIndex((e=>e.planCode===k.value));t>-1&&(e=t),F.value=n.value[e].guaranteeItemVOS,T.value=n.value[e].extInfoVOList;const r=n.value[e].productPremiumVOList.find((e=>e.paymentFrequency===a.paymentFrequency));H.value=r||n.value[e]?.productPremiumVOList[0]}}else{F.value=a.dataSource?.planInsureVO.guaranteeItemVOS,T.value=a.dataSource?.planInsureVO.extInfoVOList;const e=a.dataSource?.planInsureVO.productPremiumVOList.find((e=>e.paymentFrequency===a.paymentFrequency));H.value=e||a.dataSource?.planInsureVO.productPremiumVOList[0]}}),{immediate:!0,deep:!0});const N=o((()=>a.dataSource?.rateUri||"")),q=o((()=>!!(H.value&&H.value.paymentFrequencyValue&&H.value.premiumUnit&&N))),[_,R]=u(!1),E=o((()=>!(!F.value||!F.value?.length)&&(F.value.length>a.count&&(!!a.isShowClose||!_.value)))),D=()=>{R()},z=o((()=>F.value&&F.value?.length?F.value.length<=a.count||_.value?F.value:F.value.slice(0,a.count):[])),B=e=>{k.value=e,V.value=a.dataSource?.planList.findIndex((e=>e.planCode===k.value))},A=l(!1),M=()=>{A.value=!0},U=()=>{ce({fileType:"pdf",fileUri:N.value})},$=e=>{k.value=n.value[e.name].planCode},G=l("");return i([()=>k.value,()=>A.value],(()=>{d((()=>{(()=>{const e=(document.querySelector(".guarantee-popup .extinfo-info-list")?.clientHeight||0)+1,t=e+(document.querySelector(".guarantee-popup .custom-plan-tab")?.clientHeight||0)+(e?5:0);G.value=`calc( 100% - ${t}px )`})()}))})),(t,a)=>{const r=c("ProCell"),l=c("ProTab"),i=c("ProPopup"),o=s("dompurify-html");return p(),v(f,null,[m("div",be,[m("div",{class:"header"},[Oe,m("span",{onClick:M},"查看详情")]),e.isMultiplePlan?(p(),v(f,{key:0},[g(j).length>0?(p(),v("div",Ie,[(p(!0),v(f,null,y(g(j),(e=>(p(),v("div",{key:e.planCode,class:h("picture-payment-item"),onClick:t=>B(e.planCode)},[k.value==e.planCode?(p(),v("img",{key:0,src:e.selectedPic},null,8,Ce)):(p(),v("img",{key:1,src:e.unSelectedPic},null,8,xe))],8,Pe)))),128))])):(p(),v("div",Le,[(p(!0),v(f,null,y(n.value,((e,t)=>(p(),v("div",{key:`${e.planCode}_${t}`,class:h("plan-list-item "+(e.planCode===k.value?"plan-list-item-active":"")),onClick:t=>B(e.planCode)},[m("span",null,b(e.planName),1)],10,we)))),128))]))],64)):O("",!0),(p(!0),v(f,null,y(g(z),((e,t)=>(p(),I(r,{key:t,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),g(E)?(p(),v("div",{key:1,class:"show-more",onClick:D},[P(b(g(_)?"收起":"查看更多")+" ",1),C(x,{name:"arrow-down-dobule",class:h(["icon",{showMore:g(_)}])},null,8,["class"])])):O("",!0),g(q)?(p(),v("div",Se,[m("span",null,b(`${H.value?.paymentFrequencyValue||""}${H.value?.premiumUnit||""}`),1),g(N)?(p(),v("span",{key:0,onClick:U},"查看保费")):O("",!0)])):O("",!0)]),C(L),C(i,{show:A.value,"onUpdate:show":a[1]||(a[1]=e=>A.value=e),title:"保障详情",class:"guarantee-popup"},{default:w((()=>[T.value&&T.value.length>0?(p(),v("div",ke,[m("div",Ve,[(p(!0),v(f,null,y(T.value,((e,t)=>(p(),I(r,{key:t,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),C(L)])):O("",!0),e.isMultiplePlan?(p(),I(l,{key:1,active:V.value,"onUpdate:active":a[0]||(a[0]=e=>V.value=e),list:n.value.map(((e,t)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:$},null,8,["active","list"])):O("",!0),m("div",Fe,[(p(!0),v(f,null,y(F.value,((e,t)=>(p(),v("div",{key:t,class:"guarantee-item"},[C(r,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),S(m("div",Te,null,512),[[o,e.content]])])))),128))])])),_:1},8,["show"])],64)}}});var je=a(He,[["__scopeId","data-v-ac4580b0"]]);const Ne={class:"spec"},qe={key:1,class:"spec"},_e=n({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:a}){const n=e,r=F((()=>T((()=>t.import("./index-legacy-d9740408.js").then((function(e){return e.bo}))),void 0))),i=F((()=>T((()=>t.import("./index-legacy-fbf1bebc.js")),void 0))),u=F((()=>T((()=>t.import("./index-legacy-d9740408.js").then((function(e){return e.bm}))),void 0))),d=F((()=>T((()=>t.import("./index-legacy-756cac57.js")),void 0))),s=F((()=>T((()=>t.import("./index-legacy-f441c2d8.js")),void 0))),h=l(),b=l([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),P=o((()=>n.detail?.tenantProductInsureVO?.spec&&n.detail?.tenantProductInsureVO?.spec.length>0)),x=o((()=>{const e=n.detail?.tenantProductInsureVO?.settlementProcessVO.settlementProcessType;return!!(e===X.WORD&&n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessList&&n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessList.length>0||e===X.IMAGE&&n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessPicList&&n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessPicList.length>0)})),L=o((()=>n.detail?.tenantProductInsureVO?.questionList&&n.detail?.tenantProductInsureVO?.questionList.length>0)),S=o((()=>{let e=[...b.value];return P.value||(e=e.filter((e=>"tab1"!==e.slotName))),x.value||L.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>h.value?.handleClickTab}),(e,t)=>{const a=c("van-image"),l=c("ProSvg");return p(),I(g(r),{ref_key:"scrollRef",ref:h,class:"tabs",list:g(S),sticky:"",scrollspy:""},H({tab3:w((()=>[N(e.$slots,"form",{},void 0,!0)])),_:2},[g(P)?{name:"tab1",fn:w((()=>[m("div",Ne,[(p(!0),v(f,null,y(n.detail?.tenantProductInsureVO?.spec||[],((e,t)=>(p(),I(j,{key:t},{fallback:w((()=>[C(l,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:w((()=>[(p(),I(a,{key:t,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),C(g(u))])]))}:void 0,g(x)||g(L)?{name:"tab2",fn:w((()=>[g(x)?(p(),v(f,{key:0},[n.detail?.tenantProductInsureVO?.settlementProcessVO.settlementProcessType===g(X).WORD?(p(),I(g(d),{key:0,title:"理赔说明"},{default:w((()=>[C(g(i),{list:n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessList},null,8,["list"])])),_:1})):(p(),v("div",qe,[(p(),I(j,null,{fallback:w((()=>[C(l,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:w((()=>[(p(!0),v(f,null,y(n.detail?.tenantProductInsureVO?.settlementProcessVO?.settlementProcessPicList||[],((e,t)=>(p(),I(a,{key:t,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))])),_:1}))])),C(g(u))],64)):O("",!0),g(L)?(p(),v(f,{key:1},[C(g(d),{title:"常见问题"},{default:w((()=>[C(g(s),{list:n.detail?.tenantProductInsureVO?.questionList},null,8,["list"])])),_:1}),C(g(u))],64)):O("",!0)]))}:void 0]),1032,["list"])}}});var Re=a(_e,[["__scopeId","data-v-717e916d"]]);const Ee=e=>(k("data-v-386644ac"),e=e(),V(),e),De={class:"page-internet-product-detail"},ze={class:"info"},Be={class:"custom-page-form"},Ae=Ee((()=>m("div",{class:"form-title"},"请填写投保信息",-1))),Me={key:2,class:"footer-area"},Ue={class:"price"},$e={key:0},Ge=P(b("立即投保")),Qe=Ee((()=>m("div",{id:"xinaoDialog"},null,-1)));e("default",a(n({setup(e){const a=F((()=>T((()=>t.import("./index-legacy-cf48f7b3.js")),void 0))),n=F((()=>T((()=>t.import("./index-legacy-5f04019e.js")),void 0))),r=F((()=>T((()=>t.import("./index-legacy-c1d1a126.js")),void 0))),u=F((()=>T((()=>t.import("./index-legacy-ec738c3a.js")),void 0))),s=F((()=>T((()=>t.import("./index-legacy-78e49ec9.js")),void 0))),y=F((()=>T((()=>t.import("./index-legacy-65c472e1.js")),void 0))),h=F((()=>T((()=>t.import("./index-legacy-820858a2.js")),void 0))),P=F((()=>T((()=>t.import("./index-legacy-f40cb48a.js")),void 0))),x=de();q();const L=_(),{productCode:S="",tenantId:k,agentCode:V="",agencyCode:j,saleChannelId:N,extraInfo:X,insurerCode:ce,preview:be}=L.query;let Oe={};try{Oe=JSON.parse(decodeURIComponent(X))}catch(Lt){}const{openId:Ie}=Oe,Pe=l(),Ce=l(),xe=l(),Le=l(!1),we=l(),Se=l(),ke=l(!1),Ve=l(!1),Fe=l(0),Te=l(!1),He=l({}),Ne=l({}),qe=l(!0),_e=l(!0),Ee=l(""),We=l(),Je=l(),Ke=l(""),Ye=l(""),Ze=l("");Ie&&ie({openId:Ie},(e=>{Ne.value=e}));const Xe="jumpToPage",et=l({tenantId:k,agencyId:j,agentCode:V,orderCategory:1,saleChannelId:N,venderCode:ce,productCode:S,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:"",premium:0,insurancePeriodValue:re.YEAR_1,commencementTime:"",tenantOrderHolder:{extInfo:{hasSocialInsurance:ee.HAS}},tenantOrderInsuredList:[{dontFetchDefaultInfo:!1,relationToHolder:te.SELF,extInfo:{hasSocialInsurance:ee.HAS},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:k,productCode:we.value?.productCode||"",planCode:"",productName:we.value?.productName||"",premium:We.value||0,tenantOrderRiskList:[]}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:Oe,templateId:Oe?.templateId||"1",iseeBizNo:""},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),tt=o((()=>!!be)),at=o((()=>!!we.value&&!!(we.value?.tenantProductInsureVO?.planList&&Array.isArray(we.value?.tenantProductInsureVO?.planList)&&we.value?.tenantProductInsureVO?.planList.length>0))),nt=o((()=>{if(Ne.value){const e=[];return Object.keys(Ne.value).forEach((t=>{e.push(...Ne.value[t])})),e}return[]})),rt=o((()=>nt.value.length>0)),lt=o((()=>{let e={};if(Se.value?.productFactor?e=Se.value?.productFactor:et.value.activePlanCode&&(e=Se.value?.planFactor[et.value.activePlanCode]||{}),rt.value&&e[1]){const t=e[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay));t>-1&&(e[1][t].isDisplay=2)}return e})),it=o((()=>{if(lt.value[1]){if(lt.value[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay))>-1)return!0}return!1}));i((()=>at.value),(()=>{at.value&&(et.value.activePlanCode=et.value.activePlanCode?et.value.activePlanCode:we.value?.tenantProductInsureVO?.planList[0].planCode)}),{immediate:!0});const ot=o((()=>at.value?Se.value?.productRelationPlanVOList.find((e=>e.planCode===et.value.activePlanCode))?.productRiskVoList||[]:Se.value?.productRiskVoList||[])),ut=o((()=>{if(!we.value)return{};if(at.value){const e=we.value?.tenantProductInsureVO.planList.find((e=>e.planCode===et.value.activePlanCode));return e||{}}return we.value.tenantProductInsureVO.planInsureVO})),dt=e=>{et.value.activePlanCode=e},ct=o((()=>{if(Se.value?.productQuestionnaireVOList&&Se.value?.productQuestionnaireVOList.length>0){const e=Se.value?.productQuestionnaireVOList[0];if(e){const{basicInfo:{questionnaireType:t},questions:a}=e.questionnaireDetailResponseVO||{};return"2"===String(t)?[{attachmentName:e?.questionnaireName,attachmentUri:a,attachmentType:"question"}]:[{attachmentName:e?.questionnaireName,attachmentUri:a[0].content,attachmentType:se(String(a[0].textType),a[0].content)}]}}return[]})),st=l();i([()=>at.value,()=>et.value.activePlanCode,()=>we.value],(()=>{let e=null;if(at.value&&we.value){const t=we.value?.tenantProductInsureVO.planList.find((e=>e.planCode===(et.value.activePlanCode||"")));t&&(e=t?.attachmentVOList)}else we.value&&(e=we.value?.tenantProductInsureVO.planInsureVO.attachmentVOList);st.value=e?Object.keys(e).map((t=>(e[t].forEach((e=>{e.attachmentType=se(String(e.attachmentType),e.attachmentUri)})),{attachmentName:t,attachmentList:e[t]}))):[]}),{immediate:!0});const pt=async({mobile:e,type:t},a)=>{if(Pe.value){if(tt.value)return void a?.();Pe.value?.validateForm(`${t}_mobile`).then((async()=>{const t=await ge(e),{code:n,data:r}=t;"10000"===n&&a?.()}))}},vt=()=>{Ce.value.handleClickTab()("tab3")},mt=e=>{_e.value=!1,Object.assign(et.value.tenantOrderHolder,e),d((()=>{_e.value=!0}))},ft=e=>{_e.value=!1,Object.assign(et.value.tenantOrderInsuredList[0],e),d((()=>{_e.value=!0}))},gt=e=>{Fe.value=e,Ve.value=!0},yt=async()=>{try{await Z(((e={},t={},a={})=>{const n={...a},r={tenantId:k,riskList:n.tenantOrderInsuredList[0]?.tenantOrderProductList[0].riskVOList||[],riskPremium:t,productId:e?.productBasicInfoVO.id};return n.extInfo.iseeBizNo=Ee.value,n.productCode=e.productBasicInfoVO.productCode,n.commencementTime=n.insuranceStartDate,n.expiryDate=n.insuranceEndDate,n.paymentFrequency=n.paymentFrequency||ne.SINGLE,n.tenantOrderHolder={...n.tenantOrderHolder,socialFlag:n.tenantOrderHolder.extInfo.hasSocialInsurance||ee.HAS,certType:n.tenantOrderHolder.certType||E.CERT,extInfo:{...n.tenantOrderHolder.extInfo,hasSocialInsurance:n.tenantOrderHolder.extInfo.hasSocialInsurance||ee.HAS}},n.tenantOrderInsuredList=n.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||E.CERT,socialFlag:e.socialFlag||ee.HAS,planCode:et.value.activePlanCode?et.value.activePlanCode:null}))),n.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:We.value,productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:et.value.activePlanCode?et.value.activePlanCode:null,tenantOrderRiskList:me(r)},n})(Se.value,He.value,et.value),(async(e,t)=>{t===Xe&&e?.orderNo&&await(async e=>{try{const{code:t,data:a}=await K({orderNo:e,tenantId:k});"10000"===t&&(a.extInfo={...a.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await Z(a))}catch(Lt){}})(e?.orderNo)}))}catch(Lt){}},ht=async(e,t,a,n=!0)=>{try{Ze.value="保费试算中...";const r=ve(a).map((t=>({...t,paymentFrequency:e.paymentFrequency||ne.SINGLE,insurancePeriodValue:e.insurancePeriodValue,coveragePeriod:e.insurancePeriodValue}))),l={tenantId:k,productCode:we.value?.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,paymentFrequency:e.paymentFrequency||ne.SINGLE,holder:{personVO:{...e.tenantOrderHolder,socialFlag:e.tenantOrderHolder.extInfo.hasSocialInsurance||ee.HAS,certType:e.tenantOrderHolder.certType||E.CERT,extInfo:{...e.tenantOrderHolder.extInfo,hasSocialInsurance:e.tenantOrderHolder.extInfo.hasSocialInsurance||ee.HAS}}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance||ee.HAS,certType:e.certType||E.CERT,extInfo:{...e.extInfo,hasSocialInsurance:e.extInfo.hasSocialInsurance||ee.HAS}},productPlanVOList:[{insurerCode:t.productBasicInfoVO.insurerCode,planCode:et.value.activePlanCode?et.value.activePlanCode:null,riskVOList:r}]})))},{code:i,message:o}=await W(l);if("10000"===i){const{code:e,data:t}=await J(l);if("10000"===e){if(Ze.value="",et.value.tenantOrderInsuredList[0].tenantOrderProductList=l.insuredVOList[0].productPlanVOList,We.value=t?.premium,et.value.premium=t.premium,et.value.orderAmount=t.premium,et.value.orderRealAmount=t.premium,!n){const e={};t.riskPremiumDetailVOList&&t.riskPremiumDetailVOList.length&&t.riskPremiumDetailVOList.forEach((t=>{e[t.riskCode]={premium:t.premium,amount:t.amount}})),He.value=e,st.value.length>0?(qe.value=!1,gt(0)):ct.value.length>0?ke.value=!0:await yt()}}else Ze.value=""}else Ze.value="",U(o)}catch(Lt){Ze.value=""}},bt=async()=>{try{ke.value=!1,Ve.value=!1,Pe.value&&Pe.value?.validateForm().then((async()=>{if(rt.value||!it.value)await ht(et.value,Se.value,ot.value,!1);else{const e=et.value.tenantOrderHolder?.verificationCode;if(!e||!pe(e))return void U({message:"请输入正确的验证码"});const{code:t,data:a}=await ye(et.value.tenantOrderHolder.mobile,e);"10000"===t&&await ht(et.value,Se.value,ot.value,!1)}}))}catch(e){}},Ot=e=>{"allFalse"===e?(ke.value=!1,yt()):$.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{ke.value=!1}))},It=()=>{Ve.value=!1,ct.value.length<1?yt():ke.value=!0},Pt=()=>{ke.value=!1,Ve.value=!1};i((()=>et.value.tenantOrderInsuredList[0].relationToHolder),(()=>{_e.value=!1,d((()=>{et.value.tenantOrderInsuredList[0]&&et.value.tenantOrderInsuredList[0].extInfo&&!et.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance&&(et.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=ee.HAS),_e.value=!0}))}),{deep:!0,immediate:!0});const Ct=()=>{const{name:e,birthday:t,gender:a,certType:n,extInfo:{hasSocialInsurance:r}}=et.value.tenantOrderInsuredList[0];return!!(t&&a&&et.value.paymentFrequency&&e&&fe(e)&&r)},xt=()=>{if(Ct()&&(Ze.value="保费试算中..."),ut.value&&ut.value.productPremiumVOList){const e=ut.value.productPremiumVOList.find((e=>e.paymentFrequency===et.value.paymentFrequency));e&&(We.value=null,Je.value=e.paymentFrequencyValue?Number(e.paymentFrequencyValue):null,Ke.value=e.premiumUnit,Ye.value=e.actualPremiumUnit)}};i([()=>ut.value,()=>et.value.activePlanCode,()=>et.value.paymentFrequency],(()=>{xt()}),{deep:!0,immediate:!0}),i([()=>et.value.tenantOrderInsuredList[0].birthday,()=>et.value.tenantOrderInsuredList[0].name,()=>et.value.tenantOrderInsuredList[0].gender,()=>et.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance,()=>et.value.activePlanCode,()=>et.value.paymentFrequency,()=>et.value.insurancePeriodValue],G((()=>{if(Ct()){if(tt.value)return;ht(et.value,Se.value,ot.value)}else xt()}),500)),i((()=>et.value.tenantOrderInsuredList[0]),(e=>{if(R(Ne.value))return null;const t=Ne.value[e.relationToHolder]||[];return 1===t.length&&(le.SELF!==e.relationToHolder?et.value.tenantOrderInsuredList[0].dontFetchDefaultInfo||(et.value.tenantOrderInsuredList[0].dontFetchDefaultInfo=!0,et.value.tenantOrderInsuredList[0].certNo=et.value.tenantOrderInsuredList[0].certNo?et.value.tenantOrderInsuredList[0].certNo:t[0].cert[0].certNo,et.value.tenantOrderInsuredList[0].name=et.value.tenantOrderInsuredList[0].name?et.value.tenantOrderInsuredList[0].name:t[0].cert[0].certName,et.value.tenantOrderInsuredList[0].certType=et.value.tenantOrderInsuredList[0].certType?et.value.tenantOrderInsuredList[0].certType:t[0].cert[0].certType||E.CERT,et.value.tenantOrderInsuredList[0].mobile=et.value.tenantOrderInsuredList[0].mobile?et.value.tenantOrderInsuredList[0].mobile:t[0].contact[0].contactNo):et.value.tenantOrderHolder.dontFetchDefaultInfo||(et.value.tenantOrderHolder.dontFetchDefaultInfo=!0,et.value.tenantOrderHolder.certNo=et.value.tenantOrderHolder.certNo?et.value.tenantOrderHolder.certNo:t[0].cert[0].certNo,et.value.tenantOrderHolder.name=et.value.tenantOrderHolder.name?et.value.tenantOrderHolder.name:t[0].cert[0].certName,et.value.tenantOrderHolder.mobile=et.value.tenantOrderHolder.mobile?et.value.tenantOrderHolder.mobile:t[0].contact[0].contactNo,et.value.tenantOrderHolder.certType=et.value.tenantOrderHolder.certType?et.value.tenantOrderHolder.certType:t[0].cert[0].certType||E.CERT)),!1}),{immediate:!0,deep:!0});return d((()=>{D(xe,(([{isIntersecting:e}],t)=>{Le.value=!e}))})),z((()=>{const e=he.get(ae);if(e){const{tenantOrderHolder:t,tenantOrderInsuredList:a}=e;if(t&&(et.value.tenantOrderHolder={...t,certType:t.certType||E.CERT}),Array(a)&&a[0]){const e=a[0]||{};if(et.value.activePlanCode=e.planCode,e.tenantOrderProductListtenantOrderProductList&&e.tenantOrderProductList[0]&&e.tenantOrderProductList[0].tenantOrderRiskList){const t=e.tenantOrderProductList[0].tenantOrderRiskList?.find((e=>"1"===String(e.riskType)));t&&(et.value.paymentFrequency=t?.paymentFrequency?String(t?.paymentFrequency):ne.SINGLE)}}}})),B((()=>{(async()=>{await Y({productCode:S,withInsureInfo:!0,tenantId:k}).then((e=>{"10000"===e.code&&(we.value={...e.data},document.title=e.data?.tenantProductInsureVO?.productName||"")})),await Q({productCode:S}).then((e=>{"10000"===e.code&&(Te.value=!0,Se.value=e.data)}))})(),setTimeout((async()=>{Ee.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),A((()=>{he.remove(ae)})),(e,t)=>{const l=c("van-config-provider");return p(),v(f,null,[C(l,{"theme-vars":g(x)},{default:w((()=>[m("div",De,[m("div",ze,[C(oe,{url:we.value?.tenantProductInsureVO?.banner[0]},null,8,["url"]),we.value?.tenantProductInsureVO?.bannerMove?(p(),I(oe,{key:0,url:we.value?.tenantProductInsureVO?.bannerMove[0],onClick:vt},null,8,["url"])):O("",!0),m("div",{ref_key:"observeRef",ref:xe},null,512)]),C(je,{"show-service-config":"","data-source":we.value?.tenantProductInsureVO,"is-multiple-plan":g(at),"active-plan-code":et.value.activePlanCode,"payment-frequency":et.value.paymentFrequency,"premium-info":{premium:We.value,unit:Ke.value,premiumLoadingText:Ze.value},onUpdateActivePlan:dt},null,8,["data-source","is-multiple-plan","active-plan-code","payment-frequency","premium-info"]),C(Re,{ref_key:"detailScrollRef",ref:Ce,detail:we.value},{form:w((()=>[m("div",Be,[Ae,C(g(s),{ref_key:"formRef",ref:Pe,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":et.value,"need-desensitize":_e.value,"send-sms-code":pt,"factor-object":g(lt)||{}},H({_:2},[g(nt).length>1?{name:"holderName",fn:w((()=>[C(g(y),{"user-info":et.value.tenantOrderHolder,data:g(nt),onChange:mt},null,8,["user-info","data"])]))}:void 0,g(nt).length>1?{name:"insurerName",fn:w((()=>[C(g(y),{title:"选择被保人","user-info":et.value.tenantOrderInsuredList[0],data:g(nt),onChange:ft},null,8,["user-info","data"])]))}:void 0]),1032,["form-info","need-desensitize","factor-object"])]),C(g(r),{"form-info":et.value,"insure-detail":Se.value,"config-detail":we.value,"is-multiple-plan":g(at),"premium-info":{premium:We.value,unit:Ke.value,minPremiun:Je.value,actualUnit:Ye.value,premiumLoadingText:Ze.value},onUpdateActivePlan:dt},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","premium-info"])])),_:1},8,["detail"]),we.value?.tenantProductInsureVO.inscribedContent?(p(),I(g(h),{key:0,"inscribed-content":we.value?.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):O("",!0),st.value&&st.value.length>0?(p(),I(g(P),{key:1,"attachement-list":st.value,"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>gt(e))},null,8,["attachement-list"])):O("",!0),Le.value?(p(),v("div",Me,[m("div",Ue,[Ze.value?(p(),v("span",$e,b(Ze.value),1)):We.value?(p(),v(f,{key:1},[m("span",null,b(g(M)(We.value)),1),m("span",null,b(Ye.value||"元"),1)],64)):(p(),v(f,{key:2},[m("span",null,b(Je.value),1),m("span",null,b(Ke.value),1)],64))]),C(g(u),{disabled:g(tt),shadow:!1,"theme-vars":g(x),class:"right",text:"立即投保",onClick:bt},{default:w((()=>[Ge])),_:1},8,["disabled","theme-vars"])])):O("",!0)]),Te.value?(p(),I(ue,{key:0,"product-detail":we.value},null,8,["product-detail"])):O("",!0),Qe])),_:1},8,["theme-vars"]),C(g(n),{show:ke.value,"onUpdate:show":t[1]||(t[1]=e=>ke.value=e),"content-list":g(ct),"active-index":0,onOnConfirmHealth:Ot,onOnCloseHealthByMask:Pt},null,8,["show","content-list"]),Ve.value?(p(),I(g(a),{key:0,show:Ve.value,"onUpdate:show":t[2]||(t[2]=e=>Ve.value=e),"content-list":st.value,"is-only-view":qe.value,"active-index":Fe.value,text:qe.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:It,onOnCloseFilePreviewByMask:Pt},null,8,["show","content-list","is-only-view","active-index","text"])):O("",!0)],64)}}}),[["__scopeId","data-v-386644ac"]]))}}}))}();

import{_ as e,d as a,i as s,h as t,j as o,aE as n,o as r,c as i,u as d,m as c,f as l,a as u,b as m,w as p,a8 as f,aL as y,a9 as h,bs as g,ag as v,cl as I,cm as j,cn as b}from"./index-2a73a8fe.js";import{_ as k}from"./PolicyInfo-892e4c95.js";import{u as P}from"./useOrder-215f9b35.js";import{p as x}from"./utils-9968c35e.js";import{g as C,m as _}from"./trial-8a95c20b.js";import{n as w}from"./nextStep-26750ee1.js";import{B as $,a as L}from"./constants-62d1c4af.js";import"./utils-520685fd.js";import"./infoCollection-1249e976.js";import"./trial-1c7cb1eb.js";import"./core-6281c81e.js";const S={class:"bank-info-wrap"},B={class:"footer-button"},N=a({name:"updateBankInfo"});var O=e(a({...N,setup(e){const a=s(),N=t(),{orderNo:O,isShare:V,tenantId:q,nextPageCode:G}=a.query,U=P(),D=o({schema:[],config:[],formData:[]}),E=o(!!V),M=o(),R=()=>{N.back()},T=()=>{((e,a)=>{const{holder:s,insured:t}=U.value;let o={name:s.name,gender:`${I[s.gender]}士`};"insured"===e&&(o={name:null==t?void 0:t[0].name,gender:`${I[null==t?void 0:t[0].gender]}士`}),j({shareType:0,title:`${b[a].title}`,desc:b[a].desc.replace("{name}",`${o.name}${o.gender},`),url:`${window.location.href}&objectType=${e}&isShare=1&nextPageCode=updateBankInfo`.replace("/updateBankInfo","/phoneVerify"),imageUrl:"https://aquarius-v100-test.oss-cn-hangzhou.aliyuncs.com/MyPicture/asdad.png"})})("holder","pay"),M.value&&M.value.validate(!1).then((e=>{e&&V&&w(U.value,((e,s)=>{s===y.JUMP_PAGE&&h(e.nextPageCode,a.query)}),a)}))};return n((()=>{(async()=>{let e={};const{code:a,data:s}=await C({orderNo:O,tenantId:q});"10000"===a&&(Object.assign(U.value,s,{extInfo:{...s.extInfo,buttonCode:$.SIGN,pageCode:L.SIGN}}),e=x(s.insuredList[0].productList)),_(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:s}=e,{payInfo:t}=g(s);D.value={...D.value,...t}}}))})()})),(e,a)=>{const s=v;return r(),i("div",S,[d(D).schema.length?(r(),c(k,{key:0,ref_key:"payInfoRef",ref:M,modelValue:d(U).tenantOrderPayInfoList,"onUpdate:modelValue":a[0]||(a[0]=e=>d(U).tenantOrderPayInfoList=e),schema:d(D).schema,"is-view":d(E)},null,8,["modelValue","schema","is-view"])):l("",!0),u("div",B,[m(s,{type:"primary",plain:"",onClick:R},{default:p((()=>[f("取消")])),_:1}),m(s,{type:"primary",onClick:T},{default:p((()=>[f("确认")])),_:1})])])}}}),[["__scopeId","data-v-31937151"]]);export{O as default};

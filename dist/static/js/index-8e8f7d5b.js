import{l as e,R as a}from"./index-5484d5f1.js";import{aA as l,d as u,r as i,K as o,aB as n,aC as t,Q as s,aD as r,i as d,ab as m,an as v,aw as p,aE as c,aF as g,aG as y,aH as V,aI as f,aJ as k,Z as b,aK as h,aL as D,aM as C,aN as x,aO as K,E as I,a0 as P,c as w,y as S,w as L,f as O,g as _,e as T,z as U,h as R,aP as M,ay as A,az as F,U as N,R as B,x as E,aQ as $}from"./index-0579f81d.js";import{b as j}from"./infoCollection-2a9b2257.js";const[z,J]=l("stepper"),q=(e,a)=>String(e)===String(a);const Y=K(u({name:z,props:{min:g(1),max:g(1/0),name:g(""),step:g(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:y,showMinus:y,showInput:y,longPress:y,allowEmpty:Boolean,modelValue:V,inputWidth:V,buttonSize:V,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:g(1),decimalLength:V},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:a}){const l=a=>{const{min:l,max:u,allowEmpty:i,decimalLength:o}=e;return i&&""===a||(a=""===(a=f(String(a),!e.integer))?0:+a,a=Number.isNaN(a)?+l:a,a=Math.max(Math.min(+u,a),+l),k(o)&&(a=a.toFixed(+o))),a};let u;const g=i(),y=i((()=>{var u;const i=null!=(u=e.modelValue)?u:e.defaultValue,o=l(i);return q(o,e.modelValue)||a("update:modelValue",o),o})()),V=o((()=>e.disabled||e.disableMinus||y.value<=+e.min)),K=o((()=>e.disabled||e.disablePlus||y.value>=+e.max)),I=o((()=>({width:n(e.inputWidth),height:n(e.buttonSize)}))),P=o((()=>t(e.buttonSize))),w=a=>{e.beforeChange?C(e.beforeChange,{args:[a],done(){y.value=a}}):y.value=a},S=()=>{if("plus"===u&&K.value||"minus"===u&&V.value)return void a("overlimit",u);const i="minus"===u?-e.step:+e.step,o=l(x(+y.value,i));w(o),a(u)},L=a=>{const l=a.target,{value:u}=l,{decimalLength:i}=e;let o=f(String(u),!e.integer);if(k(i)&&o.includes(".")){const e=o.split(".");o=`${e[0]}.${e[1].slice(0,+i)}`}e.beforeChange?l.value=String(y.value):q(u,o)||(l.value=o);const n=o===String(+o);w(n?+o:o)},O=l=>{var u;e.disableInput?null==(u=g.value)||u.blur():a("focus",l)},_=e=>{const u=e.target,i=l(u.value);u.value=String(i),y.value=i,b((()=>{a("blur",e),h()}))};let T,U;const R=()=>{U=setTimeout((()=>{S(),R()}),200)},M=a=>{e.longPress&&(clearTimeout(U),T&&D(a))},A=a=>{e.disableInput&&D(a)},F=a=>({onClick:e=>{D(e),u=a,S()},onTouchstartPassive:()=>{u=a,e.longPress&&(T=!1,clearTimeout(U),U=setTimeout((()=>{T=!0,S(),R()}),600))},onTouchend:M,onTouchcancel:M});return s((()=>[e.max,e.min,e.integer,e.decimalLength]),(()=>{const e=l(y.value);q(e,y.value)||(y.value=e)})),s((()=>e.modelValue),(e=>{q(e,y.value)||(y.value=l(e))})),s(y,(l=>{a("update:modelValue",l),a("change",l,{name:e.name})})),r((()=>e.modelValue)),()=>d("div",{role:"group",class:J([e.theme])},[m(d("button",p({type:"button",style:P.value,class:[J("minus",{disabled:V.value}),{[c]:!V.value}],"aria-disabled":V.value||void 0},F("minus")),null),[[v,e.showMinus]]),m(d("input",{ref:g,type:e.integer?"tel":"text",role:"spinbutton",class:J("input"),value:y.value,style:I.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":y.value,onBlur:_,onInput:L,onFocus:O,onMousedown:A},null),[[v,e.showInput]]),m(d("button",p({type:"button",style:P.value,class:[J("plus",{disabled:K.value}),{[c]:!K.value}],"aria-disabled":K.value||void 0},F("plus")),null),[[v,e.showPlus]])])}})),H={key:0},Q={class:"custom-field"},W={key:1,class:"flex-field"},G={class:"pro-radio-wrap"},Z={key:2},X={class:"pro-radio-wrap"},ee={class:"custom-field"},ae={key:1},le={key:3},ue={class:"custom-field"},ie={key:1},oe={class:"custom-field"},ne={key:0},te={key:1};var se=I(u({__name:"index",props:{originData:{default:()=>({})},modelValue:{default:()=>({})},defalutValue:{default:()=>({})}},emits:["update:modelValue","trialChange"],setup(e,{emit:a}){const l=e,u=i(l.originData),n=i({}),t=i(1),r=()=>2===u.value.saleMethod?{label:"保费",key:"premium"}:{label:"保额",key:"amount"},m=()=>{switch(`${u.value.displayUnit}`){case j.YUAN:return"元";case j.MONTH_SALARY:return"倍月薪";case j.MILLION:return"万元";case j.COPY:return"份"}return""},v=o((()=>2===u.value.saleMethod?{label:"保费",key:"premium"}:{label:"保额",key:"amount"})),p=(...e)=>{if(1===t.value){const e=n.value[v.value.key],a=l.originData.minStepValue,u=l.originData.maxStepValue,i=l.originData.stepValue;if(+e>=+u)n.value[v.value.key]=u;else if(+e<=+a)n.value[v.value.key]=a;else{const l=+e-+a,u=Math.floor(l/+i);l%+i!=0&&(n.value[v.value.key]=+a+u*+i)}}return!0},c=()=>{const{displayType:e,requireCopies:a}=u.value,l=r().key,i=!n.value.riskCode;1===e?t.value=1:3===e&&2===a?(t.value=2,u.value.displayValues.length>=1&&i&&!n.value[l]&&(n.value[l]=u.value.displayValues[0].code||u.value.displayValues[0].value)):3===e&&1===a?(t.value=3,u.value.minCopiesValue===u.value.maxCopiesValue&&i&&!n.value.copy&&(n.value.copy=u.value.minCopiesValue),u.value.displayValues.length>=1&&i&&!n.value[l]&&(n.value[l]=u.value.displayValues[0].code||u.value.displayValues[0].value)):2===e&&(t.value=4,u.value.minCopiesValue===u.value.maxCopiesValue&&i&&!n.value.copy&&(n.value.copy=u.value.minCopiesValue),i&&!n.value.amount&&(n.value.amount=u.value.copiesAmount))},g=o((()=>{if(u.value.displayValues){const e=r().key;return 1!==u.value.displayValues.length||n.value.riskCode||(n.value[e]=u.value.displayValues[0].code),u.value.displayValues.map((e=>({label:e.value,value:e.code})))}return[]})),y=()=>{};return P((()=>{c(),a("update:modelValue",n.value)})),s((()=>u),(e=>{c()}),{deep:!0}),s((()=>l.defalutValue),(e=>{(null==e?void 0:e.riskCode)&&console.log("-----baoebaofei ",n.value),(null==e?void 0:e.riskCode)&&Object.keys(n.value).forEach((a=>{n.value[a]=e[a]||n.value[a]}))}),{deep:!0,immediate:!0}),s((()=>n.value),(e=>{(()=>{if(1===t.value){const e=n.value[v.value.key],a=l.originData.minStepValue,u=l.originData.maxStepValue,i=l.originData.stepValue;if(+e>+u)return!1;if(+e<+a)return!1;if((+e-+a)%+i!=0)return!1}return!0})()&&(a("update:modelValue",e),a("trialChange",e))}),{deep:!0,immediate:!0}),s(l.modelValue,(e=>{console.log("---------modelValueChange = ",e)}),{deep:!0,immediate:!0}),(a,l)=>{const u=Y,i=M,o=A,s=F;return 1===t.value?(w(),S("div",H,[d(i,{label:`基本${_(v).label}`,name:_(v).key,class:"risk-select-field"},{input:L((()=>[O("div",Q,[d(u,{modelValue:n.value[_(v).key],"onUpdate:modelValue":l[0]||(l[0]=e=>n.value[_(v).key]=e),"input-width":"80px","default-value":e.originData.minStepValue,min:e.originData.minStepValue,step:e.originData.stepValue,max:e.originData.maxStepValue,onBlur:p},null,8,["modelValue","default-value","min","step","max"])])])),_:1},8,["label","name"])])):2===t.value?(w(),S("div",W,[d(s,{modelValue:n.value[_(v).key],"onUpdate:modelValue":l[2]||(l[2]=e=>n.value[_(v).key]=e),label:`基本${_(v).label}`,name:_(v).key,class:"risk-select-field"},{input:L((()=>[O("div",G,[d(o,{modelValue:n.value[_(v).key],"onUpdate:modelValue":l[1]||(l[1]=e=>n.value[_(v).key]=e),options:_(g),onclick:y},null,8,["modelValue","options"])])])),_:1},8,["modelValue","label","name"])])):3===t.value?(w(),S("div",Z,[d(s,{modelValue:n.value[_(v).key],"onUpdate:modelValue":l[4]||(l[4]=e=>n.value[_(v).key]=e),label:`基本${_(v).label}`,name:_(v).key,class:"risk-select-field"},{input:L((()=>[O("div",X,[d(o,{modelValue:n.value[_(v).key],"onUpdate:modelValue":l[3]||(l[3]=e=>n.value[_(v).key]=e),options:_(g),onclick:y},null,8,["modelValue","options"])])])),_:1},8,["modelValue","label","name"]),O("div",null,[d(i,{modelValue:n.value.copy,"onUpdate:modelValue":l[6]||(l[6]=e=>n.value.copy=e),label:"份数",name:"copy",class:"risk-select-field"},{input:L((()=>[O("div",ee,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(w(),T(u,{key:0,modelValue:n.value.copy,"onUpdate:modelValue":l[5]||(l[5]=e=>n.value.copy=e),"input-width":"80px","default-value":e.originData.minCopiesValue,min:e.originData.minCopiesValue||1,step:1,max:e.originData.maxCopiesValue},null,8,["modelValue","default-value","min","max"])):(w(),S("span",ae,U(e.originData.minCopiesValue),1))])])),_:1},8,["modelValue"])])])):4===t.value?(w(),S("div",le,[d(i,{modelValue:n.value.copy,"onUpdate:modelValue":l[8]||(l[8]=e=>n.value.copy=e),label:"份数",name:"copy",class:"risk-select-field"},{input:L((()=>[O("div",ue,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(w(),T(u,{key:0,modelValue:n.value.copy,"onUpdate:modelValue":l[7]||(l[7]=e=>n.value.copy=e),"input-width":"64px","default-value":e.originData.minCopiesValue,min:e.originData.minCopiesValue||1,step:1,max:e.originData.maxCopiesValue},null,8,["modelValue","default-value","min","max"])):(w(),S("span",ie,U(e.originData.minCopiesValue),1))])])),_:1},8,["modelValue"]),d(i,{label:_(v).label,name:"copyAmount",class:"risk-select-field"},{input:L((()=>[O("div",oe,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(w(),S("span",ne,U(+e.originData.copiesAmount*+n.value.copy+m()),1)):(w(),S("span",te,U(+e.originData.minCopiesValue*+e.originData.copiesAmount+m()),1))])])),_:1},8,["label"])])):R("",!0)}}}),[["__scopeId","data-v-02bf28fb"]]);const re=[{name:"年金领取期间",type:"checkbox",configKey:["annuityDrawValueList"],valueKey:"annuityDrawDate"},{name:"领取频率",type:"checkbox",configKey:["annuityDrawFrequencyList"],valueKey:"annuityDrawType"},{name:"交费方式",type:"checkbox",configKey:["paymentFrequencyList"],valueKey:"paymentFrequency",ruleKey:"paymentTypeRule"},{name:"交费期间",type:"checkbox",configKey:["paymentPeriodValueList"],valueKey:"chargePeriod",ruleKey:"paymentPeriodRule",ruleValueKey:"chargePeriod"},{name:"保障期间",type:"checkbox",configKey:["insurancePeriodValueList"],valueKey:"coveragePeriod",ruleKey:"insurancePeriodRule",ruleValueKey:"chargePeriod"}],de={class:"pro-radio-wrap"};var me=I(u({__name:"index",props:{originData:{default:()=>({})},modelValue:{default:()=>({})},riskInfo:{default:()=>({})},defaultValue:{default:()=>({})}},emits:["trialChange","inputChange"],setup(a,{emit:l}){const u=a,o=i(u.originData),n=i(u.modelValue);i(1);const t=a=>{const l=e.exports.get(u.originData,a),i=e.exports.get(u.originData,a);return l.map((e=>{const a=i?i.find((a=>a.code===e.code)):null;return{label:e.value,value:e.code,disabled:!(!a||null===a.useFlag||void 0===a.useFlag)&&1!==a.useFlag}}))},r=()=>{re.forEach((a=>{const l=e.exports.get(u.originData,a.configKey);"checkbox"===a.type&&l&&l.length>0&&!n.value.riskCode&&(n.value[a.valueKey]=l[0].code)}))};return P((()=>{r()})),s((()=>u.defaultValue),(e=>{(null==e?void 0:e.riskCode)&&(n.value=e)}),{deep:!0,immediate:!0}),s((()=>o.value),(e=>{r()}),{deep:!0,immediate:!0}),s((()=>JSON.stringify(n.value)),((e,a)=>{const i=e&&JSON.parse(e)||{},o=a&&JSON.parse(a)||{};let n=null;re.forEach((e=>{i[e.valueKey]&&o[e.valueKey]&&i[e.valueKey]!==o[e.valueKey]&&(n||(n={key:e.valueKey,oldValue:o[e.valueKey],newValue:i[e.valueKey],riskCode:u.riskInfo.riskCode}))})),e&&l("trialChange",JSON.parse(e),n)}),{deep:!0,immediate:!0}),(l,u)=>{const i=A,o=F;return w(!0),S(B,null,N(_(re),(l=>(w(),S(B,null,[_(e.exports.get)(a.originData,l.configKey)&&(1===a.riskInfo.mainRiskFlag||l.ruleKey&&2===_(e.exports.get)(a.originData,l.ruleKey)||!l.ruleKey)?(w(),S("div",{key:a.riskInfo.riskCode+"_"+l.name},["checkbox"===l.type?(w(),T(o,{key:0,modelValue:n.value[l.valueKey],"onUpdate:modelValue":e=>n.value[l.valueKey]=e,label:l.name,name:l.valueKey,class:"risk-select-field"},{input:L((()=>[O("div",de,[d(i,{modelValue:n.value[l.valueKey],"onUpdate:modelValue":[e=>n.value[l.valueKey]=e,e=>((e,a)=>{console.log("-------change",e,a)})(e,l.valueKey)],options:t(l.configKey)},null,8,["modelValue","onUpdate:modelValue","options"])])])),_:2},1032,["modelValue","onUpdate:modelValue","label","name"])):R("",!0)])):R("",!0)],64)))),256)}}}),[["__scopeId","data-v-18462dcc"]]);function ve(e){return Object.keys(e)}var pe=I(u({__name:"index",props:{originData:{default:()=>({})},modelValue:{default:()=>({})},defaultValue:{default:()=>({})}},emits:["trialChange"],setup(l,{expose:u,emit:o}){const n=l,t=E({personalInfo:{},basicsAmount:"",basicsPremium:"",defaultValues:n.defaultValue,changeData:null}),r=i(null),m=i({}),v=i({});$("premium"),v.value=$("enumList")||{},console.log("-------origin data",n.originData),P((()=>{}));const p=e.exports.debounce((e=>{n.originData.mainRiskFlag,m.value.riskCategory=n.originData.riskCategory,m.value.riskCode=n.originData.riskCode,m.value.riskId=n.originData.riskId,m.value.riskType=n.originData.riskType,m.value.riskName=n.originData.riskName,m.value.riskType=n.originData.riskType,m.value.mainRiskCode=n.originData.mainRiskCode,m.value.mainRiskId=n.originData.mainRiskId,console.log("---trial value = ",m.value,m.value.liabilityVOList),e?o("trialChange",m.value,e):o("trialChange",m.value)}),300),c=(e,a)=>{ve(e).forEach((a=>{m.value[a]=e[a]})),console.log("-handleProductKeysChange",m.value.liabilityVOList),p(a)},g=e=>{var a,l;1==+(null==(l=null==(a=n.originData)?void 0:a.productRiskInsureLimitVO)?void 0:l.amountPremiumConfigVO.saleMethod)?t.basicsAmount=null==e?void 0:e.amount:t.basicsAmount=null==e?void 0:e.premium,ve(e).forEach((a=>{m.value[a]=e[a]})),console.log("-handleBaoeBaofeiChange",e),p()},y=e=>{m.value.liabilityVOList=e,console.log("---trial change lia = ",m.value.liabilityVOList),p()};return s((()=>n.defaultValue),(e=>{e&&(t.defaultValues=e,m.value={...e})}),{deep:!0,immediate:!0}),s((()=>m.value),(e=>{console.log("----=-=-=-=-=-=-=-=-=vvvv = ",e.liabilityVOList)}),{deep:!0,immediate:!0}),u({validate:async()=>{var e;await(null==(e=r.value)?void 0:e.validate())}}),(e,u)=>{var i,o,n,s,r,v;return 1===(null==(i=l.originData)?void 0:i.factorDisPlayFlag)?(w(),S(B,{key:0},[d(_(se),{"v-model":_(m),"origin-data":null==(n=null==(o=l.originData)?void 0:o.productRiskInsureLimitVO)?void 0:n.amountPremiumConfigVO,"defalut-value":_(t).defaultValues,onTrialChange:g},null,8,["v-model","origin-data","defalut-value"]),d(_(me),{"v-model":_(m),"origin-data":l.originData.productRiskInsureLimitVO,"risk-info":l.originData,"default-value":_(t).defaultValues,onTrialChange:c},null,8,["v-model","origin-data","risk-info","default-value"]),d(_(a),{"data-source-folmulate":_(m),"data-source":l.originData,params:{amountUnit:null==(r=null==(s=l.originData)?void 0:s.productRiskInsureLimitVO)?void 0:r.amountPremiumConfigVO.displayUnit,basicsAmount:_(t).basicsAmount,basicsPremium:_(t).basicsPremium,riskId:null==(v=l.originData)?void 0:v.riskId},"default-value":_(t).defaultValues,onTrialChange:y},null,8,["data-source-folmulate","data-source","params","default-value"])],64)):R("",!0)}}}),[["__scopeId","data-v-1f6dc5d6"]]);export{pe as I,re as P,Y as S};

!function(){var e=document.createElement("style");e.innerHTML=".com-product-list-wrapper .content[data-v-cd47605e]{padding:0 var(--zaui-card-border, .4rem)}.com-product-list-wrapper .premium-total[data-v-cd47605e]{padding:0 var(--zaui-card-border, .4rem);font-size:.34667rem;font-weight:400;color:#333;margin:.26667rem 0 .4rem}.com-product-list-wrapper .premium-total .premium[data-v-cd47605e]{color:var(--zaui-price, #ff5840);font-weight:600}.com-product-list-wrapper .risk-item-wrapper[data-v-cd47605e]{margin:var(--zaui-card-border, .4rem);background-color:#f6f6fa;border-radius:.26667rem}.com-product-list-wrapper .risk-item-wrapper[data-v-cd47605e] .card-title .van-cell{background-color:#f6f6fa;padding-bottom:0;border-radius:.26667rem}.com-product-list-wrapper .risk-item-wrapper[data-v-cd47605e] .card-title:after{display:none}.com-product-list-wrapper .risk-item-wrapper .premium[data-v-cd47605e]{color:var(--zaui-price, #ff5840);font-weight:600}.com-product-list-wrapper .risk-item-wrapper .risk-premium[data-v-cd47605e]{color:#333;font-weight:400;font-size:.34667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor[data-v-cd47605e]{display:flex;justify-content:space-between;margin-bottom:.26667rem;border-bottom:1px dashed #EEEFF4}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor[data-v-cd47605e]{display:flex;flex-direction:column;align-items:center;padding:.37333rem 0 .26667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor .factor-value[data-v-cd47605e]{width:100%;text-align:center;font-size:.37333rem;font-family:Arial-BoldMT,Arial,self;font-weight:400;color:#393d46;line-height:.42667rem;margin-bottom:.10667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor .factor-name[data-v-cd47605e]{width:100%;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC,serif;font-weight:400;color:#99a9c0;line-height:.44rem}.com-product-list-wrapper .risk-item-wrapper .operate-bar[data-v-cd47605e]{display:flex;align-content:center;justify-content:flex-end;padding-bottom:.26667rem}.com-product-list-wrapper .risk-item-wrapper .operate-bar .border[data-v-cd47605e]{border:.02667rem solid #e6e6eb}.com-product-list-wrapper .risk-item-wrapper .operate-bar[data-v-cd47605e] .com-check-btn{margin-left:.21333rem;background-color:#fff}.com-product-list-wrapper .risk-item-wrapper .operate-bar .btn-rider-risk[data-v-cd47605e]{display:flex;align-items:center}.com-product-list-wrapper .risk-item-wrapper .operate-bar .btn-rider-risk .btn-plus[data-v-cd47605e]{font-size:.48rem;margin:0 .13333rem .13333rem}.page-create-wrapper[data-v-4f24fb6d]{background-color:var(--zaui-global-bg, #f2f5fc)}.page-create-wrapper .border-radius[data-v-4f24fb6d]{border-radius:var(--zaui-border-radius-card, .26667rem)}.page-create-wrapper .border-radius .plan-name[data-v-4f24fb6d]{font-weight:600}.page-create-wrapper[data-v-4f24fb6d] .com-card-wrap{border-radius:var(--zaui-border-radius-card, .26667rem)}.page-create-wrapper[data-v-4f24fb6d] .com-card-wrap .body{padding:0}.page-create-wrapper .container[data-v-4f24fb6d]{padding:.4rem .4rem 2.4rem}.page-create-wrapper .container .operate-bar[data-v-4f24fb6d]{width:100%;justify-content:center;display:flex;margin-top:.26667rem}.page-create-wrapper .container .operate-bar[data-v-4f24fb6d] .com-check-btn{height:.90667rem;width:3.2rem}.page-create-wrapper .footer-bar[data-v-4f24fb6d]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:var(--zaui-card-border, .4rem);display:flex;justify-content:space-between;align-items:center;border-top:1px solid #EEEFF4}.page-create-wrapper .footer-bar .trial-result[data-v-4f24fb6d]{width:5.86667rem;font-size:.45333rem;font-weight:400}.page-create-wrapper .footer-bar .trial-result .result-num[data-v-4f24fb6d]{margin-left:.21333rem;color:var(--zaui-price, #ff5840);font-weight:600}.page-create-wrapper .footer-bar .trial-operate button[data-v-4f24fb6d]{width:3.73333rem}\n",document.head.appendChild(e),System.register(["./index-legacy-cf3db658.js","./index-legacy-c160292c.js","./createProposal-legacy-546eb3d5.js","./index-legacy-fb6e8b18.js","./useDicData-legacy-ad129e1e.js","./pdfh5-legacy-9f98dc45.js","./trial-legacy-ad007547.js","./trial-legacy-2095679c.js"],(function(e){"use strict";var r,t,a,o,d,i,s,l,p,c,n,u,m,f,k,v,g,b,h,I,w,L,y,P,R,V,_,C,x,j,D,z,O,T,E;return{setters:[function(e){r=e._,t=e.d,a=e.G,o=e.r,d=e.x,i=e.aa,s=e.b,l=e.c,p=e.h,c=e.F,n=e.i,u=e.j,m=e.f,f=e.n,k=e.t,v=e.g,g=e.aw,b=e.e,h=e.w,I=e.k,w=e.K,L=e.L,y=e.u,P=e.a,R=e.al,V=e.ar,_=e.X,C=e.a6},function(e){x=e.u,j=e.P},function(e){D=e.q,z=e.a,O=e.b},function(e){T=e.R},function(e){E=e.u},function(){},function(){},function(){}],execute:function(){const F=e=>(w("data-v-cd47605e"),e=e(),L(),e),S={class:"com-product-list-wrapper"},N={class:"risk-item-wrapper"},U={class:"content"},$={class:"risk-premium"},q={class:"premium"},A={class:"risk-factor"},B={class:"factor"},H={class:"factor-value"},K=F((()=>u("span",{class:"factor-name"}," 保额(元) ",-1))),M={class:"factor"},G={class:"factor-value"},W=F((()=>u("span",{class:"factor-name"}," 保障期间 ",-1))),X={class:"factor"},Y={class:"factor-value"},J=F((()=>u("span",{class:"factor-name"}," 缴费期间 ",-1))),Q={class:"operate-bar"},Z=F((()=>u("span",{class:"btn-plus"},"+",-1))),ee={key:0,class:"premium-total"},re={class:"premium"};var te=r(t({__name:"index",props:{productRiskList:{default:()=>[]},productInfo:{default:()=>({})},productData:{default:()=>({})},pickProductPremium:{type:Function,default:()=>{}},productNum:{default:0}},emits:["deleteRisk","updateRisk","addRiderRisk"],setup(e,{emit:r}){const t=e,[w,L]=a(),y=o({checkedList:[],disabledList:[],riderRiskList:[],mainRiskData:{},totalPremium:0,currentRiskRecord:{},productRiskList:[]}),P=E("RISK_PAYMENT_PERIOD"),R=E("RISK_INSURANCE_PERIOD"),V=d((()=>t.productData?.productRiskVoList?.[0].riskDetailVOList.filter((e=>1===e.collocationType))||[])),_=d((()=>{const e=t.productRiskList.map((e=>e.riskId)),r=(t.productData?.productRiskVoList?.[0].riskDetailVOList||[]).filter((r=>e.includes(r.id)&&1===r.collocationType));return V.value.length-r.length})),C=d((()=>e=>{const r=t.productData?.productRiskVoList?.[0].riskDetailVOList.find((r=>r.id!==e))||{};let a=!1;return a=!!t.productNum||2===r.riskType&&1===r.collocationType,a})),x=d((()=>t.productData?.productRiskVoList?.[0].riskDetailVOList.find((e=>1===e.riskType))||{})),j=d((()=>x.value.collocationVOList||[])),D=(e,a)=>{const o=e.map((e=>e.id)).filter((e=>!y.value.disabledList.includes(e)));r("addRiderRisk",o,t.productInfo)};return i((()=>t.productInfo),(e=>{let r=0;(e.proposalProductRiskList||[]).forEach((e=>{r+=e.premium})),t.pickProductPremium?.({[`${e.productId}`]:r}),y.value.totalPremium=r}),{deep:!0,immediate:!0}),i((()=>t.productRiskList),(e=>{const r=[],t=[],a=[];(e||[]).forEach((e=>{1===e.riskType?r.unshift(e):(t.push(e.riskId),a.push(e.riskId),r.push(e))})),y.value.disabledList=t,y.value.checkedList=a,y.value.productRiskList=r}),{deep:!0,immediate:!0}),(e,a)=>{const o=s("ProTitle"),d=s("ProCheckButton");return l(),p("div",S,[(l(!0),p(c,null,n(v(y).productRiskList,(e=>(l(),p("div",{key:e.riskId},[u("div",N,[m(o,{"risk-type":e.riskType,title:e.riskName,class:"no-border"},null,8,["risk-type","title"]),u("div",U,[u("div",$,[f(" 保费:"),u("span",q,"￥"+k(e.premium?.toLocaleString()),1)]),u("div",A,[u("div",B,[u("span",H,k(e.amount?.toLocaleString()),1),K]),u("div",M,[u("span",G,k(v(g)(v(R),e.coveragePeriod)),1),W]),u("div",X,[u("span",Y,k(v(g)(v(P),e.chargePeriod)),1),J])]),u("div",Q,[v(C)(e.riskId)?(l(),b(d,{key:0,round:32,class:"border",onClick:a=>{r("deleteRisk",e,t.productInfo)}},{default:h((()=>[f("删除")])),_:2},1032,["onClick"])):I("",!0),v(_)?(l(),b(d,{key:1,activated:"",round:32,class:"btn-rider-risk",onClick:r=>{return t=e,L(!0),void(y.value.currentRiskRecord=t);var t}},{default:h((()=>[Z,f(" 附加险")])),_:2},1032,["onClick"])):I("",!0),m(d,{activated:"",round:32,onClick:a=>{r("updateRisk",e,t.productInfo)}},{default:h((()=>[f("修改")])),_:2},1032,["onClick"])])])])])))),128)),v(y).productRiskList.length>1?(l(),p("div",ee,[f(" 保费: "),u("span",re,"￥"+k(v(y).totalPremium.toLocaleString()),1)])):I("",!0),v(w)?(l(),b(T,{key:1,modelValue:v(y).checkedList,"onUpdate:modelValue":a[0]||(a[0]=e=>v(y).checkedList=e),show:v(w),disabled:v(y).disabledList,"risk-list":v(V),"collocation-list":v(j),onFinished:D,onClose:a[1]||(a[1]=e=>v(L)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):I("",!0)])}}}),[["__scopeId","data-v-cd47605e"]]);const ae={class:"container"},oe=(e=>(w("data-v-4f24fb6d"),e=e(),L(),e))((()=>u("span",{class:"plan-name"},"计划书名称",-1))),de={class:"operate-bar"},ie={class:"footer-bar"},se={class:"trial-result"},le={class:"result-num"},pe={class:"trial-operate"},ce=t({__name:"index",setup(e){const r=[{name:"保存修改"},{name:"另存为新计划书"}],[t,g]=a(),[w,L]=a(),T=o({proposalHolder:{},proposalInsuredList:[{name:"",gender:"",birthday:"",proposalInsuredProductList:[]}],proposalName:"",totalPremium:0,relationUserType:2}),E=y(),F=P(),S=x(),{id:N,type:U="add",isCreateProposal:$}=F.query,q=o({productId:0,productCollection:{},productInfo:{},productPremium:{},riderRisk:{},type:"add",currentRisk:[]}),A=o();o({}),o([]),d((()=>({min:"",max:""})));const B=()=>{A.value.validate().then((()=>{O(T.value).then((({code:e,data:r})=>{"10000"===e&&(S.$reset(),S.proposalId=r,E.push({path:"/compositionProposal",query:{id:r}}))}))}))},H=()=>{!N&&S.proposalId?L(!0):B()},K=(e,r)=>{r&&(T.value.id=null),B()},M=(e,r,t)=>r?/^.{1,20}$/.test(r)?"":`${e}不能超过20个字符`:"",G=(e={})=>{Object.assign(q.value.productPremium,e),T.value.totalPremium=Object.values(q.value.productPremium).reduce(((e,r)=>e+r),0)},W=(e,r)=>{const t=r;C.confirm({message:"确认删除该险种？"}).then((()=>{1===e.riskType?(T.value.proposalInsuredList[0].proposalInsuredProductList=T.value.proposalInsuredList[0].proposalInsuredProductList.filter((e=>e.productId!==t.productId)),G({[t.productId]:0})):t.proposalProductRiskList=t.proposalProductRiskList.filter((r=>r.riskId!==e.riskId))}))},X=(e,r)=>{q.value.productId=r.productId,q.value.productInfo=r,q.value.type="edit",q.value.currentRisk=[e.riskId],g(!0)},Y=(e,r)=>{q.value.productId=r.productId,q.value.productInfo=r,q.value.type="addRiderRisk",q.value.currentRisk=e,g(!0)},J=e=>{T.value.proposalInsuredList[0].proposalInsuredProductList=T.value.proposalInsuredList[0].proposalInsuredProductList.map((r=>{let t=r;return r.productId===e.proposalInsuredList[0].proposalInsuredProductList[0].productId&&(t={...e.proposalInsuredList[0].proposalInsuredProductList[0]}),t})),g(!1)},Q=()=>{S.setProposalInfo(T.value),S.setTrialData([]),S.setExcludeProduct(Object.keys(q.value.productCollection)),E.push({path:"/proposalList",query:{isCreateProposal:"1",...F.query}})},Z=()=>{g(!1)};return R((()=>{const e=S.$state.trialData,r=S.$state.proposalInfo,t=S.$state.proposalId;N&&!$||t?(((e={})=>{D(e).then((({code:e,data:r})=>{"10000"===e&&Object.assign(T.value,r)}))})({id:N||t}),S.$reset()):!Object.keys(r).length&&e.length?Object.assign(T.value,e[0]):Object.keys(r).length&&e.length?(r.proposalInsuredList[0].proposalInsuredProductList.push(...e[0].proposalInsuredList[0].proposalInsuredProductList),T.value=r):Object.keys(r).length&&!e.length&&(T.value=r),S.setTrialData([])})),i((()=>T.value.proposalInsuredList[0].proposalInsuredProductList?.length),(()=>{const e=T.value.proposalInsuredList[0].proposalInsuredProductList.map((e=>({productId:e.productId,source:2})));z({voList:e}).then((({code:e,data:r})=>{"10000"===e&&(q.value.productCollection=r)})).finally((()=>{}))})),(e,a)=>{const o=s("VanField"),d=s("ProCard"),i=s("ProDatePicker"),g=s("ProRadioButton"),y=s("VanForm"),P=s("ProCheckButton"),R=s("VanButton"),C=s("VanActionSheet"),x=s("ProPageWrap");return l(),b(x,{class:"page-create-wrapper"},{default:h((()=>[u("div",ae,[m(y,{ref_key:"formRef",ref:A,"input-align":"right","error-message-align":"right"},{default:h((()=>[m(d,{"show-line":!1},{default:h((()=>[m(o,{modelValue:v(T).proposalName,"onUpdate:modelValue":a[0]||(a[0]=e=>v(T).proposalName=e),class:"border-radius",name:"proposalName",placeholder:"请输入计划书名称",rules:[{validator:(...e)=>M("计划书名称",...e)}]},{label:h((()=>[oe])),_:1},8,["modelValue","rules"])])),_:1}),m(d,{title:"被保人信息"},{default:h((()=>[m(o,{modelValue:v(T).proposalInsuredList[0].name,"onUpdate:modelValue":a[1]||(a[1]=e=>v(T).proposalInsuredList[0].name=e),name:"name",label:"姓名",rules:[{validator:(...e)=>M("姓名",...e)}],placeholder:"请输入（选填）"},null,8,["modelValue","rules"]),m(i,{modelValue:v(T).proposalInsuredList[0].birthday,"onUpdate:modelValue":a[2]||(a[2]=e=>v(T).proposalInsuredList[0].birthday=e),name:"birthday",label:"出生日期",type:"date","is-link":"",readonly:"",placeholder:"请选择",rules:[{required:!0,message:"请选择"}]},null,8,["modelValue"]),m(o,{modelValue:v(T).proposalInsuredList[0].gender,"onUpdate:modelValue":a[4]||(a[4]=e=>v(T).proposalInsuredList[0].gender=e),name:"gender",label:"性别",class:"border-radius",rules:[{required:!0,message:"请选择"}]},{input:h((()=>[m(g,{modelValue:v(T).proposalInsuredList[0].gender,"onUpdate:modelValue":a[3]||(a[3]=e=>v(T).proposalInsuredList[0].gender=e),options:v(V)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])])),_:1})])),_:1},512),(l(!0),p(c,null,n(v(T).proposalInsuredList[0].proposalInsuredProductList||[],(e=>(l(),b(d,{key:e.productId,"show-line":!1},{default:h((()=>[m(te,{"product-risk-list":e.proposalProductRiskList,"product-info":e,"product-num":v(T).proposalInsuredList[0]?.proposalInsuredProductList?.length-1,"product-data":v(q).productCollection[e.productId],"pick-product-premium":G,onAddRiderRisk:Y,onUpdateRisk:X,onDeleteRisk:W},null,8,["product-risk-list","product-info","product-num","product-data"])])),_:2},1024)))),128)),u("div",de,[m(P,{activated:"",round:34,onClick:Q},{default:h((()=>[f("添加主险")])),_:1})])]),u("div",ie,[u("span",se,[f("总保费"),u("span",le,"￥"+k(v(T).totalPremium.toLocaleString()),1)]),u("div",pe,[m(R,{type:"primary",onClick:H},{default:h((()=>[f("保存并预览")])),_:1})])]),v(t)?(l(),b(j,{key:0,"is-show":v(t),type:v(q).type,"rider-risk":v(q).riderRisk?.[v(q).productId]||[],"product-data":v(q).productCollection[v(q).productId],"form-info":v(q).productInfo,holder:v(T).proposalHolder,insured:v(T).proposalInsuredList[0],"current-risk":v(q).currentRisk,onClose:Z,onFinished:J},null,8,["is-show","type","rider-risk","product-data","form-info","holder","insured","current-risk"])):I("",!0),m(C,{show:v(w),"onUpdate:show":a[5]||(a[5]=e=>_(w)?w.value=e:null),actions:r,"cancel-text":"取消","close-on-click-action":"",onCancel:a[6]||(a[6]=e=>v(L)(!1)),onSelect:K},null,8,["show"])])),_:1})}}});e("default",r(ce,[["__scopeId","data-v-4f24fb6d"]]))}}}))}();

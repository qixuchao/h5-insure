import{d as e,a6 as a,K as t,c as l,y as s,i as n,w as r,R as o,U as i,g as d,e as c,j as u,z as p,a9 as v,A as m,h as f,f as h,ay as g,az as y,ck as A,W as b,X as k,cb as x,a as I,u as O,r as C,x as L,Q as _,Z as T,Y as w,o as P,M as E,C as D,a0 as R,a7 as S,a1 as j,T as N,D as V,$ as F,a3 as H,P as B}from"./index-ba4bbbcf.js";import{i as U,u as q,p as M,c as z}from"./trial-01d023fd.js";import{a as G,q as Q}from"./product-20b4161b.js";import{n as W}from"./nextStep-445c5d4a.js";import{I as Y,c as Z,O as $,d as J,S as K}from"./infoCollection-2b56e459.js";import{u as X}from"./useAddressList-77d11683.js";import{r as ee,v as ae,g as te,t as le}from"./utils-ba932d26.js";import{_ as se}from"./index-cf12b13e.js";import{G as ne,_ as re}from"./index-515bcace.js";import{P as oe}from"./index-7b482cb8.js";import{c as ie}from"./phoneVerify-bf6e4d88.js";import{u as de}from"./useOrder-ad292b64.js";import{f as ce,_ as ue}from"./utils-e094ae25.js";import{u as pe}from"./useAttachment-45df8bfb.js";import{t as ve,i as me}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-18d42780.js";/* empty css              */import"./bankCard-04118a69.js";import{P as fe}from"./index-34bc5535.js";import"./pdfh5-008ca364.js";import"./core-d42781b9.js";import"./constant-c3f28a3b.js";import"./trial-83f98fd5.js";import"./index-beb9cf24.js";import"./_initCloneObject-0663309f.js";import"./isObjectLike-a9798079.js";import"./debounce-eed12388.js";import"./index-fd958b50.js";const he={class:"refueling-package-com"},ge=h("div",{class:"title"},"åŠ æ²¹åŒ…",-1),ye=e({name:"package"}),Ae=e({...ye,props:{packageProductList:{default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{default:3}},setup(e){const h=e,[b,k]=a(!1),x=t((()=>h.packageProductList.length>h.count&&(!!h.isShowClose||!b.value))),I=()=>{k()},O=t((()=>h.packageProductList.length<=h.count||b.value?h.packageProductList:h.packageProductList.slice(0,h.count)));return(e,a)=>{const t=g,h=y,k=A;return l(),s("div",he,[ge,n(k,{ref:"formRef"},{default:r((()=>[(l(!0),s(o,null,i(d(O),((e,a)=>(l(),c(h,{key:`${e.value}_${a}`,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,label:e.packageName,required:"",placeholder:"è¯·é€‰æ‹©"},{input:r((()=>[n(t,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,options:d(Y),disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","options","disabled"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])))),128)),d(x)?(l(),s("div",{key:0,class:"show-more",onClick:I},[u(p(d(b)?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),n(v,{name:"down",class:m(["icon",{showMore:d(b)}])},null,8,["class"])])):f("",!0)])),_:1},512)])}}});const be={key:0},ke=[h("div",{class:"__skeleton_short_content__"},[h("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[h("div",{class:"page-internet-product-detail"},[h("div",{class:"info"},[h("div",{class:"van-image banner",style:{width:"100%",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[h("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1676527379&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=tkscLe6oOZYjnRIA%2B7AiMS3bOs0%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),h("div")]),h("div",{class:"guarantee-list"},[h("div",{class:"header"},[h("span",null,[h("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"ä¿éšœè®¡åˆ’")]),h("span",null,[h("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"æŸ¥çœ‹è¯¦æƒ…")])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"ä¸€èˆ¬åŒ»ç–—ä¿é™©é‡‘")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜300ä¸‡")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"é‡å¤§ç–¾ç—…åŒ»ç–—ä¿é™©é‡‘")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜600ä¸‡")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æ¶æ€§è‚¿ç˜¤è´¨å­é‡ç¦»å­åŒ»ç–—")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜600ä¸‡")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æ¶æ€§è‚¿ç˜¤é™¢å¤–ç‰¹å®šè¯å“è´¹ç”¨åŒ»ç–—")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜600ä¸‡")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æ¶æ€§è‚¿ç˜¤ç‰¹å®šå™¨æ¢°è€—æè´¹ç”¨åŒ»ç–—è´£ä»» ï¼ˆé€‚ç”¨äºå¥³æ€§è¢«ä¿é™©äººï¼‰")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"æœ€é«˜100ä¸‡")])])]),h("div",{class:"show-more"},[h("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"æŸ¥çœ‹æ›´å¤š "),h("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[h("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),h("div",{class:"feerate-view sk-border"},[h("span",null,[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00å…ƒ/å¹´èµ·")])])]),h("div",{class:"com-divider"}),h("div",{class:"tabs",sticky:"",scrollspy:""},[h("div",null,[h("div",{class:"van-sticky"},[h("div",{class:"van-tabs"},[h("div",{id:"tab-list",class:"tab-list"},[h("a",{class:"tab-title active",title:"äº§å“äº®ç‚¹"},[h("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"äº§å“äº®ç‚¹")]),h("a",{class:"tab-title",title:"ç†èµ”è¯´æ˜"},[h("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"ç†èµ”è¯´æ˜")]),h("a",{class:"tab-title",title:"æˆ‘è¦æŠ•ä¿"},[h("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"æˆ‘è¦æŠ•ä¿")])])])])]),h("div",{class:"tab-content"},[h("div",{id:"tab1"},[h("div",{class:"spec"},[h("div",{class:"van-image detail-img",style:{width:"100%"}},[h("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)],xe=["theme-vars"],Ie={class:"info"},Oe={class:"custom-page-form"},Ce=h("div",{class:"form-title"},"è¯·å¡«å†™æŠ•ä¿ä¿¡æ¯",-1),Le=h("div",{id:"xinaoDialog"},null,-1),_e=e({name:"InsuranceShort"}),Te=e({..._e,setup(e){const a=b((()=>k((()=>import("./index-012e5b58.js")),["static/js/index-012e5b58.js","static/css/index-fa4edf2a.css","static/js/index-ba4bbbcf.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js","static/js/index-beb9cf24.js","static/css/index-827a8544.css","static/js/utils-ba932d26.js","static/js/infoCollection-2b56e459.js","static/js/trial-83f98fd5.js"]))),p=b((()=>k((()=>import("./index-3a78c690.js")),["static/js/index-3a78c690.js","static/css/index-c1e75aab.css","static/js/index-ba4bbbcf.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js"]))),v=b((()=>k((()=>import("./index-136ad936.js")),["static/js/index-136ad936.js","static/css/index-26ed4d65.css","static/js/index-ba4bbbcf.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js","static/js/infoCollection-2b56e459.js","static/js/trial-83f98fd5.js"]))),m=b((()=>k((()=>import("./index-ad6dadef.js")),["static/js/index-ad6dadef.js","static/css/index-eabeb59f.css","static/js/index-ba4bbbcf.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js"]))),g=b((()=>k((()=>import("./index-0584955d.js")),["static/js/index-0584955d.js","static/css/index-3329e46f.css","static/js/index-ba4bbbcf.js","static/css/index-3be92ec8.css","static/js/pdfh5-008ca364.js"]))),y=x();I();const A=O(),{productCode:Y="",tenantId:he,agentCode:ge="",agencyCode:ye,saleChannelId:_e,extraInfo:Te,insurerCode:we,preview:Pe}=A.query;let Ee={};try{console.log("extInfo",decodeURIComponent(Te)),Ee=JSON.parse(decodeURIComponent(Te))}catch(Ta){}const{openId:De}=Ee;C();const Re=C(),Se=C(),je=C(!1),Ne=C({}),Ve=C({}),Fe=C(!1),He=C(!1),Be=C(0),Ue=C(!1),qe=C({}),Me=C({}),ze=C(!0),Ge=C(!0),Qe=C(!0),We=C(""),Ye=C([]);C({});const Ze=C({}),$e=C({}),Je=C([]),Ke=C(),Xe=C(),ea=L({holder:{formData:{},schema:[],trialFactorCodes:[],config:{}},insuredList:[{formData:{},schema:[],trialFactorCodes:[],config:{relationToHolder:{label:""},certNo:{}}}]});De&&X({openId:De},(e=>{Me.value=e}));const aa=C({imgUrl:"",desc:"",title:"",link:window.location.href}),ta=de({extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:Ee,templateId:(null==Ee?void 0:Ee.templateId)||"1",iseeBizNo:""}}),la=C({}),sa=t((()=>!!Pe)),na=C([]),ra=C(),oa=async()=>{G({productCode:Y,tenantId:he,isTenant:!Pe}).then((({data:e,code:a})=>{if("10000"===a){Ne.value=e,document.title=e.BASIC_INFO.title||"";const{title:a,desc:l,image:s}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{},[n=""]=s||[];t={title:a,desc:l,image:n},aa.value={desc:t.desc||"ä½ å¥½ï¼Œè¿™é‡Œæ˜¯æè¿°",imgUrl:t.image,title:t.title,link:window.location.href},console.log("shareInfo",aa.value)}var t})),await U({productCode:Y,isTenant:!Pe}).then((({data:e,code:a})=>{var t;"10000"===a&&(Ue.value=!0,Ve.value=e,Ze.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],Je.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),Qe.value=!1,Q({productCode:Y}).then((({code:e,data:a})=>{var t,l,s,n;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:r}=a;ra.value=e||[];const{basicInfo:{questionnaireType:o},questions:i,questionnaireName:d}=(null==(t=null==r?void 0:r[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};o&&(na.value=2===o?[{attachmentName:d,attachmentUri:i,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(l=null==i?void 0:i[0])?void 0:l.content,attachmentType:te(String(null==(s=null==i?void 0:i[0])?void 0:s.textType),null==(n=null==i?void 0:i[0])?void 0:n.content)}])}}))},ia=t((()=>{if(Me.value){const e=[];return Object.keys(Me.value).forEach((a=>{e.push(...Me.value[a])})),e}return[]})),da=t((()=>ia.value.length>0)),ca=C([]),ua=e=>{console.log("currentPlanObj.value",e,Ze.value)};_((()=>la.value.planCode),(e=>{Ze.value=(Ve.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const pa=()=>{Re.value.handleClickTab()("tab3")},va=C(""),ma=C(0),fa=async()=>{try{await W(((e={},a={},t={})=>{var l;const s={...t},n={tenantId:he,riskList:(null==(l=s.tenantOrderInsuredList[0])?void 0:l.tenantOrderProductList[0].riskVOList)||[],riskPremium:a,productId:e.id};return s.extInfo.iseeBizNo=We.value,s.productCode=e.productCode,s.commencementTime=s.insuranceStartDate,s.expiryDate=s.insuranceEndDate,s.tenantOrderHolder={...s.tenantOrderHolder,certType:s.tenantOrderHolder.certType||D.CERT,certNo:(s.tenantOrderHolder.certNo||"").toLocaleUpperCase(),extInfo:{...s.tenantOrderHolder.extInfo}},s.tenantOrderInsuredList=s.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||D.CERT,certNo:(e.certNo||"").toLocaleUpperCase(),planCode:Ze.value.planCode,extInfo:{...e.extInfo}}))),s.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:ma.value,productCode:e.productCode,productName:e.productName,planCode:Ze.value.planCode,tenantOrderRiskList:le(n)},s})(Ve.value,qe.value,ta.value),(async(e,a)=>{a===B.JUMP_PAGE&&(null==e?void 0:e.orderNo)&&await(async e=>{try{const{code:a,data:t}=await z({orderNo:e,tenantId:he});"10000"===a&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await W(t))}catch(Ta){}})(null==e?void 0:e.orderNo)}))}catch(Ta){}},{fileList:ha,mustReadFileCount:ga,popupFileList:ya}=pe(Ze,ra),Aa=e=>{Be.value=e,He.value=!0},ba=async(e,a,t=!0)=>{var l;const{chargePeriod:s,coveragePeriod:n,paymentFrequency:r,insuranceEndDate:o,insuranceStartDate:i}=la.value;va.value="ä¿è´¹è¯•ç®—ä¸­...";const d=ee(a).map((e=>({...e,paymentFrequency:r,chargePeriod:s,coveragePeriod:n}))),{tenantOrderHolder:c,tenantOrderInsuredList:u}=ta.value,p={tenantId:he,productCode:e.productCode,insuranceStartDate:i,insuranceEndDate:o,holder:{personVO:{...c,socialFlag:null==(l=c.extInfo)?void 0:l.hasSocialInsurance,certType:c.certType||D.CERT}},insuredVOList:u.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance,certType:e.certType||D.CERT},productPlanVOList:[{insurerCode:we,planCode:Ze.value.planCode,riskVOList:d}]})))},{code:v,message:m}=await q(p);if("10000"===v){const{code:e,data:a}=await M(p);if("10000"===e){if(va.value="",ta.value.tenantOrderInsuredList[0].tenantOrderProductList=p.insuredVOList[0].productPlanVOList,ma.value=null==a?void 0:a.premium,ta.value.premium=a.premium,ta.value.orderAmount=a.premium,ta.value.orderRealAmount=a.premium,ta.value.insuranceStartDate=p.insuranceStartDate,ta.value.insuranceEndDate=p.insuranceEndDate,!t){const e={};a.riskPremiumDetailVOList&&a.riskPremiumDetailVOList.length&&a.riskPremiumDetailVOList.forEach((a=>{e[a.riskCode]={premium:a.premium,amount:a.amount}})),qe.value=e,ya.value.length>0?(ze.value=!1,Aa(0)):na.value.length>0?Fe.value=!0:await fa()}}else va.value=""}else va.value="",N(m)},ka=()=>{const e=[];return Ye.value.filter((e=>e.value===Z.INSURE)).forEach((a=>{e.push(...a.productRiskVoList)})),e},xa=async()=>{var e,a;try{Fe.value=!1,He.value=!1,Ke.value&&Xe.value&&Promise.all([null==(e=Ke.value)?void 0:e.validate(),null==(a=Xe.value)?void 0:a[0].validate()]).then((async()=>{var e;if(da.value)await ba(Ve.value,[...ca.value,...ka()],!1);else{const a=null==(e=ta.value.tenantOrderHolder)?void 0:e.verificationCode;if(!ae(a))return void N({message:"è¯·è¾“å…¥æ­£ç¡®çš„éªŒè¯ç "});const{code:t,data:l}=await ie(ta.value.tenantOrderHolder.mobile,a);"10000"===t&&await ba(Ve.value,[...ca.value,...ka()],!1)}})).catch((e=>{const a=document.querySelector(".form-title");a&&a.scrollIntoView()}))}catch(t){}},Ia=e=>{"allFalse"===e?(Fe.value=!1,fa()):V.confirm({className:"xinao-custom-dialog",title:"æç¤º",teleport:"#xinaoDialog",message:"è¢«ä¿äººä¸ç¬¦åˆå¥åº·è¦æ±‚ï¼Œå¾ˆæŠ±æ­‰æš‚æ—¶æ— æ³•æŠ•ä¿è¯¥äº§å“",confirmButtonText:"é€‰é”™äº†",cancelButtonText:"ä¸ºå…¶ä»–äººæŠ•ä¿"}).then((()=>{})).catch((()=>{Fe.value=!1}))},Oa=()=>{He.value=!1,ze.value=!0,na.value.length<1?fa():Fe.value=!0},Ca=()=>{Fe.value=!1,He.value=!1,ze.value=!0};_((()=>ta.value.tenantOrderInsuredList[0].relationToHolder),((e,a)=>{e!==a&&Ye.value&&Ye.value.forEach((e=>{e.value=Z.UN_INSURE})),Ge.value=!1,T((()=>{const{certType:e,extInfo:a}=ta.value.tenantOrderInsuredList[0];a&&!a.hasSocialInsurance&&(ta.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=K.HAS),Ge.value=!0}))}),{deep:!0,immediate:!0}),_([()=>ea.holder.formData,()=>ea.insuredList],(([e,a])=>{Object.assign(ta.value,ce({holder:e,insuredList:a.map((e=>e.formData))}))}),{deep:!0});const La=(e,a)=>e.find((e=>!a[e])),_a=async()=>{const{trialFactorCodes:e,formData:a}=ea.holder,{trialFactorCodes:t,formData:l}=ea.insuredList[0];return new Promise(((s,n)=>{!La(e,a)&&!La(t,l)&&Ke.value&&Xe.value?Promise.all([Ke.value.validate(e),Xe.value[0].validate(t)]).then((()=>{s(!0)})).catch((()=>{n()})):n()}))};return _((()=>[...ea.holder.trialFactorCodes.map((e=>ea.holder.formData[e])),...ea.insuredList.reduce(((e,a,t)=>(e.push(...a.trialFactorCodes.map((e=>ea.insuredList[t].formData[e]))),e)),[]),la.value.paymentFrequency,Ye.value]),((...e)=>{sa.value||_a().then((()=>{ba(Ve.value,[...ca.value,...ka()])})).catch((()=>{_a().then((()=>{va.value="ä¿è´¹è¯•ç®—ä¸­..."}))}))}),{deep:!0}),_((()=>ea.holder.formData),((...e)=>{ea.insuredList.forEach(((e,a)=>{const{formData:t,schema:l}=e||{};"1"===t.relationToHolder&&Object.assign(e.formData,ea.holder.formData)}))}),{deep:!0,immediate:!0}),_((()=>Ze.value),(()=>{let{productFactor:e}=Ze.value;const{oilPackageProductVOList:a,planCode:t,insureProductRiskVOList:l}=Ze.value;da.value&&e[1]&&(e=e[1].filter((e=>"verificationCode"!==e.code))),la.value.planCode=t,ca.value=l,$e.value=(l||[]).find((e=>e.mainRiskFlag===w.YES)),console.log("mainRiskInfo.value",$e.value),Ye.value=(a||[]).map((e=>({...e,value:Z.UN_INSURE})));const{holder:s,insured:n,beneficiary:r}=ve(e);ea.holder={...ea.holder,...s},ea.insuredList[0]={...ea.insuredList[0],...null==n?void 0:n[0]}}),{deep:!0,immediate:!0}),_((()=>ea.insuredList.map(((e,a)=>ea.insuredList[a].formData.relationToHolder))),((e,a)=>{console.log("%cğŸ”¥ ä¸æŠ•ä¿äººå…³ç³»å˜åŠ¨äº†","color:#1989fa;background:#5e4;padding:3px 5px;"),ea.insuredList.forEach(((e,a)=>{const{formData:t,schema:l,config:s}=e||{},n="1"===t.relationToHolder,r="3"===t.relationToHolder,o=me(l.find((e=>"certType"===e.name))||{});o&&(s.certNo.label="èº«ä»½è¯å·"+(r?"\n(æˆ·å£ç°¿)":"")),e.schema.forEach((e=>{e.relationToHolder=t.relationToHolder,e.hidden=!e.isSelfInsuredNeed&&n})),n?Object.assign(e.formData,{...ea.insuredList[a].formData,...ea.holder.formData}):Object.assign(e.formData,{...Object.keys(e.formData).reduce(((a,t)=>(o&&"certType"===t||(a[t]={Object:{},Array:[]}[Object.prototype.toString.call(e.formData[t]).slice(8,-1)]||""),a)),{}),relationToHolder:t.relationToHolder})}))}),{immediate:!0,deep:!0}),T((()=>{F(Se,(([{isIntersecting:e}],a)=>{je.value=!e}))})),P((()=>{var e;const a=E.get($);if(a){const{tenantOrderHolder:t,tenantOrderInsuredList:l}=a;if(t&&(ta.value.tenantOrderHolder={...t,certType:t.certType||D.CERT}),Array(l)&&l[0]){const a=l[0]||{};if(ta.value.activePlanCode=a.planCode,a.tenantOrderProductListtenantOrderProductList&&a.tenantOrderProductList[0]&&a.tenantOrderProductList[0].tenantOrderRiskList){const t=null==(e=a.tenantOrderProductList[0].tenantOrderRiskList)?void 0:e.find((e=>"1"===String(e.riskType)));t&&(ta.value.paymentFrequency=(null==t?void 0:t.paymentFrequency)?String(null==t?void 0:t.paymentFrequency):J.SINGLE)}}}})),R((()=>{Qe.value=!0,oa(),setTimeout((async()=>{We.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),S((()=>{E.remove($)})),(e,t)=>{var A,b,k,x,I,O,C,L,_,T,w,P;const E=H;return l(),s(o,null,[d(Qe)?(l(),s("div",be,ke)):(l(),s("div",{key:1,"data-skeleton-root":"SHORT","theme-vars":d(y),class:"page-internet-product-detail"},[h("div",Ie,[(null==(b=null==(A=d(Ne))?void 0:A.BASIC_INFO)?void 0:b.banner.length)?(l(),c(se,{key:0,"data-skeleton-type":"img",url:null==(k=d(Ne))?void 0:k.BASIC_INFO.banner[0]},null,8,["url"])):f("",!0),(null==(O=null==(I=null==(x=d(Ne))?void 0:x.BASIC_INFO)?void 0:I.bannerMove)?void 0:O.length)?(l(),c(se,{key:1,url:null==(_=null==(L=null==(C=d(Ne))?void 0:C.BASIC_INFO)?void 0:L.bannerMove)?void 0:_[0],onClick:pa},null,8,["url"])):f("",!0),h("div",{ref_key:"observeRef",ref:Se},null,512)]),(null==(T=d(Ne))?void 0:T.GUARANTEE)?(l(),c(ne,{key:0,"show-service-config":"","data-source":d(Ne),"plan-list":d(Je)},null,8,["data-source","plan-list"])):f("",!0),n(re,{ref_key:"detailScrollRef",ref:Re,"order-detail":d(ta),"data-source":d(Ne)},{form:r((()=>[h("div",Oe,[Ce,n(d(fe),{ref_key:"holderFormRef",ref:Ke,title:"æœ¬äººä¿¡æ¯ï¼ˆæŠ•ä¿äººï¼‰",model:d(ea).holder.formData,schema:d(ea).holder.schema,config:d(ea).holder.config,autocomplete:""},null,8,["model","schema","config"]),(l(!0),s(o,null,i(d(ea).insuredList,((e,a)=>(l(),c(d(fe),{ref_for:!0,ref_key:"insuredFormRef",ref:Xe,key:a,title:"ä¸ºè°æŠ•ä¿ï¼ˆè¢«ä¿äººï¼‰",model:d(ea).insuredList[a].formData,schema:e.schema,config:e.config,autocomplete:""},null,8,["model","schema","config"])))),128))]),n(d(v),{"form-info":d(la),"risk-info":d($e),"tenant-product-detail":d(Ne).PREMIUM,"plan-list":d(Je),"premium-info":{premium:d(ma),premiumLoadingText:d(va)},onUpdateActivePlan:ua},null,8,["form-info","risk-info","tenant-product-detail","plan-list","premium-info"]),d(Ye).length>0?(l(),c(Ae,{key:0,"package-product-list":d(Ye)},null,8,["package-product-list"])):f("",!0)])),_:1},8,["order-detail","data-source"]),n(E,null,{default:r((()=>{var e,a,t;return[(null==(e=d(Ne).SIGNATURE)?void 0:e.inscribedContent)?(l(),c(d(m),{key:0,"inscribed-content":null==(t=null==(a=d(Ne))?void 0:a.SIGNATURE)?void 0:t.inscribedContent},null,8,["inscribed-content"])):f("",!0)]})),_:1}),n(E,null,{default:r((()=>{var e;return[(null==(e=d(ha))?void 0:e.length)?(l(),c(d(g),{key:0,"attachment-list":d(ha),"pre-text":"è¯·é˜…è¯»",onPreviewFile:t[0]||(t[0]=e=>Aa(e))},null,8,["attachment-list"])):f("",!0)]})),_:1}),d(je)?(l(),c(ue,{key:1,"is-share":null==(P=null==(w=d(Ne))?void 0:w.PRODUCT_LIST)?void 0:P.showWXShare,premium:d(ma),"share-info":d(aa),"loading-text":d(va),"plan-code":d(la).planCode,"payment-frequency":d(la).paymentFrequency,"tenant-product-detail":d(Ne),onHandleClick:xa},{default:r((()=>[u("ç«‹å³æŠ•ä¿")])),_:1},8,["is-share","premium","share-info","loading-text","plan-code","payment-frequency","tenant-product-detail"])):f("",!0)],8,xe)),d(Ue)?(l(),c(oe,{key:2,"product-detail":d(Ne)},null,8,["product-detail"])):f("",!0),Le,n(d(p),{show:d(Fe),"onUpdate:show":t[1]||(t[1]=e=>j(Fe)?Fe.value=e:null),"content-list":d(na),"active-index":0,onOnConfirmHealth:Ia,onOnCloseHealthByMask:Ca},null,8,["show","content-list"]),d(He)?(l(),c(d(a),{key:3,show:d(He),"onUpdate:show":t[2]||(t[2]=e=>j(He)?He.value=e:null),"content-list":d(ze)?d(ha):d(ya),"is-only-view":d(ze),"active-index":d(Be),text:d(ze)?"å…³é—­":"æˆ‘å·²é€é¡µé˜…è¯»å¹¶ç¡®è®¤å‘ŠçŸ¥å†…å®¹","force-read-count":d(ze)?0:d(ga),onSubmit:Oa,onOnCloseFilePreviewByMask:Ca},null,8,["show","content-list","is-only-view","active-index","text","force-read-count"])):f("",!0)],64)}}});export{Te as default};

import{k as a,r as e,u as s,o as t,p as r,s as l,t as o,v as n,C as d,M as u,E as c,J as v,ar as i,N as p,S as f,G as m,T as b,a5 as I,a6 as y}from"./vendor-8df8a31f.js";import{_ as C,g as N,s as _}from"./index-93adfcf7.js";import{s as h,c as E}from"./phoneVerify-3fc563b8.js";import{c as j}from"./format-12461bbc.js";import{a as P}from"./order-bc0be4ab.js";const S={class:"page-phone-verify"},g=(a=>(I("data-v-29510ea1"),a=a(),y(),a))((()=>d("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息预",-1))),U={class:"phone"},k={class:"input-wrapper"},q=m("下一步");var D=C(a({setup(a){const m=e(""),I=e(""),y=e(0);let C;const D=s(),{agentCode:G,tenantId:R,templateId:T,productCode:w,insurerCode:x,orderNo:A}=D.query,M=()=>{h(m.value).then((({code:a})=>{"10000"===a&&(y.value=60,C=setInterval((()=>{y.value-=1,y.value<=0&&clearInterval(C)}),1e3))}))},V=()=>{E(m.value,I.value).then((({code:a,data:e})=>{"10000"===a&&e?(b.success("验证成功"),_("infoPreview",D.query)):b.fail("验证失败")}))};return t((()=>{N({orderNo:A,saleUserId:G,tenantId:R}).then((a=>{var e;const{code:s,data:t}=a;"10000"===s&&([P.PENDING,P.PAYMENT_FAILED,P.UNDER_WRITING_SUCCESS].includes(t.orderStatus)?m.value=null==(e=null==t?void 0:t.tenantOrderHolder)?void 0:e.mobile:_("paymentResult",D.query))}))})),(a,e)=>{const s=r("van-button"),t=r("ProPageWrap");return l(),o(t,null,{default:n((()=>[d("div",S,[g,d("div",U,u(c(j)(m.value)),1),d("div",k,[v(d("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>I.value=a),placeholder:"请输入验证码",class:"input"},null,512),[[i,I.value]]),d("div",{class:p(["btn",{second:y.value}]),onClick:M},u(y.value?`${y.value}s`:"发送验证码"),3)]),f(s,{type:"primary",class:"submit-btn",onClick:V},{default:n((()=>[q])),_:1})])])),_:1})}}}),[["__scopeId","data-v-29510ea1"]]);export{D as default};

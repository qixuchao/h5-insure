import{_ as a,d as e,r as s,a as t,y as r,b as l,c as n,e as o,w as d,j as u,t as c,g as i,s as p,X as v,av as m,B as f,f as b,n as I,p as _,a5 as y,T as h,K as C,L as N}from"./index-9aeeb9a7.js";import{s as j,c as E}from"./phoneVerify-88c2b4d1.js";import{c as P}from"./format-12461bbc.js";import{a as g}from"./order-7ab26291.js";import"./pdfh5-008ca364.js";const S={class:"page-phone-verify"},U=(a=>(C("data-v-29510ea1"),a=a(),N(),a))((()=>u("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息预",-1))),q={class:"phone"},w={class:"input-wrapper"};var x=a(e({__name:"index",setup(a){const e=s(""),C=s(""),N=s(0);let x;const D=t(),{agentCode:R,tenantId:T,templateId:k,productCode:A,insurerCode:G,orderNo:L}=D.query,V=()=>{j(e.value).then((({code:a})=>{"10000"===a&&(N.value=60,x=setInterval((()=>{N.value-=1,N.value<=0&&clearInterval(x)}),1e3))}))},W=()=>{E(e.value,C.value).then((({code:a,data:e})=>{"10000"===a&&e?(h.success("验证成功"),y("infoPreview",D.query)):h.fail("验证失败")}))};return r((()=>{_({orderNo:L,saleUserId:R,tenantId:T}).then((a=>{var s;const{code:t,data:r}=a;"10000"===t&&([g.PENDING,g.PAYMENT_FAILED,g.UNDER_WRITING_SUCCESS].includes(r.orderStatus)?e.value=null==(s=null==r?void 0:r.tenantOrderHolder)?void 0:s.mobile:y("paymentResult",D.query))}))})),(a,s)=>{const t=l("van-button"),r=l("ProPageWrap");return n(),o(r,null,{default:d((()=>[u("div",S,[U,u("div",q,c(i(P)(i(e))),1),u("div",w,[p(u("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>v(C)?C.value=a:null),placeholder:"请输入验证码",class:"input"},null,512),[[m,i(C)]]),u("div",{class:f(["btn",{second:i(N)}]),onClick:V},c(i(N)?`${i(N)}s`:"发送验证码"),3)]),b(t,{type:"primary",class:"submit-btn",onClick:W},{default:d((()=>[I("下一步")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-29510ea1"]]);export{x as default};

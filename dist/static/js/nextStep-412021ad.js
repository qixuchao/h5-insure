import{bz as e,bA as t,aZ as r,T as a,bB as n,aX as o,aK as s,y as u,aJ as i,af as I}from"./index-6f140aae.js";import{s as d}from"./core-14cc17c0.js";const{VITE_BASE:E}={VITE_BASE:"/",VITE_API_BASEURL:"/",VITE_APP_TITLE:"投保流程",VITE_THEME_COLOR:"#C41E21",VITE_APP_DESCRIPTION:"一种互联网投保的快速落地实现方案",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},l=async(l,_,c,p)=>{var T,A;const y=l,{extInfo:N,orderNo:R,insuredList:L,tenantId:q}=y||{},{iseeBizNo:h,templateId:S}=N||{};if(R){const{productCode:e}=(null==(A=null==(T=null==L?void 0:L[0])?void 0:T.productList)?void 0:A[0])||{};let t=`${window.location.origin}${E}baseInsurance/orderDetail?orderNo=${R}&tenantId=${q}&ISEE_BIZ=${h}&productCode=${e}`;S>200&&(t=`${window.location.origin}${E}baseInsurance/long/result?orderNo=${R}&templateId=${S}&tenantId=${q}&ISEE_BIZ=${h}&productCode=${e}`),y.extInfo.redirectUrl=t}const U=e();if(U.ext)try{y.ext=U.ext}catch($){console.error("ext 参数格式错误",U.ext,$)}return t(y,p).then((({code:e,data:t})=>{if("10000"===e){const{pageAction:e,message:E,data:l}=t.pageAction||{};null==_||_(l,e,E),e===r.ALERT&&a(E),e===r.JUMP_URL&&d(null==l?void 0:l.payUrl),e===r.JUMP_ALERT&&(l.alertType===n.PAY_AUTH?o.confirm({title:"投保提示",message:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。",confirmButtonText:"去鉴权"}).then((()=>{s.push({path:u.payAuth,query:c.query})})):l.alertType===n.SIGN_FAIL?(i.set(`${I}_underwriteResult`,{[n.SIGN_FAIL]:E}),s.push({path:u.signUnderWriteResult,query:{...c.query,underwriteStatus:n.SIGN_FAIL}})):l.alertType===n.PAY_FAIL?s.push({path:u.updateBankInfo,query:c.query}):[n.LONG_HOLDER_QUESTIONNAIRE,n.LONG_INSURED_QUESTIONNAIRE].includes(l.alertType)?o.confirm({confirmButtonText:"返回修改",message:E}).then((()=>{n.LONG_INSURED_QUESTIONNAIRE===l.alertType?(delete c.query.questionnaireId,s.push({path:u.questionNotice,query:c.query})):s.push({path:`${u.questionNotice}/${c.query.questionnaireId}`,query:c.query})})):l.alertType===n.UNDER_WRITE_FAIL&&(i.set(`${I}_underwriteResult`,{[n.UNDER_WRITE_FAIL]:E}),s.push({path:u.underWriteResult,query:{...c.query,underwriteStatus:n.UNDER_WRITE_FAIL}})))}}))};export{l as n};

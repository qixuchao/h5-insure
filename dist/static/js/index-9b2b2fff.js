var W=Object.defineProperty,G=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var S=(o,e,t)=>e in o?W(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,w=(o,e)=>{for(var t in e||(e={}))X.call(e,t)&&S(o,t,e[t]);if(F)for(var t of F(e))Z.call(e,t)&&S(o,t,e[t]);return o},b=(o,e)=>G(o,Q(e));import{g as V,j as M,n as R,z as m,J as L,O as ee,E as d,h as te,r as k,A as h,p as c,m as ae,T as q}from"./vendor-667a94d7.js";import{S as oe}from"./infoCollection-242da9b6.js";import{_ as T}from"./index-dea51c7e.js";import{m as se,P as ne}from"./modal-bg-d2c0411f.js";import{i as re,a as le,s as ie,e as ue,E as de}from"./trial-8a3a4846.js";import{g as ce,l as me,a as pe,t as ve,c as _e,d as U}from"./logo-5f850c58.js";import{p as fe}from"./product-3bf586c8.js";import{b as Ie}from"./blank-84b83865.js";import"./trial-524ba1cc.js";const ge={class:"com-field-info"},De={class:"title"},he={class:"desc"},xe=V({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(o){return(e,t)=>(M(),R("div",ge,[m("div",De,L(o.title),1),m("div",he,L(o.desc),1)]))}});var x=T(xe,[["__scopeId","data-v-34962902"]]);const ye={class:"page-activity-upgrade"},Oe=["src"],Ce=["src"],we={class:"container"},Pe={class:"main-form"},Be=V({setup(o){const e=ee(),{productCode:t="BWYL2022",tenantId:v,orderId:N,extInfo:$}=e.query,P=ce($),{phoneNo:Ee,saleChannelId:A,paymentMethod:Fe,certNo:Se,name:be}=P,p=d(),D=d(),s=d(),_=d(),y=d(),O=d(),C=d(!1),j=()=>{C.value=!1},H=async()=>{var i,u,f,I,g;const r=pe({tenantId:v,saleChannelId:A,orderStatus:"",orderTopStatus:"",detail:p.value,paymentMethod:(u=(i=s.value.extInfo)==null?void 0:i.extraInfo)==null?void 0:u.paymentMethod,renewalDK:(I=(f=s.value.extInfo)==null?void 0:f.extraInfo)==null?void 0:I.renewalDK,successJumpUrl:"",premium:_.value,holder:s.value.tenantOrderHolder,insured:b(w({},s.value.tenantOrderInsuredList[0]),{socialFlag:s.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:ve({tenantId:v,riskList:_e(D.value.productRiskVoList[0].riskDetailVOList,p.value),riskPremium:{},productId:(g=p.value)==null?void 0:g.id})}),a=await ie(r),{code:l,data:n}=a;return l==="10000"?n.data:""},B=async()=>{const r=U({tenantId:v,premium:_.value,orderDetail:s.value,productDetail:p.value,insureDetail:D.value}),a=await ue(r),{code:l,data:n}=a;l==="10000"&&(_.value=n.installmentPremium,O.value=n.signUrl)},J=async r=>{const a=U({tenantId:v,premium:_.value,orderDetail:s.value,productDetail:p.value,insureDetail:D.value}),l=await de(w({id:r},a)),{code:n,data:i}=l;n==="10000"&&(C.value=!0)},K=async r=>{try{q.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"}),await B();const a=await H();O.value?window.location.href=O.value:J(a)}catch(a){console.log(a),q.clear()}},Y=()=>{const r=fe({productCode:t,withInsureInfo:!0}),a=re({productCode:t}),l=le({id:N||P.orderId,tenantId:v});Promise.all([r,a,l]).then(([n,i,u])=>{n.code==="10000"&&(p.value=n.data),i.code==="10000"&&(D.value=i.data),u.code==="10000"&&(s.value=u.data,y.value=u.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),B()})};return te(()=>{Y()}),(r,a)=>{var i,u,f,I,g,E;const l=k("ProRadioButton"),n=k("ProField");return M(),R("div",ye,[m("img",{class:"logo",src:h(me)},null,8,Oe),m("img",{src:h(Ie)},null,8,Ce),m("div",we,[m("div",Pe,[c(x,{title:"\u59D3\u540D",desc:(u=(i=s.value)==null?void 0:i.tenantOrderInsuredList)==null?void 0:u[0].name},null,8,["desc"]),c(x,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(I=(f=s.value)==null?void 0:f.tenantOrderInsuredList)==null?void 0:I[0].certNo},null,8,["desc"]),c(x,{title:"\u624B\u673A\u53F7\u7801",desc:(E=(g=s.value)==null?void 0:g.tenantOrderHolder)==null?void 0:E.mobile},null,8,["desc"]),c(x,{title:"\u6BCF\u6708\u4FDD\u8D39",desc:`${_.value} / \u6BCF\u6708`},null,8,["desc"]),c(n,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:ae(()=>[c(l,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=z=>y.value=z),disabled:!0,options:h(oe)},null,8,["modelValue","options"])]),_:1}),m("div",{class:"submit",onClick:K})])]),c(ne,{"is-show":C.value,bg:h(se),onOnClose:j},null,8,["is-show","bg"])])}}});var Ae=T(Be,[["__scopeId","data-v-aff58818"]]);export{Ae as default};

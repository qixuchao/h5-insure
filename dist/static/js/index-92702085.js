import{_ as e,d as t,u as n,a,r,o,b as l,c as u,e as i,w as s,f as d,P as c,g as p,h as m,F as f,i as y,j as v,t as g,k as C,l as S,m as I,n as _,T as b,p as k,R as h,C as T,q,s as j,v as w,x as V,y as N,B as Q,z as P,A,D as O,E as U,G as x,I as D,H as J}from"./index-d9e24409.js";import{P as z}from"./pdfh5-008ca364.js";import{s as L,g as W}from"./inform-93c1449c.js";import{s as $}from"./useStorage-4a1c3ae4.js";import{N as B}from"./notice-a5228c22.js";const E={class:"problem"},F={class:"footer-button"};var G=e(t({__name:"question",props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const P=e;n();const A=a(),O=r([]),{questionnaireType:U}=A.query,{orderNo:x="2022021815432987130620",productCode:D="CQ75CQ76",templateId:J=1,agentCode:z="65434444",orderId:L=13005,tenantId:W=9991000007}=A.query,$={1:"投保人",2:"被保人",3:"代理人"},B=r([]),G=e=>e?JSON.parse(e).map((e=>({title:e.value,value:e.uid}))):[],H=()=>{(B.value||[]).filter((e=>{var t;return 0===e.singleAnswer||e.singleAnswer||(null==(t=e.multipleChoose)?void 0:t.length)})).length!==B.value.length?b("请完成所有题目进行下一步"):t("onSubmitCurrentStatus",1,JSON.stringify(B.value))},R=()=>{k({orderNo:x,saleUserId:z,tenantId:W}).then((({code:e,data:t})=>{if("10000"===e){const e=t.tenantOrderNoticeList.findIndex((e=>1===e.isDone&&+e.objectId===P.currentPageInfo[0].questionnaireId));B.value=-1!==e?(e=>JSON.parse(e))(t.tenantOrderNoticeList[e].content):P.currentPageInfo.map((e=>2===e.questionType?{multipleChoose:[],...e}:{singleAnswer:3===e.questionType?0:"",...e}))}}))};return o((()=>{O.value=[],R()})),(e,t)=>{const n=h,a=T,r=q,o=j,b=w,k=V,P=N,A=Q,x=l("ProPageWrap");return u(),i(x,{class:"com-question"},{default:s((()=>[d(c,{title:`${$[p(U)]}健康告知书`},{default:s((()=>[(u(!0),m(f,null,y(B.value,((e,l)=>(u(),m("div",{key:l,class:"question-item"},[v("div",E,g(l+1)+". "+g(e.title),1),1===e.questionType?(u(),i(o,{key:0,modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t},{default:s((()=>[d(r,{inset:""},{default:s((()=>[(u(!0),m(f,null,y(G(e.options),((t,r)=>(u(),i(a,{key:r,title:t.title,clickable:"",onClick:t=>e.singleAnswer=r},{"right-icon":s((()=>[d(n,{name:r},null,8,["name"])])),_:2},1032,["title","onClick"])))),128))])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])):C("",!0),2===e.questionType?(u(),i(k,{key:1,modelValue:e.multipleChoose,"onUpdate:modelValue":t=>e.multipleChoose=t},{default:s((()=>[d(r,{inset:""},{default:s((()=>[(u(!0),m(f,null,y(G(e.options),((e,n)=>(u(),i(a,{key:e.uid,clickable:"",title:e.title,onClick:e=>(e=>{O.value[e].toggle()})(n)},{"right-icon":s((()=>[d(b,{ref_for:!0,ref:e=>O.value[n]=e,shape:"square",name:n,onClick:t[0]||(t[0]=S((()=>{}),["stop"]))},null,8,["name"])])),_:2},1032,["title","onClick"])))),128))])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])):C("",!0),3===e.questionType?(u(),i(I,{key:2,modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t,options:[{label:"是",value:"Y"},{label:"否",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):C("",!0),4===e.questionType?(u(),i(r,{key:3,inset:""},{default:s((()=>[d(P,{modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)):C("",!0)])))),128))])),_:1},8,["title"]),v("div",F,[d(A,{type:"primary",block:"",onClick:H},{default:s((()=>[_("提交")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-5d98a972"]]);const H={class:"com-document"},R={class:"title"},Y={class:"content"},K={class:"footer-button"};var M=e(t({__name:"InsuranceNotice",props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e;return(e,a)=>{const r=Q,o=l("ProPageWrap"),c=P("dompurify-html");return u(),i(o,null,{default:s((()=>{var e,o;return[v("div",H,[v("div",R,g(null==(e=n.currentPageInfo[0])?void 0:e.title),1),A(v("div",Y,null,512),[[c,null==(o=n.currentPageInfo[0])?void 0:o.content]]),v("div",K,[d(r,{type:"primary",onClick:a[0]||(a[0]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("了解并继续")])),_:1})])])]})),_:1})}}}),[["__scopeId","data-v-6e53a5c6"]]);const X={class:"com-pdf-viewer"},Z=["id","isee_pdf"],ee={key:2,class:"footer-button"},te={key:3,class:"footer-button"};var ne=e(t({__name:"file",props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e,a=O(),o=r(!1);r(!0);const l=r(null),c=U((()=>["png","jpg","jpeg"].some((e=>n.url.includes(e))))),f=async()=>{o.value=!0,setTimeout((()=>{(()=>{var e;try{l.value=new z(`#${a}`,{pdfurl:n.url,renderType:"canvas",lazy:!0}),null==(e=l.value)||e.on("complete",((e,t,n)=>{"error"===e&&b("文件损坏，无法打开！")}))}catch(t){}})()}),0)};return x((()=>{f()})),(e,r)=>{const o=D,l=Q;return u(),m("div",X,[p(c)?(u(),i(o,{key:0,width:"100%",height:"80vh",fit:"contain",src:n.url},null,8,["src"])):(u(),m("div",{key:1,id:p(a),isee_pdf:e.pdfUrl,class:"pdf-wapper"},null,8,Z)),"question"===n.materialType?(u(),m("div",ee,[d(l,{plain:"",type:"primary",onClick:r[0]||(r[0]=e=>t("onSubmitCurrentStatus",2))},{default:s((()=>[_("部分为是")])),_:1}),d(l,{type:"primary",onClick:r[1]||(r[1]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("以上皆否")])),_:1})])):(u(),m("div",te,[d(l,{type:"primary",onClick:r[2]||(r[2]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("了解并继续")])),_:1})]))])}}}),[["__scopeId","data-v-573d8b28"]]);const ae={class:"iframe-wrap"},re=["src"],oe={key:0,class:"footer-button"},le={key:1,class:"footer-button"};var ue=e(t({__name:"link",props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e;return(e,a)=>{const r=Q;return u(),m("div",ae,[v("iframe",{src:n.url,frameborder:"0"},null,8,re),"question"===n.materialType?(u(),m("div",oe,[d(r,{plain:"",type:"primary",onClick:a[0]||(a[0]=e=>t("onSubmitCurrentStatus",2))},{default:s((()=>[_("部分为是")])),_:1}),d(r,{type:"primary",onClick:a[1]||(a[1]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("以上皆否")])),_:1})])):(u(),m("div",le,[d(r,{type:"primary",onClick:a[2]||(a[2]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("了解并继续")])),_:1})]))])}}}),[["__scopeId","data-v-1fc4d3ec"]]);const ie={class:"com-health-notice"},se=t({__name:"index",setup(e){const t=n(),r=a(),o=$.get("questionData"),{materialType:l="question",questionnaireType:s="1",orderNo:d="2022021815432987130620",productCode:c="CQ75CQ76",templateId:f=1,agentCode:y="65434444",orderId:v=13005,tenantId:g=9991000007}=r.query&&r.query,S=J({pageData:{},currentQuestionInfo:[]}),I=U((()=>"2"===s)),_=U((()=>{var e;return"1"===s&&([1].includes(null==(e=S.currentQuestionInfo[0])?void 0:e.textType)||1===(null==o?void 0:o.materialSource))})),b=U((()=>{var e;return"1"===s&&([2].includes(null==(e=S.currentQuestionInfo[0])?void 0:e.textType)||2===(null==o?void 0:o.materialSource))})),h=U((()=>{var e;return"1"===s&&([3].includes(null==(e=S.currentQuestionInfo[0])?void 0:e.textType)||3===(null==o?void 0:o.materialSource))})),T=(e,n)=>{var a;const{id:r,objectType:l,noticeObject:u,materialSource:i}=o;L({content:n||(null==(a=S.currentQuestionInfo[0])?void 0:a.content),contentType:s||"3",isDone:e,noticeType:B[l]||"99",objectId:r,objectType:l||u,orderId:S.pageData.id,orderNo:d,tenantId:g}).then((({code:e,data:n})=>{"10000"===e&&t.go(-1)}))};return x((()=>{k({orderNo:d,saleUserId:y,tenantId:g}).then((({code:e,data:t})=>{"10000"===e&&Object.assign(S.pageData,t)})),(null==o?void 0:o.materialSource)?S.currentQuestionInfo=[{...null==o?void 0:o.materialSource,title:null==o?void 0:o.materialName,content:null==o?void 0:o.materialContent}]:(()=>{const{insurerCode:e,id:t,objectType:n,productCategory:a}=o;W({insurerCode:e,id:t,objectType:n,productCategory:a,orderNo:d,tenantId:g}).then((({code:e,data:t})=>{"10000"===e&&(S.currentQuestionInfo=t)}))})()})),(e,t)=>{var n,a;return u(),m("div",ie,[p(I)?(u(),i(G,{key:0,"current-page-info":p(S).currentQuestionInfo,onOnSubmitCurrentStatus:T},null,8,["current-page-info"])):C("",!0),p(b)?(u(),i(M,{key:1,"material-type":p(l),"current-page-info":p(S).currentQuestionInfo,onOnSubmitCurrentStatus:T},null,8,["material-type","current-page-info"])):C("",!0),p(_)?(u(),i(ne,{key:2,"material-type":p(l),url:null==(n=p(S).currentQuestionInfo[0])?void 0:n.content,onOnSubmitCurrentStatus:T},null,8,["material-type","url"])):C("",!0),p(h)?(u(),i(ue,{key:3,"material-type":p(l),url:null==(a=p(S).currentQuestionInfo[0])?void 0:a.content,onOnSubmitCurrentStatus:T},null,8,["material-type","url"])):C("",!0)])}}});export{se as default};

import{g as I,E as l,O as b,h as y,r as p,j as A,k as S,m as _,z as n,J as v,A as k,H as E,aq as w,L as P,p as T,a4 as N,a5 as V,C as q,T as O}from"./vendor-df2d8bed.js";import{b as C,_ as z,r as H,a2 as J}from"./index-5323229f.js";import{b as M}from"./format-d78bf325.js";const Q=e=>C.post("/api/app/insure/insurance/sendSmsCodeToC",{},{params:{mobile:e}}),U=(e,s)=>C.post("/api/app/insure/insurance/checkSmsCode",{},{params:{mobile:e,smsCode:s}});const W=e=>(N("data-v-4fa46548"),e=e(),V(),e),j={class:"page-phone-verify"},L=W(()=>n("div",{class:"title"},"\u901A\u8FC7\u6295\u4FDD\u4EBA\u624B\u673A\u53F7\u9A8C\u8BC1\u540E\uFF0C\u53EF\u8FDB\u884C\u6295\u4FDD\u4FE1\u606F\u9884",-1)),R={class:"phone"},$={class:"input-wrapper"},G=q("\u4E0B\u4E00\u6B65"),K=I({setup(e){const s=l(""),c=l(""),a=l(0);let d;const i=b(),{saleUserId:m="D1234567-1",tenantId:h="9991000007",templateId:X=1,productCode:Y="CQ75CQ76",insurerCode:Z="ancheng",orderNo:f}=i.query,B=()=>{d=setInterval(()=>{a.value-=1,a.value<=0&&clearInterval(d)},1e3)},F=()=>{H({orderNo:f,saleUserId:m,tenantId:h}).then(t=>{var r;const{code:o,data:u}=t;o==="10000"&&(s.value=(r=u==null?void 0:u.tenantOrderHolder)==null?void 0:r.mobile)})},D=()=>{Q(s.value).then(({code:t})=>{t==="10000"&&(a.value=60,B())})},g=()=>{U(s.value,c.value).then(({code:t,data:o})=>{t==="10000"&&o&&(O.success("\u9A8C\u8BC1\u6210\u529F"),J("infoPreview",i.query))})};return y(()=>{F()}),(t,o)=>{const u=p("van-button"),r=p("ProPageWrap");return A(),S(r,null,{default:_(()=>[n("div",j,[L,n("div",R,v(k(M)(s.value)),1),n("div",$,[E(n("input",{"onUpdate:modelValue":o[0]||(o[0]=x=>c.value=x),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",class:"input"},null,512),[[w,c.value]]),n("div",{class:P(["btn",{second:a.value}]),onClick:D},v(a.value?`${a.value}s`:"\u53D1\u9001\u9A8C\u8BC1\u7801"),3)]),T(u,{type:"primary",class:"submit-btn",onClick:g},{default:_(()=>[G]),_:1})])]),_:1})}}});var te=z(K,[["__scopeId","data-v-4fa46548"]]);export{te as default};

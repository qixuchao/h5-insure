import{B as e,d as a,j as n,k as t,bX as l,bY as u,E as s,bZ as i,b as o,aL as r,aM as c,a8 as d,b_ as v,H as p,R as m,J as b,b$ as h,c0 as f,M as g,c1 as y,K as w,a1 as S,c2 as x,O as V,bb as I,b0 as M,c3 as B,c4 as C}from"./index-37300aa0.js";const[P,T]=e("stepper"),$=(e,a)=>String(e)===String(a);const E=V(a({name:P,props:{min:p(1),max:p(1/0),name:p(""),step:p(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:m,showMinus:m,showInput:m,longPress:m,allowEmpty:Boolean,modelValue:b,inputWidth:b,buttonSize:b,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:p(1),decimalLength:b},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:a}){const p=a=>{const{min:n,max:t,allowEmpty:l,decimalLength:u}=e;return l&&""===a||(a=""===(a=h(String(a),!e.integer))?0:+a,a=Number.isNaN(a)?+n:a,a=Math.max(Math.min(+t,a),+n),f(u)&&(a=a.toFixed(+u))),a};let m;const b=n(),V=n((()=>{var n;const t=null!=(n=e.modelValue)?n:e.defaultValue,l=p(t);return $(l,e.modelValue)||a("update:modelValue",l),l})()),I=t((()=>e.disabled||e.disableMinus||V.value<=+e.min)),M=t((()=>e.disabled||e.disablePlus||V.value>=+e.max)),B=t((()=>({width:l(e.inputWidth),height:l(e.buttonSize)}))),C=t((()=>u(e.buttonSize))),P=a=>{e.beforeChange?S(e.beforeChange,{args:[a],done(){V.value=a}}):V.value=a},E=()=>{if("plus"===m&&M.value||"minus"===m&&I.value)return void a("overlimit",m);const n="minus"===m?-e.step:+e.step,t=p(x(+V.value,n));P(t),a(m)},L=a=>{const n=a.target,{value:t}=n,{decimalLength:l}=e;let u=h(String(t),!e.integer);if(f(l)&&u.includes(".")){const e=u.split(".");u=`${e[0]}.${e[1].slice(0,+l)}`}e.beforeChange?n.value=String(V.value):$(t,u)||(n.value=u);const s=u===String(+u);P(s?+u:u)},z=n=>{var t;e.disableInput?null==(t=b.value)||t.blur():a("focus",n)},j=e=>{const n=e.target,t=p(n.value);n.value=String(t),V.value=t,g((()=>{a("blur",e),y()}))};let F,N;const k=()=>{N=setTimeout((()=>{E(),k()}),200)},A=a=>{e.longPress&&(clearTimeout(N),F&&w(a))},O=a=>{e.disableInput&&w(a)},W=a=>({onClick:e=>{w(e),m=a,E()},onTouchstartPassive:()=>{m=a,e.longPress&&(F=!1,clearTimeout(N),N=setTimeout((()=>{F=!0,E(),k()}),600))},onTouchend:A,onTouchcancel:A});return s((()=>[e.max,e.min,e.integer,e.decimalLength]),(()=>{const e=p(V.value);$(e,V.value)||(V.value=e)})),s((()=>e.modelValue),(e=>{$(e,V.value)||(V.value=p(e))})),s(V,(n=>{a("update:modelValue",n),a("change",n,{name:e.name})})),i((()=>e.modelValue)),()=>o("div",{role:"group",class:T([e.theme])},[r(o("button",d({type:"button",style:C.value,class:[T("minus",{disabled:I.value}),{[v]:!I.value}],"aria-disabled":I.value||void 0},W("minus")),null),[[c,e.showMinus]]),r(o("input",{ref:b,type:e.integer?"tel":"text",role:"spinbutton",class:T("input"),value:V.value,style:B.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":V.value,onBlur:j,onInput:L,onFocus:z,onMousedown:O},null),[[c,e.showInput]]),r(o("button",d({type:"button",style:C.value,class:[T("plus",{disabled:M.value}),{[v]:!M.value}],"aria-disabled":M.value||void 0},W("plus")),null),[[c,e.showPlus]])])}}));var L=I?I.prototype:void 0,z=L?L.toString:void 0;function j(e){if("string"==typeof e)return e;if(M(e))return function(e,a){for(var n=-1,t=null==e?0:e.length,l=Array(t);++n<t;)l[n]=a(e[n],n,e);return l}(e,j)+"";if(B(e))return z?z.call(e):"";var a=e+"";return"0"==a&&1/e==-Infinity?"-0":a}var F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,N=/^\w*$/;function k(e,a){if(M(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!B(e))||(N.test(e)||!F.test(e)||null!=a&&e in Object(a))}function A(e,a){if("function"!=typeof e||null!=a&&"function"!=typeof a)throw new TypeError("Expected a function");var n=function(){var t=arguments,l=a?a.apply(this,t):t[0],u=n.cache;if(u.has(l))return u.get(l);var s=e.apply(this,t);return n.cache=u.set(l,s)||u,s};return n.cache=new(A.Cache||C),n}A.Cache=C;var O,W,H,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/\\(\\)?/g,R=(O=function(e){var a=[];return 46===e.charCodeAt(0)&&a.push(""),e.replace(J,(function(e,n,t,l){a.push(t?l.replace(K,"$1"):n||e)})),a},W=A(O,(function(e){return 500===H.size&&H.clear(),e})),H=W.cache,W),X=R;function Y(e,a){return M(e)?e:k(e,a)?[e]:X(function(e){return null==e?"":j(e)}(e))}function Z(e){if("string"==typeof e||B(e))return e;var a=e+"";return"0"==a&&1/e==-Infinity?"-0":a}function _(e,a){for(var n=0,t=(a=Y(a,e)).length;null!=e&&n<t;)e=e[Z(a[n++])];return n&&n==t?e:void 0}function q(e,a,n){var t=null==e?void 0:_(e,a);return void 0===t?n:t}export{E as S,_ as b,Y as c,q as g,k as i,Z as t};

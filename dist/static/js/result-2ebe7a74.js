import{_ as e,d as a,j as t,i as r,h as o,k as s,dt as n,O as l,o as d,c as u,b as i,w as c,a as m,e as p,u as v,F as f,a8 as N,m as y,p as I,aH as S,du as h,aa as C,ag as E,aC as b,aD as A}from"./index-2ab1afb0.js";import{P as _}from"./index-25cc2b06.js";import{g as j}from"./trial-57b867ba.js";import{P as k}from"./constants-4b08cf92.js";import{I as L}from"./infoItem-cf5a02f1.js";import{j as P}from"./verify-41388872.js";import{t as g}from"./format-31cde443.js";const D={class:"page-insure-result"},T={class:"page-insure-result-wrap"},U={class:"header"},q={class:"content"},O={class:"content-header"},R={class:"product-name"},w=(e=>(b("data-v-2e1f8de1"),e=e(),A(),e))((()=>m("span",null,"保障中",-1))),x={class:"footer-button"},Y=a({name:"OrderResult"});var F=e(a({...Y,setup(e){const a=t({orderNo:"",holderName:"",orderAmount:"",orderStatus:""}),b=r(),A=o(),Y=t(!1),{orderNo:F="",preview:M,saleUserId:V="",tenantId:B="",templateId:G=1}=b.query,H=t({});s((e=>a.value&&[n.SUCCESS,n.PAYMENT_SUCCESS,n.ACCEPT_POLICY].some((e=>{var t;return e===(null==(t=a.value)?void 0:t.orderStatus)}))));const J=s((e=>a.value&&[n.PAYMENT_FAILED,n.INSURER_REJECT,n.TIMEOUT,n.FAILED,n.CANCELED].some((e=>{var t;return e===(null==(t=a.value)?void 0:t.orderStatus)}))));s((()=>a.value.orderStatus===n.PAYING));const z=()=>{A.push({path:k.orderList,query:b.query})},K=()=>{A.push({path:k.updateBankInfo,query:b.query})},Q=()=>{S.confirm({title:"投保提示",message:"选择转批扣后将对该笔订单进行转换批次扣款，提交后将无法操作变更卡号，再次划款",cancelButtonText:"返回重选"}).then((async()=>{await P({orderNo:F,tenantId:B})}))},W=()=>{j({orderNo:F,tenantId:B}).then((e=>{var t,r,o;const{code:s,data:n}=e;if("10000"===s){Y.value=!1;const{holder:{name:e},policyNo:s,insuredList:l}=n;H.value=n,null==(t=n.tenantOrderPaymentInfoList)||t[0];const{productName:d,riskList:u}=(null==(o=null==(r=null==l?void 0:l[0])?void 0:r.productList)?void 0:o[0])||{};a.value={holderName:e,productName:d,policyNo:s,validateDate:"",coverage:null==u?void 0:u[0].coverage,orderStatusDesc:h[n.orderStatus],orderStatus:n.orderStatus,orderNo:n.orderNo,orderAmount:g(n.orderAmount)}}}))};return l((()=>{M||W()})),(e,t)=>{const r=C,o=E,s=_;return d(),u("div",D,[i(r),i(s,{modelValue:v(Y),"onUpdate:modelValue":t[0]||(t[0]=e=>I(Y)?Y.value=e:null),onRefresh:W},{default:c((()=>[m("div",T,[m("div",U,p(v(H).orderStatusDesc),1),m("div",q,[m("div",O,[m("h4",R,p(v(a).productName),1),w]),i(L,{label:"投保人:",content:v(a).holderName,line:""},null,8,["content"]),i(L,{label:"投/保单号:",content:v(a).policyNo,line:""},null,8,["content"]),i(L,{label:"保费:",content:v(a).orderAmount,line:""},null,8,["content"])]),m("div",x,[v(J)?(d(),u(f,{key:0},[i(o,{type:"primary",plain:"",onClick:K},{default:c((()=>[N("变更卡号")])),_:1}),i(o,{type:"primary",onClick:Q},{default:c((()=>[N("线下扣款")])),_:1})],64)):(d(),y(o,{key:1,block:"",type:"primary",onClick:z},{default:c((()=>[N("确定")])),_:1}))])])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-2e1f8de1"]]);export{F as default};

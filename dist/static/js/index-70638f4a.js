import{g as b,L as I,C as v,v as w,af as R,r as c,h,j as T,k as l,n as s,z as f,a6 as S,y as r,m as C,E as U,F as $,I as P,B as d,D as q,T as z}from"./vendor-d47732e4.js";import{_ as W,y as j}from"./index-9a4e2e25.js";import{P as H}from"./index-9baccbb3.js";import{h as O,d as G}from"./proposalList-09bda505.js";const J={class:"proposal-content"},K={class:"title"},M={class:"premium"},Q=d(" \u4FDD\u8D39\uFF1A"),X={class:"operate-btn"},Y=d("\u5220\u9664"),Z=d("\u7F16\u8F91"),ee=d("\u9884\u89C8"),ae=b({setup(te){const k=[{title:"\u9669\u79CD\u540D\u79F0",dataIndex:"riskName",width:180},{title:"\u4FDD\u969C\u671F\u95F4",dataIndex:"coveragePeriod"},{title:"\u7F34\u8D39\u671F\u95F4",dataIndex:"chargePeriod",width:110},{title:"\u4FDD\u8D39",dataIndex:"premium",width:120}],D=I({historyList:[],searchValue:""}),p=v(!1),g=v(!1),i=v(1),{historyList:n,searchValue:u}=w(D),y=R(),_=()=>{O({name:u.value,pageNum:i.value,pageSize:20,relationUserType:2}).then(a=>{const{code:t,data:o}=a;t==="10000"&&(i.value===1?n.value=o.datas||[]:n.value=n.value.concat(o.datas),i.value+=1,p.value=!1,g.value=n.value.length>=o.total)})},x=()=>{_()},B=a=>{u.value=a,i.value=1,_()},L=a=>{q.confirm({title:"\u5220\u9664\u8BA1\u5212\u4E66",message:"\u786E\u8BA4\u5220\u9664\u8BA1\u5212\u4E66"}).then(()=>{G(a).then(t=>{const{code:o}=t;o==="10000"&&(z.success("\u5220\u9664\u6210\u529F"),_())})}).catch(()=>{})},V=a=>{y.push({path:"compositionProposal",query:{id:a}})},A=a=>{y.push({path:"/proposal/createProposal",query:{id:a}})};return(a,t)=>{const o=c("van-search"),m=c("van-button"),E=c("van-list"),N=c("ProPageWrap");return h(),T(N,{class:"page-history-proposal"},{default:l(()=>[s(o,{modelValue:f(u),"onUpdate:modelValue":t[0]||(t[0]=e=>S(u)?u.value=e:null),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",shape:"round",class:"search",onSearch:B},null,8,["modelValue"]),r("div",J,[s(E,{loading:p.value,"onUpdate:loading":t[1]||(t[1]=e=>p.value=e),finished:g.value,"finished-text":"- \u6CA1\u6709\u66F4\u591A\u4E86 -",onLoad:x},{default:l(()=>[(h(!0),C($,null,U(f(n),e=>(h(),C("div",{key:e.id,class:"proposal-item"},[r("div",K,P(e.proposalName),1),r("p",M,[Q,r("span",null,"\xA5"+P(f(j)(e.totalPremium)),1)]),s(H,{columns:k,class:"table","data-source":e.proposalProductRiskVOList},null,8,["data-source"]),r("div",X,[s(m,{plain:"",round:"",type:"primary",class:"del-btn",onClick:F=>L(e.id)},{default:l(()=>[Y]),_:2},1032,["onClick"]),s(m,{plain:"",round:"",type:"primary",onClick:F=>A(e.id)},{default:l(()=>[Z]),_:2},1032,["onClick"]),s(m,{plain:"",round:"",type:"primary",onClick:F=>V(e.id)},{default:l(()=>[ee]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var le=W(ae,[["__scopeId","data-v-537ad422"]]);export{le as default};

import{d as a,r as e,N as s,b as l,c as t,i as u,af as n,f as i,h as o,e as r,w as d,j as c,$ as p,ag as v,V as m,U as f,ah as g,ai as b,B as y,aj as h,ak as w,q as C,al as S}from"./index-4c507abe.js";const k={class:"sign-wrap"},_=["src"],V={class:"popup-body"},I={class:"sign-container-wrap"},T={class:"operate-bar"},j={class:"btns"},O=a({name:"sign"});var R=g(a({...O,props:{option:{default:{}},modelValue:{default:""}},emits:["update:modelValue","submitSign"],setup(a,{expose:g,emit:C}){const S=a,O=e(!1),R=e(),N=e(""),x=e(!0),z=()=>{var a;O.value=!0,null==(a=R.value)||a.clear(),setTimeout((()=>{var a;null==(a=R.value)||a.setDataURL(N.value),S.modelValue?x.value=!1:x.value=!0}))},P=()=>{b({images:[N.value],className:"customer-sign-preview"})},U=()=>{O.value=!1},$=()=>{var a,e;null==(e=null==(a=R.value)?void 0:a.clear)||e.call(a),N.value="",x.value=!0,C("update:modelValue","")},B=()=>{var a;N.value=null==(a=R.value)?void 0:a.save(),C("update:modelValue",N.value),C("submitSign",N.value),O.value=!1};return s((()=>S.modelValue),(()=>{N.value=S.modelValue}),{immediate:!0}),g({rewrite:$,openSign:z}),(a,e)=>{const s=y,g=h,b=w;return l(),t(f,null,[u("div",k,[n(a.$slots,"signImg",{data:i(N)},(()=>[i(N)?(l(),t("img",{key:0,class:"preview-sign",src:i(N),alt:"",onClick:P},null,8,_)):o("",!0),r(s,{type:"primary",round:"",size:"small",onClick:z},{default:d((()=>[c(p(i(N)?"重新签名":"点击签字"),1)])),_:1})]),!0)]),r(b,{show:i(O),"onUpdate:show":e[1]||(e[1]=a=>m(O)?O.value=a:null),position:"bottom",style:{height:"100%",overflow:"hidden"}},{default:d((()=>[u("div",V,[u("div",I,[r(v,{ref_key:"signRef",ref:R,placeholder:"请在此处签名",onStroke:e[0]||(e[0]=a=>x.value=!1)},null,512),u("div",T,[u("span",null,[r(g,{name:"info",color:"#ffaf22"}),c(" 请投保人正楷签署您的签名:")]),u("div",j,[r(s,{type:"default",class:"btn",onClick:U},{default:d((()=>[c("返回")])),_:1}),r(s,{type:"default",class:"btn",onClick:$},{default:d((()=>[c("重写")])),_:1}),r(s,{type:"primary",class:"btn",disabled:i(x),onClick:B},{default:d((()=>[c("确定签字")])),_:1},8,["disabled"])])])])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-6461f207"]]);const N=a=>C({url:"/api/app/insure/insurance/customerFace",method:"POST",data:a}),x=a=>C({url:"/api/app/insure/insurance/saveCustomerFaceResult",method:"POST",data:a}),z=(a,e,s,l,t)=>{const u={bizObjectType:a,bizObjectId:t,docCategory:"ELECTRIC_SIGN",docType:"png",fileBase64:e,docName:`${S[a]}电子签名`,orderId:s,tenantId:l};return C({url:"/api/app/insure/insurance/saveCustomerSignResult",method:"POST",data:u})};export{R as S,N as a,x as f,z as s};

import{i as e,r as t,A as a,l as n,m as l,s as o,B as r,C as i,x as s,t as d,p as u,F as c,G as p,P as v,aa as f,k as m,n as I,L as b,T as y,a5 as j,a6 as C}from"./vendor-6e9e6128.js";import{u as _}from"./theme-467ed2f7.js";import{g,i as w}from"./trial-eaa36393.js";import{_ as E,n as h}from"./nextStep-2014fff6.js";import{s as x}from"./verify-934e5951.js";import{p as L}from"./product-7775d88e.js";import{_ as N}from"./index-70107b3b.js";import"./infoCollection-f753b77d.js";import"./relativeTime-63acc467.js";import"./useDicData-db90df86.js";import"./core-1501d771.js";import"./index-28eeef29.js";const O={class:"sign-wrap"},T=["src"],R=p("点击签字"),k={class:"popup-body"},S={class:"sign-container-wrap"},V={class:"operate-bar"},A=r("span",null,"请投保人正楷签署您的签名:",-1),B=p("返回"),H=p("重写"),P=p("确定签字"),D=e({props:{option:{default:{}},modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:p}){const v=t(!1),f=t(),m=a((()=>{let e="";return f.value&&(e=f.value.save()),e})),I=()=>{v.value=!0},b=()=>{v.value=!1},y=()=>{var e,t;null==(t=null==(e=f.value)?void 0:e.clear)||t.call(e)},j=()=>{p("update:modelValue",m.value),v.value=!1};return(e,t)=>{const a=n("van-button"),p=n("ProSign"),C=n("van-popup");return l(),o(c,null,[r("div",O,[i(m)?(l(),o("img",{key:0,class:"previewSign",src:i(m),alt:""},null,8,T)):s("",!0),d(a,{type:"primary",size:"small",onClick:I},{default:u((()=>[R])),_:1})]),d(C,{show:v.value,"onUpdate:show":t[0]||(t[0]=e=>v.value=e),position:"bottom",style:{height:"100%"}},{default:u((()=>[r("div",k,[r("div",S,[d(p,{ref_key:"signRef",ref:f},null,512),r("div",V,[A,d(a,{type:"default",onClick:b},{default:u((()=>[B])),_:1}),d(a,{type:"default",onClick:y},{default:u((()=>[H])),_:1}),d(a,{type:"default",disabled:!i(m),onClick:j},{default:u((()=>[P])),_:1},8,["disabled"])])])])])),_:1},8,["show"])],64)}}});const F={class:"net-sale-wrap"},U={class:"part"},z={class:"product-name"},G={class:"part"},q={class:"part"},J={class:"part"},W={class:"sign-cell"},X=(e=>(j("data-v-3b7b4166"),e=e(),C(),e))((()=>r("div",{class:"sign-label"},"签名",-1))),Y={class:"footer-button"},$=p("提交");var K=N(e({setup(e){const a=_(),o=v();f();const{orderNo:c="2022120119060692150",tenantId:p="9991000001",productCode:j="HTEJBX"}=o.query;t();const C=t({}),N=t({commencementTime:"",expiryDate:"",extInfo:{buttonCode:"EVENT_NETSALE_airSignature",pageCode:"infoCollection",templateId:3,iseeBizNo:""},orderCategory:1,tenantId:p,venderCode:"",tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",tenantId:p}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),O=t(),T=t(),R=t(""),k=async()=>{R.value?(await x("HOLDER",R.value,N.value.id,`${p}`),h(N.value)):y("请先签字")};return m((()=>{(async()=>{const{code:e,data:t}=await w({productCode:j,tenantId:p});"10000"===e&&(O.value=t,C.value=t.productFactor)})(),(async()=>{const{data:e,code:t}=await L({productCode:j,tenantId:p});"10000"===t&&(T.value=e)})(),(async()=>{const{code:e,data:t}=await g({orderNo:c,tenantId:p});"10000"===e&&(t.extInfo.buttonCode="EVENT_NETSALE_airSignature",N.value=t)})()})),(e,t)=>{const o=n("ProCell"),c=n("ProCard"),p=n("van-cell"),v=n("van-button"),f=n("ProPageWrap"),m=n("van-config-provider");return l(),I(m,{"theme-vars":i(a)},{default:u((()=>[d(f,null,{default:u((()=>[r("div",F,[N.value.id?(l(),I(c,{key:0,"show-line":!1,title:"投保信息"},{default:u((()=>{var e,t,a,n,l,i;return[r("div",U,[r("div",z,b(null==(e=O.value)?void 0:e.productBasicInfoVO.productFullName),1)]),r("div",G,[d(o,{title:"保费",content:N.value.orderAmount},null,8,["content"]),d(o,{title:"保险期限",content:null==(t=N.value.tenantOrderInsuredList[0])?void 0:t.planName},null,8,["content"]),d(o,{title:"起保日期",content:N.value.commencementTime},null,8,["content"]),d(o,{title:"终保日期",content:N.value.expiryDate},null,8,["content"]),d(o,{title:"保单状态",content:N.value.orderStatus},null,8,["content"])]),r("div",q,[d(o,{title:"订单编号",content:N.value.orderNo},null,8,["content"]),d(o,{title:"销售人名称",content:""}),d(o,{title:"房屋地址",content:null==(n=null==(a=N.value.tenantOrderHolder)?void 0:a.extInfo)?void 0:n.familyAddress},null,8,["content"]),d(o,{title:"燃气编号",content:null==(i=null==(l=N.value.tenantOrderInsuredList)?void 0:l[0])?void 0:i.extInfo.subjectRelatedUserId},null,8,["content"])])]})),_:1})):s("",!0),d(E,{ref:"formRef","title-collection":{HOLDER:"投保人信息",INSURER:"被保人信息",BENEFICIARY:"受益人"},"is-view":!0,"form-info":N.value,"factor-object":C.value,"input-align":"right"},null,8,["form-info","factor-object"]),d(c,{title:"阅读条款合同"},{default:u((()=>[r("div",J,[d(p,{title:"客户告知书","is-link":""})])])),_:1}),d(c,{title:"客户签名"},{default:u((()=>[r("div",W,[X,d(D,{modelValue:R.value,"onUpdate:modelValue":t[0]||(t[0]=e=>R.value=e)},null,8,["modelValue"])])])),_:1}),r("div",Y,[d(v,{type:"primary",block:"",onClick:k},{default:u((()=>[$])),_:1})])])])),_:1})])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-3b7b4166"]]);export{K as default};

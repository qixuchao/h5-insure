import{G as e,d as t,c as a,A as n,i as o,w as r,f as i,U as s,V as l,g as c,E as d,Z as u,e as p,h as m,W as f,b4 as v,X as y,Y as I,u as h,z as _,r as g,o as j,b as P,a3 as b,aX as C,aY as O,aa as k,bA as w,k as V,j as x,P as L,n as S,p as N,a4 as A,ab as E}from"./index-4933e0a6.js";import{t as D}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-253b8d3f.js";/* empty css              */import"./useDicData-6b48cc3d.js";import{_ as R}from"./PayInfo-33d3c3bf.js";import{g as T,i as F}from"./trial-7555a3df.js";import{n as U}from"./nextStep-a0a5733a.js";import{u as q}from"./useAttachment-6faa7b83.js";import{a as W,q as Y}from"./product-97679413.js";import{g as B}from"./utils-b8598766.js";import{u as M}from"./useOrder-82582ed2.js";import{P as G,B as J}from"./constants-7afb7c3d.js";import{a as X}from"./index-bf68c303.js";import{P as $}from"./index-38f33e61.js";import{R as z,b as H}from"./trial-6e76302d.js";import"./pdfh5-008ca364.js";import"./phoneVerify-04f32c41.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";import"./index-8e474357.js";import"./_getTag-d5b47d26.js";import"./debounce-eed12388.js";import"./index-827cfdf6.js";import"./bankCard-e0e40c72.js";import"./core-88ae611f.js";import"./constant-8927d485.js";import"./infoCollection-2369d923.js";import"./cloneDeep-6abacc69.js";const K={class:"com-insured-part-wrapper"},Q={class:"content-wrapper"};var Z=e(t({__name:"InsureInfo",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup:e=>(t,y)=>{const I=f,h=v;return a(),n("div",K,[o(h,{title:"保障信息"},{default:r((()=>{var t;return[i("div",Q,[(a(!0),n(s,null,l((null==(t=e.productData)?void 0:t.riskList)||[],((e,t)=>{var r;return a(),n("div",{key:t,class:"risk-item"},[e.riskType===c(z).MAIN_RISK?(a(),n(s,{key:0},[i("p",null,d(e.riskName),1),o(I,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(I,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])],64)):(a(),n(s,{key:1},[o(I,{title:e.riskName,content:"投保"},null,8,["title"]),e.exemptFlag===c(u).YES?(a(),p(I,{key:0,title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])):(null==(r=e.liabilityList)?void 0:r.length)?(a(),n(s,{key:1},[o(I,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(I,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"]),o(I,{title:"交费方式",content:c(H)[e.paymentFrequency]},null,8,["content"])],64)):m("",!0)],64)),o(I,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(I,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])})),128)),o(I,{title:"首期总保费",class:"price",content:(e.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])]})),_:1})])}}),[["__scopeId","data-v-92348b0c"]]);const ee={class:"long-info-preview"},te={class:"footer-btn"},ae=i("span",null,"分享",-1),ne=t({__name:"infoPreview",setup(e){y((()=>I((()=>import("./index-ec438499.js")),["static/js/index-ec438499.js","static/css/index-fa4edf2a.css","static/js/index-4933e0a6.js","static/css/index-08f51adc.css","static/js/pdfh5-008ca364.js","static/js/index-38f33e61.js","static/css/index-827a8544.css","static/js/utils-b8598766.js","static/js/infoCollection-2369d923.js","static/js/trial-6e76302d.js"]))),y((()=>I((()=>import("./index-98886bd7.js")),["static/js/index-98886bd7.js","static/css/index-3329e46f.css","static/js/index-4933e0a6.js","static/css/index-08f51adc.css","static/js/pdfh5-008ca364.js"])));const t=h(),n=M(),{productCode:s="",tenantId:l,agentCode:d="",agencyCode:u,saleChannelId:f,isShare:v,orderNo:z,extraInfo:H,insurerCode:K,preview:Q}=t.query;let ne={};try{ne=JSON.parse(decodeURIComponent(H))}catch(ge){}const oe=_({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),re=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,ie=g({imgUrl:"",desc:"",title:"",link:re}),se=g(),le=g(),ce=g({}),de=g({}),ue=g([]),pe=g(),me=g({});g(!1),g(!1),g(0),g(!0),q(me,pe),g(!1);const fe=g(!1),ve=g(),ye=()=>{U(n.value,((e,t)=>{t===L.JUMP_PAGE&&ve.value.handleShare()}))},Ie=async()=>{Q?S(G.INFO_PREVIEW,t.query):(Object.assign(n.value,{extInfo:{...n.value.extInfo,buttonCode:J.INFO_PREVIEW,pageCode:G.INFO_PREVIEW}}),U(n.value,((e,a)=>{a===L.JUMP_PAGE&&N(e.nextPageCode,t.query)})))};_({tenantOrderPayInfoList:[]});const he=g(),_e=async()=>{W({productCode:s,tenantId:l}).then((({data:e,code:t})=>{if("10000"===t){ce.value=e;const{wxShareConfig:t,showWXShare:a,title:n,desc:o,image:r}=(null==e?void 0:e.PRODUCT_LIST)||{};a?Object.assign(ie.value,{...t,imgUrl:t.image,isShare:a}):Object.assign(ie.value,{title:n,desc:o,imgUrl:r,isShare:a}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&A(e.BASIC_INFO.themeType)}})),z&&T({orderNo:z,tenantId:l}).then((({code:e,data:t})=>{"10000"===e&&(Object.assign(n.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),he.value=t,fe.value=!0)})),Y({productCode:s}).then((({code:e,data:t})=>{var a,n,o,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=t;pe.value=e||[];const{basicInfo:{questionnaireType:s},questions:l,questionnaireName:c}=(null==(a=null==i?void 0:i[0])?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};s&&(ue.value=2===s?[{attachmentName:c,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:c,attachmentUri:null==(n=null==l?void 0:l[0])?void 0:n.content,attachmentType:B(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(r=null==l?void 0:l[0])?void 0:r.content)}])}})),await F({productCode:s,isTenant:!Q}).then((({data:e,code:t})=>{var a,n;if("10000"===t){de.value=e,me.value=(null==(a=e.productPlanInsureVOList)?void 0:a[0])||{};const{payInfo:t}=D(null==(n=me.value)?void 0:n.productFactor);oe.payInfo={...oe.payInfo,...t}}}))};return j((()=>{_e()})),(e,t)=>{const s=E,l=P("ProPageWrap");return a(),p(l,null,{default:r((()=>{var l,d,u,f,y,I;return[i("div",ee,[o(Z,{"product-data":null==(u=null==(d=null==(l=c(n).insuredList)?void 0:l[0])?void 0:d.productList)?void 0:u[0],"total-premium":c(n).orderAmount},null,8,["product-data","total-premium"]),(null==(f=c(me))?void 0:f.productFactor)?(a(),p(c(X),{key:0,ref_key:"personalInfoRef",ref:le,modelValue:c(he),"onUpdate:modelValue":t[0]||(t[0]=e=>b(he)?he.value=e:null),"product-factor":null==(y=c(me))?void 0:y.productFactor,"multi-insured-config":null==(I=c(me))?void 0:I.multiInsuredConfigVO,"is-view":""},null,8,["modelValue","product-factor","multi-insured-config"])):m("",!0),c(oe).payInfo.schema.length?(a(),p(c(R),{key:1,ref_key:"payInfoRef",ref:se,modelValue:c(n).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>c(n).tenantOrderPayInfoList=e),schema:c(oe).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):m("",!0),i("div",te,[!c(v)&&c(ie).isShare&&c(C)()?(a(),p(O,k({key:0},c(ie),{class:"share-btn",onClick:w(ye,["stop"])}),{default:r((()=>[o(s,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ae])),_:1},16,["onClick"])):m("",!0),o($,{shadow:!1,onClick:Ie},{default:r((()=>[V(e.$slots,"default",{},(()=>[x("下一步")]))])),_:3})])])]})),_:3})}}});export{ne as default};

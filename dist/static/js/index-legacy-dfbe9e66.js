!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-product-list-wrapper .content[data-v-ddf563b0]{padding:0 var(--zaui-card-border, .4rem)}.com-product-list-wrapper .premium-total[data-v-ddf563b0]{padding:0 var(--zaui-card-border, .4rem);font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#333;margin:.26667rem 0 .4rem}.com-product-list-wrapper .premium-total .premium[data-v-ddf563b0]{color:#ff5840;font-weight:600}.com-product-list-wrapper .risk-item-wrapper[data-v-ddf563b0]{margin:var(--zaui-card-border, .4rem);background-color:#f6f6fa;border-radius:.26667rem}.com-product-list-wrapper .risk-item-wrapper[data-v-ddf563b0] .card-title .van-cell{background-color:#f6f6fa;padding-bottom:0;border-radius:.26667rem}.com-product-list-wrapper .risk-item-wrapper .premium[data-v-ddf563b0]{color:var(--zaui-price, #ff5840)}.com-product-list-wrapper .risk-item-wrapper .risk-premium[data-v-ddf563b0]{color:#333;font-weight:400;font-size:.34667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor[data-v-ddf563b0]{display:flex;justify-content:space-between}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor[data-v-ddf563b0]{display:flex;flex-direction:column;align-items:center;padding:.37333rem 0 .54667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor .factor-value[data-v-ddf563b0]{width:100%;text-align:center;font-size:.37333rem;font-family:Arial-BoldMT,Arial,self;font-weight:400;color:#393d46;line-height:.42667rem;margin-bottom:.10667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor .factor-name[data-v-ddf563b0]{width:100%;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC,serif;font-weight:400;color:#99a9c0;line-height:.44rem}.com-product-list-wrapper .risk-item-wrapper .operate-bar[data-v-ddf563b0]{display:flex;align-content:center;justify-content:flex-end;padding-bottom:.26667rem}.com-product-list-wrapper .risk-item-wrapper .operate-bar .border[data-v-ddf563b0]{border:.02667rem solid #e6e6eb}.com-product-list-wrapper .risk-item-wrapper .operate-bar[data-v-ddf563b0] .com-check-btn{margin-left:.21333rem}@charset "UTF-8";.page-create-wrapper[data-v-358dabd6]{background-color:#f2f5fc}.page-create-wrapper .container[data-v-358dabd6]{padding:.4rem .4rem 2.4rem}.page-create-wrapper .container[data-v-358dabd6] .com-card-wrap .body{padding:0}.page-create-wrapper .container .operate-bar[data-v-358dabd6]{width:100%;justify-content:center;display:flex;margin-top:.53333rem}.page-create-wrapper .container .operate-bar[data-v-358dabd6] .com-check-btn{height:.90667rem;width:3.2rem}.page-create-wrapper .footer-bar[data-v-358dabd6]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:.4rem;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #efeff4}.page-create-wrapper .footer-bar .trial-result[data-v-358dabd6]{width:5.86667rem;color:#ff5840;font-size:.32rem;font-weight:600}.page-create-wrapper .footer-bar .trial-result .result-num[data-v-358dabd6]{font-size:.61333rem;font-weight:500;margin-left:.17333rem}.page-create-wrapper .footer-bar .trial-operate button[data-v-358dabd6]{width:3.73333rem}\n',document.head.appendChild(e),System.register(["./vendor-legacy-c0d7778e.js","./index-legacy-40f0d3e2.js","./index-legacy-9949c8bd.js","./index-legacy-44bebc79.js","./trial-legacy-f136741f.js"],(function(e){"use strict";var r,a,t,o,d,i,s,l,p,n,u,c,m,f,v,k,g,b,h,L,I,w,y,P,R,C,V,_,O,D,j,x,S;return{setters:[function(e){r=e.g,a=e.a5,t=e.C,o=e.x,d=e.X,i=e.r,s=e.h,l=e.m,p=e.F,n=e.E,u=e.y,c=e.n,m=e.I,f=e.j,v=e.k,k=e.s,g=e.z,b=e.B,h=e.a1,L=e.a2,I=e.ad,w=e.Q,y=e.o,P=e.d,R=e.a6,C=e.D},function(e){V=e.g},function(e){_=e.u,O=e.P},function(e){D=e.b,j=e._,x=e.n},function(e){S=e.b}],execute:function(){const U=e=>(h("data-v-ddf563b0"),e=e(),L(),e),F={class:"com-product-list-wrapper"},N={class:"risk-item-wrapper"},z={class:"content"},T={class:"risk-premium"},Y=b(" 保费:"),E={class:"premium"},q={class:"risk-factor"},M={class:"factor"},A={class:"factor-value"},B=U((()=>u("span",{class:"factor-name"}," 保额(元) ",-1))),$={class:"factor"},H={class:"factor-value"},K=U((()=>u("span",{class:"factor-name"}," 保障期间 ",-1))),Q={class:"factor"},W={class:"factor-value"},X=U((()=>u("span",{class:"factor-name"}," 缴费期间 ",-1))),G={class:"operate-bar"},J=b("删除"),Z=b("+ 附加险"),ee=b("修改"),re={class:"content"},ae={class:"risk-premium"},te=b(" 保费:"),oe={class:"premium"},de={class:"risk-factor"},ie={class:"factor"},se={class:"factor-value"},le=U((()=>u("span",{class:"factor-name"}," 保额(元) ",-1))),pe={class:"factor"},ne={class:"factor-value"},ue=U((()=>u("span",{class:"factor-name"}," 保障期间 ",-1))),ce={class:"factor"},me={class:"factor-value"},fe=U((()=>u("span",{class:"factor-name"}," 缴费期间 ",-1))),ve={class:"operate-bar"},ke=b("删除"),ge=b("+ 附加险"),be=b("修改"),he={class:"premium-total"},Le=b(" 保费: "),Ie={class:"premium"};var we=j(r({props:{productRiskList:{default:()=>[]},enumList:{default:()=>({})},productInfo:{default:()=>({})},productData:{default:()=>({})},pickProductPremium:{type:Function,default:()=>{}},productNum:{default:0}},emits:["deleteRisk","updateRisk","addRisk"],setup(e,{emit:r}){const b=e,[h,L]=a(),I=t({checkedList:[],disabledList:[],riderRiskList:[],mainRiskData:{},totalPremium:0}),w=o((()=>{var e,r;return(null===(e=b.productData)||void 0===e||null===(r=e.riskDetailVOList)||void 0===r?void 0:r[0].optionalRiderRiskVOList)||[]})),y=o((()=>{var e,r;return(null===(e=b.productData)||void 0===e||null===(r=e.riskDetailVOList)||void 0===r?void 0:r[0].collocationVOList)||[]})),P=()=>{r("updateRisk",b.productInfo)},R=e=>{r("deleteRisk",e,b.productInfo)},C=e=>{r("updateRisk",e,b.productInfo)},V=e=>{L(!0),r("addRisk",e,b.productInfo)};return d((()=>b.productInfo),(e=>{var r;let a=0;const t=e=>{e.forEach((e=>{var r;a+=e.premium,null!==(r=e.riderRiskVOList)&&void 0!==r&&r.length&&t(e.riderRiskVOList)}))};t(e.proposalProductRiskList||[]),null==b||null===(r=b.pickProductPremium)||void 0===r||r.call(b,{[`${e.productId}`]:a}),I.value.totalPremium=a}),{deep:!0,immediate:!0}),(r,a)=>{const t=i("ProTitle"),o=i("ProCheckButton");return s(),l("div",F,[(s(!0),l(p,null,n(e.productRiskList,(r=>{var a,d,i,g;return s(),l("div",{key:r.riskId},[u("div",N,[c(t,{"risk-type":r.riskType,title:r.riskName},null,8,["risk-type","title"]),u("div",z,[u("div",T,[Y,u("span",E,"￥"+m(r.premium.toLocaleString()),1)]),u("div",q,[u("div",M,[u("span",A,m(r.amount.toLocaleString()),1),B]),u("div",$,[u("span",H,m(r.coveragePeriod),1),K]),u("div",Q,[u("span",W,m(r.chargePeriod),1),X])]),u("div",G,[e.productNum?(s(),f(o,{key:0,round:32,class:"border",onClick:e=>R(r)},{default:v((()=>[J])),_:2},1032,["onClick"])):k("",!0),null!==(a=e.productData)&&void 0!==a&&null!==(d=a.riskDetailVOList)&&void 0!==d&&null!==(i=d[0])&&void 0!==i&&null!==(g=i.optionalRiderRiskVOList)&&void 0!==g&&g.length?(s(),f(o,{key:1,activated:"",round:32,onClick:e=>V(r)},{default:v((()=>[Z])),_:2},1032,["onClick"])):k("",!0),c(o,{activated:"",round:32,onClick:e=>C(r)},{default:v((()=>[ee])),_:2},1032,["onClick"])])])]),(s(!0),l(p,null,n(r.riderRiskVOList,(a=>{var d,i,p,n;return s(),l("div",{key:a.riskCode,class:"risk-item-wrapper"},[c(t,{"risk-type":a.riskType,title:a.riskName},null,8,["risk-type","title"]),u("div",re,[u("div",ae,[te,u("span",oe,"￥"+m(a.premium.toLocaleString()),1)]),u("div",de,[u("div",ie,[u("span",se,m(r.amount.toLocaleString()),1),le]),u("div",pe,[u("span",ne,m(r.coveragePeriod),1),ue]),u("div",ce,[u("span",me,m(r.chargePeriod),1),fe])]),u("div",ve,[e.productNum?(s(),f(o,{key:0,round:32,class:"border",onClick:e=>R(a)},{default:v((()=>[ke])),_:2},1032,["onClick"])):k("",!0),null!==(d=e.productData)&&void 0!==d&&null!==(i=d.riskDetailVOList)&&void 0!==i&&null!==(p=i[0])&&void 0!==p&&null!==(n=p.optionalRiderRiskVOList)&&void 0!==n&&n.length?(s(),f(o,{key:1,activated:"",round:32,onClick:e=>V(a)},{default:v((()=>[ge])),_:2},1032,["onClick"])):k("",!0),c(o,{activated:"",round:32,onClick:e=>C(a)},{default:v((()=>[be])),_:2},1032,["onClick"])])])])})),128)),u("div",he,[Le,u("span",Ie,"￥"+m(I.value.totalPremium.toLocaleString()),1)])])})),128)),g(h)?(s(),f(S,{key:0,modelValue:I.value.checkedList,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value.checkedList=e),show:g(h),disabled:I.value.disabledList,"risk-list":g(w),"collocation-list":g(y),onFinished:P,onClose:a[1]||(a[1]=e=>g(L)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):k("",!0)])}}}),[["__scopeId","data-v-ddf563b0"]]);const ye={class:"container"},Pe=(e=>(h("data-v-358dabd6"),e=e(),L(),e))((()=>u("span",null,"计划书名称",-1))),Re={class:"operate-bar"},Ce=b("添加主险"),Ve={class:"footer-bar"},_e={class:"trial-result"},Oe=b(" 总保费 "),De={class:"result-num"},je={class:"trial-operate"},xe=b("保存并预览");e("default",j(r({setup(e){const[r,o]=a(!1),[b,h]=a(),L=t({proposalHolder:{},proposalInsuredList:[{name:"",gender:"",birthday:"",proposalInsuredProductList:[]}],proposalName:"",totalPremium:0,relationUserType:2}),j=I(),S=w(),U=_(),{id:F,type:N="add"}=S.query,z=t({enumList:{},productId:0,productCollection:{},productInfo:{},productPremium:{}}),T=t();t({}),t([]);const Y=(e,r)=>{const a=r;C.confirm({message:"确认删除该险种？"}).then((()=>{1===e.riskType?L.value.proposalInsuredList[0].proposalInsuredProductList=L.value.proposalInsuredList[0].proposalInsuredProductList.filter((e=>e.productId!==r.productId)):a.proposalProductRiskList[0].riderRiskVOList=a.proposalProductRiskList[0].riderRiskVOList.filter((r=>r.riskId!==e.riskId))}))},E=(e,r)=>{z.value.productId=r.productId,z.value.productInfo=r,h(!0)},q=e=>{},M=(e={})=>{Object.assign(z.value.productPremium,e),L.value.totalPremium=Object.values(z.value.productPremium).reduce(((e,r)=>e+r),0)},A=()=>{((e={})=>D.get(`/api/app/insure/proposal/queryProposalDetail/${e.id}`,e))({id:F}).then((({code:e,data:r})=>{"10000"===e&&Object.assign(L.value,r)}))},B=()=>{T.value.validate().then((()=>{var e;(e=L.value,D.post("/api/app/insure/proposal/AddOrUpdateProposal",e)).then((({code:e,data:r})=>{"10000"===e&&j.push({path:"/compositionProposal",query:{id:r}})}))}))},$=e=>{L.value.proposalInsuredList[0].proposalInsuredProductList=L.value.proposalInsuredList[0].proposalInsuredProductList.map((r=>{let a=r;return r.productId===e.proposalInsuredList[0].proposalInsuredProductList[0].productId&&(a={...e.proposalInsuredList[0].proposalInsuredProductList[0]}),a})),h(!1)},H=e=>{((e={})=>D.post("/api/app/insure/product/listInsureProductDetail",e))(e).then((({code:e,data:r})=>{"10000"===e&&(z.value.productCollection=r)})).finally((()=>{}))},K=()=>{U.setProposalInfo(L.value),j.push({path:"/proposalList",query:{isCreateProposal:"1"}})},Q=()=>{h(!1)};return y((()=>{const e=U.$state.trialData,r=U.$state.proposalInfo;F?A():!Object.keys(r).length&&e.length?Object.assign(L.value,e[0]):Object.keys(r).length&&e.length&&(r.proposalInsuredList[0].proposalInsuredProductList.push(...e[0].proposalInsuredList[0].proposalInsuredProductList),L.value=r),V({dictCodeList:["RISK_PAYMENT_PERIOD","RISK_INSURANCE_PERIOD"]}).then((({code:e,data:r})=>{if("10000"===e){const e={};r.forEach((r=>{e[r.dictCode]=r.dictItemList})),z.enumList=e}}))})),d((()=>{var e;return null===(e=L.value.proposalInsuredList[0].proposalInsuredProductList)||void 0===e?void 0:e.length}),(()=>{const e=L.value.proposalInsuredList[0].proposalInsuredProductList.map((e=>({productId:e.productId,source:2})));H({voList:e})})),(e,a)=>{const t=i("VanField"),d=i("ProCard"),h=i("ProRadioButton"),I=i("VanForm"),w=i("ProCheckButton"),y=i("VanButton"),C=i("van-datetime-picker"),V=i("van-popup"),_=i("ProPageWrap");return s(),f(_,{class:"page-create-wrapper"},{default:v((()=>[u("div",ye,[c(I,{ref_key:"formRef",ref:T,"input-align":"right","error-message-align":"right"},{default:v((()=>[c(d,null,{default:v((()=>[c(t,{modelValue:L.value.proposalName,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value.proposalName=e),name:"proposalName",placeholder:"请输入计划书名称",rules:[{required:!0,message:"请输入计划书名称"}]},{label:v((()=>[Pe])),_:1},8,["modelValue"])])),_:1}),c(d,{title:"被保人信息"},{default:v((()=>[c(t,{modelValue:L.value.proposalInsuredList[0].name,"onUpdate:modelValue":a[1]||(a[1]=e=>L.value.proposalInsuredList[0].name=e),name:"name",label:"姓名",placeholder:"请输入（选填）"},null,8,["modelValue"]),c(t,{modelValue:L.value.proposalInsuredList[0].birthday,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value.proposalInsuredList[0].birthday=e),name:"birthday",label:"出生日期",formate:"YYYY-MM-DD","is-link":"",readonly:"",placeholder:"请选择",rules:[{required:!0,message:"请选择"}],onClick:a[3]||(a[3]=e=>g(o)(!0))},null,8,["modelValue"]),c(t,{modelValue:L.value.proposalInsuredList[0].gender,"onUpdate:modelValue":a[5]||(a[5]=e=>L.value.proposalInsuredList[0].gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择"}]},{input:v((()=>[c(h,{modelValue:L.value.proposalInsuredList[0].gender,"onUpdate:modelValue":a[4]||(a[4]=e=>L.value.proposalInsuredList[0].gender=e),options:g(x)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])])),_:1})])),_:1},512),(s(!0),l(p,null,n(L.value.proposalInsuredList[0].proposalInsuredProductList||[],(e=>(s(),f(d,{key:e.productId},{default:v((()=>{var r,a;return[c(we,{"enum-list":z.value.enumList,"product-risk-list":e.proposalProductRiskList,"product-info":e,"product-num":(null===(r=L.value.proposalInsuredList[0])||void 0===r||null===(a=r.proposalInsuredProductList)||void 0===a?void 0:a.length)-1,"product-data":z.value.productCollection[e.productId],"pick-product-premium":M,onAddRisk:q,onUpdateRisk:E,onDeleteRisk:Y},null,8,["enum-list","product-risk-list","product-info","product-num","product-data"])]})),_:2},1024)))),128)),u("div",Re,[c(w,{activated:"",round:34,onClick:K},{default:v((()=>[Ce])),_:1})])]),u("div",Ve,[u("span",_e,[Oe,u("span",De,"￥"+m(L.value.totalPremium.toLocaleString()),1)]),u("div",je,[c(y,{type:"primary",onClick:B},{default:v((()=>[xe])),_:1})])]),c(V,{show:g(r),"onUpdate:show":a[8]||(a[8]=e=>R(r)?r.value=e:null),position:"bottom"},{default:v((()=>[c(C,{type:"date",onConfirm:a[6]||(a[6]=e=>{L.value.proposalInsuredList[0].birthday=g(P)(e).format("YYYY-MM-DD"),g(o)(!1)}),onCancel:a[7]||(a[7]=e=>g(o)(!1))})])),_:1},8,["show"]),g(b)?(s(),f(O,{key:0,"is-show":g(b),type:"edit","product-data":z.value.productCollection[z.value.productId],"form-info":z.value.productInfo,holder:L.value.proposalHolder,insured:L.value.proposalInsuredList[0],onClose:Q,onFinished:$},null,8,["is-show","product-data","form-info","holder","insured"])):k("",!0)])),_:1})}}}),[["__scopeId","data-v-358dabd6"]]))}}}))}();

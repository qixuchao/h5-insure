import{_ as e,d as t,cI as a,i as n,h as i,j as s,r as o,k as l,O as r,bb as d,d3 as c,o as u,m,w as p,a as f,a8 as v,e as h,u as I,b as y,c as b,q as L,F as g,an as j,f as O,p as k,bd as N,V as w,a9 as D,dI as V,T as A,ae as q,aC as C,aD as x,bR as T,bs as P}from"./index-6db00c9c.js";import{C as R}from"./index-43ea8e8b.js";import{_}from"./index-409e3129.js";import{c as Y}from"./order-fb078c91.js";import{m as Q}from"./trial-e577dfe3.js";import"./infoCollection-d9f8c225.js";import"./core-e0d74a68.js";import{I as H}from"./infoItem-f8ea6284.js";import{I as M}from"./insuranceNotificationInformation-f86f5608.js";import{a as U,_ as E}from"./PolicyInfo-a5f4abbd.js";import{l as S,b as F}from"./product-008ee841.js";import{Q as B}from"./questionnaire-62331097.js";import{P as G}from"./index-663ab3ee.js";import{Q as X}from"./notice-33e6eedd.js";import{g as $}from"./utils-d851edce.js";import{O as z}from"./OperateBtn-7477322e.js";import{C as J}from"./index-a29b8ded.js";import"./cloneDeep-a90e3cce.js";import"./lodash-868830bc.js";import"./util-dfe03a2b.js";import"./trial-2055f087.js";import"./constants-fe95ef6f.js";const K=e=>(C("data-v-4e0fb308"),e=e(),x(),e),W={class:"page-order-detail"},Z=K((()=>f("div",{class:"card-item-name"},"订单进度",-1))),ee={class:"card-item-icon"},te={class:"card card-list"},ae={class:"card-list-title"},ne={class:"card card-list"},ie={class:"card-list-head"},se=K((()=>f("div",{class:"card-list-title"},"险种信息",-1))),oe={class:"card-list-premium"},le={class:"card"},re={class:"card"},de=K((()=>f("div",{class:"tenantOrderAttachmentList-title"},"投保人资料",-1))),ce={class:"tenantOrderAttachmentList-img"},ue=["src"],me=K((()=>f("div",{class:"tenantOrderAttachmentList-title"},"被保人资料",-1))),pe={class:"tenantOrderAttachmentList-img"},fe=["src"],ve=K((()=>f("div",{class:"tenantOrderAttachmentList-title"},"受益人资料",-1))),he={class:"tenantOrderAttachmentList-img"},Ie=["src"],ye=K((()=>f("div",{class:"tenantOrderAttachmentList-title"},"监护人资料",-1))),be={class:"tenantOrderAttachmentList-img"},Le=["src"],ge=K((()=>f("div",{class:"tenantOrderAttachmentList-title"},"银行卡信息",-1))),je={class:"tenantOrderAttachmentList-img"},Oe=["src"],ke={class:"card"},Ne={class:"card"},we={class:"footer-button"};var De=e(t({__name:"index",setup(e){const t=a(),C=n();i();const x=s();s([]);const K=s([]),De=[{title:"险种名称",dataIndex:"riskName",width:200},{title:"保险金额/份数",dataIndex:"regularPremium",width:180,render:(e,t)=>e.regularPremium/e.copy},{title:"保障期间",dataIndex:"coveragePeriodDesc",width:180},{title:"交费期间",dataIndex:"chargePeriodDesc",width:180},{title:"首期保费",dataIndex:"initialPremium",width:180,render:(e,t)=>e.initialPremium}],Ve=o({customerQuestions:[],payInfo:{schema:[],config:[],formData:[]},policyInfo:{schema:[],config:[],formData:{}}}),{query:{orderNo:Ae,agentCode:qe,tenantId:Ce}}=C,xe=()=>{D("orderTrajectory",{orderNo:Ae,orderId:x.value.id,tenantId:Ce})},Te=s(!1),Pe=s(),Re=s([]),_e=l((()=>e=>{const{tenantOrderAttachmentList:t}=x.value;return(null==t?void 0:t.length)?t.filter((t=>t.objectType===e)):[]})),Ye=s(),Qe=(e=!0)=>{V({orderNo:Ae,agentCode:qe,tenantId:Ce}).then((({code:t,data:a})=>{if("10000"===t){if(x.value=a,!e)return;Ye.value=a,x.value.tenantOrderPayInfoList=a.tenantOrderPayInfoList||[];const t=Object.keys(x.value.productCodeList).map((e=>({productCode:e,mergeRiskReqList:x.value.productCodeList[e]})));F(n={productList:t}).then((({data:e,code:t})=>{var a,n;"10000"===t&&(Re.value=null==(n=null==(a=e.riskMaterialList)?void 0:a[0])?void 0:n.productMaterialList)})),Q(n).then((({data:e,code:t})=>{if("10000"===t){const{productDetailResList:t,productFactor:a}=e;Pe.value=a;const{payInfo:n,other:i}=P(a);Ve.payInfo={...Ve.payInfo,...n},Ve.policyInfo={...Ve.policyInfo,...i}}})),(async e=>{let t=[];const{code:a,data:n}=await T({orderNo:Ae,tenantId:Ce});"10000"===a&&(t=n.productQuestionnaireVOList);const{code:i,data:s}=await S(e);if("10000"===i){const{productQuestionnaireVOList:e}=s||{},a=e.filter((e=>e.businessType!==X.VISIT));Ve.customerQuestions=a.map((e=>{const{questionnaireDetailResponseVO:a,questionnaireId:n,questionnaireName:i}=e||{},{questions:s,basicInfo:o}=a||{},{objectType:l,questionnaireType:r}=o||{};if(r===B.TEXT){const{content:e,textType:t}=(null==s?void 0:s[0])||{};return{content:e,contentType:$(`${t}`,e),questionnaireId:n,questionnaireName:i}}const d=(t||[]).find((e=>e.questionnaireId===n));return{...a,contentType:"question",...null==d?void 0:d.questionnaireDetailResponseVO,questionnaireId:n,questionnaireName:i}}))}})({productCodeList:Object.keys(x.value.productCodeList)})}var n}))},He=()=>{Y({orderNo:Ae,tenantId:Ce}).then((({code:e,data:t})=>{"10000"===e&&(A("撤单成功"),Qe(!1))}))};return r((()=>{Qe()})),(e,a)=>{const n=q,i=_,s=R,o=J,l=d,r=c("loading");return u(),m(l,{"theme-vars":I(t)},{default:p((()=>{var e,t,l,d,c,D,V,A,q,C,T,P,R,_;return[f("div",W,[f("div",{class:"card card-head",onClick:xe},[Z,f("div",ee,[v(h(null==(e=I(x))?void 0:e.orderStepDesc)+" ",1),y(n,{name:"arrow-right"})])]),f("div",te,[f("p",ae,h(null==(t=I(x))?void 0:t.productName),1),y(H,{label:"订单号",content:null==(l=I(x))?void 0:l.orderNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),(u(!0),b(g,null,L((null==(c=null==(d=I(x))?void 0:d.applicationNoList)?void 0:c.length)?null==(D=I(x))?void 0:D.applicationNoList:[""],(e=>(u(),m(H,{key:e,label:"投保单号",content:e,line:"","is-copy":"","min-width":"other"},null,8,["content"])))),128)),y(H,{label:"创建时间",content:I(j)(null==(V=I(x))?void 0:V.gmtCreated).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),y(H,{label:"投保时间",content:I(j)(null==(A=I(x))?void 0:A.orderDate).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),y(H,{label:"投保保费",content:null==(q=I(x))?void 0:q.orderAmount,line:"","min-width":"other"},null,8,["content"]),y(H,{label:"承保保费",content:null==(C=I(x))?void 0:C.orderAmount,line:"","min-width":"other"},null,8,["content"])]),f("div",ne,[f("div",ie,[se,f("div",oe,[v(" 首年保费："),f("span",null,h(null==(T=I(x))?void 0:T.orderAmount),1)])]),(null==(R=null==(P=I(x))?void 0:P.riskList)?void 0:R.length)>0?(u(),m(i,{key:0,columns:De,class:"table","data-source":null==(_=I(x))?void 0:_.riskList},null,8,["data-source"])):O("",!0)]),f("div",le,[I(Ve).policyInfo.schema.length?(u(),m(I(U),{key:0,modelValue:I(x),"onUpdate:modelValue":a[0]||(a[0]=e=>k(x)?x.value=e:null),schema:I(Ve).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):O("",!0)]),f("div",re,[y(o,{modelValue:I(K),"onUpdate:modelValue":a[1]||(a[1]=e=>k(K)?K.value=e:null)},{default:p((()=>[y(s,{title:"影像信息",name:"1"},{default:p((()=>[de,f("div",ce,[(u(!0),b(g,null,L(I(_e)(I(N).HOLDER),((e,t)=>(u(),b("div",{key:t,class:"attachment-item"},[f("img",{src:e.uri,alt:""},null,8,ue)])))),128))]),me,f("div",pe,[(u(!0),b(g,null,L(I(_e)(I(N).INSURED),((e,t)=>(u(),b("div",{key:t,class:"attachment-item"},[f("img",{src:e.uri,alt:""},null,8,fe)])))),128))]),ve,f("div",he,[(u(!0),b(g,null,L(I(_e)(I(N).BENEFICIARY),((e,t)=>(u(),b("div",{key:t,class:"attachment-item"},[f("img",{src:e.uri,alt:""},null,8,Ie)])))),128))]),ye,f("div",be,[(u(!0),b(g,null,L(I(_e)(I(N).GUARDIAN),((e,t)=>(u(),b("div",{key:t,class:"attachment-item"},[f("img",{src:e.uri,alt:""},null,8,Le)])))),128))]),ge,f("div",je,[(u(!0),b(g,null,L(I(_e)(I(N).INIT_SIGN),((e,t)=>(u(),b("div",{key:t,class:"attachment-item"},[f("img",{src:e.uri,alt:""},null,8,Oe)])))),128))])])),_:1})])),_:1},8,["modelValue"])]),f("div",ke,[y(M,{title:"投保告知信息",data:I(Ve).customerQuestions||[]},null,8,["data"])]),f("div",Ne,[I(Pe)?(u(),m(G,{key:0,ref:"personalInfoRef",modelValue:I(Ye),"onUpdate:modelValue":a[2]||(a[2]=e=>k(Ye)?Ye.value=e:null),"product-factor":I(Pe),"is-view":""},null,8,["modelValue","product-factor"])):O("",!0)]),I(Ve).payInfo.schema.length?(u(),m(I(E),{key:0,ref:"payInfoRef",modelValue:I(x).tenantOrderPayInfoList,"onUpdate:modelValue":a[3]||(a[3]=e=>I(x).tenantOrderPayInfoList=e),schema:I(Ve).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):O("",!0),w((u(),b("div",we,[y(z,{detail:I(x),onHandleCancel:He},null,8,["detail"])])),[[r,I(Te)]])])]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-4e0fb308"]]);export{De as default};

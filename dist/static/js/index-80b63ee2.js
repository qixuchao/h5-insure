import{_ as e,d as t,u as n,a,r,o,b as l,c as u,e as i,w as s,f as d,P as c,g as p,h as m,F as f,i as v,j as y,t as g,k as b,l as C,m as S,n as _,T as I,p as k,q as h,s as T,v as q,x as j,y as w,z as V}from"./index-4c2d8b53.js";import{P as N}from"./pdfh5-008ca364.js";import{s as Q,g as P}from"./inform-60cf5be6.js";import{s as O}from"./useStorage-16bb1f6c.js";import{N as U}from"./notice-a5228c22.js";const x={class:"problem"},A={class:"footer-button"};var D=e(t({__name:"question",props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const h=e;n();const T=a(),q=r([]),{questionnaireType:j}=T.query,{orderNo:w="2022021815432987130620",productCode:V="CQ75CQ76",templateId:N=1,agentCode:Q="65434444",orderId:P=13005,tenantId:O=9991000007}=T.query,U={1:"投保人",2:"被保人",3:"代理人"},D=r([]),J=e=>e?JSON.parse(e).map((e=>({title:e.value,value:e.uid}))):[],z=()=>{(D.value||[]).filter((e=>{var t;return 0===e.singleAnswer||e.singleAnswer||(null==(t=e.multipleChoose)?void 0:t.length)})).length!==D.value.length?I("请完成所有题目进行下一步"):t("onSubmitCurrentStatus",1,JSON.stringify(D.value))},L=()=>{k({orderNo:w,saleUserId:Q,tenantId:O}).then((({code:e,data:t})=>{if("10000"===e){const e=t.tenantOrderNoticeList.findIndex((e=>1===e.isDone&&+e.objectId===h.currentPageInfo[0].questionnaireId));D.value=-1!==e?(e=>JSON.parse(e))(t.tenantOrderNoticeList[e].content):h.currentPageInfo.map((e=>2===e.questionType?{multipleChoose:[],...e}:{singleAnswer:3===e.questionType?0:"",...e}))}}))};return o((()=>{q.value=[],L()})),(e,t)=>{const n=l("van-radio"),a=l("van-cell"),r=l("van-cell-group"),o=l("van-radio-group"),I=l("van-checkbox"),k=l("van-checkbox-group"),h=l("van-field"),T=l("van-button"),w=l("ProPageWrap");return u(),i(w,{class:"com-question"},{default:s((()=>[d(c,{title:`${U[p(j)]}健康告知书`},{default:s((()=>[(u(!0),m(f,null,v(D.value,((e,l)=>(u(),m("div",{key:l,class:"question-item"},[y("div",x,g(l+1)+". "+g(e.title),1),1===e.questionType?(u(),i(o,{key:0,modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t},{default:s((()=>[d(r,{inset:""},{default:s((()=>[(u(!0),m(f,null,v(J(e.options),((t,r)=>(u(),i(a,{key:r,title:t.title,clickable:"",onClick:t=>e.singleAnswer=r},{"right-icon":s((()=>[d(n,{name:r},null,8,["name"])])),_:2},1032,["title","onClick"])))),128))])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])):b("",!0),2===e.questionType?(u(),i(k,{key:1,modelValue:e.multipleChoose,"onUpdate:modelValue":t=>e.multipleChoose=t},{default:s((()=>[d(r,{inset:""},{default:s((()=>[(u(!0),m(f,null,v(J(e.options),((e,n)=>(u(),i(a,{key:e.uid,clickable:"",title:e.title,onClick:e=>(e=>{q.value[e].toggle()})(n)},{"right-icon":s((()=>[d(I,{ref_for:!0,ref:e=>q.value[n]=e,shape:"square",name:n,onClick:t[0]||(t[0]=C((()=>{}),["stop"]))},null,8,["name"])])),_:2},1032,["title","onClick"])))),128))])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])):b("",!0),3===e.questionType?(u(),i(S,{key:2,modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t,options:[{label:"是",value:"Y"},{label:"否",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):b("",!0),4===e.questionType?(u(),i(r,{key:3,inset:""},{default:s((()=>[d(h,{modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)):b("",!0)])))),128))])),_:1},8,["title"]),y("div",A,[d(T,{type:"primary",block:"",onClick:z},{default:s((()=>[_("提交")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-43eb6cf6"]]);const J={class:"com-document"},z={class:"title"},L={class:"content"},W={class:"footer-button"};var $=e(t({__name:"InsuranceNotice",props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e;return(e,a)=>{const r=l("van-button"),o=l("ProPageWrap"),c=h("dompurify-html");return u(),i(o,null,{default:s((()=>{var e,o;return[y("div",J,[y("div",z,g(null==(e=n.currentPageInfo[0])?void 0:e.title),1),T(y("div",L,null,512),[[c,null==(o=n.currentPageInfo[0])?void 0:o.content]]),y("div",W,[d(r,{type:"primary",onClick:a[0]||(a[0]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("了解并继续")])),_:1})])])]})),_:1})}}}),[["__scopeId","data-v-6e53a5c6"]]);const F={class:"com-pdf-viewer"},Y=["id","isee_pdf"],B={key:2,class:"footer-button"},E={key:3,class:"footer-button"};var G=e(t({__name:"file",props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e,a=q(),o=r(!1);r(!0);const c=r(null),f=j((()=>["png","jpg","jpeg"].some((e=>n.url.includes(e))))),v=async()=>{o.value=!0,setTimeout((()=>{(()=>{var e;try{c.value=new N(`#${a}`,{pdfurl:n.url,renderType:"svg",lazy:!0}),null==(e=c.value)||e.on("complete",((e,t,n)=>{"error"===e&&I("文件损坏，无法打开！")}))}catch(t){}})()}),0)};return w((()=>{v()})),(e,r)=>{const o=l("van-image"),c=l("van-button");return u(),m("div",F,[p(f)?(u(),i(o,{key:0,width:"100%",height:"80vh",fit:"contain",src:n.url},null,8,["src"])):(u(),m("div",{key:1,id:p(a),isee_pdf:e.pdfUrl,class:"pdf-wapper"},null,8,Y)),"question"===n.materialType?(u(),m("div",B,[d(c,{plain:"",type:"primary",onClick:r[0]||(r[0]=e=>t("onSubmitCurrentStatus",2))},{default:s((()=>[_("部分为是")])),_:1}),d(c,{type:"primary",onClick:r[1]||(r[1]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("以上皆否")])),_:1})])):(u(),m("div",E,[d(c,{type:"primary",onClick:r[2]||(r[2]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("了解并继续")])),_:1})]))])}}}),[["__scopeId","data-v-ecd060c6"]]);const H={class:"iframe-wrap"},K=["src"],M={key:0,class:"footer-button"},R={key:1,class:"footer-button"};var X=e(t({__name:"link",props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e;return(e,a)=>{const r=l("van-button");return u(),m("div",H,[y("iframe",{src:n.url,frameborder:"0"},null,8,K),"question"===n.materialType?(u(),m("div",M,[d(r,{plain:"",type:"primary",onClick:a[0]||(a[0]=e=>t("onSubmitCurrentStatus",2))},{default:s((()=>[_("部分为是")])),_:1}),d(r,{type:"primary",onClick:a[1]||(a[1]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("以上皆否")])),_:1})])):(u(),m("div",R,[d(r,{type:"primary",onClick:a[2]||(a[2]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[_("了解并继续")])),_:1})]))])}}}),[["__scopeId","data-v-1fc4d3ec"]]);const Z={class:"com-health-notice"},ee=t({__name:"index",setup(e){const t=n(),r=a(),o=O.get("questionData"),{materialType:l="question",questionnaireType:s="1",orderNo:d="2022021815432987130620",productCode:c="CQ75CQ76",templateId:f=1,agentCode:v="65434444",orderId:y=13005,tenantId:g=9991000007}=r.query&&r.query,C=V({pageData:{},currentQuestionInfo:[]}),S=j((()=>"2"===s)),_=j((()=>{var e;return"1"===s&&([1].includes(null==(e=C.currentQuestionInfo[0])?void 0:e.textType)||1===(null==o?void 0:o.materialSource))})),I=j((()=>{var e;return"1"===s&&([2].includes(null==(e=C.currentQuestionInfo[0])?void 0:e.textType)||2===(null==o?void 0:o.materialSource))})),h=j((()=>{var e;return"1"===s&&([3].includes(null==(e=C.currentQuestionInfo[0])?void 0:e.textType)||3===(null==o?void 0:o.materialSource))})),T=(e,n)=>{var a;const{id:r,objectType:l,noticeObject:u,materialSource:i}=o;Q({content:n||(null==(a=C.currentQuestionInfo[0])?void 0:a.content),contentType:s||"3",isDone:e,noticeType:U[l]||"99",objectId:r,objectType:l||u,orderId:C.pageData.id,orderNo:d,tenantId:g}).then((({code:e,data:n})=>{"10000"===e&&t.go(-1)}))};return w((()=>{k({orderNo:d,saleUserId:v,tenantId:g}).then((({code:e,data:t})=>{"10000"===e&&Object.assign(C.pageData,t)})),(null==o?void 0:o.materialSource)?C.currentQuestionInfo=[{...null==o?void 0:o.materialSource,title:null==o?void 0:o.materialName,content:null==o?void 0:o.materialContent}]:(()=>{const{insurerCode:e,id:t,objectType:n,productCategory:a}=o;P({insurerCode:e,id:t,objectType:n,productCategory:a,orderNo:d,tenantId:g}).then((({code:e,data:t})=>{"10000"===e&&(C.currentQuestionInfo=t)}))})()})),(e,t)=>{var n,a;return u(),m("div",Z,[p(S)?(u(),i(D,{key:0,"current-page-info":p(C).currentQuestionInfo,onOnSubmitCurrentStatus:T},null,8,["current-page-info"])):b("",!0),p(I)?(u(),i($,{key:1,"material-type":p(l),"current-page-info":p(C).currentQuestionInfo,onOnSubmitCurrentStatus:T},null,8,["material-type","current-page-info"])):b("",!0),p(_)?(u(),i(G,{key:2,"material-type":p(l),url:null==(n=p(C).currentQuestionInfo[0])?void 0:n.content,onOnSubmitCurrentStatus:T},null,8,["material-type","url"])):b("",!0),p(h)?(u(),i(X,{key:3,"material-type":p(l),url:null==(a=p(C).currentQuestionInfo[0])?void 0:a.content,onOnSubmitCurrentStatus:T},null,8,["material-type","url"])):b("",!0)])}}});export{ee as default};

import{G as e,d as t,b as a,c as n,e as o,w as i,i as r,$ as s,a7 as l,f as c,E as d,Y as u,g as p,h as m,bz as f,a5 as v,R as y,U as I,u as h,A as _,r as g,o as j,a0 as P,a8 as b,a9 as C,aa as O,ab as k,k as w,j as x,P as L,p as S,q as V,a1 as N,n as E,a4 as A}from"./index-aba19b63.js";import{t as D}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-0b76c604.js";/* empty css              */import"./useDicData-d20faf56.js";import{_ as R}from"./PayInfo-8e5644a4.js";import{g as T,i as F}from"./trial-04ccd671.js";import{n as U}from"./nextStep-502de4c5.js";import{u as q}from"./useAttachment-03f8ce27.js";import{a as B,q as W}from"./product-02236136.js";import{g as Y}from"./utils-49e51976.js";import{u as M}from"./useOrder-c52515f6.js";import{P as $,B as G}from"./constants-7afb7c3d.js";import{P as J}from"./index-ee6d6392.js";import{P as z}from"./index-0a18ee42.js";import{R as H,b as K}from"./trial-5a0125d5.js";import"./isObjectLike-a9798079.js";import"./phoneVerify-ed80a6d8.js";import"./merge-84cb998c.js";import"./keysIn-b1e7a5ec.js";import"./index-1b33d495.js";import"./_getTag-5c78de73.js";import"./debounce-6981b306.js";import"./index-77332320.js";import"./bankCard-e403b462.js";import"./core-8dfefd77.js";import"./constant-8927d485.js";import"./infoCollection-d525b41a.js";import"./cloneDeep-f5e28e96.js";const Q={class:"com-insured-part-wrapper"},X={class:"content-wrapper"};var Z=e(t({__name:"InsureInfo",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup:e=>(t,y)=>{const I=f,h=v;return a(),n("div",Q,[o(h,{title:"保障信息"},{default:i((()=>{var t;return[r("div",X,[(a(!0),n(s,null,l((null==(t=e.productData)?void 0:t.riskList)||[],((e,t)=>{var i;return a(),n("div",{key:t,class:"risk-item"},[e.riskType===c(H).MAIN_RISK?(a(),n(s,{key:0},[r("p",null,d(e.riskName),1),o(I,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(I,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])],64)):(a(),n(s,{key:1},[o(I,{title:e.riskName,content:"投保"},null,8,["title"]),e.exemptFlag===c(u).YES?(a(),p(I,{key:0,title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])):(null==(i=e.liabilityList)?void 0:i.length)?(a(),n(s,{key:1},[o(I,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(I,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"]),o(I,{title:"交费方式",content:c(K)[e.paymentFrequency]},null,8,["content"])],64)):m("",!0)],64)),o(I,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(I,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])})),128)),o(I,{title:"首期总保费",class:"price",content:(e.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])]})),_:1})])}}),[["__scopeId","data-v-92348b0c"]]);const ee={class:"long-info-preview"},te={class:"footer-btn"},ae=r("span",null,"分享",-1),ne=t({__name:"infoPreview",setup(e){y((()=>I((()=>import("./index-8d297dea.js")),["static/js/index-8d297dea.js","static/css/index-fa4edf2a.css","static/js/index-aba19b63.js","static/css/index-9494d932.css","static/js/theme-65292714.js","static/js/index-0a18ee42.js","static/css/index-827a8544.css","static/js/utils-49e51976.js","static/js/infoCollection-d525b41a.js","static/js/trial-5a0125d5.js"]))),y((()=>I((()=>import("./index-9662a189.js")),["static/js/index-9662a189.js","static/css/index-4640d9aa.css","static/js/index-aba19b63.js","static/css/index-9494d932.css"])));const t=h(),s=M(),{productCode:l="",tenantId:d,agentCode:u="",agencyCode:f,saleChannelId:v,isShare:H,orderNo:K,extraInfo:Q,insurerCode:X,preview:ne}=t.query;let oe={};try{oe=JSON.parse(decodeURIComponent(Q))}catch(je){}const ie=_({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),re=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,se=g({imgUrl:"",desc:"",title:"",link:re}),le=g(),ce=g(),de=g({}),ue=g({}),pe=g([]),me=g(),fe=g({});g(!1),g(!1),g(0),g(!0),q(fe,me),g(!1);const ve=g(!1),ye=g(),Ie=()=>{U(s.value,((e,t)=>{t===L.JUMP_PAGE&&ye.value.handleShare()}))},he=async()=>{ne?S($.INFO_PREVIEW,t.query):(Object.assign(s.value,{extInfo:{...s.value.extInfo,buttonCode:G.INFO_PREVIEW,pageCode:$.INFO_PREVIEW}}),U(s.value,((e,a)=>{a===L.JUMP_PAGE&&V(e.nextPageCode,t.query)})))};_({tenantOrderPayInfoList:[]});const _e=g(),ge=async()=>{B({productCode:l,tenantId:d}).then((({data:e,code:t})=>{if("10000"===t){de.value=e;const{wxShareConfig:t,showWXShare:a,title:n,desc:o,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};a?Object.assign(se.value,{...t,imgUrl:t.image,isShare:a}):Object.assign(se.value,{title:n,desc:o,imgUrl:i,isShare:a}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&N(e.BASIC_INFO.themeType)}})),K&&T({orderNo:K,tenantId:d}).then((({code:e,data:t})=>{"10000"===e&&(Object.assign(s.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),_e.value=t,ve.value=!0)})),W({productCode:l}).then((({code:e,data:t})=>{var a,n,o,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:r}=t;me.value=e||[];const{basicInfo:{questionnaireType:s},questions:l,questionnaireName:c}=(null==(a=null==r?void 0:r[0])?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};s&&(pe.value=2===s?[{attachmentName:c,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:c,attachmentUri:null==(n=null==l?void 0:l[0])?void 0:n.content,attachmentType:Y(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(i=null==l?void 0:l[0])?void 0:i.content)}])}})),await F({productCode:l,isTenant:!ne}).then((({data:e,code:t})=>{var a,n;if("10000"===t){ue.value=e,fe.value=(null==(a=e.productPlanInsureVOList)?void 0:a[0])||{};const{payInfo:t}=D(null==(n=fe.value)?void 0:n.productFactor);ie.payInfo={...ie.payInfo,...t}}}))};return j((()=>{ge()})),(e,t)=>{var l,d,u,f,v,y;const I=E,h=A;return a(),n("div",ee,[o(I),o(Z,{"product-data":null==(u=null==(d=null==(l=c(s).insuredList)?void 0:l[0])?void 0:d.productList)?void 0:u[0],"total-premium":c(s).orderAmount},null,8,["product-data","total-premium"]),(null==(f=c(fe))?void 0:f.productFactor)?(a(),p(c(J),{key:0,ref_key:"personalInfoRef",ref:ce,modelValue:c(_e),"onUpdate:modelValue":t[0]||(t[0]=e=>P(_e)?_e.value=e:null),"product-factor":null==(v=c(fe))?void 0:v.productFactor,"multi-insured-config":null==(y=c(fe))?void 0:y.multiInsuredConfigVO,"is-view":""},null,8,["modelValue","product-factor","multi-insured-config"])):m("",!0),c(ie).payInfo.schema.length?(a(),p(c(R),{key:1,ref_key:"payInfoRef",ref:le,modelValue:c(s).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>c(s).tenantOrderPayInfoList=e),schema:c(ie).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):m("",!0),r("div",te,[!c(H)&&c(se).isShare&&c(b)()?(a(),p(k,C({key:0},c(se),{class:"share-btn",onClick:O(Ie,["stop"])}),{default:i((()=>[o(h,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ae])),_:1},16,["onClick"])):m("",!0),o(z,{shadow:!1,onClick:he},{default:i((()=>[w(e.$slots,"default",{},(()=>[x("下一步")]))])),_:3})])])}}});export{ne as default};

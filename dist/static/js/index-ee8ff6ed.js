var se=Object.defineProperty,ie=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var K=(e,r,i)=>r in e?se(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i,D=(e,r)=>{for(var i in r||(r={}))me.call(r,i)&&K(e,i,r[i]);if(U)for(var i of U(r))ve.call(r,i)&&K(e,i,r[i]);return e},I=(e,r)=>ie(e,pe(r));import{g as M,M as ce,r as b,A as B,o as V,i as A,t,B as v,a1 as be,m as ye,z as N,h as fe,k as y,P as ee,Q as ae,j as h,H as z,v as ge,K as De,p as Ie,E as $,O as Y,F as Fe,G as Ee,T as ke,$ as Te,J as Ce}from"./vendor-8d9a202a.js";import{P as H}from"./index-29abeb96.js";import{_ as J,e as Ve,U as he,P as Be}from"./index-e25d276f.js";import{a as S,P as R}from"./index-f19204b5.js";import{c as _}from"./utils-b6782348.js";import{u as Re}from"./useDicData-e76014e0.js";import{c as Se,a as _e,n as Ae}from"./index-06a2eef5.js";import"./utils-1fad1b5c.js";import"./index-899be8ad.js";const xe={class:"com-form-wrapper"},Le=M({props:{labelAlign:{default:"left"},inputAlign:{default:"right"},errorMessageAlign:{default:"right"},isView:{type:Boolean,default:!1}},setup(e,{expose:r}){ce("formProps",{isView:e.isView});const c=b({}),d=()=>{c.value.submit()},k=()=>c.value.getValues();return r({getValues:k,submit:d,validate:u=>new Promise((l,m)=>{c.value.validate(u).then(()=>{l(k())}).catch(E=>{m(E)})}),resetValidation:u=>{c.value.resetValidation(u)},getValidationStatus:"",scrollToField:(u,l)=>{c.value.scrollToField(u,l)}}),(u,l)=>{const m=B("VanForm");return V(),A("div",xe,[t(m,ye({ref_key:"formRef",ref:c,"label-align":e.labelAlign,"input-align":e.inputAlign,"error-message-align":e.errorMessageAlign},u.$attrs),{default:v(()=>[be(u.$slots,"default",{},void 0,!0)]),_:3},16,["label-align","input-align","error-message-align"])])}}});var q=J(Le,[["__scopeId","data-v-87b879f4"]]),P=(e=>(e[e.REAL_TIME=1]="REAL_TIME",e[e.BATCH=2]="BATCH",e))(P||{});const G=[{value:1,label:"\u5B9E\u65F6\u8F6C\u8D26"},{value:2,label:"\u6279\u91CF\u6263\u6B3E"}];_(G);var ue=(e=>(e[e.DEBIT=1]="DEBIT",e[e.CREDIT=2]="CREDIT",e[e.PRE_PAY=3]="PRE_PAY",e[e.PRE_CREDIT=4]="PRE_CREDIT",e[e.OTHER=5]="OTHER",e))(ue||{});const le=[{value:1,label:"\u501F\u8BB0\u5361"},{value:2,label:"\u8D37\u8BB0\u5361"},{value:3,label:"\u9884\u4ED8\u8D39\u5361"},{value:4,label:"\u51C6\u8D37\u8BB0\u5361"},{value:5,label:"\u5176\u4ED6"}];_(le);var C=(e=>(e[e.FIRST_TERM=1]="FIRST_TERM",e[e.RENEW_TERM=2]="RENEW_TERM",e[e.REPRISE=3]="REPRISE",e[e.OTHER=4]="OTHER",e))(C||{});const te=[{value:1,label:"\u9996\u671F\u652F\u4ED8"},{value:2,label:"\u7EED\u671F\u652F\u4ED8"},{value:3,label:"\u5E74\u91D1\u9886\u53D6"},{value:4,label:"\u5176\u4ED6"}];_(te);var F=(e=>(e[e.FIRST_SAME=1]="FIRST_SAME",e[e.RENEW_SAME=2]="RENEW_SAME",e[e.OTHER=3]="OTHER",e))(F||{});const we=[{value:1,label:"\u540C\u9996\u671F"},{value:2,label:"\u540C\u7EED\u671F"},{value:3,label:"\u5176\u4ED6"}];_(te);var oe=(e=>(e[e.AUTOMATIC_PADDING=1]="AUTOMATIC_PADDING",e[e.CANCEL=2]="CANCEL",e))(oe||{});const ne=[{value:1,label:"\u81EA\u52A8\u57AB\u4ED8"},{value:2,label:"\u4E2D\u6B62\u5408\u540C"}];_(ne);const Oe=e=>(ee("data-v-b4bb0f9e"),e=e(),ae(),e),je={class:"com-bank-card-info"},$e=Oe(()=>h("span",{class:"field-title"},[z("\u94F6\u884C\u5361\u7167\u7247 "),h("span",{class:"sub-title"},"(\u9700\u4E0A\u4F20\u6B63\u53CD\u4E24\u9762)")],-1)),He=M({props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:r}){const i=e,c=Re("BANK"),d=b({bankCardType:ue.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),k=p=>p&&p.length===2?!0:"\u8BF7\u4E0A\u4F20\u94F6\u884C\u5361\u6B63\u53CD\u9762\u7167\u7247";N(()=>i.modelValue,p=>{d.value=p},{immediate:!0}),N(d,p=>{r("update:modelValue",p)});const x=fe(()=>c.value.map(p=>({label:p.name,value:p.code})));return(p,s)=>(V(),A("div",je,[t(S,{modelValue:d.value.bankCardType,"onUpdate:modelValue":s[0]||(s[0]=u=>d.value.bankCardType=u),label:"\u5361\u7247\u7C7B\u578B",name:"bankCardType","data-source":y(le),"is-view":""},null,8,["modelValue","data-source"]),t(R,{modelValue:d.value.bankCardNo,"onUpdate:modelValue":s[1]||(s[1]=u=>d.value.bankCardNo=u),label:"\u94F6\u884C\u5361\u53F7",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"]),t(R,{"model-value":e.holderName,label:"\u6301\u5361\u4EBA",name:"accountName","is-view":""},null,8,["model-value"]),t(S,{modelValue:d.value.payBank,"onUpdate:modelValue":s[2]||(s[2]=u=>d.value.payBank=u),name:"payBank",label:"\u5F00\u6237\u94F6\u884C","data-source":y(x),required:""},null,8,["modelValue","data-source"]),t(R,{label:"\u94F6\u884C\u5361\u7167\u7247",block:"","label-width":"100%",name:"images",rules:[{validator:k}]},{label:v(()=>[$e]),input:v(()=>[t(Ve,{modelValue:d.value.images,"onUpdate:modelValue":s[3]||(s[3]=u=>d.value.images=u),"max-count":2,"upload-type":y(he).BANK_CARD},null,8,["modelValue","upload-type"])]),_:1},8,["rules"]),t(R,{modelValue:d.value.mobile,"onUpdate:modelValue":s[4]||(s[4]=u=>d.value.mobile=u),label:"\u9884\u7559\u624B\u673A\u53F7",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])]))}});var W=J(He,[["__scopeId","data-v-b4bb0f9e"]]);const qe=e=>(ee("data-v-83699cb4"),e=e(),ae(),e),We={class:"page-bank-card"},Pe={class:"reprise-card-list"},Ge=["onClick"],Me={class:"agree"},ze=z(" \u6295\u4FDD\u4EBA\u9605\u8BFB\u5E76\u63A5\u53D7 "),Je=qe(()=>h("div",{class:"file"},"\u300A\u94F6\u884C\u8F6C\u8D26\u6388\u6743\u300B",-1)),Qe={class:"footer-button footer"},Ze=z("\u4E0B\u4E00\u6B65"),Xe=M({setup(e){const r=ge(),i=De(),{orderNo:c="2022072710380711215",saleUserId:d="D1234567-1",tenantId:k="9991000007",templateId:x=1}=r.query;let p={};const s=b(""),u=b({payMethod:P.REAL_TIME,bankData:{imagesId:[]}}),l=b({payMethod:P.REAL_TIME,expiryMethod:oe.AUTOMATIC_PADDING,bankData:{imagesId:[]},payInfoType:F.FIRST_SAME}),m=b({bankData:{imagesId:[]}}),E=b(F.FIRST_SAME),L=b(!1),Q=b(),Z=b(),X=b(),re=g=>{E.value=g},de=()=>{var g,o,f;if(!L.value){ke.fail("\u8BF7\u52FE\u9009\u540C\u610F\u94F6\u884C\u8F6C\u8D26\u6388\u6743");return}Promise.all([(g=Q.value)==null?void 0:g.validate(),(o=Z.value)==null?void 0:o.validate(),(f=X.value)==null?void 0:f.validate()]).then(a=>{const w=[I(D({},a[0]),{id:u.value.id,paymentType:C.FIRST_TERM}),I(D({},a[1]),{id:l.value.id,paymentType:C.RENEW_TERM}),I(D({},a[2]),{id:m.value.id,paymentType:C.REPRISE,payInfoType:E.value})],T=[{category:24,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:5,type:"png",uri:a[0].images[0],id:u.value.bankData.imagesId[0]},{category:25,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:5,type:"png",uri:a[0].images[1],id:u.value.bankData.imagesId[1]}];l.value.payInfoType===F.OTHER&&(T.push({category:24,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:6,type:"png",uri:a[1].images[0],id:l.value.bankData.imagesId[0]}),T.push({category:25,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:6,type:"png",uri:a[1].images[1],id:l.value.bankData.imagesId[1]})),E.value===F.OTHER&&(T.push({category:24,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:7,type:"png",uri:a[2].images[0],id:m.value.bankData.imagesId[0]}),T.push({category:25,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:7,type:"png",uri:a[2].images[1],id:m.value.bankData.imagesId[1]})),Ae(I(D({},p),{pageCode:"payInfo",tenantOrderPayInfoList:w,extInfo:I(D({},p.extInfo),{templateId:"1",pageCode:"payInfo"}),operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:T})).then(n=>{const{code:O,data:j}=n;O==="10000"&&j.success&&i.push({path:Be[j.pageAction.data.nextPageCode],query:{orderNo:c,saleUserId:d,tenantId:k}})})})};return Ie(()=>{Se({pageCode:"payInfo",templateId:1}).then(g=>{console.log("res",g)}),_e({orderNo:c,saleUserId:d,tenantId:k}).then(g=>{const{code:o,data:f}=g;o==="10000"&&f&&(p=f,s.value=f.tenantOrderHolder.name,f.tenantOrderPayInfoList.forEach(a=>{a.paymentType===C.FIRST_TERM?(u.value=a,u.value.bankData=I(D({},a),{images:[],imagesId:[]})):a.paymentType===C.RENEW_TERM?(l.value=a,l.value.bankData=I(D({},a),{images:[],imagesId:[]})):a.paymentType===C.REPRISE&&(m.value=a,m.value.bankData=I(D({},a),{images:[],imagesId:[]}),E.value=a.payInfoType)}),f.tenantOrderAttachmentList.forEach(a=>{a.objectType===5?(a.category===24&&(u.value.bankData.images[0]=a.uri,u.value.bankData.imagesId[0]=a.id),a.category===25&&(u.value.bankData.images[1]=a.uri,u.value.bankData.imagesId[1]=a.id)):a.objectType===6?(a.category===24&&(l.value.bankData.images[0]=a.uri,l.value.bankData.imagesId[0]=a.id),a.category===25&&(l.value.bankData.images[1]=a.uri,l.value.bankData.imagesId[1]=a.id)):a.objectType===7&&(a.category===24&&(m.value.bankData.images[0]=a.uri,m.value.bankData.imagesId[0]=a.id),a.category===25&&(m.value.bankData.images[1]=a.uri,m.value.bankData.imagesId[1]=a.id))}))})}),(g,o)=>{const f=B("van-switch"),a=B("van-checkbox"),w=B("van-button"),T=B("ProPageWrap");return V(),$(T,null,{default:v(()=>[h("div",We,[t(H,{title:"\u9996\u671F\u652F\u4ED8"},{default:v(()=>[t(q,{ref_key:"form1",ref:Q},{default:v(()=>[t(S,{modelValue:u.value.payMethod,"onUpdate:modelValue":o[0]||(o[0]=n=>u.value.payMethod=n),name:"payMethod",required:"",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":y(G)},null,8,["modelValue","data-source"]),t(W,{modelValue:u.value.bankData,"onUpdate:modelValue":o[1]||(o[1]=n=>u.value.bankData=n),"holder-name":s.value},null,8,["modelValue","holder-name"])]),_:1},512)]),_:1}),t(H,{title:"\u7EED\u671F\u652F\u4ED8"},{default:v(()=>[t(q,{ref_key:"form2",ref:Z},{default:v(()=>[t(R,{label:"\u540C\u9996\u671F",name:"payInfoType"},{input:v(()=>[t(f,{modelValue:l.value.payInfoType,"onUpdate:modelValue":o[2]||(o[2]=n=>l.value.payInfoType=n),size:"22","active-value":y(F).FIRST_SAME,"inactive-value":y(F).OTHER},null,8,["modelValue","active-value","inactive-value"])]),_:1}),t(S,{modelValue:l.value.payMethod,"onUpdate:modelValue":o[3]||(o[3]=n=>l.value.payMethod=n),name:"payMethod",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":y(G),required:""},null,8,["modelValue","data-source"]),t(S,{modelValue:l.value.expiryMethod,"onUpdate:modelValue":o[4]||(o[4]=n=>l.value.expiryMethod=n),name:"expiryMethod",label:"\u4FDD\u8D39\u903E\u671F\u672A\u652F\u4ED8","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":y(ne),required:"","label-width":"200"},null,8,["modelValue","data-source"]),l.value.payInfoType!==y(F).FIRST_SAME?(V(),$(W,{key:0,modelValue:l.value.bankData,"onUpdate:modelValue":o[5]||(o[5]=n=>l.value.bankData=n),"holder-name":s.value},null,8,["modelValue","holder-name"])):Y("",!0)]),_:1},512)]),_:1}),t(H,{title:"\u5E74\u91D1\u9886\u53D6\u94F6\u884C\u5361",class:"reprise-card","show-divider":!1},{default:v(()=>[h("div",Pe,[(V(!0),A(Ee,null,Fe(y(we),(n,O)=>(V(),A("div",{key:O,class:Te(["reprise-card-item",{selected:E.value===n.value}]),onClick:j=>re(n.value)},Ce(n.label),11,Ge))),128))]),t(q,{ref_key:"form3",ref:X},{default:v(()=>[E.value===y(F).OTHER?(V(),$(W,{key:0,modelValue:m.value.bankData,"onUpdate:modelValue":o[6]||(o[6]=n=>m.value.bankData=n),"holder-name":s.value},null,8,["modelValue","holder-name"])):Y("",!0)]),_:1},512)]),_:1}),h("div",Me,[t(a,{modelValue:L.value,"onUpdate:modelValue":o[7]||(o[7]=n=>L.value=n),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),ze,Je]),h("div",Qe,[t(w,{type:"primary",onClick:de},{default:v(()=>[Ze]),_:1})])])]),_:1})}}});var na=J(Xe,[["__scopeId","data-v-83699cb4"]]);export{na as default};

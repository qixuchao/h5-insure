import{d as e,j as a,k as l,E as n,aY as t,cq as s,o as i,c as o,a as u,b as d,w as r,e as v,u as p,F as c,s as m,n as f,f as C,p as y,bg as g,q as k,bl as h,_ as S,ar as _}from"./index-e6143c1d.js";import{C as j}from"./index-f89c682c.js";import{o as w}from"./utils-539f5f32.js";import{C as b}from"./index-31eed81d.js";import"./infoCollection-df935142.js";import"./trial-21f46215.js";const x={class:"guarantee-list"},U={key:0,class:"plan-list"},A=["onClick"],L={class:"guarantee-detail"},V={class:"content"},$={key:1,class:"feerate-view"},q=e({name:"guarantee"});var E=S(e({...q,props:{dataSource:{default:()=>({})},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{default:5},planList:{default:()=>[]}},emits:["updateActivePlan"],setup(e,{emit:S}){var q,E;const F=e;a("");const B=S,I=a((null==(E=null==(q=F.planList)?void 0:q[0])?void 0:E.planCode)||void 0),N=a(),P=a([]);a([]);const R=a(),T=l((()=>!!F.planList.length)),Y=a(null),G=a([]),O=l((()=>{var e,a;return(null==(e=G.value)?void 0:e.length)===(null==(a=P.value)?void 0:a.length)})),z=()=>{var e,a;null==(a=null==(e=Y.value)?void 0:e.toggleAll)||a.call(e,!O.value)};n([()=>F.dataSource,()=>I.value],(()=>{var e,a;P.value=((null==(a=((null==(e=F.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===I.value)))?void 0:a.data)||[]).filter((e=>e.isShowOn===`${t.YES}`))}),{immediate:!0,deep:!0});const D=l((()=>{var e;return(null==(e=F.dataSource)?void 0:e.rateUri)||""})),H=l((()=>!!(R.value&&R.value.paymentFrequencyValue&&R.value.premiumUnit&&D))),J=()=>{w({fileType:"pdf",fileUri:D.value})};return(e,a)=>{var l,n;const t=_,S=j,w=b,q=s("dompurify-html");return i(),o(c,null,[u("div",x,[d(t,{title:"保障详情","show-line":!1,"show-divider":!1},{extra:r((()=>[u("span",{onClick:z},v(p(O)?"收起全部":"展开全部"),1)])),_:1}),p(T)?(i(),o("div",U,[(i(!0),o(c,null,m(e.planList,((e,a)=>(i(),o("div",{key:`${e.planCode}_${a}`,class:f("plan-list-item "+(e.planCode===p(I)?"plan-list-item-active":"")),onClick:a=>{return l=e.planCode,I.value=l,N.value=F.planList.findIndex((e=>e.planCode===l)),void B("updateActivePlan",l);var l}},[u("span",null,v(e.planName),1)],10,A)))),128))])):C("",!0),u("div",L,[d(w,{ref_key:"collapseRef",ref:Y,modelValue:p(G),"onUpdate:modelValue":a[0]||(a[0]=e=>k(G)?G.value=e:null),border:!1},{default:r((()=>[(i(!0),o(c,null,m(p(P),((e,a)=>(i(),y(S,{key:a,title:e.title,value:e.desc,name:a,border:!1,class:"guarantee-item"},{default:r((()=>[g(u("div",V,null,512),[[q,e.tips]])])),_:2},1032,["title","value","name"])))),128))])),_:1},8,["modelValue"])]),p(H)?(i(),o("div",$,[u("span",null,v(`${(null==(l=p(R))?void 0:l.paymentFrequencyValue)||""}${(null==(n=p(R))?void 0:n.premiumUnit)||""}`),1),p(D)?(i(),o("span",{key:0,onClick:J},"查看保费")):C("",!0)])):C("",!0)]),d(h)],64)}}}),[["__scopeId","data-v-eba9291c"]]);export{E as default};

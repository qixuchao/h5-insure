import{d as e,a4 as a,a5 as l,h as n,i as t,j as i,k as o,z as s,a6 as d,E as r,a7 as u,O as c,o as v,c as _,u as p,b as m,F as I,a as f,m as C,f as O,w as b,a8 as y,p as E,a9 as g,aa as h,ab as k,ac as j}from"./index-c77dbd25.js";import{i as A,q as L,s as w}from"./trial-a0b20d2c.js";import{a as P,b as S}from"./product-1e734d64.js";import{_ as T}from"./TrialButton-92f6f32c.js";import{u as x}from"./useOrder-a043351e.js";import{p as N,d as R}from"./utils-8abc7844.js";import"./index-6d9c49f8.js";import"./format-31cde443.js";import"./utils-5237cca3.js";import"./infoCollection-608a87c3.js";import"./trial-cc352ec9.js";const V={key:0},B={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},D={class:"info"},F={key:1,class:"preview-placeholder"},U=f("br",null,null,-1),q=f("div",{id:"insureButton"},null,-1),M=f("div",{id:"xinaoDialog"},null,-1),G=e({name:"InsuranceLong"}),z=e({...G,setup(e){const G=a((()=>l((()=>import("./index-29bdda0f.js")),["static/js/index-29bdda0f.js","static/css/index-c23f272e.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css"]))),z=a((()=>l((()=>import("./index-e4e8ec62.js")),["static/js/index-e4e8ec62.js","static/css/index-79104747.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css","static/js/infoCollection-608a87c3.js"]))),H=a((()=>l((()=>import("./index-cab11694.js")),["static/js/index-cab11694.js","static/css/index-491cbbd3.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css"])));a((()=>l((()=>import("./index-dd6f4b0c.js")),["static/js/index-dd6f4b0c.js","static/css/index-50785b3e.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css","static/js/cloneDeep-9d9eca23.js","static/js/TrialButton-92f6f32c.js","static/css/TrialButton-dea42d8e.css","static/js/index-6d9c49f8.js","static/css/index-bbfdd7ec.css","static/js/format-31cde443.js","static/js/trial-a0b20d2c.js","static/js/config-98e8d477.js","static/js/isNaN-32051263.js","static/js/useOrder-a043351e.js"])));const J=a((()=>l((()=>import("./index-a9c6dbbf.js")),["static/js/index-a9c6dbbf.js","static/css/index-ebb5282b.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css"]))),W=a((()=>l((()=>import("./Video-34e39f9f.js")),["static/js/Video-34e39f9f.js","static/css/Video-20262b6f.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css"]))),X=a((()=>l((()=>import("./index-ac0ead4f.js")),["static/js/index-ac0ead4f.js","static/css/index-a34f0b1b.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css","static/js/utils-5237cca3.js","static/js/infoCollection-608a87c3.js","static/js/trial-cc352ec9.js"]))),Y=a((()=>l((()=>import("./index-07ab094e.js")),["static/js/index-07ab094e.js","static/css/index-b01c516e.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css","static/js/product-1e734d64.js","static/js/useThread-637a02aa.js"]))),$=a((()=>l((()=>import("./index-6db33b47.js")),["static/js/index-6db33b47.js","static/css/index-fa4edf2a.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css","static/js/theme-94cf7d00.js","static/js/index-6d9c49f8.js","static/css/index-bbfdd7ec.css","static/js/utils-5237cca3.js","static/js/infoCollection-608a87c3.js","static/js/trial-cc352ec9.js"]))),K=a((()=>l((()=>import("./index-5d0c4b43.js")),["static/js/index-5d0c4b43.js","static/css/index-eabeb59f.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css"]))),Q=a((()=>l((()=>import("./index-2fc964a9.js")),["static/js/index-2fc964a9.js","static/css/index-bf024e9b.css","static/js/index-c77dbd25.js","static/css/index-f9448f5b.css"]))),Z=n(),ee=t(),{productCode:ae="",tenantId:le,agentCode:ne="",agencyCode:te,saleChannelId:ie,proposalId:oe,extraInfo:se,orderNo:de,insurerCode:re,preview:ue,trialPreview:ce}=ee.query;let ve={};try{ve=JSON.parse(decodeURIComponent(se))}catch(Ue){}i();const _e=i(),pe=i(),me=i(!1),Ie=i({}),fe=i({}),Ce=i(!1),Oe=i(0),be=i(!1);i({});const ye=i(!0);i(!0);const Ee=i(!0),ge=i(""),he=i({}),ke=i({}),je=i([]),Ae=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Le=i({});o((()=>!!ue||!!ce));const we=o((()=>!!ce));i();const Pe=()=>{g("premiumTrial",ee.query)},Se=x(),Te=i(!1);s((()=>Le.value.planCode),(e=>{he.value=(fe.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const xe=()=>{_e.value.handleClickTab()("insureButton")};i(""),i(0);const Ne=e=>{he.value=(fe.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},Re=()=>{Ce.value=!1,ye.value=!0},Ve=()=>{Ce.value=!1,ye.value=!0},Be=i([]),De=async()=>{var e,a;const{code:l,data:n}=await L({calcProductFactorList:[{productCode:ae}]});if("10000"===l){Object.assign(Se.value,n);(e=>{S(e).then((({code:e,data:a})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:l}=R(a);Be.value=e.concat(l)}}))})(N(null==(a=null==(e=n.insuredList)?void 0:e[0])?void 0:a.productList))}},Fe=async()=>{const{code:e,data:a}=await w(Se.value);"10000"===e&&Z.push({path:h.questionNotice,query:{...ee.query,orderNo:a}})};return s((()=>he.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:l}=he.value;Le.value.planCode=e,ke.value=(l||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),r((()=>{u(pe,(([{isIntersecting:e}],a)=>{me.value=!0}))})),c((()=>{Ee.value=!0,De(),(async()=>{!we.value&&P({productCode:ae}).then((({data:e,code:a})=>{if("10000"===a){Ie.value=e;const{wxShareConfig:a,showWXShare:l,title:n,desc:t,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};l?Object.assign(Ae.value,{...a,imgUrl:a.image,isShare:l}):Object.assign(Ae.value,{title:n,desc:t,imgUrl:i,isShare:l})}})),de||oe||(Te.value=!0),await A({productCode:ae,isTenant:!1}).then((({data:e,code:a})=>{var l;"10000"===a&&(me.value=!0,be.value=!0,fe.value=e,he.value=null==(l=e.productPlanInsureVOList)?void 0:l[0],je.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),Ee.value=!1})(),setTimeout((async()=>{ge.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var l,n,t,i,o,s,d,r,u,c,g,h,A,L,w,P,S,x,N,R;const Z=k,ee=j;return v(),_(I,null,[p(Ee)?(v(),_("div",V)):(v(),_("div",B,[m(Z),p(we)?(v(),_("div",F,[y("当前页面仅用于保费试算预览"),U,y("不展示其他产品相关配置信息")])):(v(),_(I,{key:0},[f("div",D,[1==(null==(n=null==(l=p(Ie))?void 0:l.BASIC_INFO)?void 0:n.bannerType)&&(null==(i=null==(t=p(Ie))?void 0:t.BASIC_INFO)?void 0:i.banner.length)?(v(),C(p(H),{key:0,"data-skeleton-type":"img",images:null==(s=null==(o=p(Ie))?void 0:o.BASIC_INFO)?void 0:s.banner},null,8,["images"])):O("",!0),2==(null==(r=null==(d=p(Ie))?void 0:d.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=p(Ie))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),C(p(W),{key:1,"data-skeleton-type":"img",src:null==(g=p(Ie))?void 0:g.BASIC_INFO.video[0]},null,8,["src"])):O("",!0),(null==(L=null==(A=null==(h=p(Ie))?void 0:h.BASIC_INFO)?void 0:A.bannerMove)?void 0:L.length)?(v(),C(p(H),{key:2,url:null==(S=null==(P=null==(w=p(Ie))?void 0:w.BASIC_INFO)?void 0:P.bannerMove)?void 0:S[0],onClick:xe},null,8,["url"])):O("",!0),f("div",{ref_key:"observeRef",ref:pe},null,512)]),m(p(G),{"data-source":null==(x=p(Ie))?void 0:x.BASIC_INFO},null,8,["data-source"]),(null==(N=p(Ie))?void 0:N.GUARANTEE)?(v(),C(p(X),{key:0,"show-service-config":"","data-source":p(Ie),"plan-list":p(je),onUpdateActivePlan:Ne},null,8,["data-source","plan-list"])):O("",!0),f("div",{class:"trial-text-btn",onClick:Pe},"算一算保费"),m(p(J),{"data-source":null==(R=p(Ie))?void 0:R.ISSUE_CONDITION},null,8,["data-source"]),m(p(z),{ref_key:"detailScrollRef",ref:_e,"data-source":p(Ie)},null,8,["data-source"]),m(ee,null,{default:b((()=>{var e,a,l;return[(null==(e=p(Ie).SIGNATURE)?void 0:e.inscribedContent)?(v(),C(p(K),{key:0,"inscribed-content":null==(l=null==(a=p(Ie))?void 0:a.SIGNATURE)?void 0:l.inscribedContent},null,8,["inscribed-content"])):O("",!0)]})),_:1}),m(ee,null,{default:b((()=>{var e;return[(null==(e=p(Be))?void 0:e.length)?(v(),C(p(Q),{key:0,"attachment-list":p(Be),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{Oe.value=e,Ce.value=!0})(e))},null,8,["attachment-list"])):O("",!0)]})),_:1})],64)),q,m(T,{onHandleClick:Fe})])),m(ee,null,{default:b((()=>[p(be)&&!p(we)?(v(),C(p(Y),{key:0,"product-detail":p(Ie)},null,8,["product-detail"])):O("",!0)])),_:1}),M,m(ee,null,{default:b((()=>[p(Ce)?(v(),C(p($),{key:0,show:p(Ce),"onUpdate:show":a[1]||(a[1]=e=>E(Ce)?Ce.value=e:null),"content-list":p(ye)?p(Be):[],"is-only-view":p(ye),"active-index":p(Oe),text:p(ye)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,onSubmit:Re,onOnCloseFilePreviewByMask:Ve},null,8,["show","content-list","is-only-view","active-index","text"])):O("",!0)])),_:1})],64)}}});export{z as default};

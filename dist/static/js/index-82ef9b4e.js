import{d as e,r as i,j as l,k as a,l as t,E as n,o,c as s,b as r,w as u,a as d,u as c,p as m,e as p,f as v,F as y,bo as f,bp as V,_ as b,bz as g,bA as h,aq as k,aK as O,g as L,bu as C,bv as I,bw as w,bx as S,aO as x,bC as A,s as T,v as N,aN as F,ao as D,aa as _,t as j,n as B,i as U,am as K,aI as M,T as P,bn as E,bs as R,bI as J,bJ as H,a8 as $,bH as z,ci as G,aC as q,aD as Y,aE as Q,bq as X,br as Z,ag as W}from"./index-f8557b3a.js";import{S as ee,g as ie}from"./index-35d87c65.js";import{a as le,B as ae}from"./infoCollection-58976519.js";import{c as te}from"./cloneDeep-a412d3a6.js";import"./PolicyInfo-465e30a0.js";import{j as ne,f as oe}from"./trial-6b0f639b.js";import{S as se,I as re,a as ue}from"./index-9f089778.js";import{f as de,m as ce,g as me}from"./gender-bdd67324.js";import{P as pe}from"./utils-c3f7bb2d.js";import{L as ve}from"./product-7bbf9c44.js";const ye={key:0},fe={class:"custom-field"},Ve={key:1,class:"flex-field"},be={class:"pro-radio-wrap"},ge={key:2},he={class:"pro-radio-wrap"},ke={class:"custom-field"},Oe={key:1},Le={key:3},Ce={class:"custom-field"},Ie={key:1},we={class:"custom-field"},Se={key:0},xe={key:1},Ae={key:4},Te=e({name:"BaoeBaofei"});var Ne=b(e({...Te,props:{originData:{default:()=>({})},modelValue:{default:()=>({})},defalutValue:{default:()=>({})},trialResult:{default:()=>({})}},emits:["update:modelValue","trialChange"],setup(e,{emit:b}){const g=e,h=i({hadSetDefault:!1}),k=l(g.originData),O=l(g.modelValue),L=l(0),C=()=>2===k.value.saleMethod?{label:"保费",key:"initialPremium"}:{label:"保额",key:"initialAmount"},I=()=>{switch(`${k.value.displayUnit}`){case le.YUAN:return"元";case le.MONTH_SALARY:return"倍月薪";case le.MILLION:return"万元";case le.COPY:return"份"}return""},w=a((()=>2===k.value.saleMethod?{label:"保费",key:"initialPremium"}:{label:"保额",key:"initialAmount"})),S=(...e)=>{if(1===L.value){const e=O.value[w.value.key],i=g.originData.minStepValue,l=g.originData.maxStepValue,a=g.originData.stepValue;if(+e>=+l)O.value[w.value.key]=l;else if(+e<=+i)O.value[w.value.key]=i;else{const l=+e-+i,t=Math.floor(l/+a);l%+a!=0&&(O.value[w.value.key]=+i+t*+a)}}return!0},x=()=>{const{displayType:e,requireCopies:i}=k.value,l=C().key,a=!O.value.riskCode;1===e?L.value=1:3===e&&2===i?(L.value=2,k.value.displayValues.length>=1&&a&&!O.value[l]&&(O.value[l]=k.value.displayValues[0].code||k.value.displayValues[0].value)):3===e&&1===i?(L.value=3,k.value.minCopiesValue===k.value.maxCopiesValue&&a&&!O.value.copy&&(O.value.copy=k.value.minCopiesValue),k.value.displayValues.length>=1&&a&&!O.value[l]&&(O.value[l]=k.value.displayValues[0].code||k.value.displayValues[0].value)):2===e&&(L.value=4,k.value.minCopiesValue===k.value.maxCopiesValue&&a&&!O.value.copy&&(O.value.copy=k.value.minCopiesValue),a&&!O.value.initialAmount&&(O.value.initialAmount=k.value.copiesAmount))},A=a((()=>{if(k.value.displayValues){const e=C().key;return 1!==k.value.displayValues.length||O.value.riskCode||(O.value[e]=k.value.displayValues[0].code),k.value.displayValues.map((e=>({label:e.value,value:e.code})))}return[]})),T=()=>{};return t((()=>{x(),b("update:modelValue",O.value)})),n((()=>k),(e=>{x()}),{deep:!0}),n((()=>g.defalutValue),(e=>{(null==e?void 0:e.riskCode)&&!h.hadSetDefault&&(h.hadSetDefault=!0,O.value={...O.value,initialAmount:e.initialAmount,initialPremium:e.initialPremium,copy:e.copy})}),{deep:!0,immediate:!0}),n((()=>O.value),(e=>{(()=>{if(1===L.value){const e=O.value[w.value.key],i=g.originData.minStepValue,l=g.originData.maxStepValue,a=g.originData.stepValue;if(+e>+l)return!1;if(+e<+i)return!1;if((+e-+i)%+a!=0)return!1}return!0})()&&(b("update:modelValue",e),b("trialChange",e))}),{deep:!0,immediate:!0}),(e,i)=>{const l=ee,a=f,t=V;return o(),s(y,null,[1===L.value?(o(),s("div",ye,[r(a,{label:`基本${c(w).label}`,name:c(w).key,class:"risk-select-field"},{input:u((()=>[d("div",fe,[r(l,{modelValue:O.value[c(w).key],"onUpdate:modelValue":i[0]||(i[0]=e=>O.value[c(w).key]=e),"input-width":"80px","default-value":e.originData.minStepValue,min:e.originData.minStepValue,step:e.originData.stepValue,max:e.originData.maxStepValue,theme:"round",onBlur:S},null,8,["modelValue","default-value","min","step","max"])])])),_:1},8,["label","name"])])):2===L.value?(o(),s("div",Ve,[r(a,{modelValue:O.value[c(w).key],"onUpdate:modelValue":i[2]||(i[2]=e=>O.value[c(w).key]=e),label:`基本${c(w).label}`,name:c(w).key,class:"risk-select-field"},{input:u((()=>[d("div",be,[r(t,{modelValue:O.value[c(w).key],"onUpdate:modelValue":i[1]||(i[1]=e=>O.value[c(w).key]=e),options:c(A),onclick:T},null,8,["modelValue","options"])])])),_:1},8,["modelValue","label","name"])])):3===L.value?(o(),s("div",ge,[r(a,{modelValue:O.value[c(w).key],"onUpdate:modelValue":i[4]||(i[4]=e=>O.value[c(w).key]=e),label:`基本${c(w).label}`,name:c(w).key,class:"risk-select-field"},{input:u((()=>[d("div",he,[r(t,{modelValue:O.value[c(w).key],"onUpdate:modelValue":i[3]||(i[3]=e=>O.value[c(w).key]=e),options:c(A),onclick:T},null,8,["modelValue","options"])])])),_:1},8,["modelValue","label","name"]),d("div",null,[r(a,{modelValue:O.value.copy,"onUpdate:modelValue":i[6]||(i[6]=e=>O.value.copy=e),label:"份数",name:"copy",class:"risk-select-field"},{input:u((()=>[d("div",ke,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(o(),m(l,{key:0,modelValue:O.value.copy,"onUpdate:modelValue":i[5]||(i[5]=e=>O.value.copy=e),"input-width":"80px","default-value":e.originData.minCopiesValue,min:e.originData.minCopiesValue||1,step:1,max:e.originData.maxCopiesValue,theme:"round"},null,8,["modelValue","default-value","min","max"])):(o(),s("span",Oe,p(e.originData.minCopiesValue),1))])])),_:1},8,["modelValue"])])])):4===L.value?(o(),s("div",Le,[r(a,{modelValue:O.value.copy,"onUpdate:modelValue":i[8]||(i[8]=e=>O.value.copy=e),label:"份数",name:"copy",class:"risk-select-field"},{input:u((()=>[d("div",Ce,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(o(),m(l,{key:0,modelValue:O.value.copy,"onUpdate:modelValue":i[7]||(i[7]=e=>O.value.copy=e),"input-width":"64px","default-value":e.originData.minCopiesValue,min:e.originData.minCopiesValue||1,step:1,max:e.originData.maxCopiesValue,theme:"round"},null,8,["modelValue","default-value","min","max"])):(o(),s("span",Ie,p(e.originData.minCopiesValue),1))])])),_:1},8,["modelValue"]),r(a,{label:c(w).label,name:"copyAmount",class:"risk-select-field"},{input:u((()=>[d("div",we,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(o(),s("span",Se,p(+e.originData.copiesAmount*+O.value.copy+I()),1)):(o(),s("span",xe,p(+e.originData.minCopiesValue*+e.originData.copiesAmount+I()),1))])])),_:1},8,["label"])])):v("",!0),2===k.value.saleMethod&&e.trialResult&&e.trialResult.initialAmount>0?(o(),s("div",Ae,[r(a,{label:"保额",class:"risk-select-field"},{input:u((()=>[d("span",null,p(e.trialResult.initialAmount),1)])),_:1})])):v("",!0)],64)}}}),[["__scopeId","data-v-3a02f6d0"]]);const Fe=e({name:"BeneficiaryItem"});var De=b(e({...Fe,props:{modelValue:{default:()=>({})},schema:{default:()=>[]},config:{default:()=>({})},isView:{type:Boolean,default:!1},isTrial:{type:Boolean,default:!1},title:{default:"受益人"}},emits:["update:modelValue","trailChange"],setup(e,{expose:a,emit:t}){const s=e,r=l(null),d=i({validated:!1,schema:[],config:{},personVO:{}});return n((()=>s.config),(e=>{e&&Object.assign(d.config,e)}),{deep:!0,immediate:!0}),n((()=>s.schema),(e=>{e&&Object.assign(d.schema,te(s.schema))}),{deep:!0,immediate:!0}),n((()=>s.modelValue),((e,i)=>{JSON.stringify(e)!==JSON.stringify(i)&&(g("受益人数据变动了"),Object.assign(d.personVO,e))}),{deep:!0,immediate:!0}),n((()=>d.personVO),(e=>{e&&t("update:modelValue",e)}),{deep:!0,immediate:!0}),n((()=>{var e;return null==(e=d.personVO)?void 0:e.relationToInsured}),((e,i)=>{if(e===i)return!1;g("受益人与被保人关系变动了");const{certType:l}=d.personVO||{},[a,t]=h(d.schema,{certType:l,relationToHolder:e});return k(d.config,t),!s.isView&&e&&i&&Object.assign(d.personVO,{...O(d.personVO,(e=>!(a&&"certType"===e))),relationToInsured:e}),!1}),{immediate:!0}),a({validate:e=>S(r,s.trialFactorCodes,e),validateTrialFields:()=>w({personVO:d.personVO,trialFactorCodes:s.trialFactorCodes})}),(e,i)=>(o(),m(c(I),{ref_key:"formRef",ref:r,class:"personal-info-card",title:e.title,model:c(d).personVO,schema:c(d).schema,config:c(d).config,"is-view":e.isView,"extra-provision":{objectType:c(C).BENEFICIARY,objectId:c(d).personVO.id}},{cardTitleExtra:u((()=>[L(e.$slots,"default",{},void 0,!0)])),_:3},8,["title","model","schema","config","is-view","extra-provision"]))}}),[["__scopeId","data-v-eb39bf9e"]]);const _e=["onClick"],je=e({name:"InsuredItem"});var Be=b(e({...je,props:{modelValue:{default:()=>({})},title:{default:""},holderPersonVO:{},schema:{default:()=>[]},config:{default:()=>({})},isView:{type:Boolean,default:!1},isTrial:{type:Boolean,default:!1},trialFactorCodes:{default:()=>[]},multiBeneficiaryMaxNum:{default:null},beneficiaryList:{default:()=>[]},beneficiarySchema:{default:()=>[]}},emits:["update:modelValue","update:beneficiaryList"],setup(e,{expose:t,emit:d}){const p=e,f=l(null),V=l(null),b=l(null),j={schema:[],trialFactorCodes:[],config:{},personVO:{}},B=i({validated:!1,schema:[],config:{},personVO:{},beneficiaryTypeSchemaList:[],beneficiarySchemaList:[],beneficiaryList:[]}),U=()=>{B.beneficiaryList.push(te({...j,nanoid:A(),schema:p.beneficiarySchema}))},K=a((()=>!p.multiBeneficiaryMaxNum||B.beneficiaryList.length<p.multiBeneficiaryMaxNum)),M=a((()=>!B.schema.filter((e=>{var i;return!(e.hidden||(null==(i=B.config[e.name])?void 0:i.hidden))})).length)),P=a((()=>B.schema.filter((e=>e.isSelfInsuredNeed)).map((e=>e.name)))),E=a((()=>x(p.beneficiarySchema))),R=a((()=>{var e;return String(null==(e=B.personVO)?void 0:e.insuredBeneficiaryType)===ae.SPECIFY}));return n((()=>p.holderPersonVO),(e=>{var i;g("------投保人信息变动了-----");const{id:l,...a}=e||{};if("1"===String(null==(i=B.personVO)?void 0:i.relationToHolder)){const e=x(P.value)?Object.keys(a).reduce(((e,i)=>([...P.value,"occupationClass"].includes(i)&&!["birthday","age","gender"].includes(i)||(e[i]=a[i]),e)),{}):a;Object.assign(B.personVO,e)}}),{deep:!0,immediate:!0}),n((()=>p.beneficiarySchema),(e=>{B.beneficiarySchemaList=x(e)?e.filter((e=>"insuredBeneficiaryType"!==e.name)):[],B.beneficiaryTypeSchemaList=x(e)?e.filter((e=>"insuredBeneficiaryType"===e.name)):[]}),{deep:!0,immediate:!0}),n(R,((e,i)=>{String(e)!==String(i)&&(g("受益人类型关系变动了"),e?!x(B.beneficiaryList)&&U():B.beneficiaryList=[])}),{immediate:!0}),n((()=>te(B.beneficiaryList).map((e=>({personVO:e.personVO,nanoid:e.nanoid})))),((e,i)=>{JSON.stringify(e)!==JSON.stringify(i)&&d("update:beneficiaryList",e)}),{deep:!0,immediate:!0}),n((()=>{var e;return null==(e=B.personVO)?void 0:e.relationToHolder}),((e,i)=>{if(!e)return;g("与投保人关系变动了");const{personVO:l,schema:a=[],config:t}=B||{},{id:n,...o}=p.holderPersonVO||{},s="1"===String(l.relationToHolder),[r,u]=h(a,l);if(k(t,u),a.forEach((e=>{e.relationToHolder=l.relationToHolder,e.hidden=!e.isSelfInsuredNeed&&s})),!p.isView&&i&&String(e)!==String(i)){let e={...l,...o};s||(e={...O(l,(e=>!(r&&"certType"===e))),relationToHolder:l.relationToHolder}),Object.assign(B.personVO,e)}}),{deep:!0}),n((()=>{var e;return null==(e=B.personVO)?void 0:e.relationToMainInsured}),((e,i)=>{if(!e)return;g("次被保人与主被保人关系变动了");const{personVO:l,schema:a=[],config:t}=B||{},{certType:n}=l||{},[o,s]=h(a,{certType:n,relationToHolder:e});k(t,s),!p.isView&&i&&String(e)!==String(i)&&Object.assign(B.personVO,{...O(l,(e=>!(o&&"certType"===e))),relationToMainInsured:l.relationToMainInsured})})),n((()=>p.config),(e=>{e&&Object.assign(B.config,e)}),{deep:!0,immediate:!0}),n((()=>p.schema),((e,i)=>{e&&JSON.stringify(e)!==JSON.stringify(i)&&Object.assign(B.schema,te(e))}),{deep:!0,immediate:!0}),n((()=>p.modelValue),((e,i)=>{if(JSON.stringify(e)!==JSON.stringify(i)){const{beneficiaryList:i,...l}=e;k(B.personVO,l)}}),{deep:!0,immediate:!0}),n((()=>te(p.beneficiaryList)),((e,i)=>{JSON.stringify(e)!==JSON.stringify(i)&&(B.beneficiaryList=x(e)?e.map((e=>({...e,nanoid:e.nanoid||A()}))):[])}),{deep:!0,immediate:!0}),n((()=>B.personVO),(e=>{e&&d("update:modelValue",e)}),{deep:!0,immediate:!0}),t({validate:e=>{var i;return Promise.all([S(f,p.trialFactorCodes,e),S(V,[],e),...(null==(i=b.value)?void 0:i.map((i=>i.validate(e))))||[]])},validateTrialFields:()=>w({personVO:B.personVO,trialFactorCodes:p.trialFactorCodes})}),(e,i)=>{const l=D,a=_;return o(),s(y,null,[r(c(I),{ref_key:"insuredFormRef",ref:f,class:"personal-info-card",title:c(M)?"":e.title,model:c(B).personVO,schema:c(B).schema,config:c(B).config,"is-view":e.isView,"extra-provision":{objectType:c(C).INSURED,objectId:c(B).personVO.id}},{cardTitleExtra:u((()=>[L(e.$slots,"default",{},void 0,!0)])),_:3},8,["title","model","schema","config","is-view","extra-provision"]),c(E)?(o(),s(y,{key:0},[r(c(I),{ref_key:"beneficiaryTypeFormRef",ref:V,class:"personal-info-card",title:"受益人",model:c(B).personVO,schema:c(B).beneficiaryTypeSchemaList,"is-view":e.isView},null,8,["model","schema","is-view"]),c(R)?(o(),s(y,{key:0},[(o(!0),s(y,null,T(c(B).beneficiaryList,((i,a)=>(o(),m(De,{ref_for:!0,ref_key:"beneficiaryFormRef",ref:b,key:`${i.nanoid}_${a}`,modelValue:i.personVO,"onUpdate:modelValue":e=>i.personVO=e,title:`受益人${a+1}`,schema:c(B).beneficiarySchemaList,config:i.config,"is-view":e.isView},{default:u((()=>[L(e.$slots,"cardTitleExtraBenifit",{index:a},void 0,!0),a>0&&!e.isView?(o(),s("span",{key:0,class:"delete-button",onClick:e=>(e=>{F.confirm({message:"确定要删除该受益人吗？"}).then((()=>{B.beneficiaryList.splice(e,1)}))})(a)},[r(l,{name:"delete"})],8,_e)):v("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue","title","schema","config","is-view"])))),128)),!e.isView&&c(K)?(o(),s("span",{key:0,class:"add-button",onClick:U},[r(a,{name:"plus"}),N("添加受益人")])):v("",!0)],64)):v("",!0)],64)):v("",!0),L(e.$slots,"riskList",{},void 0,!0)],64)}}}),[["__scopeId","data-v-524344c0"]]);const Ue={class:"customer-list-item"},Ke={class:"left"},Me=["src"],Pe={class:"left-item"},Ee={class:"name"},Re={key:0,class:"cert-no"},Je={class:"cert-type-name"},He={key:1,class:"cert-no"},$e={class:"cert-type-name"},ze={key:0,class:"from-wx"},Ge=d("img",{class:"img-wx",alt:""},null,-1),qe=e({__name:"item",props:{data:{type:Object,required:!1,default:()=>Object},disabled:{type:Boolean,required:!1,default:()=>!0}},emits:["on-delete","on-close"],setup(e,{emit:i}){const a=e,t=l(!1),{data:n,disabled:m}=j(a);return(e,l)=>{const a=se;return o(),s("div",Ue,[r(a,{disabled:c(m)},{default:u((()=>{var e,a,r,u,m,y,f,V;return[d("div",{class:B(["list-item",!0===t.value?"item-bg":""]),onClick:l[0]||(l[0]=e=>(e=>{t.value=!0,e.stopPropagation(),console.log("这里关闭弹窗",n.value),i("on-close",n.value)})(e))},[d("div",Ke,[d("div",null,[d("img",{src:c(n).gender?"1"===c(n).gender?c(de):c(ce):c(me),alt:"",class:"mf"},null,8,Me)]),d("div",null,[d("div",Pe,[d("div",Ee,p(c(n).name),1),(null==(a=null==(e=c(n))?void 0:e.certInfo[0])?void 0:a.certNo)&&1==+(null==(u=null==(r=c(n))?void 0:r.certInfo[0])?void 0:u.certType)?(o(),s("div",Re,[N(p(c(n).certInfo[0].desensitizaCertNo)+" ",1),d("span",Je,p(c(n).certInfo[0].certTypeName),1)])):v("",!0),(null==(y=null==(m=c(n))?void 0:m.certInfo[0])?void 0:y.certNo)&&1!=+(null==(V=null==(f=c(n))?void 0:f.certInfo[0])?void 0:V.certType)?(o(),s("div",He,[N(p(c(n).certInfo[0].certNo)+" ",1),d("span",$e,p(c(n).certInfo[0].certTypeName),1)])):v("",!0)]),c(n).relative?(o(),s("div",ze,[Ge,N(" 微信客户 ")])):v("",!0)])])],2)]})),_:1},8,["disabled"])])}}});const Ye={class:"customer-list"},Qe={key:0,class:"list-pr"},Xe={key:1,class:"list-pr"};var Ze=b(e({__name:"index",props:{data:{type:Array,required:!0,default:()=>[]},type:{type:String,required:!0,default:()=>"firstLetter"},disabled:{type:Boolean,required:!1,default:()=>!0}},emits:["on-delete","on-close"],setup(e,{emit:i}){const a=e,{data:t,type:d,disabled:p}=j(a),v=l([]),f=l([]),V=e=>{i("on-delete",e)},b=e=>{i("on-close",e),console.log("这里关闭弹窗1111222----",e)};return n((()=>a.data),(()=>{t.value=a.data||[],console.log("data",t),v.value=t.value.filter((e=>!!(e.children&&Array.isArray(e.children)&&e.children.length>0))),f.value=v.value.map((e=>e.label))}),{immediate:!0,deep:!0}),(e,i)=>{const l=re,a=ue;return o(),s("div",Ye,["firstLetter"===c(d)?(o(),s("div",Qe,[r(a,{"highlight-color":"$zaui-brand","index-list":f.value,sticky:!1},{default:u((()=>[(o(!0),s(y,null,T(v.value,(e=>(o(),s(y,{key:e.label},[r(l,{index:`${e.label}`},null,8,["index"]),(o(!0),s(y,null,T(e.children,(e=>(o(),m(qe,{key:e.agentCustomerId,data:e,disabled:c(p),onOnDelete:V,onOnClose:b},null,8,["data","disabled"])))),128))],64)))),128))])),_:1},8,["index-list"])])):(o(),s("div",Xe,[(o(!0),s(y,null,T(c(t),(e=>(o(),m(qe,{key:e.agentCustomerId,data:e,disabled:c(p),onOnDelete:V,onOnClose:b},null,8,["data","disabled"])))),128))]))])}}}),[["__scopeId","data-v-7f0e84c3"]]);const We=e=>(Y("data-v-42d53b68"),e=e(),Q(),e),ei=["onClick"],ii=["onClick"],li=["onClick"],ai={class:"search-bar"},ti=["src"],ni={key:1,class:"empth"},oi=[We((()=>d("p",null,[d("img",{src:"/h5insure/static/png/empth-d7935dd7.png",class:"ig"})],-1))),We((()=>d("p",{class:"p1"},"暂时还没有客户哦～",-1)))],si=e({name:"PersonalInfo"});var ri=b(e({...si,props:{productFactor:{default:()=>({})},modelValue:{default:()=>({})},isTrial:{type:Boolean,default:!1},isView:{type:Boolean,default:!1},isOnlyHolder:{type:Boolean,default:!1},multiInsuredConfig:{}},emits:["update:modelValue","trailChange","trailValidateFailed","closeCustomerPopoup"],setup(e,{expose:t,emit:p}){const f=e,V=U(),b=K(),{isShare:O,saleChannelId:j}=V.query,B=l(null),Y=l(null),Q=i({count:0,slotProps:{},uniqKey:"",currentIndex:0,currentBenifitIndex:0,currentType:"",keyword:void 0,show:!1,list:[],config:{},trialValidated:!1,holder:{personVO:{},schema:[],trialFactorCodes:[],config:{}},beneficiarySchema:[],initInsuredIList:[],insured:[]}),X=async e=>{var i,l;Q.keyword;const a={pageNum:1,pageSize:999,queryBean:{keyword:Q.keyword||""}},t=await ne(a),n=[];Object.keys((null==(i=null==t?void 0:t.data)?void 0:i.customerMaps)||{}).forEach((e=>{var i;n.push({label:e,children:null==(i=null==t?void 0:t.data)?void 0:i.customerMaps[e]})})),Q.list=n,Q.count=null==(l=null==t?void 0:t.data)?void 0:l.count},Z=()=>{X(Q.keyword)},W=()=>{X()},ee=a((()=>!f.isTrial||f.isOnlyHolder)),ie=(e,i,l)=>{Q.currentType=e,"benifit"!==e?Q.currentIndex=i:(Q.currentIndex=i,Q.currentBenifitIndex=l),Q.uniqKey=A(),X(),Q.show=!0},le=()=>{setTimeout((()=>{Q.show=!1}),300)},ae=()=>"holder"===Q.currentType?Q.holder.schema.map((e=>e.name))||[]:"insured"===Q.currentType?Q.insured[Q.currentIndex].schema.map((e=>e.name))||[]:"benifit"===Q.currentType?Q.beneficiarySchema.map((e=>e.name))||[]:void 0,oe=a((()=>{var e,i;return null==(i=null==(e=null==Q?void 0:Q.holder)?void 0:e.personVO)?void 0:i.name})),se=a((()=>{var e,i;return null==(i=null==(e=null==Q?void 0:Q.holder)?void 0:e.personVO)?void 0:i.gender})),re=a((()=>{var e,i;return null==(i=null==(e=null==Q?void 0:Q.holder)?void 0:e.personVO)?void 0:i.birthday})),ue=a((()=>{var e,i;return null==(i=null==(e=null==Q?void 0:Q.holder)?void 0:e.personVO)?void 0:i.certType})),de=a((()=>{var e,i;return null==(i=null==(e=null==Q?void 0:Q.holder)?void 0:e.personVO)?void 0:i.certNo})),ce=(e,i)=>{var l,a,t,n,o;console.log("convertCustomerData",e);const s=null==(l=null==e?void 0:e.contactInfo)?void 0:l.find((e=>"01"===e.contactType)),r=null==(a=null==e?void 0:e.contactInfo)?void 0:a.find((e=>"02"===e.contactType)),u=null==e?void 0:e.certInfo.filter((e=>"1"===e.certType)),d={name:null==e?void 0:e.name,gender:null==e?void 0:e.gender,birthday:null==e?void 0:e.birthday,mobile:(null==s?void 0:s.contactNo)||null,email:(null==r?void 0:r.contactNo)||null,certNo:(null==(t=u[0])?void 0:t.certNo)||null,certType:(null==(n=u[0])?void 0:n.certType)||null};console.log("insureKeys",ae());const c=null==(o=ae())?void 0:o.reduce(((e,i)=>d.hasOwnProperty(i)?{...e,[i]:d[i]}:e),{});return console.log("extractedObject===",c),console.log("state.holder.schema=====",Q.holder.schema),c},me=e=>{var i,l,a,t,n,o,s,r,u,d,c;if(Q.show=!1,"holder"===Q.currentType&&Object.assign((null==(i=null==Q?void 0:Q.holder)?void 0:i.personVO)||{},ce(e)),"insured"===Q.currentType){const i=null==(l=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:l.schema.some((e=>"relationToHolder"===e.name&&e.attributeValueList.some((e=>"1"===e.code)))),{name:n,gender:o,birthday:s,certType:r,certNo:u}=ce(e);if(oe.value===n&&se.value===o&&re.value===s&&ue.value===r&&de.value===u)return i?void Object.assign((null==(a=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:a.personVO)||{},{relationToHolder:"1"}):void P("与投保人关系未配置本人");Object.assign((null==(t=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:t.personVO)||{},ce(e))}if("benifit"===Q.currentType){const{name:i,gender:l,birthday:a,certType:t,certNo:m}=ce(e);(null==(n=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:n.personVO.name)===i&&(null==(o=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:o.personVO.gender)===l&&(null==(s=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:s.personVO.birthday)===a&&(null==(r=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:r.personVO.certType)===t&&(null==(u=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:u.personVO.certNo)===m?P("指定受益人不可为被保人本人"):Object.assign((null==(c=null==(d=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:d.beneficiaryList[Q.currentBenifitIndex])?void 0:c.personVO)||{},ce(e))}},pe=()=>{var e;const i=!Y.value||(null==(e=Y.value)?void 0:e.every((e=>e.validateTrialFields())));return(!B.value||w(Q.holder))&&i},ve=e=>{var i;return Promise.all([...(null==(i=Y.value)?void 0:i.map((i=>i.validate(e))))||[],S(B,Q.holder.trialFactorCodes,e)])},ye=e=>{const{productList:i,config:l,schema:a,trialFactorCodes:t,beneficiaryList:n,personVO:o,nanoid:s,...r}=e||{};return r},fe=()=>{const{length:e,[e-1]:i}=Q.initInsuredIList;Q.insured.push(te({...i,nanoid:A()}))},Ve=a((()=>{const{multiInsuredMaxNum:e,multiInsuredSupportFlag:i}=Q.config;return i&&(!e||Q.insured.length<e)})),be=a((()=>x(Q.holder.schema))),ge=a((()=>Q.insured.some((e=>x(e.schema))))),he=(e,i)=>x(e)?e.reduce(((e,l)=>(e[l]=i[l],e)),{}):{},ke=(e,i,l={})=>!!x(e)&&JSON.stringify(he(e,i))!==JSON.stringify(he(e,l));return n((()=>{var e;return null==(e=Q.holder.personVO)?void 0:e.certType}),((e,i)=>{if(`${e}`==`${i}`)return!1;g("投保人信息变动了====");const[l,a]=h(Q.holder.schema,{certType:e});return k(Q.holder.config,a),!1})),n([()=>{var e;return{...null==(e=Q.holder)?void 0:e.personVO}},()=>Q.insured.map((e=>{const{beneficiaryList:i,personVO:l}=e||{};return{...l,beneficiaryList:x(i)?i.map((e=>({...e.personVO}))):[]}}))],M(((e,i)=>{var l,a,t;const[n,o]=e,s=((e,i)=>{const l=ke(Q.holder.trialFactorCodes,e[0],i[0]),a=Q.insured.some(((e,l)=>{var a;const{trialFactorCodes:t,personVO:n}=e;return ke(t,n,null==(a=i[1])?void 0:a[l])}));return l||a})([n,o],i);g(`投被保人信息变动了---${s}`);const{insuredList:r}=f.modelValue,u={holder:n,insuredList:o.map(((e,i)=>({...(null==r?void 0:r[i])||{},...e})))};if(Q.config.isSpouseInsured){const[e,i]=o.map((e=>null==e?void 0:e.gender));if(e&&i&&String(e)===String(i))return P("被保人性别与投保要求不符")}if(JSON.stringify(null==(l=null==o?void 0:o[0])?void 0:l.personVO),ye(null==(t=null==(a=f.modelValue)?void 0:a.insuredList)?void 0:t[0]),console.log("-------result = ",u),p("update:modelValue",u),!pe())return Q.trialValidated=!1,p("trailValidateFailed",u);ve(!0).then((()=>{Q.trialValidated=!0,s&&!f.isOnlyHolder&&p("trailChange",u)})).catch((()=>{Q.trialValidated=!1,p("trailValidateFailed",u)}))}),500),{deep:!0}),n([()=>f.productFactor,()=>f.isTrial],((e,i)=>{if(E(e,i)||!e[0])return!1;g("投被保人要素变动了");const{insuredFactorCodes:l,holderFactorCodes:a}=R(J)||{},{holder:t,insured:n,beneficiary:o,config:s}=H(e[0],{isTrial:e[1],...f.multiInsuredConfig,insuredFactorCodes:l,holderFactorCodes:a});return Object.assign(Q.holder,t),Q.config=s,x(n)&&(Q.initInsuredIList=n.map((e=>({...e,beneficiaryList:[]})))),Q.beneficiarySchema=te((null==o?void 0:o.schema)||[]),!1}),{deep:!0,immediate:!0}),n((()=>{var e,i;return null==(i=null==(e=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:e.beneficiaryList[Q.currentBenifitIndex])?void 0:i.personVO}),((e,i)=>{var l,a;(null==(a=null==(l=null==Q?void 0:Q.insured[Q.currentIndex])?void 0:l.beneficiaryList[Q.currentBenifitIndex])?void 0:a.personVO)&&(null==e?void 0:e.relationToInsured)!==(null==i?void 0:i.relationToInsured)&&(g("受益人关系变动了+++++"),Q.insured[Q.currentIndex].beneficiaryList[Q.currentBenifitIndex].personVO={relationToInsured:null==e?void 0:e.relationToInsured})}),{deep:!0,immediate:!0}),n([()=>{const{holder:e,insuredList:i}=f.modelValue;console.log("表单数据",te(e));const l=x(i)?i.map((e=>({config:e.config,personVO:ye(e),beneficiaryList:x(e.beneficiaryList)?e.beneficiaryList.map((({config:e,...i})=>({config:e,personVO:ye(i)}))):[]}))):[];return[null==e?void 0:e.config,ye(e),l]},()=>Q.config,()=>Q.initInsuredIList],(([[e,i,l]])=>{g("投被保人数据变动了"),Object.assign(Q.holder.config,e),console.log("投保人数据===",te(Q.holder.personVO),te(i)),console.log("投保人数据===",te(Q.holder.personVO),te(i)),Object.assign(Q.holder.personVO,i);const{length:a}=l||[],{length:t}=Q.insured,{length:n,0:o={},[n-1]:s}=Q.initInsuredIList,{multiInsuredMaxNum:r,multiInsuredMinNum:u,multiInsuredSupportFlag:d}=Q.config,c=f.isView||a>t?Math.min(a,r):t||u;Q.insured=Array.from({length:c}).reduce(((e,i,a)=>{const{personVO:t,config:n={},beneficiaryList:r}=(null==l?void 0:l[a])||{},u=te(0===a?o:s);return e[a]?k(e[a],{...te(u),personVO:t,config:n,beneficiaryList:r}):e[a]={...u,personVO:t,config:n,beneficiaryList:r,nanoid:A()},e}),Q.insured)}),{deep:!0,immediate:!0}),n((()=>Q.list),((e,i)=>{e&&(Q.list=e)})),t({validate:ve,validateTrialFields:pe,validateHolder:(...e)=>{var i;return null==(i=B.value)?void 0:i.validate(...e)},canTrail:()=>Q.trialValidated}),(e,i)=>{const l=D,a=_,t=z,n=G,p=q;return o(),s(y,null,[c(be)&&c(ee)?(o(),m(c(I),{key:0,ref_key:"holderFormRef",ref:B,title:"投保人信息",class:"personal-info-card",model:c(Q).holder.personVO,schema:c(Q).holder.schema,config:c(Q).holder.config,"is-view":e.isView,"extra-provision":{objectType:c(C).HOLDER,objectId:c(Q).holder.personVO.id}},{cardTitleExtra:u((()=>[c(O)||e.isView||e.isTrial||!c(b)?v("",!0):(o(),s("div",{key:0,class:"choose-customer",onClick:i[0]||(i[0]=e=>ie("holder",1,0))},[r(l,{name:"customer",color:"#333"}),N(" 选择老用户 ")]))])),_:1},8,["model","schema","config","is-view","extra-provision"])):v("",!0),c(ge)&&!e.isOnlyHolder?(o(),s(y,{key:1},[(o(!0),s(y,null,T(c(Q).insured,((i,a)=>(o(),m(Be,$({ref_for:!0,ref_key:"insuredFormRef",ref:Y,key:`${i.nanoid}_${a}`,modelValue:i.personVO,"onUpdate:modelValue":e=>i.personVO=e,"beneficiary-list":i.beneficiaryList,"onUpdate:beneficiaryList":e=>i.beneficiaryList=e,title:""+(c(Q).insured.length>1?`被保人${a+1}`:"被保人信息"),"holder-person-v-o":c(Q).holder.personVO},i,{"beneficiary-schema":c(Q).beneficiarySchema,"is-view":e.isView,"multi-beneficiary-num":c(Q).config.multiBeneficiaryMaxNum}),{riskList:u((()=>[L(e.$slots,"riskInfo",{insuredIndex:a},void 0,!0)])),cardTitleExtraBenifit:u((i=>[c(O)||e.isView||e.isTrial||!c(b)?v("",!0):(o(),s("div",{key:0,class:"choose-customer",onClick:e=>ie("benifit",a,null==i?void 0:i.index)},[r(l,{name:"customer",color:"#333"}),N(" 选择老用户 ")],8,ii))])),default:u((()=>[1==+i.personVO.relationToHolder||c(O)||e.isView||e.isTrial||!c(b)?v("",!0):(o(),s("div",{key:0,class:"choose-customer",onClick:e=>ie("insured",a,0)},[r(l,{name:"customer",color:"#333"}),N(" 选择老用户 ")],8,ei)),!e.isView&&a+1>c(Q).config.multiInsuredMinNum?(o(),s("span",{key:1,class:"delete-button",onClick:e=>(e=>{F.confirm({message:"确定要删除该被保人吗？"}).then((()=>{Q.insured.splice(e,1)}))})(a)},[r(l,{name:"delete",color:"var(--van-primary-color)"})],8,li)):v("",!0)])),_:2},1040,["modelValue","onUpdate:modelValue","beneficiary-list","onUpdate:beneficiaryList","title","holder-person-v-o","beneficiary-schema","is-view","multi-beneficiary-num"])))),128)),!e.isView&&c(Ve)?(o(),m(t,{key:0,class:"add-button-wrap"},{title:u((()=>[d("span",{class:"add-button",onClick:fe},[r(a,{name:"plus"}),N("添加被保人")])])),_:1})):v("",!0)],64)):v("",!0),c(Q).show?(o(),m(p,{key:2,round:!1,show:c(Q).show,closeable:!1,onClose:le,onClosed:e.onClosePopupAfterAni},{default:u((()=>[d("div",ai,[r(n,{modelValue:c(Q).keyword,"onUpdate:modelValue":i[1]||(i[1]=e=>c(Q).keyword=e),placeholder:"客户 姓名/手机号",class:"icon-sercher",onSearch:Z,onCancel:W},{"left-icon":u((()=>[d("img",{src:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAZlBMVEUAAAC0wNC1wdO/v/+zwNC0v9C0wM+0wNG2wdLCydm0wNC0wNC1wdCzwNC0wNC0wNC1wNC1v9G2wdS0wM+0wNC0wNCzwdG0wdCzwc+1wNK4wta6xtO1wdGzwNC0wc+1v9WzwdCzv89PygQeAAAAIXRSTlMA/DQE896qhEQLjvjX0cC5iUwk7Oamb2ZbKxkVf8d7GIfl18UPAAABK0lEQVRIx+1V25aDIAwkiEVUvNXe7G3z/z+5pKeHs2fJyqav7byIwwxJBKL64DUUi9ZL8V+1ti1gALRWqzwqjwBIoKevMvJ7j6SOAOzvq9nM8NQFPIezXkmngYewrA/jeKhLfLw2f6Y1GSB5p2PADokxE693LdB6x5/csSGudazhgrSa/lUVRcULpz8bMlRJXWQwZ8Yw0IxNeUvrDIyhDPzWMaVtAbFM+RMtZBUDS6FPCb3HAM3uJs3sE7oGRKNYGESoE3YXM2Wr2yVsHwxX3nANhl4cQVyD+CuJ90G407PwLOGX+LQK74MV3jjvRHcaYZJ0DcKmkPSldceSdL4yxsj2VpL7sdhER7Z7+5rKj47c/2FyNEoceUTHTckc0CmRA3BQEsetG5x6Z3wDxtkpoVPsMuQAAAAASUVORK5CYII="),alt:"",class:"search-icon-img",style:{width:"22px",height:"23px"}},null,8,ti)])),_:1},8,["modelValue"])]),c(Q).count?(o(),m(Ze,{key:0,data:c(Q).list,type:e.order,disabled:!1,onOnClose:me},null,8,["data","type"])):(o(),s("div",ni,oi))])),_:1},8,["show","onClosed"])):v("",!0)],64)}}}),[["__scopeId","data-v-42d53b68"]]);const ui={class:"pro-radio-wrap"},di=e({name:"ProductKeys"});var ci=b(e({...di,props:{originData:{default:()=>({})},modelValue:{default:()=>({})},riskInfo:{default:()=>({})},defaultValue:{default:()=>({})},useData:{default:()=>({})}},emits:["trialChange","inputChange"],setup(e,{emit:i}){const a=e,p=l(a.originData),b=l(a.modelValue);l(1);const g=e=>{const i=ie(a.originData,e),l=ie(a.originData,e);return i.map((e=>{const i=l?l.find((i=>i.code===e.code)):null;return{label:e.value,value:e.code,disabled:!(!i||null===i.useFlag||void 0===i.useFlag)&&1!==i.useFlag}}))},h=()=>{pe.forEach((e=>{const i=ie(a.originData,e.configKey);"checkbox"===e.type&&i&&i.length>0&&!b.value.riskCode&&(b.value[e.valueKey]=i[0].code)}))};return t((()=>{h()})),n((()=>a.defaultValue),(e=>{(null==e?void 0:e.riskCode)&&(b.value=JSON.parse(JSON.stringify(e)))}),{deep:!0,immediate:!0}),n((()=>p.value),(e=>{h()}),{deep:!0,immediate:!0}),n((()=>JSON.stringify(b.value)),((e,l)=>{const t=e&&JSON.parse(e)||{};console.log("---v new = ",t);const n=l&&JSON.parse(l)||{};let o=null;pe.forEach((e=>{t[e.valueKey]&&n[e.valueKey]&&t[e.valueKey]!==n[e.valueKey]&&(o||(o={key:e.valueKey,oldValue:n[e.valueKey],newValue:t[e.valueKey],riskCode:a.riskInfo.riskCode}))})),e&&i("trialChange",JSON.parse(e),o)}),{deep:!0,immediate:!0}),(e,i)=>{const l=V,a=f;return o(!0),s(y,null,T(c(pe),(i=>(o(),s(y,null,[c(ie)(e.originData,i.configKey)&&(1===e.riskInfo.mainRiskFlag||i.ruleKey&&2===c(ie)(e.originData,i.ruleKey)||!i.ruleKey)?(o(),s("div",{key:e.riskInfo.riskCode+"_"+i.name},["checkbox"===i.type?(o(),m(a,{key:0,modelValue:b.value[i.valueKey],"onUpdate:modelValue":e=>b.value[i.valueKey]=e,label:i.name,name:i.valueKey,class:"risk-select-field"},{input:u((()=>[d("div",ui,[r(l,{modelValue:b.value[i.valueKey],"onUpdate:modelValue":[e=>b.value[i.valueKey]=e,e=>((e,i)=>{console.log("-------change",e,i)})(e,i.valueKey)],options:g(i.configKey)},null,8,["modelValue","onUpdate:modelValue","options"])])])),_:2},1032,["modelValue","onUpdate:modelValue","label","name"])):v("",!0)])):v("",!0)],64)))),256)}}}),[["__scopeId","data-v-15c494f0"]]);const mi={class:"com-risk-liabilityinfo"},pi={class:"item-wrap"},vi={key:0},yi=(e=>(Y("data-v-68f76c44"),e=e(),Q(),e))((()=>d("div",{class:"cell-content"},null,-1))),fi=e({name:"riskLiabilityInfo"});var Vi=b(e({...fi,props:{dataSource:{default:()=>({})},modelValue:{default:()=>({})},dataSourceFolmulate:{default:()=>({})},params:{default:()=>({amountUnit:"",basicsAmount:"",basicsPremium:"",riskId:""})},defaultValue:{default:()=>({})}},emits:["trialChange"],setup(e,{emit:i}){const p=e,b=l({formInfo:p.dataSource,isCheckList:[],checkValueList:[],liabilityList:[],signLiabilityClick:[]}),g=(e,i)=>{console.log("---click ",e,i),b.value.signLiabilityClick.push({item:e,index:i})},h=(e,i)=>{const{riskLiabilityInfoVOList:l,riskLiabilityCollocationVOList:a}=p.dataSource,t=l[e].liabilityId,n=(a||[]).find((e=>e.relatedLiabilityId===t||e.collocationLiabilityId===t))||{};let o=null;n.collocationLiabilityId===t?(o=n.relatedLiabilityId,n.collocationType===ve.YI_LAI&&(o=n.collocationLiabilityId)):o=n.collocationLiabilityId;const s=l.findIndex((e=>e.liabilityId===o));((e,i,l)=>{b.value.isCheckList[e]===`${W.YES}`?l===ve.BANG_DING||l===ve.YI_LAI?b.value.isCheckList[i]="1":b.value.isCheckList[i]="2":l===ve.BANG_DING?b.value.isCheckList[i]="2":l===ve.YI_LAI&&(b.value.isCheckList[i]=e!==i?"3":"2")})(e,s,n.collocationType),i(l[s],s,!0)},k=(e,i,l)=>{const a=b.value.liabilityList.map((e=>e.key)),t=0===(null==e?void 0:e.liabilityAttributeValueList.length)&&0===(null==e?void 0:e.formula.length),n=b.value.isCheckList[i];t&&-1===a.indexOf(i)&&n&&b.value.liabilityList.push({liabilityValue:e,key:i,isSwitchOn:b.value.isCheckList[i]}),"1"===n?g(e,i):b.value.signLiabilityClick.splice(i,1),-1!==a.indexOf(i)&&b.value.liabilityList.forEach((e=>{e.key===i&&(e.isSwitchOn=b.value.isCheckList[i])})),l||h(i,k)},O=(e,i)=>{const l=e.liabilityAttributeValueList.filter((e=>e.displayValue===b.value.checkValueList[i])),a=JSON.parse(JSON.stringify(l))[0]||e.liabilityAttributeValueList[0],t={...e,liabilityValue:a};b.value.liabilityList.length>0&&Object.keys(b.value.checkValueList).indexOf(i)&&(b.value.liabilityList=b.value.liabilityList.filter((e=>e.key!==i))),b.value.checkValueList[i]=a.displayValue,b.value.liabilityList.push({liabilityValue:t,key:i,isSwitchOn:"1"})},L=a((()=>te(p.dataSourceFolmulate))),C=(e,i,l)=>{1===l?b.value.liabilityList.push({liabilityValue:{...e,liabilityValue:null==e?void 0:e.liabilityAttributeValueList[0]},key:i,isSwitchOn:"1"}):b.value.liabilityList.push({liabilityValue:{...e,liabilityValue:null==e?void 0:e.liabilityAttributeValueList[0]},key:i,isSwitchOn:"2"})};n((()=>L.value),((e,i)=>{var l,a;const t=null==(l=p.dataSourceFolmulate)?void 0:l.initialAmount,n=null==(a=p.dataSourceFolmulate)?void 0:a.initialPremium,o={amountUnit:p.params.amountUnit,basicsAmount:t,basicsPremium:n,riskId:p.params.riskId};p.dataSource.riskLiabilityInfoVOList.map((async l=>{if(l.formula.length>0&&(t||n)&&((null==e?void 0:e.initialAmount)!==(null==i?void 0:i.initialAmount)||(null==e?void 0:e.initialPremium)!==(null==i?void 0:i.initialPremium))){const{code:e,data:i}=await oe({...o,riskLiabilities:[l]});if("10000"===e){if(l.liabilityAttributeValueList=i[0].formulaResult,b.value.signLiabilityClick.length>0){const e=b.value.signLiabilityClick.find((e=>e.item.liabilityCode===l.liabilityCode));e&&O(e.item,e.index)}return{...l,liabilityAttributeValueList:i[0]}}return l}}))}),{deep:!0,immediate:!0}),n((()=>b.value.liabilityList),(e=>{const l=b.value.liabilityList.filter((e=>"1"===e.isSwitchOn)).map((e=>({...e.liabilityValue})));i("trialChange",l)}),{deep:!0,immediate:!0}),t((()=>{console.log("----mounted"),p.dataSource.riskLiabilityInfoVOList.map(((e,i)=>{const l=e.liabilityAttributeValueList.length>0&&0===e.formula.length&&e.liabilityAttributeValueList[0].displayValue;return b.value.checkValueList[i]||(b.value.checkValueList[i]=l),1!=+e.showFlag&&b.value.liabilityList.push({liabilityValue:e,key:i,isSwitchOn:"1"}),1==+e.showFlag&&(1===e.attributeFlag&&2===e.insureFlag&&0===e.formula.length&&C(e,i,1),1===e.attributeFlag&&1===e.insureFlag&&0===e.formula.length&&C(e,i,2),2===e.attributeFlag&&1===(null==e?void 0:e.liabilityAttributeValueList.length)&&2===e.insureFlag&&C(e,i,1),2===e.attributeFlag&&1===(null==e?void 0:e.liabilityAttributeValueList.length)&&1===e.insureFlag&&C(e,i,2)),null}))}));const I=l([]);return n((()=>p.dataSource.riskLiabilityInfoVOList),(e=>{I.value=(e||[]).map((e=>{const i=(p.dataSource.riskLiabilityCollocationVOList||[]).find((i=>i.collocationLiabilityId===e.liabilityId));return{...e,relation:null==i?void 0:i.collocationType}}))}),{deep:!0,immediate:!0}),n((()=>p.defaultValue),(e=>{(null==e?void 0:e.riskCode)&&e.liabilityList&&(b.value.signLiabilityClick=[],p.dataSource.riskLiabilityInfoVOList.forEach(((i,l)=>{var a;const t=null==e?void 0:e.liabilityList.find((e=>e.liabilityCode===i.liabilityCode));console.log("--target lia = ",t),t&&(b.value.isCheckList[l]="1",b.value.checkValueList[l]=null==(a=null==t?void 0:t.liabilityValue)?void 0:a.displayValue,1==+i.showFlag&&2==+i.optionalFlag?k(i,l):g(i,l))})))}),{deep:!0,immediate:!0}),(e,i)=>{const l=X,a=f,t=Z;return o(),m(t,null,{default:u((()=>[d("div",mi,[d("div",pi,[(o(!0),s(y,null,T(c(I),((e,i)=>(o(),s("div",{key:i},[1!=+e.showFlag||2===e.attributeFlag&&1===(null==e?void 0:e.liabilityAttributeValueList.length)&&2===e.insureFlag?v("",!0):(o(),s("div",vi,[(c(b).isCheckList[i]?"3"!==c(b).isCheckList[i]:e.relation!==c(ve).YI_LAI)?(o(),m(a,{key:0,label:`${e.liabilityName}`,"label-width":"44%",name:"insuredRelation",class:"riskliab-select-field"},{input:u((()=>[1==+e.insureFlag?(o(),m(l,{key:0,modelValue:c(b).isCheckList[i],"onUpdate:modelValue":e=>c(b).isCheckList[i]=e,"active-value":"1","inactive-value":"2",size:"0.68rem",onClick:l=>k(e,i)},null,8,["modelValue","onUpdate:modelValue","onClick"])):v("",!0)])),_:2},1032,["label"])):v("",!0),1==+c(b).isCheckList[i]&&1===e.attributeFlag||1===e.attributeFlag&&2===e.insureFlag?(o(),m(a,{key:1,label:e.liabilityAttributeTypeDesc,"label-width":"44%",name:"insuredRelation",class:"riskliab-select-field-children"},{input:u((()=>[r(V,{modelValue:c(b).checkValueList[i],"onUpdate:modelValue":e=>c(b).checkValueList[i]=e,prop:{label:"displayValue",value:"displayValue"},options:(e.formula.length,e.liabilityAttributeValueList),"is-simply":!0,onClick:l=>O(e,i)},null,8,["modelValue","onUpdate:modelValue","options","onClick"])])),_:2},1032,["label"])):v("",!0)]))])))),128))])]),yi])),_:1})}}}),[["__scopeId","data-v-68f76c44"]]);export{Ne as B,ci as P,Vi as R,ri as a};

!function(){var e=document.createElement("style");e.innerHTML=".net-sale-wrap[data-v-77438b5c]{padding-bottom:1.33333rem;background:#f1f5fc}.net-sale-wrap .footer-button[data-v-77438b5c]{justify-content:space-between}.net-sale-wrap .product-name[data-v-77438b5c]{font-size:.48rem;font-weight:500;line-height:1.06667rem}.net-sale-wrap .part[data-v-77438b5c]{background-color:#fff;padding:0 var(--zaui-page-border, .4rem)}.net-sale-wrap .part .common-cell-wrapper[data-v-77438b5c]{height:1.38667rem;align-items:center;width:100%;display:inline-flex}.net-sale-wrap .part .common-cell-wrapper[data-v-77438b5c] .cell-container{align-items:flex-start;justify-content:center;width:100%;color:var(--van-field-label-color);font-size:.4rem}.net-sale-wrap .radio-group[data-v-77438b5c]{width:100%}.net-sale-wrap .radio-group .radio-btn[data-v-77438b5c]{justify-content:space-between}.net-sale-wrap .price[data-v-77438b5c]{color:#393d46;font-size:.45333rem;font-weight:400}.net-sale-wrap .price span[data-v-77438b5c]{color:var(--van-primary-color);font-weight:700}.net-sale-wrap .right[data-v-77438b5c]{width:3.73333rem;background:var(--van-primary-color);border-color:var(--van-primary-color)}.net-sale-wrap .footer[data-v-77438b5c]{margin-top:.66667rem;padding:0 var(--zaui-page-border, .4rem)}\n",document.head.appendChild(e),System.register(["./vendor-legacy-80ec6972.js","./debounce-legacy-4f3469a1.js","./utils-legacy-501bcafa.js","./product-legacy-ec489ef7.js","./trial-legacy-7e23f3c7.js","./nextStep-legacy-54f0d505.js","./theme-legacy-28dda1ed.js","./index-legacy-4d88d609.js","./index-legacy-f06d3f03.js","./infoCollection-legacy-1bb67295.js","./useStorage-legacy-2ff4bd3a.js","./trial-legacy-a72a56f8.js","./relativeTime-legacy-89da35f6.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-8e7cf208.js","./core-legacy-653f430b.js","./index-legacy-af8c5ae3.js"],(function(e){"use strict";var t,a,n,r,o,i,l,d,c,u,s,p,f,m,v,g,I,O,y,b,w,L,h,C,V,j,P,D,k,R,x,N,Y;return{setters:[function(e){t=e.h,a=e.a8,n=e.N,r=e.r,o=e.x,i=e.Z,l=e.j,d=e.k,c=e.l,u=e.m,s=e.n,p=e.Q,f=e.z,m=e.I,v=e.A,g=e.s,I=e.d,O=e.D,y=e.a3,b=e.a4,w=e.T},function(e){L=e.d},function(e){h=e.r,C=e.t},function(e){V=e.p},function(e){j=e.i,P=e.b,D=e.p},function(e){k=e._,R=e.n},function(e){x=e.u},function(e){N=e.P},function(e){Y=e._},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const B=e=>(y("data-v-77438b5c"),e=e(),b(),e),E={class:"net-sale-wrap"},T={class:"part product-name"},_=B((()=>f("span",null,null,-1))),H=B((()=>f("span",null,null,-1))),z={class:"part"},$={class:"footer"};e("default",Y(t({setup(e){const t=x();a();const y=n(),{productCode:b="HTEJBX",tenantId:Y="9991000001",orderNo:B,agentCode:M="",agencyCode:S,saleChannelId:A,extraInfo:F,from:U}=y.query,q=r(),J=r(),W=r(),G=r(),Q=r(),X=r({}),Z=r({});let K="",ee={};try{ee=JSON.parse(decodeURIComponent(F))}catch(ce){}const te=r({agencyId:S,agentCode:M,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"EVENT_NETSALE_underWrite",pageCode:"infoCollection",templateId:ee?.templateId,iseeBizNo:K,extraInfo:ee},orderCategory:1,saleChannelId:A,tenantId:Y,venderCode:"",tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"xinao",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",tenantId:Y}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),ae=o((()=>!!W.value?.productRelationPlanVOList?.length)),ne=r();i([()=>Q.value,()=>G.value,()=>J.value],(()=>{const{premium:e}=Q.value||{};if(e)ne.value=e&&`￥${e}元`;else{const{tenantProductInsureVO:e}=G.value||{};let t={};t=e?.planList?.length?(e?.planList||[]).find((e=>e.planCode===J.value)):e?.planInsureVO;const{paymentFrequencyValue:a,premiumUnit:n}=t?.productPremiumVOList?.[0]||{};ne.value=a&&`￥${a}${n||"元"}`}}),{deep:!0,immediate:!0});const re=o((()=>{let e=[];return e=ae.value?W.value?.productRelationPlanVOList.find((e=>e.planCode===J.value))?.productRiskVoList||[]:W.value?.productRiskVoList||[],e})),oe=o((()=>1===((re.value||[])?.[0]?.riskDetailVOList?.[0]?.insuranceStartType||1)?`${I(new Date).format("YYYY-MM-DD")} 00:00:00`:`${I(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`)),ie=o((()=>{const e=re.value||[],{insuranceEndType:t,riskInsureLimitVO:a}=e?.[0]?.riskDetailVOList?.[0]||{},{insurancePeriodValueList:n}=a||{},[r,o]=(n?.[0]||"").split("_");return 1===t?`${I(new Date).add(o||0,r).format("YYYY-MM-DD")} 23:59:59`:t?`${I(new Date).add(o,r).format("YYYY-MM-DD")} 00:00:00`:""})),le=async()=>{te.value.venderCode=W.value?.productBasicInfoVO.insurerCode,te.value.orderAmount=Q.value.premium,te.value.orderRealAmount=Q.value.premium,te.value.commencementTime=oe.value,te.value.expiryDate=ie.value,te.value.tenantOrderInsuredList[0].planCode=J.value,te.value.tenantOrderInsuredList[0].planName=W.value?.productRelationPlanVOList.find((e=>e.planCode===J.value))?.planName,R(((e={},t={},a={})=>{const n={},r=(e=[])=>{(e||[]).forEach((e=>{n[e.riskCode]=e,e.riskPremiumDetailVOList?.length&&r(e.riskPremiumDetailVOList)}))};r(t.riskPremiumDetailVOList);const o={...a},i={tenantId:Y,riskList:Z.value?.[0].riskVOList||[],riskPremium:n,productId:e?.productBasicInfoVO.id};return o.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:Q.value.premium,productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,tenantOrderRiskList:C(i)},o})(W.value,Q.value,te.value),((e,t)=>{"jumpToPage"===t&&w("提交成功")}))},de=async()=>{q.value?.validateForm().then((()=>{O.confirm({title:"分享",message:`即将向客户【${te.value.tenantOrderHolder.name}】发送投保确认信息,请确认是否继续？`}).then((()=>{le()}))}))};i([()=>te.value.tenantOrderHolder.gender,()=>te.value.tenantOrderHolder.birthday,()=>te.value.tenantOrderInsuredList?.[0].gender,()=>te.value.tenantOrderInsuredList?.[0].birthday,()=>J.value],L((([e,t])=>{e&&t&&(async(e,t,a)=>{const n={holder:{personVO:e.tenantOrderHolder},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",personVO:e,productPlanVOList:[{insurerCode:t.productBasicInfoVO.insurerCode,planCode:J.value||0,riskVOList:h(a)}]}))),productCode:t.productBasicInfoVO.productCode,tenantId:Y},{code:r}=await P(n);if("10000"===r){const{code:e,data:t}=await D(n);"10000"===e?(Q.value=t,Z.value=n.insuredVOList[0]?.productPlanVOList):Q.value=null}})(te.value,W.value,re.value)}),500));return l((()=>{(async()=>{const{code:e,data:t}=await V({productCode:b,withInsureInfo:!0,tenantId:Y});"10000"===e&&(G.value=t,document.title=t.tenantProductInsureVO?.productNam||"");const{code:a,data:n}=await j({productCode:b});"10000"===a&&(W.value=n,X.value=n.productFactor,n?.productRelationPlanVOList?.length&&(J.value=n.productRelationPlanVOList[0].planCode))})(),setTimeout((async()=>{K=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const n=d("ProRadioButton"),r=d("ProCard"),o=d("ProCell"),i=d("ProPageWrap"),l=d("van-config-provider");return c(),u(l,{"theme-vars":v(t)},{default:s((()=>[p(i,null,{default:s((()=>[f("div",E,[f("div",T,m(W.value?.productBasicInfoVO?.productFullName),1),v(ae)?(c(),u(r,{key:0,"show-line":!1,title:"保障年期"},{default:s((()=>[p(n,{modelValue:J.value,"onUpdate:modelValue":a[0]||(a[0]=e=>J.value=e),class:"radio-group",prop:{label:"planName",value:"planCode"},options:W.value?.productRelationPlanVOList},null,8,["modelValue","options"])])),_:1})):g("",!0),p(k,{ref_key:"formRef",ref:q,"title-collection":{HOLDER:"投保人",INSURER:"被保人",BENEFICIARY:"收益人"},"need-desensitize":"","form-info":te.value,"send-sms-code":()=>{},"input-align":"left","factor-object":X.value},{holderName:s((()=>[_])),insurerName:s((()=>[H])),_:1},8,["form-info","send-sms-code","factor-object"]),f("div",z,[p(o,{title:"保费",content:ne.value},null,8,["content"]),p(o,{title:"保障期间",content:`${v(oe).split(" ")[0]}~${v(ie).split(" ")[0]}`},null,8,["content"])]),f("div",$,[p(N,{shadow:!1,text:"分享用户确认投保",onClick:de})])])])),_:1})])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-77438b5c"]]))}}}))}();

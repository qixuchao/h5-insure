var we=Object.defineProperty,Ue=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var Re=(a,n,g)=>n in a?we(a,n,{enumerable:!0,configurable:!0,writable:!0,value:g}):a[n]=g,K=(a,n)=>{for(var g in n||(n={}))Me.call(n,g)&&Re(a,g,n[g]);if(Ee)for(var g of Ee(n))Ne.call(n,g)&&Re(a,g,n[g]);return a},H=(a,n)=>Ue(a,$e(n));import{g as q,L as S,X as w,r as O,h as V,m as _,n as C,k as h,y as x,z as t,a1 as xe,a2 as Te,a5 as z,C as $,a4 as G,x as N,d as W,j as R,s as P,I as U,a6 as qe,o as Se,F as Q,E as J,ak as Ye,al as je,B as _e,D as Ge}from"./vendor-bf3e5d1d.js";import{S as Ke,a as He,R as We,b as X,A as Xe,c as ze,L as Oe,d as Qe}from"./trial-ed7f2d12.js";import{g as Je}from"./index-1e47b23c.js";import{l as Pe}from"./useStorage-e1694258.js";import{_ as Y,b as Be}from"./index-f161a6a4.js";const Ze=a=>(xe("data-v-4b261f8d"),a=a(),Te(),a),et={class:"com-occupational-wrapper"},tt=Ze(()=>x("div",{class:"popup-title"},"\u9009\u62E9\u804C\u4E1A",-1)),it={class:"popup-content"},ot=q({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(a,{emit:n}){const g=a,A=S({show:g.show,options:[],currentValue:""}),v=()=>{n("close")},i=({value:y,selectedOptions:r})=>{const I=(r||[]).map(f=>f.value).join("/"),l=+r[r.length-1].name;n("update:modelValue",l),n("finish",I),v()},D=y=>{const r=y,I=l=>{l.forEach(f=>{const m=f;m.children.length?I(m.children):m.children=null})};return I(r),r},F=(y="")=>{var l;const r=`${(l=y==null?void 0:y.toLocaleUpperCase)==null?void 0:l.call(y)}_OCCUPATION`,I=Pe.get("occupational")||{};if(I[r]){A.options=I[r];return}Je({dictCodeList:[r]}).then(({code:f,data:m})=>{var k;if(f==="10000"){const o=D(((k=m==null?void 0:m[0])==null?void 0:k.dictItemList)||[]);A.options=o,I[r]=o,Pe.set("occupational",I)}})};return w(()=>g,()=>{F(g.insuredCode)},{deep:!0,immediate:!0}),w(()=>g.modelValue,y=>{},{deep:!0,immediate:!0}),(y,r)=>{const I=O("van-cascader"),l=O("VanPopup");return V(),_("div",et,[C(l,{show:t(A).show,"onUpdate:show":r[1]||(r[1]=f=>t(A).show=f),"show-footer":"",position:"bottom",closeable:"",onClose:v},{default:h(()=>[tt,x("div",it,[C(I,{modelValue:t(A).currentValue,"onUpdate:modelValue":r[0]||(r[0]=f=>t(A).currentValue=f),title:"\u8BF7\u9009\u62E9\u804C\u4E1A","show-header":!1,placeholder:"\u8BF7\u9009\u62E9",options:t(A).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:i},null,8,["modelValue","options"])])]),_:1},8,["show"])])}}});var at=Y(ot,[["__scopeId","data-v-4b261f8d"]]);const nt={class:"com-personal-info-wrapper"},ut={key:0,class:"placeholder"},lt={key:1},rt=q({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(a,{expose:n}){const g=a,[A,v]=z(),[i,D]=z(),F=$(),y=G("source")||{},r=S({formInfo:g.formInfo,occupationalText:""}),I=o=>{r.occupationalText=o},l=()=>{D(!1)},f=()=>new Promise((o,e)=>{F==null||F.value.validate().then(()=>{o("")},()=>{e()})}),m=o=>{const e=o||[];for(let s=0;s<e.length;s++)for(let d=s+1;d<e.length;d++){const u=e[s].split("_"),p=e[d].split("_"),E=e[s];u[0]===p[0]?u>p&&(e[s]=e[d],e[d]=E):u[0]==="age"&&(e[s]=e[d],e[d]=E)}return e},k=N(()=>{const o=m(g==null?void 0:g.ageRange),e=(E="")=>{const L=+E.split("_")[1],j=E.split("_")[0];return[L,j]},s=e(o[0]),d=e(o[o.length-1]),u=W().subtract(s[0],s[1]==="age"?"year":"day").format("YYYY-MM-DD"),p=W().subtract(d[0],d[1]==="age"?"year":"day").format("YYYY-MM-DD");return console.log("ageRangeObj",new Date(p),new Date(u)),{minAge:new Date(p),maxAge:new Date(u)}});return n({validateForm:f,ageRangeObj:k.value}),(o,e)=>{const s=O("VanField"),d=O("ProRadioButton"),u=O("VanForm"),p=O("van-datetime-picker"),E=O("van-popup");return V(),_("div",nt,[C(u,{ref_key:"formRef",ref:F,"input-align":"right","error-message-align":"right"},{default:h(()=>[t(y).type==="proposal"&&(t(y).type==="add"||t(y).type==="repeatAdd")||t(y).type!=="proposal"&&(a.factorList.includes("APPLICANT.AGE")||a.factorList.includes("AGE")||a.factorList.includes("DAY")||a.factorList.includes("APPLICANT.DAY"))?(V(),R(s,{key:0,modelValue:t(r).formInfo.birthday,"onUpdate:modelValue":e[0]||(e[0]=L=>t(r).formInfo.birthday=L),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F",class:"isLink",readonly:"","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[1]||(e[1]=L=>t(v)(!0))},null,8,["modelValue"])):P("",!0),t(y).type==="proposal"&&(t(y).type==="add"||t(y).type==="repeatAdd")||t(y).type!=="proposal"&&(a.factorList.includes("APPLICANT.GENDER")||a.factorList.includes("GENDER"))?(V(),R(s,{key:1,modelValue:t(r).formInfo.gender,"onUpdate:modelValue":e[3]||(e[3]=L=>t(r).formInfo.gender=L),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},{input:h(()=>[C(d,{modelValue:t(r).formInfo.gender,"onUpdate:modelValue":e[2]||(e[2]=L=>t(r).formInfo.gender=L),options:t(Ke)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),a.factorList.includes("SOCIAL_INS")?(V(),R(s,{key:2,modelValue:t(r).formInfo.socialFlag,"onUpdate:modelValue":e[5]||(e[5]=L=>t(r).formInfo.socialFlag=L),name:"socialFlag",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u793E\u4FDD"}]},{input:h(()=>[C(d,{modelValue:t(r).formInfo.socialFlag,"onUpdate:modelValue":e[4]||(e[4]=L=>t(r).formInfo.socialFlag=L),options:t(He)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),a.factorList.includes("OCCUPATION_CATEGORY")?(V(),R(s,{key:3,modelValue:t(r).formInfo.occupationClass,"onUpdate:modelValue":e[6]||(e[6]=L=>t(r).formInfo.occupationClass=L),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u804C\u4E1A\u7C7B\u578B"}],name:"occupationClass",label:"\u804C\u4E1A\u7C7B\u578B","is-link":"",readonly:"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[7]||(e[7]=L=>t(D)(!0))},{input:h(()=>[t(r).occupationalText?(V(),_("div",lt,U(t(r).occupationalText),1)):(V(),_("span",ut,"\u8BF7\u9009\u62E9"))]),_:1},8,["modelValue"])):P("",!0)]),_:1},512),C(E,{show:t(A),"onUpdate:show":e[10]||(e[10]=L=>qe(A)?A.value=L:null),position:"bottom"},{default:h(()=>[C(p,{type:"date","min-date":t(k).minAge,"max-date":t(k).maxAge,onConfirm:e[8]||(e[8]=L=>{t(r).formInfo.birthday=t(W)(L).format("YYYY-MM-DD"),t(v)(!1)}),onCancel:e[9]||(e[9]=L=>t(v)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"]),t(i)?(V(),R(at,{key:0,modelValue:t(r).formInfo.occupationClass,"onUpdate:modelValue":e[11]||(e[11]=L=>t(r).formInfo.occupationClass=L),show:t(i),"insured-code":a.insuredCode,onFinish:I,onClose:l},null,8,["modelValue","show","insured-code"])):P("",!0)])}}});var qt=Y(rt,[["__scopeId","data-v-bc4ffb20"]]);const st={class:"com-risk-card-wrapper part-card"},dt={class:"custom-field"},mt={class:"field-tip"},ct={class:"custom-field"},ft={class:"field-tip"},pt={class:"custom-field"},yt={class:"field-tip"},gt={key:0},Vt={key:9,class:"liab-desc"},kt=q({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(a){const n=a,g=$({}),A=G("premium")||{};g.value=G("enumList")||{};const v=$({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),i=S({formInfo:n.formInfo}),D=o=>typeof o!="boolean"&&!o||Array.isArray(o)&&!o.length?!0:{}.toString.call(o)==="[object Object]"?Object.keys(o).length:!1,F=(o,e,s={})=>{let d=e;return Array.isArray(e)||(d=[`${d}`]),(o||[]).filter(u=>d.includes(`${u.value}`)||d.includes(u.value))},y=N(()=>{var o,e,s,d,u;return((o=n.originData)==null?void 0:o.riskType)===1?F(n.enums.RISK_INSURANCE_PERIOD,((e=n.originData.riskInsureLimitVO)==null?void 0:e.insurancePeriodValueList)||[]):((s=n.originData)==null?void 0:s.periodType)===2?F([{value:"year_1",name:"1\u5E74"}],["year_1"]):F((d=n.enums)==null?void 0:d.RISK_INSURANCE_PERIOD,((u=n.mainRiskData.riskInsureLimitVO)==null?void 0:u.insurancePeriodValueList)||[])}),r=N(()=>{var o,e,s,d,u,p,E,L;return((o=n.originData)==null?void 0:o.riskType)===1?F((e=n==null?void 0:n.enums)==null?void 0:e.RISK_PAYMENT_PERIOD,((s=n.originData.riskInsureLimitVO)==null?void 0:s.paymentPeriodValueList)||[]):((d=n.originData)==null?void 0:d.exemptFlag)===1?F(We,[`${(p=(u=n==null?void 0:n.originData)==null?void 0:u.riskInsureLimitVO)==null?void 0:p.paymentPeriodRule}`]):((E=n.originData)==null?void 0:E.periodType)===2?F([{value:"year_1",name:"1\u5E74\u4EA4"}],["year_1"]):F(n.enums.RISK_PAYMENT_PERIOD,((L=n.mainRiskData.riskInsureLimitVO)==null?void 0:L.paymentPeriodValueList)||[])}),I=N(()=>{var o,e,s,d,u;return((o=n.originData)==null?void 0:o.riskType)===1?F(X,((e=n.originData.riskInsureLimitVO)==null?void 0:e.paymentFrequencyList)||[]):((s=n.originData.riskInsureLimitVO)==null?void 0:s.paymentTypeRule)===1?F(X,((d=n.mainRiskData.riskInsureLimitVO)==null?void 0:d.paymentFrequencyList)||[]):F(X,((u=n.mainRiskData.riskInsureLimitVO)==null?void 0:u.paymentFrequencyList)||[])}),l=N(()=>{var s,d;let o=0,e=0;return(((d=(s=n.originData)==null?void 0:s.riskCalcMethodInfoVO)==null?void 0:d.paymentMethodLimitList)||[]).forEach((u,p)=>{p===0&&(o=u.minAmount,e=u.maxAmount),o>u.minAmount&&(o=u.minAmount),e<u.maxAmount&&(e=u.maxAmount)}),i.formInfo.amount=i.formInfo.amount||o,{min:o,max:e}}),f=N(()=>{var s,d;let o=0,e=0;return(((d=(s=n.originData)==null?void 0:s.riskCalcMethodInfoVO)==null?void 0:d.paymentMethodLimitList)||[]).forEach((u,p)=>{p===0&&(o=u.minPremium,e=u.maxPremium),o>u.minPremium&&(o=u.minPremium),e<u.maxPremium&&(e=u.maxPremium)}),i.formInfo.premium=i.formInfo.premium||o,{min:o,max:e}}),m=N(()=>{var s,d,u,p;const o=((d=(s=n.originData)==null?void 0:s.riskCalcMethodInfoVO)==null?void 0:d.minCopy)||1,e=(p=(u=n.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:p.maxCopy;return i.formInfo.copy=`${i.formInfo.copy||o||1}`,{min:o,max:e}}),k=(o,e,s)=>{var u,p;const d=((p=(u=n.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:p.increaseDecreaseNum)||1;if(s==="sumInsured"){if(l.value.max&&+o>l.value.max)return`\u91D1\u989D\u6700\u5927${l.value.max}\u5143`;if(+o<l.value.min)return`\u91D1\u989D\u6700\u5C0F${l.value.min}\u5143`}else{if(f.value.max&&+o>f.value.max)return`\u91D1\u989D\u6700\u5927${f.value.max}\u5143`;if(+o<f.value.min)return`\u91D1\u989D\u6700\u5C0F${f.value.min}\u5143`}return+o%d===0?"":`\u91D1\u989D\u5FC5\u987B\u662F${d}\u7684\u500D\u6570`};return Se(()=>{var e,s;const o={riskType:n.originData.riskType,riskId:n.originData.id,riskName:n.originData.riskName,riskCode:n.originData.riskCode,mainRiskCode:n.originData.riskType!==1?(e=n.mainRiskData)==null?void 0:e.riskCode:void 0,mainRiskId:n.originData.riskType!==1?(s=n.mainRiskData)==null?void 0:s.id:void 0,riskCategory:n.originData.riskCategory,liabilityVOList:(n.originData.riskLiabilityInfoVOList||[]).map(d=>H(K({},d),{liabilityAttributeCode:d.liabilityAttributeType,liabilityCode:d.liabilityCode,liabilityRateType:d.liabilityRateType}))};Object.assign(i==null?void 0:i.formInfo,o)}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.paymentFrequency},(o=0)=>{var e,s,d;[3].includes(((e=n.originData.riskCalcMethodInfoVO)==null?void 0:e.saleMethod)||0)&&(((d=(s=n.originData)==null?void 0:s.riskCalcMethodInfoVO)==null?void 0:d.paymentMethodLimitList)||[]).forEach(u=>{+u.paymentFrequency==+o&&Object.assign(i.formInfo,{amount:u.perCopyAmount,premium:u.perCopyPremium})}),+o==1&&i.formInfo.chargePeriod!=="single"&&(i.formInfo.chargePeriod="single")}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.copy},o=>{var e,s;((e=n.originData.riskCalcMethodInfoVO)==null?void 0:e.saleMethod)===4&&(i.formInfo.amount=(s=n.originData.riskCalcMethodInfoVO)==null?void 0:s.fixedAmount)}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.chargePeriod},o=>{o==="single"&&+(i.formInfo.paymentFrequency||0)!=1&&(i.formInfo.paymentFrequency=1)}),w(()=>n==null?void 0:n.mainRiskInfo,o=>{var e,s,d,u,p,E;o&&n.originData.riskType===2&&(((s=(e=n.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:s.insurancePeriodRule)===1&&(o.coveragePeriod?v.value.coveragePeriod.disabled=!0:v.value.coveragePeriod.prevent=!0,i.formInfo.coveragePeriod=o.coveragePeriod||""),((u=(d=n.originData)==null?void 0:d.riskInsureLimitVO)==null?void 0:u.paymentPeriodRule)===1&&(o.chargePeriod?v.value.chargePeriod.disabled=!0:v.value.chargePeriod.prevent=!0,i.formInfo.chargePeriod=o.chargePeriod||""),((E=(p=n.originData)==null?void 0:p.riskInsureLimitVO)==null?void 0:E.paymentTypeRule)===1&&(o.paymentFrequency?v.value.paymentFrequency.disabled=!0:v.value.paymentFrequency.prevent=!0,i.formInfo.paymentFrequency=o.paymentFrequency||0))},{immediate:!0,deep:!0}),(o,e)=>{var j,Z,ee,te,ie,oe,ae,ne,ue,le,re,se,de,me,ce,fe,pe,ye,ge,Ve,ke,De,Ie,ve,Le,be,he,Fe,Ce,Ae;const s=O("ProSvg"),d=O("ProTitle"),u=O("VanStepper"),p=O("VanField"),E=O("ProRadioButton"),L=O("ProExpand");return V(),_("div",st,[C(d,{"risk-type":a.originData.riskType,title:a.originData.riskName},{default:h(()=>[a.removeRiskList.includes(a.originData.id)?(V(),_("div",{key:0,class:"delete-risk",onClick:e[0]||(e[0]=c=>a.removeRisk(a.originData.id))},[C(s,{name:"delete",color:"#0d6efe"})])):P("",!0)]),_:1},8,["risk-type","title"]),((j=a.originData.riskCalcMethodInfoVO)==null?void 0:j.saleMethod)===1&&a.originData.exemptFlag===2?(V(),R(p,{key:0,modelValue:t(i).formInfo.amount,"onUpdate:modelValue":e[2]||(e[2]=c=>t(i).formInfo.amount=c),label:"\u4FDD\u989D",name:"amount",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...c)=>k(...c,"sumInsured")}]},{input:h(()=>{var c,b;return[x("div",dt,[C(u,{modelValue:t(i).formInfo.amount,"onUpdate:modelValue":e[1]||(e[1]=T=>t(i).formInfo.amount=T),"input-width":"64px",min:t(l).min,step:((c=a.originData.riskCalcMethodInfoVO)==null?void 0:c.increaseDecreaseNum)||1,max:t(l).max},null,8,["modelValue","min","step","max"]),x("span",mt,U(`\u91D1\u989D\u6700\u4F4E${t(l).min}\u5143\uFF0C\u4E3A${((b=a.originData.riskCalcMethodInfoVO)==null?void 0:b.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((ee=(Z=a.originData)==null?void 0:Z.riskCalcMethodInfoVO)==null?void 0:ee.saleMethod)===2?(V(),R(p,{key:1,modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[4]||(e[4]=c=>t(i).formInfo.premium=c),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...c)=>k(...c,"premium")}]},{input:h(()=>{var c,b,T,B;return[x("div",ct,[C(u,{modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[3]||(e[3]=M=>t(i).formInfo.premium=M),step:((b=(c=a.originData)==null?void 0:c.riskCalcMethodInfoVO)==null?void 0:b.increaseDecreaseNum)||1,min:t(f).min,"input-width":"64px",max:t(f).max},null,8,["modelValue","step","min","max"]),x("span",ft,U(`\u91D1\u989D\u6700\u4F4E${t(f).min}\u5143\uFF0C\u4E3A${((B=(T=a.originData)==null?void 0:T.riskCalcMethodInfoVO)==null?void 0:B.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((ie=(te=a.originData)==null?void 0:te.riskCalcMethodInfoVO)==null?void 0:ie.saleMethod)===3||((ae=(oe=a.originData)==null?void 0:oe.riskCalcMethodInfoVO)==null?void 0:ae.saleMethod)===4&&(((ue=(ne=a.originData)==null?void 0:ne.riskCalcMethodInfoVO)==null?void 0:ue.minCopy)||((re=(le=a.originData)==null?void 0:le.riskCalcMethodInfoVO)==null?void 0:re.maxCopy))?(V(),R(p,{key:2,modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[6]||(e[6]=c=>t(i).formInfo.copy=c),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:h(()=>[x("div",pt,[C(u,{modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[5]||(e[5]=c=>t(i).formInfo.copy=c),step:1,min:t(m).min,max:t(m).max},null,8,["modelValue","min","max"]),x("span",yt,U(`${t(m).min}\u4EFD\u8D77\u8D2D\uFF0C\u6700\u591A\u8D2D\u4E70${t(m).max}\u4EFD`),1)])]),_:1},8,["modelValue"])):P("",!0),(![1].includes(((se=a.originData.riskCalcMethodInfoVO)==null?void 0:se.saleMethod)||0)||((de=a.originData)==null?void 0:de.exemptFlag)===1)&&(a.originData.riskCalcMethodInfoVO.fixedAmount||((ce=t(A))==null?void 0:ce[(me=a.originData)==null?void 0:me.riskCode]))?(V(),R(p,{key:3,label:"\u4FDD\u989D"},{input:h(()=>{var c,b,T,B;return[x("div",null,U(((c=a.originData.riskCalcMethodInfoVO)==null?void 0:c.fixedAmount)||((B=(T=t(A))==null?void 0:T[(b=a.originData)==null?void 0:b.riskCode])==null?void 0:B.amount)),1)]}),_:1})):P("",!0),!D((pe=(fe=a.originData)==null?void 0:fe.riskInsureLimitVO)==null?void 0:pe.insurancePeriodValueList)||!D((ge=(ye=a.originData)==null?void 0:ye.riskInsureLimitVO)==null?void 0:ge.insurancePeriodRule)?(V(),R(p,{key:4,modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":e[8]||(e[8]=c=>t(i).formInfo.coveragePeriod=c),label:"\u4FDD\u969C\u671F\u95F4",name:"coveragePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4FDD\u969C\u671F\u95F4"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":e[7]||(e[7]=c=>t(i).formInfo.coveragePeriod=c),disabled:v.value.coveragePeriod.disabled,prevent:v.value.coveragePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4FDD\u969C\u671F\u95F4":"",options:t(y),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!D((ke=(Ve=a.originData)==null?void 0:Ve.riskInsureLimitVO)==null?void 0:ke.paymentPeriodValueList)||!D((Ie=(De=a.originData)==null?void 0:De.riskInsureLimitVO)==null?void 0:Ie.paymentPeriodRule)?(V(),R(p,{key:5,modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":e[10]||(e[10]=c=>t(i).formInfo.chargePeriod=c),label:"\u4EA4\u8D39\u671F\u95F4",name:"chargePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u671F\u95F4"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":e[9]||(e[9]=c=>t(i).formInfo.chargePeriod=c),disabled:v.value.chargePeriod.disabled,prevent:v.value.chargePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u671F\u95F4":"",options:t(r),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!D((ve=a.originData.riskInsureLimitVO)==null?void 0:ve.paymentFrequencyList)||!D((Le=a.originData.riskInsureLimitVO)==null?void 0:Le.paymentPeriodRule)?(V(),R(p,{key:6,modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[12]||(e[12]=c=>t(i).formInfo.paymentFrequency=c),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u65B9\u5F0F"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[11]||(e[11]=c=>t(i).formInfo.paymentFrequency=c),disabled:v.value.paymentFrequency.disabled,prevent:v.value.paymentFrequency.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u65B9\u5F0F":"",options:t(I)},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),D((he=(be=a.originData)==null?void 0:be.riskInsureLimitVO)==null?void 0:he.annuityDrawValueList)?P("",!0):(V(),R(p,{key:7,modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[14]||(e[14]=c=>t(i).formInfo.annuityDrawDate=c),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65F6\u95F4"}]},{input:h(()=>{var c;return[C(E,{modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[13]||(e[13]=b=>t(i).formInfo.annuityDrawDate=b),options:F(t(Xe),((c=a.originData.riskInsureLimitVO)==null?void 0:c.annuityDrawValueList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),D((Ce=(Fe=a.originData)==null?void 0:Fe.riskInsureLimitVO)==null?void 0:Ce.annuityDrawFrequencyList)?P("",!0):(V(),R(p,{key:8,modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[16]||(e[16]=c=>t(i).formInfo.annuityDrawType=c),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65B9\u5F0F"}]},{input:h(()=>{var c;return[C(E,{modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[15]||(e[15]=b=>t(i).formInfo.annuityDrawType=b),options:F(t(ze),((c=a.originData.riskInsureLimitVO)==null?void 0:c.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),(V(!0),_(Q,null,J(a.originData.riskLiabilityInfoVOList||[],(c,b)=>(V(),_("div",{key:b},[c.optionalFlag===1?(V(),R(p,{key:0,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":T=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=T,label:c.liabilityName,name:"liabilityAttributeValue",rules:[{required:c.liabilityAttributeValue,message:`\u8BF7\u9009\u62E9${c.liabilityName}`}]},{input:h(()=>{var T,B;return[x("div",null,[D(c.liabilityAttributeValueList)?(V(),_("span",gt,"50\u4E07")):(V(),R(E,{key:1,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":M=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=M,options:F(t(Oe),(B=(T=a.originData.riskLiabilityInfoVOList)==null?void 0:T[b])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(V(),R(p,{key:1,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":T=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=T,label:c.liabilityName,name:"liabilityAttributeValue"},{input:h(()=>{var T,B;return[x("div",null,[D(c.liabilityAttributeValueList)?(V(),R(E,{key:0,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":M=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=M,options:t(Qe)},null,8,["modelValue","onUpdate:modelValue","options"])):(V(),R(E,{key:1,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":M=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=M,options:F(t(Oe),(B=(T=a.originData.riskLiabilityInfoVOList)==null?void 0:T[b])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label"]))]))),128)),((Ae=a.originData)==null?void 0:Ae.relationDesc)?(V(),_("div",Vt,[C(L,{title:"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E"},{default:h(()=>[x("div",null,U(a.originData.relationDesc),1)]),_:1})])):P("",!0)])}}});var Dt=Y(kt,[["__scopeId","data-v-4aef94c8"]]);const It=a=>(xe("data-v-1f13cbe8"),a=a(),Te(),a),vt={class:"com-risk-list-wrapper"},Lt=It(()=>x("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),bt={class:"risk-list"},ht={class:"cell-title"},Ft={class:"title"},Ct={class:"footer-bar"},At=_e("\u786E\u8BA4"),Et=q({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(a,{emit:n}){const g=a,A=$([]),v=$([]),i=$([...g.disabled]),D=S({show:g.show,currentChecked:[...g.modelValue]}),F=(l,f)=>{if(!g.collocationList.length){if(f){D.currentChecked=[];return}D.currentChecked.push(l);return}let m=D.currentChecked,k=i.value;f?(g.collocationList.forEach(o=>{l===o.riskId&&(o.collocationType===2?m=m.filter(e=>e!==o.collocationRiskId||e!==l):o.collocationType===3?(m=m.filter(e=>e!==l),k=k.filter(e=>e!==o.collocationRiskId)):m=m.filter(e=>e!==l))}),D.currentChecked=m,i.value=k):(g.collocationList.forEach(o=>{l===o.riskId&&(f||(o.collocationType===2?m.push(o.collocationRiskId):o.collocationType===3&&k.push(o.collocationRiskId),m.push(l)))}),D.currentChecked.push(...m),i.value=k)},y=l=>{var m,k,o;if(i.value.includes(l))return;const f=D.currentChecked.includes(l);F(l,f),(o=(k=(m=A==null?void 0:A.value)==null?void 0:m[l])==null?void 0:k.toggle)==null||o.call(k)},r=()=>{n("close")},I=()=>{const l=g.riskList.filter(f=>D.currentChecked.includes(f.id));n("update:modelValue",[...new Set(v.value)]),n("finished",l,i.value),n("close")};return Ye(()=>{A.value=[]}),w(()=>D.currentChecked,l=>{v.value=l},{deep:!0,immediate:!0}),w(()=>g.modelValue,l=>{v.value=l||[],i.value.push(...l||[])},{deep:!0,immediate:!0}),(l,f)=>{const m=O("van-checkbox"),k=O("VanCell"),o=O("van-cell-group"),e=O("van-checkbox-group"),s=O("VanButton"),d=O("VanPopup");return V(),_("div",vt,[C(d,{show:t(D).show,"onUpdate:show":f[1]||(f[1]=u=>t(D).show=u),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",round:"",position:"bottom",closeable:"",onClose:r},{default:h(()=>[Lt,x("div",bt,[C(e,{modelValue:v.value,"onUpdate:modelValue":f[0]||(f[0]=u=>v.value=u)},{default:h(()=>[C(o,{inset:""},{default:h(()=>[(V(!0),_(Q,null,J(a.riskList,u=>(V(),R(k,{key:u.id,title:u.riskName,disabled:i.value.includes(u.id),onClick:p=>y(u.id)},{"right-icon":h(()=>[C(m,{ref_for:!0,ref:p=>A.value[u.id]=p,shape:"square",disabled:i.value.includes(u.id),name:u.id,onClick:je(p=>y(u.id),["stop"])},null,8,["disabled","name","onClick"])]),title:h(()=>[x("div",ht,[x("div",Ft,U(u.riskName),1)])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),x("div",Ct,[C(s,{type:"primary",disabled:!t(D).currentChecked.length,block:"",onClick:I},{default:h(()=>[At]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var Rt=Y(Et,[["__scopeId","data-v-1f13cbe8"]]);const Ot={class:"risk-list-wrapper"},Pt={key:0,class:"add-rider-risk"},xt={class:"left-part"},Tt=_e("+ \u9644\u52A0\u9669"),_t=q({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(a){const n=a,g=G("source")||{},[A,v]=z(!1);$(null),$(null);const i=S({mainRiskInfo:n.riskInfo,riskInfo:n.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),D=(y,r)=>{i.currentRiskList=i.currentRiskList.concat(y),i.disabledList=r},F=y=>{Ge.confirm({message:"\u786E\u5B9A\u8981\u5220\u9664\u9644\u52A0\u9669\u4E48\uFF1F"}).then(()=>{var I;const r=[y];(((I=i.mainRiskData)==null?void 0:I.collocationVOList)||[]).forEach(l=>{y===l.riskId&&(l.collocationType===2||l.collocationType===3)&&r.push(l.collocationRiskId)}),i.checkedList=i.checkedList.filter(l=>!r.includes(l)),i.currentRiskList=i.currentRiskList.filter(l=>r.includes(l.id)?(Object.assign(i.riskInfo,{[l.id]:void 0}),!1):!0),i.disabledList=i.disabledList.filter(l=>!r.includes(l))}).catch(()=>{})};return w(()=>i.currentRiskList,y=>{const r=[i.mainRiskData,...y];let I=[],l=[];const f=[];r.forEach((m,k)=>{var e,s,d;const o=((e=m==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:e.riskFactorRelationList)||[];I=I.concat(o.filter(u=>u.factorObject==="insured").map(u=>u.factorCode)),l=l.concat(o.filter(u=>u.factorObject==="holder").map(u=>u.factorCode)),f.push((s=m==null?void 0:m.riskInsureLimitVO)==null?void 0:s.minHolderAge,(d=m==null?void 0:m.riskInsureLimitVO)==null?void 0:d.maxHolderAge)}),(y||[]).forEach(m=>{var o,e;const k={riskType:m.riskType,riskId:m.id,riskCode:m.riskCode,riskName:m.riskName,mainRiskCode:m.riskType!==1?(o=i.mainRiskData)==null?void 0:o.riskCode:void 0,mainRiskId:m.riskType!==1?(e=i.mainRiskData)==null?void 0:e.id:void 0,riskCategory:m.riskCategory,liabilityVOList:(m.riskLiabilityInfoVOList||[]).map(s=>H(K({},s),{liabilityAttributeCode:s.liabilityAttributeType,liabilityCode:s.liabilityCode,liabilityRateType:s.liabilityRateType}))};i.riskInfo[m.id]||Object.assign(i.riskInfo,{[m.id]:k})}),n.pickFactor({insuredFactorList:[...new Set(I)],holderFactorList:[...new Set(l)],ageRange:f})},{deep:!0,immediate:!0}),w(()=>n.riskInfo,y=>{i.mainRiskInfo=Object.values(y||{}).find(r=>(r==null?void 0:r.riskType)===1)||{}},{deep:!0,immediate:!0}),w(()=>n.originData,y=>{let r=[];const I=[];g.origin==="proposal"&&!(g.type==="add"||g.type==="repeatAdd")?((y||[]).forEach(l=>{l.riskType===1&&(i.mainRiskData=l),r.push(l)}),r=r.filter(l=>g.showRiskList.includes(l.id))):(y||[]).forEach(l=>{l.riskType===1?(i.mainRiskData=l,r.push(l)):l.collocationType===2?r.push(l):I.push(l)}),i.riderRiskList=I,i.currentRiskList=r},{deep:!0,immediate:!0}),(y,r)=>{var l,f,m;const I=O("ProCheckButton");return V(),_("div",Ot,[(V(!0),_(Q,null,J(t(i).currentRiskList,(k,o)=>(V(),R(Dt,{key:k.id,"form-info":t(i).riskInfo[k.id],index:o,enums:a.enums,"main-risk-data":t(i).mainRiskData,"main-risk-info":t(i).mainRiskInfo,"origin-data":k,"remove-risk":F,"remove-risk-list":t(i).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"]))),128)),((l=t(i).riderRiskList)==null?void 0:l.length)-((f=t(i).checkedList)==null?void 0:f.length)&&t(g).origin!=="proposal"?(V(),_("div",Pt,[x("span",xt,U(`\u5171\u6709${t(i).riderRiskList.length-t(i).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),C(I,{activated:"",onClick:r[0]||(r[0]=k=>t(v)(!0))},{default:h(()=>[Tt]),_:1})])):P("",!0),t(A)?(V(),R(Rt,{key:1,modelValue:t(i).checkedList,"onUpdate:modelValue":r[1]||(r[1]=k=>t(i).checkedList=k),show:t(A),disabled:t(i).disabledList,"risk-list":t(i).riderRiskList,"collocation-list":((m=t(i).mainRiskData)==null?void 0:m.collocationVOList)||[],onFinished:D,onClose:r[2]||(r[2]=k=>t(v)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):P("",!0)])}}});var St=Y(_t,[["__scopeId","data-v-1afa9508"]]);const Yt=(a={})=>Be.post("/api/app/insure/product/insureProductDetail",a),jt=a=>Be.post("/api/app/insure/insurance/premiumCalc",a);export{qt as P,St as R,Rt as a,Yt as i,jt as p};

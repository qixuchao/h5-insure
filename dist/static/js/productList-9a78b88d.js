import{_ as e,d as a,t as s,r as t,o,c as r,a as l,b as d,u as i,e as c,f as u,I as n,g as p,h as m,i as v,j as g,k as f,l as h,w as C,m as L,F as y,n as P,P as k,p as _,q as x,s as I,T as w}from"./index-a3c15377.js";import{P as j}from"./index-43e8f859.js";import{L as V}from"./index-1a38a06a.js";import{_ as T}from"./index-d4c9f564.js";import{S as U}from"./index-6d959cd9.js";import{_ as b}from"./empty-ae586b6c.js";import{q as M}from"./product-596d65da.js";import{P as F}from"./trial-ba75aeed.js";const N={class:"com-product-item"},S={class:"content-wrap"},q={class:"product-image"},O={class:"product-info"},R={class:"title"},A={class:"description"},D={class:"price-item"},W={class:"price"};var z=e(a({__name:"productItem",props:{productInfo:{default:()=>({})},errorMsg:{default:""}},setup(e){const a=e,{productInfo:p}=s(a),m=t({checked:!1});return s(m),(e,a)=>{const s=n;return o(),r("div",N,[l("div",S,[l("div",q,[d(s,{src:i(p).image},null,8,["src"])]),l("div",O,[l("p",R,c(i(p).productFullName),1),l("p",A,c(i(p).desc),1),l("p",D,[l("span",W,c(i(p).price),1),l("span",null,c(i(p).amountUnit),1)])]),u(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-69e3f256"]]);const E={class:"search-wrap"},G={class:"article-tag"},$=["onClick"],B={class:"page-proposal-list"},H=a({name:"productList"});var J=e(a({...H,setup(e){const a=p();m();const u=t({searchValue:"",tagLists:[],loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productCode:void 0,proposalList:[],showFooter:!0,productName:"",productCodeList:[],errorMsgMap:{},excludeProductCodeList:[],isCreateProposal:!1,selectedProductList:[],firstLoading:!0}),{searchValue:n,tagLists:N,loading:S,finished:q,refreshing:O,productList:R,selectProduct:A,insurerCodeList:D,showCategory:W,productTotal:H,showFooter:J}=s(u),K=()=>{const{excludeProductCodeList:e}=u;u.firstLoading&&w.loading("加载中..."),M({title:n.value,insurerCodeList:D.value,showCategory:W.value,excludeProductCodeList:Array.isArray(e)?e:[],pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:t}=e;"10000"===a&&(R.value=s,H.value=t)})).finally((()=>{w.clear(),u.firstLoading=!1}))},Q=e=>{K()},X=v(0),Y=()=>{var e;O.value&&(R.value=[],O.value=!1),K(),S.value=!1,H.value===(null==(e=R.value)?void 0:e.length)&&(q.value=!0)},Z=g((()=>{var e;return(null==(e=R.value)?void 0:e.length)>0})),ee=()=>{q.value=!0,S.value=!0,Y()};return(e,s)=>{const t=U,p=T,m=V,v=j,g=f("ProPageWrap");return o(),h(g,{class:"page-proposal"},{default:C((()=>[l("div",E,[d(t,{modelValue:i(n),"onUpdate:modelValue":s[0]||(s[0]=e=>L(n)?n.value=e:null),placeholder:"请输入产品名称进行搜索",shape:"round",class:"search","clear-trigger":"always","show-action":"",clearable:"",onSearch:Q},null,8,["modelValue"]),l("div",G,[(o(!0),r(y,null,P(i(k),((e,a)=>(o(),r("div",{key:a,class:_(["tag-item",{checked:i(X)===a}]),onClick:s=>((e,a)=>{X.value=a,W.value=e,K()})(e.value,a)},[l("div",{class:_(["tag-out",{checked:i(X)==a}])},[l("div",{class:_(["tag-item-text",{checked:i(X)==a}])},c(e.label),3)],2)],10,$)))),128))])]),i(Z)||i(u).firstLoading?x("",!0):(o(),h(p,{key:0,"empty-img":i(b),title:"暂无产品","empty-class":"empty-select"},null,8,["empty-img"])),l("div",B,[d(v,{modelValue:i(O),"onUpdate:modelValue":s[2]||(s[2]=e=>L(O)?O.value=e:null),onRefresh:ee},{default:C((()=>[d(m,{loading:i(S),"onUpdate:loading":s[1]||(s[1]=e=>L(S)?S.value=e:null),finished:i(q),"finished-text":i(Z)?"- 已经到底了哦 -":"",onLoad:Y},{default:C((()=>[(o(!0),r(y,null,P(i(R),(e=>(o(),h(z,{key:e.id,"product-info":e,"error-msg":i(u).errorMsgMap[e.productCode],onClick:s=>(async e=>{let s=I.premiumTrial;const{insurerCode:t="",productCode:o="",templateId:r,productClass:l}=e;[F.SINGLE_PRODUCT,F.TWO_PRODUCT].includes(l)&&(s=I.productInfo),a.push({path:s,query:{insurerCode:t,productCode:o,tenantId:9991000011,templateId:r}})})(e)},null,8,["product-info","error-msg","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])])])),_:1})}}}),[["__scopeId","data-v-9d894e42"]]);export{J as default};

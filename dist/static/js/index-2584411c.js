import{_ as e,d as a,j as l,k as n,E as t,ah as s,dz as i,o,c as u,a as d,b as r,w as v,e as p,u as c,F as m,s as f,n as C,f as y,p as k,aL as g,q as h,aR as S,aS as _}from"./index-7925b1ec.js";import{C as j}from"./index-7299e542.js";import{o as w}from"./utils-aebcfadc.js";import{C as b}from"./index-153be4ee.js";import"./infoCollection-f7119ec1.js";import"./trial-13626411.js";const x={class:"guarantee-list"},L={key:0,class:"plan-list"},U=["onClick"],A={class:"guarantee-detail"},V={class:"content"},$={key:1,class:"feerate-view"},E=a({name:"guarantee"});var q=e(a({...E,props:{dataSource:{default:()=>({})},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{default:5},planList:{default:()=>[]}},emits:["updateActivePlan"],setup(e,{emit:a}){var E,q;const F=e;l("");const R=l((null==(q=null==(E=F.planList)?void 0:E[0])?void 0:q.planCode)||void 0),B=l(),I=l([]);l([]);const N=l(),P=n((()=>!!F.planList.length)),T=l(null),z=l([]),G=n((()=>{var e,a;return(null==(e=z.value)?void 0:e.length)===(null==(a=I.value)?void 0:a.length)})),O=()=>{var e,a;null==(a=null==(e=T.value)?void 0:e.toggleAll)||a.call(e,!G.value)};t([()=>F.dataSource,()=>R.value],(()=>{var e,a;I.value=((null==(a=((null==(e=F.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===R.value)))?void 0:a.data)||[]).filter((e=>e.isShowOn===`${s.YES}`))}),{immediate:!0,deep:!0});const Y=n((()=>{var e;return(null==(e=F.dataSource)?void 0:e.rateUri)||""})),D=n((()=>!!(N.value&&N.value.paymentFrequencyValue&&N.value.premiumUnit&&Y))),H=()=>{w({fileType:"pdf",fileUri:Y.value})};return(e,l)=>{var n,t;const s=_,w=j,E=b,q=i("dompurify-html");return o(),u(m,null,[d("div",x,[r(s,{title:"保障详情","show-line":!1,"show-divider":!1},{extra:v((()=>[d("span",{onClick:O},p(c(G)?"收起全部":"展开全部"),1)])),_:1}),c(P)?(o(),u("div",L,[(o(!0),u(m,null,f(e.planList,((e,l)=>(o(),u("div",{key:`${e.planCode}_${l}`,class:C("plan-list-item "+(e.planCode===c(R)?"plan-list-item-active":"")),onClick:l=>{return n=e.planCode,R.value=n,B.value=F.planList.findIndex((e=>e.planCode===n)),void a("updateActivePlan",n);var n}},[d("span",null,p(e.planName),1)],10,U)))),128))])):y("",!0),d("div",A,[r(E,{ref_key:"collapseRef",ref:T,modelValue:c(z),"onUpdate:modelValue":l[0]||(l[0]=e=>h(z)?z.value=e:null),border:!1},{default:v((()=>[(o(!0),u(m,null,f(c(I),((e,a)=>(o(),k(w,{key:a,title:e.title,value:e.desc,name:a,border:!1,class:"guarantee-item"},{default:v((()=>[g(d("div",V,null,512),[[q,e.tips]])])),_:2},1032,["title","value","name"])))),128))])),_:1},8,["modelValue"])]),c(D)?(o(),u("div",$,[d("span",null,p(`${(null==(n=c(N))?void 0:n.paymentFrequencyValue)||""}${(null==(t=c(N))?void 0:t.premiumUnit)||""}`),1),c(Y)?(o(),u("span",{key:0,onClick:H},"查看保费")):y("",!0)])):y("",!0)]),r(S)],64)}}}),[["__scopeId","data-v-6fa4fef0"]]);export{q as default};

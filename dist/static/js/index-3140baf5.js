var $=Object.defineProperty,z=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var N=(o,e,t)=>e in o?$(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,p=(o,e)=>{for(var t in e||(e={}))Q.call(e,t)&&N(o,t,e[t]);if(P)for(var t of P(e))W.call(e,t)&&N(o,t,e[t]);return o},h=(o,e)=>z(o,H(e));import{g as Y,aj as J,Q as K,E as F,M as X,h as Z,r,j as d,k as y,m as _,p as f,n as S,G as L,A as b,F as R,z as B,C as A,T,L as ee}from"./vendor-83047d1f.js";import{_ as te,l as q,H as ae,G as oe,P as se}from"./index-e01a306c.js";import{l as ne}from"./inform-e5d1574b.js";import{a as ue,n as ie}from"./index-c862d3a0.js";import{s as re}from"./useStorage-7cb72d2a.js";import{s as le}from"./verify-2f0475c1.js";const ce={class:"inform-file"},pe={class:"tips"},de=A(" \u60A8\u7684\u7B7E\u540D\u5C06\u88AB\u7528\u4E8E"),_e=A("\u6587\u4EF6 "),fe={class:"footer-button"},Ee=A("\u4E0B\u4E00\u6B65"),me=Y({setup(o){const e=J(),t=K(),{productCode:Be="MMBBSF",agentCode:I="65434444",tenantId:C="9991000007",agencyCode:Ce="3311222",insurerCode:D="zhongan",productCategory:M=1,templateId:G=1,orderNo:k="2022080217103534947"}=t.query,l=F(null),g=F(!1),U=()=>{var a;(a=l.value)==null||a.clear()},s=X({noticeType:"",materialSource:"",noticeList:[],pageData:{}}),j=()=>{ue({orderNo:k,saleUserId:I,tenantId:C}).then(({code:a,data:n})=>{a==="10000"&&(Object.assign(s.pageData,n),n.tenantOrderAttachmentList.forEach(i=>{i.category===ae.ELECTRIC_SIGN&&i.objectType===oe.AGENT&&l.value.setDataURL(i.fileBase64)}))})};Z(()=>{j(),ne({insurerCode:D,orderNo:k,productCategory:M,tenantId:C,noticeType:9,objectType:3}).then(({code:a,data:n})=>{a==="10000"&&(s.noticeList=n)})});const O=a=>{re.set("questionData",a),e.push({path:"/healthNotice",query:p({questionnaireType:a.questionnaireType},t.query)})},V=()=>{var i,E;if(!(s.noticeList&&s.noticeList.every(c=>c.isDone===1))){T("\u8BF7\u5B8C\u6210\u6240\u6709\u544A\u77E5\u8FDB\u884C\u4E0B\u4E00\u6B65");return}if((i=l.value)==null?void 0:i.isEmpty()){T("\u8BF7\u5B8C\u6210\u4EE3\u7406\u4EBA\u7B7E\u5B57\u8FDB\u884C\u4E0B\u4E00\u6B65");return}if(!g.value){T("\u8BF7\u52FE\u9009\u540C\u610F\u7B7E\u540D");return}const n=(E=l.value)==null?void 0:E.save();le("AGENT",n,s.pageData.id,C).then(c=>{c&&ie(h(p({},s.pageData),{extInfo:h(p({},s.pageData.extInfo),{templateId:G,pageCode:"salesNotice"}),venderCode:D})).then(({code:v,data:m})=>{v==="10000"&&m.pageAction.pageAction==="jumpToPage"&&e.push({path:se[m.pageAction.data.nextPageCode],query:p({},t.query)})})})};return(a,n)=>{const i=r("van-cell"),E=r("ProSign"),c=r("van-checkbox"),v=r("ProPDFviewer"),m=r("van-button"),w=r("ProPageWrap");return d(),y(w,{class:"page-salesman-inform"},{default:_(()=>[f(q,{title:"\u8425\u9500\u5458\u544A\u77E5\u4E66"},{default:_(()=>[(d(!0),S(R,null,L(b(s).noticeList,u=>(d(),y(i,{key:u.id,class:ee({"is-active":u.isDone===2}),title:`\u300A${u.title}\u300B`,"is-link":"",value:`${u.isDone===1?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:x=>O(u)},null,8,["class","title","value","onClick"]))),128))]),_:1}),f(q,{title:"\u8425\u9500\u5458\u7B7E\u5B57","show-divider":!1,"show-line":!1},{extra:_(()=>[B("div",{class:"resign",onClick:U},"\u91CD\u7B7E")]),default:_(()=>[f(E,{ref_key:"agentSignRef",ref:l,selector:"sign2"},null,512)]),_:1}),B("div",ce,[f(c,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=u=>g.value=u),shape:"square"},null,8,["modelValue"]),B("p",pe,[de,(d(!0),S(R,null,L(b(s).noticeList,(u,x)=>(d(),y(v,{key:x,class:"file",title:`\u300A${u.title}\u300B`},null,8,["title"]))),128)),_e])]),B("div",fe,[f(m,{type:"primary",block:"",onClick:V},{default:_(()=>[Ee]),_:1})])]),_:1})}}});var ke=te(me,[["__scopeId","data-v-ca08dbe2"]]);export{ke as default};

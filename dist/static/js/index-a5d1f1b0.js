import{d as e,af as a,ag as l,h as n,i as t,j as i,k as o,E as s,ah as d,M as r,ai as u,l as c,o as v,c as p,u as _,b as f,F as m,a as I,p as C,f as O,w as g,v as h,q as y,aj as L,y as j,ak as b,al as k}from"./index-ee94b5d2.js";import{i as E,q as T,s as w}from"./trial-8a9f3ffb.js";import{a as A,b as P}from"./product-7ab77a72.js";import{_ as x}from"./TrialButton-01cc04d0.js";import{q as S}from"./createProposal-3cf3a670.js";import{u as N}from"./useOrder-f015cb25.js";import{p as R,d as V}from"./utils-d8cf4f61.js";import{g as B,c as F}from"./util-5908d393.js";import"./index-592039bd.js";import"./format-31cde443.js";import"./utils-223c7187.js";import"./infoCollection-a19f38c2.js";import"./trial-da663685.js";const D={key:0},U={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},q={class:"info"},M={key:1,class:"preview-placeholder"},G=I("br",null,null,-1),z=I("div",{id:"insureButton"},null,-1),H=I("div",{id:"xinaoDialog"},null,-1),J=e({name:"InsuranceLong"}),W=e({...J,setup(e){const J=a((()=>l((()=>import("./index-5c79d52b.js")),["static/js/index-5c79d52b.js","static/css/index-c23f272e.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css"]))),W=a((()=>l((()=>import("./index-2853cf38.js")),["static/js/index-2853cf38.js","static/css/index-79104747.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css","static/js/infoCollection-a19f38c2.js"]))),X=a((()=>l((()=>import("./index-8994a686.js")),["static/js/index-8994a686.js","static/css/index-491cbbd3.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css"])));a((()=>l((()=>import("./index-36fa6af0.js")),["static/js/index-36fa6af0.js","static/css/index-50785b3e.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css","static/js/cloneDeep-f4199fb1.js","static/js/TrialButton-01cc04d0.js","static/css/TrialButton-dea42d8e.css","static/js/index-592039bd.js","static/css/index-bbfdd7ec.css","static/js/format-31cde443.js","static/js/useOrder-f015cb25.js"])));const Y=a((()=>l((()=>import("./index-b8452480.js")),["static/js/index-b8452480.js","static/css/index-ebb5282b.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css"]))),$=a((()=>l((()=>import("./Video-a925d8f5.js")),["static/js/Video-a925d8f5.js","static/css/Video-20262b6f.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css"]))),K=a((()=>l((()=>import("./index-873914ff.js")),["static/js/index-873914ff.js","static/css/index-2acebd53.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css","static/js/index-39490bf6.js","static/css/index-f9ad8602.css","static/js/index-823c7599.js","static/js/utils-223c7187.js","static/js/infoCollection-a19f38c2.js","static/js/trial-da663685.js"]))),Q=a((()=>l((()=>import("./index-65c28067.js")),["static/js/index-65c28067.js","static/css/index-99d99485.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css","static/js/product-7ab77a72.js","static/js/useThread-637a02aa.js","static/js/jsbridgePromise-204cb700.js"]))),Z=a((()=>l((()=>import("./index-deeebe26.js")),["static/js/index-deeebe26.js","static/css/index-fa4edf2a.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css","static/js/theme-94cf7d00.js","static/js/index-592039bd.js","static/css/index-bbfdd7ec.css","static/js/utils-223c7187.js","static/js/infoCollection-a19f38c2.js","static/js/trial-da663685.js"]))),ee=a((()=>l((()=>import("./index-d48833fd.js")),["static/js/index-d48833fd.js","static/css/index-eabeb59f.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css"]))),ae=a((()=>l((()=>import("./index-132f6a85.js")),["static/js/index-132f6a85.js","static/css/index-793d1580.css","static/js/index-ee94b5d2.js","static/css/index-3ce2d7e3.css"]))),le=n(),ne=t(),{productCode:te="",tenantId:ie,agentCode:oe="",agencyCode:se,saleChannelId:de,proposalId:re,proposalInsuredId:ue,extraInfo:ce,orderNo:ve,insurerCode:pe,preview:_e,trialPreview:fe}=ne.query;let me={};try{me=JSON.parse(decodeURIComponent(ce))}catch(Je){}const{openId:Ie,saTenantId:Ce=""}=me;i();const Oe=i(),ge=i(),he=i(!1),ye=i({}),Le=i({}),je=i(!1),be=i(0),ke=i(!1);i({});const Ee=i(!0);i(!0);const Te=i(!0),we=i(""),Ae=i({}),Pe=i({}),xe=i([]),Se=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Ne=i({});o((()=>!!_e||!!fe));const Re=o((()=>!!fe));i();const Ve=()=>{L("premiumTrial",ne.query)},Be=N(),Fe=i(!1);s((()=>Ne.value.planCode),(e=>{Ae.value=(Le.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const De=()=>{Oe.value.handleClickTab()("insureButton")};i(""),i(0);const Ue=e=>{Ae.value=(Le.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},qe=()=>{je.value=!1,Ee.value=!0},Me=()=>{je.value=!1,Ee.value=!0},Ge=i([]),ze=async()=>{var e,a,l;const{code:n,data:t}=await T({calcProductFactorList:[{productCode:te}]});if("10000"===n){const n=B();Object.assign(Be.value,t,{insuredList:[{...null==(e=t.insuredList)?void 0:e[0],...n}]}),F();(e=>{P(e).then((({code:e,data:a})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:l}=V(a);Ge.value=e.concat(l)}}))})(R(null==(l=null==(a=t.insuredList)?void 0:a[0])?void 0:l.productList))}},He=async()=>{Be.value.extInfo&&(Be.value.extInfo.iseeBizNo=we.value);const{code:e,data:a}=await w(Be.value);"10000"===e&&le.push({path:j.questionNotice,query:{...ne.query,orderNo:a}})};return s((()=>Ae.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:l}=Ae.value;Ne.value.planCode=e,Pe.value=(l||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),r((()=>{u(ge,(([{isIntersecting:e}],a)=>{he.value=!0}))})),c((()=>{Te.value=!0,re||ze(),(async()=>{!Re.value&&A({productCode:te}).then((({data:e,code:a})=>{if("10000"===a){ye.value=e;const{wxShareConfig:a,showWXShare:l,title:n,desc:t,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};l?Object.assign(Se.value,{...a,imgUrl:a.image,isShare:l}):Object.assign(Se.value,{title:n,desc:t,imgUrl:i,isShare:l})}})),ve||re||(Fe.value=!0),re&&S({id:re,tenantId:Ce||ie}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:l}=a,n=(te||"").split(",");Object.assign(Be.value,{renewFlag:"",holder:e,tenantId:ie,proposalId:re,insuredList:(l||[]).filter((e=>e.id===+ue)).map((e=>({...e,relationToHolder:null,productList:e.productList.filter((e=>n.includes(e.productCode)))})))}),Fe.value=!0}})),await E({productCode:te,isTenant:!1}).then((({data:e,code:a})=>{var l;"10000"===a&&(he.value=!0,ke.value=!0,Le.value=e,Ae.value=null==(l=e.productPlanInsureVOList)?void 0:l[0],xe.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),Te.value=!1})(),setTimeout((async()=>{we.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var l,n,t,i,o,s,d,r,u,c,L,j,E,T,w,A,P,S,N,R;const V=b,B=k;return v(),p(m,null,[_(Te)?(v(),p("div",D)):(v(),p("div",U,[f(V),_(Re)?(v(),p("div",M,[h("当前页面仅用于保费试算预览"),G,h("不展示其他产品相关配置信息")])):(v(),p(m,{key:0},[I("div",q,[1==(null==(n=null==(l=_(ye))?void 0:l.BASIC_INFO)?void 0:n.bannerType)&&(null==(i=null==(t=_(ye))?void 0:t.BASIC_INFO)?void 0:i.banner.length)?(v(),C(_(X),{key:0,"data-skeleton-type":"img",images:null==(s=null==(o=_(ye))?void 0:o.BASIC_INFO)?void 0:s.banner},null,8,["images"])):O("",!0),2==(null==(r=null==(d=_(ye))?void 0:d.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=_(ye))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),C(_($),{key:1,"data-skeleton-type":"img",src:null==(L=_(ye))?void 0:L.BASIC_INFO.video[0]},null,8,["src"])):O("",!0),(null==(T=null==(E=null==(j=_(ye))?void 0:j.BASIC_INFO)?void 0:E.bannerMove)?void 0:T.length)?(v(),C(_(X),{key:2,url:null==(P=null==(A=null==(w=_(ye))?void 0:w.BASIC_INFO)?void 0:A.bannerMove)?void 0:P[0],onClick:De},null,8,["url"])):O("",!0),I("div",{ref_key:"observeRef",ref:ge},null,512)]),f(_(J),{"data-source":null==(S=_(ye))?void 0:S.BASIC_INFO},null,8,["data-source"]),(null==(N=_(ye))?void 0:N.GUARANTEE)?(v(),C(_(K),{key:0,"show-service-config":"","data-source":_(ye),"plan-list":_(xe),onUpdateActivePlan:Ue},null,8,["data-source","plan-list"])):O("",!0),I("div",{class:"trial-text-btn",onClick:Ve},"算一算保费"),f(_(Y),{"data-source":null==(R=_(ye))?void 0:R.ISSUE_CONDITION},null,8,["data-source"]),f(_(W),{ref_key:"detailScrollRef",ref:Oe,"data-source":_(ye)},null,8,["data-source"]),f(B,null,{default:g((()=>{var e,a,l;return[(null==(e=_(ye).SIGNATURE)?void 0:e.inscribedContent)?(v(),C(_(ee),{key:0,"inscribed-content":null==(l=null==(a=_(ye))?void 0:a.SIGNATURE)?void 0:l.inscribedContent},null,8,["inscribed-content"])):O("",!0)]})),_:1}),f(B,null,{default:g((()=>{var e;return[(null==(e=_(Ge))?void 0:e.length)?(v(),C(_(ae),{key:0,"attachment-list":_(Ge),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{be.value=e,je.value=!0})(e))},null,8,["attachment-list"])):O("",!0)]})),_:1})],64)),z,f(x,{onHandleClick:He})])),f(B,null,{default:g((()=>[_(ke)&&!_(Re)?(v(),C(_(Q),{key:0,"product-detail":_(ye)},null,8,["product-detail"])):O("",!0)])),_:1}),H,f(B,null,{default:g((()=>[_(je)?(v(),C(_(Z),{key:0,show:_(je),"onUpdate:show":a[1]||(a[1]=e=>y(je)?je.value=e:null),"content-list":_(Ee)?_(Ge):[],"is-only-view":_(Ee),"active-index":_(be),text:_(Ee)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,onSubmit:qe,onOnCloseFilePreviewByMask:Me},null,8,["show","content-list","is-only-view","active-index","text"])):O("",!0)])),_:1})],64)}}});export{W as default};

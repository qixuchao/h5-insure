import{k as e,z as t,s as a,B as n,M as o,y as r,E as d,Z as l,C as s,u,aa as i,r as c,o as v,p,t as I,v as C,S as f,H as m,I as y,ac as g,G as b,d as k,D as O,T as L}from"./vendor-fb30fd59.js";import{d as N}from"./order-d652f441.js";import{_ as P,g as _,s as S,ak as Y}from"./index-d438dc19.js";import{O as h,b as D}from"./order-a938c683.js";import{I as T}from"./InsuredPart-54853d99.js";import"./trial-ac4039ac.js";const j={class:"com-field-info"},G={key:0,class:"label"},x={class:"content"};var E=P(e({props:{label:{type:String,default:""},content:{type:String,default:""}},setup(e){const u=t();return(t,i)=>(a(),n("div",j,[e.label?(a(),n("div",G,o(e.label),1)):r("",!0),d(u).label?l(t.$slots,"label",{key:1},void 0,!0):r("",!0),s("div",x,o(e.content),1),d(u).content?l(t.$slots,"content",{key:2},void 0,!0):r("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const H={key:0,class:"page-order-detail"},M={class:"card"},B={class:"header"},U={class:"product-name"},W={class:"company-name"},Z={class:"status"},q={key:0,class:"footer-button"},A=b("删除"),X=b("去处理"),$={key:1,class:"footer-button"},z=b("删除"),F=b("去支付"),w={key:2,class:"footer-button"},J=b("删除");var K=P(e({setup(e){const t=u(),l=i(),b=c(),{query:{orderNo:P,agentCode:j,tenantId:G,abbreviation:x,productCategory:K}}=t,Q=()=>{O.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{b.value&&N(b.value.id,b.value.orderStatus).then((e=>{const{code:t,data:a}=e;"10000"===t&&L.success("删除成功")}))}))},R=()=>{var e,t;if(!b.value)return!1;const{agencyId:a,saleChannelId:n,orderTopStatus:o}=b.value,r=null==(t=null==(e=b.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;if(!(D.PENDING!==o&&D.PAYING!==o||r!==Y.ZXYS&&r!==Y.BWYL)){const e={[Y.ZXYS]:"/internet/productDetail/package",[Y.BWYL]:"/internet/productDetail"};return l.push({path:e[r],query:{productCode:r,saleChannelId:n,agentCode:j,tenantId:G,agencyCode:a,orderNo:P}}),!0}return!1},V=()=>{var e,t;if(b.value){if(R())return;const{id:a,extInfo:{templateId:n,pageCode:o},agencyId:r,venderCode:d}=b.value,l=null==(t=null==(e=b.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;S(o,{productCode:l,orderNo:P,orderId:a,agentCode:j,templateId:n,tenantId:G,productCategory:K,insurerCode:d,agencyCode:r,isFromOrderList:"1"})}},ee=()=>{var e,t;if(b.value){if(R())return;const{id:a,saleUserId:n,extInfo:{templateId:o},agencyId:r,venderCode:d}=b.value,l=null==(t=null==(e=b.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;S("payInfo",{productCode:l,orderNo:P,orderId:a,saleUserId:n,templateId:o,tenantId:G,productCategory:K,insurerCode:d,agencyCode:r})}};return v((()=>{_({orderNo:P,agentCode:j,tenantId:G}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(b.value=a)}))})),(e,t)=>{const l=p("van-button"),u=p("ProPageWrap");return a(),I(u,null,{default:C((()=>{var e,t,u,i,c,v,p,O,L,N,P;return[b.value?(a(),n("div",H,[s("div",M,[f(E,null,{label:C((()=>{var e,t,a,n;return[s("div",B,[s("div",U,o(null==(a=null==(t=null==(e=b.value)?void 0:e.tenantOrderInsuredList[0])?void 0:t.tenantOrderProductList[0])?void 0:a.productName),1),s("div",W,o(null==(n=b.value)?void 0:n.abbreviation),1)])]})),content:C((()=>{var e;return[s("div",Z,o(b.value?d(h)[null==(e=b.value)?void 0:e.orderStatus]:""),1)]})),_:1}),f(E,{label:"投保单号",content:null==(e=b.value)?void 0:e.orderNo},null,8,["content"]),f(E,{label:"创建时间",content:d(k)(null==(t=b.value)?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),f(E,{label:"投保人",content:null==(i=null==(u=b.value)?void 0:u.tenantOrderHolder)?void 0:i.name},null,8,["content"]),(a(!0),n(m,null,y((null==(c=b.value)?void 0:c.tenantOrderInsuredList)||[],((e,t)=>(a(),I(E,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),f(T,{"product-data":null==(O=null==(p=null==(v=b.value)?void 0:v.tenantOrderInsuredList[0])?void 0:p.tenantOrderProductList)?void 0:O[0],class:"insure-info"},null,8,["product-data"]),(null==(L=b.value)?void 0:L.orderTopStatus)===d(D).PENDING?(a(),n("div",q,[f(l,{type:"primary",onClick:g(Q,["stop"])},{default:C((()=>[A])),_:1},8,["onClick"]),f(l,{type:"primary",onClick:g(V,["stop"])},{default:C((()=>[X])),_:1},8,["onClick"])])):r("",!0),(null==(N=b.value)?void 0:N.orderTopStatus)===d(D).PAYING?(a(),n("div",$,[f(l,{type:"primary",onClick:g(Q,["stop"])},{default:C((()=>[z])),_:1},8,["onClick"]),f(l,{type:"primary",onClick:g(ee,["stop"])},{default:C((()=>[F])),_:1},8,["onClick"])])):r("",!0),(null==(P=b.value)?void 0:P.orderTopStatus)===d(D).TIMEOUT?(a(),n("div",w,[f(l,{type:"primary",onClick:g(Q,["stop"])},{default:C((()=>[J])),_:1},8,["onClick"])])):r("",!0)])):r("",!0)]})),_:1})}}}),[["__scopeId","data-v-719e96a1"]]);export{K as default};

import{i as g,r as d,P as y,k as N,l as _,m as x,n as P,p as v,B as o,L as C,C as T,I as b,ar as k,M as w,t as R,G as U,T as m,a5 as M,a6 as V}from"./vendor-87894311.js";import{_ as q,g as G,s as f}from"./index-dd334c46.js";import{s as O,c as W}from"./phoneVerify-c5c18918.js";import{c as L}from"./format-12461bbc.js";import{a as i}from"./order-7dc1d409.js";const z=u=>(M("data-v-29510ea1"),u=u(),V(),u),H={class:"page-phone-verify"},J=z(()=>o("div",{class:"title"},"\u901A\u8FC7\u6295\u4FDD\u4EBA\u624B\u673A\u53F7\u9A8C\u8BC1\u540E\uFF0C\u53EF\u8FDB\u884C\u6295\u4FDD\u4FE1\u606F\u9884",-1)),Y={class:"phone"},$={class:"input-wrapper"},j=U("\u4E0B\u4E00\u6B65"),K=g({setup(u){const n=d(""),l=d(""),e=d(0);let p;const c=y(),{agentCode:h,tenantId:D,templateId:Q,productCode:X,insurerCode:Z,orderNo:B}=c.query,F=()=>{p=setInterval(()=>{e.value-=1,e.value<=0&&clearInterval(p)},1e3)},I=()=>{G({orderNo:B,saleUserId:h,tenantId:D}).then(t=>{var r;const{code:s,data:a}=t;s==="10000"&&([i.PENDING,i.PAYMENT_FAILED,i.UNDER_WRITING_SUCCESS].includes(a.orderStatus)?n.value=(r=a==null?void 0:a.tenantOrderHolder)==null?void 0:r.mobile:f("paymentResult",c.query))})},E=()=>{O(n.value).then(({code:t})=>{t==="10000"&&(e.value=60,F())})},S=()=>{W(n.value,l.value).then(({code:t,data:s})=>{t==="10000"&&s?(m.success("\u9A8C\u8BC1\u6210\u529F"),f("infoPreview",c.query)):m.fail("\u9A8C\u8BC1\u5931\u8D25")})};return N(()=>{I()}),(t,s)=>{const a=_("van-button"),r=_("ProPageWrap");return x(),P(r,null,{default:v(()=>[o("div",H,[J,o("div",Y,C(T(L)(n.value)),1),o("div",$,[b(o("input",{"onUpdate:modelValue":s[0]||(s[0]=A=>l.value=A),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",class:"input"},null,512),[[k,l.value]]),o("div",{class:w(["btn",{second:e.value}]),onClick:E},C(e.value?`${e.value}s`:"\u53D1\u9001\u9A8C\u8BC1\u7801"),3)]),R(a,{type:"primary",class:"submit-btn",onClick:S},{default:v(()=>[j]),_:1})])]),_:1})}}});var ue=q(K,[["__scopeId","data-v-29510ea1"]]);export{ue as default};

import{d as e,u as t,a as n,G as a,r,z as i,x as o,al as d,O as s,b as l,c as u,e as f,w as c,g as p,f as I,X as m,k as y,h as O,F as L,i as v,j as C,t as g,n as x,a5 as h,C as b,D as T,p as E,N as P,a7 as R,a8 as B}from"./index-4c2d8b53.js";import{a as H,B as V}from"./infoCollection-3279d2ee.js";import{_}from"./index-17a02284.js";import{I as j}from"./InsuredPart-990957d6.js";import{u as w}from"./useDicData-4b5f34ce.js";import"./pdfh5-008ca364.js";import"./relativeTime-fde2a46e.js";import"./trial-215b0045.js";const A={key:0,class:"beneficiary-part"},U={class:"part-title"},N={class:"title"},k={class:"radio-item-wrapper"},D={class:"name"},S={class:"hone"},F={class:"address"},q={class:"footer-button"},$=e({__name:"index",setup(e){const $=t(),G=n(),{templateId:Y=1,orderNo:z="2022072710380711215",tenantId:W="9991000007",isShare:X,sharePageCode:J}=G.query;a();const K="/infoPreview"===G.path?"infoPreview":"infoCollection",M=r({}),Q=w("NATIONAL_REGION_CODE"),Z=r({extInfo:{pageCode:K},tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0}}),ee=r(null),te=r([]),ne=r([]),ae=r([]),re=r([]),ie=r([]),oe=i({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),de=o((()=>{var e,t;return(null==(t=null==(e=Z.value.extInfo)?void 0:e.contactInfo)?void 0:t[0])||{}})),se=()=>{X?h(`${J}`,G.query):b(Z.value).then((({code:e,data:t})=>{"10000"===e&&"jumpToPage"===t.pageAction.pageAction&&$.push({path:T[t.pageAction.data.nextPageCode],query:G.query})}))};return d((()=>{E({orderNo:z,tenantId:W}).then((({code:e,data:t})=>{if("10000"===e){const e=t;e.extInfo={...e.extInfo,pageCode:K,templateId:Y,buttonCode:P.infoPreview},e.tenantOrderHolder=e.tenantOrderHolder||{},e.tenantOrderHolder.extInfo=e.tenantOrderHolder.extInfo||{occupationCodeList:[]},e.tenantOrderInsuredList[0].extInfo=e.tenantOrderInsuredList[0].extInfo||{occupationCodeList:[]},e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map((e=>{const t=e;return t.extInfo=t.extInfo||{},t})),e.tenantOrderAttachmentList.forEach((e=>{e.category===R.OBVERSE_CERT?e.objectType===B.HOLDER?(te.value[0]=e.uri,ae.value[0]=e.id):e.objectType===B.INSURED&&(ne.value[0]=e.uri,re.value[0]=e.id):e.category===R.REVERSE_CERT&&(e.objectType===B.HOLDER?(te.value[1]=e.uri,ae.value[1]=e.id):e.objectType===B.INSURED&&(ne.value[1]=e.uri,ae.value[1]=e.id))})),Object.assign(Z.value,e)}})).finally((()=>{oe.isLoading=!1})),s({pageCode:"infoCollection",templateId:Y}).then((({code:e,data:t})=>{if("10000"===e){const e={BENEFICIARY:[],INSURER:[],HOLDER:[]};t.productInsureFactorList.forEach((t=>{(e[t.moduleType]=e[t.moduleType]||[]).push(t)})),M.value=e}}))})),(e,t)=>{const n=l("ProCard"),a=l("ProRadioButton"),r=l("ProField"),i=l("ProCascader"),o=l("van-cell"),d=l("ProForm"),s=l("VanButton"),h=l("ProPageWrap");return u(),f(h,{class:"page-info-wrapper"},{default:c((()=>[p(oe).isLoading?y("",!0):(u(),f(d,{key:0,ref_key:"formRef",ref:ee,"is-view":""},{default:c((()=>{var e;return[I(j,{"product-data":null==(e=p(Z).tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0]},null,8,["product-data"]),I(n,{title:"投保人"},{default:c((()=>[I(_,{images:p(te),"onUpdate:images":t[0]||(t[0]=e=>m(te)?te.value=e:null),"form-info":p(Z).tenantOrderHolder,"factor-list":p(M).HOLDER,"is-view":""},null,8,["images","form-info","factor-list"])])),_:1}),I(n,{title:"被保人"},{default:c((()=>[I(r,{modelValue:p(Z).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[2]||(t[2]=e=>p(Z).tenantOrderInsuredList[0].relationToHolder=e),label:"为谁保单",name:"relationToHolder",placeholder:"请选择"},{input:c((()=>[I(a,{modelValue:p(Z).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[1]||(t[1]=e=>p(Z).tenantOrderInsuredList[0].relationToHolder=e),options:p(H),"is-view":""},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),1!=+p(Z).tenantOrderInsuredList[0].relationToHolder?(u(),f(_,{key:0,images:p(ne),"onUpdate:images":t[3]||(t[3]=e=>m(ne)?ne.value=e:null),"form-info":p(Z).tenantOrderInsuredList[0],"factor-list":p(M).INSURER||[],"is-view":""},null,8,["images","form-info","factor-list"])):y("",!0),I(i,{modelValue:p(Z).tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:modelValue":t[4]||(t[4]=e=>p(Z).tenantOrderInsuredList[0].extInfo.insureAreaCode=e),field1:p(Z).tenantOrderInsuredList[0].extInfo.insureProvinceCode,"onUpdate:field1":t[5]||(t[5]=e=>p(Z).tenantOrderInsuredList[0].extInfo.insureProvinceCode=e),field2:p(Z).tenantOrderInsuredList[0].extInfo.insureCityCode,"onUpdate:field2":t[6]||(t[6]=e=>p(Z).tenantOrderInsuredList[0].extInfo.insureCityCode=e),field3:p(Z).tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:field3":t[7]||(t[7]=e=>p(Z).tenantOrderInsuredList[0].extInfo.insureAreaCode=e),label:"投保地区",name:"insureProvinceCode",placeholder:"请选择","is-link":"",required:"","data-source":p(Q),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","data-source"])])),_:1}),I(n,{title:"受益人"},{default:c((()=>[I(r,{modelValue:p(Z).tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[9]||(t[9]=e=>p(Z).tenantOrderInsuredList[0].insuredBeneficiaryType=e),label:"受益人类型",name:"insuredBeneficiaryType",placeholder:"请选择"},{input:c((()=>[I(a,{modelValue:p(Z).tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[8]||(t[8]=e=>p(Z).tenantOrderInsuredList[0].insuredBeneficiaryType=e),options:p(V),"is-view":""},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),2==p(Z).tenantOrderInsuredList[0].insuredBeneficiaryType?(u(),O("div",A,[(u(!0),O(L,null,v(p(Z).tenantOrderInsuredList[0].tenantOrderBeneficiaryList,((e,n)=>(u(),O("div",{key:e.beneficiaryId,class:"beneficiary-item"},[C("div",U,[C("span",N,g(`受益人${n+1}`),1)]),I(_,{images:p(ie),"onUpdate:images":t[10]||(t[10]=e=>m(ie)?ie.value=e:null),"form-info":e,"factor-list":p(M).BENEFICIARY||[],prefix:`beneficiary-${n}`,"is-view":"","beneficiary-list":p(Z).tenantOrderInsuredList[0].tenantOrderBeneficiaryList},null,8,["images","form-info","factor-list","prefix","beneficiary-list"])])))),128))])):y("",!0)])),_:1}),I(n,{title:"保单通讯信息"},{default:c((()=>[Object.keys(p(de)).length?(u(),f(o,{key:0,title:"单元格"},{title:c((()=>[C("div",k,[C("p",null,[C("span",D,g(p(de).contactName),1),C("span",S,g(p(de).contactPhoneNo),1)]),C("p",F,g(p(de).contactAddress),1)])])),_:1})):y("",!0)])),_:1})]})),_:1},512)),C("div",q,[I(s,{block:"",type:"primary",onClick:se},{default:c((()=>[x("下一步")])),_:1})])])),_:1})}}});export{$ as default};

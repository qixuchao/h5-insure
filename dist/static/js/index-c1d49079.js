var $=Object.defineProperty,z=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var N=(s,e,t)=>e in s?$(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,d=(s,e)=>{for(var t in e||(e={}))J.call(e,t)&&N(s,t,e[t]);if(x)for(var t of x(e))Q.call(e,t)&&N(s,t,e[t]);return s},h=(s,e)=>z(s,H(e));import{g as W,O as K,P as X,E as S,d as Z,M as ee,h as te,r,j as _,k as D,m as p,p as f,n as M,G as L,A as y,F as b,z as E,J as ae,C as T,T as A,L as se}from"./vendor-8ff1e78f.js";import{_ as oe,l as R,r as ne,Q as ue,M as ie,n as re,P as le}from"./index-0d7c6943.js";import{l as ce}from"./inform-44791d4d.js";import{s as de}from"./useStorage-44bdfa87.js";import{s as _e}from"./verify-cc7bd378.js";const pe={class:"date"},fe={class:"inform-file"},Ee={class:"tips"},Be=T(" \u60A8\u7684\u7B7E\u540D\u5C06\u88AB\u7528\u4E8E"),ge=T("\u6587\u4EF6 "),me={class:"footer-button"},Ce=T("\u4E0B\u4E00\u6B65"),ve=W({setup(s){const e=K(),t=X(),{productCode:he="MMBBSF",agentCode:q="65434444",tenantId:m="9991000007",agencyCode:De="3311222",insurerCode:k="zhongan",productCategory:I=1,templateId:O=1,orderNo:F="2022080217103534947"}=t.query,l=S(null),C=S(!1),U=Z().format("YYYY-MM-DD"),j=()=>{var a;(a=l.value)==null||a.clear()},o=ee({noticeType:"",materialSource:"",noticeList:[],pageData:{}}),G=()=>{ne({orderNo:F,saleUserId:q,tenantId:m}).then(({code:a,data:n})=>{a==="10000"&&(Object.assign(o.pageData,n),n.tenantOrderAttachmentList.forEach(i=>{i.category===ue.ELECTRIC_SIGN&&i.objectType===ie.AGENT&&l.value.setDataURL(i.fileBase64)}))})};te(()=>{G(),ce({insurerCode:k,orderNo:F,productCategory:I,tenantId:m,noticeType:9,objectType:3}).then(({code:a,data:n})=>{a==="10000"&&(o.noticeList=n)})});const V=a=>{de.set("questionData",a),e.push({path:"/healthNotice",query:d({questionnaireType:a.questionnaireType},t.query)})},Y=()=>{var i,B;if(!(o.noticeList&&o.noticeList.every(c=>c.isDone===1))){A("\u8BF7\u5B8C\u6210\u6240\u6709\u544A\u77E5\u8FDB\u884C\u4E0B\u4E00\u6B65");return}if((i=l.value)==null?void 0:i.isEmpty()){A("\u8BF7\u5B8C\u6210\u4EE3\u7406\u4EBA\u7B7E\u5B57\u8FDB\u884C\u4E0B\u4E00\u6B65");return}if(!C.value){A("\u8BF7\u52FE\u9009\u540C\u610F\u7B7E\u540D");return}const n=(B=l.value)==null?void 0:B.save();_e("AGENT",n,o.pageData.id,m).then(c=>{c&&re(h(d({},o.pageData),{extInfo:h(d({},o.pageData.extInfo),{templateId:O,pageCode:"salesNotice"}),venderCode:k})).then(({code:v,data:g})=>{v==="10000"&&g.pageAction.pageAction==="jumpToPage"&&e.push({path:le[g.pageAction.data.nextPageCode],query:d({},t.query)})})})};return(a,n)=>{const i=r("van-cell"),B=r("ProSign"),c=r("van-checkbox"),v=r("ProPDFviewer"),g=r("van-button"),w=r("ProPageWrap");return _(),D(w,{class:"page-salesman-inform"},{default:p(()=>[f(R,{title:"\u8425\u9500\u5458\u544A\u77E5\u4E66"},{default:p(()=>[(_(!0),M(b,null,L(y(o).noticeList,u=>(_(),D(i,{key:u.id,class:se({"is-active":u.isDone===2}),title:`\u300A${u.title}\u300B`,"is-link":"",value:`${u.isDone===1?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:P=>V(u)},null,8,["class","title","value","onClick"]))),128))]),_:1}),f(R,{title:"\u8425\u9500\u5458\u7B7E\u5B57","show-divider":!1,"show-line":!1},{extra:p(()=>[E("div",{class:"resign",onClick:j},"\u91CD\u7B7E")]),default:p(()=>[f(B,{ref_key:"agentSignRef",ref:l,selector:"sign2"},null,512),E("div",pe,"\u7B7E\u540D\u65E5\u671F\uFF1A "+ae(y(U)),1)]),_:1}),E("div",fe,[f(c,{modelValue:C.value,"onUpdate:modelValue":n[0]||(n[0]=u=>C.value=u),shape:"square"},null,8,["modelValue"]),E("p",Ee,[Be,(_(!0),M(b,null,L(y(o).noticeList,(u,P)=>(_(),D(v,{key:P,class:"file",title:`\u300A${u.title}\u300B`},null,8,["title"]))),128)),ge])]),E("div",me,[f(g,{type:"primary",block:"",onClick:Y},{default:p(()=>[Ce]),_:1})])]),_:1})}}});var xe=oe(ve,[["__scopeId","data-v-b4ac05fa"]]);export{xe as default};

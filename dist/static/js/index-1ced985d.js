import{d as e,h as a,o as t,c as l,a as s,e as n,b as o,F as d,q as i,m as r,u as c,_ as u,aC as v,aD as p,cR as m,i as f,j as b,k as g,B as y,O as h,p as _,ds as j,w as C,f as N,a9 as k,T as I}from"./index-2ab1afb0.js";import{P as D}from"./index-25cc2b06.js";import{L as S}from"./index-05448d2d.js";import{I as q}from"./infoItem-cf5a02f1.js";import{O as w}from"./OperateBtn-5cb9a6fc.js";import{t as x}from"./format-31cde443.js";import{q as O}from"./order-f785568e.js";import"./constants-4b08cf92.js";const T={class:"com-order-item"},L={class:"header"},R={class:"product-name"},U={class:"status"},V={class:"info"},B={class:"info-bottom"},z=(e=>(v("data-v-40dd5e97"),e=e(),p(),e))((()=>s("div",{style:{width:"25%"}},[s("img",{src:"/static/png/tree-0f48942e.png",alt:"",style:{width:"80%"}})],-1))),A={class:"footer"};var E=u(e({__name:"item",props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup:(e,{emit:u})=>(a(),(a,u)=>{var v;return t(),l("div",T,[s("div",L,[s("div",R,n(e.detail.productName),1),s("div",U,n(e.detail.orderStatusDesc),1)]),s("div",V,[o(q,{label:"订单号",content:e.detail.orderNo,line:"","is-copy":""},null,8,["content"]),(t(!0),l(d,null,i(e.detail.applicationNo||[""],(e=>(t(),r(q,{key:e,label:"投保单号",content:e,line:"","is-copy":""},null,8,["content"])))),128)),o(q,{label:"保单号",content:e.detail.policyNo,line:"","is-copy":""},null,8,["content"]),s("div",B,[s("div",null,[o(q,{label:"投保人",content:e.detail.holderName,line:""},null,8,["content"]),o(q,{label:"被保人",content:null==(v=e.detail.insuredName)?void 0:v[0],line:""},null,8,["content"]),o(q,{label:"创建时间",content:e.detail.orderStartDate,line:""},null,8,["content"]),o(q,{label:"保费",content:c(x)(e.detail.premium),line:""},null,8,["content"])]),z])]),s("div",A,[o(w,{detail:e.detail},null,8,["detail"])])])})}),[["__scopeId","data-v-40dd5e97"]]);const F={id:"page-order",class:"page-order"};var P=u(e({__name:"index",setup(e){m(),a();const n=f(),{type:u,tenantId:v,agentCode:p}=n.query,q=b({"-1":1,0:2,1:3,2:4}[u]||0),w=b(1),x=b(!1),T=b(!1),L=b(!1),R=b([]);b(0),b(0),b(0);const U=[{title:"全部",status:""},{title:"待处理",status:"-1"},{title:"待支付",status:"0"},{title:"已完成",status:"3"},{title:"已失效",status:"2"}],V=g((()=>(R.value=[],U[q.value].status))),B=()=>{I.loading({message:"加载中...",forbidClick:!0}),x.value=!0,O({condition:{orderTopStatus:V.value,tenantId:v,agentCode:p},pageSize:10,pageNum:w.value}).then((e=>{const{code:a,data:t}=e;"10000"===a&&t&&(x.value=!1,T.value=!1,1===w.value?R.value=t.datas||[]:R.value=R.value.concat(t.datas||[]),t.datas.length<10&&(L.value=!0))})).then((()=>{I.clear()}))},z=()=>{w.value+=1,B()},A=()=>{w.value=1,B()};y(V,(()=>{w.value=1,B()}));const P=b(),G=b({}),H=b(!1);return y((()=>G.value.scrollTop),(e=>{H.value=!(e<=0)})),h((()=>{var e,a;null==(a=null==(e=document.querySelector("#page-order").querySelector(".list-wrap"))?void 0:e.addEventListener)||a.call(e,"scroll",(()=>{G.value=P.value.scrollTop})),B()})),(e,a)=>{const n=S,u=D;return t(),l("div",F,[o(j,{active:c(q),"onUpdate:active":a[0]||(a[0]=e=>_(q)?q.value=e:null),list:U,class:"tab","title-active-color":"#c41e21"},null,8,["active"]),o(u,{modelValue:c(T),"onUpdate:modelValue":a[2]||(a[2]=e=>_(T)?T.value=e:null),disabled:c(H),onRefresh:A},{default:C((()=>[s("div",{ref_key:"refreshRef",ref:P,class:"list-wrap"},[c(R).length?(t(),r(n,{key:0,loading:c(x),"onUpdate:loading":a[1]||(a[1]=e=>_(x)?x.value=e:null),class:"body",finished:c(L),onLoad:z},{default:C((()=>[(t(!0),l(d,null,i(c(R),((e,a)=>(t(),r(E,{key:a,detail:e,onClick:a=>(e=>{const{orderNo:a,insurerCode:t}=e;k("orderDetail",{orderNo:a,agentCode:p,tenantId:v,insurerCode:t})})(e),onAfterDelete:A},null,8,["detail","onClick"])))),128))])),_:1},8,["loading","finished"])):N("",!0)],512)])),_:1},8,["modelValue","disabled"])])}}}),[["__scopeId","data-v-49522fe6"]]);export{P as default};

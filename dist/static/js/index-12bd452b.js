import{i as e,N as a,$ as t,l,m as s,n as r,p as o,B as n,Z as i,C as d,r as u,R as c,A,s as v,F as I,H as g,G as p,L as m,M as C,x as f,a5 as h,a6 as E,aa as S,P as b,k,t as P}from"./vendor-87894311.js";import{p as O}from"./product-54c4302a.js";import{q as T,g as w,i as U}from"./trial-fecf4a18.js";import{P as D}from"./index-2753e9c0.js";import{_ as G,o as L,a9 as Q}from"./index-881f6d78.js";import{a as V}from"./trial-1ceefc83.js";import{c as y}from"./utils-69f3424a.js";import{a as x}from"./order-5216cb6b.js";import{u as R}from"./theme-b9409b06.js";import"./useStorage-2847e8df.js";import"./infoCollection-2a6bd55e.js";const B={class:"pro-curtain"},N=["src"];var K=G(e({props:{show:{type:Boolean,default:!0}},emits:["close"],setup(e,{emit:u}){const c=e,A=a({show:c.show});return t((()=>c.show),(()=>{A.show=c.show}),{immediate:!0}),(e,a)=>{const t=l("van-overlay");return s(),r(t,{show:d(A).show},{default:o((()=>[n("div",B,[i(e.$slots,"default",{},void 0,!0),n("img",{class:"close",src:d("data:image/png;base64,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"),onClick:a[0]||(a[0]=e=>u("close"))},null,8,N)])])),_:3},8,["show"])}}}),[["__scopeId","data-v-4c1ecdfa"]]);const W={class:"guarantee-list"},z=(e=>(h("data-v-b028585a"),e=e(),E(),e))((()=>n("div",{class:"title"},"保障内容",-1))),Y=["src"];var j=G(e({props:{dataSource:{type:Array,default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:10}},setup(e){const a=e,o=u(a.dataSource||[]),[i,h]=c(!1),E=A((()=>{var e;return!(!o.value||!(null==(e=o.value)?void 0:e.length))&&(o.value.length>a.count&&(!!a.isShowClose||!i.value))})),S=()=>{h()},b=A((()=>{var e;return o.value&&(null==(e=o.value)?void 0:e.length)?o.value.length<=a.count||i.value?o.value:o.value.slice(0,a.count):[]}));return t((()=>a.dataSource),(()=>{o.value=a.dataSource})),(e,a)=>{const t=l("ProCell");return s(),v("div",W,[z,(s(!0),v(I,null,g(d(b),((e,a)=>(s(),r(t,{key:a,title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),d(E)?(s(),v("div",{key:0,class:"show-more",onClick:S},[p(m(d(i)?"收起":"查看更多")+" ",1),n("img",{src:d("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAjNJREFUOE+1VEtPE1EUPufM9GXKCnWlqAQZuhEff8CNxpYdSReVatIWJMYI7FkYF+wtxsSCBWNLY4JhZxHd+AdMqhs6PmJJWMkPsO303mPmQs10GJuawOxu5tzvfK9chCP+8Ijx4HgAVyZGskgQEgIXJkvbO//D+sXtyDlN43mW8Du9Vp1VDPNJ4xkiRoC5DhKz6VJ1qxfQ/MTITUSeA8QgM29niuYDBbh6/XyQzwZmAPCWfUbmLdAb2dTLWt0LeDE6FOjr12YYMfp3freRTX2s1Ts8VBuJZwEwxBJ2SMDj1OtqzQn66u7gQIt9jwDwgq1IAixOFs137ZlDobgvMPPTzNrXTaUkcfEG6zTXbaFnyrakcL/+EBBi+5vlB2Cy2meW8j35mk+8LOlaG8VII9v0kA3LzA1gXmwz9vJXAS4njRQC+qnR2kivf99zDubigwO+gH8egbUWwsJUwfzp/L8SHzolA/o4Azeniubqfm3uGBlgPMMITSnE5r3St0ovtXmeHB7VkWLI4Afk3UzBzCvA3DXwkWHEiPCyqgFxxQqGy9NLnywvYHtejxhRALyiHJZckWGzPL0EVoeHzo3Mcs8i8eZ+4cevDgsSwydJwzgBngYAS0hRdio6FErOdYGkKKcOLFhOGJdQxzFbor2QmnLd7blnym5JguUXImohw1WVNsjP4kTfWy9LutZGMSIcQwT/gWzLyfiftemWqG2BT6NxZqYmtTbcnrrvHs972Evnep35AykjACSCRaPlAAAAAElFTkSuQmCC"),class:C(["icon",{showMore:d(i)}])},null,10,Y)])):f("",!0)])}}}),[["__scopeId","data-v-b028585a"]]);const q=L([{value:x.PENDING,label:"待处理"},{value:x.PAYING,label:"订单未完成，逾期将失效"},{value:x.PAYMENT_SUCCESS,label:"支付成功"},{value:x.PAYMENT_FAILED,label:"支付失败"},{value:x.CANCELED,label:"已失效"},{value:x.ACCEPT_POLICY,label:"投保成功"},{value:x.INSURER_REJECT,label:"保司拒保"},{value:x.TIMEOUT,label:"订单已经关闭"},{value:x.UNDER_WRITING_SUCCESS,label:"核保通过"},{value:x.NOTE,label:"照会"},{value:x.INSURANCE_PROCESSING,label:"保司处理中"}]),F={[x.ACCEPT_POLICY]:"恭喜 您已成功购买保障",[x.TIMEOUT]:"赠险保单已失效",[x.PAYING]:"剩余支付时间：23:59:59",[x.CANCELED]:"请您重新提交订单"};const H=e=>(h("data-v-4ceaf93d"),e=e(),E(),e),M={class:"page-pay-result"},J={class:"header"},Z={class:"product-status"},X={class:"desc"},_={class:"prodouct-container"},$={class:"product-card"},ee={class:"product-name"},ae={class:"label"},te={class:"value"},le={key:0,class:"desc"},se=[p("已有"),H((()=>n("span",null,"29,182",-1))),p("位用户已投保")],re=["src"],oe=H((()=>n("div",{class:"footer-desc"},[n("div",null,"客服电话"),n("div",null,"400 605 8000")],-1))),ne=["src"];var ie=G(e({setup(e){const t=R();S();const i=b(),{tenantId:c,from:p="other",orderNo:C,productCode:h}=i.query,E=a({insureDetail:{},detail:{},orderDetail:{},showOrderDetail:!1,guaranteeItemVOS:[],pageInfo:{title:"",desc:"",insureList:[],images:[]}}),G=u(!1),L=A((()=>[x.ACCEPT_POLICY,x.TIMEOUT].includes(E.orderDetail.orderStatus)?"下载保单":x.PAYING===E.orderDetail.orderStatus?"立即支付":x.CANCELED===E.orderDetail.orderStatus?"重下一单":"")),B=()=>{var e;"下载保单"===L.value&&Q(null==(e=E.orderDetail.extInfo)?void 0:e.policyUrl)},N=async()=>{try{const{insurerCode:e}=E.insureDetail.productBasicInfoVO,{code:a,data:t}=await T({insurerCode:e,productCode:h,tenantId:c});"10000"===a&&(window.location.href=t||"")}catch(e){}},W=async()=>{const e=O({productCode:h,withInsureInfo:!0,tenantId:c}),a=w({orderNo:C,tenantId:c}),t=U({productCode:h});Promise.all([e,a,t]).then((([e,a,t])=>{"10000"===e.code&&(E.detail=e.data),"10000"===t.code&&(E.insureDetail=t.data),"10000"===a.code&&(E.orderDetail=a.data),(()=>{var e,a,t,l,s,r,o,n,i,d,u,c,A,v,I,g;E.pageInfo.title=q[E.orderDetail.orderStatus],E.pageInfo.desc=F[E.orderDetail.orderStatus];let m="";"free"===p?E.orderDetail.tenantOrderInsuredList[0].tenantOrderProductList.forEach((e=>m?null:(e.tenantOrderRiskList.forEach((e=>{1!==e.riskType||m||(m=y(e.insurancePeriodValue,V[e.insurancePeriodType]))})),!1))):(E.pageInfo.insureList=[{label:"本期缴费金额",value:`${E.orderDetail.orderAmount}元`}],m="2022.04.30到2022.05.29"),E.pageInfo.insureList=[...E.pageInfo.insureList,{label:"被保人",value:null==(t=null==(a=null==(e=E.orderDetail)?void 0:e.tenantOrderInsuredList)?void 0:a[0])?void 0:t.name},{label:"保障期间",value:m||""}],"free"!==p&&[x.PAYING,x.TIMEOUT].includes(E.orderDetail.orderStatus)?E.showOrderDetail=!0:(E.pageInfo.images=(null==(r=null==(s=null==(l=E.insureDetail)?void 0:l.productBasicInfoVO)?void 0:s.upgradeGuaranteeConfigVO)?void 0:r.image)||[],E.pageInfo.images.length>1&&(G.value=!0));try{const e=null==(o=E.orderDetail.tenantOrderInsuredList)?void 0:o[0].planCode;(null==(i=null==(n=E.detail)?void 0:n.tenantProductInsureVO)?void 0:i.planInsureVO)?E.guaranteeItemVOS=(null==(g=null==(I=null==(v=E.detail)?void 0:v.tenantProductInsureVO)?void 0:I.planInsureVO)?void 0:g.guaranteeItemVOS)||[]:E.guaranteeItemVOS=(null==(A=null==(c=null==(u=null==(d=E.detail)?void 0:d.tenantProductInsureVO)?void 0:u.planList.filter((a=>a.planCode===e)))?void 0:c[0])?void 0:A.guaranteeItemVOS)||[]}catch(C){}})()}))};return k((()=>{W()})),(e,a)=>{const i=l("van-config-provider");return s(),r(i,{"theme-vars":d(t)},{default:o((()=>{var e,l;return[n("div",M,[n("div",J,[n("div",Z,m(d(E).pageInfo.title),1),n("div",X,m(d(E).pageInfo.desc),1)]),n("div",_,[n("div",$,[n("div",ee,m((null==(l=null==(e=d(E).insureDetail)?void 0:e.productBasicInfoVO)?void 0:l.productName)||""),1),(s(!0),v(I,null,g(d(E).pageInfo.insureList,((e,a)=>(s(),v("div",{key:a,class:"list"},[n("span",ae,m(e.label),1),n("span",te,m(e.value),1)])))),128)),P(D,{"theme-vars":d(t),class:"btn",text:d(L),onClick:B},null,8,["theme-vars","text"]),d(E).showOrderDetail?(s(),v("div",le,se)):f("",!0)]),n("img",{class:"product-img",src:d(E).pageInfo.images[0],onClick:N},null,8,re),d(E).showOrderDetail?(s(),r(j,{key:0,"is-show-close":"",count:5,"data-source":d(E).guaranteeItemVOS},null,8,["data-source"])):f("",!0),oe])]),P(K,{show:G.value,"onUpdate:show":a[0]||(a[0]=e=>G.value=e),onClose:a[1]||(a[1]=e=>G.value=!1)},{default:o((()=>[n("img",{class:"jump-img",src:d(E).pageInfo.images[1],style:{display:"block"},onClick:N},null,8,ne)])),_:1},8,["show"])]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-4ceaf93d"]]);export{ie as default};

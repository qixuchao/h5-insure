!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.page-info-wrapper{padding-bottom:2rem}.page-info-wrapper .com-card .com-card-wrap .body{padding:0}.page-info-wrapper .beneficiary-part .part-title{display:flex;align-items:center;justify-content:space-between;padding:0 var(--zaui-card-border, .4rem);background-color:#f2f5fc;height:1.2rem}.page-info-wrapper .beneficiary-part .part-title .title{font-size:.4rem;font-family:PingFangSC-Semibold,PingFang SC,self;font-weight:600;color:#393d46}.page-info-wrapper .radio-item-wrapper{padding:0 .42667rem}.page-info-wrapper .radio-item-wrapper p{font-size:.4rem;font-family:PingFangSC-Semibold,PingFang SC,serif;color:#393d46;margin:.06667rem 0}.page-info-wrapper .radio-item-wrapper .name{font-weight:600;margin-right:.4rem}.page-info-wrapper .radio-item-wrapper .phone{font-weight:400}\n',document.head.appendChild(e),System.register(["./vendor-legacy-bcfc5721.js","./index-legacy-3dae0d39.js","./index-legacy-c9bb416f.js","./index-legacy-8852e5bc.js","./useDicData-legacy-55a4e1b3.js"],(function(e){"use strict";var t,n,r,a,d,o,i,l,s,c,u,f,p,m,y,I,v,g,O,L,b,h,T,E,w,H,R,A,C,P,j,x;return{setters:[function(e){t=e.g,n=e.af,r=e.Q,a=e.a5,d=e.C,o=e.L,i=e.o,l=e.X,s=e.r,c=e.h,u=e.j,f=e.k,p=e.z,m=e.n,y=e.s,I=e.m,v=e.F,g=e.E,O=e.y,L=e.I,b=e.B},function(e){h=e.F,T=e.E,E=e.P},function(e){w=e.c,H=e.n,R=e.a},function(e){A=e._,C=e.R,P=e.B,j=e.A,x=e.a},function(){}],execute:function(){const B={key:0,class:"beneficiary-part"},k={class:"part-title"},N={class:"title"},V=b("删除"),_=b("+添加受益人"),S=b("选择保单通讯信息"),F={class:"radio-item-wrapper"},U={class:"name"},D={class:"hone"},q={class:"address"},z={class:"footer-button"},Y=b("下一步");e("default",t({setup(e){const t=n(),b=r(),{templateId:M=1,orderNo:Q="2022072710380711215",tenantId:W="9991000007"}=b.query,[X,$]=a(),G="/infoPreview"===b.path?"infoPreview":"infoCollection",J=d({}),K=d({extInfo:{pageCode:G},tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0}}),Z=d(null),ee=d([]),te=d([]),ne=o({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),re=()=>{const e={...K.value};e.tenantOrderAttachmentList=[{category:h.OBVERSE_CERT,objectType:T.HOLDER,objectId:K.value.tenantOrderHolder.id,name:"投保人证件正面",uri:ee.value[0]},{category:h.REVERSE_CERT,objectType:T.HOLDER,objectId:K.value.tenantOrderHolder.id,name:"投保人证件背面",uri:ee.value[1]},{category:h.OBVERSE_CERT,objectType:T.INSURED,objectId:K.value.tenantOrderInsuredList[0].id,name:"被保人证件正面",uri:te.value[0]},{category:h.REVERSE_CERT,objectType:T.INSURED,objectId:K.value.tenantOrderInsuredList[0].id,name:"被保人证件背面",uri:te.value[1]}],H(e).then((({code:e,data:n})=>{"10000"===e&&"jumpToPage"===n.pageAction.pageAction&&t.push({path:E[n.pageAction.data.nextPageCode],query:b.query})}))},ae=e=>{},de=()=>{ne.beneficiaryId+=1,K.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.push({id:ne.beneficiaryId,extInfo:{}})};return i((()=>{R({orderNo:Q,tenantId:W}).then((({code:e,data:t})=>{if("10000"===e){const e=t;e.extInfo={...e.extInfo,pageCode:G,templateId:M},e.tenantOrderHolder=e.tenantOrderHolder||{},e.tenantOrderHolder.extInfo=e.tenantOrderHolder.extInfo||{},e.tenantOrderInsuredList[0].extInfo=e.tenantOrderInsuredList[0].extInfo||{},e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map((e=>{const t=e;return t.extInfo={},t})),e.tenantOrderAttachmentList.forEach((e=>{e.category,e.objectType,22===e.category?2===e.objectType?ee[0]=e.uri:3===e.objectType&&(te[0]=e.uri):23===e.category&&(2===e.objectType?ee[1]=e.uri:3===e.objectType&&(te[1]=e.uri))})),Object.assign(K.value,e)}})).finally((()=>{ne.isLoading=!1})),w({pageCode:"infoCollection",templateId:M}).then((({code:e,data:t})=>{if("10000"===e){const e={BENEFICIARY:[],INSURER:[],HOLDER:[]};t.productInsureFactorList.forEach((t=>{(e[t.moduleType]=e[t.moduleType]||[]).push(t)})),J.value=e}}))})),l((()=>K.value),(e=>{if(e){var t,n,r,a,d,o,i,l,s,c;const u=[{contactAddress:(null===(t=e.tenantOrderHolder)||void 0===t||null===(n=t.extInfo)||void 0===n?void 0:n.familyAddress)||1231123,contactName:e.tenantOrderHolder.name||123131,contactPhoneNo:e.tenantOrderHolder.mobile||123132},{contactAddress:null===(r=e.tenantOrderHolder)||void 0===r||null===(a=r.extInfo)||void 0===a?void 0:a.workAddress,contactName:e.tenantOrderHolder.name,contactPhoneNo:e.tenantOrderHolder.mobile},{contactAddress:null===(d=e.tenantOrderInsuredList[0])||void 0===d||null===(o=d.extInfo)||void 0===o?void 0:o.familyAddress,contactName:null===(i=e.tenantOrderInsuredList[0])||void 0===i?void 0:i.name,contactPhoneNo:null===(l=e.tenantOrderInsuredList[0])||void 0===l?void 0:l.mobile},{contactAddress:null===(s=e.tenantOrderInsuredList[0])||void 0===s||null===(c=s.extInfo)||void 0===c?void 0:c.workAddress,contactName:e.tenantOrderInsuredList[0].name,contactPhoneNo:e.tenantOrderInsuredList[0].mobile}];ne.addressList=u.filter((e=>e.contactAddress&&e.contactName&&e.contactPhoneNo))}}),{deep:!0,immediate:!0}),l((()=>K.value.tenantOrderInsuredList[0].relationToHolder),(e=>{1==+e&&Object.assign(K.value.tenantOrderInsuredList[0],K.value.tenantOrderHolder,{id:K.value.tenantOrderInsuredList[0].id})}),{deep:!0,immediate:!0}),(e,t)=>{const n=s("ProCard"),r=s("ProRadioButton"),a=s("ProField"),d=s("ProSvg"),o=s("VanButton"),i=s("ProCheckButton"),l=s("van-cell"),b=s("ProForm"),h=s("ProPageWrap");return c(),u(h,{class:"page-info-wrapper"},{default:f((()=>[p(ne).isLoading?y("",!0):(c(),u(b,{key:0,ref_key:"formRef",ref:Z},{default:f((()=>[m(n,{title:"投保人"},{default:f((()=>[m(A,{images:ee.value,"onUpdate:images":t[0]||(t[0]=e=>ee.value=e),"form-info":K.value.tenantOrderHolder,"factor-list":J.value.HOLDER},null,8,["images","form-info","factor-list"])])),_:1}),m(n,{title:"被保人"},{default:f((()=>[m(a,{modelValue:K.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[2]||(t[2]=e=>K.value.tenantOrderInsuredList[0].relationToHolder=e),label:"为谁保单",name:"relationToHolder",placeholder:"请选择"},{input:f((()=>[m(r,{modelValue:K.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[1]||(t[1]=e=>K.value.tenantOrderInsuredList[0].relationToHolder=e),options:p(C)},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),1!=+K.value.tenantOrderInsuredList[0].relationToHolder?(c(),u(A,{key:0,images:te.value,"onUpdate:images":t[3]||(t[3]=e=>te.value=e),"form-info":K.value.tenantOrderInsuredList[0],"factor-list":J.value.INSURER||[]},null,8,["images","form-info","factor-list"])):y("",!0),m(a,{label:"投保地区",name:"type",placeholder:"请选择","is-link":""})])),_:1}),m(n,{title:"受益人"},{default:f((()=>[m(a,{modelValue:K.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[5]||(t[5]=e=>K.value.tenantOrderInsuredList[0].insuredBeneficiaryType=e),label:"受益人类型",name:"insuredBeneficiaryType",placeholder:"请选择"},{input:f((()=>[m(r,{modelValue:K.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[4]||(t[4]=e=>K.value.tenantOrderInsuredList[0].insuredBeneficiaryType=e),options:p(P)},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),2==K.value.tenantOrderInsuredList[0].insuredBeneficiaryType?(c(),I("div",B,[(c(!0),I(v,null,g(K.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList,((e,t)=>(c(),I("div",{key:e.beneficiaryId,class:"beneficiary-item"},[O("div",k,[O("span",N,L(`受益人${t+1}`),1),m(d,{name:"delete",onClick:t=>{return n=e,void(K.value.tenantOrderInsuredList[0].beneficiaryReqList=K.value.tenantOrderInsuredList[0].beneficiaryReqList.filter((e=>e.beneficiaryId!==n.beneficiaryId)));var n}},{default:f((()=>[V])),_:2},1032,["onClick"])]),m(x,{"form-info":e,"factor-list":J.value.BENEFICIARY},null,8,["form-info","factor-list"])])))),128)),m(o,{onClick:de},{default:f((()=>[_])),_:1})])):y("",!0)])),_:1}),m(n,{title:"保单通讯信息"},{default:f((()=>[p(ne).currentAddress?(c(),u(l,{key:1,title:"单元格","is-link":""},{title:f((()=>[O("div",F,[O("p",null,[O("span",U,L(p(ne).addressList[p(ne).currentAddress-1].contactName),1),O("span",D,L(p(ne).addressList[p(ne).currentAddress-1].contactPhoneNo),1)]),O("p",q,L(p(ne).addressList[p(ne).currentAddress-1].contactAddress),1)])])),_:1})):(c(),u(i,{key:0,activated:"",onClick:t[6]||(t[6]=e=>p($)(!0))},{default:f((()=>[S])),_:1}))])),_:1})])),_:1},512)),O("div",z,[m(o,{block:"",type:"primary",onClick:re},{default:f((()=>[Y])),_:1})]),p(X)?(c(),u(j,{key:1,modelValue:p(ne).currentAddress,"onUpdate:modelValue":t[7]||(t[7]=e=>p(ne).currentAddress=e),show:p(X),"data-source":p(ne).addressList,onSubmit:ae},null,8,["modelValue","show","data-source"])):y("",!0)])),_:1})}}}))}}}))}();

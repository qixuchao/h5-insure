import{_ as e,d as a,i as l,h as s,j as d,k as o,ah as n,l as t,o as r,c,a as i,b as u,e as m,u as p,p as h,w as v,cz as y,f as b,v as f,c$ as k,bi as w,y as V,d0 as g,T as I,cY as q,bL as x,cA as B,cB as C,b3 as N,bo as T,bp as _,d1 as U,d2 as j}from"./index-99247dde.js";import{g as z}from"./trial-2aadf1af.js";const A={class:"page-pay-auth-wrap"},L={class:"header"},R={class:"content"},W={class:"bank-card"},E={class:"card-content"},K={class:"main"},O={class:"bank-name"},P={class:"bank-no"},Y={class:"bank-card-type"},$=(e=>(T("data-v-47d29264"),e=e(),_(),e))((()=>i("p",{class:"desc"},"实时单笔限额5W 实时单日限额5W",-1))),D={class:"footer-button"},F=a({name:"payAuth"});var G=e(a({...F,setup(e){const a=l(),T=s(),{orderNo:_,tenantId:F}=a.query,G=d(),H=d(),J=d({}),M=o((()=>H.value.holder.certType===n.CERT?"身份证号":"证件号")),Q=(e,l)=>{k(H.value).then((({code:e,data:s})=>{"10000"===e?null==l||l():w.confirm({confirmButtonText:"银行卡修改",message:"当前暂不支持该银行，建议更换银行卡"}).then((()=>{T.push({path:V.updateBankInfo,query:a.query})}))}))},S=()=>{G.value.validate().then((e=>{g(H.value).then((({code:e,data:a})=>{"10000"===e&&(T.back(),I("成功"))}))})).catch((e=>{console.log("e",e)}))},X=d(),Z=async()=>{await z({orderNo:_,tenantId:F}).then((({code:e,data:a})=>{"10000"===e&&(H.value=a,J.value=a.tenantOrderPayInfoList.find((e=>1===e.payInfoType)),(async e=>{var a;const l=await U(j("BANK"))||[];X.value=null==(a=l.find((a=>a.code===e)))?void 0:a.name})(J.value.payBank))}))};t((()=>{Z()}));const ee=d();return t((()=>{setTimeout((async()=>{ee.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const l=q,s=x,d=B,o=C,n=N;return r(),c("div",A,[i("div",L,[u(l,{type:"warning",content:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。"})]),i("div",R,[i("div",W,[i("div",E,[i("div",K,[i("span",O,m(p(X)),1),i("span",P,m(p(J).bankCardNo),1)]),i("p",Y,m(p(J).bankCardType||"储蓄卡"),1),$])]),p(H)?(r(),h(o,{key:0,ref_key:"formRef",ref:G,model:p(H).holder},{default:v((()=>[u(s,{modelValue:p(H).holder.name,"onUpdate:modelValue":a[0]||(a[0]=e=>p(H).holder.name=e),label:"姓名",name:"name",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(s,{modelValue:p(H).holder.certNo,"onUpdate:modelValue":a[1]||(a[1]=e=>p(H).holder.certNo=e),label:p(M),name:"certNo",maxlength:"18","is-view":"",required:""},null,8,["modelValue","label"]),u(s,{modelValue:p(H).holder.mobile,"onUpdate:modelValue":a[2]||(a[2]=e=>p(H).holder.mobile=e),label:"银行预留手机",name:"mobile",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(d,{modelValue:p(H).holder.verifyCode,"onUpdate:modelValue":a[3]||(a[3]=e=>p(H).holder.verifyCode=e),label:"验证码",maxlength:"6",name:"verifyCode","related-name":"mobile","send-s-m-s-code":Q,"check-s-m-s-code":p(y),required:""},null,8,["modelValue","check-s-m-s-code"])])),_:1},8,["model"])):b("",!0)]),i("div",D,[u(n,{type:"primary",onClick:S},{default:v((()=>[f("提交")])),_:1})])])}}}),[["__scopeId","data-v-47d29264"]]);export{G as default};

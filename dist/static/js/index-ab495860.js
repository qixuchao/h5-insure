var W=Object.defineProperty,z=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var R=(c,s,d)=>s in c?W(c,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):c[s]=d,D=(c,s)=>{for(var d in s||(s={}))Q.call(s,d)&&R(c,d,s[d]);if(N)for(var d of N(s))X.call(s,d)&&R(c,d,s[d]);return c},j=(c,s)=>z(c,G(s));import{g as J,af as K,Q as Z,a5 as ee,C as L,L as te,o as re,X as ne,r as I,h as y,j as F,k as f,z as u,n as i,s as b,m as P,F as oe,E as ae,y as m,I as C,B as se}from"./vendor-50171071.js";import{P as de}from"./index-a08033fc.js";import{c as ue,n as ie,a as le}from"./index-1a05f3cc.js";import{_ as k,R as ce,B as fe,A as pe,a as me}from"./index-bb08cce3.js";import{I as Ie}from"./InsuredPart-d55f1546.js";import"./useDicData-6ed32f7c.js";import"./trial-4e0dfe71.js";const ye={key:0,class:"beneficiary-part"},Oe={class:"part-title"},_e={class:"title"},Le={class:"radio-item-wrapper"},Ae={class:"name"},Be={class:"hone"},ve={class:"address"},ge={class:"footer-button"},Ee=se("\u4E0B\u4E00\u6B65"),Ne=J({setup(c){const s=K(),d=Z(),{templateId:x=1,orderNo:U="2022072710380711215",tenantId:S="9991000007"}=d.query,[V,Te]=ee(),H=d.path==="/infoPreview"?"infoPreview":"infoCollection",A=L({}),o=L({extInfo:{pageCode:H},tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0}}),q=L(null),O=L([]),_=L([]),l=te({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),w=()=>{const r=D({},o.value);r.tenantOrderAttachmentList=[{category:22,objectType:2,objectId:o.value.tenantOrderHolder.id,name:"\u6295\u4FDD\u4EBA\u8BC1\u4EF6\u6B63\u9762",uri:O.value[0]},{category:23,objectType:2,objectId:o.value.tenantOrderHolder.id,name:"\u6295\u4FDD\u4EBA\u8BC1\u4EF6\u80CC\u9762",uri:O.value[1]},{category:22,objectType:3,objectId:o.value.tenantOrderInsuredList[0].id,name:"\u88AB\u4FDD\u4EBA\u8BC1\u4EF6\u6B63\u9762",uri:_.value[0]},{category:23,objectType:3,objectId:o.value.tenantOrderInsuredList[0].id,name:"\u88AB\u4FDD\u4EBA\u8BC1\u4EF6\u80CC\u9762",uri:_.value[1]}],ie(r).then(({code:n,data:e})=>{n==="10000"&&e.pageAction.pageAction==="jumpToPage"&&s.push({path:de[e.pageAction.data.nextPageCode],query:d.query})})},Y=r=>{console.log("value",r)},$=()=>{le({orderNo:U,tenantId:S}).then(({code:r,data:n})=>{if(r==="10000"){const e=n;e.extInfo=j(D({},e.extInfo),{pageCode:H,templateId:x}),e.tenantOrderHolder=e.tenantOrderHolder||{},e.tenantOrderHolder.extInfo=e.tenantOrderHolder.extInfo||{},e.tenantOrderInsuredList[0].extInfo=e.tenantOrderInsuredList[0].extInfo||{},e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map(t=>{const p=t;return p.extInfo={},p}),e.tenantOrderAttachmentList.forEach(t=>{t.category,t.objectType,t.category===22?t.objectType===2?O[0]=t.uri:t.objectType===3&&(_[0]=t.uri):t.category===23&&(t.objectType===2?O[1]=t.uri:t.objectType===3&&(_[1]=t.uri))}),Object.assign(o.value,e)}}).finally(()=>{l.isLoading=!1})};return re(()=>{$(),ue({pageCode:"infoCollection",templateId:x}).then(({code:r,data:n})=>{if(r==="10000"){const e={BENEFICIARY:[],INSURER:[],HOLDER:[]};n.productInsureFactorList.forEach(t=>{(e[t.moduleType]=e[t.moduleType]||[]).push(t)}),A.value=e}})}),ne(()=>o.value,r=>{var n,e,t,p,B,v,g,E,a,T;if(r){const M=[{contactAddress:((e=(n=r.tenantOrderHolder)==null?void 0:n.extInfo)==null?void 0:e.familyAddress)||1231123,contactName:r.tenantOrderHolder.name||123131,contactPhoneNo:r.tenantOrderHolder.mobile||123132},{contactAddress:(p=(t=r.tenantOrderHolder)==null?void 0:t.extInfo)==null?void 0:p.workAddress,contactName:r.tenantOrderHolder.name,contactPhoneNo:r.tenantOrderHolder.mobile},{contactAddress:(v=(B=r.tenantOrderInsuredList[0])==null?void 0:B.extInfo)==null?void 0:v.familyAddress,contactName:(g=r.tenantOrderInsuredList[0])==null?void 0:g.name,contactPhoneNo:(E=r.tenantOrderInsuredList[0])==null?void 0:E.mobile},{contactAddress:(T=(a=r.tenantOrderInsuredList[0])==null?void 0:a.extInfo)==null?void 0:T.workAddress,contactName:r.tenantOrderInsuredList[0].name,contactPhoneNo:r.tenantOrderInsuredList[0].mobile}];l.addressList=M.filter(h=>h.contactAddress&&h.contactName&&h.contactPhoneNo)}},{deep:!0,immediate:!0}),(r,n)=>{const e=I("ProCard"),t=I("ProRadioButton"),p=I("ProField"),B=I("van-cell"),v=I("ProForm"),g=I("VanButton"),E=I("ProPageWrap");return y(),F(E,{class:"page-info-wrapper"},{default:f(()=>[u(l).isLoading?b("",!0):(y(),F(v,{key:0,ref_key:"formRef",ref:q,"is-view":""},{default:f(()=>[i(Ie,{"product-data":o.value.tenantOrderInsuredList[0].tenantOrderProductList[0]},null,8,["product-data"]),i(e,{title:"\u6295\u4FDD\u4EBA"},{default:f(()=>[i(k,{images:O.value,"onUpdate:images":n[0]||(n[0]=a=>O.value=a),"form-info":o.value.tenantOrderHolder,"factor-list":A.value.HOLDER},null,8,["images","form-info","factor-list"])]),_:1}),i(e,{title:"\u88AB\u4FDD\u4EBA"},{default:f(()=>[i(p,{modelValue:o.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":n[2]||(n[2]=a=>o.value.tenantOrderInsuredList[0].relationToHolder=a),label:"\u4E3A\u8C01\u4FDD\u5355",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:f(()=>[i(t,{modelValue:o.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":n[1]||(n[1]=a=>o.value.tenantOrderInsuredList[0].relationToHolder=a),options:u(ce)},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),+o.value.tenantOrderInsuredList[0].relationToHolder!=1?(y(),F(k,{key:0,images:_.value,"onUpdate:images":n[3]||(n[3]=a=>_.value=a),"form-info":o.value.tenantOrderInsuredList[0],"factor-list":A.value.INSURER||[]},null,8,["images","form-info","factor-list"])):b("",!0),i(p,{label:"\u6295\u4FDD\u5730\u533A",name:"type",placeholder:"\u8BF7\u9009\u62E9","is-link":""})]),_:1}),i(e,{title:"\u53D7\u76CA\u4EBA"},{default:f(()=>[i(p,{modelValue:o.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":n[5]||(n[5]=a=>o.value.tenantOrderInsuredList[0].insuredBeneficiaryType=a),label:"\u53D7\u76CA\u4EBA\u7C7B\u578B",name:"insuredBeneficiaryType",placeholder:"\u8BF7\u9009\u62E9"},{input:f(()=>[i(t,{modelValue:o.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":n[4]||(n[4]=a=>o.value.tenantOrderInsuredList[0].insuredBeneficiaryType=a),options:u(fe)},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),o.value.tenantOrderInsuredList[0].insuredBeneficiaryType==2?(y(),P("div",ye,[(y(!0),P(oe,null,ae(o.value.tenantOrderInsuredList[0].beneficiaryReqList,(a,T)=>(y(),P("div",{key:a.beneficiaryId,class:"beneficiary-item"},[m("div",Oe,[m("span",_e,C(`\u53D7\u76CA\u4EBA${T+1}`),1)]),i(me,{"form-info":a,"factor-list":A.value.BENEFICIARY},null,8,["form-info","factor-list"])]))),128))])):b("",!0)]),_:1}),i(e,{title:"\u4FDD\u5355\u901A\u8BAF\u4FE1\u606F"},{default:f(()=>[u(l).currentAddress?(y(),F(B,{key:0,title:"\u5355\u5143\u683C","is-link":""},{title:f(()=>[m("div",Le,[m("p",null,[m("span",Ae,C(u(l).addressList[u(l).currentAddress-1].contactName),1),m("span",Be,C(u(l).addressList[u(l).currentAddress-1].contactPhoneNo),1)]),m("p",ve,C(u(l).addressList[u(l).currentAddress-1].contactAddress),1)])]),_:1})):b("",!0)]),_:1})]),_:1},512)),m("div",ge,[i(g,{block:"",type:"primary",onClick:w},{default:f(()=>[Ee]),_:1})]),i(pe,{modelValue:u(l).currentAddress,"onUpdate:modelValue":n[6]||(n[6]=a=>u(l).currentAddress=a),show:u(V),"data-source":u(l).addressList,onSubmit:Y},null,8,["modelValue","show","data-source"])]),_:1})}}});export{Ne as default};

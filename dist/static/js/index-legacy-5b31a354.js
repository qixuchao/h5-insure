!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-occupational-wrapper .popup-title[data-v-75228791]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-occupational-wrapper .popup-content[data-v-75228791]{height:13.84rem}.com-occupational-wrapper .footer-bar[data-v-75228791]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.com-personal-info-wrapper .placeholder[data-v-66c854a3]{color:#99a9c0}.com-risk-card-wrapper.part-card[data-v-38aa4e28]{background-color:#fff;margin-bottom:.26667rem}.com-risk-card-wrapper .delete-risk[data-v-38aa4e28]{display:flex;align-items:center;justify-content:center;margin-top:.06667rem}.com-risk-card-wrapper .delete-risk .svg-icon[data-v-38aa4e28]{font-size:.42667rem}.com-risk-card-wrapper .custom-field[data-v-38aa4e28]{display:flex;flex-direction:column}.com-risk-card-wrapper .custom-field .field-tip[data-v-38aa4e28]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .popup-title[data-v-d03a23e0]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem;font-size:.45333rem;font-weight:600;color:#393d46}.com-risk-list-wrapper .risk-list[data-v-d03a23e0]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper[data-v-d03a23e0] .van-cell-group--inset{border-bottom:1px solid #eeeff4}.com-risk-list-wrapper[data-v-d03a23e0] .van-cell-group--inset .van-cell{padding:.30667rem 0}.com-risk-list-wrapper .cell-title[data-v-d03a23e0]{display:flex;flex-direction:column}.com-risk-list-wrapper .cell-title .title-desc[data-v-d03a23e0]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .footer-bar[data-v-d03a23e0]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.risk-list-wrapper[data-v-674305e1]{margin-bottom:3.13333rem}.risk-list-wrapper .add-rider-risk[data-v-674305e1]{background-color:#fff;margin-top:-.26667rem;height:1.41333rem;display:flex;align-items:center;justify-content:space-between;padding:var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding)}.risk-list-wrapper .add-rider-risk .left-part[data-v-674305e1]{font-weight:400;color:#99a9c0;font-size:.4rem}@charset "UTF-8";.page-trial-wrapper[data-v-622f5547]{background-color:#f2f5fc}.page-trial-wrapper .part-card[data-v-622f5547]{background-color:#fff;margin-bottom:.26667rem}.page-trial-wrapper .risk-content[data-v-622f5547] .van-collapse-item__title--expanded{padding:0 .4rem 0 0;display:flex;align-items:center}.page-trial-wrapper .risk-content[data-v-622f5547] .van-collapse-item__content{padding:0}.page-trial-wrapper .plan-risk[data-v-622f5547] .van-tabs__line{display:none}.page-trial-wrapper .footer-bar[data-v-622f5547]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:.4rem;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #efeff4}.page-trial-wrapper .footer-bar .trial-result[data-v-622f5547]{width:5.86667rem;color:#ff5840;font-size:.32rem;font-weight:600}.page-trial-wrapper .footer-bar .trial-result .result-num[data-v-622f5547]{font-size:.61333rem;font-weight:500;margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate button[data-v-622f5547]{width:3.73333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-622f5547]{position:absolute;z-index:122;height:.56rem;border-radius:1.33333rem;background-color:#ff5840;font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC,sans-serif;font-weight:400;color:#fff;line-height:.49333rem;padding:.04rem .28rem .02667rem .26667rem;right:.4rem;top:-.46667rem;display:flex;align-items:center}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip .close-icon[data-v-622f5547]{margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-622f5547]:after{content:" ";position:absolute;z-index:11;width:0;height:0;border:.13333rem solid transparent;border-top:.13333rem solid #ff5840;border-right:.13333rem solid #ff5840;right:.49333rem;bottom:-.16rem}\n',document.head.appendChild(e),System.register(["./vendor-legacy-7d0032ff.js","./trial-legacy-53b10c6d.js","./index-legacy-5b2e37da.js","./useStorage-legacy-486b044b.js","./index-legacy-264a62e0.js","./trial-legacy-21c07e69.js"],(function(e){"use strict";var i,a,o,t,l,r,n,d,s,u,m,c,p,f,v,g,k,y,V,h,b,I,L,D,C,O,R,P,w,_,x,A,T,F,q,U,M,N,E,S,j,$,B,Y,z,K,G,H,J;return{setters:[function(e){i=e.g,a=e.L,o=e.X,t=e.r,l=e.h,r=e.m,n=e.n,d=e.k,s=e.y,u=e.z,m=e.a1,c=e.a2,p=e.a5,f=e.C,v=e.a4,g=e.x,k=e.d,y=e.j,V=e.s,h=e.I,b=e.a6,I=e.o,L=e.F,D=e.E,C=e.ag,O=e.ah,R=e.B,P=e.D,w=e.af,_=e.Q,x=e.a3},function(e){A=e.S,T=e.a,F=e.R,q=e.b,U=e.A,M=e.c,N=e.L,E=e.d,S=e.P,j=e.I},function(e){$=e.g,B=e.n},function(e){Y=e.l,z=e.u},function(e){K=e._,G=e.P},function(e){H=e.a,J=e.p}],execute:function(){const X={class:"com-occupational-wrapper"},Q=(e=>(m("data-v-75228791"),e=e(),c(),e))((()=>s("div",{class:"popup-title"},"选择职业",-1))),W={class:"popup-content"},Z=i({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(e,{emit:i}){const m=e,c=a({show:m.show,options:[],currentValue:""}),p=()=>{i("close")},f=({value:e,selectedOptions:a})=>{const o=(a||[]).map((e=>e.value)).join("/"),t=+a[a.length-1].name;i("update:modelValue",t),i("finish",o),p()};return o((()=>m),(()=>{((e="")=>{var i;const a=`${null==e||null===(i=e.toLocaleUpperCase)||void 0===i?void 0:i.call(e)}_OCCUPATION`,o=Y.get("occupational")||{};o[a]?c.options=o[a]:$({dictCodeList:[a]}).then((({code:e,data:i})=>{if("10000"===e){var t;const e=(e=>{const i=e,a=e=>{e.forEach((e=>{const i=e;i.children.length?a(i.children):i.children=null}))};return a(i),i})((null==i||null===(t=i[0])||void 0===t?void 0:t.dictItemList)||[]);c.options=e,o[a]=e,Y.set("occupational",o)}}))})(m.insuredCode)}),{deep:!0,immediate:!0}),o((()=>m.modelValue),(e=>{}),{deep:!0,immediate:!0}),(e,i)=>{const a=t("van-cascader"),o=t("VanPopup");return l(),r("div",X,[n(o,{show:u(c).show,"onUpdate:show":i[1]||(i[1]=e=>u(c).show=e),"show-footer":"",position:"bottom",closeable:"",onClose:p},{default:d((()=>[Q,s("div",W,[n(a,{modelValue:u(c).currentValue,"onUpdate:modelValue":i[0]||(i[0]=e=>u(c).currentValue=e),title:"请选择职业","show-header":!1,placeholder:"请选择",options:u(c).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:f},null,8,["modelValue","options"])])])),_:1},8,["show"])])}}});var ee=K(Z,[["__scopeId","data-v-75228791"]]);const ie={class:"com-personal-info-wrapper"},ae={key:0,class:"placeholder"},oe={key:1};var te=K(i({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(e,{expose:i}){const o=e,[s,m]=p(),[c,I]=p(),L=f(),D=v("source")||{},C=a({formInfo:o.formInfo,occupationalText:""}),O=e=>{C.occupationalText=e},R=()=>{I(!1)},P=g((()=>{const e=(e=>{const i=e||[];for(let a=0;a<i.length;a++)for(let e=a+1;e<i.length;e++){const o=i[a].split("_"),t=i[e].split("_"),l=i[a];o[0]===t[0]?o>t&&(i[a]=i[e],i[e]=l):"age"===o[0]&&(i[a]=i[e],i[e]=l)}return i})(null==o?void 0:o.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],a=i(e[0]),t=i(e[e.length-1]),l=k().subtract(a[0],"age"===a[1]?"year":"day").format("YYYY-MM-DD"),r=k().subtract(t[0],"age"===t[1]?"year":"day").format("YYYY-MM-DD");return{minAge:new Date(r),maxAge:new Date(l)}}));return i({validateForm:()=>new Promise(((e,i)=>{null==L||L.value.validate().then((()=>{e("")}),(()=>{i()}))})),ageRangeObj:P.value}),(i,a)=>{const o=t("VanField"),p=t("ProRadioButton"),f=t("VanForm"),v=t("van-datetime-picker"),g=t("van-popup");return l(),r("div",ie,[n(f,{ref_key:"formRef",ref:L,"input-align":"right","error-message-align":"right"},{default:d((()=>["proposal"===u(D).type&&("add"===u(D).type||"repeatAdd"===u(D).type)||"proposal"!==u(D).type&&(e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY"))?(l(),y(o,{key:0,modelValue:u(C).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>u(C).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink",readonly:"","is-link":"",placeholder:"请选择",onClick:a[1]||(a[1]=e=>u(m)(!0))},null,8,["modelValue"])):V("",!0),"proposal"===u(D).type&&("add"===u(D).type||"repeatAdd"===u(D).type)||"proposal"!==u(D).type&&(e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER"))?(l(),y(o,{key:1,modelValue:u(C).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>u(C).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:d((()=>[n(p,{modelValue:u(C).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>u(C).formInfo.gender=e),options:u(A)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):V("",!0),e.factorList.includes("SOCIAL_INS")?(l(),y(o,{key:2,modelValue:u(C).formInfo.socialSecurity,"onUpdate:modelValue":a[5]||(a[5]=e=>u(C).formInfo.socialSecurity=e),name:"socialSecurity",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:d((()=>[n(p,{modelValue:u(C).formInfo.socialSecurity,"onUpdate:modelValue":a[4]||(a[4]=e=>u(C).formInfo.socialSecurity=e),options:u(T)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):V("",!0),e.factorList.includes("OCCUPATION_CATEGORY")?(l(),y(o,{key:3,modelValue:u(C).formInfo.occupationalClass,"onUpdate:modelValue":a[6]||(a[6]=e=>u(C).formInfo.occupationalClass=e),rules:[{required:!0,message:"请选择职业类型"}],name:"occupationalClass",label:"职业类型","is-link":"",readonly:"",placeholder:"请选择",onClick:a[7]||(a[7]=e=>u(I)(!0))},{input:d((()=>[u(C).occupationalText?(l(),r("div",oe,h(u(C).occupationalText),1)):(l(),r("span",ae,"请选择"))])),_:1},8,["modelValue"])):V("",!0)])),_:1},512),n(g,{show:u(s),"onUpdate:show":a[10]||(a[10]=e=>b(s)?s.value=e:null),position:"bottom"},{default:d((()=>[n(v,{type:"date","min-date":u(P).minAge,"max-date":u(P).maxAge,onConfirm:a[8]||(a[8]=e=>{u(C).formInfo.birthday=u(k)(e).format("YYYY-MM-DD"),u(m)(!1)}),onCancel:a[9]||(a[9]=e=>u(m)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"]),u(c)?(l(),y(ee,{key:0,modelValue:u(C).formInfo.occupationalClass,"onUpdate:modelValue":a[11]||(a[11]=e=>u(C).formInfo.occupationalClass=e),show:u(c),"insured-code":e.insuredCode,onFinish:O,onClose:R},null,8,["modelValue","show","insured-code"])):V("",!0)])}}}),[["__scopeId","data-v-66c854a3"]]);const le={class:"com-risk-card-wrapper part-card"},re={class:"custom-field"},ne={class:"field-tip"},de={class:"custom-field"},se={class:"field-tip"},ue={class:"custom-field"},me={class:"field-tip"},ce={key:0},pe={key:9,class:"liab-desc"},fe=i({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(e){const i=e,m=f({}),c=v("premium")||{};m.value=v("enumList")||{};const p=f({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),k=a({formInfo:i.formInfo}),b=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"[object Object]"==={}.toString.call(e)&&Object.keys(e).length),C=(e,i,a={})=>{let o=i;return Array.isArray(i)||(o=[`${o}`]),(e||[]).filter((e=>o.includes(`${e.value}`)||o.includes(e.value)))},O=g((()=>{var e,a,o,t,l;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?C(i.enums.RISK_INSURANCE_PERIOD,(null===(l=i.originData.riskInsureLimitVO)||void 0===l?void 0:l.insurancePeriodValueList)||[]):2===(null===(a=i.originData)||void 0===a?void 0:a.periodType)?C([{value:"year_1",name:"1年"}],["year_1"]):C(null===(o=i.enums)||void 0===o?void 0:o.RISK_INSURANCE_PERIOD,(null===(t=i.mainRiskData.riskInsureLimitVO)||void 0===t?void 0:t.insurancePeriodValueList)||[])})),R=g((()=>{var e,a,o,t,l,r,n,d;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?C(null==i||null===(l=i.enums)||void 0===l?void 0:l.RISK_PAYMENT_PERIOD,(null===(r=i.originData.riskInsureLimitVO)||void 0===r?void 0:r.paymentPeriodValueList)||[]):1===(null===(a=i.originData)||void 0===a?void 0:a.exemptFlag)?C(F,[`${null==i||null===(n=i.originData)||void 0===n||null===(d=n.riskInsureLimitVO)||void 0===d?void 0:d.paymentPeriodRule}`]):2===(null===(o=i.originData)||void 0===o?void 0:o.periodType)?C([{value:"year_1",name:"1年交"}],["year_1"]):C(i.enums.RISK_PAYMENT_PERIOD,(null===(t=i.mainRiskData.riskInsureLimitVO)||void 0===t?void 0:t.paymentPeriodValueList)||[])})),P=g((()=>{var e,a,o,t,l;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?C(q,(null===(t=i.originData.riskInsureLimitVO)||void 0===t?void 0:t.paymentFrequencyList)||[]):1===(null===(a=i.originData.riskInsureLimitVO)||void 0===a?void 0:a.paymentTypeRule)?C(q,(null===(l=i.mainRiskData.riskInsureLimitVO)||void 0===l?void 0:l.paymentFrequencyList)||[]):C(q,(null===(o=i.mainRiskData.riskInsureLimitVO)||void 0===o?void 0:o.paymentFrequencyList)||[])})),w=g((()=>{var e,a;let o=0,t=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(o=e.minAmount,t=e.maxAmount),o>e.minAmount&&(o=e.minAmount),t<e.maxAmount&&(t=e.maxAmount)})),k.formInfo.amount=o,{min:o,max:t}})),_=g((()=>{var e,a;let o=0,t=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(o=e.minPremium,t=e.maxPremium),o>e.minPremium&&(o=e.minPremium),t<e.maxPremium&&(t=e.maxPremium)})),k.formInfo.premium=o,{min:o,max:t}})),x=g((()=>{var e,a,o,t;const l=(null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.minCopy)||1,r=null===(o=i.originData)||void 0===o||null===(t=o.riskCalcMethodInfoVO)||void 0===t?void 0:t.maxCopy;return k.formInfo.copy=`${l||1}`,{min:l,max:r}})),A=(e,a,o)=>{var t,l;const r=(null===(t=i.originData)||void 0===t||null===(l=t.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1;if("sumInsured"===o){if(w.value.max&&+e>w.value.max)return`金额最大${w.value.max}元`;if(+e<w.value.min)return`金额最小${w.value.min}元`}else{if(_.value.max&&+e>_.value.max)return`金额最大${_.value.max}元`;if(+e<_.value.min)return`金额最小${_.value.min}元`}return+e%r==0?"":`金额必须是${r}的倍数`};return I((()=>{var e,a;const o={riskType:i.originData.riskType,riskId:i.originData.id,riskName:i.originData.riskName,riskCode:i.originData.riskCode,mainRiskCode:null==i||null===(e=i.mainRiskData)||void 0===e?void 0:e.riskCode,mainRiskId:null==i||null===(a=i.mainRiskData)||void 0===a?void 0:a.id,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType})))};Object.assign(null==k?void 0:k.formInfo,o)})),o((()=>{var e;return null===(e=k.formInfo)||void 0===e?void 0:e.paymentFrequency}),((e=0)=>{var a,o,t;[3].includes((null===(a=i.originData.riskCalcMethodInfoVO)||void 0===a?void 0:a.saleMethod)||0)&&((null===(o=i.originData)||void 0===o||null===(t=o.riskCalcMethodInfoVO)||void 0===t?void 0:t.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(k.formInfo,{amount:i.perCopyAmount,premium:i.perCopyPremium})}));1==+e&&"single"!==k.formInfo.chargePeriod&&(k.formInfo.chargePeriod="single")})),o((()=>{var e;return null===(e=k.formInfo)||void 0===e?void 0:e.copy}),(e=>{var a,o;4===(null===(a=i.originData.riskCalcMethodInfoVO)||void 0===a?void 0:a.saleMethod)&&(k.formInfo.amount=+(e||1)*((null===(o=i.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.fixedAmount)||0))})),o((()=>{var e;return null===(e=k.formInfo)||void 0===e?void 0:e.chargePeriod}),(e=>{"single"===e&&1!=+(k.formInfo.paymentFrequency||0)&&(k.formInfo.paymentFrequency=1)})),o((()=>null==i?void 0:i.mainRiskInfo),(e=>{var a,o,t,l,r,n;e&&2===i.originData.riskType&&(1===(null===(a=i.originData)||void 0===a||null===(o=a.riskInsureLimitVO)||void 0===o?void 0:o.insurancePeriodRule)&&(e.coveragePeriod?p.value.coveragePeriod.disabled=!0:p.value.coveragePeriod.prevent=!0,k.formInfo.coveragePeriod=e.coveragePeriod||""),1===(null===(t=i.originData)||void 0===t||null===(l=t.riskInsureLimitVO)||void 0===l?void 0:l.paymentPeriodRule)&&(e.chargePeriod?p.value.chargePeriod.disabled=!0:p.value.chargePeriod.prevent=!0,k.formInfo.chargePeriod=e.chargePeriod||""),1===(null===(r=i.originData)||void 0===r||null===(n=r.riskInsureLimitVO)||void 0===n?void 0:n.paymentTypeRule)&&(e.paymentFrequency?p.value.paymentFrequency.disabled=!0:p.value.paymentFrequency.prevent=!0,k.formInfo.paymentFrequency=e.paymentFrequency||0))}),{immediate:!0,deep:!0}),(i,a)=>{var o,m,f,v,g,I,T,F,q,S,j,$,B,Y,z,K,G,H,J,X,Q,W,Z,ee,ie,ae,oe,te,fe,ve;const ge=t("ProSvg"),ke=t("ProTitle"),ye=t("VanStepper"),Ve=t("VanField"),he=t("ProRadioButton"),be=t("ProExpand");return l(),r("div",le,[n(ke,{"risk-type":e.originData.riskType,title:e.originData.riskName},{default:d((()=>[e.removeRiskList.includes(e.originData.id)?(l(),r("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=i=>e.removeRisk(e.originData.id))},[n(ge,{name:"delete",color:"#0d6efe"})])):V("",!0)])),_:1},8,["risk-type","title"]),1===(null===(o=e.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.saleMethod)&&2===e.originData.exemptFlag?(l(),y(Ve,{key:0,modelValue:u(k).formInfo.amount,"onUpdate:modelValue":a[2]||(a[2]=e=>u(k).formInfo.amount=e),label:"保额",name:"amount",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>A(...e,"sumInsured")}]},{input:d((()=>{var i,o;return[s("div",re,[n(ye,{modelValue:u(k).formInfo.amount,"onUpdate:modelValue":a[1]||(a[1]=e=>u(k).formInfo.amount=e),"input-width":"64px",min:u(w).min,step:(null===(i=e.originData.riskCalcMethodInfoVO)||void 0===i?void 0:i.increaseDecreaseNum)||1,max:u(w).max},null,8,["modelValue","min","step","max"]),s("span",ne,h(`金额最低${u(w).min}元，为${(null===(o=e.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):V("",!0),2===(null===(m=e.originData)||void 0===m||null===(f=m.riskCalcMethodInfoVO)||void 0===f?void 0:f.saleMethod)?(l(),y(Ve,{key:1,modelValue:u(k).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>u(k).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>A(...e,"premium")}]},{input:d((()=>{var i,o,t,l;return[s("div",de,[n(ye,{modelValue:u(k).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>u(k).formInfo.premium=e),step:(null===(i=e.originData)||void 0===i||null===(o=i.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1,min:u(_).min,"input-width":"64px",max:u(_).max},null,8,["modelValue","step","min","max"]),s("span",se,h(`金额最低${u(_).min}元，为${(null===(t=e.originData)||void 0===t||null===(l=t.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):V("",!0),3===(null===(v=e.originData)||void 0===v||null===(g=v.riskCalcMethodInfoVO)||void 0===g?void 0:g.saleMethod)||4===(null===(I=e.originData)||void 0===I||null===(T=I.riskCalcMethodInfoVO)||void 0===T?void 0:T.saleMethod)&&(null!==(F=e.originData)&&void 0!==F&&null!==(q=F.riskCalcMethodInfoVO)&&void 0!==q&&q.minCopy||null!==(S=e.originData)&&void 0!==S&&null!==(j=S.riskCalcMethodInfoVO)&&void 0!==j&&j.maxCopy)?(l(),y(Ve,{key:2,modelValue:u(k).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>u(k).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:d((()=>[s("div",ue,[n(ye,{modelValue:u(k).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>u(k).formInfo.copy=e),step:1,min:u(x).min,max:u(x).max},null,8,["modelValue","min","max"]),s("span",me,h(`${u(x).min}份起购，最多购买${u(x).max}份`),1)])])),_:1},8,["modelValue"])):V("",!0),[1].includes((null===($=e.originData.riskCalcMethodInfoVO)||void 0===$?void 0:$.saleMethod)||0)&&1!==(null===(B=e.originData)||void 0===B?void 0:B.exemptFlag)||!(e.originData.riskCalcMethodInfoVO.fixedAmount||null!==(Y=u(c))&&void 0!==Y&&Y[null===(z=e.originData)||void 0===z?void 0:z.riskCode])?V("",!0):(l(),y(Ve,{key:3,label:"保额"},{input:d((()=>{var i,a,o,t;return[s("div",null,h((null===(i=e.originData.riskCalcMethodInfoVO)||void 0===i?void 0:i.fixedAmount)||(null===(a=u(c))||void 0===a||null===(o=a[null===(t=e.originData)||void 0===t?void 0:t.riskCode])||void 0===o?void 0:o.amount)),1)]})),_:1})),b(null===(K=e.originData)||void 0===K||null===(G=K.riskInsureLimitVO)||void 0===G?void 0:G.insurancePeriodValueList)&&b(null===(H=e.originData)||void 0===H||null===(J=H.riskInsureLimitVO)||void 0===J?void 0:J.insurancePeriodRule)?V("",!0):(l(),y(Ve,{key:4,modelValue:u(k).formInfo.coveragePeriod,"onUpdate:modelValue":a[8]||(a[8]=e=>u(k).formInfo.coveragePeriod=e),label:"保障期间",name:"coveragePeriod",rules:[{required:!0,message:"请选择保障期间"}]},{input:d((()=>[n(he,{modelValue:u(k).formInfo.coveragePeriod,"onUpdate:modelValue":a[7]||(a[7]=e=>u(k).formInfo.coveragePeriod=e),disabled:p.value.coveragePeriod.disabled,prevent:p.value.coveragePeriod.prevent?"请先选择主险保障期间":"",options:u(O),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),b(null===(X=e.originData)||void 0===X||null===(Q=X.riskInsureLimitVO)||void 0===Q?void 0:Q.paymentPeriodValueList)&&b(null===(W=e.originData)||void 0===W||null===(Z=W.riskInsureLimitVO)||void 0===Z?void 0:Z.paymentPeriodRule)?V("",!0):(l(),y(Ve,{key:5,modelValue:u(k).formInfo.chargePeriod,"onUpdate:modelValue":a[10]||(a[10]=e=>u(k).formInfo.chargePeriod=e),label:"交费期间",name:"chargePeriod",rules:[{required:!0,message:"请选择交费期间"}]},{input:d((()=>[n(he,{modelValue:u(k).formInfo.chargePeriod,"onUpdate:modelValue":a[9]||(a[9]=e=>u(k).formInfo.chargePeriod=e),disabled:p.value.chargePeriod.disabled,prevent:p.value.chargePeriod.prevent?"请先选择主险交费期间":"",options:u(R),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),b(null===(ee=e.originData.riskInsureLimitVO)||void 0===ee?void 0:ee.paymentFrequencyList)&&b(null===(ie=e.originData.riskInsureLimitVO)||void 0===ie?void 0:ie.paymentPeriodRule)?V("",!0):(l(),y(Ve,{key:6,modelValue:u(k).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>u(k).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:d((()=>[n(he,{modelValue:u(k).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>u(k).formInfo.paymentFrequency=e),disabled:p.value.paymentFrequency.disabled,prevent:p.value.paymentFrequency.prevent?"请先选择主险交费方式":"",options:u(P)},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),b(null===(ae=e.originData)||void 0===ae||null===(oe=ae.riskInsureLimitVO)||void 0===oe?void 0:oe.annuityDrawTypeList)?V("",!0):(l(),y(Ve,{key:7,modelValue:u(k).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>u(k).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate",rules:[{required:!0,message:"请选择领取时间"}]},{input:d((()=>{var i;return[n(he,{modelValue:u(k).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>u(k).formInfo.annuityDrawDate=e),options:C(u(U),(null===(i=e.originData.riskInsureLimitVO)||void 0===i?void 0:i.annuityDrawTypeList)||[])},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),b(null===(te=e.originData)||void 0===te||null===(fe=te.riskInsureLimitVO)||void 0===fe?void 0:fe.annuityDrawFrequencyList)?V("",!0):(l(),y(Ve,{key:8,modelValue:u(k).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>u(k).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType",rules:[{required:!0,message:"请选择领取方式"}]},{input:d((()=>{var i;return[n(he,{modelValue:u(k).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>u(k).formInfo.annuityDrawType=e),options:C(u(M),(null===(i=e.originData.riskInsureLimitVO)||void 0===i?void 0:i.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),(l(!0),r(L,null,D(e.originData.riskLiabilityInfoVOList||[],((i,a)=>(l(),r("div",{key:a},[1===i.optionalFlag?(l(),y(Ve,{key:0,modelValue:u(k).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:d((()=>{var o,t;return[s("div",null,[b(i.liabilityAttributeValueList)?(l(),r("span",ce,"50万")):(l(),y(he,{key:1,modelValue:u(k).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:C(u(N),null===(o=e.originData.riskLiabilityInfoVOList)||void 0===o||null===(t=o[a])||void 0===t?void 0:t.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(l(),y(Ve,{key:1,modelValue:u(k).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:d((()=>{var o,t;return[s("div",null,[b(i.liabilityAttributeValueList)?(l(),y(he,{key:0,modelValue:u(k).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:u(E)},null,8,["modelValue","onUpdate:modelValue","options"])):(l(),y(he,{key:1,modelValue:u(k).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:C(u(N),null===(o=e.originData.riskLiabilityInfoVOList)||void 0===o||null===(t=o[a])||void 0===t?void 0:t.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"]))])))),128)),null!==(ve=e.originData)&&void 0!==ve&&ve.relationDesc?(l(),r("div",pe,[n(be,{title:"责任投保说明"},{default:d((()=>[s("div",null,h(e.originData.relationDesc),1)])),_:1})])):V("",!0)])}}});var ve=K(fe,[["__scopeId","data-v-38aa4e28"]]);const ge={class:"com-risk-list-wrapper"},ke=(e=>(m("data-v-d03a23e0"),e=e(),c(),e))((()=>s("div",{class:"popup-title"},"选择附加险",-1))),ye={class:"risk-list"},Ve={class:"cell-title"},he={class:"title"},be={class:"footer-bar"},Ie=R("确认"),Le=i({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const m=e,c=f([]),p=f([]),v=f([...m.disabled]),g=a({show:m.show,currentChecked:[...m.modelValue]}),k=e=>{var i,a,o;if(v.value.includes(e))return;((e,i)=>{if(!m.collocationList.length)return i?void(g.currentChecked=[]):void g.currentChecked.push(e);let a=g.currentChecked,o=v.value;i?(m.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?a=a.filter((a=>a!==i.collocationRiskId||a!==e)):3===i.collocationType?(a=a.filter((i=>i!==e)),o=o.filter((e=>e!==i.collocationRiskId))):a=a.filter((i=>i!==e)))})),g.currentChecked=a,v.value=o):(m.collocationList.forEach((t=>{e===t.riskId&&(i||(2===t.collocationType?a.push(t.collocationRiskId):3===t.collocationType&&o.push(t.collocationRiskId),a.push(e)))})),g.currentChecked.push(...a),v.value=o)})(e,g.currentChecked.includes(e)),null==c||null===(i=c.value)||void 0===i||null===(a=i[e])||void 0===a||null===(o=a.toggle)||void 0===o||o.call(a)},V=()=>{i("close")},b=()=>{const e=m.riskList.filter((e=>g.currentChecked.includes(e.id)));i("update:modelValue",[...new Set(p.value)]),i("finished",e,v.value),i("close")};return C((()=>{c.value=[]})),o((()=>g.currentChecked),(e=>{p.value=e}),{deep:!0,immediate:!0}),o((()=>m.modelValue),(e=>{p.value=e||[],v.value.push(...e||[])}),{deep:!0,immediate:!0}),(i,a)=>{const o=t("van-checkbox"),m=t("VanCell"),f=t("van-cell-group"),I=t("van-checkbox-group"),C=t("VanButton"),R=t("VanPopup");return l(),r("div",ge,[n(R,{show:u(g).show,"onUpdate:show":a[1]||(a[1]=e=>u(g).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:V},{default:d((()=>[ke,s("div",ye,[n(I,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e)},{default:d((()=>[n(f,{inset:""},{default:d((()=>[(l(!0),r(L,null,D(e.riskList,(e=>(l(),y(m,{key:e.id,title:e.riskName,disabled:v.value.includes(e.id),onClick:i=>k(e.id)},{"right-icon":d((()=>[n(o,{ref_for:!0,ref:i=>c.value[e.id]=i,shape:"square",disabled:v.value.includes(e.id),name:e.id,onClick:O((i=>k(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:d((()=>[s("div",Ve,[s("div",he,h(e.riskName),1)])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),s("div",be,[n(C,{type:"primary",disabled:!u(g).currentChecked.length,block:"",onClick:b},{default:d((()=>[Ie])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var De=K(Le,[["__scopeId","data-v-d03a23e0"]]);const Ce={class:"risk-list-wrapper"},Oe={key:0,class:"add-rider-risk"},Re={class:"left-part"},Pe=R("+ 附加险"),we=i({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}},riderRiskList:{default:()=>[]}},setup(e){var i;const m=e,c=v("source")||{},[g,k]=p(!1);f(null),f(null);const b=a({mainRiskInfo:m.riskInfo,riderRiskInfo:(null===(i=m.riskInfo)||void 0===i?void 0:i.riderRiskVOList)||[],requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),C=(e,i)=>{b.requiredRiderRiskData=b.requiredRiderRiskData.concat(e),b.disabledList=i},O=e=>{P.confirm({message:"确定要删除附加险么？"}).then((()=>{var i;const a=[e];((null===(i=b.mainRiskData)||void 0===i?void 0:i.collocationVOList)||[]).forEach((i=>{e!==i.riskId||2!==i.collocationType&&3!==i.collocationType||a.push(i.collocationRiskId)})),b.checkedList=b.checkedList.filter((e=>!a.includes(e))),b.requiredRiderRiskData=b.requiredRiderRiskData.filter((e=>!a.includes(e.id))),b.disabledList=b.disabledList.filter((e=>!a.includes(e))),Object.assign(b.riderRiskInfo,{[e]:void 0})})).catch((()=>{}))};return I((()=>{})),o((()=>b.requiredRiderRiskData),(e=>{const i=[b.mainRiskData,...e];let a=[],o=[];const t=[];i.forEach(((e,i)=>{var l,r,n;const d=(null==e||null===(l=e.riskCalcMethodInfoVO)||void 0===l?void 0:l.riskFactorRelationList)||[];a=a.concat(d.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),o=o.concat(d.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),t.push(null==e||null===(r=e.riskInsureLimitVO)||void 0===r?void 0:r.minHolderAge,null==e||null===(n=e.riskInsureLimitVO)||void 0===n?void 0:n.maxHolderAge)})),(e||[]).forEach((e=>{var i;const a={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,riskName:e.riskName,mainRiskCode:b.mainRiskData.riskCode,mainRiskId:null===(i=b.mainRiskData)||void 0===i?void 0:i.id,riskCategory:e.riskCategory,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType})))};Object.assign(b.riderRiskInfo,{[e.id]:a})})),m.pickFactor({insuredFactorList:[...new Set(a)],holderFactorList:[...new Set(o)],ageRange:t})}),{deep:!0,immediate:!0}),o((()=>m.originData),(e=>{(e||[]).forEach((e=>{1===e.riskType&&(b.mainRiskData=e)}))}),{deep:!0,immediate:!0}),(i,a)=>{var o,m,p;const f=t("ProCheckButton");return l(),r("div",Ce,[(l(!0),r(L,null,D(e.originData,((i,a)=>(l(),y(ve,{key:i.id,"form-info":u(b).riderRiskInfo[i.id],index:a,enums:e.enums,"main-risk-data":u(b).mainRiskData,"main-risk-info":u(b).mainRiskInfo,"origin-data":i,"remove-risk":O,"remove-risk-list":u(b).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),(null===(o=u(b).riderRiskList)||void 0===o?void 0:o.length)-(null===(m=u(b).checkedList)||void 0===m?void 0:m.length)&&("proposal"!==u(c).origin||"addRiderRisk"===u(c).type)?(l(),r("div",Oe,[s("span",Re,h(`共有${u(b).riderRiskList.length-u(b).checkedList.length}款附加险可以添加`),1),n(f,{activated:"",onClick:a[0]||(a[0]=e=>u(k)(!0))},{default:d((()=>[Pe])),_:1})])):V("",!0),u(g)?(l(),y(De,{key:1,modelValue:u(b).checkedList,"onUpdate:modelValue":a[1]||(a[1]=e=>u(b).checkedList=e),show:u(g),disabled:u(b).disabledList,"risk-list":u(b).riderRiskList,"collocation-list":(null===(p=u(b).mainRiskData)||void 0===p?void 0:p.collocationVOList)||[],onFinished:C,onClose:a[2]||(a[2]=e=>u(k)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):V("",!0)])}}});var _e=K(we,[["__scopeId","data-v-674305e1"]]);const xe={key:0,class:"part-card"},Ae={key:1,class:"part-card"},Te={class:"risk-content"},Fe={key:0,class:"risk"},qe={key:1,class:"plan-risk"},Ue={class:"footer-bar"},Me={class:"trial-result"},Ne={class:"result-num"},Ee=R(" 元起 "),Se={class:"trial-operate"},je={key:0,class:"retrial-tip"},$e=R(" 条件更改后，需要重新试算 "),Be=R("去试算"),Ye=R("立即投保"),ze=i({setup(e){const i=w(),m=_(),{productCode:c="MMBBSF",templateId:p=1,agentCode:v="test",agencyCode:g="",tenantId:k=9991000007,venderCode:b="99"}=m.query,C=f({personVO:{}}),O=f({insuredCode:"",personVO:{}}),R=f({}),P=f({}),A=f({}),T=f({}),F=f({}),q=a({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0,retrialTip:!1,enumList:{},ageRange:[],collapseName:["1"],insuredRiskList:[],currentRiskList:[]});x("premium",F.value),x("source",""),z().get("userInfo");const U="premiumTrial",M=()=>{q.retrialTip=!1},N=()=>{B({agencyId:g,saleUserId:v,tenantId:k,venderCode:b,orderDataSource:1,pageCode:U,extInfo:{templateId:+(p||1),pageCode:U},tenantOrderHolder:{},tenantOrderInsuredList:[{tenantOrderProductList:[{productCode:q.riskBaseInfo.productCode||"",productName:q.riskBaseInfo.productName||"",premium:q.trialResult.premium||0,tenantOrderRiskList:q.insuredRiskList}]}]}).then((({code:e,data:a})=>{"10000"===e&&"jumpToPage"===a.pageAction.pageAction&&i.push({path:G[a.pageAction.data.nextPageCode],query:{...m.query,orderNo:a.pageAction.data.orderNo}})}))},E=()=>{const e=JSON.parse(JSON.stringify(R.value[q.currentPlan])),i=Object.values(e.riderRiskVOList).map((e=>{const i=e;if("3"===i.chargePeriod){const e=(R.value[q.currentPlan].chargePeriod||"").split("_");e[1]&&(e[1]-=1),i.chargePeriod=e.join("_")}return i.liabilityVOList=(i.liabilityVOList||[]).filter((e=>e.liabilityAttributeValue&&"-1"!==e.liabilityAttributeValue)).map((e=>{const i=e;return"0"===i.liabilityAttributeValue&&(i.liabilityAttributeValue=""),i})),i}));e.liabilityVOList=e.liabilityVOList.filter((e=>!["-1"].includes(e.liabilityAttributeValue))).map((e=>{const i=e;return"0"===i.liabilityAttributeValue&&(i.liabilityAttributeValue=""),i}));const a={holder:{personVO:{...C.value.personVO,birthday:C.value.personVO.birthday?`${C.value.personVO.birthday} 00:00:00`:""}},productCode:q.riskBaseInfo.productCode,insuredVOList:[{...O.value,personVO:{...O.value.personVO,birthday:O.value.personVO.birthday&&`${O.value.personVO.birthday} 00:00:00`},productPlanVOList:[{planCode:q.currentPlan||"",riskVOList:[{...e,riderRiskVOList:i}]}]}]};J({...a}).then((({code:e,data:i})=>{if("10000"===e){q.retrialTip=!1,q.trialResult=i,q.canTrial=!1;const e={},o=(i=[])=>{i.forEach((i=>{var a;e[i.riskCode]=i,null!==(a=i.riskPremiumDetailVOList)&&void 0!==a&&a.length&&o(i.riskPremiumDetailVOList)}))};o(i.riskPremiumDetailVOList),((e,i)=>{const a=[],o=e=>{e.forEach((e=>{var t,l,r;const n={initialAmount:null===(t=i[e.riskCode])||void 0===t?void 0:t.amount,paymentFrequency:e.paymentFrequency,paymentPeriod:e.chargePeriod.split("_")[1],paymentPeriodType:S[e.chargePeriod.split("_")[0]],insurancePeriodType:j[e.coveragePeriod.split("_")[0]],insurancePeriodValue:e.coveragePeriod.split("_")[1],riskCode:e.riskCode,riskType:e.riskType,initialPremium:null===(l=i[e.riskCode])||void 0===l?void 0:l.premium};a.push(n),null!==(r=e.riderRiskVOList)&&void 0!==r&&r.length&&o(e.riderRiskVOList)}))};o(e),q.insuredRiskList=a})(a.insuredVOList[0].productPlanVOList[0].riskVOList,e),Object.assign(F.value,e)}}))},Y=()=>{var e,i,a,o,t;Promise.all([null===(e=P.value)||void 0===e||null===(i=e.validateForm)||void 0===i?void 0:i.call(e),null===(a=A.value)||void 0===a||null===(o=a.validateForm)||void 0===o?void 0:o.call(a),null===(t=T.value)||void 0===t?void 0:t.validate()]).then((()=>{E()}))},K=e=>{q.holderFactor=e.holderFactorList,q.insuredFactor=e.insuredFactorList,q.ageRange=e.ageRange};return o([()=>R.value,()=>C.value,()=>O.value],(e=>{e&&!q.canTrial&&(q.canTrial=!0,q.retrialTip=!0)}),{deep:!0}),I((()=>{H({productCode:c,source:1}).then((({code:e,data:i})=>{"10000"===e&&(q.riskBaseInfo=i.productBasicInfoVO,(i.productRelationPlanVOList||i.riskDetailVOList||[]).forEach(((e,i)=>{0===i&&(q.currentPlan=e.planCode||"0"),Object.assign(R.value,{[e.planCode||i]:{liabilityVOList:[],riderRiskVOList:{}}})})),q.riskData=i.productRiskVoList[0].riskDetailVOList||[],q.currentRiskList=(i.productRiskVoList[0].riskDetailVOList||[]).filter((e=>1===e.riskType||2===e.collocationType)),q.riskPlanData=i.productRelationPlanVOList||[])})).finally((()=>{})),$({dictCodeList:["RISK_PAYMENT_PERIOD","RISK_INSURANCE_PERIOD"]}).then((({code:e,data:i})=>{if("10000"===e){const e={};i.forEach((i=>{e[i.dictCode]=i.dictItemList})),q.enumList=e}}))})),(e,i)=>{const a=t("ProTitle"),o=t("VanForm"),m=t("ProTabButton"),c=t("VanTab"),p=t("VanTabs"),f=t("van-collapse-item"),v=t("van-collapse"),g=t("VanButton"),k=t("ProPageWrap");return l(),y(k,{class:"page-trial-wrapper"},{default:d((()=>{var e,t,k;return[u(q).holderFactor.length?(l(),r("div",xe,[n(a,{title:"投保人"}),n(te,{ref_key:"holderRef",ref:P,"insured-code":null===(e=u(q).riskBaseInfo)||void 0===e?void 0:e.insurerCode,"form-info":C.value.personVO,"factor-list":u(q).holderFactor,"age-range":u(q).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):V("",!0),u(q).insuredFactor.length?(l(),r("div",Ae,[n(a,{title:"被保人"}),n(te,{ref_key:"insuredRef",ref:A,"insured-code":null===(t=u(q).riskBaseInfo)||void 0===t?void 0:t.insurerCode,"form-info":O.value.personVO,"factor-list":u(q).insuredFactor,"age-range":u(q).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):V("",!0),s("div",Te,[n(v,{modelValue:u(q).collapseName,"onUpdate:modelValue":i[1]||(i[1]=e=>u(q).collapseName=e)},{default:d((()=>[n(f,{name:"1"},{title:d((()=>[n(a,{title:"投保方案"})])),default:d((()=>[u(q).riskData.length?(l(),r("div",Fe,[n(o,{ref_key:"riskFormRef",ref:T,"input-align":"right","error-message-align":"right"},{default:d((()=>[n(_e,{"risk-info":R.value[0],enums:u(q).enumList,"origin-data":u(q).riskData,"pick-factor":K},null,8,["risk-info","enums","origin-data"])])),_:1},512)])):V("",!0),u(q).riskPlanData.length?(l(),r("div",qe,[n(o,{ref_key:"riskFormRef",ref:T,"input-align":"right","error-message-align":"right"},{default:d((()=>[n(p,{active:u(q).currentPlan,"onUpdate:active":i[0]||(i[0]=e=>u(q).currentPlan=e)},{default:d((()=>[(l(!0),r(L,null,D(u(q).riskPlanData,(e=>(l(),y(c,{key:e.planCode,name:e.planCode,title:e.planName},{title:d((()=>[n(m,{title:e.planName,active:u(q).currentPlan===e.planCode},null,8,["title","active"])])),default:d((()=>[e.planCode===u(q).currentPlan?(l(),y(_e,{key:0,"risk-info":R.value[e.planCode],enums:u(q).enumList,"origin-data":e.riskDetailVOList,"pick-factor":K},null,8,["risk-info","enums","origin-data"])):V("",!0)])),_:2},1032,["name","title"])))),128))])),_:1},8,["active"])])),_:1},512)])):V("",!0)])),_:1})])),_:1},8,["modelValue"])]),s("div",Ue,[s("span",Me,[s("span",Ne,h((u(q).retrialTip?"0":(null===(k=u(q).trialResult)||void 0===k?void 0:k.premium)||"0").toLocaleString()),1),Ee]),s("div",Se,[u(q).retrialTip?(l(),r("div",je,[$e,s("span",{class:"close-icon",onClick:M},"X")])):V("",!0),u(q).canTrial?(l(),y(g,{key:1,type:"primary",onClick:Y},{default:d((()=>[Be])),_:1})):(l(),y(g,{key:2,type:"primary",onClick:N},{default:d((()=>[Ye])),_:1}))])])]})),_:1})}}});e("default",K(ze,[["__scopeId","data-v-622f5547"]]))}}}))}();

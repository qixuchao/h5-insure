var K=Object.defineProperty,X=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var q=(u,n,o)=>n in u?K(u,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[n]=o,c=(u,n)=>{for(var o in n||(n={}))w.call(n,o)&&q(u,o,n[o]);if(x)for(var o of x(n))ee.call(n,o)&&q(u,o,n[o]);return u},r=(u,n)=>X(u,Z(n));import{g as te,a9 as ae,O as ne,E as _,h as oe,r as f,j as i,k as p,m as N,p as S,n as D,G as T,L as g,A as l,F as y,z as se,C as ue,T as le}from"./vendor-06835924.js";import{l as $}from"./inform-b3dba50f.js";import{_ as ie,g as ce,n as re,c as de}from"./index-cf243755.js";import{Q as v,a as C,I as b,H as _e,b as M,c as pe}from"./notice-8f6df5db.js";import{s as ve}from"./useStorage-3d3f5e03.js";import{g as R}from"./verify-7d060483.js";const Ce={class:"footer-button"},Be=ue("\u4E0B\u4E00\u6B65"),me=te({setup(u){const n=ae(),o=ne(),{productCode:j="MMBBSF",agentCode:L="65434444",tenantId:k=9991000007,agencyCode:Ee="3311222",insurerCode:F="zhongan",productCategory:Q=1,templateId:fe=1,orderNo:h="2022080217103534947"}=o.query,Y=1,H=1,B=_([]),d=_({});_(!1);const I=_([]),O=_([]),U=t=>B.value.filter(a=>a.objectType===t),z=()=>{ce({orderNo:h,saleUserId:L,tenantId:k}).then(({code:t,data:a})=>{t==="10000"&&Object.assign(d.value,a)})},V=()=>{const t={orderNo:h,productCode:j,tenantId:k,objectType:M};R(c({},t)).then(({code:a,data:s})=>{a==="10000"&&(O.value=s||[])}),R(r(c({},t),{objectType:b})).then(({code:a,data:s})=>{a==="10000"&&(I.value=s||[])})},G=()=>{const t={insurerCode:F,orderNo:h,productCategory:Q,tenantId:k};Promise.all([$(r(c({},t),{noticeType:_e,objectType:M})),$(r(c({},t),{noticeType:pe,objectType:b}))]).then(([{code:a,data:s},{code:E,data:P}])=>{a==="10000"&&E==="10000"&&(B.value=[...s,...P])})},m=t=>{var a;ve.set("questionData",t),n.push({path:"/healthNotice",query:c({materialType:(t==null?void 0:t.materialSource)?"product":"question",questionnaireType:(t==null?void 0:t.materialSource)?H:t.questionnaireType,orderId:(a=d.value)==null?void 0:a.id},o.query)})},J=()=>{if(![...I.value,...O.value,...B.value].every(a=>a.isDone===Y)){le("\u8BF7\u5B8C\u6210\u6240\u6709\u544A\u77E5\u8FDB\u884C\u4E0B\u4E00\u6B65");return}Object.assign(d.value,{pageCode:"questionNotice",tenantOrderNoticeList:B.value}),re(r(c({},d.value),{extInfo:r(c({},d.value.extInfo),{pageCode:"questionNotice"}),venderCode:F})).then(({code:a,data:s})=>{a==="10000"&&s.pageAction.pageAction==="jumpToPage"&&n.push({path:de[s.pageAction.data.nextPageCode],query:o.query})})};return oe(()=>{G(),V(),z()}),(t,a)=>{const s=f("van-cell"),E=f("ProCard"),P=f("van-button"),W=f("ProPageWrap");return i(),p(W,{class:"page-question-notice"},{default:N(()=>[S(E,{title:"\u6295\u4FDD\u4EBA"},{default:N(()=>[(i(!0),D(y,null,T(U(l(C)),e=>(i(),p(s,{key:e.id,class:g({"is-active":e.isDone===l(v)}),title:`\u300A${e.title}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:A=>m(e)},null,8,["class","title","value","onClick"]))),128)),(i(!0),D(y,null,T(O.value,e=>(i(),p(s,{key:e.id,class:g({"is-active":e.isDone===l(v)}),title:`\u300A${e.materialName}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:A=>m(e)},null,8,["class","title","value","onClick"]))),128))]),_:1}),S(E,{title:"\u88AB\u4FDD\u4EBA"},{default:N(()=>[(i(!0),D(y,null,T(U(l(v)),e=>(i(),p(s,{key:e.id,class:g({"is-active":e.isDone===l(v)}),title:`\u300A${e.title}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:A=>m(e)},null,8,["class","title","value","onClick"]))),128)),(i(!0),D(y,null,T(I.value,e=>(i(),p(s,{key:e.id,class:g({"is-active":e.isDone===l(v)}),title:`\u300A${e.materialName}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:A=>m(e)},null,8,["class","title","value","onClick"]))),128))]),_:1}),se("div",Ce,[S(P,{type:"primary",onClick:J},{default:N(()=>[Be]),_:1})])]),_:1})}}});var Ie=ie(me,[["__scopeId","data-v-41cd2673"]]);export{Ie as default};

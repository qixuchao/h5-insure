import{_ as e,d as t,S as a,E as s,c as n,h as l,f as r,w as o,F as i,i as d,g as c,e as u,n as p,t as m,V as v,L as f,k as h,m as y,ap as g,au as I,X as O,Y as b,j as A,bY as _,bZ as L,bp as k,r as x,bt as C,c7 as P,bk as T,I as E,a as V,an as D,c8 as j,b_ as w,u as R,J as N,b3 as S,a9 as H,aE as B,H as F,ah as U,G as q,bR as z,a7 as M,T as G,aj as $,c0 as Q,c9 as J,bT as W,c1 as Y}from"./index-f03140d4.js";import{d as Z}from"./debounce-910624d9.js";import{i as K,b as X,p as ee,g as te}from"./trial-4c132c87.js";import{b as ae}from"./product-48bec35b.js";import{n as se}from"./nextStep-41bfc4a8.js";import{g as ne,C as le,I as re,O as oe,l as ie,S as de}from"./infoCollection-494ff537.js";import{u as ce,P as ue}from"./index-035969a8.js";import{v as pe,g as me,r as ve,t as fe}from"./utils-82788e76.js";import{v as he}from"./validator-5a13dc82.js";import{B as ye}from"./index-ef324314.js";import{s as ge,c as Ie}from"./phoneVerify-07a196ce.js";import Oe from"./index-11a28513.js";import{c as be,t as Ae,_ as _e}from"./index-d8aa9fd3.js";import"./trial-58dc58d8.js";import"./pdfh5-008ca364.js";import"./isObject-cd478a85.js";import"./isObjectLike-f858f31d.js";import"./core-3a08fcc7.js";import"./constant-c3f28a3b.js";import"./_nodeUtil-ef4cea77.js";const Le={class:"refueling-package-com"},ke=(e=>(O("data-v-7e34c868"),e=e(),b(),e))((()=>A("div",{class:"title"},"加油包",-1)));var xe=e(t({__name:"index",props:{packageProductList:{type:Array,default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:3}},setup(e){const t=e,[O,b]=a(!1),A=s((()=>t.packageProductList.length>t.count&&(!!t.isShowClose||!O.value))),_=()=>{b()},L=s((()=>t.packageProductList.length<=t.count||O.value?t.packageProductList:t.packageProductList.slice(0,t.count)));return(e,t)=>{const a=y,s=g,b=I;return n(),l("div",Le,[ke,r(b,{ref:"formRef"},{default:o((()=>[(n(!0),l(i,null,d(c(L),((e,t)=>(n(),u(s,{key:`${e.value}_${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.packageName,required:"",placeholder:"请选择"},{input:o((()=>[r(a,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:c(ne),disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","options","disabled"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])))),128)),c(A)?(n(),l("div",{key:0,class:"show-more",onClick:_},[p(m(c(O)?"收起":"查看更多")+" ",1),r(v,{name:"down",class:f(["icon",{showMore:c(O)}])},null,8,["class"])])):h("",!0)])),_:1},512)])}}}),[["__scopeId","data-v-7e34c868"]]);const Ce={class:"spec"},Pe={key:1,class:"spec"};var Te=e(t({__name:"index",props:{dataSource:{default:()=>({spec:[],settlementProcessVO:{},questionList:[]})}},setup(e,{expose:t}){const a=e,p=_((()=>L((()=>import("./index-f03140d4.js").then((function(e){return e.cG}))),["static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),m=_((()=>L((()=>import("./index-71768f0f.js")),["static/js/index-71768f0f.js","static/css/index-f22f2764.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),f=_((()=>L((()=>import("./index-f03140d4.js").then((function(e){return e.cE}))),["static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),y=_((()=>L((()=>import("./index-ee0f97c7.js")),["static/js/index-ee0f97c7.js","static/css/index-7b3feb06.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),g=_((()=>L((()=>import("./index-0adb166f.js")),["static/js/index-0adb166f.js","static/css/index-bfbfdd15.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/index-48824806.js"]))),{dataSource:I}=k(a),O=x(),b=x([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),V=s((()=>I.value.spec&&I.value.spec.length>0)),D=s((()=>{var e,t,a,s;const n=I.value.settlementProcessVO.settlementProcessType;return!!(n===le.WORD&&(null==(e=I.value.settlementProcessVO)?void 0:e.settlementProcessList)&&(null==(t=I.value.settlementProcessVO)?void 0:t.settlementProcessList.length)>0||n===le.IMAGE&&(null==(a=I.value.settlementProcessVO)?void 0:a.settlementProcessPicList)&&(null==(s=I.value.settlementProcessVO)?void 0:s.settlementProcessPicList.length)>0)})),j=s((()=>I.value.questionList&&I.value.questionList.length>0)),w=s((()=>{let e=[...b.value];return V.value||(e=e.filter((e=>"tab1"!==e.slotName))),D.value||j.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return t({handleClickTab:()=>{var e;return null==(e=O.value)?void 0:e.handleClickTab}}),(e,t)=>{const a=E,s=v;return n(),u(c(p),{ref_key:"scrollRef",ref:O,class:"tabs",list:c(w),sticky:"",scrollspy:""},C({tab3:o((()=>[T(e.$slots,"form",{},void 0,!0)])),_:2},[c(V)?{name:"tab1",fn:o((()=>[A("div",Ce,[(n(!0),l(i,null,d(c(I).spec||[],((e,t)=>(n(),u(P,{key:t},{fallback:o((()=>[r(s,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:o((()=>[(n(),u(a,{key:t,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),r(c(f))])])),key:"0"}:void 0,c(D)||c(j)?{name:"tab2",fn:o((()=>{var e;return[c(D)?(n(),l(i,{key:0},[(null==(e=c(I).settlementProcessVO)?void 0:e.settlementProcessType)===c(le).WORD?(n(),u(c(y),{key:0,title:"理赔说明"},{default:o((()=>{var e;return[r(c(m),{list:null==(e=c(I).settlementProcessVO)?void 0:e.settlementProcessList},null,8,["list"])]})),_:1})):(n(),l("div",Pe,[(n(),u(P,null,{fallback:o((()=>[r(s,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:o((()=>{var e;return[(n(!0),l(i,null,d((null==(e=c(I).settlementProcessVO)?void 0:e.settlementProcessPicList)||[],((e,t)=>(n(),u(a,{key:t,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),r(c(f))],64)):h("",!0),c(j)?(n(),l(i,{key:1},[r(c(y),{title:"常见问题"},{default:o((()=>[r(c(g),{list:c(I).questionList},null,8,["list"])])),_:1}),r(c(f))],64)):h("",!0)]})),key:"1"}:void 0]),1032,["list"])}}}),[["__scopeId","data-v-cbff6950"]]);const Ee={class:"trial-button-wrap"},Ve={class:"footer-area"},De={class:"price"},je={key:0},we=t({__name:"TrialButton",props:{premium:{default:0},tenantProductDetail:{default:()=>({})},planCode:{default:""},loadingText:{default:""}},emits:["onClick"],setup(e,{emit:t}){const a=e,s=x(""),d=x("");return D([()=>a.premium,()=>a.tenantProductDetail,()=>a.planCode],(([e])=>{var t,n;const{tenantProductInsureVO:l}=a.tenantProductDetail||{};let r={};r=(null==(t=null==l?void 0:l.planList)?void 0:t.length)?((null==l?void 0:l.planList)||[]).find((e=>e.planCode===a.planCode)):null==l?void 0:l.planInsureVO;const{paymentFrequencyValue:o,premiumUnit:i,actualPremiumUnit:c}=(null==(n=null==r?void 0:r.productPremiumVOList)?void 0:n[0])||{};e?(d.value=c,s.value=e&&`${e}`):(d.value=i,s.value=o&&`${o}`)}),{deep:!0,immediate:!0}),(a,u)=>(n(),l("div",Ee,[A("div",Ve,[A("div",De,[e.loadingText?(n(),l("span",je,m(e.loadingText),1)):(n(),l(i,{key:1},[A("span",null,m(c(s)),1),A("span",null,m(c(d)),1)],64))]),r(Oe,{shadow:!1,class:"right",onClick:u[0]||(u[0]=e=>t("onClick"))},{default:o((()=>[T(a.$slots,"default",{},(()=>[p("立即投保")]))])),_:3})])]))}});const Re=e=>(O("data-v-2ecf641a"),e=e(),b(),e),Ne={key:0},Se=[Re((()=>A("div",{class:"__skeleton_short_content__"},[A("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[A("div",{class:"page-internet-product-detail"},[A("div",{class:"info"},[A("div",{class:"van-image banner",style:{width:"100%",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[A("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1676527379&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=tkscLe6oOZYjnRIA%2B7AiMS3bOs0%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),A("div")]),A("div",{class:"guarantee-list"},[A("div",{class:"header"},[A("span",null,[A("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"保障计划")]),A("span",null,[A("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"查看详情")])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"一般医疗保险金")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高300万")])])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"重大疾病医疗保险金")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤质子重离子医疗")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤院外特定药品费用医疗")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),A("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[A("div",{class:"cell-container"},[A("div",{class:"left-part large"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤特定器械耗材费用医疗责任 （适用于女性被保险人）")]),A("div",{class:"divider"}),A("div",{class:"right-part"},[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高100万")])])]),A("div",{class:"show-more"},[A("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"查看更多 "),A("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[A("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),A("div",{class:"feerate-view sk-border"},[A("span",null,[A("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00元/年起")])])]),A("div",{class:"com-divider"}),A("div",{class:"tabs",sticky:"",scrollspy:""},[A("div",null,[A("div",{class:"van-sticky"},[A("div",{class:"van-tabs"},[A("div",{id:"tab-list",class:"tab-list"},[A("a",{class:"tab-title active",title:"产品亮点"},[A("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"产品亮点")]),A("a",{class:"tab-title",title:"理赔说明"},[A("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"理赔说明")]),A("a",{class:"tab-title",title:"我要投保"},[A("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"我要投保")])])])])]),A("div",{class:"tab-content"},[A("div",{id:"tab1"},[A("div",{class:"spec"},[A("div",{class:"van-image detail-img",style:{width:"100%"}},[A("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)))],He={class:"page-internet-product-detail"},Be={class:"info"},Fe={class:"custom-page-form"},Ue=Re((()=>A("div",{class:"form-title"},"请填写投保信息",-1))),qe=Re((()=>A("div",{id:"xinaoDialog"},null,-1)));var ze=e(t({__name:"short",setup(e){j(),_((()=>L((()=>import("./index-61950c4f.js")),["static/js/index-61950c4f.js","static/css/index-ea588f10.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-11a28513.js","static/css/index-19d9cc6b.css","static/js/utils-82788e76.js","static/js/infoCollection-494ff537.js","static/js/trial-58dc58d8.js"])));const t=_((()=>L((()=>import("./index-fe77d1ce.js")),["static/js/index-fe77d1ce.js","static/css/index-c743ae40.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js"]))),a=_((()=>L((()=>import("./index-e3cf2010.js")),["static/js/index-e3cf2010.js","static/css/index-8fb5d6c6.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/infoCollection-494ff537.js","static/js/trial-58dc58d8.js"])));_((()=>L((()=>import("./index-11a28513.js")),["static/js/index-11a28513.js","static/css/index-19d9cc6b.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),_((()=>L((()=>import("./index-2e8a1772.js")),["static/js/index-2e8a1772.js","static/css/index-6733e696.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/infoCollection-494ff537.js","static/js/relativeTime-fde2a46e.js","static/js/validator-5a13dc82.js","static/js/useDicData-488e69ee.js"]))),_((()=>L((()=>import("./index-2d1bbbed.js")),["static/js/index-2d1bbbed.js","static/css/index-a14d73ae.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),_((()=>L((()=>import("./index-3b2f5c1f.js")),["static/js/index-3b2f5c1f.js","static/css/index-b1275e60.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),_((()=>L((()=>import("./index-1e38df42.js")),["static/js/index-1e38df42.js","static/css/index-b9ba3011.css","static/js/index-f03140d4.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"])));const m=w();R();const v=V(),{productCode:f="",tenantId:y,agentCode:g="",agencyCode:I,saleChannelId:O,extraInfo:b,insurerCode:k,preview:C}=v.query;let P={};try{P=JSON.parse(decodeURIComponent(b))}catch(It){}const{openId:T}=P;x();const E=x(),ne=x(),le=x(!1),Oe=x({}),Le=x({}),ke=x(!1),Ce=x(!1),Pe=x(0),Ee=x(!1),Ve=x({}),De=x({}),je=x(!0),Re=x(!0),ze=x(!0),Me=x(""),Ge=x([]);x({});const $e=x({}),Qe=x({}),Je=x([]),We=x(),Ye=x(),Ze=N({holder:{formData:{},schema:[],trialFactorCodes:[],config:{name:{},verificationCode:{sendSMSCode:async({mobile:e},t)=>{const a=await ge(e),{code:s}=a;"10000"===s&&"function"==typeof t&&t()}},certType:{},certNo:{label:"身份证号"},occupation:{dictCode:be(k)}}},insuredList:[{formData:{},schema:[],trialFactorCodes:[],config:{relationToHolder:{label:""},certNo:{label:"身份证号"}}}]});T&&ce({openId:T},(e=>{De.value=e})),x({imgUrl:"",desc:"",title:"",link:window.location.href});const Ke=(e=>{const{tenantId:t,agentCode:a="",agencyCode:s,saleChannelId:n,extraInfo:l,insurerCode:r}=V().query;let o={};try{o=JSON.parse(decodeURIComponent(l))}catch(It){}const i=x({agencyId:s,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"",pageCode:"",iseeBizNo:"",extraInfo:{}},orderCategory:1,saleUserId:a,saleChannelId:n,tenantId:t,venderCode:r,tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:t}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}});return"[object Object]"==={}.toString.call(e)&&Object.assign(i.value,e),i})({extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:P,templateId:(null==P?void 0:P.templateId)||"1",iseeBizNo:""}}),Xe=x({}),et=s((()=>!!C)),tt=x([]),at=async()=>{await K({productCode:f}).then((({data:e,code:t})=>{var a;"10000"===t&&(Ee.value=!0,Le.value=e,$e.value=null==(a=e.productPlanInsureVOList)?void 0:a[0],Je.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),ze.value=!1,ae({productCode:f}).then((({code:e,data:t})=>{var a,s,n,l;if("10000"===e){const{productInsureMaterialVOList:e,productQuestionnaireVOList:r}=t,{basicInfo:{questionnaireType:o},questions:i,questionnaireName:d}=(null==(a=null==r?void 0:r[0])?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};2===o&&(tt.value=[{attachmentName:d,attachmentUri:i,attachmentType:"question"}]),tt.value=[{attachmentName:d,attachmentUri:null==(s=null==i?void 0:i[0])?void 0:s.content,attachmentType:me(String(null==(n=null==i?void 0:i[0])?void 0:n.textType),null==(l=null==i?void 0:i[0])?void 0:l.content)}]}}))},st=s((()=>{if(De.value){const e=[];return Object.keys(De.value).forEach((t=>{e.push(...De.value[t])})),e}return[]})),nt=s((()=>st.value.length>0)),lt=x([]),rt=e=>{$e.value=(Le.value.productPlanInsureVOList||[]).find((t=>t.planCode===e))},ot=()=>{E.value.handleClickTab()("tab3")};x([]);const it=x([]),dt=async()=>{try{await se(((e={},t={},a={})=>{var s;const n={...a},l={tenantId:y,riskList:(null==(s=n.tenantOrderInsuredList[0])?void 0:s.tenantOrderProductList[0].riskVOList)||[],riskPremium:t,productId:e.id};return n.extInfo.iseeBizNo=Me.value,n.productCode=e.productCode,n.commencementTime=n.insuranceStartDate,n.expiryDate=n.insuranceEndDate,n.tenantOrderHolder={...n.tenantOrderHolder,certType:n.tenantOrderHolder.certType||U.CERT,certNo:(n.tenantOrderHolder.certNo||"").toLocaleUpperCase(),extInfo:{...n.tenantOrderHolder.extInfo}},n.tenantOrderInsuredList=n.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||U.CERT,certNo:(e.certNo||"").toLocaleUpperCase(),planCode:$e.value.planCode,extInfo:{...e.extInfo}}))),n.tenantOrderInsuredList[0].tenantOrderProductList[0]={productCode:e.productCode,productName:e.productName,planCode:$e.value.planCode,tenantOrderRiskList:fe(l)},n})(Le.value,Ve.value,Ke.value),(async(e,t)=>{t===Y.JUMP_PAGE&&(null==e?void 0:e.orderNo)&&await(async e=>{try{const{code:t,data:a}=await te({orderNo:e,tenantId:y});"10000"===t&&(a.extInfo={...a.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await se(a))}catch(It){}})(null==e?void 0:e.orderNo)}))}catch(It){}},ct=x(""),ut=x(0),pt=async(e,t,a,s=!0)=>{var n;const{chargePeriod:l,coveragePeriod:r,paymentFrequency:o,insuranceEndDate:i,insuranceStartDate:d}=Xe.value;ct.value="保费试算中...";const c=ve(a).map((e=>({...e,paymentFrequency:o,chargePeriod:l,coveragePeriod:r}))),u={tenantId:y,productCode:t.productCode,insuranceStartDate:d,insuranceEndDate:i,holder:{personVO:{...e.tenantOrderHolder,socialFlag:null==(n=e.tenantOrderHolder.extInfo)?void 0:n.hasSocialInsurance,certType:e.tenantOrderHolder.certType||U.CERT}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance,certType:e.certType||U.CERT},productPlanVOList:[{insurerCode:k,planCode:$e.value.planCode,riskVOList:c}]})))},{code:p,message:m}=await X(u);if("10000"===p){const{code:e,data:t}=await ee(u);if("10000"===e){if(ct.value="",Ke.value.tenantOrderInsuredList[0].tenantOrderProductList=u.insuredVOList[0].productPlanVOList,ut.value=null==t?void 0:t.premium,Ke.value.premium=t.premium,Ke.value.orderAmount=t.premium,Ke.value.orderRealAmount=t.premium,!s){const e={};t.riskPremiumDetailVOList&&t.riskPremiumDetailVOList.length&&t.riskPremiumDetailVOList.forEach((t=>{e[t.riskCode]={premium:t.premium,amount:t.amount}})),Ve.value=e,it.value.length>0?(je.value=!1,v=0,Pe.value=v,Ce.value=!0):tt.value.length>0?ke.value=!0:await dt()}}else ct.value=""}else ct.value="",G(m);var v},mt=()=>{const e=[];return Ge.value.filter((e=>e.value===re.INSURE)).forEach((t=>{e.push(...t.productRiskVoList)})),e},vt=async()=>{if(ut.value)dt();else try{ke.value=!1,Ce.value=!1,We.value&&We.value.validate().then((async()=>{var e;if(nt.value)await pt(Ke.value,Le.value,[...lt.value,...mt()],!1);else{const t=null==(e=Ke.value.tenantOrderHolder)?void 0:e.verificationCode;if(!pe(t))return void G({message:"请输入正确的验证码"});const{code:a,data:s}=await Ie(Ke.value.tenantOrderHolder.mobile,t);"10000"===a&&await pt(Ke.value,Le.value,[...lt.value,...mt()],!1)}})).catch((()=>{const e=document.querySelector(".form-title");e&&e.scrollIntoView()}))}catch(e){}},ft=e=>{"allFalse"===e?(ke.value=!1,dt()):$.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{ke.value=!1}))},ht=()=>{ke.value=!1,Ce.value=!1,je.value=!0};D((()=>Ke.value.tenantOrderInsuredList[0].relationToHolder),(()=>{Ge.value&&Ge.value.forEach((e=>{e.value=re.UN_INSURE})),Re.value=!1,S((()=>{const{certType:e,extInfo:t}=Ke.value.tenantOrderInsuredList[0];t&&!t.hasSocialInsurance&&(Ke.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=de.HAS),Re.value=!0}))}),{deep:!0,immediate:!0}),D([()=>Ze.holder.formData,()=>Ze.insuredList],(([e,t])=>{Object.assign(Ke.value,(({holder:e,insuredList:t=[]})=>{const a=["birthday","certEndDate","certEndType","certNo","certStartDate","verificationCode","certType","email","gender","mobile","name","id","insuredBeneficiaryType","relationToHolder","relationToMainInsured"],s=e=>{const t={extInfo:{}};return"[object Object]"==={}.toString.call(e)&&Object.keys(e).forEach((s=>{a.includes(s)?t[s]=e[s]:t.extInfo[s]=e[s]})),t};return{tenantOrderHolder:s(e),tenantOrderInsuredList:(t||[]).map((e=>s(e)))}})({holder:e,insuredList:t.map((e=>e.formData))}))}),{deep:!0});const yt=()=>{const{name:e,birthday:t,gender:a,certType:s,extInfo:{hasSocialInsurance:n}}=Ke.value.tenantOrderInsuredList[0];return!!(t&&a&&Ke.value.paymentFrequency&&e&&he(e)&&n)},gt=()=>{yt()&&(ct.value="保费试算中...")};return D([()=>$e.value,()=>Xe.value.paymentFrequency],(()=>{gt()}),{deep:!0,immediate:!0}),D((()=>[...Ze.holder.trialFactorCodes.map((e=>Ze.holder.formData[e])),...Ze.insuredList.reduce(((e,t,a)=>(e.push(...t.trialFactorCodes.map((e=>Ze.insuredList[a].formData[e]))),e)),[])]),((...e)=>{}),{deep:!0,immediate:!0}),D([()=>Ke.value.tenantOrderInsuredList[0].birthday,()=>Ke.value.tenantOrderInsuredList[0].name,()=>Ke.value.tenantOrderInsuredList[0].gender,()=>Ke.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance,()=>Ke.value.activePlanCode,()=>Ke.value.paymentFrequency,()=>Ke.value.insurancePeriodValue,()=>Ge.value],Z((()=>{if(yt()){if(et.value)return;pt(Ke.value,Le.value,[...lt.value,...mt()])}else gt()}),500),{deep:!0}),D((()=>Ze.holder.formData),((...e)=>{Ze.insuredList.forEach(((e,t)=>{const{formData:a,schema:s}=e||{};"1"===a.relationToHolder&&Object.assign(e.formData,Ze.holder.formData)}))}),{deep:!0,immediate:!0}),D((()=>$e.value),(()=>{let{productFactor:e}=$e.value;const{oilPackageProductVOList:t,planCode:a,insureProductRiskVOList:s}=$e.value;nt.value&&e[1]&&(e=e[1].filter((e=>"verificationCode"!==e.code))),Xe.value.planCode=a,lt.value=s,Qe.value=(s||[]).find((e=>e.mainRiskFlag===H.YES)),Ge.value=(t||[]).map((e=>({...e,value:re.UN_INSURE})));const[n,l,r]=Ae(e);Ze.holder={...Ze.holder,...n},Ze.insuredList[0]={...Ze.insuredList[0],...l}}),{deep:!0,immediate:!0}),D((()=>Ze.insuredList.map(((e,t)=>Ze.insuredList[t].formData.relationToHolder))),((e,t)=>{Ze.insuredList.forEach(((e,t)=>{const{formData:a,schema:s,config:n}=e||{},l="1"===a.relationToHolder,r="3"===a.relationToHolder;n.certNo.label="身份证号"+(r?"(户口簿)":""),e.schema.forEach((e=>{e.relationToHolder=a.relationToHolder,e.hidden=!e.isSelfInsuredNeed&&l})),l?Object.assign(e.formData,{...Ze.insuredList[t].formData,...Ze.holder.formData}):Object.assign(e.formData,{...Object.keys(e.formData).reduce(((e,t)=>(e[t]="",e)),{}),relationToHolder:a.relationToHolder})}))}),{immediate:!0,deep:!0}),S((()=>{Q(ne,(([{isIntersecting:e}],t)=>{le.value=!e}))})),B((()=>{var e;const t=F.get(oe);if(t){const{tenantOrderHolder:a,tenantOrderInsuredList:s}=t;if(a&&(Ke.value.tenantOrderHolder={...a,certType:a.certType||U.CERT}),Array(s)&&s[0]){const t=s[0]||{};if(Ke.value.activePlanCode=t.planCode,t.tenantOrderProductListtenantOrderProductList&&t.tenantOrderProductList[0]&&t.tenantOrderProductList[0].tenantOrderRiskList){const a=null==(e=t.tenantOrderProductList[0].tenantOrderRiskList)?void 0:e.find((e=>"1"===String(e.riskType)));a&&(Ke.value.paymentFrequency=(null==a?void 0:a.paymentFrequency)?String(null==a?void 0:a.paymentFrequency):ie.SINGLE)}}}})),q((()=>{ze.value=!0,at(),setTimeout((async()=>{Me.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),z((()=>{F.remove(oe)})),(e,s)=>{const v=J,f=W;return n(),l(i,null,[c(ze)?(n(),l("div",Ne,Se)):(n(),u(f,{key:1,"data-skeleton-root":"SHORT","theme-vars":c(m)},{default:o((()=>{var e,t,s,m,f,y;return[A("div",He,[A("div",Be,[r(ye,{"data-skeleton-type":"img",url:null==(t=null==(e=c(Oe))?void 0:e.tenantProductInsureVO)?void 0:t.banner[0]},null,8,["url"]),(null==(m=null==(s=c(Oe))?void 0:s.tenantProductInsureVO)?void 0:m.bannerMove)?(n(),u(ye,{key:0,url:null==(y=null==(f=c(Oe))?void 0:f.tenantProductInsureVO)?void 0:y.bannerMove[0],onClick:ot},null,8,["url"])):h("",!0),A("div",{ref_key:"observeRef",ref:ne},null,512)]),(n(),u(Te,{key:0,ref:"tenantProductDetailScrollRef","data-source":c(Oe).tenantProductInsureVO},{form:o((()=>[A("div",Fe,[Ue,r(c(_e),{ref_key:"holderFormRef",ref:We,title:"本人信息（投保人）",model:c(Ze).holder.formData,schema:c(Ze).holder.schema,config:c(Ze).holder.config},null,8,["model","schema","config"]),(n(!0),l(i,null,d(c(Ze).insuredList,((e,t)=>(n(),u(c(_e),{ref_for:!0,ref_key:"insuredFormRef",ref:Ye,key:t,title:"为谁投保（被保人）",model:c(Ze).insuredList[t].formData,schema:e.schema,config:e.config},null,8,["model","schema","config"])))),128))]),r(c(a),{"form-info":c(Xe),"risk-info":c(Qe),"tenant-product-detail":c(Oe),"plan-list":c(Je),"premium-info":{premium:c(ut),premiumLoadingText:c(ct)},onUpdateActivePlan:rt},null,8,["form-info","risk-info","tenant-product-detail","plan-list","premium-info"]),c(Ge).length>0?(n(),u(xe,{key:0,"package-product-list":c(Ge)},null,8,["package-product-list"])):h("",!0)])),_:1},8,["data-source"])),r(v),r(v),c(le)?(n(),u(we,{key:1,premium:c(ut),"loading-text":c(ct),"plan-code":c($e).planCode,"tenant-product-detail":{},onClick:vt},{default:o((()=>[p("立即投保")])),_:1},8,["premium","loading-text","plan-code"])):h("",!0)]),c(Ee)?(n(),u(ue,{key:0,"product-detail":c(Oe)},null,8,["product-detail"])):h("",!0),qe]})),_:1},8,["theme-vars"])),r(c(t),{show:c(ke),"onUpdate:show":s[0]||(s[0]=e=>M(ke)?ke.value=e:null),"content-list":c(tt),"active-index":0,onOnConfirmHealth:ft,onOnCloseHealthByMask:ht},null,8,["show","content-list"])],64)}}}),[["__scopeId","data-v-2ecf641a"]]);export{ze as default};

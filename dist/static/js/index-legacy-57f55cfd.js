!function(){var e=document.createElement("style");e.innerHTML=".page-salesman-inform .van-cell[data-v-2fc28dca]{display:flex;align-items:center;padding:.4rem 0}.page-salesman-inform .van-cell[data-v-2fc28dca] .van-cell__title{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:var(--zaui-aide-text-stress, #0d6efe);line-height:.56rem}.page-salesman-inform .van-cell[data-v-2fc28dca] .van-cell__value{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#99a9c0;line-height:.56rem}.page-salesman-inform .van-cell .active[data-v-2fc28dca],.page-salesman-inform[data-v-2fc28dca] .is-active .van-cell__value span{color:#0d6efe}.page-salesman-inform .resign[data-v-2fc28dca]{font-size:.37333rem;color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .date[data-v-2fc28dca]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-salesman-inform .inform-file[data-v-2fc28dca]{display:flex;position:absolute;bottom:2.33333rem;padding:0 .4rem}.page-salesman-inform .inform-file .tips[data-v-2fc28dca]{margin-left:.29333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#393d46;line-height:.53333rem}.page-salesman-inform .inform-file .tips>span[data-v-2fc28dca]{color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .inform-file .next-btn[data-v-2fc28dca]{padding:.4rem 0}.page-salesman-inform .inform-file .next-btn .van-button[data-v-2fc28dca]{border-radius:.10667rem}\n",document.head.appendChild(e),System.register(["./vendor-legacy-b51aec28.js","./index-legacy-73775f66.js","./inform-legacy-8068f0b6.js","./useStorage-legacy-9da58963.js","./verify-legacy-502ceab6.js","./notice-legacy-c9c5a559.js"],(function(e){"use strict";var a,t,n,i,o,l,r,c,s,d,u,f,g,v,p,m,y,h,C,T,b,x,_,k,j,S,D,I,L,P,q,z,N,A,E,F;return{setters:[function(e){a=e.g,t=e.a9,n=e.O,i=e.E,o=e.d,l=e.M,r=e.h,c=e.r,s=e.j,d=e.k,u=e.m,f=e.p,g=e.n,v=e.G,p=e.A,m=e.F,y=e.z,h=e.J,C=e.C,T=e.T,b=e.L},function(e){x=e._,_=e.l,k=e.r,j=e.R,S=e.T,D=e.n,I=e.P,L=e.$},function(e){P=e.l,q=e.g},function(e){z=e.s},function(e){N=e.s},function(e){A=e.A,E=e.d,F=e.e}],execute:function(){const R={class:"date"},M={class:"inform-file"},w={class:"tips"},G=C(" 您的签名将被用于"),Y=C("文件 "),B={class:"footer-button"},O=C("下一步"),U=a({setup(e){const a=t(),C=n(),{productCode:x="MMBBSF",agentCode:U="65434444",tenantId:V="9991000007",agencyCode:$="3311222",insurerCode:H="zhongan",productCategory:J=1,templateId:W=1,orderNo:K="2022080217103534947"}=C.query,Q=i(null),X=i(!1),Z=o().format("YYYY-MM-DD"),ee=i(""),ae=i(),te=()=>{var e;null===(e=Q.value)||void 0===e||e.clear()},ne=l({noticeType:"",materialSource:"",noticeList:[],pageData:{}});r((()=>{k({orderNo:K,saleUserId:U,tenantId:V}).then((({code:e,data:a})=>{"10000"===e&&(Object.assign(ne.pageData,a),a.tenantOrderAttachmentList.forEach((e=>{e.category===j.ELECTRIC_SIGN&&e.objectType===S.AGENT&&Q.value.setDataURL(e.fileBase64)})))})),P({insurerCode:H,orderNo:K,productCategory:J,tenantId:V,noticeType:A,objectType:E}).then((({code:e,data:a})=>{"10000"===e&&(ne.noticeList=[...ne.noticeList,...a])}))}));const ie=()=>{var e,t;if(!(ne.noticeList&&ne.noticeList.every((e=>1===e.isDone))))return void T("请完成所有告知进行下一步");if(null!==(e=Q.value)&&void 0!==e&&e.isEmpty())return void T("请完成代理人签字进行下一步");if(!X.value)return void T("请勾选同意签名");const n=null===(t=Q.value)||void 0===t?void 0:t.save();N("AGENT",n,ne.pageData.id,V).then((e=>{e&&D({...ne.pageData,extInfo:{...ne.pageData.extInfo,templateId:W,pageCode:"salesNotice"},venderCode:H}).then((({code:e,data:t})=>{"10000"===e&&"jumpToPage"===t.pageAction.pageAction&&a.push({path:I[t.pageAction.data.nextPageCode],query:{...C.query}})}))}))};return(e,t)=>{const n=c("van-cell"),i=c("ProSign"),o=c("van-checkbox"),l=c("van-button"),r=c("ProPageWrap");return s(),d(r,{class:"page-salesman-inform"},{default:u((()=>[f(_,{title:"营销员告知书"},{default:u((()=>[(s(!0),g(m,null,v(p(ne).noticeList,(e=>(s(),d(n,{key:e.id,class:b({"is-active":2===e.isDone}),title:`《${e.title}》`,"is-link":"",value:""+(1===e.isDone?"已完成":"去完成"),onClick:t=>{return n=e,z.set("questionData",n),void a.push({path:"/healthNotice",query:{questionnaireType:n.questionnaireType,...C.query}});var n}},null,8,["class","title","value","onClick"])))),128))])),_:1}),f(_,{title:"营销员签字","show-divider":!1,"show-line":!1},{extra:u((()=>[y("div",{class:"resign",onClick:te},"重签")])),default:u((()=>[f(i,{ref_key:"agentSignRef",ref:Q,selector:"sign2"},null,512),y("div",R,"签名日期： "+h(p(Z)),1)])),_:1}),y("div",M,[f(o,{modelValue:X.value,"onUpdate:modelValue":t[0]||(t[0]=e=>X.value=e),shape:"square"},null,8,["modelValue"]),y("p",w,[G,(s(!0),g(m,null,v(p(ne).noticeList,((e,a)=>(s(),d(L,{key:a,class:"file",title:`《${e.title}》`,content:ae.value,type:ee.value,onClick:a=>(e=>{const{id:a,objectType:t}=e,n={1:"pdf",2:"richText",3:"link"};q({insurerCode:H,id:a,objectType:t,productCategory:J,orderNo:K,tenantId:V}).then((({code:e,data:a})=>{"10000"===e&&((null==a?void 0:a[0].questionType)===F?(ee.value="question",ae.value=a):(1===(null==a?void 0:a[0].textType)&&null!=a&&a[0].content.includes("png")?ee.value="picture":ee.value=n[null==a?void 0:a[0].textType],ae.value=null==a?void 0:a[0].content))}))})(e)},null,8,["title","content","type","onClick"])))),128)),Y])]),y("div",B,[f(l,{type:"primary",block:"",onClick:ie},{default:u((()=>[O])),_:1})])])),_:1})}}});e("default",x(U,[["__scopeId","data-v-2fc28dca"]]))}}}))}();

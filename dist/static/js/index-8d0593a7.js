import{h as U,aa as X,P as Z,G as L,ab as oe,r as _,k as n,m as g,n as r,s as m,p as b,H as M,A as x,L as H,F as G,v as P,ac as se,B as p,E as D,T as re,ag as ae,I as ue,ad as K,ae as le,af as ie,z as F,j as ee,N as ce}from"./vendor-4d9de129.js";import{_ as J,P as de,a as pe,g as te}from"./index-b853de44.js";import{s as _e,g as me}from"./inform-aae36a3c.js";import{s as fe}from"./useStorage-e8d61524.js";import{N as ve}from"./notice-a4a1c218.js";const ge={class:"problem"},ye={class:"footer-button"},Ce=D("\u63D0\u4EA4"),he=U({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(T,{emit:f}){const u=T;X();const e=Z(),s=L([]),{questionnaireType:l}=e.query,{orderNo:y="2022021815432987130620",productCode:N="CQ75CQ76",templateId:V=1,agentCode:v="65434444",orderId:S=13005,tenantId:k=9991000007}=e.query,o={1:"\u6295\u4FDD\u4EBA",2:"\u88AB\u4FDD\u4EBA",3:"\u4EE3\u7406\u4EBA"},c=L([]),q=C=>{s.value[C].toggle()},$=C=>C?JSON.parse(C).map(t=>({title:t.value,value:t.uid})):[],I=()=>{(c.value||[]).filter(t=>{var d;return t.singleAnswer===0||t.singleAnswer||((d=t.multipleChoose)==null?void 0:d.length)}).length!==c.value.length?re("\u8BF7\u5B8C\u6210\u6240\u6709\u9898\u76EE\u8FDB\u884C\u4E0B\u4E00\u6B65"):f("onSubmitCurrentStatus",1,JSON.stringify(c.value))},w=C=>JSON.parse(C),B=()=>{te({orderNo:y,saleUserId:v,tenantId:k}).then(({code:C,data:t})=>{if(C==="10000"){const d=t.tenantOrderNoticeList.findIndex(a=>a.isDone===1&&+a.objectId===u.currentPageInfo[0].questionnaireId);d!==-1?c.value=w(t.tenantOrderNoticeList[d].content):c.value=u.currentPageInfo.map(a=>a.questionType===2?{multipleChoose:[],...a}:{singleAnswer:a.questionType===3?0:"",...a})}})};return oe(()=>{s.value=[],B()}),(C,t)=>{const d=_("van-radio"),a=_("van-cell"),E=_("van-cell-group"),O=_("van-radio-group"),j=_("van-checkbox"),Q=_("van-checkbox-group"),R=_("van-field"),Y=_("van-button"),ne=_("ProPageWrap");return n(),g(ne,{class:"com-question"},{default:r(()=>[m(pe,{title:`${o[p(l)]}\u5065\u5EB7\u544A\u77E5\u4E66`},{default:r(()=>[(n(!0),b(G,null,M(c.value,(i,z)=>(n(),b("div",{key:z,class:"question-item"},[x("div",ge,H(z+1)+". "+H(i.title),1),i.questionType===1?(n(),g(O,{key:0,modelValue:i.singleAnswer,"onUpdate:modelValue":h=>i.singleAnswer=h},{default:r(()=>[m(E,{inset:""},{default:r(()=>[(n(!0),b(G,null,M($(i.options),(h,A)=>(n(),g(a,{key:A,title:h.title,clickable:"",onClick:W=>i.singleAnswer=A},{"right-icon":r(()=>[m(d,{name:A},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):P("",!0),i.questionType===2?(n(),g(Q,{key:1,modelValue:i.multipleChoose,"onUpdate:modelValue":h=>i.multipleChoose=h},{default:r(()=>[m(E,{inset:""},{default:r(()=>[(n(!0),b(G,null,M($(i.options),(h,A)=>(n(),g(a,{key:h.uid,clickable:"",title:h.title,onClick:W=>q(A)},{"right-icon":r(()=>[m(j,{ref_for:!0,ref:W=>s.value[A]=W,shape:"square",name:A,onClick:t[0]||(t[0]=se(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):P("",!0),i.questionType===3?(n(),g(de,{key:2,modelValue:i.singleAnswer,"onUpdate:modelValue":h=>i.singleAnswer=h,options:[{label:"\u662F",value:"Y"},{label:"\u5426",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):P("",!0),i.questionType===4?(n(),g(E,{key:3,inset:""},{default:r(()=>[m(R,{modelValue:i.singleAnswer,"onUpdate:modelValue":h=>i.singleAnswer=h,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):P("",!0)]))),128))]),_:1},8,["title"]),x("div",ye,[m(Y,{type:"primary",block:"",onClick:I},{default:r(()=>[Ce]),_:1})])]),_:1})}}});var be=J(he,[["__scopeId","data-v-43eb6cf6"]]);const Ee={class:"com-document"},Se={class:"title"},ke={class:"content"},Ie={class:"footer-button"},Te=D("\u4E86\u89E3\u5E76\u7EE7\u7EED"),$e=U({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(T,{emit:f}){const u=T;return(e,s)=>{const l=_("van-button"),y=_("ProPageWrap"),N=ae("dompurify-html");return n(),g(y,null,{default:r(()=>{var V,v;return[x("div",Ee,[x("div",Se,H((V=u.currentPageInfo[0])==null?void 0:V.title),1),ue(x("div",ke,null,512),[[N,(v=u.currentPageInfo[0])==null?void 0:v.content]]),x("div",Ie,[m(l,{type:"primary",onClick:s[0]||(s[0]=S=>f("onSubmitCurrentStatus",1))},{default:r(()=>[Te]),_:1})])])]}),_:1})}}});var we=J($e,[["__scopeId","data-v-6e53a5c6"]]);const Pe={class:"com-pdf-viewer"},De=["id","isee_pdf"],Ae={key:2,class:"footer-button"},xe=D("\u90E8\u5206\u4E3A\u662F"),Ve=D("\u4EE5\u4E0A\u7686\u5426"),qe={key:3,class:"footer-button"},Ne=D("\u4E86\u89E3\u5E76\u7EE7\u7EED"),Be=U({props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(T,{emit:f}){const u=T;K.exports.GlobalWorkerOptions.workerSrc=le;const e=ie(),s=L(!1),l=L(!0),y=F(()=>["png","jpg","jpeg"].some(v=>u.url.includes(v))),N=()=>{const v=document.getElementById(e);if(v.hasChildNodes()){l.value=!1;return}K.exports.getDocument({url:u.url}).promise.then(k=>{const o=k.numPages;for(let c=1;c<=o;c++)k.getPage(c).then(q=>{const $=q.getViewport({scale:1}),I=document.createElement("canvas"),w=I.getContext("2d");I.width=$.width,I.height=$.height,I.style.width="100%",v.append(I);const B={canvasContext:w,viewport:$};q.render(B),l.value=!1})})},V=async()=>{s.value=!0,setTimeout(()=>{N()},0)};return ee(()=>{V()}),(v,S)=>{const k=_("van-image"),o=_("van-button");return n(),b("div",Pe,[p(y)?(n(),g(k,{key:0,width:"100%",height:"80vh",fit:"contain",src:u.url},null,8,["src"])):(n(),b("div",{key:1,id:p(e),isee_pdf:v.pdfUrl,class:"pdf-wapper"},null,8,De)),u.materialType==="question"?(n(),b("div",Ae,[m(o,{plain:"",type:"primary",onClick:S[0]||(S[0]=c=>f("onSubmitCurrentStatus",2))},{default:r(()=>[xe]),_:1}),m(o,{type:"primary",onClick:S[1]||(S[1]=c=>f("onSubmitCurrentStatus",1))},{default:r(()=>[Ve]),_:1})])):(n(),b("div",qe,[m(o,{type:"primary",onClick:S[2]||(S[2]=c=>f("onSubmitCurrentStatus",1))},{default:r(()=>[Ne]),_:1})]))])}}});var Oe=J(Be,[["__scopeId","data-v-a4e458ca"]]);const Fe={class:"iframe-wrap"},Ue=["src"],je={key:0,class:"footer-button"},Qe=D("\u90E8\u5206\u4E3A\u662F"),Le=D("\u4EE5\u4E0A\u7686\u5426"),Je={key:1,class:"footer-button"},Re=D("\u4E86\u89E3\u5E76\u7EE7\u7EED"),We=U({props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(T,{emit:f}){const u=T;return(e,s)=>{const l=_("van-button");return n(),b("div",Fe,[x("iframe",{src:u.url,frameborder:"0"},null,8,Ue),u.materialType==="question"?(n(),b("div",je,[m(l,{plain:"",type:"primary",onClick:s[0]||(s[0]=y=>f("onSubmitCurrentStatus",2))},{default:r(()=>[Qe]),_:1}),m(l,{type:"primary",onClick:s[1]||(s[1]=y=>f("onSubmitCurrentStatus",1))},{default:r(()=>[Le]),_:1})])):(n(),b("div",Je,[m(l,{type:"primary",onClick:s[2]||(s[2]=y=>f("onSubmitCurrentStatus",1))},{default:r(()=>[Re]),_:1})]))])}}});var Me=J(We,[["__scopeId","data-v-1fc4d3ec"]]);const Ge={class:"com-health-notice"},Ze=U({setup(T){const f=X(),u=Z(),e=fe.get("questionData"),{materialType:s="question",questionnaireType:l="1",orderNo:y="2022021815432987130620",productCode:N="CQ75CQ76",templateId:V=1,agentCode:v="65434444",orderId:S=13005,tenantId:k=9991000007}=u.query&&u.query,o=ce({pageData:{},currentQuestionInfo:[]}),c=F(()=>l==="2"),q=F(()=>{var t;return l==="1"&&([1].includes((t=o.currentQuestionInfo[0])==null?void 0:t.textType)||(e==null?void 0:e.materialSource)===1)}),$=F(()=>{var t;return l==="1"&&([2].includes((t=o.currentQuestionInfo[0])==null?void 0:t.textType)||(e==null?void 0:e.materialSource)===2)}),I=F(()=>{var t;return l==="1"&&([3].includes((t=o.currentQuestionInfo[0])==null?void 0:t.textType)||(e==null?void 0:e.materialSource)===3)}),w=(t,d)=>{var Q;const{id:a,objectType:E,noticeObject:O,materialSource:j}=e;_e({content:d||((Q=o.currentQuestionInfo[0])==null?void 0:Q.content),contentType:l||"3",isDone:t,noticeType:ve[E]||"99",objectId:a,objectType:E||O,orderId:o.pageData.id,orderNo:y,tenantId:k}).then(({code:R,data:Y})=>{R==="10000"&&f.go(-1)})},B=()=>{te({orderNo:y,saleUserId:v,tenantId:k}).then(({code:t,data:d})=>{t==="10000"&&Object.assign(o.pageData,d)})},C=()=>{const{insurerCode:t,id:d,objectType:a,productCategory:E}=e;me({insurerCode:t,id:d,objectType:a,productCategory:E,orderNo:y,tenantId:k}).then(({code:O,data:j})=>{O==="10000"&&(o.currentQuestionInfo=j)})};return ee(()=>{B(),e!=null&&e.materialSource?(o.currentQuestionInfo=[{...e==null?void 0:e.materialSource,title:e==null?void 0:e.materialName,content:e==null?void 0:e.materialContent}],console.log("===>",o.currentQuestionInfo)):C()}),(t,d)=>{var a,E;return n(),b("div",Ge,[p(c)?(n(),g(be,{key:0,"current-page-info":p(o).currentQuestionInfo,onOnSubmitCurrentStatus:w},null,8,["current-page-info"])):P("",!0),p($)?(n(),g(we,{key:1,"material-type":p(s),"current-page-info":p(o).currentQuestionInfo,onOnSubmitCurrentStatus:w},null,8,["material-type","current-page-info"])):P("",!0),p(q)?(n(),g(Oe,{key:2,"material-type":p(s),url:(a=p(o).currentQuestionInfo[0])==null?void 0:a.content,onOnSubmitCurrentStatus:w},null,8,["material-type","url"])):P("",!0),p(I)?(n(),g(Me,{key:3,"material-type":p(s),url:(E=p(o).currentQuestionInfo[0])==null?void 0:E.content,onOnSubmitCurrentStatus:w},null,8,["material-type","url"])):P("",!0)])}}});export{Ze as default};

import{d as a,u as e,r as s,D as t,a1 as o,av as r,bz as n,b as c,g as d,w as l,f as i,c as u,h as p,i as m,e as f}from"./index-30e705a3.js";import{u as v,b as h,c as w}from"./core-afa6fc45.js";import{u as g}from"./useThread-c502137a.js";import"./pdfh5-008ca364.js";const b={key:0,class:"wait-loading"},y={key:1,class:"result-view"},x={class:"content-box"},k=m("div",{class:"content"},"开通成功，正在为您生成保单...",-1),I=m("div",{class:"tip"},"请勿返回或退出",-1),_=a({__name:"payCheck",setup(a){const _=e().query,j=s(!1),N=s(!1),C=s(""),T=s(!0);let $;const D=()=>{h({tenantId:_.tenantId,orderNo:_.orderNo}).then((a=>{const{code:e,data:s}=a;"10000"===e&&(T.value=!1);const t=s.redirectUrl||`/baseInsurance/orderDetail?orderNo=${_.businessTradeNo}&tenantId=${_.tenantId}&productCode=${_.productCode}`;1==+s.status?(N.value=!0,$.stop(),window.location.href=t):1==+_.from_wxpay?j.value=!0:w(_)})).catch()};return $=g({start:()=>{console.log("开始轮询"),D()},stop:()=>{console.log("结束轮询"),N.value||t.alert({title:"提示",message:"未查到支付成功状态，请检查是否已支付完成",confirmButtonText:"好的，我知道了"}).then((()=>{window.location.href=C.value}))},time:2e3,number:5}),v(),o((()=>{1==+_.from_wxpay?(j.value=!0,$.run()):D()})),(a,e)=>{const s=r,t=n("ProPageWrap");return c(),d(t,{"main-class":"page-pay-check"},{default:l((()=>[i(T)&&!i(j)?(c(),u("div",b,"加载中，请稍候...")):p("",!0),!i(T)&&i(j)?(c(),u("div",y,[m("div",x,[f(s,{name:"checked",class:"large-icon"}),k,I])])):p("",!0)])),_:1})}}});export{_ as default};

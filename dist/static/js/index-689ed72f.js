import{d as e,L as a,M as t,a as n,u as l,r as i,G as o,N as d,Y as s,O as r,Q as u,R as c,b as v,c as p,f as _,e as m,U as f,i as I,g as h,h as C,w as O,j as g,V as y,W as b,m as L,X as N}from"./index-4c38afe3.js";import{g as k,i as A}from"./trial-ef285f68.js";import{a as S,q as T}from"./product-e2a78b72.js";import{u as j}from"./useAttachment-20a2ef5f.js";import{g as E}from"./utils-6ffb83bb.js";import{q as P}from"./createProposal-7c857b61.js";import{u as R}from"./useOrder-e4179dff.js";import"./infoCollection-abd360f0.js";import"./trial-1f292769.js";import"./merge-c5599fa4.js";import"./keysIn-a287568b.js";import"./isObjectLike-a9798079.js";const w={key:0},V={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},x={class:"info"},F={key:1,class:"preview-placeholder"},B=I("br",null,null,-1),D=I("div",{id:"insureButton"},null,-1),U=I("div",{id:"xinaoDialog"},null,-1),q=e({name:"InsuranceLong"}),G=e({...q,setup(e){const q=a((()=>t((()=>import("./index-5e6429d0.js")),["static/js/index-5e6429d0.js","static/css/index-c23f272e.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css"]))),G=a((()=>t((()=>import("./index-19200ada.js")),["static/js/index-19200ada.js","static/css/index-79104747.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css","static/js/infoCollection-abd360f0.js"]))),M=a((()=>t((()=>import("./index-e0c4fe60.js")),["static/js/index-e0c4fe60.js","static/css/index-491cbbd3.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css"]))),z=a((()=>t((()=>import("./index-546cf625.js")),["static/js/index-546cf625.js","static/css/index-50785b3e.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css","static/js/debounce-6981b306.js","static/js/isObjectLike-a9798079.js","static/js/cloneDeep-96676b66.js","static/js/keysIn-a287568b.js","static/js/_getTag-7f09858e.js","static/js/TrialButton-2c725252.js","static/css/TrialButton-ca460c56.css","static/js/index-9eafa7e8.js","static/css/index-bbfdd7ec.css","static/js/trial-ef285f68.js","static/js/config-98e8d477.js","static/js/isNaN-beb28144.js","static/js/useOrder-e4179dff.js","static/js/merge-c5599fa4.js"]))),Q=a((()=>t((()=>import("./index-fa38c9b3.js")),["static/js/index-fa38c9b3.js","static/css/index-ebb5282b.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css"]))),W=a((()=>t((()=>import("./Video-6f4e180a.js")),["static/js/Video-6f4e180a.js","static/css/Video-20262b6f.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css"]))),X=a((()=>t((()=>import("./index-ddc7213a.js")),["static/js/index-ddc7213a.js","static/css/index-51c81f95.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css","static/js/utils-6ffb83bb.js","static/js/infoCollection-abd360f0.js","static/js/trial-1f292769.js"]))),Y=a((()=>t((()=>import("./index-afbbd393.js")),["static/js/index-afbbd393.js","static/css/index-889d75b4.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css","static/js/product-e2a78b72.js","static/js/useThread-637a02aa.js"]))),J=a((()=>t((()=>import("./index-3f717ae9.js")),["static/js/index-3f717ae9.js","static/css/index-fa4edf2a.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css","static/js/theme-94cf7d00.js","static/js/index-9eafa7e8.js","static/css/index-bbfdd7ec.css","static/js/utils-6ffb83bb.js","static/js/infoCollection-abd360f0.js","static/js/trial-1f292769.js"]))),$=a((()=>t((()=>import("./index-21363442.js")),["static/js/index-21363442.js","static/css/index-eabeb59f.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css"]))),H=a((()=>t((()=>import("./index-76a47cf3.js")),["static/js/index-76a47cf3.js","static/css/index-cb73c937.css","static/js/index-4c38afe3.js","static/css/index-22fe1589.css"])));n();const K=l(),{productCode:Z="",tenantId:ee,agentCode:ae="",agencyCode:te,saleChannelId:ne,proposalId:le,extraInfo:ie,orderNo:oe,insurerCode:de,preview:se,trialPreview:re}=K.query;let ue={};try{ue=JSON.parse(decodeURIComponent(ie))}catch(We){}const{openId:ce,proposalInsuredId:ve,saTenantId:pe=""}=ue;i();const _e=i(),me=i(),fe=i(!1),Ie=i({}),he=i({}),Ce=i(!1),Oe=i(0),ge=i(!1);i({});const ye=i(!0);i(!0);const be=i(!0),Le=i(""),Ne=i({}),ke=i({}),Ae=i([]),Se=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),Te=i({});o((()=>!!se||!!re));const je=o((()=>!!re)),Ee=i(),Pe=()=>{Ee.value.open()},Re=i([]),we=i(),Ve=i(),xe=R(),Fe=i(!1),Be=async()=>{!je.value&&S({productCode:Z,tenantId:ee}).then((({data:e,code:a})=>{if("10000"===a){Ie.value=e;const{wxShareConfig:a,showWXShare:t,title:n,desc:l,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};t?Object.assign(Se.value,{...a,imgUrl:a.image,isShare:t}):Object.assign(Se.value,{title:n,desc:l,imgUrl:i,isShare:t}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&b(e.BASIC_INFO.themeType)}})),oe||le||(Fe.value=!0),oe&&k({orderNo:oe,tenantId:ee}).then((({code:e,data:a})=>{"10000"===e&&(a.productCode=Z,Ve.value=a,Fe.value=!0)})),le&&P({id:le,tenantId:pe||ee}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:t}=a;Ve.value=Object.assign(xe.value,{productCode:Z,productName:"",renewFlag:"",holder:e,tenantId:ee,insuredList:(t||[]).filter((e=>e.id===+ve)).map((e=>({...e,productList:e.productList.filter((e=>e.productCode===Z))})))}),Fe.value=!0}})),await A({productCode:Z,isTenant:!1}).then((({data:e,code:a})=>{var t;"10000"===a&&(fe.value=!0,ge.value=!0,he.value=e,Ne.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],Ae.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),be.value=!1,T({productCode:Z}).then((({code:e,data:a})=>{var t,n,l,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:o}=a;we.value=e||[];const{basicInfo:{questionnaireType:d},questions:s,questionnaireName:r}=(null==(t=null==o?void 0:o[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};2===d&&(Re.value=[{attachmentName:r,attachmentUri:s,attachmentType:"question"}]),Re.value=[{attachmentName:r,attachmentUri:null==(n=null==s?void 0:s[0])?void 0:n.content,attachmentType:E(String(null==(l=null==s?void 0:s[0])?void 0:l.textType),null==(i=null==s?void 0:s[0])?void 0:i.content)}]}}))};d((()=>Te.value.planCode),(e=>{Ne.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const De=()=>{_e.value.handleClickTab()("insureButton")};i(""),i(0);const{fileList:Ue,mustReadFileCount:qe,popupFileList:Ge}=j(Ne,we),Me=e=>{Ne.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},ze=()=>{Ce.value=!1,ye.value=!0},Qe=()=>{Ce.value=!1,ye.value=!0};return d((()=>Ne.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:t}=Ne.value;Te.value.planCode=e,ke.value=(t||[]).find((e=>e.mainRiskFlag===s.YES))}),{deep:!0,immediate:!0}),r((()=>{u(me,(([{isIntersecting:e}],a)=>{fe.value=!0}))})),c((()=>{be.value=!0,Be(),setTimeout((async()=>{Le.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var t,n,l,i,o,d,s,r,u,c,b,k,A,S,T,j,E,P,R,K;const Z=L,ae=N;return v(),p(f,null,[_(be)?(v(),p("div",w)):(v(),p("div",V,[m(Z),_(je)?(v(),p("div",F,[g("当前页面仅用于保费试算预览"),B,g("不展示其他产品相关配置信息")])):(v(),p(f,{key:0},[I("div",x,[1==(null==(n=null==(t=_(Ie))?void 0:t.BASIC_INFO)?void 0:n.bannerType)&&(null==(i=null==(l=_(Ie))?void 0:l.BASIC_INFO)?void 0:i.banner.length)?(v(),h(_(M),{key:0,"data-skeleton-type":"img",images:null==(d=null==(o=_(Ie))?void 0:o.BASIC_INFO)?void 0:d.banner},null,8,["images"])):C("",!0),2==(null==(r=null==(s=_(Ie))?void 0:s.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=_(Ie))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),h(_(W),{key:1,"data-skeleton-type":"img",src:null==(b=_(Ie))?void 0:b.BASIC_INFO.video[0]},null,8,["src"])):C("",!0),(null==(S=null==(A=null==(k=_(Ie))?void 0:k.BASIC_INFO)?void 0:A.bannerMove)?void 0:S.length)?(v(),h(_(M),{key:2,url:null==(E=null==(j=null==(T=_(Ie))?void 0:T.BASIC_INFO)?void 0:j.bannerMove)?void 0:E[0],onClick:De},null,8,["url"])):C("",!0),I("div",{ref_key:"observeRef",ref:me},null,512)]),m(_(q),{"data-source":null==(P=_(Ie))?void 0:P.BASIC_INFO},null,8,["data-source"]),(null==(R=_(Ie))?void 0:R.GUARANTEE)?(v(),h(_(X),{key:0,"show-service-config":"","data-source":_(Ie),"plan-list":_(Ae),onUpdateActivePlan:Me},null,8,["data-source","plan-list"])):C("",!0),I("div",{class:"trial-text-btn",onClick:Pe},"算一算保费"),m(_(Q),{"data-source":null==(K=_(Ie))?void 0:K.ISSUE_CONDITION},null,8,["data-source"]),m(_(G),{ref_key:"detailScrollRef",ref:_e,"data-source":_(Ie)},null,8,["data-source"]),m(ae,null,{default:O((()=>{var e,a,t;return[(null==(e=_(Ie).SIGNATURE)?void 0:e.inscribedContent)?(v(),h(_($),{key:0,"inscribed-content":null==(t=null==(a=_(Ie))?void 0:a.SIGNATURE)?void 0:t.inscribedContent},null,8,["inscribed-content"])):C("",!0)]})),_:1}),m(ae,null,{default:O((()=>{var e;return[(null==(e=_(Ue))?void 0:e.length)?(v(),h(_(H),{key:0,"attachment-list":_(Ue),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{Oe.value=e,Ce.value=!0})(e))},null,8,["attachment-list"])):C("",!0)]})),_:1})],64)),_(fe)&&_(Fe)?(v(),h(_(z),{key:2,ref_key:"trialRef",ref:Ee,"data-source":_(Ne),"share-info":_(Se),"is-share":_(Se).isShare,"product-info":{productCode:_(he).productCode,productName:_(he).productName,productId:"",tenantId:_(ee),insurerCode:_(de),planList:_(he).productPlanInsureVOList},"default-data":_(Ve)?[_(Ve)]:null,"current-order-detail":_(Ve),"tenant-product-detail":_(Ie),"hide-benefit":1!==_(he).openFlag},null,8,["data-source","share-info","is-share","product-info","default-data","current-order-detail","tenant-product-detail","hide-benefit"])):C("",!0),D])),m(ae,null,{default:O((()=>[_(ge)&&!_(je)?(v(),h(_(Y),{key:0,"product-detail":_(Ie)},null,8,["product-detail"])):C("",!0)])),_:1}),U,m(ae,null,{default:O((()=>[_(Ce)?(v(),h(_(J),{key:0,show:_(Ce),"onUpdate:show":a[1]||(a[1]=e=>y(Ce)?Ce.value=e:null),"content-list":_(ye)?_(Ue):_(Ge),"is-only-view":_(ye),"active-index":_(Oe),text:_(ye)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":_(ye)?0:_(qe),onSubmit:ze,onOnCloseFilePreviewByMask:Qe},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):C("",!0)])),_:1})],64)}}});export{G as default};

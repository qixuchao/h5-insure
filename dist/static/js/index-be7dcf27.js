var Ne=Object.defineProperty,Me=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var Fe=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Oe=(o,a,y)=>a in o?Ne(o,a,{enumerable:!0,configurable:!0,writable:!0,value:y}):o[a]=y,$=(o,a)=>{for(var y in a||(a={}))je.call(a,y)&&Oe(o,y,a[y]);if(Fe)for(var y of Fe(a))Ge.call(a,y)&&Oe(o,y,a[y]);return o},G=(o,a)=>Me(o,Ye(a));import{g as U,L as N,o as Z,$ as x,r as h,k as c,m as A,n as D,j as v,y as O,z as t,a0 as $e,a1 as Se,a2 as J,C as B,h as g,s as L,I as q,d as Ze,a3 as We,J as ze,a4 as Qe,x as S,F as W,E as z,a5 as Je,a6 as Xe,B as Q,V as He,Q as Ke,a7 as et}from"./vendor-0f9b8289.js";import{_ as M,P as T,a as tt}from"./index-0ee711e6.js";import{b as X,S as H}from"./index-a2aa392a.js";const at=[{label:"\u7537",value:"1"},{label:"\u5973",value:"2"}],ot=[{label:"\u6709",value:"1"},{label:"\u65E0",value:"2"}],it=[{value:1,label:"\u7B2C5\u4E2A\u4FDD\u5355\u5468\u5E74\u65E5"},{value:2,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8455\u5468\u5C81"},{value:3,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8460\u5468\u5C81"},{value:4,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8465\u5468\u5C81"},{value:5,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8470\u5468\u5C81"},{value:6,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8475\u5468\u5C81"}],nt=[{value:1,label:"\u5E74\u9886"},{value:2,label:"\u6708\u9886"}],Ae=[{label:"\u8DB8\u4EA4",value:"1"},{label:"\u5E74\u4EA4",value:"2"},{label:"\u534A\u5E74\u4EA4",value:"3"},{label:"\u5B63\u4EA4",value:"4"},{label:"\u6708\u4EA4",value:"5"}],Re=[{label:"\u8DB8\u4EA4",value:"single"},{label:"1\u5E74\u4EA4",value:"year_1"},{label:"5\u5E74\u4EA4",value:"year_5"},{label:"10\u5E74\u4EA4",value:"year_10"},{label:"15\u5E74\u4EA4",value:"year_15"},{label:"20\u5E74\u4EA4",value:"year_20"},{label:"25\u5E74\u4EA4",value:"year_25"},{label:"30\u5E74\u4EA4",value:"year_30"},{label:"35\u5E74\u4EA4",value:"year_35"}],Be=[{label:"7\u5929",value:"day_7"},{label:"14\u5929",value:"day_14"},{label:"30\u5929",value:"day_30"},{label:"1\u5E74",value:"year_1"},{label:"3\u5E74",value:"year_3"},{label:"5\u5E74",value:"year_5"},{label:"10\u5E74",value:"year_10"},{label:"15\u5E74",value:"year_15"},{label:"20\u5E74",value:"year_20"},{label:"25\u5E74",value:"year_25"},{label:"30\u5E74",value:"year_30"},{label:"35\u5E74",value:"year_35"},{label:"\u7EC8\u8EAB",value:"to_life"}],lt=[{label:"\u4E3B\u9669\u671F\u95F4\u51CF1",value:"3"},{label:"\u65E0\u9650\u5236",value:"2"}],we=[{label:"\u8FD4\u4FDD\u989D",value:1},{label:"\u8FD4\u4FDD\u8D39",value:2}],ut=[{label:"\u6295\u4FDD",value:1},{label:"\u4E0D\u6295\u4FDD",value:2}],rt=(o={})=>X.post("/api/gateway/system/dict/v2/queryDictInfo",o);new H({source:"sessionStorage"});const Pe=new H({source:"localStorage"});new H({source:"cookie"});const st=o=>($e("data-v-1e1e74de"),o=o(),Se(),o),dt={class:"com-occupational-wrapper"},mt=st(()=>O("div",{class:"popup-title"},"\u9009\u62E9\u804C\u4E1A",-1)),ct={class:"popup-content"},ft=U({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(o,{emit:a}){const y=o,i=N({show:y.show,options:[],currentValue:""}),s=()=>{a("close")},I=({value:d,selectedOptions:r})=>{console.log(d,r);const _=(r||[]).map(V=>V.value).join("/");a("update:modelValue",d),a("finish",_),s()},E=d=>{const r=d,_=V=>{V.forEach(l=>{const e=l;e.children.length?_(e.children):e.children=null})};return _(r),r},b=()=>{var _,V;const d=`${(V=(_=y.insurerCode)==null?void 0:_.toLocaleUpperCase)==null?void 0:V.call(_)}_OCCUPATION`,r=Pe.get("occupational")||{};if(r[d]){i.options=r[d];return}rt({dictCodeList:[d]}).then(({code:l,data:e})=>{var n;if(l==="10000"){const u=E(((n=e==null?void 0:e[0])==null?void 0:n.dictItemList)||[]);i.options=u,r[d]=u,Pe.set("occupational",r)}})};return Z(()=>{b()}),x(()=>y.modelValue,d=>{},{deep:!0,immediate:!0}),(d,r)=>{const _=h("van-cascader"),V=h("VanPopup");return c(),A("div",dt,[D(V,{show:t(i).show,"onUpdate:show":r[1]||(r[1]=l=>t(i).show=l),"show-footer":"",position:"bottom",closeable:"",onClose:s},{default:v(()=>[mt,O("div",ct,[D(_,{modelValue:t(i).currentValue,"onUpdate:modelValue":r[0]||(r[0]=l=>t(i).currentValue=l),title:"\u8BF7\u9009\u62E9\u804C\u4E1A","show-header":!1,placeholder:"\u8BF7\u9009\u62E9",options:t(i).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:I},null,8,["modelValue","options"])])]),_:1},8,["show"])])}}});var pt=M(ft,[["__scopeId","data-v-1e1e74de"]]);const yt={class:"com-personal-info-wrapper"},Te=U({props:{formInfo:{type:Object,required:!0,default:()=>{}},insuredCode:{type:String,required:!0,default:""},factorList:{type:Array,required:!0,default:()=>[]}},setup(o,{expose:a}){const y=o,[i,s]=J(),[I,E]=J(),b=B(),d=N({formInfo:y==null?void 0:y.formInfo,occupationalText:""}),r=l=>{d.occupationalText=l},_=()=>{E(!1)};return a({validateForm:()=>new Promise((l,e)=>{b==null||b.value.validate().then(()=>{l("")},()=>{e()})})}),(l,e)=>{const n=h("VanField"),u=h("VanForm"),m=h("van-datetime-picker"),k=h("van-popup");return c(),A("div",yt,[D(u,{ref_key:"formRef",ref:b,"input-align":"right","error-message-align":"right"},{default:v(()=>[o.factorList.includes("APPLICANT.AGE")||o.factorList.includes("AGE")?(c(),g(n,{key:0,modelValue:t(d).formInfo.birthday,"onUpdate:modelValue":e[0]||(e[0]=p=>t(d).formInfo.birthday=p),rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[1]||(e[1]=p=>t(s)(!0))},null,8,["modelValue"])):L("",!0),o.factorList.includes("APPLICANT.GENDER")||o.factorList.includes("GENDER")?(c(),g(n,{key:1,modelValue:t(d).formInfo.gender,"onUpdate:modelValue":e[3]||(e[3]=p=>t(d).formInfo.gender=p),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:v(()=>[D(T,{modelValue:t(d).formInfo.gender,"onUpdate:modelValue":e[2]||(e[2]=p=>t(d).formInfo.gender=p),options:t(at)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):L("",!0),o.factorList.includes("SOCIAL_INS")?(c(),g(n,{key:2,modelValue:t(d).formInfo.socialSecurity,"onUpdate:modelValue":e[5]||(e[5]=p=>t(d).formInfo.socialSecurity=p),name:"socialSecurity",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:v(()=>[D(T,{modelValue:t(d).formInfo.socialSecurity,"onUpdate:modelValue":e[4]||(e[4]=p=>t(d).formInfo.socialSecurity=p),options:t(ot)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):L("",!0),o.factorList.includes("OCCUPATION_CATEGORY")?(c(),g(n,{key:3,modelValue:t(d).formInfo.occupationalClass,"onUpdate:modelValue":e[6]||(e[6]=p=>t(d).formInfo.occupationalClass=p),rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],name:"occupationalClass",label:"\u804C\u4E1A\u7C7B\u578B","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[7]||(e[7]=p=>t(E)(!0))},{input:v(()=>[O("div",null,q(t(d).occupationalText),1)]),_:1},8,["modelValue"])):L("",!0)]),_:1},512),D(k,{show:t(i),"onUpdate:show":e[10]||(e[10]=p=>We(i)?i.value=p:null),position:"bottom"},{default:v(()=>[D(m,{type:"date","min-date":new Date("1900-01-01"),"max-date":new Date,onConfirm:e[8]||(e[8]=p=>{t(d).formInfo.birthday=t(Ze)(p).format("YYYY-MM-DD"),t(s)(!1)}),onCancel:e[9]||(e[9]=p=>t(s)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"]),t(I)?(c(),g(pt,{key:0,modelValue:t(d).formInfo.occupationalClass,"onUpdate:modelValue":e[11]||(e[11]=p=>t(d).formInfo.occupationalClass=p),show:t(I),"insured-code":"insuredCode",onFinish:r,onClose:_},null,8,["modelValue","show"])):L("",!0)])}}});const Vt={class:"risk-title"},kt={class:"left-content"},vt=U({props:{riskType:{type:Number,default:1},name:{type:String,default:()=>""}},setup(o){return(a,y)=>{const i=h("ZaSvg"),s=h("VanCell");return c(),A("div",Vt,[D(s,null,{title:v(()=>[O("div",kt,[O("div",{class:ze(o.riskType===1?"main-risk":"minor-risk")},q(o.riskType===1?"\u4E3B":"\u9644"),3),O("h4",null,q(o.name),1)]),o.riskType===2?(c(),g(i,{key:0,style:{width:"18px",height:"18px"},name:"delete",color:"var(--van-primary-color)"})):L("",!0)]),_:1})])}}});var Dt=M(vt,[["__scopeId","data-v-ac366f06"]]);const It={class:"com-risk-card-wrapper"},gt={key:0},bt={key:9,class:"liab-desc"},_t=O("div",{class:"title"},"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E",-1),xe=U({props:{originData:{type:Object,required:!0,default:()=>{}},formInfo:{type:Object,required:!0,default:()=>{}},mainRiskData:{type:Object,default:()=>{}},mainRiskInfo:{type:Object,required:!1,default:()=>{}},index:{type:[Number,String],default:0,required:!0}},setup(o){const a=o,y=Qe("premium"),i=N({formInfo:a.formInfo}),s=l=>typeof l!="boolean"&&!l||Array.isArray(l)&&!l.length?!0:{}.toString.call(l)==="object Object"?Object.keys(l).length:!1,I=(l,e)=>{let n=e;return Array.isArray(e)||(n=[`${n}`]),(l||[]).filter(u=>n.includes(`${u.value}`)||n.includes(u.value))},E=S(()=>{var l,e,n,u,m,k;return((l=a.originData)==null?void 0:l.riskType)===1?I(Be,(n=(e=a==null?void 0:a.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:n.insurancePeriodValueList):((u=a.originData)==null?void 0:u.periodType)===2?I([{value:"year_1",label:"1\u5E74"}],["year_1"]):I(Be,(k=(m=a==null?void 0:a.mainRiskData)==null?void 0:m.riskInsureLimitVO)==null?void 0:k.insurancePeriodValueList)}),b=S(()=>{var l,e,n,u,m,k,p,C,w;return((l=a.originData)==null?void 0:l.riskType)===1?I(Re,(n=(e=a==null?void 0:a.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:n.paymentPeriodValueList):((u=a.originData)==null?void 0:u.exemptFlag)===1?I(lt,(k=(m=a==null?void 0:a.originData)==null?void 0:m.riskInsureLimitVO)==null?void 0:k.paymentPeriodRule):((p=a.originData)==null?void 0:p.periodType)===2?I([{value:"year_1",label:"1\u5E74\u4EA4"}],["year_1"]):I(Re,(w=(C=a==null?void 0:a.mainRiskData)==null?void 0:C.riskInsureLimitVO)==null?void 0:w.paymentPeriodValueList)}),d=S(()=>{var l,e,n,u,m;return((l=a.originData)==null?void 0:l.riskType)===1?I(Ae,(n=(e=a==null?void 0:a.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:n.paymentFrequencyList):I(Ae,(m=(u=a==null?void 0:a.mainRiskData)==null?void 0:u.riskInsureLimitVO)==null?void 0:m.paymentFrequencyList)}),r=S(()=>{var n,u;let l=0,e=0;return(((u=(n=a.originData)==null?void 0:n.riskCalcMethodInfoVO)==null?void 0:u.paymentMethodLimitList)||[]).forEach((m,k)=>{k===0&&(l=m.minAmount,e=m.maxAmount),l>m.minAmount&&(l=m.minAmount),e<m.maxAmount&&(e=m.maxAmount)}),i.formInfo.sumInsured=l,{min:l,max:e}}),_=S(()=>{var n,u;let l=0,e=0;return(((u=(n=a.originData)==null?void 0:n.riskCalcMethodInfoVO)==null?void 0:u.paymentMethodLimitList)||[]).forEach((m,k)=>{k===0&&(l=m.minPremium,e=m.maxPremium),l>m.minPremium&&(l=m.minPremium),e<m.maxPremium&&(e=m.maxPremium)}),i.formInfo.premium=l,{min:l,max:e}}),V=S(()=>{var n,u,m,k;const l=((u=(n=a.originData)==null?void 0:n.riskCalcMethodInfoVO)==null?void 0:u.minCopy)||1,e=(k=(m=a.originData)==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:k.maxCopy;return i.formInfo.copy=l,{min:l,max:e}});return Z(()=>{var e,n;const l={riskType:a.originData.riskType,riskId:a.originData.id,riskCode:a.originData.riskCode,mainRiskCode:(e=a==null?void 0:a.mainRiskData)==null?void 0:e.riskCode,mainRiskId:(n=a==null?void 0:a.mainRiskData)==null?void 0:n.id,riskCategory:a.originData.riskCategory,liabilityVOList:(a.originData.riskLiabilityInfoVOList||[]).map(u=>({liabilityAttributeCode:u.liabilityAttribute,liabilityAttributeValue:u.liabilityAttributeValue,liabilityCode:u.liabilityCode,liabilityId:u.id,liabilityRateType:u.liabilityRateType}))};Object.assign(i==null?void 0:i.formInfo,l)}),x(()=>{var l;return(l=i.formInfo)==null?void 0:l.paymentFrequency},l=>{var e,n,u,m;[3,4].includes((n=(e=a.originData)==null?void 0:e.riskCalcMethodInfoVO)==null?void 0:n.saleMethod)&&(((m=(u=a.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:m.paymentMethodLimitList)||[]).forEach(k=>{+k.paymentFrequency==+l&&Object.assign(i.formInfo,{sumInsured:k.perCopyAmount,premium:k.perCopyPremium})})}),x(()=>a.mainRiskInfo,l=>{},{immediate:!0,deep:!0}),(l,e)=>{var m,k,p,C,w,Y,j,P,K,ee,te,ae,oe,ie,ne,le,ue,re,se,de,me,ce,fe,pe,ye,Ve,ke,ve,De,Ie,ge,be,_e,Ce,Ee,he,Le;const n=h("VanStepper"),u=h("VanField");return c(),A("div",It,[D(Dt,{"risk-type":(m=o.originData)==null?void 0:m.riskType,name:(k=o.originData)==null?void 0:k.riskName},null,8,["risk-type","name"]),((C=(p=o.originData)==null?void 0:p.riskCalcMethodInfoVO)==null?void 0:C.saleMethod)===1?(c(),g(u,{key:0,modelValue:t(i).formInfo.sumInsured,"onUpdate:modelValue":e[1]||(e[1]=f=>t(i).formInfo.sumInsured=f),label:"\u4FDD\u989D",name:"sumInsured",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:v(()=>{var f,F;return[D(n,{modelValue:t(i).formInfo.sumInsured,"onUpdate:modelValue":e[0]||(e[0]=R=>t(i).formInfo.sumInsured=R),min:t(r).min,step:((F=(f=o.originData)==null?void 0:f.riskCalcMethodInfoVO)==null?void 0:F.increaseDecreaseNum)||1,max:t(r).max},null,8,["modelValue","min","step","max"])]}),_:1},8,["modelValue"])):L("",!0),((Y=(w=o.originData)==null?void 0:w.riskCalcMethodInfoVO)==null?void 0:Y.saleMethod)===2?(c(),g(u,{key:1,modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[3]||(e[3]=f=>t(i).formInfo.premium=f),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:v(()=>{var f,F;return[D(n,{modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[2]||(e[2]=R=>t(i).formInfo.premium=R),step:((F=(f=o.originData)==null?void 0:f.riskCalcMethodInfoVO)==null?void 0:F.increaseDecreaseNum)||1,min:t(_).min,max:t(_).max},null,8,["modelValue","step","min","max"])]}),_:1},8,["modelValue"])):L("",!0),((P=(j=o.originData)==null?void 0:j.riskCalcMethodInfoVO)==null?void 0:P.saleMethod)===3||((ee=(K=o.originData)==null?void 0:K.riskCalcMethodInfoVO)==null?void 0:ee.saleMethod)===4&&(((ae=(te=o.originData)==null?void 0:te.riskCalcMethodInfoVO)==null?void 0:ae.minCopy)||((ie=(oe=o.originData)==null?void 0:oe.riskCalcMethodInfoVO)==null?void 0:ie.maxCopy))?(c(),g(u,{key:2,modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[5]||(e[5]=f=>t(i).formInfo.copy=f),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:v(()=>[D(n,{modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[4]||(e[4]=f=>t(i).formInfo.copy=f),step:1,min:t(V).min,max:t(V).max},null,8,["modelValue","min","max"])]),_:1},8,["modelValue"])):L("",!0),((le=(ne=o.originData)==null?void 0:ne.riskCalcMethodInfoVO)==null?void 0:le.saleMethod)!==1&&((re=t(y))==null?void 0:re[(ue=o.originData)==null?void 0:ue.riskCode])?(c(),g(u,{key:3,label:"\u4FDD\u989D"},{input:v(()=>{var f,F,R;return[O("div",null,q((R=(F=t(y))==null?void 0:F[(f=o.originData)==null?void 0:f.riskCode])==null?void 0:R.amount),1)]}),_:1})):L("",!0),!s((de=(se=o.originData)==null?void 0:se.riskInsureLimitVO)==null?void 0:de.insurancePeriodValueList)||!s((ce=(me=o.originData)==null?void 0:me.riskInsureLimitVO)==null?void 0:ce.insurancePeriodRule)?(c(),g(u,{key:4,modelValue:t(i).formInfo.coverageYear,"onUpdate:modelValue":e[7]||(e[7]=f=>t(i).formInfo.coverageYear=f),label:"\u4FDD\u969C\u671F\u95F4",name:"coverageYear",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:v(()=>[D(T,{modelValue:t(i).formInfo.coverageYear,"onUpdate:modelValue":e[6]||(e[6]=f=>t(i).formInfo.coverageYear=f),options:t(E)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):L("",!0),!s((pe=(fe=o.originData)==null?void 0:fe.riskInsureLimitVO)==null?void 0:pe.paymentPeriodValueList)||!s((Ve=(ye=o.originData)==null?void 0:ye.riskInsureLimitVO)==null?void 0:Ve.paymentPeriodRule)?(c(),g(u,{key:5,modelValue:t(i).formInfo.paymentYear,"onUpdate:modelValue":e[9]||(e[9]=f=>t(i).formInfo.paymentYear=f),label:"\u4EA4\u8D39\u671F\u95F4",name:"paymentYear",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:v(()=>[D(T,{modelValue:t(i).formInfo.paymentYear,"onUpdate:modelValue":e[8]||(e[8]=f=>t(i).formInfo.paymentYear=f),options:t(b)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):L("",!0),!s((ve=(ke=o.originData)==null?void 0:ke.riskInsureLimitVO)==null?void 0:ve.paymentFrequencyList)||!s((Ie=(De=o.originData)==null?void 0:De.riskInsureLimitVO)==null?void 0:Ie.paymentTypeRule)?(c(),g(u,{key:6,modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[11]||(e[11]=f=>t(i).formInfo.paymentFrequency=f),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:v(()=>[D(T,{modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[10]||(e[10]=f=>t(i).formInfo.paymentFrequency=f),options:t(d)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):L("",!0),s((be=(ge=o.originData)==null?void 0:ge.riskInsureLimitVO)==null?void 0:be.annuityDrawTypeList)?L("",!0):(c(),g(u,{key:7,modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[13]||(e[13]=f=>t(i).formInfo.annuityDrawDate=f),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:v(()=>{var f,F;return[D(T,{modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[12]||(e[12]=R=>t(i).formInfo.annuityDrawDate=R),options:I(t(it),(F=(f=o.originData)==null?void 0:f.riskInsureLimitVO)==null?void 0:F.annuityDrawTypeList)},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),s((Ce=(_e=o.originData)==null?void 0:_e.riskInsureLimitVO)==null?void 0:Ce.annuityDrawFrequencyList)?L("",!0):(c(),g(u,{key:8,modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[15]||(e[15]=f=>t(i).formInfo.annuityDrawType=f),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:v(()=>{var f,F;return[D(T,{modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[14]||(e[14]=R=>t(i).formInfo.annuityDrawType=R),options:I(t(nt),(F=(f=o.originData)==null?void 0:f.riskInsureLimitVO)==null?void 0:F.annuityDrawFrequencyList)},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),(c(!0),A(W,null,z(((Ee=o.originData)==null?void 0:Ee.riskLiabilityInfoVOList)||[],(f,F)=>(c(),A("div",{key:f.liabilityId},[f.optionalFlag===1?(c(),g(u,{key:0,label:f.liabilityName,name:"liabilityAttributeValue",rules:[{required:f.liabilityAttributeValue,message:"\u8BF7\u9009\u62E9"}]},{input:v(()=>[O("div",null,[f.liabilityAttributeValue?(c(),g(T,{key:1,modelValue:t(i).formInfo.liabilityVOList[F].liabilityAttributeValue,"onUpdate:modelValue":R=>t(i).formInfo.liabilityVOList[F].liabilityAttributeValue=R,options:t(we)},null,8,["modelValue","onUpdate:modelValue","options"])):(c(),A("span",gt,"50\u4E07"))])]),_:2},1032,["label","rules"])):(c(),g(u,{key:1,label:f.liabilityName,name:"liabilityAttributeValue",rules:[{required:f.optionalFlag===1&&f.liabilityAttributeValue,message:"\u8BF7\u9009\u62E9"}]},{input:v(()=>[O("div",null,[f.liabilityAttributeValue?(c(),g(T,{key:1,modelValue:t(i).formInfo.liabilityVOList[F].liabilityAttributeValue,"onUpdate:modelValue":R=>t(i).formInfo.liabilityVOList[F].liabilityAttributeValue=R,options:t(we)},null,8,["modelValue","onUpdate:modelValue","options"])):(c(),g(T,{key:0,modelValue:t(i).formInfo.liabilityVOList[F].flag,"onUpdate:modelValue":R=>t(i).formInfo.liabilityVOList[F].flag=R,options:t(ut)},null,8,["modelValue","onUpdate:modelValue","options"]))])]),_:2},1032,["label","rules"]))]))),128)),((he=o.originData)==null?void 0:he.relationDesc)?(c(),A("div",bt,[_t,O("div",null,q((Le=o.originData)==null?void 0:Le.relationDesc),1)])):L("",!0)])}}});const Ct=o=>($e("data-v-aeeb813a"),o=o(),Se(),o),Et={class:"com-risk-list-wrapper"},ht=Ct(()=>O("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),Lt={class:"risk-list"},Ft={class:"footer-bar"},Ot=Q("\u786E\u8BA4"),At=U({props:{riskList:{type:Array,required:!0,default:()=>[]},show:{type:Boolean,required:!0,default:!1},collocationList:{type:Array,default:()=>[]},disabled:{type:Array,required:!0,default:()=>[]},modelValue:{type:Array,required:!0,default:()=>[]}},emits:["finished","close","update:modelValue"],setup(o,{emit:a}){const y=o,i=B([]),s=B([]),I=B(y.disabled),E=N({show:y.show,currentChecked:[]}),b=(V,l)=>{y.collocationList.forEach(e=>{V===e.riskId&&(l?e.collocationType===1?E.currentChecked=E.currentChecked.filter(n=>!(n===e.collocationRiskId||n===V)):e.collocationType===3&&I.value.filter(n=>n!==e.collocationRiskId):e.collocationType===1?E.currentChecked.push(e.collocationRiskId,V):e.collocationType===3&&I.value.push(e.collocationRiskId))})},d=V=>{var e,n,u;const l=E.currentChecked.includes(V);console.log("status",l),b(V,l),(u=(n=(e=i==null?void 0:i.value)==null?void 0:e[V])==null?void 0:n.toggle)==null||u.call(n)},r=()=>{a("close")},_=()=>{const V=y.riskList.filter(l=>E.currentChecked.includes(l.id));a("update:modelValue",s),a("finished",V),a("close")};return Je(()=>{i.value=[]}),x(()=>y.modelValue,V=>{s.value=V,I.value=V},{deep:!0,immediate:!0}),(V,l)=>{const e=h("van-checkbox"),n=h("VanCell"),u=h("van-cell-group"),m=h("van-checkbox-group"),k=h("VanButton"),p=h("VanPopup");return c(),A("div",Et,[D(p,{show:t(E).show,"onUpdate:show":l[2]||(l[2]=C=>t(E).show=C),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",position:"bottom",closeable:"",onClose:r},{default:v(()=>[ht,O("div",Lt,[D(m,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=C=>s.value=C)},{default:v(()=>[D(u,{inset:""},{default:v(()=>[(c(!0),A(W,null,z(o.riskList,C=>(c(),g(n,{key:C.id,title:C.riskName,onClick:w=>d(C.id)},{"right-icon":v(()=>[D(e,{ref_for:!0,ref:w=>i.value[C.id]=w,disabled:I.value.includes(C.id),shape:"square",name:C.id,onClick:l[0]||(l[0]=Xe(()=>{},["stop"]))},null,8,["disabled","name"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),O("div",Ft,[D(k,{type:"primary",disabled:!t(E).currentChecked.length,block:"",onClick:_},{default:v(()=>[Ot]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var Rt=M(At,[["__scopeId","data-v-aeeb813a"]]);const Bt={class:"risk-list-wrapper"},wt={key:0,class:"add-rider-risk"},Pt={class:"left-part"},Tt=Q("+ \u9644\u52A0\u9669"),xt=U({props:{riskInfo:{type:Object,required:!0,default:()=>{}},originData:{type:Object,required:!0,default:()=>{}},pickFactor:{type:Function,required:!0,default:()=>{}}},setup(o){var E;const a=o,[y,i]=J(!1);B(null),B(null);const s=N({mainRiskInfo:a.riskInfo,riderRiskInfo:(E=a.riskInfo)==null?void 0:E.riderRiskVOList,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),I=(b,d)=>{(b||[]).forEach(r=>{Object.assign(s.riderRiskInfo,{[r.id]:{}})}),s.disabledList=d,s.requiredRiderRiskData=s.requiredRiderRiskData.concat(b)};return Z(()=>{s.requiredRiderRiskData}),x(()=>s.mainRiskInfo,b=>{},{deep:!0,immediate:!0}),x(()=>s.riderRiskInfo,()=>{},{deep:!0,immediate:!0}),x(()=>s.requiredRiderRiskData,b=>{const d=[s.mainRiskData,...b];let r=[],_=[];d.forEach(V=>{var e;const l=((e=V==null?void 0:V.riskCalcMethodInfoVO)==null?void 0:e.riskFactorRelationList)||[];r=r.concat(l.filter(n=>n.factorObject==="insured").map(n=>n.factorCode)),_=_.concat(l.filter(n=>n.factorObject==="holder").map(n=>n.factorCode))}),(b||[]).forEach(V=>{Object.assign(s.riderRiskInfo,{[V.id]:{}})}),a.pickFactor({insuredFactorList:[...new Set(r)],holderFactorList:[...new Set(_)]})},{deep:!0,immediate:!0}),x(()=>a.originData,b=>{(b||[]).forEach(d=>{d.riskType===1?(s.mainRiskData=d,s.requiredRiderRiskData=(d==null?void 0:d.requiredRiderRiskVOList)||[],s.riderRiskList=d==null?void 0:d.optionalRiderRiskVOList):s.riderRiskList.push(d)})},{deep:!0,immediate:!0}),x(()=>a.riskInfo,()=>{},{immediate:!0,deep:!0}),(b,d)=>{var r,_,V,l;return c(),A("div",Bt,[D(xe,{"form-info":t(s).mainRiskInfo,"origin-data":t(s).mainRiskData},null,8,["form-info","origin-data"]),(c(!0),A(W,null,z(t(s).requiredRiderRiskData,(e,n)=>(c(),g(xe,{key:e.id,"form-info":t(s).riderRiskInfo[e.id],index:n,"main-risk-data":t(s).mainRiskData,"main-risk-info":t(s).mainRiskInfo,"origin-data":e},null,8,["form-info","index","main-risk-data","main-risk-info","origin-data"]))),128)),((_=(r=t(s))==null?void 0:r.riderRiskList)==null?void 0:_.length)-((l=(V=t(s))==null?void 0:V.checkedList)==null?void 0:l.length)?(c(),A("div",wt,[O("span",Pt,q(`\u5171\u6709${t(s).riderRiskList.length-t(s).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),D(tt,{activied:"",onClick:d[0]||(d[0]=e=>t(i)(!0))},{default:v(()=>[Tt]),_:1})])):L("",!0),t(y)?(c(),g(Rt,{key:1,modelValue:t(s).checkedList,"onUpdate:modelValue":d[1]||(d[1]=e=>t(s).checkedList=e),show:t(y),disabled:t(s).disabledList,"risk-list":t(s).riderRiskList,"collocation-list":t(s).mainRiskData.collocationVOList||[],onFinished:I,onClose:d[2]||(d[2]=e=>t(i)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):L("",!0)])}}});var qe=M(xt,[["__scopeId","data-v-684d31e2"]]);const qt=(o={})=>X.get(`/api/product/insureProductDetail/${o==null?void 0:o.productId}`,o),Ut=(o={})=>X.post("/api/insurance/premiumCalc",o);const $t={class:"card-title"},St=U({props:{title:{type:String,default:()=>""},collapse:{type:Boolean,default:!1}},setup(o){const a=B(["1"]);return(y,i)=>{const s=h("ZaSvg"),I=h("VanCell"),E=h("VanCollapseItem"),b=h("VanCollapse");return c(),A("div",$t,[o.collapse?(c(),g(b,{key:1,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=d=>a.value=d)},{default:v(()=>[D(E,{name:"1"},{title:v(()=>[D(s,{name:"line",color:"var(--van-primary-color)"}),O("h4",null,q(o.title),1)]),default:v(()=>[o.collapse?He(y.$slots,"default",{key:0},void 0,!0):L("",!0)]),_:3})]),_:3},8,["modelValue"])):(c(),g(I,{key:0},{title:v(()=>[D(s,{name:"line",color:"var(--van-primary-color)"}),O("h4",null,q(o.title),1)]),_:1}))])}}});var Ue=M(St,[["__scopeId","data-v-1d07f5e2"]]);const Nt={key:0,class:"part-card"},Mt={key:1,class:"part-card"},Yt={class:"risk-content"},jt={key:0,class:"risk"},Gt={key:1,class:"plan-risk"},Zt={class:"footer-bar"},Wt={class:"trial-result"},zt=Q("\u53BB\u8BD5\u7B97"),Qt=Q("\u53BB\u6295\u4FDD"),Jt=U({setup(o){const{id:a=115}=Ke().query,y=B({personVO:{}}),i=B({insuredCode:"",personVO:{}}),s=B({}),I=B({}),E=B({}),b=B({}),d=B({});et("premium",d.value);const r=N({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0}),_=()=>{var m;const n=Object.values(s.value[r.currentPlan].riderRiskVOList).map(k=>{const p=k;if(p.paymentYear==="3"){const C=(s.value[r.currentPlan].paymentYear||"").split("_");C[1]&&(C[1]-=1),p.paymentYear=C.join("_")}return p}),u={holder:{personVO:G($({},y.value.personVO),{birthday:y.value.personVO.birthday&&`${y.value.personVO.birthday} 00:00:00`})},productCode:(m=r==null?void 0:r.riskBaseInfo)==null?void 0:m.productCode,insuredVOList:[G($({},i.value),{personVO:G($({},i.value.personVO),{birthday:i.value.personVO.birthday&&`${i.value.personVO.birthday} 00:00:00`}),productPlanVOList:[{planCode:r.currentPlan||"",riskVOList:[G($({},s.value[r.currentPlan]),{riderRiskVOList:n})]}]})]};Ut($({},u)).then(({code:k,data:p})=>{if(k==="10000"){r.trialResult=p,r.canTrial=!1;const C={};(p.riskPremiumDetailVOList||[]).forEach(w=>{C[w.riskCode]=w}),Object.assign(d.value,C),console.log(d.value)}})},V=()=>{var n,u,m,k,p;Promise.all([(u=(n=I==null?void 0:I.value)==null?void 0:n.validateForm)==null?void 0:u.call(n),(k=(m=E==null?void 0:E.value)==null?void 0:m.validateForm)==null?void 0:k.call(m),(p=b==null?void 0:b.value)==null?void 0:p.validate()]).then(()=>{_()})},l=()=>{qt({productId:a}).then(({code:n,data:u})=>{n==="10000"&&(r.riskBaseInfo=u==null?void 0:u.productBasicInfoVO,((u==null?void 0:u.productRelationPlanVOList)||(u==null?void 0:u.riskDetailVOList)||[]).forEach((m,k)=>{k===0&&(r.currentPlan=m.planCode||0),Object.assign(s.value,{[m.planCode||k]:{liabilityVOList:[],riderRiskVOList:{}}})}),r.riskData=(u==null?void 0:u.riskDetailVOList)||[],r.riskPlanData=(u==null?void 0:u.productRelationPlanVOList)||[])}).finally(()=>{})},e=n=>{r.holderFactor=n.insuredFactorList,r.insuredFactor=n.holderFactorList};return x([()=>s.value,()=>y.value,()=>i.value],n=>{n&&r.canTrial&&(r.canTrial=!0)},{deep:!0}),Z(()=>{l()}),(n,u)=>{const m=h("VanForm"),k=h("VanTab"),p=h("VanTabs"),C=h("VanButton"),w=h("ZaPageWrap");return c(),g(w,{class:"page-trial-wrapper"},{default:v(()=>{var Y,j;return[t(r).holderFactor.length?(c(),A("div",Nt,[D(Ue,{title:"\u6295\u4FDD\u4EBA"}),D(Te,{ref_key:"holderRef",ref:I,"insured-code":(Y=t(r).riskBaseInfo)==null?void 0:Y.insuredCode,"form-info":y.value.personVO,"factor-list":t(r).holderFactor},null,8,["insured-code","form-info","factor-list"])])):L("",!0),t(r).insuredFactor.length?(c(),A("div",Mt,[D(Ue,{title:"\u88AB\u4FDD\u4EBA"}),D(Te,{ref_key:"insuredRef",ref:E,"insured-code":(j=t(r).riskBaseInfo)==null?void 0:j.insuredCode,"form-info":i.value.personVO,"factor-list":t(r).insuredFactor},null,8,["insured-code","form-info","factor-list"])])):L("",!0),O("div",Yt,[t(r).riskData.length?(c(),A("div",jt,[D(m,{ref_key:"riskFormRef",ref:b,"input-align":"right","error-message-align":"right"},{default:v(()=>[D(qe,{"risk-info":s.value[0],"origin-data":t(r).riskData,"pick-factor":e},null,8,["risk-info","origin-data"])]),_:1},512)])):L("",!0),t(r).riskPlanData.length?(c(),A("div",Gt,[D(m,{ref_key:"riskFormRef",ref:b,"input-align":"right","error-message-align":"right"},{default:v(()=>[D(p,{active:t(r).currentPlan,"onUpdate:active":u[0]||(u[0]=P=>t(r).currentPlan=P),type:"card"},{default:v(()=>[(c(!0),A(W,null,z(t(r).riskPlanData,P=>(c(),g(k,{key:P.planCode,name:P.planCode,title:P.planName},{default:v(()=>[P.planCode===t(r).currentPlan?(c(),g(qe,{key:0,"risk-info":s.value[P.planCode],"origin-data":P.riskDetailVOList,"pick-factor":e},null,8,["risk-info","origin-data"])):L("",!0)]),_:2},1032,["name","title"]))),128))]),_:1},8,["active"])]),_:1},512)])):L("",!0)]),O("div",Zt,[O("span",Wt,q(t(r).trialResult.premium||0),1),t(r).canTrial?(c(),g(C,{key:0,type:"primary",onClick:V},{default:v(()=>[zt]),_:1})):(c(),g(C,{key:1,type:"primary",onClick:V},{default:v(()=>[Qt]),_:1}))])]}),_:1})}}});var ta=M(Jt,[["__scopeId","data-v-60dd036a"]]);export{ta as default};

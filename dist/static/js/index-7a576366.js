var ue=Object.defineProperty;var H=Object.getOwnPropertySymbols;var ae=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var Y=(l,t,e)=>t in l?ue(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e,J=(l,t)=>{for(var e in t||(t={}))ae.call(t,e)&&Y(l,e,t[e]);if(H)for(var e of H(t))le.call(t,e)&&Y(l,e,t[e]);return l};import{g as O,ak as K,O as X,E as F,al as ie,r as _,j as n,k as v,m as c,p as h,n as T,G as L,z as E,J as R,F as M,t as A,am as ce,A as k,C as Q,T as de,ac as pe,H as _e,a9 as z,aa as me,ab as fe,y as N,h as Z,M as ve}from"./vendor-e057bbeb.js";import{_ as U,j as ge,l as ye,r as ee}from"./index-8e0d8448.js";import{g as Ce,s as he}from"./inform-0cdb35ef.js";import{s as be}from"./useStorage-33d3daac.js";const ke={class:"problem"},Se={class:"footer-button"},Ee=Q("\u63D0\u4EA4"),Ie=O({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(l,{emit:t}){const e=l;K();const S=X(),o=F([]),{questionnaireType:m}=S.query,{orderNo:I="2022021815432987130620",productCode:B="CQ75CQ76",templateId:D=1,agentCode:g="65434444",orderId:b=13005,tenantId:r=9991000007}=S.query,w={"1":"\u6295\u4FDD\u4EBA","2":"\u88AB\u4FDD\u4EBA","3":"\u4EE3\u7406\u4EBA"},f=F([]),V=a=>{o.value[a].toggle()},P=a=>a?JSON.parse(a).map(u=>({title:u.value,value:u.uid})):[],y=()=>{f.value.some(u=>{var d;return["undefined",""].includes(u.singleAnswer)||((d=u.multipleChoose)==null?void 0:d.length)===0})?de("\u8BF7\u5B8C\u6210\u6240\u6709\u9898\u76EE\u8FDB\u884C\u4E0B\u4E00\u6B65"):t("onSubmitCurrentStatus",1,JSON.stringify(f.value))},q=a=>JSON.parse(a),s=()=>{ee({orderNo:I,saleUserId:g,tenantId:r}).then(({code:a,data:u})=>{if(a==="10000"){const d=u.tenantOrderNoticeList.findIndex(p=>p.isDone===1&&+p.objectId===e.currentPageInfo[0].questionnaireId);d!==-1?f.value=q(u.tenantOrderNoticeList[d].content):f.value=e.currentPageInfo.map(p=>p.questionType===2?J({multipleChoose:[]},p):J({singleAnswer:p.questionType===3?0:""},p))}})};return ie(()=>{o.value=[],s()}),(a,u)=>{const d=_("van-radio"),p=_("van-cell"),$=_("van-cell-group"),W=_("van-radio-group"),te=_("van-checkbox"),ne=_("van-checkbox-group"),oe=_("van-field"),se=_("van-button"),re=_("ProPageWrap");return n(),v(re,{class:"com-question"},{default:c(()=>[h(ye,{title:`${w[k(m)]}\u5065\u5EB7\u544A\u77E5\u4E66`},{default:c(()=>[(n(!0),T(M,null,L(f.value,(i,G)=>(n(),T("div",{key:G,class:"question-item"},[E("div",ke,R(G+1)+". "+R(i.title),1),i.questionType===1?(n(),v(W,{key:0,modelValue:i.singleAnswer,"onUpdate:modelValue":C=>i.singleAnswer=C},{default:c(()=>[h($,{inset:""},{default:c(()=>[(n(!0),T(M,null,L(P(i.options),(C,x)=>(n(),v(p,{key:x,title:C.title,clickable:"",onClick:j=>i.singleAnswer=x},{"right-icon":c(()=>[h(d,{name:x},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):A("",!0),i.questionType===2?(n(),v(ne,{key:1,modelValue:i.multipleChoose,"onUpdate:modelValue":C=>i.multipleChoose=C},{default:c(()=>[h($,{inset:""},{default:c(()=>[(n(!0),T(M,null,L(P(i.options),(C,x)=>(n(),v(p,{key:C.uid,clickable:"",title:C.title,onClick:j=>V(x)},{"right-icon":c(()=>[h(te,{ref_for:!0,ref:j=>o.value[x]=j,shape:"square",name:x,onClick:u[0]||(u[0]=ce(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):A("",!0),i.questionType===3?(n(),v(ge,{key:2,modelValue:i.singleAnswer,"onUpdate:modelValue":C=>i.singleAnswer=C,options:[{label:"\u662F",value:"Y"},{label:"\u5426",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):A("",!0),i.questionType===4?(n(),v($,{key:3,inset:""},{default:c(()=>[h(oe,{modelValue:i.singleAnswer,"onUpdate:modelValue":C=>i.singleAnswer=C,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):A("",!0)]))),128))]),_:1},8,["title"]),E("div",Se,[h(se,{type:"primary",block:"",onClick:y},{default:c(()=>[Ee]),_:1})])]),_:1})}}});var we=U(Ie,[["__scopeId","data-v-40ec5510"]]);const Pe={class:"com-document"},$e={class:"title"},Te={class:"content"},Ae={class:"footer-button"},De=Q("\u4E86\u89E3\u5E76\u7EE7\u7EED"),xe=O({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(l,{emit:t}){const e=l;return(S,o)=>{const m=_("van-button"),I=_("ProPageWrap"),B=pe("dompurify-html");return n(),v(I,null,{default:c(()=>{var D,g;return[E("div",Pe,[E("div",$e,R((D=e.currentPageInfo[0])==null?void 0:D.title),1),_e(E("div",Te,null,512),[[B,(g=e.currentPageInfo[0])==null?void 0:g.content]]),E("div",Ae,[h(m,{type:"primary",onClick:o[0]||(o[0]=b=>t("onSubmitCurrentStatus",1))},{default:c(()=>[De]),_:1})])])]}),_:1})}}});var Ve=U(xe,[["__scopeId","data-v-c7bd0da4"]]);const Qe={class:"com-pdf-viewer"},Be=["id","isee_pdf"],qe={class:"footer-button"},Ne=Q("\u90E8\u5206\u4E3A\u662F"),Oe=Q("\u4EE5\u4E0A\u7686\u5426"),Fe=O({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(l,{emit:t}){const e=l;z.exports.GlobalWorkerOptions.workerSrc=me;const S=fe(),o=F(!1),m=F(!0),I=N(()=>["png","jpg","jpeg"].some(g=>e.url.includes(g))),B=()=>{const g=document.getElementById(S);if(g.hasChildNodes()){m.value=!1;return}z.exports.getDocument({url:e.url}).promise.then(r=>{const w=r.numPages;for(let f=1;f<=w;f++)r.getPage(f).then(V=>{const P=V.getViewport({scale:1}),y=document.createElement("canvas"),q=y.getContext("2d");y.width=P.width,y.height=P.height,y.style.width="100%",g.append(y);const s={canvasContext:q,viewport:P};V.render(s),m.value=!1})})},D=async()=>{o.value=!0,setTimeout(()=>{B()},0)};return Z(()=>{D()}),(g,b)=>{const r=_("van-image"),w=_("van-button");return n(),T("div",Qe,[k(I)?(n(),v(r,{key:0,width:"100%",height:"80vh",fit:"contain",src:e.url},null,8,["src"])):(n(),T("div",{key:1,id:k(S),isee_pdf:g.pdfUrl,class:"pdf-wapper"},null,8,Be)),E("div",qe,[h(w,{plain:"",type:"primary",onClick:b[0]||(b[0]=f=>t("onSubmitCurrentStatus",2))},{default:c(()=>[Ne]),_:1}),h(w,{type:"primary",onClick:b[1]||(b[1]=f=>t("onSubmitCurrentStatus",1))},{default:c(()=>[Oe]),_:1})])])}}});var Ue=U(Fe,[["__scopeId","data-v-517754da"]]);const je={class:"iframe-wrap"},Je=["src"],Le={class:"footer-button"},Me=Q("\u90E8\u5206\u4E3A\u662F"),Re=Q("\u4EE5\u4E0A\u7686\u5426"),We=O({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(l,{emit:t}){const e=l;return(S,o)=>{const m=_("van-button");return n(),T("div",je,[E("iframe",{src:e.url,frameborder:"0"},null,8,Je),E("div",Le,[h(m,{plain:"",type:"primary",onClick:o[0]||(o[0]=I=>t("onSubmitCurrentStatus",2))},{default:c(()=>[Me]),_:1}),h(m,{type:"primary",onClick:o[1]||(o[1]=I=>t("onSubmitCurrentStatus",1))},{default:c(()=>[Re]),_:1})])])}}});var Ge=U(We,[["__scopeId","data-v-1ac7e729"]]);const He={1:4,2:5,3:9},Ye={class:"com-health-notice"},tt=O({setup(l){const t=K(),e=X(),S=be.get("questionData"),{questionnaireType:o}=e.query,{orderNo:m="2022021815432987130620",productCode:I="CQ75CQ76",templateId:B=1,agentCode:D="65434444",orderId:g=13005,tenantId:b=9991000007}=e.query,r=ve({pageData:{},currentQuestionInfo:[]}),w=N(()=>o==="2"),f=N(()=>{var s;return o==="1"&&[1].includes((s=r.currentQuestionInfo[0])==null?void 0:s.textType)}),V=N(()=>{var s;return o==="1"&&[2].includes((s=r.currentQuestionInfo[0])==null?void 0:s.textType)}),P=N(()=>{var s;return o==="1"&&[3].includes((s=r.currentQuestionInfo[0])==null?void 0:s.textType)}),y=(s,a)=>{var p;const{id:u,objectType:d}=S;he({content:a||((p=r.currentQuestionInfo[0])==null?void 0:p.content),contentType:o,isDone:s,noticeType:He[d],objectId:u,objectType:d,orderId:r.pageData.id,orderNo:m,tenantId:b}).then(({code:$,data:W})=>{console.log($),$==="10000"&&t.go(-1)})},q=()=>{ee({orderNo:m,saleUserId:D,tenantId:b}).then(({code:s,data:a})=>{s==="10000"&&Object.assign(r.pageData,a)})};return Z(()=>{q();const{insurerCode:s,id:a,objectType:u,productCategory:d}=S;Ce({insurerCode:s,id:a,objectType:u,productCategory:d,orderNo:m,tenantId:b}).then(({code:p,data:$})=>{p==="10000"&&(r.currentQuestionInfo=$)})}),(s,a)=>{var u,d;return n(),T("div",Ye,[k(w)?(n(),v(we,{key:0,"current-page-info":k(r).currentQuestionInfo,onOnSubmitCurrentStatus:y},null,8,["current-page-info"])):A("",!0),k(V)?(n(),v(Ve,{key:1,"current-page-info":k(r).currentQuestionInfo,onOnSubmitCurrentStatus:y},null,8,["current-page-info"])):A("",!0),k(f)?(n(),v(Ue,{key:2,url:(u=k(r).currentQuestionInfo[0])==null?void 0:u.content,onOnSubmitCurrentStatus:y},null,8,["url"])):A("",!0),k(P)?(n(),v(Ge,{key:3,url:(d=k(r).currentQuestionInfo[0])==null?void 0:d.content,onOnSubmitCurrentStatus:y},null,8,["url"])):A("",!0)])}}});export{tt as default};

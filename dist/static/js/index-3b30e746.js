var Ge=Object.defineProperty,Je=Object.defineProperties;var Qe=Object.getOwnPropertyDescriptors;var ye=Object.getOwnPropertySymbols;var Xe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var be=(t,a,o)=>a in t?Ge(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,ae=(t,a)=>{for(var o in a||(a={}))Xe.call(a,o)&&be(t,o,a[o]);if(ye)for(var o of ye(a))Ze.call(a,o)&&be(t,o,a[o]);return t},ne=(t,a)=>Je(t,Qe(a));import{g as ee,Q as Ne,E as U,y as Z,j as _,n as E,z as i,J as x,p as d,L as Se,A as n,B as et,a4 as _e,a5 as he,F as q,G,k as J,C as X,t as Q,r as M,m as w,M as $e,_ as ce,a9 as tt,O as ot,h as at,af as nt,H as lt,l as st,T as rt}from"./vendor-894ab2f1.js";import{_ as te,d as ut,e as Ae,V as re,i as ue,C as Fe,a as ie,j as it,a2 as Ie,$ as dt,m as ct,G as Ce,a1 as we}from"./index-51274998.js";import{P as mt}from"./index-290728d3.js";import{c as ft}from"./close-df102554.js";import{R as me,S as Ee,a as pt,f as de}from"./infoCollection-b0426750.js";import{A as _t}from"./bankCard-b0679059.js";import{a as ht,b as Be,t as vt,g as Dt}from"./utils-bef5abd0.js";import{b as fe,v as gt}from"./validator-ebd71d12.js";import{a as Ve}from"./order-b675ac95.js";import{p as Te,i as yt,s as bt,a as Ft,u as It,b as Ct}from"./trial-9bc4659d.js";import{p as wt}from"./product-3c1a6d11.js";import{t as Et}from"./theme-eeb93d73.js";import"./trial-04fa888a.js";const Bt=t=>(_e("data-v-47f4f4ca"),t=t(),he(),t),Vt={class:"com-question-item"},Tt={class:"question"},Pt=Bt(()=>i("div",{class:"icon"},x("?"),-1)),Ot={class:"title"},Nt=ee({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(t){const[a,o]=Ne(!1),l=U(),e=()=>{o()},u=Z(()=>a.value?ut(l.value):0);return(y,m)=>(_(),E("div",Vt,[i("div",Tt,[Pt,i("div",Ot,x(t.question),1),d(Ae,{name:"down",class:Se(["arrow-icon",{show:n(a)}]),onClick:e},null,8,["class"])]),i("div",{ref_key:"answerDom",ref:l,class:"answer",style:et({height:`${n(u)}px`})},x(t.answer),5)]))}});var St=te(Nt,[["__scopeId","data-v-47f4f4ca"]]);const $t={class:"com-question"},At=ee({props:{list:{type:Array,default:()=>[]}},setup(t){const a=t,[o,l]=Ne(!1),e=()=>{l()},u=Z(()=>a.list.length<=4||o.value?a.list:a.list.slice(0,4));return(y,m)=>(_(),E("div",$t,[(_(!0),E(q,null,G(n(u),($,B)=>(_(),J(St,{key:B,question:$.title,answer:$.desc},null,8,["question","answer"]))),128)),t.list.length>4?(_(),E("div",{key:0,class:"show-more",onClick:e},[X(x(n(o)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),d(Ae,{name:"down",class:Se(["icon",{showMore:n(o)}])},null,8,["class"])])):Q("",!0)]))}});var Lt=te(At,[["__scopeId","data-v-40dd0994"]]);/*!
  * @intlify/shared v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const kt=t=>typeof t=="number"&&isFinite(t),Ut=t=>Y(t)&&Object.keys(t).length===0,Mt=Object.assign;let Pe;const xt=()=>Pe||(Pe=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),le=Array.isArray,W=t=>typeof t=="string",pe=t=>typeof t=="boolean",Ht=Object.prototype.toString,Rt=t=>Ht.call(t),Y=t=>Rt(t)==="[object Object]";/*!
  * @intlify/message-compiler v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */function qt(t,a,o={}){const{domain:l,messages:e,args:u}=o,y=t,m=new SyntaxError(String(y));return m.code=t,a&&(m.location=a),m.domain=l,m}/*!
  * @intlify/devtools-if v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Wt={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * @intlify/core-base v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */let Yt=null;Wt.FunctionTranslate;function jt(t){return a=>Yt}const Kt=-1;function zt(t,a,o,l,e){const{missing:u,onWarn:y}=t;if(u!==null){const m=u(t,o,a,e);return W(m)?m:a}else return a}function Gt(t,a,o){const l=t;l.__localeChainCache||(l.__localeChainCache=new Map);let e=l.__localeChainCache.get(o);if(!e){e=[];let u=[o];for(;le(u);)u=Oe(e,u,a);const y=le(a)?a:Y(a)?a.default?a.default:null:a;u=W(y)?[y]:y,le(u)&&Oe(e,u,!1),l.__localeChainCache.set(o,e)}return e}function Oe(t,a,o){let l=!0;for(let e=0;e<a.length&&pe(l);e++){const u=a[e];W(u)&&(l=Jt(t,a[e],o))}return l}function Jt(t,a,o){let l;const e=a.split("-");do{const u=e.join("-");l=Qt(t,u,o),e.splice(-1,1)}while(e.length&&l===!0);return l}function Qt(t,a,o){let l=!1;if(!t.includes(a)&&(l=!0,a)){l=a[a.length-1]!=="!";const e=a.replace(/!/g,"");t.push(e),(le(o)||Y(o))&&o[e]&&(l=o[e])}return l}function Xt(t){return qt(t,null,void 0)}function Zt(t,...a){const{numberFormats:o,unresolving:l,fallbackLocale:e,onWarn:u}=t,{__numberFormatters:y}=t,[m,$,B,D]=eo(...a),s=pe(B.missingWarn)?B.missingWarn:t.missingWarn;pe(B.fallbackWarn)?B.fallbackWarn:t.fallbackWarn;const F=!!B.part,H=W(B.locale)?B.locale:t.locale,j=Gt(t,e,H);if(!W(m)||m==="")return new Intl.NumberFormat(H).format($);let K={},A,h=null;const r="number format";for(let N=0;N<j.length&&(A=j[N],K=o[A]||{},h=K[m],!Y(h));N++)zt(t,m,A,s,r);if(!Y(h)||!W(A))return l?Kt:m;let I=`${A}__${m}`;Ut(D)||(I=`${I}__${JSON.stringify(D)}`);let L=y.get(I);return L||(L=new Intl.NumberFormat(A,Mt({},h,D)),y.set(I,L)),F?L.formatToParts($):L.format($)}function eo(...t){const[a,o,l,e]=t;let u={},y={};if(!kt(a))throw Xt(14);const m=a;return W(o)?u.key=o:Y(o)&&(u=o),W(l)?u.locale=l:Y(l)&&(y=l),Y(e)&&(y=e),[u.key||"",m,u,y]}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(xt().__INTLIFY_PROD_DEVTOOLS__=!1);const Le=t=>(_e("data-v-c8a8e288"),t=t(),he(),t),to={key:0,class:"pro-modal"},oo=Le(()=>i("div",{class:"pro-overlay"},null,-1)),ao={class:"pro-modal-wrapper"},no={class:"pro-modal-body"},lo={class:"pro-modal-content"},so=Le(()=>i("p",{class:"tips"},"\u5347\u7EA7\u540E\u7684\u4FDD\u969C\u5C06\u4E8E\u7B2C\u4E8C\u671F\u4FDD\u8D39\u6263\u8D39/\u7F34\u8D39\u6210\u529F\u540E\u751F\u6548",-1)),ro={class:"pro-modal-content"},uo={class:"product-attachment-list"},io=X(" \u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),co={key:0,class:"dun-hao"},mo=["src"],fo=ee({props:{bg:{type:String,default:""},btn:{type:String,default:""},isShow:{type:Boolean,default:()=>{}},attachmentList:{type:Array,default:()=>[]},premium:{type:Zt,default:0}},emits:["on-confirm","on-close"],setup(t,{emit:a}){const o=t,l=()=>{a("on-close")},e=()=>{a("on-confirm")};return(u,y)=>{const m=M("ProPDFviewer");return o.isShow?(_(),E("div",to,[oo,i("div",ao,[i("div",no,[i("div",lo,[i("p",null,"\u6BCF\u6708\u4FDD\u8D39\u4EC5\u9700"+x(o.premium)+"\u5143\uFF0C\u65E0\u9700\u91CD\u590D\u6295\u4FDD",1),so]),i("div",{class:"pro-modal-btn",onClick:e},"\u4E00\u952E\u5347\u7EA7"),i("div",ro,[i("div",uo,[io,(_(!0),E(q,null,G(o.attachmentList,($,B)=>(_(),J(m,{key:B,class:"file-name",title:`\u300A${$.attachmentName}\u300B`,content:$.attachmentUri,type:"pdf"},{default:w(()=>[B!==(o.attachmentList||[]).length-1?(_(),E("span",co,"\u3001")):Q("",!0)]),_:2},1032,["title","content"]))),128))])])]),i("div",{class:"pro-modal-close",onClick:l},[i("img",{src:n(ft)},null,8,mo)])])])):Q("",!0)}}});var po=te(fo,[["__scopeId","data-v-c8a8e288"]]);const ve=t=>(_e("data-v-07ffa5c0"),t=t(),he(),t),_o=ve(()=>i("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),ho=ve(()=>i("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),vo=ve(()=>i("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),Do={class:"attachment-list"},go={class:"product-attachment-list"},yo=X(" \u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),bo={key:0,class:"dun-hao"},Fo={class:"rate-attachment-list"},Io=X(" *\u4FDD\u8D39\u4E0E\u88AB\u4FDD\u4EBA\u5E74\u9F84\u3001\u533B\u4FDD\u60C5\u51B5\u76F8\u5173\uFF0C\u8BE6\u89C1 "),Co={key:0,class:"dun-hao"},wo=ee({props:{disable:{type:Boolean,default:!1},holderDisable:{type:Boolean,default:!1},paymentMethodDisable:{type:Boolean,default:!1},premium:{default:0},productDetail:{default:{}},formInfo:{default:()=>({})}},setup(t,{expose:a}){const o=t,l=U({}),e=$e({insureDisable:!0,formInfo:o.formInfo}),u=D=>fe(D)?!0:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u59D3\u540D",y=Z(()=>{var D,s;return(s=(D=o.productDetail)==null?void 0:D.tenantProductInsureVO)==null?void 0:s.attachmentVOList.filter(F=>F.attachmentName==="\u8D39\u7387\u8868")}),m=Z(()=>{var D,s;return((s=(D=o.productDetail)==null?void 0:D.tenantProductInsureVO)==null?void 0:s.attachmentVOList.filter(F=>F.attachmentName!=="\u8D39\u7387\u8868"))||[]}),$=()=>new Promise((D,s)=>{l==null||l.value.validate().then(()=>{D("")},()=>{s()})}),B=()=>{o.disable||(e.formInfo.renewalDK=!e.formInfo.renewalDK)};return ce(()=>e.formInfo.insured.relationToHolder,(D,s)=>{o.disable||D!==s&&(D.toString()===me.SELF?(e.formInfo.insured={certNo:e.formInfo.holder.certNo,name:e.formInfo.holder.name,socialFlag:e.formInfo.holder.socialFlag,relationToHolder:D},e.insureDisable=!0):(e.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:D},e.insureDisable=!1))}),ce(()=>e.formInfo.holder,()=>{e.formInfo.insured.relationToHolder===me.SELF&&Object.assign(e.formInfo.insured,e.formInfo.holder)},{deep:!0,immediate:!0}),a({validateForm:$}),(D,s)=>{const F=M("ProField"),H=M("ProRadioButton"),j=M("ProPicker"),K=M("ProTabButton"),A=M("ProPDFviewer"),h=M("ProForm");return _(),J(h,{ref_key:"formRef",ref:l},{default:w(()=>[i("div",null,[_o,d(F,{modelValue:n(e).formInfo.holder.name,"onUpdate:modelValue":s[0]||(s[0]=r=>n(e).formInfo.holder.name=r),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",maxlength:"10",rules:[{validator:u}],"is-view":o.holderDisable||o.disable},null,8,["modelValue","rules","is-view"]),d(F,{modelValue:n(e).formInfo.holder.certNo,"onUpdate:modelValue":s[1]||(s[1]=r=>n(e).formInfo.holder.certNo=r),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[n(re).ID_CARD],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),d(F,{modelValue:n(e).formInfo.holder.mobile,"onUpdate:modelValue":s[2]||(s[2]=r=>n(e).formInfo.holder.mobile=r),label:"\u624B\u673A\u53F7",name:"mobile",required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",maxlength:"11","validate-type":[n(re).PHONE],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),d(F,{modelValue:n(e).formInfo.holder.socialFlag,"onUpdate:modelValue":s[4]||(s[4]=r=>n(e).formInfo.holder.socialFlag=r),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:w(()=>[d(H,{modelValue:n(e).formInfo.holder.socialFlag,"onUpdate:modelValue":s[3]||(s[3]=r=>n(e).formInfo.holder.socialFlag=r),disabled:o.disable,options:n(Ee)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),d(ue),i("div",null,[ho,d(F,{modelValue:n(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":s[6]||(s[6]=r=>n(e).formInfo.insured.relationToHolder=r),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:w(()=>[d(H,{modelValue:n(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":s[5]||(s[5]=r=>n(e).formInfo.insured.relationToHolder=r),disabled:o.disable,options:n(pt)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"]),d(F,{modelValue:n(e).formInfo.insured.name,"onUpdate:modelValue":s[7]||(s[7]=r=>n(e).formInfo.insured.name=r),label:"\u59D3\u540D",name:"name",required:"",maxlength:"10",rules:[{validator:u}],"is-view":n(e).insureDisable||o.disable},null,8,["modelValue","rules","is-view"]),d(F,{modelValue:n(e).formInfo.insured.certNo,"onUpdate:modelValue":s[8]||(s[8]=r=>n(e).formInfo.insured.certNo=r),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[n(re).ID_CARD],"is-view":n(e).insureDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),d(F,{modelValue:n(e).formInfo.insured.socialFlag,"onUpdate:modelValue":s[10]||(s[10]=r=>n(e).formInfo.insured.socialFlag=r),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:w(()=>[d(H,{modelValue:n(e).formInfo.insured.socialFlag,"onUpdate:modelValue":s[9]||(s[9]=r=>n(e).formInfo.insured.socialFlag=r),disabled:o.disable||n(e).insureDisable,options:n(Ee)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),d(ue),i("div",null,[vo,d(F,{label:"\u6BCF\u6708\u4FDD\u8D39",class:"pro-field","is-view":!0},{input:w(()=>[X(x(n(ht)(o.premium))+" \u5143/\u6708 \u517112\u671F",1)]),_:1}),d(j,{modelValue:n(e).formInfo.paymentMethod,"onUpdate:modelValue":s[11]||(s[11]=r=>n(e).formInfo.paymentMethod=r),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":n(_t),"is-view":o.disable||n(e).formInfo.paymentMethodDisable,required:""},null,8,["modelValue","data-source","is-view"]),d(F,{label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",class:"pro-field",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9",border:!1},{input:w(()=>[d(K,{disabled:o.allDisabled,title:"\u514D\u8D39\u5F00\u901A",active:n(e).formInfo.renewalDK,onClick:B},null,8,["disabled","active"])]),_:1}),i("div",Do,[i("div",go,[yo,(_(!0),E(q,null,G(n(m),(r,I)=>(_(),J(A,{key:I,class:"file-name",title:`\u300A${r.attachmentName}\u300B`,content:r.attachmentUri,type:"pdf"},{default:w(()=>{var L,N;return[I!==(((N=(L=t.productDetail)==null?void 0:L.tenantProductInsureVO)==null?void 0:N.attachmentVOList)||[]).length-1?(_(),E("span",bo,"\u3001")):Q("",!0)]}),_:2},1032,["title","content"]))),128))]),i("div",Fo,[Io,(_(!0),E(q,null,G(n(y),(r,I)=>(_(),J(A,{key:I,class:"file-name",title:`\u300A${r.attachmentName}\u300B`,content:r.attachmentUri,type:"pdf"},{default:w(()=>{var L,N;return[I!==(((N=(L=t.productDetail)==null?void 0:L.tenantProductInsureVO)==null?void 0:N.attachmentVOList)||[]).length-1?(_(),E("span",Co,"\u3001")):Q("",!0)]}),_:2},1032,["title","content"]))),128))])])]),d(ue)]),_:1},512)}}});var Eo=te(wo,[["__scopeId","data-v-07ffa5c0"]]);const Bo={class:"page-product-detail"},Vo={class:"info"},To=["src"],Po={class:"guarantee-list"},Oo={key:0,class:"basic"},No={class:"tab-1"},So=["src"],$o={class:"footer-button"},Ao={class:"price"},Lo=X(" \u603B\u4FDD\u8D39"),ko={class:"guarantee-list"},Uo={class:"title"},Mo={class:"content"},xo=ee({setup(t){const a=tt(),o=ot(),{productCode:l="BWYL2021",tenantId:e,orderNo:u,phoneNo:y,agentCode:m,saleChannelId:$,paymentMethod:B,certNo:D,name:s,pageCode:F}=o.query,H=U([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),j=U(),K=U(0),A=U(!1),h=U(),r=U(),I=U(),L=!!(s&&D&&y)||!!u,N=F==="payBack",V=$e({holder:{certNo:D,certType:Fe.CERT,mobile:y,name:s,socialFlag:de.HAS},insured:{certNo:D,certType:Fe.CERT,name:s,socialFlag:de.HAS,relationToHolder:me.SELF},paymentMethod:B,paymentMethodDisable:!!B,renewalDK:!0}),se=U(!1),R=U(!1),ke=()=>{se.value=!1},Ue=()=>{a.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:ne(ae({},o.query),{tenantId:e,productCode:"BWYL2022",orderNo:u,agentCode:m})})},Me=()=>{A.value=!0},oe=Z(()=>{var p,f,c,v,g,T,S;return((c=(f=(p=h.value)==null?void 0:p.tenantProductInsureVO)==null?void 0:f.guaranteeList)==null?void 0:c.length)?(g=(v=h.value)==null?void 0:v.tenantProductInsureVO)==null?void 0:g.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(S=(T=h.value)==null?void 0:T.tenantProductInsureVO)==null?void 0:S.titleAndDescVOS}]}),De=()=>{const{holder:{certNo:p,mobile:f,name:c,socialFlag:v},insured:{certNo:g,name:T,socialFlag:S,relationToHolder:b},paymentMethod:P}=V,O=Ce(p)&&gt(f)&&fe(c)&&!!v,C=Ce(g)&&fe(T)&&!!S&&!!b;return!!(O&&C&&!!P)},xe=async p=>{rt.loading({message:"\u6838\u4FDD\u4E2D...",forbidClick:!0});try{const f=await It(p),{code:c}=f;if(c==="10000"){const v=await Ct({orderNo:p.orderNo,tenantId:e}),{data:g}=v;c==="10000"?window.location.href=g:R.value=!1}else R.value=!1}catch{R.value=!1}},He=p=>`${we}/chuangxin/baigebao/productDetail?tenantId=${e}&productCode=${l}&orderNo=${p}&agentCode=${m}&pageCode=payBack`,Re=p=>`${we}/chuangxin/baigebao/payFail?tenantId=${e}&orderNo=${p}&agentCode=${m}`,qe=async p=>{const f=Dt({tenantId:e,saleUserId:m,saleChannelId:$,detail:h.value,insureDetail:r.value,paymentMethod:V.paymentMethod,renewalDK:V.renewalDK?"Y":"N",successJumpUrl:"",premium:I.value,holder:V.holder,insured:V.insured,tenantOrderRiskList:p,orderStatus:"",orderTopStatus:""});try{const c=await bt(f),{code:v,data:g}=c;v==="10000"&&xe(ne(ae({},f),{orderNo:g.data,extInfo:{extraInfo:{renewalDK:V.renewalDK,paymentMethod:V.paymentMethod,successJumpUrl:He(g.data),failUrl:Re(g.data)}}}))}catch{R.value=!1}},ge=async()=>{const{calcData:p,riskVOList:f}=Be({holder:V.holder,insured:V.insured,tenantId:e,productDetail:h.value,insureDetail:r.value}),c=async()=>{const v=await Te(p),{code:g,data:T}=v;return g==="10000"?(I.value=T.premium,{condition:f,data:T}):{}};c(),st.exports.debounce(c,500,{trailing:!0})},We=()=>new Promise((p,f)=>{var c,v;(v=(c=j.value)==null?void 0:c.validateForm)==null||v.call(c).then(async()=>{const{calcData:g,riskVOList:T}=Be({holder:V.holder,insured:V.insured,tenantId:e,productDetail:h.value,insureDetail:r.value}),S=await Te(g),{code:b,data:P}=S;b==="10000"?(I.value=P.premium,p({condition:T,data:P})):f(new Error)}).catch(()=>{R.value=!1})}),Ye=async()=>{var p;if(N){a.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:ne(ae({},o.query),{tenantId:e,productCode:"BWYL2022",orderNo:u,agentCode:m})});return}R.value=!0;try{const{condition:f,data:c}=await We(),v={},g=(S=[])=>{(S||[]).forEach(b=>{var P;v[b.riskCode]=b,((P=b.riskPremiumDetailVOList)==null?void 0:P.length)&&g(b.riskPremiumDetailVOList)})};g(c.riskPremiumDetailVOList);const T=vt({tenantId:e,riskList:f,riskPremium:v,productId:(p=h.value)==null?void 0:p.id});qe(T)}catch{R.value=!1}};ce(()=>V,()=>{h.value&&r.value&&!N&&De()&&ge()},{deep:!0,immediate:!0});const je=async()=>{var v,g,T,S,b,P,O;const p=await Ft({orderNo:u,tenantId:e}),{code:f,data:c}=p;if(f==="10000"){const{tenantOrderHolder:C,tenantOrderInsuredList:k,extInfo:z}=c;if(V.holder={certNo:C.certNo,certType:C.certType,mobile:C.mobile,name:C.name,socialFlag:de.HAS},V.insured={certNo:k==null?void 0:k[0].certNo,certType:(v=k[0])==null?void 0:v.certType,name:(g=k[0])==null?void 0:g.name,socialFlag:(S=(T=k[0])==null?void 0:T.extInfo)==null?void 0:S.hasSocialInsurance,relationToHolder:(b=k[0])==null?void 0:b.relationToHolder},V.paymentMethod=z.extraInfo.paymentMethod,I.value=(O=(P=k[0])==null?void 0:P.tenantOrderProductList[0])==null?void 0:O.premium,V.renewalDK=z.extraInfo.renewalDK==="Y",F==="productDetail")return;(c.orderStatus===Ve.ACCEPT_POLICY||c.orderStatus===Ve.PAYMENT_SUCCESS)&&(se.value=!0)}},Ke=async()=>{const p=wt({productCode:l,withInsureInfo:!0,tenantId:e}),f=yt({productCode:l});await Promise.all([p,f]).then(([c,v])=>{c.code==="10000"&&(h.value=c.data),v.code==="10000"&&(r.value=v.data)}),u?je():De()&&ge()};return at(()=>{Ke(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(p,f)=>{var T,S;const c=M("van-button"),v=M("van-config-provider"),g=nt("dompurify-html");return _(),E(q,null,[d(v,{"theme-vars":n(Et)},{default:w(()=>{var b,P;return[i("div",Bo,[i("div",Vo,[i("img",{src:(P=(b=h.value)==null?void 0:b.tenantProductInsureVO)==null?void 0:P.banner[0],class:"banner"},null,8,To),i("div",Po,[d(ie,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:Me},{default:w(()=>{var O,C,k;return[h.value&&((O=h.value)==null?void 0:O.tenantProductInsureVO)?(_(),E("div",Oo,[(_(!0),E(q,null,G((k=(C=n(oe))==null?void 0:C[K.value])==null?void 0:k.titleAndDescVOS,(z,ze)=>(_(),J(it,{key:ze,class:"guarantee-item",title:z.title,content:z.desc,border:!1},null,8,["title","content"]))),128))])):Q("",!0)]}),_:1})])]),d(Ie,{class:"tabs",list:H.value,sticky:"",scrollspy:""},{tab1:w(()=>[d(Eo,{ref_key:"formRef",ref:j,"holder-disable":n(L),disable:N,"form-info":n(V),premium:I.value,"product-detail":h.value},null,8,["holder-disable","form-info","premium","product-detail"])]),tab2:w(()=>{var O,C;return[i("div",No,[(_(!0),E(q,null,G(((C=(O=h.value)==null?void 0:O.tenantProductInsureVO)==null?void 0:C.spec)||[],(k,z)=>(_(),E("img",{key:z,src:k,class:"detail-img"},null,8,So))),128))])]}),tab3:w(()=>[d(ie,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:w(()=>{var O,C;return[d(mt,{list:(C=(O=h.value)==null?void 0:O.tenantProductInsureVO)==null?void 0:C.settlementProcessList},null,8,["list"])]}),_:1}),d(ie,{title:"\u5E38\u89C1\u95EE\u9898"},{default:w(()=>{var O,C;return[d(Lt,{list:(C=(O=h.value)==null?void 0:O.tenantProductInsureVO)==null?void 0:C.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),i("div",$o,[i("div",Ao,[Lo,i("span",null,"\uFFE5"+x(n(dt)(I.value))+"/\u6708",1)]),d(c,{type:"primary",class:"right",disabled:R.value,onClick:Ye},{default:w(()=>[X(x(N?"\u5347\u7EA7\u4FDD\u969C":"\u7ACB\u5373\u6295\u4FDD"),1)]),_:1},8,["disabled"])])])]}),_:1},8,["theme-vars"]),d(ct,{show:A.value,"onUpdate:show":f[0]||(f[0]=b=>A.value=b),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:w(()=>[n(oe).length>1?(_(),J(Ie,{key:0,list:n(oe).map((b,P)=>({title:b.guaranteeType,slotName:`guarantee-${P}`})),class:"tab"},null,8,["list"])):Q("",!0),i("div",ko,[(_(!0),E(q,null,G(n(oe)[K.value].titleAndDescVOS,(b,P)=>(_(),E("div",{key:P,class:"guarantee-item"},[i("div",Uo,x(b.title),1),lt(i("div",Mo,null,512),[[g,b.content]])]))),128))])]),_:1},8,["show"]),d(po,{"is-show":se.value,premium:I.value,"attachment-list":(S=(T=h.value)==null?void 0:T.tenantProductInsureVO)==null?void 0:S.attachmentVOList,onOnConfirm:Ue,onOnClose:ke},null,8,["is-show","premium","attachment-list"])],64)}}});var ta=te(xo,[["__scopeId","data-v-50c65173"]]);export{ta as default};

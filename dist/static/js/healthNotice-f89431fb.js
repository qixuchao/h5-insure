import{d as e,h as t,g as a,i as n,av as o,o as s,c as i,b as r,u as c,l as u,bH as d,q as l,a as p,w as m,a8 as f,az as y,bI as I,bJ as v,aa as q,am as j,aB as b,aC as C,a9 as N}from"./index-8adcf781.js";import{b as T}from"./product-bf3a5d86.js";import{g as h}from"./utils-4e05533a.js";import{n as O}from"./nextStep-c9e3ce28.js";import{u as g}from"./useOrder-d39898d7.js";import{P as x,B as _}from"./constants-71331306.js";import"./infoCollection-16cd423f.js";import"./trial-31da5ed8.js";import"./core-aba111df.js";import"./constant-8927d485.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";const E=1;const k={class:"long-health-notice-wrap"},w={class:"footer-btn"},$=e({__name:"healthNotice",setup(e){const $=t(),P=a(),Q=g();console.log("route",$);const{productCode:S,orderNo:U,templateId:B,tenantId:J,preview:L,questionnaireId:V}=$.query,z=n({}),A=n(),D=n(),G=()=>{y.confirm({title:"",message:`${D.value||""}不符合当前产品投保条件，请选择其他产品`}).then((()=>{I()})).catch((()=>{}))},H=()=>{A.value?P.push({path:`${$.path}/${A.value}`,query:{...$.query,questionnaireId:A.value}}):L?b(x.QUESTION_NOTICE,$.query):O(Q.value,((e,t)=>{t===C.JUMP_PAGE&&N(e.nextPageCode,$.query)}))};return o((()=>{!L&&(async()=>{const{code:e,data:t}=await v({orderNo:U,tenantId:J});"10000"===e&&Object.assign(Q.value,t,{extInfo:{...t.extInfo,templateId:B,pageCode:x.QUESTION_NOTICE,buttonCode:_.QUESTION_NOTICE}})})(),(async()=>{var e;const{code:t,data:a}=await T({productCode:S});if("10000"===t){const{productQuestionnaireVOList:t}=a||{};let n=t[0]||{};if((null==t?void 0:t.length)>1)if(V){const e=t.findIndex((e=>`${e.id}`===V));t[e]&&(n=t[e]),t[e+1]&&(A.value=t[e+1].id)}else A.value=null==(e=t[1])?void 0:e.id;const{questionnaireDetailResponseVO:o,questionnaireId:s,questionnaireName:i}=n||{},{questions:r,basicInfo:c}=o||{},{objectType:u,questionnaireType:d}=c||{};if(D.value=u,d===E){const{content:e,textType:t}=(null==r?void 0:r[0])||{};z.value={content:e,contentType:h(`${t}`,e),questionnaireId:s,questionnaireName:i}}else z.value={content:r,contentType:"question",questionnaireId:s,questionnaireName:i}}})()})),(e,t)=>{const a=q,n=j;return s(),i("div",k,[r(a),c(z).content?(s(),u(d,{key:0,type:c(z).contentType,content:c(z).content},null,8,["type","content"])):l("",!0),p("div",w,[r(n,{plain:"",type:"primary",onClick:G},{default:m((()=>[f("部分为是")])),_:1}),r(n,{type:"primary",onClick:H},{default:m((()=>[f("以上皆否")])),_:1})])])}}});export{$ as default};

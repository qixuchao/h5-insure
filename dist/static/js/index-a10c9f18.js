import{ref as e,reactive as o,onBeforeUpdate as t,watch as r,computed as u,onActivated as i,onBeforeMount as d}from"vue";import{M as a,_ as n,K as s,x as l,aI as c,a as p,u as v,aJ as m,h as f,D as k,L as C,G as V,T as h}from"./index-d66a20d8.js";/* empty css              */import{d as L}from"./debounce-6981b306.js";import{P,u as b}from"./ProductTips-58ffd84d.js";import{b as y,P as N,d as g,e as O}from"./PayInfo-b4b67b23.js";import{a as x,b as E,c as I}from"./createProposal-edb2e0a1.js";import{c as w,q as j,p as R}from"./trial-0ac61dce.js";import{_}from"./index-d27c947d.js";import{a as B,b as T}from"./format-b5e9d8b9.js";import"./pdfh5-e588f83d.js";import"./isObjectLike-a9798079.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./_getTag-d5b47d26.js";import"./phoneVerify-a37057a4.js";import"./useDicData-b539129e.js";import"./bankCard-54e59047.js";import"./cloneDeep-6abacc69.js";import"./TrialButton-4937b12b.js";import"./index-88613e6f.js";import"./index-973d3f66.js";import"./infoCollection-e6a8a0ee.js";import"./index-88f21684.js";import"./index-ceb5d62e.js";import"./box-title-70dc1627.js";import"./index-293de2c7.js";import"./echarts-6ee22673.js";import"./empty-ae586b6c.js";import"./trial-b3f7bf73.js";import"./useOrder-d2812e23.js";import"./utils-7eb757b9.js";import"./constants-7afb7c3d.js";import"./nextStep-3971c3a9.js";import"./core-15eeb464.js";import"./constant-8927d485.js";const D={class:"trial-button"};var S=n(vue.defineComponent({__name:"TrialPopup",props:{productCode:{default:""},productName:{default:""}},emits:["finish"],setup(o,{expose:t,emit:r}){const u=o,i=e(null);vue.provide(a,{insuredFactorCodes:["hasSocialInsurance","occupationCodeList"],holderFactorCodes:["birthday","gender","hasSocialInsurance","occupationCodeList"]});const d=(e,o)=>{const{holder:t,insuredList:r,productCode:i}=e||{},{productList:d,...a}=(null==r?void 0:r[0])||{},{riskList:n,...l}=(null==d?void 0:d[0])||{},c=s(null==o?void 0:o.riskPremiumDetailVOList)?null==o?void 0:o.riskPremiumDetailVOList.reduce(((e,o)=>(e[o.riskCode]={initialPremium:o.initialPremium,initialAmount:o.initialAmount},e)),{}):{},p=(n||[]).map((e=>{var o,t;return{...e,initialPremium:null==(o=null==c?void 0:c[e.riskCode])?void 0:o.initialPremium,initialAmount:null==(t=null==c?void 0:c[e.riskCode])?void 0:t.initialAmount}}));return{productCode:i,holder:t,insuredPersonVO:a,insuredProductInfo:{productCode:i,...l,productName:u.productName,occupationCodeList:null==a?void 0:a.occupationCodeList,riskList:p}}};return t({...["open","close"].reduce(((e,o)=>(e[o]=(...e)=>{var t;null==(t=i.value)||t[o](...e)},e)),{}),formatData:d}),(e,o)=>{const t=vue.resolveComponent("VanButton");return vue.openBlock(),vue.createBlock(_,{ref_key:"trialRef",ref:i,"hide-benefit":"","hide-popup-button":"",title:"选择保障方案",class:"proposal-trial","product-info":{productCode:e.productCode},"tenant-product-detail":{}},{trialBtn:vue.withCtx((e=>[vue.createElementVNode("div",D,[vue.createVNode(t,{disabled:!vue.unref(i).getTrialSuccessFlag(),type:"primary",onClick:o=>(({trialData:e,riskPremium:o,personalInfoRef:t})=>"function"==typeof(null==t?void 0:t.canTrail)&&t.canTrail()?r("finish",d({...e,productCode:u.productCode},o)):"function"==typeof(null==t?void 0:t.validate)&&t.validate())(e)},{default:vue.withCtx((()=>[vue.createTextVNode("确定")])),_:2},1032,["disabled","onClick"])])])),_:1},8,["product-info"])}}}),[["__scopeId","data-v-4df98274"]]);const F={class:"com-risk-list-wrapper"},U=(e=>(vue.pushScopeId("data-v-7d3c3028"),e=e(),vue.popScopeId(),e))((()=>vue.createElementVNode("div",{class:"popup-title"},"选择附加险",-1))),q={class:"risk-list"},M={class:"cell-title"},$={class:"title"},A={class:"footer-button"};var G=n(vue.defineComponent({__name:"index",props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(u,{emit:i}){const d=u,a=e([]),n=e([]),s=e([...d.disabled]),l=o({show:d.show,currentChecked:[...d.modelValue]}),c=e=>{var o,t,r;if(s.value.includes(e))return;((e,o)=>{if(!d.collocationList.length)return o?void(l.currentChecked=[]):void l.currentChecked.push(e);let t=l.currentChecked,r=s.value;o?(d.collocationList.forEach((o=>{e===o.riskId&&(2===o.collocationType?t=t.filter((t=>t!==o.collocationRiskId||t!==e)):3===o.collocationType?(t=t.filter((o=>o!==e)),r=r.filter((e=>e!==o.collocationRiskId))):t=t.filter((o=>o!==e)))})),l.currentChecked=t,s.value=r):(d.collocationList.forEach((u=>{e===u.riskId&&(o||(2===u.collocationType?t.push(u.collocationRiskId):3===u.collocationType&&r.push(u.collocationRiskId),t.push(e)))})),l.currentChecked.push(...t),s.value=r)})(e,l.currentChecked.includes(e)),null==(r=null==(t=null==(o=null==a?void 0:a.value)?void 0:o[e])?void 0:t.toggle)||r.call(t)},p=()=>{i("close")},v=()=>{const e=d.riskList.filter((e=>l.currentChecked.includes(e.id)));i("update:modelValue",[...new Set(n.value)]),i("finished",e,s.value),i("close")};return t((()=>{a.value=[]})),r((()=>l.currentChecked),(e=>{n.value=e}),{deep:!0,immediate:!0}),r((()=>d.modelValue),(e=>{n.value=e||[],s.value.push(...e||[])}),{deep:!0,immediate:!0}),(e,o)=>{const t=vue.resolveComponent("van-checkbox"),r=vue.resolveComponent("VanCell"),u=vue.resolveComponent("van-cell-group"),i=vue.resolveComponent("van-checkbox-group"),d=vue.resolveComponent("VanButton"),m=vue.resolveComponent("VanPopup");return vue.openBlock(),vue.createElementBlock("div",F,[vue.createVNode(m,{show:vue.unref(l).show,"onUpdate:show":o[1]||(o[1]=e=>vue.unref(l).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:p},{default:vue.withCtx((()=>[U,vue.createElementVNode("div",q,[vue.createVNode(i,{modelValue:vue.unref(n),"onUpdate:modelValue":o[0]||(o[0]=e=>vue.isRef(n)?n.value=e:null)},{default:vue.withCtx((()=>[vue.createVNode(u,{inset:""},{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(e.riskList,(e=>(vue.openBlock(),vue.createBlock(r,{key:e.id,title:e.riskName,disabled:vue.unref(s).includes(e.id),onClick:o=>c(e.id)},{"right-icon":vue.withCtx((()=>[vue.createVNode(t,{ref_for:!0,ref:o=>vue.unref(a)[e.id]=o,shape:"square",disabled:vue.unref(s).includes(e.id),name:e.id,onClick:vue.withModifiers((o=>c(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:vue.withCtx((()=>[vue.createElementVNode("div",M,[vue.createElementVNode("div",$,vue.toDisplayString(e.riskName),1)])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),vue.createElementVNode("div",A,[vue.createVNode(d,{type:"primary",disabled:!vue.unref(l).currentChecked.length,block:"",onClick:v},{default:vue.withCtx((()=>[vue.createTextVNode("确认")])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-7d3c3028"]]);const J=e=>(vue.pushScopeId("data-v-3a61def2"),e=e(),vue.popScopeId(),e),K={class:"com-product-list-wrapper"},W={class:"risk-item-wrapper"},z={class:"content"},H={class:"risk-factor"},Q={class:"factor"},X={class:"factor-value"},Y=J((()=>vue.createElementVNode("span",{class:"factor-name"}," 保额(元) ",-1))),Z={class:"factor"},ee={class:"factor-value"},oe=J((()=>vue.createElementVNode("span",{class:"factor-name"}," 保障期间 ",-1))),te={class:"factor"},re={class:"factor-value"},ue=J((()=>vue.createElementVNode("span",{class:"factor-name"}," 交费期间 ",-1))),ie={class:"operate-bar-wrap"},de={class:"risk-premium"},ae={class:"premium"},ne={key:0,class:"operate-bar"},se=vue.defineComponent({name:"ProductList"});var le=n(vue.defineComponent({...se,props:{productRiskList:{default:()=>[]},productInfo:{default:()=>({})},productData:{default:()=>({})},pickProductPremium:{type:Function,default:()=>{}},productNum:{default:0},errorMsg:{default:""},productIndex:{}},emits:["deleteRisk","updateRisk","addRiderRisk"],setup(o,{emit:t}){const i=o,[d,a]=l(),n=e({checkedList:[],disabledList:[],riderRiskList:[],mainRiskData:{},totalPremium:0,currentRiskRecord:{},productRiskList:[]}),s=u((()=>{var e,o;return(null==(o=null==(e=i.productData)?void 0:e.productRiskVoList)?void 0:o[0].riskDetailVOList.filter((e=>1===e.collocationType)))||[]}));u((()=>{var e,o;const t=i.productRiskList.map((e=>e.riskId)),r=((null==(o=null==(e=i.productData)?void 0:e.productRiskVoList)?void 0:o[0].riskDetailVOList)||[]).filter((e=>t.includes(e.id)&&1===e.collocationType));return s.value.length-r.length}));const c=u((()=>e=>{var o,t;const r=(null==(t=null==(o=i.productData)?void 0:o.productRiskVoList)?void 0:t[0].riskDetailVOList.find((o=>o.id!==e)))||{};let u=!1;return u=!!i.productNum||2===r.riskType&&1===r.collocationType,u})),p=u((()=>{var e,o;return(null==(o=null==(e=i.productData)?void 0:e.productRiskVoList)?void 0:o[0].riskDetailVOList.find((e=>1===e.riskType)))||{}})),v=u((()=>p.value.collocationVOList||[])),m=(e,o)=>{const r=e.map((e=>e.id)).filter((e=>!n.value.disabledList.includes(e)));t("addRiderRisk",r,i.productInfo)};return r((()=>i.productInfo),(e=>{let o=0;(e.riskList||[]).forEach((e=>{o+=e.initialPremium})),n.value.totalPremium=o}),{deep:!0,immediate:!0}),r((()=>i.productRiskList),(e=>{const o=[],t=[],r=[];(e||[]).forEach((e=>{1===e.riskType?o.unshift(e):(t.push(e.riskId),r.push(e.riskId),o.push(e))})),n.value.disabledList=t,n.value.checkedList=r,n.value.productRiskList=o}),{deep:!0,immediate:!0}),(e,o)=>{const r=vue.resolveComponent("ProTitle"),u=vue.resolveComponent("ProCheckButton");return vue.openBlock(),vue.createElementBlock("div",K,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(n).productRiskList,(o=>{var d,a;return vue.openBlock(),vue.createElementBlock("div",{key:o.riskId},[vue.createElementVNode("div",W,[vue.createVNode(r,{"risk-type":o.riskType,title:o.riskName,class:"no-border"},null,8,["risk-type","title"]),vue.createElementVNode("div",z,[vue.createElementVNode("div",H,[vue.createElementVNode("div",Q,[vue.createElementVNode("span",X,vue.toDisplayString((null==(d=o.initialAmount)?void 0:d.toLocaleString())||"-"),1),Y]),vue.createElementVNode("div",Z,[vue.createElementVNode("span",ee,vue.toDisplayString(vue.unref(B)(o.coveragePeriod)||"-"),1),oe]),vue.createElementVNode("div",te,[vue.createElementVNode("span",re,vue.toDisplayString(vue.unref(T)(o.chargePeriod)||"-"),1),ue])]),vue.createElementVNode("div",ie,[vue.createElementVNode("div",de,[vue.createTextVNode(" 保费:"),vue.createElementVNode("span",ae,vue.toDisplayString(!e.errorMsg&&o.initialPremium?`￥${null==(a=o.initialPremium)?void 0:a.toLocaleString()}`:"-"),1)]),2!==o.riskType?(vue.openBlock(),vue.createElementBlock("div",ne,[vue.unref(c)(o.riskId)&&e.productIndex>0?(vue.openBlock(),vue.createBlock(u,{key:0,round:32,class:"border",onClick:e=>{t("deleteRisk",o,i.productInfo)}},{default:vue.withCtx((()=>[vue.createTextVNode("删除")])),_:2},1032,["onClick"])):vue.createCommentVNode("",!0),vue.createVNode(u,{activated:"",round:32,onClick:e=>{t("updateRisk",o,i.productInfo)}},{default:vue.withCtx((()=>[vue.createTextVNode("修改")])),_:2},1032,["onClick"])])):vue.createCommentVNode("",!0)])])])])})),128)),vue.unref(d)?(vue.openBlock(),vue.createBlock(G,{key:0,modelValue:vue.unref(n).checkedList,"onUpdate:modelValue":o[0]||(o[0]=e=>vue.unref(n).checkedList=e),show:vue.unref(d),disabled:vue.unref(n).disabledList,"risk-list":vue.unref(s),"collocation-list":vue.unref(v),onFinished:m,onClose:o[1]||(o[1]=e=>vue.unref(a)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):vue.createCommentVNode("",!0),vue.createVNode(P,{"error-msg":e.errorMsg},null,8,["error-msg"])])}}}),[["__scopeId","data-v-3a61def2"]]);const ce={class:"container"},pe={key:0,class:"operate-bar"},ve={class:"footer-bar"},me={class:"trial-result"},fe={class:"result-num"},ke={class:"trial-operate"},Ce=vue.defineComponent({name:"CreateProposal"});var Ve=n(vue.defineComponent({...Ce,setup(t){const a=[{name:"保存修改"},{name:"另存为新计划书"}],n=c();l();const[P,_]=l(),B=e({holder:{},insuredList:[{name:"",gender:"",birthday:"",productList:[]}],proposalName:"",totalPremium:0,relationUserType:2}),T=p(),D=v(),F=b(),{productCode:U,id:q,preview:M}=D.query,$=["age","gender","birthday","hasSocialInsurance","occupationCodeList"],A=e(null),G=o({selectedProductCodeList:[],insuredPersonVO:{},currentProductCode:"",holder:{},productList:[],productCollection:{},productErrorMap:{},defaultData:null}),J=e(!1),K=e(null),W=e(null),z=u((()=>G.productList.map((e=>e.productCode)).filter((e=>Boolean(e))))),H=u((()=>{const{productPlanInsureVOList:e}=G.productCollection[U]||{},[{insureProductRiskVOList:o=[]}={}]=e||[],{riskInsureLimitVO:t}=(null==o?void 0:o.find((e=>1===e.riskType)))||{};return null==t?void 0:t.sexLimit})),Q=u((()=>"-1"!==H.value&&H.value?m.filter((e=>H.value===e.value)):m)),X=u((()=>{var e;return(null==(e=G.productCollection)?void 0:e[G.currentProductCode])||{}})),Y=u((()=>{var e,o;return(null==(o=null==(e=X.value)?void 0:e.productPlanInsureVOList)?void 0:o[0])||{}})),Z=u((()=>!J.value||Boolean(Object.values(G.productErrorMap).join("")))),ee=u((()=>"1"!=`${M}`)),oe=u((()=>G.productList.reduce(((e,o)=>e+o.riskList.reduce(((e,o)=>e+(o.initialPremium||0)),0)),0))),te=(e,o="")=>{G.productErrorMap[e]=o},re=e=>{const o=G.productList.findIndex((o=>o.productCode===e.productCode)),t={...e.insuredProductInfo,nanoid:C()};if(-1===o)return G.productList.push(t),!1;const r=G.productList[o],{riskList:u,...i}=t;G.productList[o]={...t,...i,riskList:s(u)?u.map((e=>({...r.riskList.find((o=>o.riskCode===e.riskCode)),...e}))):[]}},ue=e=>{var o;Object.assign(G.holder,e.holder),Object.assign(G.insuredPersonVO,e.insuredPersonVO),re(e),te(e.productCode),J.value=!0,null==(o=A.value)||o.close()},ie=()=>{F.setProposalInfo(B.value),F.setExcludeProduct(z.value),F.setInsuredPersonVO(G.insuredPersonVO),T.push({path:"/proposalListSelect",query:{isCreateProposal:"1"}})},de=e=>{R(e,{isCustomError:!0}).then((({code:o,data:t,message:r})=>{var u;o===V&&t?((null==t?void 0:t.errorInfo)&&h(`${null==t?void 0:t.errorInfo}`),s(t.riskPremiumDetailVOList)&&re(null==(u=A.value)?void 0:u.formatData(e,t)),te(e.productCode),J.value=!0):te(e.productCode,r)}))},ae=e=>{e&&(G.insuredPersonVO.age=f(new Date).diff(e,"year"))},ne=()=>{G.insuredPersonVO.birthday=""},se=e=>{x(e).then((({code:e,data:o})=>{"10000"===e&&s(o)&&(o.reduce(((e,o)=>(e[o.productCode]=o,e)),G.productCollection),console.log("stateInfo.productCollection = ",G.productCollection))})).finally((()=>{}))},Ce=async(e,o=!1)=>{if(!s(e))return;const{code:t,data:r}=await w({calcProductFactorList:e,...G.insuredPersonVO},{isCustomError:!o});"10000"===t&&r&&s(r)&&r.forEach((e=>{const{holder:t,insuredList:r,productCode:u}=e,{productList:i,...d}=(r||[])[0]||{},[{riskList:a=[],...n}={}]=i||[],s={productCode:u,...n,riskList:a};de(e),o&&(Object.assign(G.insuredPersonVO,d),Object.assign(G.holder,t));const l=z.value.findIndex((e=>e===u));l>-1?G.productList[l]=s:G.productList.push(s),console.log("----add tempdata = ",s)}))},Ve=e=>G.productList.filter((o=>o.productCode===e)).map((({productCode:e,riskList:o})=>{const{productPlanInsureVOList:t}=G.productCollection[e]||{},[{insureProductRiskVOList:r}={}]=t||[];return{productCode:e,riskEditVOList:s(o)?o.filter((e=>1===e.riskType)).map((({riskCode:e,riskType:o,annuityDrawValueList:t,paymentPeriodValueList:u,insurancePeriodValueList:i,...d})=>{const a=(null==r?void 0:r.find((o=>o.riskCode===e)))||{};return{insureProductRiskVO:{...a,productRiskInsureLimitVO:{...null==a?void 0:a.productRiskInsureLimitVO,annuityDrawValueList:t,paymentPeriodValueList:u,insurancePeriodValueList:i}}}})):[]}})),he=e=>{const{riskList:o,...t}=G.productList.find((o=>o.productCode===e))||{};return{holder:{...G.holder},insuredList:[{...G.insuredPersonVO,productList:[{...t,riskList:o}]}],productCode:e}},Le=(e,o)=>{const t=o;k.confirm({message:"确认删除该险种？"}).then((()=>{1===e.riskType?G.productList=G.productList.filter((e=>e.productCode!==t.productCode)).map((e=>({...e,nanoid:C()}))):t.riskList=t.riskList.filter((o=>o.riskId!==e.riskId)),te(t.productCode)}))},Pe=(e,o)=>{var t;G.currentProductCode=o.productCode,G.defaultData=[he(o.productCode)],null==(t=A.value)||t.open()},be=e=>{var o,t;Promise.all([null==(o=K.value)?void 0:o.validate(),null==(t=W.value)?void 0:t.validate()]).then((()=>{const{holder:o}=G;I({holder:o,insuredList:[{...G.insuredPersonVO,productList:G.productList}],proposalName:G.insuredPersonVO.proposalName,totalPremium:oe.value,relationUserType:2,id:e}).then((e=>{const{code:o,data:t}=e||{};"10000"===o&&(F.$reset(),T.push({path:"/compositionProposal",query:{id:t,preview:M}}))}))}))},ye=()=>{q?_(!0):be(q)},Ne=(e,o)=>{be(o?void 0:q)};return r((()=>$.map((e=>G.insuredPersonVO[e]))),((e,o)=>{e.join(",")!==o.join(",")&&(console.log("被保人条件变动"),s(Object.keys(G.productCollection))&&z.value.forEach((e=>(async e=>{try{const{code:o,data:t,message:r}=await j({calcProductFactorList:Ve(e),...G.insuredPersonVO},{isCustomError:!0});"10000"===o&&s(t)?(G.productList.forEach((({productCode:e,riskList:o})=>{const{productRiskDyInsureFactorVOList:r}=t[0]||t.find((o=>o.productCode===e))||{};o.forEach((e=>{const o=r.find((o=>o.riskCode===e.riskCode));Object.assign(e,{...e,...o})}))})),de(he(e)),te(e)):te(e,r)}catch(o){console.log("Error",o)}})(e))))}),{deep:!0}),r((()=>G.selectedProductCodeList),L((e=>{if(s(e)){console.log("选择的产品变动了",e),Ce(e.map((e=>({productCode:e}))));const o=Object.keys(G.productCollection),t=null==e?void 0:e.filter((e=>!o.includes(e)));s(t)&&se(null==t?void 0:t.map((e=>({productCode:e}))))}})),{deep:!0}),i((()=>{const{selectedProduct:e,insuredPersonVO:o}=F.$state;G.selectedProductCodeList=s(e)?e:[]})),d((()=>{if(U){const e=[{productCode:U}];se(e),Ce(e,!0)}q&&(((e={})=>{E(e).then((({code:e,data:o})=>{if("10000"===e&&o){const{insuredList:e,holder:t,proposalName:r}=o||{},[{productList:u,...i}]=e||[];G.holder=t,G.insuredPersonVO={...i,proposalName:r},se(u.map((e=>({productCode:e.productCode})))),console.log("----query detail ",u),G.productList=u}}))})({id:q}),J.value=!0);const e=(q?"编辑":"创建")+"计划书";D.meta.title=e,document.title=e})),(e,o)=>{const t=vue.resolveComponent("ProRenderForm"),r=vue.resolveComponent("ProCard"),u=vue.resolveComponent("ProCheckButton"),i=vue.resolveComponent("VanButton"),d=vue.resolveComponent("VanActionSheet"),s=vue.resolveComponent("ProPageWrap"),l=vue.resolveComponent("van-config-provider");return vue.openBlock(),vue.createBlock(l,{"theme-vars":vue.unref(n)},{default:vue.withCtx((()=>[vue.createVNode(s,{class:"page-create-wrapper"},{default:vue.withCtx((()=>{var e;return[vue.createElementVNode("div",ce,[vue.createVNode(t,{ref_key:"formRef",ref:K,class:"mb20",model:vue.unref(G).insuredPersonVO},{default:vue.withCtx((()=>[vue.createVNode(vue.unref(y),{modelValue:vue.unref(G).insuredPersonVO.proposalName,"onUpdate:modelValue":o[0]||(o[0]=e=>vue.unref(G).insuredPersonVO.proposalName=e),label:"计划书名称",name:"proposalName",maxlength:20},null,8,["modelValue"])])),_:1},8,["model"]),vue.createVNode(vue.unref(N),{ref_key:"insuredFormRef",ref:W,title:"被保人信息",model:vue.unref(G).insuredPersonVO},{default:vue.withCtx((()=>[vue.createVNode(vue.unref(y),{modelValue:vue.unref(G).insuredPersonVO.name,"onUpdate:modelValue":o[1]||(o[1]=e=>vue.unref(G).insuredPersonVO.name=e),label:"姓名",name:"name",maxlength:20,required:""},null,8,["modelValue"]),vue.createVNode(vue.unref(y),{modelValue:vue.unref(G).insuredPersonVO.age,"onUpdate:modelValue":o[3]||(o[3]=e=>vue.unref(G).insuredPersonVO.age=e),class:"age-field-wrap",name:"age",label:"年龄",type:"digit",maxlength:3,required:"",onChange:ne},{extra:vue.withCtx((()=>[vue.createVNode(vue.unref(g),{modelValue:vue.unref(G).insuredPersonVO.birthday,"onUpdate:modelValue":[o[2]||(o[2]=e=>vue.unref(G).insuredPersonVO.birthday=e),ae],class:"birthday-field-wrap",label:"出生日期",name:"birthday"},null,8,["modelValue"])])),_:1},8,["modelValue"]),vue.createVNode(vue.unref(O),{modelValue:vue.unref(G).insuredPersonVO.gender,"onUpdate:modelValue":o[4]||(o[4]=e=>vue.unref(G).insuredPersonVO.gender=e),label:"性别",name:"gender",columns:vue.unref(Q),required:""},null,8,["modelValue","columns"])])),_:1},8,["model"]),(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(G).productList,((e,o)=>(vue.openBlock(),vue.createBlock(r,{key:`${e.nanoid}_${o}_${e.productCode}`,class:"product-item-card","show-line":!1,"show-divider":!1},{default:vue.withCtx((()=>{var t;return[vue.createVNode(le,{"product-risk-list":e.riskList,"product-info":e,"product-num":(null==(t=vue.unref(G).productList)?void 0:t.length)-1,"product-data":vue.unref(G).productCollection[e.productCode],"error-msg":vue.unref(G).productErrorMap[e.productCode],"product-index":o,onUpdateRisk:Pe,onDeleteRisk:Le},null,8,["product-risk-list","product-info","product-num","product-data","error-msg","product-index"])]})),_:2},1024)))),128)),vue.unref(ee)?(vue.openBlock(),vue.createElementBlock("div",pe,[vue.createVNode(u,{activated:"",round:34,onClick:ie},{default:vue.withCtx((()=>[vue.createTextVNode("添加产品")])),_:1})])):vue.createCommentVNode("",!0)]),vue.createElementVNode("div",ve,[vue.createElementVNode("span",me,[vue.createTextVNode("总保费"),vue.createElementVNode("span",fe,vue.toDisplayString(vue.unref(Z)?"-":`￥${null==(e=vue.unref(oe))?void 0:e.toLocaleString()}`),1)]),vue.createElementVNode("div",ke,[vue.createVNode(i,{disabled:vue.unref(Z),type:"primary",onClick:ye},{default:vue.withCtx((()=>[vue.createTextVNode("保存并预览")])),_:1},8,["disabled"])])]),vue.createVNode(d,{show:vue.unref(P),"onUpdate:show":o[5]||(o[5]=e=>vue.isRef(P)?P.value=e:null),actions:a,"cancel-text":"取消","close-on-click-action":"",onCancel:o[6]||(o[6]=e=>vue.unref(_)(!1)),onSelect:Ne},null,8,["show"]),vue.createVNode(S,{ref_key:"trialPopupRef",ref:A,"data-source":vue.unref(Y),"product-code":vue.unref(G).currentProductCode,"default-data":vue.unref(G).defaultData,onFinish:ue},null,8,["data-source","product-code","default-data"])]})),_:1})])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-b5de45d8"]]);export{Ve as default};

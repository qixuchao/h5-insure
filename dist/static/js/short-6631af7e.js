import{i as e,N as t,l as n,m as a,s as r,t as i,p as s,B as l,L as o,C as c,F as u,H as d,M as m,I as g,J as p,d as v,r as f,$ as y,A as I,R as h,ag as C,x as T,n as P,G as D,a5 as O,a6 as N,Z as k,_ as V,U as A,T as b,aa as S,P as w,k as L,D as x}from"./vendor-86ac9d42.js";import{d as U}from"./debounce-28c09b81.js";import{P as F}from"./index-bcb6b4e6.js";import{_ as E,e as M,i as R,a7 as B,C as q,I as Z,K as _,a1 as j}from"./index-0db00022.js";import{u as H}from"./core-3d4fa83e.js";import{C as Y,k as Q,l as G,m as K,S as J,R as W,g as X}from"./infoCollection-4b71a25b.js";import{i as z,b as $,p as ee,g as te}from"./trial-cce58dca.js";import{p as ne}from"./product-0948d6f7.js";import{o as ae,r as re,t as ie}from"./utils-61d261b6.js";import{_ as se,n as le}from"./nextStep-3d132fec.js";import{t as oe,u as ce}from"./theme-b9409b06.js";import{B as ue,A as de,_ as me}from"./index-73bbb9ed.js";import{P as ge}from"./index-9c7d57d5.js";import{L as pe}from"./loading-1c9c1d7b.js";import{u as ve}from"./useDicData-9109b518.js";import"./index-d8ed11f6.js";import"./useStorage-0f596e31.js";import"./trial-4bcd5b24.js";import"./relativeTime-66b9eb0d.js";import"./check-detail-c292a89b.js";const fe={class:"customer-body"},ye={class:"header"},Ie={class:"conatiner"},he=["onClick"],Ce={class:"name"};var Te=E(e({props:{userInfo:{type:Object,default:()=>({})},relationCode:{type:String,default:"1"},title:{type:String,default:"选择投保人"}},emits:["change"],setup(e,{emit:v}){let f=[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"王大啦",certNo:"110101199003078910",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"001",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"},{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"李大霄",certNo:"110101199003070193",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"002",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"}];f=[...f,...f,...f];const y=t({loading:!1,select:f[0],list:f}),I=()=>{y.loading=!1,v("change",y.select)},h=()=>{y.loading=!1,(async()=>{y.loading=!0})()};return(t,v)=>{const f=n("ProSvg"),C=n("van-icon"),T=n("ProPopup");return a(),r(u,null,[i(f,{name:"customer",onClick:h}),i(T,{class:"customer-list",style:{height:"416px"},show:c(y).loading,closeable:!1},{default:s((()=>[l("div",fe,[l("div",ye,[l("span",null,o(e.title),1),i(C,{name:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAuRJREFUeF7t3DtOI0EQBuDfEtImXAdyNoIEAffYkIALrFZaMu4BiAQiyOE6myARoJI8kteyx/3469FWTTxT3fVNdY/dY/cCeVAFFtRoGQwJSi6CBE1QsgA5XFZogpIFyOGyQhOULEAOlxWaoGQBcris0CCglwB+ATgEcA/gFsAXuW/W4Q4AXAOQ3P4BuAPwUNuJlgqVBgVx9XheduSztgNBzv+xxDtb689VLWoL6CuAkw0Qo6Juw5QU3wD8rLnpLaDvAI62NDIa6hympPgB4Fgb9AbA75lGRkHdhSkpSq5/tEFl8n4CsD7fjDSnlmBKYZzXPmxbhrzAlXZIHmDRHlSqfW8FHRVVFVNQekBHQ1XHZICOgmqCyQKNjmqGyQSNimqKyQaNhmqOqQEaBdUFUwvUG9UNUxPUC9UVUxvUGtUd0wLUCjUEphWoNmoYTEtQLdRQmNagbNRwmB6gLNSQmF6gvahhMT1BW1FDY3qD1qLK+fKePPSrl94FZkmy9yipupdlI6czjYV4ORgBtLRS525cCMwIQ34VqaRSN6GGwYwG2lKpoTAjgk6ojwDm5ks5T+bVi2ivqaPMoetDP0F7H/XL62vn0RzyM/C1mFOoUKhRhnwrZjjUCKAlmPnBvnBOLcGchnR+9dyBWoM5/YKv5ZrCe8s5zWvI98D0XMtRm4niAcoAYcRQwbUGZUIwY9FwLUE1ADRiduFagWomrhm7GtcC1CJhizaKcLVBLRO1bGsrriaoR4Iebf6HqwXqmZhn293/AtlU+q4JVSwDqqxSsSs0AuZ0k136wgR1SUBhvaDoab7tJBZoREyXSmWARsY0R+0FHQHTFLUHdCRMM9RW0BExTVBbQHMDAvICc26RQQbNTVzIoLnNEBk0N8Iig0q41a3a5Gfaf2t3j+n6fqdzsdtWbTrp7EnUlo9Ne5K6ThoJSnZN0AQlC5DDZYUmKFmAHC4rNEHJAuRwWaEJShYgh8sKJYN+A6+yQmSPqqjtAAAAAElFTkSuQmCC"),onClick:v[0]||(v[0]=e=>c(y).loading=!1)},null,8,["name"])]),l("div",Ie,[(a(!0),r(u,null,d(c(y).list,(e=>(a(),r("div",{key:e.customerId,class:m({item:!0,active:c(y).select.customerId===e.customerId}),onClick:t=>c(y).select=e},[l("span",Ce,o(e.cert[0].certName),1),l("span",null,o(e.cert[0].certNo),1),g(i(C,{class:"check-icon",name:c("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAn9JREFUSEvtlktIVFEcxn/XXpM6Mz5zVBzR8oFUVARRUljhItKNhZC0qVYhZjMMFIG0aFUUtijKB0GEBL02WmZqRjlbFyWSYQ+EynKyh5baNHPi3hsNtzuj89Bp44G7Oec732/u//y/c0cSQgj+w5AWwNGqevRK/eMLXD0AAx2wu47ogD8OwcVyGHmuFnSJIQrgwR5o2Avfx3ynuL5insFPmuB6NXjcPmjhDqhunSew1wO3HNB9Xtur+SVQ0wZL4+YBPPkVmvdBf7sWmrcVau7Bsnhlfm6ba/SV2kTvB7TQlcVwpB0Mxr/zkvj8VigtvqYMjKnhx/jFY2jYAxMurUfuZqi9DwaTZl4SdQWCD4NgssChFpAPP9ThvAIth8HzU7szZxPUdsBys85REsetgrFhdUGKUcKtPDGLZsfLTXTnGHSe02uzN8LRTohN8OsjiSGnoH4nuKd8goLt6tub0wPDp8ahuQqetek11g1g64LYxID71ebquw2NlSC8PqExDQ5eg6JS/WbXG7WJ3vXr17LWga0b4pJmrJivq+XM3bBpxXLpd52A8pMQs1hdG+qFyxUwPqo3zlwL9m6IT5n1mLRxummDrn9CL1vkbYP9jSpUvol+TeuNM1aD/WHQydCCvV5oqkQpfSgjvUiFmtKC3qW/QNyTUF8KL53BmVgKwd4DZktw+j8q/zfXxCc4U4yS75nGinxwyNCMkKBKcgP+53K9htNb4NuIf9PUVeB4BAmZIUNnBsurw31wtgSmx7XmKbkqNDErLOjsYFkx8AAulPm+qck5KjTJGjY0OLCsetoKd0+p+ay6BMnZEUGDB0eM0RvM7fc4hB+4AA6hWJFJfwMaXAhFHVsobQAAAABJRU5ErkJggg==")},null,8,["name"]),[[p,c(y).select.customerId===e.customerId]])],10,he)))),128))]),i(F,{shadow:!1,text:"确定",onClick:I})])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-71e988c8"]]);const Pe=(e,t="YYYY-MM-DD")=>v(e).format(t),De=(e,t=0,n="day",a="YYYY-MM-DD")=>v(e).add(t,n).format(a);const Oe={class:"guarantee-list"},Ne=(e=>(O("data-v-2da31e52"),e=e(),N(),e))((()=>l("span",null,"保障计划",-1))),ke={key:0,class:"picture-payment-content"},Ve=["onClick"],Ae=["src"],be=["src"],Se={key:1,class:"plan-list"},we=["onClick"],Le={key:2,class:"feerate-view"},xe={class:"guarantee-detail"},Ue={key:0,class:"plan-list"},Fe=["onClick"],Ee={key:1},Me={class:"extinfo-info-list"},Re={class:"content"};var Be=E(e({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1}},emits:["update-active-plan"],setup(e,{emit:t}){var p;const v=e,O=f(null==(p=v.dataSource)?void 0:p.planList),N=f(v.activePlanCode);y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e;v.isMultiplePlan&&(O.value=null==(e=v.dataSource)?void 0:e.planList)}),{immediate:!0});const k=f([]),V=f([]),A=f(),b=I((()=>v.isMultiplePlan?v.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e,t,n,a;if(N.value=v.activePlanCode,v.isMultiplePlan){if(O.value&&O.value.length>0){let e=0;const t=O.value.findIndex((e=>e.planCode===N.value));t>-1&&(e=t),k.value=O.value[e].guaranteeItemVOS,V.value=O.value[e].extInfoVOList,A.value=null==(a=O.value[e])?void 0:a.productPremiumVOList[0]}}else k.value=null==(e=v.dataSource)?void 0:e.planInsureVO.guaranteeItemVOS,V.value=null==(t=v.dataSource)?void 0:t.planInsureVO.extInfoVOList,A.value=null==(n=v.dataSource)?void 0:n.planInsureVO.productPremiumVOList[0]}),{immediate:!0,deep:!0});const S=I((()=>{var e;return(null==(e=v.dataSource)?void 0:e.rateUri)||""})),w=I((()=>!!(A.value&&A.value.paymentFrequencyValue&&A.value.premiumUnit&&S))),[L,x]=h(!1),U=I((()=>{var e;return!(!k.value||!(null==(e=k.value)?void 0:e.length))&&(k.value.length>v.count&&(!!v.isShowClose||!L.value))})),F=()=>{x()},E=I((()=>{var e;return k.value&&(null==(e=k.value)?void 0:e.length)?k.value.length<=v.count||L.value?k.value:k.value.slice(0,v.count):[]})),B=e=>{N.value=e,t("update-active-plan",e)},q=f(!1),Z=()=>{q.value=!0},_=()=>{ae({fileType:"pdf",feeFileUri:S.value})};return(t,p)=>{var v,f;const y=n("ProCell"),I=n("ProPopup"),h=C("dompurify-html");return a(),r(u,null,[l("div",Oe,[l("div",{class:"header"},[Ne,l("span",{onClick:Z},"查看详情")]),e.isMultiplePlan?(a(),r(u,{key:0},[c(b).length>0?(a(),r("div",ke,[(a(!0),r(u,null,d(c(b),(e=>(a(),r("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>B(e.planCode)},[N.value==e.planCode?(a(),r("img",{key:0,src:e.selectedPic},null,8,Ae)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,be))],8,Ve)))),128))])):(a(),r("div",Se,[(a(!0),r(u,null,d(O.value,((e,t)=>(a(),r("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===N.value?"plan-list-item-active":"")),onClick:t=>B(e.planCode)},[l("span",null,o(e.planName),1)],10,we)))),128))]))],64)):T("",!0),(a(!0),r(u,null,d(c(E),((e,t)=>(a(),P(y,{key:t,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),c(U)?(a(),r("div",{key:1,class:"show-more",onClick:F},[D(o(c(L)?"收起":"查看更多")+" ",1),i(M,{name:"down",class:m(["icon",{showMore:c(L)}])},null,8,["class"])])):T("",!0),c(w)?(a(),r("div",Le,[l("span",null,o(`${(null==(v=A.value)?void 0:v.paymentFrequencyValue)||""}${(null==(f=A.value)?void 0:f.premiumUnit)||""}`),1),c(S)?(a(),r("span",{key:0,onClick:_},"查看保费")):T("",!0)])):T("",!0)]),i(R),i(I,{show:q.value,"onUpdate:show":p[0]||(p[0]=e=>q.value=e),title:"保障详情",class:"guarantee-popup"},{default:s((()=>[l("div",xe,[e.isMultiplePlan?(a(),r("div",Ue,[(a(!0),r(u,null,d(O.value,((e,t)=>(a(),r("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===N.value?"plan-list-item-active":"")),onClick:t=>B(e.planCode)},[l("span",null,o(e.planName),1)],10,Fe)))),128))])):T("",!0),V.value&&V.value.length>0?(a(),r("div",Ee,[l("div",Me,[(a(!0),r(u,null,d(V.value,((e,t)=>(a(),P(y,{key:t,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),i(R)])):T("",!0),(a(!0),r(u,null,d(k.value,((e,t)=>(a(),r("div",{key:t,class:"guarantee-item"},[i(y,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),g(l("div",Re,null,512),[[h,e.content]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-2da31e52"]]);const qe={class:"com-custom-card"},Ze={class:"title"};var _e=E(e({props:{title:{type:String,required:!0}},setup:e=>(t,n)=>(a(),r("div",qe,[l("div",Ze,o(e.title),1),l("div",null,[k(t.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-059c21ee"]]);const je={class:"question"},He={class:"title"};var Ye=E(e({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup:e=>(t,r)=>{const c=n("ProSvg"),u=n("van-collapse-item");return a(),P(u,{name:e.name,class:"com-question-item"},{title:s((()=>[l("div",je,[i(c,{name:"question"}),l("div",He,o(e.question),1)])])),default:s((()=>[D(" "+o(e.answer),1)])),_:1},8,["name"])}}),[["__scopeId","data-v-0d7ea124"]]);const Qe={class:"com-question"};var Ge=E(e({props:{list:{type:Array,default:()=>[]}},setup(e){const t=e,[l,g]=h(!1),p=f([]),v=()=>{g()},y=I((()=>t.list.length<=4||l.value?t.list:t.list.slice(0,4)));return(t,g)=>{const f=n("van-collapse");return a(),r("div",Qe,[i(f,{modelValue:p.value,"onUpdate:modelValue":g[0]||(g[0]=e=>p.value=e)},{default:s((()=>[(a(!0),r(u,null,d(c(y),((e,t)=>(a(),P(Ye,{key:t,name:t.toString(),question:e.title,answer:e.desc},null,8,["name","question","answer"])))),128))])),_:1},8,["modelValue"]),e.list.length>4?(a(),r("div",{key:0,class:"show-more",onClick:v},[D(o(c(l)?"收起":"展开")+" ",1),i(M,{name:"down",class:m(["icon",{showMore:c(l)}])},null,8,["class"])])):T("",!0)])}}}),[["__scopeId","data-v-1b7e97e9"]]);const Ke={class:"spec"},Je=["src"],We={key:1,class:"spec"},Xe=["src"];var ze=E(e({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:t}){const n=e,o=f(),m=f([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),g=I((()=>{var e,t,a,r;return(null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)&&(null==(r=null==(a=n.detail)?void 0:a.tenantProductInsureVO)?void 0:r.spec.length)>0})),p=I((()=>{var e,t,a,r,i,s,l,o,c,u,d,m,g,p;const v=null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType;return!!(v===Y.WORD&&(null==(i=null==(r=null==(a=n.detail)?void 0:a.tenantProductInsureVO)?void 0:r.settlementProcessVO)?void 0:i.settlementProcessList)&&(null==(o=null==(l=null==(s=n.detail)?void 0:s.tenantProductInsureVO)?void 0:l.settlementProcessVO)?void 0:o.settlementProcessList.length)>0||v===Y.IMAGE&&(null==(d=null==(u=null==(c=n.detail)?void 0:c.tenantProductInsureVO)?void 0:u.settlementProcessVO)?void 0:d.settlementProcessPicList)&&(null==(p=null==(g=null==(m=n.detail)?void 0:m.tenantProductInsureVO)?void 0:g.settlementProcessVO)?void 0:p.settlementProcessPicList.length)>0)})),v=I((()=>{var e,t,a,r;return(null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList)&&(null==(r=null==(a=n.detail)?void 0:a.tenantProductInsureVO)?void 0:r.questionList.length)>0})),y=I((()=>{let e=[...m.value];return g.value||(e=e.filter((e=>"tab1"!==e.slotName))),p.value||v.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return t({handleClickTab:()=>{var e;return null==(e=o.value)?void 0:e.handleClickTab}}),(e,t)=>(a(),P(B,{ref_key:"scrollRef",ref:o,class:"tabs",list:c(y),sticky:"",scrollspy:""},V({tab3:s((()=>[k(e.$slots,"form",{},void 0,!0)])),_:2},[c(g)?{name:"tab1",fn:s((()=>{var e,t;return[l("div",Ke,[(a(!0),r(u,null,d((null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)||[],((e,t)=>(a(),r("img",{key:t,src:e,class:"detail-img"},null,8,Je)))),128)),i(R)])]}))}:void 0,c(p)||c(v)?{name:"tab2",fn:s((()=>{var e,t,l,o,m;return[c(p)?(a(),r(u,{key:0},[(null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType)===c(Y).WORD?(a(),P(_e,{key:0,title:"理赔流程"},{default:s((()=>{var e,t,a;return[i(ge,{list:null==(a=null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO)?void 0:a.settlementProcessList},null,8,["list"])]})),_:1})):(a(),r("div",We,[(a(!0),r(u,null,d((null==(m=null==(o=null==(l=n.detail)?void 0:l.tenantProductInsureVO)?void 0:o.settlementProcessVO)?void 0:m.settlementProcessPicList)||[],((e,t)=>(a(),r("img",{key:t,src:e,class:"detail-img"},null,8,Xe)))),128))])),i(R)],64)):T("",!0),c(v)?(a(),r(u,{key:1},[i(_e,{title:"常见问题"},{default:s((()=>{var e,t;return[i(Ge,{list:null==(t=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList},null,8,["list"])]})),_:1}),i(R)],64)):T("",!0)]}))}:void 0]),1032,["list"]))}}),[["__scopeId","data-v-4383aeea"]]);const $e={key:0,class:"page-waiting"},et=["src"],tt=(e=>(O("data-v-ead4d7ae"),e=e(),N(),e))((()=>l("div",{class:"tips"},[l("p",null,"支付成功，承保中...")],-1)));var nt=E(e({props:{isShow:{type:Boolean,default:()=>{}}},setup(e){const t=e;return y((()=>t.isShow),(e=>{document.body.style.overflow=e?"hidden":"inherit"})),(e,n)=>t.isShow?(a(),r("div",$e,[l("img",{class:"loading",src:c(pe)},null,8,et),tt])):T("",!0)}}),[["__scopeId","data-v-ead4d7ae"]]);const at={class:"list"},rt={class:"item"},it={class:"footer"},st=D("部分为是"),lt=D("全部为否"),ot=e({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth","onCloseHealth"],setup(e,{emit:t}){const r=e,o=f(r.show),u=f(r.activeIndex),d=I((()=>{var e;return null==(e=r.contentList[u.value])?void 0:e.attachmentUri})),m=f(!0),g=e=>{m.value=!1,t("update:show",!1),t("onConfirmHealth",e)};return y((()=>r),(()=>{o.value=r.show,u.value=r.activeIndex}),{deep:!0,immediate:!0}),(r,p)=>{const v=n("ProTab"),f=n("ProFilePreview"),y=n("VanButton"),I=n("van-config-provider"),h=n("ProPopup");return a(),P(h,{show:o.value,"onUpdate:show":p[3]||(p[3]=e=>o.value=e),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:p[4]||(p[4]=e=>{m.value&&t("onCloseHealth")})},{default:s((()=>[i(I,{"theme-vars":c(oe),class:"custom-provider"},{default:s((()=>[o.value?(a(),P(v,{key:0,active:u.value,"onUpdate:active":p[0]||(p[0]=e=>u.value=e),list:e.contentList.map(((e,t)=>({title:e.attachmentName,slotName:`guarantee-${t}`}))),class:"tab"},null,8,["active","list"])):T("",!0),l("div",at,[l("div",rt,[(a(),P(f,{key:c(d),content:c(d),type:"pdf"},null,8,["content"]))])]),l("div",it,[i(y,{type:"primary",block:"",round:"",onClick:p[1]||(p[1]=e=>g("N"))},{default:s((()=>[st])),_:1}),i(y,{type:"primary",plain:"",block:"",round:"",onClick:p[2]||(p[2]=e=>g("allFalse"))},{default:s((()=>[lt])),_:1})])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});const ct=e=>(O("data-v-00ff7c41"),e=e(),N(),e),ut={class:"com-period-cell"},dt={key:0,class:"custom-cell check-btn-cell"},mt=ct((()=>l("div",{class:"cell-label"},"保障期间",-1))),gt={class:"cell-content"},pt=ct((()=>l("div",{class:"cell-label"},"生效日期",-1))),vt={class:"cell-content"},ft={key:2,class:"custom-cell common-cell"},yt=ct((()=>l("div",{class:"cell-label"},"保障期限",-1))),It={class:"cell-content"};var ht=E(e({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:d,emit:m}){const g=e;f({});const p=(e,t)=>"year"===e?`${t}年`:"month"===e?`${t}月`:"day"===e?`${t}日`:t,C=f(new Date),P=ve("RISK_INSURANCE_PERIOD"),D=t({formInfo:g.formInfo});y((()=>D.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(C.value=new Date(e))}));const O=f(),N=f([]);y([()=>g.insureDetail,()=>D.formInfo.activePlanCode],(()=>{var e;if(D.formInfo.insurancePeriodValue="",D.formInfo.insuranceStartDate="",D.formInfo.insuranceEndDate="",D.formInfo.commencementTime="",g.insureDetail)if(g.insureDetail.productRelationPlanVOList&&g.insureDetail.productRelationPlanVOList.length>0){let t=0;const n=g.insureDetail.productRelationPlanVOList.findIndex((e=>e.planCode===D.formInfo.activePlanCode));n>-1&&(t=n);const a=((null==(e=g.insureDetail.productRelationPlanVOList[t])?void 0:e.productRiskVoList[0].riskDetailVOList)||[]).find((e=>1===e.riskType));a&&(O.value=a)}else{const e=(g.insureDetail.productRiskVoList[0].riskDetailVOList||[]).find((e=>1===e.riskType));e&&(O.value=e)}}),{deep:!0,immediate:!0}),y([()=>O.value,()=>P.value],(()=>{N.value=[],Array.isArray(P.value)&&P.value.length>1&&O.value&&(N.value=(O.value.riskInsureLimitVO.insurancePeriodValueList||[]).map((e=>{const t=P.value.find((t=>t.value===e));return t?{label:t.name,value:t.value}:null})).filter((e=>!!e))),N.value.length>0&&(D.formInfo.insurancePeriodValue=N.value[0].value)}),{deep:!0,immediate:!0});const k=I((()=>{var e,t;return(null==(e=O.value)?void 0:e.riskInsureLimitVO.guaranteeStartDate)?String(null==(t=O.value)?void 0:t.riskInsureLimitVO.guaranteeStartDate):Q.CURRENT_DAY})),[V,b]=h(!1),S=()=>{b(!0)},w=new Date(De(new Date,1,"day")),L=I((()=>{var e;if(k.value===Q.CUSTOM_DAY){const t=null==(e=O.value)?void 0:e.riskInsureLimitVO.maxInsuranceDay;if(!t)return new Date;const n=De(new Date,Number(t),"day");return new Date(n)}return new Date})),x=e=>{D.formInfo.insuranceStartDate=`${Pe(e)} 00:00:00`,b(!1)},U=()=>{b(!1)},F=I((()=>{}));return y([()=>k.value,()=>F.value,()=>D.formInfo.insurancePeriodValue,()=>D.formInfo.insuranceStartDate],(()=>{if(!D.formInfo.insurancePeriodValue)return;const[e,t]=D.formInfo.insurancePeriodValue.split("_");if(D.formInfo.insuranceStartDate||(k.value===Q.CUSTOM_DAY||k.value===Q.NEXT_DAY?D.formInfo.insuranceStartDate=`${De(new Date,1,"day")} 00:00:00`:D.formInfo.insuranceStartDate=`${Pe(new Date)} 00:00:00`),"to"!==e){const n=`${((e,t=0,n="day",a="YYYY-MM-DD")=>v(e).subtract(t,n).format(a))(D.formInfo.insuranceStartDate,1,"day")} 00:00:00`;D.formInfo.insuranceEndDate=`${De(n,Number(t),e)} 23:59:59`}else D.formInfo.tenantOrderInsuredList[0].birthday,D.formInfo.tenantOrderInsuredList[0].certType===q.CERT&&D.formInfo.tenantOrderInsuredList[0].certNo&&Z(D.formInfo.tenantOrderInsuredList[0].certNo)&&_(D.formInfo.tenantOrderInsuredList[0].certNo),"single"===t&&(D.formInfo.insuranceEndDate="9999-99-99 23:59:59"),D.formInfo.insuranceEndDate=`${De(D.formInfo.insuranceStartDate,Number(t)-1,e)} 23:59:59`}),{immediate:!0}),d({}),(e,t)=>{const d=n("ProRadioButton"),m=n("van-config-provider"),g=n("van-datetime-picker"),v=n("ProPopup");return a(),r(u,null,[i(m,{"theme-vars":c(oe)},{default:s((()=>[l("div",ut,[N.value.length>1?(a(),r("div",dt,[mt,l("div",gt,[i(d,{modelValue:c(D).formInfo.insurancePeriodValue,"onUpdate:modelValue":t[0]||(t[0]=e=>c(D).formInfo.insurancePeriodValue=e),options:N.value},null,8,["modelValue","options"])])])):T("",!0),c(k)===c(Q).CUSTOM_DAY?(a(),r("div",{key:1,class:"custom-cell common-cell",onClick:S},[pt,l("div",vt,o(c(D).formInfo.insuranceStartDate),1)])):T("",!0),c(k)!==c(Q).CUSTOM_DAY?(a(),r("div",ft,[yt,l("div",It,o(c(D).formInfo.insuranceStartDate?c(Pe)(c(D).formInfo.insuranceStartDate):"")+" - "+o(c(D).formInfo.insuranceEndDate?c(Pe)(c(D).formInfo.insuranceEndDate):""),1)])):T("",!0)])])),_:1},8,["theme-vars"]),i(v,{show:c(V),"onUpdate:show":t[2]||(t[2]=e=>A(V)?V.value=e:null),height:40,closeable:!1},{default:s((()=>[i(g,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),type:"date",title:"选择年月","min-date":c(w),"max-date":c(L),formatter:p,onConfirm:x,onCancel:U},null,8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-00ff7c41"]]);const Ct=e=>(O("data-v-0daa05e6"),e=e(),N(),e),Tt={class:"com-payment-type"},Pt={class:"title"},Dt={key:0,class:"picture-payment-content"},Ot=["onClick"],Nt=["src"],kt=["src"],Vt={key:1,class:"custom-cell check-btn-cell"},At=Ct((()=>l("div",{class:"cell-label"},"保障方案",-1))),bt={class:"cell-content"},St={key:0,class:"picture-payment-content"},wt=["onClick"],Lt=["src"],xt=["src"],Ut={key:1,class:"default-payment-content"},Ft=[Ct((()=>l("div",{class:"pay-method"},[l("span",{class:"method"},o("按月交费")),l("span",{class:"acount"},o("共12期"))],-1)))],Et=[Ct((()=>l("div",null,[l("div",{class:"tip"},[l("span",null,o("比按月支付最高省")),D(),l("span",null,"16%")]),l("div",{class:"triangle"}),l("div",{class:"pay-method"},[l("span",{class:"method"},o("一次交清")),l("span",{class:"acount"},o("比月交保费省最高2014元"))])],-1)))],Mt={key:2,class:"custom-cell check-btn-cell"},Rt=Ct((()=>l("div",{class:"cell-label"},"交费方式",-1))),Bt={class:"cell-content"},qt={class:"custom-cell common-cell"},Zt=Ct((()=>l("div",{class:"cell-label"},"实付保费",-1))),_t={class:"cell-content actual-premium"},jt={key:0,class:"feerate-explain"},Ht={class:"content"},Yt=Ct((()=>l("div",{class:"triangle-top"},null,-1)));var Qt=E(e({props:{showConfig:{type:Object,default:()=>{}},formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}},configDetail:{type:Object,default:()=>{}},isMultiplePlan:{type:Boolean,default:!1},premium:{type:[Number||null],default:null}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:g,emit:p}){const v=e;f({});const h=t({formInfo:v.formInfo}),C=f([]),D=f(),O=f(),N=I((()=>{var e;return"1"===String(null==(e=D.value)?void 0:e.paymentFrequencyFlag)})),k=I((()=>{var e;return null==(e=O.value)?void 0:e.productPremiumVOList.find((e=>e.paymentFrequency===h.formInfo.paymentFrequency))})),V=I((()=>v.premium&&k.value?`${v.premium}${k.value.premiumUnit||""}`:k.value?`${k.value.paymentFrequencyValue||""}${k.value.premiumUnit||""}`:"")),A=I((()=>{if(O){const{premiumExplain:e,premiumExplainViewName:t,premiumExplainUri:n}=O.value||{};return{premiumExplain:e,premiumExplainUri:n,premiumExplainViewName:t}}return null}));y((()=>v.configDetail),(()=>{var e;v.isMultiplePlan&&v.configDetail&&(C.value=null==(e=v.configDetail.tenantProductInsureVO)?void 0:e.planList)}),{immediate:!0,deep:!0}),y([()=>v.configDetail,()=>v.isMultiplePlan,()=>h.formInfo.activePlanCode],(()=>{if(v.configDetail)if(v.isMultiplePlan){let e=0;const t=v.configDetail.tenantProductInsureVO.planList.findIndex((e=>e.planCode===h.formInfo.activePlanCode));t>-1&&(e=t),D.value=v.configDetail.tenantProductInsureVO.planList[e].productPlanInsureConditionVO,O.value=v.configDetail.tenantProductInsureVO.planList[e]}else D.value=v.configDetail.tenantProductInsureVO.planInsureVO.productPlanInsureConditionVO,O.value=v.configDetail.tenantProductInsureVO.planInsureVO}),{deep:!0,immediate:!0});const S=I((()=>{var e;if(D.value&&D.value.paymentFrequency){return((null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1})),w=f(!1);y((()=>D.value),(()=>{var e;if(D.value){const t=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];if(1===t.length)return h.formInfo.paymentFrequency=D.value.paymentFrequency,void(w.value=!1);if(2===t.length&&t.filter((e=>![G.SINGLE,G.MONTH].includes(e))).length<1)return void(w.value=!0);w.value=!1}}),{immediate:!0,deep:!0});const L=I((()=>{var e;return D.value?null==(e=D.value.paymentFrequencyList||[])?void 0:e.map((e=>({...e,paymentFrequency:e.skinValue}))):[]})),x=I((()=>L.value.length>0)),U=I((()=>v.isMultiplePlan?v.configDetail.tenantProductInsureVO.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[])),F=I((()=>{var e,t;if(D.value){const n=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];return 1===n.length&&(h.formInfo.paymentFrequency=n[0]),null==(t=n||[])?void 0:t.map((e=>({label:K[e],value:e})))}return[]})),E=e=>{h.formInfo.paymentFrequency=e},M=()=>{var e,t;(null==(e=A.value)?void 0:e.premiumExplainUri)?ae({fileType:"pdf",fileUri:null==(t=A.value)?void 0:t.premiumExplainUri}):b("无费率文件！")};return g({}),(t,g)=>{const p=n("ProRadioButton"),v=n("templat"),f=n("ProDivider"),y=n("van-config-provider");return a(),P(y,{"theme-vars":c(oe)},{default:s((()=>[l("div",Tt,[l("div",Pt,o(c(S)?"交费方式":"保障计划"),1),e.isMultiplePlan?(a(),r(u,{key:0},[c(U).length>0?(a(),r("div",Dt,[(a(!0),r(u,null,d(c(U),(e=>(a(),r("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>{return n=e.planCode,void(h.formInfo.activePlanCode=n);var n}},[c(h).formInfo.activePlanCode==e.planCode?(a(),r("img",{key:0,src:e.selectedPic},null,8,Nt)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,kt))],8,Ot)))),128))])):(a(),r("div",Vt,[At,l("div",bt,[i(p,{modelValue:c(h).formInfo.activePlanCode,"onUpdate:modelValue":g[0]||(g[0]=e=>c(h).formInfo.activePlanCode=e),options:C.value,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])]))],64)):T("",!0),c(N)?(a(),P(v,{key:1},{default:s((()=>[c(x)&&c(L).length>1?(a(),r("div",St,[(a(!0),r(u,null,d(c(L),(e=>(a(),r("div",{key:e.paymentFrequency,class:m("picture-payment-item"),onClick:t=>E(e.paymentFrequency)},[c(h).formInfo.paymentFrequency==e.paymentFrequency?(a(),r("img",{key:0,src:e.selectedPic},null,8,Lt)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,xt))],8,wt)))),128))])):w.value?(a(),r("div",Ut,[l("div",{class:m("com-payment-type-item "+(c(h).formInfo.paymentFrequency==c(G).MONTH?"active":"")),onClick:g[1]||(g[1]=e=>E(c(G).MONTH))},Ft,2),l("div",{class:m("com-payment-type-item "+(c(h).formInfo.paymentFrequency==c(G).SINGLE?"active":"")),onClick:g[2]||(g[2]=e=>E(c(G).SINGLE))},Et,2)])):c(F).length>1?(a(),r("div",Mt,[Rt,l("div",Bt,[i(p,{modelValue:c(h).formInfo.paymentFrequency,"onUpdate:modelValue":g[3]||(g[3]=e=>c(h).formInfo.paymentFrequency=e),options:c(F)},null,8,["modelValue","options"])])])):T("",!0)])),_:1})):T("",!0),i(ht,{"form-info":c(h).formInfo,"insure-detail":e.insureDetail,"config-detail":e.configDetail},null,8,["form-info","insure-detail","config-detail"]),c(k)&&c(k).premiumUnit?(a(),r(u,{key:2},[l("div",qt,[Zt,l("div",_t,o(c(V)),1)]),c(A)&&c(A).premiumExplain&&c(A).premiumExplainViewName?(a(),r("div",jt,[l("div",Ht,[Yt,l("div",null,[l("span",null,o(c(A).premiumExplain||""),1),l("span",{class:"file-name",onClick:M},"《"+o(c(A).premiumExplainViewName||"")+"》",1)])])])):T("",!0)],64)):T("",!0)]),i(f)])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-0daa05e6"]]);const Gt={class:"inscribedContent-content"},Kt={class:"content"};var Jt=E(e({props:{inscribedContent:{type:String,default:""}},setup(e){const t=e,n=f();return y((()=>t.inscribedContent),(e=>{n.value=e?e.replaceAll("\n","<br />"):""}),{immediate:!0,deep:!0}),(e,t)=>{const i=C("dompurify-html");return a(),r("div",Gt,[g(l("div",Kt,null,512),[[i,n.value]])])}}}),[["__scopeId","data-v-702b2de2"]]);const Wt={class:"page-internet-product-detail"},Xt={class:"info"},zt={class:"footer-area"},$t={class:"price"},en=D(" 总保费"),tn=D(o("立即投保"));var nn=E(e({setup(e){var d,m;const g=ce();S();const p=w(),{openId:v,productCode:h="BWYL2021",tenantId:C,phoneNo:D,agentCode:O="",saleChannelId:N,paymentMethod:k,certNo:V,name:A,templateId:E,pageCode:M,from:R,extraInfo:B,insurerCode:Z}=p.query;let _={};try{_=JSON.parse(decodeURIComponent(B))}catch(je){}const Y=f({certNo:V,openId:v,tenantId:C,mobile:D}),Q=f(),K=f(),ae=f(),oe=f(),ge=f(),pe=f(!1),ve=f(!1),fe=f(!1),ye=f(0),Ie=f(!1);f(!1);const he=f();let Ce="";const De=f(!0),Oe="alert",Ne="jumpToPage";t({holder:{certNo:V,certType:q.CERT,mobile:D,name:A,socialFlag:J.HAS,extInfo:{hasSocialInsurance:J.HAS}},insured:{certNo:V,certType:q.CERT,name:A,socialFlag:J.HAS,relationToHolder:W.SELF},paymentMethod:k,renewalDK:"Y",packageProductList:[],mobileSmsCode:"",activePlanCode:"",paymentFrequency:G.MONTH,insurancePeriodValue:"",commencementTime:Pe(new Date)});const ke=f({tenantId:C,agencyId:O,orderCategory:1,saleUserId:N,saleChannelId:N,venderCode:Z,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:G.MONTH,insurancePeriodValue:"",commencementTime:"",tenantOrderHolder:{socialFlag:J.HAS,extInfo:{hasSocialInsurance:J.HAS}},tenantOrderInsuredList:[{socialFlag:J.HAS,relationToHolder:W.SELF,extInfo:{occupationCodeList:[],hasSocialInsurance:J.HAS},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:C,productCode:null==(d=ae.value)?void 0:d.productCode,productName:null==(m=ae.value)?void 0:m.productName,premium:ge.value||0}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",successJumpUrl:"",pageCode:"productInfo",..._},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),Ve=I((()=>{var e,t,n,a,r,i;return!!ae.value&&!!((null==(t=null==(e=ae.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList)&&Array.isArray(null==(a=null==(n=ae.value)?void 0:n.tenantProductInsureVO)?void 0:a.planList)&&(null==(i=null==(r=ae.value)?void 0:r.tenantProductInsureVO)?void 0:i.planList.length)>0)})),Ae=I((()=>{var e,t,n;if(Ve.value){if(ke.value.activePlanCode)return(null==(e=oe.value)?void 0:e.planFactor[ke.value.activePlanCode])||{}}else if(null==(t=oe.value)?void 0:t.productFactor)return null==(n=oe.value)?void 0:n.productFactor;return{}}));y((()=>Ve.value),(()=>{var e,t;Ve.value&&(ke.value.activePlanCode=null==(t=null==(e=ae.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList[0].planCode)}),{immediate:!0});const be=I((()=>{var e,t,n;return Ve.value?(null==(t=null==(e=oe.value)?void 0:e.productRelationPlanVOList.find((e=>e.planCode===ke.value.activePlanCode)))?void 0:t.productRiskVoList)||[]:(null==(n=oe.value)?void 0:n.productRiskVoList)||[]})),Se=e=>{ke.value.activePlanCode=e},we=I((()=>[])),Le=f();y([()=>Ve.value,()=>ke.value.activePlanCode,()=>ae.value],(()=>{var e,t;let n={};if(Ve.value){const t=null==(e=ae.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===(ke.value.activePlanCode||"")));t&&(n=null==t?void 0:t.attachmentVOList)}else n=null==(t=ae.value)?void 0:t.tenantProductInsureVO.planInsureVO.attachmentVOList;if(!n)return void(Le.value=[]);const a={2:"richText",3:"link"};Le.value=Object.keys(n).map((e=>(n[e].forEach((e=>{if("1"===e.attachmentType){const t=e.attachmentUri.split("?"),n=t[0].substr(t[0].lastIndexOf(".")+1);e.attachmentType="pdf"===n?"pdf":"picture"}else e.attachmentType=a[e.attachmentType]})),{attachmentName:e,attachmentList:n[e]})))}),{immediate:!0});const xe=()=>{K.value.handleClickTab()("tab3")},Ue=async()=>{await le(((e={},t={},n={})=>{var a;const r={...n},i={tenantId:C,riskList:(null==(a=r.tenantOrderInsuredList[0])?void 0:a.tenantOrderProductList[0].riskVOList)||[],riskPremium:t,productId:null==e?void 0:e.productBasicInfoVO.id};return r.extInfo.iseeBizNo=Ce,r.commencementTime=r.insuranceStartDate,r.expiryDate=r.insuranceEndDate,r.tenantOrderInsuredList=r.tenantOrderInsuredList.map((e=>({...e,planCode:ke.value.activePlanCode?ke.value.activePlanCode:null}))),r.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:"",productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:ke.value.activePlanCode?ke.value.activePlanCode:null,tenantOrderRiskList:ie(i)},r})(oe.value,{},ke.value),(async(e,t)=>{t===Ne&&(null==e?void 0:e.orderNo)&&(he.value=null==e?void 0:e.orderNo,await(async()=>{const{code:e,data:t}=await te({orderNo:he.value,tenantId:C});"10000"===e&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await le(t))})())}))},Fe=async(e,t,n,a=!0)=>{var r,i;const s=re(n).map((t=>({...t,paymentFrequency:e.paymentFrequency,insurancePeriodValue:e.insurancePeriodValue}))),l={tenantId:C,productCode:null==(r=ae.value)?void 0:r.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,holder:{personVO:{...e.tenantOrderHolder,socialFlag:e.tenantOrderHolder.extInfo.hasSocialInsurance}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance},productPlanVOList:[{insurerCode:t.productBasicInfoVO.insurerCode,planCode:ke.value.activePlanCode?ke.value.activePlanCode:null,riskVOList:s}]})))},{code:o,message:c}=await $(l);if("10000"===o){const{code:e,data:t}=await ee(l);if("10000"===e){const{pageAction:e,message:n,data:r}=t.pageAction||{};if(e===Oe)return void b(n);ke.value.tenantOrderInsuredList[0].tenantOrderProductList=null==(i=l.insuredVOList[0])?void 0:i.productPlanVOList,ge.value=t.premium,ke.value.orderAmount=t.premium,ke.value.orderRealAmount=t.premium,a||Ue()}}else b(c)},Ee=async()=>{try{await Fe(ke.value,oe.value,be.value,!1)}catch(e){}},Me=e=>{"allFalse"===e?(ve.value=!1,pe.value=!0,Ee()):x.confirm({message:"您当前的健康状况不符合该产品",confirmButtonText:"确定"}).then((()=>{window.history.back()})).catch((()=>{var e;null==(e=Q.value)||e.reEditForm(),pe.value=!1}))},Re=()=>{var e;null==(e=Q.value)||e.reEditForm(),pe.value=!1},qe=()=>{ve.value=!1,Re()},Ze=()=>{fe.value=!1,Re()},_e=()=>{fe.value=!1,ve.value=!0};y([()=>ke.value.tenantOrderInsuredList[0].birth,()=>ke.value.tenantOrderInsuredList[0].gender,()=>ke.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance],U((async()=>{const{birth:e,gender:t,extInfo:{hasSocialInsurance:n}}=ke.value.tenantOrderInsuredList[0];e&&t&&n&&await Fe(ke.value,oe.value,be.value)}),500),{deep:!0,immediate:!0});return H(),L((()=>{(async()=>{const e=ne({productCode:h,withInsureInfo:!0,tenantId:C}),t=z({productCode:h});await Promise.all([e,t]).then((([e,t])=>{var n;"10000"===e.code&&(ae.value={...e.data},document.title=(null==(n=e.data)?void 0:n.productFullName)||""),"10000"===t.code&&(oe.value=t.data)}))})(),setTimeout((async()=>{Ce=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const d=n("van-config-provider");return a(),r(u,null,[i(d,{"theme-vars":c(g)},{default:s((()=>{var n,r,u,d,m,p,v,f,y;return[l("div",Wt,[l("div",Xt,[i(ue,{url:null==(r=null==(n=ae.value)?void 0:n.tenantProductInsureVO)?void 0:r.banner[0]},null,8,["url"]),(null==(d=null==(u=ae.value)?void 0:u.tenantProductInsureVO)?void 0:d.bannerMove)?(a(),P(ue,{key:0,url:null==(p=null==(m=ae.value)?void 0:m.tenantProductInsureVO)?void 0:p.bannerMove[0],onClick:xe},null,8,["url"])):T("",!0)]),i(Be,{"show-service-config":"","data-source":null==(v=ae.value)?void 0:v.tenantProductInsureVO,"is-multiple-plan":c(Ve),"active-plan-code":ke.value.activePlanCode,onUpdateActivePlan:Se},null,8,["data-source","is-multiple-plan","active-plan-code"]),i(ze,{ref_key:"detailScrollRef",ref:K,detail:ae.value},{form:s((()=>[i(se,{ref_key:"formRef",ref:Q,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":ke.value,"send-sms-code":()=>{},"factor-object":c(Ae)||{}},{holderName:s((()=>[i(Te,{"user-info":Y.value},null,8,["user-info"])])),insurerName:s((()=>[i(Te,{title:"选择被保人","user-info":Y.value},null,8,["user-info"])])),_:1},8,["form-info","send-sms-code","factor-object"]),i(Qt,{"form-info":ke.value,"insure-detail":oe.value,"config-detail":ae.value,"is-multiple-plan":c(Ve),"risk-info-period-list":e.riskInfoPeriodList,premium:ge.value},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","risk-info-period-list","premium"])])),_:1},8,["detail"]),(null==(f=ae.value)?void 0:f.tenantProductInsureVO.inscribedContent)?(a(),P(Jt,{key:0,"inscribed-content":null==(y=ae.value)?void 0:y.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):T("",!0),Le.value&&Le.value.length>0?(a(),P(de,{key:1,"attachement-list":Le.value,"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{ye.value=e,fe.value=!0})(e))},null,8,["attachement-list"])):T("",!0),l("div",zt,[l("div",$t,[en,l("span",null,o(ge.value?"￥":"")+o(c(j)(ge.value))+" "+o(ge.value?ke.value.paymentFrequency==c(X).YEAR?"元/年":"元/月":""),1)]),i(F,{shadow:!1,"theme-vars":c(g),class:"right",text:"立即投保",onClick:Ee},{default:s((()=>[tn])),_:1},8,["theme-vars"])])])]})),_:1},8,["theme-vars"]),i(ot,{show:ve.value,"onUpdate:show":t[1]||(t[1]=e=>ve.value=e),"content-list":c(we),"active-index":0,onOnConfirmHealth:Me,onOnCloseHealth:qe},null,8,["show","content-list"]),fe.value?(a(),P(me,{key:0,show:fe.value,"onUpdate:show":t[2]||(t[2]=e=>fe.value=e),"content-list":Le.value,"is-only-view":De.value,"active-index":ye.value,text:De.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:_e,onOnCloseFilePreview:Ze},null,8,["show","content-list","is-only-view","active-index","text"])):T("",!0),i(nt,{"is-show":Ie.value},null,8,["is-show"])],64)}}}),[["__scopeId","data-v-24191b0c"]]);export{nn as default};

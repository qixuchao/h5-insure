!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-occupational-wrapper .popup-title[data-v-5a8b43dd]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-occupational-wrapper .popup-content[data-v-5a8b43dd]{height:13.84rem}.com-occupational-wrapper .footer-bar[data-v-5a8b43dd]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.com-personal-info-wrapper .placeholder[data-v-e536a7be]{color:#99a9c0}.com-risk-card-wrapper.part-card[data-v-6ed2e2a3]{background-color:#fff;margin-bottom:.26667rem}.com-risk-card-wrapper .delete-risk[data-v-6ed2e2a3]{display:flex;align-items:center;justify-content:center;margin-top:.06667rem}.com-risk-card-wrapper .delete-risk .svg-icon[data-v-6ed2e2a3]{font-size:.42667rem}.com-risk-card-wrapper .custom-field[data-v-6ed2e2a3]{display:flex;flex-direction:column}.com-risk-card-wrapper .custom-field .field-tip[data-v-6ed2e2a3]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .popup-title[data-v-5817f2de]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem;font-size:.45333rem;font-weight:600;color:#393d46}.com-risk-list-wrapper .risk-list[data-v-5817f2de]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper[data-v-5817f2de] .van-cell-group--inset{border-bottom:1px solid #eeeff4}.com-risk-list-wrapper[data-v-5817f2de] .van-cell-group--inset .van-cell{padding:.30667rem 0}.com-risk-list-wrapper .cell-title[data-v-5817f2de]{display:flex;flex-direction:column}.com-risk-list-wrapper .cell-title .title-desc[data-v-5817f2de]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .footer-bar[data-v-5817f2de]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.risk-list-wrapper[data-v-3a20d838]{margin-bottom:3.13333rem}.risk-list-wrapper .add-rider-risk[data-v-3a20d838]{background-color:#fff;margin-top:-.26667rem;height:1.41333rem;display:flex;align-items:center;justify-content:space-between;padding:var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding)}.risk-list-wrapper .add-rider-risk .left-part[data-v-3a20d838]{font-weight:400;color:#99a9c0;font-size:.4rem}button[data-v-43a1c07a]{width:2.88rem;height:1.06667rem;background:#f6f7fc;border-radius:.16rem;font-size:.37333rem;font-weight:400;color:#393d46;border:0}button.active-button[data-v-43a1c07a]{color:#f6f7fc;background-color:#0d6efe;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAxlBMVEUAAADo7//1+P/u9P/j7P/6+//////+///9///8/f/9/v/9/v/+/v/+///////////3+f/4+v/4+//////8/f/+/v/u8//6/P/3+v/4+//2+f/1+P/w9f8Nbv/z9//s8v/p8P/y9v/r8f/6+//////m7v/k7f/n7//j6//h6v8fef/a6P/S4//G3f9npP84iP8XdP8Scf+00f+dw/+Gtv9wqf9Jkv8qf//A2f+ix/95r//M3/+61P+tzf+Qvf9anP9Zm/9Umf9RAkYxAAAAFHRSTlMAgICAgICA1bTRinRjSyXm5syxDQ9dqxQAAAI0SURBVEjHpc4Je6IwEIDh2ava7bGXokICggIr3nfbPfv//1RnTCGBUCTyPfNshsjLFq7G4+64izN+I/l798t1++Ye1K66WIZxKSZgdt+61bRJrbsK3el2cPInJe8+q7r8JVHph9o/VG1aGxTd6/QoPOQL+ICj7eJZ/cs/9SQWH9KeC3d3uh71Rjj6rtcCVWtIOTFtv83pwWhA4THCkSfVGxCkZ7HjP9eQ0/2BVn/Qx9F36j6vtZcxHUeLJ5vOGyj83zIJCSnNjpw/0PIdzmi7b+OoN/OE88Sj7RsUet+31QjiKM+bFeer+Wn/Cpq2K9uuOV//tkWga4eyHRvHKe47jv1J76FEF3H27OzJPmb3UKpFruO6s0ju7B/Zv04WlGt6mXrk622K4wPZnSuDcp3+/ISvL7zTOl2S3buVWGrf9acJguUUH2ZHsovU4W8+4XLti+YrJMnGf0jIPjO8QiewD+f0Zk1qseLYwfNzQYVmPsPZ8rRl7L/eCcvg7T4w0S61E4QUYUY71ND7kz1OWTGooa3/aJMZM8GkLWYhDg48mVtp4o7hAue06FdklQRndUXQRIOB9iwPR9mhhvY8Qjr2oKYOvADHywc1tUx8iKqH4V2ghlp8AIy0bBgMh4hr6qEAVJDuUF/rQRMNhjoexjjijMFEx4XASIdhHMY4dBI21aH8QAjmWgYX6iiMIsSmOjqFOjTH8DHKgiYaLtE/G2DUImiioYmGBnoCF+vJBHEDDU00NNEvygu9bTCc0LoAAAAASUVORK5CYII=);background-repeat:no-repeat;background-size:.53333rem .53333rem;background-position:2.33333rem 1px}@charset "UTF-8";.page-trial-wrapper[data-v-7cb3b17e]{background-color:#f2f5fc}.page-trial-wrapper .part-card[data-v-7cb3b17e]{background-color:#fff;margin-bottom:.26667rem}.page-trial-wrapper .risk-content[data-v-7cb3b17e] .van-collapse-item__title--expanded{padding:0 .4rem 0 0;display:flex;align-items:center}.page-trial-wrapper .risk-content[data-v-7cb3b17e] .van-collapse-item__content{padding:0}.page-trial-wrapper .plan-risk[data-v-7cb3b17e] .van-tabs__line{display:none}.page-trial-wrapper .footer-bar[data-v-7cb3b17e]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:.4rem;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #efeff4}.page-trial-wrapper .footer-bar .trial-result[data-v-7cb3b17e]{width:5.86667rem;color:#ff5840;font-size:.32rem;font-weight:600}.page-trial-wrapper .footer-bar .trial-result .result-num[data-v-7cb3b17e]{font-size:.61333rem;font-weight:500;margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate button[data-v-7cb3b17e]{width:3.73333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-7cb3b17e]{position:absolute;z-index:122;height:.56rem;border-radius:1.33333rem;background-color:#ff5840;font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC,sans-serif;font-weight:400;color:#fff;line-height:.49333rem;padding:.04rem .28rem .02667rem .26667rem;right:.4rem;top:-.56rem;display:flex;align-items:center}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip .close-icon[data-v-7cb3b17e]{margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-7cb3b17e]:after{content:" ";position:absolute;z-index:11;width:0;height:0;border:.13333rem solid transparent;border-top:.13333rem solid #ff5840;border-right:.13333rem solid #ff5840;right:.49333rem;bottom:-.26667rem}\n',document.head.appendChild(e),System.register(["./vendor-legacy-c42d3d01.js","./index-legacy-27ad338c.js","./index-legacy-6ff7f62f.js"],(function(e){"use strict";var i,a,l,t,o,r,n,d,u,s,m,c,p,v,f,y,b,k,g,V,h,I,D,L,O,C,R,w,A,_,P,x,q,F,T,U,Y,j;return{setters:[function(e){i=e.g,a=e.L,l=e.o,t=e.a0,o=e.r,r=e.k,n=e.m,d=e.n,u=e.j,s=e.y,m=e.z,c=e.a1,p=e.a2,v=e.a3,f=e.C,y=e.x,b=e.d,k=e.h,g=e.s,V=e.I,h=e.a4,I=e.a5,D=e.F,L=e.E,O=e.a6,C=e.a7,R=e.B,w=e.D,A=e.J,_=e.Q,P=e.a8,x=e.T},function(e){q=e.P,F=e.a},function(e){T=e.b,U=e.S,Y=e._,j=e.P}],execute:function(){const M=[{label:"男",value:"1"},{label:"女",value:"2"}],S=[{label:"有",value:"1"},{label:"无",value:"2"}],N=[{value:1,label:"第5个保单周年日"},{value:2,label:"起始领取年龄55周岁"},{value:3,label:"起始领取年龄60周岁"},{value:4,label:"起始领取年龄65周岁"},{value:5,label:"起始领取年龄70周岁"},{value:6,label:"起始领取年龄75周岁"}],E=[{value:1,label:"年领"},{value:2,label:"月领"}],z=[{label:"趸交",value:"1"},{label:"年交",value:"2"},{label:"半年交",value:"3"},{label:"季交",value:"4"},{label:"月交",value:"5"}],B=[{label:"趸交",value:"single"},{label:"1年交",value:"year_1"},{label:"5年交",value:"year_5"},{label:"10年交",value:"year_10"},{label:"15年交",value:"year_15"},{label:"20年交",value:"year_20"},{label:"25年交",value:"year_25"},{label:"30年交",value:"year_30"},{label:"35年交",value:"year_35"}],G=[{label:"7天",value:"day_7"},{label:"14天",value:"day_14"},{label:"30天",value:"day_30"},{label:"1年",value:"year_1"},{label:"3年",value:"year_3"},{label:"5年",value:"year_5"},{label:"10年",value:"year_10"},{label:"15年",value:"year_15"},{label:"20年",value:"year_20"},{label:"25年",value:"year_25"},{label:"30年",value:"year_30"},{label:"35年",value:"year_35"},{label:"终身",value:"to_life"}],H=[{label:"同主险期间减1",value:"3"},{label:"无限制",value:"2"}],J=[{label:"返保额",value:"1"},{label:"返保费",value:"2"}],Q=[{label:"投保",value:"0"},{label:"不投保",value:"-1"}];new U({source:"sessionStorage"});const $=new U({source:"localStorage"});new U({source:"cookie"});const K={class:"com-occupational-wrapper"},W=(e=>(c("data-v-5a8b43dd"),e=e(),p(),e))((()=>s("div",{class:"popup-title"},"选择职业",-1))),Z={class:"popup-content"},X=i({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(e,{emit:i}){const c=e,p=a({show:c.show,options:[],currentValue:""}),v=()=>{i("close")},f=({value:e,selectedOptions:a})=>{const l=(a||[]).map((e=>e.value)).join("/");i("update:modelValue",e),i("finish",l),v()},y=()=>{var e,i;const a=`${null===(e=c.insurerCode)||void 0===e||null===(i=e.toLocaleUpperCase)||void 0===i?void 0:i.call(e)}_OCCUPATION`,l=$.get("occupational")||{};l[a]?p.options=l[a]:((e={})=>T.post("/api/gateway/system/dict/v2/queryDictInfo",e))({dictCodeList:[a]}).then((({code:e,data:i})=>{if("10000"===e){var t;const e=(e=>{const i=e,a=e=>{e.forEach((e=>{const i=e;i.children.length?a(i.children):i.children=null}))};return a(i),i})((null==i||null===(t=i[0])||void 0===t?void 0:t.dictItemList)||[]);p.options=e,l[a]=e,$.set("occupational",l)}}))};return l((()=>{y()})),t((()=>c.modelValue),(e=>{}),{deep:!0,immediate:!0}),(e,i)=>{const a=o("van-cascader"),l=o("VanPopup");return r(),n("div",K,[d(l,{show:m(p).show,"onUpdate:show":i[1]||(i[1]=e=>m(p).show=e),"show-footer":"",position:"bottom",closeable:"",onClose:v},{default:u((()=>[W,s("div",Z,[d(a,{modelValue:m(p).currentValue,"onUpdate:modelValue":i[0]||(i[0]=e=>m(p).currentValue=e),title:"请选择职业","show-header":!1,placeholder:"请选择",options:m(p).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:f},null,8,["modelValue","options"])])])),_:1},8,["show"])])}}});var ee=Y(X,[["__scopeId","data-v-5a8b43dd"]]);const ie={class:"com-personal-info-wrapper"},ae={key:0,class:"placeholder"},le={key:1};var te=Y(i({props:{formInfo:{type:Object,required:!0,default:()=>{}},insuredCode:{type:String,required:!0,default:""},factorList:{type:Array,required:!0,default:()=>[]},ageRange:{type:Array,required:!0,default:()=>[]}},setup(e,{expose:i}){const l=e,[t,s]=v(),[c,p]=v(),I=f(),D=a({formInfo:null==l?void 0:l.formInfo,occupationalText:""}),L=e=>{D.occupationalText=e},O=()=>{p(!1)},C=y((()=>{const e=(e=>{const i=e||[];for(let a=0;a<i.length;a++)for(let e=a+1;e<i.length;e++){const l=i[a].split("_"),t=i[e].split("_"),o=i[a];l[0]===t[0]?l>t&&(i[a]=i[e],i[e]=o):"age"===l[0]&&(i[a]=i[e],i[e]=o)}return i})(null==l?void 0:l.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],a=i(e[0]),t=i(e[e.length-1]),o=b().subtract(a[0],"age"===a[1]?"year":"day").format("YYYY-MM-DD"),r=b().subtract(t[0],"age"===t[1]?"year":"day").format("YYYY-MM-DD");return{minAge:new Date(r),maxAge:new Date(o)}}));return i({validateForm:()=>new Promise(((e,i)=>{null==I||I.value.validate().then((()=>{e("")}),(()=>{i()}))}))}),(i,a)=>{const l=o("VanField"),v=o("VanForm"),f=o("van-datetime-picker"),y=o("van-popup");return r(),n("div",ie,[d(v,{ref_key:"formRef",ref:I,"input-align":"right","error-message-align":"right"},{default:u((()=>[e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY")?(r(),k(l,{key:0,modelValue:m(D).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>m(D).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink","is-link":"",placeholder:"请选择",onClick:a[1]||(a[1]=e=>m(s)(!0))},null,8,["modelValue"])):g("",!0),e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER")?(r(),k(l,{key:1,modelValue:m(D).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>m(D).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:u((()=>[d(q,{modelValue:m(D).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>m(D).formInfo.gender=e),options:m(M)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):g("",!0),e.factorList.includes("SOCIAL_INS")?(r(),k(l,{key:2,modelValue:m(D).formInfo.socialSecurity,"onUpdate:modelValue":a[5]||(a[5]=e=>m(D).formInfo.socialSecurity=e),name:"socialSecurity",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:u((()=>[d(q,{modelValue:m(D).formInfo.socialSecurity,"onUpdate:modelValue":a[4]||(a[4]=e=>m(D).formInfo.socialSecurity=e),options:m(S)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):g("",!0),e.factorList.includes("OCCUPATION_CATEGORY")?(r(),k(l,{key:3,modelValue:m(D).formInfo.occupationalClass,"onUpdate:modelValue":a[6]||(a[6]=e=>m(D).formInfo.occupationalClass=e),rules:[{required:!0,message:"请选择职业类型"}],name:"occupationalClass",label:"职业类型","is-link":"",placeholder:"请选择",onClick:a[7]||(a[7]=e=>m(p)(!0))},{input:u((()=>[m(D).occupationalText?(r(),n("div",le,V(m(D).occupationalText),1)):(r(),n("span",ae,"请选择"))])),_:1},8,["modelValue"])):g("",!0)])),_:1},512),d(y,{show:m(t),"onUpdate:show":a[10]||(a[10]=e=>h(t)?t.value=e:null),position:"bottom"},{default:u((()=>[d(f,{type:"date","min-date":m(C).minAge,"max-date":m(C).maxAge,onConfirm:a[8]||(a[8]=e=>{m(D).formInfo.birthday=m(b)(e).format("YYYY-MM-DD"),m(s)(!1)}),onCancel:a[9]||(a[9]=e=>m(s)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"]),m(c)?(r(),k(ee,{key:0,modelValue:m(D).formInfo.occupationalClass,"onUpdate:modelValue":a[11]||(a[11]=e=>m(D).formInfo.occupationalClass=e),show:m(c),"insured-code":"insuredCode",onFinish:L,onClose:O},null,8,["modelValue","show"])):g("",!0)])}}}),[["__scopeId","data-v-e536a7be"]]);const oe={class:"com-risk-card-wrapper part-card"},re={class:"custom-field"},ne={class:"field-tip"},de={class:"custom-field"},ue={class:"field-tip"},se={class:"custom-field"},me={class:"field-tip"},ce={key:0},pe={key:9,class:"liab-desc"},ve=i({props:{originData:{type:Object,required:!0,default:()=>{}},formInfo:{type:Object,required:!0,default:()=>{}},mainRiskData:{type:Object,default:()=>{}},mainRiskInfo:{type:Object,required:!1,default:()=>{}},index:{type:[Number,String],default:0,required:!0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{type:Array,default:()=>[]}},setup(e){const i=e,c=I("premium")||{},p=f({paymentYear:{disabled:!1,prevent:!1},coverageYear:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),v=a({formInfo:i.formInfo}),b=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"object Object"==={}.toString.call(e)&&Object.keys(e).length),h=(e,i)=>{let a=i;return Array.isArray(i)||(a=[`${a}`]),(e||[]).filter((e=>a.includes(`${e.value}`)||a.includes(e.value)))},O=y((()=>{var e,a,l,t,o,r;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?h(G,null==i||null===(o=i.originData)||void 0===o||null===(r=o.riskInsureLimitVO)||void 0===r?void 0:r.insurancePeriodValueList):2===(null===(a=i.originData)||void 0===a?void 0:a.periodType)?h([{value:"year_1",label:"1年"}],["year_1"]):h(G,null==i||null===(l=i.mainRiskData)||void 0===l||null===(t=l.riskInsureLimitVO)||void 0===t?void 0:t.insurancePeriodValueList)})),C=y((()=>{var e,a,l,t,o,r,n,d,u;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?h(B,null==i||null===(r=i.originData)||void 0===r||null===(n=r.riskInsureLimitVO)||void 0===n?void 0:n.paymentPeriodValueList):1===(null===(a=i.originData)||void 0===a?void 0:a.exemptFlag)?h(H,[`${null==i||null===(d=i.originData)||void 0===d||null===(u=d.riskInsureLimitVO)||void 0===u?void 0:u.paymentPeriodRule}`]):2===(null===(l=i.originData)||void 0===l?void 0:l.periodType)?h([{value:"year_1",label:"1年交"}],["year_1"]):h(B,null==i||null===(t=i.mainRiskData)||void 0===t||null===(o=t.riskInsureLimitVO)||void 0===o?void 0:o.paymentPeriodValueList)})),R=y((()=>{var e,a,l,t,o,r,n,d;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?h(z,null==i||null===(o=i.originData)||void 0===o||null===(r=o.riskInsureLimitVO)||void 0===r?void 0:r.paymentFrequencyList):1===(null==i||null===(a=i.originData)||void 0===a?void 0:a.paymentTypeRule)?h(z,null==i||null===(n=i.mainRiskData)||void 0===n||null===(d=n.riskInsureLimitVO)||void 0===d?void 0:d.paymentFrequencyList):h(z,null==i||null===(l=i.mainRiskData)||void 0===l||null===(t=l.riskInsureLimitVO)||void 0===t?void 0:t.paymentFrequencyList)})),w=y((()=>{var e,a;let l=0,t=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minAmount,t=e.maxAmount),l>e.minAmount&&(l=e.minAmount),t<e.maxAmount&&(t=e.maxAmount)})),v.formInfo.sumInsured=l,{min:l,max:t}})),A=y((()=>{var e,a;let l=0,t=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minPremium,t=e.maxPremium),l>e.minPremium&&(l=e.minPremium),t<e.maxPremium&&(t=e.maxPremium)})),v.formInfo.premium=l,{min:l,max:t}})),_=y((()=>{var e,a,l,t;const o=(null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.minCopy)||1,r=null===(l=i.originData)||void 0===l||null===(t=l.riskCalcMethodInfoVO)||void 0===t?void 0:t.maxCopy;return v.formInfo.copy=o,{min:o,max:r}}));return l((()=>{var e,a;const l={riskType:i.originData.riskType,riskId:i.originData.id,riskCode:i.originData.riskCode,mainRiskCode:null==i||null===(e=i.mainRiskData)||void 0===e?void 0:e.riskCode,mainRiskId:null==i||null===(a=i.mainRiskData)||void 0===a?void 0:a.id,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityId:e.id,liabilityRateType:e.liabilityRateType})))};Object.assign(null==v?void 0:v.formInfo,l)})),t((()=>i),(()=>{}),{deep:!0,immediate:!0}),t((()=>{var e;return null===(e=v.formInfo)||void 0===e?void 0:e.paymentFrequency}),(e=>{var a,l,t,o;[3,4].includes(null===(a=i.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.saleMethod)&&((null===(t=i.originData)||void 0===t||null===(o=t.riskCalcMethodInfoVO)||void 0===o?void 0:o.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(v.formInfo,{sumInsured:i.perCopyAmount,premium:i.perCopyPremium})}));"1"===e&&"single"!==v.formInfo.paymentYear&&(v.formInfo.paymentYear="single")})),t((()=>{var e;return null===(e=v.formInfo)||void 0===e?void 0:e.paymentYear}),(e=>{"single"===e&&"1"!==v.formInfo.paymentFrequency&&(v.formInfo.paymentFrequency="1")})),t((()=>null==i?void 0:i.mainRiskInfo),(e=>{var a,l,t,o,r,n;e&&2===i.originData.riskType&&(1===(null===(a=i.originData)||void 0===a||null===(l=a.riskInsureLimitVO)||void 0===l?void 0:l.insurancePeriodRule)&&(e.coverageYear?p.value.coverageYear.disabled=!0:p.value.coverageYear.prevent=!0,v.formInfo.coverageYear=e.coverageYear),1===(null===(t=i.originData)||void 0===t||null===(o=t.riskInsureLimitVO)||void 0===o?void 0:o.paymentPeriodRule)&&(e.paymentYear?p.value.paymentYear.disabled=!0:p.value.paymentYear.prevent=!0,v.formInfo.paymentYear=e.paymentYear),1===(null===(r=i.originData)||void 0===r||null===(n=r.riskInsureLimitVO)||void 0===n?void 0:n.paymentTypeRule)&&(e.paymentFrequency?p.value.paymentFrequency.disabled=!0:p.value.paymentFrequency.prevent=!0,v.formInfo.paymentFrequency=e.paymentFrequency))}),{immediate:!0,deep:!0}),(i,a)=>{var l,t,f,y,I,P,x,F,T,U,Y,j,M,S,z,B,G,H,$,K,W,Z,X,ee,ie,ae,le,te,ve,fe,ye,be,ke,ge,Ve,he,Ie,De;const Le=o("ProSvg"),Oe=o("ProTitle"),Ce=o("VanStepper"),Re=o("VanField"),we=o("ProExpand");return r(),n("div",oe,[d(Oe,{"risk-type":null===(l=e.originData)||void 0===l?void 0:l.riskType,title:null===(t=e.originData)||void 0===t?void 0:t.riskName},{default:u((()=>[e.removeRiskList.includes(e.originData.id)?(r(),n("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=i=>e.removeRisk(e.originData.id))},[d(Le,{name:"delete",color:"#0d6efe"})])):g("",!0)])),_:1},8,["risk-type","title"]),1===(null===(f=e.originData)||void 0===f||null===(y=f.riskCalcMethodInfoVO)||void 0===y?void 0:y.saleMethod)&&2===(null===(I=e.originData)||void 0===I?void 0:I.exemptFlag)?(r(),k(Re,{key:0,modelValue:m(v).formInfo.sumInsured,"onUpdate:modelValue":a[2]||(a[2]=e=>m(v).formInfo.sumInsured=e),label:"保额",name:"sumInsured",rules:[{required:!0,message:"请填写"},{}]},{input:u((()=>{var i,l,t,o;return[s("div",re,[d(Ce,{modelValue:m(v).formInfo.sumInsured,"onUpdate:modelValue":a[1]||(a[1]=e=>m(v).formInfo.sumInsured=e),min:m(w).min,step:(null===(i=e.originData)||void 0===i||null===(l=i.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,max:m(w).max},null,8,["modelValue","min","step","max"]),s("span",ne,V(`金额最低${m(w).min}元，为${(null===(t=e.originData)||void 0===t||null===(o=t.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue"])):g("",!0),2===(null===(P=e.originData)||void 0===P||null===(x=P.riskCalcMethodInfoVO)||void 0===x?void 0:x.saleMethod)?(r(),k(Re,{key:1,modelValue:m(v).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>m(v).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"}]},{input:u((()=>{var i,l,t,o;return[s("div",de,[d(Ce,{modelValue:m(v).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>m(v).formInfo.premium=e),step:(null===(i=e.originData)||void 0===i||null===(l=i.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,min:m(A).min,max:m(A).max},null,8,["modelValue","step","min","max"]),s("span",ue,V(`金额最低${m(A).min}元，为${(null===(t=e.originData)||void 0===t||null===(o=t.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue"])):g("",!0),3===(null===(F=e.originData)||void 0===F||null===(T=F.riskCalcMethodInfoVO)||void 0===T?void 0:T.saleMethod)||4===(null===(U=e.originData)||void 0===U||null===(Y=U.riskCalcMethodInfoVO)||void 0===Y?void 0:Y.saleMethod)&&(null!==(j=e.originData)&&void 0!==j&&null!==(M=j.riskCalcMethodInfoVO)&&void 0!==M&&M.minCopy||null!==(S=e.originData)&&void 0!==S&&null!==(z=S.riskCalcMethodInfoVO)&&void 0!==z&&z.maxCopy)?(r(),k(Re,{key:2,modelValue:m(v).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>m(v).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:u((()=>[s("div",se,[d(Ce,{modelValue:m(v).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>m(v).formInfo.copy=e),step:1,min:m(_).min,max:m(_).max},null,8,["modelValue","min","max"]),s("span",me,V(`${m(_).min}份起购，最多购买${m(_).max}份`),1)])])),_:1},8,["modelValue"])):g("",!0),[1,4].includes(null===(B=e.originData)||void 0===B||null===(G=B.riskCalcMethodInfoVO)||void 0===G?void 0:G.saleMethod)&&1!==(null===(H=e.originData)||void 0===H?void 0:H.exemptFlag)||null===($=m(c))||void 0===$||!$[null===(K=e.originData)||void 0===K?void 0:K.riskCode]?g("",!0):(r(),k(Re,{key:3,label:"保额"},{input:u((()=>{var i,a,l;return[s("div",null,V(null===(i=m(c))||void 0===i||null===(a=i[null===(l=e.originData)||void 0===l?void 0:l.riskCode])||void 0===a?void 0:a.amount),1)]})),_:1})),b(null===(W=e.originData)||void 0===W||null===(Z=W.riskInsureLimitVO)||void 0===Z?void 0:Z.insurancePeriodValueList)&&b(null===(X=e.originData)||void 0===X||null===(ee=X.riskInsureLimitVO)||void 0===ee?void 0:ee.insurancePeriodRule)?g("",!0):(r(),k(Re,{key:4,modelValue:m(v).formInfo.coverageYear,"onUpdate:modelValue":a[8]||(a[8]=e=>m(v).formInfo.coverageYear=e),label:"保障期间",name:"coverageYear",rules:[{required:!0,message:"请选择保障期间"}]},{input:u((()=>[d(q,{modelValue:m(v).formInfo.coverageYear,"onUpdate:modelValue":a[7]||(a[7]=e=>m(v).formInfo.coverageYear=e),disabled:p.value.coverageYear.disabled,prevent:p.value.coverageYear.prevent?"请先选择主险保障期间":"",options:m(O)},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),b(null===(ie=e.originData)||void 0===ie||null===(ae=ie.riskInsureLimitVO)||void 0===ae?void 0:ae.paymentPeriodValueList)&&b(null===(le=e.originData)||void 0===le||null===(te=le.riskInsureLimitVO)||void 0===te?void 0:te.paymentPeriodRule)?g("",!0):(r(),k(Re,{key:5,modelValue:m(v).formInfo.paymentYear,"onUpdate:modelValue":a[10]||(a[10]=e=>m(v).formInfo.paymentYear=e),label:"交费期间",name:"paymentYear",rules:[{required:!0,message:"请选择交费期间"}]},{input:u((()=>[d(q,{modelValue:m(v).formInfo.paymentYear,"onUpdate:modelValue":a[9]||(a[9]=e=>m(v).formInfo.paymentYear=e),disabled:p.value.paymentYear.disabled,prevent:p.value.paymentYear.prevent?"请先选择主险交费期间":"",options:m(C)},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),b(null===(ve=e.originData)||void 0===ve||null===(fe=ve.riskInsureLimitVO)||void 0===fe?void 0:fe.paymentFrequencyList)&&b(null===(ye=e.originData)||void 0===ye||null===(be=ye.riskInsureLimitVO)||void 0===be?void 0:be.paymentPeriodRule)?g("",!0):(r(),k(Re,{key:6,modelValue:m(v).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>m(v).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:u((()=>[d(q,{modelValue:m(v).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>m(v).formInfo.paymentFrequency=e),disabled:p.value.paymentFrequency.disabled,prevent:p.value.paymentFrequency.prevent?"请先选择主险交费方式":"",options:m(R)},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),b(null===(ke=e.originData)||void 0===ke||null===(ge=ke.riskInsureLimitVO)||void 0===ge?void 0:ge.annuityDrawTypeList)?g("",!0):(r(),k(Re,{key:7,modelValue:m(v).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>m(v).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate",rules:[{required:!0,message:"请选择领取时间"}]},{input:u((()=>{var i,l;return[d(q,{modelValue:m(v).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>m(v).formInfo.annuityDrawDate=e),options:h(m(N),null===(i=e.originData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawTypeList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),b(null===(Ve=e.originData)||void 0===Ve||null===(he=Ve.riskInsureLimitVO)||void 0===he?void 0:he.annuityDrawFrequencyList)?g("",!0):(r(),k(Re,{key:8,modelValue:m(v).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>m(v).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType",rules:[{required:!0,message:"请选择领取方式"}]},{input:u((()=>{var i,l;return[d(q,{modelValue:m(v).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>m(v).formInfo.annuityDrawType=e),options:h(m(E),null===(i=e.originData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawFrequencyList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),(r(!0),n(D,null,L((null===(Ie=e.originData)||void 0===Ie?void 0:Ie.riskLiabilityInfoVOList)||[],((i,a)=>(r(),n("div",{key:a},[1===i.optionalFlag?(r(),k(Re,{key:0,modelValue:m(v).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(v).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:u((()=>{var l,t,o;return[s("div",null,[b(i.liabilityAttributeValueList)?(r(),n("span",ce,"50万")):(r(),k(q,{key:1,modelValue:m(v).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(v).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:h(m(J),null===(l=e.originData)||void 0===l||null===(t=l.riskLiabilityInfoVOList)||void 0===t||null===(o=t[a])||void 0===o?void 0:o.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(r(),k(Re,{key:1,modelValue:m(v).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(v).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:u((()=>{var l,t,o;return[s("div",null,[b(i.liabilityAttributeValueList)?(r(),k(q,{key:0,modelValue:m(v).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(v).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:m(Q)},null,8,["modelValue","onUpdate:modelValue","options"])):(r(),k(q,{key:1,modelValue:m(v).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(v).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:h(m(J),null===(l=e.originData)||void 0===l||null===(t=l.riskLiabilityInfoVOList)||void 0===t||null===(o=t[a])||void 0===o?void 0:o.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"]))])))),128)),null!==(De=e.originData)&&void 0!==De&&De.relationDesc?(r(),n("div",pe,[d(we,{title:"责任投保说明"},{default:u((()=>{var i;return[s("div",null,V(null===(i=e.originData)||void 0===i?void 0:i.relationDesc),1)]})),_:1})])):g("",!0)])}}});var fe=Y(ve,[["__scopeId","data-v-6ed2e2a3"]]);const ye=e=>(c("data-v-5817f2de"),e=e(),p(),e),be={class:"com-risk-list-wrapper"},ke=ye((()=>s("div",{class:"popup-title"},"选择附加险",-1))),ge={class:"risk-list"},Ve={class:"cell-title"},he={class:"title"},Ie=ye((()=>s("div",{class:"title-desc"},"此处为险种简要说明",-1))),De={class:"footer-bar"},Le=R("确认"),Oe=i({props:{riskList:{type:Array,required:!0,default:()=>[]},show:{type:Boolean,required:!0,default:!1},collocationList:{type:Array,default:()=>[]},disabled:{type:Array,required:!0,default:()=>[]},modelValue:{type:Array,required:!0,default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const l=e,c=f([]),p=f([]),v=f(l.disabled),y=a({show:l.show,currentChecked:[]}),b=e=>{var i,a,t;if(v.value.includes(e))return;((e,i)=>{if(!l.collocationList.length)return i?void(y.currentChecked=[]):void y.currentChecked.push(e);let a=[],t=[];i?(l.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?a=a.filter((a=>a!==i.collocationRiskId||a!==e)):3===i.collocationType&&(a=a.filter((i=>i!==e)),t=t.filter((e=>e!==i.collocationRiskId))),t=t.filter((i=>i!==e)))})),y.currentChecked=a,v.value=t):(l.collocationList.forEach((l=>{e===l.riskId&&(i||(2===l.collocationType?a.push(l.collocationRiskId):3===l.collocationType&&t.push(l.collocationRiskId),a.push(e)))})),y.currentChecked.push(...a),v.value=t)})(e,p.value.includes(e)),null==c||null===(i=c.value)||void 0===i||null===(a=i[e])||void 0===a||null===(t=a.toggle)||void 0===t||t.call(a)},g=()=>{i("close")},h=()=>{const e=l.riskList.filter((e=>y.currentChecked.includes(e.id)));i("update:modelValue",p),i("finished",e),i("close")};return O((()=>{c.value=[]})),t((()=>y.currentChecked),(e=>{p.value=e}),{deep:!0,immediate:!0}),t((()=>l.modelValue),(e=>{p.value=e,v.value=e}),{deep:!0,immediate:!0}),(i,a)=>{const l=o("van-checkbox"),t=o("VanCell"),f=o("van-cell-group"),I=o("van-checkbox-group"),O=o("VanButton"),R=o("VanPopup");return r(),n("div",be,[d(R,{show:m(y).show,"onUpdate:show":a[1]||(a[1]=e=>m(y).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:g},{default:u((()=>[ke,s("div",ge,[d(I,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e)},{default:u((()=>[d(f,{inset:""},{default:u((()=>[(r(!0),n(D,null,L(e.riskList,(e=>(r(),k(t,{key:e.id,title:e.riskName,disabled:v.value.includes(e.id),onClick:i=>b(e.id)},{"right-icon":u((()=>[d(l,{ref_for:!0,ref:i=>c.value[e.id]=i,shape:"square",disabled:v.value.includes(e.id),name:e.id,onClick:C((i=>b(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:u((()=>[s("div",Ve,[s("div",he,V(e.riskName),1),Ie])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),s("div",De,[d(O,{type:"primary",disabled:!m(y).currentChecked.length,block:"",onClick:h},{default:u((()=>[Le])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var Ce=Y(Oe,[["__scopeId","data-v-5817f2de"]]);const Re={class:"risk-list-wrapper"},we={key:1,class:"add-rider-risk"},Ae={class:"left-part"},_e=R("+ 附加险"),Pe=i({props:{riskInfo:{type:Object,required:!0,default:()=>{}},originData:{type:Object,required:!0,default:()=>{}},pickFactor:{type:Function,required:!0,default:()=>{}}},setup(e){var i;const o=e,[c,p]=v(!1);f(null),f(null);const y=a({mainRiskInfo:o.riskInfo,riderRiskInfo:null===(i=o.riskInfo)||void 0===i?void 0:i.riderRiskVOList,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),b=(e,i)=>{y.requiredRiderRiskData=y.requiredRiderRiskData.concat(e)},h=e=>{w.confirm({message:"确定要删除附加险么？"}).then((()=>{var i;const a=[e];((null===(i=y.mainRiskData)||void 0===i?void 0:i.collocationVOList)||[]).forEach((i=>{e===i.riskId&&2===i.collocationType&&a.push(i.collocationRiskId)})),y.checkedList=y.checkedList.filter((e=>!a.includes(e))),y.requiredRiderRiskData=y.requiredRiderRiskData.filter((e=>!a.includes(e.id))),Object.assign(y.riderRiskInfo,{[e]:void 0})})).catch((()=>{}))};return l((()=>{y.requiredRiderRiskData})),t((()=>y.requiredRiderRiskData),(e=>{const i=[y.mainRiskData,...e];let a=[],l=[];const t=[];i.forEach(((e,i)=>{var o,r,n;const d=(null==e||null===(o=e.riskCalcMethodInfoVO)||void 0===o?void 0:o.riskFactorRelationList)||[];a=a.concat(d.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),l=l.concat(d.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),t.push(null==e||null===(r=e.riskInsureLimitVO)||void 0===r?void 0:r.minHolderAge,null==e||null===(n=e.riskInsureLimitVO)||void 0===n?void 0:n.maxHolderAge)})),(e||[]).forEach((e=>{var i;const a={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,mainRiskCode:y.mainRiskData.riskCode,mainRiskId:null===(i=y.mainRiskData)||void 0===i?void 0:i.id,riskCategory:e.riskCategory,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((e=>({liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityId:e.id,liabilityRateType:e.liabilityRateType})))};Object.assign(y.riderRiskInfo,{[e.id]:a})})),o.pickFactor({insuredFactorList:[...new Set(a)],holderFactorList:[...new Set(l)],ageRange:t})}),{deep:!0,immediate:!0}),t((()=>o.originData),(e=>{(e||[]).forEach((e=>{1===e.riskType?(y.mainRiskData=e,y.requiredRiderRiskData=(null==e?void 0:e.requiredRiderRiskVOList)||[],y.riderRiskList=null==e?void 0:e.optionalRiderRiskVOList):y.riderRiskList.push(e)}))}),{deep:!0,immediate:!0}),(e,i)=>{var a,l,t,o,v;return r(),n("div",Re,[m(y).mainRiskData?(r(),k(fe,{key:0,"form-info":m(y).mainRiskInfo,"origin-data":m(y).mainRiskData},null,8,["form-info","origin-data"])):g("",!0),(r(!0),n(D,null,L(m(y).requiredRiderRiskData,((e,i)=>(r(),k(fe,{key:e.id,"form-info":m(y).riderRiskInfo[e.id],index:i,"main-risk-data":m(y).mainRiskData,"main-risk-info":m(y).mainRiskInfo,"origin-data":e,"remove-risk":h,"remove-risk-list":m(y).checkedList},null,8,["form-info","index","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),(null===(a=m(y))||void 0===a||null===(l=a.riderRiskList)||void 0===l?void 0:l.length)-(null===(t=m(y))||void 0===t||null===(o=t.checkedList)||void 0===o?void 0:o.length)?(r(),n("div",we,[s("span",Ae,V(`共有${m(y).riderRiskList.length-m(y).checkedList.length}款附加险可以添加`),1),d(F,{activied:"",onClick:i[0]||(i[0]=e=>m(p)(!0))},{default:u((()=>[_e])),_:1})])):g("",!0),m(c)?(r(),k(Ce,{key:2,modelValue:m(y).checkedList,"onUpdate:modelValue":i[1]||(i[1]=e=>m(y).checkedList=e),show:m(c),disabled:m(y).disabledList,"risk-list":m(y).riderRiskList,"collocation-list":(null===(v=m(y).mainRiskData)||void 0===v?void 0:v.collocationVOList)||[],onFinished:b,onClose:i[2]||(i[2]=e=>m(p)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):g("",!0)])}}});var xe=Y(Pe,[["__scopeId","data-v-3a20d838"]]);const qe=i({props:{title:{type:String,default:()=>""},active:{type:Boolean,default:!1}},setup:e=>(i,a)=>(r(),n("button",{class:A(e.active?"active-button":"")},V(e.title),3))});var Fe=Y(qe,[["__scopeId","data-v-43a1c07a"]]);const Te={key:0,class:"part-card"},Ue={key:1,class:"part-card"},Ye={class:"risk-content"},je={key:0,class:"risk"},Me={key:1,class:"plan-risk"},Se={class:"footer-bar"},Ne={class:"trial-result"},Ee={class:"result-num"},ze=R(" 元起 "),Be={class:"trial-operate"},Ge={key:0,class:"retrial-tip"},He=R(" 条件更改后，需要重新试算 "),Je=R("去试算"),Qe=R("立即投保"),$e=i({setup(e){const{id:i=118}=_().query,c=f({personVO:{}}),p=f({insuredCode:"",personVO:{}}),v=f({}),y=f({}),b=f({}),h=f({}),I=f({});P("premium",I.value);const O=a({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0,retrialTip:!1,ageRange:[],collapseName:["1"]}),C=()=>{O.retrialTip=!1},R=()=>{var e;const i=JSON.parse(JSON.stringify(v.value[O.currentPlan])),a=Object.values(i.riderRiskVOList).map((e=>{const i=e;if("3"===i.paymentYear){const e=(v.value[O.currentPlan].paymentYear||"").split("_");e[1]&&(e[1]-=1),i.paymentYear=e.join("_")}return i.liabilityVOList=(i.liabilityVOList||[]).filter((e=>!["-1"].includes(e.liabilityAttributeValue))).map((e=>{const i=e;return"0"===i.liabilityAttributeValue&&(i.liabilityAttributeValue=""),i})),i}));i.liabilityVOList=i.liabilityVOList.filter((e=>!["-1"].includes(e.liabilityAttributeValue))).map((e=>{const i=e;return"0"===i.liabilityAttributeValue&&(i.liabilityAttributeValue=""),i}));const l={holder:{personVO:{...c.value.personVO,birthday:c.value.personVO.birthday&&`${c.value.personVO.birthday} 00:00:00`}},productCode:null==O||null===(e=O.riskBaseInfo)||void 0===e?void 0:e.productCode,insuredVOList:[{...p.value,personVO:{...p.value.personVO,birthday:p.value.personVO.birthday&&`${p.value.personVO.birthday} 00:00:00`},productPlanVOList:[{planCode:O.currentPlan||"",riskVOList:[{...i,riderRiskVOList:a}]}]}]};O.retrialTip=!1,((e={})=>T.post("/api/insurance/premiumCalc",e))({...l}).then((({code:e,data:i})=>{if("10000"===e){O.trialResult=i,O.canTrial=!1;const e={},a=(i=[])=>{(i||[]).forEach((i=>{e[i.riskCode]=i,i.riskPremiumDetailVOList&&a(i.riskPremiumDetailVOList)}))};a(i.riskPremiumDetailVOList),Object.assign(I.value,e)}}))},w=()=>{var e,i,a,l,t;Promise.all([null==y||null===(e=y.value)||void 0===e||null===(i=e.validateForm)||void 0===i?void 0:i.call(e),null==b||null===(a=b.value)||void 0===a||null===(l=a.validateForm)||void 0===l?void 0:l.call(a),null==h||null===(t=h.value)||void 0===t?void 0:t.validate()]).then((()=>{R()}))},A=()=>{x("准备投保")},q=()=>{((e={})=>T.get(`/api/product/insureProductDetail/${null==e?void 0:e.productId}`,e))({productId:i}).then((({code:e,data:i})=>{"10000"===e&&(O.riskBaseInfo=null==i?void 0:i.productBasicInfoVO,((null==i?void 0:i.productRelationPlanVOList)||(null==i?void 0:i.riskDetailVOList)||[]).forEach(((e,i)=>{0===i&&(O.currentPlan=e.planCode||0),Object.assign(v.value,{[e.planCode||i]:{liabilityVOList:[],riderRiskVOList:{}}})})),O.riskData=(null==i?void 0:i.riskDetailVOList)||[],O.riskPlanData=(null==i?void 0:i.productRelationPlanVOList)||[])})).finally((()=>{}))},F=e=>{O.holderFactor=e.holderFactorList,O.insuredFactor=e.insuredFactorList,O.ageRange=e.ageRange};return t([()=>v.value,()=>c.value,()=>p.value],(e=>{e&&!O.canTrial&&(O.canTrial=!0,O.retrialTip=!0)}),{deep:!0}),l((()=>{q()})),(e,i)=>{const a=o("VanForm"),l=o("VanTab"),t=o("VanTabs"),f=o("van-collapse-item"),I=o("van-collapse"),R=o("VanButton"),_=o("ZaPageWrap");return r(),k(_,{class:"page-trial-wrapper"},{default:u((()=>{var e,o,_,P;return[m(O).holderFactor.length?(r(),n("div",Te,[d(j,{title:"投保人"}),d(te,{ref_key:"holderRef",ref:y,"insured-code":null===(e=m(O).riskBaseInfo)||void 0===e?void 0:e.insuredCode,"form-info":c.value.personVO,"factor-list":m(O).holderFactor,"age-range":m(O).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):g("",!0),m(O).insuredFactor.length?(r(),n("div",Ue,[d(j,{title:"被保人"}),d(te,{ref_key:"insuredRef",ref:b,"insured-code":null===(o=m(O).riskBaseInfo)||void 0===o?void 0:o.insuredCode,"form-info":p.value.personVO,"factor-list":m(O).insuredFactor,"age-range":m(O).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):g("",!0),s("div",Ye,[d(I,{modelValue:m(O).collapseName,"onUpdate:modelValue":i[1]||(i[1]=e=>m(O).collapseName=e)},{default:u((()=>[d(f,{name:"1"},{title:u((()=>[d(j,{title:"投保方案"})])),default:u((()=>[m(O).riskData.length?(r(),n("div",je,[d(a,{ref_key:"riskFormRef",ref:h,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(xe,{"risk-info":v.value[0],"origin-data":m(O).riskData,"pick-factor":F},null,8,["risk-info","origin-data"])])),_:1},512)])):g("",!0),m(O).riskPlanData.length?(r(),n("div",Me,[d(a,{ref_key:"riskFormRef",ref:h,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(t,{active:m(O).currentPlan,"onUpdate:active":i[0]||(i[0]=e=>m(O).currentPlan=e)},{default:u((()=>[(r(!0),n(D,null,L(m(O).riskPlanData,(e=>(r(),k(l,{key:e.planCode,name:e.planCode,title:e.planName},{title:u((()=>[d(Fe,{title:e.planName,active:m(O).currentPlan===e.planCode},null,8,["title","active"])])),default:u((()=>[e.planCode===m(O).currentPlan?(r(),k(xe,{key:0,"risk-info":v.value[e.planCode],"origin-data":e.riskDetailVOList,"pick-factor":F},null,8,["risk-info","origin-data"])):g("",!0)])),_:2},1032,["name","title"])))),128))])),_:1},8,["active"])])),_:1},512)])):g("",!0)])),_:1})])),_:1},8,["modelValue"])]),s("div",Se,[s("span",Ne,[s("span",Ee,V((m(O).retrialTip?"0":(null===(_=m(O))||void 0===_||null===(P=_.trialResult)||void 0===P?void 0:P.premium)||"0").toLocaleString()),1),ze]),s("div",Be,[m(O).retrialTip?(r(),n("div",Ge,[He,s("span",{class:"close-icon",onClick:C},"X")])):g("",!0),m(O).canTrial?(r(),k(R,{key:1,type:"primary",onClick:w},{default:u((()=>[Je])),_:1})):(r(),k(R,{key:2,type:"primary",onClick:A},{default:u((()=>[Qe])),_:1}))])])]})),_:1})}}});e("default",Y($e,[["__scopeId","data-v-7cb3b17e"]]))}}}))}();

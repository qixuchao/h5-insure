import{au as e}from"./index-2c543aa5.js";import{q as i}from"./createProposal-e2fddf7a.js";import"./trial-7a877a82.js";const a=[{name:"年金领取期间",type:"checkbox",configKey:["annuityDrawValueList"],valueKey:"annuityDrawDate"},{name:"领取频率",type:"checkbox",configKey:["annuityDrawFrequencyList"],valueKey:"annuityDrawFrequency"},{name:"交费方式",type:"checkbox",configKey:["paymentFrequencyList"],valueKey:"paymentFrequency",ruleKey:"paymentTypeRule"},{name:"交费期间",type:"checkbox",configKey:["paymentPeriodValueList"],valueKey:"chargePeriod",ruleKey:"paymentPeriodRule",ruleValueKey:"chargePeriod"},{name:"保障期间",type:"checkbox",configKey:["insurancePeriodValueList"],valueKey:"coveragePeriod",ruleKey:"insurancePeriodRule",ruleValueKey:"chargePeriod"}],r=async({proposalId:e,productCode:a,tenantId:r,proposalInsuredId:t},o)=>{const n=(await i({id:e,tenantId:r})).data,l={holder:{},insuredVOList:[],productCode:a};l.holder={personVO:null==n?void 0:n.holder},l.insuredVOList=null==n?void 0:n.insuredList.filter((e=>e.id===+t)).map((e=>({personVO:{age:e.age,birthday:e.birthday,bmi:e.bmi,certNo:e.certNo,certType:e.certType,email:e.email,gender:e.gender,hasSocialInsurance:e.hasSocialInsurance,height:e.height,holderRelation:e.holderRelation,insureAreaCode:e.insureAreaCode,insureCityCode:e.insureCityCode,insureProvinceCode:e.insureProvinceCode,mobile:e.mobile,name:e.name,occupationClass:e.occupationClass,occupationCodeList:e.occupationCode,smokeFlag:e.smokeFlag,socialFlag:e.socialFlag,weight:e.weight},productPlanVOList:e.proposalInsuredProductList.map((e=>({insurerCode:null,planCode:"",relationToHolder:"1",riskVOList:e.proposalProductRiskList.map((e=>({amount:e.amount,annuityDrawDate:e.annuityDrawDate,annuityDrawType:e.annuityDrawType,chargePeriod:e.chargePeriod,copy:e.copy,coveragePeriod:e.coveragePeriod,liabilityVOList:e.liabilityVOList.map((e=>({liabilityAmount:null,liabilityAttributeType:e.liabilityAttributeType,liabilityAttributeValueList:e.liabilityAttributeValueList,liabilityCode:e.liabilityCode,liabilityId:e.liabilityId,liabilityRateType:null,liabilityValue:null}))),mainRiskCode:e.mainRiskCode,mainRiskId:e.mainRiskId,paymentFrequency:e.paymentFrequency,premium:e.premium,riskCategory:e.riskCategory,riskCode:e.riskCode,riskId:e.riskId,riskName:e.riskName,riskType:e.riskType})))})))}))),null==o||o(l)},t=(i,a,r)=>{const t={...r,...i},{insuredPremiumList:o=[],initialAmount:n,initialPremium:l=0}=a||{};return t.premium=l,t.orderAmount=l,t.orderRealAmount=l,t.insuredList=(t.insuredList||[]).map(((i,a)=>({...i,certType:i.certType||e.CERT,certNo:(i.certNo||"").toLocaleUpperCase(),productList:(i.productList||[]).map(((e,i)=>{var r,t,n;return{...e,premium:null==(n=null==(t=null==(r=null==o?void 0:o[a])?void 0:r.productPremiumList)?void 0:t[i])?void 0:n.totalPremium,riskList:(e.riskList||[]).map(((e,r)=>{var t,n,u,s;const{initialAmount:d,initialPremium:m,unitAmount:y,unitPremium:c}=(null==(s=null==(u=null==(n=null==(t=null==o?void 0:o[a])?void 0:t.productPremiumList)?void 0:n[i])?void 0:u.riskPremiumDetailVOList)?void 0:s[r])||{};return{...e,initialAmount:d,initialPremium:m,unitAmount:y,unitPremium:c,regularPremium:l,totalPremium:l}}))}}))}))),t};export{a as P,r as p,t};

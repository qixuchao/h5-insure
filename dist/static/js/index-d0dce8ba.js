import{v as e,d as a,i as t,y as r,j as l,bH as n,bJ as o,A as i,b as s,B as u,C as d,R as v,D as c,cP as m,bN as b,bI as g,bB as h,H as p}from"./index-24f84c11.js";const[f,y]=e("slider");const V=p(a({name:f,props:{min:u(0),max:u(100),step:u(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:d,buttonSize:d,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}},emits:["change","drag-end","drag-start","update:modelValue"],setup(e,{emit:a,slots:u}){let d,p,f;const V=t(),N=t(),x=t(),w=r(),B=l((()=>Number(e.max)-Number(e.min))),C=l((()=>{const a=e.vertical?"width":"height";return{background:e.inactiveColor,[a]:n(e.barHeight)}})),S=a=>e.range&&Array.isArray(a),k=()=>{const{modelValue:a,min:t}=e;return S(a)?100*(a[1]-a[0])/B.value+"%":100*(a-Number(t))/B.value+"%"},A=l((()=>{const a={[e.vertical?"height":"width"]:k(),background:e.activeColor};x.value&&(a.transition="none");return a[e.vertical?e.reverse?"bottom":"top":e.reverse?"right":"left"]=(()=>{const{modelValue:a,min:t}=e;return S(a)?100*(a[0]-Number(t))/B.value+"%":"0%"})(),a})),H=a=>{const t=+e.min,r=+e.max,l=+e.step;a=h(a,t,r);const n=Math.round((a-t)/l)*l;return b(t,n)},z=(e,a)=>JSON.stringify(e)===JSON.stringify(a),J=(t,r)=>{t=S(t)?(a=>{var t,r;const l=null!=(t=a[0])?t:Number(e.min),n=null!=(r=a[1])?r:Number(e.max);return l>n?[n,l]:[l,n]})(t).map(H):H(t),z(t,e.modelValue)||a("update:modelValue",t),r&&!z(t,f)&&a("change",t)},P=a=>{if(a.stopPropagation(),e.disabled||e.readonly)return;const{min:t,reverse:r,vertical:l,modelValue:n}=e,o=v(V),i=l?o.height:o.width,s=Number(t)+(l?r?o.bottom-a.clientY:a.clientY-o.top:r?o.right-a.clientX:a.clientX-o.left)/i*B.value;if(S(n)){const[e,a]=n;J(s<=(e+a)/2?[s,a]:[e,s],!0)}else J(s,!0)},T=t=>{e.disabled||e.readonly||("dragging"===x.value&&(J(p,!0),a("drag-end",t)),x.value="")},X=a=>{if("number"==typeof a){return y("button-wrapper",["left","right"][a])}return y("button-wrapper",e.reverse?"left":"right")},Y=(a,t)=>{if("number"==typeof t){const e=u[0===t?"left-button":"right-button"];if(e)return e({value:a})}return u.button?u.button({value:a}):s("div",{class:y("button"),style:g(e.buttonSize)},null)},j=a=>{const t="number"==typeof a?e.modelValue[a]:e.modelValue;return s("div",{ref:N,role:"slider",class:X(a),tabindex:e.disabled?void 0:0,"aria-valuemin":e.min,"aria-valuenow":t,"aria-valuemax":e.max,"aria-disabled":e.disabled||void 0,"aria-readonly":e.readonly||void 0,"aria-orientation":e.vertical?"vertical":"horizontal",onTouchstartPassive:t=>{"number"==typeof a&&(d=a),(a=>{e.disabled||e.readonly||(w.start(a),p=e.modelValue,f=S(p)?p.map(H):H(p),x.value="start")})(t)},onTouchend:T,onTouchcancel:T,onClick:m},[Y(t,a)])};return J(e.modelValue),o((()=>e.modelValue)),i("touchmove",(t=>{if(e.disabled||e.readonly)return;"start"===x.value&&a("drag-start",t),c(t,!0),w.move(t),x.value="dragging";const r=v(V);let l=(e.vertical?w.deltaY.value:w.deltaX.value)/(e.vertical?r.height:r.width)*B.value;if(e.reverse&&(l=-l),S(f)){const a=e.reverse?1-d:d;p[a]=f[a]+l}else p=f+l;J(p)}),{target:N}),()=>s("div",{ref:V,style:C.value,class:y({vertical:e.vertical,disabled:e.disabled}),onClick:P},[s("div",{class:y("bar"),style:A.value},[e.range?[j(0),j(1)]:j()])])}}));export{V as S};

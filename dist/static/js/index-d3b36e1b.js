import{_ as e,d as a,u as t,a as o,r as s,z as i,b as l,c as n,e as r,w as u,f as c,g as d,h as p,C as v,l as y,F as m,i as C,n as f,p as g,T as b,D as k,N as j,E as h}from"./index-24c1b645.js";import{l as q}from"./inform-a205a15a.js";import{Q as N,a as T,H as D,b as I,I as _,c as P}from"./notice-a4a1c218.js";import{s as x}from"./useStorage-5fd0243a.js";import{g as S}from"./verify-6c0e4e49.js";import"./pdfh5-3b8067b2.js";import"./pdfdist-964d560e.js";const $={class:"footer-button"},A=f("下一步");var O=e(a({setup(e){const a=t(),f=o(),{productCode:O="MMBBSF",agentCode:z="65434444",tenantId:B=9991000007,agencyCode:F="3311222",insurerCode:M="zhongan",productCategory:w=1,templateId:E=1,orderNo:H="2022080217103534947"}=f.query,L=s([]),Q=s({});s(!1);const U=s([]),W=s([]),G=e=>L.value.filter((a=>a.objectType===e)),J=e=>{var t;x.set("questionData",e),a.push({path:"/healthNotice",query:{materialType:(null==e?void 0:e.materialSource)?"product":"question",questionnaireType:(null==e?void 0:e.materialSource)?1:e.questionnaireType,orderId:null==(t=Q.value)?void 0:t.id,...f.query}})},K=()=>{[...U.value,...W.value,...L.value].every((e=>1===e.isDone))?(Object.assign(Q.value,{pageCode:"questionNotice",tenantOrderNoticeList:L.value}),k({...Q.value,extInfo:{...Q.value.extInfo,pageCode:"questionNotice",buttonCode:j.questionNotice},venderCode:M}).then((({code:e,data:t})=>{"10000"===e&&"jumpToPage"===t.pageAction.pageAction&&a.push({path:h[t.pageAction.data.nextPageCode],query:f.query})}))):b("请完成所有告知进行下一步")};return i((()=>{(()=>{const e={insurerCode:M,orderNo:H,productCategory:w,tenantId:B};Promise.all([q({...e,noticeType:D,objectType:I}),q({...e,noticeType:_,objectType:P})]).then((([{code:e,data:a},{code:t,data:o}])=>{"10000"===e&&"10000"===t&&(L.value=[...a,...o])}))})(),(()=>{const e={orderNo:H,productCode:O,tenantId:B,objectType:I};S({...e}).then((({code:e,data:a})=>{"10000"===e&&(W.value=a||[])})),S({...e,objectType:P}).then((({code:e,data:a})=>{"10000"===e&&(U.value=a||[])}))})(),g({orderNo:H,saleUserId:z,tenantId:B}).then((({code:e,data:a})=>{"10000"===e&&Object.assign(Q.value,a)}))})),(e,a)=>{const t=l("van-cell"),o=l("ProCard"),s=l("van-button"),i=l("ProPageWrap");return n(),r(i,{class:"page-question-notice"},{default:u((()=>[c(o,{title:"投保人"},{default:u((()=>[(n(!0),d(m,null,p(G(y(T)),(e=>(n(),r(t,{key:e.id,class:v({"is-active":e.isDone===y(N)}),title:`《${e.title}》`,"is-link":"",value:""+(e.isDone===y(T)?"已完成":"去完成"),onClick:a=>J(e)},null,8,["class","title","value","onClick"])))),128)),(n(!0),d(m,null,p(W.value,(e=>(n(),r(t,{key:e.id,class:v({"is-active":e.isDone===y(N)}),title:`《${e.materialName}》`,"is-link":"",value:""+(e.isDone===y(T)?"已完成":"去完成"),onClick:a=>J(e)},null,8,["class","title","value","onClick"])))),128))])),_:1}),c(o,{title:"被保人"},{default:u((()=>[(n(!0),d(m,null,p(G(y(N)),(e=>(n(),r(t,{key:e.id,class:v({"is-active":e.isDone===y(N)}),title:`《${e.title}》`,"is-link":"",value:""+(e.isDone===y(T)?"已完成":"去完成"),onClick:a=>J(e)},null,8,["class","title","value","onClick"])))),128)),(n(!0),d(m,null,p(U.value,(e=>(n(),r(t,{key:e.id,class:v({"is-active":e.isDone===y(N)}),title:`《${e.materialName}》`,"is-link":"",value:""+(e.isDone===y(T)?"已完成":"去完成"),onClick:a=>J(e)},null,8,["class","title","value","onClick"])))),128))])),_:1}),C("div",$,[c(s,{type:"primary",onClick:K},{default:u((()=>[A])),_:1})])])),_:1})}}}),[["__scopeId","data-v-946bddbc"]]);export{O as default};

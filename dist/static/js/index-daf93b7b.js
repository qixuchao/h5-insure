import{ref as e,reactive as n,watch as o,computed as t}from"vue";import{h as r,x as a,C as u,aR as l,e as i,_ as c}from"./index-deb4ddfb.js";import{c as m,d}from"./infoCollection-f930e52f.js";import"./trial-a75330fd.js";import"./pdfh5-e588f83d.js";const s=(e,n="YYYY-MM-DD")=>r(e).format(n),f=(e,n=0,o="day",t="YYYY-MM-DD")=>r(e).add(n,o).format(t),V=(e,n=0,o="day",t="YYYY-MM-DD")=>r(e).subtract(n,o).format(t);const p=e=>(Vue.pushScopeId("data-v-1de4c6a6"),e=e(),Vue.popScopeId(),e),v={class:"com-period-cell"},I={key:0,class:"period-custom-cell period-check-btn-cell"},D=p((()=>Vue.createElementVNode("div",{class:"period-cell-label"},"保障期间",-1))),k={class:"period-cell-content"},y=p((()=>Vue.createElementVNode("div",{class:"period-cell-label"},"生效日期",-1))),N={class:"period-cell-content period-custom-cell-content"},E=p((()=>Vue.createElementVNode("div",{class:"period-cell-label"},"保障期限",-1))),C={class:"period-cell-content period-custom-cell-content"},Y={key:2,class:"period-custom-cell period-common-cell"},g=p((()=>Vue.createElementVNode("div",{class:"period-cell-label"},"保障期限",-1))),S={class:"period-cell-content"},b=p((()=>Vue.createElementVNode("div",{class:"picker-custom-title"},"保险开始生效日期",-1))),h=Vue.defineComponent({name:"insurancePeriodCell"});var B=c(Vue.defineComponent({...h,props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})}},emits:["onReset","onUpdate","onVerify"],setup(c,{expose:p,emit:h}){const B=c;e({});const w=(e,n)=>"year"===e?`${n}年`:"month"===e?`${n}月`:"day"===e?`${n}日`:n,x=e(new Date),L=n({formInfo:B.formInfo}),M=e(!0);e([]),o((()=>L.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(x.value=new Date(e))}));const P=t((()=>{var e;const{insurancePeriodValueList:n=[]}=(null==(e=B.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n.length?(L.formInfo.coveragePeriod||(L.formInfo.coveragePeriod=n[0].code),n):[]})),$=t((()=>{var e;const{insuranceStartType:n}=(null==(e=B.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),O=t((()=>{var e;const{insuranceEndType:n}=(null==(e=B.riskInfo)?void 0:e.productRiskInsureLimitVO)||{};return n||1})),[T,R]=a(!1),U=()=>{M.value&&R(!0)},_=t((()=>{var e,n;if(`${$.value}`===m.CUSTOM_DAY){const o=null==(n=null==(e=B.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(o&&o.indexOf(",")){const[e,n]=o.split(",");return new Date(f(new Date,Number(e),"day"))}}return new Date(f(new Date,1,"day"))})),F=t((()=>{var e,n;if(`${$.value}`===m.CUSTOM_DAY){const o=null==(n=null==(e=B.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(!o)return new Date;if(o.indexOf(",")){const[e,n]=o.split(",");return new Date(f(new Date,Number(n),"day"))}const t=f(new Date,Number(o),"day");return new Date(t)}return new Date})),q=e=>{L.formInfo.insuranceStartDate=`${s(e)} 00:00:00`,R(!1)},A=()=>{R(!1)};return o((()=>B.riskInfo),(()=>{const{productRiskInsureLimitVO:e}=B.riskInfo||{};if(e){const{insurancePeriodValueList:n,paymentFrequencyList:o=[]}=e||{};P.value=n}}),{deep:!0,immediate:!0}),o([()=>$.value,()=>L.formInfo.coveragePeriod,()=>L.formInfo.insuranceStartDate,()=>B.riskInfo],(()=>{var e,n;if(!L.formInfo.coveragePeriod)return;const[o,t]=L.formInfo.coveragePeriod.split("_");if(!L.formInfo.insuranceStartDate)if(`${$.value}`===m.CUSTOM_DAY){const o=null==(n=null==(e=B.riskInfo)?void 0:e.productRiskInsureLimitVO)?void 0:n.insuranceStartTime;if(o)if(o.indexOf(",")){const[e,n]=o.split(",");L.formInfo.insuranceStartDate=`${f(new Date,Number(e),"day")} 00:00:00`,console.log("start",e,n),M.value=e!==n}else L.formInfo.insuranceStartDate=`${f(new Date,o,"day")} 00:00:00`;else L.formInfo.insuranceStartDate=`${f(new Date,1,"day")} 00:00:00`}else`${$.value}`===m.NEXT_DAY?L.formInfo.insuranceStartDate=`${f(new Date,1,"day")} 00:00:00`:L.formInfo.insuranceStartDate=`${s(new Date)} 00:00:00`;if("to"!==o)V(L.formInfo.insuranceStartDate,1,"day"),`${O.value}`===d.CURRENT_DAY?L.formInfo.insuranceEndDate=`${r(L.formInfo.insuranceStartDate).add(Number(t),o).subtract(1,"day").format("YYYY-MM-DD")} 23:59:59`:L.formInfo.insuranceEndDate=`${f(L.formInfo.insuranceStartDate,Number(t),o)} 00:00:00`;else{let e=L.formInfo.tenantOrderInsuredList[0].birthday;L.formInfo.tenantOrderInsuredList[0].certType===u.CERT&&L.formInfo.tenantOrderInsuredList[0].certNo&&l(L.formInfo.tenantOrderInsuredList[0].certNo)&&(e=i(L.formInfo.tenantOrderInsuredList[0].certNo));const n=`${V(e,1,"day")} 00:00:00`;"single"===t&&(L.formInfo.insuranceEndDate="9999-99-99 23:59:59"),`${O.value}`===d.CURRENT_DAY?L.formInfo.insuranceEndDate=`${f(n,Number(t),o)} 23:59:59`:L.formInfo.insuranceEndDate=`${f(e,Number(t),o)} 00:00:00`}}),{immediate:!0,deep:!0}),p({}),(e,n)=>{const o=Vue.resolveComponent("ProRadioButton"),t=Vue.resolveComponent("ProSvg"),r=Vue.resolveComponent("VanButton"),a=Vue.resolveComponent("van-datetime-picker"),u=Vue.resolveComponent("ProPopup");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createElementVNode("div",v,[Vue.unref(P).length>1?(Vue.openBlock(),Vue.createElementBlock("div",I,[D,Vue.createElementVNode("div",k,[Vue.createVNode(o,{modelValue:Vue.unref(L).formInfo.coveragePeriod,"onUpdate:modelValue":n[0]||(n[0]=e=>Vue.unref(L).formInfo.coveragePeriod=e),prop:{label:"value",value:"code"},options:Vue.unref(P)},null,8,["modelValue","options"])])])):Vue.createCommentVNode("",!0),Vue.unref($)+""===Vue.unref(m).CUSTOM_DAY?(Vue.openBlock(),Vue.createElementBlock("div",{key:1,class:"period-custom-cell period-common-cell",onClick:U},[Vue.unref(M)?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[y,Vue.createElementVNode("div",N,[Vue.createElementVNode("span",null,Vue.toDisplayString(Vue.unref(L).formInfo.insuranceStartDate?Vue.unref(s)(Vue.unref(L).formInfo.insuranceStartDate,"YYYY.MM.DD HH:mm:ss"):""),1),Vue.createVNode(t,{class:"custom--arrow-right",name:"arrow-right"})])],64)):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[E,Vue.createElementVNode("div",C,[Vue.createElementVNode("span",null,Vue.toDisplayString(Vue.unref(L).formInfo.insuranceStartDate?Vue.unref(s)(Vue.unref(L).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+Vue.toDisplayString(Vue.unref(L).formInfo.insuranceEndDate?Vue.unref(s)(Vue.unref(L).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])],64))])):Vue.createCommentVNode("",!0),Vue.unref($)+""!==Vue.unref(m).CUSTOM_DAY?(Vue.openBlock(),Vue.createElementBlock("div",Y,[g,Vue.createElementVNode("div",S,Vue.toDisplayString(Vue.unref(L).formInfo.insuranceStartDate?Vue.unref(s)(Vue.unref(L).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+Vue.toDisplayString(Vue.unref(L).formInfo.insuranceEndDate?Vue.unref(s)(Vue.unref(L).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])):Vue.createCommentVNode("",!0)]),Vue.createVNode(u,{show:Vue.unref(T),"onUpdate:show":n[3]||(n[3]=e=>Vue.isRef(T)?T.value=e:null),height:340,closeable:!0},{default:Vue.withCtx((()=>[Vue.createVNode(a,{modelValue:Vue.unref(x),"onUpdate:modelValue":n[2]||(n[2]=e=>Vue.isRef(x)?x.value=e:null),type:"date",title:"保险开始生效日期","min-date":Vue.unref(_),"max-date":Vue.unref(F),formatter:w,"visible-item-count":5,class:"custom-date-picker",onConfirm:q,onCancel:A},{cancel:Vue.withCtx((()=>[])),title:Vue.withCtx((()=>[b])),confirm:Vue.withCtx((()=>[Vue.createVNode(r,{type:"primary",round:"",block:"",class:"linear-btn custom-picker-btn",onClick:n[1]||(n[1]=e=>T.value=!1)},{default:Vue.withCtx((()=>[Vue.createTextVNode("确 定")])),_:1})])),_:1},8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-1de4c6a6"]]);const w=e=>(Vue.pushScopeId("data-v-58cbb30d"),e=e(),Vue.popScopeId(),e),x={class:"com-payment-type"},L={class:"title"},M={key:0,class:"custom-cell check-btn-cell"},P=w((()=>Vue.createElementVNode("div",{class:"cell-label"},"保障方案",-1))),$={class:"cell-content"},O={key:1,class:"custom-cell check-btn-cell"},T=w((()=>Vue.createElementVNode("div",{class:"cell-label"},"交费方式",-1))),R={class:"cell-content"},U={key:2,class:"custom-cell check-btn-cell"},_=w((()=>Vue.createElementVNode("div",{class:"cell-label"},"交费期间",-1))),F={class:"cell-content"},q={key:3,class:"custom-cell common-cell"},A=w((()=>Vue.createElementVNode("div",{class:"cell-label"},"实付保费",-1))),j={key:0,class:"cell-content actual-premium"},H={class:"cell-content actual-premium"},X={key:0,class:"actual-premium actual-premium-month-tip"},z=Vue.defineComponent({name:"paymentType"});var G=c(Vue.defineComponent({...z,props:{formInfo:{default:()=>({})},riskInfo:{default:()=>({})},tenantProductDetail:{default:()=>({})},planList:{default:()=>[]}},setup(r){const a=r;e({});const u=n({formInfo:a.formInfo}),l=e(),i=e(),c=e([]),m=e([]),d=t((()=>{var e;return!!(null==(e=a.planList)?void 0:e.length)})),s=t((()=>{var e,n;if(null==(e=a.premiumInfo)?void 0:e.premiumLoadingText)return a.premiumInfo.premiumLoadingText;if(a.tenantProductDetail.length){const e=((null==a?void 0:a.tenantProductDetail)||[]).find((e=>e.planCode===u.formInfo.planCode||!e.planCode))||{},{premium:o,minActualUnit:t}=(e.data||[]).find((e=>e.paymentFrequency===u.formInfo.paymentFrequency))||{};return(null==(n=a.premiumInfo)?void 0:n.premium)?`${a.premiumInfo.premium||""}${t}`:o}return""})),f=t((()=>{if(i){const{premiumExplain:e,premiumExplainViewName:n,premiumExplainUri:o}=i.value||{};return{premiumExplain:e,premiumExplainUri:o,premiumExplainViewName:n}}return null}));t((()=>f.value&&f.value.premiumExplain&&f.value.premiumExplainViewName));const V=t((()=>{var e;if(l.value&&l.value.paymentFrequency){return((null==(e=l.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1}));return o((()=>a.riskInfo),(()=>{var e,n;const{productRiskInsureLimitVO:o}=a.riskInfo||{};if(o){const{paymentFrequencyList:t=[],paymentPeriodValueList:r}=o||{};u.formInfo.paymentFrequency=null==(e=null==t?void 0:t[0])?void 0:e.code,u.formInfo.chargePeriod=null==(n=null==r?void 0:r[0])?void 0:n.code,c.value=r,m.value=t}}),{deep:!0,immediate:!0}),(e,n)=>{var o;const t=Vue.resolveComponent("ProRadioButton"),r=Vue.resolveComponent("ProDivider");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createElementVNode("div",x,[Vue.createElementVNode("div",L,Vue.toDisplayString(Vue.unref(V)?"交费方式":"保障计划"),1),Vue.unref(d)?(Vue.openBlock(),Vue.createElementBlock("div",M,[P,Vue.createElementVNode("div",$,[Vue.createVNode(t,{modelValue:Vue.unref(u).formInfo.planCode,"onUpdate:modelValue":n[0]||(n[0]=e=>Vue.unref(u).formInfo.planCode=e),options:e.planList,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])])):Vue.createCommentVNode("",!0),Vue.unref(m).length>1?(Vue.openBlock(),Vue.createElementBlock("div",O,[T,Vue.createElementVNode("div",R,[Vue.createVNode(t,{modelValue:Vue.unref(u).formInfo.paymentFrequency,"onUpdate:modelValue":n[1]||(n[1]=e=>Vue.unref(u).formInfo.paymentFrequency=e),prop:{label:"value",value:"code"},options:Vue.unref(m)},null,8,["modelValue","options"])])])):Vue.createCommentVNode("",!0),Vue.unref(c).length>1?(Vue.openBlock(),Vue.createElementBlock("div",U,[_,Vue.createElementVNode("div",F,[Vue.createVNode(t,{modelValue:Vue.unref(u).formInfo.chargePeriod,"onUpdate:modelValue":n[2]||(n[2]=e=>Vue.unref(u).formInfo.chargePeriod=e),prop:{label:"value",value:"code"},options:Vue.unref(c)},null,8,["modelValue","options"])])])):Vue.createCommentVNode("",!0),Vue.createVNode(B,{"form-info":Vue.unref(u).formInfo,"risk-info":e.riskInfo},null,8,["form-info","risk-info"]),Vue.unref(s)?(Vue.openBlock(),Vue.createElementBlock("div",q,[A,(null==(o=a.premiumInfo)?void 0:o.premiumLoadingText)?(Vue.openBlock(),Vue.createElementBlock("div",j,Vue.toDisplayString(Vue.unref(s)),1)):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createElementVNode("div",H,Vue.toDisplayString(Vue.unref(s)),1),"5"===Vue.unref(u).formInfo.paymentFrequency?(Vue.openBlock(),Vue.createElementBlock("div",X," 共12期 ")):Vue.createCommentVNode("",!0)],64))])):Vue.createCommentVNode("",!0)]),Vue.createVNode(r)],64)}}}),[["__scopeId","data-v-58cbb30d"]]);export{G as default};

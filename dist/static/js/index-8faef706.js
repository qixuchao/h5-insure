import{d as e,h as t,o as a,c as l,a as s,e as n,b as o,w as i,F as d,q as r,m as c,u,_ as v,aC as p,aD as m,cS as f,i as g,j as b,k as y,z as h,O as _,p as j,dt as C,f as N,a9 as k,T as I}from"./index-1dfa3d8b.js";import{L as S}from"./index-1e2445a3.js";import{I as D}from"./infoItem-753b2766.js";import{O as q}from"./OperateBtn-4c1404a3.js";import{t as w}from"./format-31cde443.js";import{q as x}from"./order-ffe33efc.js";import"./constants-4b08cf92.js";const O={class:"com-order-item"},T={class:"header"},L={class:"product-name"},z={class:"status"},U={class:"info"},A={class:"content-list"},B={class:"info-bottom"},E=(e=>(p("data-v-51f0c34e"),e=e(),m(),e))((()=>s("div",{style:{width:"25%"}},[s("img",{src:"/static/png/tree-0f48942e.png",alt:"",style:{width:"80%"}})],-1))),F={class:"footer"};var R=v(e({__name:"item",props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup:(e,{emit:v})=>(t(),(t,v)=>{var p;return a(),l("div",O,[s("div",T,[s("div",L,n(e.detail.productName),1),s("div",z,n(e.detail.orderStatusDesc),1)]),s("div",U,[o(D,{label:"订单号",content:e.detail.orderNo,line:"","is-copy":""},null,8,["content"]),o(D,{label:"投/保单号",line:""},{content:i((()=>[s("div",A,[(a(!0),l(d,null,r(e.detail.policyNo||e.detail.applicationNo||[""],(e=>(a(),c(D,{key:e,"is-copy":"",content:e},null,8,["content"])))),128))])])),_:1}),s("div",B,[s("div",null,[o(D,{label:"投保人",content:e.detail.holderName,line:""},null,8,["content"]),o(D,{label:"被保人",content:null==(p=e.detail.insuredName)?void 0:p[0],line:""},null,8,["content"]),o(D,{label:"创建时间",content:e.detail.orderStartDate,line:""},null,8,["content"]),o(D,{label:"保费",content:u(w)(e.detail.premium),line:""},null,8,["content"])]),E])]),s("div",F,[o(q,{detail:e.detail},null,8,["detail"])])])})}),[["__scopeId","data-v-51f0c34e"]]);const G={id:"page-order",class:"page-order"};var H=v(e({__name:"index",setup(e){f(),t();const n=g(),{type:v,tenantId:p,agentCode:m}=n.query,D=b({"-1":1,0:2,1:3,2:4}[v]||0),q=b(1),w=b(!1),O=b(!1),T=b(!1),L=b([]);b(0),b(0),b(0);const z=[{title:"全部",status:""},{title:"待处理",status:"-1"},{title:"待支付",status:"0"},{title:"已完成",status:"3"},{title:"已失效",status:"2"}],U=y((()=>(L.value=[],z[D.value].status))),A=()=>{I.loading({message:"加载中...",forbidClick:!0}),w.value=!0,x({condition:{orderTopStatus:U.value,tenantId:p,agentCode:m},pageSize:10,pageNum:q.value}).then((e=>{const{code:t,data:a}=e;"10000"===t&&a&&(w.value=!1,O.value=!1,1===q.value?L.value=a.datas||[]:L.value=L.value.concat(a.datas||[]),a.datas.length<10&&(T.value=!0))})).then((()=>{I.clear()}))},B=()=>{q.value+=1,A()},E=()=>{q.value=1,A()};h(U,(()=>{q.value=1,A()}));const F=b(),H=b({}),J=b(!1);return h((()=>H.value.scrollTop),(e=>{J.value=!(e<=0)})),_((()=>{var e,t;null==(t=null==(e=document.querySelector("#page-order").querySelector(".list-wrap"))?void 0:e.addEventListener)||t.call(e,"scroll",(()=>{H.value=F.value.scrollTop})),A()})),(e,t)=>{const n=S;return a(),l("div",G,[o(C,{active:u(D),"onUpdate:active":t[0]||(t[0]=e=>j(D)?D.value=e:null),list:z,class:"tab","title-active-color":"#c41e21"},null,8,["active"]),s("div",{ref_key:"refreshRef",ref:F,class:"list-wrap"},[u(L).length?(a(),c(n,{key:0,loading:u(w),"onUpdate:loading":t[1]||(t[1]=e=>j(w)?w.value=e:null),class:"body",finished:u(T),onLoad:B},{default:i((()=>[(a(!0),l(d,null,r(u(L),((e,t)=>(a(),c(R,{key:t,detail:e,onClick:t=>(e=>{const{orderNo:t,insurerCode:a}=e;k("orderDetail",{orderNo:t,agentCode:m,tenantId:p,insurerCode:a})})(e),onAfterDelete:E},null,8,["detail","onClick"])))),128))])),_:1},8,["loading","finished"])):N("",!0)],512)])}}}),[["__scopeId","data-v-7bc9f116"]]);export{H as default};

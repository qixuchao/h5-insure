var H=Object.defineProperty,J=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var b=(u,t,o)=>t in u?H(u,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[t]=o,_=(u,t)=>{for(var o in t||(t={}))W.call(t,o)&&b(u,o,t[o]);if(M)for(var o of M(t))K.call(t,o)&&b(u,o,t[o]);return u},k=(u,t)=>J(u,Q(t));import{g as X,a9 as Z,O as ee,E as y,d as te,M as oe,h as se,r as f,j as v,k as x,m as g,p as E,n as q,G as R,A as F,F as I,z as d,J as ne,C as P,T as N,L as ue}from"./vendor-af6fda0a.js";import{_ as ie,l as j,r as le,R as ae,T as ce,n as re,P as pe,$ as _e}from"./index-19f772ca.js";import{l as fe,g as ve}from"./inform-1dcfe166.js";import{s as ge}from"./useStorage-4f353dd5.js";import{s as Ee}from"./verify-092f09de.js";const de={class:"date"},Ce={class:"inform-file"},Be={class:"tips"},me=P(" \u60A8\u7684\u7B7E\u540D\u5C06\u88AB\u7528\u4E8E"),ye=P("\u6587\u4EF6 "),he={class:"footer-button"},Te=P("\u4E0B\u4E00\u6B65"),De=X({setup(u){const t=Z(),o=ee(),{productCode:Ae="MMBBSF",agentCode:O="65434444",tenantId:C="9991000007",agencyCode:ke="3311222",insurerCode:h="zhongan",productCategory:S=1,templateId:U=1,orderNo:T="2022080217103534947"}=o.query,p=y(null),D=y(!1),G=te().format("YYYY-MM-DD"),B=y(""),A=y(),V=()=>{var s;(s=p.value)==null||s.clear()},i=oe({noticeType:"",materialSource:"",noticeList:[],pageData:{}}),Y=()=>{le({orderNo:T,saleUserId:O,tenantId:C}).then(({code:s,data:n})=>{s==="10000"&&(Object.assign(i.pageData,n),n.tenantOrderAttachmentList.forEach(l=>{l.category===ae.ELECTRIC_SIGN&&l.objectType===ce.AGENT&&p.value.setDataURL(l.fileBase64)}))})},$=s=>{console.log(s);const{id:n,objectType:l}=s,r={1:"pdf",2:"richText",3:"link"};ve({insurerCode:h,id:n,objectType:l,productCategory:S,orderNo:T,tenantId:C}).then(({code:c,data:e})=>{c==="10000"&&(console.log(e),(e==null?void 0:e[0].questionType)===2?(B.value="question",A.value=e):((e==null?void 0:e[0].textType)===1&&(e==null?void 0:e[0].content.includes("png"))?(B.value="picture",console.log(111)):B.value=r[e==null?void 0:e[0].textType],A.value=e==null?void 0:e[0].content))})};se(()=>{Y(),fe({insurerCode:h,orderNo:T,productCategory:S,tenantId:C,noticeType:9,objectType:3}).then(({code:s,data:n})=>{s==="10000"&&(i.noticeList=[...i.noticeList,...n])})});const w=s=>{ge.set("questionData",s),t.push({path:"/healthNotice",query:_({questionnaireType:s.questionnaireType},o.query)})},z=()=>{var l,r;if(!(i.noticeList&&i.noticeList.every(c=>c.isDone===1))){N("\u8BF7\u5B8C\u6210\u6240\u6709\u544A\u77E5\u8FDB\u884C\u4E0B\u4E00\u6B65");return}if((l=p.value)==null?void 0:l.isEmpty()){N("\u8BF7\u5B8C\u6210\u4EE3\u7406\u4EBA\u7B7E\u5B57\u8FDB\u884C\u4E0B\u4E00\u6B65");return}if(!D.value){N("\u8BF7\u52FE\u9009\u540C\u610F\u7B7E\u540D");return}const n=(r=p.value)==null?void 0:r.save();Ee("AGENT",n,i.pageData.id,C).then(c=>{c&&re(k(_({},i.pageData),{extInfo:k(_({},i.pageData.extInfo),{templateId:U,pageCode:"salesNotice"}),venderCode:h})).then(({code:e,data:m})=>{e==="10000"&&m.pageAction.pageAction==="jumpToPage"&&t.push({path:pe[m.pageAction.data.nextPageCode],query:_({},o.query)})})})};return(s,n)=>{const l=f("van-cell"),r=f("ProSign"),c=f("van-checkbox"),e=f("van-button"),m=f("ProPageWrap");return v(),x(m,{class:"page-salesman-inform"},{default:g(()=>[E(j,{title:"\u8425\u9500\u5458\u544A\u77E5\u4E66"},{default:g(()=>[(v(!0),q(I,null,R(F(i).noticeList,a=>(v(),x(l,{key:a.id,class:ue({"is-active":a.isDone===2}),title:`\u300A${a.title}\u300B`,"is-link":"",value:`${a.isDone===1?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:L=>w(a)},null,8,["class","title","value","onClick"]))),128))]),_:1}),E(j,{title:"\u8425\u9500\u5458\u7B7E\u5B57","show-divider":!1,"show-line":!1},{extra:g(()=>[d("div",{class:"resign",onClick:V},"\u91CD\u7B7E")]),default:g(()=>[E(r,{ref_key:"agentSignRef",ref:p,selector:"sign2"},null,512),d("div",de,"\u7B7E\u540D\u65E5\u671F\uFF1A "+ne(F(G)),1)]),_:1}),d("div",Ce,[E(c,{modelValue:D.value,"onUpdate:modelValue":n[0]||(n[0]=a=>D.value=a),shape:"square"},null,8,["modelValue"]),d("p",Be,[me,(v(!0),q(I,null,R(F(i).noticeList,(a,L)=>(v(),x(_e,{key:L,class:"file",title:`\u300A${a.title}\u300B`,content:A.value,type:B.value,onClick:xe=>$(a)},null,8,["title","content","type","onClick"]))),128)),ye])]),d("div",he,[E(e,{type:"primary",block:"",onClick:z},{default:g(()=>[Te]),_:1})])]),_:1})}}});var be=ie(De,[["__scopeId","data-v-2b1e054a"]]);export{be as default};

import{g as M,a9 as L,r as A,j as p,n as S,z as t,J as m,A as I,d as G,p as f,m as g,ab as k,t as T,a4 as q,a5 as w,C as E,D as V,T as W,E as b,y as j,_ as H,h as $,k as U,G as z,F as J}from"./vendor-17026bfd.js";import{_ as Y,b as x,ab as N,k as X,q as Z}from"./index-b388865d.js";import{d as K,g as Q}from"./order-b82a4792.js";import{O as ee,b as B,a as O}from"./order-26db6dbf.js";import"./utils-b6782348.js";const R=e=>(q("data-v-036260f5"),e=e(),w(),e),te={class:"com-order-item"},ae={class:"header"},se={class:"product-name"},oe={class:"company-name"},de={class:"status"},ne={class:"info"},ue={class:"info-item"},ie=R(()=>t("div",{class:"label"},"\u6295\u4FDD\u4EBA",-1)),le={class:"desc"},ce={class:"info-item"},re=R(()=>t("div",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),_e={class:"desc"},pe={class:"footer"},ve={class:"fee"},he=E(" \u4FDD\u8D39\uFF1A"),me={class:"money"},fe={key:0,class:"buttons"},ge=E("\u5220\u9664"),Ce=E("\u53BB\u5904\u7406"),ye={key:1,class:"buttons"},De=E("\u53BB\u652F\u4ED8"),Ie={key:2,class:"buttons"},be=E("\u5220\u9664"),Se=M({props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup(e,{emit:C}){const o=e,r=L(),y=()=>{V.confirm({title:"",message:"\u786E\u8BA4\u8981\u5220\u9664\u8BE5\u8BA2\u5355\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{K(o.detail.id,o.detail.orderStatus).then(s=>{const{code:u,data:a}=s;u==="10000"&&(W.success("\u5220\u9664\u6210\u529F"),C("afterDelete"))})})},_=()=>{const{goodsCode:s,orderNo:u,id:a,saleUserId:v,templateId:D,tenantId:i,insurerCode:n,productCategory:d,agencyId:l}=o.detail;r.push({path:x.payInfo,query:{productCode:s,orderNo:u,orderId:a,saleUserId:v,templateId:D,tenantId:i,insurerCode:n,productCategory:d,agencyCode:l}})},F=()=>{const{goodsCode:s,orderNo:u,id:a,saleUserId:v,templateId:D,tenantId:i,insurerCode:n,productCategory:d,agencyId:l,saleChannelId:c,orderStatus:h}=o.detail;if((O.PENDING===h||O.PAYING===h)&&(s===N.ZXYS||s===N.BWYL)){const P={[N.ZXYS]:"internet/productDetail/package",[N.BWYL]:"internet/productDetail"};r.push({path:P[s],query:{productCode:s,saleChannelId:c,agentCode:v,tenantId:i,agencyCode:l,orderNo:u}});return}r.push({path:x[o.detail.pageCode],query:{productCode:s,orderNo:u,orderId:a,agentCode:v,templateId:D,tenantId:i,insurerCode:n,productCategory:d,agencyCode:l,isFromOrderList:"1"}})};return(s,u)=>{const a=A("van-button");return p(),S("div",te,[t("div",ae,[t("div",se,m(e.detail.goodsName),1),t("div",oe,m(e.detail.abbreviation),1),t("div",de,m(I(ee)[e.detail.orderStatus]),1)]),t("div",ne,[t("div",ue,[ie,t("div",le,m(e.detail.policyHolder),1)]),t("div",ce,[re,t("div",_e,m(I(G)(e.detail.orderStartDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),t("div",pe,[t("div",ve,[he,t("span",me,"\uFFE5"+m(e.detail.prem),1)]),e.detail.orderTopStatus===I(B).PENDING?(p(),S("div",fe,[f(a,{class:"button",onClick:k(y,["stop"])},{default:g(()=>[ge]),_:1},8,["onClick"]),f(a,{class:"button primary",onClick:k(F,["stop"])},{default:g(()=>[Ce]),_:1},8,["onClick"])])):T("",!0),e.detail.orderTopStatus===I(B).PAYING?(p(),S("div",ye,[f(a,{class:"button primary",onClick:k(_,["stop"])},{default:g(()=>[De]),_:1},8,["onClick"])])):T("",!0),e.detail.orderTopStatus===I(B).TIMEOUT?(p(),S("div",Ie,[f(a,{class:"button",onClick:k(y,["stop"])},{default:g(()=>[be]),_:1},8,["onClick"])])):T("",!0)])])}}});var Ee=Y(Se,[["__scopeId","data-v-036260f5"]]);const Fe={class:"page-order"},ke=M({setup(e){L();const C=b(0),o=b(1),r=b(!1),y=b(!1),_=b([]),F=[{title:"\u5168\u90E8",status:""},{title:"\u5F85\u5904\u7406",status:"-1"},{title:"\u5F85\u652F\u4ED8",status:"0"},{title:"\u5DF2\u5B8C\u6210",status:"1"},{title:"\u5DF2\u5931\u6548",status:"2"}],s=j(()=>F[C.value].status),u=i=>{const{orderNo:n,saleUserId:d,tenantId:l,abbreviation:c,productCategory:h}=i;Z("orderDetail",{orderNo:n,agentCode:d,tenantId:l,abbreviation:c,productCategory:h})},a=()=>{r.value=!0,Q({condition:{orderTopStatus:s.value},pageSize:10,pageNum:o.value}).then(i=>{r.value=!1;const{code:n,data:d}=i;n==="10000"&&(o.value===1?_.value=d.datas:_.value=[..._.value,...d.datas]),y.value=_.value.length>=d.total})},v=()=>{o.value+=1,a(),console.log("\u{1F680} ~ handleLoad ~ pageNum.value",o.value)},D=()=>{o.value=1,a()};return H(s,()=>{o.value=1,a()}),$(()=>{a()}),(i,n)=>{const d=A("van-list"),l=A("ProPageWrap");return p(),U(l,{"main-class":"page-order-list"},{default:g(()=>[t("div",Fe,[f(X,{active:C.value,"onUpdate:active":n[0]||(n[0]=c=>C.value=c),list:F,"small-gap":"",class:"tab"},null,8,["active"]),f(d,{class:"body",loading:r.value,finished:y.value,onLoad:v},{default:g(()=>[(p(!0),S(J,null,z(_.value,(c,h)=>(p(),U(Ee,{key:h,detail:c,onClick:P=>u(c),onAfterDelete:D},null,8,["detail","onClick"]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var Ue=Y(ke,[["__scopeId","data-v-52022118"]]);export{Ue as default};

import{_ as t,d as e,cP as a,i as n,h as i,j as s,r as o,k as l,O as r,bb as d,da as c,o as u,m,w as p,a as v,u as f,c as h,a8 as I,e as y,b as L,f as b,q as j,F as g,p as O,bd as k,V as A,a9 as N,dO as w,T as V,ae as q,aC as C,aD as D,bS as T,bs as x}from"./index-18029af6.js";import{C as P}from"./index-1a157ff4.js";import{_ as R}from"./index-431954d6.js";import{c as _}from"./order-9e8d8124.js";import{m as Q}from"./trial-da375d79.js";import"./infoCollection-f7f52518.js";import"./core-d00299dc.js";import{I as S}from"./infoItem-07c5738e.js";import{I as U}from"./insuranceNotificationInformation-2ec7c7be.js";import{a as E,_ as F}from"./PolicyInfo-86d041e5.js";import{l as B,b as G}from"./product-332f8a0f.js";import{Q as H}from"./questionnaire-62331097.js";import{P as M}from"./index-afee7a6b.js";import{Q as X}from"./notice-33e6eedd.js";import{g as Y}from"./utils-2ce8bfc5.js";import{O as $}from"./OperateBtn-e5894cea.js";import{C as z}from"./index-3dd7e161.js";import"./cloneDeep-b1aee3d4.js";import"./lodash-99d2f32e.js";import"./util-449e3155.js";import"./trial-601d97d8.js";import"./constants-4b08cf92.js";const J=t=>(C("data-v-cec9fbc2"),t=t(),D(),t),K={class:"page-order-detail"},W=J((()=>v("div",{class:"card-item-name"},"订单进度",-1))),Z={class:"card-item-icon"},tt={class:"card card-list"},et={class:"card-list-title"},at={class:"card card-list"},nt={class:"card-list-head"},it=J((()=>v("div",{class:"card-list-title"},"险种信息",-1))),st={class:"card-list-premium"},ot={class:"card"},lt={class:"card"},rt=J((()=>v("div",{class:"tenantOrderAttachmentList-title"},"投保人资料",-1))),dt={class:"tenantOrderAttachmentList-img"},ct=["src"],ut=J((()=>v("div",{class:"tenantOrderAttachmentList-title"},"被保人资料",-1))),mt={class:"tenantOrderAttachmentList-img"},pt=["src"],vt=J((()=>v("div",{class:"tenantOrderAttachmentList-title"},"受益人资料",-1))),ft={class:"tenantOrderAttachmentList-img"},ht=["src"],It=J((()=>v("div",{class:"tenantOrderAttachmentList-title"},"监护人资料",-1))),yt={class:"tenantOrderAttachmentList-img"},Lt=["src"],bt=J((()=>v("div",{class:"tenantOrderAttachmentList-title"},"银行卡信息",-1))),jt={class:"tenantOrderAttachmentList-img"},gt=["src"],Ot={class:"card"},kt={class:"card"},At={class:"footer-button"};var Nt=t(e({__name:"index",setup(t){const e=a(),C=n();i();const D=s();s([]);const J=s([]),Nt=[{title:"险种名称",dataIndex:"riskName",width:200},{title:"保险金额/份数",dataIndex:"initialAmount",width:180,render:(t,e)=>t.initialAmount/(t.copy||1)},{title:"保障期间",dataIndex:"coveragePeriodDesc",width:180},{title:"交费期间",dataIndex:"chargePeriodDesc",width:180},{title:"首期保费",dataIndex:"initialPremium",width:180,render:(t,e)=>t.initialPremium}],wt=o({customerQuestions:[],payInfo:{schema:[],config:[],formData:[]},policyInfo:{schema:[],config:[],formData:{}}}),{query:{orderNo:Vt,agentCode:qt,tenantId:Ct}}=C,Dt=l((()=>{var t;return"cancel"!==(null==(t=D.value)?void 0:t.orderStatus)})),Tt=()=>{N("orderTrajectory",{orderNo:Vt,orderId:D.value.id,tenantId:Ct})},xt=s(!1),Pt=s(),Rt=s([]),_t=l((()=>t=>{const{tenantOrderAttachmentList:e}=D.value;return(null==e?void 0:e.length)?e.filter((e=>e.objectType===t)):[]})),Qt=s(),St=(t=!0)=>{w({orderNo:Vt,agentCode:qt,tenantId:Ct}).then((({code:e,data:a})=>{if("10000"===e){if(D.value=a,!t)return;Qt.value=a,D.value.tenantOrderPayInfoList=a.tenantOrderPayInfoList||[];const e=Object.keys(D.value.productCodeList).map((t=>({productCode:t,mergeRiskReqList:D.value.productCodeList[t]})));G(n={productList:e}).then((({data:t,code:e})=>{var a,n;"10000"===e&&(Rt.value=null==(n=null==(a=t.riskMaterialList)?void 0:a[0])?void 0:n.productMaterialList)})),Q(n).then((({data:t,code:e})=>{if("10000"===e){const{productDetailResList:e,productFactor:a}=t;Pt.value=a;const{payInfo:n,other:i}=x(a);wt.payInfo={...wt.payInfo,...n},wt.policyInfo={...wt.policyInfo,...i}}})),(async t=>{let e=[];const{code:a,data:n}=await T({orderNo:Vt,tenantId:Ct});"10000"===a&&(e=n.productQuestionnaireVOList);const{code:i,data:s}=await B(t);if("10000"===i){const{productQuestionnaireVOList:t}=s||{},a=t.filter((t=>t.businessType!==X.VISIT));wt.customerQuestions=a.map((t=>{const{questionnaireDetailResponseVO:a,questionnaireId:n,questionnaireName:i}=t||{},{questions:s,basicInfo:o}=a||{},{objectType:l,questionnaireType:r}=o||{};if(r===H.TEXT){const{content:t,textType:e}=(null==s?void 0:s[0])||{};return{content:t,contentType:Y(`${e}`,t),questionnaireId:n,questionnaireName:i}}const d=(e||[]).find((t=>t.questionnaireId===n));return{...a,contentType:"question",...null==d?void 0:d.questionnaireDetailResponseVO,questionnaireId:n,questionnaireName:i}}))}})({productCodeList:Object.keys(D.value.productCodeList)})}var n}))},Ut=()=>{_({orderNo:Vt,tenantId:Ct}).then((({code:t,data:e})=>{"10000"===t&&(V("撤单成功"),setTimeout((()=>St(!1)),500))}))};return r((()=>{St()})),(t,a)=>{const n=q,i=R,s=P,o=z,l=d,r=c("loading");return u(),m(l,{"theme-vars":f(e)},{default:p((()=>{var t,e,l,d,c,N,w,V,q,C,T,x,P,R;return[v("div",K,[f(Dt)?(u(),h("div",{key:0,class:"card card-head",onClick:Tt},[W,v("div",Z,[I(y(null==(t=f(D))?void 0:t.orderStepDesc)+" ",1),L(n,{name:"arrow-right"})])])):b("",!0),v("div",tt,[v("p",et,y(null==(e=f(D))?void 0:e.productName),1),L(S,{label:"订单号",content:null==(l=f(D))?void 0:l.orderNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),(u(!0),h(g,null,j((null==(c=null==(d=f(D))?void 0:d.applicationNoList)?void 0:c.length)?null==(N=f(D))?void 0:N.applicationNoList:[""],(t=>(u(),m(S,{key:t,label:"投保单号",content:t,line:"","is-copy":"","min-width":"other"},null,8,["content"])))),128)),L(S,{label:"创建时间",content:null==(w=f(D))?void 0:w.orderDate,line:"","min-width":"other"},null,8,["content"]),L(S,{label:"投保时间",content:null==(V=f(D))?void 0:V.applicationCreateDate,line:"","min-width":"other"},null,8,["content"]),L(S,{label:"投保保费",content:null==(q=f(D))?void 0:q.orderAmount,line:"","min-width":"other"},null,8,["content"]),L(S,{label:"承保保费",content:null==(C=f(D))?void 0:C.orderAmount,line:"","min-width":"other"},null,8,["content"])]),v("div",at,[v("div",nt,[it,v("div",st,[I(" 首年保费："),v("span",null,y(null==(T=f(D))?void 0:T.orderAmount),1)])]),(null==(P=null==(x=f(D))?void 0:x.riskList)?void 0:P.length)>0?(u(),m(i,{key:0,columns:Nt,class:"table","data-source":null==(R=f(D))?void 0:R.riskList},null,8,["data-source"])):b("",!0)]),v("div",ot,[f(wt).policyInfo.schema.length?(u(),m(f(E),{key:0,modelValue:f(D),"onUpdate:modelValue":a[0]||(a[0]=t=>O(D)?D.value=t:null),schema:f(wt).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):b("",!0)]),v("div",lt,[L(o,{modelValue:f(J),"onUpdate:modelValue":a[1]||(a[1]=t=>O(J)?J.value=t:null)},{default:p((()=>[L(s,{title:"影像信息",name:"1"},{default:p((()=>[rt,v("div",dt,[(u(!0),h(g,null,j(f(_t)(f(k).HOLDER),((t,e)=>(u(),h("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,ct)])))),128))]),ut,v("div",mt,[(u(!0),h(g,null,j(f(_t)(f(k).INSURED),((t,e)=>(u(),h("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,pt)])))),128))]),vt,v("div",ft,[(u(!0),h(g,null,j(f(_t)(f(k).BENEFICIARY),((t,e)=>(u(),h("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,ht)])))),128))]),It,v("div",yt,[(u(!0),h(g,null,j(f(_t)(f(k).GUARDIAN),((t,e)=>(u(),h("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,Lt)])))),128))]),bt,v("div",jt,[(u(!0),h(g,null,j(f(_t)(f(k).INIT_SIGN),((t,e)=>(u(),h("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,gt)])))),128))])])),_:1})])),_:1},8,["modelValue"])]),v("div",Ot,[L(U,{title:"投保告知信息",data:f(wt).customerQuestions||[]},null,8,["data"])]),v("div",kt,[f(Pt)?(u(),m(M,{key:0,ref:"personalInfoRef",modelValue:f(Qt),"onUpdate:modelValue":a[2]||(a[2]=t=>O(Qt)?Qt.value=t:null),"product-factor":f(Pt),"is-view":""},null,8,["modelValue","product-factor"])):b("",!0)]),f(wt).payInfo.schema.length?(u(),m(f(F),{key:1,ref:"payInfoRef",modelValue:f(D).tenantOrderPayInfoList,"onUpdate:modelValue":a[3]||(a[3]=t=>f(D).tenantOrderPayInfoList=t),schema:f(wt).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):b("",!0),A((u(),h("div",At,[L($,{detail:f(D),onHandleCancel:Ut},null,8,["detail"])])),[[r,f(xt)]])])]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-cec9fbc2"]]);export{Nt as default};

var W=Object.defineProperty,G=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var B=(o,e,t)=>e in o?W(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,w=(o,e)=>{for(var t in e||(e={}))X.call(e,t)&&B(o,t,e[t]);if(S)for(var t of S(e))Z.call(e,t)&&B(o,t,e[t]);return o},L=(o,e)=>G(o,Q(e));import{g as V,j as M,n as R,z as p,J as k,O as ee,E as d,h as te,r as F,A as D,p as m,m as ae,T as q}from"./vendor-667a94d7.js";import{_ as T}from"./index-d42b3ac5.js";import{m as oe,u as se,P as ne}from"./up-btn-61d75c07.js";import{i as re,a as le,s as ie,e as ue,E as de}from"./trial-f5b65811.js";import{p as ce}from"./product-017b4373.js";import{S as me}from"./infoCollection-242da9b6.js";import{g as pe,l as ve,a as _e,t as fe,c as Ie,d as U}from"./utils-033c3448.js";import"./trial-55f31717.js";const ge={class:"com-field-info"},he={class:"title"},De={class:"desc"},xe=V({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(o){return(e,t)=>(M(),R("div",ge,[p("div",he,k(o.title),1),p("div",De,k(o.desc),1)]))}});var C=T(xe,[["__scopeId","data-v-34962902"]]);const ye={class:"page-activity-upgrade"},Oe=["src"],we={class:"container"},Ce={class:"main-form"},be=V({setup(o){const e=ee(),{productCode:t="BWYL2022",tenantId:v,orderId:N,extInfo:A}=e.query,b=pe(A),{phoneNo:Pe,saleChannelId:$,paymentMethod:Ee,certNo:Se,name:Be}=b,c=d(),g=d(),s=d(),h=d(),x=d(),y=d(),O=d(!1),j=()=>{O.value=!1},H=async()=>{var i,u,_,f,I;const r=_e({tenantId:v,saleChannelId:$,orderStatus:"",orderTopStatus:"",detail:c.value,paymentMethod:(u=(i=s.value.extInfo)==null?void 0:i.extraInfo)==null?void 0:u.paymentMethod,renewalDK:(f=(_=s.value.extInfo)==null?void 0:_.extraInfo)==null?void 0:f.renewalDK,successJumpUrl:"",premium:h.value,holder:s.value.tenantOrderHolder,insured:L(w({},s.value.tenantOrderInsuredList[0]),{socialFlag:s.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:fe({tenantId:v,riskList:Ie(g.value.productRiskVoList[0].riskDetailVOList,c.value),riskPremium:{},productId:(I=c.value)==null?void 0:I.id})}),a=await ie(r),{code:l,data:n}=a;return l==="10000"?n.data:""},P=async()=>{const r=U({tenantId:v,premium:h.value,orderDetail:s.value,productDetail:c.value,insureDetail:g.value}),a=await ue(r),{code:l,data:n}=a;l==="10000"&&(h.value=n.installmentPremium,y.value=n.signUrl)},J=async r=>{const a=U({tenantId:v,premium:h.value,orderDetail:s.value,productDetail:c.value,insureDetail:g.value}),l=await de(w({id:r},a)),{code:n,data:i}=l;n==="10000"&&(O.value=!0)},K=async r=>{try{q.loading({forbidClick:!0,message:"\u5347\u7EA7\u4E2D"}),await P();const a=await H();y.value?window.location.href=y.value:J(a)}catch(a){console.log(a),q.clear()}},Y=()=>{const r=ce({productCode:t,withInsureInfo:!0}),a=re({productCode:t}),l=le({id:N||b.orderId,tenantId:v});Promise.all([r,a,l]).then(([n,i,u])=>{n.code==="10000"&&(c.value=n.data),i.code==="10000"&&(g.value=i.data),u.code==="10000"&&(s.value=u.data,x.value=u.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),P()})};return te(()=>{Y()}),(r,a)=>{var i,u,_,f,I,E;const l=F("ProRadioButton"),n=F("ProField");return M(),R("div",ye,[p("img",{class:"logo",src:D(ve)},null,8,Oe),p("div",we,[p("div",Ce,[m(C,{title:"\u59D3\u540D",desc:(u=(i=s.value)==null?void 0:i.tenantOrderInsuredList)==null?void 0:u[0].name},null,8,["desc"]),m(C,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(f=(_=s.value)==null?void 0:_.tenantOrderInsuredList)==null?void 0:f[0].certNo},null,8,["desc"]),m(C,{title:"\u624B\u673A\u53F7\u7801",desc:(E=(I=s.value)==null?void 0:I.tenantOrderHolder)==null?void 0:E.mobile},null,8,["desc"]),m(n,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:ae(()=>[m(l,{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=z=>x.value=z),disabled:!0,options:D(me)},null,8,["modelValue","options"])]),_:1}),p("div",{class:"submit",onClick:K})])]),m(ne,{"is-show":O.value,bg:D(oe),"btn-bg":D(se),onOnClose:j},null,8,["is-show","bg","btn-bg"])])}}});var Ne=T(be,[["__scopeId","data-v-2c119607"]]);export{Ne as default};

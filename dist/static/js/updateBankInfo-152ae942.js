import{_ as a,d as e,i as t,h as s,j as o,aE as n,o as r,c as d,u as i,m as l,f as u,a as c,b as f,w as m,a8 as p,aK as v,a9 as y,bu as h,ag as I,cr as b,cs as g,ct as _}from"./index-1dfa3d8b.js";import{_ as j}from"./PolicyInfo-d3076bf7.js";import{u as P}from"./useOrder-c3ae92cb.js";import{p as x}from"./utils-4cd29178.js";import{g as C,m as k}from"./trial-92ff395b.js";import{n as N}from"./nextStep-a6268b33.js";import{B as w,a as A}from"./constants-4b08cf92.js";import"./utils-55175fb3.js";import"./infoCollection-46cb283d.js";import"./trial-d2680091.js";import"./core-86759a6d.js";const E={class:"bank-info-wrap"},O={class:"footer-button"},$=e({name:"updateBankInfo"});var B=a(e({...$,setup(a){const e=t(),$=s(),{orderNo:B,isShare:L,tenantId:U,nextPageCode:D}=e.query,G=P(),S=o({schema:[],config:[],formData:[]}),T=o(!!L),V=o(),q=()=>{$.back()},F=()=>{V.value&&V.value.validate(!1).then((a=>{a&&(L?(G.value.extInfo.buttonCode=w.UPDATE_BANK_INFO_HOLDER,N(G.value,((a,t)=>{t===v.JUMP_PAGE&&y(a.nextPageCode,e.query)}),e)):(G.value.extInfo.buttonCode=w.UPDATE_BANK_INFO_AGENT,N(G.value,((a,e)=>{e===v.JUMP_PAGE&&((a,e)=>{const{holder:t,insured:s}=G.value;let o={name:t.name,gender:`${b[t.gender]}士`};"insured"===a&&(o={name:null==s?void 0:s[0].name,gender:`${b[null==s?void 0:s[0].gender]}士`}),g({shareType:0,title:`${_[e].title}`,desc:_[e].desc.replace("{name}",`${o.name}${o.gender},`),url:`${window.location.href}&objectType=${a}&isShare=1&nextPageCode=updateBankInfo`.replace("/updateBankInfo","/phoneVerify"),imageUrl:"https://aquarius-v100-test.oss-cn-hangzhou.aliyuncs.com/MyPicture/asdad.png"})})("holder","pay")}),e)))}))};return n((()=>{(async()=>{let a={};const{code:e,data:t}=await C({orderNo:B,tenantId:U});"10000"===e&&(Object.assign(G.value,t,{extInfo:{...t.extInfo,buttonCode:w.SIGN,pageCode:A.SIGN}}),a=x(t.insuredList[0].productList)),k(a).then((({data:a,code:e})=>{if("10000"===e){const{productDetailResList:e,productFactor:t}=a,{payInfo:s}=h(t);S.value={...S.value,...s}}}))})()})),(a,e)=>{const t=I;return r(),d("div",E,[i(S).schema.length?(r(),l(j,{key:0,ref_key:"payInfoRef",ref:V,modelValue:i(G).tenantOrderPayInfoList,"onUpdate:modelValue":e[0]||(e[0]=a=>i(G).tenantOrderPayInfoList=a),schema:i(S).schema,"is-view":i(T),"user-data":i(G)},null,8,["modelValue","schema","is-view","user-data"])):u("",!0),c("div",O,[f(t,{type:"primary",plain:"",onClick:q},{default:m((()=>[p("取消")])),_:1}),f(t,{type:"primary",onClick:F},{default:m((()=>[p("确认")])),_:1})])])}}}),[["__scopeId","data-v-4723937c"]]);export{B as default};

import{d as e,bY as t,bZ as a,u as n,a as l,r as o,E as i,an as d,a9 as s,b6 as u,G as r,c,h as v,g as p,F as m,j as f,e as C,k as I,f as _,w as h,n as y,a7 as k,ck as b,c0 as g,c7 as w}from"./index-b22d3ebf.js";import{i as O}from"./trial-3727a4c6.js";import{b as x,c as N}from"./product-491feaad.js";import{_ as T}from"./index-ba278e02.js";import{u as P,G as R,_ as j}from"./useAttachment-c1a00831.js";import{P as A}from"./index-7d31a668.js";import{g as L}from"./utils-4f07e2ea.js";import"./pdfh5-008ca364.js";import"./infoCollection-146da949.js";import"./trial-5a27f22f.js";const S={key:0},E={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},F={class:"info"},V={key:1,class:"preview-placeholder"},B=f("br",null,null,-1),U=f("span",{id:"insureButton"},null,-1),D=f("div",{id:"xinaoDialog"},null,-1),q=e({__name:"index",setup(e){const q=t((()=>a((()=>import("./index-af50ad6e.js")),["static/js/index-af50ad6e.js","static/css/index-17b84e5d.css","static/js/index-b22d3ebf.js","static/css/index-6495afd9.css","static/js/pdfh5-008ca364.js","static/js/ProAddress.vue_vue_type_style_index_0_scoped_true_lang-94a019dc.js","static/css/ProAddress.vue_vue_type_style_index_0_scoped_true_lang-d13f791f.css","static/js/index-c3008f05.js","static/css/index-ea4f829a.css","static/js/index-fdd83e13.js","static/css/index-988110d6.css","static/js/index-c58069af.js","static/css/index-c3fdf902.css","static/js/cloneDeep-aaa98338.js","static/js/keysIn-b3061da8.js","static/js/isObjectLike-d00d103b.js","static/js/trial-3727a4c6.js","static/js/index-0efd779a.js","static/js/TrialButton-7cc2b767.js","static/css/TrialButton-12c183b3.css","static/js/index-de98001b.js","static/css/index-85f26bb0.css","static/js/index-2e21f050.js","static/css/index-973d8570.css","static/js/empty-ae586b6c.js","static/js/box-title-b63257b3.js","static/css/box-title-54f6fe95.css","static/js/index-1d042b92.js","static/js/echarts-5be271e9.js","static/js/Table-9fd46bc5.js","static/css/Table-da427f8c.css"]))),G=t((()=>a((()=>import("./index-8b80d6dc.js")),["static/js/index-8b80d6dc.js","static/css/index-ea588f10.css","static/js/index-b22d3ebf.js","static/css/index-6495afd9.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-de98001b.js","static/css/index-85f26bb0.css","static/js/utils-4f07e2ea.js","static/js/infoCollection-146da949.js","static/js/trial-5a27f22f.js"]))),M=t((()=>a((()=>import("./index-81f6b2d7.js")),["static/js/index-81f6b2d7.js","static/css/index-b1275e60.css","static/js/index-b22d3ebf.js","static/css/index-6495afd9.css","static/js/pdfh5-008ca364.js"]))),z=t((()=>a((()=>import("./index-fbe1528d.js")),["static/js/index-fbe1528d.js","static/css/index-b9ba3011.css","static/js/index-b22d3ebf.js","static/css/index-6495afd9.css","static/js/pdfh5-008ca364.js"])));n();const Y=l(),{productCode:J="",tenantId:Q,agentCode:Z="",agencyCode:H,saleChannelId:K,extraInfo:W,insurerCode:X,preview:$,trialPreview:ee}=Y.query;let te={};try{console.log("extInfo",decodeURIComponent(W)),te=JSON.parse(decodeURIComponent(W))}catch(Re){}o();const ae=o(),ne=o(),le=o(!0),oe=o({}),ie=o({}),de=o(!1),se=o(0),ue=o(!1);o({});const re=o(!0);o(!0);const ce=o(!0),ve=o(""),pe=o({}),me=o({}),fe=o([]),Ce=o({imgUrl:"",desc:"",title:"",link:window.location.href}),Ie=o({});i((()=>!!$||!!ee));const _e=i((()=>!!ee)),he=o(),ye=()=>{he.value.open()},ke=o([]),be=o(),ge=async()=>{!_e.value&&x({productCode:J,tenantId:Q,isTenant:!$}).then((({data:e,code:t})=>{if("10000"===t){oe.value=e,document.title=e.BASIC_INFO.title||"";const{title:t,desc:n,image:l}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{};a={title:t,desc:n,image:l},Ce.value={desc:a.desc||"你好，这里是描述",imgUrl:a.image,title:a.title,link:window.location.href},b(e.BASIC_INFO.themeType)}var a})),await O({productCode:J,isTenant:!$||!ee}).then((({data:e,code:t})=>{var a;"10000"===t&&(ue.value=!0,ie.value=e,pe.value=null==(a=e.productPlanInsureVOList)?void 0:a[0],fe.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),ce.value=!1,N({productCode:J}).then((({code:e,data:t})=>{var a,n,l,o;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=t;be.value=e||[];const{basicInfo:{questionnaireType:d},questions:s,questionnaireName:u}=(null==(a=null==i?void 0:i[0])?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};2===d&&(ke.value=[{attachmentName:u,attachmentUri:s,attachmentType:"question"}]),ke.value=[{attachmentName:u,attachmentUri:null==(n=null==s?void 0:s[0])?void 0:n.content,attachmentType:L(String(null==(l=null==s?void 0:s[0])?void 0:l.textType),null==(o=null==s?void 0:s[0])?void 0:o.content)}]}}))};d((()=>Ie.value.planCode),(e=>{pe.value=(ie.value.productPlanInsureVOList||[]).find((t=>t.planCode===e))}));const we=()=>{ae.value.handleClickTab()("insureButton")};o(""),o(0);const{fileList:Oe,mustReadFileCount:xe,popupFileList:Ne}=P(pe,be),Te=()=>{de.value=!1,re.value=!0},Pe=()=>{de.value=!1,re.value=!0};return d((()=>pe.value),(()=>{const{planCode:e,oilPackageProductVOList:t,insureProductRiskVOList:a}=pe.value;Ie.value.planCode=e,me.value=(a||[]).find((e=>e.mainRiskFlag===s.YES))}),{deep:!0,immediate:!0}),u((()=>{g(ne,(([{isIntersecting:e}],t)=>{le.value=!0}))})),r((()=>{ce.value=!0,ge(),setTimeout((async()=>{ve.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{var a,n,l,o,i,d,s,u,r,b;const g=w;return c(),v(m,null,[p(ce)?(c(),v("div",S)):(c(),v("div",E,[p(_e)?(c(),v("div",V,[y("当前页面仅用于保费试算预览"),B,y("不展示其他产品相关配置信息")])):(c(),v(m,{key:0},[f("div",F,[(null==(n=null==(a=p(oe))?void 0:a.BASIC_INFO)?void 0:n.banner.length)?(c(),C(T,{key:0,"data-skeleton-type":"img",url:null==(l=p(oe))?void 0:l.BASIC_INFO.banner[0]},null,8,["url"])):I("",!0),(null==(d=null==(i=null==(o=p(oe))?void 0:o.BASIC_INFO)?void 0:i.bannerMove)?void 0:d.length)?(c(),C(T,{key:1,url:null==(r=null==(u=null==(s=p(oe))?void 0:s.BASIC_INFO)?void 0:u.bannerMove)?void 0:r[0],onClick:we},null,8,["url"])):I("",!0),f("div",{ref_key:"observeRef",ref:ne},null,512)]),(null==(b=p(oe))?void 0:b.GUARANTEE)?(c(),C(R,{key:0,"show-service-config":"","data-source":p(oe),"plan-list":p(fe)},null,8,["data-source","plan-list"])):I("",!0),f("div",{class:"trial-text-btn",onClick:ye},"算一算保费"),_(j,{ref:"tenantProductDetailScrollRef","data-source":p(oe)},null,8,["data-source"]),_(g,null,{default:h((()=>{var e,t,a;return[(null==(e=p(oe).SIGNATURE)?void 0:e.inscribedContent)?(c(),C(p(M),{key:0,"inscribed-content":null==(a=null==(t=p(oe))?void 0:t.SIGNATURE)?void 0:a.inscribedContent},null,8,["inscribed-content"])):I("",!0)]})),_:1}),_(g,null,{default:h((()=>{var e;return[(null==(e=p(Oe))?void 0:e.length)?(c(),C(p(z),{key:0,"attachement-list":p(Oe),"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{se.value=e,de.value=!0})(e))},null,8,["attachement-list"])):I("",!0)]})),_:1})],64)),p(le)?(c(),v(m,{key:2},[U,_(p(q),{ref_key:"trialRef",ref:he,"data-source":p(pe),"product-info":{productCode:p(ie).productCode,productName:p(ie).productName,productId:"",tenantId:p(Q),insurerCode:p(X)},"tenant-product-detail":p(oe)},null,8,["data-source","product-info","tenant-product-detail"])],64)):I("",!0)])),p(ue)&&!p(_e)?(c(),C(A,{key:2,"product-detail":p(oe)},null,8,["product-detail"])):I("",!0),D,p(de)?(c(),C(p(G),{key:3,show:p(de),"onUpdate:show":t[1]||(t[1]=e=>k(de)?de.value=e:null),"content-list":p(re)?p(Oe):p(Ne),"is-only-view":p(re),"active-index":p(se),text:p(re)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":p(re)?0:p(xe),onSubmit:Te,onOnCloseFilePreviewByMask:Pe},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):I("",!0)],64)}}});export{q as default};

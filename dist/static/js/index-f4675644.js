import{_ as t,d as e,cA as a,h as n,g as i,i as s,r as o,j as l,O as r,dA as d,b6 as c,cX as m,o as u,l as f,w as p,a as v,a8 as h,e as I,u as y,b,c as j,n as L,F as g,al as O,q as A,m as k,b8 as w,V,a9 as D,bS as N,bj as q,ae as x,at as C,au as P}from"./index-fc7a5429.js";import{C as T}from"./index-f640b774.js";import{_ as R}from"./index-c5843bd3.js";import{m as _}from"./trial-fe69f29d.js";import"./infoCollection-ea7671fe.js";import"./core-cb1b33c4.js";import{I as Y}from"./infoItem-fd5ecb84.js";import{I as Q}from"./insuranceNotificationInformation-5abb81b2.js";import{a as M,_ as U}from"./PolicyInfo-05518c56.js";import{l as E,c as H}from"./product-3b28f723.js";import{Q as S}from"./questionnaire-62331097.js";import{P as F}from"./index-cff7703a.js";import{Q as B}from"./notice-33e6eedd.js";import{g as G}from"./utils-d51ac434.js";import{O as X}from"./OperateBtn-e6fb071f.js";import{C as $}from"./index-6da16e56.js";import"./index-86a45e8f.js";import"./empth-c0adfdba.js";import"./cloneDeep-05d4c049.js";import"./lodash-54c785b2.js";import"./index-46f7f3e3.js";import"./search-80cd5bc0.js";import"./trial-3d0e9acc.js";import"./constants-fe95ef6f.js";import"./order-fbd16726.js";const z=t=>(C("data-v-23bf39a9"),t=t(),P(),t),J={class:"page-order-detail"},K=z((()=>v("div",{class:"card-item-name"},"订单进度",-1))),W={class:"card-item-icon"},Z={class:"card card-list"},tt={class:"card-list-title"},et={class:"card card-list"},at={class:"card-list-head"},nt=z((()=>v("div",{class:"card-list-title"},"险种信息",-1))),it={class:"card-list-premium"},st={class:"card"},ot=z((()=>v("div",{class:"tenantOrderAttachmentList-title"},"投保人资料",-1))),lt={class:"tenantOrderAttachmentList-img"},rt=["src"],dt=z((()=>v("div",{class:"tenantOrderAttachmentList-title"},"被保人资料",-1))),ct={class:"tenantOrderAttachmentList-img"},mt=["src"],ut=z((()=>v("div",{class:"tenantOrderAttachmentList-title"},"受益人资料",-1))),ft={class:"tenantOrderAttachmentList-img"},pt=["src"],vt=z((()=>v("div",{class:"tenantOrderAttachmentList-title"},"监护人资料",-1))),ht={class:"tenantOrderAttachmentList-img"},It=["src"],yt=z((()=>v("div",{class:"tenantOrderAttachmentList-title"},"银行卡信息",-1))),bt={class:"tenantOrderAttachmentList-img"},jt=["src"],Lt={class:"insurance-notification-information card"},gt={class:"footer-button"};var Ot=t(e({__name:"index",setup(t){const e=a(),C=n();i();const P=s();s([]);const z=s([]),Ot=[{title:"险种名称",dataIndex:"riskName",width:200},{title:"保险金额/份数",dataIndex:"regularPremium",width:180,render:(t,e)=>t.regularPremium/t.copy},{title:"保障期间",dataIndex:"coveragePeriodDesc",width:180},{title:"交费期间",dataIndex:"chargePeriodDesc",width:180},{title:"首期保费",dataIndex:"initialPremium",width:180,render:(t,e)=>t.initialPremium}],At=o({customerQuestions:[],payInfo:{schema:[],config:[],formData:[]},policyInfo:{schema:[],config:[],formData:{}}}),{query:{orderNo:kt,agentCode:wt,tenantId:Vt}}=C,Dt=()=>{D("orderTrajectory",{orderNo:kt,orderId:P.value.id,tenantId:Vt})},Nt=s(!1),qt=s(),xt=s([]),Ct=l((()=>t=>{const{tenantOrderAttachmentList:e}=P.value;return(null==e?void 0:e.length)?e.filter((e=>e.objectType===t)):[]})),Pt=s();return r((()=>{d({orderNo:kt,agentCode:wt,tenantId:Vt}).then((({code:t,data:e})=>{if("10000"===t){P.value=e,Pt.value=e,P.value.tenantOrderPayInfoList=e.tenantOrderPayInfoList||[];const t=Object.keys(P.value.productCodeList).map((t=>({productCode:t,mergeRiskReqList:P.value.productCodeList[t]})));H(a={productList:t}).then((({data:t,code:e})=>{var a,n;"10000"===e&&(xt.value=null==(n=null==(a=t.riskMaterialList)?void 0:a[0])?void 0:n.productMaterialList)})),_(a).then((({data:t,code:e})=>{if("10000"===e){const{productDetailResList:e,productFactor:a}=t;qt.value=a;const{payInfo:n,other:i}=q(a);At.payInfo={...At.payInfo,...n},At.policyInfo={...At.policyInfo,...i}}})),(async t=>{let e=[];const{code:a,data:n}=await N({orderNo:kt,tenantId:Vt});"10000"===a&&(e=n.productQuestionnaireVOList);const{code:i,data:s}=await E(t);if("10000"===i){const{productQuestionnaireVOList:t}=s||{},a=t.filter((t=>t.businessType!==B.VISIT));At.customerQuestions=a.map((t=>{const{questionnaireDetailResponseVO:a,questionnaireId:n,questionnaireName:i}=t||{},{questions:s,basicInfo:o}=a||{},{objectType:l,questionnaireType:r}=o||{};if(r===S.TEXT){const{content:t,textType:e}=(null==s?void 0:s[0])||{};return{content:t,contentType:G(`${e}`,t),questionnaireId:n,questionnaireName:i}}const d=(e||[]).find((t=>t.questionnaireId===n));return{...a,contentType:"question",...null==d?void 0:d.questionnaireDetailResponseVO,questionnaireId:n,questionnaireName:i}}))}})({productCodeList:Object.keys(P.value.productCodeList)})}var a}))})),(t,a)=>{const n=x,i=R,s=T,o=$,l=c,r=m("loading");return u(),f(l,{"theme-vars":y(e)},{default:p((()=>{var t,e,l,d,c,m,D,N,q,x,C,T;return[v("div",J,[v("div",{class:"card card-head",onClick:Dt},[K,v("div",W,[h(I(null==(t=y(P))?void 0:t.orderStepDesc)+" ",1),b(n,{name:"arrow-right"})])]),v("div",Z,[v("p",tt,I(null==(e=y(P))?void 0:e.productName),1),b(Y,{label:"订单号",content:null==(l=y(P))?void 0:l.orderNo,line:"","is-copy":"","min-width":"other"},null,8,["content"]),(u(!0),j(g,null,L(null==(d=y(P))?void 0:d.applicationNoList,(t=>(u(),f(Y,{key:t,label:"投保单号",content:t,line:"","is-copy":"","min-width":"other"},null,8,["content"])))),128)),b(Y,{label:"创建时间",content:y(O)(null==(c=y(P))?void 0:c.gmtCreated).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),b(Y,{label:"投保时间",content:y(O)(null==(m=y(P))?void 0:m.orderDate).format("YYYY-MM-DD HH:mm:ss"),line:"","min-width":"other"},null,8,["content"]),b(Y,{label:"投保保费",content:null==(D=y(P))?void 0:D.orderAmount,line:"","min-width":"other"},null,8,["content"]),b(Y,{label:"承保保费",content:null==(N=y(P))?void 0:N.orderAmount,line:"","min-width":"other"},null,8,["content"])]),v("div",et,[v("div",at,[nt,v("div",it,[h(" 首年保费："),v("span",null,I(null==(q=y(P))?void 0:q.orderAmount),1)])]),(null==(C=null==(x=y(P))?void 0:x.riskList)?void 0:C.length)>0?(u(),f(i,{key:0,columns:Ot,class:"table","data-source":null==(T=y(P))?void 0:T.riskList},null,8,["data-source"])):A("",!0)]),y(At).policyInfo.schema.length?(u(),f(y(M),{key:0,modelValue:y(P),"onUpdate:modelValue":a[0]||(a[0]=t=>k(P)?P.value=t:null),schema:y(At).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):A("",!0),v("div",st,[b(o,{modelValue:y(z),"onUpdate:modelValue":a[1]||(a[1]=t=>k(z)?z.value=t:null)},{default:p((()=>[b(s,{title:"影像信息",name:"1"},{default:p((()=>[ot,v("div",lt,[(u(!0),j(g,null,L(y(Ct)(y(w).HOLDER),((t,e)=>(u(),j("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,rt)])))),128))]),dt,v("div",ct,[(u(!0),j(g,null,L(y(Ct)(y(w).INSURED),((t,e)=>(u(),j("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,mt)])))),128))]),ut,v("div",ft,[(u(!0),j(g,null,L(y(Ct)(y(w).BENEFICIARY),((t,e)=>(u(),j("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,pt)])))),128))]),vt,v("div",ht,[(u(!0),j(g,null,L(y(Ct)(y(w).GUARDIAN),((t,e)=>(u(),j("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,It)])))),128))]),yt,v("div",bt,[(u(!0),j(g,null,L(y(Ct)(y(w).INIT_SIGN),((t,e)=>(u(),j("div",{key:e,class:"attachment-item"},[v("img",{src:t.uri,alt:""},null,8,jt)])))),128))])])),_:1})])),_:1},8,["modelValue"])]),v("div",Lt,[b(Q,{title:"投保告知信息",data:y(At).customerQuestions||[]},null,8,["data"])]),y(qt)?(u(),f(F,{key:1,ref:"personalInfoRef",modelValue:y(Pt),"onUpdate:modelValue":a[2]||(a[2]=t=>k(Pt)?Pt.value=t:null),"product-factor":y(qt),"is-view":""},null,8,["modelValue","product-factor"])):A("",!0),y(At).payInfo.schema.length?(u(),f(y(U),{key:2,ref:"payInfoRef",modelValue:y(P).tenantOrderPayInfoList,"onUpdate:modelValue":a[3]||(a[3]=t=>y(P).tenantOrderPayInfoList=t),schema:y(At).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):A("",!0),V((u(),j("div",gt,[b(X,{detail:y(P)},null,8,["detail"])])),[[r,y(Nt)]])])]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-23bf39a9"]]);export{Ot as default};

var Me=Object.defineProperty,He=Object.defineProperties;var Re=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var qe=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var pe=(a,u,o)=>u in a?Me(a,u,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[u]=o,x=(a,u)=>{for(var o in u||(u={}))qe.call(u,o)&&pe(a,o,u[o]);if(fe)for(var o of fe(u))$e.call(u,o)&&pe(a,o,u[o]);return a},U=(a,u)=>He(a,Re(u));import{g as Q,Q as ge,E as B,y as se,j as h,n as V,z as d,J as A,p as r,L as Ee,A as t,B as Ye,a4 as ne,a5 as re,F as M,G as Y,k as K,C as z,t as G,M as we,_ as Ce,r as O,m as b,a9 as Ke,O as ze,h as We,af as Je,D as je,H as Ge,T as te,l as Qe}from"./vendor-667a94d7.js";import{_ as X,u as Xe,q as Ve,a2 as _e,x as oe,l as j,y as ve,G as Ze,z as et,Q as he,A as tt,a3 as De}from"./index-d0831898.js";import{P as ot}from"./index-4ff27a17.js";import{p as Ie,i as at,a as lt,s as st,u as nt,b as rt}from"./trial-c8488e9f.js";import{p as ut}from"./product-44aa0e08.js";import{a as ae}from"./order-b675ac95.js";import{a as Pe,S as be,R as it,f as le}from"./infoCollection-242da9b6.js";import{A as dt}from"./bankCard-b0679059.js";import{g as ct,l as mt,b as ye,t as ft,a as pt}from"./utils-3fe1f311.js";import"./trial-32d87b01.js";const _t=a=>(ne("data-v-7a8bf142"),a=a(),re(),a),vt={class:"com-question-item"},ht={class:"question"},Dt=_t(()=>d("div",{class:"icon"},A("?"),-1)),It={class:"title"},bt=Q({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(a){const[u,o]=ge(!1),w=B(),e=()=>{o()},N=se(()=>u.value?Xe(w.value):0);return(H,C)=>(h(),V("div",vt,[d("div",ht,[Dt,d("div",It,A(a.question),1),r(Ve,{name:"down",class:Ee(["arrow-icon",{show:t(u)}]),onClick:e},null,8,["class"])]),d("div",{ref_key:"answerDom",ref:w,class:"answer",style:Ye({height:`${t(N)}px`})},A(a.answer),5)]))}});var yt=X(bt,[["__scopeId","data-v-7a8bf142"]]);const Ft={class:"com-question"},gt=Q({props:{list:{type:Array,default:()=>[]}},setup(a){const u=a,[o,w]=ge(!1),e=()=>{w()},N=se(()=>u.list.length<=4||o.value?u.list:u.list.slice(0,4));return(H,C)=>(h(),V("div",Ft,[(h(!0),V(M,null,Y(t(N),(l,y)=>(h(),K(yt,{key:y,question:l.title,answer:l.desc},null,8,["question","answer"]))),128)),a.list.length>4?(h(),V("div",{key:0,class:"show-more",onClick:e},[z(A(t(o)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),r(Ve,{name:"down",class:Ee(["icon",{showMore:t(o)}])},null,8,["class"])])):G("",!0)]))}});var Et=X(gt,[["__scopeId","data-v-22ede01f"]]);const ue=a=>(ne("data-v-b559f82a"),a=a(),re(),a),wt=ue(()=>d("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),Ct=ue(()=>d("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),Vt=ue(()=>d("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),Pt=Q({props:{disable:{type:Boolean,default:!1},holderDisable:{type:Boolean,default:!1},paymentMethodDisable:{type:Boolean,default:!1},premium:{default:0},formInfo:{default:()=>({})}},setup(a,{expose:u}){const o=a,w=B({}),e=we({insureDisable:!0,formInfo:o.formInfo}),N=()=>new Promise((C,l)=>{w==null||w.value.validate().then(()=>{C("")},()=>{l()})}),H=()=>{o.disable||(e.formInfo.renewalDK=!e.formInfo.renewalDK)};return Ce(()=>e.formInfo.insured.relationToHolder,(C,l)=>{o.disable||C!==l&&(C.toString()===Pe.SELF?(e.formInfo.insured={certNo:e.formInfo.holder.certNo,name:e.formInfo.holder.name,socialFlag:e.formInfo.holder.socialFlag,relationToHolder:C},e.insureDisable=!0):(e.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:C},e.insureDisable=!1))}),u({validateForm:N}),(C,l)=>{const y=O("ProField"),k=O("ProRadioButton"),R=O("ProPicker"),q=O("ProTabButton"),Z=O("ProForm");return h(),K(Z,{ref_key:"formRef",ref:w},{default:b(()=>[d("div",null,[wt,r(y,{modelValue:t(e).formInfo.holder.name,"onUpdate:modelValue":l[0]||(l[0]=s=>t(e).formInfo.holder.name=s),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D","is-view":o.holderDisable||o.disable},null,8,["modelValue","is-view"]),r(y,{modelValue:t(e).formInfo.holder.certNo,"onUpdate:modelValue":l[1]||(l[1]=s=>t(e).formInfo.holder.certNo=s),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","validate-type":[t(_e).ID_CARD],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),r(y,{modelValue:t(e).formInfo.holder.mobile,"onUpdate:modelValue":l[2]||(l[2]=s=>t(e).formInfo.holder.mobile=s),label:"\u624B\u673A\u53F7",name:"mobile",required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7","is-view":o.holderDisable||o.disable},null,8,["modelValue","is-view"]),r(y,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":l[4]||(l[4]=s=>t(e).formInfo.holder.socialFlag=s),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:b(()=>[r(k,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":l[3]||(l[3]=s=>t(e).formInfo.holder.socialFlag=s),disabled:o.disable,options:t(be)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),r(oe),d("div",null,[Ct,r(y,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":l[6]||(l[6]=s=>t(e).formInfo.insured.relationToHolder=s),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:b(()=>[r(k,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":l[5]||(l[5]=s=>t(e).formInfo.insured.relationToHolder=s),disabled:o.disable,options:t(it)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"]),r(y,{modelValue:t(e).formInfo.insured.name,"onUpdate:modelValue":l[7]||(l[7]=s=>t(e).formInfo.insured.name=s),label:"\u59D3\u540D",name:"name",required:"","is-view":t(e).insureDisable||o.disable},null,8,["modelValue","is-view"]),r(y,{modelValue:t(e).formInfo.insured.certNo,"onUpdate:modelValue":l[8]||(l[8]=s=>t(e).formInfo.insured.certNo=s),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","validate-type":[t(_e).ID_CARD],"is-view":t(e).insureDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),r(y,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":l[10]||(l[10]=s=>t(e).formInfo.insured.socialFlag=s),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:b(()=>[r(k,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":l[9]||(l[9]=s=>t(e).formInfo.insured.socialFlag=s),disabled:o.disable,options:t(be)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),r(oe),d("div",null,[Vt,r(y,{label:"\u6BCF\u6708\u4FDD\u8D39","is-view":!0},{input:b(()=>[z(A(o.premium)+" /\u6708 \u517112\u671F",1)]),_:1}),r(R,{modelValue:t(e).formInfo.paymentMethod,"onUpdate:modelValue":l[11]||(l[11]=s=>t(e).formInfo.paymentMethod=s),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":t(dt),"is-view":o.disable||t(e).formInfo.paymentMethodDisable,required:""},null,8,["modelValue","data-source","is-view"]),r(y,{label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9"},{input:b(()=>[r(q,{disabled:o.allDisabled,title:"\u514D\u8D39\u5F00\u901A",active:t(e).formInfo.renewalDK,onClick:H},null,8,["disabled","active"])]),_:1})]),r(oe)]),_:1},512)}}});var Bt=X(Pt,[["__scopeId","data-v-b559f82a"]]);const Tt=a=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(a),Fe=a=>/\W/.test(a);const At=a=>(ne("data-v-4e28f62f"),a=a(),re(),a),Nt={class:"page-product-detail"},St={class:"info"},Ot=["src"],kt=["src"],Lt={class:"guarantee-list"},xt={key:0,class:"basic"},Ut={class:"tab-1"},Mt=["src"],Ht=At(()=>d("div",{class:"sub-title"},"*\u4EA7\u54C1\u8D44\u6599\u6587\u4EF6\u8BE6\u60C5\u53EF\u624B\u52A8\u653E\u5927\uFF0C\u4EE5\u4FBF\u60A8\u66F4\u6E05\u6670\u67E5\u9605\u5185\u5BB9\u3002",-1)),Rt={class:"tab-1-content"},qt=z(" \u8BF7\u67E5\u770B "),$t={key:0,class:"dun-hao"},Yt={class:"footer-button"},Kt={class:"price"},zt=z(" \u603B\u4FDD\u8D39"),Wt={class:"guarantee-list"},Jt={class:"title"},jt={class:"content"},Gt=Q({setup(a){const u=Ke(),o=ze(),{productCode:w="BWYL2021",tenantId:e,extInfo:N,orderId:H}=o.query,C=ct(N),{phoneNo:l,saleChannelId:y,paymentMethod:k,certNo:R,name:q,orderId:Z}=C,s=H||Z,Be=B([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),ie=B(),de=B(0),ee=B(!1),D=B(),W=B(),L=B(),Te=!!(q&&R&&l),Ae=!!s,I=we({holder:{certNo:R,certType:he.CERT,mobile:l,name:q,socialFlag:le.HAS},insured:{certNo:R,certType:he.CERT,name:q,socialFlag:le.HAS,relationToHolder:Pe.SELF},paymentMethod:k,paymentMethodDisable:!!k,renewalDK:!0}),Ne=()=>{ee.value=!0},J=se(()=>{var f,i,m,p,_,v,F;return((m=(i=(f=D.value)==null?void 0:f.tenantProductInsureVO)==null?void 0:i.guaranteeList)==null?void 0:m.length)?(_=(p=D.value)==null?void 0:p.tenantProductInsureVO)==null?void 0:_.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(F=(v=D.value)==null?void 0:v.tenantProductInsureVO)==null?void 0:F.titleAndDescVOS}]}),ce=()=>{const{holder:{certNo:f,mobile:i,name:m,socialFlag:p},insured:{certNo:_,name:v,socialFlag:F,relationToHolder:n},paymentMethod:c}=I,g=De(f)&&Tt(i)&&Fe(m)&&!!p,E=De(_)&&Fe(v)&&!!F&&!!n;return!!(g&&E&&!!c)},Se=async f=>{try{const i=await nt(f),{code:m}=i;if(m==="10000"){const p=await rt({id:f.id,tenantId:e}),{data:_}=p;window.location.href=_}te.clear()}catch{te.clear()}},Oe=f=>`https://planet-h5-insure-test.zhongan.io/activity/productDetail?tenantId=${e}&productCode=${w}&orderId=${f}`,ke=async f=>{const i=pt({tenantId:e,saleChannelId:y,detail:D.value,paymentMethod:I.paymentMethod,renewalDK:I.renewalDK?"Y":"N",successJumpUrl:"",premium:L.value,holder:I.holder,insured:I.insured,tenantOrderRiskList:f,orderStatus:ae.UP_PROCESSING,orderTopStatus:"-1"}),m=await st(i),{code:p,data:_}=m;p==="10000"&&(te.loading({forbidClick:!0,message:"\u6838\u4FDD\u4E2D..."}),Se(U(x({},i),{id:_.data,extInfo:{extraInfo:{renewalDK:I.renewalDK||"N",paymentMethod:I.paymentMethod,successJumpUrl:Oe(_.data)}}})))},me=async()=>{const{calcData:f,riskVOList:i}=ye({holder:I.holder,insured:I.insured,tenantId:e,productDetail:D.value,insureDetail:W.value}),m=async()=>{const p=await Ie(f),{code:_,data:v}=p;return _==="10000"?(L.value=v.premium,{condition:i,data:v}):{}};m(),Qe.exports.debounce(m,500,{trailing:!0})},Le=()=>new Promise(f=>{var i,m;(m=(i=ie.value)==null?void 0:i.validateForm)==null||m.call(i).then(async()=>{const{calcData:p,riskVOList:_}=ye({holder:I.holder,insured:I.insured,tenantId:e,productDetail:D.value,insureDetail:W.value}),v=await Ie(p),{code:F,data:n}=v;F==="10000"&&(L.value=n.premium,f({condition:_,data:n})),f({})})}),xe=async()=>{var v;if(s){u.push({path:"/activity/guaranteeUpgrade",query:U(x({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify(U(x({},C),{orderId:s}))})});return}const{condition:f,data:i}=await Le(),m={},p=(F=[])=>{(F||[]).forEach(n=>{var c;m[n.riskCode]=n,((c=n.riskPremiumDetailVOList)==null?void 0:c.length)&&p(n.riskPremiumDetailVOList)})};p(i.riskPremiumDetailVOList);const _=ft({tenantId:e,riskList:f,riskPremium:m,productId:(v=D.value)==null?void 0:v.id});ke(_)};Ce(()=>I,()=>{D.value&&W.value&&ce()&&me()},{deep:!0,immediate:!0});const Ue=async()=>{var m,p,_,v,F,n,c;const f=ut({productCode:w,withInsureInfo:!0}),i=at({productCode:w});if(await Promise.all([f,i]).then(([g,E])=>{g.code==="10000"&&(D.value=g.data),E.code==="10000"&&(W.value=E.data)}),s){const g=await lt({id:s,tenantId:e}),{code:E,data:T}=g;if(E==="10000"){const{tenantOrderHolder:S,tenantOrderInsuredList:P,extInfo:$}=T;I.holder={certNo:S.certNo,certType:S.certType,mobile:S.mobile,name:S.name,socialFlag:le.HAS},I.insured={certNo:P==null?void 0:P[0].certNo,certType:(m=P[0])==null?void 0:m.certType,name:(p=P[0])==null?void 0:p.name,socialFlag:(v=(_=P[0])==null?void 0:_.extInfo)==null?void 0:v.hasSocialInsurance,relationToHolder:(F=P[0])==null?void 0:F.relationToHolder},I.paymentMethod=$.extraInfo.paymentMethod,L.value=(c=(n=P[0])==null?void 0:n.tenantOrderProductList[0])==null?void 0:c.premium,I.renewalDK=$.extraInfo.renewalDK==="Y",(T.orderStatus===ae.ACCEPT_POLICY||T.orderStatus===ae.PAYMENT_SUCCESS)&&je.confirm({title:"\u6807\u9898",message:"\u5347\u7EA7\u4FDD\u969C\u5417"}).then(()=>{u.push({path:"/activity/guaranteeUpgrade",query:U(x({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify(U(x({},C),{orderId:s}))})})}).catch(()=>{})}}else ce()&&me()};return We(()=>{Ue(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(f,i)=>{var v,F;const m=O("ProPDFviewer"),p=O("van-button"),_=Je("dompurify-html");return h(),V(M,null,[d("div",null,[d("div",Nt,[d("div",St,[d("img",{class:"logo",src:t(mt)},null,8,Ot),d("img",{src:(F=(v=D.value)==null?void 0:v.tenantProductInsureVO)==null?void 0:F.banner[0],class:"banner"},null,8,kt),d("div",Lt,[r(j,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:Ne},{default:b(()=>{var n,c,g;return[D.value&&((n=D.value)==null?void 0:n.tenantProductInsureVO)?(h(),V("div",xt,[(h(!0),V(M,null,Y((g=(c=t(J))==null?void 0:c[de.value])==null?void 0:g.titleAndDescVOS,(E,T)=>(h(),K(tt,{key:T,class:"guarantee-item",title:E.title,content:E.desc,border:!1},null,8,["title","content"]))),128))])):G("",!0)]}),_:1})])]),r(ve,{class:"tabs",list:Be.value,sticky:"",scrollspy:""},{tab1:b(()=>[r(Bt,{ref_key:"formRef",ref:ie,"holder-disable":Te,disable:Ae,"form-info":t(I),premium:L.value},null,8,["form-info","premium"])]),tab2:b(()=>{var n,c;return[d("div",Ut,[(h(!0),V(M,null,Y(((c=(n=D.value)==null?void 0:n.tenantProductInsureVO)==null?void 0:c.spec)||[],(g,E)=>(h(),V("img",{key:E,src:g,class:"detail-img"},null,8,Mt))),128)),r(j,{title:"\u4EA7\u54C1\u8D44\u6599"},{subTitle:b(()=>[Ht]),default:b(()=>{var g,E;return[d("div",Rt,[qt,(h(!0),V(M,null,Y(((E=(g=D.value)==null?void 0:g.tenantProductInsureVO)==null?void 0:E.attachmentVOList)||[],(T,S)=>(h(),K(m,{key:S,class:"file-name",title:`\u300A${T.attachmentName}\u300B`,content:T.attachmentUri,type:"pdf"},{default:b(()=>{var P,$;return[S!==((($=(P=D.value)==null?void 0:P.tenantProductInsureVO)==null?void 0:$.attachmentVOList)||[]).length-1?(h(),V("span",$t,"\u3001")):G("",!0)]}),_:2},1032,["title","content"]))),128))])]}),_:1})])]}),tab3:b(()=>[r(j,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:b(()=>{var n,c;return[r(ot,{list:(c=(n=D.value)==null?void 0:n.tenantProductInsureVO)==null?void 0:c.settlementProcessList},null,8,["list"])]}),_:1}),r(j,{title:"\u5E38\u89C1\u95EE\u9898"},{default:b(()=>{var n,c;return[r(Et,{list:(c=(n=D.value)==null?void 0:n.tenantProductInsureVO)==null?void 0:c.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),d("div",Yt,[d("div",Kt,[zt,d("span",null,"\uFFE5"+A(t(Ze)(L.value))+"/\u6708",1)]),r(p,{type:"primary",class:"right",onClick:xe},{default:b(()=>[z(A(t(s)?"\u5347\u7EA7\u4FDD\u969C":"\u7ACB\u5373\u6295\u4FDD"),1)]),_:1})])])]),r(et,{show:ee.value,"onUpdate:show":i[0]||(i[0]=n=>ee.value=n),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:b(()=>[t(J).length>1?(h(),K(ve,{key:0,list:t(J).map((n,c)=>({title:n.guaranteeType,slotName:`guarantee-${c}`})),class:"tab"},null,8,["list"])):G("",!0),d("div",Wt,[(h(!0),V(M,null,Y(t(J)[de.value].titleAndDescVOS,(n,c)=>(h(),V("div",{key:c,class:"guarantee-item"},[d("div",Jt,A(n.title),1),Ge(d("div",jt,null,512),[[_,n.content]])]))),128))])]),_:1},8,["show"])],64)}}});var uo=X(Gt,[["__scopeId","data-v-4e28f62f"]]);export{uo as default};

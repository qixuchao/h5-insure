import{_ as a,d as e,j as t,i as o,h as r,k as s,dL as l,O as n,o as d,c as u,b as i,w as c,a as p,e as m,u as v,F as f,q as N,a8 as y,m as h,p as I,aa as S,dM as C,aN as E,dU as L,ab as _,aj as A,aF as k,aG as b}from"./index-da20c37e.js";import{P as g}from"./index-a6a83fda.js";import{g as j}from"./trial-3b99aafd.js";import{I as q}from"./infoItem-0130e6d1.js";import{t as P}from"./format-31cde443.js";const T={class:"page-insure-result"},U={class:"page-insure-result-wrap"},D={class:"header"},R={class:"content"},O={class:"content-header"},w={class:"product-name"},x=(a=>(k("data-v-68302929"),a=a(),b(),a))((()=>p("span",null,"保障中",-1))),F={class:"content-list"},M={class:"footer-button"},Y=e({name:"OrderResult"});var V=a(e({...Y,setup(a){const e=t({orderNo:"",holderName:"",orderAmount:"",orderStatus:""}),k=o(),b=r(),Y=t(!1),{orderNo:V="",preview:B,saleUserId:G="",tenantId:J="",templateId:z=1}=k.query,H=t({});s((a=>e.value&&[l.SUCCESS,l.PAYMENT_SUCCESS,l.ACCEPT_POLICY].some((a=>{var t;return a===(null==(t=e.value)?void 0:t.orderStatus)}))));const K=s((a=>e.value&&[l.PAYMENT_FAILED,l.INSURER_REJECT,l.TIMEOUT,l.FAILED,l.CANCELED].some((a=>{var t;return a===(null==(t=e.value)?void 0:t.orderStatus)}))));s((()=>e.value.orderStatus===l.PAYING));const Q=()=>{b.push({path:S.orderList,query:k.query})},W=()=>{b.push({path:S.updateBankInfo,query:k.query})},X=()=>{j({orderNo:V,tenantId:J}).then((a=>{var t,o,r;const{code:s,data:l}=a;if("10000"===s){Y.value=!1;const{holder:{name:a},policyNo:s,insuredList:n,applicationReqList:d}=l;H.value=l,null==(t=l.tenantOrderPaymentInfoList)||t[0];const{productName:u,riskList:i}=(null==(r=null==(o=null==n?void 0:n[0])?void 0:o.productList)?void 0:r[0])||{};let c=d.map((a=>a.applicationNo));(null==s?void 0:s.length)&&(c=s),e.value={holderName:a,productName:u,policyList:c,validateDate:"",coverage:null==i?void 0:i[0].coverage,orderStatusDesc:C[l.orderStatus],orderStatus:l.orderStatus,orderNo:l.orderNo,orderAmount:P(l.orderAmount)}}}))},Z=()=>{E.confirm({title:"投保提示",message:"选择转批扣后将对该笔订单进行转换批次扣款，提交后将无法操作变更卡号，再次划款",cancelButtonText:"返回重选"}).then((async()=>{const{code:a,data:e}=await L({orderNo:V,tenantId:J});"10000"===a&&X()}))};return n((()=>{B||X()})),(a,t)=>{const o=_,r=A,s=g;return d(),u("div",T,[i(o),i(s,{modelValue:v(Y),"onUpdate:modelValue":t[0]||(t[0]=a=>I(Y)?Y.value=a:null),onRefresh:X},{default:c((()=>[p("div",U,[p("div",D,m(v(H).orderStatusDesc),1),p("div",R,[p("div",O,[p("h4",w,m(v(e).productName),1),x]),i(q,{label:"投保人:",content:v(e).holderName,line:""},null,8,["content"]),i(q,{label:"投/保单号:",line:""},{content:c((()=>[p("div",F,[(d(!0),u(f,null,N(v(e).policyList,(a=>(d(),u("p",{key:a},m(a),1)))),128))])])),_:1}),i(q,{label:"保费:",content:v(e).orderAmount,line:""},null,8,["content"])]),p("div",M,[v(K)?(d(),u(f,{key:0},[i(r,{type:"primary",plain:"",onClick:W},{default:c((()=>[y("变更卡号")])),_:1}),i(r,{type:"primary",onClick:Z},{default:c((()=>[y("线下扣款")])),_:1})],64)):(d(),h(r,{key:1,block:"",type:"primary",onClick:Q},{default:c((()=>[y("确定")])),_:1}))])])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-68302929"]]);export{V as default};

import{z as e,d as t,au as a,b as n,c as r,x as o,Z as d,i as s,h as l,f as i,I as u,e as c,w as p,W as v,X as m,Y as f,a8 as y,a7 as I,u as C,a as k,r as b,$ as g,k as _,B as L,a4 as O,s as P,g as N,bx as h,D,T as S,cE as T}from"./index-3300826d.js";import{d as Y}from"./order-5ffb5e96.js";import{a as R,b as $}from"./order-1732f29e.js";import{I as j,P as x,h as E,R as G}from"./trial-28355e02.js";import{p as A}from"./pageJump-ce50f880.js";import{T as H}from"./constant-c3f28a3b.js";import"./pdfh5-008ca364.js";const M={class:"com-field-info"},U={key:0,class:"label"},W={class:"content"};var q=e(t({__name:"fieldInfo",props:{label:{type:String,default:""},content:{type:String,default:""}},setup(e){const t=a();return(a,u)=>(n(),r("div",M,[e.label?(n(),r("div",U,o(e.label),1)):d("",!0),s(t).label?l(a.$slots,"label",{key:1},void 0,!0):d("",!0),i("div",W,o(e.content),1),s(t).content?l(a.$slots,"content",{key:2},void 0,!0):d("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const w={class:"com-insured-part-wrapper"},B={class:"content-wrapper"},F={class:"product-name"},X={class:"risk-item"};var Z=e(t({__name:"InsuredPart",props:{productData:{default:()=>({})}},setup(e){const t=e,a=u((()=>{var e,a;const n={riderRiskList:[],amount:0},r=null==(e=t.productData)?void 0:e.tenantOrderRiskList.find((e=>e.riskType===G.MAIN_RISK));return Object.assign(n,r),null==(a=t.productData)||a.tenantOrderRiskList.forEach((e=>{n.riderRiskList.push(e.riskName||"")})),n})),d=(e,t)=>-1!==t.indexOf("$")?t.replace("$",`${e}`):`${e||""}${t}`;return(t,l)=>{const u=y,C=I;return n(),r("div",w,[c(C,{title:"保障信息"},{default:p((()=>[i("div",B,[i("div",F,o(e.productData.productName),1),i("div",X,[c(u,{title:"保障期间",content:d(s(a).insurancePeriodValue,s(j)[s(a).insurancePeriodType])},null,8,["content"]),c(u,{title:"交费期间",content:d(s(a).paymentPeriod,s(x)[s(a).paymentPeriodType])},null,8,["content"]),c(u,{title:"交费方式",content:s(E)[s(a).paymentFrequency]},null,8,["content"]),(n(!0),r(v,null,m(s(a).riderRiskList,((e,t)=>(n(),f(u,{key:t,title:e,content:"投保"},null,8,["title"])))),128)),c(u,{title:"首期保费",class:"price",content:e.productData.premium.toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])])),_:1})])}}}),[["__scopeId","data-v-306a6e1a"]]);const z={key:0,class:"page-order-detail"},J={class:"card"},K={class:"header"},V={class:"product-name"},Q={class:"company-name"},ee={class:"status"},te={key:0,class:"footer-button"},ae={key:1,class:"footer-button"},ne={key:2,class:"footer-button"};var re=e(t({__name:"index",setup(e){const t=C(),a=k(),l=b(),{query:{orderNo:u,agentCode:y,tenantId:I,abbreviation:j,productCategory:x}}=t,E=()=>{D.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{l.value&&Y(l.value.id,l.value.orderStatus).then((e=>{const{code:t,data:a}=e;"10000"===t&&S.success("删除成功")}))}))},G=()=>{var e,t;if(!l.value)return!1;const{agencyId:n,saleChannelId:r,orderTopStatus:o}=l.value,d=null==(t=null==(e=l.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;if(!($.PENDING!==o&&$.PAYING!==o||d!==T.ZXYS&&d!==T.BWYL)){const e={[T.ZXYS]:"/internet/productDetail/package",[T.BWYL]:"/internet/productDetail"};return a.push({path:e[d],query:{productCode:d,saleChannelId:r,agentCode:y,tenantId:I,agencyCode:n,orderNo:u}}),!0}return!1},M=()=>{var e,t;if(l.value){if(G())return;const{id:a,extInfo:{templateId:n,pageCode:r},agencyId:o,venderCode:d}=l.value,s=null==(t=null==(e=l.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;A(r,{productCode:s,orderNo:u,orderId:a,agentCode:y,templateId:n,tenantId:I,productCategory:x,insurerCode:d,agencyCode:o,isFromOrderList:"1"})}},U=()=>{var e,t;if(l.value){if(G())return;const{id:a,saleUserId:n,extInfo:{templateId:r},agencyId:o,venderCode:d}=l.value,s=null==(t=null==(e=l.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;[H.FREE,H.SHORT,H.UPGRADE].includes(`${r}`),A("payInfo",{productCode:s,orderNo:u,orderId:a,saleUserId:n,templateId:r,tenantId:I,productCategory:x,insurerCode:d,agencyCode:o})}};return g((()=>{_({orderNo:u,agentCode:y,tenantId:I}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(l.value=a)}))})),(e,t)=>{const a=L,u=O("ProPageWrap");return n(),f(u,null,{default:p((()=>{var e,t,u,y,I,C,k,b,g,_,L;return[s(l)?(n(),r("div",z,[i("div",J,[c(q,null,{label:p((()=>{var e,t,a,n;return[i("div",K,[i("div",V,o(null==(a=null==(t=null==(e=s(l))?void 0:e.tenantOrderInsuredList[0])?void 0:t.tenantOrderProductList[0])?void 0:a.productName),1),i("div",Q,o(((null==(n=s(l))?void 0:n.abbreviation)||"").substring(0,6)),1)])]})),content:p((()=>{var e;return[i("div",ee,o(s(l)?s(R)[null==(e=s(l))?void 0:e.orderStatus]:""),1)]})),_:1}),c(q,{label:"投保单号",content:null==(e=s(l))?void 0:e.orderNo},null,8,["content"]),c(q,{label:"创建时间",content:s(P)(null==(t=s(l))?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),c(q,{label:"投保人",content:null==(y=null==(u=s(l))?void 0:u.tenantOrderHolder)?void 0:y.name},null,8,["content"]),(n(!0),r(v,null,m((null==(I=s(l))?void 0:I.tenantOrderInsuredList)||[],((e,t)=>(n(),f(q,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),c(Z,{"product-data":null==(b=null==(k=null==(C=s(l))?void 0:C.tenantOrderInsuredList[0])?void 0:k.tenantOrderProductList)?void 0:b[0],class:"insure-info"},null,8,["product-data"]),(null==(g=s(l))?void 0:g.orderTopStatus)===s($).PENDING?(n(),r("div",te,[c(a,{type:"primary",onClick:h(E,["stop"])},{default:p((()=>[N("删除")])),_:1},8,["onClick"]),c(a,{type:"primary",onClick:h(M,["stop"])},{default:p((()=>[N("去处理")])),_:1},8,["onClick"])])):d("",!0),(null==(_=s(l))?void 0:_.orderTopStatus)===s($).PAYING?(n(),r("div",ae,[c(a,{type:"primary",onClick:h(E,["stop"])},{default:p((()=>[N("删除")])),_:1},8,["onClick"]),c(a,{type:"primary",onClick:h(U,["stop"])},{default:p((()=>[N("去支付")])),_:1},8,["onClick"])])):d("",!0),(null==(L=s(l))?void 0:L.orderTopStatus)===s($).TIMEOUT?(n(),r("div",ne,[c(a,{type:"primary",onClick:h(E,["stop"])},{default:p((()=>[N("删除")])),_:1},8,["onClick"])])):d("",!0)])):d("",!0)]})),_:1})}}}),[["__scopeId","data-v-33eacbaa"]]);export{re as default};

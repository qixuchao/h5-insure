var qe=Object.defineProperty,Ye=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var ye=(l,c,m)=>c in l?qe(l,c,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[c]=m,ae=(l,c)=>{for(var m in c||(c={}))ze.call(c,m)&&ye(l,m,c[m]);if(ve)for(var m of ve(c))Ge.call(c,m)&&ye(l,m,c[m]);return l},ne=(l,c)=>Ye(l,Ke(c));import{g as Q,Q as Pe,E as w,y as se,j as v,n as F,z as _,J as k,p as u,L as ue,A as e,B as je,a4 as ie,a5 as de,F as O,G as R,k as $,C as H,t as x,M as Ce,_ as Qe,r as T,m as D,a9 as We,O as Je,h as Xe,af as Ze,D as et,H as tt}from"./vendor-667a94d7.js";import{_ as W,u as ot,q as Ve,a2 as he,x as re,Q as le,l as z,y as Ie,G as at,z as nt,a5 as G,a4 as j,A as rt,O as lt}from"./index-1375292c.js";import{P as st}from"./index-37a461c7.js";import{p as ut,i as it,a as dt,s as ct,u as mt,b as pt}from"./trial-64e0399c.js";import{p as _t}from"./product-c4889414.js";import{a as be,S as De,R as ft,f as ge}from"./infoCollection-242da9b6.js";import{A as vt,P as yt}from"./bankCard-b9d5732e.js";import{e as Fe,i as Ee,P as ht,I as It}from"./trial-cbf9adf3.js";import"./utils-b6782348.js";const Dt=l=>(ie("data-v-7a8bf142"),l=l(),de(),l),gt={class:"com-question-item"},Ft={class:"question"},Et=Dt(()=>_("div",{class:"icon"},k("?"),-1)),Pt={class:"title"},Ct=Q({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(l){const[c,m]=Pe(!1),E=w(),o=()=>{m()},V=se(()=>c.value?ot(E.value):0);return(C,a)=>(v(),F("div",gt,[_("div",Ft,[Et,_("div",Pt,k(l.question),1),u(Ve,{name:"down",class:ue(["arrow-icon",{show:e(c)}]),onClick:o},null,8,["class"])]),_("div",{ref_key:"answerDom",ref:E,class:"answer",style:je({height:`${e(V)}px`})},k(l.answer),5)]))}});var Vt=W(Ct,[["__scopeId","data-v-7a8bf142"]]);const bt={class:"com-question"},Nt=Q({props:{list:{type:Array,default:()=>[]}},setup(l){const c=l,[m,E]=Pe(!1),o=()=>{E()},V=se(()=>c.list.length<=4||m.value?c.list:c.list.slice(0,4));return(C,a)=>(v(),F("div",bt,[(v(!0),F(O,null,R(e(V),(P,A)=>(v(),$(Vt,{key:A,question:P.title,answer:P.desc},null,8,["question","answer"]))),128)),l.list.length>4?(v(),F("div",{key:0,class:"show-more",onClick:o},[H(k(e(m)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),u(Ve,{name:"down",class:ue(["icon",{showMore:e(m)}])},null,8,["class"])])):x("",!0)]))}});var wt=W(Nt,[["__scopeId","data-v-22ede01f"]]);const ce=l=>(ie("data-v-2c1cf284"),l=l(),de(),l),Tt=ce(()=>_("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),At=ce(()=>_("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),Bt=ce(()=>_("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),Ot=H("\u514D\u8D39\u5F00\u901A"),kt=Q({props:{disabled:{type:Boolean,default:!1},formInfo:{default:()=>({})}},setup(l,{expose:c}){const m=l,E=w({}),o=Ce({disabled:m.disabled,formInfo:m.formInfo}),V=()=>new Promise((C,a)=>{E==null||E.value.validate().then(()=>{C("")},()=>{a()})});return Qe(()=>o.formInfo.insured.relationToHolder,(C,a)=>{C!==a&&(C.toString()===be.SELF?o.formInfo.insured={certNo:o.formInfo.holder.certNo,name:o.formInfo.holder.name,socialFlag:o.formInfo.holder.socialFlag,relationToHolder:C}:o.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:C})}),c({validateForm:V}),(C,a)=>{const P=T("ProField"),A=T("ProRadioButton"),J=T("ProCell"),q=T("ProPicker"),X=T("van-checkbox"),Y=T("ProForm");return v(),$(Y,{ref_key:"formRef",ref:E},{default:D(()=>[_("div",null,[Tt,u(P,{modelValue:e(o).formInfo.holder.name,"onUpdate:modelValue":a[0]||(a[0]=s=>e(o).formInfo.holder.name=s),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D","is-view":m.disabled},null,8,["modelValue","is-view"]),u(P,{modelValue:e(o).formInfo.holder.certNo,"onUpdate:modelValue":a[1]||(a[1]=s=>e(o).formInfo.holder.certNo=s),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","is-view":m.disabled,"validate-type":[e(he).ID_CARD]},null,8,["modelValue","is-view","validate-type"]),u(P,{modelValue:e(o).formInfo.holder.mobile,"onUpdate:modelValue":a[2]||(a[2]=s=>e(o).formInfo.holder.mobile=s),label:"\u624B\u673A\u53F7",name:"mobile","is-view":m.disabled,required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue","is-view"]),u(P,{modelValue:e(o).formInfo.holder.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=s=>e(o).formInfo.holder.socialFlag=s),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:D(()=>[u(A,{modelValue:e(o).formInfo.holder.socialFlag,"onUpdate:modelValue":a[3]||(a[3]=s=>e(o).formInfo.holder.socialFlag=s),options:e(De)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])]),u(re),_("div",null,[At,u(P,{modelValue:e(o).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[6]||(a[6]=s=>e(o).formInfo.insured.relationToHolder=s),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:D(()=>[u(A,{modelValue:e(o).formInfo.insured.relationToHolder,"onUpdate:modelValue":a[5]||(a[5]=s=>e(o).formInfo.insured.relationToHolder=s),options:e(ft)},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),u(P,{modelValue:e(o).formInfo.insured.name,"onUpdate:modelValue":a[7]||(a[7]=s=>e(o).formInfo.insured.name=s),label:"\u59D3\u540D",name:"name",required:""},null,8,["modelValue"]),u(P,{modelValue:e(o).formInfo.insured.certNo,"onUpdate:modelValue":a[8]||(a[8]=s=>e(o).formInfo.insured.certNo=s),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","validate-type":[e(he).ID_CARD]},null,8,["modelValue","validate-type"]),u(P,{modelValue:e(o).formInfo.insured.socialFlag,"onUpdate:modelValue":a[10]||(a[10]=s=>e(o).formInfo.insured.socialFlag=s),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:D(()=>[u(A,{modelValue:e(o).formInfo.insured.socialFlag,"onUpdate:modelValue":a[9]||(a[9]=s=>e(o).formInfo.insured.socialFlag=s),options:e(De)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])]),u(re),_("div",null,[Bt,u(J,{class:"pay",title:"\u6BCF\u6708\u4FDD\u8D39",content:`${e(o).formInfo.premium} /\u6708 \u517112\u671F`,border:!1},null,8,["content"]),u(q,{modelValue:e(o).formInfo.paymentMethod,"onUpdate:modelValue":a[11]||(a[11]=s=>e(o).formInfo.paymentMethod=s),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":e(vt),required:""},null,8,["modelValue","data-source"]),u(P,{label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9"},{input:D(()=>[u(X,{modelValue:e(o).formInfo.renewalDK,"onUpdate:modelValue":a[12]||(a[12]=s=>e(o).formInfo.renewalDK=s)},{default:D(()=>[Ot]),_:1},8,["modelValue"])]),_:1})]),u(re)]),_:1},512)}}});var St=W(kt,[["__scopeId","data-v-2c1cf284"]]);const Lt=l=>(ie("data-v-5a467597"),l=l(),de(),l),Ut={class:"page-product-detail"},Rt={class:"info"},Mt=["src"],xt={class:"guarantee-list"},$t={key:0,class:"plan"},Ht=["onClick"],qt={key:0,class:"basic"},Yt={class:"tab-1"},Kt=["src"],zt=Lt(()=>_("div",{class:"sub-title"},"*\u4EA7\u54C1\u8D44\u6599\u6587\u4EF6\u8BE6\u60C5\u53EF\u624B\u52A8\u653E\u5927\uFF0C\u4EE5\u4FBF\u60A8\u66F4\u6E05\u6670\u67E5\u9605\u5185\u5BB9\u3002",-1)),Gt={class:"tab-1-content"},jt=H(" \u8BF7\u67E5\u770B "),Qt={key:0,class:"dun-hao"},Wt={class:"footer-button"},Jt={class:"price"},Xt=H(" \u603B\u4FDD\u8D39"),Zt=H("\u7ACB\u5373\u6295\u4FDD"),eo={class:"guarantee-list"},to={class:"title"},oo={class:"content"},ao=Q({setup(l){const c=We(),m=Je(),{productCode:E,name:o,certNo:V,mobile:C,tenantId:a="9991000007",saleUserId:P="65434444",saleChannelId:A="123131321231",agencyId:J="3311222",orderId:q}=m.query,X=w([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),Y=w(),s=w(0),Z=w(!1),I=w(),me=w(),ee=w(),Ne=!!(o&&V&&C),n=Ce({holder:{certNo:V,certType:le.CERT,mobile:C,name:o,socialFlag:ge.HAS},insured:{certNo:V,certType:le.CERT,name:o,socialFlag:ge.HAS,relationToHolder:be.SELF},paymentMethod:yt.ALIPAY,premium:0,renewalDK:"Y"}),we=d=>{s.value=d},Te=()=>{Z.value=!0},B=se(()=>{var d,r,t,f,h,g,y;return((t=(r=(d=I.value)==null?void 0:d.tenantProductInsureVO)==null?void 0:r.guaranteeList)==null?void 0:t.length)?(h=(f=I.value)==null?void 0:f.tenantProductInsureVO)==null?void 0:h.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(y=(g=I.value)==null?void 0:g.tenantProductInsureVO)==null?void 0:y.titleAndDescVOS}]}),Ae=d=>{const r=d.find(t=>t.riskType===Fe.MAIN_RISK);return d.map(t=>{var _e;const{riskInsureLimitVO:f,riskCategory:h,id:g,riskType:y,riskName:i,riskCode:p,riskLiabilityInfoVOList:b,riskCalcMethodInfoVO:N}=t,{insurancePeriodType:M,insurancePeriodValueList:S,paymentFrequencyList:L,paymentPeriodValueList:U,paymentPeriodType:no,annuityDrawFrequencyList:te,annuityDrawValueList:oe,insurancePeriodRule:Me,paymentPeriodRule:xe}=f,{fixedAmount:$e,minCopy:He}=N,K={amount:$e,riskCode:p,riskId:g,riskName:i,chargePeriod:U==null?void 0:U[0],annuityDrawDate:oe==null?void 0:oe[0],riskType:y,annuityDrawFrequency:te==null?void 0:te[0],copy:He,coveragePeriod:S==null?void 0:S[0],insuredCode:(_e=I.value)==null?void 0:_e.insurerCode,liabilityVOList:b.filter(fe=>fe.optionalFlag===1&&fe.liabilityCode!=="FXG086"),paymentFrequency:L==null?void 0:L[0],riskCategory:h};return y===Fe.MAIN_RISK?K:(Me===Ee.ONE_YEAR&&(K.coveragePeriod="year_1"),xe===Ee.ONE_YEAR&&(K.chargePeriod="year_1"),ne(ae({},K),{mainRiskId:r==null?void 0:r.id,mainRiskCode:r==null?void 0:r.riskCode}))})},Be=async d=>{const r=await mt(d),{code:t}=r;if(t==="10000"){const f=await pt({id:d.id,tenantId:a}),{data:h}=f;window.location.href=h}},Oe=(d,r)=>d.map(t=>{var h,g;return{tenantId:a,amountUnit:1,annuityDrawFrequency:t.annuityDrawDate,annuityDrawType:t.annuityDrawType,paymentFrequency:t.paymentFrequency,paymentPeriod:t.chargePeriod.split("_")[1],paymentPeriodType:ht[t.chargePeriod.split("_")[0]],insurancePeriodType:It[t.coveragePeriod==="to_life"?"to_life":t.coveragePeriod.split("_")[0]],insurancePeriodValue:Number.isNaN(+t.coveragePeriod.split("_")[1])?0:t.coveragePeriod.split("_")[1],riskCode:t.riskCode,riskType:t.riskType,extInfo:{riskId:t.riskId,copy:t.copy},initialPremium:(h=r[t.riskCode])==null?void 0:h.premium,liabilityDetails:t.liabilityVOList.map(y=>({liabilityCode:y.liabilityCode,liabilityName:y.liabilityName,refundMethod:y.liabilityAttributeValue})),productId:(g=I.value)==null?void 0:g.id,currantAmount:3e4,initAmount:3e4}}),ke=d=>`${lt}/activity/guaranteeUpgrade?tenantId=${a}&productCode=${E}&orderId=${d}`,Se=d=>{var t,f;return{tenantId:a,venderCode:(t=I.value)==null?void 0:t.insurerCode,orderDataSource:"1",saleChannelId:A,saleUserId:P,agencyId:J,tenantOrderHolder:{tenantId:a,name:n.holder.name,certType:1,certNo:n.holder.certNo,mobile:n.holder.mobile,birthday:G(n.holder.certNo),gender:j(n.holder.certNo)},extInfo:{extraInfo:{renewalDK:n.renewalDK||"N",paymentMethod:n.paymentMethod,jumpUrl:""}},tenantOrderInsuredList:[{tenantId:a,relationToHolder:n.insured.relationToHolder,insuredBeneficiaryType:n.insured.relationToHolder,name:n.insured.name,certType:le.CERT,certNo:n.insured.certNo,birthday:G(n.insured.certNo),gender:j(n.insured.certNo),extInfo:{hasSocialInsurance:n.insured.socialFlag},tenantOrderProductList:[{tenantId:a,productCode:E,productName:(f=I.value)==null?void 0:f.productName,premium:ee.value,tenantOrderRiskList:d}]}]}},Le=async d=>{const r=Se(d),t=await ct(r),{code:f,data:h}=t;if(f==="10000"){const g=ke(h.data);Be(ne(ae({id:h.data},r),{extInfo:{extraInfo:{renewalDK:n.renewalDK||"N",paymentMethod:n.paymentMethod,jumpUrl:g}}}))}},pe=()=>new Promise(d=>{var r,t;(t=(r=Y.value)==null?void 0:r.validateForm)==null||t.call(r).then(async()=>{var p;const f=Ae(me.value.productRiskVoList[0].riskDetailVOList),h={holder:{personVO:{birthday:G(n.holder.certNo),certType:n.holder.certType,certNo:n.holder.certNo,gender:Number(j(n.holder.certNo)),mobile:n.holder.mobile,name:n.holder.name,socialFlag:n.holder.socialFlag}},insuredVOList:[{insuredCode:(p=I.value)==null?void 0:p.insurerCode,relationToHolder:n.insured.relationToHolder,personVO:{birthday:G(n.insured.certNo),certType:n.insured.certType,certNo:n.insured.certNo,gender:Number(j(n.insured.certNo)),name:n.insured.name,socialFlag:n.insured.socialFlag},productPlanVOList:[{riskVOList:f}]}],productCode:E,tenantId:a},g=await ut(h),{code:y,data:i}=g;y==="10000"&&(ee.value=i.premium,n.premium=i.premium,d({condition:f,data:i}))})}),Ue=async()=>{const{condition:d,data:r}=await pe();console.log(d,r);const t={},f=(g=[])=>{(g||[]).forEach(y=>{var i;t[y.riskCode]=y,((i=y.riskPremiumDetailVOList)==null?void 0:i.length)&&f(y.riskPremiumDetailVOList)})};f(r.riskPremiumDetailVOList);const h=Oe(d,t);Le(h)},Re=async()=>{const d=_t({productCode:E,withInsureInfo:!0}),r=it({productCode:E});if(await Promise.all([d,r]).then(([t,f])=>{t.code==="10000"&&(I.value=t.data),f.code==="10000"&&(me.value=f.data)}),pe(),q){const t=await dt({id:q,tenantId:a});t.code==="10000"&&(console.log(t.data.orderStatus),t.data.orderStatus==="acceptPolicy"&&et.confirm({title:"\u6807\u9898",message:"\u5347\u7EA7\u4FDD\u969C"}).then(()=>{c.push({path:"/activity/productDetail",query:{productCode:"BWYL2022",name:o,certNo:V,mobile:C}})}).catch(()=>{}))}};return Xe(()=>{Re(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(d,r)=>{var g,y;const t=T("ProPDFviewer"),f=T("van-button"),h=Ze("dompurify-html");return v(),F(O,null,[_("div",null,[_("div",Ut,[_("div",Rt,[_("img",{src:(y=(g=I.value)==null?void 0:g.tenantProductInsureVO)==null?void 0:y.banner[0],class:"banner"},null,8,Mt),_("div",xt,[e(B).length>1?(v(),F("div",$t,[(v(!0),F(O,null,R(e(B),(i,p)=>(v(),F("div",{key:p,class:ue(["plan-item",`length-${e(B).length}`,{active:s.value===p}]),onClick:b=>we(p)},k(i),11,Ht))),128))])):x("",!0),u(z,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:Te},{default:D(()=>{var i,p,b;return[I.value&&((i=I.value)==null?void 0:i.tenantProductInsureVO)?(v(),F("div",qt,[(v(!0),F(O,null,R((b=(p=e(B))==null?void 0:p[s.value])==null?void 0:b.titleAndDescVOS,(N,M)=>(v(),$(rt,{key:M,class:"guarantee-item",title:N.title,content:N.desc,border:!1},null,8,["title","content"]))),128))])):x("",!0)]}),_:1})])]),u(Ie,{class:"tabs",list:X.value,sticky:"",scrollspy:""},{tab1:D(()=>[u(St,{ref_key:"formRef",ref:Y,disabled:Ne,"form-info":e(n)},null,8,["form-info"])]),tab2:D(()=>{var i,p;return[_("div",Yt,[(v(!0),F(O,null,R(((p=(i=I.value)==null?void 0:i.tenantProductInsureVO)==null?void 0:p.spec)||[],(b,N)=>(v(),F("img",{key:N,src:b,class:"detail-img"},null,8,Kt))),128)),u(z,{title:"\u4EA7\u54C1\u8D44\u6599"},{subTitle:D(()=>[zt]),default:D(()=>{var b,N;return[_("div",Gt,[jt,(v(!0),F(O,null,R(((N=(b=I.value)==null?void 0:b.tenantProductInsureVO)==null?void 0:N.attachmentVOList)||[],(M,S)=>(v(),$(t,{key:S,class:"file-name",title:`\u300A${M.attachmentName}\u300B`,content:M.attachmentUri,type:"pdf"},{default:D(()=>{var L,U;return[S!==(((U=(L=I.value)==null?void 0:L.tenantProductInsureVO)==null?void 0:U.attachmentVOList)||[]).length-1?(v(),F("span",Qt,"\u3001")):x("",!0)]}),_:2},1032,["title","content"]))),128))])]}),_:1})])]}),tab3:D(()=>[u(z,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:D(()=>{var i,p;return[u(st,{list:(p=(i=I.value)==null?void 0:i.tenantProductInsureVO)==null?void 0:p.settlementProcessList},null,8,["list"])]}),_:1}),u(z,{title:"\u5E38\u89C1\u95EE\u9898"},{default:D(()=>{var i,p;return[u(wt,{list:(p=(i=I.value)==null?void 0:i.tenantProductInsureVO)==null?void 0:p.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),_("div",Wt,[_("div",Jt,[Xt,_("span",null,"\uFFE5"+k(e(at)(ee.value))+"/\u6708",1)]),u(f,{type:"primary",class:"right",onClick:Ue},{default:D(()=>[Zt]),_:1})])])]),u(nt,{show:Z.value,"onUpdate:show":r[0]||(r[0]=i=>Z.value=i),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:D(()=>[e(B).length>1?(v(),$(Ie,{key:0,list:e(B).map((i,p)=>({title:i.guaranteeType,slotName:`guarantee-${p}`})),class:"tab"},null,8,["list"])):x("",!0),_("div",eo,[(v(!0),F(O,null,R(e(B)[s.value].titleAndDescVOS,(i,p)=>(v(),F("div",{key:p,class:"guarantee-item"},[_("div",to,k(i.title),1),tt(_("div",oo,null,512),[[h,i.content]])]))),128))])]),_:1},8,["show"])],64)}}});var vo=W(ao,[["__scopeId","data-v-5a467597"]]);export{vo as default};

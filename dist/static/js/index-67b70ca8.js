import{d as e,a4 as a,a5 as l,h as n,i as t,j as i,k as o,A as s,a6 as d,G as r,a7 as u,l as c,o as v,c as p,u as _,b as I,F as m,a as f,p as C,f as O,w as b,a8 as h,q as y,a9 as g,aa as L,ab as j,ac as k}from"./index-e5e6a3c6.js";import{i as E,q as A,s as T}from"./trial-225bc6c3.js";import{a as w,b as P}from"./product-24a5e2b1.js";import{_ as x}from"./TrialButton-ccc16542.js";import{q as S}from"./createProposal-5bca1c65.js";import{u as N}from"./useOrder-acb4a9a9.js";import{p as R,d as V}from"./utils-5942b81a.js";import"./index-57238a19.js";import"./format-31cde443.js";import"./utils-19cb7a72.js";import"./infoCollection-4bd4d253.js";import"./trial-7199215b.js";const B={key:0},F={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},D={class:"info"},U={key:1,class:"preview-placeholder"},q=f("br",null,null,-1),G=f("div",{id:"insureButton"},null,-1),M=f("div",{id:"xinaoDialog"},null,-1),z=e({name:"InsuranceLong"}),H=e({...z,setup(e){const z=a((()=>l((()=>import("./index-036b02c9.js")),["static/js/index-036b02c9.js","static/css/index-c23f272e.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css"]))),H=a((()=>l((()=>import("./index-4dbafe65.js")),["static/js/index-4dbafe65.js","static/css/index-79104747.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css","static/js/infoCollection-4bd4d253.js"]))),J=a((()=>l((()=>import("./index-4c3b6a10.js")),["static/js/index-4c3b6a10.js","static/css/index-491cbbd3.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css"])));a((()=>l((()=>import("./index-de96e263.js")),["static/js/index-de96e263.js","static/css/index-50785b3e.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css","static/js/cloneDeep-dbcdde05.js","static/js/TrialButton-ccc16542.js","static/css/TrialButton-dea42d8e.css","static/js/index-57238a19.js","static/css/index-bbfdd7ec.css","static/js/format-31cde443.js","static/js/useOrder-acb4a9a9.js"])));const W=a((()=>l((()=>import("./index-3f5eed12.js")),["static/js/index-3f5eed12.js","static/css/index-ebb5282b.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css"]))),X=a((()=>l((()=>import("./Video-d0394d47.js")),["static/js/Video-d0394d47.js","static/css/Video-20262b6f.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css"]))),Y=a((()=>l((()=>import("./index-a8e18119.js")),["static/js/index-a8e18119.js","static/css/index-a34f0b1b.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css","static/js/jsbridgePromise-1a7f0ae2.js","static/js/utils-19cb7a72.js","static/js/infoCollection-4bd4d253.js","static/js/trial-7199215b.js"]))),$=a((()=>l((()=>import("./index-0905f3e2.js")),["static/js/index-0905f3e2.js","static/css/index-b01c516e.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css","static/js/product-24a5e2b1.js","static/js/useThread-637a02aa.js","static/js/jsbridgePromise-1a7f0ae2.js"]))),K=a((()=>l((()=>import("./index-2868f638.js")),["static/js/index-2868f638.js","static/css/index-fa4edf2a.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css","static/js/theme-94cf7d00.js","static/js/index-57238a19.js","static/css/index-bbfdd7ec.css","static/js/utils-19cb7a72.js","static/js/infoCollection-4bd4d253.js","static/js/trial-7199215b.js"]))),Q=a((()=>l((()=>import("./index-694f0849.js")),["static/js/index-694f0849.js","static/css/index-eabeb59f.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css"]))),Z=a((()=>l((()=>import("./index-e5083c7c.js")),["static/js/index-e5083c7c.js","static/css/index-bf024e9b.css","static/js/index-e5e6a3c6.js","static/css/index-972c27e5.css"]))),ee=n(),ae=t(),{productCode:le="",tenantId:ne,agentCode:te="",agencyCode:ie,saleChannelId:oe,proposalId:se,proposalInsuredId:de,extraInfo:re,orderNo:ue,insurerCode:ce,preview:ve,trialPreview:pe}=ae.query;let _e={};try{_e=JSON.parse(decodeURIComponent(re))}catch(ze){}const{openId:Ie,saTenantId:me=""}=_e;i();const fe=i(),Ce=i(),Oe=i(!1),be=i({}),he=i({}),ye=i(!1),ge=i(0),Le=i(!1);i({});const je=i(!0);i(!0);const ke=i(!0),Ee=i(""),Ae=i({}),Te=i({}),we=i([]),Pe=i({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),xe=i({});o((()=>!!ve||!!pe));const Se=o((()=>!!pe));i();const Ne=()=>{g("premiumTrial",ae.query)},Re=N(),Ve=i(!1);s((()=>xe.value.planCode),(e=>{Ae.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const Be=()=>{fe.value.handleClickTab()("insureButton")};i(""),i(0);const Fe=e=>{Ae.value=(he.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))},De=()=>{ye.value=!1,je.value=!0},Ue=()=>{ye.value=!1,je.value=!0},qe=i([]),Ge=async()=>{var e,a;const{code:l,data:n}=await A({calcProductFactorList:[{productCode:le}]});if("10000"===l){Object.assign(Re.value,n);(e=>{P(e).then((({code:e,data:a})=>{if("10000"===e){const{productMaterialList:e,riskMaterialList:l}=V(a);qe.value=e.concat(l)}}))})(R(null==(a=null==(e=n.insuredList)?void 0:e[0])?void 0:a.productList))}},Me=async()=>{Re.value.extInfo&&(Re.value.extInfo.iseeBizNo=Ee.value);const{code:e,data:a}=await T(Re.value);"10000"===e&&ee.push({path:L.questionNotice,query:{...ae.query,orderNo:a}})};return s((()=>Ae.value),(()=>{const{planCode:e,oilPackageProductVOList:a,insureProductRiskVOList:l}=Ae.value;xe.value.planCode=e,Te.value=(l||[]).find((e=>e.mainRiskFlag===d.YES))}),{deep:!0,immediate:!0}),r((()=>{u(Ce,(([{isIntersecting:e}],a)=>{Oe.value=!0}))})),c((()=>{ke.value=!0,se||Ge(),(async()=>{!Se.value&&w({productCode:le}).then((({data:e,code:a})=>{if("10000"===a){be.value=e;const{wxShareConfig:a,showWXShare:l,title:n,desc:t,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};l?Object.assign(Pe.value,{...a,imgUrl:a.image,isShare:l}):Object.assign(Pe.value,{title:n,desc:t,imgUrl:i,isShare:l})}})),ue||se||(Ve.value=!0),se&&S({id:se,tenantId:me||ne}).then((({code:e,data:a})=>{if("10000"===e){const{holder:e,insuredList:l}=a,n=(le||"").split(",");Object.assign(Re.value,{renewFlag:"",holder:e,tenantId:ne,proposalId:se,insuredList:(l||[]).filter((e=>e.id===+de)).map((e=>({...e,relationToHolder:null,productList:e.productList.filter((e=>n.includes(e.productCode)))})))}),Ve.value=!0}})),await E({productCode:le,isTenant:!1}).then((({data:e,code:a})=>{var l;"10000"===a&&(Oe.value=!0,Le.value=!0,he.value=e,Ae.value=null==(l=e.productPlanInsureVOList)?void 0:l[0],we.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),ke.value=!1})(),setTimeout((async()=>{Ee.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var l,n,t,i,o,s,d,r,u,c,g,L,E,A,T,w,P,S,N,R;const V=j,ee=k;return v(),p(m,null,[_(ke)?(v(),p("div",B)):(v(),p("div",F,[I(V),_(Se)?(v(),p("div",U,[h("当前页面仅用于保费试算预览"),q,h("不展示其他产品相关配置信息")])):(v(),p(m,{key:0},[f("div",D,[1==(null==(n=null==(l=_(be))?void 0:l.BASIC_INFO)?void 0:n.bannerType)&&(null==(i=null==(t=_(be))?void 0:t.BASIC_INFO)?void 0:i.banner.length)?(v(),C(_(J),{key:0,"data-skeleton-type":"img",images:null==(s=null==(o=_(be))?void 0:o.BASIC_INFO)?void 0:s.banner},null,8,["images"])):O("",!0),2==(null==(r=null==(d=_(be))?void 0:d.BASIC_INFO)?void 0:r.bannerType)&&(null==(c=null==(u=_(be))?void 0:u.BASIC_INFO)?void 0:c.video.length)?(v(),C(_(X),{key:1,"data-skeleton-type":"img",src:null==(g=_(be))?void 0:g.BASIC_INFO.video[0]},null,8,["src"])):O("",!0),(null==(A=null==(E=null==(L=_(be))?void 0:L.BASIC_INFO)?void 0:E.bannerMove)?void 0:A.length)?(v(),C(_(J),{key:2,url:null==(P=null==(w=null==(T=_(be))?void 0:T.BASIC_INFO)?void 0:w.bannerMove)?void 0:P[0],onClick:Be},null,8,["url"])):O("",!0),f("div",{ref_key:"observeRef",ref:Ce},null,512)]),I(_(z),{"data-source":null==(S=_(be))?void 0:S.BASIC_INFO},null,8,["data-source"]),(null==(N=_(be))?void 0:N.GUARANTEE)?(v(),C(_(Y),{key:0,"show-service-config":"","data-source":_(be),"plan-list":_(we),onUpdateActivePlan:Fe},null,8,["data-source","plan-list"])):O("",!0),f("div",{class:"trial-text-btn",onClick:Ne},"算一算保费"),I(_(W),{"data-source":null==(R=_(be))?void 0:R.ISSUE_CONDITION},null,8,["data-source"]),I(_(H),{ref_key:"detailScrollRef",ref:fe,"data-source":_(be)},null,8,["data-source"]),I(ee,null,{default:b((()=>{var e,a,l;return[(null==(e=_(be).SIGNATURE)?void 0:e.inscribedContent)?(v(),C(_(Q),{key:0,"inscribed-content":null==(l=null==(a=_(be))?void 0:a.SIGNATURE)?void 0:l.inscribedContent},null,8,["inscribed-content"])):O("",!0)]})),_:1}),I(ee,null,{default:b((()=>{var e;return[(null==(e=_(qe))?void 0:e.length)?(v(),C(_(Z),{key:0,"attachment-list":_(qe),"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>(e=>{ge.value=e,ye.value=!0})(e))},null,8,["attachment-list"])):O("",!0)]})),_:1})],64)),G,I(x,{onHandleClick:Me})])),I(ee,null,{default:b((()=>[_(Le)&&!_(Se)?(v(),C(_($),{key:0,"product-detail":_(be)},null,8,["product-detail"])):O("",!0)])),_:1}),M,I(ee,null,{default:b((()=>[_(ye)?(v(),C(_(K),{key:0,show:_(ye),"onUpdate:show":a[1]||(a[1]=e=>y(ye)?ye.value=e:null),"content-list":_(je)?_(qe):[],"is-only-view":_(je),"active-index":_(ge),text:_(je)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,onSubmit:De,onOnCloseFilePreviewByMask:Ue},null,8,["show","content-list","is-only-view","active-index","text"])):O("",!0)])),_:1})],64)}}});export{H as default};

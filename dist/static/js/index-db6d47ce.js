import{d as e,u as n,r as o,A as s,a6 as i,L as t,Z as a,cf as r,b as l,c as u,e as d,w as c,f as p,i as f,h as g,aA as m,j as v,E as C,a0 as y,$ as w,G as h,W as k,B as b,a$ as R,_}from"./index-601e1bf6.js";import{b as I}from"./product-5e5ad98f.js";import{u as L}from"./useThread-c502137a.js";const S={key:0,class:"header"},j=["src"],x={key:1,class:"statement up"},T={key:3,class:"statement"},U={class:"footer"},E={key:0},A={class:"review-pdf"},D=e({name:"preNotice"});var N=h(e({...D,props:{productDetail:{default:()=>({})}},setup(e){const h=e,D=n(),{tenantId:N="",productCode:O,preview:$}=D.query,q=o(),B=s({insureConfig:{logoLocation:void 0,logoUrl:"",readingReminder:"",acceptReminder:"",readingSeconds:0,buttonTitle:"我知道了"}}),G=o(!1),P=o(!1),W=new i({source:"sessionStorage"});let Z;const z=o({title:"",link:""}),F=o(),H=t((()=>{if(z.value.link){const e=(z.value.link||"").split("?"),n=(e[0]||"").substr(e[0].lastIndexOf(".")+1);return console.log("urlList",n),"pdf"===n?"pdf":"picture"}return"link"})),J=()=>{G.value=!1};return a((()=>{!$&&(async()=>{const{code:e,data:n}=await I({insureCode:h.productDetail.insurerCode,productCode:O,tenantId:N});"10000"===e&&(B.insureConfig=n,F.value=B.insureConfig.readingSeconds||0,Z=L({start:()=>{console.log("开始轮询"),F.value-=1},stop:()=>{console.log("结束轮询"),W.set("PRENOTICE-isShow","1")},time:1e3,number:B.insureConfig.readingSeconds||0}),k((()=>{Z.run()}))),G.value=!0})()})),(e,n)=>{var o;const s=b,i=R,t=_,a=r("dompurify-html");return l(),u(w,null,[d(i,{class:"pre-notice-wrap",show:p(G),closeable:!1,height:"auto",style:{"padding-bottom":"30px"}},{default:c((()=>[p(B).insureConfig.logoUrl?(l(),u("div",S,[f("img",{src:p(B).insureConfig.logoUrl},null,8,j)])):g("",!0),1===p(B).insureConfig.logoLocation&&p(B).insureConfig.acceptReminder?m((l(),u("div",x,null,512)),[[a,p(B).insureConfig.acceptReminder]]):g("",!0),p(B).insureConfig.readingReminder?(l(),u("div",{key:2,ref_key:"noticeRef",ref:q,class:"content"},[m(f("div",null,null,512),[[a,p(B).insureConfig.readingReminder]])],512)):g("",!0),2===p(B).insureConfig.logoLocation&&p(B).insureConfig.acceptReminder?m((l(),u("div",T,null,512)),[[a,p(B).insureConfig.acceptReminder]]):g("",!0),f("div",U,[d(s,{type:"primary",block:"",round:"",onClick:J},{default:c((()=>[v(C(p(B).insureConfig.buttonTitle)+" ",1),p(F)?(l(),u("span",E,C(p(F))+"s",1)):g("",!0)])),_:1})])])),_:1},8,["show"]),d(i,{show:p(P),"onUpdate:show":n[0]||(n[0]=e=>y(P)?P.value=e:null),class:"pre-notice-wrap",title:null==(o=p(z))?void 0:o.title,position:"bottom",style:{overflow:"hidden"}},{default:c((()=>{var e;return[f("div",A,[d(t,{content:null==(e=p(z))?void 0:e.link,type:p(H)},null,8,["content","type"])])]})),_:1},8,["show","title"])],64)}}}),[["__scopeId","data-v-6a828666"]]);export{N as default};

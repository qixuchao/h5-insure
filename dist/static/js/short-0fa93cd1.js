import{_ as e,d as a,bX as t,g as l,r as n,E as s,an as o,S as i,z as r,c as d,h as c,j as u,F as p,i as v,L as m,t as f,k as h,e as y,n as g,f as A,V as C,a2 as _,w as I,a7 as b,A as k,a3 as L,a5 as O,a8 as x,X as E,Y as T,m as w,ap as S,au as P,bY as R,bZ as D,bp as N,bt as F,c7 as j,bk as V,I as U,a as H,a9 as B,c8 as M,b_ as q,u as z,J as G,b3 as W,aE as $,H as Q,ah as Y,G as J,bR as Z,T as X,aj as K,c0 as ee,c9 as ae,bT as te,c1 as le}from"./index-c6f4364a.js";import{i as ne,b as se,p as oe,g as ie}from"./trial-03636d29.js";import{b as re,c as de}from"./product-ee89a227.js";import{n as ce}from"./nextStep-2b0fbf3a.js";import{g as ue,C as pe,I as ve,O as me,l as fe,S as he}from"./infoCollection-f37b7882.js";import{u as ye,P as ge}from"./index-624c0d8a.js";import{o as Ae,g as Ce,r as _e,v as Ie,t as be}from"./utils-c9253a6e.js";import{_ as ke}from"./index-92c521b6.js";import{s as Le,c as Oe}from"./phoneVerify-96b674d2.js";import xe from"./index-38da61be.js";import{c as Ee,t as Te,_ as we}from"./index-17df8568.js";import"./trial-81a73a58.js";import"./pdfh5-008ca364.js";import"./core-a4655337.js";import"./constant-c3f28a3b.js";import"./isObjectLike-f858f31d.js";import"./_nodeUtil-ef4cea77.js";const Se={class:"guarantee-list"},Pe=(e=>(E("data-v-0b7ef451"),e=e(),T(),e))((()=>u("span",null,"保障计划",-1))),Re={key:0,class:"plan-list"},De=["onClick"],Ne={key:2,class:"feerate-view"},Fe={key:0},je={class:"extinfo-info-list"},Ve={class:"guarantee-detail"},Ue={class:"content"};var He=e(a({__name:"index",props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},planList:{type:Array,require:!1,default:()=>[]}},emits:["update-active-plan"],setup(e,{emit:a}){var E,T;const w=e;t((e=>({a7955dc0:l(S)})));const S=n(""),P=n((null==(T=null==(E=w.planList)?void 0:E[0])?void 0:T.planCode)||""),R=n(),D=n([]),N=n([]),F=n(),j=s((()=>!!w.planList.length));o([()=>w.dataSource,()=>P.value],(()=>{var e,a;D.value=(null==(a=((null==(e=w.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===P.value)))?void 0:a.data)||[]}),{immediate:!0,deep:!0});const V=s((()=>{var e;return(null==(e=w.dataSource)?void 0:e.rateUri)||""})),U=s((()=>!!(F.value&&F.value.paymentFrequencyValue&&F.value.premiumUnit&&V))),[H,B]=i(!1),M=s((()=>{var e;return!(!D.value||!(null==(e=D.value)?void 0:e.length))&&(D.value.length>w.count&&(!!w.isShowClose||!H.value))})),q=()=>{B()},z=s((()=>{var e;return D.value&&(null==(e=D.value)?void 0:e.length)?D.value.length<=w.count||H.value?D.value:D.value.slice(0,w.count):[]})),G=n(!1),W=()=>{G.value=!0},$=()=>{Ae({fileType:"pdf",fileUri:V.value})},Q=e=>{P.value=w.planList[e.name].planCode};return(a,t)=>{var n,s;const o=L,i=O,E=x,T=r("dompurify-html");return d(),c(p,null,[u("div",Se,[u("div",{class:"header"},[Pe,u("span",{onClick:W},"查看详情")]),l(j)?(d(),c("div",Re,[(d(!0),c(p,null,v(e.planList,((a,t)=>(d(),c("div",{key:`${a.planCode}_${t}`,class:m(`plan-list-item ${a.planCode===l(P)?"plan-list-item-active":""} ${2===e.planList.length?"paln-list-item-half":""}`),onClick:e=>{return t=a.planCode,P.value=t,void(R.value=w.planList.findIndex((e=>e.planCode===t)));var t}},[u("span",null,f(a.planName),1)],10,De)))),128))])):h("",!0),(d(!0),c(p,null,v(l(z),((e,a)=>(d(),y(o,{key:a,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),l(M)?(d(),c("div",{key:1,class:"show-more",onClick:q},[g(f(l(H)?"收起":"查看更多")+" ",1),A(C,{name:"arrow-down-dobule",class:m(["icon",{showMore:l(H)}])},null,8,["class"])])):h("",!0),l(U)?(d(),c("div",Ne,[u("span",null,f(`${(null==(n=l(F))?void 0:n.paymentFrequencyValue)||""}${(null==(s=l(F))?void 0:s.premiumUnit)||""}`),1),l(V)?(d(),c("span",{key:0,onClick:$},"查看保费")):h("",!0)])):h("",!0)]),A(_),A(E,{show:l(G),"onUpdate:show":t[1]||(t[1]=e=>b(G)?G.value=e:null),title:"保障详情",class:"guarantee-popup"},{default:I((()=>[l(N)&&l(N).length>0?(d(),c("div",Fe,[u("div",je,[(d(!0),c(p,null,v(l(N),((e,a)=>(d(),y(o,{key:a,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),A(_)])):h("",!0),l(j)?(d(),y(i,{key:1,active:l(R),"onUpdate:active":t[0]||(t[0]=e=>b(R)?R.value=e:null),list:e.planList.map(((e,a)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:Q},null,8,["active","list"])):h("",!0),u("div",Ve,[(d(!0),c(p,null,v(l(D),((e,a)=>(d(),c("div",{key:a,class:"guarantee-item"},[A(o,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),k(u("div",Ue,null,512),[[T,e.content]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-0b7ef451"]]);const Be={class:"refueling-package-com"},Me=(e=>(E("data-v-7e34c868"),e=e(),T(),e))((()=>u("div",{class:"title"},"加油包",-1)));var qe=e(a({__name:"index",props:{packageProductList:{type:Array,default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:3}},setup(e){const a=e,[t,n]=i(!1),o=s((()=>a.packageProductList.length>a.count&&(!!a.isShowClose||!t.value))),r=()=>{n()},u=s((()=>a.packageProductList.length<=a.count||t.value?a.packageProductList:a.packageProductList.slice(0,a.count)));return(e,a)=>{const n=w,s=S,i=P;return d(),c("div",Be,[Me,A(i,{ref:"formRef"},{default:I((()=>[(d(!0),c(p,null,v(l(u),((e,a)=>(d(),y(s,{key:`${e.value}_${a}`,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,label:e.packageName,required:"",placeholder:"请选择"},{input:I((()=>[A(n,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,options:l(ue),disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","options","disabled"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])))),128)),l(o)?(d(),c("div",{key:0,class:"show-more",onClick:r},[g(f(l(t)?"收起":"查看更多")+" ",1),A(C,{name:"down",class:m(["icon",{showMore:l(t)}])},null,8,["class"])])):h("",!0)])),_:1},512)])}}}),[["__scopeId","data-v-7e34c868"]]);const ze={class:"spec"},Ge={class:"rich-text"},We={key:1,class:"spec"},$e={class:"rich-text"},Qe={key:1,class:"spec"},Ye={class:"rich-text"},Je=a({__name:"index",props:{dataSource:{default:()=>({SPECIAL_FEATURE:[],CLAIM_CASE:{},CLAIM_FLOW:[],ISSUE_NOTICE:[],FAQ:[]})}},setup(e,{expose:a}){const t=e,o=R((()=>D((()=>import("./index-c6f4364a.js").then((function(e){return e.cG}))),["static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"])));R((()=>D((()=>import("./index-dbe5a7b2.js")),["static/js/index-dbe5a7b2.js","static/css/index-f22f2764.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"])));const i=R((()=>D((()=>import("./index-c6f4364a.js").then((function(e){return e.cE}))),["static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),m=R((()=>D((()=>import("./index-50804ef8.js")),["static/js/index-50804ef8.js","static/css/index-7b3feb06.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),f=R((()=>D((()=>import("./index-80dc7438.js")),["static/js/index-80dc7438.js","static/css/index-88dda73f.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/index-3e25d185.js"]))),{dataSource:g}=N(t),_=n(),b=n([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),L=s((()=>{var e,a;return null==(a=null==(e=g.value.SPECIAL_FEATURE)?void 0:e.spec)?void 0:a.length})),O=s((()=>{var e,a,t,l;const n=null==(e=g.value.CLAIM_FLOW)?void 0:e.processCaseType;return!!(n===pe.WORD&&(null==(a=g.value.CLAIM_FLOW)?void 0:a.processContent)||n===pe.IMAGE&&(null==(l=null==(t=g.value.CLAIM_FLOW)?void 0:t.processPicList)?void 0:l.length))})),x=s((()=>{var e,a,t,l,n;const s=null==(a=null==(e=g.value)?void 0:e.CLAIM_CASE)?void 0:a.claimCaseType;return!!(s===pe.WORD&&(null==(t=g.value.CLAIM_CASE)?void 0:t.claimContent)||s===pe.IMAGE&&(null==(n=null==(l=g.value.CLAIM_CASE)?void 0:l.claimCasePicList)?void 0:n.length))})),E=s((()=>{var e,a;return null==(a=null==(e=g.value)?void 0:e.FAQ)?void 0:a.length})),T=s((()=>{var e,a;return null==(a=null==(e=g.value)?void 0:e.FAQ)?void 0:a.length})),w=s((()=>{let e=[...b.value];return L.value||(e=e.filter((e=>"tab1"!==e.slotName))),O.value||x.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>{var e;return null==(e=_.value)?void 0:e.handleClickTab}}),(e,a)=>{const t=U,n=C,s=r("dompurify-html");return d(),y(l(o),{ref_key:"scrollRef",ref:_,class:"tabs",list:l(w),sticky:"",scrollspy:""},F({tab3:I((()=>[V(e.$slots,"form")])),_:2},[l(L)?{name:"tab1",fn:I((()=>{var e;return[u("div",ze,[(d(!0),c(p,null,v((null==(e=l(g).SPECIAL_FEATURE)?void 0:e.spec)||[],((e,a)=>(d(),y(j,{key:a},{fallback:I((()=>[A(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:I((()=>[(d(),y(t,{key:a,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),A(l(i))])]})),key:"0"}:void 0,l(O)||l(x)||l(E)||l(T)?{name:"tab2",fn:I((()=>{var e,a;return[l(O)?(d(),c(p,{key:0},[(null==(e=l(g).CLAIM_FLOW)?void 0:e.processCaseType)===l(pe).WORD?(d(),y(l(m),{key:0,class:"tab-card",title:"理赔说明"},{default:I((()=>{var e;return[k(u("div",Ge,null,512),[[s,null==(e=l(g).CLAIM_FLOW)?void 0:e.processContent]])]})),_:1})):(d(),c("div",We,[(d(),y(j,null,{fallback:I((()=>[A(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:I((()=>{var e;return[(d(!0),c(p,null,v((null==(e=l(g).CLAIM_FLOW)?void 0:e.processCasePicList)||[],((e,a)=>(d(),y(t,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),A(l(i))],64)):h("",!0),l(x)?(d(),c(p,{key:1},[(null==(a=l(g).CLAIM_CASE)?void 0:a.claimCaseType)===l(pe).WORD?(d(),y(l(m),{key:0,class:"tab-card",title:"理赔案例"},{default:I((()=>{var e;return[k(u("div",$e,null,512),[[s,null==(e=l(g).CLAIM_CASE)?void 0:e.claimContent]])]})),_:1})):(d(),c("div",Qe,[(d(),y(j,null,{fallback:I((()=>[A(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:I((()=>{var e;return[(d(!0),c(p,null,v((null==(e=l(g).CLAIM_CASE)?void 0:e.claimCasePicList)||[],((e,a)=>(d(),y(t,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),A(l(i))],64)):h("",!0),l(E)?(d(),c(p,{key:2},[A(l(m),{class:"tab-card",title:"投保须知"},{default:I((()=>{var e;return[k(u("div",Ye,null,512),[[s,null==(e=l(g).ISSUE_NOTICE)?void 0:e.noticeContent]])]})),_:1}),A(l(i))],64)):h("",!0),l(T)?(d(),c(p,{key:3},[A(l(m),{title:"常见问题"},{default:I((()=>{var e,a;return[A(l(f),{list:null==(a=null==(e=l(g).FAQ)?void 0:e[0])?void 0:a.data},null,8,["list"])]})),_:1}),A(l(i))],64)):h("",!0)]})),key:"1"}:void 0]),1032,["list"])}}});const Ze={class:"trial-button-wrap"},Xe={class:"footer-area"},Ke={class:"price"},ea={key:0},aa=a({__name:"TrialButton",props:{premium:{default:0},tenantProductDetail:{default:()=>({})},planCode:{default:""},loadingText:{default:""},paymentFrequency:{default:""}},emits:["onClick"],setup(e,{emit:a}){const t=e,s=n(""),i=n("");return o([()=>t.premium,()=>t.tenantProductDetail,()=>t.planCode],(([e])=>{const{PREMIUM:a}=t.tenantProductDetail||{};let l={};(null==a?void 0:a.length)&&(l=(a||[]).find((e=>e.planCode===t.planCode))||{});const n=(l.data||[]).map((e=>e.paymentFrequency===t.paymentFrequency)),{premium:o,minActualUnit:r}=n||{};console.log("unit",n),e?(i.value=r,s.value=e&&`${e}`):i.value=o}),{deep:!0,immediate:!0}),(t,n)=>(d(),c("div",Ze,[u("div",Xe,[u("div",Ke,[e.loadingText?(d(),c("span",ea,f(e.loadingText),1)):(d(),c(p,{key:1},[u("span",null,f(l(s)),1),u("span",null,f(l(i)),1)],64))]),A(xe,{shadow:!1,class:"right",onClick:n[0]||(n[0]=e=>a("onClick"))},{default:I((()=>[V(t.$slots,"default",{},(()=>[g("立即投保")]))])),_:3})])]))}});const ta=e=>(E("data-v-3a6bc508"),e=e(),T(),e),la={key:0},na=[ta((()=>u("div",{class:"__skeleton_short_content__"},[u("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[u("div",{class:"page-internet-product-detail"},[u("div",{class:"info"},[u("div",{class:"van-image banner",style:{width:"100%",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[u("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1676527379&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=tkscLe6oOZYjnRIA%2B7AiMS3bOs0%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),u("div")]),u("div",{class:"guarantee-list"},[u("div",{class:"header"},[u("span",null,[u("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"保障计划")]),u("span",null,[u("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"查看详情")])]),u("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[u("div",{class:"cell-container"},[u("div",{class:"left-part large"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"一般医疗保险金")]),u("div",{class:"divider"}),u("div",{class:"right-part"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高300万")])])]),u("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[u("div",{class:"cell-container"},[u("div",{class:"left-part large"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"重大疾病医疗保险金")]),u("div",{class:"divider"}),u("div",{class:"right-part"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),u("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[u("div",{class:"cell-container"},[u("div",{class:"left-part large"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤质子重离子医疗")]),u("div",{class:"divider"}),u("div",{class:"right-part"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),u("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[u("div",{class:"cell-container"},[u("div",{class:"left-part large"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤院外特定药品费用医疗")]),u("div",{class:"divider"}),u("div",{class:"right-part"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),u("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[u("div",{class:"cell-container"},[u("div",{class:"left-part large"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤特定器械耗材费用医疗责任 （适用于女性被保险人）")]),u("div",{class:"divider"}),u("div",{class:"right-part"},[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高100万")])])]),u("div",{class:"show-more"},[u("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"查看更多 "),u("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[u("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),u("div",{class:"feerate-view sk-border"},[u("span",null,[u("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00元/年起")])])]),u("div",{class:"com-divider"}),u("div",{class:"tabs",sticky:"",scrollspy:""},[u("div",null,[u("div",{class:"van-sticky"},[u("div",{class:"van-tabs"},[u("div",{id:"tab-list",class:"tab-list"},[u("a",{class:"tab-title active",title:"产品亮点"},[u("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"产品亮点")]),u("a",{class:"tab-title",title:"理赔说明"},[u("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"理赔说明")]),u("a",{class:"tab-title",title:"我要投保"},[u("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"我要投保")])])])])]),u("div",{class:"tab-content"},[u("div",{id:"tab1"},[u("div",{class:"spec"},[u("div",{class:"van-image detail-img",style:{width:"100%"}},[u("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)))],sa={class:"page-internet-product-detail"},oa={class:"info"},ia={class:"custom-page-form"},ra=ta((()=>u("div",{class:"form-title"},"请填写投保信息",-1))),da=ta((()=>u("div",{id:"xinaoDialog"},null,-1)));var ca=e(a({__name:"short",setup(e){M();const a=R((()=>D((()=>import("./index-9ce78ec2.js")),["static/js/index-9ce78ec2.js","static/css/index-ea588f10.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-38da61be.js","static/css/index-19d9cc6b.css","static/js/utils-c9253a6e.js","static/js/infoCollection-f37b7882.js","static/js/trial-81a73a58.js"]))),t=R((()=>D((()=>import("./index-e037b4c1.js")),["static/js/index-e037b4c1.js","static/css/index-c743ae40.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js"]))),i=R((()=>D((()=>import("./index-b0bbd8d3.js")),["static/js/index-b0bbd8d3.js","static/css/index-d2642f23.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/infoCollection-f37b7882.js","static/js/trial-81a73a58.js"])));R((()=>D((()=>import("./index-38da61be.js")),["static/js/index-38da61be.js","static/css/index-19d9cc6b.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),R((()=>D((()=>import("./index-58ce9646.js")),["static/js/index-58ce9646.js","static/css/index-6733e696.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js","static/js/infoCollection-f37b7882.js","static/js/relativeTime-fde2a46e.js","static/js/validator-5a13dc82.js","static/js/useDicData-49291a13.js"]))),R((()=>D((()=>import("./index-1ab3210b.js")),["static/js/index-1ab3210b.js","static/css/index-a14d73ae.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"])));const r=R((()=>D((()=>import("./index-44ce8756.js")),["static/js/index-44ce8756.js","static/css/index-b1275e60.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),m=R((()=>D((()=>import("./index-a52b0392.js")),["static/js/index-a52b0392.js","static/css/index-b9ba3011.css","static/js/index-c6f4364a.js","static/css/index-f4a47bf4.css","static/js/pdfh5-008ca364.js"]))),f=q();z();const C=H(),{productCode:_="",tenantId:k,agentCode:L="",agencyCode:O,saleChannelId:x,extraInfo:E,insurerCode:T,preview:w}=C.query;let S={};try{console.log("extInfo",decodeURIComponent(E)),S=JSON.parse(decodeURIComponent(E))}catch(xa){}const{openId:P}=S;n();const N=n(),F=n(),j=n(!1),V=n({}),U=n({}),ue=n(!1),pe=n(!1),Ae=n(0),xe=n(!1),Se=n({}),Pe=n({}),Re=n(!0),De=n(!0),Ne=n(!0),Fe=n(""),je=n([]);n({});const Ve=n({}),Ue=n({}),Be=n([]),Me=n(),ze=n(),Ge=G({holder:{formData:{},schema:[],trialFactorCodes:[],config:{name:{},verificationCode:{sendSMSCode:async({mobile:e},a)=>{const t=await Le(e),{code:l}=t;"10000"===l&&"function"==typeof a&&a()}},certType:{},certNo:{},occupation:{dictCode:Ee(T)}}},insuredList:[{formData:{},schema:[],trialFactorCodes:[],config:{relationToHolder:{label:""},certNo:{}}}]});P&&ye({openId:P},(e=>{Pe.value=e}));const We=n({imgUrl:"",desc:"",title:"",link:window.location.href}),$e=(e=>{const{tenantId:a,agentCode:t="",agencyCode:l,saleChannelId:s,extraInfo:o,insurerCode:i}=H().query;let r={};try{r=JSON.parse(decodeURIComponent(o))}catch(xa){}const d=n({agencyId:l,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"",pageCode:"",iseeBizNo:"",extraInfo:{}},orderCategory:1,saleUserId:t,saleChannelId:s,tenantId:a,venderCode:i,tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:a}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}});return"[object Object]"==={}.toString.call(e)&&Object.assign(d.value,e),d})({extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:S,templateId:(null==S?void 0:S.templateId)||"1",iseeBizNo:""}}),Qe=n({}),Ye=s((()=>!!w)),Ze=n([]),Xe=n(),Ke=async()=>{re({productCode:_,tenantId:k}).then((({data:e,code:a})=>{if("10000"===a){V.value=e,document.title=e.BASIC_INFO.title||"";const{title:a,desc:l,image:n}=(null==e?void 0:e.PRODUCT_LIST)||{};t={title:a,desc:l,image:n},We.value={desc:t.desc||"你好，这里是描述",imgUrl:t.image,title:t.title,link:window.location.href}}var t})),await ne({productCode:_}).then((({data:e,code:a})=>{var t;"10000"===a&&(xe.value=!0,U.value=e,Ve.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],Be.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),Ne.value=!1,de({productCode:_}).then((({code:e,data:a})=>{var t,l,n,s;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:o}=a;Xe.value=e||[];const{basicInfo:{questionnaireType:i},questions:r,questionnaireName:d}=(null==(t=null==o?void 0:o[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};2===i&&(Ze.value=[{attachmentName:d,attachmentUri:r,attachmentType:"question"}]),Ze.value=[{attachmentName:d,attachmentUri:null==(l=null==r?void 0:r[0])?void 0:l.content,attachmentType:Ce(String(null==(n=null==r?void 0:r[0])?void 0:n.textType),null==(s=null==r?void 0:r[0])?void 0:s.content)}]}}))},ea=s((()=>{if(Pe.value){const e=[];return Object.keys(Pe.value).forEach((a=>{e.push(...Pe.value[a])})),e}return[]})),ta=s((()=>ea.value.length>0)),ca=n([]),ua=e=>{console.log("currentPlanObj.value",e,Ve.value)};o((()=>Qe.value.planCode),(e=>{Ve.value=(U.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const pa=()=>{N.value.handleClickTab()("tab3")},va=n(""),ma=n(0),fa=async()=>{try{await ce(((e={},a={},t={})=>{var l;const n={...t},s={tenantId:k,riskList:(null==(l=n.tenantOrderInsuredList[0])?void 0:l.tenantOrderProductList[0].riskVOList)||[],riskPremium:a,productId:e.id};return n.extInfo.iseeBizNo=Fe.value,n.productCode=e.productCode,n.commencementTime=n.insuranceStartDate,n.expiryDate=n.insuranceEndDate,n.tenantOrderHolder={...n.tenantOrderHolder,certType:n.tenantOrderHolder.certType||Y.CERT,certNo:(n.tenantOrderHolder.certNo||"").toLocaleUpperCase(),extInfo:{...n.tenantOrderHolder.extInfo}},n.tenantOrderInsuredList=n.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||Y.CERT,certNo:(e.certNo||"").toLocaleUpperCase(),planCode:Ve.value.planCode,extInfo:{...e.extInfo}}))),n.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:ma.value,productCode:e.productCode,productName:e.productName,planCode:Ve.value.planCode,tenantOrderRiskList:be(s)},n})(U.value,Se.value,$e.value),(async(e,a)=>{a===le.JUMP_PAGE&&(null==e?void 0:e.orderNo)&&await(async e=>{try{const{code:a,data:t}=await ie({orderNo:e,tenantId:k});"10000"===a&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await ce(t))}catch(xa){}})(null==e?void 0:e.orderNo)}))}catch(xa){}},{fileList:ha,mustReadFileCount:ya,popupFileList:ga}=((e,a)=>{const t=n([]),l=n(0),s=n([]);return o([()=>{var a;return null==(a=e.value)?void 0:a.planCode},()=>a.value],(([e,a])=>{let n=null;if(e&&(null==a?void 0:a.length)){const t=(a||[]).find((a=>a.planCode===(e||"")));t&&(n=null==t?void 0:t.productMaterialMap)}n?(t.value=Object.keys(n).map((e=>(n[e].forEach((e=>{e.materialSource=Ce(`${null==e?void 0:e.materialSource}`,null==e?void 0:e.materialContent)})),{attachmentName:e,attachmentList:n[e]}))),s.value=t.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.popUpFlag===B.YES))}))).filter((e=>e.attachmentList.length)),l.value=t.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.mustReadFlag===B.YES))}))).filter((e=>e.attachmentList.length)).length||0):t.value=[]}),{deep:!0,immediate:!0}),{fileList:t,popupFileList:s,mustReadFileCount:l}})(Ve,Xe),Aa=e=>{Ae.value=e,pe.value=!0},Ca=async(e,a,t,l=!0)=>{var n;const{chargePeriod:s,coveragePeriod:o,paymentFrequency:i,insuranceEndDate:r,insuranceStartDate:d}=Qe.value;va.value="保费试算中...";const c=_e(t).map((e=>({...e,paymentFrequency:i,chargePeriod:s,coveragePeriod:o}))),u={tenantId:k,productCode:a.productCode,insuranceStartDate:d,insuranceEndDate:r,holder:{personVO:{...e.tenantOrderHolder,socialFlag:null==(n=e.tenantOrderHolder.extInfo)?void 0:n.hasSocialInsurance,certType:e.tenantOrderHolder.certType||Y.CERT}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance,certType:e.certType||Y.CERT},productPlanVOList:[{insurerCode:T,planCode:Ve.value.planCode,riskVOList:c}]})))},{code:p,message:v}=await se(u);if("10000"===p){const{code:e,data:a}=await oe(u);if("10000"===e){if(va.value="",$e.value.tenantOrderInsuredList[0].tenantOrderProductList=u.insuredVOList[0].productPlanVOList,ma.value=null==a?void 0:a.premium,$e.value.premium=a.premium,$e.value.orderAmount=a.premium,$e.value.orderRealAmount=a.premium,!l){const e={};a.riskPremiumDetailVOList&&a.riskPremiumDetailVOList.length&&a.riskPremiumDetailVOList.forEach((a=>{e[a.riskCode]={premium:a.premium,amount:a.amount}})),Se.value=e,ga.value.length>0?(Re.value=!1,Aa(0)):Ze.value.length>0?ue.value=!0:await fa()}}else va.value=""}else va.value="",X(v)},_a=()=>{const e=[];return je.value.filter((e=>e.value===ve.INSURE)).forEach((a=>{e.push(...a.productRiskVoList)})),e},Ia=async()=>{var e,a;try{ue.value=!1,pe.value=!1,Me.value&&ze.value&&Promise.all([null==(e=Me.value)?void 0:e.validate(),null==(a=ze.value)?void 0:a[0].validate()]).then((async()=>{var e;if(ta.value)await Ca($e.value,U.value,[...ca.value,..._a()],!1);else{const a=null==(e=$e.value.tenantOrderHolder)?void 0:e.verificationCode;if(!Ie(a))return void X({message:"请输入正确的验证码"});const{code:t,data:l}=await Oe($e.value.tenantOrderHolder.mobile,a);"10000"===t&&await Ca($e.value,U.value,[...ca.value,..._a()],!1)}})).catch((()=>{const e=document.querySelector(".form-title");e&&e.scrollIntoView()}))}catch(t){}},ba=e=>{"allFalse"===e?(ue.value=!1,fa()):K.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{ue.value=!1}))},ka=()=>{pe.value=!1,Re.value=!0,Ze.value.length<1?fa():ue.value=!0},La=()=>{ue.value=!1,pe.value=!1,Re.value=!0};o((()=>$e.value.tenantOrderInsuredList[0].relationToHolder),(()=>{je.value&&je.value.forEach((e=>{e.value=ve.UN_INSURE})),De.value=!1,W((()=>{const{certType:e,extInfo:a}=$e.value.tenantOrderInsuredList[0];a&&!a.hasSocialInsurance&&($e.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=he.HAS),De.value=!0}))}),{deep:!0,immediate:!0}),o([()=>Ge.holder.formData,()=>Ge.insuredList],(([e,a])=>{Object.assign($e.value,(({holder:e,insuredList:a=[]})=>{const t=["birthday","certEndDate","certEndType","certNo","certStartDate","verificationCode","certType","email","gender","mobile","name","id","insuredBeneficiaryType","relationToHolder","relationToMainInsured"],l=e=>{const a={extInfo:{}};return"[object Object]"==={}.toString.call(e)&&Object.keys(e).forEach((l=>{t.includes(l)?a[l]=e[l]:a.extInfo[l]=e[l]})),a};return{tenantOrderHolder:l(e),tenantOrderInsuredList:(a||[]).map((e=>l(e)))}})({holder:e,insuredList:a.map((e=>e.formData))}))}),{deep:!0});const Oa=async()=>new Promise(((e,a)=>{Me.value&&ze.value?Promise.all([Me.value.validate(Ge.holder.trialFactorCodes),ze.value[0].validate(Ge.insuredList[0].trialFactorCodes)]).then((()=>{e(!0)})).catch((()=>{a()})):a()}));return o([()=>Ve.value,()=>Qe.value.paymentFrequency],(()=>{}),{deep:!0}),o((()=>[...Ge.holder.trialFactorCodes.map((e=>Ge.holder.formData[e])),...Ge.insuredList.reduce(((e,a,t)=>(e.push(...a.trialFactorCodes.map((e=>Ge.insuredList[t].formData[e]))),e)),[]),()=>Qe.value.paymentFrequency]),((...e)=>{Oa().then((()=>{Ye.value||Ca($e.value,U.value,[...ca.value,..._a()])})).catch((()=>{Oa().then((()=>{va.value="保费试算中..."}))}))}),{deep:!0}),o((()=>Ge.holder.formData),((...e)=>{Ge.insuredList.forEach(((e,a)=>{const{formData:t,schema:l}=e||{};"1"===t.relationToHolder&&Object.assign(e.formData,Ge.holder.formData)}))}),{deep:!0,immediate:!0}),o((()=>Ve.value),(()=>{let{productFactor:e}=Ve.value;const{oilPackageProductVOList:a,planCode:t,insureProductRiskVOList:l}=Ve.value;ta.value&&e[1]&&(e=e[1].filter((e=>"verificationCode"!==e.code))),Qe.value.planCode=t,ca.value=l,Ue.value=(l||[]).find((e=>e.mainRiskFlag===B.YES)),console.log("mainRiskInfo.value",Ue.value),je.value=(a||[]).map((e=>({...e,value:ve.UN_INSURE})));const[n,s,o]=Te(e);Ge.holder={...Ge.holder,...n},Ge.insuredList[0]={...Ge.insuredList[0],...s}}),{deep:!0,immediate:!0}),o((()=>Ge.insuredList.map(((e,a)=>Ge.insuredList[a].formData.relationToHolder))),((e,a)=>{console.log("%c🔥 与投保人关系变动了","color:#1989fa;background:#5e4;padding:3px 5px;"),Ge.insuredList.forEach(((e,a)=>{const{formData:t,schema:l,config:n}=e||{},s="1"===t.relationToHolder,o="3"===t.relationToHolder;n.certNo.label="身份证号"+(o?"(户口簿)":""),e.schema.forEach((e=>{e.relationToHolder=t.relationToHolder,e.hidden=!e.isSelfInsuredNeed&&s})),s?Object.assign(e.formData,{...Ge.insuredList[a].formData,...Ge.holder.formData}):Object.assign(e.formData,{...Object.keys(e.formData).reduce(((e,a)=>(e[a]="",e)),{}),relationToHolder:t.relationToHolder})}))}),{immediate:!0,deep:!0}),W((()=>{ee(F,(([{isIntersecting:e}],a)=>{j.value=!e}))})),$((()=>{var e;const a=Q.get(me);if(a){const{tenantOrderHolder:t,tenantOrderInsuredList:l}=a;if(t&&($e.value.tenantOrderHolder={...t,certType:t.certType||Y.CERT}),Array(l)&&l[0]){const a=l[0]||{};if($e.value.activePlanCode=a.planCode,a.tenantOrderProductListtenantOrderProductList&&a.tenantOrderProductList[0]&&a.tenantOrderProductList[0].tenantOrderRiskList){const t=null==(e=a.tenantOrderProductList[0].tenantOrderRiskList)?void 0:e.find((e=>"1"===String(e.riskType)));t&&($e.value.paymentFrequency=(null==t?void 0:t.paymentFrequency)?String(null==t?void 0:t.paymentFrequency):fe.SINGLE)}}}})),J((()=>{Ne.value=!0,Ke(),setTimeout((async()=>{Fe.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),Z((()=>{Q.remove(me)})),(e,n)=>{const s=ae,o=te;return d(),c(p,null,[l(Ne)?(d(),c("div",la,na)):(d(),y(o,{key:1,"data-skeleton-root":"SHORT","theme-vars":l(f)},{default:I((()=>{var e,a,t,o,f,C,_,b,k,L;return[u("div",sa,[u("div",oa,[(null==(a=null==(e=l(V))?void 0:e.BASIC_INFO)?void 0:a.banner.length)?(d(),y(ke,{key:0,"data-skeleton-type":"img",url:null==(t=l(V))?void 0:t.BASIC_INFO.banner[0]},null,8,["url"])):h("",!0),(null==(C=null==(f=null==(o=l(V))?void 0:o.BASIC_INFO)?void 0:f.bannerMove)?void 0:C.length)?(d(),y(ke,{key:1,url:null==(k=null==(b=null==(_=l(V))?void 0:_.BASIC_INFO)?void 0:b.bannerMove)?void 0:k[0],onClick:pa},null,8,["url"])):h("",!0),u("div",{ref_key:"observeRef",ref:F},null,512)]),(null==(L=l(V))?void 0:L.GUARANTEE)?(d(),y(He,{key:0,"show-service-config":"","data-source":l(V),"plan-list":l(Be)},null,8,["data-source","plan-list"])):h("",!0),A(Je,{ref:"tenantProductDetailScrollRef","data-source":l(V)},{form:I((()=>[u("div",ia,[ra,A(l(we),{ref_key:"holderFormRef",ref:Me,title:"本人信息（投保人）",model:l(Ge).holder.formData,schema:l(Ge).holder.schema,config:l(Ge).holder.config},null,8,["model","schema","config"]),(d(!0),c(p,null,v(l(Ge).insuredList,((e,a)=>(d(),y(l(we),{ref_for:!0,ref_key:"insuredFormRef",ref:ze,key:a,title:"为谁投保（被保人）",model:l(Ge).insuredList[a].formData,schema:e.schema,config:e.config},null,8,["model","schema","config"])))),128))]),A(l(i),{"form-info":l(Qe),"risk-info":l(Ue),"tenant-product-detail":l(V).PREMIUM,"plan-list":l(Be),"premium-info":{premium:l(ma),premiumLoadingText:l(va)},onUpdateActivePlan:ua},null,8,["form-info","risk-info","tenant-product-detail","plan-list","premium-info"]),l(je).length>0?(d(),y(qe,{key:0,"package-product-list":l(je)},null,8,["package-product-list"])):h("",!0)])),_:1},8,["data-source"]),A(s,null,{default:I((()=>{var e,a,t;return[(null==(e=l(V).SIGNATURE)?void 0:e.inscribedContent)?(d(),y(l(r),{key:0,"inscribed-content":null==(t=null==(a=l(V))?void 0:a.SIGNATURE)?void 0:t.inscribedContent},null,8,["inscribed-content"])):h("",!0)]})),_:1}),A(s,null,{default:I((()=>{var e;return[(null==(e=l(ha))?void 0:e.length)?(d(),y(l(m),{key:0,"attachement-list":l(ha),"pre-text":"请阅读",onPreviewFile:n[0]||(n[0]=e=>Aa(e))},null,8,["attachement-list"])):h("",!0)]})),_:1}),l(j)?(d(),y(aa,{key:1,premium:l(ma),"loading-text":l(va),"plan-code":l(Qe).planCode,"payment-frequency":l(Qe).paymentFrequency,"tenant-product-detail":l(V),onClick:Ia},{default:I((()=>[g("立即投保")])),_:1},8,["premium","loading-text","plan-code","payment-frequency","tenant-product-detail"])):h("",!0)]),l(xe)?(d(),y(ge,{key:0,"product-detail":l(V)},null,8,["product-detail"])):h("",!0),da]})),_:1},8,["theme-vars"])),A(l(t),{show:l(ue),"onUpdate:show":n[1]||(n[1]=e=>b(ue)?ue.value=e:null),"content-list":l(Ze),"active-index":0,onOnConfirmHealth:ba,onOnCloseHealthByMask:La},null,8,["show","content-list"]),l(pe)?(d(),y(l(a),{key:2,show:l(pe),"onUpdate:show":n[2]||(n[2]=e=>b(pe)?pe.value=e:null),"content-list":l(Re)?l(ha):l(ga),"is-only-view":l(Re),"active-index":l(Ae),text:l(Re)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":l(Re)?0:l(ya),onSubmit:ka,onOnCloseFilePreviewByMask:La},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):h("",!0)],64)}}}),[["__scopeId","data-v-3a6bc508"]]);export{ca as default};

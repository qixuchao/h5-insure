import{d as e,dC as a,j as l,k as t,z as n,a6 as s,bX as i,ck as o,dq as u,o as d,c as r,a as c,u as v,F as p,q as m,n as f,e as g,f as h,m as k,a8 as y,b as C,ae as w,aO as b,w as E,p as L,V as S,_ as U,dD as N,dE as j,E as A,cT as B,dF as F,aD as $,aE as _,aF as q}from"./index-1a0c6683.js";import{o as x}from"./utils-916a7af4.js";import"./infoCollection-3ed1068e.js";import"./trial-d7a24ce5.js";const D={class:"guarantee-list"},P=(e=>(_("data-v-72bcb63c"),e=e(),q(),e))((()=>c("span",null,"保障计划",-1))),T={key:0,class:"plan-list"},V=["onClick"],z={key:2,class:"feerate-view"},I={key:0},O={class:"extinfo-info-list"},G={class:"guarantee-detail"},M={class:"content"},R=e({name:"guarantee"});var X=U(e({...R,props:{dataSource:{default:()=>({})},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{default:5},planList:{default:()=>[]}},emits:["updateActivePlan"],setup(e,{emit:U}){var _,q;const R=e;a((e=>({"47c8f96c":v(X)})));const X=l(""),Y=l((null==(q=null==(_=R.planList)?void 0:_[0])?void 0:q.planCode)||void 0),H=l(),J=l([]),K=l([]),Q=l(),W=t((()=>!!R.planList.length));n([()=>R.dataSource,()=>Y.value],(()=>{var e,a;J.value=((null==(a=((null==(e=R.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===Y.value)))?void 0:a.data)||[]).filter((e=>e.isShowOn===`${s.YES}`))}),{immediate:!0,deep:!0});const Z=t((()=>{var e;return(null==(e=R.dataSource)?void 0:e.rateUri)||""})),ee=t((()=>!!(Q.value&&Q.value.paymentFrequencyValue&&Q.value.premiumUnit&&Z))),[ae,le]=i(!1),te=t((()=>{var e;return!(!J.value||!(null==(e=J.value)?void 0:e.length))&&(J.value.length>R.count&&(!!R.isShowClose||!ae.value))})),ne=()=>{le()},se=t((()=>{var e;return J.value&&(null==(e=J.value)?void 0:e.length)?J.value.length<=R.count||ae.value?J.value:J.value.slice(0,R.count):[]})),ie=l(!1),oe=e=>{const a=e||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,"A"===a.target.tagName&&a.target.href&&(N()?j("",a.target.href):window.open(a.target.href))},ue=()=>{ie.value=!0,A((()=>{var e,a;null==(a=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||a.addEventListener("click",oe,!1)}))};o((()=>{var e,a;null==(a=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||a.removeEventListener("click",oe,!1)}));const de=()=>{x({fileType:"pdf",fileUri:Z.value})},re=e=>{Y.value=R.planList[e.name].planCode};return(e,a)=>{var l,t;const n=B,s=F,i=$,o=u("dompurify-html");return d(),r(p,null,[c("div",D,[c("div",{class:"header"},[P,c("span",{onClick:ue},"查看详情")]),v(W)?(d(),r("div",T,[(d(!0),r(p,null,m(e.planList,((e,a)=>(d(),r("div",{key:`${e.planCode}_${a}`,class:f("plan-list-item "+(e.planCode===v(Y)?"plan-list-item-active":"")),onClick:a=>{return l=e.planCode,Y.value=l,H.value=R.planList.findIndex((e=>e.planCode===l)),void U("updateActivePlan",l);var l}},[c("span",null,g(e.planName),1)],10,V)))),128))])):h("",!0),(d(!0),r(p,null,m(v(se),((e,a)=>(d(),k(n,{key:a,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),v(te)?(d(),r("div",{key:1,class:"show-more",onClick:ne},[y(g(v(ae)?"收起":"查看更多")+" ",1),C(w,{name:"arrow-down-dobule",class:f(["icon",{showMore:v(ae)}])},null,8,["class"])])):h("",!0),v(ee)?(d(),r("div",z,[c("span",null,g(`${(null==(l=v(Q))?void 0:l.paymentFrequencyValue)||""}${(null==(t=v(Q))?void 0:t.premiumUnit)||""}`),1),v(Z)?(d(),r("span",{key:0,onClick:de},"查看保费")):h("",!0)])):h("",!0)]),C(b),C(i,{show:v(ie),"onUpdate:show":a[1]||(a[1]=e=>L(ie)?ie.value=e:null),title:"保障详情",class:"guarantee-popup"},{default:E((()=>[v(K)&&v(K).length>0?(d(),r("div",I,[c("div",O,[(d(!0),r(p,null,m(v(K),((e,a)=>(d(),k(n,{key:a,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),C(b)])):h("",!0),v(W)?(d(),k(s,{key:1,active:v(H),"onUpdate:active":a[0]||(a[0]=e=>L(H)?H.value=e:null),list:e.planList.map(((e,a)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:re},null,8,["active","list"])):h("",!0),c("div",G,[(d(!0),r(p,null,m(v(J),((e,a)=>(d(),r("div",{key:a,class:"guarantee-item"},[C(n,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),S(c("div",M,null,512),[[o,e.tips]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-72bcb63c"]]);export{X as default};

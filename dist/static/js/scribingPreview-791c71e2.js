import{x as e,d as a,k as t,b as i,F as s,J as r,h as n,i as l,j as o,b$ as c,l as d,o as u,c as p,a as m,w as g,s as v,u as f,n as y,a6 as b,g as h,a8 as w,cN as k,aj as z,au as A,cU as C}from"./index-c752b76c.js";import{P as I}from"./index-738b855f.js";import{q as N,s as x,c as $}from"./scribing-d0bfc157.js";const[B,T]=e("space"),_={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function j(e=[]){const a=[];return e.forEach((e=>{Array.isArray(e)?a.push(...e):e.type===s?a.push(...j(e.children)):a.push(e)})),a.filter((e=>{var a;return!(e&&("undefined"!=typeof Comment&&e.type===Comment||e.type===s&&0===(null==(a=e.children)?void 0:a.length)||e.type===Text&&""===e.children.trim()))}))}const E=r(a({name:B,props:_,setup(e,{slots:a}){const s=t((()=>{var a;return null!=(a=e.align)?a:"horizontal"===e.direction?"center":""})),r=e=>"number"==typeof e?e+"px":e,n=a=>{const t={},i=`${r(Array.isArray(e.size)?e.size[0]:e.size)}`,s=`${r(Array.isArray(e.size)?e.size[1]:e.size)}`;return a?e.wrap?{marginBottom:s}:{}:("horizontal"===e.direction&&(t.marginRight=i),("vertical"===e.direction||e.wrap)&&(t.marginBottom=s),t)};return()=>{var t;const r=j(null==(t=a.default)?void 0:t.call(a));return i("div",{class:[T({[e.direction]:e.direction,[`align-${s.value}`]:s.value,wrap:e.wrap,fill:e.fill})]},[r.map(((e,a)=>i("div",{key:`item-${a}`,class:`${B}-item`,style:n(a===r.length-1)},[e])))])}}}));const L={class:"page-scribing-preview-wrap"},S=m("div",{class:"header-tip"},"点击文字框可进行修改",-1),V={class:"scribing-list"},q=["onClick"],D=["src"],H={class:"footer-btn"},P={class:"popup-body"},R={class:"popup-footer"},U=a({name:"scribingPreview"}),F=a({...U,setup(e){const a=n(),t=l(),r=o([{content:"想"}]),{orderNo:B,text:T,tenantId:_,orderId:j}=t.query,U=o({}),[F,J]=c(!1),O=o(),Y=o(),G=async()=>{const{code:e,data:a}=await N({orderId:j,tenantId:_,contentType:C.HANDLE});"10000"===e&&(r.value=a.riskTranscriptionList,O.value=a.status)},K=()=>{Y.value.clear(),J(!1)},M=()=>{U.value.image&&x({orderNo:B,tenantId:_,riskTranscriptionList:[{...U.value,status:2}]}).then((({code:e,data:a})=>{"10000"===e&&(J(!1),G())}))},Q=()=>{$({content:T,image:"",orderNo:B,tenantId:_,transcriptionType:C.HANDLE}).then((({code:e})=>{"10000"===e&&a.back()}))},W=o(!1),X=o();return d((()=>{W.value=!0,G(),setTimeout((async()=>{X.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const t=E,n=z,l=A;return u(),p(s,null,[m("div",L,[S,m("div",V,[i(t,{wrap:""},{default:g((()=>[(u(!0),p(s,null,v(f(r),((e,a)=>(u(),p("div",{key:a,class:y("scribing-item "+(+e.status!==f(b).YES?"activity":"")),onClick:a=>{return t=e,U.value={...t,image:""},void J(!0);var t}},[m("img",{src:e.thumbnail,alt:""},null,8,D)],10,q)))),128))])),_:1})]),m("div",H,[i(I,{shadow:!1,disabled:f(O)===f(b).NO,onClick:Q},{default:g((()=>[h(e.$slots,"default",{},(()=>[w("确认")]))])),_:3},8,["disabled"])])]),i(l,{show:f(F),teleport:".page-scribing-preview-wrap",class:"sign-popup",title:f(U).content,closeable:!1,position:"center",onClose:K},{default:g((()=>[m("div",P,[i(k,{ref_key:"signRef",ref:Y,modelValue:f(U).image,"onUpdate:modelValue":a[0]||(a[0]=e=>f(U).image=e),"has-bg":"",placeholder:f(U).content,closeable:""},null,8,["modelValue","placeholder"])]),m("div",R,[i(n,{onClick:K},{default:g((()=>[w("取消")])),_:1}),i(n,{type:"primary",plain:"",disabled:!f(U).image,onClick:M},{default:g((()=>[w("确定")])),_:1},8,["disabled"])])])),_:1},8,["show","title"])],64)}}});export{F as default};

import{q as e,a as t,u as n,Y as o,t as u,v as a}from"./index-deb4ddfb.js";import{ref as r,watch as l,defineAsyncComponent as i,computed as d,nextTick as c,onMounted as s}from"vue";import{g as V,i as p}from"./trial-90e504aa.js";import{a as m,q as f}from"./product-c166a0f6.js";import{_ as v}from"./index-8e22d71a.js";import{V as C,G as k,_ as I}from"./index-e47595d2.js";import{P as N}from"./index-a1ed5e21.js";import{u as B}from"./useAttachment-3dae9e30.js";import{g as h}from"./utils-f063477c.js";import{_ as j}from"./index-b02e6685.js";import{q as b}from"./createProposal-a7e18ac8.js";import{u as g}from"./useOrder-d6d1fc9b.js";import"./pdfh5-e588f83d.js";import"./infoCollection-f930e52f.js";import"./trial-a75330fd.js";import"./debounce-6981b306.js";import"./isObjectLike-a9798079.js";import"./cloneDeep-6abacc69.js";import"./keysIn-131bbce9.js";import"./_getTag-d5b47d26.js";import"./TrialButton-46a442f7.js";import"./index-593ee4c8.js";import"./index-9ba6d482.js";/* empty css              */import"./merge-e7788e50.js";import"./PayInfo-e8550347.js";import"./phoneVerify-8d7afc24.js";import"./useDicData-48f91541.js";import"./bankCard-1cedc592.js";import"./index-83ab55b1.js";import"./index-11981141.js";import"./box-title-70dc1627.js";import"./index-97a63e34.js";import"./echarts-6ee22673.js";import"./empty-ae586b6c.js";import"./utils-8df944cf.js";import"./constants-7afb7c3d.js";import"./nextStep-0d38f4c6.js";import"./core-5f3b09dd.js";import"./constant-8927d485.js";const y={class:"com-insure-limit"},S=Vue.defineComponent({name:"insureLimit"}),_=Vue.defineComponent({...S,props:{dataSource:{default:()=>[]}},setup(e){const t=e,n=r([]);return l((()=>t.dataSource),(()=>{var e,o;n.value=((null==(o=null==(e=t.dataSource)?void 0:e[0])?void 0:o.data)||[]).filter((e=>e.conditionValue))}),{deep:!0,immediate:!0}),(e,t)=>{const o=Vue.resolveComponent("ProCell");return Vue.openBlock(),Vue.createElementBlock("div",y,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(n),((e,t)=>(Vue.openBlock(),Vue.createBlock(o,{key:t,title:e.conditionName,content:e.conditionValue},null,8,["title","content"])))),128))])}}});const O={class:"product-desc-wrap"},x={class:"product-name"},E={class:"product-desc"},L=Vue.defineComponent({name:"productDesc"}),w=Vue.defineComponent({...L,props:{dataSource:{default:()=>({})}},setup:e=>(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",O,[Vue.createElementVNode("div",x,Vue.toDisplayString(e.dataSource.title),1),Vue.createElementVNode("p",E,Vue.toDisplayString(e.dataSource.productDesc),1)]))});const T={key:0},P={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},F={class:"info"},A={key:1,class:"preview-placeholder"},R=Vue.createElementVNode("br",null,null,-1),D=Vue.createElementVNode("div",{id:"insureButton"},null,-1),U=Vue.createElementVNode("div",{id:"xinaoDialog"},null,-1),q=Vue.defineComponent({name:"InsuranceLong"}),G=Vue.defineComponent({...q,setup(y){const S=i((()=>e((()=>import("./index-52712cf2.js")),["static/js/index-52712cf2.js","static/css/index-fa4edf2a.css","static/js/index-deb4ddfb.js","static/css/index-5064de6f.css","static/js/pdfh5-e588f83d.js","static/js/theme-65292714.js","static/js/index-593ee4c8.js","static/css/index-827a8544.css","static/js/utils-f063477c.js","static/js/infoCollection-f930e52f.js","static/js/trial-a75330fd.js"]))),O=i((()=>e((()=>import("./index-e0bc53f1.js")),["static/js/index-e0bc53f1.js","static/css/index-eabeb59f.css","static/js/index-deb4ddfb.js","static/css/index-5064de6f.css","static/js/pdfh5-e588f83d.js"]))),x=i((()=>e((()=>import("./index-3ccd2494.js")),["static/js/index-3ccd2494.js","static/css/index-4640d9aa.css"])));t();const E=n(),{productCode:L="",tenantId:q,agentCode:G="",agencyCode:M,saleChannelId:z,proposalId:Y,extraInfo:J,orderNo:Q,insurerCode:W,preview:X,trialPreview:$}=E.query;let H={};try{console.log("extInfo",decodeURIComponent(J)),H=JSON.parse(decodeURIComponent(J))}catch(xe){}r();const K=r(),Z=r(),ee=r(!1),te=r({}),ne=r({}),oe=r(!1),ue=r(0),ae=r(!1);r({});const re=r(!0);r(!0);const le=r(!0),ie=r(""),de=r({}),ce=r({}),se=r([]),Ve=r({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=1`,isShare:!1}),pe=r({});d((()=>!!X||!!$));const me=d((()=>!!$)),fe=r(),ve=()=>{fe.value.open()},Ce=r([]),ke=r(),Ie=r(),Ne=g(),Be=r(!1),he=async()=>{!me.value&&m({productCode:L,tenantId:q}).then((({data:e,code:t})=>{if("10000"===t){te.value=e;const{wxShareConfig:t,showWXShare:n,title:o,desc:u,image:r}=(null==e?void 0:e.PRODUCT_LIST)||{};n?Object.assign(Ve.value,{...t,imgUrl:t.image,isShare:n}):Object.assign(Ve.value,{title:o,desc:u,imgUrl:r,isShare:n}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&a(e.BASIC_INFO.themeType)}})),Q||Y||(Be.value=!0),Q&&V({orderNo:Q,tenantId:q}).then((({code:e,data:t})=>{"10000"===e&&(t.productCode=L,Ie.value=t,Be.value=!0)})),Y&&b({id:Y,tenantId:q}).then((({code:e,data:t})=>{if("10000"===e){const{holder:e,insuredList:n}=t;Ie.value=Object.assign(Ne.value,{productCode:L,productName:"",renewFlag:"",holder:e,tenantId:q,insuredList:(n||[]).map((e=>({...e,productList:e.productList.filter((e=>e.productCode===L))})))}),Be.value=!0}})),await p({productCode:L,isTenant:!1}).then((({data:e,code:t})=>{var n;"10000"===t&&(ee.value=!0,ae.value=!0,ne.value=e,de.value=null==(n=e.productPlanInsureVOList)?void 0:n[0],se.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),le.value=!1,f({productCode:L}).then((({code:e,data:t})=>{var n,o,u,a;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:r}=t;ke.value=e||[];const{basicInfo:{questionnaireType:l},questions:i,questionnaireName:d}=(null==(n=null==r?void 0:r[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};2===l&&(Ce.value=[{attachmentName:d,attachmentUri:i,attachmentType:"question"}]),Ce.value=[{attachmentName:d,attachmentUri:null==(o=null==i?void 0:i[0])?void 0:o.content,attachmentType:h(String(null==(u=null==i?void 0:i[0])?void 0:u.textType),null==(a=null==i?void 0:i[0])?void 0:a.content)}]}}))};l((()=>pe.value.planCode),(e=>{de.value=(ne.value.productPlanInsureVOList||[]).find((t=>t.planCode===e))}));const je=()=>{K.value.handleClickTab()("insureButton")};r(""),r(0);const{fileList:be,mustReadFileCount:ge,popupFileList:ye}=B(de,ke),Se=e=>{de.value=(ne.value.productPlanInsureVOList||[]).find((t=>t.planCode===e))},_e=()=>{oe.value=!1,re.value=!0},Oe=()=>{oe.value=!1,re.value=!0};return l((()=>de.value),(()=>{const{planCode:e,oilPackageProductVOList:t,insureProductRiskVOList:n}=de.value;pe.value.planCode=e,ce.value=(n||[]).find((e=>e.mainRiskFlag===o.YES))}),{deep:!0,immediate:!0}),c((()=>{u(Z,(([{isIntersecting:e}],t)=>{ee.value=!0}))})),s((()=>{le.value=!0,he(),setTimeout((async()=>{ie.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{var n,o,u,a,r,l,i,d,c,s,V,p,m,f,B,h,b,g,y,E;const L=Vue.resolveComponent("ProNavigator"),G=Vue.resolveComponent("ProLazyComponent");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.unref(le)?(Vue.openBlock(),Vue.createElementBlock("div",T)):(Vue.openBlock(),Vue.createElementBlock("div",P,[Vue.createVNode(L),Vue.unref(me)?(Vue.openBlock(),Vue.createElementBlock("div",A,[Vue.createTextVNode("当前页面仅用于保费试算预览"),R,Vue.createTextVNode("不展示其他产品相关配置信息")])):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createElementVNode("div",F,[1==(null==(o=null==(n=Vue.unref(te))?void 0:n.BASIC_INFO)?void 0:o.bannerType)&&(null==(a=null==(u=Vue.unref(te))?void 0:u.BASIC_INFO)?void 0:a.banner.length)?(Vue.openBlock(),Vue.createBlock(v,{key:0,"data-skeleton-type":"img",images:null==(l=null==(r=Vue.unref(te))?void 0:r.BASIC_INFO)?void 0:l.banner},null,8,["images"])):Vue.createCommentVNode("",!0),2==(null==(d=null==(i=Vue.unref(te))?void 0:i.BASIC_INFO)?void 0:d.bannerType)&&(null==(s=null==(c=Vue.unref(te))?void 0:c.BASIC_INFO)?void 0:s.video.length)?(Vue.openBlock(),Vue.createBlock(C,{key:1,"data-skeleton-type":"img",src:null==(V=Vue.unref(te))?void 0:V.BASIC_INFO.video[0]},null,8,["src"])):Vue.createCommentVNode("",!0),(null==(f=null==(m=null==(p=Vue.unref(te))?void 0:p.BASIC_INFO)?void 0:m.bannerMove)?void 0:f.length)?(Vue.openBlock(),Vue.createBlock(v,{key:2,url:null==(b=null==(h=null==(B=Vue.unref(te))?void 0:B.BASIC_INFO)?void 0:h.bannerMove)?void 0:b[0],onClick:je},null,8,["url"])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",{ref_key:"observeRef",ref:Z},null,512)]),Vue.createVNode(w,{"data-source":null==(g=Vue.unref(te))?void 0:g.BASIC_INFO},null,8,["data-source"]),(null==(y=Vue.unref(te))?void 0:y.GUARANTEE)?(Vue.openBlock(),Vue.createBlock(k,{key:0,"show-service-config":"","data-source":Vue.unref(te),"plan-list":Vue.unref(se),onUpdateActivePlan:Se},null,8,["data-source","plan-list"])):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",{class:"trial-text-btn",onClick:ve},"算一算保费"),Vue.createVNode(_,{"data-source":null==(E=Vue.unref(te))?void 0:E.ISSUE_CONDITION},null,8,["data-source"]),Vue.createVNode(I,{ref_key:"detailScrollRef",ref:K,"data-source":Vue.unref(te)},null,8,["data-source"]),Vue.createVNode(G,null,{default:Vue.withCtx((()=>{var e,t,n;return[(null==(e=Vue.unref(te).SIGNATURE)?void 0:e.inscribedContent)?(Vue.openBlock(),Vue.createBlock(Vue.unref(O),{key:0,"inscribed-content":null==(n=null==(t=Vue.unref(te))?void 0:t.SIGNATURE)?void 0:n.inscribedContent},null,8,["inscribed-content"])):Vue.createCommentVNode("",!0)]})),_:1}),Vue.createVNode(G,null,{default:Vue.withCtx((()=>{var e;return[(null==(e=Vue.unref(be))?void 0:e.length)?(Vue.openBlock(),Vue.createBlock(Vue.unref(x),{key:0,"attachment-list":Vue.unref(be),"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{ue.value=e,oe.value=!0})(e))},null,8,["attachment-list"])):Vue.createCommentVNode("",!0)]})),_:1})],64)),Vue.unref(ee)&&Vue.unref(Be)?(Vue.openBlock(),Vue.createBlock(j,{key:2,ref_key:"trialRef",ref:fe,"data-source":Vue.unref(de),"share-info":Vue.unref(Ve),"is-share":Vue.unref(Ve).isShare,"product-info":{productCode:Vue.unref(ne).productCode,productName:Vue.unref(ne).productName,productId:"",tenantId:Vue.unref(q),insurerCode:Vue.unref(W),planList:Vue.unref(ne).productPlanInsureVOList},"default-data":Vue.unref(Ie)?[Vue.unref(Ie)]:null,"current-order-detail":Vue.unref(Ie),"tenant-product-detail":Vue.unref(te),"hide-benefit":1!==Vue.unref(ne).openFlag},null,8,["data-source","share-info","is-share","product-info","default-data","current-order-detail","tenant-product-detail","hide-benefit"])):Vue.createCommentVNode("",!0),D])),Vue.unref(ae)&&!Vue.unref(me)?(Vue.openBlock(),Vue.createBlock(N,{key:2,"product-detail":Vue.unref(te)},null,8,["product-detail"])):Vue.createCommentVNode("",!0),U,Vue.unref(oe)?(Vue.openBlock(),Vue.createBlock(Vue.unref(S),{key:3,show:Vue.unref(oe),"onUpdate:show":t[1]||(t[1]=e=>Vue.isRef(oe)?oe.value=e:null),"content-list":Vue.unref(re)?Vue.unref(be):Vue.unref(ye),"is-only-view":Vue.unref(re),"active-index":Vue.unref(ue),text:Vue.unref(re)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":Vue.unref(re)?0:Vue.unref(ge),onSubmit:_e,onOnCloseFilePreviewByMask:Oe},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):Vue.createCommentVNode("",!0)],64)}}});export{G as default};

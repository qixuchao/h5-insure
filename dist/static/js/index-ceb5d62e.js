import{ref as e,reactive as a,onMounted as i,watch as u}from"vue";import{c as l}from"./cloneDeep-6abacc69.js";import{B as t,b as n,R as r}from"./index-973d3f66.js";function o(e){return Object.keys(e)}const s=vue.defineComponent({name:"InsureInfos"}),d=vue.defineComponent({...s,props:{originData:{default:()=>({})},modelValue:{default:()=>({})},defaultValue:{default:()=>({})},trialResult:{default:()=>({})}},emits:["trialChange"],setup(s,{expose:d,emit:v}){const m=s,f=e(null),c=e({}),g=e({}),k=a({personalInfo:{},basicsAmount:"",basicsPremium:"",defaultValues:m.defaultValue,changeData:null,sValues:c.value});vue.inject("premium"),g.value=vue.inject("enumList")||{},i((()=>{}));const p=e=>{m.originData.mainRiskFlag,c.value.riskCategory=m.originData.riskCategory,c.value.riskCode=m.originData.riskCode,c.value.riskId=m.originData.riskId,c.value.riskType=m.originData.riskType,c.value.riskName=m.originData.riskName,c.value.riskType=m.originData.riskType,c.value.mainRiskCode=m.originData.mainRiskCode,c.value.mainRiskId=m.originData.mainRiskId,e?v("trialChange",c.value,e):v("trialChange",c.value)},V=(e,a)=>{a?c.value[a.key]=a.newValue:o(e).forEach((a=>{c.value[a]=e[a]})),p(a)},D=e=>{var a,i;1==+(null==(i=null==(a=m.originData)?void 0:a.productRiskInsureLimitVO)?void 0:i.amountPremiumConfigVO.saleMethod)?k.basicsAmount=null==e?void 0:e.initialAmount:k.basicsAmount=null==e?void 0:e.initialPremium,o(e).forEach((a=>{c.value[a]=e[a]})),p()},C=e=>{c.value.liabilityList=e,p()};return u((()=>m.defaultValue),(e=>{e&&(console.log("--default change ",e),k.defaultValues=l(e),c.value={...e})}),{deep:!0,immediate:!0}),u((()=>c.value),(e=>{k.sValues=e}),{deep:!0,immediate:!0}),d({validate:async()=>{var e;await(null==(e=f.value)?void 0:e.validate())}}),(e,a)=>{var i,u,l,o,s,d;const v=vue.resolveComponent("ProCard");return 1===(null==(i=e.originData)?void 0:i.factorDisPlayFlag)?(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:0},[vue.createVNode(v,{title:"保障计划",class:"insurePlan","show-divider":!1}),vue.createVNode(vue.unref(t),{"v-model":vue.unref(k).sValues,"origin-data":null==(l=null==(u=e.originData)?void 0:u.productRiskInsureLimitVO)?void 0:l.amountPremiumConfigVO,"defalut-value":vue.unref(k).defaultValues,"trial-result":e.trialResult,onTrialChange:D},null,8,["v-model","origin-data","defalut-value","trial-result"]),vue.createVNode(vue.unref(n),{"v-model":vue.unref(k).sValues,"use-data":vue.unref(k).sValues,"origin-data":e.originData.productRiskInsureLimitVO,"risk-info":e.originData,"default-value":vue.unref(k).defaultValues,onTrialChange:V},null,8,["v-model","use-data","origin-data","risk-info","default-value"]),vue.createVNode(vue.unref(r),{"data-source-folmulate":vue.unref(c),"data-source":e.originData,params:{amountUnit:null==(s=null==(o=e.originData)?void 0:o.productRiskInsureLimitVO)?void 0:s.amountPremiumConfigVO.displayUnit,basicsAmount:vue.unref(k).basicsAmount,basicsPremium:vue.unref(k).basicsPremium,riskId:null==(d=e.originData)?void 0:d.riskId},"default-value":vue.unref(k).defaultValues,onTrialChange:C},null,8,["data-source-folmulate","data-source","params","default-value"])],64)):vue.createCommentVNode("",!0)}}});export{d as _};

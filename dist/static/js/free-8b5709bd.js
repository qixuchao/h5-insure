import{i as T,ax as Z,r as w,N as V,$ as Q,m,s as I,B as n,C as t,t as p,Z as W,a5 as J,a6 as K,P as z,k as M,l as O,p as x,L as j,F as G,G as $,aa as X,ay as Y,n as R,H as ee,x as q}from"./vendor-87894311.js";import{P as N}from"./index-d746320d.js";import{B as te}from"./index-2cc1fc1d.js";import{_ as oe}from"./index-f11bd0ed.js";import{a as ue,s as se}from"./phoneVerify-c5c18918.js";import{_ as H}from"./index-dd334c46.js";import{q as ne,p as re,g as ae}from"./product-35f93839.js";import{i as ie,t as le,n as de}from"./trial-121f55b1.js";import{f as ce}from"./utils-d07cbf48.js";import{u as pe}from"./theme-fdbb0f53.js";import"./check-detail-c292a89b.js";import"./infoCollection-9b1626aa.js";import"./relativeTime-89dc646e.js";import"./useDicData-80d301b9.js";import"./useStorage-7cf89dc9.js";import"./trial-2c2f0d38.js";var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAMAAACBgxnEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA8UExURUdwTPpkAPpkAPpkAPlkAPlkAP9fAPpkAP9jAPljAPljAPlkAPdhAP9VAPhlAPpjAPpiAPpkAPlhAPpkAKrbDd8AAAATdFJOUwCe3XX6YBgzC+yKwSIDTrE+0C9Hm6hZAAAAf0lEQVR42u2MSw6AIAxEi6CCf+j976ommvG3omxMOqv2vczQmZa3tPRMptdZndVZndXZf892/JGOxN68qUEr24/zk84jSvne93fae3Qk3scrjZeWzDcVaNUQIvRDOGkYQOU+hYMmsBJ+cTt1C0gZP7mNTvhL+Zq5xlfOW4tb6le9ZDBDk4RvXwAAAABJRU5ErkJggg==";const fe=l=>(J("data-v-5e63eef8"),l=l(),K(),l),Ae={class:"free-crad"},_e={class:"container"},Fe={class:"title"},me=["src"],Ce=fe(()=>n("span",null,"\u6700\u540E\u4E00\u6B65 \u586B\u5199\u4FE1\u606F",-1)),he=["src"],Be=T({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}}},setup(l){const r=l;Z(s=>({"3e2712f6":r.colors[0],"3e2712b8":r.colors[1]}));const C=w(),h=V({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u624B\u673A\u53F7"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u9A8C\u8BC1\u7801"}],2:[],3:[]},isFirst:!0}),i=()=>{var s;h.factorObj=(s=r.insureDetail)==null?void 0:s.productFactor,console.log(r.insureDetail,"detail====")},d=async(s,a)=>{const v=await(r.isFirst?ue:se)(s),{code:c,data:o}=v;console.log(C.value.validateForm(),"slslslw=="),c==="10000"&&(a==null||a())};return Q(()=>r.isFirst,()=>{r.isFirst||i()}),(s,a)=>(m(),I("div",Ae,[n("div",_e,[n("div",Fe,[n("img",{src:t(L)},null,8,me),Ce,n("img",{src:t(L)},null,8,he)]),p(oe,{ref_key:"formRef",ref:C,"send-sms-code":d,"form-info":l.detail,"factor-object":t(h).factorObj},null,8,["form-info","factor-object"]),W(s.$slots,"default",{},void 0,!0)])]))}});var De=H(Be,[["__scopeId","data-v-5e63eef8"]]),ve="/static/assets/logo.65e1895e.png";const ge={class:"pre-body"},ye={class:"header"},Ee=["src"],we={class:"company-name"},Ie={class:"content"},Pe=$(" \u4E3A\u4E86\u66F4\u597D\u5730\u4FDD\u62A4\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\uFF0C\u8BF7\u5728\u4F7F\u7528\u524D\u70B9\u51FB\u9605\u8BFB\u3001\u5145\u5206\u7406\u89E3"),ke=$("\u76F8\u5173\u5185\u5BB9\uFF0C\u6211\u4EEC\u5BF9\u60A8\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u53EF\u80FD\u51FA\u73B0\u7684\u4E2A\u4EBA\u4FE1\u606F\u6536\u96C6\u3001\u4F7F\u7528\u3001\u5171\u4EAB\u548C\u4FDD\u62A4\u7B49\u60C5\u51B5\u8FDB\u884C\u4E86\u8BE6\u7EC6\u8BF4\u660E\u3002 \u60A8\u5DF2\u8FDB\u5165\u6295\u4FDD\u6D41\u7A0B\uFF0C\u8BF7\u4ED4\u7EC6\u9605\u8BFB"),xe=$("\u3001\u6295\u4FDD\u987B\u77E5\u3001\u4FDD\u9669\u6761\u6B3E\u7B49\u4FE1\u606F\uFF0C\u4E3A\u7EF4\u62A4\u60A8\u7684\u5408\u6CD5\u6743\u76CA\uFF0C\u60A8\u7684\u64CD\u4F5C\u8F68\u8FF9\u5C06\u88AB\u8BB0\u5F55\u3002 "),be={class:"footer"},Oe=T({props:{productDetail:{type:Object,default:()=>{}}},setup(l){const r=l,C=z(),{tenantId:h="9991000001"}=C.query,i=w(!0),d=w(!1),s=V({insureConfig:{insureName:"",tenantName:""}}),a=w({title:"",link:""}),D=(c,o)=>{var e;d.value=!d.value,a.value.link=(e=s.insureConfig)==null?void 0:e[o].link,a.value.title=c.target.innerText},v=async()=>{const{code:c,data:o}=await ne({insureCode:r.productDetail.insurerCode,tenantId:h});c==="10000"&&(s.insureConfig=o,console.log(o,"slslls")),i.value=!0};return M(()=>{i.value=!1,v()}),(c,o)=>{var P;const e=O("ProPopup"),b=O("ProFilePreview");return m(),I(G,null,[p(e,{class:"pre-notice-wrap",show:i.value,closeable:!1,height:49},{default:x(()=>[n("div",ge,[n("div",ye,[n("img",{src:t(ve)},null,8,Ee),n("div",we," \u7531"+j(t(s).insureConfig.tenantName)+"\u63D0\u4F9B\u4FDD\u9669\u7ECF\u7EAA\u670D\u52A1\uFF0C"+j(t(s).insureConfig.insureName)+"\u627F\u4FDD ",1)]),n("div",Ie,[Pe,n("span",{onClick:o[0]||(o[0]=u=>D(u,"privacyAgreement"))},"\u300A\u7528\u6237\u9690\u79C1\u534F\u8BAE\u300B"),ke,n("span",{onClick:o[1]||(o[1]=u=>D(u,"notification"))},"\u300A\u5BA2\u6237\u544A\u77E5\u4E66\u300B"),xe]),n("div",be,[p(N,{shadow:!1,text:"\u6211\u77E5\u9053\u4E86",onClick:o[2]||(o[2]=u=>i.value=!1)})])])]),_:1},8,["show"]),p(e,{show:d.value,"onUpdate:show":o[3]||(o[3]=u=>d.value=u),class:"pre-notice-wrap",title:(P=a.value)==null?void 0:P.title,position:"bottom",style:{height:"600px"}},{default:x(()=>{var u;return[p(b,{content:(u=a.value)==null?void 0:u.link,type:"link"},null,8,["content"])]}),_:1},8,["show","title"])],64)}}});var Ne=H(Oe,[["__scopeId","data-v-3c05b098"]]);const Te={class:"page-free-product-detail"},Ve={class:"product-desc"},$e=["src"],He={key:0,class:"page-free-footer"},Se=T({setup(l){Z(u=>({f05ba59a:t(e).colors[1]}));const r=pe(),C=X(),h=z(),{productCode:i="BWYL2021",openId:d="oKugN52glZx_hhg7liu0WpWcmD5o",tenantId:s="9991000001",indirectCode:a="123",saleUserId:D="",saleChannelId:v=""}=h.query;let c="";const o=w(),e=V({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},banner:"",productDesc:[],newAuth:!0,insureDetail:{},loading:!0,showBtn:!1}),b=async()=>{e.loading=!0;const u=re({productCode:i,withInsureInfo:!0,tenantId:s}),f=ie({productCode:i}),B=ae({openId:d});await Promise.all([u,f,B]).then(([A,_,g])=>{var y,E,S;if(A.code==="10000"){e.detail=A.data,e.banner=(y=e.detail.tenantProductInsureVO)==null?void 0:y.banner[0];const{colorEnd:F,colorStart:k}=((E=e.detail.tenantProductInsureVO)==null?void 0:E.backgroundInsureVO)||{};e.colors=[k,F],e.productDesc=e.detail.tenantProductInsureVO.spec||[],document.title=e.detail.productFullName||""}_.code==="10000"&&(e.insureDetail=_.data,e.insureDetail.productFactor[2]=(S=e.insureDetail.productFactor)==null?void 0:S[2].map(F=>{var k,U;return F.code==="relationToHolder"&&F.isDisplay===1&&(F.title="\u88AB\u4FDD\u4EBA",e.order.tenantOrderInsuredList[0].relationToHolder=((U=(k=F.attributeValueList)==null?void 0:k[0])==null?void 0:U.code)||""),F})),g.code==="10000"&&(e.newAuth=!g.data),e.loading=!1})},P=async()=>{var B,A,_,g;const u=e.newAuth?le:de;let f={loginType:"2",openId:d,thirdUserType:"XINAO_WECHAT",indirectCode:a};e.newAuth?(f.loginName=e.order.tenantOrderHolder.mobile,f.password=e.order.tenantOrderHolder.verificationCode):f=ce({order:e.order,tenantId:s,detail:e.detail,insureDetail:e.insureDetail,iseeBizNo:c,saleUserId:D,saleChannelId:v,pageCode:"infoCollection",buttonCode:"EVENT_FREE_multiIssuePolicy"});try{const{code:y,data:E}=await u(f);y==="10000"&&(!e.newAuth&&((A=(B=E.pageAction)==null?void 0:B.data)==null?void 0:A.orderNo)&&C.push(`/baseInsurance/orderDetail?from=free&tenantId=${s}&orderNo=${(g=(_=E.pageAction)==null?void 0:_.data)==null?void 0:g.orderNo}&productCode=${i}`),e.newAuth=!1)}catch{console.log("e")}};return M(()=>{b(),setTimeout(async()=>{c=window.getIseeBiz&&await window.getIseeBiz()},1500)}),Y(o,([{isIntersecting:u}],f)=>{e.showBtn=!u}),(u,f)=>{const B=O("van-config-provider");return m(),R(B,{"theme-vars":t(r)},{default:x(()=>[n("div",Te,[p(te,{url:t(e).banner},null,8,["url"]),p(De,{"is-first":t(e).newAuth,"insure-detail":t(e).insureDetail,detail:t(e).order,colors:t(e).colors},{default:x(()=>[p(N,{ref_key:"root",ref:o,class:"submit-btn","is-gradient":!1,text:t(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C",onClick:P},null,8,["text"])]),_:1},8,["is-first","insure-detail","detail","colors"]),n("div",Ve,[(m(!0),I(G,null,ee(t(e).productDesc,(A,_)=>(m(),I("img",{key:_,src:A},null,8,$e))),128))]),t(e).showBtn?(m(),I("footer",He,[p(N,{"is-gradient":!1,text:t(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C"},null,8,["text"])])):q("",!0)]),t(e).loading?q("",!0):(m(),R(Ne,{key:0,"product-detail":t(e).detail},null,8,["product-detail"]))]),_:1},8,["theme-vars"])}}});var tt=H(Se,[["__scopeId","data-v-2fa15c54"]]);export{tt as default};

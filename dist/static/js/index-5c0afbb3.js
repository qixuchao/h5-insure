var H=Object.defineProperty,J=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var D=(s,t,e)=>t in s?H(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,x=(s,t)=>{for(var e in t||(t={}))W.call(t,e)&&D(s,e,t[e]);if(T)for(var e of T(t))X.call(t,e)&&D(s,e,t[e]);return s},I=(s,t)=>J(s,K(t));import{g as L,v as S,k as n,m as u,y as c,z as a,A as V,I as p,s as Y,F as R,E as z,Q as Z,L as ee,a0 as te,C as F,ab as ae,M as se,n as E,a6 as oe,h as b,j as q,G as ce,T as ne,aa as re,r as w,a5 as le,B as ue}from"./vendor-e9263418.js";import{u as ie,d as de}from"./index-b8742a0a.js";import{b as _e,c as pe}from"./poster-34ef176f.js";import{_ as me}from"./index-e4c11be9.js";const ve={class:"item-checked"},he=["src"],ye={class:"item-left"},ge={key:0,class:"item-title item-title-type1"},ke={class:"item-right"},Ce={class:"item-right-name"},fe={class:"item-right-sec"},xe={class:"item-right-bottom"},Ee=L({props:{data:{type:Object,required:!0},checked:{type:Boolean}},emits:["on-click"],setup(s,{emit:t}){const e=s,{getIconUrl:h}=ie(),{data:r}=S(e),y=()=>{t("on-click",e.data)};return(B,$)=>(n(),u("div",{class:"item",onClick:y},[c("span",ve,[c("img",{src:a(h)("poster.checked"),alt:"",style:V({display:`${e.checked?"inherit":"none"}`})},null,12,he)]),c("div",ye,[a(r).productImgText?(n(),u("div",ge,p(a(r).productImgText),1)):Y("",!0),c("div",{class:"ig",style:V({backgroundImage:`url(${a(r).productImg})`})},null,4)]),c("div",ke,[c("div",Ce,p(a(r).productName),1),c("div",fe,p(a(r).productSummary),1),c("div",xe,[c("div",null,[(n(!0),u(R,null,z(a(r).productLabel,(g,d)=>(n(),u("span",{key:d,class:"tag"},p(g),1))),128))]),c("div",null,p(a(r).productPrice),1)])])]))}});const be={class:"poster-product-list"},we={class:"search"},Be={class:"footer"},$e=ue("\u786E\u5B9A"),qe=L({emits:["on-submit"],setup(s,{emit:t}){const e=Z(),{productName:h,productUrl:r,productCode:y,qrCodeType:B}=e.query,$=ee({list:[],tagList:[{labelCategoryName:"\u5168\u90E8",id:"0"}],keyword:""}),g=te(),d=F("0"),_=F({productCode:""}),{list:k,tagList:C,keyword:m}=S($);ae(()=>{_.value={productCode:y,productName:h,productUrl:r}});const A=async()=>{const{data:o}=await _e({});let l=[];l=o.data.map(v=>({labelCategoryName:v.categoryName,id:v.categoryCode})),C.value=C.value.concat(l)},f=async o=>{const{data:l}=await pe(x({},o));k.value=l.data};se(()=>{A(),f({})});const O=(o,l)=>{d.value=o,f({keyword:m.value,productCategory:o==="0"?void 0:o})},P=o=>{_.value=o},U=o=>{f({keyword:o,productCategory:d.value==="0"?void 0:d.value})},j=()=>{_.value.productCode?g.replace({name:"posterDetail",query:I(x({},re(_.value)),{qrCodeType:B})}):ne("\u8BF7\u9009\u62E9\u4EA7\u54C1")};return(o,l)=>{const v=w("van-search"),M=w("van-list"),G=w("van-button"),Q=le("resize");return n(),u("div",be,[c("div",we,[E(v,{modelValue:a(m),"onUpdate:modelValue":l[0]||(l[0]=i=>oe(m)?m.value=i:null),placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u8BCD",shape:"round",onSearch:U},null,8,["modelValue"])]),E(de,{"tag-list":a(C),filter:!1,onCurrentIndex:O},null,8,["tag-list"]),c("div",null,[a(k).length>0?(n(),b(M,{key:0,loading:!1,"finished-text":"- \u5DF2\u7ECF\u5230\u5E95\u4E86\u54E6 -"},{default:q(()=>[(n(!0),u(R,null,z(a(k),i=>{var N;return n(),b(Ee,{key:i.productId,checked:((N=a(_))==null?void 0:N.productCode)===i.productCode,data:i,onOnClick:Ne=>P(i)},null,8,["checked","data","onOnClick"])}),128))]),_:1})):(n(),b(me,{key:1,class:"empty",title:"\u6682\u65E0\u4EA7\u54C1"}))]),ce((n(),u("div",Be,[E(G,{type:"primary",class:"btn",onClick:j},{default:q(()=>[$e]),_:1})])),[[Q]])])}}});export{qe as default};

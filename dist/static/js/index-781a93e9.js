import{av as e,d as i,r as a,E as l,ax as o,b9 as t,am as n,aw as r,f as s,A as u,a4 as d,aZ as m,b1 as c,ba as p,aV as f,ay as v,bb as y,bc as g,b2 as k,bd as b,be as V,bf as I,bg as h,aB as L,_ as D,J as C,o as O,c as R,g as A,w as P,i as x,F as w,h as T,e as _,k as F,t as M,m as U,n as N,v as q,C as S,q as E,x as Y,B as $,a$ as j,X as B,Y as G,S as H,bh as K,ac as z,j as W,aL as J,aE as X,b5 as Z,y as Q,l as ee,b6 as ie,bi as ae,bj as le,G as oe,bk as te,W as ne,V as re,aD as se,b4 as ue,ao as de,ai as me,aF as ce}from"./index-9effc651.js";import{S as pe,d as fe,e as ve,f as ye,A as ge,g as ke,L as be,h as Ve}from"./trial-c6e14b52.js";import{u as Ie}from"./useDicData-8bc6a182.js";const[he,Le]=e("stepper"),De=(e,i)=>String(e)===String(i);const Ce=L(i({name:he,props:{min:p(1),max:p(1/0),name:p(""),step:p(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:f,showMinus:f,showInput:f,longPress:f,allowEmpty:Boolean,modelValue:v,inputWidth:v,buttonSize:v,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:p(1),decimalLength:v},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:i}){const p=i=>{const{min:a,max:l,allowEmpty:o,decimalLength:t}=e;return o&&""===i||(i=""===(i=y(String(i),!e.integer))?0:+i,i=Number.isNaN(i)?+a:i,i=Math.max(Math.min(+l,i),+a),g(t)&&(i=i.toFixed(+t))),i};let f;const v=a(),L=a((()=>{var a;const l=null!=(a=e.modelValue)?a:e.defaultValue,o=p(l);return De(o,e.modelValue)||i("update:modelValue",o),o})()),D=l((()=>e.disabled||e.disableMinus||L.value<=+e.min)),C=l((()=>e.disabled||e.disablePlus||L.value>=+e.max)),O=l((()=>({width:o(e.inputWidth),height:o(e.buttonSize)}))),R=l((()=>t(e.buttonSize))),A=i=>{e.beforeChange?I(e.beforeChange,{args:[i],done(){L.value=i}}):L.value=i},P=()=>{if("plus"===f&&C.value||"minus"===f&&D.value)return void i("overlimit",f);const a="minus"===f?-e.step:+e.step,l=p(h(+L.value,a));A(l),i(f)},x=i=>{const a=i.target,{value:l}=a,{decimalLength:o}=e;let t=y(String(l),!e.integer);if(g(o)&&t.includes(".")){const e=t.split(".");t=`${e[0]}.${e[1].slice(0,+o)}`}e.beforeChange?a.value=String(L.value):De(l,t)||(a.value=t);const n=t===String(+t);A(n?+t:t)},w=a=>{var l;e.disableInput?null==(l=v.value)||l.blur():i("focus",a)},T=e=>{const a=e.target,l=p(a.value);a.value=String(l),L.value=l,k((()=>{i("blur",e),b()}))};let _,F;const M=()=>{F=setTimeout((()=>{P(),M()}),200)},U=i=>{e.longPress&&(clearTimeout(F),_&&V(i))},N=i=>{e.disableInput&&V(i)},q=i=>({onClick:e=>{V(e),f=i,P()},onTouchstartPassive:()=>{f=i,e.longPress&&(_=!1,clearTimeout(F),F=setTimeout((()=>{_=!0,P(),M()}),600))},onTouchend:U,onTouchcancel:U});return n((()=>[e.max,e.min,e.integer,e.decimalLength]),(()=>{const e=p(L.value);De(e,L.value)||(L.value=e)})),n((()=>e.modelValue),(e=>{De(e,L.value)||(L.value=p(e))})),n(L,(a=>{i("update:modelValue",a),i("change",a,{name:e.name})})),r((()=>e.modelValue)),()=>s("div",{role:"group",class:Le([e.theme])},[u(s("button",m({type:"button",style:R.value,class:[Le("minus",{disabled:D.value}),{[c]:!D.value}],"aria-disabled":D.value||void 0},q("minus")),null),[[d,e.showMinus]]),u(s("input",{ref:v,type:e.integer?"tel":"text",role:"spinbutton",class:Le("input"),value:L.value,style:O.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":L.value,onBlur:T,onInput:x,onFocus:w,onMousedown:N},null),[[d,e.showInput]]),u(s("button",m({type:"button",style:R.value,class:[Le("plus",{disabled:C.value}),{[c]:!C.value}],"aria-disabled":C.value||void 0},q("plus")),null),[[d,e.showPlus]])])}}));const Oe={class:"com-risk-list-wrapper"},Re=(e=>(B("data-v-7d3c3028"),e=e(),G(),e))((()=>x("div",{class:"popup-title"},"选择附加险",-1))),Ae={class:"risk-list"},Pe={class:"cell-title"},xe={class:"title"},we={class:"footer-button"},Te=N("确认");var _e=D(i({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const l=e,o=a([]),t=a([]),r=a([...l.disabled]),u=C({show:l.show,currentChecked:[...l.modelValue]}),d=e=>{var i,a,t;if(r.value.includes(e))return;((e,i)=>{if(!l.collocationList.length)return i?void(u.currentChecked=[]):void u.currentChecked.push(e);let a=u.currentChecked,o=r.value;i?(l.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?a=a.filter((a=>a!==i.collocationRiskId||a!==e)):3===i.collocationType?(a=a.filter((i=>i!==e)),o=o.filter((e=>e!==i.collocationRiskId))):a=a.filter((i=>i!==e)))})),u.currentChecked=a,r.value=o):(l.collocationList.forEach((l=>{e===l.riskId&&(i||(2===l.collocationType?a.push(l.collocationRiskId):3===l.collocationType&&o.push(l.collocationRiskId),a.push(e)))})),u.currentChecked.push(...a),r.value=o)})(e,u.currentChecked.includes(e)),null==(t=null==(a=null==(i=null==o?void 0:o.value)?void 0:i[e])?void 0:a.toggle)||t.call(a)},m=()=>{i("close")},c=()=>{const e=l.riskList.filter((e=>u.currentChecked.includes(e.id)));i("update:modelValue",[...new Set(t.value)]),i("finished",e,r.value),i("close")};return O((()=>{o.value=[]})),n((()=>u.currentChecked),(e=>{t.value=e}),{deep:!0,immediate:!0}),n((()=>l.modelValue),(e=>{t.value=e||[],r.value.push(...e||[])}),{deep:!0,immediate:!0}),(i,a)=>{const l=q,n=S,p=E,f=Y,v=$,y=j;return R(),A("div",Oe,[s(y,{show:U(u).show,"onUpdate:show":a[1]||(a[1]=e=>U(u).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:m},{default:P((()=>[Re,x("div",Ae,[s(f,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e)},{default:P((()=>[s(p,{inset:""},{default:P((()=>[(R(!0),A(w,null,T(e.riskList,(e=>(R(),_(n,{key:e.id,title:e.riskName,disabled:r.value.includes(e.id),onClick:i=>d(e.id)},{"right-icon":P((()=>[s(l,{ref_for:!0,ref:i=>o.value[e.id]=i,shape:"square",disabled:r.value.includes(e.id),name:e.id,onClick:F((i=>d(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:P((()=>[x("div",Pe,[x("div",xe,M(e.riskName),1)])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),x("div",we,[s(v,{type:"primary",disabled:!U(u).currentChecked.length,block:"",onClick:c},{default:P((()=>[Te])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-7d3c3028"]]);const Fe={class:"com-personal-info-wrapper"},Me={class:"pro-radio-wrap"},Ue={class:"pro-radio-wrap"};var Ne=D(i({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(e,{expose:i}){var o,t;const n=e,r=Ie(`${null==(t=null==(o=n.insuredCode)?void 0:o.toLocaleUpperCase)?void 0:t.call(o)}_OCCUPATION`),[u,d]=H(),m=a(),c=K("source")||{},p=C({formInfo:n.formInfo,occupationalText:"",occupationCodeList:[]}),f=l((()=>{const e=(e=>{const i=e||[];for(let a=0,l=i.length;a<l;a++)for(let e=a+1;e<l;e++){const l=i[a].split("_"),o=i[e].split("_"),t=i[a];l[0]===o[0]?l>o&&(i[a]=i[e],i[e]=t):"age"===l[0]&&(i[a]=i[e],i[e]=t)}return i})(null==n?void 0:n.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],a=i(e[0]),l=i(e[e.length-1]),o=z().subtract(a[0],"age"===a[1]?"year":"day").format("YYYY-MM-DD");let t=z().subtract(l[0],"age"===l[1]?"year":"day").format("YYYY-MM-DD");return z(t).subtract(1,"year").isBefore(o)&&(t=z(t).subtract(1,"year").add(1,"day").format("YYYY-MM-DD")),{minAge:new Date(t),maxAge:new Date(o)}}));return i({validateForm:()=>new Promise(((e,i)=>{var a;null==(a=m.value)||a.validate().then((()=>{e("")}),(e=>{var a;null==(a=m.value)||a.scrollToField(null==e?void 0:e[0].name),i()}))})),ageRangeObj:f.value}),(i,a)=>{const l=Q,o=ee,t=ie,n=ae,v=j;return R(),A("div",Fe,[s(t,{ref_key:"formRef",ref:m,"input-align":"right","error-message-align":"right"},{default:P((()=>["proposal"===U(c).type&&("add"===U(c).type||"repeatAdd"===U(c).type)||"proposal"!==U(c).type&&(e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY"))?(R(),_(l,{key:0,modelValue:U(p).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>U(p).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink",readonly:"","is-link":"",formatter:e=>e?U(z)(e).format("YYYY-MM-DD"):e,placeholder:"请选择",onClick:a[1]||(a[1]=e=>U(d)(!0))},null,8,["modelValue","formatter"])):W("",!0),"proposal"===U(c).type&&("add"===U(c).type||"repeatAdd"===U(c).type)||"proposal"!==U(c).type&&(e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER"))?(R(),_(l,{key:1,modelValue:U(p).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>U(p).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:P((()=>[x("div",Me,[s(o,{modelValue:U(p).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>U(p).formInfo.gender=e),options:U(J)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):W("",!0),e.factorList.includes("SOCIAL_INS")||e.factorList.includes("APPLICANT.SOCIAL_INS")?(R(),_(l,{key:2,modelValue:U(p).formInfo.socialFlag,"onUpdate:modelValue":a[5]||(a[5]=e=>U(p).formInfo.socialFlag=e),name:"socialFlag",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:P((()=>[x("div",Ue,[s(o,{modelValue:U(p).formInfo.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=e=>U(p).formInfo.socialFlag=e),options:U(pe)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):W("",!0),e.factorList.includes("OCCUPATION_CATEGORY")||e.factorList.includes("APPLICANT.OCCUPATION_CATEGORY")?(R(),_(X,{key:3,modelValue:U(p).formInfo.occupationCodeList[0],"onUpdate:modelValue":a[6]||(a[6]=e=>U(p).formInfo.occupationCodeList[0]=e),field0:U(p).formInfo.occupationCodeList[0],"onUpdate:field0":a[7]||(a[7]=e=>U(p).formInfo.occupationCodeList[0]=e),field1:U(p).formInfo.occupationCodeList[1],"onUpdate:field1":a[8]||(a[8]=e=>U(p).formInfo.occupationCodeList[1]=e),field2:U(p).formInfo.occupationCodeList[2],"onUpdate:field2":a[9]||(a[9]=e=>U(p).formInfo.occupationCodeList[2]=e),required:"",name:"occupationCodeList",label:"职业类型","data-source":U(r),mapping:{label:"value",value:"code",children:"children"},"show-full-value":"","need-key":"name"},null,8,["modelValue","field0","field1","field2","data-source"])):W("",!0)])),_:1},512),s(v,{show:U(u),"onUpdate:show":a[12]||(a[12]=e=>Z(u)?u.value=e:null),position:"bottom"},{default:P((()=>[s(n,{type:"date","min-date":U(f).minAge,"max-date":U(f).maxAge,onConfirm:a[10]||(a[10]=e=>{U(p).formInfo.birthday=U(z)(e).format("YYYY-MM-DD"),U(d)(!1)}),onCancel:a[11]||(a[11]=e=>U(d)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-b6a7c104"]]);const qe={class:"risk-responsibility"},Se={class:"title"},Ee={class:"content"};var Ye=D(i({props:{modelValue:Boolean,title:{type:String,default:""},minHeight:{type:[Number,String],default:80},maxHeight:{type:[Number,String],default:200}},emits:["update:modelValue"],setup(e,{emit:i}){const o=e;le();const t=a();oe((()=>{t.value=o.modelValue}));const n=l((()=>t.value?`${o.maxHeight}px`:`${o.minHeight}px`)),r=()=>{t.value=!t.value,i("update:modelValue",t.value)};return(i,a)=>{const l=re;return R(),A("div",qe,[x("div",Se,M(e.title),1),x("div",{class:"responsibility-content",style:ne({height:U(n)})},[x("div",Ee,[te(i.$slots,"default",{},void 0,!0)]),x("div",{class:"show-button",onClick:r},[x("span",null,M(t.value?"收起":"展开"),1),s(l,{style:{width:"20px",height:"20px"},name:t.value?"arrow-up":"arrow-down"},null,8,["name"])])],4)])}}}),[["__scopeId","data-v-27faf794"]]);const $e={class:"com-risk-card-wrapper part-card"},je={class:"custom-field"},Be={class:"field-tip"},Ge={class:"custom-field"},He={class:"field-tip"},Ke={class:"custom-field"},ze={class:"field-tip"},We={class:"pro-radio-wrap"},Je={class:"pro-radio-wrap"},Xe={class:"pro-radio-wrap"},Ze={class:"pro-radio-wrap"},Qe={class:"pro-radio-wrap"},ei={key:0},ii={key:1,class:"pro-radio-wrap"},ai={key:9,class:"liab-desc"};var li=D(i({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(e){const i=e,o=a({}),t=K("premium")||{};o.value=K("enumList")||{};const r=a({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),u=C({formInfo:i.formInfo}),d=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"[object Object]"==={}.toString.call(e)&&Object.keys(e).length),m=(e,i,a={})=>{let l=i;return Array.isArray(i)||(l=[`${l}`]),(e||[]).filter((e=>l.includes(`${e.value}`)||l.includes(e.value)))},c=l((()=>{var e,a,l,o,t,n,r,s;return 1===(null==(e=i.originData)?void 0:e.riskType)?m(i.enums.RISK_INSURANCE_PERIOD,(null==(a=i.originData.riskInsureLimitVO)?void 0:a.insurancePeriodValueList)||[]):2===(null==(l=i.originData)?void 0:l.periodType)?m([{value:"year_1",name:"1年"}],["year_1"]):1===(null==(o=i.originData)?void 0:o.exemptFlag)?m(fe,[`${null==(n=null==(t=null==i?void 0:i.originData)?void 0:t.riskInsureLimitVO)?void 0:n.insurancePeriodRule}`]):m(null==(r=i.enums)?void 0:r.RISK_INSURANCE_PERIOD,(null==(s=i.mainRiskData.riskInsureLimitVO)?void 0:s.insurancePeriodValueList)||[])})),p=l((()=>{var e,a,l,o,t,n,r,s;return 1===(null==(e=i.originData)?void 0:e.riskType)?m(null==(a=null==i?void 0:i.enums)?void 0:a.RISK_PAYMENT_PERIOD,(null==(l=i.originData.riskInsureLimitVO)?void 0:l.paymentPeriodValueList)||[]):1===(null==(o=i.originData)?void 0:o.exemptFlag)?m(ve,[`${null==(n=null==(t=null==i?void 0:i.originData)?void 0:t.riskInsureLimitVO)?void 0:n.paymentPeriodRule}`]):2===(null==(r=i.originData)?void 0:r.periodType)?m([{value:"year_1",name:"1年交"}],["year_1"]):m(i.enums.RISK_PAYMENT_PERIOD,(null==(s=i.mainRiskData.riskInsureLimitVO)?void 0:s.paymentPeriodValueList)||[])})),f=l((()=>{var e,a,l,o,t;return 1===(null==(e=i.originData)?void 0:e.riskType)?m(ye,(null==(a=i.originData.riskInsureLimitVO)?void 0:a.paymentFrequencyList)||[]):1===(null==(l=i.originData.riskInsureLimitVO)?void 0:l.paymentTypeRule)?m(ye,(null==(o=i.mainRiskData.riskInsureLimitVO)?void 0:o.paymentFrequencyList)||[]):m(ye,(null==(t=i.mainRiskData.riskInsureLimitVO)?void 0:t.paymentFrequencyList)||[])})),v=l((()=>{var e,a;let l=0,o=0;return((null==(a=null==(e=i.originData)?void 0:e.riskCalcMethodInfoVO)?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minAmount,o=e.maxAmount),l>e.minAmount&&(l=e.minAmount),o<e.maxAmount&&(o=e.maxAmount)})),u.formInfo.amount=u.formInfo.amount||l,{min:l,max:o||1/0}})),y=l((()=>{var e,a;let l=0,o=0;return((null==(a=null==(e=i.originData)?void 0:e.riskCalcMethodInfoVO)?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minPremium,o=e.maxPremium),l>e.minPremium&&(l=e.minPremium),o<e.maxPremium&&(o=e.maxPremium)})),u.formInfo.premium=u.formInfo.premium||l,{min:l,max:o||1/0}})),g=l((()=>{var e,a,l,o;const t=(null==(a=null==(e=i.originData)?void 0:e.riskCalcMethodInfoVO)?void 0:a.minCopy)||1,n=null==(o=null==(l=i.originData)?void 0:l.riskCalcMethodInfoVO)?void 0:o.maxCopy;return u.formInfo.copy=`${u.formInfo.copy||t||1}`,{min:t,max:n}})),k=(e,a,l)=>{var o,t;const n=(null==(t=null==(o=i.originData)?void 0:o.riskCalcMethodInfoVO)?void 0:t.increaseDecreaseNum)||1;if("sumInsured"===l){if(v.value.max&&+e>v.value.max)return`金额最大${v.value.max}元`;if(+e<v.value.min)return`金额最小${v.value.min}元`}else{if(y.value.max&&+e>y.value.max)return`金额最大${y.value.max}元`;if(+e<y.value.min)return`金额最小${y.value.min}元`}return+e%n==0?"":`金额必须是${n}的倍数`},b=e=>{var i;const a=((null==(i=u.formInfo)?void 0:i.liabilityVOList)||[]).find((i=>i.liabilityCode===e.liabilityCode));return a?a.liabilityAttributeValue?a.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return se((()=>{var e,a,l,o;const t={riskType:i.originData.riskType,riskId:i.originData.id,riskName:i.originData.riskName,riskCode:i.originData.riskCode,amount:u.formInfo.amount,mainRiskCode:1!==i.originData.riskType?null==(e=i.mainRiskData)?void 0:e.riskCode:void 0,mainRiskId:1!==i.originData.riskType?null==(a=i.mainRiskData)?void 0:a.id:void 0,exemptFlag:i.originData.exemptFlag,exemptType:i.originData.exemptType,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType,liabilityAttributeValue:b(e)})))};[1].includes((null==(l=i.originData.riskCalcMethodInfoVO)?void 0:l.saleMethod)||0)&&1!==(null==(o=i.originData)?void 0:o.exemptFlag)||!i.originData.riskCalcMethodInfoVO.fixedAmount||(t.amount=i.originData.riskCalcMethodInfoVO.fixedAmount),Object.assign(u.formInfo,t)})),n((()=>{var e;return null==(e=u.formInfo)?void 0:e.paymentFrequency}),((e=0)=>{var a,l,o;[3].includes((null==(a=i.originData.riskCalcMethodInfoVO)?void 0:a.saleMethod)||0)&&((null==(o=null==(l=i.originData)?void 0:l.riskCalcMethodInfoVO)?void 0:o.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(u.formInfo,{amount:i.perCopyAmount,premium:i.perCopyPremium})})),1==+e&&"single"!==u.formInfo.chargePeriod&&(u.formInfo.chargePeriod="single")})),n((()=>{var e;return null==(e=u.formInfo)?void 0:e.copy}),(e=>{var a,l;4===(null==(a=i.originData.riskCalcMethodInfoVO)?void 0:a.saleMethod)&&(u.formInfo.amount=null==(l=i.originData.riskCalcMethodInfoVO)?void 0:l.fixedAmount)})),n((()=>{var e;return null==(e=u.formInfo)?void 0:e.chargePeriod}),(e=>{"single"===e&&1!=+(u.formInfo.paymentFrequency||0)&&(u.formInfo.paymentFrequency=1)})),n((()=>null==i?void 0:i.mainRiskInfo),(e=>{var a,l,o,t,n,s;e&&2===i.originData.riskType&&(1===(null==(l=null==(a=i.originData)?void 0:a.riskInsureLimitVO)?void 0:l.insurancePeriodRule)&&(e.coveragePeriod?r.value.coveragePeriod.disabled=!0:r.value.coveragePeriod.prevent=!0,u.formInfo.coveragePeriod=e.coveragePeriod||""),1===(null==(t=null==(o=i.originData)?void 0:o.riskInsureLimitVO)?void 0:t.paymentPeriodRule)&&(e.chargePeriod?r.value.chargePeriod.disabled=!0:r.value.chargePeriod.prevent=!0,u.formInfo.chargePeriod=e.chargePeriod||""),1===(null==(s=null==(n=i.originData)?void 0:n.riskInsureLimitVO)?void 0:s.paymentTypeRule)&&(e.paymentFrequency?r.value.paymentFrequency.disabled=!0:r.value.paymentFrequency.prevent=!0,u.formInfo.paymentFrequency=e.paymentFrequency||0))}),{immediate:!0,deep:!0}),(i,a)=>{var l,o,n,b,V,I,h,L,D,C,O,F,N,q,S,E,Y,$,j,B,G,H,K,z,J,X,Z,ie,ae,le;const oe=re,te=ue,ne=Ce,se=Q,me=ee,ce=de;return R(),A("div",$e,[s(te,{"risk-type":e.originData.riskType,title:e.originData.riskName},{default:P((()=>[e.removeRiskList.includes(e.originData.id)?(R(),A("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=i=>e.removeRisk(e.originData.id))},[s(oe,{name:"img-lajitong",color:"#0d6efe"})])):W("",!0)])),_:1},8,["risk-type","title"]),1===(null==(l=e.originData.riskCalcMethodInfoVO)?void 0:l.saleMethod)&&2===e.originData.exemptFlag?(R(),_(se,{key:0,modelValue:U(u).formInfo.amount,"onUpdate:modelValue":a[2]||(a[2]=e=>U(u).formInfo.amount=e),label:"保额",name:"amount",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>k(...e,"sumInsured")}]},{input:P((()=>{var i,l;return[x("div",je,[s(ne,{modelValue:U(u).formInfo.amount,"onUpdate:modelValue":a[1]||(a[1]=e=>U(u).formInfo.amount=e),"input-width":"64px",min:U(v).min,step:(null==(i=e.originData.riskCalcMethodInfoVO)?void 0:i.increaseDecreaseNum)||1,max:U(v).max},null,8,["modelValue","min","step","max"]),x("span",Be,M(`金额最低${U(v).min}元，为${(null==(l=e.originData.riskCalcMethodInfoVO)?void 0:l.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):W("",!0),2===(null==(n=null==(o=e.originData)?void 0:o.riskCalcMethodInfoVO)?void 0:n.saleMethod)?(R(),_(se,{key:1,modelValue:U(u).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>U(u).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>k(...e,"premium")}]},{input:P((()=>{var i,l,o,t;return[x("div",Ge,[s(ne,{modelValue:U(u).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>U(u).formInfo.premium=e),step:(null==(l=null==(i=e.originData)?void 0:i.riskCalcMethodInfoVO)?void 0:l.increaseDecreaseNum)||1,min:U(y).min,"input-width":"64px",max:U(y).max},null,8,["modelValue","step","min","max"]),x("span",He,M(`金额最低${U(y).min}元，为${(null==(t=null==(o=e.originData)?void 0:o.riskCalcMethodInfoVO)?void 0:t.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):W("",!0),3===(null==(V=null==(b=e.originData)?void 0:b.riskCalcMethodInfoVO)?void 0:V.saleMethod)||4===(null==(h=null==(I=e.originData)?void 0:I.riskCalcMethodInfoVO)?void 0:h.saleMethod)&&((null==(D=null==(L=e.originData)?void 0:L.riskCalcMethodInfoVO)?void 0:D.minCopy)||(null==(O=null==(C=e.originData)?void 0:C.riskCalcMethodInfoVO)?void 0:O.maxCopy))?(R(),_(se,{key:2,modelValue:U(u).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>U(u).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:P((()=>[x("div",Ke,[s(ne,{modelValue:U(u).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>U(u).formInfo.copy=e),step:1,min:U(g).min,max:U(g).max},null,8,["modelValue","min","max"]),x("span",ze,M(`${U(g).min}份起购，最多购买${U(g).max}份`),1)])])),_:1},8,["modelValue"])):W("",!0),[1].includes((null==(F=e.originData.riskCalcMethodInfoVO)?void 0:F.saleMethod)||0)&&1!==(null==(N=e.originData)?void 0:N.exemptFlag)||!e.originData.riskCalcMethodInfoVO.fixedAmount&&!(null==(S=U(t))?void 0:S[null==(q=e.originData)?void 0:q.riskCode])?W("",!0):(R(),_(se,{key:3,label:"保额"},{input:P((()=>{var i,a,l,o;return[x("div",null,M((null==(i=e.originData.riskCalcMethodInfoVO)?void 0:i.fixedAmount)||(null==(o=null==(l=U(t))?void 0:l[null==(a=e.originData)?void 0:a.riskCode])?void 0:o.amount)),1)]})),_:1})),d(null==(Y=null==(E=e.originData)?void 0:E.riskInsureLimitVO)?void 0:Y.insurancePeriodValueList)&&d(null==(j=null==($=e.originData)?void 0:$.riskInsureLimitVO)?void 0:j.insurancePeriodRule)?W("",!0):(R(),_(ce,{key:4,modelValue:U(u).formInfo.coveragePeriod,"onUpdate:modelValue":a[8]||(a[8]=e=>U(u).formInfo.coveragePeriod=e),label:"保障期间",name:"coveragePeriod",rules:[{required:!0,message:"请选择保障期间"}]},{input:P((()=>[x("div",We,[s(me,{modelValue:U(u).formInfo.coveragePeriod,"onUpdate:modelValue":a[7]||(a[7]=e=>U(u).formInfo.coveragePeriod=e),disabled:r.value.coveragePeriod.disabled,prevent:r.value.coveragePeriod.prevent?"请先选择主险保障期间":"",options:U(c),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),d(null==(G=null==(B=e.originData)?void 0:B.riskInsureLimitVO)?void 0:G.paymentPeriodValueList)&&d(null==(K=null==(H=e.originData)?void 0:H.riskInsureLimitVO)?void 0:K.paymentPeriodRule)?W("",!0):(R(),_(ce,{key:5,modelValue:U(u).formInfo.chargePeriod,"onUpdate:modelValue":a[10]||(a[10]=e=>U(u).formInfo.chargePeriod=e),label:"交费期间",name:"chargePeriod",rules:[{required:!0,message:"请选择交费期间"}]},{input:P((()=>[x("div",Je,[s(me,{modelValue:U(u).formInfo.chargePeriod,"onUpdate:modelValue":a[9]||(a[9]=e=>U(u).formInfo.chargePeriod=e),disabled:r.value.chargePeriod.disabled,prevent:r.value.chargePeriod.prevent?"请先选择主险交费期间":"",options:U(p),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),d(null==(z=e.originData.riskInsureLimitVO)?void 0:z.paymentFrequencyList)&&d(null==(J=e.originData.riskInsureLimitVO)?void 0:J.paymentPeriodRule)?W("",!0):(R(),_(ce,{key:6,modelValue:U(u).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>U(u).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:P((()=>[x("div",Xe,[s(me,{modelValue:U(u).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>U(u).formInfo.paymentFrequency=e),disabled:r.value.paymentFrequency.disabled,prevent:r.value.paymentFrequency.prevent?"请先选择主险交费方式":"",options:U(f)},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),d(null==(Z=null==(X=e.originData)?void 0:X.riskInsureLimitVO)?void 0:Z.annuityDrawValueList)?W("",!0):(R(),_(ce,{key:7,modelValue:U(u).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>U(u).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate"},{input:P((()=>{var i;return[x("div",Ze,[s(me,{modelValue:U(u).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>U(u).formInfo.annuityDrawDate=e),options:m(U(ge),(null==(i=e.originData.riskInsureLimitVO)?void 0:i.annuityDrawValueList)||[])},null,8,["modelValue","options"])])]})),_:1},8,["modelValue"])),d(null==(ae=null==(ie=e.originData)?void 0:ie.riskInsureLimitVO)?void 0:ae.annuityDrawFrequencyList)?W("",!0):(R(),_(ce,{key:8,modelValue:U(u).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>U(u).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType"},{input:P((()=>{var i;return[x("div",Qe,[s(me,{modelValue:U(u).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>U(u).formInfo.annuityDrawType=e),options:m(U(ke),(null==(i=e.originData.riskInsureLimitVO)?void 0:i.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])])]})),_:1},8,["modelValue"])),(R(!0),A(w,null,T(e.originData.riskLiabilityInfoVOList||[],((i,a)=>(R(),A(w,{key:a},[1!==i.optionalFlag||d(i.liabilityAttributeValueList)?W("",!0):(R(),_(se,{key:0,modelValue:U(u).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>U(u).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:P((()=>{var l,o;return[x("div",null,[d(i.liabilityAttributeValueList)?(R(),A("span",ei,"50万")):(R(),A("div",ii,[s(me,{modelValue:U(u).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>U(u).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:m(U(be),null==(o=null==(l=e.originData.riskLiabilityInfoVOList)?void 0:l[a])?void 0:o.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"])]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])),1!==i.optionalFlag?(R(),_(se,{key:1,modelValue:U(u).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>U(u).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:P((()=>{var l,o;return[x("div",null,[d(i.liabilityAttributeValueList)?(R(),_(me,{key:0,modelValue:U(u).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>U(u).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:U(Ve)},null,8,["modelValue","onUpdate:modelValue","options"])):(R(),_(me,{key:1,modelValue:U(u).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>U(u).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:m(U(be),null==(o=null==(l=e.originData.riskLiabilityInfoVOList)?void 0:l[a])?void 0:o.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"])):W("",!0)],64)))),128)),(null==(le=e.originData)?void 0:le.relationDesc)?(R(),A("div",ai,[s(Ye,{title:"责任投保说明"},{default:P((()=>[x("div",null,M(e.originData.relationDesc),1)])),_:1})])):W("",!0)])}}}),[["__scopeId","data-v-3b9c2786"]]);const oi={class:"risk-list-wrapper"},ti={key:0,class:"add-rider-risk"},ni={class:"left-part"},ri=(e=>(B("data-v-4b309d85"),e=e(),G(),e))((()=>x("span",{class:"btn-plus"},"+",-1))),si=N(" 附加险");var ui=D(i({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(e){const i=e,l=K("source")||{},[o,t]=H(!1);a(null),a(null);const r=C({mainRiskInfo:i.riskInfo,riskInfo:i.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),u=(e,i)=>{r.currentRiskList=r.currentRiskList.concat(e),r.disabledList=i},d=e=>{me.confirm({message:"确定要删除附加险么？",confirmButtonText:"删除"}).then((()=>{var i;const a=[e];((null==(i=r.mainRiskData)?void 0:i.collocationVOList)||[]).forEach((i=>{e!==i.riskId||2!==i.collocationType&&3!==i.collocationType||a.push(i.collocationRiskId)})),r.checkedList=r.checkedList.filter((e=>!a.includes(e))),r.currentRiskList=r.currentRiskList.filter((e=>!a.includes(e.id)||(Object.assign(r.riskInfo,{[e.id]:void 0}),!1))),r.disabledList=r.disabledList.filter((e=>!a.includes(e)))})).catch((()=>{}))},m=(e,i)=>{var a,l;const o=((null==(l=null==(a=r.riskInfo)?void 0:a[i])?void 0:l.liabilityVOList)||[]).find((i=>i.liabilityCode===e.liabilityCode));return o?o.liabilityAttributeValue?o.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return n((()=>r.currentRiskList),(e=>{const a=[r.mainRiskData,...e];let l=[],o=[];const t=[];a.forEach(((e,i)=>{var a,n,r;const s=(null==(a=null==e?void 0:e.riskCalcMethodInfoVO)?void 0:a.riskFactorRelationList)||[];l=l.concat(s.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),o=o.concat(s.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),t.push(null==(n=null==e?void 0:e.riskInsureLimitVO)?void 0:n.minHolderAge,null==(r=null==e?void 0:e.riskInsureLimitVO)?void 0:r.maxHolderAge)})),(e||[]).forEach((e=>{var a,l;const o={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,riskName:e.riskName,mainRiskCode:1!==e.riskType?null==(a=r.mainRiskData)?void 0:a.riskCode:void 0,mainRiskId:1!==e.riskType?null==(l=r.mainRiskData)?void 0:l.id:void 0,riskCategory:e.riskCategory,exemptFlag:i.originData.exemptFlag,exemptType:i.originData.exemptType,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((i=>({...i,liabilityAttributeCode:i.liabilityAttributeType,liabilityCode:i.liabilityCode,liabilityRateType:i.liabilityRateType,liabilityAttributeValue:m(i,e.id)})))};r.riskInfo[e.id]||Object.assign(r.riskInfo,{[e.id]:o})})),i.pickFactor({insuredFactorList:[...new Set(l)],holderFactorList:[...new Set(o)],ageRange:t})}),{deep:!0,immediate:!0}),n((()=>i.riskInfo),(e=>{r.mainRiskInfo=Object.values(e||{}).find((e=>1===(null==e?void 0:e.riskType)))||{}}),{deep:!0,immediate:!0}),n((()=>i.originData),(e=>{let i=[];const a=[];"proposal"===l.origin&&"add"!==l.type&&"repeatAdd"!==l.type?((e||[]).forEach((e=>{1===e.riskType&&(r.mainRiskData=e),i.push(e)})),i=i.filter((e=>l.showRiskList.includes(e.id)))):(e||[]).forEach((e=>{1===e.riskType?(r.mainRiskData=e,i.push(e)):2===e.collocationType?i.push(e):a.push(e)})),r.riderRiskList=a,r.currentRiskList=i}),{deep:!0,immediate:!0}),(i,a)=>{var n,m,c;const p=ce;return R(),A("div",oi,[(R(!0),A(w,null,T(U(r).currentRiskList,((i,a)=>(R(),_(li,{key:i.id,"form-info":U(r).riskInfo[i.id],index:a,enums:e.enums,"main-risk-data":U(r).mainRiskData,"main-risk-info":U(r).mainRiskInfo,"origin-data":i,"remove-risk":d,"remove-risk-list":U(r).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),(null==(n=U(r).riderRiskList)?void 0:n.length)-(null==(m=U(r).checkedList)?void 0:m.length)&&"proposal"!==U(l).origin?(R(),A("div",ti,[x("span",ni,M(`共有${U(r).riderRiskList.length-U(r).checkedList.length}款附加险可以添加`),1),s(p,{activated:"",class:"btn-rider-risk",onClick:a[0]||(a[0]=e=>U(t)(!0))},{default:P((()=>[ri,si])),_:1})])):W("",!0),U(o)?(R(),_(_e,{key:1,modelValue:U(r).checkedList,"onUpdate:modelValue":a[1]||(a[1]=e=>U(r).checkedList=e),show:U(o),disabled:U(r).disabledList,"risk-list":U(r).riderRiskList,"collocation-list":(null==(c=U(r).mainRiskData)?void 0:c.collocationVOList)||[],onFinished:u,onClose:a[2]||(a[2]=e=>U(t)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):W("",!0)])}}}),[["__scopeId","data-v-4b309d85"]]);export{Ne as P,_e as R,ui as a};

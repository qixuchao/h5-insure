import{d as e,dR as a,j as l,k as t,z as n,a6 as s,b$ as i,cr as o,dz as u,o as r,c as d,a as c,u as v,F as p,q as m,n as f,e as g,f as b,m as h,a8 as y,b as k,af as C,aH as w,w as S,p as L,V as E,_ as j,dS as U,E as N,cY as $,dT as A,au as B,av as P,aw as _}from"./index-0aeac8ce.js";import{a as x}from"./jsbridgePromise-1a7f0ae2.js";import{o as z}from"./utils-fd9b71b5.js";import"./infoCollection-7e0fb9db.js";import"./trial-9470be30.js";const T={class:"guarantee-list"},V=(e=>(P("data-v-72bcb63c"),e=e(),_(),e))((()=>c("span",null,"保障计划",-1))),q={key:0,class:"plan-list"},F=["onClick"],D={key:2,class:"feerate-view"},I={key:0},R={class:"extinfo-info-list"},Y={class:"guarantee-detail"},G={class:"content"},H=e({name:"guarantee"});var M=j(e({...H,props:{dataSource:{default:()=>({})},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{default:5},planList:{default:()=>[]}},emits:["updateActivePlan"],setup(e,{emit:j}){var P,_;const H=e;a((e=>({"47c8f96c":v(M)})));const M=l(""),O=l((null==(_=null==(P=H.planList)?void 0:P[0])?void 0:_.planCode)||void 0),J=l(),K=l([]),Q=l([]),W=l(),X=t((()=>!!H.planList.length));n([()=>H.dataSource,()=>O.value],(()=>{var e,a;K.value=((null==(a=((null==(e=H.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===O.value)))?void 0:a.data)||[]).filter((e=>e.isShowOn===`${s.YES}`))}),{immediate:!0,deep:!0});const Z=t((()=>{var e;return(null==(e=H.dataSource)?void 0:e.rateUri)||""})),ee=t((()=>!!(W.value&&W.value.paymentFrequencyValue&&W.value.premiumUnit&&Z))),[ae,le]=i(!1),te=t((()=>{var e;return!(!K.value||!(null==(e=K.value)?void 0:e.length))&&(K.value.length>H.count&&(!!H.isShowClose||!ae.value))})),ne=()=>{le()},se=t((()=>{var e;return K.value&&(null==(e=K.value)?void 0:e.length)?K.value.length<=H.count||ae.value?K.value:K.value.slice(0,H.count):[]})),ie=l(!1),oe=e=>{const a=e||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,"A"===a.target.tagName&&a.target.href&&(U()?x("",a.target.href):window.open(a.target.href))},ue=()=>{ie.value=!0,N((()=>{var e,a;null==(a=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||a.addEventListener("click",oe,!1)}))};o((()=>{var e,a;null==(a=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||a.removeEventListener("click",oe,!1)}));const re=()=>{z({fileType:"pdf",fileUri:Z.value})},de=e=>{O.value=H.planList[e.name].planCode};return(a,l)=>{var t,n;const s=$,i=A,o=B,U=u("dompurify-html");return r(),d(p,null,[c("div",T,[c("div",{class:"header"},[V,c("span",{onClick:ue},"查看详情")]),v(X)?(r(),d("div",q,[(r(!0),d(p,null,m(e.planList,((e,a)=>(r(),d("div",{key:`${e.planCode}_${a}`,class:f("plan-list-item "+(e.planCode===v(O)?"plan-list-item-active":"")),onClick:a=>{return l=e.planCode,O.value=l,J.value=H.planList.findIndex((e=>e.planCode===l)),void j("updateActivePlan",l);var l}},[c("span",null,g(e.planName),1)],10,F)))),128))])):b("",!0),(r(!0),d(p,null,m(v(se),((e,a)=>(r(),h(s,{key:a,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),v(te)?(r(),d("div",{key:1,class:"show-more",onClick:ne},[y(g(v(ae)?"收起":"查看更多")+" ",1),k(C,{name:"arrow-down-dobule",class:f(["icon",{showMore:v(ae)}])},null,8,["class"])])):b("",!0),v(ee)?(r(),d("div",D,[c("span",null,g(`${(null==(t=v(W))?void 0:t.paymentFrequencyValue)||""}${(null==(n=v(W))?void 0:n.premiumUnit)||""}`),1),v(Z)?(r(),d("span",{key:0,onClick:re},"查看保费")):b("",!0)])):b("",!0)]),k(w),k(o,{show:v(ie),"onUpdate:show":l[1]||(l[1]=e=>L(ie)?ie.value=e:null),title:"保障详情",class:"guarantee-popup"},{default:S((()=>[v(Q)&&v(Q).length>0?(r(),d("div",I,[c("div",R,[(r(!0),d(p,null,m(v(Q),((e,a)=>(r(),h(s,{key:a,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),k(w)])):b("",!0),v(X)?(r(),h(i,{key:1,active:v(J),"onUpdate:active":l[0]||(l[0]=e=>L(J)?J.value=e:null),list:e.planList.map(((e,a)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:de},null,8,["active","list"])):b("",!0),c("div",Y,[(r(!0),d(p,null,m(v(K),((e,a)=>(r(),d("div",{key:a,class:"guarantee-item"},[k(s,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),E(c("div",G,null,512),[[U,e.tips]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-72bcb63c"]]);export{M as default};

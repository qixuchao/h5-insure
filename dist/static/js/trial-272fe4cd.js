var xe=Object.defineProperty,Be=Object.defineProperties;var Ue=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var _e=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var Re=(n,o,y)=>o in n?xe(n,o,{enumerable:!0,configurable:!0,writable:!0,value:y}):n[o]=y,G=(n,o)=>{for(var y in o||(o={}))_e.call(o,y)&&Re(n,y,o[y]);if(Ae)for(var y of Ae(o))Me.call(o,y)&&Re(n,y,o[y]);return n},K=(n,o)=>Be(n,Ue(o));import{g as S,a5 as Ee,E as _,a4 as q,M as Y,y as N,d as H,r as A,j as g,n as x,p as C,m as F,A as i,k as h,t as E,a6 as Ne,o as $e,X as U,z as P,J as $,F as X,G as z,ak as we,al as qe,a1 as Se,a2 as Ye,C as Pe,D as je}from"./vendor-83047d1f.js";import{S as Ge,a as Ke,R as He,b as W,A as We,c as Xe,L as Oe,d as ze}from"./trial-9725ad38.js";import{_ as j,c as Je,b as Te}from"./index-e01a306c.js";import{u as Qe}from"./useDicData-a9e9889d.js";const Ze={class:"com-personal-info-wrapper"},ei=S({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(n,{expose:o}){var V,m;const y=n,T=Qe(`${(m=(V=y.insuredCode)==null?void 0:V.toLocaleUpperCase)==null?void 0:m.call(V)}_OCCUPATION`),[b,t]=Ee(),I=_(),v=q("source")||{},D=Y({formInfo:y.formInfo,occupationalText:""}),k=()=>new Promise((f,e)=>{I==null||I.value.validate().then(()=>{f("")},()=>{e()})}),R=f=>{const e=f||[];for(let a=0;a<e.length;a++)for(let l=a+1;l<e.length;l++){const s=e[a].split("_"),u=e[l].split("_"),c=e[a];s[0]===u[0]?s>u&&(e[a]=e[l],e[l]=c):s[0]==="age"&&(e[a]=e[l],e[l]=c)}return e},r=N(()=>{const f=R(y==null?void 0:y.ageRange),e=(c="")=>{const p=+c.split("_")[1],w=c.split("_")[0];return[p,w]},a=e(f[0]),l=e(f[f.length-1]),s=H().subtract(a[0],a[1]==="age"?"year":"day").format("YYYY-MM-DD"),u=H().subtract(l[0],l[1]==="age"?"year":"day").format("YYYY-MM-DD");return console.log("ageRangeObj",new Date(u),new Date(s)),{minAge:new Date(u),maxAge:new Date(s)}});return o({validateForm:k,ageRangeObj:r.value}),(f,e)=>{const a=A("VanField"),l=A("ProRadioButton"),s=A("VanForm"),u=A("van-datetime-picker"),c=A("van-popup");return g(),x("div",Ze,[C(s,{ref_key:"formRef",ref:I,"input-align":"right","error-message-align":"right"},{default:F(()=>[i(v).type==="proposal"&&(i(v).type==="add"||i(v).type==="repeatAdd")||i(v).type!=="proposal"&&(n.factorList.includes("APPLICANT.AGE")||n.factorList.includes("AGE")||n.factorList.includes("DAY")||n.factorList.includes("APPLICANT.DAY"))?(g(),h(a,{key:0,modelValue:i(D).formInfo.birthday,"onUpdate:modelValue":e[0]||(e[0]=p=>i(D).formInfo.birthday=p),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F",class:"isLink",readonly:"","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[1]||(e[1]=p=>i(t)(!0))},null,8,["modelValue"])):E("",!0),i(v).type==="proposal"&&(i(v).type==="add"||i(v).type==="repeatAdd")||i(v).type!=="proposal"&&(n.factorList.includes("APPLICANT.GENDER")||n.factorList.includes("GENDER"))?(g(),h(a,{key:1,modelValue:i(D).formInfo.gender,"onUpdate:modelValue":e[3]||(e[3]=p=>i(D).formInfo.gender=p),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},{input:F(()=>[C(l,{modelValue:i(D).formInfo.gender,"onUpdate:modelValue":e[2]||(e[2]=p=>i(D).formInfo.gender=p),options:i(Ge)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):E("",!0),n.factorList.includes("SOCIAL_INS")?(g(),h(a,{key:2,modelValue:i(D).formInfo.socialFlag,"onUpdate:modelValue":e[5]||(e[5]=p=>i(D).formInfo.socialFlag=p),name:"socialFlag",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u793E\u4FDD"}]},{input:F(()=>[C(l,{modelValue:i(D).formInfo.socialFlag,"onUpdate:modelValue":e[4]||(e[4]=p=>i(D).formInfo.socialFlag=p),options:i(Ke)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):E("",!0),n.factorList.includes("OCCUPATION_CATEGORY")?(g(),h(Je,{key:3,modelValue:i(D).formInfo.occupationClass,"onUpdate:modelValue":e[6]||(e[6]=p=>i(D).formInfo.occupationClass=p),required:"",name:"occupationClass",label:"\u804C\u4E1A\u7C7B\u578B","data-source":i(T),mapping:{label:"value",value:"code",children:"children"},"show-full-value":""},null,8,["modelValue","data-source"])):E("",!0)]),_:1},512),C(c,{show:i(b),"onUpdate:show":e[9]||(e[9]=p=>Ne(b)?b.value=p:null),position:"bottom"},{default:F(()=>[C(u,{type:"date","min-date":i(r).minAge,"max-date":i(r).maxAge,onConfirm:e[7]||(e[7]=p=>{i(D).formInfo.birthday=i(H)(p).format("YYYY-MM-DD"),i(t)(!1)}),onCancel:e[8]||(e[8]=p=>i(t)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"])])}}});var Ti=j(ei,[["__scopeId","data-v-375c57be"]]);const ii={class:"com-risk-card-wrapper part-card"},ti={class:"custom-field"},ai={class:"field-tip"},oi={class:"custom-field"},ni={class:"field-tip"},ui={class:"custom-field"},ri={class:"field-tip"},li={key:0},si={key:9,class:"liab-desc"},di=S({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(n){const o=n,y=_({}),T=q("premium")||{};y.value=q("enumList")||{};const b=_({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),t=Y({formInfo:o.formInfo}),I=e=>typeof e!="boolean"&&!e||Array.isArray(e)&&!e.length?!0:{}.toString.call(e)==="[object Object]"?Object.keys(e).length:!1,v=(e,a,l={})=>{let s=a;return Array.isArray(a)||(s=[`${s}`]),(e||[]).filter(u=>s.includes(`${u.value}`)||s.includes(u.value))},D=N(()=>{var e,a,l,s,u;return((e=o.originData)==null?void 0:e.riskType)===1?v(o.enums.RISK_INSURANCE_PERIOD,((a=o.originData.riskInsureLimitVO)==null?void 0:a.insurancePeriodValueList)||[]):((l=o.originData)==null?void 0:l.periodType)===2?v([{value:"year_1",name:"1\u5E74"}],["year_1"]):v((s=o.enums)==null?void 0:s.RISK_INSURANCE_PERIOD,((u=o.mainRiskData.riskInsureLimitVO)==null?void 0:u.insurancePeriodValueList)||[])}),k=N(()=>{var e,a,l,s,u,c,p,w;return((e=o.originData)==null?void 0:e.riskType)===1?v((a=o==null?void 0:o.enums)==null?void 0:a.RISK_PAYMENT_PERIOD,((l=o.originData.riskInsureLimitVO)==null?void 0:l.paymentPeriodValueList)||[]):((s=o.originData)==null?void 0:s.exemptFlag)===1?v(He,[`${(c=(u=o==null?void 0:o.originData)==null?void 0:u.riskInsureLimitVO)==null?void 0:c.paymentPeriodRule}`]):((p=o.originData)==null?void 0:p.periodType)===2?v([{value:"year_1",name:"1\u5E74\u4EA4"}],["year_1"]):v(o.enums.RISK_PAYMENT_PERIOD,((w=o.mainRiskData.riskInsureLimitVO)==null?void 0:w.paymentPeriodValueList)||[])}),R=N(()=>{var e,a,l,s,u;return((e=o.originData)==null?void 0:e.riskType)===1?v(W,((a=o.originData.riskInsureLimitVO)==null?void 0:a.paymentFrequencyList)||[]):((l=o.originData.riskInsureLimitVO)==null?void 0:l.paymentTypeRule)===1?v(W,((s=o.mainRiskData.riskInsureLimitVO)==null?void 0:s.paymentFrequencyList)||[]):v(W,((u=o.mainRiskData.riskInsureLimitVO)==null?void 0:u.paymentFrequencyList)||[])}),r=N(()=>{var l,s;let e=0,a=0;return(((s=(l=o.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:s.paymentMethodLimitList)||[]).forEach((u,c)=>{c===0&&(e=u.minAmount,a=u.maxAmount),e>u.minAmount&&(e=u.minAmount),a<u.maxAmount&&(a=u.maxAmount)}),t.formInfo.amount=t.formInfo.amount||e,{min:e,max:a}}),V=N(()=>{var l,s;let e=0,a=0;return(((s=(l=o.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:s.paymentMethodLimitList)||[]).forEach((u,c)=>{c===0&&(e=u.minPremium,a=u.maxPremium),e>u.minPremium&&(e=u.minPremium),a<u.maxPremium&&(a=u.maxPremium)}),t.formInfo.premium=t.formInfo.premium||e,{min:e,max:a}}),m=N(()=>{var l,s,u,c;const e=((s=(l=o.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:s.minCopy)||1,a=(c=(u=o.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:c.maxCopy;return t.formInfo.copy=`${t.formInfo.copy||e||1}`,{min:e,max:a}}),f=(e,a,l)=>{var u,c;const s=((c=(u=o.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:c.increaseDecreaseNum)||1;if(l==="sumInsured"){if(r.value.max&&+e>r.value.max)return`\u91D1\u989D\u6700\u5927${r.value.max}\u5143`;if(+e<r.value.min)return`\u91D1\u989D\u6700\u5C0F${r.value.min}\u5143`}else{if(V.value.max&&+e>V.value.max)return`\u91D1\u989D\u6700\u5927${V.value.max}\u5143`;if(+e<V.value.min)return`\u91D1\u989D\u6700\u5C0F${V.value.min}\u5143`}return+e%s===0?"":`\u91D1\u989D\u5FC5\u987B\u662F${s}\u7684\u500D\u6570`};return $e(()=>{var a,l;const e={riskType:o.originData.riskType,riskId:o.originData.id,riskName:o.originData.riskName,riskCode:o.originData.riskCode,mainRiskCode:o.originData.riskType!==1?(a=o.mainRiskData)==null?void 0:a.riskCode:void 0,mainRiskId:o.originData.riskType!==1?(l=o.mainRiskData)==null?void 0:l.id:void 0,riskCategory:o.originData.riskCategory,liabilityVOList:(o.originData.riskLiabilityInfoVOList||[]).map(s=>K(G({},s),{liabilityAttributeCode:s.liabilityAttributeType,liabilityCode:s.liabilityCode,liabilityRateType:s.liabilityRateType}))};Object.assign(t==null?void 0:t.formInfo,e)}),U(()=>{var e;return(e=t.formInfo)==null?void 0:e.paymentFrequency},(e=0)=>{var a,l,s;[3].includes(((a=o.originData.riskCalcMethodInfoVO)==null?void 0:a.saleMethod)||0)&&(((s=(l=o.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:s.paymentMethodLimitList)||[]).forEach(u=>{+u.paymentFrequency==+e&&Object.assign(t.formInfo,{amount:u.perCopyAmount,premium:u.perCopyPremium})}),+e==1&&t.formInfo.chargePeriod!=="single"&&(t.formInfo.chargePeriod="single")}),U(()=>{var e;return(e=t.formInfo)==null?void 0:e.copy},e=>{var a,l;((a=o.originData.riskCalcMethodInfoVO)==null?void 0:a.saleMethod)===4&&(t.formInfo.amount=(l=o.originData.riskCalcMethodInfoVO)==null?void 0:l.fixedAmount)}),U(()=>{var e;return(e=t.formInfo)==null?void 0:e.chargePeriod},e=>{e==="single"&&+(t.formInfo.paymentFrequency||0)!=1&&(t.formInfo.paymentFrequency=1)}),U(()=>o==null?void 0:o.mainRiskInfo,e=>{var a,l,s,u,c,p;e&&o.originData.riskType===2&&(((l=(a=o.originData)==null?void 0:a.riskInsureLimitVO)==null?void 0:l.insurancePeriodRule)===1&&(e.coveragePeriod?b.value.coveragePeriod.disabled=!0:b.value.coveragePeriod.prevent=!0,t.formInfo.coveragePeriod=e.coveragePeriod||""),((u=(s=o.originData)==null?void 0:s.riskInsureLimitVO)==null?void 0:u.paymentPeriodRule)===1&&(e.chargePeriod?b.value.chargePeriod.disabled=!0:b.value.chargePeriod.prevent=!0,t.formInfo.chargePeriod=e.chargePeriod||""),((p=(c=o.originData)==null?void 0:c.riskInsureLimitVO)==null?void 0:p.paymentTypeRule)===1&&(e.paymentFrequency?b.value.paymentFrequency.disabled=!0:b.value.paymentFrequency.prevent=!0,t.formInfo.paymentFrequency=e.paymentFrequency||0))},{immediate:!0,deep:!0}),(e,a)=>{var J,Q,Z,ee,ie,te,ae,oe,ne,ue,re,le,se,de,me,ce,fe,pe,ye,ge,De,ke,Ve,Ie,ve,Le,be,Fe,Ce,he;const l=A("ProSvg"),s=A("ProTitle"),u=A("VanStepper"),c=A("VanField"),p=A("ProRadioButton"),w=A("ProExpand");return g(),x("div",ii,[C(s,{"risk-type":n.originData.riskType,title:n.originData.riskName},{default:F(()=>[n.removeRiskList.includes(n.originData.id)?(g(),x("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=d=>n.removeRisk(n.originData.id))},[C(l,{name:"delete",color:"#0d6efe"})])):E("",!0)]),_:1},8,["risk-type","title"]),((J=n.originData.riskCalcMethodInfoVO)==null?void 0:J.saleMethod)===1&&n.originData.exemptFlag===2?(g(),h(c,{key:0,modelValue:i(t).formInfo.amount,"onUpdate:modelValue":a[2]||(a[2]=d=>i(t).formInfo.amount=d),label:"\u4FDD\u989D",name:"amount",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...d)=>f(...d,"sumInsured")}]},{input:F(()=>{var d,L;return[P("div",ti,[C(u,{modelValue:i(t).formInfo.amount,"onUpdate:modelValue":a[1]||(a[1]=O=>i(t).formInfo.amount=O),"input-width":"64px",min:i(r).min,step:((d=n.originData.riskCalcMethodInfoVO)==null?void 0:d.increaseDecreaseNum)||1,max:i(r).max},null,8,["modelValue","min","step","max"]),P("span",ai,$(`\u91D1\u989D\u6700\u4F4E${i(r).min}\u5143\uFF0C\u4E3A${((L=n.originData.riskCalcMethodInfoVO)==null?void 0:L.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):E("",!0),((Z=(Q=n.originData)==null?void 0:Q.riskCalcMethodInfoVO)==null?void 0:Z.saleMethod)===2?(g(),h(c,{key:1,modelValue:i(t).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=d=>i(t).formInfo.premium=d),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...d)=>f(...d,"premium")}]},{input:F(()=>{var d,L,O,B;return[P("div",oi,[C(u,{modelValue:i(t).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=M=>i(t).formInfo.premium=M),step:((L=(d=n.originData)==null?void 0:d.riskCalcMethodInfoVO)==null?void 0:L.increaseDecreaseNum)||1,min:i(V).min,"input-width":"64px",max:i(V).max},null,8,["modelValue","step","min","max"]),P("span",ni,$(`\u91D1\u989D\u6700\u4F4E${i(V).min}\u5143\uFF0C\u4E3A${((B=(O=n.originData)==null?void 0:O.riskCalcMethodInfoVO)==null?void 0:B.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):E("",!0),((ie=(ee=n.originData)==null?void 0:ee.riskCalcMethodInfoVO)==null?void 0:ie.saleMethod)===3||((ae=(te=n.originData)==null?void 0:te.riskCalcMethodInfoVO)==null?void 0:ae.saleMethod)===4&&(((ne=(oe=n.originData)==null?void 0:oe.riskCalcMethodInfoVO)==null?void 0:ne.minCopy)||((re=(ue=n.originData)==null?void 0:ue.riskCalcMethodInfoVO)==null?void 0:re.maxCopy))?(g(),h(c,{key:2,modelValue:i(t).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=d=>i(t).formInfo.copy=d),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:F(()=>[P("div",ui,[C(u,{modelValue:i(t).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=d=>i(t).formInfo.copy=d),step:1,min:i(m).min,max:i(m).max},null,8,["modelValue","min","max"]),P("span",ri,$(`${i(m).min}\u4EFD\u8D77\u8D2D\uFF0C\u6700\u591A\u8D2D\u4E70${i(m).max}\u4EFD`),1)])]),_:1},8,["modelValue"])):E("",!0),(![1].includes(((le=n.originData.riskCalcMethodInfoVO)==null?void 0:le.saleMethod)||0)||((se=n.originData)==null?void 0:se.exemptFlag)===1)&&(n.originData.riskCalcMethodInfoVO.fixedAmount||((me=i(T))==null?void 0:me[(de=n.originData)==null?void 0:de.riskCode]))?(g(),h(c,{key:3,label:"\u4FDD\u989D"},{input:F(()=>{var d,L,O,B;return[P("div",null,$(((d=n.originData.riskCalcMethodInfoVO)==null?void 0:d.fixedAmount)||((B=(O=i(T))==null?void 0:O[(L=n.originData)==null?void 0:L.riskCode])==null?void 0:B.amount)),1)]}),_:1})):E("",!0),!I((fe=(ce=n.originData)==null?void 0:ce.riskInsureLimitVO)==null?void 0:fe.insurancePeriodValueList)||!I((ye=(pe=n.originData)==null?void 0:pe.riskInsureLimitVO)==null?void 0:ye.insurancePeriodRule)?(g(),h(c,{key:4,modelValue:i(t).formInfo.coveragePeriod,"onUpdate:modelValue":a[8]||(a[8]=d=>i(t).formInfo.coveragePeriod=d),label:"\u4FDD\u969C\u671F\u95F4",name:"coveragePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4FDD\u969C\u671F\u95F4"}]},{input:F(()=>[C(p,{modelValue:i(t).formInfo.coveragePeriod,"onUpdate:modelValue":a[7]||(a[7]=d=>i(t).formInfo.coveragePeriod=d),disabled:b.value.coveragePeriod.disabled,prevent:b.value.coveragePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4FDD\u969C\u671F\u95F4":"",options:i(D),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):E("",!0),!I((De=(ge=n.originData)==null?void 0:ge.riskInsureLimitVO)==null?void 0:De.paymentPeriodValueList)||!I((Ve=(ke=n.originData)==null?void 0:ke.riskInsureLimitVO)==null?void 0:Ve.paymentPeriodRule)?(g(),h(c,{key:5,modelValue:i(t).formInfo.chargePeriod,"onUpdate:modelValue":a[10]||(a[10]=d=>i(t).formInfo.chargePeriod=d),label:"\u4EA4\u8D39\u671F\u95F4",name:"chargePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u671F\u95F4"}]},{input:F(()=>[C(p,{modelValue:i(t).formInfo.chargePeriod,"onUpdate:modelValue":a[9]||(a[9]=d=>i(t).formInfo.chargePeriod=d),disabled:b.value.chargePeriod.disabled,prevent:b.value.chargePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u671F\u95F4":"",options:i(k),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):E("",!0),!I((Ie=n.originData.riskInsureLimitVO)==null?void 0:Ie.paymentFrequencyList)||!I((ve=n.originData.riskInsureLimitVO)==null?void 0:ve.paymentPeriodRule)?(g(),h(c,{key:6,modelValue:i(t).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=d=>i(t).formInfo.paymentFrequency=d),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u65B9\u5F0F"}]},{input:F(()=>[C(p,{modelValue:i(t).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=d=>i(t).formInfo.paymentFrequency=d),disabled:b.value.paymentFrequency.disabled,prevent:b.value.paymentFrequency.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u65B9\u5F0F":"",options:i(R)},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):E("",!0),I((be=(Le=n.originData)==null?void 0:Le.riskInsureLimitVO)==null?void 0:be.annuityDrawValueList)?E("",!0):(g(),h(c,{key:7,modelValue:i(t).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=d=>i(t).formInfo.annuityDrawDate=d),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65F6\u95F4"}]},{input:F(()=>{var d;return[C(p,{modelValue:i(t).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=L=>i(t).formInfo.annuityDrawDate=L),options:v(i(We),((d=n.originData.riskInsureLimitVO)==null?void 0:d.annuityDrawValueList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),I((Ce=(Fe=n.originData)==null?void 0:Fe.riskInsureLimitVO)==null?void 0:Ce.annuityDrawFrequencyList)?E("",!0):(g(),h(c,{key:8,modelValue:i(t).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=d=>i(t).formInfo.annuityDrawType=d),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65B9\u5F0F"}]},{input:F(()=>{var d;return[C(p,{modelValue:i(t).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=L=>i(t).formInfo.annuityDrawType=L),options:v(i(Xe),((d=n.originData.riskInsureLimitVO)==null?void 0:d.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),(g(!0),x(X,null,z(n.originData.riskLiabilityInfoVOList||[],(d,L)=>(g(),x("div",{key:L},[d.optionalFlag===1?(g(),h(c,{key:0,modelValue:i(t).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":O=>i(t).formInfo.liabilityVOList[L].liabilityAttributeValue=O,label:d.liabilityName,name:"liabilityAttributeValue",rules:[{required:d.liabilityAttributeValue,message:`\u8BF7\u9009\u62E9${d.liabilityName}`}]},{input:F(()=>{var O,B;return[P("div",null,[I(d.liabilityAttributeValueList)?(g(),x("span",li,"50\u4E07")):(g(),h(p,{key:1,modelValue:i(t).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":M=>i(t).formInfo.liabilityVOList[L].liabilityAttributeValue=M,options:v(i(Oe),(B=(O=n.originData.riskLiabilityInfoVOList)==null?void 0:O[L])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(g(),h(c,{key:1,modelValue:i(t).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":O=>i(t).formInfo.liabilityVOList[L].liabilityAttributeValue=O,label:d.liabilityName,name:"liabilityAttributeValue"},{input:F(()=>{var O,B;return[P("div",null,[I(d.liabilityAttributeValueList)?(g(),h(p,{key:0,modelValue:i(t).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":M=>i(t).formInfo.liabilityVOList[L].liabilityAttributeValue=M,options:i(ze)},null,8,["modelValue","onUpdate:modelValue","options"])):(g(),h(p,{key:1,modelValue:i(t).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":M=>i(t).formInfo.liabilityVOList[L].liabilityAttributeValue=M,options:v(i(Oe),(B=(O=n.originData.riskLiabilityInfoVOList)==null?void 0:O[L])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label"]))]))),128)),((he=n.originData)==null?void 0:he.relationDesc)?(g(),x("div",si,[C(w,{title:"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E"},{default:F(()=>[P("div",null,$(n.originData.relationDesc),1)]),_:1})])):E("",!0)])}}});var mi=j(di,[["__scopeId","data-v-4aef94c8"]]);const ci=n=>(Se("data-v-1f13cbe8"),n=n(),Ye(),n),fi={class:"com-risk-list-wrapper"},pi=ci(()=>P("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),yi={class:"risk-list"},gi={class:"cell-title"},Di={class:"title"},ki={class:"footer-bar"},Vi=Pe("\u786E\u8BA4"),Ii=S({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(n,{emit:o}){const y=n,T=_([]),b=_([]),t=_([...y.disabled]),I=Y({show:y.show,currentChecked:[...y.modelValue]}),v=(r,V)=>{if(!y.collocationList.length){if(V){I.currentChecked=[];return}I.currentChecked.push(r);return}let m=I.currentChecked,f=t.value;V?(y.collocationList.forEach(e=>{r===e.riskId&&(e.collocationType===2?m=m.filter(a=>a!==e.collocationRiskId||a!==r):e.collocationType===3?(m=m.filter(a=>a!==r),f=f.filter(a=>a!==e.collocationRiskId)):m=m.filter(a=>a!==r))}),I.currentChecked=m,t.value=f):(y.collocationList.forEach(e=>{r===e.riskId&&(V||(e.collocationType===2?m.push(e.collocationRiskId):e.collocationType===3&&f.push(e.collocationRiskId),m.push(r)))}),I.currentChecked.push(...m),t.value=f)},D=r=>{var m,f,e;if(t.value.includes(r))return;const V=I.currentChecked.includes(r);v(r,V),(e=(f=(m=T==null?void 0:T.value)==null?void 0:m[r])==null?void 0:f.toggle)==null||e.call(f)},k=()=>{o("close")},R=()=>{const r=y.riskList.filter(V=>I.currentChecked.includes(V.id));o("update:modelValue",[...new Set(b.value)]),o("finished",r,t.value),o("close")};return we(()=>{T.value=[]}),U(()=>I.currentChecked,r=>{b.value=r},{deep:!0,immediate:!0}),U(()=>y.modelValue,r=>{b.value=r||[],t.value.push(...r||[])},{deep:!0,immediate:!0}),(r,V)=>{const m=A("van-checkbox"),f=A("VanCell"),e=A("van-cell-group"),a=A("van-checkbox-group"),l=A("VanButton"),s=A("VanPopup");return g(),x("div",fi,[C(s,{show:i(I).show,"onUpdate:show":V[1]||(V[1]=u=>i(I).show=u),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",round:"",position:"bottom",closeable:"",onClose:k},{default:F(()=>[pi,P("div",yi,[C(a,{modelValue:b.value,"onUpdate:modelValue":V[0]||(V[0]=u=>b.value=u)},{default:F(()=>[C(e,{inset:""},{default:F(()=>[(g(!0),x(X,null,z(n.riskList,u=>(g(),h(f,{key:u.id,title:u.riskName,disabled:t.value.includes(u.id),onClick:c=>D(u.id)},{"right-icon":F(()=>[C(m,{ref_for:!0,ref:c=>T.value[u.id]=c,shape:"square",disabled:t.value.includes(u.id),name:u.id,onClick:qe(c=>D(u.id),["stop"])},null,8,["disabled","name","onClick"])]),title:F(()=>[P("div",gi,[P("div",Di,$(u.riskName),1)])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),P("div",ki,[C(l,{type:"primary",disabled:!i(I).currentChecked.length,block:"",onClick:R},{default:F(()=>[Vi]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var vi=j(Ii,[["__scopeId","data-v-1f13cbe8"]]);const Li={class:"risk-list-wrapper"},bi={key:0,class:"add-rider-risk"},Fi={class:"left-part"},Ci=Pe("+ \u9644\u52A0\u9669"),hi=S({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(n){const o=n,y=q("source")||{},[T,b]=Ee(!1);_(null),_(null);const t=Y({mainRiskInfo:o.riskInfo,riskInfo:o.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),I=(D,k)=>{t.currentRiskList=t.currentRiskList.concat(D),t.disabledList=k},v=D=>{je.confirm({message:"\u786E\u5B9A\u8981\u5220\u9664\u9644\u52A0\u9669\u4E48\uFF1F"}).then(()=>{var R;const k=[D];(((R=t.mainRiskData)==null?void 0:R.collocationVOList)||[]).forEach(r=>{D===r.riskId&&(r.collocationType===2||r.collocationType===3)&&k.push(r.collocationRiskId)}),t.checkedList=t.checkedList.filter(r=>!k.includes(r)),t.currentRiskList=t.currentRiskList.filter(r=>k.includes(r.id)?(Object.assign(t.riskInfo,{[r.id]:void 0}),!1):!0),t.disabledList=t.disabledList.filter(r=>!k.includes(r))}).catch(()=>{})};return U(()=>t.currentRiskList,D=>{const k=[t.mainRiskData,...D];let R=[],r=[];const V=[];k.forEach((m,f)=>{var a,l,s;const e=((a=m==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:a.riskFactorRelationList)||[];R=R.concat(e.filter(u=>u.factorObject==="insured").map(u=>u.factorCode)),r=r.concat(e.filter(u=>u.factorObject==="holder").map(u=>u.factorCode)),V.push((l=m==null?void 0:m.riskInsureLimitVO)==null?void 0:l.minHolderAge,(s=m==null?void 0:m.riskInsureLimitVO)==null?void 0:s.maxHolderAge)}),(D||[]).forEach(m=>{var e,a;const f={riskType:m.riskType,riskId:m.id,riskCode:m.riskCode,riskName:m.riskName,mainRiskCode:m.riskType!==1?(e=t.mainRiskData)==null?void 0:e.riskCode:void 0,mainRiskId:m.riskType!==1?(a=t.mainRiskData)==null?void 0:a.id:void 0,riskCategory:m.riskCategory,liabilityVOList:(m.riskLiabilityInfoVOList||[]).map(l=>K(G({},l),{liabilityAttributeCode:l.liabilityAttributeType,liabilityCode:l.liabilityCode,liabilityRateType:l.liabilityRateType}))};t.riskInfo[m.id]||Object.assign(t.riskInfo,{[m.id]:f})}),o.pickFactor({insuredFactorList:[...new Set(R)],holderFactorList:[...new Set(r)],ageRange:V})},{deep:!0,immediate:!0}),U(()=>o.riskInfo,D=>{t.mainRiskInfo=Object.values(D||{}).find(k=>(k==null?void 0:k.riskType)===1)||{}},{deep:!0,immediate:!0}),U(()=>o.originData,D=>{let k=[];const R=[];y.origin==="proposal"&&!(y.type==="add"||y.type==="repeatAdd")?((D||[]).forEach(r=>{r.riskType===1&&(t.mainRiskData=r),k.push(r)}),k=k.filter(r=>y.showRiskList.includes(r.id))):(D||[]).forEach(r=>{r.riskType===1?(t.mainRiskData=r,k.push(r)):r.collocationType===2?k.push(r):R.push(r)}),t.riderRiskList=R,t.currentRiskList=k},{deep:!0,immediate:!0}),(D,k)=>{var r,V,m;const R=A("ProCheckButton");return g(),x("div",Li,[(g(!0),x(X,null,z(i(t).currentRiskList,(f,e)=>(g(),h(mi,{key:f.id,"form-info":i(t).riskInfo[f.id],index:e,enums:n.enums,"main-risk-data":i(t).mainRiskData,"main-risk-info":i(t).mainRiskInfo,"origin-data":f,"remove-risk":v,"remove-risk-list":i(t).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"]))),128)),((r=i(t).riderRiskList)==null?void 0:r.length)-((V=i(t).checkedList)==null?void 0:V.length)&&i(y).origin!=="proposal"?(g(),x("div",bi,[P("span",Fi,$(`\u5171\u6709${i(t).riderRiskList.length-i(t).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),C(R,{activated:"",onClick:k[0]||(k[0]=f=>i(b)(!0))},{default:F(()=>[Ci]),_:1})])):E("",!0),i(T)?(g(),h(vi,{key:1,modelValue:i(t).checkedList,"onUpdate:modelValue":k[1]||(k[1]=f=>i(t).checkedList=f),show:i(T),disabled:i(t).disabledList,"risk-list":i(t).riderRiskList,"collocation-list":((m=i(t).mainRiskData)==null?void 0:m.collocationVOList)||[],onFinished:I,onClose:k[2]||(k[2]=f=>i(b)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):E("",!0)])}}});var xi=j(hi,[["__scopeId","data-v-1afa9508"]]);const Bi=(n={})=>Te.post("/api/app/insure/product/insureProductDetail",n),Ui=n=>Te.post("/api/app/insure/insurance/premiumCalc",n);export{Ti as P,xi as R,vi as a,Bi as i,Ui as p};

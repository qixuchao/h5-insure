var ee=Object.defineProperty,te=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var H=(u,s,a)=>s in u?ee(u,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):u[s]=a,U=(u,s)=>{for(var a in s||(s={}))re.call(s,a)&&H(u,a,s[a]);if(b)for(var a of b(s))oe.call(s,a)&&H(u,a,s[a]);return u},h=(u,s)=>te(u,ne(s));import{g as ae,ak as se,O as ie,Q as ue,E as f,M as de,y as le,o as fe,r as c,j as m,k as L,m as d,A as p,p as i,t as g,n as A,F as ce,G as pe,z as I,J as C,C as Ie}from"./vendor-96e68f0e.js";import{w as me,L as ve,n as Oe,P as ye,r as _e,W as w,X as B}from"./index-64f04937.js";import{_ as x,R as Ee,B as Le}from"./index-20ac4a10.js";import{I as ge}from"./InsuredPart-9e6b3f52.js";import{u as Ce}from"./useDicData-88f1ab09.js";import"./trial-1de9c15d.js";const Be={key:0,class:"beneficiary-part"},Te={class:"part-title"},Ae={class:"title"},xe={class:"radio-item-wrapper"},Pe={class:"name"},Re={class:"hone"},De={class:"address"},Ne={class:"footer-button"},Fe=Ie("\u4E0B\u4E00\u6B65"),Se=ae({setup(u){const s=se(),a=ie(),{templateId:P=1,orderNo:k="2022072710380711215",tenantId:S="9991000007",isShare:j,sharePageCode:M}=a.query;ue();const R=a.path==="/infoPreview"?"infoPreview":"infoCollection",O=f({}),q=Ce("NATIONAL_REGION_CODE"),t=f({extInfo:{pageCode:R},tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0}}),Y=f(null),y=f([]),_=f([]),T=f([]),G=f([]),D=f([]),N=de({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),E=le(()=>{var l,e;return((e=(l=t.value.extInfo)==null?void 0:l.contactInfo)==null?void 0:e[0])||{}}),$=()=>{j?ve(`${M}`,a.query):Oe(t.value).then(({code:l,data:e})=>{l==="10000"&&e.pageAction.pageAction==="jumpToPage"&&s.push({path:ye[e.pageAction.data.nextPageCode],query:a.query})})},J=()=>{_e({orderNo:k,tenantId:S}).then(({code:l,data:e})=>{if(l==="10000"){const o=e;o.extInfo=h(U({},o.extInfo),{pageCode:R,templateId:P}),o.tenantOrderHolder=o.tenantOrderHolder||{},o.tenantOrderHolder.extInfo=o.tenantOrderHolder.extInfo||{},o.tenantOrderInsuredList[0].extInfo=o.tenantOrderInsuredList[0].extInfo||{},o.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=o.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map(n=>{const v=n;return v.extInfo={},v}),o.tenantOrderAttachmentList.forEach(n=>{n.category===w.OBVERSE_CERT?n.objectType===B.HOLDER?(y.value[0]=n.uri,T.value[0]=n.id):n.objectType===B.INSURED&&(_.value[0]=n.uri,G.value[0]=n.id):n.category===w.REVERSE_CERT&&(n.objectType===B.HOLDER?(y.value[1]=n.uri,T.value[1]=n.id):n.objectType===B.INSURED&&(_.value[1]=n.uri,T.value[1]=n.id))}),Object.assign(t.value,o)}}).finally(()=>{N.isLoading=!1})};return fe(()=>{J(),me({pageCode:"infoCollection",templateId:P}).then(({code:l,data:e})=>{if(l==="10000"){const o={BENEFICIARY:[],INSURER:[],HOLDER:[]};e.productInsureFactorList.forEach(n=>{(o[n.moduleType]=o[n.moduleType]||[]).push(n)}),O.value=o}})}),(l,e)=>{const o=c("ProCard"),n=c("ProRadioButton"),v=c("ProField"),W=c("ProCascader"),z=c("van-cell"),Q=c("ProForm"),X=c("VanButton"),K=c("ProPageWrap");return m(),L(K,{class:"page-info-wrapper"},{default:d(()=>[p(N).isLoading?g("",!0):(m(),L(Q,{key:0,ref_key:"formRef",ref:Y,"is-view":""},{default:d(()=>{var F;return[i(ge,{"product-data":(F=t.value.tenantOrderInsuredList[0])==null?void 0:F.tenantOrderProductList[0]},null,8,["product-data"]),i(o,{title:"\u6295\u4FDD\u4EBA"},{default:d(()=>[i(x,{images:y.value,"onUpdate:images":e[0]||(e[0]=r=>y.value=r),"form-info":t.value.tenantOrderHolder,"factor-list":O.value.HOLDER,"is-view":""},null,8,["images","form-info","factor-list"])]),_:1}),i(o,{title:"\u88AB\u4FDD\u4EBA"},{default:d(()=>[i(v,{modelValue:t.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.tenantOrderInsuredList[0].relationToHolder=r),label:"\u4E3A\u8C01\u4FDD\u5355",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:d(()=>[i(n,{modelValue:t.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.tenantOrderInsuredList[0].relationToHolder=r),options:p(Ee),"is-view":""},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),+t.value.tenantOrderInsuredList[0].relationToHolder!=1?(m(),L(x,{key:0,images:_.value,"onUpdate:images":e[3]||(e[3]=r=>_.value=r),"form-info":t.value.tenantOrderInsuredList[0],"factor-list":O.value.INSURER||[],"is-view":""},null,8,["images","form-info","factor-list"])):g("",!0),i(W,{modelValue:t.value.tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.tenantOrderInsuredList[0].extInfo.insureAreaCode=r),field1:t.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,"onUpdate:field1":e[5]||(e[5]=r=>t.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode=r),field2:t.value.tenantOrderInsuredList[0].extInfo.insureCityCode,"onUpdate:field2":e[6]||(e[6]=r=>t.value.tenantOrderInsuredList[0].extInfo.insureCityCode=r),field3:t.value.tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:field3":e[7]||(e[7]=r=>t.value.tenantOrderInsuredList[0].extInfo.insureAreaCode=r),label:"\u6295\u4FDD\u5730\u533A",name:"insureProvinceCode",placeholder:"\u8BF7\u9009\u62E9","is-link":"",required:"","data-source":p(q),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","data-source"])]),_:1}),i(o,{title:"\u53D7\u76CA\u4EBA"},{default:d(()=>[i(v,{modelValue:t.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":e[9]||(e[9]=r=>t.value.tenantOrderInsuredList[0].insuredBeneficiaryType=r),label:"\u53D7\u76CA\u4EBA\u7C7B\u578B",name:"insuredBeneficiaryType",placeholder:"\u8BF7\u9009\u62E9"},{input:d(()=>[i(n,{modelValue:t.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":e[8]||(e[8]=r=>t.value.tenantOrderInsuredList[0].insuredBeneficiaryType=r),options:p(Le),"is-view":""},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),t.value.tenantOrderInsuredList[0].insuredBeneficiaryType==2?(m(),A("div",Be,[(m(!0),A(ce,null,pe(t.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList,(r,V)=>(m(),A("div",{key:r.beneficiaryId,class:"beneficiary-item"},[I("div",Te,[I("span",Ae,C(`\u53D7\u76CA\u4EBA${V+1}`),1)]),i(x,{images:D.value,"onUpdate:images":e[10]||(e[10]=Z=>D.value=Z),"form-info":r,"factor-list":O.value.BENEFICIARY||[],prefix:`beneficiary-${V}`,"is-view":"","beneficiary-list":t.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList},null,8,["images","form-info","factor-list","prefix","beneficiary-list"])]))),128))])):g("",!0)]),_:1}),i(o,{title:"\u4FDD\u5355\u901A\u8BAF\u4FE1\u606F"},{default:d(()=>[Object.keys(p(E)).length?(m(),L(z,{key:0,title:"\u5355\u5143\u683C"},{title:d(()=>[I("div",xe,[I("p",null,[I("span",Pe,C(p(E).contactName),1),I("span",Re,C(p(E).contactPhoneNo),1)]),I("p",De,C(p(E).contactAddress),1)])]),_:1})):g("",!0)]),_:1})]}),_:1},512)),I("div",Ne,[i(X,{block:"",type:"primary",onClick:$},{default:d(()=>[Fe]),_:1})])]),_:1})}}});export{Se as default};

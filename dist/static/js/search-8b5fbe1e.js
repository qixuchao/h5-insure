import{B as t,d as e,j as s,D as o,C as a,Y as i,k as n,c0 as l,G as r,l as c,E as d,V as f,b as u,cr as p,R as h,J as g,cs as v,X as w,N as A,W as m,M as x,ct as C,cu as y,K as k,r as N,a6 as b,a2 as z,$ as S,cv as I,O as M,cw as V,H as L,ck as R,a1 as E}from"./index-fb028d1a.js";const[G,O]=t("index-bar"),P={sticky:h,zIndex:g,teleport:[String,Object],highlightColor:String,stickyOffsetTop:v(0),indexList:{type:Array,default:function(){const t="A".charCodeAt(0);return Array(26).fill("").map(((e,s)=>String.fromCharCode(t+s)))}}},B=Symbol(G);var K=e({name:G,props:P,emits:["select","change"],setup(t,{emit:e,slots:h}){const g=s(),v=s(),N=s(""),b=o(),z=a(g),{children:S,linkChildren:I}=i(B);let M;I({props:t});const V=n((()=>{if(l(t.zIndex))return{zIndex:+t.zIndex+1}})),L=n((()=>{if(t.highlightColor)return{color:t.highlightColor}})),R=(e,s)=>{for(let o=S.length-1;o>=0;o--){const a=o>0?s[o-1].height:0;if(e+(t.sticky?a+t.stickyOffsetTop:0)>=s[o].top)return o}return-1},E=t=>S.find((e=>String(e.index)===t)),G=()=>{if(w(g))return;const{sticky:e,indexList:s}=t,o=A(z.value),a=m(z),i=S.map((t=>t.getRect(z.value,a)));let n=-1;if(M){const t=E(M);if(t){const e=t.getRect(z.value,a);n=R(e.top,i)}}else n=R(o,i);N.value=s[n],e&&S.forEach(((e,s)=>{const{state:l,$el:r}=e;if(s===n||s===n-1){const t=r.getBoundingClientRect();l.left=t.left,l.width=t.width}else l.left=null,l.width=null;if(s===n)l.active=!0,l.top=Math.max(t.stickyOffsetTop,i[s].top-o)+a.top;else if(s===n-1&&""===M){const t=i[n].top-o;l.active=t>0,l.top=t+a.top-i[s].height}else l.active=!1})),M=""},P=()=>{x(G)};r("scroll",G,{target:z,passive:!0}),c(P),d((()=>t.indexList),P),d(N,(t=>{t&&e("change",t)}));const K=s=>{M=String(s);const o=E(M);if(o){const s=A(z.value),a=m(z),{offsetHeight:i}=document.documentElement;if(o.$el.scrollIntoView(),s===i-a.height)return void G();t.sticky&&t.stickyOffsetTop&&C(y()-t.stickyOffsetTop),e("select",o.index)}},T=t=>{const{index:e}=t.dataset;e&&K(e)},U=t=>{T(t.target)};let D;const j=()=>u("div",{ref:v,class:O("sidebar"),style:V.value,onClick:U,onTouchstartPassive:b.start},[t.indexList.map((t=>{const e=t===N.value;return u("span",{class:O("index",{active:e}),style:e?L.value:void 0,"data-index":t},[t])}))]);return f({scrollTo:K}),r("touchmove",(t=>{if(b.move(t),b.isVertical()){k(t);const{clientX:e,clientY:s}=t.touches[0],o=document.elementFromPoint(e,s);if(o){const{index:t}=o.dataset;t&&D!==t&&(D=t,T(o))}}}),{target:v}),()=>{var e;return u("div",{ref:g,class:O()},[t.teleport?u(p,{to:t.teleport},{default:()=>[j()]}):j(),null==(e=h.default)?void 0:e.call(h)])}}});const[T,U]=t("index-anchor");const D=M(e({name:T,props:{index:g},setup(t,{slots:e}){const o=N({top:0,left:null,rect:{top:0,height:0},width:null,active:!1}),a=s(),{parent:i}=b(B);if(!i)return;const l=()=>o.active&&i.props.sticky,r=n((()=>{const{zIndex:t,highlightColor:e}=i.props;if(l())return z(S(t),{left:o.left?`${o.left}px`:void 0,width:o.width?`${o.width}px`:void 0,transform:o.top?`translate3d(0, ${o.top}px, 0)`:void 0,color:e})}));return f({state:o,getRect:(t,e)=>{const s=m(a);return o.rect.height=s.height,t===window||t===document.body?o.rect.top=s.top+y():o.rect.top=s.top+A(t)-e.top,o.rect}}),()=>{const s=l();return u("div",{ref:a,style:{height:s?`${o.rect.height}px`:void 0}},[u("div",{style:r.value,class:[U({sticky:s}),{[I]:s}]},[e.default?e.default():t.index])])}}})),j=M(K),[W,X]=t("swipe-cell");const Q=M(e({name:W,props:{name:L(""),disabled:Boolean,leftWidth:g,rightWidth:g,beforeClose:Function,stopPropagation:Boolean},emits:["open","close","click"],setup(t,{emit:e,slots:a}){let i,c,d;const p=s(),h=s(),g=s(),v=N({offset:0,dragging:!1}),w=o(),A=t=>t.value?m(t).width:0,x=n((()=>l(t.leftWidth)?+t.leftWidth:A(h))),C=n((()=>l(t.rightWidth)?+t.rightWidth:A(g))),y=s=>{v.offset="left"===s?x.value:-C.value,i||(i=!0,e("open",{name:t.name,position:s}))},b=s=>{v.offset=0,i&&(i=!1,e("close",{name:t.name,position:s}))},z=e=>{t.disabled||(d=v.offset,w.start(e))},S=()=>{v.dragging&&(v.dragging=!1,(t=>{const e=Math.abs(v.offset),s=i?.85:.15,o="left"===t?x.value:C.value;o&&e>o*s?y(t):b(t)})(v.offset>0?"left":"right"),setTimeout((()=>{c=!1}),0))},I=(s="outside")=>{e("click",s),i&&!c&&E(t.beforeClose,{args:[{name:t.name,position:s}],done:()=>b(s)})},M=(t,e)=>s=>{e&&s.stopPropagation(),I(t)},L=(t,e)=>{const s=a[t];if(s)return u("div",{ref:e,class:X(t),onClick:M(t,!0)},[s()])};return f({open:y,close:b}),V(p,(()=>I("outside")),{eventName:"touchstart"}),r("touchmove",(e=>{if(t.disabled)return;const{deltaX:s}=w;if(w.move(e),w.isHorizontal()){c=!0,v.dragging=!0;(!i||s.value*d<0)&&k(e,t.stopPropagation),v.offset=R(s.value+d,-C.value,x.value)}}),{target:p}),()=>{var t;const e={transform:`translate3d(${v.offset}px, 0, 0)`,transitionDuration:v.dragging?"0s":".6s"};return u("div",{ref:p,class:X(),onClick:M("cell",c),onTouchstartPassive:z,onTouchend:S,onTouchcancel:S},[u("div",{class:X("wrapper"),style:e},[L("left",h),null==(t=a.default)?void 0:t.call(a),L("right",g)])])}}}));var Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAZlBMVEUAAAC0wNC1wdO/v/+zwNC0v9C0wM+0wNG2wdLCydm0wNC0wNC1wdCzwNC0wNC0wNC1wNC1v9G2wdS0wM+0wNC0wNCzwdG0wdCzwc+1wNK4wta6xtO1wdGzwNC0wc+1v9WzwdCzv89PygQeAAAAIXRSTlMA/DQE896qhEQLjvjX0cC5iUwk7Oamb2ZbKxkVf8d7GIfl18UPAAABK0lEQVRIx+1V25aDIAwkiEVUvNXe7G3z/z+5pKeHs2fJyqav7byIwwxJBKL64DUUi9ZL8V+1ti1gALRWqzwqjwBIoKevMvJ7j6SOAOzvq9nM8NQFPIezXkmngYewrA/jeKhLfLw2f6Y1GSB5p2PADokxE693LdB6x5/csSGudazhgrSa/lUVRcULpz8bMlRJXWQwZ8Yw0IxNeUvrDIyhDPzWMaVtAbFM+RMtZBUDS6FPCb3HAM3uJs3sE7oGRKNYGESoE3YXM2Wr2yVsHwxX3nANhl4cQVyD+CuJ90G407PwLOGX+LQK74MV3jjvRHcaYZJ0DcKmkPSldceSdL4yxsj2VpL7sdhER7Z7+5rKj47c/2FyNEoceUTHTckc0CmRA3BQEsetG5x6Z3wDxtkpoVPsMuQAAAAASUVORK5CYII=";export{D as I,Q as S,j as a,Y as b};

import{_ as e,d as a,bY as l,cb as t,bZ as s,u as n,a as i,r as o,J as d,E as r,G as c,c as v,g as p,f as u,m as f,aV as m,e as h,j as _,i as b,w as y,b1 as g,t as x,F as A,n as w,c0 as I,T as k,ao as O,V as D,af as E,X as j,Y as C,bG as P}from"./index-3e642916.js";import{c as N}from"./cloneDeep-aaa98338.js";import{p as B}from"./product-0f161a9e.js";import{d as F,i as L,g as V,s as R,e as U,E as T}from"./trial-5342cd34.js";import{a as S,t as z,c as H,s as $,b as G,d as J}from"./utils-ead65e09.js";import{a as M}from"./order-89525222.js";import{_ as K}from"./index-af08a3de.js";import{_ as Q}from"./index-b96dcaf5.js";import{P as Y}from"./index-f122392e.js";import"./pdfh5-008ca364.js";import"./keysIn-b3061da8.js";import"./isObjectLike-d00d103b.js";import"./infoCollection-8fba7a60.js";import"./trial-1c5cf823.js";import"./relativeTime-fde2a46e.js";import"./validator-5a13dc82.js";import"./useDicData-a4b9d19f.js";const q=e=>(j("data-v-27db7f1e"),e=e(),C(),e),Z={key:0},W=[q((()=>b("div",{class:"__skeleton_upgrade_content__"},[b("div",{class:"van-config-provider router-view sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[b("div",{class:"page-upgrade-product-detail"},[b("div",{class:"van-image banner",style:{width:"375px",height:"338px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[b("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20230131/7f6e6d1d087a4ced909e9daa18754592/%E5%8D%87%E7%BA%A7%E4%BA%A7%E5%93%81.png?Expires=1676282742&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=B0kGphaHBL5OfHyaMj1ktm9FJvM%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),b("div",{class:"page-info-wrapper"},[b("div",{class:"com-form-wrapper","show-error":"","show-error-message":"false"},[b("form",{class:"van-form"},[b("div",{class:"com-card"},[b("div",{class:"com-card-wrap"},[b("div",{class:"header"},[b("div",{class:"title-wrapper"},[b("div",{class:"title showIcon"},[b("span",{class:"sk-text",style:{"--fp":"33.33%","--sp":"66.67%","--lh":"45px"}},"投保信息")])])]),b("div",{class:"body",style:{height:"auto"}},[b("div",{class:"com-personal-wrapper"},[b("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[b("div",{class:"van-cell__title van-field__label van-field__label--left"},[b("label",{id:"van-field-2-label",for:"van-field-2-input"},[b("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"姓名")])]),b("div",{class:"van-cell__value van-field__value"},[b("div",{class:"van-field__body"},[b("input",{type:"text",id:"van-field-2-input",name:"insure_name",class:"van-field__control van-field__control--right sk-input",readonly:"",placeholder:"请输入姓名",autocomplete:"off","aria-labelledby":"van-field-2-label"}),b("div",{class:"van-field__right-icon"})])])]),b("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[b("div",{class:"van-cell__title van-field__label van-field__label--left"},[b("label",{id:"van-field-3-label",for:"van-field-3-input"},[b("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"身份证号")])]),b("div",{class:"van-cell__value van-field__value"},[b("div",{class:"van-field__body"},[b("input",{type:"text",id:"van-field-3-input",name:"insure_certNo",class:"van-field__control van-field__control--right sk-input",readonly:"",placeholder:"请输入身份证号",autocomplete:"off","aria-labelledby":"van-field-3-label"}),b("div",{class:"van-field__right-icon"})])])])]),b("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[b("div",{class:"van-cell__title van-field__label van-field__label--left"},[b("label",{id:"van-field-4-label",for:"van-field-4-input"},[b("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"社保")])]),b("div",{class:"van-cell__value van-field__value"},[b("div",{class:"van-field__body"},[b("div",{class:"van-field__control van-field__control--right van-field__control--custom"},[b("div",{class:"com-radio-btn-wrap"},[b("div",{class:"radio-btn"},[b("div",{class:"btn-wrapper"},[b("div",{class:"com-check-btn activated-disabled"},[b("span",{class:"sk-text",style:{"--fp":"22.92%","--sp":"77.08%","--lh":"24px"}}," 有（含农村合作医疗）")])]),b("div",{class:"btn-wrapper"},[b("div",{class:"com-check-btn disabled sk-border"},[b("span",{class:"sk-text",style:{"--fp":"22.92%","--sp":"77.08%","--lh":"24px"}}," 无")])])])])]),b("div",{class:"van-field__right-icon"})])])])])])])])])]),b("div",{class:"van-cell van-field com-pro-field"},[b("div",{class:"van-cell__title van-field__label"},[b("label",{id:"van-field-5-label",for:"van-field-5-input"},[b("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"每月保费")])]),b("div",{class:"van-cell__value van-field__value"},[b("div",{class:"van-field__body"},[b("input",{type:"text",id:"van-field-5-input",name:"insuredBeneficiaryType",class:"van-field__control van-field__control--right sk-input",placeholder:"请输入每月保费",autocomplete:"off","aria-labelledby":"van-field-5-label"}),b("div",{class:"van-field__right-icon"})])])]),b("div",{class:"com-attachment-list attachment-bg"},[b("span",null,[b("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}},"请阅读")]),b("span",{class:"attachment-item"},[b("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《责任免除说明书》 ")]),b("span",{class:"attachment-item"},[b("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《投保须知》 ")]),b("span",{class:"attachment-item"},[b("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《重要提示》 ")]),b("span",{class:"attachment-item"},[b("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《特别约定》 ")]),b("span",{class:"attachment-item"},[b("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《条款》 ")])]),b("div",{class:"footer-area sk-border"},[b("div",{class:"upgrade-submit"},[b("div",{class:"price"},[b("span",{class:"num"},[b("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"18.200139999999998px"}},"49")]),b("span",{class:"unit"},[b("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"18.200139999999998px"}},"元/月")])]),b("div",{class:"pro-shadow-button right"},[b("button",{type:"button",class:"van-button van-button--primary van-button--normal van-button--block van-button--round shadow-button sk-button"},[b("div",{class:"van-button__content"},[b("span",{class:"van-button__text"},[b("span",{class:"sk-text",style:{"--fp":"8.33%","--sp":"91.67%","--lh":"19.2002px"}},"升级保障")])])])])])])])])],-1)))],X={key:1,"data-skeleton-root":"UPGRADE",class:"page-upgrade-product-detail"},ee={class:"footer-area"},ae=q((()=>b("span",null,"分享",-1))),le={class:"upgrade-submit"},te={class:"price"},se={class:"num"},ne=q((()=>b("span",{class:"unit"},"元/月",-1))),ie=w(x("升级保障"));var oe=e(a({setup(e){const a=l((()=>I((()=>import("./index-5fefe35a.js")),["static/js/index-5fefe35a.js","static/css/index-b9ba3011.css","static/js/index-3e642916.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js"]))),w=l((()=>I((()=>import("./index-3ca4e9e7.js")),["static/js/index-3ca4e9e7.js","static/css/index-ea588f10.css","static/js/index-3e642916.js","static/css/index-f8c43e72.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-f122392e.js","static/css/index-85f26bb0.css","static/js/utils-ead65e09.js","static/js/infoCollection-8fba7a60.js","static/js/trial-1c5cf823.js"]))),j=t(),C=s(),q=n(),oe=i(),{productCode:de="",orderNo:re="",agencyCode:ce="",tenantId:ve="",saleChannelId:pe="",extraInfo:ue}=oe.query;let fe={};try{fe=JSON.parse(decodeURIComponent(ue))}catch(Te){console.log(Te)}const{openId:me,indirectCode:he="",agentCode:_e}=fe,be=o(!0),ye=o(),ge=o();o();const xe=o(),Ae=o(),we=o(),Ie=o(),ke=o(0),Oe=o();o(!1),o(!1),o(0);const De=o(""),Ee=o(!0),je=o(),Ce=d({isOnlyView:!0,activeIndex:0,showFilePreview:!1}),Pe=o({imgUrl:"",desc:"",title:"",link:window.location.href}),Ne=()=>{Ce.showFilePreview=!1,Ce.isOnlyView=!0},Be=r((()=>`${ke.value}元/月`)),Fe=e=>{var a;const l=null==(a=e.tenantOrderPaymentInfoList)?void 0:a.pop();return l?l.paymentMethod:3},Le=async e=>{const a=G({tenantId:ve,premium:ke.value,orderDetail:Ie.value,productDetail:Ae.value,insureDetail:we.value,successJumpUrl:`${P}/baseInsurance/orderDetail?tenantId=${ve}&orderNo=${De.value}`,iseeBizNo:ye.value}),l=await T({orderNo:e,...a}),{code:t,data:s}=l;"10000"===t&&q.push(`/baseInsurance/orderDetail?tenantId=${ve}&orderNo=${De.value}`)},Ve=async e=>{try{k.loading({forbidClick:!0,message:"升级中",duration:0});const e=await(async()=>{var e,a,l;const t=S({tenantId:ve,templateId:Ie.value.tenantOrderInsuredList[0].templateId,applicationNo:Ie.value.applicationNo,policyNo:Ie.value.policyNo,saleUserId:_e,saleChannelId:Ie.value.saleChannelId,orderStatus:M.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:Ae.value,insureDetail:we.value,paymentMethod:Fe(Ie.value),renewalDK:null==(a=null==(e=Ie.value.extInfo)?void 0:e.extraInfo)?void 0:a.renewalDK,iseeBizNo:ye.value,expiryDate:Ie.value.expiryDate,successJumpUrl:"",premium:ke.value,holder:{...Ie.value.tenantOrderHolder,extInfo:je.value,socialFlag:je.value.hasSocialInsurance},insured:{...Ie.value.tenantOrderInsuredList[0],socialFlag:Ie.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance},tenantOrderRiskList:z({tenantId:ve,riskList:H($(we.value.productRiskVoList[0].riskDetailVOList),Ae.value),riskPremium:{},productId:null==(l=Ae.value)?void 0:l.id},!0)}),s=await R(t),{code:n,data:i}=s;return"10000"===n?i.data:""})();await F({tenantId:ve,applicationNo:Ie.value.applicationNo});if(De.value=e,console.log(De.value,"orderNoUp.value===",e),Oe.value){const e=encodeURIComponent(encodeURIComponent(window.location.href)),a=`${Oe.value}&failUrl=${e}`;window.location.href=a,k.clear()}else Le(e)}catch(a){console.log(a),k.clear()}},Re=async e=>{Ve()},Ue=()=>{const e=B({productCode:de,withInsureInfo:!0,tenantId:ve}),a=L({productCode:de}),l=V({orderNo:re,tenantId:ve});Promise.all([e,a,l]).then((([e,a,l])=>{var t,s,n;if("10000"===e.code){Ae.value=e.data,document.title=(null==(t=e.data)?void 0:t.productFullName)||"";const{title:a,desc:l,image:i}=(null==(s=e.data)?void 0:s.showConfigVO)||{};n={title:a,desc:l,image:i},Pe.value={desc:n.desc||"你好，这里是描述",imgUrl:n.image,title:n.title,link:window.location.href}}"10000"===a.code&&(we.value=a.data,["1","2","3"].forEach((e=>{var a,l,t;we.value.productFactor[e]=(null==(l=null==(a=we.value.productFactor)?void 0:a[e])?void 0:l.some((e=>1===e.isDisplay)))?null==(t=we.value.productFactor)?void 0:t[e]:[]}))),"10000"===l.code&&(Ie.value=l.data,je.value=N(Ie.value.tenantOrderHolder.extInfo),Ie.value.tenantOrderHolder.extInfo=Ie.value.tenantOrderInsuredList[0].extInfo),be.value=!1,(async()=>{k.loading({forbidClick:!0,duration:0,message:"试算中"});try{const e=G({tenantId:ve,premium:ke.value,orderDetail:Ie.value,productDetail:Ae.value,insureDetail:we.value,successJumpUrl:""},J),a=await U(e),{code:l,data:t,message:s}=a;"10000"===l?(ke.value=t.installmentPremium,Oe.value=t.signUrl,Ee.value=!1):"已升级成功"===s&&(Ee.value=!0)}catch(e){console.log(e),Ee.value=!0}finally{setTimeout((()=>{k.clear()}),Ee.value?2e3:0)}})(),(()=>{var e;let a={};if(a=(null==(e=Ae.value.tenantProductInsureVO.planInsureVO)?void 0:e.attachmentVOList)||[],!a)return void(ge.value=[]);const l={2:"richText",3:"link"};ge.value=Object.keys(a).map((e=>(a[e].forEach((e=>{if("1"===e.attachmentType){const a=e.attachmentUri.split("?"),l=a[0].substr(a[0].lastIndexOf(".")+1);e.attachmentType="pdf"===l?"pdf":"picture"}else e.attachmentType=l[e.attachmentType]})),{attachmentName:e,attachmentList:a[e]})))||[]})()}))};return c((()=>{Ue(),setTimeout((async()=>{ye.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,l)=>{var t,s,n;const i=O,o=D,d=E;return v(),p(A,null,[be.value?(v(),p("div",Z,W)):(v(),p("div",X,[u(Q,{"data-skeleton-type":"img",url:null==(s=null==(t=Ae.value)?void 0:t.tenantProductInsureVO)?void 0:s.banner[0]},null,8,["url"]),u(K,{ref_key:"formRef",ref:xe,"title-collection":{HOLDER:"投保人信息",INSURER:"投保信息",BENEFICIARY:"投保人信息"},"need-desensitize":"","is-view":"","input-align":"right","form-info":Ie.value,"factor-object":null==(n=we.value)?void 0:n.productFactor},null,8,["form-info","factor-object"]),u(i,{modelValue:f(Be),"onUpdate:modelValue":l[0]||(l[0]=e=>m(Be)?Be.value=e:null),"input-align":"right",label:"每月保费",name:"insuredBeneficiaryType"},null,8,["modelValue"]),ge.value&&ge.value.length>0?(v(),h(f(a),{key:0,class:"attachment-bg","attachement-list":ge.value,"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:l[1]||(l[1]=e=>(e=>{Ce.isOnlyView=!0,Ce.activeIndex=e,Ce.showFilePreview=!0})(e))},null,8,["attachement-list"])):_("",!0),b("div",ee,[f(j)?(v(),h(d,g({key:0},Pe.value,{class:"share-btn"}),{default:y((()=>[u(o,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ae])),_:1},16)):_("",!0),b("div",le,[b("div",te,[b("span",se,x(ke.value),1),ne]),u(Y,{shadow:!1,disabled:Ee.value,"theme-vars":f(C),class:"right",text:"升级保障",onClick:Re},{default:y((()=>[ie])),_:1},8,["disabled","theme-vars"])])])])),f(Ce).showFilePreview&&0!==ge.value.length?(v(),h(f(w),{key:2,show:f(Ce).showFilePreview,"onUpdate:show":l[2]||(l[2]=e=>f(Ce).showFilePreview=e),"content-list":ge.value,"is-only-view":f(Ce).isOnlyView,"active-index":f(Ce).activeIndex,text:f(Ce).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-cound":0,"on-close-file-preview":"",onSubmit:Ve,onOnCloseFilePreview:Ne},null,8,["show","content-list","is-only-view","active-index","text"])):_("",!0)],64)}}}),[["__scopeId","data-v-27db7f1e"]]);export{oe as default};

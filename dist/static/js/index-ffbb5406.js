var K=Object.defineProperty;var G=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var J=(i,n,t)=>n in i?K(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t,j=(i,n)=>{for(var t in n||(n={}))Z.call(n,t)&&J(i,t,n[t]);if(G)for(var t of G(n))ee.call(n,t)&&J(i,t,n[t]);return i};import{g as F,Q as X,C as W,L as Y,v as te,X as ne,ag as oe,r as c,h as u,j as _,k as l,n as g,m as A,E as M,y as T,I as L,F as R,s as P,ah as se,z as v,B,T as ue,ak as re,G as ae,x as N,M as H,af as ie}from"./vendor-50171071.js";import{_ as U,h as le,j as ce}from"./index-382fced3.js";import{w as de,n as pe}from"./pdf.worker.entry-2eacef13.js";import{p as z}from"./pdf_viewer-37e08521.js";import{a as _e}from"./index-7084d84f.js";import{g as me,s as fe}from"./inform-c597a49a.js";import{s as ve}from"./useStorage-b8360748.js";const ge={class:"problem"},ye={class:"footer-button"},he=B("\u63D0\u4EA4"),Ce=F({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const t=i,k=X(),r=W([]),{questionnaireType:d}=k.query,S={"1":"\u6295\u4FDD\u4EBA","2":"\u88AB\u4FDD\u4EBA","3":"\u4EE3\u7406\u4EBA"},Q=Y({listQuestions:[]}),{listQuestions:y}=te(Q),m=e=>{r.value[e].toggle()},f=e=>e?JSON.parse(e).map(o=>({title:o.value,value:o.uid})):[];ne(()=>t.currentPageInfo,e=>{y.value=e.map((o,C)=>o.questionType===2?j({multipleChoose:[]},o):j({singleAnswer:o.questionType===3?0:""},o))},{deep:!0,immediate:!0});const E=()=>{y.value.some(o=>{var C;return["undefined",""].includes(o.singleAnswer)||((C=o.multipleChoose)==null?void 0:C.length)===0})?ue("\u8BF7\u5B8C\u6210\u6240\u6709\u9898\u76EE\u8FDB\u884C\u4E0B\u4E00\u6B65"):n("onSubmitCurrentStatus",1,JSON.stringify(y.value))};return oe(()=>{r.value=[]}),(e,o)=>{const C=c("van-radio"),w=c("van-cell"),h=c("van-cell-group"),I=c("van-radio-group"),q=c("van-checkbox"),a=c("van-checkbox-group"),$=c("van-field"),x=c("van-button"),b=c("ProPageWrap");return u(),_(b,{class:"com-quersion"},{default:l(()=>[g(ce,{title:`${S[v(d)]}\u5065\u5EB7\u544A\u77E5\u4E66`},{default:l(()=>[(u(!0),A(R,null,M(v(y),(s,V)=>(u(),A("div",{key:V,class:"question-item"},[T("div",ge,L(V+1)+". "+L(s.title),1),s.questionType===1?(u(),_(I,{key:0,modelValue:s.singleAnswer,"onUpdate:modelValue":p=>s.singleAnswer=p},{default:l(()=>[g(h,{inset:""},{default:l(()=>[(u(!0),A(R,null,M(f(s.options),(p,D)=>(u(),_(w,{key:D,title:p.title,clickable:"",onClick:O=>s.singleAnswer=D},{"right-icon":l(()=>[g(C,{name:D},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):P("",!0),s.questionType===2?(u(),_(a,{key:1,modelValue:s.multipleChoose,"onUpdate:modelValue":p=>s.multipleChoose=p},{default:l(()=>[g(h,{inset:""},{default:l(()=>[(u(!0),A(R,null,M(f(s.options),(p,D)=>(u(),_(w,{key:p.uid,clickable:"",title:p.title,onClick:O=>m(D)},{"right-icon":l(()=>[g(q,{ref_for:!0,ref:O=>r.value[D]=O,shape:"square",name:D,onClick:o[0]||(o[0]=se(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):P("",!0),s.questionType===3?(u(),_(le,{key:2,modelValue:s.singleAnswer,"onUpdate:modelValue":p=>s.singleAnswer=p,options:[{label:"\u662F",value:"Y"},{label:"\u5426",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):P("",!0),s.questionType===4?(u(),_(h,{key:3,inset:""},{default:l(()=>[g($,{modelValue:s.singleAnswer,"onUpdate:modelValue":p=>s.singleAnswer=p,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):P("",!0)]))),128))]),_:1},8,["title"]),T("div",ye,[g(x,{type:"primary",block:"",onClick:E},{default:l(()=>[he]),_:1})])]),_:1})}}});var ke=U(Ce,[["__scopeId","data-v-41012a55"]]);const be={class:"title"},Se={class:"content"},Ee={class:"footer-button"},we=B("\u4E86\u89E3\u5E76\u7EE7\u7EED"),Ie=F({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const t=i;return(k,r)=>{const d=c("van-button"),S=c("ProPageWrap"),Q=re("dompurify-html");return u(),_(S,{class:"com-document"},{default:l(()=>{var y,m;return[T("div",be,L((y=t.currentPageInfo[0])==null?void 0:y.title),1),ae(T("div",Se,null,512),[[Q,(m=t.currentPageInfo[0])==null?void 0:m.content]]),T("div",Ee,[g(d,{type:"primary",onClick:r[0]||(r[0]=f=>n("onSubmitCurrentStatus",1))},{default:l(()=>[we]),_:1})])]}),_:1})}}});var $e=U(Ie,[["__scopeId","data-v-27a7d770"]]);const xe={class:"com-pdf-viewer"},Ae=["id","isee_pdf"],Pe={class:"footer-button"},Te=B("\u90E8\u5206\u4E3A\u662F"),Ve=B("\u4EE5\u4E0A\u7686\u5426"),De=F({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const t=i;z.exports.GlobalWorkerOptions.workerSrc=de;const k=pe(),r=W(!1),d=W(!0),S=N(()=>["png","jpg","jpeg"].some(m=>t.url.includes(m))),Q=()=>{const m=document.getElementById(k);if(m.hasChildNodes()){d.value=!1;return}z.exports.getDocument({url:t.url}).promise.then(E=>{const e=E.numPages;for(let o=1;o<=e;o++)E.getPage(o).then(C=>{const w=C.getViewport({scale:1}),h=document.createElement("canvas"),I=h.getContext("2d");h.width=w.width,h.height=w.height,h.style.width="100%",m.append(h);const q={canvasContext:I,viewport:w};C.render(q),d.value=!1})})},y=async()=>{r.value=!0,setTimeout(()=>{Q()},0)};return H(()=>{y()}),(m,f)=>{const E=c("van-image"),e=c("van-button");return u(),A("div",xe,[v(S)?(u(),_(E,{key:0,width:"100%",height:"80vh",fit:"contain",src:t.url},null,8,["src"])):(u(),A("div",{key:1,id:v(k),isee_pdf:m.pdfUrl,class:"pdf-wapper"},null,8,Ae)),T("div",Pe,[g(e,{plain:"",type:"primary",onClick:f[0]||(f[0]=o=>n("onSubmitCurrentStatus",2))},{default:l(()=>[Te]),_:1}),g(e,{type:"primary",onClick:f[1]||(f[1]=o=>n("onSubmitCurrentStatus",1))},{default:l(()=>[Ve]),_:1})])])}}});var Qe=U(De,[["__scopeId","data-v-4c70488e"]]);const Be={class:"iframe-wrap"},qe=["src"],Ne={class:"footer-button"},Fe=B("\u90E8\u5206\u4E3A\u662F"),Ue=B("\u4EE5\u4E0A\u7686\u5426"),Oe=F({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const t=i;return(k,r)=>{const d=c("van-button");return u(),A("div",Be,[T("iframe",{src:t.url,frameborder:"0"},null,8,qe),T("div",Ne,[g(d,{plain:"",type:"primary",onClick:r[0]||(r[0]=S=>n("onSubmitCurrentStatus",2))},{default:l(()=>[Fe]),_:1}),g(d,{type:"primary",onClick:r[1]||(r[1]=S=>n("onSubmitCurrentStatus",1))},{default:l(()=>[Ue]),_:1})])])}}});var je=U(Oe,[["__scopeId","data-v-1ac7e729"]]);const Me={class:"com-health-notice"},He=F({setup(i){const n=ie(),t=X(),k=ve.get("questionData"),{questionnaireType:r}=t.query,{orderNo:d="2022021815432987130620",productCode:S="CQ75CQ76",templateId:Q=1,agentCode:y="65434444",orderId:m=13005,tenantId:f=9991000007}=t.query,E={1:4,2:5,3:9},e=Y({pageData:{},currentQuestionInfo:[]}),o=N(()=>r==="2"),C=N(()=>{var a;return r==="1"&&[1].includes((a=e.currentQuestionInfo[0])==null?void 0:a.textType)}),w=N(()=>{var a;return r==="1"&&[2].includes((a=e.currentQuestionInfo[0])==null?void 0:a.textType)}),h=N(()=>{var a;return r==="1"&&[3].includes((a=e.currentQuestionInfo[0])==null?void 0:a.textType)}),I=(a,$)=>{var s;const{id:x,objectType:b}=k;fe({content:$||((s=e.currentQuestionInfo[0])==null?void 0:s.content),contentType:r,isDone:a,noticeType:E[b],objectId:x,objectType:b,orderId:e.pageData.id,orderNo:d,tenantId:9991000007}).then(({code:V,data:p})=>{console.log(V),V==="10000"&&n.go(-1)})},q=()=>{_e({orderNo:d,saleUserId:y,tenantId:f}).then(({code:a,data:$})=>{a==="10000"&&Object.assign(e.pageData,$)})};return H(()=>{q();const{insurerCode:a,id:$,objectType:x,productCategory:b}=k;me({insurerCode:a,id:$,objectType:x,productCategory:b,orderNo:d,tenantId:f}).then(({code:s,data:V})=>{s==="10000"&&(e.currentQuestionInfo=V)})}),(a,$)=>{var x,b;return u(),A("div",Me,[v(o)?(u(),_(ke,{key:0,"current-page-info":v(e).currentQuestionInfo,onOnSubmitCurrentStatus:I},null,8,["current-page-info"])):P("",!0),v(w)?(u(),_($e,{key:1,"current-page-info":v(e).currentQuestionInfo,onOnSubmitCurrentStatus:I},null,8,["current-page-info"])):P("",!0),v(C)?(u(),_(Qe,{key:2,url:(x=v(e).currentQuestionInfo[0])==null?void 0:x.content,onOnSubmitCurrentStatus:I},null,8,["url"])):P("",!0),v(h)?(u(),_(je,{key:3,url:(b=v(e).currentQuestionInfo[0])==null?void 0:b.content,onOnSubmitCurrentStatus:I},null,8,["url"])):P("",!0)])}}});export{He as default};

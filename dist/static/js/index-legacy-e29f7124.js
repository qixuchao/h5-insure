!function(){var e=document.createElement("style");e.innerHTML=".page-verify .card .people[data-v-0a987828]{flex:1;margin-left:.53333rem;display:flex;align-items:center}.page-verify .card .people .name[data-v-0a987828]{font-size:.4rem;font-weight:600;color:#393d46}.page-verify .card .people .status[data-v-0a987828]{margin-left:.26667rem;text-align:center;width:1.2rem;height:.53333rem;line-height:.53333rem;border-radius:.05333rem;border:1px solid #99a9c0;font-size:.32rem;color:#99a9c0}.page-verify .card .people .status.verified[data-v-0a987828]{color:#0d6efe;border-color:#0d6efe}.page-verify .card .verify-item[data-v-0a987828]{display:flex;align-items:center;height:1.41333rem;line-height:1.41333rem;font-size:.4rem;color:#393d46}.page-verify .card .verify-item .no[data-v-0a987828]{margin-left:.64rem}.page-verify .card .verify-item .action[data-v-0a987828]{flex:1;display:flex;align-items:center;justify-content:flex-end;color:#99a9c0}.page-verify .card .verify-item .action .icon[data-v-0a987828]{margin-left:.13333rem;color:#99a9c0;font-size:.32rem}.page-verify .sign-card .resign[data-v-0a987828]{font-size:.37333rem;color:#0d6efe}.page-verify .sign-card .sign-body[data-v-0a987828]{padding-bottom:.4rem}.page-verify .sign-card .sign-body .date[data-v-0a987828]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-verify .sign-card .sign-body .file[data-v-0a987828]{margin-top:.21333rem;font-size:.37333rem;color:#393d46;line-height:.53333rem}.page-verify .sign-card .sign-body .file .file-name[data-v-0a987828]{color:#0d6efe}.page-verify .sign-card .sign-body .file .file-name .dun-hao[data-v-0a987828]{color:#393d46}.page-verify .footer[data-v-0a987828]{position:static;justify-content:space-between}.page-verify .footer .refresh-btn[data-v-0a987828]{width:.66667rem;border:none;color:#0d6efe;font-size:.26667rem;line-height:.37333rem;text-align:center}.page-verify .footer .refresh-btn .text[data-v-0a987828]{margin-top:.13333rem}.page-verify .footer .submit-btn[data-v-0a987828]{flex:1}\n",document.head.appendChild(e),System.register(["./vendor-legacy-0e389512.js","./index-legacy-c72917b1.js","./verify-legacy-cf7bc5e3.js"],(function(e){"use strict";var a,t,r,i,l,n,o,d,s,v,c,u,f,m,g,p,y,h,b,I,C,x,N,O,w,k,D,H,T,_,E,j,L,z,S,U,P,R,q;return{setters:[function(e){a=e.g,t=e.P,r=e.O,i=e.E,l=e.d,n=e.h,o=e.r,d=e.j,s=e.k,v=e.m,c=e.z,u=e.p,f=e.J,m=e.n,g=e.L,p=e.t,y=e.A,h=e.G,b=e.F,I=e.a5,C=e.a6,x=e.C,N=e.T,O=e.D},function(e){w=e._,k=e.S,D=e.I,H=e.J,T=e.q,_=e.l,E=e.K,j=e.N,L=e.n,z=e.P,S=e.r},function(e){U=e.g,P=e.f,R=e.s,q=e.a}],execute:function(){const A=e=>(I("data-v-0a987828"),e=e(),C(),e),M={class:"page-verify"},Y={class:"people"},$={class:"name"},B={class:"verify-item"},F=A((()=>c("div",{class:"label"},"证件号码",-1))),J={class:"no"},Q=x(" 去认证 "),G={class:"sign-body"},K={class:"date"},W={class:"file"},V=x(" 签名将被用于以下文件： "),X={class:"people"},Z={class:"name"},ee={class:"verify-item"},ae=A((()=>c("div",{class:"label"},"证件号码",-1))),te={class:"no"},re=["onClick"],ie=x(" 去认证 "),le=["onClick"],ne={class:"sign-body"},oe={class:"date"},de={class:"file"},se=x(" 签名将被用于以下文件： "),ve={class:"footer-button footer"},ce=x("提交"),ue=a({setup(e){const a=1,I=t(),C=r(),{saleUserId:x="D1234567-1",tenantId:w="9991000007",templateId:A=1,productCode:ue="CQ75CQ76",insurerCode:fe="ancheng"}=I.query;let{orderNo:me}=I.query;"object"==typeof me&&(me=(me||[])[0]);const ge=new k({source:"localStorage"}),pe=i([]),ye=i(),he=i(),be=[],Ie=l().format("YYYY-MM-DD"),Ce=()=>{var e;null===(e=he.value)||void 0===e||e.clear()},xe=(e,a)=>{q({callbackUrl:window.location.href,certiNo:e,faceAuthMode:"TENCENT",userName:a,tenantId:9991000007}).then((t=>{const{code:r,data:i}=t;if("10000"===r){const{originalUrl:t,serialNo:r}=i;window.location.href=t,ge.set("verifyData",{serialNo:r,certNo:e,name:a})}}))},Ne=e=>e===H.CERT,Oe=e=>{var a,t,r,i;-1===e?xe(null===(a=ye.value.tenantOrderHolder)||void 0===a?void 0:a.certNo,null===(t=ye.value.tenantOrderHolder)||void 0===t?void 0:t.name):xe(null===(r=ye.value.tenantOrderInsuredList[e])||void 0===r?void 0:r.certNo,null===(i=ye.value.tenantOrderInsuredList[e])||void 0===i?void 0:i.name)},we=e=>{e&&be.every((a=>a!==e))&&be.push(e)},ke=()=>{var e,t,r,i,l;(null===(e=he.value)||void 0===e?void 0:e.isEmpty())?N.fail("请投保人签名"):be.some((e=>e.isEmpty()))?N.fail("请被保人签名"):(null===(t=ye.value.tenantOrderHolder)||void 0===t||null===(r=t.extInfo)||void 0===r?void 0:r.isCert)!==a&&Ne(null===(i=ye.value.tenantOrderHolder)||void 0===i?void 0:i.certType)?N.fail("请投保人去认证"):null!==(l=ye.value.tenantOrderInsuredList)&&void 0!==l&&l.some((e=>{var t;return(null===(t=e.extInfo)||void 0===t?void 0:t.isCert)!==a&&Ne(e.certType)}))?N.fail("请被保人去认证"):O.confirm({title:"提示",message:"请确认信息填写无误后，再进行支付"}).then((()=>{var e,a;const t=null===(e=he.value)||void 0===e?void 0:e.save();Promise.all([R("HOLDER",t,null===(a=ye.value)||void 0===a?void 0:a.id,`${w}`),...be.map((e=>{var a;return R("INSURED",e.save(),null===(a=ye.value)||void 0===a?void 0:a.id,`${w}`)}))]).then((()=>{L({...ye.value,pageCode:"sign",operateOption:{withSignInfo:!0},extInfo:{pageCode:"sign",templateId:A},venderCode:"ancheng"}).then((e=>{const{code:a,data:t}=e;"10000"===a&&t.success&&C.push({path:z[t.pageAction.data.nextPageCode],query:{orderNo:me,saleUserId:x,tenantId:w}})}))}))}))},De=()=>{S({orderNo:me,saleUserId:x,tenantId:w}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(ye.value=t,setTimeout((()=>{let e=0;t.tenantOrderAttachmentList.forEach((a=>{21===a.category&&(2===a.objectType?(he.value.clear(),he.value.setDataURL(a.fileBase64)):1===a.objectType&&(be[e].clear(),be[e].setDataURL(a.fileBase64),e+=1))}))})))}))};return n((()=>{De(),U({orderNo:me,productCode:ue,tenantId:w}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(pe.value=t||[])}));const e=ge.get("verifyData");if(e){const{serialNo:a,certNo:t,name:r}=e;P({certiNo:t,orderNo:me,serialNo:a,tenantId:w,userName:r}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(ge.remove("verifyData"),De())}))}})),(e,t)=>{const r=o("ProPDFviewer"),i=o("van-button"),l=o("ProPageWrap");return d(),s(l,null,{default:v((()=>{var e;return[c("div",M,[u(D,{type:"warning",title:"尊敬的客户，本次投保需要进行身份认证",content:"本产品投保需要对投保人、被保人进行实名认证，您购买本产品的累计总保费已超过20万，按监管要求，需要提供投保人、被保人、指定受益人证件影像，本产品非本人投保且带身故责任、需对投保人、被保人（成人）的投保意愿进行签字确认。"}),u(_,{title:"投保人",class:"card"},{extra:v((()=>{var e,t,r,i,l,n,o,s,v,u;return[c("div",Y,[c("div",$,f(null===(e=ye.value)||void 0===e||null===(t=e.tenantOrderHolder)||void 0===t?void 0:t.name),1),Ne(null===(r=ye.value)||void 0===r||null===(i=r.tenantOrderHolder)||void 0===i?void 0:i.certType)?(d(),m("div",{key:0,class:g(["status",{verified:(null===(l=ye.value)||void 0===l||null===(n=l.tenantOrderHolder)||void 0===n||null===(o=n.extInfo)||void 0===o?void 0:o.isCert)===a}])},f((null===(s=ye.value)||void 0===s||null===(v=s.tenantOrderHolder)||void 0===v||null===(u=v.extInfo)||void 0===u?void 0:u.isCert)===a?"已认证":"待认证"),3)):p("",!0)])]})),default:v((()=>{var e,r,i,l,n,o,s;return[c("div",B,[F,c("div",J,f(null===(e=ye.value)||void 0===e||null===(r=e.tenantOrderHolder)||void 0===r?void 0:r.certNo),1),(null===(i=ye.value)||void 0===i||null===(l=i.tenantOrderHolder)||void 0===l||null===(n=l.extInfo)||void 0===n?void 0:n.isCert)!==a&&Ne(null===(o=ye.value)||void 0===o||null===(s=o.tenantOrderHolder)||void 0===s?void 0:s.certType)?(d(),m("div",{key:0,class:"action",onClick:t[0]||(t[0]=e=>Oe(-1))},[Q,u(T,{name:"right_arrow",class:"icon"})])):p("",!0)])]})),_:1}),u(_,{title:"投保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:v((()=>[c("div",{class:"resign",onClick:Ce},"重签")])),default:v((()=>[u(E,{ref_key:"holderSign",ref:he,class:"sign"},null,512),c("div",G,[c("div",K,"签名日期： "+f(y(Ie)),1),c("div",W,[V,(d(!0),m(b,null,h(pe.value.filter((e=>e.noticeObject===y(j).HOLDER)),((e,a)=>(d(),s(r,{key:a,class:"file",title:`《${e.materialName}》`,url:e.materialSource},null,8,["title","url"])))),128))])])])),_:1}),(d(!0),m(b,null,h(null===(e=ye.value)||void 0===e?void 0:e.tenantOrderInsuredList,((e,t)=>(d(),m("div",{key:t},[u(_,{title:"被保人",class:"card"},{extra:v((()=>{var t,r;return[c("div",X,[c("div",Z,f(e.name),1),Ne(e.certType)?(d(),m("div",{key:0,class:g(["status",{verified:(null===(t=e.extInfo)||void 0===t?void 0:t.isCert)===a}])},f((null===(r=e.extInfo)||void 0===r?void 0:r.isCert)===a?"已认证":"待认证"),3)):p("",!0)])]})),default:v((()=>{var r;return[c("div",ee,[ae,c("div",te,f(e.certNo),1),(null===(r=e.extInfo)||void 0===r?void 0:r.isCert)!==a&&Ne(e.certType)?(d(),m("div",{key:0,class:"action",onClick:e=>Oe(t)},[ie,u(T,{name:"right_arrow",class:"icon"})],8,re)):p("",!0)])]})),_:2},1024),u(_,{title:"被保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:v((()=>[c("div",{class:"resign",onClick:e=>(e=>{be[e].clear()})(t)},"重签",8,le)])),default:v((()=>[u(E,{ref_for:!0,ref:we,class:"sign"}),c("div",ne,[c("div",oe,"签名日期： "+f(y(Ie)),1),c("div",de,[se,(d(!0),m(b,null,h(pe.value.filter((e=>e.noticeObject===y(j).INSURED)),((e,a)=>(d(),s(r,{key:a,class:"file",title:`《${e.materialName}》`,url:e.materialSource},null,8,["title","url"])))),128))])])])),_:2},1024)])))),128)),c("div",ve,[u(i,{type:"primary",class:"submit-btn",onClick:ke},{default:v((()=>[ce])),_:1})])])]})),_:1})}}});e("default",w(ue,[["__scopeId","data-v-0a987828"]]))}}}))}();

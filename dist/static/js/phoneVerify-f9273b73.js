import{G as a,d as e,r as s,u as r,a1 as t,b as o,c as l,e as n,w as d,f as i,E as u,g as c,ah as p,a3 as v,bG as I,F as m,i as f,j as b,m as C,T as h,bH as N,p as j,B as _,am as T,an as y}from"./index-b1389c66.js";import{s as E,c as S}from"./phoneVerify-054f09a1.js";import{c as O}from"./format-b5e9d8b9.js";import{u as g}from"./useOrder-bb4f2295.js";import"./pdfh5-008ca364.js";import"./merge-e7788e50.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";const P={class:"page-phone-verify"},k=(a=>(T("data-v-6781f4aa"),a=a(),y(),a))((()=>i("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息填写",-1))),A={class:"phone"},D={class:"input-wrapper"};var F=a(e({__name:"phoneVerify",setup(a){const e=g(),T=s(""),y=s(""),F=s(0);let G;const U=r(),{agentCode:q,tenantId:w,templateId:R,productCode:V,insurerCode:W,orderNo:x,orderCode:L}=U.query,B=()=>{E(T.value).then((({code:a})=>{"10000"===a&&(F.value=60,G=setInterval((()=>{F.value-=1,F.value<=0&&clearInterval(G)}),1e3))}))},H=()=>{S(T.value,y.value).then((({code:a,data:s})=>{"10000"===a&&s?(h.success("验证成功"),e.value.orderStatus===N.PROCESSING?j("infoCollection",{...U.query,isShare:1}):[N.WAIT_IDENTIFICATION,N.IDENTIFICATION_COMPLETE,N.IN_IDENTIFICATION,N.UNDER_WRITING_SUCCESS].includes(e.value.orderStatus)&&j("infoPreview",{...U.query,isShare:1})):h.fail("验证失败")}))};return t((()=>{C({orderNo:L||x,saleUserId:q,tenantId:w}).then((({code:a,data:s})=>{var r;"10000"===a&&(Object.assign(e.value,s),T.value=null==(r=null==s?void 0:s.holder)?void 0:r.mobile)}))})),(a,e)=>{const s=_,r=o("ProPageWrap");return l(),n(r,null,{default:d((()=>[i("div",P,[k,i("div",A,u(c(O)(c(T)||"")),1),i("div",D,[p(i("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>v(y)?y.value=a:null),placeholder:"请输入验证码",class:"input"},null,512),[[I,c(y)]]),i("div",{class:m(["btn",{second:c(F)}]),onClick:B},u(c(F)?`${c(F)}s`:"发送验证码"),3)]),f(s,{type:"primary",class:"submit-btn",onClick:H},{default:d((()=>[b("下一步")])),_:1})])])),_:1})}}}),[["__scopeId","data-v-6781f4aa"]]);export{F as default};

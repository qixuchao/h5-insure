import{i as a,P as e,r as o,aC as r,k as s,l,m as n,n as d,p as t,B as u,L as i,G as c,C as p,s as v,t as m,x as y,H as f,F as N,aD as g,T as I,aE as P}from"./vendor-86ac9d42.js";import{g as k,P as w,u as x,s as C,l as W}from"./core-3d4fa83e.js";import"./index-d8ed11f6.js";import"./index-0db00022.js";const b={class:"pay-amount"},h=c(" ￥"),j={class:"amount"},S={class:"order-info"},V={class:"order-name"},$={class:"order-no"},_={key:0},A={class:"pay-wrapper"},T=["src"],B=a({setup(a){const B=e().query,D=k(B.payWay||w.WXPAY),G=o(),U=o(!1),X=o(w.WX_SIGN),q=o("h5"),z=()=>{const a=`${window.location.protocol}//${window.location.host}/baseInsurance/orderDetail?orderNo=${B.businessTradeNo||B.orderNo}&tenantId=${B.tenantId}`;C({...G.value,payWay:X.value,srcType:q.value,code:B.code,extraInfo:JSON.stringify({redirectRrl:a,wxCode:B.code}),redirectUrl:a})},{copy:E,copied:F,isSupported:H}=r({source:""}),J=()=>{var a;E(null==(a=G.value)?void 0:a.orderNo),I("复制成功")};return x(),s((()=>{U.value=!0,W({orderNo:B.orderNo||"P2211220947519991000001750022183",tenantId:B.tenantId||"9991000001"}).then((a=>{"10000"===a.code&&(G.value=a.data)})).finally((()=>{U.value=!1}))})),(a,e)=>{const o=l("ProSvg"),r=l("VanButton"),s=l("ProPageWrap");return n(),d(s,{title:"收银台","main-class":"page-cashier"},{default:t((()=>{var a,s,l;return[u("div",b,[h,u("span",j,i(null==(a=G.value)?void 0:a.orderAmt),1)]),u("div",S,[u("div",V,i(null==(s=G.value)?void 0:s.orderName),1),u("div",$,[c(" 订单号： "+i((null==(l=G.value)?void 0:l.orderNo)+" ")+" ",1),p(H)?(n(),v("span",_,[m(o,{name:"copy",onClick:J})])):y("",!0)])]),u("div",A,[m(p(g),{modelValue:X.value,"onUpdate:modelValue":e[0]||(e[0]=a=>X.value=a)},{default:t((()=>[(n(!0),v(N,null,f(p(D),(a=>(n(),v("div",{key:a.name,class:"pay-item"},[u("span",null,[u("img",{src:a.img},null,8,T),c(i(a.title),1)]),m(p(P),{name:a.name},null,8,["name"])])))),128))])),_:1},8,["modelValue"])]),m(r,{type:"primary",round:"",size:"large",block:"",onClick:z},{default:t((()=>{var a;return[c("确认付款 ￥"+i(null==(a=G.value)?void 0:a.orderAmt),1)]})),_:1})]})),_:1})}}});export{B as default};

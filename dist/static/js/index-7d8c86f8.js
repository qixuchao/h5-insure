import{useSlots as e,computed as t,ref as o,onMounted as n}from"vue";import{_ as r,aI as u,u as a,a as l,g as d,aS as c,h as i,b7 as s,D as V,T as p,o as m,ba as v,b8 as f}from"./index-deb4ddfb.js";/* empty css              */import{d as N}from"./order-d7f1976d.js";import{d as C}from"./trial-90e504aa.js";import{e as k,g as y}from"./infoCollection-f930e52f.js";import{R as h,b as g}from"./trial-a75330fd.js";import"./pdfh5-e588f83d.js";const I={class:"com-field-info"},b={key:0,class:"label"},B={class:"content"};var x=r(Vue.defineComponent({__name:"fieldInfo",props:{label:{type:String,default:""},content:{type:String,default:""}},setup(t){const o=e();return(e,n)=>(Vue.openBlock(),Vue.createElementBlock("div",I,[t.label?(Vue.openBlock(),Vue.createElementBlock("div",b,Vue.toDisplayString(t.label),1)):Vue.createCommentVNode("",!0),Vue.unref(o).label?Vue.renderSlot(e.$slots,"label",{key:1},void 0,!0):Vue.createCommentVNode("",!0),Vue.createElementVNode("div",B,Vue.toDisplayString(t.content),1),Vue.unref(o).content?Vue.renderSlot(e.$slots,"content",{key:2},void 0,!0):Vue.createCommentVNode("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const E={class:"com-insured-part-wrapper"},S={class:"content-wrapper"},_={class:"product-name"},D={class:"risk-item"};var L=r(Vue.defineComponent({__name:"InsuredPart",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup(e){const o=e,n=t((()=>{var e,t;const n={riderRiskList:[],amount:0},r=null==(e=o.productData)?void 0:e.riskList.find((e=>e.riskType===h.MAIN_RISK));return Object.assign(n,r),null==(t=o.productData)||t.riskList.forEach((e=>{n.riderRiskList.push(e.riskName||"")})),n}));return(e,t)=>{const o=Vue.resolveComponent("ProCell"),r=Vue.resolveComponent("ProCard");return Vue.openBlock(),Vue.createElementBlock("div",E,[Vue.createVNode(r,{title:"保障信息"},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",S,[Vue.createElementVNode("div",_,Vue.toDisplayString(e.productData.productName),1),Vue.createElementVNode("div",D,[Vue.createVNode(o,{title:"保障期间",content:Vue.unref(n).coveragePeriodDesc},null,8,["content"]),Vue.createVNode(o,{title:"交费期间",content:Vue.unref(n).chargePeriodDesc},null,8,["content"]),Vue.createVNode(o,{title:"交费方式",content:Vue.unref(g)[Vue.unref(n).paymentFrequency]},null,8,["content"]),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(n).riderRiskList,((e,t)=>(Vue.openBlock(),Vue.createBlock(o,{key:t,title:e,content:"投保"},null,8,["title"])))),128)),Vue.createVNode(o,{title:"保障金额",content:(Vue.unref(n).initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),Vue.createVNode(o,{title:"首期保费",class:"price",content:(e.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])])),_:1})])}}}),[["__scopeId","data-v-51eb63ba"]]);const w={key:0,class:"page-order-detail"},T={class:"card"},Y={class:"header"},P={class:"product-name"},M={class:"company-name"},j={class:"status"},A={key:0,class:"footer-button"},G={key:1,class:"footer-button"},R={key:2,class:"footer-button"};var q=r(Vue.defineComponent({__name:"index",setup(e){const t=u(),r=a(),h=l(),g=o(),{query:{orderNo:I,agentCode:b,tenantId:B,abbreviation:E,productCategory:S}}=r,_=()=>{V.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{g.value&&N(g.value.id,g.value.orderStatus).then((e=>{const{code:t,data:o}=e;"10000"===t&&p.success("删除成功")}))}))},D=o(!1),q=()=>{var e,t,o,n,r;if(g.value){if((()=>{var e,t,o;if(!g.value)return!1;const{agencyId:n,saleChannelId:r,orderTopStatus:u}=g.value,a=null==(o=null==(t=null==(e=g.value.insuredList)?void 0:e[0])?void 0:t.productList[0])?void 0:o.productCode;if(!(s.PENDING!==u&&s.PAYING!==u||a!==f.ZXYS&&a!==f.BWYL)){const e={[f.ZXYS]:"/internet/productDetail/package",[f.BWYL]:"/internet/productDetail"};return h.push({path:e[a],query:{productCode:a,saleChannelId:r,agentCode:b,tenantId:B,agencyCode:n,orderNo:I}}),!0}return!1})())return;const{id:u,extInfo:{templateId:a,pageCode:l,extraInfo:d},agencyId:c,insurerCode:i,orderStatus:V}=g.value,p={insurerCode:i,productCode:null==(o=null==(t=null==(e=g.value.insuredList)?void 0:e[0])?void 0:t.productList[0])?void 0:o.productCode,tenantId:g.value.tenantId,agencyCode:g.value.agencyId,agentCode:g.value.saleUserId,saleChannelId:null==d?void 0:d.saleChannelId,extraMap:{...null==(r=null==(n=g.value)?void 0:n.extInfo)?void 0:r.extraInfo,orderNo:g.value.orderNo}};D.value=!0,C(p).then((e=>{if(console.log("投保链接==",e.data),"10000"===e.code)if([k.LONG,k.NIANJIN].includes(y(`${a}`))){const t=e.data.split("?")[1],o=m.parse(t);h.push({path:v[V],query:{...o,extraInfo:o.extraInfo,orderNo:I,templateId:a}})}else window.location.href=e.data}))}};return n((()=>{d({orderNo:I,agentCode:b,tenantId:B}).then((e=>{const{code:t,data:o}=e;"10000"===t&&(g.value=o)}))})),(e,o)=>{const n=Vue.resolveComponent("van-button"),r=Vue.resolveComponent("van-config-provider"),u=Vue.resolveDirective("loading");return Vue.openBlock(),Vue.createBlock(r,{"theme-vars":Vue.unref(t)},{default:Vue.withCtx((()=>{var e,t,o,r,a,l,d,V,p,m,v,f;return[Vue.unref(g)?(Vue.openBlock(),Vue.createElementBlock("div",w,[Vue.createElementVNode("div",T,[Vue.createVNode(x,null,{label:Vue.withCtx((()=>{var e,t,o,n;return[Vue.createElementVNode("div",Y,[Vue.createElementVNode("div",P,Vue.toDisplayString(null==(o=null==(t=null==(e=Vue.unref(g))?void 0:e.insuredList[0])?void 0:t.productList[0])?void 0:o.productName),1),Vue.createElementVNode("div",M,Vue.toDisplayString(((null==(n=Vue.unref(g))?void 0:n.abbreviation)||"").substring(0,6)),1)])]})),content:Vue.withCtx((()=>{var e;return[Vue.createElementVNode("div",j,Vue.toDisplayString(Vue.unref(g)?Vue.unref(c)[null==(e=Vue.unref(g))?void 0:e.orderStatus]:""),1)]})),_:1}),Vue.createVNode(x,{label:"投保单号",content:null==(e=Vue.unref(g))?void 0:e.orderNo},null,8,["content"]),Vue.createVNode(x,{label:"创建时间",content:Vue.unref(i)(null==(t=Vue.unref(g))?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),Vue.createVNode(x,{label:"投保人",content:null==(r=null==(o=Vue.unref(g))?void 0:o.holder)?void 0:r.name},null,8,["content"]),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList((null==(a=Vue.unref(g))?void 0:a.insuredList)||[],((e,t)=>(Vue.openBlock(),Vue.createBlock(x,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),Vue.createVNode(L,{"product-data":null==(p=null==(V=null==(d=null==(l=Vue.unref(g))?void 0:l.insuredList)?void 0:d[0])?void 0:V.productList)?void 0:p[0],"total-premium":Vue.unref(g).orderAmount,class:"insure-info"},null,8,["product-data","total-premium"]),Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("div",null,[(null==(m=Vue.unref(g))?void 0:m.orderTopStatus)===Vue.unref(s).PENDING?(Vue.openBlock(),Vue.createElementBlock("div",A,[Vue.createVNode(n,{type:"primary",onClick:Vue.withModifiers(_,["stop"])},{default:Vue.withCtx((()=>[Vue.createTextVNode("删除")])),_:1},8,["onClick"]),Vue.createVNode(n,{type:"primary",onClick:Vue.withModifiers(q,["stop"])},{default:Vue.withCtx((()=>[Vue.createTextVNode("去处理")])),_:1},8,["onClick"])])):Vue.createCommentVNode("",!0),(null==(v=Vue.unref(g))?void 0:v.orderTopStatus)===Vue.unref(s).PAYING?(Vue.openBlock(),Vue.createElementBlock("div",G,[Vue.createVNode(n,{type:"primary",onClick:Vue.withModifiers(_,["stop"])},{default:Vue.withCtx((()=>[Vue.createTextVNode("删除")])),_:1},8,["onClick"]),Vue.createVNode(n,{type:"primary",onClick:Vue.withModifiers(q,["stop"])},{default:Vue.withCtx((()=>[Vue.createTextVNode("去支付")])),_:1},8,["onClick"])])):Vue.createCommentVNode("",!0),(null==(f=Vue.unref(g))?void 0:f.orderTopStatus)===Vue.unref(s).TIMEOUT?(Vue.openBlock(),Vue.createElementBlock("div",R,[Vue.createVNode(n,{type:"primary",onClick:Vue.withModifiers(_,["stop"])},{default:Vue.withCtx((()=>[Vue.createTextVNode("删除")])),_:1},8,["onClick"])])):Vue.createCommentVNode("",!0)])),[[u,Vue.unref(D)]])])):Vue.createCommentVNode("",!0)]})),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-e356e3ba"]]);export{q as default};

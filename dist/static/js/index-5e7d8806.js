var le=Object.defineProperty,oe=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var z=(e,o,t)=>o in e?le(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,D=(e,o)=>{for(var t in o||(o={}))ne.call(o,t)&&z(e,t,o[t]);if(W)for(var t of W(o))re.call(o,t)&&z(e,t,o[t]);return e},C=(e,o)=>oe(e,te(o));import{g as J,L as S,X as G,x as de,h as I,m as w,n as l,z as a,k as m,a1 as Q,a2 as Z,y as f,B as q,ad as se,C as k,M as ie,r as R,j as x,s as j,E as me,F as pe,J as ce,I as ve}from"./vendor-4dbfa310.js";import{_ as X,d as h,y as V,i as be,U as ye,z as g,h as L}from"./index-21ff2934.js";import{u as fe}from"./useDicData-63f67f80.js";import{a as Fe,n as De}from"./index-cff3571e.js";const Ce=e=>Array.isArray(e)&&e.length>0,ke=e=>[void 0,null].includes(e);function B(e=[],o={label:"label",value:"value"}){if(!Ce(e))return{};const{label:t,value:v}=o,u={};return e.forEach(b=>{const p=b[`${v}`];ke(p)||(u[`${p}`]=b[`${t}`])}),u}var O=(e=>(e[e.REAL_TIME=1]="REAL_TIME",e[e.BATCH=2]="BATCH",e))(O||{});const $=[{value:1,label:"\u5B9E\u65F6\u8F6C\u8D26"},{value:2,label:"\u6279\u91CF\u6263\u6B3E"}];B($);var M=(e=>(e[e.DEBIT=1]="DEBIT",e[e.CREDIT=2]="CREDIT",e[e.PRE_PAY=3]="PRE_PAY",e[e.PRE_CREDIT=4]="PRE_CREDIT",e[e.OTHER=5]="OTHER",e))(M||{});const P=[{value:1,label:"\u501F\u8BB0\u5361"},{value:2,label:"\u8D37\u8BB0\u5361"},{value:3,label:"\u9884\u4ED8\u8D39\u5361"},{value:4,label:"\u51C6\u8D37\u8BB0\u5361"},{value:5,label:"\u5176\u4ED6"}];B(P);var E=(e=>(e[e.FIRST_TERM=1]="FIRST_TERM",e[e.RENEW_TERM=2]="RENEW_TERM",e[e.REPRISE=3]="REPRISE",e[e.OTHER=4]="OTHER",e))(E||{});const K=[{value:1,label:"\u9996\u671F\u652F\u4ED8"},{value:2,label:"\u7EED\u671F\u652F\u4ED8"},{value:3,label:"\u5E74\u91D1\u9886\u53D6"},{value:4,label:"\u5176\u4ED6"}];B(K);var T=(e=>(e[e.FIRST_SAME=1]="FIRST_SAME",e[e.RENEW_SAME=2]="RENEW_SAME",e[e.OTHER=3]="OTHER",e))(T||{});const Ie=[{value:1,label:"\u540C\u9996\u671F"},{value:2,label:"\u540C\u7EED\u671F"},{value:3,label:"\u5176\u4ED6"}];B(K);var U=(e=>(e[e.AUTOMATIC_PADDING=1]="AUTOMATIC_PADDING",e[e.CANCEL=2]="CANCEL",e))(U||{});const N=[{value:1,label:"\u81EA\u52A8\u57AB\u4ED8"},{value:2,label:"\u4E2D\u6B62\u5408\u540C"}];B(N);const Ve=e=>(Q("data-v-43838ecf"),e=e(),Z(),e),Ee={class:"com-bank-card-info"},he=Ve(()=>f("span",{class:"field-title"},[q("\u94F6\u884C\u5361\u7167\u7247 "),f("span",{class:"sub-title"},"(\u9700\u4E0A\u4F20\u6B63\u53CD\u4E24\u9762)")],-1)),Be=J({props:{modelVale:{type:Object,default:()=>{}},holderName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:o}){const t=e,v=fe("BANK");let u=S({bankCardType:M.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]});const b=d=>d&&d.length===2?!0:"\u8BF7\u4E0A\u4F20\u94F6\u884C\u5361\u6B63\u53CD\u9762\u7167\u7247";G(()=>t.modelVale,d=>{u=d}),G(u,d=>{o("update:modelValue",d)});const p=de(()=>v.value.map(d=>({label:d.name,value:d.code})));return(d,s)=>(I(),w("div",Ee,[l(h,{modelValue:a(u).bankCardType,"onUpdate:modelValue":s[0]||(s[0]=i=>a(u).bankCardType=i),label:"\u5361\u7247\u7C7B\u578B",name:"bankCardType","data-source":a(P),"is-view":""},null,8,["modelValue","data-source"]),l(V,{modelValue:a(u).bankCardNo,"onUpdate:modelValue":s[1]||(s[1]=i=>a(u).bankCardNo=i),label:"\u94F6\u884C\u5361\u53F7",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"]),l(V,{"model-value":e.holderName,label:"\u6301\u5361\u4EBA",name:"accountName","is-view":""},null,8,["model-value"]),l(h,{modelValue:a(u).payBank,"onUpdate:modelValue":s[2]||(s[2]=i=>a(u).payBank=i),name:"payBank",label:"\u5F00\u6237\u94F6\u884C","data-source":a(p),required:""},null,8,["modelValue","data-source"]),l(V,{label:"\u94F6\u884C\u5361\u7167\u7247",block:"","label-width":"100%",name:"images",rules:[{validator:b}]},{label:m(()=>[he]),input:m(()=>[l(be,{modelValue:a(u).images,"onUpdate:modelValue":s[3]||(s[3]=i=>a(u).images=i),"max-count":2,"upload-type":a(ye).BANK_CARD},null,8,["modelValue","upload-type"])]),_:1},8,["rules"]),l(V,{modelValue:a(u).mobile,"onUpdate:modelValue":s[4]||(s[4]=i=>a(u).mobile=i),label:"\u9884\u7559\u624B\u673A\u53F7",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])]))}});var A=X(Be,[["__scopeId","data-v-43838ecf"]]);const Re=e=>(Q("data-v-aa2516ae"),e=e(),Z(),e),Se={class:"page-bank-card"},Te={class:"reprise-card-list"},_e=["onClick"],xe={class:"agree"},ge=q(" \u6295\u4FDD\u4EBA\u9605\u8BFB\u5E76\u63A5\u53D7 "),Le=Re(()=>f("div",{class:"file"},"\u300A\u94F6\u884C\u8F6C\u8D26\u6388\u6743\u300B",-1)),Ae={class:"footer-button footer"},we=q("\u4E0B\u4E00\u6B65"),Oe=J({setup(e){se();let o={};const t=k(""),v=S({payMethod:O.REAL_TIME,bankData:{}}),u=S({payMethod:O.REAL_TIME,expiryMethod:U.AUTOMATIC_PADDING,bankData:{},sameFirst:!0}),b=S({bankData:{}}),p=k(T.FIRST_SAME),d=k(!1),s=k(),i=k(),H=k(),Y=y=>{p.value=y},ee=()=>{var y,n,c;Promise.all([(y=s.value)==null?void 0:y.validate(),(n=i.value)==null?void 0:n.validate(),(c=H.value)==null?void 0:c.validate()]).then(F=>{const _=[C(D({},F[0]),{paymentType:E.FIRST_TERM}),C(D({},F[1]),{paymentType:E.RENEW_TERM,payInfoType:F[1].sameFirst?T.FIRST_SAME:E.OTHER}),C(D({},F[2]),{paymentType:E.REPRISE,payInfoType:p})];De(C(D({},o),{pageCode:"payInfo",tenantOrderPayInfoList:_,extInfo:C(D({},o.extInfo),{templateId:"1",pageCode:"payInfo"}),operateOption:{withPayInfo:!0}}))})};return ie(()=>{Fe({orderNo:"2022072710380711215",saleUserId:"D1234567-1",tenantId:"9991000007"}).then(y=>{const{code:n,data:c}=y;n==="10000"&&(o=c,t.value=c==null?void 0:c.tenantOrderHolder.name)})}),(y,n)=>{const c=R("van-switch"),F=R("van-checkbox"),_=R("van-button"),ae=R("ProPageWrap");return I(),x(ae,null,{default:m(()=>[f("div",Se,[l(L,{title:"\u9996\u671F\u652F\u4ED8"},{default:m(()=>[l(g,{ref_key:"form1",ref:s},{default:m(()=>[l(h,{modelValue:a(v).payMethod,"onUpdate:modelValue":n[0]||(n[0]=r=>a(v).payMethod=r),name:"payMethod",required:"",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":a($)},null,8,["modelValue","data-source"]),l(A,{modelValue:a(v).bankData,"onUpdate:modelValue":n[1]||(n[1]=r=>a(v).bankData=r),"holder-name":t.value},null,8,["modelValue","holder-name"])]),_:1},512)]),_:1}),l(L,{title:"\u7EED\u671F\u652F\u4ED8"},{default:m(()=>[l(g,{ref_key:"form2",ref:i},{default:m(()=>[l(V,{label:"\u540C\u9996\u671F",name:"sameFirst"},{input:m(()=>[l(c,{modelValue:a(u).sameFirst,"onUpdate:modelValue":n[2]||(n[2]=r=>a(u).sameFirst=r),size:"22"},null,8,["modelValue"])]),_:1}),l(h,{modelValue:a(u).payMethod,"onUpdate:modelValue":n[3]||(n[3]=r=>a(u).payMethod=r),name:"payMethod",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":a($),required:""},null,8,["modelValue","data-source"]),l(h,{modelValue:a(u).expiryMethod,"onUpdate:modelValue":n[4]||(n[4]=r=>a(u).expiryMethod=r),name:"expiryMethod",label:"\u4FDD\u8D39\u903E\u671F\u672A\u652F\u4ED8","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":a(N),required:"","label-width":"200"},null,8,["modelValue","data-source"]),a(u).sameFirst?j("",!0):(I(),x(A,{key:0,"holder-name":t.value},null,8,["holder-name"]))]),_:1},512)]),_:1}),l(L,{title:"\u5E74\u91D1\u9886\u53D6\u94F6\u884C\u5361",class:"reprise-card","show-divider":!1},{default:m(()=>[f("div",Te,[(I(!0),w(pe,null,me(a(Ie),(r,ue)=>(I(),w("div",{key:ue,class:ce(["reprise-card-item",{selected:p.value===r.value}]),onClick:$e=>Y(r.value)},ve(r.label),11,_e))),128))]),l(g,{ref_key:"form3",ref:H},{default:m(()=>[p.value===a(T).OTHER?(I(),x(A,{key:0,modelValue:a(b).bankData,"onUpdate:modelValue":n[5]||(n[5]=r=>a(b).bankData=r),"holder-name":t.value},null,8,["modelValue","holder-name"])):j("",!0)]),_:1},512)]),_:1}),f("div",xe,[l(F,{modelValue:d.value,"onUpdate:modelValue":n[6]||(n[6]=r=>d.value=r),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),ge,Le]),f("div",Ae,[l(_,{type:"primary",onClick:ee},{default:m(()=>[we]),_:1})])])]),_:1})}}});var je=X(Oe,[["__scopeId","data-v-aa2516ae"]]);export{je as default};

import{d as e,bY as t,bZ as n,u as a,a as l,r as o,E as i,an as d,a9 as s,b6 as u,G as r,c,h as v,g as p,F as m,j as f,e as C,k as I,f as _,w as h,n as y,a7 as k,ck as b,c0 as g,c7 as w}from"./index-714e955a.js";import{i as O}from"./trial-313bafab.js";import{b as x,c as N}from"./product-53a6a73d.js";import{_ as T}from"./index-bde10e6f.js";import{u as P,G as R,_ as j}from"./useAttachment-f6b693c5.js";import{P as A}from"./index-4119de2d.js";import{g as L}from"./utils-a19c2637.js";import"./pdfh5-008ca364.js";import"./infoCollection-0df042fb.js";import"./trial-ff3dfe99.js";const S={key:0},E={key:1,class:"page-internet-product-detail","data-skeleton-root":"LONG"},F={class:"info"},V={key:1,class:"preview-placeholder"},B=f("br",null,null,-1),U=f("span",{id:"insureButton"},null,-1),D=f("div",{id:"xinaoDialog"},null,-1),q=e({__name:"index",setup(e){const q=t((()=>n((()=>import("./index-96a8f386.js")),["static/js/index-96a8f386.js","static/css/index-5817a510.css","static/js/index-714e955a.js","static/css/index-6495afd9.css","static/js/pdfh5-008ca364.js","static/js/ProAddress.vue_vue_type_style_index_0_scoped_true_lang-6da259ee.js","static/css/ProAddress.vue_vue_type_style_index_0_scoped_true_lang-d13f791f.css","static/js/index-aaf473d4.js","static/css/index-ea4f829a.css","static/js/index-09fc2bcd.js","static/css/index-988110d6.css","static/js/index-c1074cc0.js","static/css/index-c3fdf902.css","static/js/cloneDeep-aaa98338.js","static/js/keysIn-b3061da8.js","static/js/isObjectLike-d00d103b.js","static/js/trial-313bafab.js","static/js/index-1700568d.js","static/js/TrialButton-04edb552.js","static/css/TrialButton-12c183b3.css","static/js/index-753a89f1.js","static/css/index-85f26bb0.css","static/js/index-84a23643.js","static/css/index-973d8570.css","static/js/empty-ae586b6c.js","static/js/box-title-f821c415.js","static/css/box-title-54f6fe95.css","static/js/index-c17a9150.js","static/js/echarts-5be271e9.js","static/js/Table-06273c07.js","static/css/Table-da427f8c.css"]))),G=t((()=>n((()=>import("./index-985d780b.js")),["static/js/index-985d780b.js","static/css/index-ea588f10.css","static/js/index-714e955a.js","static/css/index-6495afd9.css","static/js/pdfh5-008ca364.js","static/js/theme-65292714.js","static/js/index-753a89f1.js","static/css/index-85f26bb0.css","static/js/utils-a19c2637.js","static/js/infoCollection-0df042fb.js","static/js/trial-ff3dfe99.js"]))),M=t((()=>n((()=>import("./index-8b6e578c.js")),["static/js/index-8b6e578c.js","static/css/index-dc37224c.css","static/js/index-714e955a.js","static/css/index-6495afd9.css","static/js/pdfh5-008ca364.js"]))),z=t((()=>n((()=>import("./index-07a89082.js")),["static/js/index-07a89082.js","static/css/index-b9ba3011.css","static/js/index-714e955a.js","static/css/index-6495afd9.css","static/js/pdfh5-008ca364.js"])));a();const Y=l(),{productCode:J="",tenantId:Q,agentCode:Z="",agencyCode:H,saleChannelId:K,extraInfo:W,insurerCode:X,preview:$,trialPreview:ee}=Y.query;let te={};try{console.log("extInfo",decodeURIComponent(W)),te=JSON.parse(decodeURIComponent(W))}catch(Re){}o();const ne=o(),ae=o(),le=o(!0),oe=o({}),ie=o({}),de=o(!1),se=o(0),ue=o(!1);o({});const re=o(!0);o(!0);const ce=o(!0),ve=o(""),pe=o({}),me=o({}),fe=o([]),Ce=o({imgUrl:"",desc:"",title:"",link:window.location.href}),Ie=o({});i((()=>!!$||!!ee));const _e=i((()=>!!ee)),he=o(),ye=()=>{he.value.open()},ke=o([]),be=o(),ge=async()=>{!_e.value&&x({productCode:J,tenantId:Q,isTenant:!$}).then((({data:e,code:t})=>{if("10000"===t){oe.value=e,document.title=e.BASIC_INFO.title||"";const{title:t,desc:a,image:l}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{};n={title:t,desc:a,image:l},Ce.value={desc:n.desc||"你好，这里是描述",imgUrl:n.image,title:n.title,link:window.location.href},b(e.BASIC_INFO.themeType)}var n})),await O({productCode:J,isTenant:!$||!ee}).then((({data:e,code:t})=>{var n;"10000"===t&&(ue.value=!0,ie.value=e,pe.value=null==(n=e.productPlanInsureVOList)?void 0:n[0],fe.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),ce.value=!1,N({productCode:J}).then((({code:e,data:t})=>{var n,a,l,o;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=t;be.value=e||[];const{basicInfo:{questionnaireType:d},questions:s,questionnaireName:u}=(null==(n=null==i?void 0:i[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};2===d&&(ke.value=[{attachmentName:u,attachmentUri:s,attachmentType:"question"}]),ke.value=[{attachmentName:u,attachmentUri:null==(a=null==s?void 0:s[0])?void 0:a.content,attachmentType:L(String(null==(l=null==s?void 0:s[0])?void 0:l.textType),null==(o=null==s?void 0:s[0])?void 0:o.content)}]}}))};d((()=>Ie.value.planCode),(e=>{pe.value=(ie.value.productPlanInsureVOList||[]).find((t=>t.planCode===e))}));const we=()=>{ne.value.handleClickTab()("insureButton")};o(""),o(0);const{fileList:Oe,mustReadFileCount:xe,popupFileList:Ne}=P(pe,be),Te=()=>{de.value=!1,re.value=!0},Pe=()=>{de.value=!1,re.value=!0};return d((()=>pe.value),(()=>{const{planCode:e,oilPackageProductVOList:t,insureProductRiskVOList:n}=pe.value;Ie.value.planCode=e,me.value=(n||[]).find((e=>e.mainRiskFlag===s.YES))}),{deep:!0,immediate:!0}),u((()=>{g(ae,(([{isIntersecting:e}],t)=>{le.value=!0}))})),r((()=>{ce.value=!0,ge(),setTimeout((async()=>{ve.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{var n,a,l,o,i,d,s,u,r,b;const g=w;return c(),v(m,null,[p(ce)?(c(),v("div",S)):(c(),v("div",E,[p(_e)?(c(),v("div",V,[y("当前页面仅用于保费试算预览"),B,y("不展示其他产品相关配置信息")])):(c(),v(m,{key:0},[f("div",F,[(null==(a=null==(n=p(oe))?void 0:n.BASIC_INFO)?void 0:a.banner.length)?(c(),C(T,{key:0,"data-skeleton-type":"img",url:null==(l=p(oe))?void 0:l.BASIC_INFO.banner[0]},null,8,["url"])):I("",!0),(null==(d=null==(i=null==(o=p(oe))?void 0:o.BASIC_INFO)?void 0:i.bannerMove)?void 0:d.length)?(c(),C(T,{key:1,url:null==(r=null==(u=null==(s=p(oe))?void 0:s.BASIC_INFO)?void 0:u.bannerMove)?void 0:r[0],onClick:we},null,8,["url"])):I("",!0),f("div",{ref_key:"observeRef",ref:ae},null,512)]),(null==(b=p(oe))?void 0:b.GUARANTEE)?(c(),C(R,{key:0,"show-service-config":"","data-source":p(oe),"plan-list":p(fe)},null,8,["data-source","plan-list"])):I("",!0),f("div",{class:"trial-text-btn",onClick:ye},"算一算保费"),_(j,{ref:"tenantProductDetailScrollRef","data-source":p(oe)},null,8,["data-source"]),_(g,null,{default:h((()=>{var e,t,n;return[(null==(e=p(oe).SIGNATURE)?void 0:e.inscribedContent)?(c(),C(p(M),{key:0,"inscribed-content":null==(n=null==(t=p(oe))?void 0:t.SIGNATURE)?void 0:n.inscribedContent},null,8,["inscribed-content"])):I("",!0)]})),_:1}),_(g,null,{default:h((()=>{var e;return[(null==(e=p(Oe))?void 0:e.length)?(c(),C(p(z),{key:0,"attachement-list":p(Oe),"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>(e=>{se.value=e,de.value=!0})(e))},null,8,["attachement-list"])):I("",!0)]})),_:1})],64)),p(le)?(c(),v(m,{key:2},[U,_(p(q),{ref_key:"trialRef",ref:he,"data-source":p(pe),"product-info":{productCode:p(ie).productCode,productName:p(ie).productName,productId:"",tenantId:p(Q),insurerCode:p(X)},"tenant-product-detail":p(oe)},null,8,["data-source","product-info","tenant-product-detail"])],64)):I("",!0)])),p(ue)&&!p(_e)?(c(),C(A,{key:2,"product-detail":p(oe)},null,8,["product-detail"])):I("",!0),D,p(de)?(c(),C(p(G),{key:3,show:p(de),"onUpdate:show":t[1]||(t[1]=e=>k(de)?de.value=e:null),"content-list":p(re)?p(Oe):p(Ne),"is-only-view":p(re),"active-index":p(se),text:p(re)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":p(re)?0:p(xe),onSubmit:Te,onOnCloseFilePreviewByMask:Pe},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):I("",!0)],64)}}});export{q as default};

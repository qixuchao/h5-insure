import{nextTick as e,ref as t,provide as a,computed as o,watch as l,reactive as r,onMounted as u,toRefs as n,inject as i,useAttrs as s,useSlots as d,onBeforeMount as m}from"vue";import{U as c,V as v,W as p,h as f,C as y,K as V,Y as g,S as h,L as C,_ as b,T as N,X as S,x as w,Z as _,y as E,$ as k,a0 as T,a1 as P,a2 as D,a3 as A,a4 as I,a5 as B,F as R,J as x,a6 as O}from"./index-d66a20d8.js";import{m as L}from"./merge-e7788e50.js";import{M,e as $,U as j,a as F,d as U,S as Y,f as H,s as z,t as K}from"./keysIn-131bbce9.js";import{S as G,i as Z,a as q,b as W}from"./isObjectLike-a9798079.js";import{d as X,c as J}from"./_getTag-d5b47d26.js";import{d as Q}from"./debounce-6981b306.js";import{s as ee}from"./phoneVerify-a37057a4.js";import{u as te}from"./useDicData-b539129e.js";/* empty css              */import{B as ae,P as oe,a as le}from"./bankCard-54e59047.js";var re=Object.freeze(Object.defineProperty({__proto__:null,get ProRenderForm(){return qt},get ProFieldV2(){return Qt},get ProRadioV2(){return aa},get ProPickerV2(){return ia},get ProSwitchV2(){return sa},get ProCalendarV2(){return ca},get ProCascaderV2(){return va},get ProBaseUpload(){return ya},get ProUploadV2(){return Ca},get ProIDCardUploadV2(){return Pa},get ProBankUpload(){return Ia},get ProDatePickerV2(){return Ba},get ProSMSCode(){return Ra},get ProBank(){return Oa},get ProAddress(){return La},get ProOccupation(){return Ua},get ProRenderFormWithCard(){return Ya}},Symbol.toStringTag,{value:"Module"}));function ue(e){var t=-1,a=null==e?0:e.length;for(this.__data__=new M;++t<a;)this.add(e[t])}function ne(e,t){for(var a=-1,o=null==e?0:e.length;++a<o;)if(t(e[a],a,e))return!0;return!1}ue.prototype.add=ue.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ue.prototype.has=function(e){return this.__data__.has(e)};function ie(e,t,a,o,l,r){var u=1&a,n=e.length,i=t.length;if(n!=i&&!(u&&i>n))return!1;var s=r.get(e),d=r.get(t);if(s&&d)return s==t&&d==e;var m=-1,c=!0,v=2&a?new ue:void 0;for(r.set(e,t),r.set(t,e);++m<n;){var p=e[m],f=t[m];if(o)var y=u?o(f,p,m,t,e,r):o(p,f,m,e,t,r);if(void 0!==y){if(y)continue;c=!1;break}if(v){if(!ne(t,(function(e,t){if(u=t,!v.has(u)&&(p===e||l(p,e,a,o,r)))return v.push(t);var u}))){c=!1;break}}else if(p!==f&&!l(p,f,a,o,r)){c=!1;break}}return r.delete(e),r.delete(t),c}function se(e){var t=-1,a=Array(e.size);return e.forEach((function(e,o){a[++t]=[o,e]})),a}function de(e){var t=-1,a=Array(e.size);return e.forEach((function(e){a[++t]=e})),a}var me=G?G.prototype:void 0,ce=me?me.valueOf:void 0;var ve=Object.prototype.hasOwnProperty;var pe="[object Object]",fe=Object.prototype.hasOwnProperty;function ye(e,t,a,o,l,r){var u=F(e),n=F(t),i=u?"[object Array]":J(e),s=n?"[object Array]":J(t),d=(i="[object Arguments]"==i?pe:i)==pe,m=(s="[object Arguments]"==s?pe:s)==pe,c=i==s;if(c&&U(e)){if(!U(t))return!1;u=!0,d=!1}if(c&&!d)return r||(r=new Y),u||H(e)?ie(e,t,a,o,l,r):function(e,t,a,o,l,r,u){switch(a){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new j(e),new j(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var n=se;case"[object Set]":var i=1&o;if(n||(n=de),e.size!=t.size&&!i)return!1;var s=u.get(e);if(s)return s==t;o|=2,u.set(e,t);var d=ie(n(e),n(t),o,l,r,u);return u.delete(e),d;case"[object Symbol]":if(ce)return ce.call(e)==ce.call(t)}return!1}(e,t,i,a,o,l,r);if(!(1&a)){var v=d&&fe.call(e,"__wrapped__"),p=m&&fe.call(t,"__wrapped__");if(v||p){var f=v?e.value():e,y=p?t.value():t;return r||(r=new Y),l(f,y,a,o,r)}}return!!c&&(r||(r=new Y),function(e,t,a,o,l,r){var u=1&a,n=X(e),i=n.length;if(i!=X(t).length&&!u)return!1;for(var s=i;s--;){var d=n[s];if(!(u?d in t:ve.call(t,d)))return!1}var m=r.get(e),c=r.get(t);if(m&&c)return m==t&&c==e;var v=!0;r.set(e,t),r.set(t,e);for(var p=u;++s<i;){var f=e[d=n[s]],y=t[d];if(o)var V=u?o(y,f,d,t,e,r):o(f,y,d,e,t,r);if(!(void 0===V?f===y||l(f,y,a,o,r):V)){v=!1;break}p||(p="constructor"==d)}if(v&&!p){var g=e.constructor,h=t.constructor;g==h||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof h&&h instanceof h||(v=!1)}return r.delete(e),r.delete(t),v}(e,t,a,o,l,r))}function Ve(e,t,a,o,l){return e===t||(null==e||null==t||!Z(e)&&!Z(t)?e!=e&&t!=t:ye(e,t,a,o,Ve,l))}function ge(e,t){return Ve(e,t)}const he=async({mobile:e},t)=>{const a=await ee(e),{code:o}=a;"10000"===o&&"function"==typeof t&&t()},Ce="ProFieldV2",be="ProDatePickerV2",Ne="ProPickerV2",Se="ProRadioV2",we="ProCheckboxV2",_e="ProSwitchV2",Ee="ProCascaderV2",ke="ProBank",Te="ProAddress",Pe="ProUploadV2",De="ProStepperV2",Ae="ProSMSCode",Ie="ProOccupation",Be="ProIDCardUploadV2",Re="ProBankUpload",xe=18,Oe=20,Le=50,Me="name",$e="external",je="email",Fe="zipCode",Ue="tel",Ye="mobile",He="zhCN",ze="notZhCN",Ke="normalChar",Ge="alphabetNumber",Ze="cert",qe="houseHold",We="birth",Xe="passport",Je="otherCert",Qe="militaryCard",et="solider",tt="hongkongMacao",at="taiwanTravel",ot="foreignPermanent",lt="HKMacaoResidencePermit",rt="taiwanResidencePermit",ut="socialCreditCode",nt="OCC",it="businessLicense",st="bandCard",dt={NAME:{maxlength:25,ruleType:Me},MOBILE:{type:"digit",ruleType:Ye,maxlength:11},AGE:{type:"digit",maxlength:3},HEIGHT_WEIGHT:{type:"number",precision:1,maxlength:5},INCOME:{type:"number",precision:2,unit:"万元",isPrecisionCompleted:!0},ZIP_CODE:{type:"digit",ruleType:Fe,maxlength:6},CONTENT:{maxlength:200},GAS_NUMBER:{maxlength:Oe},BANK:{type:"digit",maxlength:Oe},ADDRESS:{dictCode:p.NATIONAL_REGION_CODE,customFieldName:{text:"name",value:"code",children:"children"}},COUNTRY:{dictCode:p.NATIONALITY,customFieldName:{text:"name",value:"code",children:"children"}}},mt=[{code:"input",name:"单行文本",value:1,componentName:Ce},{code:"textarea",name:"多行文本",value:2,type:"textarea",componentName:Ce},{code:"number",name:"数字输入框",value:3,componentName:Ce},{code:"date",name:"日期",value:4,componentName:be},{code:"select",name:"下拉框",value:5,componentName:Ne},{code:"radio",name:"单选框",value:6,componentName:Se},{code:"checkbox",name:"多选框",value:7,componentName:we},{code:"switch",name:"switch开关",value:8,componentName:_e},{code:"cascader",name:"级联选择",value:9,componentName:Ee},{code:"bank",name:"银行卡",value:10,componentName:ke},{code:"address",name:"地址",value:11,componentName:Te},{code:"upload",name:"文件上传",value:12,componentName:Pe},{code:"stepper",name:"步进器",value:13,componentName:De}],ct={BANK_CARD_NO:"bankCardNo",ACCOUNT_NAME:"accountName",PAY_BANK:"payBank",BANK_CARD_IMAGE:"bankCardImage",MOBILE:"mobile",VERIFICATION_CODE:"verificationCode"},vt=Object.values(ct),pt={bankCardNo:{...dt.BANK,name:ct.BANK_CARD_NO,componentName:Ce},accountName:{...dt.NAME,name:ct.ACCOUNT_NAME,componentName:Ce},payBank:{name:ct.PAY_BANK,dictCode:p.BANK,componentName:Ne},bankCardImage:{maxCount:2,subLabel:"（需上传正反两面）",name:ct.BANK_CARD_IMAGE,componentName:Re},mobile:{...dt.MOBILE,name:ct.MOBILE,componentName:Ce},verificationCode:{...dt.ZIP_CODE,sendSMSCode:he,name:ct.VERIFICATION_CODE,relatedName:ct.MOBILE,componentName:Ae}},ft={certType:{[y.CERT]:[Ze],[y.HOUSE_HOLD]:[qe],[y.MILITARY_CARD]:[Qe],[y.PASSPORT]:[Xe],[y.HONGKONG_MACAO]:[tt],[y.OTHER]:[Je],[y.SOLIDER]:[et],[y.BIRTH]:[We],[y.TAIWAN_TRAVEL]:[at],[y.FOREIGN_PERMANENT]:[ot],[y.HK_MACAO_RESIDENCE_PERMIT]:[lt],[y.TAIWAN_RESIDENCE_PERMIT]:[rt],[y.SOCIAL_CREDIT_CODE]:[ut]}},yt={INSURE_AREA:"insureArea",RESIDENCE:"residence",LONG_AREA:"longArea",WORK_ADDRESS:"workAddress"};Object.values(yt);const Vt=[{key:yt.INSURE_AREA},{key:yt.RESIDENCE},{key:yt.LONG_AREA},{key:yt.WORK_ADDRESS}].reduce(((e,{key:t})=>(e[t]=dt.ADDRESS,e)),{}),gt={name:dt.NAME,certNo:{relatedName:"certType",maxlength:xe},certType:{relatedName:"certNo"},birthday:{relatedName:"age"},mobile:dt.MOBILE,age:dt.AGE,height:{...dt.HEIGHT_WEIGHT,unit:"cm"},weight:{...dt.HEIGHT_WEIGHT,unit:"kg"},email:{ruleType:je},personalAnnualIncome:dt.INCOME,familyAnnualIncome:dt.INCOME,workZipCode:dt.ZIP_CODE,homePostalCode:dt.ZIP_CODE,workContent:dt.CONTENT,gasNumberCollection:{...dt.GAS_NUMBER,ruleType:ze},verificationCode:{sendSMSCode:he,componentName:Ae,...dt.ZIP_CODE},...Vt,nationalityCode:{...dt.COUNTRY},certEndDate:{minDate:new Date,maxDate:f().add(100,"year").toDate()},companyName:{maxlength:Le},occupationCodeList:{componentName:Ie,dictCode:(ht=(window.location.search.match(/&insurerCode=([^&]*)&/)||[])[1]||"",(ht?`${ht.toUpperCase()}_`:"")+"OCCUPATION")},certImage:{componentName:Be},benefitRate:{...dt.AGE,unit:"%"}};var ht;const Ct=2,bt={1:"holder",2:"insured",3:"beneficiary",4:"payInfo",5:"signInfo"},Nt=Symbol("VAN_PRO_FORM_KEY"),St=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/,wt=e=>{if(!St.test(e))return!1;if(18!==e.length)return!1;const t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];let a=0;for(let r=0;r<17;r++)a+=e.substring(r,r+1)*t[r];const o=a%11,l=e.substring(17);return 2===o?"X"===l.toUpperCase():Number(l)===[1,0,10,9,8,7,6,5,4,3,2][o]},_t={isName:e=>/^[\u4e00-\u9fa5a-z].{0,23}[\u4e00-\u9fa5a-z]/i.test(e),isExternal:e=>/^(https?:|mailto:|tel:)/.test(e),isEmail:e=>/^[A-Za-z0-9]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(e),isZipCode:e=>/^[0-9]{6,6}$/.test(e),isTel:e=>/0\d{2,3}-\d{7,8}/.test(e),isPhone:e=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(e),isZhCN:e=>/^[\u4e00-\u9fa5]+$/.test(e),isNotZhCN:e=>/^[^\u4e00-\u9fa5]+$/.test(e),isCommonChar:e=>/^[\w_]{6,20}$/.test(e),isNormalChar:e=>/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(e),isAlphabetNumber:e=>/^[a-z0-9]+$/i.test(e),isAlphabetNumberOrSpecial:e=>/^[a-z0-9`~!@#$%^&*()_\-+=<>?:"{}|,./;'\\[\]·~！@#￥¥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]+$/i.test(e),isIdCardNo:e=>wt(e),isHouseHold:e=>wt(e),isBirthType:e=>/^[a-zA-Z]\d{9}$/.test(e),isPassword:e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,20}$/.test(e),isPassportType:e=>e.length>=5&&/^[^\u4e00-\u9fa5]+$/.test(e),isMilitaryCard:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isSolider:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isHongkongMacaoTravel:e=>/^[C]\d{8}$|^[C][a-hA-Hj-nJ-Np-zP-Z][0-9]{7}$/.test(e),isTaiwanTravel:e=>/^[L]\d{8}$/.test(e),isForeignPermanent:e=>/^[A-Z]{3}[0-9]{12}$/.test(e),isHKMacaoResidencePermit:e=>/^8[12]0000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isTaiwanResidencePermit:e=>/^830000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isUSCC:e=>/^[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}$/.test(e),isUSCCPolicy:e=>/^[A-Z0-9]{18}$/.test(e),isOCC:e=>/^[A-Z0-9]{8}-[A-Z0-9]{1}$/.test(e),isBusinessLicense:e=>/(^\d{15}$)|(^[A-Z0-9]{18}$)/.test(e),isBandcard:e=>/^\d{12,20}$/g.test(e),isOtherCert:e=>/^.{1,18}$/.test(e)},Et={[Me]:[_t.isName],[$e]:[_t.isExternal],[je]:[_t.isEmail],[Fe]:[_t.isZipCode],[Ue]:[_t.isTel],[Ye]:[_t.isPhone],[He]:[_t.isZhCN],[ze]:[_t.isNotZhCN],[Ke]:[_t.isNormalChar],[Ge]:[_t.isAlphabetNumber],[Ze]:[_t.isIdCardNo],[qe]:[_t.isHouseHold],[We]:[_t.isBirthType],[Xe]:[_t.isPassportType],[Qe]:[_t.isMilitaryCard],[et]:[_t.isSolider],[tt]:[_t.isHongkongMacaoTravel],[at]:[_t.isTaiwanTravel],[ot]:[_t.isForeignPermanent],[lt]:[_t.isHKMacaoResidencePermit],[rt]:[_t.isTaiwanResidencePermit],[ut]:[_t.isUSCCPolicy],[nt]:[_t.isOCC],[it]:[_t.isBusinessLicense],[st]:[_t.isBandcard],[Je]:[_t.isOtherCert]};function kt(e){return null==e}const Tt=["v-model","label","name","id","type","size","maxlength","placeholder","border","disabled","readonly","colon","required","center","clearable","clear-icon","clear-trigger","clickable","is-link","autofocus","show-word-limit","error","error-message","error-message-align","formatter","format-trigger","arrow-direction","label-class","label-width","label-align","input-align","autosize","left-icon","right-icon","icon-prefix","rules","autocomplete","enterkeyhint","visible"],Pt=["label","input","left-icon","right-icon","button","error-message","extra","value-view"],Dt={autocomplete:"off"},At=e=>console.log(`%c🔥 ${e}`,"color:#1989fa;background:#5e4;padding:3px 5px;"),It=e=>{const{trialFactorCodes:t,personVO:a}=e||{};return!V(t)||!t.some((e=>{const t=a[e];return kt(t)||""===t||Array.isArray(t)&&!t.length}))},Bt=(e,t,a)=>{var o;return a&&!V(t)?Promise.resolve():null==(o=e.value)?void 0:o.validate(a?t:void 0)},Rt=(e,t="children")=>V(e)?e.map((({[`${t}`]:e,...a})=>{const o={};return V(e)&&(o.children=Rt(e)),{...a,...o}})):[],xt=(e,t,a={})=>{const o=Object.keys(e);return V(o)?o.reduce(((a,o)=>{const l=t.includes(o);return a[Number(!l)][o]=e[o],a}),[{...a},{}]):[{...a},{}]},Ot=e=>{if("certType"!==(null==e?void 0:e.name))return!1;const{columns:t,title:a}=e||{};return V(t)&&1===t.length&&t.findIndex((e=>e.code===y.CERT))>-1},Lt=e=>V(e)&&e.some((e=>"birthday"===(e.code||e.name))),Mt=(e,t)=>{let a=[];const o=[];if(V(e)){const t=Lt(e);a=e.map((e=>{const{code:a,name:l,value:r,componentName:u,...n}=mt.find((t=>`${t.value}`==`${e.displayType}`))||{};e.isCalculationFactor===g.YES&&o.push(e.code);const i={},{componentName:s,...d}=gt[e.code]||{},m=s||u||"ProFieldV2";2===e.moduleType&&(i.isSelfInsuredNeed=e.isSelfInsuredNeed),"age"===e.code&&(i.visible=!t);const c={...n,...i,customFieldName:{text:"value",value:"code",children:"children"},label:e.title,name:e.code,componentName:m,required:1===e.isMustInput,nanoid:C(),...d},v={...c,attributeValueList:e.attributeValueList,columns:c.dictCode?[]:e.attributeValueList||[]};return Ot(v)&&(v.visible=!1),v}))}return t.push(...o),{schema:a,trialFactorCodes:o}},$t=(e,t={isTrial:!1})=>{const a={};if(!e)return a;const o=Object.keys(e)||[];if(!V(o))return a;const l=[],r=t.multiInsuredSupportFlag===g.YES,u={hasTrialFactorCodes:!1,isSpouseInsured:!1,multiInsuredSupportFlag:r,multiInsuredMaxNum:r?t.multiInsuredNum||Number.MAX_SAFE_INTEGER:1,multiInsuredMinNum:1,multiBeneficiaryMaxNum:t.multiBeneficiaryMaxNum||5},n=o.reduce(((a,o)=>(a[bt[o]]=V(e[o])?e[o].filter((e=>{const{subModuleType:a,code:o,attributeValueList:l}=e;if(a===Ct&&"relationToMainInsured"===o){V(l)&&1===l.length&&l.findIndex((e=>"2"===e.code))>-1&&Object.assign(u,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0})}return!t.isTrial||1===e.isCalculationFactor})):[],a)),{}),i=((e,t)=>{if(!V(e.insured))return[];const a=V(e.holder)?e.holder.map((e=>e.code)):[];return e.insured.reduce(((e,o)=>{const{code:l,subModuleType:r,attributeValueList:u}=o;return r===Ct?("relationToMainInsured"===l&&V(u)&&1===u.length&&u.findIndex((e=>"2"===e.code))>-1&&Object.assign(t,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0}),e[1].push({...o,isSelfInsuredNeed:!a.includes(l)})):e[0].push({...o,isSelfInsuredNeed:!a.includes(l)}),e}),[[],[]]).filter((e=>V(e)))})(n,u),s=Object.keys(n).reduce(((e,a)=>{if("insured"!==a){const o=n[a],r="holder"===a;e[a]=Mt(r&&V(t.holderFactorCodes)?o.filter((e=>t.holderFactorCodes.includes(e.code))):o,l)}else e[a]=V(i)?i.map((e=>Mt(V(t.insuredFactorCodes)?e.filter((e=>t.insuredFactorCodes.includes(e.code))):e,l))):[];return e}),{});return s.config={...u,hasTrialFactorCodes:V(l)},s},jt=(e=!1)=>t=>{if("string"==typeof t&&t){const a=["toLowerCase","toUpperCase"][Number(e)];return`${t[0][a]()}${t.substring(1)}`}return""},Ft=jt(!0),Ut=jt(),Yt=(e,t={})=>Object.keys(e).reduce(((e,a)=>(e[t[a]||a]=a,e)),{}),Ht=e=>{const t=new Date,a=new Date(e);let o=t.getFullYear()-a.getFullYear();const l=t.getMonth()-a.getMonth();return(l<0||0===l&&t.getDate()<a.getDate())&&(o-=1),o},zt=(e,t=(e=>!0))=>{if(!e)return{};return Object.keys(e).filter((e=>"function"!=typeof t||t(e))).reduce(((t,a)=>(t[a]={Object:{},Array:[]}[Object.prototype.toString.call(e[a]).slice(8,-1)]||null,t)),{})},Kt=(e,t)=>{const a=![y.CERT,y.HOUSE_HOLD].includes(String(e)),o=Lt(t)?{age:{visible:!1}}:{};return{...["gender","birthday","age"].reduce(((e,t)=>(e[t]={visible:a},e)),{}),...o}},Gt=(e,t)=>{const a={},{relationToHolder:o,certType:l}=t||{},r="3"===String(o),u=null==e?void 0:e.find((e=>"certType"===e.name)),n=Ot(u||{});return n&&(a.certNo={label:"身份证号"+(r?"\n(户口簿)":"")}),u&&L(a,Kt(l,e)),[n,a]},Zt={certNo:{onChangeEffect:(t,a)=>{Object.assign(a.formData,{certNo:null,gender:null,birthday:null,age:null}),e((()=>{L(a.config,Kt(a.formData.certType,a.schema))}))}},certType:{extraAttrs:{4:{maxlength:10}},onChangeEffect:(e,t)=>{if([y.CERT,y.HOUSE_HOLD].includes(String(t.formData.certType))){const a=(e=>{const t={gender:null,birthday:null,age:null};if("string"==typeof e&&e&&wt(e)){const a={15:[6,12],18:[6,14]};t.birthday=e.slice(...a[e.length]).replace(/(.{4})(.{2})/,"$1-$2-"),t.gender=[h.FEMALE,h.MALE][Number(e.slice(-2,-1))%2],t.age=t.birthday&&`${Ht(t.birthday)}`}return t})(e);Object.assign(t.formData,a)}}},age:{onChangeEffect:(e,t)=>{if(![y.CERT,y.HOUSE_HOLD].includes(String(t.formData.certType))){const a=e?Ht(e):null;Object.assign(t.formData,{age:a})}}}};var qt=b(vue.defineComponent({__name:"ProRenderForm",props:{validateMethod:{default:"show-error"},model:{default:()=>({})},isView:{type:Boolean,default:!1},schema:{default:()=>[]},config:{default:()=>({})},markRequired:{type:Boolean,default:!0},extraProvision:{}},emits:["failed"],setup(e,{expose:r,emit:u}){const n=e,i=vue.useSlots(),s=vue.reactive({config:{},formData:{},schema:[],nameList:[],dictCodeList:[]}),d=t({});a(Nt,{formState:s,formRef:d,markRequired:n.markRequired&&!n.isView,...n.extraProvision});const m=o((()=>Object.keys(i).filter((e=>"default"!==e)))),p=o((()=>V(n.schema))),f=o((()=>{const[e,t]={toast:[!1,!1],"show-error":[!1,!0],"show-error-message":[!0,!1]}[n.validateMethod];return{"show-error-message":e,"show-error":t}})),y=({values:e,errors:t})=>{if("toast"===n.validateMethod){const e=t.reduce(((e,t)=>(e[t.name]=t,e)),{}),a=Object.keys(e);if(a.length){const t=s.nameList.reduce(((e,t)=>(a.includes(t)&&e.push(t),e)),[]),{message:o}=e[t[0]]||{};N({message:o})}}console.log("failed errors",t),u("failed",{values:e,errors:t})};return l([()=>n.schema,()=>s.config],(([e,t])=>{p.value&&(s.schema=e.map((e=>({...e,componentName:re[e.componentName]?vue.shallowRef(re[e.componentName]):e.componentName,...t[e.name],nanoid:C()}))).filter((e=>!e.hidden)))}),{immediate:!0,deep:!0}),l((()=>n.config),(e=>{s.config=e}),{immediate:!0,deep:!0}),l((()=>s.dictCodeList),Q((e=>{e&&(async e=>{const t=c(),{dictMap:a}=v(t);"string"==typeof e?(await t.getDict([e]),a.value[e]):(await t.getDict(e),e.map((e=>a.value[e])))})(e)}),500),{immediate:!0,deep:!0}),l((()=>n.model),((e,t)=>{ge(e,t)||(s.formData=e)}),{immediate:!0,deep:!0}),l((()=>s.schema),(e=>{s.dictCodeList=[...new Set([...s.dictCodeList,...s.schema.reduce(((e,t)=>(t.dictCode&&e.push(t.dictCode),e)),[])])]}),{immediate:!0,deep:!0}),r({...["submit","getValues","validate","resetValidation","getValidationStatus","scrollToField"].reduce(((e,t)=>(e[t]=(...e)=>{var a;return null==(a=d.value)?void 0:a[t](...e)},e)),{})}),(e,t)=>{const a=vue.resolveComponent("VanForm");return vue.openBlock(),vue.createBlock(a,vue.mergeProps({ref_key:"formRef",ref:d,class:"com-van-form"},{...vue.unref(f),...e.$attrs},{onFailed:y}),{default:vue.withCtx((()=>[vue.unref(p)?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(s.schema,((t,a)=>(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(t.componentName),vue.mergeProps({key:`${t.nanoid}_${a}`},t,{modelValue:s.formData[t.name],"onUpdate:modelValue":e=>s.formData[t.name]=e,"is-view":t.isView||e.isView}),vue.createSlots({_:2},[vue.renderList(vue.unref(m),(t=>({name:t,fn:vue.withCtx((a=>[vue.renderSlot(e.$slots,t,vue.normalizeProps(vue.guardReactiveProps(a||{})),void 0,!0)]))})))]),1040,["modelValue","onUpdate:modelValue","is-view"])))),128)):vue.createCommentVNode("",!0),vue.renderSlot(e.$slots,"default",{},void 0,!0)])),_:3},16)}}}),[["__scopeId","data-v-504f6dfa"]]);const Wt={class:"value-view-wrap"};var Xt=b(vue.defineComponent({__name:"ValueView",props:{value:{type:String,default:""},isView:{type:Boolean,default:!1}},setup:e=>(t,a)=>(vue.openBlock(),vue.createElementBlock("span",Wt,vue.toDisplayString(e.value||"-"),1))}),[["__scopeId","data-v-505dc7b6"]]);const Jt={class:"com-van-field-unit"};var Qt=vue.defineComponent({inheritAttrs:!1,__name:"ProFieldV2",props:{ruleType:{type:String,default:""},modelValue:{type:[String,Number,Object,Array,Boolean],default:""},isView:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:Array,default:()=>[]},relatedName:{type:String,default:""},precision:{type:Number,default:0},isPrecisionCompleted:{type:Boolean,default:!1},unit:{type:String,default:""}},emits:["update:model-value","blur"],setup(e,{emit:t}){const a=e,n=vue.useAttrs(),i=vue.useSlots(),{formState:s,markRequired:d}=vue.inject(Nt)||{},m=r({modelValue:""}),c=o((()=>{const e=Yt(i,n.slots),{extra:t,...o}=e;return a.unit?o:e})),v=o((()=>n.placeholder||`请输入${n.label||""}`)),p=o((()=>`${m.modelValue||""}`)),f=o((()=>{var e,t;if(a.ruleType)return a.ruleType;if(a.relatedName){const o=null==(e=null==s?void 0:s.formData)?void 0:e[a.relatedName];if(o)return null==(t=ft[a.relatedName])?void 0:t[o]}return""})),y=e=>kt(e)||""===e||Array.isArray(e)&&!e.length||q(e)&&Object.keys(e).some((e=>y(e))),g=o((()=>V(a.rules)?a.rules:[{required:a.required,validator:e=>{if(a.required&&y(e))return n.placeholder;if(f.value){const[t]=Et[f.value]||[];if("function"!=typeof t)return console.warn(`%c 字段 ${n.label} 的规则 ${f} 校验函数不存在，请先确认～`,"color: #3e7;"),"";if(!y(e)&&!t(e))return`请输入正确的${n.label}`}return""}}])),h=o((()=>"number"===n.type&&a.precision)),C=e=>h.value&&e?e.replace(/^(0)\d+$/g,"$1").replace(new RegExp(`^(\\d+\\.\\d{${a.precision}})\\d+$`,"g"),"$1"):e,b=o((()=>{var e;if(a.relatedName){const{extraAttrs:t}=Zt[a.relatedName]||{},o=null==(e=null==s?void 0:s.formData)?void 0:e[a.relatedName];if(t&&!kt(o)&&""!==o)return t[o]||{}}return{}})),N=(e,t)=>{if(a.relatedName&&e){const o=(Zt[a.relatedName]||{})[`${e}Effect`];"function"==typeof o&&o(t,s)}},S=e=>{N("onChange",e),m.modelValue=e,t("update:model-value",e)},w=e=>{let o=m.modelValue;h.value&&o&&a.isPrecisionCompleted&&(o=Number(o).toFixed(a.precision),S(o)),N("onBlur",o),t("blur",e)};return l((()=>a.modelValue),(e=>{m.modelValue=e}),{immediate:!0,deep:!0}),u((()=>{n.name&&(null==s?void 0:s.nameList)&&s.nameList.push(n.name)})),(t,a)=>{const o=vue.resolveComponent("van-field");return vue.openBlock(),vue.createBlock(o,vue.mergeProps({"model-value":vue.unref(m).modelValue,class:`com-van-field ${vue.unref(d)?"":"field-mark--hidden"} ${!1===vue.unref(n).visible?"com-van-field--hidden":""}`,autocomplete:"off",formatter:C},{maxlength:25,...t.$attrs,placeholder:vue.unref(v),required:e.required,rules:vue.unref(g),...vue.unref(b)},{onBlur:w,"onUpdate:modelValue":S}),vue.createSlots({_:2},[e.isView?{name:"input",fn:vue.withCtx((()=>[vue.createVNode(Xt,{value:vue.unref(p)},null,8,["value"])])),key:"0"}:void 0,vue.renderList(Object.keys(vue.unref(c)),(e=>({name:e,fn:vue.withCtx((a=>{var o;return[vue.renderSlot(t.$slots,null==(o=vue.unref(c))?void 0:o[e],vue.normalizeProps(vue.guardReactiveProps(a||{})))]}))}))),e.unit?{name:"extra",fn:vue.withCtx((()=>[vue.createElementVNode("div",Jt,vue.toDisplayString(e.unit),1)])),key:"1"}:void 0]),1040,["model-value","class"])}}});const ea={input:"请输入",select:"请选择"};function ta({placeholderType:e}={placeholderType:"select"}){const t=vue.useAttrs(),a=vue.useSlots(),o=r({filedAttrs:{},filedSlots:{},attrs:{},slots:{}});return l((()=>t),(()=>{const[a,l]=(e=>xt(e,Tt,Dt))(t);o.filedAttrs={...a,placeholder:t.placeholder||`${ea[e]}${t.label||""}`},o.attrs={title:`请选择${a.label}`,...l}}),{deep:!0,immediate:!0}),l([()=>a,()=>t.slots],(e=>{const[l,r]=(e=>xt(e,Pt))(Yt(a,t.slots));o.filedSlots=l||{},o.slots=r||{}}),{deep:!0,immediate:!0}),o}var aa=b(vue.defineComponent({inheritAttrs:!1,__name:"ProRadioV2",props:{type:{type:String,default:"button"},modelValue:{type:[String,Number],default:""},columns:{type:Array,default:()=>[]},isDefaultSelected:{type:Boolean,default:!0},isView:{type:Boolean,default:!1},customFieldName:{type:Object,default:()=>({text:"label",value:"value",children:"children"})}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,{filedAttrs:u,attrs:s}=n(ta()),{formState:d}=i(Nt)||{},m=r({modelValue:"",columns:[]}),c=o((()=>"button"===a.type)),v=o((()=>(m.columns.find((e=>String(e.value)===String(m.modelValue)))||{}).text||"")),p=e=>{m.modelValue=e,t("update:modelValue",e)};return l((()=>a.modelValue),(e=>{m.modelValue=e}),{immediate:!0}),l((()=>{var e;return null==(e=d.formData)?void 0:e[u.value.name]}),(e=>{m.modelValue=e}),{immediate:!0,deep:!0}),l((()=>a.columns),((e=[])=>{if(V(e)){m.columns=e.map((e=>({...e,text:e[a.customFieldName.text],value:e[a.customFieldName.value]})));const[{disabled:t,value:o}]=m.columns;!a.isDefaultSelected||t||!kt(a.modelValue)&&""!==a.modelValue||p(o)}}),{deep:!0,immediate:!0}),(t,a)=>{const o=vue.resolveComponent("ProCheckButton"),l=vue.resolveComponent("van-radio"),r=vue.resolveComponent("van-radio-group");return vue.openBlock(),vue.createBlock(Qt,vue.mergeProps({class:"com-van-radio-wrap"},vue.unref(u),{"model-value":vue.unref(m).modelValue}),{input:vue.withCtx((()=>[e.isView?(vue.openBlock(),vue.createBlock(Xt,{key:0,value:vue.unref(v)},null,8,["value"])):(vue.openBlock(),vue.createElementBlock(vue.Fragment,{key:1},[vue.unref(c)?(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,{key:0},vue.renderList(vue.unref(m).columns,(e=>(vue.openBlock(),vue.createBlock(o,{key:e.value,label:e.text,disabled:e.disabled,activated:vue.unref(m).modelValue==e.value,"icon-name":e.iconName,onClick:t=>(({disabled:e,value:t})=>{s.value.disabled||e||p(t)})(e)},null,8,["label","disabled","activated","icon-name","onClick"])))),128)):(vue.openBlock(),vue.createBlock(r,vue.mergeProps({key:1,modelValue:vue.unref(m).modelValue,"onUpdate:modelValue":a[0]||(a[0]=e=>vue.unref(m).modelValue=e)},vue.unref(s)),{default:vue.withCtx((()=>[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(m).columns,(e=>(vue.openBlock(),vue.createBlock(l,vue.mergeProps({key:e.value,name:e.value},e),{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(e.label),1)])),_:2},1040,["name"])))),128))])),_:1},16,["modelValue"]))],64))])),_:1},16,["model-value"])}}}),[["__scopeId","data-v-2f831be5"]]);const oa={class:"custom-input-wrap"},la={key:1,class:"placeholder"},ra=vue.defineComponent({inheritAttrs:!1,__name:"CustomInput",props:{fieldValueView:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const t=e;return s(),vue.inject(Nt),S((()=>t.modelValue)),(t,a)=>(vue.openBlock(),vue.createElementBlock("div",oa,[e.fieldValueView||e.isView?vue.renderSlot(t.$slots,"value-view",{key:0,value:e.fieldValueView},(()=>[vue.createVNode(Xt,{value:e.fieldValueView},null,8,["value"])])):(vue.openBlock(),vue.createElementBlock("span",la,vue.toDisplayString(t.$attrs.placeholder),1))]))}});const ua=vue.defineComponent({name:"ProFormItem"}),na=vue.defineComponent({...ua,props:{fieldValueView:{type:String,default:""},name:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const t=d(),a=o((()=>Object.keys(t).filter((e=>"value-view"!==e))));return(t,o)=>(vue.openBlock(),vue.createBlock(Qt,{class:vue.normalizeClass({"com-form-item":!0,"com-form-item--view":e.isView}),"is-link":!e.isView},vue.createSlots({input:vue.withCtx((()=>[vue.createVNode(ra,{name:e.name,"model-value":e.modelValue,"is-view":e.isView,"field-value-view":e.fieldValueView,placeholder:t.$attrs.placeholder},{"value-view":vue.withCtx((e=>[vue.renderSlot(t.$slots,"value-view",vue.normalizeProps(vue.guardReactiveProps(e||{})))])),_:3},8,["name","model-value","is-view","field-value-view","placeholder"])])),_:2},[vue.renderList(vue.unref(a),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})))]))})))]),1032,["class","is-link"]))}});var ia=vue.defineComponent({inheritAttrs:!1,__name:"ProPickerV2",props:{relatedName:{type:String,default:""},columns:{type:Array,default:()=>[]},dictCode:{type:String,default:""},modelValue:{type:[String,Number],default:""},isDefaultSelected:{type:Boolean,default:!0},isView:{type:Boolean,default:!1},customFieldName:{type:Object,default:()=>({text:"label",value:"value",children:"children"})}},emits:["update:show","confirm","cancel","update:modelValue"],setup(e,{emit:t}){const a=e,u=c(),{dictMap:s}=v(u),{filedAttrs:d,filedSlots:p,attrs:f,slots:y}=n(ta()),{formState:g}=i(Nt)||{},[h,C]=w(!1),b=r({fieldValue:"",columns:[]}),N=e=>{((e,t)=>{if(a.relatedName&&e){const o=(Zt[a.relatedName]||{})[`${e}Effect`];"function"==typeof o&&o(t,g)}})("onChange",e),b.fieldValue=e,t("update:modelValue",e)},S=e=>{const{value:a}=e||{};let o="";kt(a)||(o=a),C(!1),N(o),t("confirm",e)},_=()=>{C(!1)},E=o((()=>{let e=[];V(a.columns)&&(e=a.columns);const t=s.value[a.dictCode];return a.dictCode&&V(t)&&(e=t),Rt(V(o=e)?o.map((e=>({...e,text:e[a.customFieldName.text],value:e[a.customFieldName.value]}))):[]);var o})),k=o((()=>b.fieldValue?a.columns.findIndex((e=>{var t;return String(e[null==(t=a.customFieldName)?void 0:t.value])===String(b.fieldValue)})):"")),T=o((()=>{if(V(E.value)){const e=E.value.find((e=>String(e.value)===String(b.fieldValue)))||{};return(null==e?void 0:e.text)||b.fieldValue}return b.fieldValue}));return l((()=>a.modelValue),(e=>{b.fieldValue=e}),{deep:!0,immediate:!0}),l(E,((e=[])=>{if(V(e)&&1===e.length){const[{disabled:e,value:t}]=E.value;!a.isDefaultSelected||e||!kt(a.modelValue)&&""!==a.modelValue||N(t)}}),{deep:!0,immediate:!0}),m((()=>{a.dictCode&&!g.dictCodeList.includes(a.dictCode)&&g.dictCodeList.push(a.dictCode)})),(t,a)=>{const o=vue.resolveComponent("van-picker"),l=vue.resolveComponent("ProPopup");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(na,vue.mergeProps({"model-value":vue.unref(b).fieldValue,class:""+(!1===vue.unref(d).visible?"com-van-field--hidden":"")},vue.unref(d),{"field-value-view":vue.unref(T),"is-view":e.isView,onClick:a[0]||(a[0]=t=>!e.isView&&(h.value=!0))}),vue.createSlots({_:2},[vue.renderList(Object.keys(vue.unref(p)),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})))]))})))]),1040,["model-value","class","field-value-view","is-view"]),vue.createVNode(l,{show:vue.unref(h),"onUpdate:show":a[1]||(a[1]=e=>vue.isRef(h)?h.value=e:null),height:40,closeable:!1},{default:vue.withCtx((()=>[vue.createVNode(o,vue.mergeProps({columns:vue.unref(E),"default-index":vue.unref(k)},vue.unref(f),{onCancel:_,onConfirm:S}),vue.createSlots({_:2},[vue.renderList(Object.keys(t.$slots),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})))]))})))]),1040,["columns","default-index"])])),_:3},8,["show"])],64)}}});var sa=b(vue.defineComponent({inheritAttrs:!1,__name:"ProSwitchV2",props:{modelValue:{type:[String,Number],default:""},isView:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,{filedAttrs:u,attrs:s}=n(ta()),{formState:d}=i(Nt)||{},m=r({modelValue:null});l((()=>a.modelValue),(e=>{m.modelValue=e}),{immediate:!0});const c=e=>{t("update:modelValue",e)},v=o((()=>["否","是"][Number(m.modelValue===s["active-value"])]));return l((()=>{var e;return null==(e=d.formData)?void 0:e[u.value.name]}),(e=>{m.modelValue=e}),{immediate:!0,deep:!0}),(t,a)=>{const o=vue.resolveComponent("van-switch");return vue.openBlock(),vue.createBlock(Qt,vue.mergeProps({class:"com-van-switch-wrap"},vue.unref(u),{"model-value":vue.unref(m).modelValue}),{input:vue.withCtx((()=>[e.isView?(vue.openBlock(),vue.createBlock(Xt,{key:0,value:vue.unref(v)},null,8,["value"])):(vue.openBlock(),vue.createBlock(o,vue.mergeProps({key:1,"model-value":vue.unref(m).modelValue},vue.unref(s),{onChange:c}),null,16,["model-value"]))])),_:1},16,["model-value"])}}}),[["__scopeId","data-v-2b00e630"]]);var da=z&&z.isDate,ma=da?K(da):function(e){return Z(e)&&"[object Date]"==W(e)};var ca=vue.defineComponent({inheritAttrs:!1,__name:"ProCalendarV2",props:{type:{type:String,default:"single"},valueType:{type:String,default:"date"},modelValue:{type:[String,Date],default:""},isView:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,{filedAttrs:u,filedSlots:i,attrs:s,slots:d}=n(ta()),m=r({fieldValue:"",defaultDate:null}),[c,v]=w(!1),p={date:"YYYY-MM-DD",datehour:"YYYY-MM-DD HH",datetime:"YYYY-MM-DD HH:mm"},y=o((()=>p[a.valueType]||"YYYY-MM-DD")),g=o((()=>V(m.fieldValue)?m.fieldValue.join("range"===a.type?"~":","):"string"==typeof m.fieldValue?m.fieldValue:"")),h=e=>{let o;o="single"===a.type?f(e).format(y.value):V(e)?e.map((e=>f(e).format(y.value))):[],m.fieldValue=o,t("update:modelValue",o),v(!1)};return l((()=>a.modelValue),(e=>{"single"===a.type?"string"==typeof e&&e&&(m.defaultDate=f(e).toDate()):m.defaultDate=V(e)?e.map((e=>f(e).toDate())):null,m.fieldValue=(e=>"single"===a.type?ma(e)?f(e).format(y.value):e||"":V(e)?e:[])(e)}),{immediate:!0,deep:!0}),(t,a)=>{const o=vue.resolveComponent("van-calendar");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(na,vue.mergeProps({"model-value":vue.unref(m).fieldValue},vue.unref(u),{"field-value-view":vue.unref(g),onClick:a[0]||(a[0]=t=>!e.isView&&(c.value=!0))}),vue.createSlots({_:2},[vue.renderList(Object.keys(vue.unref(i)),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})))]))})))]),1040,["model-value","field-value-view"]),vue.createVNode(o,vue.mergeProps({show:vue.unref(c),"onUpdate:show":a[1]||(a[1]=e=>vue.isRef(c)?c.value=e:null),type:e.type,"default-date":vue.unref(m).defaultDate},vue.unref(s),{onConfirm:h}),vue.createSlots({_:2},[vue.renderList(Object.keys(vue.unref(d)),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})))]))})))]),1040,["show","type","default-date"])],64)}}});var va=vue.defineComponent({inheritAttrs:!1,__name:"ProCascaderV2",props:{showFullValue:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object],default:""},columns:{type:Array,default:()=>[]},dictCode:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"name",value:"code",children:"children"})},level:{type:Number,default:0},isView:{type:Boolean,default:!1},selfValueViewFn:{type:Function,default:()=>{}}},emits:["update:modelValue","update:fullValue"],setup(e,{emit:t}){const a=e,u=c(),{dictMap:i}=v(u),{filedAttrs:s,filedSlots:d,attrs:m,slots:p}=n(ta()),[f,y]=w(!1),g=r({columns:[],modelValue:"",fieldValue:""}),h=()=>{a.isView||y(!0)},C=()=>{y(!1)},b=o((()=>{let e=[];V(a.columns)&&(e=a.columns);const t=i.value[a.dictCode];return a.dictCode&&V(t)&&(e=t),((e,t=0,a="children")=>{const o=(e,l=1)=>V(e)?e.map((({[`${a}`]:e,...r})=>{const u={};return(!t||t&&t>l)&&V(e)&&(u.children=o(e,l+1)),{...r,...u}})):[];return o(e)})(e,a.level)})),N=o((()=>((e,t)=>{const o=[],{value:l,children:r}=a.customFieldName,u=(e,a=0)=>!!V(e)&&e.some(((e,n)=>{const{[r]:i,...s}=e;return o[a]=s,e[l]===t||!!V(i)&&u(i,a+1)}));return V(e)&&!u(e)?[]:o})(b.value,g.modelValue))),S=o((()=>{if(!V(N.value))return"";const{selfValueViewFn:e,showFullValue:t,customFieldName:o}=a,l=N.value.map((e=>e[o.text])),r="function"==typeof e?e(N.value):"";return r||(t?l.join("/"):l[l.length-1])})),_=({value:e,selectedOptions:a})=>{g.modelValue=e,t("update:modelValue",e),C()};return l((()=>a.modelValue),(e=>{g.modelValue=e}),{immediate:!0,deep:!0}),l((()=>N.value),(e=>{t("update:fullValue",e)}),{deep:!0,immediate:!0}),(t,a)=>{const o=vue.resolveComponent("van-cascader"),l=vue.resolveComponent("ProPopup");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(na,vue.mergeProps({"model-value":vue.unref(g).modelValue},vue.unref(s),{"is-view":e.isView,"field-value-view":vue.unref(S),onClick:h}),vue.createSlots({_:2},[vue.renderList(Object.keys(vue.unref(d)),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})))]))})))]),1040,["model-value","is-view","field-value-view"]),vue.createVNode(l,{show:vue.unref(f),"onUpdate:show":a[0]||(a[0]=e=>vue.isRef(f)?f.value=e:null),height:60,closeable:!1,class:"com-cascader-popup"},{default:vue.withCtx((()=>[vue.createVNode(o,vue.mergeProps({options:vue.unref(b),"field-names":e.customFieldName,"model-value":vue.unref(g).modelValue},vue.unref(m),{onClose:C,onFinish:_}),vue.createSlots({_:2},[vue.renderList(Object.keys(vue.unref(p)),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})))]))})))]),1040,["options","field-names","model-value"])])),_:3},8,["show"])],64)}}});const pa={class:"com-image-upload"},fa={class:"upload-item"};var ya=b(vue.defineComponent({__name:"ProBaseUpload",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},uploadType:{type:String,default:_.OTHER},category:{type:Number,default:null},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","update:ossKeyList","onUploaded"],setup(e,{emit:t}){const a=e,{slots:u}=n(ta()),{objectType:s}=i(Nt)||{},d=o((()=>Object.keys(u).filter((e=>"default"!==e)))),m=r({modelValue:[],ossKeyList:[]}),c=e=>{k(e.file,a.uploadType).then((e=>{const{code:o,data:l}=e||{};"10000"===o&&l.url&&(m.modelValue.push({url:l.url,category:a.category,objectType:a.objectType||s}),m.ossKeyList.push(l.ossKey),t("onUploaded",l))}))},v=(e,t)=>{const{index:a}=t;m.modelValue.splice(a,1),m.ossKeyList.splice(a,1)};return l((()=>m.ossKeyList),(e=>{t("update:ossKeyList",e)}),{deep:!0,immediate:!0}),l((()=>a.modelValue),(e=>{console.log("1111111cest"),V(e)?m.modelValue=e:m.modelValue=[]}),{deep:!0,immediate:!0}),(t,a)=>{const o=vue.resolveComponent("van-uploader");return vue.openBlock(),vue.createElementBlock("div",pa,[vue.createVNode(o,{"model-value":vue.unref(m).modelValue,"after-read":c,"max-count":e.maxCount,"before-delete":v,disabled:e.isView},vue.createSlots({default:vue.withCtx((()=>[vue.renderSlot(t.$slots,"default",{},(()=>[vue.createElementVNode("div",fa,[vue.createVNode(E,{name:"image-upload",class:"icon"})])]),!0)])),_:2},[vue.renderList(vue.unref(d),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})),void 0,!0)]))})))]),1032,["model-value","max-count","disabled"])])}}}),[["__scopeId","data-v-bad4730a"]]);const Va={class:"sub-label"},ga={class:"com-image-upload"},ha={class:"upload-item"};var Ca=b(vue.defineComponent({__name:"ProUploadV2",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},subLabel:{type:String,default:""},uploadType:{type:String,default:_.OTHER},category:{type:Number,default:T.OTHER},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","onUploaded"],setup(e,{emit:t}){const a=e,{filedAttrs:u,filedSlots:s,attrs:d,slots:m}=n(ta()),{formState:c,objectType:v,objectId:p}=i(Nt)||{},f=o((()=>Object.keys(m).filter((e=>"default"!==e)))),y=r({modelValue:[]}),V=o((()=>(y.modelValue||[]).map((({uri:e})=>({url:e})))));S((()=>y.modelValue));const g=e=>{k(e.file,a.uploadType).then((e=>{const{code:o,data:l}=e||{};"10000"===o&&l.url&&(y.modelValue.push({objectId:p,uri:l.url,category:a.category,objectType:a.objectType||v}),t("onUploaded",l))}))},h=(e,t)=>{const{index:a}=t;y.modelValue.splice(a,1)};return l((()=>y.modelValue),(e=>{t("update:modelValue",e)}),{deep:!0,immediate:!0}),l((()=>a.modelValue),(e=>{Array.isArray(y.modelValue)&&(y.modelValue=e)}),{deep:!0,immediate:!0}),(t,a)=>{const o=vue.resolveComponent("van-uploader"),l=vue.resolveComponent("ProFormItem");return vue.openBlock(),vue.createBlock(l,{class:vue.normalizeClass({"com-van-upload-wrap":!0,"com-van-upload-wrap-view":e.isView}),"model-value":vue.unref(y).modelValue},vue.createSlots({input:vue.withCtx((()=>[vue.createElementVNode("div",ga,[vue.createVNode(o,{"model-value":vue.unref(V),"after-read":g,"max-count":e.maxCount,"before-delete":h,disabled:e.isView},vue.createSlots({default:vue.withCtx((()=>[vue.renderSlot(t.$slots,"default",{},(()=>[vue.createElementVNode("div",ha,[vue.createVNode(E,{name:"image-upload",class:"icon"})])]),!0)])),_:2},[vue.renderList(vue.unref(f),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})),void 0,!0)]))})))]),1032,["model-value","max-count","disabled"])])])),_:2},[e.subLabel?{name:"label",fn:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(vue.unref(u).label),1),vue.createElementVNode("span",Va,vue.toDisplayString(e.subLabel),1)])),key:"0"}:void 0]),1032,["class","model-value"])}}}),[["__scopeId","data-v-64d27f69"]]);const ba=["onClick"],Na=["src"],Sa=["src"],wa={key:1,class:"text"},_a={key:0,class:"upload-item cover"},Ea=(e=>(vue.pushScopeId("data-v-4a225136"),e=e(),vue.popScopeId(),e))((()=>vue.createElementVNode("div",{class:"bg"},null,-1))),ka=["src"],Ta={class:"text"};var Pa=b(vue.defineComponent({inheritAttrs:!1,__name:"ProIDCardUploadV2",props:{modelValue:{type:Array,default:()=>[]},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","ocr"],setup(a,{emit:u}){const s=a,d=[{uploadType:_.ID_CARD_FRONT,category:T.OBVERSE_CERT,title:"上传人像面",imgSrc:P},{uploadType:_.ID_CARD_BACK,category:T.REVERSE_CERT,title:"上传国徽面",imgSrc:D}],{filedAttrs:m}=n(ta()),{formState:c,objectType:v,objectId:p}=i(Nt)||{},f=t(),y=r({currentIndex:null,modelValue:[],ossKeyList:[]}),g=o((()=>y.modelValue.map((e=>[{url:e.uri}]))));S((()=>y.modelValue));const h=(e,t)=>{const{uploadType:a,title:o,category:l}=d[t];k(e.file,a).then((e=>{const{code:a,data:r}=e||{};"10000"===a&&r.url&&(y.modelValue[t]={...y.modelValue[t],objectId:p,uri:r.url,category:l,name:o,objectType:s.objectType||v},y.ossKeyList[t]=r.ossKey,c.formData&&m.value.name&&(c.formData[m.value.name]=y.modelValue))}))},C=t=>{s.isView||(y.currentIndex=t,e((()=>{var e;null==(e=f.value)||e.chooseFile()})))};return l((()=>y.modelValue),(e=>{u("update:modelValue",e)}),{deep:!0,immediate:!0}),l((()=>s.modelValue),(e=>{Array.isArray(e)&&(y.modelValue=e)}),{deep:!0,immediate:!0}),l((()=>y.ossKeyList),(e=>{V(e)&&2===e.length&&A({ossKey:e,imageType:I.ID_CARD}).then((e=>{const{data:t,code:a}=e;if("10000"===a&&t&&t.idCardOcrVO){const{personName:e,personIdCard:a,validDateEnd:o,validDateStart:l,...r}=t.idCardOcrVO||{};u("ocr",{name:e,certNo:a,certEndDate:o,certStartDate:l,...r})}}))}),{deep:!0}),(e,t)=>{const o=vue.resolveComponent("van-uploader");return vue.openBlock(),vue.createBlock(na,vue.mergeProps({class:"com-van-id-card-upload-wrap","model-value":vue.unref(y).modelValue},vue.unref(m)),{input:vue.withCtx((()=>[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(d,((e,t)=>vue.createVNode(o,{key:e.uploadType,"max-count":1,deletable:!1,"preview-full-image":a.isView,disabled:a.isView,"model-value":vue.unref(g)[t],"after-read":e=>h(e,t),onClickPreview:e=>C(t)},{"preview-cover":vue.withCtx((()=>[a.isView?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",_a,[Ea,vue.createElementVNode("img",{src:vue.unref(B),class:"icon"},null,8,ka),vue.createElementVNode("div",Ta,vue.toDisplayString(e.title),1)]))])),default:vue.withCtx((()=>[vue.createElementVNode("div",{class:"upload-item",onClick:()=>C(t)},[vue.createElementVNode("img",{src:e.imgSrc,class:"bg"},null,8,Na),a.isView?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("img",{key:0,src:vue.unref(B),class:"icon"},null,8,Sa)),a.isView?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createElementBlock("div",wa,vue.toDisplayString(e.title),1))],8,ba)])),_:2},1032,["preview-full-image","disabled","model-value","after-read","onClickPreview"]))),64)),vue.createVNode(o,{ref_key:"tempUploaderRef",ref:f,class:"temp-uploader","max-count":1,"after-read":e=>h(e,vue.unref(y).currentIndex)},null,8,["after-read"])])),_:1},16,["model-value"])}}}),[["__scopeId","data-v-4a225136"]]);const Da={class:"sub-label"},Aa={class:"upload-item"};var Ia=b(vue.defineComponent({inheritAttrs:!1,__name:"ProBankUpload",props:{modelValue:{type:Array,default:()=>[]},subLabel:{type:String,default:""},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","ocr"],setup(e,{emit:t}){const a=e,u=[{category:T.OBVERSE_BANK_CARD,title:"银行卡正面照"},{category:T.REVERSE_BANK_CARD,title:"银行卡反面照"}],s=te("BANK"),{filedAttrs:d}=n(ta()),{objectType:m,objectId:c}=i(Nt)||{},v=r({currentIndex:null,modelValue:[],ossKeyList:[]});S((()=>v.modelValue));const p=o((()=>v.modelValue.map((e=>e?[{url:e.uri}]:[]))));return l((()=>v.modelValue),(e=>{t("update:modelValue",e)}),{deep:!0,immediate:!0}),l((()=>a.modelValue),(e=>{v.modelValue=e||[]}),{deep:!0,immediate:!0}),l((()=>v.ossKeyList),(e=>{V(e)&&2===e.length&&A({ossKey:e,imageType:I.BANK_CARD}).then((e=>{var a;const{data:o,code:l}=e;if("10000"===l&&o&&o.bankCardOcrVO){const{cardNo:e,bankName:l}=o.bankCardOcrVO,{code:r}=(null==(a=s.value)?void 0:a.find((e=>e.name===l)))||{};t("ocr",{bankName:l,payBank:r,bankCardNo:e})}}))}),{deep:!0}),(t,o)=>{const l=vue.resolveComponent("ProSvg"),r=vue.resolveComponent("van-uploader");return vue.openBlock(),vue.createBlock(na,vue.mergeProps({class:"com-van-bank-upload-wrap","model-value":vue.unref(v).modelValue},vue.unref(d)),vue.createSlots({input:vue.withCtx((()=>[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(u,((o,n)=>vue.createElementVNode("div",{key:o.title,class:"com-image-upload"},[vue.createVNode(r,{"max-count":1,"preview-full-image":e.isView,disabled:e.isView,deletable:!e.isView,"model-value":vue.unref(p)[n],"before-delete":()=>(e=>{v.modelValue[e]=null})(n),"after-read":e=>((e,t)=>{const{title:o,category:l}=u[t];k(e.file,_.BANK_CARD).then((e=>{const{code:r,data:u}=e||{};"10000"===r&&u.url&&(v.modelValue[t]={...v.modelValue[t],objectId:c,uri:u.url,category:l,name:o,objectType:a.objectType||m},v.ossKeyList[t]=u.ossKey)}))})(e,n)},{default:vue.withCtx((()=>[vue.renderSlot(t.$slots,"default",{},(()=>[vue.createElementVNode("div",Aa,[vue.createVNode(l,{name:"image-upload",class:"icon"})])]),!0)])),_:2},1032,["preview-full-image","disabled","deletable","model-value","before-delete","after-read"])]))),64))])),_:2},[e.subLabel?{name:"label",fn:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(vue.unref(d).label),1),vue.createElementVNode("span",Da,vue.toDisplayString(e.subLabel),1)])),key:"0"}:void 0]),1040,["model-value"])}}}),[["__scopeId","data-v-40d84558"]]);var Ba=b(vue.defineComponent({inheritAttrs:!1,__name:"ProDatePickerV2",props:{relatedName:{type:String,default:""},type:{type:String,default:"date"},modelValue:{type:[String,Date],default:""},isView:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]}},emits:["update:modelValue","cancel"],setup(e,{emit:t}){const a=e,{filedAttrs:u,filedSlots:s,attrs:d,slots:m}=n(ta()),{formState:c}=i(Nt)||{},[v,p]=w(!1),y=o((()=>!["time","month-day"].includes(a.type))),V=o((()=>y.value?new Date:null)),g=r({fieldValue:"",date:V.value}),h={datetime:"YYYY-MM-DD HH:mm",date:"YYYY-MM-DD","year-month":"YYYY-MM","month-day":"MM-DD",datehour:"YYYY-MM-DD HH",time:"mm:ss"},C=o((()=>({minDate:new Date(1900,0,1),maxDate:new Date}))),b=o((()=>h[a.type]||"YYYY-MM-DD HH:mm")),N=e=>{const o=ma(e)?f(e).format(b.value):e;((e,t)=>{if(a.relatedName&&e){const o=(Zt[a.relatedName]||{})[`${e}Effect`];"function"==typeof o&&o(t,c)}})("onChange",o),g.fieldValue=o,t("update:modelValue",g.fieldValue),p(!1)},S=()=>{p(!1),t("cancel")},_=e=>{ma(e)?(g.date=e,g.fieldValue=f(e).format(b.value)):"string"==typeof e&&(g.fieldValue=e,y.value?g.date=f(e,b.value).isValid()?f(e,b.value).toDate():V.value:g.date=e)};return l((()=>a.modelValue),(e=>{_(e)}),{immediate:!0,deep:!0}),l((()=>{var e;return null==(e=c.formData)?void 0:e[u.value.name]}),(e=>{_(e)}),{immediate:!0,deep:!0}),(t,a)=>{const o=vue.resolveComponent("van-datetime-picker"),l=vue.resolveComponent("ProPopup");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(na,vue.mergeProps({"model-value":vue.unref(g).fieldValue},vue.unref(u),{"is-view":e.isView,class:`${!1===vue.unref(u).visible?"com-van-field--hidden":""} ${t.$attrs.class}`,"field-value-view":vue.unref(g).fieldValue,onClick:a[0]||(a[0]=t=>!e.isView&&(v.value=!0))}),vue.createSlots({_:2},[vue.renderList(Object.keys(vue.unref(s)),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})),void 0,!0)]))})))]),1040,["model-value","is-view","class","field-value-view"]),vue.createVNode(l,{show:vue.unref(v),"onUpdate:show":a[1]||(a[1]=e=>vue.isRef(v)?v.value=e:null),height:40,closeable:!1},{default:vue.withCtx((()=>[vue.createVNode(o,vue.mergeProps({type:e.type,"model-value":vue.unref(g).date},{...vue.unref(C),...vue.unref(d)},{onConfirm:N,onCancel:S}),vue.createSlots({_:2},[vue.renderList(Object.keys(vue.unref(m)),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})),void 0,!0)]))})))]),1040,["type","model-value"])])),_:3},8,["show"])],64)}}}),[["__scopeId","data-v-0fa4d998"]]);var Ra=b(vue.defineComponent({__name:"ProSMSCode",props:{time:{type:Number,default:60},smsText:{type:String,default:"验证码"},relatedName:{type:String,default:"mobile"},sendSMSCode:{type:Function,default:e=>{"function"==typeof e&&e()}}},setup(e){const t=e,{formState:a,formRef:l}=i(Nt)||{},u=r({isCountdowning:!1}),{current:n,start:s,reset:d}=R({time:1e3*t.time,onFinish(){u.isCountdowning=!1}}),m=()=>{u.isCountdowning||l.value.validate(t.relatedName).then((()=>{t.sendSMSCode({mobile:a.formData[t.relatedName]},(()=>{u.isCountdowning=!0,N({message:"短信发送成功，请查收"}),d(),s()}))})).catch((()=>{}))},c=o((()=>{const{seconds:e}=n.value||{};return 0===e?t.smsText:u.isCountdowning?`${e}s`:t.smsText}));return(e,t)=>{const a=vue.resolveComponent("van-button");return e.$attrs["is-view"]?vue.createCommentVNode("",!0):(vue.openBlock(),vue.createBlock(Qt,vue.mergeProps({key:0,class:"com-pro-sms-code",type:"digit"},e.$attrs),{extra:vue.withCtx((()=>[vue.createVNode(a,{class:"extra-button",size:"small",plain:"",type:"primary",onClick:m},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString(vue.unref(c)),1)])),_:1})])),_:1},16))}}}),[["__scopeId","data-v-a3279dde"]]);var xa=b(vue.defineComponent({__name:"SchemaRenderField",props:{schema:{default:()=>[]},model:{default:()=>({})},config:{default:()=>({})},isView:{type:Boolean}},setup(e){const t=e,a=vue.useSlots(),u=r({config:{},formData:{},schema:[],isView:!1}),n=o((()=>Object.keys(a).filter((e=>"default"!==e))));return l([()=>t.schema,()=>u.config],(([e,t])=>{u.schema=e.map((e=>({...e,componentName:re[e.componentName]?vue.shallowRef(re[e.componentName]):e.componentName,...t[e.name],nanoid:C()}))).filter((e=>!e.hidden))}),{immediate:!0,deep:!0}),l((()=>t.model),(e=>{e&&(u.formData=e)}),{immediate:!0,deep:!0}),l((()=>t.config),(e=>{u.config=e}),{immediate:!0,deep:!0}),(e,t)=>(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(u).schema,((t,a)=>(vue.openBlock(),vue.createBlock(vue.resolveDynamicComponent(t.componentName),vue.mergeProps({key:`${t.nanoid}_${a}`,modelValue:vue.unref(u).formData[t.name],"onUpdate:modelValue":e=>vue.unref(u).formData[t.name]=e},t,{"is-view":e.isView}),vue.createSlots({_:2},[vue.renderList(vue.unref(n),(t=>({name:t,fn:vue.withCtx((a=>[vue.renderSlot(e.$slots,t,vue.normalizeProps(vue.guardReactiveProps(a||{})),void 0,!0)]))})))]),1040,["modelValue","onUpdate:modelValue","is-view"])))),128))}}),[["__scopeId","data-v-367b1ee2"]]);var Oa=vue.defineComponent({inheritAttrs:!1,__name:"ProBank",props:{required:{type:Boolean,default:!1},attributeValueList:{type:Array,default:()=>[]},isView:{type:Boolean,default:!1}},setup(e){const t=e,{formState:a,markRequired:l}=vue.inject(Nt)||{},r=o((()=>V(t.attributeValueList)?t.attributeValueList.map((e=>({...pt[e.code],isView:t.isView,required:t.required,label:e.value}))):[]));return(t,o)=>(vue.openBlock(),vue.createBlock(xa,{schema:vue.unref(r),model:vue.unref(a).formData,"is-view":e.isView},null,8,["schema","model","is-view"]))}});var La=vue.defineComponent({inheritAttrs:!1,__name:"ProAddress",props:{modelValue:{type:Object,default:()=>({})},name:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"name",value:"code",children:"children"})},valuePrefix:{type:String,default:""},isView:{type:Boolean,default:!1},attributeValueList:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,u=r({address:{detail:""}}),n=o((()=>{if(!a.valuePrefix)return u.address;return Object.keys(u.address).reduce(((e,t)=>(e[(e=>"string"==typeof e&&e?a.valuePrefix?`${a.valuePrefix}${Ft(e)}`:e:"")(t)]=u.address[t],e)),{})})),i=o((()=>{if(V(a.attributeValueList)){let e=0,t=!1;return a.attributeValueList.forEach((a=>{Number(a.code)>e&&"4"!==String(a.code)&&(e=Number(a.code)),"4"===String(a.code)&&(t=!0)})),{level:e&&e+1,showDetail:t}}return{level:0,showDetail:!0}})),s=o((()=>{var e;const{level:t}=i.value,a=["province","city","area"][0===t?"area":t-2];return null==(e=u.address)?void 0:e[a]})),d=(e=[])=>{let t={};if(V(e)){const{text:o,value:l}=a.customFieldName;t=["province","city","area"].slice(0,Number(i.value.level||3)).reduce(((t,a,r)=>{const u=e[r+1]||{};return t[a]=u[l],t[`${a}Name`]=u[o],t}),{})}u.address={...u.address,...t}};return l((()=>u.address),(()=>{t("update:modelValue",u.address)}),{immediate:!0,deep:!0}),l((()=>a.modelValue),(e=>{u.address=e||{}}),{immediate:!0,deep:!0}),(t,a)=>{const o=vue.resolveComponent("ProFieldV2");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(na,{class:"com-van-field--hidden",name:e.name,"model-value":vue.unref(n),rules:t.$attrs.rules,required:t.$attrs.required},null,8,["name","model-value","rules","required"]),vue.createVNode(va,vue.mergeProps({"show-full-value":"","custom-field-name":e.customFieldName},t.$attrs,{"model-value":vue.unref(s),"is-view":e.isView,level:vue.unref(i).level,"onUpdate:fullValue":d}),null,16,["custom-field-name","model-value","is-view","level"]),vue.unref(i).showDetail?(vue.openBlock(),vue.createBlock(o,{key:0,modelValue:vue.unref(u).address.detail,"onUpdate:modelValue":a[0]||(a[0]=e=>vue.unref(u).address.detail=e),"is-view":e.isView,type:"textarea",label:`${t.$attrs.label}详细地址`,required:t.$attrs.required,maxlength:50},null,8,["modelValue","is-view","label","required"])):vue.createCommentVNode("",!0)],64)}}});const Ma={class:"occupation-view"},$a={key:0,class:"class-tips"},ja={class:"occupation-view"},Fa={key:0,class:"class-tips"};var Ua=b(vue.defineComponent({inheritAttrs:!1,__name:"ProOccupation",props:{name:{type:String,default:""},customFieldName:{type:Object,default:()=>({text:"value",value:"code",children:"children"})},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,{formState:u}=i(Nt)||{},n="name",s=r({modelValue:[],text:"",occupationClass:""}),d=(e=[])=>{var t;let o=[];if(V(e)){o=e.map((e=>e[a.customFieldName.value]));const{[null==(t=null==a?void 0:a.customFieldName)?void 0:t.text]:l,[n]:r}=e[e.length-1];s.text=l,s.occupationClass=r,(null==u?void 0:u.formData)&&(u.formData.occupationClass=r)}s.modelValue=o},m=o((()=>V(s.modelValue)?s.modelValue[s.modelValue.length-1]:null));return l((()=>a.modelValue),(e=>{s.modelValue=e}),{deep:!0,immediate:!0}),l((()=>s.modelValue),(e=>{t("update:modelValue",e)}),{deep:!0,immediate:!0}),(t,a)=>(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.createVNode(na,{modelValue:vue.unref(s).modelValue,"onUpdate:modelValue":a[0]||(a[0]=e=>vue.unref(s).modelValue=e),class:"com-van-field--hidden",name:e.name,rules:t.$attrs.rules,required:t.$attrs.required},null,8,["modelValue","name","rules","required"]),vue.createVNode(va,vue.mergeProps({"custom-field-name":e.customFieldName},t.$attrs,{"model-value":vue.unref(m),"onUpdate:fullValue":d}),{"value-view":vue.withCtx((()=>[vue.createElementVNode("span",Ma,[vue.createTextVNode(vue.toDisplayString(vue.unref(s).text),1),vue.unref(s).occupationClass?(vue.openBlock(),vue.createElementBlock("span",$a,vue.toDisplayString(vue.unref(s).occupationClass)+"类",1)):vue.createCommentVNode("",!0)])])),option:vue.withCtx((({option:t={}})=>{var a;return[vue.createElementVNode("span",ja,[vue.createTextVNode(vue.toDisplayString(null==t?void 0:t[null==(a=e.customFieldName)?void 0:a.text]),1),(null==t?void 0:t[n])?(vue.openBlock(),vue.createElementBlock("span",Fa,vue.toDisplayString(null==t?void 0:t[n])+"类",1)):vue.createCommentVNode("",!0)])]})),_:1},16,["custom-field-name","model-value"])],64))}}),[["__scopeId","data-v-3447de66"]]);var Ya=b(vue.defineComponent({inheritAttrs:!1,__name:"ProRenderFormWithCard",props:{title:{type:String,default:""},class:{type:String,default:""}},setup(e,{expose:a}){const l=e,r=t(null),u=vue.useSlots(),n=o((()=>Object.keys(u).filter((e=>"cardTitleExtra"!==e))));return a({...["submit","getValues","validate","resetValidation","getValidationStatus","scrollToField"].reduce(((e,t)=>(e[t]=(...e)=>{var a;return null==(a=r.value)?void 0:a[t](...e)},e)),{})}),(t,a)=>{const o=vue.resolveComponent("ProCard");return vue.openBlock(),vue.createBlock(o,{class:vue.normalizeClass(`com-pro-form-with-card com-card-body-no-padding ${l.class}`),"show-divider":!1,title:e.title},{extra:vue.withCtx((()=>[vue.renderSlot(t.$slots,"cardTitleExtra",{},void 0,!0)])),default:vue.withCtx((()=>[vue.createVNode(qt,vue.mergeProps({ref_key:"renderFormRef",ref:r},t.$attrs),vue.createSlots({_:2},[vue.renderList(vue.unref(n),(e=>({name:e,fn:vue.withCtx((a=>[vue.renderSlot(t.$slots,e,vue.normalizeProps(vue.guardReactiveProps(a||{})),void 0,!0)]))})))]),1040)])),_:3},8,["class","title"])}}}),[["__scopeId","data-v-dc30f30c"]]);const Ha=vue.defineComponent({__name:"PayInfo",props:{schema:{default:()=>[]},config:{default:()=>[]},modelValue:{default:()=>[]},isView:{type:Boolean,default:!1},userData:{default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:a,emit:u}){const n=e,i="1",s=t(null),d=["cardType","bankCard"],m=["orderId","tenantId","id"],c={paymentType:"1",paymentMethod:"1",expiryMethod:"1",cardType:ae.DEBIT},v=[...Object.keys(c),"paymentGenre"],p=[{title:"首期支付",schema:[],payInfoType:oe.FIRST_TERM,formData:{},config:{cardType:{isView:!0}},objectType:x.INIT_SIGN},{title:"续期支付",schema:[],payInfoType:oe.RENEW_TERM,formData:{paymentGenre:String(le.FIRST_SAME)},config:{cardType:{isView:!0}},objectType:x.RENEWAL_SIGN},{title:"年金领取银行卡",schema:[],payInfoType:oe.REPRISE,formData:{paymentMethod:"1",paymentGenre:String(le.FIRST_SAME)},config:{},objectType:x.ANNUAL_SIGN}].map((e=>({...e,nanoid:C()}))),f=[["initialPaymentMethod","initialCardType","initialBankCard","initialPaymentType"],["renewalPaymentGenre","renewalPaymentMethod","renewalCardType","renewalBankCard","renewalPaymentType","expiryMethod"],["annuityPaymentGenre","annuityBankCard"]],y=r({schemaList:[]}),g=o((()=>{var e,t;return(null==(t=null==(e=n.userData.insuredList)?void 0:e[0])?void 0:t.name)||null})),h=o((()=>{var e,t;return(null==(t=null==(e=n.userData)?void 0:e.holder)?void 0:t.name)||null})),b=o((()=>["FIRST_TERM","RENEW_TERM","REPRISE"].reduce(((e,t)=>{const a=(o=t,y.schemaList.findIndex((e=>String(e.payInfoType)===String(oe[o]))));var o;return a>-1&&(e[t]=a),e}),{}))),N=(e,t)=>{var a,o;return e>-1&&(null==(o=null==(a=y.schemaList[e])?void 0:a.formData)?void 0:o.paymentGenre)===`${le[t]}`},S=o((()=>{const e=y.schemaList.map((e=>`${e.payInfoType}`));return p.filter((t=>e.includes(String(t.payInfoType))))})),w=(e,t)=>{var a;const{formData:o}=y.schemaList[t]||{},{paymentGenre:l,id:r,...u}=o||{},n={...u,bankCardImage:V(u.bankCardImage)?u.bankCardImage.map((t=>{var a,o;return{...t,objectType:null==(o=null==(a=S.value)?void 0:a[e])?void 0:o.objectType}})):[]};Object.assign(null==(a=y.schemaList[e])?void 0:a.formData,n)};return l((()=>y.schemaList.map((e=>{var t,a;return[null==(t=null==e?void 0:e.formData)?void 0:t.paymentMethod,null==(a=null==e?void 0:e.formData)?void 0:a.paymentGenre]}))),((e,t)=>{At("支付方式/支付类型变动"),y.schemaList.forEach(((e,t)=>{const{formData:a,schema:o}=e||{},l=i===String(null==a?void 0:a.paymentMethod),r=[le.FIRST_SAME,le.RENEW_SAME].includes(Number(null==a?void 0:a.paymentGenre));o.forEach((e=>{e.hidden=(r||!l)&&((e,t=!1)=>{if(e){const a=[...d];return t&&a.push("paymentMethod"),a.includes(e)}return!1})(e.name,r)})),e.nanoid=C()}))}),{deep:!0,immediate:!0}),l((()=>{var e;return{...null==(e=y.schemaList[b.value.FIRST_TERM])?void 0:e.formData}}),((e,t)=>{if(n.isView||ge(e,t))return!1;const{REPRISE:a,RENEW_TERM:o}=b.value;At("首期数据变动"),N(o,"FIRST_SAME")&&w(o,b.value.FIRST_TERM),N(a,"FIRST_SAME")&&w(a,o)}),{deep:!0}),l((()=>{var e;return null==(e=y.schemaList[b.value.RENEW_TERM])?void 0:e.formData}),((e,t)=>{if(n.isView||ge(e,t))return!1;At("续期数据变动");const{REPRISE:a,RENEW_TERM:o}=b.value;N(a,"RENEW_SAME")&&w(a,o)}),{deep:!0}),l((()=>y.schemaList.map((e=>{var t;return null==(t=null==e?void 0:e.formData)?void 0:t.paymentMethod}))),((e,t)=>{JSON.stringify(e)!==JSON.stringify(t)&&y.schemaList.forEach(((a,o)=>{const l=e[o],r=t[o],u=l&&r&&String(l)!==String(r);a.payInfoType!==oe.REPRISE&&u&&"1"!==String(l)&&L(a.formData,{...zt(a.formData,(e=>vt.includes(e))),bankCardImage:null})}))}),{deep:!0}),l((()=>{var e,t;return null==(t=null==(e=y.schemaList[b.value.RENEW_TERM])?void 0:e.formData)?void 0:t.paymentGenre}),(e=>{var t,a;if(n.isView)return!1;At("续期支付类型变动");const{FIRST_TERM:o,RENEW_TERM:l}=b.value;String(e)===String(le.FIRST_SAME)?w(l,o):y.schemaList[l]&&(L(y.schemaList[l].formData,{...zt(y.schemaList[l].formData,(e=>!m.includes(e))),...null==(a=null==(t=S.value)?void 0:t[l])?void 0:a.formData,accountName:h.value,paymentGenre:e}),y.schemaList[l].nanoid=C())})),l((()=>{var e,t;return null==(t=null==(e=y.schemaList[b.value.REPRISE])?void 0:e.formData)?void 0:t.paymentGenre}),((e,t)=>{var a,o;if(n.isView||!e||!t||e===t)return!1;const{FIRST_TERM:l,RENEW_TERM:r,REPRISE:u}=b.value,i=[le.FIRST_SAME,le.RENEW_SAME].includes(Number(e));if(At("年金支付类型变动"),i){const t=String(e)===String(le.FIRST_SAME)?l:r;w(u,t)}else y.schemaList[u]&&(L(y.schemaList[u].formData,{...zt(y.schemaList[u].formData,(e=>!m.includes(e))),...null==(o=null==(a=S.value)?void 0:a[u])?void 0:o.formData,accountName:g.value,paymentGenre:e}),y.schemaList[u].nanoid=C())}),{immediate:!0}),l([()=>n.schema,()=>n.config],(()=>{let e=[];y.schemaList=n.schema.reduce(((t,a)=>{const o=f.findIndex((e=>e.includes(a.name)));if("paymentDrawType"===a.name&&(e=a.columns.map((e=>e.code))),o>-1){const e=(e=>{if("string"!=typeof e||!e)return"";const[t,a]=e.match(/^(?:initial|renewal|annuity)(.*)$/)||[];return a?Ut(a):e})(a.name);if(v.includes(e)){const l=(({name:e,columns:t},a)=>{if(V(t)){const o={...a,...c},l=V(t)&&t.find((t=>`${t.code}`==`${o[e]}`));return{[e]:l?o[e]:null}}return{}})({name:e,columns:a.columns},p[o].formData);L(t[o].formData,l),L(p[o].formData,l)}t[o].schema.push({...a,name:e,payInfoType:p[o].payInfoType})}return t}),O(p)).map(((e,t)=>({...e,config:{...e.config,...n.config[t]||{}},nanoid:C()}))).filter((({schema:t,...a})=>e.includes(`${a.payInfoType}`)&&V(t)))}),{deep:!0,immediate:!0}),l((()=>n.modelValue),(e=>{V(e)&&y.schemaList.forEach(((t,a)=>{L(t.formData,e[a])}))}),{deep:!0,immediate:!0}),l((()=>{var e;return null==(e=y.schemaList)?void 0:e.map((e=>e.formData))}),(e=>{V(e)&&u("update:modelValue",e.map(((e,t)=>{const{payInfoType:a}=y.schemaList[t];return{...e,payInfoType:a}})))}),{deep:!0,immediate:!0}),l((()=>[h.value,g.value]),(([e,t])=>{(e||t)&&y.schemaList.forEach((a=>{const o=a.payInfoType===oe.REPRISE;a.formData.accountName=o?t:e}))}),{deep:!0}),a({validate:e=>{var t;return Promise.all(s.value?null==(t=s.value)?void 0:t.map((e=>null==e?void 0:e.validate())):[])}}),(e,t)=>(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(vue.unref(y).schemaList,((t,a)=>(vue.openBlock(),vue.createBlock(vue.unref(Ya),{ref_for:!0,ref_key:"payInfoFormRef",ref:s,key:`${t.nanoid}_${a}`,schema:t.schema,model:t.formData,config:t.config,title:t.title,"is-view":e.isView,"extra-provision":{objectType:t.objectType,objectId:t.formData.id}},null,8,["schema","model","config","title","is-view","extra-provision"])))),128))}});export{Ya as P,Ha as _,Bt as a,Qt as b,At as c,Ba as d,aa as e,qt as f,Gt as g,Ra as h,ge as i,La as j,ia as k,zt as r,$t as t,It as v};

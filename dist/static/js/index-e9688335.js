import{d as e,u as a,a as t,r as n,an as r,c as o,h as d,av as s,j as c}from"./index-637b8a09.js";import{l as i}from"./index-224f396b.js";import{f as p,P as l}from"./infoCollection-8db5a31c.js";import{q as u}from"./trial-e9b4a4b5.js";import"./pdfh5-008ca364.js";const f={class:"page-middle-wrapper"},C=[c("h4",null,null,-1)],I=e({__name:"index",setup(e){const c=a(),I=t(),m=n(""),{extraInfo:g,agencyCode:h,templateId:y,pageCode:b,insurerCode:x,productCode:$,agentCode:j,saleChannelId:v}=I.query;let R={};try{R=JSON.parse(decodeURIComponent(g))}catch(A){}const{templateId:U,openId:w,tenantId:N,orderNo:q}=R,E=()=>{try{const e=w?y:U;if(e)return`/baseInsurance/${p[e]}`;switch(b){case l.FREE:return`/chuangxin/baigebao/${b}`;case l.COMMON:return"/internet/productDetail";case l.UPGRADE:return"/internet/guaranteeUpgrade";case l.PACKAGE:return"/internet/productDetail/package";default:return""}}catch(e){return""}},O=e=>{s({param:e}).then((({code:a,data:t})=>{if("10000"===a&&t)if(w){const a=E();c.replace(encodeURI(`${a}?${e}`))}else(e=>{var a;if("4"===U&&q){const e={insurerCode:x,productCode:$,tenantId:N||(null==(a=I.query)?void 0:a.tenantId),agencyCode:h,agentCode:j,orderNo:q,saleChannelId:v};return e.extraInfo=decodeURIComponent(JSON.stringify({...R,templateId:U})),void c.push(`/baseInsurance/upgrade?${i.stringify(e)}`)}let t=e;const n=E();n&&(t=n),c.replace(encodeURI(`${t}?${i.stringify(I.query)}`))})();else m.value="验证失败"}))};return r((()=>{w?(async()=>{const{code:e,data:a}=await u({insurerCode:x,productCode:$,tenantId:N,agencyCode:h,extraMap:{...R,templateId:y}});"10000"===e&&O((a||"").split("?")[1])})():O(window.location.search.replace("?",""))})),(e,a)=>(o(),d("div",f,C))}});export{I as default};

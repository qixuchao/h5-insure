!function(){var e=document.createElement("style");e.innerHTML=".refueling-package-com{background:#fff}.refueling-package-com .title{background:#ffffff;font-size:.42667rem;font-weight:500;color:#333;line-height:.4rem;padding:.4rem .33333rem}.refueling-package-com .van-cell{align-items:center}.refueling-package-com .van-cell .van-field__label{min-width:4rem!important}.refueling-package-com .show-more{padding:.4rem 0;width:100%;display:flex;justify-content:center;align-items:center;font-size:.34667rem;color:var(--van-primary-color, var(--zaui-brand))}.refueling-package-com .show-more .icon{margin-left:.13333rem;font-size:.26667rem;transition:transform .5s}.refueling-package-com .show-more .icon.showMore{transform:rotate(180deg)}.page-internet-product-detail{padding-bottom:2rem;background:#f1f5fc}.page-internet-product-detail .custom-page-form{background:#ffffff}.page-internet-product-detail .custom-page-form .form-title{padding:.53333rem 0px .13333rem;text-align:center;font-size:.53333rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#333}.page-internet-product-detail .custom-page-form .com-card-wrap .header{margin-left:0!important}.page-internet-product-detail .custom-page-form .com-card-wrap .header .title-wrapper .title:before{margin-right:.37333rem!important}.page-internet-product-detail .custom-page-form .com-card-wrap .relation-holder .van-cell__title{display:none}.page-internet-product-detail .custom-page-form :deep(.radio-btn){justify-content:flex-start}.page-internet-product-detail .custom-page-form :deep(.radio-btn) .btn-wrapper{margin-left:0!important;margin-right:.10667rem!important}.page-internet-product-detail .footer-area{width:100%;height:2rem;position:fixed;bottom:0;left:0;display:flex;align-items:center;border-top:1px solid #EEEFF4;padding:0 .4rem;background:#ffffff;z-index:10;justify-content:space-between;border-radius:.4rem .4rem 0px 0px}.page-internet-product-detail .footer-area :deep(.com-share){width:1.02667rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.page-internet-product-detail .footer-area :deep(.com-share) span{font-size:.32rem;color:var(--zaui-text, #393d46)}.page-internet-product-detail .price{color:#393d46;font-size:.45333rem;font-weight:400;width:3.6rem;margin:0 .26667rem}.page-internet-product-detail .price span{color:var(--van-primary-color);font-weight:700}.page-internet-product-detail .price span:last-child{font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400}.page-internet-product-detail .right{width:4rem;height:1.17333rem;border-radius:.58667rem}\n",document.head.appendChild(e),System.register(["./index-legacy-d48fadb4.js","./trial-legacy-07f83934.js","./product-legacy-51b9c66a.js","./nextStep-legacy-a92f5d35.js","./infoCollection-legacy-f72d6d20.js","./useAddressList-legacy-72dbb2ba.js","./utils-legacy-4f0c60d2.js","./index-legacy-8992fc8a.js","./useAttachment-legacy-dc03f31d.js","./index-legacy-7b77fd34.js","./phoneVerify-legacy-55d4f6db.js","./ProAddress.vue_vue_type_style_index_0_scoped_true_lang-legacy-eda9eb33.js","./index-legacy-9e7cca8b.js","./trial-legacy-47c3e936.js","./pdfh5-legacy-9f98dc45.js","./core-legacy-bfba9e6f.js","./constant-legacy-c9c30061.js","./index-legacy-b0c42ea8.js","./keysIn-legacy-e771016d.js","./isObjectLike-legacy-c9ae9091.js"],(function(e,t){"use strict";var a,n,r,o,l,i,s,d,c,u,p,m,v,f,g,h,y,b,A,x,I,k,C,O,w,L,T,S,_,j,P,E,R,N,D,F,H,B,V,U,q,z,M,G,Q,J,W,Y,Z,$,K,X,ee,te,ae,ne,re,oe,le,ie,se,de,ce,ue,pe,me,ve,fe,ge;return{setters:[function(e){a=e.d,n=e.S,r=e.E,o=e.c,l=e.h,i=e.f,s=e.w,d=e.F,c=e.i,u=e.g,p=e.e,m=e.n,v=e.t,f=e.V,g=e.L,h=e.k,y=e.j,b=e.m,A=e.ap,x=e.au,I=e.a,k=e.r,C=e.bY,O=e.bZ,w=e.b_,L=e.u,T=e.J,S=e.an,_=e.b6,j=e.a9,P=e.aE,E=e.H,R=e.ah,N=e.G,D=e.bR,F=e.a7,H=e.T,B=e.aj,V=e.c0,U=e.c7,q=e.c1},function(e){z=e.i,M=e.b,G=e.p,Q=e.g},function(e){J=e.b,W=e.c},function(e){Y=e.n},function(e){Z=e.g,$=e.I,K=e.O,X=e.l,ee=e.S},function(e){te=e.u},function(e){ae=e.r,ne=e.v,re=e.g,oe=e.t},function(e){le=e._},function(e){ie=e.u,se=e.G,de=e._,ce=e.a},function(e){ue=e.P},function(e){pe=e.s,me=e.c},function(){},function(e){ve=e.c,fe=e.t,ge=e._},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){const he={class:"refueling-package-com"},ye=y("div",{class:"title"},"加油包",-1),be=a({__name:"index",props:{packageProductList:{type:Array,default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:3}},setup(e){const t=e,[a,y]=n(!1),I=r((()=>t.packageProductList.length>t.count&&(!!t.isShowClose||!a.value))),k=()=>{y()},C=r((()=>t.packageProductList.length<=t.count||a.value?t.packageProductList:t.packageProductList.slice(0,t.count)));return(e,t)=>{const n=b,r=A,y=x;return o(),l("div",he,[ye,i(y,{ref:"formRef"},{default:s((()=>[(o(!0),l(d,null,c(u(C),((e,t)=>(o(),p(r,{key:`${e.value}_${t}`,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:e.packageName,required:"",placeholder:"请选择"},{input:s((()=>[i(n,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,options:u(Z),disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","options","disabled"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])))),128)),u(I)?(o(),l("div",{key:0,class:"show-more",onClick:k},[m(v(u(a)?"收起":"查看更多")+" ",1),i(f,{name:"down",class:g(["icon",{showMore:u(a)}])},null,8,["class"])])):h("",!0)])),_:1},512)])}}});const Ae={key:0},xe=[y("div",{class:"__skeleton_short_content__"},[y("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[y("div",{class:"page-internet-product-detail"},[y("div",{class:"info"},[y("div",{class:"van-image banner",style:{width:"100%",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[y("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1676527379&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=tkscLe6oOZYjnRIA%2B7AiMS3bOs0%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),y("div")]),y("div",{class:"guarantee-list"},[y("div",{class:"header"},[y("span",null,[y("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"保障计划")]),y("span",null,[y("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"查看详情")])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"一般医疗保险金")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高300万")])])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"重大疾病医疗保险金")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤质子重离子医疗")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤院外特定药品费用医疗")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),y("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[y("div",{class:"cell-container"},[y("div",{class:"left-part large"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤特定器械耗材费用医疗责任 （适用于女性被保险人）")]),y("div",{class:"divider"}),y("div",{class:"right-part"},[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高100万")])])]),y("div",{class:"show-more"},[y("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"查看更多 "),y("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[y("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),y("div",{class:"feerate-view sk-border"},[y("span",null,[y("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00元/年起")])])]),y("div",{class:"com-divider"}),y("div",{class:"tabs",sticky:"",scrollspy:""},[y("div",null,[y("div",{class:"van-sticky"},[y("div",{class:"van-tabs"},[y("div",{id:"tab-list",class:"tab-list"},[y("a",{class:"tab-title active",title:"产品亮点"},[y("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"产品亮点")]),y("a",{class:"tab-title",title:"理赔说明"},[y("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"理赔说明")]),y("a",{class:"tab-title",title:"我要投保"},[y("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"我要投保")])])])])]),y("div",{class:"tab-content"},[y("div",{id:"tab1"},[y("div",{class:"spec"},[y("div",{class:"van-image detail-img",style:{width:"100%"}},[y("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)],Ie=["theme-vars"],ke={class:"info"},Ce={class:"custom-page-form"},Oe=y("div",{class:"form-title"},"请填写投保信息",-1),we=y("div",{id:"xinaoDialog"},null,-1);e("default",a({__name:"short",setup(e){var a;const n=C((()=>O((()=>t.import("./index-legacy-1d69e682.js")),void 0))),v=C((()=>O((()=>t.import("./index-legacy-d633ba00.js")),void 0))),f=C((()=>O((()=>t.import("./index-legacy-eed13202.js")),void 0))),g=C((()=>O((()=>t.import("./index-legacy-a1bb90e2.js")),void 0))),b=C((()=>O((()=>t.import("./index-legacy-48bb89c9.js")),void 0))),A=w();L();const x=I(),{productCode:Z="",tenantId:he,agentCode:ye="",agencyCode:Le,saleChannelId:Te,extraInfo:Se,insurerCode:_e,preview:je}=x.query;let Pe={};try{console.log("extInfo",decodeURIComponent(Se)),Pe=JSON.parse(decodeURIComponent(Se))}catch(St){}const{openId:Ee}=Pe;k();const Re=k(),Ne=k(),De=k(!1),Fe=k({}),He=k({}),Be=k(!1),Ve=k(!1),Ue=k(0),qe=k(!1),ze=k({}),Me=k({}),Ge=k(!0),Qe=k(!0),Je=k(!0),We=k(""),Ye=k([]);k({});const Ze=k({}),$e=k({}),Ke=k([]),Xe=k(),et=k(),tt=T({holder:{formData:{},schema:[],trialFactorCodes:[],config:{name:{},verificationCode:{sendSMSCode:async({mobile:e},t)=>{const a=await pe(e),{code:n}=a;"10000"===n&&"function"==typeof t&&t()}},certType:{},certNo:{},occupation:{dictCode:ve(_e)}}},insuredList:[{formData:{},schema:[],trialFactorCodes:[],config:{relationToHolder:{label:""},certNo:{}}}]});Ee&&te({openId:Ee},(e=>{Me.value=e}));const at=k({imgUrl:"",desc:"",title:"",link:window.location.href}),nt=(e=>{const{tenantId:t,agentCode:a="",agencyCode:n,saleChannelId:r,extraInfo:o,insurerCode:l}=I().query;let i={};try{i=JSON.parse(decodeURIComponent(o))}catch(St){}const s=k({agencyId:n,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"",pageCode:"",iseeBizNo:"",extraInfo:{}},orderCategory:1,saleUserId:a,saleChannelId:r,tenantId:t,venderCode:l,tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:t}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}});return"[object Object]"==={}.toString.call(e)&&Object.assign(s.value,e),s})({extInfo:{buttonCode:"EVENT_SHORT_saveOrder",pageCode:"productInfo",extraInfo:Pe,templateId:(null===(a=Pe)||void 0===a?void 0:a.templateId)||"1",iseeBizNo:""}}),rt=k({}),ot=r((()=>!!je)),lt=k([]),it=k(),st=async()=>{J({productCode:Z,tenantId:he,isTenant:!je}).then((({data:e,code:t})=>{if("10000"===t){Fe.value=e,document.title=e.BASIC_INFO.title||"";const{title:t,desc:n,image:r}=(null==e?void 0:e.PRODUCT_LIST.wxShareConfig)||{};a={title:t,desc:n,image:r},at.value={desc:a.desc||"你好，这里是描述",imgUrl:a.image,title:a.title,link:window.location.href}}var a})),await z({productCode:Z,isTenant:!je}).then((({data:e,code:t})=>{var a;"10000"===t&&(qe.value=!0,He.value=e,Ze.value=null===(a=e.productPlanInsureVOList)||void 0===a?void 0:a[0],Ke.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),Je.value=!1,W({productCode:Z}).then((({code:e,data:t})=>{if("10000"===e){var a,n,r,o;const{productMaterialPlanVOList:e,productQuestionnaireVOList:l}=t;it.value=e||[];const{basicInfo:{questionnaireType:i},questions:s,questionnaireName:d}=(null==l||null===(a=l[0])||void 0===a?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};2===i&&(lt.value=[{attachmentName:d,attachmentUri:s,attachmentType:"question"}]),lt.value=[{attachmentName:d,attachmentUri:null==s||null===(n=s[0])||void 0===n?void 0:n.content,attachmentType:re(String(null==s||null===(r=s[0])||void 0===r?void 0:r.textType),null==s||null===(o=s[0])||void 0===o?void 0:o.content)}]}}))},dt=r((()=>{if(Me.value){const e=[];return Object.keys(Me.value).forEach((t=>{e.push(...Me.value[t])})),e}return[]})),ct=r((()=>dt.value.length>0)),ut=k([]),pt=e=>{console.log("currentPlanObj.value",e,Ze.value)};S((()=>rt.value.planCode),(e=>{Ze.value=(He.value.productPlanInsureVOList||[]).find((t=>t.planCode===e))}));const mt=()=>{Re.value.handleClickTab()("tab3")},vt=k(""),ft=k(0),gt=async()=>{try{await Y(((e={},t={},a={})=>{var n;const r={...a},o={tenantId:he,riskList:(null===(n=r.tenantOrderInsuredList[0])||void 0===n?void 0:n.tenantOrderProductList[0].riskVOList)||[],riskPremium:t,productId:e.id};return r.extInfo.iseeBizNo=We.value,r.productCode=e.productCode,r.commencementTime=r.insuranceStartDate,r.expiryDate=r.insuranceEndDate,r.tenantOrderHolder={...r.tenantOrderHolder,certType:r.tenantOrderHolder.certType||R.CERT,certNo:(r.tenantOrderHolder.certNo||"").toLocaleUpperCase(),extInfo:{...r.tenantOrderHolder.extInfo}},r.tenantOrderInsuredList=r.tenantOrderInsuredList.map((e=>({...e,certType:e.certType||R.CERT,certNo:(e.certNo||"").toLocaleUpperCase(),planCode:Ze.value.planCode,extInfo:{...e.extInfo}}))),r.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:ft.value,productCode:e.productCode,productName:e.productName,planCode:Ze.value.planCode,tenantOrderRiskList:oe(o)},r})(He.value,ze.value,nt.value),(async(e,t)=>{t===q.JUMP_PAGE&&null!=e&&e.orderNo&&await(async e=>{try{const{code:t,data:a}=await Q({orderNo:e,tenantId:he});"10000"===t&&(a.extInfo={...a.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await Y(a))}catch(St){}})(null==e?void 0:e.orderNo)}))}catch(St){}},{fileList:ht,mustReadFileCount:yt,popupFileList:bt}=ie(Ze,it),At=e=>{Ue.value=e,Ve.value=!0},xt=async(e,t,a=!0)=>{var n;const{chargePeriod:r,coveragePeriod:o,paymentFrequency:l,insuranceEndDate:i,insuranceStartDate:s}=rt.value;vt.value="保费试算中...";const d=ae(t).map((e=>({...e,paymentFrequency:l,chargePeriod:r,coveragePeriod:o}))),{tenantOrderHolder:c,tenantOrderInsuredList:u}=nt.value,p={tenantId:he,productCode:e.productCode,insuranceStartDate:s,insuranceEndDate:i,holder:{personVO:{...c,socialFlag:null===(n=c.extInfo)||void 0===n?void 0:n.hasSocialInsurance,certType:c.certType||R.CERT}},insuredVOList:u.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance,certType:e.certType||R.CERT},productPlanVOList:[{insurerCode:_e,planCode:Ze.value.planCode,riskVOList:d}]})))},{code:m,message:v}=await M(p);if("10000"===m){const{code:e,data:t}=await G(p);if("10000"===e){if(vt.value="",nt.value.tenantOrderInsuredList[0].tenantOrderProductList=p.insuredVOList[0].productPlanVOList,ft.value=null==t?void 0:t.premium,nt.value.premium=t.premium,nt.value.orderAmount=t.premium,nt.value.orderRealAmount=t.premium,!a){const e={};t.riskPremiumDetailVOList&&t.riskPremiumDetailVOList.length&&t.riskPremiumDetailVOList.forEach((t=>{e[t.riskCode]={premium:t.premium,amount:t.amount}})),ze.value=e,bt.value.length>0?(Ge.value=!1,At(0)):lt.value.length>0?Be.value=!0:await gt()}}else vt.value=""}else vt.value="",H(v)},It=()=>{const e=[];return Ye.value.filter((e=>e.value===$.INSURE)).forEach((t=>{e.push(...t.productRiskVoList)})),e},kt=async()=>{try{var e,t;if(Be.value=!1,Ve.value=!1,Xe.value&&et.value)Promise.all([null===(e=Xe.value)||void 0===e?void 0:e.validate(),null===(t=et.value)||void 0===t?void 0:t[0].validate()]).then((async()=>{if(ct.value)await xt(He.value,[...ut.value,...It()],!1);else{var e;const t=null===(e=nt.value.tenantOrderHolder)||void 0===e?void 0:e.verificationCode;if(!ne(t))return void H({message:"请输入正确的验证码"});const{code:a,data:n}=await me(nt.value.tenantOrderHolder.mobile,t);"10000"===a&&await xt(He.value,[...ut.value,...It()],!1)}})).catch((()=>{const e=document.querySelector(".form-title");e&&e.scrollIntoView()}))}catch(a){}},Ct=e=>{"allFalse"===e?(Be.value=!1,gt()):B.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{Be.value=!1}))},Ot=()=>{Ve.value=!1,Ge.value=!0,lt.value.length<1?gt():Be.value=!0},wt=()=>{Be.value=!1,Ve.value=!1,Ge.value=!0};S((()=>nt.value.tenantOrderInsuredList[0].relationToHolder),((e,t)=>{e!==t&&Ye.value&&Ye.value.forEach((e=>{e.value=$.UN_INSURE})),Qe.value=!1,_((()=>{const{certType:e,extInfo:t}=nt.value.tenantOrderInsuredList[0];t&&!t.hasSocialInsurance&&(nt.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance=ee.HAS),Qe.value=!0}))}),{deep:!0,immediate:!0}),S([()=>tt.holder.formData,()=>tt.insuredList],(([e,t])=>{Object.assign(nt.value,(({holder:e,insuredList:t=[]})=>{const a=["birthday","certEndDate","certEndType","certNo","certStartDate","verificationCode","certType","email","gender","mobile","name","id","insuredBeneficiaryType","relationToHolder","relationToMainInsured"],n=e=>{const t={extInfo:{}};return"[object Object]"==={}.toString.call(e)&&Object.keys(e).forEach((n=>{a.includes(n)?t[n]=e[n]:t.extInfo[n]=e[n]})),t};return{tenantOrderHolder:n(e),tenantOrderInsuredList:(t||[]).map((e=>n(e)))}})({holder:e,insuredList:t.map((e=>e.formData))}))}),{deep:!0});const Lt=(e,t)=>e.find((e=>!t[e])),Tt=async()=>{const{trialFactorCodes:e,formData:t}=tt.holder,{trialFactorCodes:a,formData:n}=tt.insuredList[0];return new Promise(((r,o)=>{!Lt(e,t)&&!Lt(a,n)&&Xe.value&&et.value?Promise.all([Xe.value.validate(e),et.value[0].validate(a)]).then((()=>{r(!0)})).catch((()=>{o()})):o()}))};return S((()=>[...tt.holder.trialFactorCodes.map((e=>tt.holder.formData[e])),...tt.insuredList.reduce(((e,t,a)=>(e.push(...t.trialFactorCodes.map((e=>tt.insuredList[a].formData[e]))),e)),[]),rt.value.paymentFrequency,Ye.value]),((...e)=>{ot.value||Tt().then((()=>{xt(He.value,[...ut.value,...It()])})).catch((()=>{Tt().then((()=>{vt.value="保费试算中..."}))}))}),{deep:!0}),S((()=>tt.holder.formData),((...e)=>{tt.insuredList.forEach(((e,t)=>{const{formData:a,schema:n}=e||{};"1"===a.relationToHolder&&Object.assign(e.formData,tt.holder.formData)}))}),{deep:!0,immediate:!0}),S((()=>Ze.value),(()=>{let{productFactor:e}=Ze.value;const{oilPackageProductVOList:t,planCode:a,insureProductRiskVOList:n}=Ze.value;ct.value&&e[1]&&(e=e[1].filter((e=>"verificationCode"!==e.code))),rt.value.planCode=a,ut.value=n,$e.value=(n||[]).find((e=>e.mainRiskFlag===j.YES)),console.log("mainRiskInfo.value",$e.value),Ye.value=(t||[]).map((e=>({...e,value:$.UN_INSURE})));const[r,o,l]=fe(e);tt.holder={...tt.holder,...r},tt.insuredList[0]={...tt.insuredList[0],...o}}),{deep:!0,immediate:!0}),S((()=>tt.insuredList.map(((e,t)=>tt.insuredList[t].formData.relationToHolder))),((e,t)=>{console.log("%c🔥 与投保人关系变动了","color:#1989fa;background:#5e4;padding:3px 5px;"),tt.insuredList.forEach(((e,t)=>{const{formData:a,schema:n,config:r}=e||{},o="1"===a.relationToHolder,l="3"===a.relationToHolder;r.certNo.label="身份证号"+(l?"(户口簿)":""),e.schema.forEach((e=>{e.relationToHolder=a.relationToHolder,e.hidden=!e.isSelfInsuredNeed&&o})),o?Object.assign(e.formData,{...tt.insuredList[t].formData,...tt.holder.formData}):Object.assign(e.formData,{...Object.keys(e.formData).reduce(((e,t)=>(e[t]="",e)),{}),relationToHolder:a.relationToHolder})}))}),{immediate:!0,deep:!0}),_((()=>{V(Ne,(([{isIntersecting:e}],t)=>{De.value=!e}))})),P((()=>{const e=E.get(K);if(e){const{tenantOrderHolder:a,tenantOrderInsuredList:n}=e;if(a&&(nt.value.tenantOrderHolder={...a,certType:a.certType||R.CERT}),Array(n)&&n[0]){const e=n[0]||{};if(nt.value.activePlanCode=e.planCode,e.tenantOrderProductListtenantOrderProductList&&e.tenantOrderProductList[0]&&e.tenantOrderProductList[0].tenantOrderRiskList){var t;const a=null===(t=e.tenantOrderProductList[0].tenantOrderRiskList)||void 0===t?void 0:t.find((e=>"1"===String(e.riskType)));a&&(nt.value.paymentFrequency=null!=a&&a.paymentFrequency?String(null==a?void 0:a.paymentFrequency):X.SINGLE)}}}})),N((()=>{Je.value=!0,st(),setTimeout((async()=>{We.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),D((()=>{E.remove(K)})),(e,t)=>{var a,r,x,I,k,C,O,w,L,T;const S=U;return o(),l(d,null,[u(Je)?(o(),l("div",Ae,xe)):(o(),l("div",{key:1,"data-skeleton-root":"SHORT","theme-vars":u(A),class:"page-internet-product-detail"},[y("div",ke,[null!==(a=u(Fe))&&void 0!==a&&null!==(r=a.BASIC_INFO)&&void 0!==r&&r.banner.length?(o(),p(le,{key:0,"data-skeleton-type":"img",url:null===(x=u(Fe))||void 0===x?void 0:x.BASIC_INFO.banner[0]},null,8,["url"])):h("",!0),null!==(I=u(Fe))&&void 0!==I&&null!==(k=I.BASIC_INFO)&&void 0!==k&&null!==(C=k.bannerMove)&&void 0!==C&&C.length?(o(),p(le,{key:1,url:null===(O=u(Fe))||void 0===O||null===(w=O.BASIC_INFO)||void 0===w||null===(L=w.bannerMove)||void 0===L?void 0:L[0],onClick:mt},null,8,["url"])):h("",!0),y("div",{ref_key:"observeRef",ref:Ne},null,512)]),null!==(T=u(Fe))&&void 0!==T&&T.GUARANTEE?(o(),p(se,{key:0,"show-service-config":"","data-source":u(Fe),"plan-list":u(Ke)},null,8,["data-source","plan-list"])):h("",!0),i(de,{ref_key:"detailScrollRef",ref:Re,"order-detail":u(nt),"data-source":u(Fe)},{form:s((()=>[y("div",Ce,[Oe,i(u(ge),{ref_key:"holderFormRef",ref:Xe,title:"本人信息（投保人）",model:u(tt).holder.formData,schema:u(tt).holder.schema,config:u(tt).holder.config},null,8,["model","schema","config"]),(o(!0),l(d,null,c(u(tt).insuredList,((e,t)=>(o(),p(u(ge),{ref_for:!0,ref_key:"insuredFormRef",ref:et,key:t,title:"为谁投保（被保人）",model:u(tt).insuredList[t].formData,schema:e.schema,config:e.config},null,8,["model","schema","config"])))),128))]),i(u(f),{"form-info":u(rt),"risk-info":u($e),"tenant-product-detail":u(Fe).PREMIUM,"plan-list":u(Ke),"premium-info":{premium:u(ft),premiumLoadingText:u(vt)},onUpdateActivePlan:pt},null,8,["form-info","risk-info","tenant-product-detail","plan-list","premium-info"]),u(Ye).length>0?(o(),p(be,{key:0,"package-product-list":u(Ye)},null,8,["package-product-list"])):h("",!0)])),_:1},8,["order-detail","data-source"]),i(S,null,{default:s((()=>{var e,t,a;return[null!==(e=u(Fe).SIGNATURE)&&void 0!==e&&e.inscribedContent?(o(),p(u(g),{key:0,"inscribed-content":null===(t=u(Fe))||void 0===t||null===(a=t.SIGNATURE)||void 0===a?void 0:a.inscribedContent},null,8,["inscribed-content"])):h("",!0)]})),_:1}),i(S,null,{default:s((()=>{var e;return[null!==(e=u(ht))&&void 0!==e&&e.length?(o(),p(u(b),{key:0,"attachement-list":u(ht),"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>At(e))},null,8,["attachement-list"])):h("",!0)]})),_:1}),u(De)?(o(),p(ce,{key:1,"is-share":u(Fe).PRODUCT_LIST.showWXShare,premium:u(ft),"share-info":u(at),"loading-text":u(vt),"plan-code":u(rt).planCode,"payment-frequency":u(rt).paymentFrequency,"tenant-product-detail":u(Fe),onClick:kt},{default:s((()=>[m("立即投保")])),_:1},8,["is-share","premium","share-info","loading-text","plan-code","payment-frequency","tenant-product-detail"])):h("",!0)],8,Ie)),u(qe)?(o(),p(ue,{key:2,"product-detail":u(Fe)},null,8,["product-detail"])):h("",!0),we,i(u(v),{show:u(Be),"onUpdate:show":t[1]||(t[1]=e=>F(Be)?Be.value=e:null),"content-list":u(lt),"active-index":0,onOnConfirmHealth:Ct,onOnCloseHealthByMask:wt},null,8,["show","content-list"]),u(Ve)?(o(),p(u(n),{key:3,show:u(Ve),"onUpdate:show":t[2]||(t[2]=e=>F(Ve)?Ve.value=e:null),"content-list":u(Ge)?u(ht):u(bt),"is-only-view":u(Ge),"active-index":u(Ue),text:u(Ge)?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":u(Ge)?0:u(yt),onSubmit:Ot,onOnCloseFilePreviewByMask:wt},null,8,["show","content-list","is-only-view","active-index","text","force-read-cound"])):h("",!0)],64)}}}))}}}))}();

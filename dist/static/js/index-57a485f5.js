import{g as P,a9 as O,r as B,j as r,n as F,z as t,J as p,A as D,d as L,p as m,m as h,ab as E,t as T,a4 as R,a5 as Y,C as I,D as j,T as w,E as b,y as G,_ as V,h as H,k as x,G as $,F as q}from"./vendor-9d7eb2ed.js";import{_ as U,b as A,j as z,p as J}from"./index-75ec5a1b.js";import{d as W,g as K}from"./order-8da7971f.js";import{O as Q,b as N}from"./order-e21d3bb8.js";const M=e=>(R("data-v-55ae7ad6"),e=e(),Y(),e),X={class:"com-order-item"},Z={class:"header"},ee={class:"product-name"},te={class:"company-name"},ae={class:"status"},se={class:"info"},oe={class:"info-item"},de=M(()=>t("div",{class:"label"},"\u6295\u4FDD\u4EBA",-1)),ne={class:"desc"},ue={class:"info-item"},le=M(()=>t("div",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),ie={class:"desc"},ce={class:"footer"},re={class:"fee"},_e=I(" \u4FDD\u8D39\uFF1A"),ve={class:"money"},pe={key:0,class:"buttons"},me=I("\u5220\u9664"),he=I("\u53BB\u5904\u7406"),fe={key:1,class:"buttons"},ge=I("\u53BB\u652F\u4ED8"),ye={key:2,class:"buttons"},Ce=I("\u5220\u9664"),De=P({props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup(e,{emit:f}){const s=e,_=O(),g=()=>{j.confirm({title:"",message:"\u786E\u8BA4\u8981\u5220\u9664\u8BE5\u8BA2\u5355\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{W(s.detail.id,s.detail.orderStatus).then(n=>{const{code:u,data:a}=n;u==="10000"&&(w.success("\u5220\u9664\u6210\u529F"),f("afterDelete"))})})},i=()=>{const{goodsCode:n,orderNo:u,id:a,saleUserId:y,templateId:C,tenantId:l,insurerCode:d,productCategory:o,agencyId:c}=s.detail;_.push({path:A.payInfo,query:{productCode:n,orderNo:u,orderId:a,saleUserId:y,templateId:C,tenantId:l,insurerCode:d,productCategory:o,agencyCode:c}})},k=()=>{const{goodsCode:n,orderNo:u,id:a,saleUserId:y,templateId:C,tenantId:l,insurerCode:d,productCategory:o,agencyId:c}=s.detail;_.push({path:A[s.detail.pageCode],query:{productCode:n,orderNo:u,orderId:a,agentCode:y,templateId:C,tenantId:l,insurerCode:d,productCategory:o,agencyCode:c,isFromOrderList:"1"}})};return(n,u)=>{const a=B("van-button");return r(),F("div",X,[t("div",Z,[t("div",ee,p(e.detail.goodsName),1),t("div",te,p(e.detail.abbreviation),1),t("div",ae,p(D(Q)[e.detail.orderStatus]),1)]),t("div",se,[t("div",oe,[de,t("div",ne,p(e.detail.policyHolder),1)]),t("div",ue,[le,t("div",ie,p(D(L)(e.detail.orderStartDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),t("div",ce,[t("div",re,[_e,t("span",ve,"\uFFE5"+p(e.detail.prem),1)]),e.detail.orderTopStatus===D(N).PENDING?(r(),F("div",pe,[m(a,{class:"button",onClick:E(g,["stop"])},{default:h(()=>[me]),_:1},8,["onClick"]),m(a,{class:"button primary",onClick:E(k,["stop"])},{default:h(()=>[he]),_:1},8,["onClick"])])):T("",!0),e.detail.orderTopStatus===D(N).PAYING?(r(),F("div",fe,[m(a,{class:"button primary",onClick:E(i,["stop"])},{default:h(()=>[ge]),_:1},8,["onClick"])])):T("",!0),e.detail.orderTopStatus===D(N).TIMEOUT?(r(),F("div",ye,[m(a,{class:"button",onClick:E(g,["stop"])},{default:h(()=>[Ce]),_:1},8,["onClick"])])):T("",!0)])])}}});var be=U(De,[["__scopeId","data-v-55ae7ad6"]]);const Fe={class:"page-order"},Ie=P({setup(e){O();const f=b(0),s=b(1),_=b(!1),g=b(!1),i=b([]),k=[{title:"\u5168\u90E8",status:""},{title:"\u5F85\u5904\u7406",status:"-1"},{title:"\u5F85\u652F\u4ED8",status:"0"},{title:"\u5DF2\u5B8C\u6210",status:"1"},{title:"\u5DF2\u5931\u6548",status:"2"}],n=G(()=>k[f.value].status),u=l=>{const{orderNo:d,saleUserId:o,tenantId:c,abbreviation:v,productCategory:S}=l;J("orderDetail",{orderNo:d,agentCode:o,tenantId:c,abbreviation:v,productCategory:S})},a=()=>{_.value=!0,K({condition:{orderTopStatus:n.value},pageSize:10,pageNum:s.value}).then(l=>{_.value=!1;const{code:d,data:o}=l;d==="10000"&&(s.value===1?i.value=o.datas:i.value=[...i.value,...o.datas]),g.value=i.value.length>=o.total})},y=()=>{s.value+=1,a(),console.log("\u{1F680} ~ handleLoad ~ pageNum.value",s.value)},C=()=>{s.value=1,a()};return V(n,()=>{s.value=1,a()}),H(()=>{a()}),(l,d)=>{const o=B("van-list"),c=B("ProPageWrap");return r(),x(c,{"main-class":"page-order-list"},{default:h(()=>[t("div",Fe,[m(z,{active:f.value,"onUpdate:active":d[0]||(d[0]=v=>f.value=v),list:k,"small-gap":"",class:"tab"},null,8,["active"]),m(o,{class:"body",loading:_.value,finished:g.value,onLoad:y},{default:h(()=>[(r(!0),F(q,null,$(i.value,(v,S)=>(r(),x(be,{key:S,detail:v,onClick:ke=>u(v),onAfterDelete:C},null,8,["detail","onClick"]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var Be=U(Ie,[["__scopeId","data-v-52022118"]]);export{Be as default};

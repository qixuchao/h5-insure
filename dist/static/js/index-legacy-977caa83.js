!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-date-select .input[data-v-603f26bc]{padding:.4rem;height:1.33333rem;line-height:1.33333rem;font-size:.4rem;color:#616161;display:flex;align-items:center;border-bottom:1px solid #f2f2f2}.com-date-select .input .label[data-v-603f26bc]{flex:0 0 2.66667rem}.com-date-select .input .date[data-v-603f26bc]{flex:1;text-align:right}.com-text-voice[data-v-722eb481]{padding:.4rem}.com-text-voice .title[data-v-722eb481]{height:.56rem;line-height:.56rem;font-size:.4rem;color:#616161;display:flex;justify-content:space-between;align-items:center}.com-text-voice .title .voice-btn[data-v-722eb481]{width:1.52rem;height:.53333rem;line-height:.53333rem;font-size:.37333rem;background:#f2d6b7;border-radius:.26667rem;text-align:center;color:#7c3c10;display:flex;align-items:center;justify-content:center}.com-text-voice .title .voice-btn.in-active[data-v-722eb481]{opacity:.5}.com-text-voice .title .voice-btn .mic-icon[data-v-722eb481]{font-size:.32rem;margin-right:.08rem}.com-text-voice .body[data-v-722eb481]{margin-top:.42667rem}.com-text-voice .body[data-v-722eb481] .van-field__word-limit{font-size:.4rem;color:#d6d6d6;padding-bottom:.26667rem}.com-text-voice .body .textarea-wrapper[data-v-722eb481]{position:relative}.com-text-voice .body .textarea-wrapper .textarea[data-v-722eb481]{width:100%;height:3.09333rem;--van-field-placeholder-text-color: #b8b8b8;background:#f4f5f7;border-radius:.26667rem;padding:.37333rem .4rem;border:none;resize:none;font-size:.4rem}.com-text-voice .body .textarea-wrapper .count[data-v-722eb481]{position:absolute;bottom:.26667rem;right:.26667rem;font-size:.4rem;color:#d6d6d6;line-height:.56rem}@charset "UTF-8";.page-container[data-v-80779372]{display:flex;flex-direction:column}[data-v-80779372] .page-add-daily{flex:1;overflow-y:auto}[data-v-80779372] .page-add-daily .divider{width:100%;height:.26667rem;background:#f6f6f6}[data-v-80779372] .page-add-daily .detail .detail-title-list{display:flex;padding:.4rem;justify-content:space-between}[data-v-80779372] .page-add-daily .detail .detail-title-list .detail-title-item{width:calc(20% - .18667rem);height:2rem;border:.02667rem solid var(--daily-add-tag-border);border-radius:.26667rem;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#c98c88}[data-v-80779372] .page-add-daily .detail .detail-title-list .detail-title-item.active{background:var(--daily-add-tag-background-active);color:var(--van-primary-color)}[data-v-80779372] .page-add-daily .detail .detail-title-list .detail-title-item .image{width:.66667rem;height:.66667rem;transform:scale(2)}[data-v-80779372] .page-add-daily .detail .detail-title-list .detail-title-item .title{margin-top:.13333rem;font-size:.32rem;font-weight:600;line-height:.49333rem}.page-add-daily-footer[data-v-80779372]{position:fixed;bottom:0;width:100%;z-index:9}.page-add-daily-footer .footer[data-v-80779372]{height:2rem;display:flex;justify-content:space-between;padding:0 .4rem;align-items:center;background:#fff;box-shadow:0 -.02667rem .13333rem #f6f6f6}.page-add-daily-footer .footer .delete-btn[data-v-80779372]{width:1.06667rem;display:flex;flex-direction:column;align-items:center;color:#969696;font-size:.32rem;line-height:.4rem}.page-add-daily-footer .footer .delete-btn .delete-icon[data-v-80779372]{font-size:.37333rem;margin-bottom:.10667rem}.page-add-daily-footer .footer .btn[data-v-80779372]{flex:1;margin:0 .26667rem;height:1.17333rem;background:var(--van-button-primary-background-color);border-radius:.58667rem;font-size:.37333rem;font-weight:600;color:#fff}.page-add-daily-footer .footer .btn.ghost[data-v-80779372]{background:#fff;border:1px solid var(--van-primary-color);color:var(--van-primary-color)}\n',document.head.appendChild(e),System.register(["./vendor-legacy-f56233fa.js","./index-legacy-9604cbf9.js","./useCheckBack-legacy-8b231055.js","./daily-legacy-7ce16ea8.js","./plugin-vue_export-helper-legacy-57eac467.js","./index-legacy-a812a5a7.js","./record-legacy-3e0564fe.js","./play-legacy-eb74976c.js","./jsbridge-legacy-3f935966.js"],(function(e){"use strict";var a,t,i,l,d,o,n,c,r,s,u,m,v,p,g,f,y,b,h,V,x,k,w,D,Y,C,I,M,T,N,U,j,_,z,q,S,L,E,H,A,B,F;return{setters:[function(e){a=e.g,t=e.Q,i=e.C,l=e.d,d=e.ab,o=e.r,n=e.k,c=e.m,r=e.y,s=e.I,u=e.B,m=e.z,v=e.n,p=e.j,g=e.T,f=e.L,y=e.a4,b=e.a9,h=e.G,V=e.H,x=e.J,k=e.F,w=e.E,D=e.h,Y=e.D,C=e.a0,I=e.M,M=e.s,T=e.a5,N=e.a2,U=e.a3},function(e){j=e.b,_=e.u},function(e){z=e.u},function(e){q=e.q,S=e.Z,L=e.c,E=e.s,H=e.d},function(e){A=e._},function(e){B=e.Z},function(e){F=e.b},function(){},function(){}],execute:function(){const P={class:"com-date-select"},$={class:"label"},Z={class:"date"},R=a({props:{modelValue:{type:String,default:""},name:{type:String,default:"date"},label:{type:String,default:"选择日期"},placeholder:{type:String,default:"点击选择日期"},disabled:{type:Boolean,default:!1},isView:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:a}){const f=e,y=new Date("1990/01/01"),b=new Date("2050/12/31"),h=t(),V=i(!1),x=i(l(f.modelValue).format("YYYY-MM-DD")),k=i(new Date(f.modelValue.replace(/-/g,"/")));d((()=>{x.value=l(f.modelValue).format("YYYY-MM-DD"),k.value=new Date(f.modelValue.replace(/-/g,"/"))}));const w=()=>{f.disabled||(V.value=!0)},D=e=>{f.isView?q({userId:h.query.userId,workDay:l(e).format("YYYY-MM-DD HH:mm:ss")}).then((t=>{200===t.data.status&&t.data.data?(x.value=l(e).format("YYYY-MM-DD"),a("update:modelValue",l(e).format("YYYY-MM-DD")),V.value=!1):g.fail("所选日期未填写工作日志")})):(x.value=l(e).format("YYYY-MM-DD"),a("update:modelValue",l(e).format("YYYY-MM-DD")),V.value=!1)};return(a,t)=>{const i=o("van-icon"),d=o("van-datetime-picker"),g=o("van-popup");return n(),c("div",P,[r("div",{class:"input",onClick:w},[r("div",$,s(e.label),1),r("div",Z,[u(s(m(l)(k.value).format("YYYY-MM-DD")),1),v(i,{name:"arrow",color:"#ddd"})])]),v(g,{show:V.value,"onUpdate:show":t[2]||(t[2]=e=>V.value=e),position:"bottom"},{default:p((()=>[v(d,{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=e=>k.value=e),"min-date":m(y),"max-date":m(b),type:"date",title:"选择日期",onConfirm:D,onCancel:t[1]||(t[1]=e=>V.value=!1)},null,8,["modelValue","min-date","max-date"])])),_:1},8,["show"])])}}});var G=A(R,[["__scopeId","data-v-603f26bc"]]);const J={class:"title"},O={class:"label"},Q=u(" 语音 "),W={class:"body"},K={class:"textarea-wrapper"},X={class:"voice-list"},ee=a({props:{modelValue:{type:Object,default:()=>({content:"",voice:[]})},label:{type:String,default:""},name:{type:String,default:""},placeholder:{type:String,default:"请输入..."},max:{type:Number,default:200},disabled:{type:Boolean,default:!1},maxVoiceCount:{type:Number,default:5}},emits:["update:modelValue","voiceClick"],setup(e,{emit:a}){const t=e,l=i(!1);i(-1);const u=i(null),p=f(t.modelValue);d((()=>{p.content=t.modelValue.content,p.voice=t.modelValue.voice}));const g=()=>{p.voice.length<t.maxVoiceCount&&(l.value=!0)};y([()=>p],(([e])=>{a("update:modelValue",e)}));const C=e=>{const{file:a,duration:t}=e;p.voice.push({voiceUrl:a,voiceDuration:t})},I=()=>{setTimeout((()=>{if(u.value){const{top:e}=u.value.getBoundingClientRect(),a=document.querySelector(".page-container");a&&(a.scrollTop+=e)}}),200)};return b((()=>{F()})),(a,t)=>{const i=o("van-field");return n(),c(k,null,[r("div",{ref_key:"dom",ref:u,class:"com-text-voice"},[r("div",J,[r("div",O,s(e.label),1),h(r("div",{class:x(["voice-btn",{"in-active":m(p).voice.length>=e.maxVoiceCount}]),onClick:g},[v(j,{name:"mic",class:"mic-icon"}),Q],2),[[V,!e.disabled]])]),r("div",W,[r("div",K,[v(i,{modelValue:m(p).content,"onUpdate:modelValue":t[0]||(t[0]=e=>m(p).content=e),modelModifiers:{trim:!0},class:"textarea",placeholder:e.placeholder,maxlength:e.max,disabled:e.disabled,name:e.name,"input-align":"left",rows:"3",type:"textarea","show-word-limit":"",onFocus:I},null,8,["modelValue","placeholder","maxlength","disabled","name"])]),r("div",X,[(n(!0),c(k,null,w(m(p).voice,((a,t)=>(n(),D(S,{key:t,url:a.voiceUrl,duration:a.voiceDuration,"show-delete":!e.disabled,onDeleteClick:e=>((e,a)=>{Y.confirm({title:"确认删除此语音吗？"}).then((()=>{p.voice.splice(e,1),F()})).catch((e=>{}))})(t)},null,8,["url","duration","show-delete","onDeleteClick"])))),128))])])],512),v(B,{visible:l.value,"onUpdate:visible":t[1]||(t[1]=e=>l.value=e),onRecord:C},null,8,["visible"])],64)}}});var ae=A(ee,[["__scopeId","data-v-722eb481"]]);const te=e=>(N("data-v-80779372"),e=e(),U(),e),ie=te((()=>r("div",null,null,-1))),le=te((()=>r("div",{class:"divider"},null,-1))),de={class:"detail"},oe={class:"detail-title-list"},ne=["onClick"],ce=["src"],re={class:"title"},se={class:"page-add-daily-footer"},ue={class:"footer"},me=u(" 删除 "),ve=u("活动量数据");e("default",A(a({setup(e){const{getIconUrl:a}=_(),d=t(),b=C(),V=i(!1),N=i(!1),U=i(!0),S="1",A="2",B=f({workDay:d.query.date||l().format("YYYY-MM-DD"),data:{content:"",voice:[]}}),F=f([{tagName:"优点",image:a("daily.advantageImage"),activeImage:a("daily.advantageActiveImage"),active:!1,tagCode:"",data:{content:"",voice:[]}},{tagName:"不足",image:a("daily.insufficientImage"),activeImage:a("daily.insufficientActiveImage"),active:!1,tagCode:"",data:{content:"",voice:[]}},{tagName:"心得",image:a("daily.experienceImage"),activeImage:a("daily.experienceActiveImage"),active:!1,tagCode:"",data:{content:"",voice:[]}},{tagName:"规划",image:a("daily.planImage"),activeImage:a("daily.planActiveImage"),active:!1,tagCode:"",data:{content:"",voice:[]}},{tagName:"团队规划",image:a("daily.teamPlanImage"),activeImage:a("daily.teamPlanActiveImage"),active:!1,tagCode:"",data:{content:"",voice:[]}}]);z(B,F);let P="",$="";const Z=e=>{q(e).then((e=>{200===e.data.status&&e.data.data?(B.data.content="",B.data.voice=[],F.forEach((e=>{e.data.content="",e.data.voice=[],e.active=!1})),B.workDay=e.data.data.workDay,$=e.data.data.dailyId,B.data.voice=[],F[0].data.voice=[],F[1].data.voice=[],F[2].data.voice=[],F[3].data.voice=[],F[4].data.voice=[],e.data.data.detailList.forEach((e=>{switch(e.tagName){case"工作日志":e.inputType===S?B.data.content=e.content:e.inputType===A&&B.data.voice.push(e.contentVoice);break;case"优点":F[0].active=!0,e.inputType===S?F[0].data.content=e.content:e.inputType===A&&F[0].data.voice.push(e.contentVoice);break;case"不足":F[1].active=!0,e.inputType===S?F[1].data.content=e.content:e.inputType===A&&F[1].data.voice.push(e.contentVoice);break;case"心得":F[2].active=!0,e.inputType===S?F[2].data.content=e.content:e.inputType===A&&F[2].data.voice.push(e.contentVoice);break;case"规划":F[3].active=!0,e.inputType===S?F[3].data.content=e.content:e.inputType===A&&F[4].data.voice.push(e.contentVoice);break;case"团队规划":F[4].active=!0,e.inputType===S?F[4].data.content=e.content:e.inputType===A&&F[4].data.voice.push(e.contentVoice)}})),z(B,F)):N.value&&(g.fail("该日志被删除"),b.back())}))};I((()=>{L().then((e=>{F.forEach((a=>{const t=e.data.data.find((e=>e.itemName===a.tagName));t&&(a.tagCode=t.itemCode)}));const a=e.data.data.find((e=>"工作日志"===e.itemName));a&&(P=a.itemCode),z(B,F)})),d.query.isView&&(N.value=!0),d.query.id&&(V.value=!0,U.value=!1,Z({dailyId:d.query.id,userCode:d.query.userId}))}));const R=()=>{if(V.value)return void(V.value=!1);const e={dailyId:$,workDay:l(B.workDay).format("YYYY-MM-DD HH:mm:ss"),detailList:[]};B.data.content&&e.detailList.push({content:B.data.content,inputType:S,tagCode:P,tagName:"工作日志"}),B.data.voice.forEach((a=>{e.detailList.push({contentVoice:{voiceUrl:a.voiceUrl,voiceDuration:a.voiceDuration},inputType:A,tagCode:P,tagName:"工作日志"})})),F.forEach((a=>{a.active&&(a.data.content&&e.detailList.push({content:a.data.content,inputType:S,tagCode:a.tagCode,tagName:a.tagName}),a.data.voice&&a.data.voice.length>0&&a.data.voice.forEach((t=>{e.detailList.push({contentVoice:{voiceUrl:t.voiceUrl,voiceDuration:t.voiceDuration},inputType:A,tagCode:a.tagCode,tagName:a.tagName})})))})),e.detailList.some((e=>e.content||e.contentVoice))?E(e).then((e=>{200===e.data.status&&(g.success("保存成功"),z(),b.back())})):g.fail("请至少填写一项工作日志内容")},J=()=>{Y.confirm({title:"确认删除该日志?"}).then((()=>{H($).then((e=>{200===e.data.status&&(g.success("删除成功"),b.back())}))})).catch((e=>{}))};y((()=>B.workDay),((e,a)=>{l(e).isSame(l(a),"day")||Z({workDay:l(e).format("YYYY-MM-DD HH:mm:ss"),userCode:d.query.userId})}));const O=()=>{d.query.isPersonal?b.push(`/activityVolumeAnalysis?date=${B.workDay}`):b.push(`/activityVolumeAnalysis?date=${B.workDay}&isTeamChecked=Y&userId=${d.query.userId}&userName=${d.query.userName}`)};return(e,a)=>{const t=o("van-form"),i=o("ZaPageWrap"),l=o("van-button"),d=T("resize");return n(),c(k,null,[v(i,{"hide-header-placeholder":!0,"hide-footer-placeholder":!0,"main-class":"page-add-daily"},{default:p((()=>[ie,v(t,{"input-align":"right"},{default:p((()=>[v(G,{modelValue:m(B).workDay,"onUpdate:modelValue":a[0]||(a[0]=e=>m(B).workDay=e),label:"工作时间",disabled:!N.value&&V.value,"is-view":N.value},null,8,["modelValue","disabled","is-view"]),v(ae,{modelValue:m(B).data,"onUpdate:modelValue":a[1]||(a[1]=e=>m(B).data=e),name:"content",label:"工作日志",placeholder:"请输入详细工作日志",max:200,disabled:V.value},null,8,["modelValue","disabled"]),le,r("div",de,[r("div",oe,[(n(!0),c(k,null,w(m(F),(e=>(n(),c("div",{key:e.tagName,class:x(["detail-title-item",{active:e.active}]),onClick:a=>(e=>{V.value||(e.active=!e.active)})(e)},[r("img",{src:e.active?e.activeImage:e.image,class:"image"},null,8,ce),r("div",re,s(e.tagName),1)],10,ne)))),128))]),m(F)[0].active?(n(),D(ae,{key:0,modelValue:m(F)[0].data,"onUpdate:modelValue":a[2]||(a[2]=e=>m(F)[0].data=e),label:"优点",disabled:V.value},null,8,["modelValue","disabled"])):M("",!0),m(F)[1].active?(n(),D(ae,{key:1,modelValue:m(F)[1].data,"onUpdate:modelValue":a[3]||(a[3]=e=>m(F)[1].data=e),label:"不足",disabled:V.value},null,8,["modelValue","disabled"])):M("",!0),m(F)[2].active?(n(),D(ae,{key:2,modelValue:m(F)[2].data,"onUpdate:modelValue":a[4]||(a[4]=e=>m(F)[2].data=e),label:"心得",disabled:V.value},null,8,["modelValue","disabled"])):M("",!0),m(F)[3].active?(n(),D(ae,{key:3,modelValue:m(F)[3].data,"onUpdate:modelValue":a[5]||(a[5]=e=>m(F)[3].data=e),label:"规划",disabled:V.value},null,8,["modelValue","disabled"])):M("",!0),m(F)[4].active?(n(),D(ae,{key:4,modelValue:m(F)[4].data,"onUpdate:modelValue":a[6]||(a[6]=e=>m(F)[4].data=e),label:"团队规划",disabled:V.value},null,8,["modelValue","disabled"])):M("",!0)])])),_:1})])),_:1}),r("div",se,[h((n(),c("div",ue,[N.value||U.value?M("",!0):(n(),c("div",{key:0,class:"delete-btn",onClick:J},[v(j,{name:"delete",class:"delete-icon"}),me])),v(l,{round:"",class:"btn ghost",onClick:O},{default:p((()=>[ve])),_:1}),N.value?M("",!0):(n(),D(l,{key:1,round:"",class:"btn",onClick:R},{default:p((()=>[u(s(V.value?"编辑日志":"保存日志"),1)])),_:1}))])),[[d]])])],64)}}}),[["__scopeId","data-v-80779372"]]))}}}))}();

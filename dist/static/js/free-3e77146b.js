import{h as V,at as L,r as y,N as $,$ as W,m,s as I,B as s,C as o,t as p,Z as J,a5 as Z,a6 as z,P as M,j as G,k as O,p as x,F as Q,G as N,aa as K,au as X,n as U,H as Y,x as R}from"./vendor-902054a7.js";import{P as T}from"./index-35bad872.js";import{B as ee}from"./index-27bf1d4b.js";import{_ as te}from"./index-2b0aecd9.js";import{a as ue,s as oe}from"./phoneVerify-59614df5.js";import{_ as j}from"./index-3a9ce3bd.js";import{q as se,p as re,g as ne}from"./product-d07530f9.js";import{i as ae,t as le,n as ie}from"./trial-378270e6.js";import{f as de}from"./utils-fa410f53.js";import{u as ce}from"./theme-fdbb0f53.js";import"./check-detail-c292a89b.js";import"./infoCollection-0841e133.js";import"./relativeTime-cdc592a9.js";import"./useDicData-89e61451.js";import"./useStorage-9696cc10.js";import"./trial-40f2c4e1.js";var q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAMAAACBgxnEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA8UExURUdwTPpkAPpkAPpkAPlkAPlkAP9fAPpkAP9jAPljAPljAPlkAPdhAP9VAPhlAPpjAPpiAPpkAPlhAPpkAKrbDd8AAAATdFJOUwCe3XX6YBgzC+yKwSIDTrE+0C9Hm6hZAAAAf0lEQVR42u2MSw6AIAxEi6CCf+j976ommvG3omxMOqv2vczQmZa3tPRMptdZndVZndXZf892/JGOxN68qUEr24/zk84jSvne93fae3Qk3scrjZeWzDcVaNUQIvRDOGkYQOU+hYMmsBJ+cTt1C0gZP7mNTvhL+Zq5xlfOW4tb6le9ZDBDk4RvXwAAAABJRU5ErkJggg==";const pe=n=>(Z("data-v-dcd9ca58"),n=n(),z(),n),fe={class:"free-crad"},Ae={class:"container"},_e={class:"title"},Fe=["src"],me=pe(()=>s("span",null,"\u6700\u540E\u4E00\u6B65 \u586B\u5199\u4FE1\u606F",-1)),Ce=["src"],he=V({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}}},setup(n){const a=n;L(r=>({"06237d6f":a.colors[0],"06237d8e":a.colors[1]}));const C=y(),h=$({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u624B\u673A\u53F7"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u9A8C\u8BC1\u7801"}],2:[],3:[]},isFirst:!0}),i=()=>{var r;h.factorObj=(r=a.insureDetail)==null?void 0:r.productFactor,console.log(a.insureDetail,"detail====")},d=async(r,l)=>{const v=await(a.isFirst?ue:oe)(r),{code:c,data:t}=v;console.log(C.value.validateForm(),"slslslw=="),c==="10000"&&(l==null||l())};return W(()=>a.isFirst,()=>{a.isFirst||i()}),(r,l)=>(m(),I("div",fe,[s("div",Ae,[s("div",_e,[s("img",{src:o(q)},null,8,Fe),me,s("img",{src:o(q)},null,8,Ce)]),p(te,{ref_key:"formRef",ref:C,"send-sms-code":d,"form-info":n.detail,"factor-object":o(h).factorObj},null,8,["form-info","factor-object"]),J(r.$slots,"default",{},void 0,!0)])]))}});var De=j(he,[["__scopeId","data-v-dcd9ca58"]]),Be="/static/assets/logo.65e1895e.png";const ve=n=>(Z("data-v-eb74fb9e"),n=n(),z(),n),Ee={class:"pre-body"},ge={class:"header"},we=["src"],ye=ve(()=>s("div",{class:"company-name"},"\u7531\u65B0\u5965\u4FDD\u9669\u7ECF\u7EAA\u6709\u9650\u516C\u53F8\u63D0\u4F9B\u4FDD\u9669\u7ECF\u7EAA\u670D\u52A1\uFF0C\u534E\u6CF0\u8D22\u4EA7\u4FDD\u9669\u6709\u9650\u516C\u53F8\u627F\u4FDD",-1)),Ie={class:"content"},Pe=N(" \u4E3A\u4E86\u66F4\u597D\u5730\u4FDD\u62A4\u60A8\u7684\u4E2A\u4EBA\u4FE1\u606F\uFF0C\u8BF7\u5728\u4F7F\u7528\u524D\u70B9\u51FB\u9605\u8BFB\u3001\u5145\u5206\u7406\u89E3"),ke=N("\u76F8\u5173\u5185\u5BB9\uFF0C\u6211\u4EEC\u5BF9\u60A8\u4F7F\u7528\u8FC7\u7A0B\u4E2D\u53EF\u80FD\u51FA\u73B0\u7684\u4E2A\u4EBA\u4FE1\u606F\u6536\u96C6\u3001\u4F7F\u7528\u3001\u5171\u4EAB\u548C\u4FDD\u62A4\u7B49\u60C5\u51B5\u8FDB\u884C\u4E86\u8BE6\u7EC6\u8BF4\u660E\u3002 \u60A8\u5DF2\u8FDB\u5165\u6295\u4FDD\u6D41\u7A0B\uFF0C\u8BF7\u4ED4\u7EC6\u9605\u8BFB"),xe=N("\u3001\u6295\u4FDD\u987B\u77E5\u3001\u4FDD\u9669\u6761\u6B3E\u7B49\u4FE1\u606F\uFF0C\u4E3A\u7EF4\u62A4\u60A8\u7684\u5408\u6CD5\u6743\u76CA\uFF0C\u60A8\u7684\u64CD\u4F5C\u8F68\u8FF9\u5C06\u88AB\u8BB0\u5F55\u3002 "),be={class:"footer"},Oe=V({props:{productDetail:{type:Object,default:()=>{}}},setup(n){const a=n,C=M(),{tenantId:h="9991000001"}=C.query,i=y(!0),d=y(!1),r=$({insureConfig:{}}),l=y({title:"",link:""}),B=(c,t)=>{var e;d.value=!d.value,l.value.link=(e=r.insureConfig)==null?void 0:e[t].link,l.value.title=c.target.innerText},v=async()=>{const{code:c,data:t}=await se({insureCode:a.productDetail.insurerCode,tenantId:h});c==="10000"&&(r.insureConfig=t,console.log(t,"slslls")),i.value=!0};return G(()=>{i.value=!1,v()}),(c,t)=>{var P;const e=O("ProPopup"),b=O("ProFilePreview");return m(),I(Q,null,[p(e,{class:"pre-notice-wrap",show:i.value,closeable:!1,height:49},{default:x(()=>[s("div",Ee,[s("div",ge,[s("img",{src:o(Be)},null,8,we),ye]),s("div",Ie,[Pe,s("span",{onClick:t[0]||(t[0]=u=>B(u,"privacyAgreement"))},"\u300A\u7528\u6237\u9690\u79C1\u534F\u8BAE\u300B"),ke,s("span",{onClick:t[1]||(t[1]=u=>B(u,"notification"))},"\u300A\u5BA2\u6237\u544A\u77E5\u4E66\u300B"),xe]),s("div",be,[p(T,{shadow:!1,text:"\u6211\u77E5\u9053\u4E86",onClick:t[2]||(t[2]=u=>i.value=!1)})])])]),_:1},8,["show"]),p(e,{show:d.value,"onUpdate:show":t[3]||(t[3]=u=>d.value=u),class:"pre-notice-wrap",title:(P=l.value)==null?void 0:P.title,position:"bottom",style:{height:"600px"}},{default:x(()=>{var u;return[p(b,{content:(u=l.value)==null?void 0:u.link,type:"link"},null,8,["content"])]}),_:1},8,["show","title"])],64)}}});var Te=j(Oe,[["__scopeId","data-v-eb74fb9e"]]);const Ve={class:"page-free-product-detail"},$e={class:"product-desc"},Ne=["src"],je={key:0,class:"page-free-footer"},He=V({setup(n){L(u=>({ac0d9106:o(e).colors[1]}));const a=ce(),C=K(),h=M(),{productCode:i="BWYL2021",openId:d="oKugN52glZx_hhg7liu0WpWcmD5o",tenantId:r="9991000001",indirectCode:l="123",saleUserId:B="",saleChannelId:v=""}=h.query;let c="";const t=y(),e=$({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},banner:"",productDesc:[],newAuth:!0,insureDetail:{},loading:!0,showBtn:!1}),b=async()=>{e.loading=!0;const u=re({productCode:i,withInsureInfo:!0,tenantId:r}),f=ae({productCode:i}),D=ne({openId:d});await Promise.all([u,f,D]).then(([A,_,E])=>{var g,w,H;if(A.code==="10000"){e.detail=A.data,e.banner=(g=e.detail.tenantProductInsureVO)==null?void 0:g.banner[0];const{colorEnd:F,colorStart:k}=((w=e.detail.tenantProductInsureVO)==null?void 0:w.backgroundInsureVO)||{};e.colors=[k,F],e.productDesc=e.detail.tenantProductInsureVO.spec||[],document.title=e.detail.productFullName||""}_.code==="10000"&&(e.insureDetail=_.data,e.insureDetail.productFactor[2]=(H=e.insureDetail.productFactor)==null?void 0:H[2].map(F=>{var k,S;return F.code==="relationToHolder"&&F.isDisplay===1&&(F.title="\u88AB\u4FDD\u4EBA",e.order.tenantOrderInsuredList[0].relationToHolder=((S=(k=F.attributeValueList)==null?void 0:k[0])==null?void 0:S.code)||""),F})),E.code==="10000"&&(e.newAuth=!E.data),e.loading=!1})},P=async()=>{var D,A,_,E;const u=e.newAuth?le:ie;let f={loginType:"2",openId:d,thirdUserType:"XINAO_WECHAT",indirectCode:l};e.newAuth?(f.loginName=e.order.tenantOrderHolder.mobile,f.password=e.order.tenantOrderHolder.verificationCode):f=de({order:e.order,tenantId:r,detail:e.detail,insureDetail:e.insureDetail,iseeBizNo:c,saleUserId:B,saleChannelId:v,pageCode:"infoCollection",buttonCode:"EVENT_FREE_multiIssuePolicy"});try{const{code:g,data:w}=await u(f);g==="10000"&&(!e.newAuth&&((A=(D=w.pageAction)==null?void 0:D.data)==null?void 0:A.orderNo)&&C.push(`/baseInsurance/orderDetail?from=free&tenantId=${r}&orderNo=${(E=(_=w.pageAction)==null?void 0:_.data)==null?void 0:E.orderNo}&productCode=${i}`),e.newAuth=!1)}catch{console.log("e")}};return G(()=>{b(),setTimeout(async()=>{c=window.getIseeBiz&&await window.getIseeBiz()},1500)}),X(t,([{isIntersecting:u}],f)=>{e.showBtn=!u}),(u,f)=>{const D=O("van-config-provider");return m(),U(D,{"theme-vars":o(a)},{default:x(()=>[s("div",Ve,[p(ee,{url:o(e).banner},null,8,["url"]),p(De,{"is-first":o(e).newAuth,"insure-detail":o(e).insureDetail,detail:o(e).order,colors:o(e).colors},{default:x(()=>[p(T,{ref_key:"root",ref:t,text:o(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C",onClick:P},null,8,["text"])]),_:1},8,["is-first","insure-detail","detail","colors"]),s("div",$e,[(m(!0),I(Q,null,Y(o(e).productDesc,(A,_)=>(m(),I("img",{key:_,src:A},null,8,Ne))),128))]),o(e).showBtn?(m(),I("footer",je,[p(T,{text:o(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C"},null,8,["text"])])):R("",!0)]),o(e).loading?R("",!0):(m(),U(Te,{key:0,"product-detail":o(e).detail},null,8,["product-detail"]))]),_:1},8,["theme-vars"])}}});var tt=j(He,[["__scopeId","data-v-1329ccdb"]]);export{tt as default};

import{ax as e,aD as i,bV as a,aE as o,d as r,r as s,c1 as t,bZ as n,R as d,c2 as l,a1 as c,c3 as u,bw as f,i as g,$ as h,bx as p,c4 as v,bu as x,aM as b}from"./index-a9be315e.js";const[m,T,k]=e("list");const w=b(r({name:m,props:{error:Boolean,offset:i(300),loading:Boolean,finished:Boolean,errorText:String,direction:a("down"),loadingText:String,finishedText:String,immediateCheck:o},emits:["load","update:error","update:loading"],setup(e,{emit:i,slots:a}){const o=s(e.loading),r=s(),b=s(),m=t(),w=n(r),B=()=>{h((()=>{if(o.value||e.finished||e.error||!1===(null==m?void 0:m.value))return;const{offset:a,direction:s}=e,t=p(w);if(!t.height||v(r))return;let n=!1;const d=p(b);n="up"===s?t.top-d.top<=a:d.bottom-t.bottom<=a,n&&(o.value=!0,i("update:loading",!0),i("load"))}))},C=()=>{if(e.finished){const i=a.finished?a.finished():e.finishedText;if(i)return g("div",{class:T("finished-text")},[i])}},S=()=>{i("update:error",!1),B()},j=()=>{if(e.error){const i=a.error?a.error():e.errorText;if(i)return g("div",{role:"button",class:T("error-text"),tabindex:0,onClick:S},[i])}},y=()=>{if(o.value&&!e.finished)return g("div",{class:T("loading")},[a.loading?a.loading():g(x,{class:T("loading-icon")},{default:()=>[e.loadingText||k("loading")]})])};return d((()=>[e.loading,e.finished,e.error]),B),m&&d(m,(e=>{e&&B()})),l((()=>{o.value=e.loading})),c((()=>{e.immediateCheck&&B()})),u({check:B}),f("scroll",B,{target:w,passive:!0}),()=>{var i;const s=null==(i=a.default)?void 0:i.call(a),t=g("div",{ref:b,class:T("placeholder")},null);return g("div",{ref:r,role:"feed",class:T(),"aria-busy":o.value},["down"===e.direction?s:t,y(),C(),j(),"up"===e.direction?s:t])}}}));export{w as L};

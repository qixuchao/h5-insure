import{_ as e,d as a,h as t,o as l,c as s,a as o,e as n,b as i,w as d,F as r,q as c,m as u,u as v,aE as p,aF as m,cT as f,i as g,j as h,k as y,z as b,O as _,p as j,dA as k,f as w,a9 as C,T as N}from"./index-e55a5aab.js";import{L as S}from"./index-49ff601d.js";import{S as I}from"./index-0e382750.js";import{I as q}from"./infoItem-2e5eaf8e.js";import{O as x}from"./OperateBtn-fd07267c.js";import{t as D}from"./format-31cde443.js";import{q as T}from"./order-f63f518f.js";import"./constants-4b08cf92.js";const O={class:"com-order-item"},L={class:"header"},U={class:"product-name"},V={class:"status"},z={class:"info"},A={class:"content-list"},E={class:"info-bottom"},F=(e=>(p("data-v-51f0c34e"),e=e(),m(),e))((()=>o("div",{style:{width:"25%"}},[o("img",{src:"/static/png/tree-0f48942e.png",alt:"",style:{width:"80%"}})],-1))),B={class:"footer"};var R=e(a({__name:"item",props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup:(e,{emit:a})=>(t(),(a,t)=>{var p;return l(),s("div",O,[o("div",L,[o("div",U,n(e.detail.productName),1),o("div",V,n(e.detail.orderStatusDesc),1)]),o("div",z,[i(q,{label:"订单号",content:e.detail.orderNo,line:"","is-copy":""},null,8,["content"]),i(q,{label:"投/保单号",line:""},{content:d((()=>[o("div",A,[(l(!0),s(r,null,c(e.detail.policyNo||e.detail.applicationNo||[""],(e=>(l(),u(q,{key:e,"is-copy":"",content:e},null,8,["content"])))),128))])])),_:1}),o("div",E,[o("div",null,[i(q,{label:"投保人",content:e.detail.holderName,line:""},null,8,["content"]),i(q,{label:"被保人",content:null==(p=e.detail.insuredName)?void 0:p[0],line:""},null,8,["content"]),i(q,{label:"创建时间",content:e.detail.orderStartDate,line:""},null,8,["content"]),i(q,{label:"保费",content:v(D)(e.detail.premium),line:""},null,8,["content"])]),F])]),o("div",B,[i(x,{detail:e.detail},null,8,["detail"])])])})}),[["__scopeId","data-v-51f0c34e"]]);const G={id:"page-order",class:"page-order"};var H=e(a({__name:"index",setup(e){f(),t();const a=g(),{type:n,tenantId:p,agentCode:m}=a.query,q=h({"-1":1,0:2,1:3,2:4}[n]||0),x=h(1),D=h(!1),O=h(!1),L=h(!1),U=h([]),V=h(""),z=[{title:"全部",status:""},{title:"待处理",status:"-1"},{title:"待支付",status:"0"},{title:"已完成",status:"3"},{title:"已失效",status:"2"}],A=y((()=>(U.value=[],z[q.value].status))),E=()=>{N.loading({message:"加载中...",forbidClick:!0}),D.value=!0,T({condition:{orderTopStatus:A.value,tenantId:p,agentCode:m,keyword:V.value},pageSize:10,pageNum:x.value}).then((e=>{const{code:a,data:t}=e;"10000"===a&&t&&(D.value=!1,O.value=!1,1===x.value?U.value=t.datas||[]:U.value=U.value.concat(t.datas||[]),t.datas.length<10&&(L.value=!0))})).then((()=>{N.clear()}))},F=()=>{x.value+=1,E()},B=()=>{x.value=1,E()};b(A,(()=>{x.value=1,E()}));const H=h(),J=h({}),K=h(!1);return b((()=>J.value.scrollTop),(e=>{K.value=!(e<=0)})),_((()=>{var e,a;null==(a=null==(e=document.querySelector("#page-order").querySelector(".list-wrap"))?void 0:e.addEventListener)||a.call(e,"scroll",(()=>{J.value=H.value.scrollTop})),E()})),(e,a)=>{const t=I,n=S;return l(),s("div",G,[i(t,{modelValue:v(V),"onUpdate:modelValue":a[0]||(a[0]=e=>j(V)?V.value=e:null),placeholder:"请输入订单号/投保单号/投保人姓名",shape:"round",class:"search","clear-trigger":"always","show-action":!!v(V),clearable:"",onCancel:B,onSearch:B},null,8,["modelValue","show-action"]),i(k,{active:v(q),"onUpdate:active":a[1]||(a[1]=e=>j(q)?q.value=e:null),list:z,class:"tab","title-active-color":"#c41e21"},null,8,["active"]),o("div",{ref_key:"refreshRef",ref:H,class:"list-wrap"},[v(U).length?(l(),u(n,{key:0,loading:v(D),"onUpdate:loading":a[2]||(a[2]=e=>j(D)?D.value=e:null),class:"body",finished:v(L),onLoad:F},{default:d((()=>[(l(!0),s(r,null,c(v(U),((e,a)=>(l(),u(R,{key:a,detail:e,onClick:a=>(e=>{const{orderNo:a,insurerCode:t}=e;C("orderDetail",{orderNo:a,agentCode:m,tenantId:p,insurerCode:t})})(e),onAfterDelete:B},null,8,["detail","onClick"])))),128))])),_:1},8,["loading","finished"])):w("",!0)],512)])}}}),[["__scopeId","data-v-3b413f31"]]);export{H as default};

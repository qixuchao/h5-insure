import{_ as a,d as e,i as l,h as s,j as d,k as o,ag as n,l as t,o as r,c,a as i,b as u,e as m,u as p,p as v,w as h,f as y,v as f,c$ as b,aW as k,y as w,d0 as g,T as V,cY as I,bL as q,cA as x,cB as B,aH as C,b0 as N,b1 as T,d1 as _,d2 as U}from"./index-b79a8342.js";import{g as j}from"./trial-597560d2.js";const A={class:"page-pay-auth-wrap"},W={class:"header"},z={class:"content"},L={class:"bank-card"},R={class:"card-content"},E={class:"main"},H={class:"bank-name"},K={class:"bank-no"},O={class:"bank-card-type"},P=(a=>(N("data-v-350a1f76"),a=a(),T(),a))((()=>i("p",{class:"desc"},"实时单笔限额5W 实时单日限额5W",-1))),Y={class:"footer-button"},$=e({name:"payAuth"});var D=a(e({...$,setup(a){const e=l(),N=s(),{orderNo:T,tenantId:$}=e.query,D=d(),F=d(),G=d({}),J=o((()=>F.value.holder.certType===n.CERT?"身份证号":"证件号")),M=(a,l)=>{b(F.value).then((({code:a,data:s})=>{"10000"===a?null==l||l():k.confirm({confirmButtonText:"银行卡修改",message:"当前暂不支持该银行，建议更换银行卡"}).then((()=>{N.push({path:w.updateBankInfo,query:e.query})}))}))},Q=()=>{D.value.validate().then((a=>{g(F.value).then((({code:a,data:e})=>{"10000"===a&&(N.back(),V("成功"))}))})).catch((a=>{console.log("e",a)}))},S=d(),X=async()=>{await j({orderNo:T,tenantId:$}).then((({code:a,data:e})=>{"10000"===a&&(F.value=e,G.value=e.tenantOrderPayInfoList.find((a=>1===a.payInfoType)),(async a=>{var e;const l=await _(U("BANK"))||[];S.value=null==(e=l.find((e=>e.code===a)))?void 0:e.name})(G.value.payBank))}))};t((()=>{X()}));const Z=d();return t((()=>{setTimeout((async()=>{Z.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(a,e)=>{const l=I,s=q,d=x,o=B,n=C;return r(),c("div",A,[i("div",W,[u(l,{type:"warning",content:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。"})]),i("div",z,[i("div",L,[i("div",R,[i("div",E,[i("span",H,m(p(S)),1),i("span",K,m(p(G).bankCardNo),1)]),i("p",O,m(p(G).bankCardType||"储蓄卡"),1),P])]),p(F)?(r(),v(o,{key:0,ref_key:"formRef",ref:D,model:p(F).holder},{default:h((()=>[u(s,{modelValue:p(F).holder.name,"onUpdate:modelValue":e[0]||(e[0]=a=>p(F).holder.name=a),label:"姓名",name:"name",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(s,{modelValue:p(F).holder.certNo,"onUpdate:modelValue":e[1]||(e[1]=a=>p(F).holder.certNo=a),label:p(J),name:"certNo",maxlength:"18","is-view":"",required:""},null,8,["modelValue","label"]),u(s,{modelValue:p(F).holder.mobile,"onUpdate:modelValue":e[2]||(e[2]=a=>p(F).holder.mobile=a),label:"银行预留手机",name:"mobile",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(d,{modelValue:p(F).holder.verifyCode,"onUpdate:modelValue":e[3]||(e[3]=a=>p(F).holder.verifyCode=a),label:"验证码",maxlength:"6",name:"verifyCode","related-name":"mobile","send-s-m-s-code":M,required:""},null,8,["modelValue"])])),_:1},8,["model"])):y("",!0)]),i("div",Y,[u(n,{type:"primary",onClick:Q},{default:h((()=>[f("提交")])),_:1})])])}}}),[["__scopeId","data-v-350a1f76"]]);export{D as default};

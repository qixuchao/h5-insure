var $e=Object.defineProperty,qe=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var Oe=(n,a,k)=>a in n?$e(n,a,{enumerable:!0,configurable:!0,writable:!0,value:k}):n[a]=k,K=(n,a)=>{for(var k in a||(a={}))Ne.call(a,k)&&Oe(n,k,a[k]);if(Ee)for(var k of Ee(a))Se.call(a,k)&&Oe(n,k,a[k]);return n},H=(n,a)=>qe(n,Me(a));import{g as N,L as S,X as w,r as O,h as g,m as B,n as C,k as h,y as x,z as t,a1 as Be,a2 as Te,a5 as z,C as $,a4 as G,x as M,d as W,j as A,s as P,I as U,a6 as Ye,o as we,F as Q,E as J,ag as je,ah as Ge,B as Ue,D as Ke}from"./vendor-b27da062.js";import{S as He,a as We,R as Xe,b as X,A as ze,c as Qe,L as Pe,d as Je}from"./trial-0ed0e51e.js";import{g as Ze}from"./index-acb6def2.js";import{l as xe}from"./useStorage-f548fe72.js";import{_ as Y}from"./index-8f9702f0.js";const et=n=>(Be("data-v-4b261f8d"),n=n(),Te(),n),tt={class:"com-occupational-wrapper"},it=et(()=>x("div",{class:"popup-title"},"\u9009\u62E9\u804C\u4E1A",-1)),ot={class:"popup-content"},at=N({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(n,{emit:a}){const k=n,R=S({show:k.show,options:[],currentValue:""}),I=()=>{a("close")},i=({value:v,selectedOptions:s})=>{const y=(s||[]).map(d=>d.value).join("/"),c=+s[s.length-1].name;a("update:modelValue",c),a("finish",y),I()},D=v=>{const s=v,y=c=>{c.forEach(d=>{const V=d;V.children.length?y(V.children):V.children=null})};return y(s),s},F=(v="")=>{var c;const s=`${(c=v==null?void 0:v.toLocaleUpperCase)==null?void 0:c.call(v)}_OCCUPATION`,y=xe.get("occupational")||{};if(y[s]){R.options=y[s];return}Ze({dictCodeList:[s]}).then(({code:d,data:V})=>{var p;if(d==="10000"){const o=D(((p=V==null?void 0:V[0])==null?void 0:p.dictItemList)||[]);R.options=o,y[s]=o,xe.set("occupational",y)}})};return w(()=>k,()=>{F(k.insuredCode)},{deep:!0,immediate:!0}),w(()=>k.modelValue,v=>{},{deep:!0,immediate:!0}),(v,s)=>{const y=O("van-cascader"),c=O("VanPopup");return g(),B("div",tt,[C(c,{show:t(R).show,"onUpdate:show":s[1]||(s[1]=d=>t(R).show=d),"show-footer":"",position:"bottom",closeable:"",onClose:I},{default:h(()=>[it,x("div",ot,[C(y,{modelValue:t(R).currentValue,"onUpdate:modelValue":s[0]||(s[0]=d=>t(R).currentValue=d),title:"\u8BF7\u9009\u62E9\u804C\u4E1A","show-header":!1,placeholder:"\u8BF7\u9009\u62E9",options:t(R).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:i},null,8,["modelValue","options"])])]),_:1},8,["show"])])}}});var nt=Y(at,[["__scopeId","data-v-4b261f8d"]]);const ut={class:"com-personal-info-wrapper"},lt={key:0,class:"placeholder"},rt={key:1},st=N({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(n,{expose:a}){const k=n,[R,I]=z(),[i,D]=z(),F=$(),v=G("source")||{},s=S({formInfo:k.formInfo,occupationalText:""}),y=o=>{s.occupationalText=o},c=()=>{D(!1)},d=()=>new Promise((o,e)=>{F==null||F.value.validate().then(()=>{o("")},()=>{e()})}),V=o=>{const e=o||[];for(let l=0;l<e.length;l++)for(let r=l+1;r<e.length;r++){const u=e[l].split("_"),f=e[r].split("_"),E=e[l];u[0]===f[0]?u>f&&(e[l]=e[r],e[r]=E):u[0]==="age"&&(e[l]=e[r],e[r]=E)}return e},p=M(()=>{const o=V(k==null?void 0:k.ageRange),e=(E="")=>{const L=+E.split("_")[1],j=E.split("_")[0];return[L,j]},l=e(o[0]),r=e(o[o.length-1]),u=W().subtract(l[0],l[1]==="age"?"year":"day").format("YYYY-MM-DD"),f=W().subtract(r[0],r[1]==="age"?"year":"day").format("YYYY-MM-DD");return console.log("ageRangeObj",new Date(f),new Date(u)),{minAge:new Date(f),maxAge:new Date(u)}});return a({validateForm:d,ageRangeObj:p.value}),(o,e)=>{const l=O("VanField"),r=O("ProRadioButton"),u=O("VanForm"),f=O("van-datetime-picker"),E=O("van-popup");return g(),B("div",ut,[C(u,{ref_key:"formRef",ref:F,"input-align":"right","error-message-align":"right"},{default:h(()=>[t(v).type==="proposal"&&(t(v).type==="add"||t(v).type==="repeatAdd")||t(v).type!=="proposal"&&(n.factorList.includes("APPLICANT.AGE")||n.factorList.includes("AGE")||n.factorList.includes("DAY")||n.factorList.includes("APPLICANT.DAY"))?(g(),A(l,{key:0,modelValue:t(s).formInfo.birthday,"onUpdate:modelValue":e[0]||(e[0]=L=>t(s).formInfo.birthday=L),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F",class:"isLink",readonly:"","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[1]||(e[1]=L=>t(I)(!0))},null,8,["modelValue"])):P("",!0),t(v).type==="proposal"&&(t(v).type==="add"||t(v).type==="repeatAdd")||t(v).type!=="proposal"&&(n.factorList.includes("APPLICANT.GENDER")||n.factorList.includes("GENDER"))?(g(),A(l,{key:1,modelValue:t(s).formInfo.gender,"onUpdate:modelValue":e[3]||(e[3]=L=>t(s).formInfo.gender=L),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},{input:h(()=>[C(r,{modelValue:t(s).formInfo.gender,"onUpdate:modelValue":e[2]||(e[2]=L=>t(s).formInfo.gender=L),options:t(He)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),n.factorList.includes("SOCIAL_INS")?(g(),A(l,{key:2,modelValue:t(s).formInfo.socialSecurity,"onUpdate:modelValue":e[5]||(e[5]=L=>t(s).formInfo.socialSecurity=L),name:"socialSecurity",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u793E\u4FDD"}]},{input:h(()=>[C(r,{modelValue:t(s).formInfo.socialSecurity,"onUpdate:modelValue":e[4]||(e[4]=L=>t(s).formInfo.socialSecurity=L),options:t(We)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):P("",!0),n.factorList.includes("OCCUPATION_CATEGORY")?(g(),A(l,{key:3,modelValue:t(s).formInfo.occupationalClass,"onUpdate:modelValue":e[6]||(e[6]=L=>t(s).formInfo.occupationalClass=L),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u804C\u4E1A\u7C7B\u578B"}],name:"occupationalClass",label:"\u804C\u4E1A\u7C7B\u578B","is-link":"",readonly:"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[7]||(e[7]=L=>t(D)(!0))},{input:h(()=>[t(s).occupationalText?(g(),B("div",rt,U(t(s).occupationalText),1)):(g(),B("span",lt,"\u8BF7\u9009\u62E9"))]),_:1},8,["modelValue"])):P("",!0)]),_:1},512),C(E,{show:t(R),"onUpdate:show":e[10]||(e[10]=L=>Ye(R)?R.value=L:null),position:"bottom"},{default:h(()=>[C(f,{type:"date","min-date":t(p).minAge,"max-date":t(p).maxAge,onConfirm:e[8]||(e[8]=L=>{t(s).formInfo.birthday=t(W)(L).format("YYYY-MM-DD"),t(I)(!1)}),onCancel:e[9]||(e[9]=L=>t(I)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"]),t(i)?(g(),A(nt,{key:0,modelValue:t(s).formInfo.occupationalClass,"onUpdate:modelValue":e[11]||(e[11]=L=>t(s).formInfo.occupationalClass=L),show:t(i),"insured-code":n.insuredCode,onFinish:y,onClose:c},null,8,["modelValue","show","insured-code"])):P("",!0)])}}});var Nt=Y(st,[["__scopeId","data-v-7b008a27"]]);const dt={class:"com-risk-card-wrapper part-card"},mt={class:"custom-field"},ct={class:"field-tip"},ft={class:"custom-field"},pt={class:"field-tip"},yt={class:"custom-field"},gt={class:"field-tip"},Vt={key:0},kt={key:9,class:"liab-desc"},Dt=N({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(n){const a=n,k=$({}),R=G("premium")||{};k.value=G("enumList")||{};const I=$({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),i=S({formInfo:a.formInfo}),D=o=>typeof o!="boolean"&&!o||Array.isArray(o)&&!o.length?!0:{}.toString.call(o)==="[object Object]"?Object.keys(o).length:!1,F=(o,e,l={})=>{let r=e;return Array.isArray(e)||(r=[`${r}`]),(o||[]).filter(u=>r.includes(`${u.value}`)||r.includes(u.value))},v=M(()=>{var o,e,l,r,u;return((o=a.originData)==null?void 0:o.riskType)===1?F(a.enums.RISK_INSURANCE_PERIOD,((e=a.originData.riskInsureLimitVO)==null?void 0:e.insurancePeriodValueList)||[]):((l=a.originData)==null?void 0:l.periodType)===2?F([{value:"year_1",name:"1\u5E74"}],["year_1"]):F((r=a.enums)==null?void 0:r.RISK_INSURANCE_PERIOD,((u=a.mainRiskData.riskInsureLimitVO)==null?void 0:u.insurancePeriodValueList)||[])}),s=M(()=>{var o,e,l,r,u,f,E,L;return((o=a.originData)==null?void 0:o.riskType)===1?F((e=a==null?void 0:a.enums)==null?void 0:e.RISK_PAYMENT_PERIOD,((l=a.originData.riskInsureLimitVO)==null?void 0:l.paymentPeriodValueList)||[]):((r=a.originData)==null?void 0:r.exemptFlag)===1?F(Xe,[`${(f=(u=a==null?void 0:a.originData)==null?void 0:u.riskInsureLimitVO)==null?void 0:f.paymentPeriodRule}`]):((E=a.originData)==null?void 0:E.periodType)===2?F([{value:"year_1",name:"1\u5E74\u4EA4"}],["year_1"]):F(a.enums.RISK_PAYMENT_PERIOD,((L=a.mainRiskData.riskInsureLimitVO)==null?void 0:L.paymentPeriodValueList)||[])}),y=M(()=>{var o,e,l,r,u;return((o=a.originData)==null?void 0:o.riskType)===1?F(X,((e=a.originData.riskInsureLimitVO)==null?void 0:e.paymentFrequencyList)||[]):((l=a.originData.riskInsureLimitVO)==null?void 0:l.paymentTypeRule)===1?F(X,((r=a.mainRiskData.riskInsureLimitVO)==null?void 0:r.paymentFrequencyList)||[]):F(X,((u=a.mainRiskData.riskInsureLimitVO)==null?void 0:u.paymentFrequencyList)||[])}),c=M(()=>{var l,r;let o=0,e=0;return(((r=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.paymentMethodLimitList)||[]).forEach((u,f)=>{f===0&&(o=u.minAmount,e=u.maxAmount),o>u.minAmount&&(o=u.minAmount),e<u.maxAmount&&(e=u.maxAmount)}),i.formInfo.amount=o,{min:o,max:e}}),d=M(()=>{var l,r;let o=0,e=0;return(((r=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.paymentMethodLimitList)||[]).forEach((u,f)=>{f===0&&(o=u.minPremium,e=u.maxPremium),o>u.minPremium&&(o=u.minPremium),e<u.maxPremium&&(e=u.maxPremium)}),i.formInfo.premium=o,{min:o,max:e}}),V=M(()=>{var l,r,u,f;const o=((r=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.minCopy)||1,e=(f=(u=a.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:f.maxCopy;return i.formInfo.copy=`${o||1}`,{min:o,max:e}}),p=(o,e,l)=>{var u,f;const r=((f=(u=a.originData)==null?void 0:u.riskCalcMethodInfoVO)==null?void 0:f.increaseDecreaseNum)||1;if(l==="sumInsured"){if(c.value.max&&+o>c.value.max)return`\u91D1\u989D\u6700\u5927${c.value.max}\u5143`;if(+o<c.value.min)return`\u91D1\u989D\u6700\u5C0F${c.value.min}\u5143`}else{if(d.value.max&&+o>d.value.max)return`\u91D1\u989D\u6700\u5927${d.value.max}\u5143`;if(+o<d.value.min)return`\u91D1\u989D\u6700\u5C0F${d.value.min}\u5143`}return+o%r===0?"":`\u91D1\u989D\u5FC5\u987B\u662F${r}\u7684\u500D\u6570`};return we(()=>{var e,l;const o={riskType:a.originData.riskType,riskId:a.originData.id,riskName:a.originData.riskName,riskCode:a.originData.riskCode,mainRiskCode:(e=a==null?void 0:a.mainRiskData)==null?void 0:e.riskCode,mainRiskId:(l=a==null?void 0:a.mainRiskData)==null?void 0:l.id,riskCategory:a.originData.riskCategory,liabilityVOList:(a.originData.riskLiabilityInfoVOList||[]).map(r=>H(K({},r),{liabilityAttributeCode:r.liabilityAttributeType,liabilityCode:r.liabilityCode,liabilityRateType:r.liabilityRateType}))};Object.assign(i==null?void 0:i.formInfo,o)}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.paymentFrequency},(o=0)=>{var e,l,r;[3].includes(((e=a.originData.riskCalcMethodInfoVO)==null?void 0:e.saleMethod)||0)&&(((r=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:r.paymentMethodLimitList)||[]).forEach(u=>{+u.paymentFrequency==+o&&Object.assign(i.formInfo,{amount:u.perCopyAmount,premium:u.perCopyPremium})}),+o==1&&i.formInfo.chargePeriod!=="single"&&(i.formInfo.chargePeriod="single")}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.copy},o=>{var e,l;((e=a.originData.riskCalcMethodInfoVO)==null?void 0:e.saleMethod)===4&&(i.formInfo.amount=+(o||1)*(((l=a.originData.riskCalcMethodInfoVO)==null?void 0:l.fixedAmount)||0))}),w(()=>{var o;return(o=i.formInfo)==null?void 0:o.chargePeriod},o=>{o==="single"&&+(i.formInfo.paymentFrequency||0)!=1&&(i.formInfo.paymentFrequency=1)}),w(()=>a==null?void 0:a.mainRiskInfo,o=>{var e,l,r,u,f,E;o&&a.originData.riskType===2&&(((l=(e=a.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:l.insurancePeriodRule)===1&&(o.coveragePeriod?I.value.coveragePeriod.disabled=!0:I.value.coveragePeriod.prevent=!0,i.formInfo.coveragePeriod=o.coveragePeriod||""),((u=(r=a.originData)==null?void 0:r.riskInsureLimitVO)==null?void 0:u.paymentPeriodRule)===1&&(o.chargePeriod?I.value.chargePeriod.disabled=!0:I.value.chargePeriod.prevent=!0,i.formInfo.chargePeriod=o.chargePeriod||""),((E=(f=a.originData)==null?void 0:f.riskInsureLimitVO)==null?void 0:E.paymentTypeRule)===1&&(o.paymentFrequency?I.value.paymentFrequency.disabled=!0:I.value.paymentFrequency.prevent=!0,i.formInfo.paymentFrequency=o.paymentFrequency||0))},{immediate:!0,deep:!0}),(o,e)=>{var j,Z,ee,te,ie,oe,ae,ne,ue,le,re,se,de,me,ce,fe,pe,ye,ge,Ve,ke,De,Ie,ve,Le,be,he,Fe,Ce,Re,Ae;const l=O("ProSvg"),r=O("ProTitle"),u=O("VanStepper"),f=O("VanField"),E=O("ProRadioButton"),L=O("ProExpand");return g(),B("div",dt,[C(r,{"risk-type":n.originData.riskType,title:n.originData.riskName},{default:h(()=>[n.removeRiskList.includes(n.originData.id)?(g(),B("div",{key:0,class:"delete-risk",onClick:e[0]||(e[0]=m=>n.removeRisk(n.originData.id))},[C(l,{name:"delete",color:"#0d6efe"})])):P("",!0)]),_:1},8,["risk-type","title"]),((j=n.originData.riskCalcMethodInfoVO)==null?void 0:j.saleMethod)===1&&n.originData.exemptFlag===2?(g(),A(f,{key:0,modelValue:t(i).formInfo.amount,"onUpdate:modelValue":e[2]||(e[2]=m=>t(i).formInfo.amount=m),label:"\u4FDD\u989D",name:"amount",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...m)=>p(...m,"sumInsured")}]},{input:h(()=>{var m,b;return[x("div",mt,[C(u,{modelValue:t(i).formInfo.amount,"onUpdate:modelValue":e[1]||(e[1]=_=>t(i).formInfo.amount=_),"input-width":"64px",min:t(c).min,step:((m=n.originData.riskCalcMethodInfoVO)==null?void 0:m.increaseDecreaseNum)||1,max:t(c).max},null,8,["modelValue","min","step","max"]),x("span",ct,U(`\u91D1\u989D\u6700\u4F4E${t(c).min}\u5143\uFF0C\u4E3A${((b=n.originData.riskCalcMethodInfoVO)==null?void 0:b.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((ee=(Z=n.originData)==null?void 0:Z.riskCalcMethodInfoVO)==null?void 0:ee.saleMethod)===2?(g(),A(f,{key:1,modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[4]||(e[4]=m=>t(i).formInfo.premium=m),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...m)=>p(...m,"premium")}]},{input:h(()=>{var m,b,_,T;return[x("div",ft,[C(u,{modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[3]||(e[3]=q=>t(i).formInfo.premium=q),step:((b=(m=n.originData)==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:b.increaseDecreaseNum)||1,min:t(d).min,"input-width":"64px",max:t(d).max},null,8,["modelValue","step","min","max"]),x("span",pt,U(`\u91D1\u989D\u6700\u4F4E${t(d).min}\u5143\uFF0C\u4E3A${((T=(_=n.originData)==null?void 0:_.riskCalcMethodInfoVO)==null?void 0:T.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):P("",!0),((ie=(te=n.originData)==null?void 0:te.riskCalcMethodInfoVO)==null?void 0:ie.saleMethod)===3||((ae=(oe=n.originData)==null?void 0:oe.riskCalcMethodInfoVO)==null?void 0:ae.saleMethod)===4&&(((ue=(ne=n.originData)==null?void 0:ne.riskCalcMethodInfoVO)==null?void 0:ue.minCopy)||((re=(le=n.originData)==null?void 0:le.riskCalcMethodInfoVO)==null?void 0:re.maxCopy))?(g(),A(f,{key:2,modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[6]||(e[6]=m=>t(i).formInfo.copy=m),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:h(()=>[x("div",yt,[C(u,{modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[5]||(e[5]=m=>t(i).formInfo.copy=m),step:1,min:t(V).min,max:t(V).max},null,8,["modelValue","min","max"]),x("span",gt,U(`${t(V).min}\u4EFD\u8D77\u8D2D\uFF0C\u6700\u591A\u8D2D\u4E70${t(V).max}\u4EFD`),1)])]),_:1},8,["modelValue"])):P("",!0),(![1].includes(((se=n.originData.riskCalcMethodInfoVO)==null?void 0:se.saleMethod)||0)||((de=n.originData)==null?void 0:de.exemptFlag)===1)&&(((me=n.originData.riskCalcMethodInfoVO)==null?void 0:me.fixedAmount)||((fe=t(R))==null?void 0:fe[(ce=n.originData)==null?void 0:ce.riskCode]))?(g(),A(f,{key:3,label:"\u4FDD\u989D"},{input:h(()=>{var m,b,_,T;return[x("div",null,U(((m=n.originData.riskCalcMethodInfoVO)==null?void 0:m.fixedAmount)||((T=(_=t(R))==null?void 0:_[(b=n.originData)==null?void 0:b.riskCode])==null?void 0:T.amount)),1)]}),_:1})):P("",!0),!D((ye=(pe=n.originData)==null?void 0:pe.riskInsureLimitVO)==null?void 0:ye.insurancePeriodValueList)||!D((Ve=(ge=n.originData)==null?void 0:ge.riskInsureLimitVO)==null?void 0:Ve.insurancePeriodRule)?(g(),A(f,{key:4,modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":e[8]||(e[8]=m=>t(i).formInfo.coveragePeriod=m),label:"\u4FDD\u969C\u671F\u95F4",name:"coveragePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4FDD\u969C\u671F\u95F4"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.coveragePeriod,"onUpdate:modelValue":e[7]||(e[7]=m=>t(i).formInfo.coveragePeriod=m),disabled:I.value.coveragePeriod.disabled,prevent:I.value.coveragePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4FDD\u969C\u671F\u95F4":"",options:t(v),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!D((De=(ke=n.originData)==null?void 0:ke.riskInsureLimitVO)==null?void 0:De.paymentPeriodValueList)||!D((ve=(Ie=n.originData)==null?void 0:Ie.riskInsureLimitVO)==null?void 0:ve.paymentPeriodRule)?(g(),A(f,{key:5,modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":e[10]||(e[10]=m=>t(i).formInfo.chargePeriod=m),label:"\u4EA4\u8D39\u671F\u95F4",name:"chargePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u671F\u95F4"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.chargePeriod,"onUpdate:modelValue":e[9]||(e[9]=m=>t(i).formInfo.chargePeriod=m),disabled:I.value.chargePeriod.disabled,prevent:I.value.chargePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u671F\u95F4":"",options:t(s),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),!D((Le=n.originData.riskInsureLimitVO)==null?void 0:Le.paymentFrequencyList)||!D((be=n.originData.riskInsureLimitVO)==null?void 0:be.paymentPeriodRule)?(g(),A(f,{key:6,modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[12]||(e[12]=m=>t(i).formInfo.paymentFrequency=m),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u65B9\u5F0F"}]},{input:h(()=>[C(E,{modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[11]||(e[11]=m=>t(i).formInfo.paymentFrequency=m),disabled:I.value.paymentFrequency.disabled,prevent:I.value.paymentFrequency.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u65B9\u5F0F":"",options:t(y)},null,8,["modelValue","disabled","prevent","options"])]),_:1},8,["modelValue"])):P("",!0),D((Fe=(he=n.originData)==null?void 0:he.riskInsureLimitVO)==null?void 0:Fe.annuityDrawValueList)?P("",!0):(g(),A(f,{key:7,modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[14]||(e[14]=m=>t(i).formInfo.annuityDrawDate=m),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65F6\u95F4"}]},{input:h(()=>{var m;return[C(E,{modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[13]||(e[13]=b=>t(i).formInfo.annuityDrawDate=b),options:F(t(ze),((m=n.originData.riskInsureLimitVO)==null?void 0:m.annuityDrawValueList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),D((Re=(Ce=n.originData)==null?void 0:Ce.riskInsureLimitVO)==null?void 0:Re.annuityDrawFrequencyList)?P("",!0):(g(),A(f,{key:8,modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[16]||(e[16]=m=>t(i).formInfo.annuityDrawType=m),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9886\u53D6\u65B9\u5F0F"}]},{input:h(()=>{var m;return[C(E,{modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[15]||(e[15]=b=>t(i).formInfo.annuityDrawType=b),options:F(t(Qe),((m=n.originData.riskInsureLimitVO)==null?void 0:m.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),(g(!0),B(Q,null,J(n.originData.riskLiabilityInfoVOList||[],(m,b)=>(g(),B("div",{key:b},[m.optionalFlag===1?(g(),A(f,{key:0,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":_=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=_,label:m.liabilityName,name:"liabilityAttributeValue",rules:[{required:m.liabilityAttributeValue,message:`\u8BF7\u9009\u62E9${m.liabilityName}`}]},{input:h(()=>{var _,T;return[x("div",null,[D(m.liabilityAttributeValueList)?(g(),B("span",Vt,"50\u4E07")):(g(),A(E,{key:1,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":q=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=q,options:F(t(Pe),(T=(_=n.originData.riskLiabilityInfoVOList)==null?void 0:_[b])==null?void 0:T.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(g(),A(f,{key:1,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":_=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=_,label:m.liabilityName,name:"liabilityAttributeValue"},{input:h(()=>{var _,T;return[x("div",null,[D(m.liabilityAttributeValueList)?(g(),A(E,{key:0,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":q=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=q,options:t(Je)},null,8,["modelValue","onUpdate:modelValue","options"])):(g(),A(E,{key:1,modelValue:t(i).formInfo.liabilityVOList[b].liabilityAttributeValue,"onUpdate:modelValue":q=>t(i).formInfo.liabilityVOList[b].liabilityAttributeValue=q,options:F(t(Pe),(T=(_=n.originData.riskLiabilityInfoVOList)==null?void 0:_[b])==null?void 0:T.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label"]))]))),128)),((Ae=n.originData)==null?void 0:Ae.relationDesc)?(g(),B("div",kt,[C(L,{title:"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E"},{default:h(()=>[x("div",null,U(n.originData.relationDesc),1)]),_:1})])):P("",!0)])}}});var _e=Y(Dt,[["__scopeId","data-v-82d61582"]]);const It=n=>(Be("data-v-1f13cbe8"),n=n(),Te(),n),vt={class:"com-risk-list-wrapper"},Lt=It(()=>x("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),bt={class:"risk-list"},ht={class:"cell-title"},Ft={class:"title"},Ct={class:"footer-bar"},Rt=Ue("\u786E\u8BA4"),At=N({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(n,{emit:a}){const k=n,R=$([]),I=$([]),i=$([...k.disabled]),D=S({show:k.show,currentChecked:[...k.modelValue]}),F=(c,d)=>{if(!k.collocationList.length){if(d){D.currentChecked=[];return}D.currentChecked.push(c);return}let V=D.currentChecked,p=i.value;d?(k.collocationList.forEach(o=>{c===o.riskId&&(o.collocationType===2?V=V.filter(e=>e!==o.collocationRiskId||e!==c):o.collocationType===3?(V=V.filter(e=>e!==c),p=p.filter(e=>e!==o.collocationRiskId)):V=V.filter(e=>e!==c))}),D.currentChecked=V,i.value=p):(k.collocationList.forEach(o=>{c===o.riskId&&(d||(o.collocationType===2?V.push(o.collocationRiskId):o.collocationType===3&&p.push(o.collocationRiskId),V.push(c)))}),D.currentChecked.push(...V),i.value=p)},v=c=>{var V,p,o;if(i.value.includes(c))return;const d=D.currentChecked.includes(c);F(c,d),(o=(p=(V=R==null?void 0:R.value)==null?void 0:V[c])==null?void 0:p.toggle)==null||o.call(p)},s=()=>{a("close")},y=()=>{const c=k.riskList.filter(d=>D.currentChecked.includes(d.id));a("update:modelValue",[...new Set(I.value)]),a("finished",c,i.value),a("close")};return je(()=>{R.value=[]}),w(()=>D.currentChecked,c=>{I.value=c},{deep:!0,immediate:!0}),w(()=>k.modelValue,c=>{I.value=c||[],i.value.push(...c||[])},{deep:!0,immediate:!0}),(c,d)=>{const V=O("van-checkbox"),p=O("VanCell"),o=O("van-cell-group"),e=O("van-checkbox-group"),l=O("VanButton"),r=O("VanPopup");return g(),B("div",vt,[C(r,{show:t(D).show,"onUpdate:show":d[1]||(d[1]=u=>t(D).show=u),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",round:"",position:"bottom",closeable:"",onClose:s},{default:h(()=>[Lt,x("div",bt,[C(e,{modelValue:I.value,"onUpdate:modelValue":d[0]||(d[0]=u=>I.value=u)},{default:h(()=>[C(o,{inset:""},{default:h(()=>[(g(!0),B(Q,null,J(n.riskList,u=>(g(),A(p,{key:u.id,title:u.riskName,disabled:i.value.includes(u.id),onClick:f=>v(u.id)},{"right-icon":h(()=>[C(V,{ref_for:!0,ref:f=>R.value[u.id]=f,shape:"square",disabled:i.value.includes(u.id),name:u.id,onClick:Ge(f=>v(u.id),["stop"])},null,8,["disabled","name","onClick"])]),title:h(()=>[x("div",ht,[x("div",Ft,U(u.riskName),1)])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),x("div",Ct,[C(l,{type:"primary",disabled:!t(D).currentChecked.length,block:"",onClick:y},{default:h(()=>[Rt]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var Et=Y(At,[["__scopeId","data-v-1f13cbe8"]]);const Ot={class:"risk-list-wrapper"},Pt={key:1,class:"add-rider-risk"},xt={class:"left-part"},_t=Ue("+ \u9644\u52A0\u9669"),Bt=N({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}},riderRiskList:{default:()=>[]}},setup(n){var v;const a=n,k=G("source")||{},[R,I]=z(!1);$(null),$(null);const i=S({mainRiskInfo:a.riskInfo,riderRiskInfo:((v=a.riskInfo)==null?void 0:v.riderRiskVOList)||[],requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),D=(s,y)=>{i.requiredRiderRiskData=i.requiredRiderRiskData.concat(s),i.disabledList=y},F=s=>{Ke.confirm({message:"\u786E\u5B9A\u8981\u5220\u9664\u9644\u52A0\u9669\u4E48\uFF1F"}).then(()=>{var c;const y=[s];(((c=i.mainRiskData)==null?void 0:c.collocationVOList)||[]).forEach(d=>{s===d.riskId&&(d.collocationType===2||d.collocationType===3)&&y.push(d.collocationRiskId)}),i.checkedList=i.checkedList.filter(d=>!y.includes(d)),i.requiredRiderRiskData=i.requiredRiderRiskData.filter(d=>!y.includes(d.id)),i.disabledList=i.disabledList.filter(d=>!y.includes(d)),Object.assign(i.riderRiskInfo,{[s]:void 0})}).catch(()=>{})};return we(()=>{}),w(()=>i.requiredRiderRiskData,s=>{const y=[i.mainRiskData,...s];let c=[],d=[];const V=[];y.forEach((p,o)=>{var l,r,u;const e=((l=p==null?void 0:p.riskCalcMethodInfoVO)==null?void 0:l.riskFactorRelationList)||[];c=c.concat(e.filter(f=>f.factorObject==="insured").map(f=>f.factorCode)),d=d.concat(e.filter(f=>f.factorObject==="holder").map(f=>f.factorCode)),V.push((r=p==null?void 0:p.riskInsureLimitVO)==null?void 0:r.minHolderAge,(u=p==null?void 0:p.riskInsureLimitVO)==null?void 0:u.maxHolderAge)}),(s||[]).forEach(p=>{var e;const o={riskType:p.riskType,riskId:p.id,riskCode:p.riskCode,riskName:p.riskName,mainRiskCode:i.mainRiskData.riskCode,mainRiskId:(e=i.mainRiskData)==null?void 0:e.id,riskCategory:p.riskCategory,liabilityVOList:(p.riskLiabilityInfoVOList||[]).map(l=>H(K({},l),{liabilityAttributeCode:l.liabilityAttributeType,liabilityCode:l.liabilityCode,liabilityRateType:l.liabilityRateType}))};Object.assign(i.riderRiskInfo,{[p.id]:o})}),a.pickFactor({insuredFactorList:[...new Set(c)],holderFactorList:[...new Set(d)],ageRange:V})},{deep:!0,immediate:!0}),w(()=>a.originData,s=>{(s||[]).forEach(y=>{y.riskType===1?(i.mainRiskData=y,i.requiredRiderRiskData=y.requiredRiderRiskVOList||[],i.riderRiskList=y.optionalRiderRiskVOList):i.riderRiskList.push(y)})},{deep:!0,immediate:!0}),(s,y)=>{var d,V,p;const c=O("ProCheckButton");return g(),B("div",Ot,[t(i).mainRiskData?(g(),A(_e,{key:0,enums:n.enums,"form-info":t(i).mainRiskInfo,"origin-data":t(i).mainRiskData},null,8,["enums","form-info","origin-data"])):P("",!0),(g(!0),B(Q,null,J(t(i).requiredRiderRiskData,(o,e)=>(g(),A(_e,{key:o.id,"form-info":t(i).riderRiskInfo[o.id],index:e,enums:n.enums,"main-risk-data":t(i).mainRiskData,"main-risk-info":t(i).mainRiskInfo,"origin-data":o,"remove-risk":F,"remove-risk-list":t(i).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"]))),128)),((d=t(i).riderRiskList)==null?void 0:d.length)-((V=t(i).checkedList)==null?void 0:V.length)&&(t(k).origin!=="proposal"||t(k).type==="addRiderRisk")?(g(),B("div",Pt,[x("span",xt,U(`\u5171\u6709${t(i).riderRiskList.length-t(i).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),C(c,{activated:"",onClick:y[0]||(y[0]=o=>t(I)(!0))},{default:h(()=>[_t]),_:1})])):P("",!0),t(R)?(g(),A(Et,{key:2,modelValue:t(i).checkedList,"onUpdate:modelValue":y[1]||(y[1]=o=>t(i).checkedList=o),show:t(R),disabled:t(i).disabledList,"risk-list":t(i).riderRiskList,"collocation-list":((p=t(i).mainRiskData)==null?void 0:p.collocationVOList)||[],onFinished:D,onClose:y[2]||(y[2]=o=>t(I)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):P("",!0)])}}});var St=Y(Bt,[["__scopeId","data-v-07716367"]]);export{Nt as P,St as R};

import{_ as e,d as a,i as l,h as o,j as s,k as d,al as n,O as t,o as r,c,a as m,b as u,e as i,u as p,m as h,w as f,f as v,a8 as b,cQ as y,aK as k,cR as V,T as g,cE as q,bq as w,co as x,cp as C,ai as I,aE as N,aF as T}from"./index-b538fd82.js";import{g as _}from"./trial-356ee02e.js";import{P as j}from"./constants-4b08cf92.js";const U={class:"page-pay-auth-wrap"},B={class:"header"},E={class:"content"},R={class:"bank-card"},O={class:"card-content"},P={class:"main"},W={class:"bank-name"},A={class:"bank-no"},F={class:"bank-card-type"},K=(e=>(N("data-v-6c1f940c"),e=e(),T(),e))((()=>m("p",{class:"desc"},"实时单笔限额5W 实时单日限额5W",-1))),L={class:"footer-button"},Q=a({name:"payAuth"});var z=e(a({...Q,setup(e){const a=l(),N=o(),{orderNo:T,tenantId:Q}=a.query,z=s(),D=s(),G=s({}),H=d((()=>D.value.holder.certType===n.CERT?"身份证号":"证件号")),J=(e,l)=>{y(D.value).then((({code:e,data:o})=>{"10000"===e?null==l||l():k.confirm({confirmButtonText:"银行卡修改",message:"当前暂不支持该银行，建议更换银行卡"}).then((()=>{N.push({path:j.updateBankInfo,query:a.query})}))}))},M=()=>{z.value.validate().then((e=>{V(D.value).then((({code:e,data:a})=>{"10000"===e&&(N.back(),g("成功"))}))})).catch((e=>{console.log("e",e)}))};return t((()=>{(async()=>{await _({orderNo:T,tenantId:Q}).then((({code:e,data:a})=>{"10000"===e&&(D.value=a,G.value=a.tenantOrderPayInfoList.find((e=>1===e.payInfoType)))}))})()})),(e,a)=>{const l=q,o=w,s=x,d=C,n=I;return r(),c("div",U,[m("div",B,[u(l,{type:"warning",content:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。"})]),m("div",E,[m("div",R,[m("div",O,[m("div",P,[m("span",W,i(p(G).payBank||"中国工商银行"),1),m("span",A,i(p(G).bankCardNo||"**** **** **** 3941"),1)]),m("p",F,i(p(G).bankCardType||"储蓄卡"),1),K])]),p(D)?(r(),h(d,{key:0,ref_key:"formRef",ref:z,model:p(D).holder},{default:f((()=>[u(o,{modelValue:p(D).holder.name,"onUpdate:modelValue":a[0]||(a[0]=e=>p(D).holder.name=e),label:"姓名",name:"name",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(o,{modelValue:p(D).holder.certNo,"onUpdate:modelValue":a[1]||(a[1]=e=>p(D).holder.certNo=e),label:p(H),name:"certNo",maxlength:"18","is-view":"",required:""},null,8,["modelValue","label"]),u(o,{modelValue:p(D).holder.mobile,"onUpdate:modelValue":a[2]||(a[2]=e=>p(D).holder.mobile=e),label:"银行预留手机",name:"mobile",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(s,{modelValue:p(D).holder.verifyCode,"onUpdate:modelValue":a[3]||(a[3]=e=>p(D).holder.verifyCode=e),label:"验证码",maxlength:"6",name:"verifyCode","related-name":"mobile","send-s-m-s-code":J,required:""},null,8,["modelValue"])])),_:1},8,["model"])):v("",!0)]),m("div",L,[u(n,{type:"primary",onClick:M},{default:f((()=>[b("提交")])),_:1})])])}}}),[["__scopeId","data-v-6c1f940c"]]);export{z as default};

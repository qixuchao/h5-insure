import{d as e,u as t,a,r as o,o as n,b as s,c as i,e as r,w as c,f as d,g as u,_ as l,h as p,i as f,j as m,k as I,D as q,l as v,m as y,B as j,n as h,P as b,p as N}from"./index-ac2dcdaf.js";import{q as T}from"./product-0c3250cc.js";import{g as C}from"./utils-7293c80d.js";import{P as g}from"./index-04a2f706.js";import{n as O}from"./nextStep-06ed49d3.js";import{u as _}from"./useOrder-b6f7b7e1.js";import{P as x,B as P}from"./constants-7afb7c3d.js";import"./pdfh5-008ca364.js";import"./infoCollection-5ef9bb26.js";import"./trial-fb1e8679.js";import"./core-d72875f5.js";import"./constant-8927d485.js";const E=1;const w={class:"long-health-notice-wrap"},$={class:"footer-btn"},k=e({__name:"healthNotice",setup(e){const k=t(),Q=a(),S=_();console.log("route",k);const{productCode:U,orderNo:B,templateId:D,tenantId:V,preview:A,questionnaireId:G}=k.query,J=o({}),L=o(),M=o(),R=()=>{q.confirm({title:"",message:`${M.value||""}不符合当前产品投保条件，请选择其他产品`}).then((()=>{v()})).catch((()=>{}))},W=()=>{L.value?Q.push({path:`${k.path}/${L.value}`,query:{...k.query,questionnaireId:L.value}}):A?h(x.QUESTION_NOTICE,k.query):O(S.value,((e,t)=>{t===b.JUMP_PAGE&&N(e.nextPageCode,k.query)}))};return n((()=>{!A&&(async()=>{const{code:e,data:t}=await y({orderNo:B,tenantId:V});"10000"===e&&Object.assign(S.value,t,{extInfo:{...t.extInfo,templateId:D,pageCode:x.QUESTION_NOTICE,buttonCode:P.QUESTION_NOTICE}})})(),(async()=>{var e;const{code:t,data:a}=await T({productCode:U});if("10000"===t){const{productQuestionnaireVOList:t}=a||{};let o=t[0]||{};if((null==t?void 0:t.length)>1)if(G){const e=t.findIndex((e=>`${e.id}`===G));t[e]&&(o=t[e]),t[e+1]&&(L.value=t[e+1].id)}else L.value=null==(e=t[1])?void 0:e.id;const{questionnaireDetailResponseVO:n,questionnaireId:s,questionnaireName:i}=o||{},{questions:r,basicInfo:c}=n||{},{objectType:d,questionnaireType:u}=c||{};if(M.value=d,u===E){const{content:e,textType:t}=(null==r?void 0:r[0])||{};J.value={content:e,contentType:C(`${t}`,e),questionnaireId:s,questionnaireName:i}}else J.value={content:r,contentType:"question",questionnaireId:s,questionnaireName:i}}})()})),(e,t)=>{const a=j,o=s("ProPageWrap");return i(),r(o,null,{default:c((()=>[d("div",w,[u(J).content?(i(),r(l,{key:0,type:u(J).contentType,content:u(J).content},null,8,["type","content"])):p("",!0),d("div",$,[f(a,{onClick:R},{default:c((()=>[m("部分为是")])),_:1}),f(g,{shadow:!1,onClick:W},{default:c((()=>[I(e.$slots,"default",{},(()=>[m("以上皆否")]))])),_:3})])])])),_:3})}}});export{k as default};

import{h as M,aa as R,r as U,k as h,p as k,A as a,L as g,B as b,d as q,s as y,n as D,ac as N,v as A,a5 as w,a6 as H,E,D as V,T as x,P as $,G as S,z as j,$ as z,j as X,m as Y,H as Z,F as J}from"./vendor-b1b61443.js";import{_ as G,b as O,ae as C,k as K,s as Q}from"./index-5d3893c3.js";import{d as ee,g as te}from"./order-e54dbf6e.js";import{O as ae,b as F}from"./order-b44ee80e.js";const W=t=>(w("data-v-b27e4180"),t=t(),H(),t),se={class:"com-order-item"},oe={class:"header"},de={class:"product-name"},ne={class:"company-name"},ue={class:"status"},re={class:"info"},ie={class:"info-item"},ce=W(()=>a("div",{class:"label"},"\u6295\u4FDD\u4EBA",-1)),le={class:"desc"},_e={class:"info-item"},pe=W(()=>a("div",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),ve={class:"desc"},he={class:"footer"},me={class:"fee"},fe=E(" \u4FDD\u8D39\uFF1A"),ge={class:"money"},Ce={key:0,class:"buttons"},ye=E("\u5220\u9664"),De=E("\u53BB\u5904\u7406"),Ie={key:1,class:"buttons"},be=E("\u53BB\u652F\u4ED8"),Se={key:2,class:"buttons"},Fe=E("\u5220\u9664"),ke=M({props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup(t,{emit:L}){const i=t,T=R(),m=()=>{V.confirm({title:"",message:"\u786E\u8BA4\u8981\u5220\u9664\u8BE5\u8BA2\u5355\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{ee(i.detail.id,i.detail.orderStatus).then(e=>{const{code:d,data:s}=e;d==="10000"&&(x.success("\u5220\u9664\u6210\u529F"),L("afterDelete"))})})},c=()=>{const{goodsCode:e,orderNo:d,id:s,saleUserId:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyId:o,saleChannelId:n,orderTopStatus:v}=i.detail;if((F.PENDING===v||F.PAYING===v)&&[C.ZXYS,C.BWYL,C.BWYLUP].includes(e)){const l={[C.ZXYS]:"/internet/productDetail/package",[C.BWYL]:"/internet/productDetail",[C.BWYLUP]:"/internet/guaranteeUpgrade"};return T.push({path:l[e],query:{productCode:e,saleChannelId:n,agentCode:_,tenantId:p,agencyCode:o,orderNo:d}}),!0}return!1},I=()=>{const{goodsCode:e,orderNo:d,id:s,saleUserId:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyId:o}=i.detail;c()||T.push({path:O.payInfo,query:{productCode:e,orderNo:d,orderId:s,saleUserId:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyCode:o}})},B=()=>{const{goodsCode:e,orderNo:d,id:s,saleUserId:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyId:o,saleChannelId:n,orderStatus:v}=i.detail;c()||T.push({path:O[i.detail.pageCode],query:{productCode:e,orderNo:d,orderId:s,agentCode:_,templateId:u,tenantId:p,insurerCode:f,productCategory:r,agencyCode:o,isFromOrderList:"1"}})};return(e,d)=>{const s=U("van-button");return h(),k("div",se,[a("div",oe,[a("div",de,g(t.detail.goodsName),1),a("div",ne,g(t.detail.abbreviation),1),a("div",ue,g(b(ae)[t.detail.orderStatus]),1)]),a("div",re,[a("div",ie,[ce,a("div",le,g(t.detail.policyHolder),1)]),a("div",_e,[pe,a("div",ve,g(b(q)(t.detail.orderStartDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),a("div",he,[a("div",me,[fe,a("span",ge,"\uFFE5"+g(t.detail.prem),1)]),t.detail.orderTopStatus===b(F).PENDING?(h(),k("div",Ce,[y(s,{class:"button",onClick:N(m,["stop"])},{default:D(()=>[ye]),_:1},8,["onClick"]),y(s,{class:"button primary",onClick:N(B,["stop"])},{default:D(()=>[De]),_:1},8,["onClick"])])):A("",!0),t.detail.orderTopStatus===b(F).PAYING?(h(),k("div",Ie,[y(s,{class:"button primary",onClick:N(I,["stop"])},{default:D(()=>[be]),_:1},8,["onClick"])])):A("",!0),t.detail.orderTopStatus===b(F).TIMEOUT?(h(),k("div",Se,[y(s,{class:"button",onClick:N(m,["stop"])},{default:D(()=>[Fe]),_:1},8,["onClick"])])):A("",!0)])])}}});var Ee=G(ke,[["__scopeId","data-v-b27e4180"]]);const Te={class:"page-order"},Be=M({setup(t){R();const i=$().query,m=S({"-1":1,"0":2,"1":3,"2":4}[i.type]||0),c=S(1),I=S(!1),B=S(!1),e=S([]),d=[{title:"\u5168\u90E8",status:""},{title:"\u5F85\u5904\u7406",status:"-1"},{title:"\u5F85\u652F\u4ED8",status:"0"},{title:"\u5DF2\u5B8C\u6210",status:"1"},{title:"\u5DF2\u5931\u6548",status:"2"}],s=j(()=>d[m.value].status),_=r=>{const{orderNo:o,saleUserId:n,tenantId:v,abbreviation:l,productCategory:P}=r;Q("orderDetail",{orderNo:o,agentCode:n,tenantId:v,abbreviation:l,productCategory:P})},u=()=>{x.loading({message:"\u52A0\u8F7D\u4E2D...",forbidClick:!0}),I.value=!0,console.error("currentStatus:",s.value),te({condition:{orderTopStatus:s.value},pageSize:10,pageNum:c.value}).then(r=>{I.value=!1;const{code:o,data:n}=r;o==="10000"&&(c.value===1?e.value=n.datas:e.value=[...e.value,...n.datas]),B.value=e.value.length>=n.total}).then(()=>{x.clear()})},p=()=>{c.value+=1,u()},f=()=>{c.value=1,u()};return z(s,()=>{c.value=1,u()}),X(()=>{u()}),(r,o)=>{const n=U("van-list"),v=U("ProPageWrap");return h(),Y(v,{"main-class":"page-order-list"},{default:D(()=>[a("div",Te,[y(K,{active:m.value,"onUpdate:active":o[0]||(o[0]=l=>m.value=l),list:d,"small-gap":"",class:"tab"},null,8,["active"]),y(n,{class:"body",loading:I.value,finished:B.value,onLoad:p},{default:D(()=>[(h(!0),k(J,null,Z(e.value,(l,P)=>(h(),Y(Ee,{key:P,detail:l,onClick:Ne=>_(l),onAfterDelete:f},null,8,["detail","onClick"]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var Le=G(Be,[["__scopeId","data-v-24c12d4d"]]);export{Le as default};

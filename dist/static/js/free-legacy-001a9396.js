!function(){var e=document.createElement("style");e.innerHTML='.free-crad .page-info-wrapper .com-card-wrap .header.showLine{display:none}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell{background:#f6f6f6;border-radius:.21333rem;margin-bottom:.32rem;min-height:1.17333rem;padding:0 .42667rem;display:flex;align-items:center}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell .van-field__label{width:1.76rem;margin-top:0;margin-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell .van-cell__value .van-field__body{width:100%}.free-crad .page-info-wrapper .com-card-wrap .com-personal-wrapper .van-cell:after{border-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell:after{border-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-field__label{width:1.62667rem;margin-top:0;margin-bottom:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body{width:100%}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder{padding-right:0;padding-left:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder:before{content:" ";margin-top:.13333rem;width:.10667rem;height:.48rem;background:var(--van-primary-color);margin-right:.21333rem;border-radius:0px .12rem .12rem 0px}.free-crad .page-info-wrapper .com-card-wrap .van-cell.relation-holder .van-cell__title{margin-top:.10667rem}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap{width:100%}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn{display:flex;justify-content:flex-start}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn .btn-wrapper{margin:0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell__value .van-field__body .van-field__control .com-radio-btn-wrap .radio-btn .btn-wrapper .com-check-btn{min-width:1.33333rem;border-radius:.53333rem!important;margin:0 .10667rem .13333rem 0}.free-crad .page-info-wrapper .com-card-wrap .van-cell .van-cell:after{border-bottom:0}.free-crad[data-v-28b744ba]{padding:0 .42667rem;background:linear-gradient(var(--05d37b4a),var(--05d37b69))}.free-crad .container[data-v-28b744ba]{padding:.61333rem .53333rem .26667rem;background:#ffffff;text-align:center;border-radius:.53333rem}.free-crad .container .title[data-v-28b744ba]{height:.44rem;margin-bottom:.53333rem;display:flex;align-items:center;justify-content:center}.free-crad .container .title span[data-v-28b744ba]{font-size:.42667rem;font-family:PingFangSC-Semibold,PingFang SC;font-weight:600;color:#333;line-height:.42667rem;margin:0 .29333rem}.free-crad .container .title img[data-v-28b744ba]{height:.4rem}.free-crad .container .holder-form[data-v-28b744ba]{height:4.66667rem}.page-free-product-detail[data-v-038a0a3a]{background:var(--087c4459);padding-bottom:3.14667rem}.page-free-product-detail .inscribedContent-content[data-v-038a0a3a]{background-color:transparent}.page-free-product-detail .submit-btn[data-v-038a0a3a]{margin-top:.4rem}.page-free-product-detail .product-desc[data-v-038a0a3a]{margin-top:.42667rem}.page-free-product-detail .product-desc img[data-v-038a0a3a]{width:100%}.page-free-product-detail .page-free-footer[data-v-038a0a3a]{position:fixed;width:100%;bottom:0;padding:0 .93333rem .93333rem;box-sizing:border-box}\n',document.head.appendChild(e),System.register(["./index-legacy-cd3003a5.js","./index-legacy-5c0b5cdd.js","./useAddressList-legacy-63e86786.js","./nextStep-legacy-17cf847d.js","./phoneVerify-legacy-cfbc74c1.js","./product-legacy-cfb400ce.js","./trial-legacy-a574facb.js","./index-legacy-f0eb454e.js","./trial-legacy-db7d0f1d.js","./utils-legacy-b79a1c9c.js","./theme-legacy-691dfb9a.js","./pdfh5-legacy-a219347c.js","./pdfdist-legacy-c3ea4af6.js","./infoCollection-legacy-e4ea6a32.js","./relativeTime-legacy-33cdce41.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-2d1f9218.js","./core-legacy-f7639bbd.js","./index-legacy-33f78fa8.js","./useStorage-legacy-d9da6299.js"],(function(e){"use strict";var a,r,t,n,i,o,d,l,c,s,u,p,f,m,w,v,g,b,h,y,A,I,O,_,C,P,D,x,k,V,j,F,T,L,N,H,E,B,S,Y,M,U,R,z,$,Z,G,J;return{setters:[function(e){a=e._,r=e.d,t=e.a_,n=e.r,i=e.A,o=e.a8,d=e.c,l=e.g,c=e.i,s=e.l,u=e.t,p=e.e,f=e.a9,m=e.u,w=e.a,v=e.y,g=e.z,b=e.a$,h=e.b0,y=e.b,A=e.w,I=e.f,O=e.j,_=e.h,C=e.F,P=e.T,D=e.b1,x=e.a0},function(e){k=e.P},function(e){V=e.u,j=e.B,F=e.A,T=e.I,L=e.P},function(e){N=e._,H=e.n},function(e){E=e.a,B=e.s,S=e.c},function(e){Y=e.p,M=e.g},function(e){U=e.i,R=e.t},function(e){z=e._},function(e){$=e.j},function(e){Z=e.v,G=e.f},function(e){J=e.u},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){var Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAMAAACBgxnEAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA8UExURUdwTPpkAPpkAPpkAPlkAPlkAP9fAPpkAP9jAPljAPljAPlkAPdhAP9VAPhlAPpjAPpiAPpkAPlhAPpkAKrbDd8AAAATdFJOUwCe3XX6YBgzC+yKwSIDTrE+0C9Hm6hZAAAAf0lEQVR42u2MSw6AIAxEi6CCf+j976ommvG3omxMOqv2vczQmZa3tPRMptdZndVZndXZf892/JGOxN68qUEr24/zk84jSvne93fae3Qk3scrjZeWzDcVaNUQIvRDOGkYQOU+hYMmsBJ+cTt1C0gZP7mNTvhL+Zq5xlfOW4tb6le9ZDBDk4RvXwAAAABJRU5ErkJggg==";const X={class:"free-crad"},q={class:"container"},K={class:"title"},W=["src"],ee=["src"],ae=r({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}},previewMode:{type:Boolean,default:!1}},setup(e,{expose:a}){const r=e;t((e=>({"05d37b4a":r.colors[0],"05d37b69":r.colors[1]})));const m=n(),w=i({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:1,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"手机号"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:1,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"验证码"}],2:[],3:[]},isFirst:!0}),v=async({mobile:e,type:a},t)=>{if(m.value){if(r.previewMode)return void t?.();m.value?.validateForm(`${a}_mobile`).then((async()=>{const a=r.isFirst?E:B,n=await a(e),{code:i,data:o}=n;"10000"===i&&t?.()}))}};return o((()=>r.isFirst),(()=>{r.isFirst||(w.factorObj=r.insureDetail?.productFactor)})),a({validateForm:()=>new Promise(((e,a)=>{m.value.validateForm().then((a=>{e(!0)})).catch((()=>{a()}))}))}),(a,r)=>(d(),l("div",X,[c("div",q,[c("div",K,[c("img",{src:s(Q)},null,8,W),c("span",null,u(e.isFirst?"凭手机号 免费领取":"最后一步 填写信息"),1),c("img",{src:s(Q)},null,8,ee)]),(d(),p(N,{ref_key:"formRef",ref:m,key:e.isFirst?1:2,"send-sms-code":v,"need-desensitize":"","form-info":e.detail,"factor-object":s(w).factorObj},null,8,["form-info","factor-object"])),f(a.$slots,"default",{},void 0,!0)])]))}});var re=a(ae,[["__scopeId","data-v-28b744ba"]]);const te={class:"page-free-product-detail"},ne={class:"product-desc"},ie={key:1,class:"page-free-footer"};e("default",a(r({setup(e){t((e=>({"087c4459":s(ce).colors[1]})));const a=J(),r=m(),u=w(),{productCode:f="",agencyCode:N="",tenantId:E="",saleUserId:B="",saleChannelId:Q="",extraInfo:X,preview:q}=u.query;let K={};try{K=JSON.parse(decodeURIComponent(X))}catch(be){}const{openId:W,indirectCode:ee="",agentCode:ae}=K,oe=n(),de=n(),le=n(),ce=i({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},relationList:{},banner:"",productDesc:[],newAuth:!0,isValidateCode:!1,insureDetail:{},loading:!0,isSelfInsure:!0,showBtn:!1,activeIndex:0,showFilePreview:!1,isOnlyView:!0}),se=n();W&&V({openId:W},(e=>{ce.relationList=e}));const ue=v((()=>!!q)),pe=()=>{const e=ce.insureDetail.productRiskVoList||[],{insuranceEndType:a,riskInsureLimitVO:r}=e?.[0]?.riskDetailVOList?.[0]||{},{insurancePeriodValueList:t}=r||{},[n,i]=(t?.[0]||"").split("_");return 1===a?`${x(new Date).add(i||0,n).format("YYYY-MM-DD")} 23:59:59`:a?`${x(new Date).add(i,n).format("YYYY-MM-DD")} 00:00:00`:""},fe=async()=>{ce.loading=!0;const e=Y({productCode:f,withInsureInfo:!0,tenantId:E}),a=U({productCode:f}),r=M({openId:W});await Promise.all([e,a,r]).then((([e,a,r])=>{if("10000"===e.code){ce.detail=e.data,ce.banner=ce.detail.tenantProductInsureVO?.banner[0];const{colorEnd:a,colorStart:r}=ce.detail.tenantProductInsureVO?.backgroundInsureVO||{};ce.colors=[r,a],ce.productDesc=ce.detail.tenantProductInsureVO.spec||[],document.title=ce.detail?.tenantProductInsureVO?.productName||""}if("10000"===a.code&&(ce.insureDetail=a.data,ce.insureDetail.productFactor[1].forEach((e=>{"verificationCode"===e.code&&1===e.isDisplay&&(ce.isValidateCode=!0)})),ce.insureDetail.productFactor[2]=ce.insureDetail.productFactor?.[2].map((e=>("relationToHolder"===e.code&&1===e.isDisplay&&(e.title="被保人",ce.order.tenantOrderInsuredList[0].relationToHolder=e.attributeValueList?.[0]?.code||""),e)))),"10000"===r.code&&(ce.newAuth=!r.data,ce.isSelfInsure=!!r.data,r.data)){const e=r.data;ce.order.tenantOrderHolder={certNo:e?.certiNo,extInfo:{},mobile:e?.mobile,name:e?.name}}(()=>{let e={};if(e=ce.detail.tenantProductInsureVO.planInsureVO?.attachmentVOList||[],!e)return void(se.value=[]);const a={2:"richText",3:"link"};se.value=Object.keys(e).map((r=>(e[r].forEach((e=>{if("1"===e.attachmentType){const a=e.attachmentUri.split("?"),r=a[0].substr(a[0].lastIndexOf(".")+1);e.attachmentType="pdf"===r?"pdf":"picture"}else e.attachmentType=a[e.attachmentType]})),{attachmentName:r,attachmentList:e[r]})))||[]})(),ce.loading=!1}))},me=async()=>{let e={loginType:"2",openId:W,thirdUserType:"XINAO_WECHAT",indirectCode:ee};try{if(ce.newAuth?(e.loginName=ce.order.tenantOrderHolder.mobile,e.password=ce.order.tenantOrderHolder.verificationCode):e=G({order:ce.order,tenantId:E,extraInfo:K,commencementTime:1===((ce.insureDetail.productRiskVoList||[])?.[0]?.riskDetailVOList?.[0]?.insuranceStartType||1)?`${x(new Date).format("YYYY-MM-DD")} 00:00:00`:`${x(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`,expiryDate:pe(),detail:ce.detail,insureDetail:ce.insureDetail,iseeBizNo:oe.value,agentCode:ae,agencyCode:N,saleUserId:B,templateId:K?.templateId,saleChannelId:Q,pageCode:"infoCollection",buttonCode:"EVENT_FREE_multiIssuePolicy"}),ce.newAuth)if(ue.value)ce.newAuth=!1;else{const{code:a,data:r}=await R(e);"10000"===a&&(ce.newAuth=!1)}else H(e,((e,a)=>{a===D.JUMP_PAGE&&e.orderNo&&r.push(`/baseInsurance/orderDetail?from=free&tenantId=${E}&orderNo=${e.orderNo}&productCode=${f}`)}))}catch(a){}},we=async()=>await(async()=>{if(ue.value)return!0;await le.value.validateForm();const e=ce.order.tenantOrderHolder?.verificationCode;if((ce.isValidateCode||ce.newAuth)&&(!e||!Z(e)))return P({message:"请输入正确的验证码"}),!1;if(ce.newAuth||!ce.isValidateCode)return!0;const{code:a,data:r}=await S(ce.order.tenantOrderHolder.mobile,e);return!!r})()?(ce.newAuth||0===se.value.length?me():(ce.isOnlyView=!1,ce.showFilePreview=!0),!1):null,ve=()=>{ce.showFilePreview=!1,ce.isOnlyView=!0},ge=()=>{ce.showFilePreview=!1,ce.isOnlyView=!0,me()};return g((()=>{fe(),setTimeout((async()=>{oe.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),o((()=>ce.order.tenantOrderInsuredList[0]),(e=>{if(b(ce.relationList)||ce.newAuth)return null;const a=ce.relationList[e.relationToHolder]||[];return 1===a.length&&($.SELF!==e.relationToHolder?(ce.order.tenantOrderInsuredList[0].certNo=ce.order.tenantOrderInsuredList[0].certNo?ce.order.tenantOrderInsuredList[0].certNo:a[0].cert[0].certNo,ce.order.tenantOrderInsuredList[0].name=ce.order.tenantOrderInsuredList[0].name?ce.order.tenantOrderInsuredList[0].name:a[0].cert[0].certName):ce.isSelfInsure&&(ce.isSelfInsure=!1,ce.order.tenantOrderHolder.certNo=ce.order.tenantOrderHolder.certNo?ce.order.tenantOrderHolder.certNo:a[0].cert[0].certNo,ce.order.tenantOrderHolder.name=ce.order.tenantOrderHolder.name?ce.order.tenantOrderHolder.name:a[0].cert[0].certName)),!1}),{immediate:!0,deep:!0}),h(de,(([{isIntersecting:e}],a)=>{ce.showBtn=!e})),(e,r)=>{const t=y("van-image"),n=y("van-config-provider");return d(),p(n,{"theme-vars":s(a)},{default:A((()=>[c("div",te,[I(j,{url:s(ce).banner},null,8,["url"]),I(re,{ref_key:"formRef",ref:le,"is-first":s(ce).newAuth,"insure-detail":s(ce).insureDetail,detail:s(ce).order,colors:s(ce).colors,"preview-mode":s(ue)},{default:A((()=>[I(k,{ref_key:"root",ref:de,class:"submit-btn",disabled:!s(ce).newAuth&&s(ue),"is-gradient":!1,text:s(ce).newAuth?"立即领取":"激活保障",onClick:we},null,8,["disabled","text"]),!s(ce).newAuth&&se.value&&se.value.length>0?(d(),p(F,{key:0,"attachement-list":se.value,"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:r[0]||(r[0]=e=>(e=>{ce.isOnlyView=!0,ce.activeIndex=e,ce.showFilePreview=!0})(e))},null,8,["attachement-list"])):O("",!0)])),_:1},8,["is-first","insure-detail","detail","colors","preview-mode"]),c("div",ne,[(d(!0),l(C,null,_(s(ce).productDesc,((e,a)=>(d(),p(t,{key:a,width:"100%","lazy-load":"",src:e,class:""},null,8,["src"])))),128))]),s(ce).detail?.tenantProductInsureVO?.inscribedContent?(d(),p(T,{key:0,"inscribed-content":s(ce).detail?.tenantProductInsureVO?.inscribedContent},null,8,["inscribed-content"])):O("",!0),s(ce).showBtn?(d(),l("footer",ie,[I(k,{disabled:!s(ce).newAuth&&s(ue),"is-gradient":!1,text:s(ce).newAuth?"立即领取":"激活保障",onClick:we},null,8,["disabled","text"])])):O("",!0)]),s(ce).showFilePreview&&0!==se.value.length?(d(),p(z,{key:0,show:s(ce).showFilePreview,"onUpdate:show":r[1]||(r[1]=e=>s(ce).showFilePreview=e),"content-list":se.value,"is-only-view":s(ce).isOnlyView,"active-index":s(ce).activeIndex,text:s(ce).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-cound":0,"on-close-file-preview":"",onSubmit:ge,onOnCloseFilePreview:ve},null,8,["show","content-list","is-only-view","active-index","text"])):O("",!0),s(ce).loading?O("",!0):(d(),p(L,{key:1,"product-detail":s(ce).detail},null,8,["product-detail"]))])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-038a0a3a"]]))}}}))}();

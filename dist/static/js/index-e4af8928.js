var ue=Object.defineProperty,le=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var X=(u,o,t)=>o in u?ue(u,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[o]=t,J=(u,o)=>{for(var t in o||(o={}))ce.call(o,t)&&X(u,t,o[t]);if(K)for(var t of K(o))de.call(o,t)&&X(u,t,o[t]);return u},Z=(u,o)=>le(u,ie(o));import{g as Q,ak as te,O as ne,E as L,al as pe,r as f,j as s,k as g,m as l,p as v,n as k,G as W,z as x,J as H,F as G,t as D,am as _e,A as m,C as P,T as me,ac as fe,H as ve,a9 as ee,aa as ye,ab as ge,y as U,h as oe,M as Ce}from"./vendor-e057bbeb.js";import{_ as M,j as be,l as he,r as se}from"./index-f2834090.js";import{s as ke,g as Ee}from"./inform-88d28d51.js";import{s as Se}from"./useStorage-cb74d112.js";import{N as Ie}from"./notice-1477e413.js";const Te={class:"problem"},$e={class:"footer-button"},we=P("\u63D0\u4EA4"),De=Q({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(u,{emit:o}){const t=u;te();const e=ne(),a=L([]),{questionnaireType:c}=e.query,{orderNo:C="2022021815432987130620",productCode:B="CQ75CQ76",templateId:V=1,agentCode:y="65434444",orderId:S=13005,tenantId:I=9991000007}=e.query,r={"1":"\u6295\u4FDD\u4EBA","2":"\u88AB\u4FDD\u4EBA","3":"\u4EE3\u7406\u4EBA"},p=L([]),q=b=>{a.value[b].toggle()},$=b=>b?JSON.parse(b).map(n=>({title:n.value,value:n.uid})):[],T=()=>{p.value.some(n=>{var _;return["undefined",""].includes(n.singleAnswer)||((_=n.multipleChoose)==null?void 0:_.length)===0})?me("\u8BF7\u5B8C\u6210\u6240\u6709\u9898\u76EE\u8FDB\u884C\u4E0B\u4E00\u6B65"):o("onSubmitCurrentStatus",1,JSON.stringify(p.value))},w=b=>JSON.parse(b),O=()=>{se({orderNo:C,saleUserId:y,tenantId:I}).then(({code:b,data:n})=>{if(b==="10000"){const _=n.tenantOrderNoticeList.findIndex(i=>i.isDone===1&&+i.objectId===t.currentPageInfo[0].questionnaireId);_!==-1?p.value=w(n.tenantOrderNoticeList[_].content):p.value=t.currentPageInfo.map(i=>i.questionType===2?J({multipleChoose:[]},i):J({singleAnswer:i.questionType===3?0:""},i))}})};return pe(()=>{a.value=[],O()}),(b,n)=>{const _=f("van-radio"),i=f("van-cell"),E=f("van-cell-group"),F=f("van-radio-group"),N=f("van-checkbox"),j=f("van-checkbox-group"),Y=f("van-field"),re=f("van-button"),ae=f("ProPageWrap");return s(),g(ae,{class:"com-question"},{default:l(()=>[v(he,{title:`${r[m(c)]}\u5065\u5EB7\u544A\u77E5\u4E66`},{default:l(()=>[(s(!0),k(G,null,W(p.value,(d,z)=>(s(),k("div",{key:z,class:"question-item"},[x("div",Te,H(z+1)+". "+H(d.title),1),d.questionType===1?(s(),g(F,{key:0,modelValue:d.singleAnswer,"onUpdate:modelValue":h=>d.singleAnswer=h},{default:l(()=>[v(E,{inset:""},{default:l(()=>[(s(!0),k(G,null,W($(d.options),(h,A)=>(s(),g(i,{key:A,title:h.title,clickable:"",onClick:R=>d.singleAnswer=A},{"right-icon":l(()=>[v(_,{name:A},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):D("",!0),d.questionType===2?(s(),g(j,{key:1,modelValue:d.multipleChoose,"onUpdate:modelValue":h=>d.multipleChoose=h},{default:l(()=>[v(E,{inset:""},{default:l(()=>[(s(!0),k(G,null,W($(d.options),(h,A)=>(s(),g(i,{key:h.uid,clickable:"",title:h.title,onClick:R=>q(A)},{"right-icon":l(()=>[v(N,{ref_for:!0,ref:R=>a.value[A]=R,shape:"square",name:A,onClick:n[0]||(n[0]=_e(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):D("",!0),d.questionType===3?(s(),g(be,{key:2,modelValue:d.singleAnswer,"onUpdate:modelValue":h=>d.singleAnswer=h,options:[{label:"\u662F",value:"Y"},{label:"\u5426",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):D("",!0),d.questionType===4?(s(),g(E,{key:3,inset:""},{default:l(()=>[v(Y,{modelValue:d.singleAnswer,"onUpdate:modelValue":h=>d.singleAnswer=h,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):D("",!0)]))),128))]),_:1},8,["title"]),x("div",$e,[v(re,{type:"primary",block:"",onClick:T},{default:l(()=>[we]),_:1})])]),_:1})}}});var Pe=M(De,[["__scopeId","data-v-40ec5510"]]);const Ae={class:"com-document"},xe={class:"title"},Ve={class:"content"},qe={class:"footer-button"},Ne=P("\u4E86\u89E3\u5E76\u7EE7\u7EED"),Be=Q({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(u,{emit:o}){const t=u;return(e,a)=>{const c=f("van-button"),C=f("ProPageWrap"),B=fe("dompurify-html");return s(),g(C,null,{default:l(()=>{var V,y;return[x("div",Ae,[x("div",xe,H((V=t.currentPageInfo[0])==null?void 0:V.title),1),ve(x("div",Ve,null,512),[[B,(y=t.currentPageInfo[0])==null?void 0:y.content]]),x("div",qe,[v(c,{type:"primary",onClick:a[0]||(a[0]=S=>o("onSubmitCurrentStatus",1))},{default:l(()=>[Ne]),_:1})])])]}),_:1})}}});var Oe=M(Be,[["__scopeId","data-v-c7bd0da4"]]);const Fe={class:"com-pdf-viewer"},Ue=["id","isee_pdf"],Qe={key:2,class:"footer-button"},je=P("\u90E8\u5206\u4E3A\u662F"),Je=P("\u4EE5\u4E0A\u7686\u5426"),Le={key:3,class:"footer-button"},Me=P("\u4E86\u89E3\u5E76\u7EE7\u7EED"),Re=Q({props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(u,{emit:o}){const t=u;ee.exports.GlobalWorkerOptions.workerSrc=ye;const e=ge(),a=L(!1),c=L(!0),C=U(()=>["png","jpg","jpeg"].some(y=>t.url.includes(y))),B=()=>{const y=document.getElementById(e);if(y.hasChildNodes()){c.value=!1;return}ee.exports.getDocument({url:t.url}).promise.then(I=>{const r=I.numPages;for(let p=1;p<=r;p++)I.getPage(p).then(q=>{const $=q.getViewport({scale:1}),T=document.createElement("canvas"),w=T.getContext("2d");T.width=$.width,T.height=$.height,T.style.width="100%",y.append(T);const O={canvasContext:w,viewport:$};q.render(O),c.value=!1})})},V=async()=>{a.value=!0,setTimeout(()=>{B()},0)};return oe(()=>{V()}),(y,S)=>{const I=f("van-image"),r=f("van-button");return s(),k("div",Fe,[m(C)?(s(),g(I,{key:0,width:"100%",height:"80vh",fit:"contain",src:t.url},null,8,["src"])):(s(),k("div",{key:1,id:m(e),isee_pdf:y.pdfUrl,class:"pdf-wapper"},null,8,Ue)),t.materialType==="question"?(s(),k("div",Qe,[v(r,{plain:"",type:"primary",onClick:S[0]||(S[0]=p=>o("onSubmitCurrentStatus",2))},{default:l(()=>[je]),_:1}),v(r,{type:"primary",onClick:S[1]||(S[1]=p=>o("onSubmitCurrentStatus",1))},{default:l(()=>[Je]),_:1})])):(s(),k("div",Le,[v(r,{type:"primary",onClick:S[2]||(S[2]=p=>o("onSubmitCurrentStatus",1))},{default:l(()=>[Me]),_:1})]))])}}});var We=M(Re,[["__scopeId","data-v-421b20ec"]]);const Ge={class:"iframe-wrap"},He=["src"],Ye={key:0,class:"footer-button"},ze=P("\u90E8\u5206\u4E3A\u662F"),Ke=P("\u4EE5\u4E0A\u7686\u5426"),Xe={key:1,class:"footer-button"},Ze=P("\u4E86\u89E3\u5E76\u7EE7\u7EED"),et=Q({props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(u,{emit:o}){const t=u;return(e,a)=>{const c=f("van-button");return s(),k("div",Ge,[x("iframe",{src:t.url,frameborder:"0"},null,8,He),t.materialType==="question"?(s(),k("div",Ye,[v(c,{plain:"",type:"primary",onClick:a[0]||(a[0]=C=>o("onSubmitCurrentStatus",2))},{default:l(()=>[ze]),_:1}),v(c,{type:"primary",onClick:a[1]||(a[1]=C=>o("onSubmitCurrentStatus",1))},{default:l(()=>[Ke]),_:1})])):(s(),k("div",Xe,[v(c,{type:"primary",onClick:a[2]||(a[2]=C=>o("onSubmitCurrentStatus",1))},{default:l(()=>[Ze]),_:1})]))])}}});var tt=M(et,[["__scopeId","data-v-ff822f8a"]]);const nt={class:"com-health-notice"},it=Q({setup(u){const o=te(),t=ne(),e=Se.get("questionData"),{materialType:a="question",questionnaireType:c="1",orderNo:C="2022021815432987130620",productCode:B="CQ75CQ76",templateId:V=1,agentCode:y="65434444",orderId:S=13005,tenantId:I=9991000007}=t.query&&t.query,r=Ce({pageData:{},currentQuestionInfo:[]}),p=U(()=>c==="2"),q=U(()=>{var n;return c==="1"&&([1].includes((n=r.currentQuestionInfo[0])==null?void 0:n.textType)||(e==null?void 0:e.materialSource)===1)}),$=U(()=>{var n;return c==="1"&&([2].includes((n=r.currentQuestionInfo[0])==null?void 0:n.textType)||(e==null?void 0:e.materialSource)===2)}),T=U(()=>{var n;return c==="1"&&([3].includes((n=r.currentQuestionInfo[0])==null?void 0:n.textType)||(e==null?void 0:e.materialSource)===3)}),w=(n,_)=>{var N;const{id:i,objectType:E,noticeObject:F}=e;console.log("currentQuestion",e),ke({content:_||((N=r.currentQuestionInfo[0])==null?void 0:N.content),contentType:c,isDone:n,noticeType:Ie[E]||F,objectId:i,objectType:E,orderId:r.pageData.id,orderNo:C,tenantId:I}).then(({code:j,data:Y})=>{console.log(j),j==="10000"&&o.go(-1)})},O=()=>{se({orderNo:C,saleUserId:y,tenantId:I}).then(({code:n,data:_})=>{n==="10000"&&Object.assign(r.pageData,_)})},b=()=>{const{insurerCode:n,id:_,objectType:i,productCategory:E}=e;Ee({insurerCode:n,id:_,objectType:i,productCategory:E,orderNo:C,tenantId:I}).then(({code:F,data:N})=>{F==="10000"&&(r.currentQuestionInfo=N)})};return oe(()=>{O(),(e==null?void 0:e.materialSource)?(r.currentQuestionInfo=[Z(J({},e==null?void 0:e.materialSource),{title:e==null?void 0:e.materialName,content:e==null?void 0:e.materialContent})],console.log("===>",r.currentQuestionInfo)):b()}),(n,_)=>{var i,E;return s(),k("div",nt,[m(p)?(s(),g(Pe,{key:0,"current-page-info":m(r).currentQuestionInfo,onOnSubmitCurrentStatus:w},null,8,["current-page-info"])):D("",!0),m($)?(s(),g(Oe,{key:1,"material-type":m(a),"current-page-info":m(r).currentQuestionInfo,onOnSubmitCurrentStatus:w},null,8,["material-type","current-page-info"])):D("",!0),m(q)?(s(),g(We,{key:2,"material-type":m(a),url:(i=m(r).currentQuestionInfo[0])==null?void 0:i.content,onOnSubmitCurrentStatus:w},null,8,["material-type","url"])):D("",!0),m(T)?(s(),g(tt,{key:3,"material-type":m(a),url:(E=m(r).currentQuestionInfo[0])==null?void 0:E.content,onOnSubmitCurrentStatus:w},null,8,["material-type","url"])):D("",!0)])}}});export{it as default};

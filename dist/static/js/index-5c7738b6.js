var De=Object.defineProperty,ke=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var te=(e,r,d)=>r in e?De(e,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):e[r]=d,v=(e,r)=>{for(var d in r||(r={}))Re.call(r,d)&&te(e,d,r[d]);if(le)for(var d of le(r))ge.call(r,d)&&te(e,d,r[d]);return e},b=(e,r)=>ke(e,Ce(r));import{g as ne,E as R,_ as oe,y as re,j as s,n as H,k as E,A as c,t as f,m as I,p as y,a4 as se,a5 as de,z as h,C as M,O as Fe,ak as Te,h as _e,r as L,G as Ae,F as Be,T as he,L as Se,J as Ve}from"./vendor-df2d8bed.js";import{q as Ne}from"./index-15376f4b.js";import{_ as ie,Y as pe,h as x,M as O,U as Le,m as Oe,Q as xe,R as we,w as Ge,T as U,l as z,V as k,W as T,n as We,P as qe,r as je}from"./index-5323229f.js";import{c as w}from"./utils-b6782348.js";import{u as He}from"./useDicData-d1f4d2e9.js";import{P as Me}from"./index-fd6055a7.js";import{_ as Pe}from"./index-9d14ced5.js";var Q=(e=>(e[e.REAL_TIME=1]="REAL_TIME",e[e.BATCH=2]="BATCH",e))(Q||{});const Z=[{value:1,label:"\u5B9E\u65F6\u8F6C\u8D26"},{value:2,label:"\u6279\u91CF\u6263\u6B3E"}];w(Z);var X=(e=>(e[e.DEBIT=1]="DEBIT",e[e.CREDIT=2]="CREDIT",e[e.PRE_PAY=3]="PRE_PAY",e[e.PRE_CREDIT=4]="PRE_CREDIT",e[e.OTHER=5]="OTHER",e))(X||{});const ce=[{value:1,label:"\u501F\u8BB0\u5361"},{value:2,label:"\u8D37\u8BB0\u5361"},{value:3,label:"\u9884\u4ED8\u8D39\u5361"},{value:4,label:"\u51C6\u8D37\u8BB0\u5361"},{value:5,label:"\u5176\u4ED6"}];w(ce);var S=(e=>(e[e.FIRST_TERM=1]="FIRST_TERM",e[e.RENEW_TERM=2]="RENEW_TERM",e[e.REPRISE=3]="REPRISE",e[e.OTHER=4]="OTHER",e))(S||{});const me=[{value:1,label:"\u9996\u671F\u652F\u4ED8"},{value:2,label:"\u7EED\u671F\u652F\u4ED8"},{value:3,label:"\u5E74\u91D1\u9886\u53D6"},{value:4,label:"\u5176\u4ED6"}];w(me);var _=(e=>(e[e.FIRST_SAME=1]="FIRST_SAME",e[e.RENEW_SAME=2]="RENEW_SAME",e[e.OTHER=3]="OTHER",e))(_||{});const Ke=[{value:1,label:"\u540C\u9996\u671F"},{value:2,label:"\u540C\u7EED\u671F"},{value:3,label:"\u5176\u4ED6"}];w(me);var ve=(e=>(e[e.AUTOMATIC_PADDING=1]="AUTOMATIC_PADDING",e[e.CANCEL=2]="CANCEL",e))(ve||{});const ye=[{value:1,label:"\u81EA\u52A8\u57AB\u4ED8"},{value:2,label:"\u4E2D\u6B62\u5408\u540C"}];w(ye);const $e=e=>(se("data-v-c2f6ec68"),e=e(),de(),e),Ue={class:"com-bank-card-info"},ze=$e(()=>h("span",{class:"field-title"},[M("\u94F6\u884C\u5361\u7167\u7247 "),h("span",{class:"sub-title"},"(\u9700\u4E0A\u4F20\u6B63\u53CD\u4E24\u9762)")],-1)),Je=ne({props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""},factor:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(e,{emit:r}){const d=e,P=He("BANK"),p=R({bankCardType:X.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),A=n=>d.factor&&d.factor[n]&&d.factor[n].isDisplay===pe.YES,G=n=>n&&n.length===2?!0:"\u8BF7\u4E0A\u4F20\u94F6\u884C\u5361\u6B63\u53CD\u9762\u7167\u7247",W=n=>{xe({ossKey:[n],imageType:we.BANK_CARD}).then(i=>{const{data:u,code:t}=i;t==="10000"&&u&&u.bankCardOcrVO&&(p.value.bankCardNo=u.bankCardOcrVO.bankNo)})};oe(()=>d.modelValue,n=>{p.value=n},{immediate:!0}),oe(p,n=>{r("update:modelValue",n)});const V=re(()=>P.value.map(n=>({label:n.name,value:n.code})));return(n,i)=>(s(),H("div",Ue,[A("cardType")?(s(),E(x,{key:0,modelValue:p.value.bankCardType,"onUpdate:modelValue":i[0]||(i[0]=u=>p.value.bankCardType=u),label:"\u5361\u7247\u7C7B\u578B",name:"bankCardType","data-source":c(ce),"is-view":""},null,8,["modelValue","data-source"])):f("",!0),A("bankCardNumber")?(s(),E(O,{key:1,modelValue:p.value.bankCardNo,"onUpdate:modelValue":i[1]||(i[1]=u=>p.value.bankCardNo=u),label:"\u94F6\u884C\u5361\u53F7",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"])):f("",!0),A("cardHolder")?(s(),E(O,{key:2,"model-value":e.holderName,label:"\u6301\u5361\u4EBA",name:"accountName","is-view":""},null,8,["model-value"])):f("",!0),A("bank")?(s(),E(x,{key:3,modelValue:p.value.payBank,"onUpdate:modelValue":i[2]||(i[2]=u=>p.value.payBank=u),name:"payBank",label:"\u5F00\u6237\u94F6\u884C","data-source":c(V),required:""},null,8,["modelValue","data-source"])):f("",!0),A("bankCardAttachment")?(s(),E(O,{key:4,label:"\u94F6\u884C\u5361\u7167\u7247",block:"","label-width":"100%",name:"images",rules:[{validator:G}]},{label:I(()=>[ze]),input:I(()=>[y(Oe,{modelValue:p.value.images,"onUpdate:modelValue":i[3]||(i[3]=u=>p.value.images=u),"max-count":2,"upload-type":c(Le).BANK_CARD,onOnUploadFinished:W},null,8,["modelValue","upload-type"])]),_:1},8,["rules"])):f("",!0),A("bankPreMobile")?(s(),E(O,{key:5,modelValue:p.value.mobile,"onUpdate:modelValue":i[4]||(i[4]=u=>p.value.mobile=u),label:"\u9884\u7559\u624B\u673A\u53F7",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])):f("",!0)]))}});var J=ie(Je,[["__scopeId","data-v-c2f6ec68"]]),Qe="/static/assets/bank.588e555f.pdf";const Ze=e=>(se("data-v-70cc9705"),e=e(),de(),e),Xe={class:"page-bank-card"},Ye={class:"reprise-card-list"},ea=["onClick"],aa={class:"agree"},ua=M(" \u6295\u4FDD\u4EBA\u9605\u8BFB\u5E76\u63A5\u53D7 "),la={class:"footer-button footer"},ta=Ze(()=>h("div",{class:"text"},"\u5237\u65B0",-1)),oa=M("\u5206\u4EAB"),na=M("\u4E0B\u4E00\u6B65"),ra=ne({setup(e){const r=Fe(),d=Te(),{orderNo:P="2022072710380711215",agentCode:p="D1234567-1",tenantId:A="9991000007",templateId:G=1,isShare:W}=r.query,V={bankCardType:X.DEBIT};let n={};const i=R(""),u=R({payMethod:Q.REAL_TIME,bankData:b(v({},V),{imagesId:[],images:[]})}),t=R({payMethod:Q.REAL_TIME,expiryMethod:ve.AUTOMATIC_PADDING,bankData:b(v({},V),{imagesId:[],images:[]}),payInfoType:_.FIRST_SAME}),C=R({bankData:b(v({},V),{imagesId:[],images:[]})}),N=R(_.FIRST_SAME),g=R({}),K=R(!1),Y=R(),ee=R(),ae=R(),Ee=m=>{N.value=m},q=(m,l)=>(console.log("factor",g.value),g.value&&g.value[l]&&g.value[l][m]&&g.value[l][m].isDisplay===pe.YES),fe=()=>{var m,l,D;if(!K.value){he.fail("\u8BF7\u52FE\u9009\u540C\u610F\u94F6\u884C\u8F6C\u8D26\u6388\u6743");return}Promise.all([(m=Y.value)==null?void 0:m.validate(),(l=ee.value)==null?void 0:l.validate(),(D=ae.value)==null?void 0:D.validate()]).then(a=>{const F=[b(v({},a[0]),{id:u.value.id,paymentType:S.FIRST_TERM}),b(v({},a[1]),{id:t.value.id,paymentType:S.RENEW_TERM}),b(v({},a[2]),{id:C.value.id,paymentType:S.REPRISE,payInfoType:N.value})],B=[{category:k.OBVERSE_BANK_CARD,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:T.INIT_SIGN,type:"png",uri:a[0].images[0],id:u.value.bankData.imagesId[0]},{category:k.REVERSE_BANK_CARD,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:T.INIT_SIGN,type:"png",uri:a[0].images[1],id:u.value.bankData.imagesId[1]}];t.value.payInfoType===_.OTHER&&(B.push({category:k.OBVERSE_BANK_CARD,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:T.RENEWAL_SIGN,type:"png",uri:a[1].images[0],id:t.value.bankData.imagesId[0]}),B.push({category:k.REVERSE_BANK_CARD,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:T.RENEWAL_SIGN,type:"png",uri:a[1].images[1],id:t.value.bankData.imagesId[1]})),N.value===_.OTHER&&(B.push({category:k.OBVERSE_BANK_CARD,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:T.ANNUAL_SIGN,type:"png",uri:a[2].images[0],id:C.value.bankData.imagesId[0]}),B.push({category:k.REVERSE_BANK_CARD,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:T.ANNUAL_SIGN,type:"png",uri:a[2].images[1],id:C.value.bankData.imagesId[1]})),We(b(v({},n),{pageCode:"payInfo",tenantOrderPayInfoList:F,extInfo:b(v({},n.extInfo),{templateId:G,pageCode:"payInfo"}),operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:B})).then($=>{const{code:o,data:j}=$;o==="10000"&&j.success&&d.push({path:qe[j.pageAction.data.nextPageCode],query:r.query})})})},be=re(()=>{const m=b(v({},r.query),{isShare:1,sharePageCode:"payInfo"});return`${window.location.origin}/phoneVerify?${Ne.stringify(m)}`}),ue=()=>{je({orderNo:P,saleUserId:p,tenantId:A}).then(m=>{const{code:l,data:D}=m;l==="10000"&&D&&(n=D,i.value=D.tenantOrderHolder.name,D.tenantOrderPayInfoList.forEach(a=>{a.paymentType===S.FIRST_TERM?(u.value=a,u.value.bankData=b(v(v({},V),a),{images:[],imagesId:[]})):a.paymentType===S.RENEW_TERM?(t.value=a,t.value.bankData=b(v({},a),{images:[],imagesId:[]})):a.paymentType===S.REPRISE&&(C.value=a,C.value.bankData=b(v({},a),{images:[],imagesId:[]}),N.value=a.payInfoType)}),D.tenantOrderAttachmentList.forEach(a=>{a.objectType===T.INIT_SIGN?(a.category===k.OBVERSE_BANK_CARD&&(u.value.bankData.images[0]=a.uri,u.value.bankData.imagesId[0]=a.id),a.category===k.REVERSE_BANK_CARD&&(u.value.bankData.images[1]=a.uri,u.value.bankData.imagesId[1]=a.id)):a.objectType===T.RENEWAL_SIGN?(a.category===k.OBVERSE_BANK_CARD&&(t.value.bankData.images[0]=a.uri,t.value.bankData.imagesId[0]=a.id),a.category===k.REVERSE_BANK_CARD&&(t.value.bankData.images[1]=a.uri,t.value.bankData.imagesId[1]=a.id)):a.objectType===T.ANNUAL_SIGN&&(a.category===k.OBVERSE_BANK_CARD&&(C.value.bankData.images[0]=a.uri,C.value.bankData.imagesId[0]=a.id),a.category===k.REVERSE_BANK_CARD&&(C.value.bankData.images[1]=a.uri,C.value.bankData.imagesId[1]=a.id))}))})},Ie=()=>{ue()};return _e(()=>{Ge({pageCode:"payInfo",templateId:G}).then(m=>{const{code:l,data:D}=m;if(l==="10000"){const a={};D.productInsureFactorList.forEach(F=>{a[F.moduleType]||(a[F.moduleType]={}),a[F.moduleType][F.code]=F}),g.value=a}}),ue()}),(m,l)=>{const D=L("van-switch"),a=L("van-checkbox"),F=L("ProSvg"),B=L("van-button"),$=L("ProPageWrap");return s(),E($,null,{default:I(()=>[h("div",Xe,[y(z,{title:"\u9996\u671F\u652F\u4ED8"},{default:I(()=>[y(U,{ref_key:"form1",ref:Y},{default:I(()=>[q("paymentMethod","INIT")?(s(),E(x,{key:0,modelValue:u.value.payMethod,"onUpdate:modelValue":l[0]||(l[0]=o=>u.value.payMethod=o),name:"payMethod",required:"",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":c(Z)},null,8,["modelValue","data-source"])):f("",!0),y(J,{modelValue:u.value.bankData,"onUpdate:modelValue":l[1]||(l[1]=o=>u.value.bankData=o),"holder-name":i.value,factor:g.value.INIT},null,8,["modelValue","holder-name","factor"])]),_:1},512)]),_:1}),y(z,{title:"\u7EED\u671F\u652F\u4ED8"},{default:I(()=>[y(U,{ref_key:"form2",ref:ee},{default:I(()=>[q("sameAsInit","RENEWAL")?(s(),E(O,{key:0,label:"\u540C\u9996\u671F",name:"payInfoType"},{input:I(()=>[y(D,{modelValue:t.value.payInfoType,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.payInfoType=o),size:"22","active-value":c(_).FIRST_SAME,"inactive-value":c(_).OTHER},null,8,["modelValue","active-value","inactive-value"])]),_:1})):f("",!0),q("paymentMethod","RENEWAL")?(s(),E(x,{key:1,modelValue:t.value.payMethod,"onUpdate:modelValue":l[3]||(l[3]=o=>t.value.payMethod=o),name:"payMethod",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":c(Z),required:""},null,8,["modelValue","data-source"])):f("",!0),q("overduePayment","RENEWAL")?(s(),E(x,{key:2,modelValue:t.value.expiryMethod,"onUpdate:modelValue":l[4]||(l[4]=o=>t.value.expiryMethod=o),name:"expiryMethod",label:"\u4FDD\u8D39\u903E\u671F\u672A\u652F\u4ED8","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":c(ye),required:"","label-width":"200"},null,8,["modelValue","data-source"])):f("",!0),t.value.payInfoType!==c(_).FIRST_SAME?(s(),E(J,{key:3,modelValue:t.value.bankData,"onUpdate:modelValue":l[5]||(l[5]=o=>t.value.bankData=o),"holder-name":i.value,factor:g.value.RENEWAL},null,8,["modelValue","holder-name","factor"])):f("",!0)]),_:1},512)]),_:1}),y(z,{title:"\u5E74\u91D1\u9886\u53D6\u94F6\u884C\u5361",class:"reprise-card","show-divider":!1},{default:I(()=>[h("div",Ye,[(s(!0),H(Be,null,Ae(c(Ke),(o,j)=>(s(),H("div",{key:j,class:Se(["reprise-card-item",{selected:N.value===o.value}]),onClick:sa=>Ee(o.value)},Ve(o.label),11,ea))),128))]),y(U,{ref_key:"form3",ref:ae},{default:I(()=>[N.value===c(_).OTHER?(s(),E(J,{key:0,modelValue:C.value.bankData,"onUpdate:modelValue":l[6]||(l[6]=o=>C.value.bankData=o),"holder-name":i.value,factor:g.value.ANNUITY},null,8,["modelValue","holder-name","factor"])):f("",!0)]),_:1},512)]),_:1}),h("div",aa,[y(a,{modelValue:K.value,"onUpdate:modelValue":l[7]||(l[7]=o=>K.value=o),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),ua,y(Me,{class:"file",title:"\u300A\u94F6\u884C\u8F6C\u8D26\u6388\u6743\u300B",url:c(Qe)},null,8,["url"])]),h("div",la,[c(W)?f("",!0):(s(),H("div",{key:0,class:"refresh-btn",onClick:Ie},[h("div",null,[y(F,{name:"refresh"})]),ta])),c(W)?f("",!0):(s(),E(Pe,{key:1,title:"\u9080\u8BF7\u60A8\u586B\u5199\u94F6\u884C\u5361\u4FE1\u606F",desc:"\u9080\u8BF7\u60A8\u586B\u5199\u94F6\u884C\u5361\u4FE1\u606F",link:c(be),"-":""},{default:I(()=>[y(B,{plain:"",type:"primary"},{default:I(()=>[oa]),_:1})]),_:1},8,["link"])),y(B,{type:"primary",class:"submit-btn",onClick:fe},{default:I(()=>[na]),_:1})])])]),_:1})}}});var fa=ie(ra,[["__scopeId","data-v-70cc9705"]]);export{fa as default};

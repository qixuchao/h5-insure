import{_ as e,d as i,r as a,z as l,o,ac as t,b as n,c as r,h as d,f as s,w as u,j as m,g as c,X as p,F as f,i as v,e as y,l as k,t as g,n as V,K as I,L as b,G as h,aA as L,x as D,a0 as C,k as O,at as R,aB as A,aC as P,y as x,aD as _,J as T,an as w,a6 as F}from"./index-637b8a09.js";import{S as M,d as U,e as q,f as N,A as E,g as Y,L as $,h as S}from"./trial-50e1d1d9.js";import{u as j}from"./useDicData-03a3598c.js";const B={class:"com-risk-list-wrapper"},G=(e=>(I("data-v-7d3c3028"),e=e(),b(),e))((()=>m("div",{class:"popup-title"},"选择附加险",-1))),H={class:"risk-list"},K={class:"cell-title"},z={class:"title"},J={class:"footer-button"};var X=e(i({__name:"index",props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const I=e,b=a([]),h=a([]),L=a([...I.disabled]),D=l({show:I.show,currentChecked:[...I.modelValue]}),C=e=>{var i,a,l;if(L.value.includes(e))return;((e,i)=>{if(!I.collocationList.length)return i?void(D.currentChecked=[]):void D.currentChecked.push(e);let a=D.currentChecked,l=L.value;i?(I.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?a=a.filter((a=>a!==i.collocationRiskId||a!==e)):3===i.collocationType?(a=a.filter((i=>i!==e)),l=l.filter((e=>e!==i.collocationRiskId))):a=a.filter((i=>i!==e)))})),D.currentChecked=a,L.value=l):(I.collocationList.forEach((o=>{e===o.riskId&&(i||(2===o.collocationType?a.push(o.collocationRiskId):3===o.collocationType&&l.push(o.collocationRiskId),a.push(e)))})),D.currentChecked.push(...a),L.value=l)})(e,D.currentChecked.includes(e)),null==(l=null==(a=null==(i=null==b?void 0:b.value)?void 0:i[e])?void 0:a.toggle)||l.call(a)},O=()=>{i("close")},R=()=>{const e=I.riskList.filter((e=>D.currentChecked.includes(e.id)));i("update:modelValue",[...new Set(h.value)]),i("finished",e,L.value),i("close")};return o((()=>{b.value=[]})),t((()=>D.currentChecked),(e=>{h.value=e}),{deep:!0,immediate:!0}),t((()=>I.modelValue),(e=>{h.value=e||[],L.value.push(...e||[])}),{deep:!0,immediate:!0}),(i,a)=>{const l=n("van-checkbox"),o=n("VanCell"),t=n("van-cell-group"),I=n("van-checkbox-group"),A=n("VanButton"),P=n("VanPopup");return r(),d("div",B,[s(P,{show:c(D).show,"onUpdate:show":a[1]||(a[1]=e=>c(D).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:O},{default:u((()=>[G,m("div",H,[s(I,{modelValue:c(h),"onUpdate:modelValue":a[0]||(a[0]=e=>p(h)?h.value=e:null)},{default:u((()=>[s(t,{inset:""},{default:u((()=>[(r(!0),d(f,null,v(e.riskList,(e=>(r(),y(o,{key:e.id,title:e.riskName,disabled:c(L).includes(e.id),onClick:i=>C(e.id)},{"right-icon":u((()=>[s(l,{ref_for:!0,ref:i=>c(b)[e.id]=i,shape:"square",disabled:c(L).includes(e.id),name:e.id,onClick:k((i=>C(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:u((()=>[m("div",K,[m("div",z,g(e.riskName),1)])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),m("div",J,[s(A,{type:"primary",disabled:!c(D).currentChecked.length,block:"",onClick:R},{default:u((()=>[V("确认")])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-7d3c3028"]]);const Q={class:"com-personal-info-wrapper"},W={class:"pro-radio-wrap"},Z={class:"pro-radio-wrap"};var ee=e(i({__name:"index",props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(e,{expose:i}){var o,t;const f=e,v=j(`${null==(t=null==(o=f.insuredCode)?void 0:o.toLocaleUpperCase)?void 0:t.call(o)}_OCCUPATION`),[k,g]=h(),V=a(),I=L("source")||{},b=l({formInfo:f.formInfo,occupationalText:"",occupationCodeList:[]}),P=D((()=>{const e=(e=>{const i=e||[];for(let a=0,l=i.length;a<l;a++)for(let e=a+1;e<l;e++){const l=i[a].split("_"),o=i[e].split("_"),t=i[a];l[0]===o[0]?l>o&&(i[a]=i[e],i[e]=t):"age"===l[0]&&(i[a]=i[e],i[e]=t)}return i})(null==f?void 0:f.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],a=i(e[0]),l=i(e[e.length-1]),o=C().subtract(a[0],"age"===a[1]?"year":"day").format("YYYY-MM-DD");let t=C().subtract(l[0],"age"===l[1]?"year":"day").format("YYYY-MM-DD");return C(t).subtract(1,"year").isBefore(o)&&(t=C(t).subtract(1,"year").add(1,"day").format("YYYY-MM-DD")),{minAge:new Date(t),maxAge:new Date(o)}}));return i({validateForm:()=>new Promise(((e,i)=>{var a;null==(a=V.value)||a.validate().then((()=>{e("")}),(e=>{var a;null==(a=V.value)||a.scrollToField(null==e?void 0:e[0].name),i()}))})),ageRangeObj:P.value}),(i,a)=>{const l=n("VanField"),o=n("ProRadioButton"),t=n("VanForm"),f=n("van-datetime-picker"),h=n("van-popup");return r(),d("div",Q,[s(t,{ref_key:"formRef",ref:V,"input-align":"right","error-message-align":"right"},{default:u((()=>["proposal"===c(I).type&&("add"===c(I).type||"repeatAdd"===c(I).type)||"proposal"!==c(I).type&&(e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY"))?(r(),y(l,{key:0,modelValue:c(b).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>c(b).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink",readonly:"","is-link":"",formatter:e=>e?c(C)(e).format("YYYY-MM-DD"):e,placeholder:"请选择",onClick:a[1]||(a[1]=e=>c(g)(!0))},null,8,["modelValue","formatter"])):O("",!0),"proposal"===c(I).type&&("add"===c(I).type||"repeatAdd"===c(I).type)||"proposal"!==c(I).type&&(e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER"))?(r(),y(l,{key:1,modelValue:c(b).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>c(b).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:u((()=>[m("div",W,[s(o,{modelValue:c(b).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>c(b).formInfo.gender=e),options:c(R)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):O("",!0),e.factorList.includes("SOCIAL_INS")||e.factorList.includes("APPLICANT.SOCIAL_INS")?(r(),y(l,{key:2,modelValue:c(b).formInfo.socialFlag,"onUpdate:modelValue":a[5]||(a[5]=e=>c(b).formInfo.socialFlag=e),name:"socialFlag",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:u((()=>[m("div",Z,[s(o,{modelValue:c(b).formInfo.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=e=>c(b).formInfo.socialFlag=e),options:c(M)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):O("",!0),e.factorList.includes("OCCUPATION_CATEGORY")||e.factorList.includes("APPLICANT.OCCUPATION_CATEGORY")?(r(),y(A,{key:3,modelValue:c(b).formInfo.occupationCodeList[0],"onUpdate:modelValue":a[6]||(a[6]=e=>c(b).formInfo.occupationCodeList[0]=e),field0:c(b).formInfo.occupationCodeList[0],"onUpdate:field0":a[7]||(a[7]=e=>c(b).formInfo.occupationCodeList[0]=e),field1:c(b).formInfo.occupationCodeList[1],"onUpdate:field1":a[8]||(a[8]=e=>c(b).formInfo.occupationCodeList[1]=e),field2:c(b).formInfo.occupationCodeList[2],"onUpdate:field2":a[9]||(a[9]=e=>c(b).formInfo.occupationCodeList[2]=e),required:"",name:"occupationCodeList",label:"职业类型","data-source":c(v),mapping:{label:"value",value:"code",children:"children"},"show-full-value":"","need-key":"name"},null,8,["modelValue","field0","field1","field2","data-source"])):O("",!0)])),_:1},512),s(h,{show:c(k),"onUpdate:show":a[12]||(a[12]=e=>p(k)?k.value=e:null),position:"bottom"},{default:u((()=>[s(f,{type:"date","min-date":c(P).minAge,"max-date":c(P).maxAge,onConfirm:a[10]||(a[10]=e=>{c(b).formInfo.birthday=c(C)(e).format("YYYY-MM-DD"),c(g)(!1)}),onCancel:a[11]||(a[11]=e=>c(g)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-b6a7c104"]]);const ie={class:"risk-responsibility"},ae={class:"title"},le={class:"content"};var oe=e(i({__name:"index",props:{modelValue:Boolean,title:{type:String,default:""},minHeight:{type:[Number,String],default:80},maxHeight:{type:[Number,String],default:200}},emits:["update:modelValue"],setup(e,{emit:i}){const l=e;P();const o=a();x((()=>{o.value=l.modelValue}));const t=D((()=>o.value?`${l.maxHeight}px`:`${l.minHeight}px`)),u=()=>{o.value=!o.value,i("update:modelValue",o.value)};return(i,a)=>{const l=n("ProSvg");return r(),d("div",ie,[m("div",ae,g(e.title),1),m("div",{class:"responsibility-content",style:T({height:c(t)})},[m("div",le,[_(i.$slots,"default",{},void 0,!0)]),m("div",{class:"show-button",onClick:u},[m("span",null,g(c(o)?"收起":"展开"),1),s(l,{style:{width:"20px",height:"20px"},name:c(o)?"arrow-up":"arrow-down"},null,8,["name"])])],4)])}}}),[["__scopeId","data-v-27faf794"]]);const te={class:"com-risk-card-wrapper part-card"},ne={class:"custom-field"},re={class:"field-tip"},de={class:"custom-field"},se={class:"field-tip"},ue={class:"custom-field"},me={class:"field-tip"},ce={class:"pro-radio-wrap"},pe={class:"pro-radio-wrap"},fe={class:"pro-radio-wrap"},ve={class:"pro-radio-wrap"},ye={class:"pro-radio-wrap"},ke={key:0},ge={key:1,class:"pro-radio-wrap"},Ve={key:9,class:"liab-desc"};var Ie=e(i({__name:"index",props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(e){const i=e,o=a({}),p=L("premium")||{};o.value=L("enumList")||{};const k=a({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),V=l({formInfo:i.formInfo}),I=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"[object Object]"==={}.toString.call(e)&&Object.keys(e).length),b=(e,i,a={})=>{let l=i;return Array.isArray(i)||(l=[`${l}`]),(e||[]).filter((e=>l.includes(`${e.value}`)||l.includes(e.value)))},h=D((()=>{var e,a,l,o,t,n,r,d;return 1===(null==(e=i.originData)?void 0:e.riskType)?b(i.enums.RISK_INSURANCE_PERIOD,(null==(a=i.originData.riskInsureLimitVO)?void 0:a.insurancePeriodValueList)||[]):2===(null==(l=i.originData)?void 0:l.periodType)?b([{value:"year_1",name:"1年"}],["year_1"]):1===(null==(o=i.originData)?void 0:o.exemptFlag)?b(U,[`${null==(n=null==(t=null==i?void 0:i.originData)?void 0:t.riskInsureLimitVO)?void 0:n.insurancePeriodRule}`]):b(null==(r=i.enums)?void 0:r.RISK_INSURANCE_PERIOD,(null==(d=i.mainRiskData.riskInsureLimitVO)?void 0:d.insurancePeriodValueList)||[])})),C=D((()=>{var e,a,l,o,t,n,r,d;return 1===(null==(e=i.originData)?void 0:e.riskType)?b(null==(a=null==i?void 0:i.enums)?void 0:a.RISK_PAYMENT_PERIOD,(null==(l=i.originData.riskInsureLimitVO)?void 0:l.paymentPeriodValueList)||[]):1===(null==(o=i.originData)?void 0:o.exemptFlag)?b(q,[`${null==(n=null==(t=null==i?void 0:i.originData)?void 0:t.riskInsureLimitVO)?void 0:n.paymentPeriodRule}`]):2===(null==(r=i.originData)?void 0:r.periodType)?b([{value:"year_1",name:"1年交"}],["year_1"]):b(i.enums.RISK_PAYMENT_PERIOD,(null==(d=i.mainRiskData.riskInsureLimitVO)?void 0:d.paymentPeriodValueList)||[])})),R=D((()=>{var e,a,l,o,t;return 1===(null==(e=i.originData)?void 0:e.riskType)?b(N,(null==(a=i.originData.riskInsureLimitVO)?void 0:a.paymentFrequencyList)||[]):1===(null==(l=i.originData.riskInsureLimitVO)?void 0:l.paymentTypeRule)?b(N,(null==(o=i.mainRiskData.riskInsureLimitVO)?void 0:o.paymentFrequencyList)||[]):b(N,(null==(t=i.mainRiskData.riskInsureLimitVO)?void 0:t.paymentFrequencyList)||[])})),A=D((()=>{var e,a;let l=0,o=0;return((null==(a=null==(e=i.originData)?void 0:e.riskCalcMethodInfoVO)?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minAmount,o=e.maxAmount),l>e.minAmount&&(l=e.minAmount),o<e.maxAmount&&(o=e.maxAmount)})),V.formInfo.amount=V.formInfo.amount||l,{min:l,max:o||1/0}})),P=D((()=>{var e,a;let l=0,o=0;return((null==(a=null==(e=i.originData)?void 0:e.riskCalcMethodInfoVO)?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minPremium,o=e.maxPremium),l>e.minPremium&&(l=e.minPremium),o<e.maxPremium&&(o=e.maxPremium)})),V.formInfo.premium=V.formInfo.premium||l,{min:l,max:o||1/0}})),x=D((()=>{var e,a,l,o;const t=(null==(a=null==(e=i.originData)?void 0:e.riskCalcMethodInfoVO)?void 0:a.minCopy)||1,n=null==(o=null==(l=i.originData)?void 0:l.riskCalcMethodInfoVO)?void 0:o.maxCopy;return V.formInfo.copy=`${V.formInfo.copy||t||1}`,{min:t,max:n}})),_=(e,a,l)=>{var o,t;const n=(null==(t=null==(o=i.originData)?void 0:o.riskCalcMethodInfoVO)?void 0:t.increaseDecreaseNum)||1;if("sumInsured"===l){if(A.value.max&&+e>A.value.max)return`金额最大${A.value.max}元`;if(+e<A.value.min)return`金额最小${A.value.min}元`}else{if(P.value.max&&+e>P.value.max)return`金额最大${P.value.max}元`;if(+e<P.value.min)return`金额最小${P.value.min}元`}return+e%n==0?"":`金额必须是${n}的倍数`},T=e=>{var i;const a=((null==(i=V.formInfo)?void 0:i.liabilityVOList)||[]).find((i=>i.liabilityCode===e.liabilityCode));return a?a.liabilityAttributeValue?a.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return w((()=>{var e,a,l,o;const t={riskType:i.originData.riskType,riskId:i.originData.id,riskName:i.originData.riskName,riskCode:i.originData.riskCode,amount:V.formInfo.amount,mainRiskCode:1!==i.originData.riskType?null==(e=i.mainRiskData)?void 0:e.riskCode:void 0,mainRiskId:1!==i.originData.riskType?null==(a=i.mainRiskData)?void 0:a.id:void 0,exemptFlag:i.originData.exemptFlag,exemptType:i.originData.exemptType,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType,liabilityAttributeValue:T(e)})))};[1].includes((null==(l=i.originData.riskCalcMethodInfoVO)?void 0:l.saleMethod)||0)&&1!==(null==(o=i.originData)?void 0:o.exemptFlag)||!i.originData.riskCalcMethodInfoVO.fixedAmount||(t.amount=i.originData.riskCalcMethodInfoVO.fixedAmount),Object.assign(V.formInfo,t)})),t((()=>{var e;return null==(e=V.formInfo)?void 0:e.paymentFrequency}),((e=0)=>{var a,l,o;[3].includes((null==(a=i.originData.riskCalcMethodInfoVO)?void 0:a.saleMethod)||0)&&((null==(o=null==(l=i.originData)?void 0:l.riskCalcMethodInfoVO)?void 0:o.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(V.formInfo,{amount:i.perCopyAmount,premium:i.perCopyPremium})})),1==+e&&"single"!==V.formInfo.chargePeriod&&(V.formInfo.chargePeriod="single")})),t((()=>{var e;return null==(e=V.formInfo)?void 0:e.copy}),(e=>{var a,l;4===(null==(a=i.originData.riskCalcMethodInfoVO)?void 0:a.saleMethod)&&(V.formInfo.amount=null==(l=i.originData.riskCalcMethodInfoVO)?void 0:l.fixedAmount)})),t((()=>{var e;return null==(e=V.formInfo)?void 0:e.chargePeriod}),(e=>{"single"===e&&1!=+(V.formInfo.paymentFrequency||0)&&(V.formInfo.paymentFrequency=1)})),t((()=>null==i?void 0:i.mainRiskInfo),(e=>{var a,l,o,t,n,r;e&&2===i.originData.riskType&&(1===(null==(l=null==(a=i.originData)?void 0:a.riskInsureLimitVO)?void 0:l.insurancePeriodRule)&&(e.coveragePeriod?k.value.coveragePeriod.disabled=!0:k.value.coveragePeriod.prevent=!0,V.formInfo.coveragePeriod=e.coveragePeriod||""),1===(null==(t=null==(o=i.originData)?void 0:o.riskInsureLimitVO)?void 0:t.paymentPeriodRule)&&(e.chargePeriod?k.value.chargePeriod.disabled=!0:k.value.chargePeriod.prevent=!0,V.formInfo.chargePeriod=e.chargePeriod||""),1===(null==(r=null==(n=i.originData)?void 0:n.riskInsureLimitVO)?void 0:r.paymentTypeRule)&&(e.paymentFrequency?k.value.paymentFrequency.disabled=!0:k.value.paymentFrequency.prevent=!0,V.formInfo.paymentFrequency=e.paymentFrequency||0))}),{immediate:!0,deep:!0}),(i,a)=>{var l,o,t,L,D,T,w,F,M,U,q,N,j,B,G,H,K,z,J,X,Q,W,Z,ee,ie,ae,le,Ie,be,he;const Le=n("ProSvg"),De=n("ProTitle"),Ce=n("VanStepper"),Oe=n("VanField"),Re=n("ProRadioButton"),Ae=n("ProField");return r(),d("div",te,[s(De,{"risk-type":e.originData.riskType,title:e.originData.riskName},{default:u((()=>[e.removeRiskList.includes(e.originData.id)?(r(),d("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=i=>e.removeRisk(e.originData.id))},[s(Le,{name:"img-lajitong",color:"#0d6efe"})])):O("",!0)])),_:1},8,["risk-type","title"]),1===(null==(l=e.originData.riskCalcMethodInfoVO)?void 0:l.saleMethod)&&2===e.originData.exemptFlag?(r(),y(Oe,{key:0,modelValue:c(V).formInfo.amount,"onUpdate:modelValue":a[2]||(a[2]=e=>c(V).formInfo.amount=e),label:"保额",name:"amount",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>_(...e,"sumInsured")}]},{input:u((()=>{var i,l;return[m("div",ne,[s(Ce,{modelValue:c(V).formInfo.amount,"onUpdate:modelValue":a[1]||(a[1]=e=>c(V).formInfo.amount=e),"input-width":"64px",min:c(A).min,step:(null==(i=e.originData.riskCalcMethodInfoVO)?void 0:i.increaseDecreaseNum)||1,max:c(A).max},null,8,["modelValue","min","step","max"]),m("span",re,g(`金额最低${c(A).min}元，为${(null==(l=e.originData.riskCalcMethodInfoVO)?void 0:l.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):O("",!0),2===(null==(t=null==(o=e.originData)?void 0:o.riskCalcMethodInfoVO)?void 0:t.saleMethod)?(r(),y(Oe,{key:1,modelValue:c(V).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>c(V).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>_(...e,"premium")}]},{input:u((()=>{var i,l,o,t;return[m("div",de,[s(Ce,{modelValue:c(V).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>c(V).formInfo.premium=e),step:(null==(l=null==(i=e.originData)?void 0:i.riskCalcMethodInfoVO)?void 0:l.increaseDecreaseNum)||1,min:c(P).min,"input-width":"64px",max:c(P).max},null,8,["modelValue","step","min","max"]),m("span",se,g(`金额最低${c(P).min}元，为${(null==(t=null==(o=e.originData)?void 0:o.riskCalcMethodInfoVO)?void 0:t.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):O("",!0),3===(null==(D=null==(L=e.originData)?void 0:L.riskCalcMethodInfoVO)?void 0:D.saleMethod)||4===(null==(w=null==(T=e.originData)?void 0:T.riskCalcMethodInfoVO)?void 0:w.saleMethod)&&((null==(M=null==(F=e.originData)?void 0:F.riskCalcMethodInfoVO)?void 0:M.minCopy)||(null==(q=null==(U=e.originData)?void 0:U.riskCalcMethodInfoVO)?void 0:q.maxCopy))?(r(),y(Oe,{key:2,modelValue:c(V).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>c(V).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:u((()=>[m("div",ue,[s(Ce,{modelValue:c(V).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>c(V).formInfo.copy=e),step:1,min:c(x).min,max:c(x).max},null,8,["modelValue","min","max"]),m("span",me,g(`${c(x).min}份起购，最多购买${c(x).max}份`),1)])])),_:1},8,["modelValue"])):O("",!0),[1].includes((null==(N=e.originData.riskCalcMethodInfoVO)?void 0:N.saleMethod)||0)&&1!==(null==(j=e.originData)?void 0:j.exemptFlag)||!e.originData.riskCalcMethodInfoVO.fixedAmount&&!(null==(G=c(p))?void 0:G[null==(B=e.originData)?void 0:B.riskCode])?O("",!0):(r(),y(Oe,{key:3,label:"保额"},{input:u((()=>{var i,a,l,o;return[m("div",null,g((null==(i=e.originData.riskCalcMethodInfoVO)?void 0:i.fixedAmount)||(null==(o=null==(l=c(p))?void 0:l[null==(a=e.originData)?void 0:a.riskCode])?void 0:o.amount)),1)]})),_:1})),I(null==(K=null==(H=e.originData)?void 0:H.riskInsureLimitVO)?void 0:K.insurancePeriodValueList)&&I(null==(J=null==(z=e.originData)?void 0:z.riskInsureLimitVO)?void 0:J.insurancePeriodRule)?O("",!0):(r(),y(Ae,{key:4,modelValue:c(V).formInfo.coveragePeriod,"onUpdate:modelValue":a[8]||(a[8]=e=>c(V).formInfo.coveragePeriod=e),label:"保障期间",name:"coveragePeriod",rules:[{required:!0,message:"请选择保障期间"}]},{input:u((()=>[m("div",ce,[s(Re,{modelValue:c(V).formInfo.coveragePeriod,"onUpdate:modelValue":a[7]||(a[7]=e=>c(V).formInfo.coveragePeriod=e),disabled:c(k).coveragePeriod.disabled,prevent:c(k).coveragePeriod.prevent?"请先选择主险保障期间":"",options:c(h),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),I(null==(Q=null==(X=e.originData)?void 0:X.riskInsureLimitVO)?void 0:Q.paymentPeriodValueList)&&I(null==(Z=null==(W=e.originData)?void 0:W.riskInsureLimitVO)?void 0:Z.paymentPeriodRule)?O("",!0):(r(),y(Ae,{key:5,modelValue:c(V).formInfo.chargePeriod,"onUpdate:modelValue":a[10]||(a[10]=e=>c(V).formInfo.chargePeriod=e),label:"交费期间",name:"chargePeriod",rules:[{required:!0,message:"请选择交费期间"}]},{input:u((()=>[m("div",pe,[s(Re,{modelValue:c(V).formInfo.chargePeriod,"onUpdate:modelValue":a[9]||(a[9]=e=>c(V).formInfo.chargePeriod=e),disabled:c(k).chargePeriod.disabled,prevent:c(k).chargePeriod.prevent?"请先选择主险交费期间":"",options:c(C),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),I(null==(ee=e.originData.riskInsureLimitVO)?void 0:ee.paymentFrequencyList)&&I(null==(ie=e.originData.riskInsureLimitVO)?void 0:ie.paymentPeriodRule)?O("",!0):(r(),y(Ae,{key:6,modelValue:c(V).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>c(V).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:u((()=>[m("div",fe,[s(Re,{modelValue:c(V).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>c(V).formInfo.paymentFrequency=e),disabled:c(k).paymentFrequency.disabled,prevent:c(k).paymentFrequency.prevent?"请先选择主险交费方式":"",options:c(R)},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),I(null==(le=null==(ae=e.originData)?void 0:ae.riskInsureLimitVO)?void 0:le.annuityDrawValueList)?O("",!0):(r(),y(Ae,{key:7,modelValue:c(V).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>c(V).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate"},{input:u((()=>{var i;return[m("div",ve,[s(Re,{modelValue:c(V).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>c(V).formInfo.annuityDrawDate=e),options:b(c(E),(null==(i=e.originData.riskInsureLimitVO)?void 0:i.annuityDrawValueList)||[])},null,8,["modelValue","options"])])]})),_:1},8,["modelValue"])),I(null==(be=null==(Ie=e.originData)?void 0:Ie.riskInsureLimitVO)?void 0:be.annuityDrawFrequencyList)?O("",!0):(r(),y(Ae,{key:8,modelValue:c(V).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>c(V).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType"},{input:u((()=>{var i;return[m("div",ye,[s(Re,{modelValue:c(V).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>c(V).formInfo.annuityDrawType=e),options:b(c(Y),(null==(i=e.originData.riskInsureLimitVO)?void 0:i.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])])]})),_:1},8,["modelValue"])),(r(!0),d(f,null,v(e.originData.riskLiabilityInfoVOList||[],((i,a)=>(r(),d(f,{key:a},[1!==i.optionalFlag||I(i.liabilityAttributeValueList)?O("",!0):(r(),y(Oe,{key:0,modelValue:c(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>c(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:u((()=>{var l,o;return[m("div",null,[I(i.liabilityAttributeValueList)?(r(),d("span",ke,"50万")):(r(),d("div",ge,[s(Re,{modelValue:c(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>c(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:b(c($),null==(o=null==(l=e.originData.riskLiabilityInfoVOList)?void 0:l[a])?void 0:o.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"])]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])),1!==i.optionalFlag?(r(),y(Oe,{key:1,modelValue:c(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>c(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:u((()=>{var l,o;return[m("div",null,[I(i.liabilityAttributeValueList)?(r(),y(Re,{key:0,modelValue:c(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>c(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:c(S)},null,8,["modelValue","onUpdate:modelValue","options"])):(r(),y(Re,{key:1,modelValue:c(V).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>c(V).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:b(c($),null==(o=null==(l=e.originData.riskLiabilityInfoVOList)?void 0:l[a])?void 0:o.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"])):O("",!0)],64)))),128)),(null==(he=e.originData)?void 0:he.relationDesc)?(r(),d("div",Ve,[s(oe,{title:"责任投保说明"},{default:u((()=>[m("div",null,g(e.originData.relationDesc),1)])),_:1})])):O("",!0)])}}}),[["__scopeId","data-v-3b9c2786"]]);const be={class:"risk-list-wrapper"},he={key:0,class:"add-rider-risk"},Le={class:"left-part"},De=(e=>(I("data-v-4b309d85"),e=e(),b(),e))((()=>m("span",{class:"btn-plus"},"+",-1)));var Ce=e(i({__name:"index",props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(e){const i=e,o=L("source")||{},[p,k]=h(!1);a(null),a(null);const I=l({mainRiskInfo:i.riskInfo,riskInfo:i.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),b=(e,i)=>{I.currentRiskList=I.currentRiskList.concat(e),I.disabledList=i},D=e=>{F.confirm({message:"确定要删除附加险么？",confirmButtonText:"删除"}).then((()=>{var i;const a=[e];((null==(i=I.mainRiskData)?void 0:i.collocationVOList)||[]).forEach((i=>{e!==i.riskId||2!==i.collocationType&&3!==i.collocationType||a.push(i.collocationRiskId)})),I.checkedList=I.checkedList.filter((e=>!a.includes(e))),I.currentRiskList=I.currentRiskList.filter((e=>!a.includes(e.id)||(Object.assign(I.riskInfo,{[e.id]:void 0}),!1))),I.disabledList=I.disabledList.filter((e=>!a.includes(e)))})).catch((()=>{}))},C=(e,i)=>{var a,l;const o=((null==(l=null==(a=I.riskInfo)?void 0:a[i])?void 0:l.liabilityVOList)||[]).find((i=>i.liabilityCode===e.liabilityCode));return o?o.liabilityAttributeValue?o.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return t((()=>I.currentRiskList),(e=>{const a=[I.mainRiskData,...e];let l=[],o=[];const t=[];a.forEach(((e,i)=>{var a,n,r;const d=(null==(a=null==e?void 0:e.riskCalcMethodInfoVO)?void 0:a.riskFactorRelationList)||[];l=l.concat(d.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),o=o.concat(d.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),t.push(null==(n=null==e?void 0:e.riskInsureLimitVO)?void 0:n.minHolderAge,null==(r=null==e?void 0:e.riskInsureLimitVO)?void 0:r.maxHolderAge)})),(e||[]).forEach((e=>{var a,l;const o={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,riskName:e.riskName,mainRiskCode:1!==e.riskType?null==(a=I.mainRiskData)?void 0:a.riskCode:void 0,mainRiskId:1!==e.riskType?null==(l=I.mainRiskData)?void 0:l.id:void 0,riskCategory:e.riskCategory,exemptFlag:i.originData.exemptFlag,exemptType:i.originData.exemptType,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((i=>({...i,liabilityAttributeCode:i.liabilityAttributeType,liabilityCode:i.liabilityCode,liabilityRateType:i.liabilityRateType,liabilityAttributeValue:C(i,e.id)})))};I.riskInfo[e.id]||Object.assign(I.riskInfo,{[e.id]:o})})),i.pickFactor({insuredFactorList:[...new Set(l)],holderFactorList:[...new Set(o)],ageRange:t})}),{deep:!0,immediate:!0}),t((()=>i.riskInfo),(e=>{I.mainRiskInfo=Object.values(e||{}).find((e=>1===(null==e?void 0:e.riskType)))||{}}),{deep:!0,immediate:!0}),t((()=>i.originData),(e=>{let i=[];const a=[];"proposal"===o.origin&&"add"!==o.type&&"repeatAdd"!==o.type?((e||[]).forEach((e=>{1===e.riskType&&(I.mainRiskData=e),i.push(e)})),i=i.filter((e=>o.showRiskList.includes(e.id)))):(e||[]).forEach((e=>{1===e.riskType?(I.mainRiskData=e,i.push(e)):2===e.collocationType?i.push(e):a.push(e)})),I.riderRiskList=a,I.currentRiskList=i}),{deep:!0,immediate:!0}),(i,a)=>{var l,t,h;const L=n("ProCheckButton");return r(),d("div",be,[(r(!0),d(f,null,v(c(I).currentRiskList,((i,a)=>(r(),y(Ie,{key:i.id,"form-info":c(I).riskInfo[i.id],index:a,enums:e.enums,"main-risk-data":c(I).mainRiskData,"main-risk-info":c(I).mainRiskInfo,"origin-data":i,"remove-risk":D,"remove-risk-list":c(I).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),(null==(l=c(I).riderRiskList)?void 0:l.length)-(null==(t=c(I).checkedList)?void 0:t.length)&&"proposal"!==c(o).origin?(r(),d("div",he,[m("span",Le,g(`共有${c(I).riderRiskList.length-c(I).checkedList.length}款附加险可以添加`),1),s(L,{activated:"",class:"btn-rider-risk",onClick:a[0]||(a[0]=e=>c(k)(!0))},{default:u((()=>[De,V(" 附加险")])),_:1})])):O("",!0),c(p)?(r(),y(X,{key:1,modelValue:c(I).checkedList,"onUpdate:modelValue":a[1]||(a[1]=e=>c(I).checkedList=e),show:c(p),disabled:c(I).disabledList,"risk-list":c(I).riderRiskList,"collocation-list":(null==(h=c(I).mainRiskData)?void 0:h.collocationVOList)||[],onFinished:b,onClose:a[2]||(a[2]=e=>c(k)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):O("",!0)])}}}),[["__scopeId","data-v-4b309d85"]]);export{ee as P,X as R,Ce as a};

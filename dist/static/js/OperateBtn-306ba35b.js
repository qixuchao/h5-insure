import{d as e,h as r,i as a,k as t,ai as o,o as n,c as s,u as d,m as i,w as l,a8 as c,cU as u,f as p,_ as m,a6 as h,aK as f,cr as y,cs as C,ct as g}from"./index-b538fd82.js";import{P as I}from"./constants-4b08cf92.js";import{c as N}from"./order-e36aa5c0.js";const S={class:"operate-wrap"},k=e({name:"operateBtn"});var $=m(e({...k,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:m}){const k=e,$=r(),v=a(),{tenantId:x,nextPageCode:P,isShare:_}=v.query,w=t((()=>{const{orderTopStatus:e,productClassFlag:r,orderStatus:a}=k.detail;return!("-1"!==e||I.orderList!==v.path||"underWritingFailed"===a&&r===h.YES||["manualUnderWriting","offlinePayment"].includes(a))})),q=t((()=>{const{policyNo:e,applicationNo:r,orderStatus:a}=k.detail;return!e&&r&&"cancel"!==a})),z=t((()=>{const{orderStatus:e}=k.detail;return["offlinePayment","manualUnderWriting","paymentFailed"].includes(e)})),D=()=>{const{orderStatus:e,orderNo:r,insurerCode:a,underwriteFlag:t}=k.detail;let o=I.sign;("collectInfo"===e||"underWritingFailed"===e&&t===h.NO)&&(o=I.infoCollection),$.push({path:o,query:{...v.query,tenantId:x,orderNo:r,insurerCode:a}})},F=()=>{const{orderNo:e,orderId:r}=k.detail;_?f.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{m("handleCancel")})):N({tenantId:x,orderNo:e,type:1}).then((({code:e,data:r})=>{"10000"===e&&f.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:r,holderGender:a,orderId:t,orderNo:o,insurerCode:n}=k.detail||{},s=r,d=`${y[a]}士`;C({shareType:0,title:`${g.cancel.title}`,desc:g.cancel.desc.replace("{name}",`${s}${d},`),url:`${window.location.href}&objectType=${e}&insurerCode=${n}&isShare=1&orderNo=${o}&orderId=${t}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/lian_logo.png?OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Expires=1697288114&Signature=S87PMeDRxltLovmmHVTeiHoew1c%3D"})})("holder")}))}))},T=()=>{const{orderNo:e,orderId:r,insurerCode:a}=k.detail;$.push({path:I.updateBankInfo,query:{tenantId:x,orderNo:e,orderId:r,insurerCode:a,nextPageCode:"orderDetail"}})};return(e,r)=>{const a=o;return n(),s("div",S,[d(w)?(n(),i(a,{key:0,type:"primary",size:"small",onClick:u(D,["stop"])},{default:l((()=>[c("去处理")])),_:1},8,["onClick"])):p("",!0),d(q)?(n(),i(a,{key:1,type:"primary",plain:"",size:"small",onClick:u(F,["stop"])},{default:l((()=>[c("撤单")])),_:1},8,["onClick"])):p("",!0),d(z)?(n(),i(a,{key:2,plain:"",size:"small",onClick:u(T,["stop"])},{default:l((()=>[c("银行卡修改")])),_:1},8,["onClick"])):p("",!0)])}}}),[["__scopeId","data-v-3428d448"]]);export{$ as O};

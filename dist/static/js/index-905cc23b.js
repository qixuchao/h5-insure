import{d as e,cd as l,r as a,H as t,ag as n,ae as s,M as i,bM as u,a4 as o,b as r,c as d,f as c,i as v,V as p,W as m,x as f,v as C,Y as _,X as y,g as k,e as A,O as E,a5 as L,w as g,ac as h,a8 as I,y as b,cm as S,cn as w,as as O,a7 as x,aa as T,ad as M,R as F,U as P,aE as R,aF as N,aB as U,bS as W,aw as D,co as V,h as j}from"./index-eff7527d.js";import{o as B}from"./utils-17cd6f9d.js";import{C as $}from"./infoCollection-dec1d9ca.js";const z={class:"guarantee-list"},G=(e=>(F("data-v-0d8cdcd6"),e=e(),P(),e))((()=>c("span",null,"保障计划",-1))),Q={key:0,class:"plan-list"},q=["onClick"],Y={key:2,class:"feerate-view"},H={key:0},K={class:"extinfo-info-list"},X={class:"guarantee-detail"},J={class:"content"},Z=e({name:"guarantee"});var ee=b(e({...Z,props:{dataSource:{default:()=>({})},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{default:5},planList:{default:()=>[]}},emits:["updateActivePlan"],setup(e,{emit:b}){var F,P;const R=e;l((e=>({"3f16335a":v(N)})));const N=a(""),U=a((null==(P=null==(F=R.planList)?void 0:F[0])?void 0:P.planCode)||void 0),W=a(),D=a([]),V=a([]),j=a(),$=t((()=>!!R.planList.length));n([()=>R.dataSource,()=>U.value],(()=>{var e,l;D.value=((null==(l=((null==(e=R.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===U.value)))?void 0:l.data)||[]).filter((e=>e.isShowOn===`${s.YES}`))}),{immediate:!0,deep:!0});const Z=t((()=>{var e;return(null==(e=R.dataSource)?void 0:e.rateUri)||""})),ee=t((()=>!!(j.value&&j.value.paymentFrequencyValue&&j.value.premiumUnit&&Z))),[le,ae]=i(!1),te=t((()=>{var e;return!(!D.value||!(null==(e=D.value)?void 0:e.length))&&(D.value.length>R.count&&(!!R.isShowClose||!le.value))})),ne=()=>{ae()},se=t((()=>{var e;return D.value&&(null==(e=D.value)?void 0:e.length)?D.value.length<=R.count||le.value?D.value:D.value.slice(0,R.count):[]})),ie=a(!1),ue=e=>{const l=e||window.event;l.preventDefault?l.preventDefault():l.returnValue=!1,l.stopPropagation?l.stopPropagation():l.cancelBubble=!0,"A"===l.target.tagName&&l.target.href&&(S()?w("",l.target.href):window.open(l.target.href))},oe=()=>{ie.value=!0,O((()=>{var e,l;null==(l=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||l.addEventListener("click",ue,!1)}))};u((()=>{var e,l;null==(l=null==(e=document.getElementsByClassName("guarantee-detail"))?void 0:e[0])||l.removeEventListener("click",ue,!1)}));const re=()=>{B({fileType:"pdf",fileUri:Z.value})},de=e=>{U.value=R.planList[e.name].planCode};return(l,a)=>{var t,n;const s=x,i=T,u=M,S=o("dompurify-html");return r(),d(p,null,[c("div",z,[c("div",{class:"header"},[G,c("span",{onClick:oe},"查看详情")]),v($)?(r(),d("div",Q,[(r(!0),d(p,null,m(e.planList,((e,l)=>(r(),d("div",{key:`${e.planCode}_${l}`,class:f("plan-list-item "+(e.planCode===v(U)?"plan-list-item-active":"")),onClick:l=>{return a=e.planCode,U.value=a,W.value=R.planList.findIndex((e=>e.planCode===a)),void b("updateActivePlan",a);var a}},[c("span",null,C(e.planName),1)],10,q)))),128))])):_("",!0),(r(!0),d(p,null,m(v(se),((e,l)=>(r(),y(s,{key:l,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),v(te)?(r(),d("div",{key:1,class:"show-more",onClick:ne},[k(C(v(le)?"收起":"查看更多")+" ",1),A(E,{name:"arrow-down-dobule",class:f(["icon",{showMore:v(le)}])},null,8,["class"])])):_("",!0),v(ee)?(r(),d("div",Y,[c("span",null,C(`${(null==(t=v(j))?void 0:t.paymentFrequencyValue)||""}${(null==(n=v(j))?void 0:n.premiumUnit)||""}`),1),v(Z)?(r(),d("span",{key:0,onClick:re},"查看保费")):_("",!0)])):_("",!0)]),A(L),A(u,{show:v(ie),"onUpdate:show":a[1]||(a[1]=e=>h(ie)?ie.value=e:null),title:"保障详情",class:"guarantee-popup"},{default:g((()=>[v(V)&&v(V).length>0?(r(),d("div",H,[c("div",K,[(r(!0),d(p,null,m(v(V),((e,l)=>(r(),y(s,{key:l,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),A(L)])):_("",!0),v($)?(r(),y(i,{key:1,active:v(W),"onUpdate:active":a[0]||(a[0]=e=>h(W)?W.value=e:null),list:e.planList.map(((e,l)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:de},null,8,["active","list"])):_("",!0),c("div",X,[(r(!0),d(p,null,m(v(D),((e,l)=>(r(),d("div",{key:l,class:"guarantee-item"},[A(s,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),I(c("div",J,null,512),[[S,e.tips]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-0d8cdcd6"]]);const le={class:"spec"},ae={class:"rich-text"},te={key:1,class:"spec"},ne={class:"rich-text"},se={key:1,class:"spec"},ie={class:"rich-text"},ue=e({name:"ScrollInfo"}),oe=e({...ue,props:{dataSource:{default:()=>({SPECIAL_FEATURE:[],CLAIM_CASE:{},CLAIM_FLOW:[],ISSUE_NOTICE:[],FAQ:[]})}},setup(e,{expose:l}){const n=e,s=R((()=>N((()=>import("./index-eff7527d.js").then((function(e){return e.cK}))),["static/js/index-eff7527d.js","static/css/index-adf085ad.css","static/js/pdfh5-008ca364.js"])));R((()=>N((()=>import("./index-da2f2150.js")),["static/js/index-da2f2150.js","static/css/index-f22f2764.css","static/js/index-eff7527d.js","static/css/index-adf085ad.css","static/js/pdfh5-008ca364.js"])));const i=R((()=>N((()=>import("./index-eff7527d.js").then((function(e){return e.cI}))),["static/js/index-eff7527d.js","static/css/index-adf085ad.css","static/js/pdfh5-008ca364.js"]))),u=R((()=>N((()=>import("./index-c4f9f8d1.js")),["static/js/index-c4f9f8d1.js","static/css/index-7b3feb06.css","static/js/index-eff7527d.js","static/css/index-adf085ad.css","static/js/pdfh5-008ca364.js"]))),f=R((()=>N((()=>import("./index-009e956b.js")),["static/js/index-009e956b.js","static/css/index-194b9c66.css","static/js/index-eff7527d.js","static/css/index-adf085ad.css","static/js/pdfh5-008ca364.js","static/js/index-c963a75d.js"]))),{dataSource:C}=U(n),k=a(),L=a([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),h=t((()=>{var e,l;return null==(l=null==(e=C.value.SPECIAL_FEATURE)?void 0:e.spec)?void 0:l.length})),b=t((()=>{var e,l,a,t;const n=null==(e=C.value.CLAIM_FLOW)?void 0:e.processCaseType;return!!(n===$.WORD&&(null==(l=C.value.CLAIM_FLOW)?void 0:l.processContent)||n===$.IMAGE&&(null==(t=null==(a=C.value.CLAIM_FLOW)?void 0:a.processCasePicList)?void 0:t.length))})),S=t((()=>{var e,l,a,t,n;const s=null==(l=null==(e=C.value)?void 0:e.CLAIM_CASE)?void 0:l.claimCaseType;return!!(s===$.WORD&&(null==(a=C.value.CLAIM_CASE)?void 0:a.claimContent)||s===$.IMAGE&&(null==(n=null==(t=C.value.CLAIM_CASE)?void 0:t.claimCasePicList)?void 0:n.length))})),w=t((()=>{var e,l;return null==(l=null==(e=C.value)?void 0:e.ISSUE_NOTICE)?void 0:l.noticeContent})),O=t((()=>{var e,l;return null==(l=null==(e=C.value)?void 0:e.FAQ)?void 0:l.length})),x=t((()=>{let e=[...L.value];return h.value||(e=e.filter((e=>"tab1"!==e.slotName))),b.value||S.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return l({handleClickTab:()=>{var e;return null==(e=k.value)?void 0:e.handleClickTab}}),(e,l)=>{const a=W,t=E,n=o("dompurify-html");return r(),y(v(s),{ref_key:"scrollRef",ref:k,class:"tabs",list:v(x),sticky:"",scrollspy:""},D({tab3:g((()=>[j(e.$slots,"form")])),_:2},[v(h)?{name:"tab1",fn:g((()=>{var e;return[c("div",le,[(r(!0),d(p,null,m((null==(e=v(C).SPECIAL_FEATURE)?void 0:e.spec)||[],((e,l)=>(r(),y(V,{key:l},{fallback:g((()=>[A(t,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:g((()=>[(r(),y(a,{key:l,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),A(v(i))])]})),key:"0"}:void 0,v(b)||v(S)||v(w)||v(O)?{name:"tab2",fn:g((()=>{var e,l;return[v(b)?(r(),d(p,{key:0},[(null==(e=v(C).CLAIM_FLOW)?void 0:e.processCaseType)===v($).WORD?(r(),y(v(u),{key:0,class:"tab-card",title:"理赔说明"},{default:g((()=>{var e;return[I(c("div",ae,null,512),[[n,null==(e=v(C).CLAIM_FLOW)?void 0:e.processContent]])]})),_:1})):(r(),d("div",te,[(r(),y(V,null,{fallback:g((()=>[A(t,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:g((()=>{var e;return[(r(!0),d(p,null,m((null==(e=v(C).CLAIM_FLOW)?void 0:e.processCasePicList)||[],((e,l)=>(r(),y(a,{key:l,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),A(v(i))],64)):_("",!0),v(S)?(r(),d(p,{key:1},[(null==(l=v(C).CLAIM_CASE)?void 0:l.claimCaseType)===v($).WORD?(r(),y(v(u),{key:0,class:"tab-card",title:"理赔案例"},{default:g((()=>{var e;return[I(c("div",ne,null,512),[[n,null==(e=v(C).CLAIM_CASE)?void 0:e.claimContent]])]})),_:1})):(r(),d("div",se,[(r(),y(V,null,{fallback:g((()=>[A(t,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:g((()=>{var e;return[(r(!0),d(p,null,m((null==(e=v(C).CLAIM_CASE)?void 0:e.claimCasePicList)||[],((e,l)=>(r(),y(a,{key:l,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),A(v(i))],64)):_("",!0),v(w)?(r(),d(p,{key:2},[A(v(u),{class:"tab-card",title:"投保须知"},{default:g((()=>{var e;return[I(c("div",ie,null,512),[[n,null==(e=v(C).ISSUE_NOTICE)?void 0:e.noticeContent]])]})),_:1}),A(v(i))],64)):_("",!0),v(O)?(r(),d(p,{key:3},[A(v(u),{title:"常见问题"},{default:g((()=>{var e,l;return[A(v(f),{list:null==(l=null==(e=v(C).FAQ)?void 0:e[0])?void 0:l.data},null,8,["list"])]})),_:1}),A(v(i))],64)):_("",!0)]})),key:"1"}:void 0]),1032,["list"])}}});export{ee as G,oe as _};

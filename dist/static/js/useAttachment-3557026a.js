import{_ as e,d as l,bX as a,g as t,r as n,E as s,an as i,S as u,z as o,c as r,h as d,j as c,F as v,i as p,L as m,t as C,k as _,e as f,n as y,f as L,V as h,a2 as k,w as A,a7 as b,A as E,a3 as g,a5 as I,a8 as S,X as x,Y as O,bY as F,bZ as T,bp as M,bt as N,c8 as R,bk as w,I as U,a9 as P}from"./index-b8ef7d55.js";import{o as j,g as W}from"./utils-7c528e3d.js";import{C as D}from"./infoCollection-762a20da.js";const V={class:"guarantee-list"},$=(e=>(x("data-v-613ed1cf"),e=e(),O(),e))((()=>c("span",null,"保障计划",-1))),z={key:0,class:"plan-list"},G=["onClick"],Y={key:2,class:"feerate-view"},q={key:0},Q={class:"extinfo-info-list"},B={class:"guarantee-detail"},X={class:"content"};var Z=e(l({__name:"index",props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},planList:{type:Array,require:!1,default:()=>[]}},emits:["update-active-plan"],setup(e,{emit:l}){var x,O;const F=e;a((e=>({"4dfc3426":t(T)})));const T=n(""),M=n((null==(O=null==(x=F.planList)?void 0:x[0])?void 0:O.planCode)||void 0),N=n(),R=n([]),w=n([]),U=n(),P=s((()=>!!F.planList.length));i([()=>F.dataSource,()=>M.value],(()=>{var e,l;R.value=(null==(l=((null==(e=F.dataSource)?void 0:e.GUARANTEE)||[]).find((e=>e.planCode===M.value)))?void 0:l.data)||[]}),{immediate:!0,deep:!0});const W=s((()=>{var e;return(null==(e=F.dataSource)?void 0:e.rateUri)||""})),D=s((()=>!!(U.value&&U.value.paymentFrequencyValue&&U.value.premiumUnit&&W))),[Z,H]=u(!1),J=s((()=>{var e;return!(!R.value||!(null==(e=R.value)?void 0:e.length))&&(R.value.length>F.count&&(!!F.isShowClose||!Z.value))})),K=()=>{H()},ee=s((()=>{var e;return R.value&&(null==(e=R.value)?void 0:e.length)?R.value.length<=F.count||Z.value?R.value:R.value.slice(0,F.count):[]})),le=n(!1),ae=()=>{le.value=!0},te=()=>{j({fileType:"pdf",fileUri:W.value})},ne=e=>{M.value=F.planList[e.name].planCode};return(l,a)=>{var n,s;const i=g,u=I,x=S,O=o("dompurify-html");return r(),d(v,null,[c("div",V,[c("div",{class:"header"},[$,c("span",{onClick:ae},"查看详情")]),t(P)?(r(),d("div",z,[(r(!0),d(v,null,p(e.planList,((l,a)=>(r(),d("div",{key:`${l.planCode}_${a}`,class:m(`plan-list-item ${l.planCode===t(M)?"plan-list-item-active":""} ${2===e.planList.length?"paln-list-item-half":""}`),onClick:e=>{return a=l.planCode,M.value=a,void(N.value=F.planList.findIndex((e=>e.planCode===a)));var a}},[c("span",null,C(l.planName),1)],10,G)))),128))])):_("",!0),(r(!0),d(v,null,p(t(ee),((e,l)=>(r(),f(i,{key:l,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),t(J)?(r(),d("div",{key:1,class:"show-more",onClick:K},[y(C(t(Z)?"收起":"查看更多")+" ",1),L(h,{name:"arrow-down-dobule",class:m(["icon",{showMore:t(Z)}])},null,8,["class"])])):_("",!0),t(D)?(r(),d("div",Y,[c("span",null,C(`${(null==(n=t(U))?void 0:n.paymentFrequencyValue)||""}${(null==(s=t(U))?void 0:s.premiumUnit)||""}`),1),t(W)?(r(),d("span",{key:0,onClick:te},"查看保费")):_("",!0)])):_("",!0)]),L(k),L(x,{show:t(le),"onUpdate:show":a[1]||(a[1]=e=>b(le)?le.value=e:null),title:"保障详情",class:"guarantee-popup"},{default:A((()=>[t(w)&&t(w).length>0?(r(),d("div",q,[c("div",Q,[(r(!0),d(v,null,p(t(w),((e,l)=>(r(),f(i,{key:l,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),L(k)])):_("",!0),t(P)?(r(),f(u,{key:1,active:t(N),"onUpdate:active":a[0]||(a[0]=e=>b(N)?N.value=e:null),list:e.planList.map(((e,l)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:ne},null,8,["active","list"])):_("",!0),c("div",B,[(r(!0),d(v,null,p(t(R),((e,l)=>(r(),d("div",{key:l,class:"guarantee-item"},[L(i,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),E(c("div",X,null,512),[[O,e.tips]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-613ed1cf"]]);const H={class:"spec"},J={class:"rich-text"},K={key:1,class:"spec"},ee={class:"rich-text"},le={key:1,class:"spec"},ae={class:"rich-text"},te=l({__name:"index",props:{dataSource:{default:()=>({SPECIAL_FEATURE:[],CLAIM_CASE:{},CLAIM_FLOW:[],ISSUE_NOTICE:[],FAQ:[]})}},setup(e,{expose:l}){const a=e,i=F((()=>T((()=>import("./index-b8ef7d55.js").then((function(e){return e.cI}))),["static/js/index-b8ef7d55.js","static/css/index-01a5659c.css","static/js/pdfh5-008ca364.js"])));F((()=>T((()=>import("./index-26677e26.js")),["static/js/index-26677e26.js","static/css/index-f22f2764.css","static/js/index-b8ef7d55.js","static/css/index-01a5659c.css","static/js/pdfh5-008ca364.js"])));const u=F((()=>T((()=>import("./index-b8ef7d55.js").then((function(e){return e.cG}))),["static/js/index-b8ef7d55.js","static/css/index-01a5659c.css","static/js/pdfh5-008ca364.js"]))),m=F((()=>T((()=>import("./index-b00df8b9.js")),["static/js/index-b00df8b9.js","static/css/index-7b3feb06.css","static/js/index-b8ef7d55.js","static/css/index-01a5659c.css","static/js/pdfh5-008ca364.js"]))),C=F((()=>T((()=>import("./index-85eafaaa.js")),["static/js/index-85eafaaa.js","static/css/index-194b9c66.css","static/js/index-b8ef7d55.js","static/css/index-01a5659c.css","static/js/pdfh5-008ca364.js","static/js/index-fe5712f2.js"]))),{dataSource:y}=M(a),k=n(),b=n([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),g=s((()=>{var e,l;return null==(l=null==(e=y.value.SPECIAL_FEATURE)?void 0:e.spec)?void 0:l.length})),I=s((()=>{var e,l,a,t;const n=null==(e=y.value.CLAIM_FLOW)?void 0:e.processCaseType;return!!(n===D.WORD&&(null==(l=y.value.CLAIM_FLOW)?void 0:l.processContent)||n===D.IMAGE&&(null==(t=null==(a=y.value.CLAIM_FLOW)?void 0:a.processCasePicList)?void 0:t.length))})),S=s((()=>{var e,l,a,t,n;const s=null==(l=null==(e=y.value)?void 0:e.CLAIM_CASE)?void 0:l.claimCaseType;return!!(s===D.WORD&&(null==(a=y.value.CLAIM_CASE)?void 0:a.claimContent)||s===D.IMAGE&&(null==(n=null==(t=y.value.CLAIM_CASE)?void 0:t.claimCasePicList)?void 0:n.length))})),x=s((()=>{var e,l;return null==(l=null==(e=y.value)?void 0:e.ISSUE_NOTICE)?void 0:l.noticeContent})),O=s((()=>{var e,l;return null==(l=null==(e=y.value)?void 0:e.FAQ)?void 0:l.length})),P=s((()=>{let e=[...b.value];return g.value||(e=e.filter((e=>"tab1"!==e.slotName))),I.value||S.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return l({handleClickTab:()=>{var e;return null==(e=k.value)?void 0:e.handleClickTab}}),(e,l)=>{const a=U,n=h,s=o("dompurify-html");return r(),f(t(i),{ref_key:"scrollRef",ref:k,class:"tabs",list:t(P),sticky:"",scrollspy:""},N({tab3:A((()=>[w(e.$slots,"form")])),_:2},[t(g)?{name:"tab1",fn:A((()=>{var e;return[c("div",H,[(r(!0),d(v,null,p((null==(e=t(y).SPECIAL_FEATURE)?void 0:e.spec)||[],((e,l)=>(r(),f(R,{key:l},{fallback:A((()=>[L(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>[(r(),f(a,{key:l,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),L(t(u))])]})),key:"0"}:void 0,t(I)||t(S)||t(x)||t(O)?{name:"tab2",fn:A((()=>{var e,l;return[t(I)?(r(),d(v,{key:0},[(null==(e=t(y).CLAIM_FLOW)?void 0:e.processCaseType)===t(D).WORD?(r(),f(t(m),{key:0,class:"tab-card",title:"理赔说明"},{default:A((()=>{var e;return[E(c("div",J,null,512),[[s,null==(e=t(y).CLAIM_FLOW)?void 0:e.processContent]])]})),_:1})):(r(),d("div",K,[(r(),f(R,null,{fallback:A((()=>[L(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var e;return[(r(!0),d(v,null,p((null==(e=t(y).CLAIM_FLOW)?void 0:e.processCasePicList)||[],((e,l)=>(r(),f(a,{key:l,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(t(u))],64)):_("",!0),t(S)?(r(),d(v,{key:1},[(null==(l=t(y).CLAIM_CASE)?void 0:l.claimCaseType)===t(D).WORD?(r(),f(t(m),{key:0,class:"tab-card",title:"理赔案例"},{default:A((()=>{var e;return[E(c("div",ee,null,512),[[s,null==(e=t(y).CLAIM_CASE)?void 0:e.claimContent]])]})),_:1})):(r(),d("div",le,[(r(),f(R,null,{fallback:A((()=>[L(n,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:A((()=>{var e;return[(r(!0),d(v,null,p((null==(e=t(y).CLAIM_CASE)?void 0:e.claimCasePicList)||[],((e,l)=>(r(),f(a,{key:l,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),L(t(u))],64)):_("",!0),t(x)?(r(),d(v,{key:2},[L(t(m),{class:"tab-card",title:"投保须知"},{default:A((()=>{var e;return[E(c("div",ae,null,512),[[s,null==(e=t(y).ISSUE_NOTICE)?void 0:e.noticeContent]])]})),_:1}),L(t(u))],64)):_("",!0),t(O)?(r(),d(v,{key:3},[L(t(m),{title:"常见问题"},{default:A((()=>{var e,l;return[L(t(C),{list:null==(l=null==(e=t(y).FAQ)?void 0:e[0])?void 0:l.data},null,8,["list"])]})),_:1}),L(t(u))],64)):_("",!0)]})),key:"1"}:void 0]),1032,["list"])}}});var ne=(e,l)=>{const a=n([]),t=n(0),s=n([]);return i([()=>{var l;return null==(l=e.value)?void 0:l.planCode},()=>l.value],(([e,l])=>{let n=null;if(null==l?void 0:l.length){const a=(l||[]).find((l=>l.planCode===e||!l.planCode));a&&(n=null==a?void 0:a.productMaterialMap)}n?(a.value=Object.keys(n).map((e=>({attachmentName:e,attachmentList:n[e].map((e=>({...e,materialSource:W(`${null==e?void 0:e.materialSource}`,null==e?void 0:e.materialContent)})))}))),s.value=a.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.popUpFlag===P.YES))}))).filter((e=>e.attachmentList.length)),t.value=s.value.map((e=>({attachmentName:e.attachmentName,attachmentList:e.attachmentList.filter((e=>e.mustReadFlag===P.YES))}))).filter((e=>e.attachmentList.length)).length||0):a.value=[]}),{deep:!0,immediate:!0}),{fileList:a,popupFileList:s,mustReadFileCount:t}};export{Z as G,te as _,ne as u};

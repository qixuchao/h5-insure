import{_ as e,d as a,i as l,h as s,j as o,O as d,l as t,o as i,m as r,w as n,a as c,e as m,u,bV as f,b as p,V as v,W as b,ce as g,cf as h,a8 as y,cg as N,ch as C,ci as _,ag as j,aC as V,aD as q}from"./index-062d3bb0.js";import{g as x}from"./trial-fcd4ddcd.js";import{c as U}from"./format-b5e9d8b9.js";import{u as k}from"./useOrder-f6975b80.js";import{a as w,f as I}from"./verify-27318ea0.js";import{P}from"./constants-62d1c4af.js";const z=e=>(V("data-v-6d5eb1cd"),e=e(),q(),e),E={class:"page-phone-verify"},O={class:"title"},S=z((()=>c("div",{class:"title face-title"},"人脸识别",-1))),T={class:"face-verify-img"},$=["src"],L=z((()=>c("div",{class:"face-verify-tip"},[c("div",{class:"title"},"操作时请您配合"),c("ol",null,[c("li",null,"请调亮手机屏幕亮度，确保光线充足"),c("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),c("li",null,"请确保真实本人操作")])],-1))),W={class:"tips"},A=["src"];var D=e(a({__name:"phoneVerify",setup(e){const a=k(),V=l(),q=s(),{agentCode:z,tenantId:D,nextPageCode:M,biz_id:R,orderNo:B,objectType:F,orderCode:G}=V.query,H=o({mobile:"",verifyCode:""}),J=o(),K=()=>{var e,l;null==(l=null==(e=J.value)?void 0:e.validate)||l.call(e).then((()=>{(()=>{const{holder:e,insuredList:l}=a.value;let s={userName:e.name,certiNo:e.certNo};"insured"===F&&(s={userName:null==l?void 0:l[0].name,certiNo:null==l?void 0:l[0].certNo});const{userName:o,certiNo:d}=s,t={tenantId:D,faceAuthMode:"TENCENT",callbackUrl:window.location.href,bizNo:B,userName:o,certiNo:d};I(t).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})()}))};return d((()=>{x({orderNo:G||B,tenantId:D}).then((({code:e,data:l})=>{var s,o;"10000"===e&&(Object.assign(a.value,l),H.value.mobile="holder"===F?l.holder.mobile:null==(o=null==(s=l.insured)?void 0:s[0])?void 0:o.mobile)})),R&&w({bizId:R}).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status&&(delete V.query.biz_id,delete V.query.nextPageCode,q.push({path:P[`${M}`],query:V.query}))}))})),(e,a)=>{const l=N,s=C,o=_,d=j,V=t("ProPageWrap");return i(),r(V,null,{default:n((()=>[c("div",E,[c("div",O,m(`${u(f)[u(F).toLocaleUpperCase()]}手机号验证 ${u(U)(u(H).mobile||"")}`),1),p(o,{ref_key:"formRef",ref:J,"validate-method":"toast",model:u(H)},{default:n((()=>[v(p(l,{modelValue:u(H).mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>u(H).mobile=e),label:"被保人手机号",name:"mobile",maxlength:"11",required:""},null,8,["modelValue"]),[[b,!1]]),p(s,{modelValue:u(H).verifyCode,"onUpdate:modelValue":a[1]||(a[1]=e=>u(H).verifyCode=e),"related-name":"mobile",label:" ",maxlength:"6","input-align":"left",placeholder:"请输入验证码",name:"verifyCode",rules:[{required:!0,message:"请输入验证码"}],"send-s-m-s-code":u(g),"check-s-m-s-code":u(h)},null,8,["modelValue","send-s-m-s-code","check-s-m-s-code"])])),_:1},8,["model"]),S,c("div",T,[c("img",{src:u("/static/png/face_img-4ac5b4e1.png"),alt:""},null,8,$)]),L,p(d,{type:"primary",class:"submit-btn",onClick:K},{default:n((()=>[y("开始验证")])),_:1}),c("div",W,[c("img",{src:u("/static/png/face_tip-d70e081d.png"),alt:""},null,8,A)])])])),_:1})}}}),[["__scopeId","data-v-6d5eb1cd"]]);export{D as default};

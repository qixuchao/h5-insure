!function(){var e=document.createElement("style");e.innerHTML=".net-sale-wrap[data-v-38bf24c9]{padding-bottom:1.33333rem;background:#f1f5fc}.net-sale-wrap .footer-button[data-v-38bf24c9]{justify-content:space-between}.net-sale-wrap .product-name[data-v-38bf24c9]{font-size:.48rem;font-weight:500;line-height:1.06667rem}.net-sale-wrap .part[data-v-38bf24c9]{background-color:#fff;padding:0 var(--zaui-page-border, .4rem)}.net-sale-wrap .part .common-cell-wrapper[data-v-38bf24c9]{height:1.38667rem;align-items:center;width:100%;display:inline-flex}.net-sale-wrap .part .common-cell-wrapper[data-v-38bf24c9] .cell-container{align-items:flex-start;justify-content:center;width:100%;color:var(--van-field-label-color);font-size:.4rem}.net-sale-wrap .radio-group[data-v-38bf24c9]{width:100%}.net-sale-wrap .radio-group .radio-btn[data-v-38bf24c9]{justify-content:space-between}.net-sale-wrap .price[data-v-38bf24c9]{color:#393d46;font-size:.45333rem;font-weight:400}.net-sale-wrap .price span[data-v-38bf24c9]{color:var(--van-primary-color);font-weight:700}.net-sale-wrap .right[data-v-38bf24c9]{width:3.73333rem;background:var(--van-primary-color);border-color:var(--van-primary-color)}.net-sale-wrap .footer[data-v-38bf24c9]{margin-top:.66667rem;padding:0 var(--zaui-page-border, .4rem)}\n",document.head.appendChild(e),System.register(["./index-legacy-fcf08e87.js","./debounce-legacy-211ba60e.js","./utils-legacy-6e115820.js","./product-legacy-f983cd43.js","./trial-legacy-4f24bc95.js","./index-legacy-c15320af.js","./nextStep-legacy-537c3a75.js","./index-legacy-3a2e4339.js","./infoCollection-legacy-96056a99.js","./pdfh5-legacy-9f98dc45.js","./isObject-legacy-83e04b6f.js","./isObjectLike-legacy-7cedb542.js","./trial-legacy-081f57e2.js","./relativeTime-legacy-4b5b6d28.js","./validator-legacy-5e43cc69.js","./useDicData-legacy-4e370f38.js","./core-legacy-1e8b3236.js","./constant-legacy-c9c30061.js"],(function(e){"use strict";var t,n,a,o,r,l,i,u,d,c,s,v,p,m,f,y,h,O,w,g,I,L,b,D,Y,C,V,T,E,j,x,k,R,M,N,P,H,B,S,_;return{setters:[function(e){t=e._,n=e.d,a=e.bZ,o=e.a,r=e.r,l=e.ac,i=e.E,u=e.am,d=e.G,c=e.b,s=e.c,v=e.e,p=e.w,m=e.f,f=e.i,y=e.t,h=e.m,O=e.j,w=e.ai,g=e.l,I=e.P,L=e.a3,b=e.aO,D=e.bT,Y=e.X,C=e.Y,V=e.ag,T=e.T},function(e){E=e.d},function(e){j=e.r,x=e.t},function(e){k=e.p},function(e){R=e.i,M=e.b,N=e.p},function(e){P=e.default},function(e){H=e.n},function(e){B=e.default},function(e){S=e.m,_=e.n},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){!function(){if("undefined"!=typeof window){var e,t="ontouchstart"in window;document.createTouch||(document.createTouch=function(e,t,a,o,r,l,i){return new n(t,a,{pageX:o,pageY:r,screenX:l,screenY:i,clientX:o-window.pageXOffset,clientY:r-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var e=o(),t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length=arguments.length,e}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var n=function(e,t,n,a,o){a=a||0,o=o||0,this.identifier=t,this.target=e,this.clientX=n.clientX+a,this.clientY=n.clientY+o,this.screenX=n.screenX+a,this.screenY=n.screenY+o,this.pageX=n.pageX+a,this.pageY=n.pageY+o},a=!1;u.multiTouchOffset=75,t||new u}function o(){var e=[];return e.item=function(e){return this[e]||null},e.identifiedTouch=function(e){return this[e+1]||null},e}function r(t){return function(n){var o,r,u;("mousedown"===n.type&&(a=!0),"mouseup"===n.type&&(a=!1),"mousemove"!==n.type||a)&&(("mousedown"===n.type||!e||e&&!e.dispatchEvent)&&(e=n.target),null==e.closest("[data-no-touch-simulate]")&&(o=t,r=n,(u=document.createEvent("Event")).initEvent(o,!0,!0),u.altKey=r.altKey,u.ctrlKey=r.ctrlKey,u.metaKey=r.metaKey,u.shiftKey=r.shiftKey,u.touches=i(r),u.targetTouches=i(r),u.changedTouches=l(r),e.dispatchEvent(u)),"mouseup"===n.type&&(e=null))}}function l(t){var a=o();return a.push(new n(e,1,t,0,0)),a}function i(e){return"mouseup"===e.type?o():l(e)}function u(){window.addEventListener("mousedown",r("touchstart"),!0),window.addEventListener("mousemove",r("touchmove"),!0),window.addEventListener("mouseup",r("touchend"),!0)}}();const U=e=>(Y("data-v-38bf24c9"),e=e(),C(),e),$={class:"net-sale-wrap"},F={class:"part product-name"},X=U((()=>f("span",null,null,-1))),A=U((()=>f("span",null,null,-1))),z={class:"part"},K={class:"footer"};e("default",t(n({setup(e){const t=a(),n=o(),{productCode:Y="HTEJBX",tenantId:C="9991000001",agentCode:U="",agencyCode:q,saleChannelId:G,extraInfo:J,preview:W}=n.query,Z=r(),Q=r("0"),ee=r(),te=r(),ne=r(),ae=r([{}]),oe=r([]),re=r({}),le=r(""),ie=r({min:new Date(l().add(1,"day").format("YYYY-MM-DD")),max:new Date,currentDate:""});let ue={};try{ue=JSON.parse(decodeURIComponent(J))}catch(Oe){}const de=r({agencyId:q,agentCode:U,commencementTime:"",expiryDate:"",extInfo:{buttonCode:"EVENT_NETSALE_underWrite",pageCode:"infoCollection",templateId:ue.templateId,iseeBizNo:le.value,extraInfo:ue},orderCategory:1,saleUserId:U,saleChannelId:G,tenantId:C,venderCode:"",tenantOrderHolder:{extInfo:{occupationCodeList:[]}},tenantOrderInsuredList:[{relationToHolder:"1",extInfo:{occupationCodeList:[]},tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}],tenantOrderProductList:[{}]}],tenantOrderSubjectList:[{extInfo:{subjectRelatedFirm:"xinao",subjectRelatedUserId:""},subjectName:"",subjectObjectType:"HOLDER",subjectType:"GENERAL",subjectNo:"",tenantId:C}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),ce=i((()=>{var e,t;return((null===(e=ee.value)||void 0===e||null===(t=e.productRelationPlanVOList)||void 0===t?void 0:t.length)||0)>1})),se=r();u([()=>ne.value,()=>te.value,()=>Q.value],(()=>{const{premium:e}=ne.value||{};if(e)se.value=e&&`￥${e}元`;else{var t,n,a;const{tenantProductInsureVO:e}=te.value||{};let o={};o=null!=e&&null!==(t=e.planList)&&void 0!==t&&t.length?((null==e?void 0:e.planList)||[]).find((e=>e.planCode===Q.value)):null==e?void 0:e.planInsureVO;const{paymentFrequencyValue:r,premiumUnit:l}=(null===(n=o)||void 0===n||null===(a=n.productPremiumVOList)||void 0===a?void 0:a[0])||{};se.value=r&&`￥${r}${l||"元"}`}}),{deep:!0,immediate:!0});const ve=i((()=>{var e,t,n,a,o;let r=[];var i,u,d;null!==(e=ee.value)&&void 0!==e&&null!==(t=e.productRelationPlanVOList)&&void 0!==t&&t.length?r=(null===(i=ee.value)||void 0===i||null===(u=i.productRelationPlanVOList.find((e=>e.planCode===Q.value)))||void 0===u?void 0:u.productRiskVoList)||[]:r=(null===(d=ee.value)||void 0===d?void 0:d.productRiskVoList)||[];const{insuranceStartType:c,riskInsureLimitVO:s}=(null===(n=r)||void 0===n||null===(a=n[0])||void 0===a||null===(o=a.riskDetailVOList)||void 0===o?void 0:o[0])||{},{maxInsuranceDay:v}=s||{};if(c===+S.CUSTOM_DAY){const[e,t]=(v||"").split(",");e&&t&&t!==e?(ie.value.min=new Date(l(new Date).add(+e||0,"day").format("YYYY-MM-DD")),ie.value.max=new Date(l(new Date).add(+t||0,"day").format("YYYY-MM-DD"))):e&&t&&t===e?ie.value.currentDate=l(new Date).add(t,"day").format("YYYY-MM-DD HH:mm:ss"):t||(ie.value.max=new Date(l(new Date).add(+t||0,"day").format("YYYY-MM-DD")))}return r})),pe=i((()=>{var e,t,n;const{insuranceStartType:a,riskInsureLimitVO:o}=(null===(e=ve.value)||void 0===e||null===(t=e[0])||void 0===t||null===(n=t.riskDetailVOList)||void 0===n?void 0:n[0])||{},{maxInsuranceDay:r}=o||{};if(a!==+S.CUSTOM_DAY)return!0;const[l,i]=(r||"").split(",");return l===i})),me=i((()=>{var e,t,n;const a=ve.value||[],o=(null==a||null===(e=a[0])||void 0===e||null===(t=e.riskDetailVOList)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.insuranceStartType)||1;return ie.value.currentDate?`${l(ie.value.currentDate).format("YYYY-MM-DD")} 00:00:00`:o===+S.CURRENT_DAY?`${l(new Date).format("YYYY-MM-DD HH:mm:ss")}`:`${l(new Date).add(1,"day").format("YYYY-MM-DD")} 00:00:00`})),fe=i((()=>{var e,t;const n=ve.value||[],{insuranceEndType:a,riskInsureLimitVO:o}=(null==n||null===(e=n[0])||void 0===e||null===(t=e.riskDetailVOList)||void 0===t?void 0:t[0])||{},{insurancePeriodValueList:r}=o||{},[i,u]=((null==r?void 0:r[0])||"").split("_");return a===+_.CURRENT_DAY?`${l(me.value).add(u||0,i).subtract(1,"day").format("YYYY-MM-DD")} 23:59:59`:a?`${l(me.value).add(u,i).format("YYYY-MM-DD")} 00:00:00`:""})),ye=async()=>{var e,t,n;de.value.venderCode=null===(e=ee.value)||void 0===e?void 0:e.productBasicInfoVO.insurerCode,de.value.orderAmount=null===(t=ne.value)||void 0===t?void 0:t.premium,de.value.orderRealAmount=null===(n=ne.value)||void 0===n?void 0:n.premium,de.value.commencementTime=me.value,de.value.expiryDate=fe.value,de.value.extInfo&&(de.value.extInfo.iseeBizNo=le.value),de.value.tenantOrderInsuredList&&(de.value.tenantOrderInsuredList[0].planCode=Q.value),H(((e,t,n)=>{var a;const o={},r=(e=[])=>{(e||[]).forEach((e=>{var t;o[e.riskCode]=e,null!==(t=e.riskPremiumDetailVOList)&&void 0!==t&&t.length&&r(e.riskPremiumDetailVOList)}))};r(null==t?void 0:t.riskPremiumDetailVOList);const l={...n},i={tenantId:C,riskList:(null===(a=oe.value)||void 0===a?void 0:a[0].riskVOList)||[],riskPremium:o,productId:(null==e?void 0:e.productBasicInfoVO.id)||0};var u;return l.tenantOrderHolder&&(l.tenantOrderHolder.certType=l.tenantOrderHolder.certType||V.CERT,l.tenantOrderHolder.certNo=(l.tenantOrderHolder.certNo||"").toLocaleUpperCase()),l.tenantOrderInsuredList&&(l.tenantOrderInsuredList[0].certType=l.tenantOrderInsuredList[0].certType||V.CERT,l.tenantOrderInsuredList[0].certNo=(l.tenantOrderInsuredList[0].certNo||"").toLocaleUpperCase(),l.tenantOrderInsuredList[0].tenantOrderProductList=[{premium:null===(u=ne.value)||void 0===u?void 0:u.premium,productCode:null==e?void 0:e.productBasicInfoVO.productCode,productName:null==e?void 0:e.productBasicInfoVO.productName,tenantOrderRiskList:x(i)}]),l})(ee.value,ne.value,de.value),((e,t)=>{"jumpToPage"===t&&T("提交成功")}))},he=async()=>{var e;null===(e=Z.value)||void 0===e||e.validateForm().then((()=>{var e,t;w.confirm({title:"分享",message:`即将向客户【${null===(e=de.value)||void 0===e||null===(t=e.tenantOrderHolder)||void 0===t?void 0:t.name}】发送投保确认信息,请确认是否继续？`}).then((()=>{W||ye()}))}))};u([()=>{var e;return null===(e=de.value.tenantOrderInsuredList)||void 0===e?void 0:e[0].name},()=>{var e;return null===(e=de.value.tenantOrderInsuredList)||void 0===e?void 0:e[0].birthday},()=>Q.value],E((([e,t])=>{e&&t&&(W||(async(e,t,n)=>{var a,o,r,l;const i={holder:{personVO:{certType:V.CERT,...e.tenantOrderHolder,socialFlag:`${(null===(a=e.tenantOrderHolder)||void 0===a||null===(o=a.extInfo)||void 0===o?void 0:o.hasSocialInsurance)||""}`,occupationCodeList:null===(r=e.tenantOrderHolder)||void 0===r||null===(l=r.extInfo)||void 0===l?void 0:l.occupationCodeList}},insuredVOList:((null==e?void 0:e.tenantOrderInsuredList)||[]).map((e=>{var a,o;return{insuredCode:"",personVO:{...e,certType:V.CERT,socialFlag:`${(null==e||null===(a=e.extInfo)||void 0===a?void 0:a.hasSocialInsurance)||""}`,occupationCodeList:null==e||null===(o=e.extInfo)||void 0===o?void 0:o.occupationCodeList},productPlanVOList:[{insurerCode:null==t?void 0:t.productBasicInfoVO.insurerCode,planCode:Q.value||"",riskVOList:j(n)}]}})),productCode:null==t?void 0:t.productBasicInfoVO.productCode,productId:null==t?void 0:t.productBasicInfoVO.id,tenantId:C},{code:u}=await M(i);if("10000"===u){const{code:e,data:t}=await N(i);var d,c;"10000"===e?(ne.value=t,oe.value=(null==i||null===(d=i.insuredVOList)||void 0===d||null===(c=d[0])||void 0===c?void 0:c.productPlanVOList)||[]):ne.value=void 0}})(de.value,ee.value,ve.value))}),500));return u((()=>Q.value),(()=>{ae.value&&(re.value=ae.value[Q.value])})),d((()=>{(async()=>{await k({productCode:Y,withInsureInfo:!0,tenantId:C}).then((({code:e,data:t})=>{var n;"10000"===e&&(te.value=t,document.title=(null===(n=t.tenantProductInsureVO)||void 0===n?void 0:n.productName)||"")})),R({productCode:Y}).then((({code:e,data:t})=>{var n;"10000"===e&&(ee.value=t,ae.value=t.planFactor,null!==(n=t.productRelationPlanVOList)&&void 0!==n&&n.length&&(Q.value=t.productRelationPlanVOList[0].planCode||""),t.productFactor?re.value=t.productFactor:t.planFactor&&(re.value=t.planFactor[Q.value]))}))})(),setTimeout((async()=>{le.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,n)=>{const a=g,o=I,r=L,l=b,i=c("ProPageWrap"),u=D;return s(),v(u,{"theme-vars":h(t)},{default:p((()=>[m(i,null,{default:p((()=>{var e,t;return[f("div",$,[f("div",F,y(null===(e=ee.value)||void 0===e||null===(t=e.productBasicInfoVO)||void 0===t?void 0:t.productFullName),1),h(ce)?(s(),v(o,{key:0,"show-line":!1,title:"保障年期"},{default:p((()=>{var e;return[m(a,{modelValue:Q.value,"onUpdate:modelValue":n[0]||(n[0]=e=>Q.value=e),class:"radio-group",prop:{label:"planName",value:"planCode"},options:null===(e=ee.value)||void 0===e?void 0:e.productRelationPlanVOList},null,8,["modelValue","options"])]})),_:1})):O("",!0),m(P,{ref_key:"formRef",ref:Z,"title-collection":{HOLDER:"投保人",INSURER:"被保人",BENEFICIARY:"收益人"},"form-info":de.value,"send-sms-code":()=>{},"input-align":"left","factor-object":re.value},{holderName:p((()=>[X])),insurerName:p((()=>[A])),_:1},8,["form-info","send-sms-code","factor-object"]),f("div",z,[m(r,{title:"保费",content:se.value},null,8,["content"]),h(pe)?(s(),v(r,{key:0,title:"保障期间",content:`${h(me).split(" ")[0]}~${h(fe).split(" ")[0]}`},null,8,["content"])):(s(),v(l,{key:1,modelValue:ie.value.currentDate,"onUpdate:modelValue":n[1]||(n[1]=e=>ie.value.currentDate=e),label:"生效日期",name:"currentDate",type:"date",min:ie.value.min,max:ie.value.max,required:!0},null,8,["modelValue","min","max"]))]),f("div",K,[m(B,{shadow:!1,text:"分享用户确认投保",onClick:he})])])]})),_:1})])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-38bf24c9"]]))}}}))}();

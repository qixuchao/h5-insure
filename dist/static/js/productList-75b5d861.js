import{d as e,t as a,r as s,o as t,c as o,a as l,b as r,u as d,e as i,n as c,f as u,g as n,_ as p,I as m,h as v,i as g,j as f,k as h,l as C,m as y,p as L,w as k,q as w,F as _,s as I,P,v as b,T as x}from"./index-0116ff06.js";import{P as j}from"./index-2e872884.js";import{L as T}from"./index-e1653ef2.js";import{_ as V}from"./index-c8c783be.js";import{S as N}from"./index-48492588.js";import{_ as U}from"./empty-ae586b6c.js";import{q as M}from"./product-12f65684.js";import{P as z}from"./trial-11b78ae7.js";const F={class:"com-product-item"},S={class:"content-wrap"},q={class:"product-image"},B={class:"company-name"},O={class:"product-info"},R={class:"title"},D={class:"description"},W={class:"price-item"},E={class:"price"};var G=p(e({__name:"productItem",props:{productInfo:{default:()=>({})},errorMsg:{default:""}},setup(e){const p=e,{productInfo:v}=a(p),g=s({checked:!1});return a(g),(e,a)=>{var s;const p=m;return t(),o("div",F,[l("div",S,[l("div",q,[r(p,{src:d(v).image},null,8,["src"]),l("div",B,i(null==(s=d(v).insurerName)?void 0:s.slice(0,6)),1),d(v).label?(t(),o("div",{key:0,class:c({tag:!0,news:"新品"===d(v).label,push:"推荐"===d(v).label})},i(d(v).label),3)):u("",!0)]),l("div",O,[l("p",R,i(d(v).productFullName),1),l("p",D,i(d(v).desc),1),l("p",W,[l("span",E,i(d(v).price),1),l("span",null,i(d(v).amountUnit),1)])]),n(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-2ef5a5b8"]]);const $={class:"search-wrap"},A={class:"article-tag"},H=["onClick"],J={class:"page-proposal-list"},K=e({name:"productList"});var Q=p(e({...K,setup(e){const n=v();g();const p=s({searchValue:"",tagLists:[],loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],productCategory:"",productTotal:0,checked:"",productCode:void 0,proposalList:[],showFooter:!0,productName:"",productCodeList:[],errorMsgMap:{},excludeProductCodeList:[],isCreateProposal:!1,selectedProductList:[],firstLoading:!0}),m=f(),{searchValue:F,tagLists:S,loading:q,finished:B,refreshing:O,productList:R,selectProduct:D,insurerCodeList:W,productCategory:E,productTotal:K,showFooter:Q}=a(p),X=()=>{p.firstLoading&&x.loading("加载中..."),M({keyword:F.value,insurerCodeList:W.value,productCategory:E.value,pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:t}=e;"10000"===a&&(R.value=s,K.value=t)})).finally((()=>{x.clear(),p.firstLoading=!1}))},Y=e=>{X()},Z=f(0),ee=()=>{var e;O.value&&(R.value=[],O.value=!1),X(),q.value=!1,K.value===(null==(e=R.value)?void 0:e.length)&&(B.value=!0)},ae=h((()=>{var e;return(null==(e=R.value)?void 0:e.length)>0})),se=()=>{B.value=!0,q.value=!0,ee()};return C((()=>{setTimeout((async()=>{m.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const s=N,v=V,g=T,f=j,h=y("ProPageWrap");return t(),L(h,{class:"page-proposal"},{default:k((()=>[l("div",$,[r(s,{modelValue:d(F),"onUpdate:modelValue":a[0]||(a[0]=e=>w(F)?F.value=e:null),placeholder:"请输入产品名称进行搜索",shape:"round",class:"search","clear-trigger":"always","show-action":"",clearable:"",onSearch:Y},null,8,["modelValue"]),l("div",A,[(t(!0),o(_,null,I(d(P),((e,a)=>(t(),o("div",{key:a,class:c(["tag-item",{checked:d(Z)===a}]),onClick:s=>((e,a)=>{Z.value=a,E.value=e,X()})(e.value,a)},[l("div",{class:c(["tag-out",{checked:d(Z)==a}])},[l("div",{class:c(["tag-item-text",{checked:d(Z)==a}])},i(e.label),3)],2)],10,H)))),128))])]),r(f,{modelValue:d(O),"onUpdate:modelValue":a[2]||(a[2]=e=>w(O)?O.value=e:null),onRefresh:se},{default:k((()=>[d(ae)||d(p).firstLoading?u("",!0):(t(),L(v,{key:0,"empty-img":d(U),title:"暂无产品","empty-class":"empty-select"},null,8,["empty-img"])),l("div",J,[r(g,{loading:d(q),"onUpdate:loading":a[1]||(a[1]=e=>w(q)?q.value=e:null),finished:d(B),"finished-text":d(ae)?"- 已经到底了哦 -":"",onLoad:ee},{default:k((()=>[(t(!0),o(_,null,I(d(R),(e=>(t(),L(G,{key:e.id,"product-info":e,"error-msg":d(p).errorMsgMap[e.productCode],onClick:a=>(async e=>{let a=b.premiumTrial;const{insurerCode:s="",productCode:t="",templateId:o,productClass:l}=e;[z.SINGLE_PRODUCT,z.TWO_PRODUCT].includes(l)&&(a=b.productInfo),n.push({path:a,query:{insurerCode:s,productCode:t,tenantId:9991000011,templateId:o,iseeBizNo:m}})})(e)},null,8,["product-info","error-msg","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-2ab1574a"]]);export{Q as default};

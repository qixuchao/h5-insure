var K=Object.defineProperty;var G=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var J=(i,n,e)=>n in i?K(i,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[n]=e,j=(i,n)=>{for(var e in n||(n={}))Z.call(n,e)&&J(i,e,n[e]);if(G)for(var e of G(n))ee.call(n,e)&&J(i,e,n[e]);return i};import{g as N,Q as X,C as W,L as Y,v as te,X as ne,ag as oe,r as c,h as u,j as p,k as l,n as v,m as x,E as M,y as P,I as L,F as R,s as A,ah as se,z as f,B as D,T as ue,ak as re,G as ae,x as q,M as H,af as ie}from"./vendor-50171071.js";import{_ as F,h as le,j as ce}from"./index-1e64972f.js";import{w as de,n as pe}from"./pdf.worker.entry-2eacef13.js";import{p as z}from"./pdf_viewer-37e08521.js";import{g as _e,s as me}from"./inform-9ede18e5.js";import{s as fe}from"./useStorage-31c729f1.js";const ve={class:"problem"},ge={class:"footer-button"},ye=D("\u63D0\u4EA4"),he=N({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const e=i,k=X(),r=W([]),{questionnaireType:_}=k.query,S={"1":"\u6295\u4FDD\u4EBA","2":"\u88AB\u4FDD\u4EBA","3":"\u4EE3\u7406\u4EBA"},V=Y({listQuestions:[]}),{listQuestions:h}=te(V),d=t=>{r.value[t].toggle()},g=t=>t?JSON.parse(t).map(o=>({title:o.value,value:o.uid})):[];ne(()=>e.currentPageInfo,t=>{h.value=t.map((o,C)=>o.questionType===2?j({multipleChoose:[]},o):j({singleAnswer:o.questionType===3?0:""},o))},{deep:!0,immediate:!0});const E=()=>{h.value.some(o=>{var C;return["undefined",""].includes(o.singleAnswer)||((C=o.multipleChoose)==null?void 0:C.length)===0})?ue("\u8BF7\u5B8C\u6210\u6240\u6709\u9898\u76EE\u8FDB\u884C\u4E0B\u4E00\u6B65"):n("onSubmitCurrentStatus",1,JSON.stringify(h.value))};return oe(()=>{r.value=[]}),(t,o)=>{const C=c("van-radio"),w=c("van-cell"),y=c("van-cell-group"),I=c("van-radio-group"),a=c("van-checkbox"),Q=c("van-checkbox-group"),$=c("van-field"),b=c("van-button"),B=c("ProPageWrap");return u(),p(B,{class:"com-quersion"},{default:l(()=>[v(ce,{title:`${S[f(_)]}\u5065\u5EB7\u544A\u77E5\u4E66`},{default:l(()=>[(u(!0),x(R,null,M(f(h),(s,U)=>(u(),x("div",{key:U,class:"question-item"},[P("div",ve,L(U+1)+". "+L(s.title),1),s.questionType===1?(u(),p(I,{key:0,modelValue:s.singleAnswer,"onUpdate:modelValue":m=>s.singleAnswer=m},{default:l(()=>[v(y,{inset:""},{default:l(()=>[(u(!0),x(R,null,M(g(s.options),(m,T)=>(u(),p(w,{key:T,title:m.title,clickable:"",onClick:O=>s.singleAnswer=T},{"right-icon":l(()=>[v(C,{name:T},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):A("",!0),s.questionType===2?(u(),p(Q,{key:1,modelValue:s.multipleChoose,"onUpdate:modelValue":m=>s.multipleChoose=m},{default:l(()=>[v(y,{inset:""},{default:l(()=>[(u(!0),x(R,null,M(g(s.options),(m,T)=>(u(),p(w,{key:m.uid,clickable:"",title:m.title,onClick:O=>d(T)},{"right-icon":l(()=>[v(a,{ref_for:!0,ref:O=>r.value[T]=O,shape:"square",name:T,onClick:o[0]||(o[0]=se(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):A("",!0),s.questionType===3?(u(),p(le,{key:2,modelValue:s.singleAnswer,"onUpdate:modelValue":m=>s.singleAnswer=m,options:[{label:"\u662F",value:"Y"},{label:"\u5426",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):A("",!0),s.questionType===4?(u(),p(y,{key:3,inset:""},{default:l(()=>[v($,{modelValue:s.singleAnswer,"onUpdate:modelValue":m=>s.singleAnswer=m,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):A("",!0)]))),128))]),_:1},8,["title"]),P("div",ge,[v(b,{type:"primary",block:"",onClick:E},{default:l(()=>[ye]),_:1})])]),_:1})}}});var Ce=F(he,[["__scopeId","data-v-41012a55"]]);const ke={class:"title"},be={class:"content"},Se={class:"footer-button"},Ee=D("\u4E86\u89E3\u5E76\u7EE7\u7EED"),we=N({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const e=i;return(k,r)=>{const _=c("van-button"),S=c("ProPageWrap"),V=re("dompurify-html");return u(),p(S,{class:"com-document"},{default:l(()=>{var h,d;return[P("div",ke,L((h=e.currentPageInfo[0])==null?void 0:h.title),1),ae(P("div",be,null,512),[[V,(d=e.currentPageInfo[0])==null?void 0:d.content]]),P("div",Se,[v(_,{type:"primary",onClick:r[0]||(r[0]=g=>n("onSubmitCurrentStatus",1))},{default:l(()=>[Ee]),_:1})])]}),_:1})}}});var Ie=F(we,[["__scopeId","data-v-27a7d770"]]);const $e={class:"com-pdf-viewer"},xe=["id","isee_pdf"],Ae={class:"footer-button"},Pe=D("\u90E8\u5206\u4E3A\u662F"),Te=D("\u4EE5\u4E0A\u7686\u5426"),Ve=N({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const e=i;z.exports.GlobalWorkerOptions.workerSrc=de;const k=pe(),r=W(!1),_=W(!0),S=q(()=>["png","jpg","jpeg"].some(d=>e.url.includes(d))),V=()=>{const d=document.getElementById(k);if(d.hasChildNodes()){_.value=!1;return}z.exports.getDocument({url:e.url}).promise.then(E=>{const t=E.numPages;for(let o=1;o<=t;o++)E.getPage(o).then(C=>{const w=C.getViewport({scale:1}),y=document.createElement("canvas"),I=y.getContext("2d");y.width=w.width,y.height=w.height,y.style.width="100%",d.append(y);const a={canvasContext:I,viewport:w};C.render(a),_.value=!1})})},h=async()=>{r.value=!0,setTimeout(()=>{V()},0)};return H(()=>{h()}),(d,g)=>{const E=c("van-image"),t=c("van-button");return u(),x("div",$e,[f(S)?(u(),p(E,{key:0,width:"100%",height:"80vh",fit:"contain",src:e.url},null,8,["src"])):(u(),x("div",{key:1,id:f(k),isee_pdf:d.pdfUrl,class:"pdf-wapper"},null,8,xe)),P("div",Ae,[v(t,{plain:"",type:"primary",onClick:g[0]||(g[0]=o=>n("onSubmitCurrentStatus",2))},{default:l(()=>[Pe]),_:1}),v(t,{type:"primary",onClick:g[1]||(g[1]=o=>n("onSubmitCurrentStatus",1))},{default:l(()=>[Te]),_:1})])])}}});var Qe=F(Ve,[["__scopeId","data-v-4c70488e"]]);const Be={class:"iframe-wrap"},De=["src"],qe={class:"footer-button"},Ne=D("\u90E8\u5206\u4E3A\u662F"),Fe=D("\u4EE5\u4E0A\u7686\u5426"),Ue=N({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const e=i;return(k,r)=>{const _=c("van-button");return u(),x("div",Be,[P("iframe",{src:e.url,frameborder:"0"},null,8,De),P("div",qe,[v(_,{plain:"",type:"primary",onClick:r[0]||(r[0]=S=>n("onSubmitCurrentStatus",2))},{default:l(()=>[Ne]),_:1}),v(_,{type:"primary",onClick:r[1]||(r[1]=S=>n("onSubmitCurrentStatus",1))},{default:l(()=>[Fe]),_:1})])])}}});var Oe=F(Ue,[["__scopeId","data-v-1ac7e729"]]);const je={class:"com-health-notice"},Xe=N({setup(i){const n=ie(),e=X(),k=fe.get("questionData"),{questionnaireType:r}=e.query,{orderNo:_="2022021815432987130620",productCode:S="CQ75CQ76",templateId:V=1,agentCode:h="65434444",orderId:d=13005,tenantId:g=9991000007}=e.query,E={1:4,2:5,3:9},t=Y({pageData:{},currentQuestionInfo:[]}),o=q(()=>r==="2"),C=q(()=>{var a;return r==="1"&&[1].includes((a=t.currentQuestionInfo[0])==null?void 0:a.textType)}),w=q(()=>{var a;return r==="1"&&[2].includes((a=t.currentQuestionInfo[0])==null?void 0:a.textType)}),y=q(()=>{var a;return r==="1"&&[3].includes((a=t.currentQuestionInfo[0])==null?void 0:a.textType)}),I=(a,Q)=>{var B;const{id:$,objectType:b}=k;me({content:Q||((B=t.currentQuestionInfo[0])==null?void 0:B.content),contentType:r,isDone:a,noticeType:E[b],objectId:$,objectType:b,orderId:d,orderNo:_,tenantId:9991000007}).then(({code:s,data:U})=>{console.log(s),s==="10000"&&n.go(-1)})};return H(()=>{const{insurerCode:a,id:Q,objectType:$,productCategory:b}=k;_e({insurerCode:a,id:Q,objectType:$,productCategory:b,orderNo:_,tenantId:g}).then(({code:B,data:s})=>{B==="10000"&&(t.currentQuestionInfo=s)})}),(a,Q)=>{var $,b;return u(),x("div",je,[f(o)?(u(),p(Ce,{key:0,"current-page-info":f(t).currentQuestionInfo,onOnSubmitCurrentStatus:I},null,8,["current-page-info"])):A("",!0),f(w)?(u(),p(Ie,{key:1,"current-page-info":f(t).currentQuestionInfo,onOnSubmitCurrentStatus:I},null,8,["current-page-info"])):A("",!0),f(C)?(u(),p(Qe,{key:2,url:($=f(t).currentQuestionInfo[0])==null?void 0:$.content,onOnSubmitCurrentStatus:I},null,8,["url"])):A("",!0),f(y)?(u(),p(Oe,{key:3,url:(b=f(t).currentQuestionInfo[0])==null?void 0:b.content,onOnSubmitCurrentStatus:I},null,8,["url"])):A("",!0)])}}});export{Xe as default};

import{h as e,aw as a,r as t,Z as n,x as l,P as i,W as o,k as r,ae as u,l as s,y as d,z as c,F as v,A as m,E as p,J as f,I as y,s as I,m as h,C as O,Q as P,n as g,G as C,a3 as V,a4 as L,X as k,Y as D,az as S,d as A,L as b,R as w,T as N,H as x,a8 as F,N as q,ax as T,o as R,j as E,ar as U,D as B}from"./vendor-d6fdc679.js";import{d as H}from"./debounce-bd855844.js";import{i as j,b as _,p as M,g as Y}from"./trial-e053bf73.js";import{p as Q}from"./product-1cfea37d.js";import{_ as G,n as K}from"./nextStep-1698170b.js";import{C as z,m as W,n as X,o as J,p as Z,S as $,R as ee,O as ae}from"./infoCollection-bd51090b.js";import{k as te,j as ne}from"./trial-036315b2.js";import{_ as le,e as ie,i as oe,a7 as re,C as ue,I as se,K as de,ac as ce,a8 as ve,a1 as me}from"./index-85102013.js";import{u as pe,a as fe}from"./core-5a69b4be.js";import{u as ye,B as Ie,I as he,A as Oe,P as Pe}from"./useAddressList-b0411c74.js";import{u as ge,t as Ce}from"./theme-126054aa.js";import{o as Ve,g as Le,v as ke,r as De,t as Se}from"./utils-2150ed04.js";import{v as Ae}from"./validator-5a13dc82.js";import{P as be}from"./index-0e53f68f.js";import{_ as we}from"./index-8d641fe7.js";import{u as Ne}from"./useDicData-f7c926df.js";import{P as xe}from"./index-8205e6bd.js";import{s as Fe,c as qe}from"./phoneVerify-b1b99cf9.js";import{s as Te}from"./useStorage-2f016851.js";import"./relativeTime-388a6394.js";import"./index-51d99e89.js";const Re={class:"guarantee-list"},Ee=(e=>(V("data-v-3322a96a"),e=e(),L(),e))((()=>c("span",null,"保障计划",-1))),Ue={key:0,class:"picture-payment-content"},Be=["onClick"],He=["src"],je=["src"],_e={key:1,class:"plan-list"},Me=["onClick"],Ye={key:2,class:"feerate-view"},Qe={key:0},Ge={class:"extinfo-info-list"},Ke={class:"guarantee-detail"},ze={class:"content"};var We=le(e({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1},paymentFrequency:{type:String,default:""},premiumInfo:{type:Object,default:()=>{}}},emits:["update-active-plan"],setup(e,{emit:V}){var L;const k=e;a((e=>({"4f3ea1a7":Q.value})));const D=t(null==(L=k.dataSource)?void 0:L.planList),S=t(k.activePlanCode),A=t();n([()=>k.dataSource,()=>k.activePlanCode],(()=>{var e,a;k.isMultiplePlan&&(D.value=null==(e=k.dataSource)?void 0:e.planList,S.value=k.activePlanCode,A.value=null==(a=k.dataSource)?void 0:a.planList.findIndex((e=>e.planCode===S.value)))}),{immediate:!0});const b=t([]),w=t([]),N=t(),x=l((()=>k.isMultiplePlan?k.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));n([()=>k.dataSource,()=>k.activePlanCode,()=>k.paymentFrequency,()=>S.value],(()=>{var e,a,t,n,l;if(k.isMultiplePlan){if(D.value&&D.value.length>0){let e=0;const a=D.value.findIndex((e=>e.planCode===S.value));a>-1&&(e=a),b.value=D.value[e].guaranteeItemVOS,w.value=D.value[e].extInfoVOList;const t=D.value[e].productPremiumVOList.find((e=>e.paymentFrequency===k.paymentFrequency));N.value=t||(null==(l=D.value[e])?void 0:l.productPremiumVOList[0])}}else{b.value=null==(e=k.dataSource)?void 0:e.planInsureVO.guaranteeItemVOS,w.value=null==(a=k.dataSource)?void 0:a.planInsureVO.extInfoVOList;const l=null==(t=k.dataSource)?void 0:t.planInsureVO.productPremiumVOList.find((e=>e.paymentFrequency===k.paymentFrequency));N.value=l||(null==(n=k.dataSource)?void 0:n.planInsureVO.productPremiumVOList[0])}}),{immediate:!0,deep:!0});const F=l((()=>{var e;return(null==(e=k.dataSource)?void 0:e.rateUri)||""})),q=l((()=>!!(N.value&&N.value.paymentFrequencyValue&&N.value.premiumUnit&&F))),[T,R]=i(!1),E=l((()=>{var e;return!(!b.value||!(null==(e=b.value)?void 0:e.length))&&(b.value.length>k.count&&(!!k.isShowClose||!T.value))})),U=()=>{R()},B=l((()=>{var e;return b.value&&(null==(e=b.value)?void 0:e.length)?b.value.length<=k.count||T.value?b.value:b.value.slice(0,k.count):[]})),H=e=>{var a;S.value=e,A.value=null==(a=k.dataSource)?void 0:a.planList.findIndex((e=>e.planCode===S.value))},j=t(!1),_=()=>{j.value=!0},M=()=>{Ve({fileType:"pdf",fileUri:F.value})},Y=e=>{S.value=D.value[e.name].planCode},Q=t("");return n([()=>S.value,()=>j.value],(()=>{o((()=>{(()=>{var e,a;const t=((null==(e=document.querySelector(".guarantee-popup .extinfo-info-list"))?void 0:e.clientHeight)||0)+1,n=t+((null==(a=document.querySelector(".guarantee-popup .custom-plan-tab"))?void 0:a.clientHeight)||0)+(t?5:0);Q.value=`calc( 100% - ${n}px )`})()}))})),(a,t)=>{var n,l;const i=r("ProCell"),o=r("ProTab"),V=r("ProPopup"),L=u("dompurify-html");return s(),d(v,null,[c("div",Re,[c("div",{class:"header"},[Ee,c("span",{onClick:_},"查看详情")]),e.isMultiplePlan?(s(),d(v,{key:0},[m(x).length>0?(s(),d("div",Ue,[(s(!0),d(v,null,p(m(x),(e=>(s(),d("div",{key:e.planCode,class:f("picture-payment-item"),onClick:a=>H(e.planCode)},[S.value==e.planCode?(s(),d("img",{key:0,src:e.selectedPic},null,8,He)):(s(),d("img",{key:1,src:e.unSelectedPic},null,8,je))],8,Be)))),128))])):(s(),d("div",_e,[(s(!0),d(v,null,p(D.value,((e,a)=>(s(),d("div",{key:`${e.planCode}_${a}`,class:f("plan-list-item "+(e.planCode===S.value?"plan-list-item-active":"")),onClick:a=>H(e.planCode)},[c("span",null,y(e.planName),1)],10,Me)))),128))]))],64)):I("",!0),(s(!0),d(v,null,p(m(B),((e,a)=>(s(),h(i,{key:a,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),m(E)?(s(),d("div",{key:1,class:"show-more",onClick:U},[O(y(m(T)?"收起":"查看更多")+" ",1),P(ie,{name:"arrow-down-dobule",class:f(["icon",{showMore:m(T)}])},null,8,["class"])])):I("",!0),m(q)?(s(),d("div",Ye,[c("span",null,y(`${(null==(n=N.value)?void 0:n.paymentFrequencyValue)||""}${(null==(l=N.value)?void 0:l.premiumUnit)||""}`),1),m(F)?(s(),d("span",{key:0,onClick:M},"查看保费")):I("",!0)])):I("",!0)]),P(oe),P(V,{show:j.value,"onUpdate:show":t[1]||(t[1]=e=>j.value=e),title:"保障详情",class:"guarantee-popup"},{default:g((()=>[w.value&&w.value.length>0?(s(),d("div",Qe,[c("div",Ge,[(s(!0),d(v,null,p(w.value,((e,a)=>(s(),h(i,{key:a,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),P(oe)])):I("",!0),e.isMultiplePlan?(s(),h(o,{key:1,active:A.value,"onUpdate:active":t[0]||(t[0]=e=>A.value=e),list:D.value.map(((e,a)=>({title:e.planName}))),class:"custom-plan-tab",onClickTab:Y},null,8,["active","list"])):I("",!0),c("div",Ke,[(s(!0),d(v,null,p(b.value,((e,a)=>(s(),d("div",{key:a,class:"guarantee-item"},[P(i,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),C(c("div",ze,null,512),[[L,e.content]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-3322a96a"]]);const Xe={class:"com-custom-card"},Je={class:"title"};var Ze=le(e({props:{title:{type:String,required:!0}},setup:e=>(a,t)=>(s(),d("div",Xe,[c("div",Je,y(e.title),1),c("div",null,[k(a.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-059c21ee"]]);const $e={class:"question"},ea={class:"title"};var aa=le(e({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup:e=>(a,t)=>{const n=r("ProSvg"),l=r("van-collapse-item");return s(),h(l,{name:e.name,class:"com-question-item"},{title:g((()=>[c("div",$e,[P(n,{name:"question"}),c("div",ea,y(e.question),1)])])),default:g((()=>[O(" "+y(e.answer),1)])),_:1},8,["name"])}}),[["__scopeId","data-v-0d7ea124"]]);const ta={class:"com-question"};var na=le(e({props:{list:{type:Array,default:()=>[]}},setup(e){const a=e,[n,o]=i(!1),u=t([]),c=()=>{o()},C=l((()=>a.list.length<=4||n.value?a.list:a.list.slice(0,4)));return(a,t)=>{const l=r("van-collapse");return s(),d("div",ta,[P(l,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e)},{default:g((()=>[(s(!0),d(v,null,p(m(C),((e,a)=>(s(),h(aa,{key:a,name:a.toString(),question:e.title,answer:e.desc},null,8,["name","question","answer"])))),128))])),_:1},8,["modelValue"]),e.list.length>4?(s(),d("div",{key:0,class:"show-more",onClick:c},[O(y(m(n)?"收起":"展开")+" ",1),P(ie,{name:"down",class:f(["icon",{showMore:m(n)}])},null,8,["class"])])):I("",!0)])}}}),[["__scopeId","data-v-1b7e97e9"]]);const la={class:"spec"},ia={key:1,class:"spec"};var oa=le(e({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:a}){const n=e,i=t(),o=t([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),u=l((()=>{var e,a,t,l;return(null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.spec)&&(null==(l=null==(t=n.detail)?void 0:t.tenantProductInsureVO)?void 0:l.spec.length)>0})),f=l((()=>{var e,a,t,l,i,o,r,u,s,d,c,v,m,p;const f=null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO.settlementProcessType;return!!(f===z.WORD&&(null==(i=null==(l=null==(t=n.detail)?void 0:t.tenantProductInsureVO)?void 0:l.settlementProcessVO)?void 0:i.settlementProcessList)&&(null==(u=null==(r=null==(o=n.detail)?void 0:o.tenantProductInsureVO)?void 0:r.settlementProcessVO)?void 0:u.settlementProcessList.length)>0||f===z.IMAGE&&(null==(c=null==(d=null==(s=n.detail)?void 0:s.tenantProductInsureVO)?void 0:d.settlementProcessVO)?void 0:c.settlementProcessPicList)&&(null==(p=null==(m=null==(v=n.detail)?void 0:v.tenantProductInsureVO)?void 0:m.settlementProcessVO)?void 0:p.settlementProcessPicList.length)>0)})),y=l((()=>{var e,a,t,l;return(null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.questionList)&&(null==(l=null==(t=n.detail)?void 0:t.tenantProductInsureVO)?void 0:l.questionList.length)>0})),O=l((()=>{let e=[...o.value];return u.value||(e=e.filter((e=>"tab1"!==e.slotName))),f.value||y.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return a({handleClickTab:()=>{var e;return null==(e=i.value)?void 0:e.handleClickTab}}),(e,a)=>{const t=r("van-image"),l=r("ProSvg");return s(),h(re,{ref_key:"scrollRef",ref:i,class:"tabs",list:m(O),sticky:"",scrollspy:""},D({tab3:g((()=>[k(e.$slots,"form",{},void 0,!0)])),_:2},[m(u)?{name:"tab1",fn:g((()=>{var e,a;return[c("div",la,[(s(!0),d(v,null,p((null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.spec)||[],((e,a)=>(s(),h(S,{key:a},{fallback:g((()=>[P(l,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:g((()=>[(s(),h(t,{key:a,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128)),P(oe)])]}))}:void 0,m(f)||m(y)?{name:"tab2",fn:g((()=>{var e,a;return[m(f)?(s(),d(v,{key:0},[(null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO.settlementProcessType)===m(z).WORD?(s(),h(Ze,{key:0,title:"理赔说明"},{default:g((()=>{var e,a,t;return[P(be,{list:null==(t=null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:t.settlementProcessList},null,8,["list"])]})),_:1})):(s(),d("div",ia,[(s(),h(S,null,{fallback:g((()=>[P(l,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:g((()=>{var e,a,l;return[(s(!0),d(v,null,p((null==(l=null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:l.settlementProcessPicList)||[],((e,a)=>(s(),h(t,{key:a,width:"100%",src:e,class:"detail-img"},null,8,["src"])))),128))]})),_:1}))])),P(oe)],64)):I("",!0),m(y)?(s(),d(v,{key:1},[P(Ze,{title:"常见问题"},{default:g((()=>{var e,a;return[P(na,{list:null==(a=null==(e=n.detail)?void 0:e.tenantProductInsureVO)?void 0:a.questionList},null,8,["list"])]})),_:1}),P(oe)],64)):I("",!0)]}))}:void 0]),1032,["list"])}}}),[["__scopeId","data-v-70ed394c"]]);const ra=c("div",{class:"tip"},[c("div",{class:"content"},[c("span",null,[c("span",{class:"important-text"},"重要"),O(" 请确认被保险人是否存在下列问题，请如实告知，否则将对您的理赔权益或合同效力产生影响 ")])])],-1),ua={class:"title"},sa={class:"list"},da={class:"item"},ca={class:"footer"},va=O("不符合"),ma=O("符合，立即投保"),pa=e({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth","onCloseHealthByMask"],setup(e,{emit:a}){const i=e,o=ge(),u=t(i.show),d=t(i.activeIndex),v=l((()=>{var e;return null==(e=i.contentList[d.value])?void 0:e.attachmentUri})),p=l((()=>{var e;return null==(e=i.contentList[d.value])?void 0:e.attachmentType})),f=t(!0),I=e=>{"allFalse"===e&&(f.value=!1,a("update:show",!1)),a("onConfirmHealth",e)};return n((()=>i),(()=>{u.value=i.show,d.value=i.activeIndex}),{deep:!0,immediate:!0}),(t,n)=>{const l=r("ProFilePreview"),i=r("VanButton"),d=r("van-config-provider"),O=r("ProPopup");return s(),h(O,{show:u.value,"onUpdate:show":n[2]||(n[2]=e=>u.value=e),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:n[3]||(n[3]=e=>{f.value&&a("onCloseHealthByMask")})},{default:g((()=>[P(d,{"theme-vars":m(o),class:"custom-provider"},{default:g((()=>[ra,c("div",ua,y(e.contentList[0].attachmentName),1),c("div",sa,[c("div",da,[(s(),h(l,{key:m(v),content:m(v),type:m(p)},null,8,["content","type"]))])]),c("div",ca,[P(i,{block:"",round:"",class:"left",onClick:n[0]||(n[0]=e=>I("N"))},{default:g((()=>[va])),_:1}),P(i,{type:"primary",plain:"",block:"",round:"",onClick:n[1]||(n[1]=e=>I("allFalse"))},{default:g((()=>[ma])),_:1})])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}}),fa=(e,a="YYYY-MM-DD")=>A(e).format(a),ya=(e,a=0,t="day",n="YYYY-MM-DD")=>A(e).add(a,t).format(n),Ia=(e,a=0,t="day",n="YYYY-MM-DD")=>A(e).subtract(a,t).format(n);const ha=e=>(V("data-v-790aa01d"),e=e(),L(),e),Oa={class:"com-period-cell"},Pa={key:0,class:"period-custom-cell period-check-btn-cell"},ga=ha((()=>c("div",{class:"period-cell-label"},"保障期间",-1))),Ca={class:"period-cell-content"},Va=ha((()=>c("div",{class:"period-cell-label"},"生效日期",-1))),La={class:"period-cell-content period-custom-cell-content"},ka={key:2,class:"period-custom-cell period-common-cell"},Da=ha((()=>c("div",{class:"period-cell-label"},"保障期限",-1))),Sa={class:"period-cell-content"},Aa=ha((()=>c("div",{class:"picker-custom-title"},"选择年月",-1))),ba=O("确 定");var wa=le(e({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:a,emit:o}){const u=e;t({});const p=(e,a)=>"year"===e?`${a}年`:"month"===e?`${a}月`:"day"===e?`${a}日`:a,f=t(new Date),h=Ne("RISK_INSURANCE_PERIOD"),O=b({formInfo:u.formInfo});n((()=>O.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(f.value=new Date(e))}));const C=t(),V=t([]);n([()=>u.insureDetail,()=>O.formInfo.activePlanCode],(()=>{var e;if(O.formInfo.insuranceStartDate="",O.formInfo.insuranceEndDate="",O.formInfo.commencementTime="",u.insureDetail)if(u.insureDetail.productRelationPlanVOList&&u.insureDetail.productRelationPlanVOList.length>0){let a=0;const t=u.insureDetail.productRelationPlanVOList.findIndex((e=>e.planCode===O.formInfo.activePlanCode));t>-1&&(a=t);const n=((null==(e=u.insureDetail.productRelationPlanVOList[a])?void 0:e.productRiskVoList[0].riskDetailVOList)||[]).find((e=>1===e.riskType));n&&(C.value=n)}else{const e=(u.insureDetail.productRiskVoList[0].riskDetailVOList||[]).find((e=>1===e.riskType));e&&(C.value=e)}}),{deep:!0,immediate:!0}),n([()=>C.value,()=>h.value],(()=>{V.value=[],Array.isArray(h.value)&&h.value.length>1&&C.value&&(V.value=(C.value.riskInsureLimitVO.insurancePeriodValueList||[]).map((e=>{const a=h.value.find((a=>a.value===e));return a?{label:a.name,value:a.value}:null})).filter((e=>!!e))),V.value.length>0?V.value.findIndex((e=>e.value===O.formInfo.insurancePeriodValue))<0&&(O.formInfo.insurancePeriodValue=V.value[0].value):O.formInfo.insurancePeriodValue=te.YEAR_1}),{deep:!0,immediate:!0});const L=l((()=>{var e,a;return(null==(e=C.value)?void 0:e.insuranceStartType)?String(null==(a=C.value)?void 0:a.insuranceStartType):W.CURRENT_DAY})),k=l((()=>{var e,a;return(null==(e=C.value)?void 0:e.insuranceEndType)?String(null==(a=C.value)?void 0:a.insuranceEndType):X.CURRENT_DAY})),[D,S]=i(!1),A=()=>{S(!0)},N=new Date(ya(new Date,1,"day")),x=l((()=>{var e;if(L.value===W.CUSTOM_DAY){const a=null==(e=C.value)?void 0:e.riskInsureLimitVO.maxInsuranceDay;if(!a)return new Date;const t=ya(new Date,Number(a),"day");return new Date(t)}return new Date})),F=e=>{O.formInfo.insuranceStartDate=`${fa(e)} 00:00:00`,S(!1)},q=()=>{S(!1)};return n([()=>L.value,()=>O.formInfo.insurancePeriodValue,()=>O.formInfo.insuranceStartDate],(()=>{if(!O.formInfo.insurancePeriodValue)return;const[e,a]=O.formInfo.insurancePeriodValue.split("_");if(O.formInfo.insuranceStartDate||(L.value===W.CUSTOM_DAY||L.value===W.NEXT_DAY?O.formInfo.insuranceStartDate=`${ya(new Date,1,"day")} 00:00:00`:O.formInfo.insuranceStartDate=`${fa(new Date)} 00:00:00`),"to"!==e){const t=`${Ia(O.formInfo.insuranceStartDate,1,"day")} 00:00:00`;k.value===X.CURRENT_DAY?O.formInfo.insuranceEndDate=`${ya(t,Number(a),e)} 23:59:59`:O.formInfo.insuranceEndDate=`${ya(O.formInfo.insuranceStartDate,Number(a),e)} 00:00:00`}else{let t=O.formInfo.tenantOrderInsuredList[0].birthday;O.formInfo.tenantOrderInsuredList[0].certType===ue.CERT&&O.formInfo.tenantOrderInsuredList[0].certNo&&se(O.formInfo.tenantOrderInsuredList[0].certNo)&&(t=de(O.formInfo.tenantOrderInsuredList[0].certNo));const n=`${Ia(t,1,"day")} 00:00:00`;"single"===a&&(O.formInfo.insuranceEndDate="9999-99-99 23:59:59"),k.value===X.CURRENT_DAY?O.formInfo.insuranceEndDate=`${ya(n,Number(a),e)} 23:59:59`:O.formInfo.insuranceEndDate=`${ya(t,Number(a),e)} 00:00:00`}}),{immediate:!0}),a({}),(e,a)=>{const t=r("ProRadioButton"),n=r("ProSvg"),l=r("van-config-provider"),i=r("VanButton"),o=r("van-datetime-picker"),u=r("ProPopup");return s(),d(v,null,[P(l,{"theme-vars":m(Ce)},{default:g((()=>[c("div",Oa,[V.value.length>1?(s(),d("div",Pa,[ga,c("div",Ca,[P(t,{modelValue:m(O).formInfo.insurancePeriodValue,"onUpdate:modelValue":a[0]||(a[0]=e=>m(O).formInfo.insurancePeriodValue=e),options:V.value},null,8,["modelValue","options"])])])):I("",!0),m(L)===m(W).CUSTOM_DAY?(s(),d("div",{key:1,class:"period-custom-cell period-common-cell",onClick:A},[Va,c("div",La,[c("span",null,y(m(O).formInfo.insuranceStartDate?m(fa)(m(O).formInfo.insuranceStartDate,"YYYY.MM.DD HH:mm:ss"):""),1),P(n,{class:"custom--arrow-right",name:"arrow-right"})])])):I("",!0),m(L)!==m(W).CUSTOM_DAY?(s(),d("div",ka,[Da,c("div",Sa,y(m(O).formInfo.insuranceStartDate?m(fa)(m(O).formInfo.insuranceStartDate,"YYYY.MM.DD"):"")+"-"+y(m(O).formInfo.insuranceEndDate?m(fa)(m(O).formInfo.insuranceEndDate,"YYYY.MM.DD"):""),1)])):I("",!0)])])),_:1},8,["theme-vars"]),P(u,{show:m(D),"onUpdate:show":a[3]||(a[3]=e=>w(D)?D.value=e:null),height:"340",closeable:!0},{default:g((()=>[P(o,{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),type:"date",title:"选择年月","min-date":m(N),"max-date":m(x),formatter:p,"visible-item-count":5,onConfirm:F,onCancel:q},{cancel:g((()=>[])),title:g((()=>[Aa])),confirm:g((()=>[P(i,{type:"primary",round:"",block:"",class:"linear-btn custom-picker-btn",onClick:a[1]||(a[1]=e=>D.value=!1)},{default:g((()=>[ba])),_:1})])),_:1},8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-790aa01d"]]);const Na=e=>(V("data-v-e82a6c6e"),e=e(),L(),e),xa={class:"com-payment-type"},Fa={class:"title"},qa={key:0,class:"picture-payment-content"},Ta=["onClick"],Ra=["src"],Ea=["src"],Ua={key:1,class:"custom-cell check-btn-cell"},Ba=Na((()=>c("div",{class:"cell-label"},"保障方案",-1))),Ha={class:"cell-content"},ja={key:0,class:"picture-payment-content"},_a=["onClick"],Ma=["src"],Ya=["src"],Qa={key:1,class:"default-payment-content"},Ga=[Na((()=>c("div",{class:"pay-method"},[c("span",{class:"method"},y("按月交费")),c("span",{class:"acount"},y("共12期"))],-1)))],Ka=[Na((()=>c("div",null,[c("div",{class:"tip"},[c("span",null,y("比按月支付最高省16%"))]),c("div",{class:"triangle"}),c("div",{class:"pay-method"},[c("span",{class:"method"},y("一次交清")),c("span",{class:"acount"},y("比月交保费省最高2014元"))])],-1)))],za={key:2,class:"custom-cell check-btn-cell"},Wa=Na((()=>c("div",{class:"cell-label"},"交费方式",-1))),Xa={class:"cell-content"},Ja={class:"custom-cell common-cell"},Za=Na((()=>c("div",{class:"cell-label"},"实付保费",-1))),$a={key:0,class:"cell-content actual-premium"},et={class:"cell-content actual-premium"},at={key:0,class:"actual-premium actual-premium-month-tip"},tt={key:0,class:"feerate-explain"},nt={class:"content"},lt=Na((()=>c("div",{class:"triangle-top"},null,-1)));var it=le(e({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}},configDetail:{type:Object,default:()=>{}},isMultiplePlan:{type:Boolean,default:!1},premiumInfo:{type:Object,default:()=>{}}},emits:["update-active-plan"],setup(e,{expose:a,emit:i}){const o=e;t({});const u=b({formInfo:o.formInfo}),O=t([]),C=t(),V=t(),L=l((()=>{var e;return"1"===String(null==(e=C.value)?void 0:e.paymentFrequencyFlag)}));l((()=>{var e;return null==(e=V.value)?void 0:e.productPremiumVOList.find((e=>e.paymentFrequency===u.formInfo.paymentFrequency))}));const k=l((()=>o.premiumInfo.premiumLoadingText?o.premiumInfo.premiumLoadingText:`${o.premiumInfo.premium||""}${o.premiumInfo.unit||""}`)),D=l((()=>{if(V){const{premiumExplain:e,premiumExplainViewName:a,premiumExplainUri:t}=V.value||{};return{premiumExplain:e,premiumExplainUri:t,premiumExplainViewName:a}}return null})),S=l((()=>D.value&&D.value.premiumExplain&&D.value.premiumExplainViewName));n((()=>o.configDetail),(()=>{var e;o.isMultiplePlan&&o.configDetail&&(O.value=null==(e=o.configDetail.tenantProductInsureVO)?void 0:e.planList)}),{immediate:!0,deep:!0}),n([()=>o.configDetail,()=>o.isMultiplePlan,()=>u.formInfo.activePlanCode],(()=>{if(o.configDetail)if(o.isMultiplePlan){let e=0;const a=o.configDetail.tenantProductInsureVO.planList.findIndex((e=>e.planCode===u.formInfo.activePlanCode));a>-1&&(e=a),C.value=o.configDetail.tenantProductInsureVO.planList[e].productPlanInsureConditionVO,V.value=o.configDetail.tenantProductInsureVO.planList[e]}else C.value=o.configDetail.tenantProductInsureVO.planInsureVO.productPlanInsureConditionVO,V.value=o.configDetail.tenantProductInsureVO.planInsureVO}),{deep:!0,immediate:!0});const A=l((()=>{var e;if(C.value&&C.value.paymentFrequency){return((null==(e=C.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1})),w=t(!1);n((()=>C.value),(()=>{var e;if(C.value){const a=(null==(e=C.value.paymentFrequency)?void 0:e.split(","))||[];if(1===a.length)return u.formInfo.paymentFrequency=C.value.paymentFrequency,void(w.value=!1);if(2===a.length&&a.filter((e=>![J.SINGLE,J.MONTH].includes(e))).length<1)return void(w.value=!0);w.value=!1}}),{immediate:!0,deep:!0});const x=l((()=>{var e;return C.value?null==(e=C.value.paymentFrequencyList||[])?void 0:e.map((e=>({...e,paymentFrequency:e.skinValue}))):[]})),F=l((()=>x.value.length>0)),q=l((()=>o.isMultiplePlan?o.configDetail.tenantProductInsureVO.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[])),T=l((()=>{var e,a;if(C.value){const t=(null==(e=C.value.paymentFrequency)?void 0:e.split(","))||[];return 1===t.length&&(u.formInfo.paymentFrequency=t[0]),null==(a=t||[])?void 0:a.map((e=>({label:Z[e],value:e})))}return[]})),R=e=>{u.formInfo.paymentFrequency=e},E=e=>{u.formInfo.activePlanCode=e},U=()=>{var e,a;(null==(e=D.value)?void 0:e.premiumExplainUri)?Ve({fileType:"pdf",fileUri:null==(a=D.value)?void 0:a.premiumExplainUri}):N("无费率文件！")};return a({}),(a,t)=>{const n=r("ProRadioButton"),l=r("templat"),i=r("ProDivider"),C=r("van-config-provider");return s(),h(C,null,{default:g((()=>[c("div",xa,[c("div",Fa,y(m(A)?"交费方式":"保障计划"),1),e.isMultiplePlan?(s(),d(v,{key:0},[m(q).length>0?(s(),d("div",qa,[(s(!0),d(v,null,p(m(q),(e=>(s(),d("div",{key:e.planCode,class:f("picture-payment-item"),onClick:a=>E(e.planCode)},[m(u).formInfo.activePlanCode==e.planCode?(s(),d("img",{key:0,src:e.selectedPic},null,8,Ra)):(s(),d("img",{key:1,src:e.unSelectedPic},null,8,Ea))],8,Ta)))),128))])):(s(),d("div",Ua,[Ba,c("div",Ha,[P(n,{modelValue:m(u).formInfo.activePlanCode,"onUpdate:modelValue":t[0]||(t[0]=e=>m(u).formInfo.activePlanCode=e),options:O.value,prop:{value:"planCode",label:"planName"},onChange:E},null,8,["modelValue","options"])])]))],64)):I("",!0),m(L)?(s(),h(l,{key:1},{default:g((()=>[m(F)&&m(x).length>1?(s(),d("div",ja,[(s(!0),d(v,null,p(m(x),(e=>(s(),d("div",{key:e.paymentFrequency,class:f("picture-payment-item"),onClick:a=>R(e.paymentFrequency)},[m(u).formInfo.paymentFrequency==e.paymentFrequency?(s(),d("img",{key:0,src:e.selectedPic},null,8,Ma)):(s(),d("img",{key:1,src:e.unSelectedPic},null,8,Ya))],8,_a)))),128))])):w.value?(s(),d("div",Qa,[c("div",{class:f("com-payment-type-item "+(m(u).formInfo.paymentFrequency==m(J).MONTH?"active":"")),onClick:t[1]||(t[1]=e=>R(m(J).MONTH))},Ga,2),c("div",{class:f("com-payment-type-item "+(m(u).formInfo.paymentFrequency==m(J).SINGLE?"active":"")),onClick:t[2]||(t[2]=e=>R(m(J).SINGLE))},Ka,2)])):m(T).length>1?(s(),d("div",za,[Wa,c("div",Xa,[P(n,{modelValue:m(u).formInfo.paymentFrequency,"onUpdate:modelValue":t[3]||(t[3]=e=>m(u).formInfo.paymentFrequency=e),options:m(T)},null,8,["modelValue","options"])])])):I("",!0)])),_:1})):I("",!0),P(wa,{"form-info":m(u).formInfo,"insure-detail":e.insureDetail,"config-detail":e.configDetail},null,8,["form-info","insure-detail","config-detail"]),m(k)&&m(S)?(s(),d(v,{key:2},[c("div",Ja,[Za,o.premiumInfo.premiumLoadingText?(s(),d("div",$a,y(m(k)),1)):(s(),d(v,{key:1},[c("div",et,y(m(k))+y("5"===m(u).formInfo.paymentFrequency?"/月":""),1),"5"===m(u).formInfo.paymentFrequency?(s(),d("div",at," 共12期 ")):I("",!0)],64))]),m(S)?(s(),d("div",tt,[c("div",nt,[lt,c("div",null,[c("span",null,y(m(D).premiumExplain||""),1),c("span",{class:"file-name",onClick:U},"《"+y(m(D).premiumExplainViewName||"")+"》",1)])])])):I("",!0)],64)):I("",!0)]),P(i)])),_:1})}}}),[["__scopeId","data-v-e82a6c6e"]]);const ot={class:"customer-body"},rt={class:"header"},ut={class:"conatiner"},st=["onClick"],dt={class:"name"},ct=O("确 定");var vt=le(e({props:{userInfo:{type:Object,default:()=>({})},relationCode:{type:String,default:"1"},title:{type:String,default:"选择投保人"},data:{type:Array,default:()=>[]}},emits:["change"],setup(e,{emit:a}){const t=e,l=b({loading:!1,select:{},list:[]});n((()=>t.data),(e=>{l.list=t.data}),{deep:!0,immediate:!0}),n((()=>t.userInfo),(e=>{l.select={...e,certName:e.name}}),{deep:!0,immediate:!0});const i=()=>{l.loading=!1,a("change",l.select)},o=()=>{l.loading=!1,l.loading=!0};return(a,t)=>{const n=r("ProSvg"),u=r("van-icon"),I=r("VanButton"),h=r("ProPopup");return s(),d(v,null,[P(n,{name:"customer",onClick:o}),P(h,{class:"customer-list",style:{height:"416px"},show:m(l).loading,closeable:!1},{default:g((()=>[c("div",ot,[c("div",rt,[c("span",null,y(e.title),1),P(u,{name:m("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAuRJREFUeF7t3DtOI0EQBuDfEtImXAdyNoIEAffYkIALrFZaMu4BiAQiyOE6myARoJI8kteyx/3469FWTTxT3fVNdY/dY/cCeVAFFtRoGQwJSi6CBE1QsgA5XFZogpIFyOGyQhOULEAOlxWaoGQBcris0CCglwB+ATgEcA/gFsAXuW/W4Q4AXAOQ3P4BuAPwUNuJlgqVBgVx9XheduSztgNBzv+xxDtb689VLWoL6CuAkw0Qo6Juw5QU3wD8rLnpLaDvAI62NDIa6hympPgB4Fgb9AbA75lGRkHdhSkpSq5/tEFl8n4CsD7fjDSnlmBKYZzXPmxbhrzAlXZIHmDRHlSqfW8FHRVVFVNQekBHQ1XHZICOgmqCyQKNjmqGyQSNimqKyQaNhmqOqQEaBdUFUwvUG9UNUxPUC9UVUxvUGtUd0wLUCjUEphWoNmoYTEtQLdRQmNagbNRwmB6gLNSQmF6gvahhMT1BW1FDY3qD1qLK+fKePPSrl94FZkmy9yipupdlI6czjYV4ORgBtLRS525cCMwIQ34VqaRSN6GGwYwG2lKpoTAjgk6ojwDm5ks5T+bVi2ivqaPMoetDP0F7H/XL62vn0RzyM/C1mFOoUKhRhnwrZjjUCKAlmPnBvnBOLcGchnR+9dyBWoM5/YKv5ZrCe8s5zWvI98D0XMtRm4niAcoAYcRQwbUGZUIwY9FwLUE1ADRiduFagWomrhm7GtcC1CJhizaKcLVBLRO1bGsrriaoR4Iebf6HqwXqmZhn293/AtlU+q4JVSwDqqxSsSs0AuZ0k136wgR1SUBhvaDoab7tJBZoREyXSmWARsY0R+0FHQHTFLUHdCRMM9RW0BExTVBbQHMDAvICc26RQQbNTVzIoLnNEBk0N8Iig0q41a3a5Gfaf2t3j+n6fqdzsdtWbTrp7EnUlo9Ne5K6ThoJSnZN0AQlC5DDZYUmKFmAHC4rNEHJAuRwWaEJShYgh8sKJYN+A6+yQmSPqqjtAAAAAElFTkSuQmCC"),onClick:t[0]||(t[0]=e=>m(l).loading=!1)},null,8,["name"])]),c("div",ut,[(s(!0),d(v,null,p(m(l).list,((e,a)=>{var t,n;return s(),d("div",{key:`${e.customerId}_${a}`,class:f({item:!0,active:m(l).select.certNo===(null==(t=e.cert[0])?void 0:t.certNo)}),onClick:a=>(e=>{l.select.name=e.cert[0].certName,l.select.certNo=e.cert[0].certNo})(e)},[c("span",dt,y(e.cert[0].certName),1),c("span",null,y(m(ce)(e.cert[0].certNo)),1),C(P(u,{class:"check-icon",name:m("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAn9JREFUSEvtlktIVFEcxn/XXpM6Mz5zVBzR8oFUVARRUljhItKNhZC0qVYhZjMMFIG0aFUUtijKB0GEBL02WmZqRjlbFyWSYQ+EynKyh5baNHPi3hsNtzuj89Bp44G7Oec732/u//y/c0cSQgj+w5AWwNGqevRK/eMLXD0AAx2wu47ogD8OwcVyGHmuFnSJIQrgwR5o2Avfx3ynuL5insFPmuB6NXjcPmjhDqhunSew1wO3HNB9Xtur+SVQ0wZL4+YBPPkVmvdBf7sWmrcVau7Bsnhlfm6ba/SV2kTvB7TQlcVwpB0Mxr/zkvj8VigtvqYMjKnhx/jFY2jYAxMurUfuZqi9DwaTZl4SdQWCD4NgssChFpAPP9ThvAIth8HzU7szZxPUdsBys85REsetgrFhdUGKUcKtPDGLZsfLTXTnGHSe02uzN8LRTohN8OsjiSGnoH4nuKd8goLt6tub0wPDp8ahuQqetek11g1g64LYxID71ebquw2NlSC8PqExDQ5eg6JS/WbXG7WJ3vXr17LWga0b4pJmrJivq+XM3bBpxXLpd52A8pMQs1hdG+qFyxUwPqo3zlwL9m6IT5n1mLRxummDrn9CL1vkbYP9jSpUvol+TeuNM1aD/WHQydCCvV5oqkQpfSgjvUiFmtKC3qW/QNyTUF8KL53BmVgKwd4DZktw+j8q/zfXxCc4U4yS75nGinxwyNCMkKBKcgP+53K9htNb4NuIf9PUVeB4BAmZIUNnBsurw31wtgSmx7XmKbkqNDErLOjsYFkx8AAulPm+qck5KjTJGjY0OLCsetoKd0+p+ay6BMnZEUGDB0eM0RvM7fc4hB+4AA6hWJFJfwMaXAhFHVsobQAAAABJRU5ErkJggg==")},null,8,["name"]),[[x,m(l).select.certNo===(null==(n=e.cert[0])?void 0:n.certNo)]])],10,st)})),128))]),P(I,{type:"primary",round:"",block:"",class:"linear-btn",onClick:i},{default:g((()=>[ct])),_:1})])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-76e8b8d7"]]);const mt=e=>(V("data-v-3efae3c3"),e=e(),L(),e),pt={class:"page-internet-product-detail"},ft={class:"info"},yt={class:"custom-page-form"},It=mt((()=>c("div",{class:"form-title"},"请填写投保信息",-1))),ht={key:2,class:"footer-area"},Ot={class:"price"},Pt={key:0},gt=O(y("立即投保")),Ct=mt((()=>c("div",{id:"xinaoDialog"},null,-1)));var Vt=le(e({setup(e){var a,i;const u=ge();F();const p=q(),{productCode:f="",tenantId:O,agentCode:C="",agencyCode:V,saleChannelId:L,extraInfo:k,insurerCode:S,peview:A}=p.query;let b={};try{b=JSON.parse(decodeURIComponent(k))}catch(ca){}const{openId:w}=b,x=t(),z=t(),W=t(),X=t(!1),Z=t(),le=t(),ie=t(),oe=t(""),re=t(""),se=t(!1),de=t(!1),ce=t(0),Ce=t(!1),Ve=t({}),be=t({}),Ne=t(!1),Re=t(!0),Ee=t("");w&&ye({openId:w},(e=>{be.value=e}));const Ue="jumpToPage",Be=t({tenantId:O,agencyId:V,agentCode:C,orderCategory:1,saleChannelId:L,venderCode:S,productCode:f,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:J.SINGLE,insurancePeriodValue:te.YEAR_1,commencementTime:"",tenantOrderHolder:{extInfo:{hasSocialInsurance:$.HAS}},tenantOrderInsuredList:[{dontFetchDefaultInfo:!1,relationToHolder:ee.SELF,extInfo:{occupationCodeList:[],hasSocialInsurance:$.HAS},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:O,productCode:null==(a=Z.value)?void 0:a.productCode,productName:null==(i=Z.value)?void 0:i.productName,premium:ie.value||0}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",successJumpUrl:"",pageCode:"productInfo",extraInfo:b,templateId:null==b?void 0:b.templateId},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),He=l((()=>!!A)),je=l((()=>{var e,a,t,n,l,i;return!!Z.value&&!!((null==(a=null==(e=Z.value)?void 0:e.tenantProductInsureVO)?void 0:a.planList)&&Array.isArray(null==(n=null==(t=Z.value)?void 0:t.tenantProductInsureVO)?void 0:n.planList)&&(null==(i=null==(l=Z.value)?void 0:l.tenantProductInsureVO)?void 0:i.planList.length)>0)})),_e=l((()=>{if(be.value){const e=[];return Object.keys(be.value).forEach((a=>{e.push(...be.value[a])})),e}return[]})),Me=l((()=>_e.value.length>0)),Ye=l((()=>{var e,a,t;let n={};if((null==(e=le.value)?void 0:e.productFactor)?n=null==(a=le.value)?void 0:a.productFactor:Be.value.activePlanCode&&(n=(null==(t=le.value)?void 0:t.planFactor[Be.value.activePlanCode])||{}),Me.value&&n[1]){const e=n[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay));e>-1&&(n[1][e].isDisplay=2)}return n})),Qe=l((()=>{if(Ye.value[1]){if(Ye.value[1].findIndex((e=>"verificationCode"===e.code&&1===e.isDisplay))>-1)return!0}return!1}));l((()=>{if(Ye.value[2]){if(Ye.value[2].findIndex((e=>"social"===e.code&&1===e.isDisplay))>-1)return!1}return!0})),l((()=>{var e;if(Ye.value[2]){const a=Ye.value[2].findIndex((e=>"certType"===e.code&&1===e.isDisplay));if(a>-1){const t=Ye.value[2][a];return!(!t||1!==t.attributeValueList.length||(null==(e=t.attributeValueList[0])?void 0:e.code)!==ue.CERT)}}return!0})),n((()=>je.value),(()=>{var e,a;je.value&&(Be.value.activePlanCode=Be.value.activePlanCode?Be.value.activePlanCode:null==(a=null==(e=Z.value)?void 0:e.tenantProductInsureVO)?void 0:a.planList[0].planCode)}),{immediate:!0});const Ge=l((()=>{var e,a,t;return je.value?(null==(a=null==(e=le.value)?void 0:e.productRelationPlanVOList.find((e=>e.planCode===Be.value.activePlanCode)))?void 0:a.productRiskVoList)||[]:(null==(t=le.value)?void 0:t.productRiskVoList)||[]})),Ke=l((()=>{var e;if(!Z.value)return{};if(je.value){const a=null==(e=Z.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===Be.value.activePlanCode));return a||{}}return Z.value.tenantProductInsureVO.planInsureVO})),ze=()=>{var e,a;if(Ke.value&&(null==(e=Ke.value)?void 0:e.productPremiumVOList)){const e=null==(a=Ke.value)?void 0:a.productPremiumVOList.find((e=>e.paymentFrequency===Be.value.paymentFrequency));e&&(ie.value=e.paymentFrequencyValue?Number(e.paymentFrequencyValue):null,oe.value=e.premiumUnit)}};n([()=>Ke.value,()=>Be.value.activePlanCode,()=>Be.value.paymentFrequency],(()=>{setTimeout((()=>{ze()}),800)}),{deep:!0,immediate:!0});const Xe=e=>{Be.value.activePlanCode=e},Je=l((()=>{var e,a,t;if((null==(e=le.value)?void 0:e.productQuestionnaireVOList)&&(null==(a=le.value)?void 0:a.productQuestionnaireVOList.length)>0){const e=null==(t=le.value)?void 0:t.productQuestionnaireVOList[0];if(e){const{basicInfo:{questionnaireType:a},questions:t}=e.questionnaireDetailResponseVO||{};return"2"===String(a)?[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:t,attachmentType:"question"}]:[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:t[0].content,attachmentType:Le(String(t[0].textType),t[0].content)}]}}return[]})),Ze=t();n([()=>je.value,()=>Be.value.activePlanCode,()=>Z.value],(()=>{var e,a;let t=null;if(je.value&&Z.value){const a=null==(e=Z.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===(Be.value.activePlanCode||"")));a&&(t=null==a?void 0:a.attachmentVOList)}else Z.value&&(t=null==(a=Z.value)?void 0:a.tenantProductInsureVO.planInsureVO.attachmentVOList);Ze.value=t?Object.keys(t).map((e=>(t[e].forEach((e=>{e.attachmentType=Le(String(e.attachmentType),e.attachmentUri)})),{attachmentName:e,attachmentList:t[e]}))):[]}),{immediate:!0});const $e=async(e,a)=>{const t=await Fe(e),{code:n,data:l}=t;"10000"===n&&(null==a||a())},ea=()=>{z.value.handleClickTab()("tab3")},aa=e=>{Object.assign(Be.value.tenantOrderHolder,e)},ta=e=>{Object.assign(Be.value.tenantOrderInsuredList[0],e)},na=e=>{ce.value=e,de.value=!0},la=async()=>{try{await K(((e={},a={},t={})=>{var n;const l={...t},i={tenantId:O,riskList:(null==(n=l.tenantOrderInsuredList[0])?void 0:n.tenantOrderProductList[0].riskVOList)||[],riskPremium:a,productId:null==e?void 0:e.productBasicInfoVO.id};return l.extInfo.iseeBizNo=Ee.value,l.productCode=e.productBasicInfoVO.productCode,l.commencementTime=l.insuranceStartDate,l.expiryDate=l.insuranceEndDate,l.tenantOrderInsuredList=l.tenantOrderInsuredList.map((e=>({...e,planCode:Be.value.activePlanCode?Be.value.activePlanCode:null}))),l.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:ie.value,productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:Be.value.activePlanCode?Be.value.activePlanCode:null,tenantOrderRiskList:Se(i)},l})(le.value,Ve.value,Be.value),(async(e,a)=>{a===Ue&&(null==e?void 0:e.orderNo)&&await(async e=>{try{const{code:a,data:t}=await Y({orderNo:e,tenantId:O});"10000"===a&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await K(t))}catch(ca){}})(null==e?void 0:e.orderNo)}))}catch(ca){}},ia=async(e,a,t,n=!0)=>{var l,i;try{const o=De(t).map((a=>({...a,paymentFrequency:e.paymentFrequency,insurancePeriodValue:e.insurancePeriodValue,coveragePeriod:e.insurancePeriodValue}))),r={tenantId:O,productCode:null==(l=Z.value)?void 0:l.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,holder:{personVO:{...e.tenantOrderHolder,socialFlag:e.tenantOrderHolder.extInfo.hasSocialInsurance||$.HAS,certType:e.tenantOrderHolder.certType||ue.CERT,extInfo:{...e.tenantOrderHolder.extInfo,hasSocialInsurance:e.tenantOrderHolder.extInfo.hasSocialInsurance||$.HAS}}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance||$.HAS,certType:e.certType||ue.CERT,extInfo:{...e.extInfo,hasSocialInsurance:e.extInfo.hasSocialInsurance||$.HAS}},productPlanVOList:[{insurerCode:a.productBasicInfoVO.insurerCode,planCode:Be.value.activePlanCode?Be.value.activePlanCode:null,riskVOList:o}]})))},{code:u,message:s}=await _(r);if("10000"===u){Ce.value||fe(Ne,"正在保费试算请稍候"),re.value="保费试算中...";const{code:e,data:a}=await M(r);if("10000"===e){if(Ne.value=!1,re.value="",Be.value.tenantOrderInsuredList[0].tenantOrderProductList=null==(i=r.insuredVOList[0])?void 0:i.productPlanVOList,ie.value=a.premium,Be.value.premium=a.premium,Be.value.orderAmount=a.premium,Be.value.orderRealAmount=a.premium,!n){const e={};a.riskPremiumDetailVOList&&a.riskPremiumDetailVOList.length&&a.riskPremiumDetailVOList.forEach((a=>{e[a.riskCode]={premium:a.premium,amount:a.amount}})),Ve.value=e,Ze.value.length>0?(Re.value=!1,na(0)):Je.value.length>0?se.value=!0:await la()}}else re.value=""}else N(s)}catch(ca){re.value="",Ne.value=!1}},ra=async()=>{var e;try{se.value=!1,de.value=!1,x.value&&(null==(e=x.value)||e.validateForm().then((async()=>{var e;if(Me.value||!Qe.value)await ia(Be.value,le.value,Ge.value,!1);else{const a=null==(e=Be.value.tenantOrderHolder)?void 0:e.verificationCode;if(!a||!ke(a))return void N({message:"请输入正确的验证码"});const{code:t,data:n}=await qe(Be.value.tenantOrderHolder.mobile,a);"10000"===t&&await ia(Be.value,le.value,Ge.value,!1)}})))}catch(a){}},ua=e=>{"allFalse"===e?(se.value=!1,la()):B.confirm({className:"xinao-custom-dialog",title:"提示",teleport:"#xinaoDialog",message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{se.value=!1}))},sa=()=>{de.value=!1,Je.value.length<1?la():se.value=!0},da=()=>{se.value=!1,de.value=!1};n([()=>Be.value.tenantOrderInsuredList[0].birthday,()=>Be.value.tenantOrderInsuredList[0].name,()=>Be.value.tenantOrderInsuredList[0].gender,()=>Be.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance,()=>Be.value.activePlanCode,()=>Be.value.paymentFrequency,()=>Be.value.insurancePeriodValue],H((()=>{const{name:e,birthday:a,gender:t,certType:n,extInfo:{hasSocialInsurance:l}}=Be.value.tenantOrderInsuredList[0];He.value||(a&&t&&Be.value.paymentFrequency&&e&&Ae(e)&&l?ia(Be.value,le.value,Ge.value):ze())}),500)),n((()=>Be.value.tenantOrderInsuredList[0]),(e=>{if(ve(be.value))return null;const a=be.value[e.relationToHolder]||[];return 1===a.length&&(ne.SELF!==e.relationToHolder?Be.value.tenantOrderInsuredList[0].dontFetchDefaultInfo||(Be.value.tenantOrderInsuredList[0].dontFetchDefaultInfo=!0,Be.value.tenantOrderInsuredList[0].certNo=Be.value.tenantOrderInsuredList[0].certNo?Be.value.tenantOrderInsuredList[0].certNo:a[0].cert[0].certNo,Be.value.tenantOrderInsuredList[0].name=Be.value.tenantOrderInsuredList[0].name?Be.value.tenantOrderInsuredList[0].name:a[0].cert[0].certName):Be.value.tenantOrderHolder.dontFetchDefaultInfo||(Be.value.tenantOrderHolder.dontFetchDefaultInfo=!0,Be.value.tenantOrderHolder.certNo=Be.value.tenantOrderHolder.certNo?Be.value.tenantOrderHolder.certNo:a[0].cert[0].certNo,Be.value.tenantOrderHolder.name=Be.value.tenantOrderHolder.name?Be.value.tenantOrderHolder.name:a[0].cert[0].certName)),!1}),{immediate:!0,deep:!0});return o((()=>{T(W,(([{isIntersecting:e}],a)=>{X.value=!e}))})),pe(),R((()=>{var e,a;const t=Te.get(ae);if(t){const{tenantOrderHolder:n,tenantOrderInsuredList:l}=t;if(n&&(Be.value.tenantOrderHolder={...n,socialFlag:(null==(e=n.extInfo)?void 0:e.hasSocialInsurance)||$.HAS,certType:n.certType||ue.CERT}),Array(l)&&l[0]){const e=l[0]||{};if(Be.value.activePlanCode=e.planCode,e.tenantOrderProductList&&e.tenantOrderProductList[0]&&e.tenantOrderProductList[0].tenantOrderRiskList){const t=null==(a=e.tenantOrderProductList[0].tenantOrderRiskList)?void 0:a.find((e=>"1"===String(e.riskType)));t&&(Be.value.paymentFrequency=(null==t?void 0:t.paymentFrequency)?String(null==t?void 0:t.paymentFrequency):J.SINGLE)}}}})),E((()=>{(async()=>{var e,a;const t=await Q({productCode:f,withInsureInfo:!0,tenantId:O});"10000"===t.code&&(Ce.value=!0,Z.value={...t.data},document.title=(null==(a=null==(e=t.data)?void 0:e.tenantProductInsureVO)?void 0:a.productName)||"");const n=await j({productCode:f});"10000"===n.code&&(le.value=n.data)})(),setTimeout((async()=>{Ee.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),U((()=>{Ne.value=!1,Te.remove(ae)})),(e,a)=>{const t=r("van-config-provider");return s(),d(v,null,[P(t,{"theme-vars":m(u)},{default:g((()=>{var e,t,n,l,i,o,r,p,f;return[c("div",pt,[c("div",ft,[P(Ie,{url:null==(t=null==(e=Z.value)?void 0:e.tenantProductInsureVO)?void 0:t.banner[0]},null,8,["url"]),(null==(l=null==(n=Z.value)?void 0:n.tenantProductInsureVO)?void 0:l.bannerMove)?(s(),h(Ie,{key:0,url:null==(o=null==(i=Z.value)?void 0:i.tenantProductInsureVO)?void 0:o.bannerMove[0],onClick:ea},null,8,["url"])):I("",!0),c("div",{ref_key:"observeRef",ref:W},null,512)]),P(We,{"show-service-config":"","data-source":null==(r=Z.value)?void 0:r.tenantProductInsureVO,"is-multiple-plan":m(je),"active-plan-code":Be.value.activePlanCode,"payment-frequency":Be.value.paymentFrequency,"premium-info":{premium:ie.value,unit:oe.value,premiumLoadingText:re.value},onUpdateActivePlan:Xe},null,8,["data-source","is-multiple-plan","active-plan-code","payment-frequency","premium-info"]),P(oa,{ref_key:"detailScrollRef",ref:z,detail:Z.value},{form:g((()=>[c("div",yt,[It,P(G,{ref_key:"formRef",ref:x,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":Be.value,"need-desensitize":"","send-sms-code":$e,"factor-object":m(Ye)||{}},D({_:2},[m(_e).length>1?{name:"holderName",fn:g((()=>[P(vt,{"user-info":Be.value.tenantOrderHolder,data:m(_e),onChange:aa},null,8,["user-info","data"])]))}:void 0,m(_e).length>1?{name:"insurerName",fn:g((()=>[P(vt,{title:"选择被保人","user-info":Be.value.tenantOrderInsuredList[0],data:m(_e),onChange:ta},null,8,["user-info","data"])]))}:void 0]),1032,["form-info","factor-object"])]),P(it,{"form-info":Be.value,"insure-detail":le.value,"config-detail":Z.value,"is-multiple-plan":m(je),"premium-info":{premium:ie.value,unit:oe.value,premiumLoadingText:re.value},onUpdateActivePlan:Xe},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","premium-info"])])),_:1},8,["detail"]),(null==(p=Z.value)?void 0:p.tenantProductInsureVO.inscribedContent)?(s(),h(he,{key:0,"inscribed-content":null==(f=Z.value)?void 0:f.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):I("",!0),Ze.value&&Ze.value.length>0?(s(),h(Oe,{key:1,"attachement-list":Ze.value,"pre-text":"请阅读",onPreviewFile:a[0]||(a[0]=e=>na(e))},null,8,["attachement-list"])):I("",!0),X.value?(s(),d("div",ht,[c("div",Ot,[re.value?(s(),d("span",Pt,y(re.value),1)):(s(),d(v,{key:1},[c("span",null,y(m(me)(ie.value)),1),c("span",null,y(oe.value),1)],64))]),P(xe,{disabled:m(He),shadow:!1,"theme-vars":m(u),class:"right",text:"立即投保",onClick:ra},{default:g((()=>[gt])),_:1},8,["disabled","theme-vars"])])):I("",!0)]),Ce.value?(s(),h(Pe,{key:0,"product-detail":Z.value},null,8,["product-detail"])):I("",!0),Ct]})),_:1},8,["theme-vars"]),P(pa,{show:se.value,"onUpdate:show":a[1]||(a[1]=e=>se.value=e),"content-list":m(Je),"active-index":0,onOnConfirmHealth:ua,onOnCloseHealthByMask:da},null,8,["show","content-list"]),de.value?(s(),h(we,{key:0,show:de.value,"onUpdate:show":a[2]||(a[2]=e=>de.value=e),"content-list":Ze.value,"is-only-view":Re.value,"active-index":ce.value,text:Re.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:sa,onOnCloseFilePreviewByMask:da},null,8,["show","content-list","is-only-view","active-index","text"])):I("",!0)],64)}}}),[["__scopeId","data-v-3efae3c3"]]);export{Vt as default};

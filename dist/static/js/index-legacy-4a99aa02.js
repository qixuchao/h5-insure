!function(){var e=document.createElement("style");e.innerHTML=".page-activity-invite{width:100%;height:100%;background:linear-gradient(180deg,#fea64a 0%,#fc7429 88%,#fc6d24 100%)}.page-activity-invite .banner{width:100%}.page-activity-invite .container{position:absolute;width:100%;bottom:.8rem;padding:.26667rem}.page-activity-invite .container .title{margin:auto;margin-top:-1.6rem;width:calc(100% - .8rem)}.page-activity-invite .container .title img{width:100%}.page-activity-invite .container .main-form{background:url(/static/assets/bg.c7f48ab0.png) no-repeat;background-size:100% 100%;position:relative;padding:1.33333rem 0 .6rem}.page-activity-invite .container .main-form .sms-code{width:2rem;text-align:center;font-size:.4rem;font-weight:500;color:var(--van-primary-color);padding:0;white-space:nowrap}.page-activity-invite .container .main-form .submit{height:1.33333rem;margin-top:.53333rem;margin-bottom:.46667rem;background:url(/static/assets/button.4c281a6e.png) no-repeat;background-size:contain;background-position:center;border:none}.page-activity-invite .container .main-form .check-submit{height:2.66667rem;margin-top:.53333rem;background:url(/static/assets/check.689cf047.gif) no-repeat;background-size:contain;background-position:center;border:none}.page-activity-invite .container .main-form .agree{padding:0 .33333rem;font-size:.37333rem;font-weight:400;color:#666;display:flex;align-items:flex-start}.page-activity-invite .container .main-form .agree .check-wrap{margin-right:.26667rem}.page-activity-invite .container .main-form .van-cell .van-field__value{align-items:flex-start}.page-activity-invite .van-field__body{width:100%}\n",document.head.appendChild(e),System.register(["./vendor-legacy-2ed1ad67.js","./infoCollection-legacy-463c6cf6.js","./phoneVerify-legacy-44d126ef.js","./validator-legacy-70be20af.js","./utils-legacy-db9a4890.js","./index-legacy-2207f654.js","./trial-legacy-3a409f30.js","./product-legacy-592bed20.js","./theme-legacy-0d67cf8b.js","./trial-legacy-8e55a8f2.js"],(function(e){"use strict";var a,t,n,i,o,l,r,c,s,u,d,m,v,f,g,p,h,b,y,I,k,C,w,V,N,x,_,j,O,L,U,D,M,S,q;return{setters:[function(e){a=e.g,t=e.E,n=e.M,i=e._,o=e.r,l=e.j,r=e.k,c=e.m,s=e.p,u=e.A,d=e.z,m=e.J,v=e.L,f=e.T,g=e.O,p=e.a9,h=e.h,b=e.n,y=e.G,I=e.F,k=e.C},function(e){C=e.R},function(e){w=e.s,V=e.c},function(e){N=e.v,x=e.a,_=e.b},function(e){j=e.F,O=e.g},function(e){L=e.G},function(e){U=e.g,D=e.m,M=e.i},function(e){S=e.p},function(e){q=e.t},function(){}],execute:function(){const z=a({props:{isCheck:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>{}}},emits:["on-verify"],setup(e,{emit:a}){var g;const p=e,h=t({}),b=t(!1),y=t(0),I=t("获取验证码"),k=n({mobile:null===(g=p.userInfo)||void 0===g?void 0:g.mobile,smsCode:""}),C=e=>!!N(e)||"请输入正确的手机号",_=e=>!!x(e)||"请输入正确的验证码",O=async()=>{y.value>0||null==h||h.value.validate("mobile").then((async()=>{const e=await w(k.mobile),{code:a,data:t}=e;"10000"===a&&(b.value=!0,f({message:"短信发送成功，请查收"}),(()=>{if(y.value>0)return;y.value=30;const e=()=>{I.value=`${y.value}s`,y.value-=1};e();const a=setInterval((()=>{0===y.value?(I.value="获取验证码",y.value=0,clearInterval(a)):e()}),1e3)})())}))},L=async()=>{const e=await V(k.mobile,k.smsCode),{data:t}=e;t&&a("on-verify",k)},U=async()=>{null==h||h.value.validate().then((async()=>{L()}))};return i((()=>k),(()=>{N(k.mobile)&&x(k.smsCode)&&b.value&&L()}),{deep:!0,immediate:!0}),(e,a)=>{const t=o("van-field"),n=o("van-cell-group"),i=o("VanForm");return l(),r(i,{ref_key:"formRef",ref:h,"label-width":"80"},{default:c((()=>[s(n,null,{default:c((()=>[s(t,{modelValue:u(k).mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>u(k).mobile=e),name:"mobile",label:"手机号",clearable:"",placeholder:"请输入手机号",maxlength:u(j).MOBILE,rules:[{validator:C}]},null,8,["modelValue","maxlength","rules"]),s(t,{modelValue:u(k).smsCode,"onUpdate:modelValue":a[1]||(a[1]=e=>u(k).smsCode=e),name:"smsCode",label:"验证码",clearable:"",placeholder:"请输入验证码",maxlength:u(j).SMS_CODE,rules:[{validator:_}]},{button:c((()=>[d("div",{class:v(["sms-code",{"count-down":y.value>0}]),onClick:O},m(I.value),3)])),_:1},8,["modelValue","maxlength","rules"])])),_:1}),d("div",{class:v([{"check-submit":p.isCheck},{submit:!p.isCheck}]),onClick:U},null,2)])),_:1},512)}}}),E=a({props:{userInfo:{type:Object,default:()=>{}}},emits:["on-submit"],setup(e,{emit:a}){const i=e,m=t({}),v=n({name:i.userInfo.name,certNo:i.userInfo.certNo}),f=e=>!!L(v.certNo)||"请填写正确的证件号",g=e=>!!_(e)||"请输入正确的姓名",p=()=>{null==m||m.value.validate().then((async e=>{a("on-submit",v)}))};return(e,a)=>{const t=o("van-field"),n=o("van-cell-group"),i=o("VanForm");return l(),r(i,{ref_key:"formRef",ref:m,"label-width":"80"},{default:c((()=>[s(n,null,{default:c((()=>[s(t,{modelValue:u(v).name,"onUpdate:modelValue":a[0]||(a[0]=e=>u(v).name=e),name:"name",label:"姓名",clearable:"",placeholder:"请输入姓名",maxlength:u(j).NAME,rules:[{validator:g}]},null,8,["modelValue","maxlength","rules"]),s(t,{modelValue:u(v).certNo,"onUpdate:modelValue":a[1]||(a[1]=e=>u(v).certNo=e),name:"certNo",label:"身份证",clearable:"",placeholder:"请输入身份证号",maxlength:u(j).ID_CARD,rules:[{validator:f}]},null,8,["modelValue","maxlength","rules"])])),_:1}),d("div",{class:"submit",onClick:p})])),_:1},512)}}});const F={class:"page-activity-invite"},P=["src"],R={class:"container"},T={class:"main-form"},B={class:"title"},H=["src"],A={class:"agree"},G={class:"check-wrap"},J=k(" 我已阅读并同意 ");e("default",a({setup(e){const a=g(),i=p(),{productCode:m="7X9",tenantId:v="",phoneNo:k,saleChannelId:w,agentCode:V="",paymentMethod:N,from:x}=a.query,_=t(!0),j="check"===x,L=n({title:"/static/assets/title-step1.97cb9efa.png",attachmentList:[{attachmentName:"",attachmentUri:""}],userInfo:{mobile:k,certNo:"",name:""},agree:!1}),W=t(),Y=t(),$=async e=>{if(L.userInfo.mobile=e.mobile,j)return L.agree?void i.push({path:"/chuangxin/baigebao/productDetail",query:{...a.query,tenantId:v,phoneNo:L.userInfo.mobile,productCode:"BWYL2021"}}):void f("请勾选协议");const t=await U({holderPhone:L.userInfo.mobile,productCode:m,tenantId:v}),{code:n,data:o}=t;var l,r;"10000"===n&&(L.userInfo.name=null===(l=o.tenantOrderHolder)||void 0===l?void 0:l.name,L.userInfo.certNo=null===(r=o.tenantOrderHolder)||void 0===r?void 0:r.certNo);L.title="/static/assets/title-step2.258af5e9.png",_.value=!1},K=async e=>{if(L.agree)try{f({message:"领取中...",forbidClick:!0,loadingType:"spinner"}),L.userInfo.certNo=e.certNo,L.userInfo.name=e.name;const t=O({tenantId:v,detail:W.value,insureDetail:Y.value,saleChannelId:w,saleUserId:V,holder:L.userInfo,insured:{...L.userInfo,relationToHolder:C.SELF},paymentMethod:N,renewalDK:"",successJumpUrl:"",premium:0,orderStatus:"",orderTopStatus:"",tenantOrderRiskList:[]}),n=await D(t),{code:o}=n;"10000"===o&&i.push({path:"/chuangxin/baigebao/productDetail",query:{...a.query,tenantId:v,phoneNo:L.userInfo.mobile,certNo:L.userInfo.certNo,name:L.userInfo.name,productCode:"BWYL2021",agentCode:V}})}catch(t){f.clear()}else f("请勾选协议")};return h((()=>{(async()=>{const e=S({productCode:m,withInsureInfo:!0,tenantId:v}),a=M({productCode:m});Promise.all([e,a]).then((([e,a])=>{var t,n;"10000"===e.code&&(W.value=e.data,L.attachmentList=(null===(t=W.value)||void 0===t||null===(n=t.tenantProductInsureVO)||void 0===n?void 0:n.attachmentVOList)||[]),"10000"===a.code&&(Y.value=a.data)}))})()})),(e,a)=>{const t=o("van-checkbox"),n=o("ProPDFviewer"),i=o("van-config-provider");return l(),r(i,{"theme-vars":u(q)},{default:c((()=>{var e,i;return[d("div",F,[d("img",{src:null===(e=W.value)||void 0===e||null===(i=e.tenantProductInsureVO)||void 0===i?void 0:i.banner[0],class:"banner"},null,8,P),d("div",R,[d("div",T,[d("div",B,[d("img",{src:u(L).title},null,8,H)]),_.value?(l(),r(z,{key:0,"is-check":j,"user-info":u(L).userInfo,onOnVerify:$},null,8,["user-info"])):(l(),r(E,{key:1,"user-info":u(L).userInfo,onOnSubmit:K},null,8,["user-info"])),d("div",A,[d("div",G,[s(t,{modelValue:u(L).agree,"onUpdate:modelValue":a[0]||(a[0]=e=>u(L).agree=e),name:"agree",shape:"square"},null,8,["modelValue"])]),d("div",null,[J,(l(!0),b(I,null,y(u(L).attachmentList||[],((e,a)=>(l(),r(n,{key:a,class:"file-name",title:`《${e.attachmentName}》`,content:e.attachmentUri,type:"pdf"},null,8,["title","content"])))),128))])])])])])]})),_:1},8,["theme-vars"])}}}))}}}))}();

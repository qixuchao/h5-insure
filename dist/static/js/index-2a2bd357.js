import{d as e,u as t,a,S as n,r,J as i,E as o,aE as d,$ as s,C as l,b as u,c as f,e as c,w as p,g as I,f as m,a7 as y,k as O,h as L,F as v,i as g,j as b,t as x,n as C,ai as h,M as E,O as T,p as R,N as B,ak as H,al as _,P as V,m as j,ap as w,aF as P,au as A,B as U}from"./index-3e9fe333.js";import{a as N,B as k}from"./infoCollection-5bb26338.js";import{_ as D}from"./index-c32bcaff.js";import{I as S}from"./InsuredPart-b24a697b.js";import{u as q}from"./useDicData-c2733b46.js";import"./pdfh5-008ca364.js";import"./relativeTime-fde2a46e.js";import"./trial-34db1340.js";const F={key:0,class:"beneficiary-part"},$={class:"part-title"},Y={class:"title"},G={class:"radio-item-wrapper"},J={class:"name"},M={class:"hone"},W={class:"address"},z={class:"footer-button"},K=e({__name:"index",setup(e){const K=t(),Q=a(),{templateId:X=1,orderNo:Z="2022072710380711215",tenantId:ee="9991000007",isShare:te,sharePageCode:ae}=Q.query;n();const ne="/infoPreview"===Q.path?"infoPreview":"infoCollection",re=r({}),ie=q("NATIONAL_REGION_CODE"),oe=r({extInfo:{pageCode:ne},tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0}}),de=r(null),se=r([]),le=r([]),ue=r([]),fe=r([]),ce=r([]),pe=i({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),Ie=o((()=>{var e,t;return(null==(t=null==(e=oe.value.extInfo)?void 0:e.contactInfo)?void 0:t[0])||{}})),me=()=>{te?h(`${ae}`,Q.query):E(oe.value).then((({code:e,data:t})=>{"10000"===e&&"jumpToPage"===t.pageAction.pageAction&&K.push({path:T[t.pageAction.data.nextPageCode],query:Q.query})}))};return d((()=>{R({orderNo:Z,tenantId:ee}).then((({code:e,data:t})=>{if("10000"===e){const e=t;e.extInfo={...e.extInfo,pageCode:ne,templateId:X,buttonCode:B.infoPreview},e.tenantOrderHolder=e.tenantOrderHolder||{},e.tenantOrderHolder.extInfo=e.tenantOrderHolder.extInfo||{occupationCodeList:[]},e.tenantOrderInsuredList[0].extInfo=e.tenantOrderInsuredList[0].extInfo||{occupationCodeList:[]},e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map((e=>{const t=e;return t.extInfo=t.extInfo||{},t})),e.tenantOrderAttachmentList.forEach((e=>{e.category===H.OBVERSE_CERT?e.objectType===_.HOLDER?(se.value[0]=e.uri,ue.value[0]=e.id):e.objectType===_.INSURED&&(le.value[0]=e.uri,fe.value[0]=e.id):e.category===H.REVERSE_CERT&&(e.objectType===_.HOLDER?(se.value[1]=e.uri,ue.value[1]=e.id):e.objectType===_.INSURED&&(le.value[1]=e.uri,ue.value[1]=e.id))})),Object.assign(oe.value,e)}})).finally((()=>{pe.isLoading=!1})),s({pageCode:"infoCollection",templateId:X}).then((({code:e,data:t})=>{if("10000"===e){const e={BENEFICIARY:[],INSURER:[],HOLDER:[]};t.productInsureFactorList.forEach((t=>{(e[t.moduleType]=e[t.moduleType]||[]).push(t)})),re.value=e}}))})),(e,t)=>{const a=V,n=j,r=w,i=P,o=l,d=A,s=U,h=u("ProPageWrap");return f(),c(h,{class:"page-info-wrapper"},{default:p((()=>[I(pe).isLoading?O("",!0):(f(),c(d,{key:0,ref_key:"formRef",ref:de,"is-view":""},{default:p((()=>{var e;return[m(S,{"product-data":null==(e=I(oe).tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0]},null,8,["product-data"]),m(a,{title:"投保人"},{default:p((()=>[m(D,{images:I(se),"onUpdate:images":t[0]||(t[0]=e=>y(se)?se.value=e:null),"form-info":I(oe).tenantOrderHolder,"factor-list":I(re).HOLDER,"is-view":""},null,8,["images","form-info","factor-list"])])),_:1}),m(a,{title:"被保人"},{default:p((()=>[m(r,{modelValue:I(oe).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[2]||(t[2]=e=>I(oe).tenantOrderInsuredList[0].relationToHolder=e),label:"为谁保单",name:"relationToHolder",placeholder:"请选择"},{input:p((()=>[m(n,{modelValue:I(oe).tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[1]||(t[1]=e=>I(oe).tenantOrderInsuredList[0].relationToHolder=e),options:I(N),"is-view":""},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),1!=+I(oe).tenantOrderInsuredList[0].relationToHolder?(f(),c(D,{key:0,images:I(le),"onUpdate:images":t[3]||(t[3]=e=>y(le)?le.value=e:null),"form-info":I(oe).tenantOrderInsuredList[0],"factor-list":I(re).INSURER||[],"is-view":""},null,8,["images","form-info","factor-list"])):O("",!0),m(i,{modelValue:I(oe).tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:modelValue":t[4]||(t[4]=e=>I(oe).tenantOrderInsuredList[0].extInfo.insureAreaCode=e),field1:I(oe).tenantOrderInsuredList[0].extInfo.insureProvinceCode,"onUpdate:field1":t[5]||(t[5]=e=>I(oe).tenantOrderInsuredList[0].extInfo.insureProvinceCode=e),field2:I(oe).tenantOrderInsuredList[0].extInfo.insureCityCode,"onUpdate:field2":t[6]||(t[6]=e=>I(oe).tenantOrderInsuredList[0].extInfo.insureCityCode=e),field3:I(oe).tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:field3":t[7]||(t[7]=e=>I(oe).tenantOrderInsuredList[0].extInfo.insureAreaCode=e),label:"投保地区",name:"insureProvinceCode",placeholder:"请选择","is-link":"",required:"","data-source":I(ie),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","data-source"])])),_:1}),m(a,{title:"受益人"},{default:p((()=>[m(r,{modelValue:I(oe).tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[9]||(t[9]=e=>I(oe).tenantOrderInsuredList[0].insuredBeneficiaryType=e),label:"受益人类型",name:"insuredBeneficiaryType",placeholder:"请选择"},{input:p((()=>[m(n,{modelValue:I(oe).tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[8]||(t[8]=e=>I(oe).tenantOrderInsuredList[0].insuredBeneficiaryType=e),options:I(k),"is-view":""},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),2==I(oe).tenantOrderInsuredList[0].insuredBeneficiaryType?(f(),L("div",F,[(f(!0),L(v,null,g(I(oe).tenantOrderInsuredList[0].tenantOrderBeneficiaryList,((e,a)=>(f(),L("div",{key:e.beneficiaryId,class:"beneficiary-item"},[b("div",$,[b("span",Y,x(`受益人${a+1}`),1)]),m(D,{images:I(ce),"onUpdate:images":t[10]||(t[10]=e=>y(ce)?ce.value=e:null),"form-info":e,"factor-list":I(re).BENEFICIARY||[],prefix:`beneficiary-${a}`,"is-view":"","beneficiary-list":I(oe).tenantOrderInsuredList[0].tenantOrderBeneficiaryList},null,8,["images","form-info","factor-list","prefix","beneficiary-list"])])))),128))])):O("",!0)])),_:1}),m(a,{title:"保单通讯信息"},{default:p((()=>[Object.keys(I(Ie)).length?(f(),c(o,{key:0,title:"单元格"},{title:p((()=>[b("div",G,[b("p",null,[b("span",J,x(I(Ie).contactName),1),b("span",M,x(I(Ie).contactPhoneNo),1)]),b("p",W,x(I(Ie).contactAddress),1)])])),_:1})):O("",!0)])),_:1})]})),_:1},512)),b("div",z,[m(s,{block:"",type:"primary",onClick:me},{default:p((()=>[C("下一步")])),_:1})])])),_:1})}}});export{K as default};

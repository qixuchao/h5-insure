import{g as j,a0 as G,Q as J,L as B,C as p,M as Q,T as f,m as d,n as b,j as T,y as t,F as k,r as I,k as l,z as g,E as D,J as E,I as n,G as w,H as V,h as q,B as K,a2 as X,a3 as Y}from"./vendor-e9263418.js";import{u as tt,S as ot}from"./index-b8742a0a.js";import{n as st,o as F}from"./article-20e0fb3d.js";import{_ as et}from"./index-e4c11be9.js";import{_ as at}from"./plugin-vue_export-helper-46f75680.js";const y=v=>(X("data-v-6a47165f"),v=v(),Y(),v),ct={class:"add-product-top"},lt={class:"add-product-mid"},ut={class:"article-tag"},dt=["onClick"],nt={class:"trianele-out"},rt={class:"add-product-bottom"},it={key:0,class:"product-list"},ht=["onClick"],_t=["src"],pt={class:"item-left"},gt={class:"image-tag"},vt={class:"img-tag-text"},mt=["src"],Ct={class:"item-right"},ft={class:"right-toptwo"},kt={class:"right-top"},Et={class:"right-mid"},yt={class:"right-bottom"},Lt={class:"product-tag"},St={class:"tag-text"},xt={class:"shenglvhao"},Bt=y(()=>t("div",{class:"shenglvhao-item"},null,-1)),bt=y(()=>t("div",{class:"shenglvhao-item"},null,-1)),It=y(()=>t("div",{class:"shenglvhao-item"},null,-1)),Dt=[Bt,bt,It],At={class:"product-price"},Pt={class:"price-num"},Tt=y(()=>t("span",{class:"price-text"},"\u5143\u8D77",-1)),wt={class:"footer-out"},Vt={class:"footer-div"},Ft=j({setup(v){const{getIconUrl:A}=tt(),N=G();J();const i=new ot({source:"localStorage"}),r=B([]),h=p(0),m=p([]),e=B([]),c=B([]),L=p(""),_=p("");p(!1);const S=()=>{F({productCategory:L.value,keyword:_.value}).then(o=>{console.log(o,"ONSEARCH"),m.value=o.data.data}).catch(o=>{f.fail("\u67E5\u8BE2\u5931\u8D25"),console.log(o)})},$=(o,a)=>{h.value=a,console.log(o,a,"tag>>>>"),L.value=o,S()},R=o=>{console.log(_.value,"input"),_.value=o},z=()=>{S()},H=o=>{S()},M=()=>{console.log("submit>>>>>>",c),i.set("choosePorList",c),i.set("chooseCheckedList",e),N.back()},O=(o,a)=>{if(!e.includes(o.productCode))e.length>2?f("\u6700\u591A\u53EA\u80FD\u9009\u62E9\u4E09\u4E2A\u4EA7\u54C1"):(e.push(o.productCode),c.push(o));else{const C=e.indexOf(o.productCode);e.splice(C,1),c.splice(C,1)}console.log("\u9009\u62E9\u5B8C\u6210\u540E",o.productCode,e,c)};return Q(()=>{i.get("article-detail-proList")&&(c.splice(0,c.length),e.splice(0,e.length),c.push(...i.get("article-detail-proList")),c.forEach(o=>{e.push(o.productCode)})),i.remove("article-detail-proList"),st({}).then(o=>{r.push({categoryCode:"",categoryName:"\u5168\u90E8"},...o.data.data),console.log(r,"tagList"),r.length!==0&&(L.value=r[0].categoryCode,F({productCategory:r[0].categoryCode}).then(a=>{console.log("product>>",a),m.value=a.data.data}).catch(a=>{console.log(a),f.fail("\u67E5\u8BE2\u4EA7\u54C1\u5931\u8D25")}))}).catch(o=>{f.fail("\u67E5\u8BE2\u5206\u7C7B\u5931\u8D25"),console.log(o)})}),(o,a)=>{const C=I("van-search"),U=I("ZaPageWrap"),W=I("van-button");return l(),d(k,null,[b(U,{"main-class":"page-addProduct","footer-class":"footer-class"},{default:T(()=>{var P;return[t("div",null,[t("div",ct,[b(C,{modelValue:_.value,"onUpdate:modelValue":[a[0]||(a[0]=s=>_.value=s),R],shape:"round","show-action":"","left-icon":g(A)("target.searchImg"),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",class:"search",onCancel:z,onSearch:H},null,8,["modelValue","left-icon"])]),t("div",lt,[t("div",ut,[(l(!0),d(k,null,D(g(r),(s,u)=>(l(),d("div",{key:u,class:E(["tag-item",{checked:h.value==u}]),onClick:x=>$(s.categoryCode,u)},[t("div",{class:E(["tag-out",{checked:h.value==u}])},[t("div",{class:E(["tag-item-text",{checked:h.value==u}])},n(s.categoryName),3)],2),t("div",nt,[t("div",{class:E({triangle:h.value==u})},null,2)])],10,dt))),128))])]),t("div",rt,[((P=m.value)==null?void 0:P.length)>0?(l(),d("div",it,[(l(!0),d(k,null,D(m.value,(s,u)=>(l(),d("div",{key:u,class:"product-item",onClick:x=>O(s)},[w(t("img",{src:g(A)("article.checked"),alt:"",class:"check-image"},null,8,_t),[[V,g(e).includes(s.productCode)]]),t("div",pt,[t("div",gt,[t("div",vt,n((s==null?void 0:s.productImgText)?(s==null?void 0:s.productImgText.length)>5?`${s.productImgText.slice(0,5)}...`:s.productImgText:""),1)]),t("img",{src:s.productImg,alt:"",class:"product-img"},null,8,mt)]),t("div",Ct,[t("div",ft,[t("div",kt,n(s.productName),1),t("div",Et,n(s.productSummary),1)]),t("div",yt,[t("div",Lt,[(l(!0),d(k,null,D(s.productLabel?s.productLabel.slice(0,2):[],(x,Z)=>(l(),d("div",{key:Z,class:"tag-item"},[t("div",St,n(x),1)]))),128)),w(t("div",xt,Dt,512),[[V,s.productLabel?s.productLabel.length>2:!1]])]),t("div",At,[t("span",Pt,n(parseFloat(s.productPrice)),1),Tt])])])],8,ht))),128))])):(l(),q(et,{key:1,class:"empty",title:"\u6682\u65E0\u4EA7\u54C1"}))])])]}),_:1}),t("div",wt,[t("div",Vt,[b(W,{round:"",class:"btn",onClick:M},{default:T(()=>[K(n(`\u786E\u5B9A\xB7\u5DF2\u9009${g(e).length}\u4E2A`),1)]),_:1})])])],64)}}});var Mt=at(Ft,[["__scopeId","data-v-6a47165f"]]);export{Mt as default};

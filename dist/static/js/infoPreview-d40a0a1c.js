import{d as e,b as t,c as a,e as n,w as o,i,$ as s,a7 as r,f as l,E as c,Y as u,g as d,h as p,G as m,bz as f,a5 as I,R as v,U as y,u as h,A as g,r as j,o as P,a0 as b,a8 as _,a9 as O,aa as C,ab as k,k as w,j as L,P as S,p as V,q as N,a1 as E,n as x,a4 as A}from"./index-4989475c.js";import{_ as D,t as R}from"./PayInfo-8c87ec4b.js";import{g as T,i as U}from"./trial-23f93457.js";import{n as q}from"./nextStep-be340e95.js";import{u as F}from"./useAttachment-10d83179.js";import{a as B,q as Y}from"./product-51a4c7e7.js";import{g as M}from"./utils-ccc4d0cf.js";import{u as W}from"./useOrder-3fc444c6.js";import{P as $,B as G}from"./constants-7afb7c3d.js";import{P as J}from"./index-fbe5fa00.js";import{P as z}from"./index-00e0983d.js";import{R as H,b as K}from"./trial-36131a3f.js";import"./merge-c5599fa4.js";import"./keysIn-a287568b.js";import"./isObjectLike-a9798079.js";import"./_getTag-7f09858e.js";import"./debounce-6981b306.js";import"./phoneVerify-c45f31b5.js";import"./index-f0084d21.js";import"./useDicData-eb962be8.js";import"./bankCard-dd180ff0.js";import"./core-4fa1bc00.js";import"./constant-8927d485.js";import"./infoCollection-e57b7b71.js";import"./cloneDeep-96676b66.js";import"./config-98e8d477.js";const Q={class:"com-insured-part-wrapper"},X={class:"content-wrapper"};var Z=m(e({__name:"InsureInfo",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup:e=>(e,m)=>{const v=f,y=I;return t(),a("div",Q,[n(y,{title:"保障信息"},{default:o((()=>{var o;return[i("div",X,[(t(!0),a(s,null,r((null==(o=e.productData)?void 0:o.riskList)||[],((e,o)=>{var r;return t(),a("div",{key:o,class:"risk-item"},[e.riskType===l(H).MAIN_RISK?(t(),a(s,{key:0},[i("p",null,c(e.riskName),1),n(v,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),n(v,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])],64)):(t(),a(s,{key:1},[n(v,{title:e.riskName,content:"投保"},null,8,["title"]),e.exemptFlag===l(u).YES?(t(),d(v,{key:0,title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])):(null==(r=e.liabilityList)?void 0:r.length)?(t(),a(s,{key:1},[n(v,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),n(v,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"]),n(v,{title:"交费方式",content:l(K)[e.paymentFrequency]},null,8,["content"])],64)):p("",!0)],64)),n(v,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),n(v,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])})),128)),n(v,{title:"首期总保费",class:"price",content:(e.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])]})),_:1})])}}),[["__scopeId","data-v-92348b0c"]]);const ee={class:"long-info-preview"},te={class:"footer-btn"},ae=i("span",null,"分享",-1),ne=e({__name:"infoPreview",setup(e){v((()=>y((()=>import("./index-09f44a92.js")),["static/js/index-09f44a92.js","static/css/index-fa4edf2a.css","static/js/index-4989475c.js","static/css/index-9494d932.css","static/js/theme-65292714.js","static/js/index-00e0983d.js","static/css/index-827a8544.css","static/js/utils-ccc4d0cf.js","static/js/infoCollection-e57b7b71.js","static/js/trial-36131a3f.js"]))),v((()=>y((()=>import("./index-bd758a26.js")),["static/js/index-bd758a26.js","static/css/index-4640d9aa.css","static/js/index-4989475c.js","static/css/index-9494d932.css"])));const s=h(),r=W(),{productCode:c="",tenantId:u,agentCode:m="",agencyCode:f,saleChannelId:I,isShare:H,orderNo:K,extraInfo:Q,insurerCode:X,preview:ne}=s.query;let oe={};try{oe=JSON.parse(decodeURIComponent(Q))}catch(Pe){}const ie=g({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),se=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,re=j({imgUrl:"",desc:"",title:"",link:se}),le=j(),ce=j(),ue=j({}),de=j({}),pe=j([]),me=j(),fe=j({});j(!1),j(!1),j(0),j(!0),F(fe,me),j(!1);const Ie=j(!1),ve=j(),ye=()=>{q(r.value,((e,t)=>{t===S.JUMP_PAGE&&ve.value.handleShare()}))},he=async()=>{ne?V($.INFO_PREVIEW,s.query):(Object.assign(r.value,{extInfo:{...r.value.extInfo,buttonCode:G.INFO_PREVIEW,pageCode:$.INFO_PREVIEW}}),q(r.value,((e,t)=>{t===S.JUMP_PAGE&&N(e.nextPageCode,s.query)})))};g({tenantOrderPayInfoList:[]});const ge=j(),je=async()=>{B({productCode:c,tenantId:u}).then((({data:e,code:t})=>{if("10000"===t){ue.value=e;const{wxShareConfig:t,showWXShare:a,title:n,desc:o,image:i}=(null==e?void 0:e.PRODUCT_LIST)||{};a?Object.assign(re.value,{...t,imgUrl:t.image,isShare:a}):Object.assign(re.value,{title:n,desc:o,imgUrl:i,isShare:a}),e.BASIC_INFO&&e.BASIC_INFO.themeType&&E(e.BASIC_INFO.themeType)}})),K&&T({orderNo:K,tenantId:u}).then((({code:e,data:t})=>{"10000"===e&&(Object.assign(r.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),ge.value=t,Ie.value=!0)})),Y({productCode:c}).then((({code:e,data:t})=>{var a,n,o,i;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:s}=t;me.value=e||[];const{basicInfo:{questionnaireType:r},questions:l,questionnaireName:c}=(null==(a=null==s?void 0:s[0])?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};r&&(pe.value=2===r?[{attachmentName:c,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:c,attachmentUri:null==(n=null==l?void 0:l[0])?void 0:n.content,attachmentType:M(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(i=null==l?void 0:l[0])?void 0:i.content)}])}})),await U({productCode:c,isTenant:!ne}).then((({data:e,code:t})=>{var a,n;if("10000"===t){de.value=e,fe.value=(null==(a=e.productPlanInsureVOList)?void 0:a[0])||{};const{payInfo:t}=R(null==(n=fe.value)?void 0:n.productFactor);ie.payInfo={...ie.payInfo,...t}}}))};return P((()=>{je()})),(e,s)=>{var c,u,m,f,I,v;const y=x,h=A;return t(),a("div",ee,[n(y),n(Z,{"product-data":null==(m=null==(u=null==(c=l(r).insuredList)?void 0:c[0])?void 0:u.productList)?void 0:m[0],"total-premium":l(r).orderAmount},null,8,["product-data","total-premium"]),(null==(f=l(fe))?void 0:f.productFactor)?(t(),d(l(J),{key:0,ref_key:"personalInfoRef",ref:ce,modelValue:l(ge),"onUpdate:modelValue":s[0]||(s[0]=e=>b(ge)?ge.value=e:null),"product-factor":null==(I=l(fe))?void 0:I.productFactor,"multi-insured-config":null==(v=l(fe))?void 0:v.multiInsuredConfigVO,"is-view":""},null,8,["modelValue","product-factor","multi-insured-config"])):p("",!0),l(ie).payInfo.schema.length?(t(),d(l(D),{key:1,ref_key:"payInfoRef",ref:le,modelValue:l(r).tenantOrderPayInfoList,"onUpdate:modelValue":s[1]||(s[1]=e=>l(r).tenantOrderPayInfoList=e),schema:l(ie).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):p("",!0),i("div",te,[!l(H)&&l(re).isShare&&l(_)()?(t(),d(k,O({key:0},l(re),{class:"share-btn",onClick:C(ye,["stop"])}),{default:o((()=>[n(h,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ae])),_:1},16,["onClick"])):p("",!0),n(z,{shadow:!1,onClick:he},{default:o((()=>[w(e.$slots,"default",{},(()=>[L("下一步")]))])),_:3})])])}}});export{ne as default};

import{_ as e,d as a,i as l,h as s,j as o,k as d,ah as n,l as t,o as r,c,a as i,b as u,e as m,u as p,p as h,w as v,f as y,v as b,c$ as f,b0 as k,y as w,d0 as V,T as g,cQ as I,bM as T,cA as q,cB as x,aI as C,aS as B,aT as N}from"./index-6a1895a4.js";import{g as _}from"./trial-54998071.js";const U={class:"page-pay-auth-wrap"},j={class:"header"},z={class:"content"},A={class:"bank-card"},R={class:"card-content"},W={class:"main"},E={class:"bank-name"},L={class:"bank-no"},M={class:"bank-card-type"},O=(e=>(B("data-v-27cbce8c"),e=e(),N(),e))((()=>i("p",{class:"desc"},"实时单笔限额5W 实时单日限额5W",-1))),P={class:"footer-button"},Q=a({name:"payAuth"});var S=e(a({...Q,setup(e){const a=l(),B=s(),{orderNo:N,tenantId:Q}=a.query,S=o(),$=o(),D=o({}),F=d((()=>$.value.holder.certType===n.CERT?"身份证号":"证件号")),G=(e,l)=>{f($.value).then((({code:e,data:s})=>{"10000"===e?null==l||l():k.confirm({confirmButtonText:"银行卡修改",message:"当前暂不支持该银行，建议更换银行卡"}).then((()=>{B.push({path:w.updateBankInfo,query:a.query})}))}))},H=()=>{S.value.validate().then((e=>{V($.value).then((({code:e,data:a})=>{"10000"===e&&(B.back(),g("成功"))}))})).catch((e=>{console.log("e",e)}))};t((()=>{(async()=>{await _({orderNo:N,tenantId:Q}).then((({code:e,data:a})=>{"10000"===e&&($.value=a,D.value=a.tenantOrderPayInfoList.find((e=>1===e.payInfoType)))}))})()}));const J=o();return t((()=>{setTimeout((async()=>{J.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const l=I,s=T,o=q,d=x,n=C;return r(),c("div",U,[i("div",j,[u(l,{type:"warning",content:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。"})]),i("div",z,[i("div",A,[i("div",R,[i("div",W,[i("span",E,m(p(D).payBank||"中国工商银行"),1),i("span",L,m(p(D).bankCardNo||"**** **** **** 3941"),1)]),i("p",M,m(p(D).bankCardType||"储蓄卡"),1),O])]),p($)?(r(),h(d,{key:0,ref_key:"formRef",ref:S,model:p($).holder},{default:v((()=>[u(s,{modelValue:p($).holder.name,"onUpdate:modelValue":a[0]||(a[0]=e=>p($).holder.name=e),label:"姓名",name:"name",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(s,{modelValue:p($).holder.certNo,"onUpdate:modelValue":a[1]||(a[1]=e=>p($).holder.certNo=e),label:p(F),name:"certNo",maxlength:"18","is-view":"",required:""},null,8,["modelValue","label"]),u(s,{modelValue:p($).holder.mobile,"onUpdate:modelValue":a[2]||(a[2]=e=>p($).holder.mobile=e),label:"银行预留手机",name:"mobile",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(o,{modelValue:p($).holder.verifyCode,"onUpdate:modelValue":a[3]||(a[3]=e=>p($).holder.verifyCode=e),label:"验证码",maxlength:"6",name:"verifyCode","related-name":"mobile","send-s-m-s-code":G,required:""},null,8,["modelValue"])])),_:1},8,["model"])):y("",!0)]),i("div",P,[u(n,{type:"primary",onClick:H},{default:v((()=>[b("提交")])),_:1})])])}}}),[["__scopeId","data-v-27cbce8c"]]);export{S as default};

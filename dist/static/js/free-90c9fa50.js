import{q as e,aI as t,a,u as n,Y as o,aP as l,t as r,v as s,T as i,b as d,C as u}from"./index-deb4ddfb.js";import{ref as c,reactive as m,watch as p,defineAsyncComponent as V,computed as f,onMounted as v}from"vue";import{d as h}from"./debounce-6981b306.js";import{c as b}from"./cloneDeep-6abacc69.js";import{a as y,q as g}from"./product-c166a0f6.js";import{i as A,t as N}from"./trial-90e504aa.js";import{a as I,s as w,c as k}from"./phoneVerify-8d7afc24.js";import{a as E}from"./index-9ba6d482.js";import{n as _}from"./nextStep-0d38f4c6.js";import{r as C,g as O,v as x,t as D}from"./utils-f063477c.js";import{f as P}from"./utils-8df944cf.js";import{_ as B}from"./index-8e22d71a.js";import{P as L}from"./index-593ee4c8.js";import{_ as F}from"./index-7edb5e9e.js";import{P as S}from"./index-a1ed5e21.js";import{u as j}from"./useAttachment-3dae9e30.js";import{u as R}from"./useOrder-d6d1fc9b.js";import"./pdfh5-e588f83d.js";import"./isObjectLike-a9798079.js";import"./keysIn-131bbce9.js";import"./_getTag-d5b47d26.js";import"./infoCollection-f930e52f.js";/* empty css              */import"./merge-e7788e50.js";import"./PayInfo-e8550347.js";import"./useDicData-48f91541.js";import"./bankCard-1cedc592.js";import"./core-5f3b09dd.js";import"./constant-8927d485.js";import"./trial-a75330fd.js";import"./createProposal-a7e18ac8.js";import"./PersonalInfo-37797a94.js";const T={class:"free-card"},H={class:"title"},z=Vue.defineComponent({name:"freeHolderForm"}),M=Vue.defineComponent({...z,props:{detail:{default:()=>({})},isFirst:{type:Boolean,default:!0},insureDetail:{default:()=>({})},previewMode:{type:Boolean,default:!1}},setup(e,{expose:t}){const a=e,n=c(),o=m({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:1,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"手机号"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:1,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"验证码"}],2:[],3:[]},isFirst:!0}),l=async({mobile:e,type:t},o)=>{var l;if(n.value){if(a.previewMode)return void(null==o||o());null==(l=n.value)||l.validateForm(`${t}_mobile`).then((async()=>{const t=a.isFirst?I:w,n=await t(e),{code:l,data:r}=n;"10000"===l&&(null==o||o())}))}};return p((()=>a.isFirst),(()=>{var e;a.isFirst||(o.factorObj=null==(e=a.insureDetail)?void 0:e.productFactor)})),t({validateForm:()=>new Promise(((e,t)=>{n.value.validateForm().then((t=>{console.log(t),e(!0)})).catch((()=>{console.log("失败"),t()}))}))}),(e,t)=>{const a=Vue.resolveComponent("ProSvg");return Vue.openBlock(),Vue.createElementBlock("div",T,[Vue.createElementVNode("div",{class:Vue.normalizeClass({container:!0,"is-first":e.isFirst})},[Vue.createElementVNode("div",H,[Vue.createVNode(a,{name:"free-arrow"}),Vue.createElementVNode("span",null,Vue.toDisplayString(e.isFirst?"凭手机号 免费领取":"最后一步 填写信息"),1),Vue.createVNode(a,{name:"free-arrow"})]),e.isFirst?(Vue.openBlock(),Vue.createBlock(F,{ref_key:"formRef",ref:n,key:e.isFirst?1:2,"send-sms-code":l,"need-desensitize":"","form-info":e.detail,"factor-object":Vue.unref(o).factorObj},null,8,["form-info","factor-object"])):Vue.createCommentVNode("",!0),Vue.renderSlot(e.$slots,"default")],2)])}}});const J={key:0},U=[Vue.createElementVNode("div",{class:"__skeleton_free_content__"},[Vue.createElementVNode("div",{class:"van-config-provider router-view sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px","--6a485862-state_colors_1_":"#ddd"}},[Vue.createElementVNode("div",{class:"page-free-product-detail"},[Vue.createElementVNode("div",{class:"van-image banner",style:{width:"375px",height:"185px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[Vue.createElementVNode("img",{class:"van-image__img","data-src":"https://za-obs-prod.obs.cn-north-4.myhuaweicloud.com:443/common/20221213/b38ae9c8c023488bb4fb4bdc2c67a211/wecom-temp-b44cd90cb804d1826e7824adc3b386e9(1).png?AccessKeyId=LLSTLZA8R9JY8AJRF7ZF&Policy=eyJleHBpcmF0aW9uIjoiMjAyMi0xMi0yM1QwNDowNTo1OS41NzhaIiwiY29uZGl0aW9ucyI6W1sic3RhcnRzLXdpdGgiLCIka2V5IiwiIl0sWyJlcSIsIiRidWNrZXQiLCJ6YS1vYnMtcHJvZCJdXX0=&Signature=gAgGPVirtYpSJtdYcnN1W3zpIbQ%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),Vue.createElementVNode("div",{class:"free-card",style:{"--0c47bddc-props_colors_0_":"#ddd","--0c47bddc-props_colors_1_":"#ddd"}},[Vue.createElementVNode("div",{class:"container"},[Vue.createElementVNode("div",{class:"title"},[Vue.createElementVNode("svg",{class:"svg-icon icon-free-arrow"},[Vue.createElementVNode("use",{"xlink:href":"#icon-free-arrow"})]),Vue.createElementVNode("span",null,[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"0.00%","--sp":"100.00%","--lh":"16.0001px"}},"最后一步 填写信息")]),Vue.createElementVNode("svg",{class:"svg-icon icon-free-arrow"},[Vue.createElementVNode("use",{"xlink:href":"#icon-free-arrow"})])]),Vue.createElementVNode("div",{class:"page-info-wrapper"},[Vue.createElementVNode("div",{class:"com-form-wrapper","show-error":"","show-error-message":"false"},[Vue.createElementVNode("form",{class:"van-form"},[Vue.createElementVNode("div",{class:"com-card"},[Vue.createElementVNode("div",{class:"com-card-wrap"},[Vue.createElementVNode("div",{class:"header"}),Vue.createElementVNode("div",{class:"body",style:{height:"auto"}},[Vue.createElementVNode("div",{class:"com-personal-wrapper"},[Vue.createElementVNode("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[Vue.createElementVNode("div",{class:"van-cell__title van-field__label van-field__label--left"},[Vue.createElementVNode("label",{id:"van-field-1-label",for:"van-field-1-input"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"手机号")])]),Vue.createElementVNode("div",{class:"van-cell__value van-field__value"},[Vue.createElementVNode("div",{class:"van-field__body"},[Vue.createElementVNode("input",{type:"text",id:"van-field-1-input",name:"holder_mobile",class:"van-field__control van-field__control--left sk-input",placeholder:"请输入手机号",autocomplete:"off","aria-labelledby":"van-field-1-label"}),Vue.createElementVNode("div",{class:"van-field__right-icon"})])])]),Vue.createElementVNode("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[Vue.createElementVNode("div",{class:"van-cell__title van-field__label van-field__label--left"},[Vue.createElementVNode("label",{id:"van-field-2-label",for:"van-field-2-input"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"验证码")])]),Vue.createElementVNode("div",{class:"van-cell__value van-field__value"},[Vue.createElementVNode("div",{class:"van-field__body"},[Vue.createElementVNode("input",{type:"tel",inputmode:"numeric",id:"van-field-2-input",name:"holder_verificationCode",class:"van-field__control van-field__control--left",placeholder:"请输入验证码",autocomplete:"off","aria-labelledby":"van-field-2-label"}),Vue.createElementVNode("div",{class:"van-field__right-icon"})])]),Vue.createElementVNode("div",{class:"button-extra"},[Vue.createElementVNode("button",{type:"button",class:"van-button van-button--primary van-button--small van-button--plain sms-code sk-button"},[Vue.createElementVNode("div",{class:"van-button__content"},[Vue.createElementVNode("span",{class:"van-button__text"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"8.33%","--sp":"91.67%","--lh":"19.2002px"}},"验证码")])])])])])])])])])])])]),Vue.createElementVNode("div",{class:"pro-shadow-button submit-btn"},[Vue.createElementVNode("button",{type:"button",class:"van-button van-button--primary van-button--normal van-button--block van-button--round shadow-button shadow sk-button"},[Vue.createElementVNode("div",{class:"van-button__content"},[Vue.createElementVNode("span",{class:"van-button__text"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"8.33%","--sp":"91.67%","--lh":"19.2002px"}},"激活保障")])])])]),Vue.createElementVNode("div",{class:"com-attachment-list"},[Vue.createElementVNode("span",null,[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}},"请阅读")]),Vue.createElementVNode("span",{class:"attachment-item"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《免责条款说明》 ")]),Vue.createElementVNode("span",{class:"attachment-item"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《被保险人同意声明》 ")]),Vue.createElementVNode("span",{class:"attachment-item"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《投保须知》 ")]),Vue.createElementVNode("span",{class:"attachment-item"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《重要提示》 ")]),Vue.createElementVNode("span",{class:"attachment-item"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《条款费率》 ")]),Vue.createElementVNode("span",{class:"attachment-item"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《特别约定》 ")]),Vue.createElementVNode("span",{class:"attachment-item"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《保险经纪委托合同》 ")]),Vue.createElementVNode("span",{class:"attachment-item"},[Vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《客户告知书》 ")])])])]),Vue.createElementVNode("div",{class:"product-desc"},[Vue.createElementVNode("div",{class:"van-image",style:{width:"100%"}},[Vue.createElementVNode("img",{class:"van-image__img","data-src":"https://za-obs-prod.obs.cn-north-4.myhuaweicloud.com:443/common/20221211/dff441c3bcf94b2d8f08e6ec3f4267ec/产品介绍.png?AccessKeyId=LLSTLZA8R9JY8AJRF7ZF&Policy=eyJleHBpcmF0aW9uIjoiMjAyMi0xMi0yM1QwNDowNTo1OS41NzlaIiwiY29uZGl0aW9ucyI6W1sic3RhcnRzLXdpdGgiLCIka2V5IiwiIl0sWyJlcSIsIiRidWNrZXQiLCJ6YS1vYnMtcHJvZCJdXX0=&Signature=%2B%2FGYArnGmx9sMDCEvOBvjfpiZsU%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})])])])])],-1)],G=["theme-vars"],Y={class:"product-desc"},W={key:1,class:"page-free-footer"},q=Vue.defineComponent({__name:"free",setup(I){const w=V((()=>e((()=>import("./index-e0bc53f1.js")),["static/js/index-e0bc53f1.js","static/css/index-eabeb59f.css","static/js/index-deb4ddfb.js","static/css/index-5064de6f.css","static/js/pdfh5-e588f83d.js"]))),F=V((()=>e((()=>import("./index-3ccd2494.js")),["static/js/index-3ccd2494.js","static/css/index-4640d9aa.css"]))),T=V((()=>e((()=>import("./index-52712cf2.js")),["static/js/index-52712cf2.js","static/css/index-fa4edf2a.css","static/js/index-deb4ddfb.js","static/css/index-5064de6f.css","static/js/pdfh5-e588f83d.js","static/js/theme-65292714.js","static/js/index-593ee4c8.js","static/css/index-827a8544.css","static/js/utils-f063477c.js","static/js/infoCollection-f930e52f.js","static/js/trial-a75330fd.js"]))),H=t(),z=a(),q=n(),{productCode:Z="",agencyCode:Q="",tenantId:X="",insurerCode:$="",extraInfo:K,preview:ee}=q.query;let te={};try{te=JSON.parse(decodeURIComponent(K))}catch(Ce){console.log(Ce)}const{openId:ae,indirectCode:ne="",agentCode:oe}=te;console.log("extInfo",te);const le=c(),re=c(),se=c(),ie=m({tenantProductDetail:{},insureProductDetail:{},submitData:{},riskVOList:[{}],userData:{},ifPersonalInfoSuccess:!1,currentRiskInfo:[],mainRiskInfo:{},currentPackageConfigVOList:[],planList:[],colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},banner:"",productDesc:[],newAuth:!0,isValidateCode:!1,insureDetail:{},loading:!0,isSelfInsure:!0,showBtn:!1,activeIndex:0,showFilePreview:!1,isOnlyView:!0}),de=c({}),ue=R({extInfo:{buttonCode:"EVENT_FREE_multiIssuePolicy",pageCode:"infoCollection",extraInfo:te,templateId:(null==te?void 0:te.templateId)||"1",iseeBizNo:""}}),ce=c(),me=c({}),pe=c([]),Ve=c(),{fileList:fe,mustReadFileCount:ve,popupFileList:he}=j(me,Ve),be=c({imgUrl:"",desc:"",title:"",link:window.location.href}),ye=f((()=>!!ee)),ge=h((async()=>{if(console.log(">>>>>调用试算<<<<<"),ie.ifPersonalInfoSuccess){ie.submitData.productCode=Z,ie.submitData.tenantId=X,console.log([...ie.currentRiskInfo],"slslslwwp--1--190199"),ie.riskVOList=(()=>{const{chargePeriod:e,coveragePeriod:t,paymentFrequency:a,insuranceEndDate:n,insuranceStartDate:o}=de.value;return console.log("ssinit===++guaranteeObj.value",de.value),C([...ie.currentRiskInfo]).map((n=>({...n,paymentFrequency:a,chargePeriod:e,coveragePeriod:t})))})(),console.log(ie.riskVOList,"state.riskVOList----2222223333"),ie.submitData.insuredVOList&&ie.submitData.insuredVOList.forEach((e=>{e.productPlanVOList=[{insurerCode:$,planCode:me.value.planCode,riskVOList:ie.riskVOList}]})),console.log(">>>数据构建<<<",ie.submitData);const e=b(ie.submitData);console.log(e,"submitDataCopy===")}}),300),Ae=async e=>{console.log(e,"slsllw--2020");const{holder:t,insuredVOList:a,isFirstInsuredChange:n}=e;t&&(ie.submitData.holder=t),a&&a.length>0&&a.forEach(((e,t)=>{var a;ie.submitData.insuredVOList&&ie.submitData.insuredVOList.length>t?ie.submitData.insuredVOList[t].personVO={...e.personVO,socialFlag:e.personVO.hasSocialInsurance}:((null==(a=ie.submitData)?void 0:a.insuredVOList)||(ie.submitData.insuredVOList=[]),ie.submitData.insuredVOList.push({personVO:{...e.personVO,socialFlag:e.personVO.hasSocialInsurance}}))})),ie.ifPersonalInfoSuccess=!0,ge()},Ne=async()=>{ie.loading=!0;const e=y({productCode:Z,tenantId:X}),t=A({productCode:Z,isTenant:!ee});await Promise.all([e,t]).then((([e,t])=>{var a,n,o;if("10000"===e.code){ie.tenantProductDetail=e.data,document.title=e.data.BASIC_INFO.title||"";const{title:t,desc:n,image:l}=(null==(a=e.data)?void 0:a.PRODUCT_LIST.wxShareConfig)||{};o={title:t,desc:n,image:l},be.value={desc:o.desc||"你好，这里是描述",imgUrl:o.image,title:o.title,link:window.location.href},console.log("shareInfo",be.value),e.data.BASIC_INFO&&e.data.BASIC_INFO.themeType&&s(e.data.BASIC_INFO.themeType)}"10000"===t.code&&(ie.insureProductDetail=t.data,me.value=null==(n=t.data.productPlanInsureVOList)?void 0:n[0],ie.planList=(t.data.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode})))),g({productCode:Z}).then((({code:e,data:t})=>{var a,n,o,l;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:r}=t;Ve.value=e||[];const{basicInfo:{questionnaireType:s},questions:i,questionnaireName:d}=(null==(a=null==r?void 0:r[0])?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};s&&(pe.value=2===s?[{attachmentName:d,attachmentUri:i,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(n=null==i?void 0:i[0])?void 0:n.content,attachmentType:O(String(null==(o=null==i?void 0:i[0])?void 0:o.textType),null==(l=null==i?void 0:i[0])?void 0:l.content)}])}})),ie.loading=!1}))};p((()=>me.value),(()=>{const{oilPackageProductVOList:e,planCode:t,insureProductRiskVOList:a}=me.value;de.value.planCode=t,ie.currentRiskInfo=a,ie.mainRiskInfo=(a||[]).find((e=>e.mainRiskFlag===o.YES)),console.log("mainRiskInfo.value",ie.mainRiskInfo)}),{deep:!0,immediate:!0});const Ie=async()=>{if(ye.value&&ie.newAuth)ie.newAuth=!1;else if(!ye.value||ie.newAuth)try{if(ie.newAuth)if(ye.value)ie.newAuth=!1;else{const e={loginType:"2",openId:ae,thirdUserType:"XINAO_WECHAT",indirectCode:ne,loginName:ie.order.tenantOrderHolder.mobile,password:ie.order.tenantOrderHolder.verificationCode},{code:t,data:a}=await N(e);"10000"===t&&(ie.newAuth=!1)}else ce.value.validate().then((async e=>{var t;if(console.log(ue.value,"skskks===++++",ie.submitData),ie.ifPersonalInfoSuccess&&"10000"===e.code){const e=((e={},t={},a={})=>{var n;const o={...a};console.log("nextStepParams",o);const{tenantOrderHolder:l,tenantOrderInsuredList:r}=P({holder:null==(n=ie.submitData.holder)?void 0:n.personVO,insuredList:(ie.submitData.insuredVOList||[]).map((e=>e.personVO))});console.log("state.submitData",ie.submitData),console.log("tenantOrderHolder",l),console.log("tenantOrderInsuredList",r);const s=ie.submitData.insuredVOList.map((e=>{var t,a;return null==(a=null==(t=e.productPlanVOList)?void 0:t[0])?void 0:a.riskVOList})).flat();console.log("riskList",s);const i={tenantId:X,riskList:s,riskPremium:t,productId:null==e?void 0:e.id};return o.extInfo.iseeBizNo=le.value,o.productCode=null==e?void 0:e.productCode,o.commencementTime=o.insuranceStartDate,o.expiryDate=o.insuranceEndDate,o.premium=0,o.orderAmount=0,o.orderRealAmount=0,o.tenantOrderHolder=l,o.tenantOrderInsuredList=r.map((t=>{var a;return{...t,certType:t.certType||u.CERT,certNo:(t.certNo||"").toLocaleUpperCase(),planCode:me.value.planCode,tenantOrderProductList:[{premium:0,productCode:null==e?void 0:e.productCode,productName:null==e?void 0:e.productName,planCode:null==(a=me.value)?void 0:a.planCode,tenantOrderRiskList:D(i)}]}})),console.log("nextStepParams",o),o})({insurerCode:$,productCode:Z,productId:"",productName:(null==(t=ie.insureProductDetail)?void 0:t.productName)||"",tenantId:X},{},ue.value);_(e,((e,t)=>{t===d.JUMP_PAGE&&e.orderNo&&z.push(`/baseInsurance/orderDetail?from=free&tenantId=${X}&orderNo=${e.orderNo}`)}))}})).catch((e=>{console.log(e,"表单验证失败");const t=document.querySelector(".com-card-wrap");t&&t.scrollIntoView()}))}catch(e){console.log("e")}else z.push(`/baseInsurance/orderDetail?from=free&tenantId=${X}&orderNo=mockOrderNo&productCode=${Z}&preview=true&templateView=${null==te?void 0:te.templateId}`)},we=async()=>await(async()=>{var e,t;if(ye.value)return!0;let a="",n="";if(ie.newAuth)await se.value.validateForm(),a=null==(e=ie.order.tenantOrderHolder)?void 0:e.verificationCode,n=ie.order.tenantOrderHolder.mobile;else{const{mobile:e,verificationCode:o=""}=(null==(t=ie.submitData.holder)?void 0:t.personVO)||{};a=o,n=e}if((ie.isValidateCode||ie.newAuth)&&(!a||!x(a)))return i({message:"请输入正确的验证码"}),!1;if(ie.newAuth||!ie.isValidateCode)return!0;const{code:o,data:l}=await k(n,a);return!!l})()?(ie.newAuth?Ie():he.value.length>0?(ie.isOnlyView=!1,ie.showFilePreview=!0):Ie(),!1):null,ke=()=>{ie.showFilePreview=!1,ie.isOnlyView=!0},Ee=()=>{ie.showFilePreview=!1,ie.isOnlyView=!0,Ie()};v((()=>{Ne(),setTimeout((async()=>{le.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)}));const _e=l(re);return r(re,(([{isIntersecting:e}],t)=>{(e=>{_e.bottom.value<0||_e.top.value<0?ie.showBtn=!e:ie.showBtn=!1})(e)})),(e,t)=>{var a,n,o,l,r,s;const i=Vue.resolveComponent("ProLazyComponent"),d=Vue.resolveComponent("van-image"),u=Vue.resolveComponent("ProSvg"),c=Vue.resolveComponent("ProDivider");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.unref(ie).loading?(Vue.openBlock(),Vue.createElementBlock("div",J,U)):(Vue.openBlock(),Vue.createElementBlock("div",{key:1,"data-skeleton-root":"FREE","theme-vars":Vue.unref(H),class:"page-free-product-detail"},[1==(null==(n=null==(a=Vue.unref(ie).tenantProductDetail)?void 0:a.BASIC_INFO)?void 0:n.bannerType)&&(null==(l=null==(o=Vue.unref(ie).tenantProductDetail)?void 0:o.BASIC_INFO)?void 0:l.banner.length)?(Vue.openBlock(),Vue.createBlock(B,{key:0,"data-skeleton-type":"img","indicator-color":"#ddd",images:null==(r=Vue.unref(ie).tenantProductDetail)?void 0:r.BASIC_INFO.banner},null,8,["images"])):Vue.createCommentVNode("",!0),Vue.createVNode(M,{ref_key:"formRef",ref:se,"is-first":Vue.unref(ie).newAuth,"insure-detail":Vue.unref(ie).insureDetail,detail:Vue.unref(ie).order,colors:Vue.unref(ie).colors,"preview-mode":Vue.unref(ye)},{default:Vue.withCtx((()=>{var e,a;return[Vue.unref(ie).newAuth?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createBlock(Vue.unref(E),{key:0,ref_key:"personalInfoRef",ref:ce,modelValue:Vue.unref(ie).userData,"onUpdate:modelValue":t[0]||(t[0]=e=>Vue.unref(ie).userData=e),"product-factor":null==(e=Vue.unref(me))?void 0:e.productFactor,"multi-insured-config":null==(a=Vue.unref(me))?void 0:a.multiInsuredConfigVO,onTrailChange:Ae},null,8,["modelValue","product-factor","multi-insured-config"])),Vue.createVNode(L,{ref_key:"root",ref:re,class:Vue.normalizeClass({"submit-btn":!0,"is-first":!Vue.unref(ie).newAuth}),"is-gradient":!1,text:Vue.unref(ie).newAuth?"立即领取":"激活保障",onClick:we},null,8,["class","text"]),Vue.createVNode(i,null,{default:Vue.withCtx((()=>{var e;return[(null==(e=Vue.unref(fe))?void 0:e.length)?(Vue.openBlock(),Vue.createBlock(Vue.unref(F),{key:0,"attachment-list":Vue.unref(fe),"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:t[1]||(t[1]=e=>(e=>{ie.isOnlyView=!0,ie.activeIndex=e,ie.showFilePreview=!0})(e))},null,8,["attachment-list"])):Vue.createCommentVNode("",!0)]})),_:1})]})),_:1},8,["is-first","insure-detail","detail","colors","preview-mode"]),Vue.createElementVNode("div",Y,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList((null==(s=Vue.unref(ie).tenantProductDetail.SPECIAL_FEATURE)?void 0:s.spec)||[],((e,t)=>(Vue.openBlock(),Vue.createBlock(Vue.Suspense,{key:t},{fallback:Vue.withCtx((()=>[Vue.createVNode(u,{name:"img",style:{"font-size":"40px",margin:"10px auto",display:"block"}})])),default:Vue.withCtx((()=>[(Vue.openBlock(),Vue.createBlock(d,{key:t,class:"detail-img",width:"100%",src:e},null,8,["src"]))])),_:2},1024)))),128))]),Vue.createVNode(c),Vue.createVNode(i,null,{default:Vue.withCtx((()=>{var e,t,a;return[(null==(e=Vue.unref(ie).tenantProductDetail.SIGNATURE)?void 0:e.inscribedContent)?(Vue.openBlock(),Vue.createBlock(Vue.unref(w),{key:0,"inscribed-content":null==(a=null==(t=Vue.unref(ie).tenantProductDetail)?void 0:t.SIGNATURE)?void 0:a.inscribedContent},null,8,["inscribed-content"])):Vue.createCommentVNode("",!0)]})),_:1}),Vue.unref(ie).showBtn?(Vue.openBlock(),Vue.createElementBlock("footer",W,[Vue.createVNode(L,{"is-gradient":!1,text:Vue.unref(ie).newAuth?"立即领取":"激活保障",onClick:we},null,8,["text"])])):Vue.createCommentVNode("",!0)],8,G)),Vue.unref(ie).showFilePreview?(Vue.openBlock(),Vue.createBlock(Vue.unref(T),{key:2,show:Vue.unref(ie).showFilePreview,"onUpdate:show":t[2]||(t[2]=e=>Vue.unref(ie).showFilePreview=e),"content-list":Vue.unref(ie).isOnlyView?Vue.unref(fe):Vue.unref(he),"is-only-view":Vue.unref(ie).isOnlyView,"active-index":Vue.unref(ie).activeIndex,text:Vue.unref(ie).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-count":Vue.unref(ie).isOnlyView?0:Vue.unref(ve),onSubmit:Ee,onOnCloseFilePreviewByMask:ke},null,8,["show","content-list","is-only-view","active-index","text","force-read-count"])):Vue.createCommentVNode("",!0),Vue.unref(ie).loading?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createBlock(S,{key:3,"product-detail":Vue.unref(ie).tenantProductDetail},null,8,["product-detail"]))],64)}}});export{q as default};

import{h as V,aa as z,P as G,G as l,j as J,r as v,k as s,m as i,n as C,s as O,p as B,H as E,M as m,B as n,F as N,A as W,E as X,T as K}from"./vendor-4d9de129.js";import{l as U}from"./inform-ed7c6ba0.js";import{_ as Z,g as w,n as ee,N as te,b as ae}from"./index-6cd418a3.js";import{Q as c,a as r,H as oe,b,I as ne,c as A}from"./notice-a4a1c218.js";import{s as se}from"./useStorage-ba178c03.js";import{g as F}from"./verify-0d2e7636.js";const ue={class:"footer-button"},le=X("\u4E0B\u4E00\u6B65"),ie=V({setup(ce){const I=z(),T=G(),{productCode:q="MMBBSF",agentCode:x="65434444",tenantId:f=9991000007,agencyCode:re="3311222",insurerCode:P="zhongan",productCategory:M=1,templateId:de=1,orderNo:D="2022080217103534947"}=T.query,$=1,R=1,d=l([]),u=l({});l(!1);const y=l([]),g=l([]),S=t=>d.value.filter(a=>a.objectType===t),j=()=>{w({orderNo:D,saleUserId:x,tenantId:f}).then(({code:t,data:a})=>{t==="10000"&&Object.assign(u.value,a)})},Q=()=>{const t={orderNo:D,productCode:q,tenantId:f,objectType:b};F({...t}).then(({code:a,data:o})=>{a==="10000"&&(g.value=o||[])}),F({...t,objectType:A}).then(({code:a,data:o})=>{a==="10000"&&(y.value=o||[])})},L=()=>{const t={insurerCode:P,orderNo:D,productCategory:M,tenantId:f};Promise.all([U({...t,noticeType:oe,objectType:b}),U({...t,noticeType:ne,objectType:A})]).then(([{code:a,data:o},{code:p,data:k}])=>{a==="10000"&&p==="10000"&&(d.value=[...o,...k])})},_=t=>{var a;se.set("questionData",t),I.push({path:"/healthNotice",query:{materialType:t!=null&&t.materialSource?"product":"question",questionnaireType:t!=null&&t.materialSource?R:t.questionnaireType,orderId:(a=u.value)==null?void 0:a.id,...T.query}})},H=()=>{if(![...y.value,...g.value,...d.value].every(a=>a.isDone===$)){K("\u8BF7\u5B8C\u6210\u6240\u6709\u544A\u77E5\u8FDB\u884C\u4E0B\u4E00\u6B65");return}Object.assign(u.value,{pageCode:"questionNotice",tenantOrderNoticeList:d.value}),ee({...u.value,extInfo:{...u.value.extInfo,pageCode:"questionNotice",buttonCode:te.questionNotice},venderCode:P}).then(({code:a,data:o})=>{a==="10000"&&o.pageAction.pageAction==="jumpToPage"&&I.push({path:ae[o.pageAction.data.nextPageCode],query:T.query})})};return J(()=>{L(),Q(),j()}),(t,a)=>{const o=v("van-cell"),p=v("ProCard"),k=v("van-button"),Y=v("ProPageWrap");return s(),i(Y,{class:"page-question-notice"},{default:C(()=>[O(p,{title:"\u6295\u4FDD\u4EBA"},{default:C(()=>[(s(!0),B(N,null,E(S(n(r)),e=>(s(),i(o,{key:e.id,class:m({"is-active":e.isDone===n(c)}),title:`\u300A${e.title}\u300B`,"is-link":"",value:`${e.isDone===n(r)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:h=>_(e)},null,8,["class","title","value","onClick"]))),128)),(s(!0),B(N,null,E(g.value,e=>(s(),i(o,{key:e.id,class:m({"is-active":e.isDone===n(c)}),title:`\u300A${e.materialName}\u300B`,"is-link":"",value:`${e.isDone===n(r)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:h=>_(e)},null,8,["class","title","value","onClick"]))),128))]),_:1}),O(p,{title:"\u88AB\u4FDD\u4EBA"},{default:C(()=>[(s(!0),B(N,null,E(S(n(c)),e=>(s(),i(o,{key:e.id,class:m({"is-active":e.isDone===n(c)}),title:`\u300A${e.title}\u300B`,"is-link":"",value:`${e.isDone===n(r)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:h=>_(e)},null,8,["class","title","value","onClick"]))),128)),(s(!0),B(N,null,E(y.value,e=>(s(),i(o,{key:e.id,class:m({"is-active":e.isDone===n(c)}),title:`\u300A${e.materialName}\u300B`,"is-link":"",value:`${e.isDone===n(r)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:h=>_(e)},null,8,["class","title","value","onClick"]))),128))]),_:1}),W("div",ue,[O(k,{type:"primary",onClick:H},{default:C(()=>[le]),_:1})])]),_:1})}}});var me=Z(ie,[["__scopeId","data-v-946bddbc"]]);export{me as default};

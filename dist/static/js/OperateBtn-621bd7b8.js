import{d as e,h as a,i as o,k as r,ag as t,o as s,c as n,u as d,m as i,w as l,a8 as c,cF as p,f as u,_ as m,bW as h,aI as f,co as y,cp as I,cq as g}from"./index-fe52439c.js";import{P as C,M as N}from"./constants-4b08cf92.js";import{c as k}from"./order-f85f0903.js";const S={class:"operate-wrap"},$=e({name:"operateBtn"});var v=m(e({...$,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:m}){const $=e,v=a(),x=o(),{tenantId:T,nextPageCode:_,isShare:q}=x.query,P=r((()=>{const{orderTopStatus:e}=$.detail;return"-1"===e&&C.orderList===x.path})),b=r((()=>{const{policyNo:e,applicationNo:a,orderStatus:o}=$.detail;return!e&&a&&"cancel"!==o})),w=r((()=>{const{orderStatus:e}=$.detail;return["offlinePayment","manualUnderWriting","paymentFailed"].includes(e)})),z=()=>{const{orderStatus:e,orderNo:a,insurerCode:o}=$.detail;let r=C.sign;"collectInfo"===e&&(r=C.infoCollection),h({messageType:N.AGENT,orderNo:a,tenantId:T}).then((({code:e})=>{"10000"===e&&v.push({path:r,query:{...x.query,tenantId:T,orderNo:a,insurerCode:o}})}))},D=()=>{const{orderNo:e,orderId:a}=$.detail;q?f.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{m("handleCancel")})):k({tenantId:T,orderNo:e,type:1}).then((({code:e,data:a})=>{"10000"===e&&f.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:a,holderGender:o,orderId:r,orderNo:t}=$.detail||{},s=a,n=`${y[o]}士`;I({shareType:0,title:`${g.cancel.title}`,desc:g.cancel.desc.replace("{name}",`${s}${n},`),url:`${window.location.href}&objectType=${e}&isShare=1&orderNo=${t}&orderId=${r}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/lian_logo.png?OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Expires=1697288114&Signature=S87PMeDRxltLovmmHVTeiHoew1c%3D"})})("holder")}))}))},j=()=>{const{orderNo:e,orderId:a}=$.detail;v.push({path:C.updateBankInfo,query:{tenantId:T,orderNo:e,orderId:a,nextPageCode:"orderDetail"}})};return(e,a)=>{const o=t;return s(),n("div",S,[d(P)?(s(),i(o,{key:0,type:"primary",size:"small",onClick:p(z,["stop"])},{default:l((()=>[c("去处理")])),_:1},8,["onClick"])):u("",!0),d(b)?(s(),i(o,{key:1,type:"primary",plain:"",size:"small",onClick:p(D,["stop"])},{default:l((()=>[c("撤单")])),_:1},8,["onClick"])):u("",!0),d(w)?(s(),i(o,{key:2,size:"small",onClick:p(j,["stop"])},{default:l((()=>[c("银行卡修改")])),_:1},8,["onClick"])):u("",!0)])}}}),[["__scopeId","data-v-4aef2b44"]]);export{v as O};

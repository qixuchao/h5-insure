var J=Object.defineProperty,K=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var S=(a,e,t)=>e in a?J(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,V=(a,e)=>{for(var t in e||(e={}))z.call(e,t)&&S(a,t,e[t]);if(F)for(var t of F(e))W.call(e,t)&&S(a,t,e[t]);return a},k=(a,e)=>K(a,Y(e));import{g as b,j as q,n as N,z as f,J as O,O as G,E as v,h as Q,r as x,A as E,p as u,m as w,C as X}from"./vendor-667a94d7.js";import{_ as A}from"./index-f087bc90.js";import{i as Z,a as ee,s as te,e as ae}from"./trial-ab7e64ad.js";import{p as oe}from"./product-2a7df880.js";import{S as ne}from"./infoCollection-242da9b6.js";import{g as se,l as re,a as le,t as ie,c as de,d as ue}from"./utils-73ac9e64.js";import"./trial-db752583.js";const ce={class:"com-field-info"},me={class:"title"},_e={class:"desc"},pe=b({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup(a){return(e,t)=>(q(),N("div",ce,[f("div",me,O(a.title),1),f("div",_e,O(a.desc),1)]))}});var y=A(pe,[["__scopeId","data-v-35c1ec17"]]);const ve={class:"page-activity-upgrade"},fe=["src"],Ie={class:"container"},De={class:"main-form"},he=b({setup(a){const e=G(),{productCode:t="BWYL2022",tenantId:I,orderId:M,extInfo:T}=e.query,C=se(T),{phoneNo:ge,saleChannelId:U,paymentMethod:xe,certNo:ye,name:Oe}=C,c=v(),h=v(),o=v(),D=v(),g=v(),$=async()=>{var l,n,m,_,p;const i=le({tenantId:I,saleChannelId:U,detail:c.value,paymentMethod:(n=(l=o.value.extInfo)==null?void 0:l.extraInfo)==null?void 0:n.paymentMethod,renewalDK:(_=(m=o.value.extInfo)==null?void 0:m.extraInfo)==null?void 0:_.renewalDK,successJumpUrl:"",premium:D.value,holder:o.value.tenantOrderHolder,insured:k(V({},o.value.tenantOrderInsuredList[0]),{socialFlag:o.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance}),tenantOrderRiskList:ie({tenantId:I,riskList:de(h.value.productRiskVoList[0].riskDetailVOList,c.value),riskPremium:{},productId:(p=c.value)==null?void 0:p.id})}),r=await te(i),{code:d,data:s}=r;return d==="10000"?s.data:""},B=async()=>{const i=ue({tenantId:I,premium:D.value,orderDetail:o.value,productDetail:c.value,insureDetail:h.value}),r=await ae(i),{code:d,data:s}=r;d==="10000"&&(D.value=s.installmentPremium)},R=async i=>{await B(),await $()},j=()=>{const i=oe({productCode:t,withInsureInfo:!0}),r=Z({productCode:t}),d=ee({id:M||C.orderId,tenantId:I});Promise.all([i,r,d]).then(([s,l,n])=>{console.log(s,l,n),s.code==="10000"&&(c.value=s.data),l.code==="10000"&&(h.value=l.data),n.code==="10000"&&(o.value=n.data,g.value=n.data.tenantOrderInsuredList[0].extInfo.hasSocialInsurance),B()})};return Q(()=>{j()}),(i,r)=>{var n,m,_,p,L,P;const d=x("ProRadioButton"),s=x("ProField"),l=x("VanButton");return q(),N("div",ve,[f("img",{class:"logo",src:E(re)},null,8,fe),f("div",Ie,[f("div",De,[u(y,{title:"\u59D3\u540D",desc:(m=(n=o.value)==null?void 0:n.tenantOrderInsuredList)==null?void 0:m[0].name},null,8,["desc"]),u(y,{title:"\u8BC1\u4EF6\u53F7\u7801",desc:(p=(_=o.value)==null?void 0:_.tenantOrderInsuredList)==null?void 0:p[0].certNo},null,8,["desc"]),u(y,{title:"\u624B\u673A\u53F7\u7801",desc:(P=(L=o.value)==null?void 0:L.tenantOrderHolder)==null?void 0:P.mobile},null,8,["desc"]),u(s,{label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:w(()=>[u(d,{modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=H=>g.value=H),disabled:!0,options:E(ne)},null,8,["modelValue","options"])]),_:1}),u(l,{class:"upgrade-btn",type:"primary",block:!0,onClick:R},{default:w(()=>[X("\u5347\u7EA7\u4FDD\u969C("+O(D.value)+")",1)]),_:1})])])])}}});var Ee=A(he,[["__scopeId","data-v-3d6654e6"]]);export{Ee as default};

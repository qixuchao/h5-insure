import{h as $,P as b,r as l,ay as T,j as R,w as U,k as y,m,n as X,p as u,B as s,L as d,G as c,C as i,s as v,t as n,x as j,H as N,F as w,az as B,T as J,aA as A}from"./vendor-902054a7.js";import{af as L}from"./index-ade50497.js";import{g as q,P as I,i as z,a as G,s as O,w as Y,l as M}from"./core-842b6b9e.js";const H={class:"pay-amount"},K=c(" \uFFE5"),Q={class:"amount"},Z={class:"order-info"},ee={class:"order-name"},oe={class:"order-no"},ae={key:0},se={style:{"margin-bottom":"50px"}},te=c(" ======= "),ne=c("jsBridge\u4ED8\u6B3E"),pe=$({setup(re){const o=b().query;L(),q(o.payWay||I.WXPAY);const t=l();l();const f=l(!1),p=l(I.WX_SIGN),_=l("h5"),C=()=>{const e=`${window.location.protocol}//${window.location.host}/baseInsurance/orderDetail?orderNo=${o.businessTradeNo||o.orderNo}&tenantId=${o.tenantId}`;O({...t.value,payWay:p.value,srcType:_.value,code:o.code,extraInfo:JSON.stringify({redirectRrl:e,wxCode:o.code}),redirectUrl:e})},W=()=>{const e=`${window.location.protocol}//${window.location.host}/baseInsurance/orderDetail?orderNo=${o.businessTradeNo||o.orderNo}&tenantId=${o.tenantId}`;Y({...t.value,payWay:p.value,srcType:_.value,code:o.code,extraInfo:JSON.stringify({redirectUrl:e,wxCode:o.code}),redirectUrl:e})},{copy:k,copied:de,isSupported:D}=T({source:""}),E=()=>{var e;k((e=t.value)==null?void 0:e.orderNo),J("\u5DF2\u62F7\u8D1D\u5230\u60A8\u7684\u7C98\u8D34\u677F")},g=()=>{f.value=!0,M({orderNo:o.orderNo||"P2211220947519991000001750022183",tenantId:o.tenantId||"9991000001"}).then(e=>{console.log("\u83B7\u53D6\u8BA2\u5355\u4FE1\u606F",e),e.code==="10000"&&(t.value=e.data)}).finally(()=>{f.value=!1})};return R(()=>{if(z){U.checkJsApi({jsApiList:["chooseWXPay"],success(r){console.log("checkJsApi--chooseWXPay",r)}});const e=`${window.location.href}`;console.log("\u5F53\u524Durl",e,"appId--",sessionStorage.appId),o.code?(console.log("\u83B7\u53D6\u8BA2\u5355\u4FE1\u606F"),g()):window.location.href=G({appId:sessionStorage.appId,url:encodeURIComponent(e)})}else g()}),(e,r)=>{const V=y("ProSvg"),h=y("VanButton"),S=y("ProPageWrap");return m(),X(S,{title:"\u6536\u94F6\u53F0","main-class":"page-cashier"},{default:u(()=>{var x,F,P;return[s("div",H,[K,s("span",Q,d((x=t.value)==null?void 0:x.orderAmt),1)]),s("div",Z,[s("div",ee,d((F=t.value)==null?void 0:F.orderName),1),s("div",oe,[c(" \u8BA2\u5355\u53F7\uFF1A "+d((P=t.value)==null?void 0:P.orderNo)+" ",1),i(D)?(m(),v("span",ae,[n(V,{name:"copy",onClick:E})])):j("",!0)])]),n(i(B),{modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=a=>p.value=a)},{default:u(()=>[(m(),v(w,null,N(["wxSign","wxPay"],a=>s("div",{key:a,class:"pay-wrapper"},[s("span",null,"\u5FAE\u4FE1"+d(a),1),n(i(A),{name:a},null,8,["name"])])),64))]),_:1},8,["modelValue"]),s("div",se,[n(i(B),{modelValue:_.value,"onUpdate:modelValue":r[1]||(r[1]=a=>_.value=a)},{default:u(()=>[(m(),v(w,null,N(["h5","js"],a=>s("div",{key:a,style:{"margin-bottom":"20px"}},[n(i(A),{name:a},{default:u(()=>[s("span",null,d(a),1)]),_:2},1032,["name"])])),64))]),_:1},8,["modelValue"])]),n(h,{type:"primary",round:"",size:"large",block:"",onClick:C},{default:u(()=>{var a;return[c("\u786E\u8BA4\u4ED8\u6B3E \uFFE5"+d((a=t.value)==null?void 0:a.orderAmt),1)]}),_:1}),te,n(h,{type:"primary",round:"",size:"large",block:"",onClick:W},{default:u(()=>[ne]),_:1})]}),_:1})}}});export{pe as default};

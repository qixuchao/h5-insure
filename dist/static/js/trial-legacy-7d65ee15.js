!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-occupational-wrapper .popup-title[data-v-4b261f8d]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-occupational-wrapper .popup-content[data-v-4b261f8d]{height:13.84rem}.com-occupational-wrapper .footer-bar[data-v-4b261f8d]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.com-personal-info-wrapper .placeholder[data-v-7b008a27]{color:#99a9c0}.com-risk-card-wrapper.part-card[data-v-9047eb86]{background-color:#fff;margin-bottom:.26667rem}.com-risk-card-wrapper .delete-risk[data-v-9047eb86]{display:flex;align-items:center;justify-content:center;margin-top:.06667rem}.com-risk-card-wrapper .delete-risk .svg-icon[data-v-9047eb86]{font-size:.42667rem}.com-risk-card-wrapper .custom-field[data-v-9047eb86]{display:flex;flex-direction:column}.com-risk-card-wrapper .custom-field .field-tip[data-v-9047eb86]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .popup-title[data-v-1f13cbe8]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem;font-size:.45333rem;font-weight:600;color:#393d46}.com-risk-list-wrapper .risk-list[data-v-1f13cbe8]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper[data-v-1f13cbe8] .van-cell-group--inset{border-bottom:1px solid #eeeff4}.com-risk-list-wrapper[data-v-1f13cbe8] .van-cell-group--inset .van-cell{padding:.30667rem 0}.com-risk-list-wrapper .cell-title[data-v-1f13cbe8]{display:flex;flex-direction:column}.com-risk-list-wrapper .cell-title .title-desc[data-v-1f13cbe8]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .footer-bar[data-v-1f13cbe8]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}@charset "UTF-8";.risk-list-wrapper[data-v-1afa9508]{margin-bottom:3.13333rem}.risk-list-wrapper .add-rider-risk[data-v-1afa9508]{background-color:#fff;margin-top:-.26667rem;height:1.41333rem;display:flex;align-items:center;justify-content:space-between;padding:var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding)}.risk-list-wrapper .add-rider-risk .left-part[data-v-1afa9508]{font-weight:400;color:#99a9c0;font-size:.4rem}\n',document.head.appendChild(e),System.register(["./vendor-legacy-6afbc92b.js","./trial-legacy-442b1334.js","./index-legacy-9f2d509b.js","./useStorage-legacy-7bcb7c12.js","./index-legacy-d6e1971c.js"],(function(e){"use strict";var i,o,a,l,t,n,r,d,s,u,m,c,p,f,v,y,k,g,V,h,b,I,L,D,C,O,R,w,P,x,A,_,T,U,F,M,q,N,E,j;return{setters:[function(e){i=e.g,o=e.L,a=e.X,l=e.r,t=e.h,n=e.m,r=e.n,d=e.k,s=e.y,u=e.z,m=e.a1,c=e.a2,p=e.a5,f=e.C,v=e.a4,y=e.x,k=e.d,g=e.j,V=e.s,h=e.I,b=e.a6,I=e.o,L=e.F,D=e.E,C=e.ak,O=e.al,R=e.B,w=e.D},function(e){P=e.S,x=e.a,A=e.R,_=e.b,T=e.A,U=e.c,F=e.L,M=e.d},function(e){q=e.g},function(e){N=e.l},function(e){E=e._,j=e.b}],execute:function(){const S={class:"com-occupational-wrapper"},$=(e=>(m("data-v-4b261f8d"),e=e(),c(),e))((()=>s("div",{class:"popup-title"},"选择职业",-1))),Y={class:"popup-content"},z=i({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(e,{emit:i}){const m=e,c=o({show:m.show,options:[],currentValue:""}),p=()=>{i("close")},f=({value:e,selectedOptions:o})=>{const a=(o||[]).map((e=>e.value)).join("/"),l=+o[o.length-1].name;i("update:modelValue",l),i("finish",a),p()};return a((()=>m),(()=>{((e="")=>{var i;const o=`${null==e||null===(i=e.toLocaleUpperCase)||void 0===i?void 0:i.call(e)}_OCCUPATION`,a=N.get("occupational")||{};a[o]?c.options=a[o]:q({dictCodeList:[o]}).then((({code:e,data:i})=>{if("10000"===e){var l;const e=(e=>{const i=e,o=e=>{e.forEach((e=>{const i=e;i.children.length?o(i.children):i.children=null}))};return o(i),i})((null==i||null===(l=i[0])||void 0===l?void 0:l.dictItemList)||[]);c.options=e,a[o]=e,N.set("occupational",a)}}))})(m.insuredCode)}),{deep:!0,immediate:!0}),a((()=>m.modelValue),(e=>{}),{deep:!0,immediate:!0}),(e,i)=>{const o=l("van-cascader"),a=l("VanPopup");return t(),n("div",S,[r(a,{show:u(c).show,"onUpdate:show":i[1]||(i[1]=e=>u(c).show=e),"show-footer":"",position:"bottom",closeable:"",onClose:p},{default:d((()=>[$,s("div",Y,[r(o,{modelValue:u(c).currentValue,"onUpdate:modelValue":i[0]||(i[0]=e=>u(c).currentValue=e),title:"请选择职业","show-header":!1,placeholder:"请选择",options:u(c).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:f},null,8,["modelValue","options"])])])),_:1},8,["show"])])}}});var B=E(z,[["__scopeId","data-v-4b261f8d"]]);const G={class:"com-personal-info-wrapper"},K={key:0,class:"placeholder"},H={key:1};e("P",E(i({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(e,{expose:i}){const a=e,[s,m]=p(),[c,I]=p(),L=f(),D=v("source")||{},C=o({formInfo:a.formInfo,occupationalText:""}),O=e=>{C.occupationalText=e},R=()=>{I(!1)},w=y((()=>{const e=(e=>{const i=e||[];for(let o=0;o<i.length;o++)for(let e=o+1;e<i.length;e++){const a=i[o].split("_"),l=i[e].split("_"),t=i[o];a[0]===l[0]?a>l&&(i[o]=i[e],i[e]=t):"age"===a[0]&&(i[o]=i[e],i[e]=t)}return i})(null==a?void 0:a.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],o=i(e[0]),l=i(e[e.length-1]),t=k().subtract(o[0],"age"===o[1]?"year":"day").format("YYYY-MM-DD"),n=k().subtract(l[0],"age"===l[1]?"year":"day").format("YYYY-MM-DD");return{minAge:new Date(n),maxAge:new Date(t)}}));return i({validateForm:()=>new Promise(((e,i)=>{null==L||L.value.validate().then((()=>{e("")}),(()=>{i()}))})),ageRangeObj:w.value}),(i,o)=>{const a=l("VanField"),p=l("ProRadioButton"),f=l("VanForm"),v=l("van-datetime-picker"),y=l("van-popup");return t(),n("div",G,[r(f,{ref_key:"formRef",ref:L,"input-align":"right","error-message-align":"right"},{default:d((()=>["proposal"===u(D).type&&("add"===u(D).type||"repeatAdd"===u(D).type)||"proposal"!==u(D).type&&(e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY"))?(t(),g(a,{key:0,modelValue:u(C).formInfo.birthday,"onUpdate:modelValue":o[0]||(o[0]=e=>u(C).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink",readonly:"","is-link":"",placeholder:"请选择",onClick:o[1]||(o[1]=e=>u(m)(!0))},null,8,["modelValue"])):V("",!0),"proposal"===u(D).type&&("add"===u(D).type||"repeatAdd"===u(D).type)||"proposal"!==u(D).type&&(e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER"))?(t(),g(a,{key:1,modelValue:u(C).formInfo.gender,"onUpdate:modelValue":o[3]||(o[3]=e=>u(C).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:d((()=>[r(p,{modelValue:u(C).formInfo.gender,"onUpdate:modelValue":o[2]||(o[2]=e=>u(C).formInfo.gender=e),options:u(P)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):V("",!0),e.factorList.includes("SOCIAL_INS")?(t(),g(a,{key:2,modelValue:u(C).formInfo.socialSecurity,"onUpdate:modelValue":o[5]||(o[5]=e=>u(C).formInfo.socialSecurity=e),name:"socialSecurity",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:d((()=>[r(p,{modelValue:u(C).formInfo.socialSecurity,"onUpdate:modelValue":o[4]||(o[4]=e=>u(C).formInfo.socialSecurity=e),options:u(x)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):V("",!0),e.factorList.includes("OCCUPATION_CATEGORY")?(t(),g(a,{key:3,modelValue:u(C).formInfo.occupationalClass,"onUpdate:modelValue":o[6]||(o[6]=e=>u(C).formInfo.occupationalClass=e),rules:[{required:!0,message:"请选择职业类型"}],name:"occupationalClass",label:"职业类型","is-link":"",readonly:"",placeholder:"请选择",onClick:o[7]||(o[7]=e=>u(I)(!0))},{input:d((()=>[u(C).occupationalText?(t(),n("div",H,h(u(C).occupationalText),1)):(t(),n("span",K,"请选择"))])),_:1},8,["modelValue"])):V("",!0)])),_:1},512),r(y,{show:u(s),"onUpdate:show":o[10]||(o[10]=e=>b(s)?s.value=e:null),position:"bottom"},{default:d((()=>[r(v,{type:"date","min-date":u(w).minAge,"max-date":u(w).maxAge,onConfirm:o[8]||(o[8]=e=>{u(C).formInfo.birthday=u(k)(e).format("YYYY-MM-DD"),u(m)(!1)}),onCancel:o[9]||(o[9]=e=>u(m)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"]),u(c)?(t(),g(B,{key:0,modelValue:u(C).formInfo.occupationalClass,"onUpdate:modelValue":o[11]||(o[11]=e=>u(C).formInfo.occupationalClass=e),show:u(c),"insured-code":e.insuredCode,onFinish:O,onClose:R},null,8,["modelValue","show","insured-code"])):V("",!0)])}}}),[["__scopeId","data-v-7b008a27"]]));const X={class:"com-risk-card-wrapper part-card"},J={class:"custom-field"},Q={class:"field-tip"},W={class:"custom-field"},Z={class:"field-tip"},ee={class:"custom-field"},ie={class:"field-tip"},oe={key:0},ae={key:9,class:"liab-desc"};var le=E(i({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(e){const i=e,m=f({}),c=v("premium")||{};m.value=v("enumList")||{};const p=f({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),k=o({formInfo:i.formInfo}),b=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"[object Object]"==={}.toString.call(e)&&Object.keys(e).length),C=(e,i,o={})=>{let a=i;return Array.isArray(i)||(a=[`${a}`]),(e||[]).filter((e=>a.includes(`${e.value}`)||a.includes(e.value)))},O=y((()=>{var e,o,a,l,t;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?C(i.enums.RISK_INSURANCE_PERIOD,(null===(t=i.originData.riskInsureLimitVO)||void 0===t?void 0:t.insurancePeriodValueList)||[]):2===(null===(o=i.originData)||void 0===o?void 0:o.periodType)?C([{value:"year_1",name:"1年"}],["year_1"]):C(null===(a=i.enums)||void 0===a?void 0:a.RISK_INSURANCE_PERIOD,(null===(l=i.mainRiskData.riskInsureLimitVO)||void 0===l?void 0:l.insurancePeriodValueList)||[])})),R=y((()=>{var e,o,a,l,t,n,r,d;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?C(null==i||null===(t=i.enums)||void 0===t?void 0:t.RISK_PAYMENT_PERIOD,(null===(n=i.originData.riskInsureLimitVO)||void 0===n?void 0:n.paymentPeriodValueList)||[]):1===(null===(o=i.originData)||void 0===o?void 0:o.exemptFlag)?C(A,[`${null==i||null===(r=i.originData)||void 0===r||null===(d=r.riskInsureLimitVO)||void 0===d?void 0:d.paymentPeriodRule}`]):2===(null===(a=i.originData)||void 0===a?void 0:a.periodType)?C([{value:"year_1",name:"1年交"}],["year_1"]):C(i.enums.RISK_PAYMENT_PERIOD,(null===(l=i.mainRiskData.riskInsureLimitVO)||void 0===l?void 0:l.paymentPeriodValueList)||[])})),w=y((()=>{var e,o,a,l,t;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?C(_,(null===(l=i.originData.riskInsureLimitVO)||void 0===l?void 0:l.paymentFrequencyList)||[]):1===(null===(o=i.originData.riskInsureLimitVO)||void 0===o?void 0:o.paymentTypeRule)?C(_,(null===(t=i.mainRiskData.riskInsureLimitVO)||void 0===t?void 0:t.paymentFrequencyList)||[]):C(_,(null===(a=i.mainRiskData.riskInsureLimitVO)||void 0===a?void 0:a.paymentFrequencyList)||[])})),P=y((()=>{var e,o;let a=0,l=0;return((null===(e=i.originData)||void 0===e||null===(o=e.riskCalcMethodInfoVO)||void 0===o?void 0:o.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(a=e.minAmount,l=e.maxAmount),a>e.minAmount&&(a=e.minAmount),l<e.maxAmount&&(l=e.maxAmount)})),k.formInfo.amount=k.formInfo.amount||a,{min:a,max:l}})),x=y((()=>{var e,o;let a=0,l=0;return((null===(e=i.originData)||void 0===e||null===(o=e.riskCalcMethodInfoVO)||void 0===o?void 0:o.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(a=e.minPremium,l=e.maxPremium),a>e.minPremium&&(a=e.minPremium),l<e.maxPremium&&(l=e.maxPremium)})),k.formInfo.premium=k.formInfo.premium||a,{min:a,max:l}})),q=y((()=>{var e,o,a,l;const t=(null===(e=i.originData)||void 0===e||null===(o=e.riskCalcMethodInfoVO)||void 0===o?void 0:o.minCopy)||1,n=null===(a=i.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.maxCopy;return k.formInfo.copy=`${k.formInfo.copy||t||1}`,{min:t,max:n}})),N=(e,o,a)=>{var l,t;const n=(null===(l=i.originData)||void 0===l||null===(t=l.riskCalcMethodInfoVO)||void 0===t?void 0:t.increaseDecreaseNum)||1;if("sumInsured"===a){if(P.value.max&&+e>P.value.max)return`金额最大${P.value.max}元`;if(+e<P.value.min)return`金额最小${P.value.min}元`}else{if(x.value.max&&+e>x.value.max)return`金额最大${x.value.max}元`;if(+e<x.value.min)return`金额最小${x.value.min}元`}return+e%n==0?"":`金额必须是${n}的倍数`};return I((()=>{var e,o;const a={riskType:i.originData.riskType,riskId:i.originData.id,riskName:i.originData.riskName,riskCode:i.originData.riskCode,mainRiskCode:1!==i.originData.riskType?null===(e=i.mainRiskData)||void 0===e?void 0:e.riskCode:void 0,mainRiskId:1!==i.originData.riskType?null===(o=i.mainRiskData)||void 0===o?void 0:o.id:void 0,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType})))};Object.assign(null==k?void 0:k.formInfo,a)})),a((()=>{var e;return null===(e=k.formInfo)||void 0===e?void 0:e.paymentFrequency}),((e=0)=>{var o,a,l;[3].includes((null===(o=i.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.saleMethod)||0)&&((null===(a=i.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(k.formInfo,{amount:i.perCopyAmount,premium:i.perCopyPremium})}));1==+e&&"single"!==k.formInfo.chargePeriod&&(k.formInfo.chargePeriod="single")})),a((()=>{var e;return null===(e=k.formInfo)||void 0===e?void 0:e.copy}),(e=>{var o,a;4===(null===(o=i.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.saleMethod)&&(k.formInfo.amount=+(e||1)*((null===(a=i.originData.riskCalcMethodInfoVO)||void 0===a?void 0:a.fixedAmount)||0))})),a((()=>{var e;return null===(e=k.formInfo)||void 0===e?void 0:e.chargePeriod}),(e=>{"single"===e&&1!=+(k.formInfo.paymentFrequency||0)&&(k.formInfo.paymentFrequency=1)})),a((()=>null==i?void 0:i.mainRiskInfo),(e=>{var o,a,l,t,n,r;e&&2===i.originData.riskType&&(1===(null===(o=i.originData)||void 0===o||null===(a=o.riskInsureLimitVO)||void 0===a?void 0:a.insurancePeriodRule)&&(e.coveragePeriod?p.value.coveragePeriod.disabled=!0:p.value.coveragePeriod.prevent=!0,k.formInfo.coveragePeriod=e.coveragePeriod||""),1===(null===(l=i.originData)||void 0===l||null===(t=l.riskInsureLimitVO)||void 0===t?void 0:t.paymentPeriodRule)&&(e.chargePeriod?p.value.chargePeriod.disabled=!0:p.value.chargePeriod.prevent=!0,k.formInfo.chargePeriod=e.chargePeriod||""),1===(null===(n=i.originData)||void 0===n||null===(r=n.riskInsureLimitVO)||void 0===r?void 0:r.paymentTypeRule)&&(e.paymentFrequency?p.value.paymentFrequency.disabled=!0:p.value.paymentFrequency.prevent=!0,k.formInfo.paymentFrequency=e.paymentFrequency||0))}),{immediate:!0,deep:!0}),(i,o)=>{var a,m,f,v,y,I,A,_,E,j,S,$,Y,z,B,G,K,H,le,te,ne,re,de,se,ue,me,ce,pe,fe,ve;const ye=l("ProSvg"),ke=l("ProTitle"),ge=l("VanStepper"),Ve=l("VanField"),he=l("ProRadioButton"),be=l("ProExpand");return t(),n("div",X,[r(ke,{"risk-type":e.originData.riskType,title:e.originData.riskName},{default:d((()=>[e.removeRiskList.includes(e.originData.id)?(t(),n("div",{key:0,class:"delete-risk",onClick:o[0]||(o[0]=i=>e.removeRisk(e.originData.id))},[r(ye,{name:"delete",color:"#0d6efe"})])):V("",!0)])),_:1},8,["risk-type","title"]),1===(null===(a=e.originData.riskCalcMethodInfoVO)||void 0===a?void 0:a.saleMethod)&&2===e.originData.exemptFlag?(t(),g(Ve,{key:0,modelValue:u(k).formInfo.amount,"onUpdate:modelValue":o[2]||(o[2]=e=>u(k).formInfo.amount=e),label:"保额",name:"amount",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>N(...e,"sumInsured")}]},{input:d((()=>{var i,a;return[s("div",J,[r(ge,{modelValue:u(k).formInfo.amount,"onUpdate:modelValue":o[1]||(o[1]=e=>u(k).formInfo.amount=e),"input-width":"64px",min:u(P).min,step:(null===(i=e.originData.riskCalcMethodInfoVO)||void 0===i?void 0:i.increaseDecreaseNum)||1,max:u(P).max},null,8,["modelValue","min","step","max"]),s("span",Q,h(`金额最低${u(P).min}元，为${(null===(a=e.originData.riskCalcMethodInfoVO)||void 0===a?void 0:a.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):V("",!0),2===(null===(m=e.originData)||void 0===m||null===(f=m.riskCalcMethodInfoVO)||void 0===f?void 0:f.saleMethod)?(t(),g(Ve,{key:1,modelValue:u(k).formInfo.premium,"onUpdate:modelValue":o[4]||(o[4]=e=>u(k).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>N(...e,"premium")}]},{input:d((()=>{var i,a,l,t;return[s("div",W,[r(ge,{modelValue:u(k).formInfo.premium,"onUpdate:modelValue":o[3]||(o[3]=e=>u(k).formInfo.premium=e),step:(null===(i=e.originData)||void 0===i||null===(a=i.riskCalcMethodInfoVO)||void 0===a?void 0:a.increaseDecreaseNum)||1,min:u(x).min,"input-width":"64px",max:u(x).max},null,8,["modelValue","step","min","max"]),s("span",Z,h(`金额最低${u(x).min}元，为${(null===(l=e.originData)||void 0===l||null===(t=l.riskCalcMethodInfoVO)||void 0===t?void 0:t.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):V("",!0),3===(null===(v=e.originData)||void 0===v||null===(y=v.riskCalcMethodInfoVO)||void 0===y?void 0:y.saleMethod)||4===(null===(I=e.originData)||void 0===I||null===(A=I.riskCalcMethodInfoVO)||void 0===A?void 0:A.saleMethod)&&(null!==(_=e.originData)&&void 0!==_&&null!==(E=_.riskCalcMethodInfoVO)&&void 0!==E&&E.minCopy||null!==(j=e.originData)&&void 0!==j&&null!==(S=j.riskCalcMethodInfoVO)&&void 0!==S&&S.maxCopy)?(t(),g(Ve,{key:2,modelValue:u(k).formInfo.copy,"onUpdate:modelValue":o[6]||(o[6]=e=>u(k).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:d((()=>[s("div",ee,[r(ge,{modelValue:u(k).formInfo.copy,"onUpdate:modelValue":o[5]||(o[5]=e=>u(k).formInfo.copy=e),step:1,min:u(q).min,max:u(q).max},null,8,["modelValue","min","max"]),s("span",ie,h(`${u(q).min}份起购，最多购买${u(q).max}份`),1)])])),_:1},8,["modelValue"])):V("",!0),[1].includes((null===($=e.originData.riskCalcMethodInfoVO)||void 0===$?void 0:$.saleMethod)||0)&&1!==(null===(Y=e.originData)||void 0===Y?void 0:Y.exemptFlag)||!(e.originData.riskCalcMethodInfoVO.fixedAmount||null!==(z=u(c))&&void 0!==z&&z[null===(B=e.originData)||void 0===B?void 0:B.riskCode])?V("",!0):(t(),g(Ve,{key:3,label:"保额"},{input:d((()=>{var i,o,a,l;return[s("div",null,h((null===(i=e.originData.riskCalcMethodInfoVO)||void 0===i?void 0:i.fixedAmount)||(null===(o=u(c))||void 0===o||null===(a=o[null===(l=e.originData)||void 0===l?void 0:l.riskCode])||void 0===a?void 0:a.amount)),1)]})),_:1})),b(null===(G=e.originData)||void 0===G||null===(K=G.riskInsureLimitVO)||void 0===K?void 0:K.insurancePeriodValueList)&&b(null===(H=e.originData)||void 0===H||null===(le=H.riskInsureLimitVO)||void 0===le?void 0:le.insurancePeriodRule)?V("",!0):(t(),g(Ve,{key:4,modelValue:u(k).formInfo.coveragePeriod,"onUpdate:modelValue":o[8]||(o[8]=e=>u(k).formInfo.coveragePeriod=e),label:"保障期间",name:"coveragePeriod",rules:[{required:!0,message:"请选择保障期间"}]},{input:d((()=>[r(he,{modelValue:u(k).formInfo.coveragePeriod,"onUpdate:modelValue":o[7]||(o[7]=e=>u(k).formInfo.coveragePeriod=e),disabled:p.value.coveragePeriod.disabled,prevent:p.value.coveragePeriod.prevent?"请先选择主险保障期间":"",options:u(O),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),b(null===(te=e.originData)||void 0===te||null===(ne=te.riskInsureLimitVO)||void 0===ne?void 0:ne.paymentPeriodValueList)&&b(null===(re=e.originData)||void 0===re||null===(de=re.riskInsureLimitVO)||void 0===de?void 0:de.paymentPeriodRule)?V("",!0):(t(),g(Ve,{key:5,modelValue:u(k).formInfo.chargePeriod,"onUpdate:modelValue":o[10]||(o[10]=e=>u(k).formInfo.chargePeriod=e),label:"交费期间",name:"chargePeriod",rules:[{required:!0,message:"请选择交费期间"}]},{input:d((()=>[r(he,{modelValue:u(k).formInfo.chargePeriod,"onUpdate:modelValue":o[9]||(o[9]=e=>u(k).formInfo.chargePeriod=e),disabled:p.value.chargePeriod.disabled,prevent:p.value.chargePeriod.prevent?"请先选择主险交费期间":"",options:u(R),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),b(null===(se=e.originData.riskInsureLimitVO)||void 0===se?void 0:se.paymentFrequencyList)&&b(null===(ue=e.originData.riskInsureLimitVO)||void 0===ue?void 0:ue.paymentPeriodRule)?V("",!0):(t(),g(Ve,{key:6,modelValue:u(k).formInfo.paymentFrequency,"onUpdate:modelValue":o[12]||(o[12]=e=>u(k).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:d((()=>[r(he,{modelValue:u(k).formInfo.paymentFrequency,"onUpdate:modelValue":o[11]||(o[11]=e=>u(k).formInfo.paymentFrequency=e),disabled:p.value.paymentFrequency.disabled,prevent:p.value.paymentFrequency.prevent?"请先选择主险交费方式":"",options:u(w)},null,8,["modelValue","disabled","prevent","options"])])),_:1},8,["modelValue"])),b(null===(me=e.originData)||void 0===me||null===(ce=me.riskInsureLimitVO)||void 0===ce?void 0:ce.annuityDrawValueList)?V("",!0):(t(),g(Ve,{key:7,modelValue:u(k).formInfo.annuityDrawDate,"onUpdate:modelValue":o[14]||(o[14]=e=>u(k).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate",rules:[{required:!0,message:"请选择领取时间"}]},{input:d((()=>{var i;return[r(he,{modelValue:u(k).formInfo.annuityDrawDate,"onUpdate:modelValue":o[13]||(o[13]=e=>u(k).formInfo.annuityDrawDate=e),options:C(u(T),(null===(i=e.originData.riskInsureLimitVO)||void 0===i?void 0:i.annuityDrawValueList)||[])},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),b(null===(pe=e.originData)||void 0===pe||null===(fe=pe.riskInsureLimitVO)||void 0===fe?void 0:fe.annuityDrawFrequencyList)?V("",!0):(t(),g(Ve,{key:8,modelValue:u(k).formInfo.annuityDrawType,"onUpdate:modelValue":o[16]||(o[16]=e=>u(k).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType",rules:[{required:!0,message:"请选择领取方式"}]},{input:d((()=>{var i;return[r(he,{modelValue:u(k).formInfo.annuityDrawType,"onUpdate:modelValue":o[15]||(o[15]=e=>u(k).formInfo.annuityDrawType=e),options:C(u(U),(null===(i=e.originData.riskInsureLimitVO)||void 0===i?void 0:i.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),(t(!0),n(L,null,D(e.originData.riskLiabilityInfoVOList||[],((i,o)=>(t(),n("div",{key:o},[1===i.optionalFlag?(t(),g(Ve,{key:0,modelValue:u(k).formInfo.liabilityVOList[o].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[o].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:d((()=>{var a,l;return[s("div",null,[b(i.liabilityAttributeValueList)?(t(),n("span",oe,"50万")):(t(),g(he,{key:1,modelValue:u(k).formInfo.liabilityVOList[o].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[o].liabilityAttributeValue=e,options:C(u(F),null===(a=e.originData.riskLiabilityInfoVOList)||void 0===a||null===(l=a[o])||void 0===l?void 0:l.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(t(),g(Ve,{key:1,modelValue:u(k).formInfo.liabilityVOList[o].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[o].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:d((()=>{var a,l;return[s("div",null,[b(i.liabilityAttributeValueList)?(t(),g(he,{key:0,modelValue:u(k).formInfo.liabilityVOList[o].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[o].liabilityAttributeValue=e,options:u(M)},null,8,["modelValue","onUpdate:modelValue","options"])):(t(),g(he,{key:1,modelValue:u(k).formInfo.liabilityVOList[o].liabilityAttributeValue,"onUpdate:modelValue":e=>u(k).formInfo.liabilityVOList[o].liabilityAttributeValue=e,options:C(u(F),null===(a=e.originData.riskLiabilityInfoVOList)||void 0===a||null===(l=a[o])||void 0===l?void 0:l.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"]))])))),128)),null!==(ve=e.originData)&&void 0!==ve&&ve.relationDesc?(t(),n("div",ae,[r(be,{title:"责任投保说明"},{default:d((()=>[s("div",null,h(e.originData.relationDesc),1)])),_:1})])):V("",!0)])}}}),[["__scopeId","data-v-9047eb86"]]);const te={class:"com-risk-list-wrapper"},ne=(e=>(m("data-v-1f13cbe8"),e=e(),c(),e))((()=>s("div",{class:"popup-title"},"选择附加险",-1))),re={class:"risk-list"},de={class:"cell-title"},se={class:"title"},ue={class:"footer-bar"},me=R("确认"),ce=i({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const m=e,c=f([]),p=f([]),v=f([...m.disabled]),y=o({show:m.show,currentChecked:[...m.modelValue]}),k=e=>{var i,o,a;if(v.value.includes(e))return;((e,i)=>{if(!m.collocationList.length)return i?void(y.currentChecked=[]):void y.currentChecked.push(e);let o=y.currentChecked,a=v.value;i?(m.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?o=o.filter((o=>o!==i.collocationRiskId||o!==e)):3===i.collocationType?(o=o.filter((i=>i!==e)),a=a.filter((e=>e!==i.collocationRiskId))):o=o.filter((i=>i!==e)))})),y.currentChecked=o,v.value=a):(m.collocationList.forEach((l=>{e===l.riskId&&(i||(2===l.collocationType?o.push(l.collocationRiskId):3===l.collocationType&&a.push(l.collocationRiskId),o.push(e)))})),y.currentChecked.push(...o),v.value=a)})(e,y.currentChecked.includes(e)),null==c||null===(i=c.value)||void 0===i||null===(o=i[e])||void 0===o||null===(a=o.toggle)||void 0===a||a.call(o)},V=()=>{i("close")},b=()=>{const e=m.riskList.filter((e=>y.currentChecked.includes(e.id)));i("update:modelValue",[...new Set(p.value)]),i("finished",e,v.value),i("close")};return C((()=>{c.value=[]})),a((()=>y.currentChecked),(e=>{p.value=e}),{deep:!0,immediate:!0}),a((()=>m.modelValue),(e=>{p.value=e||[],v.value.push(...e||[])}),{deep:!0,immediate:!0}),(i,o)=>{const a=l("van-checkbox"),m=l("VanCell"),f=l("van-cell-group"),I=l("van-checkbox-group"),C=l("VanButton"),R=l("VanPopup");return t(),n("div",te,[r(R,{show:u(y).show,"onUpdate:show":o[1]||(o[1]=e=>u(y).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:V},{default:d((()=>[ne,s("div",re,[r(I,{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e)},{default:d((()=>[r(f,{inset:""},{default:d((()=>[(t(!0),n(L,null,D(e.riskList,(e=>(t(),g(m,{key:e.id,title:e.riskName,disabled:v.value.includes(e.id),onClick:i=>k(e.id)},{"right-icon":d((()=>[r(a,{ref_for:!0,ref:i=>c.value[e.id]=i,shape:"square",disabled:v.value.includes(e.id),name:e.id,onClick:O((i=>k(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:d((()=>[s("div",de,[s("div",se,h(e.riskName),1)])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),s("div",ue,[r(C,{type:"primary",disabled:!u(y).currentChecked.length,block:"",onClick:b},{default:d((()=>[me])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var pe=e("a",E(ce,[["__scopeId","data-v-1f13cbe8"]]));const fe={class:"risk-list-wrapper"},ve={key:0,class:"add-rider-risk"},ye={class:"left-part"},ke=R("+ 附加险");e("R",E(i({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(e){const i=e,m=v("source")||{},[c,y]=p(!1);f(null),f(null);const k=o({mainRiskInfo:i.riskInfo,riskInfo:i.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),b=(e,i)=>{k.currentRiskList=k.currentRiskList.concat(e),k.disabledList=i},I=e=>{w.confirm({message:"确定要删除附加险么？"}).then((()=>{var i;const o=[e];((null===(i=k.mainRiskData)||void 0===i?void 0:i.collocationVOList)||[]).forEach((i=>{e!==i.riskId||2!==i.collocationType&&3!==i.collocationType||o.push(i.collocationRiskId)})),k.checkedList=k.checkedList.filter((e=>!o.includes(e))),k.currentRiskList=k.currentRiskList.filter((e=>!o.includes(e.id)||(Object.assign(k.riskInfo,{[e.id]:void 0}),!1))),k.disabledList=k.disabledList.filter((e=>!o.includes(e)))})).catch((()=>{}))};return a((()=>k.currentRiskList),(e=>{const o=[k.mainRiskData,...e];let a=[],l=[];const t=[];o.forEach(((e,i)=>{var o,n,r;const d=(null==e||null===(o=e.riskCalcMethodInfoVO)||void 0===o?void 0:o.riskFactorRelationList)||[];a=a.concat(d.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),l=l.concat(d.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),t.push(null==e||null===(n=e.riskInsureLimitVO)||void 0===n?void 0:n.minHolderAge,null==e||null===(r=e.riskInsureLimitVO)||void 0===r?void 0:r.maxHolderAge)})),(e||[]).forEach((e=>{var i,o;const a={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,riskName:e.riskName,mainRiskCode:1!==e.riskType?null===(i=k.mainRiskData)||void 0===i?void 0:i.riskCode:void 0,mainRiskId:1!==e.riskType?null===(o=k.mainRiskData)||void 0===o?void 0:o.id:void 0,riskCategory:e.riskCategory,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType})))};k.riskInfo[e.id]||Object.assign(k.riskInfo,{[e.id]:a})})),i.pickFactor({insuredFactorList:[...new Set(a)],holderFactorList:[...new Set(l)],ageRange:t})}),{deep:!0,immediate:!0}),a((()=>i.riskInfo),(e=>{k.mainRiskInfo=Object.values(e||{}).find((e=>1===(null==e?void 0:e.riskType)))||{}}),{deep:!0,immediate:!0}),a((()=>i.originData),(e=>{let i=[];const o=[];"proposal"===m.origin&&"add"!==m.type&&"repeatAdd"!==m.type?((e||[]).forEach((e=>{1===e.riskType&&(k.mainRiskData=e),i.push(e)})),i=i.filter((e=>m.showRiskList.includes(e.id)))):(e||[]).forEach((e=>{1===e.riskType?(k.mainRiskData=e,i.push(e)):2===e.collocationType?i.push(e):o.push(e)})),k.riderRiskList=o,k.currentRiskList=i}),{deep:!0,immediate:!0}),(i,o)=>{var a,p,f;const v=l("ProCheckButton");return t(),n("div",fe,[(t(!0),n(L,null,D(u(k).currentRiskList,((i,o)=>(t(),g(le,{key:i.id,"form-info":u(k).riskInfo[i.id],index:o,enums:e.enums,"main-risk-data":u(k).mainRiskData,"main-risk-info":u(k).mainRiskInfo,"origin-data":i,"remove-risk":I,"remove-risk-list":u(k).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),(null===(a=u(k).riderRiskList)||void 0===a?void 0:a.length)-(null===(p=u(k).checkedList)||void 0===p?void 0:p.length)&&"proposal"!==u(m).origin?(t(),n("div",ve,[s("span",ye,h(`共有${u(k).riderRiskList.length-u(k).checkedList.length}款附加险可以添加`),1),r(v,{activated:"",onClick:o[0]||(o[0]=e=>u(y)(!0))},{default:d((()=>[ke])),_:1})])):V("",!0),u(c)?(t(),g(pe,{key:1,modelValue:u(k).checkedList,"onUpdate:modelValue":o[1]||(o[1]=e=>u(k).checkedList=e),show:u(c),disabled:u(k).disabledList,"risk-list":u(k).riderRiskList,"collocation-list":(null===(f=u(k).mainRiskData)||void 0===f?void 0:f.collocationVOList)||[],onFinished:b,onClose:o[2]||(o[2]=e=>u(y)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):V("",!0)])}}}),[["__scopeId","data-v-1afa9508"]]));e("i",((e={})=>j.post("/api/app/insure/product/insureProductDetail",e))),e("p",(e=>j.post("/api/app/insure/insurance/premiumCalc",e)))}}}))}();

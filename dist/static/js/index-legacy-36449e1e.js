!function(){var e=document.createElement("style");e.innerHTML='.com-risk-list-wrapper .risk-list[data-v-7d3c3028]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper[data-v-7d3c3028] .van-cell-group--inset{border-bottom:0;border-radius:0;margin:0}.com-risk-list-wrapper[data-v-7d3c3028] .van-cell-group--inset .van-cell{padding:.42667rem .53333rem;align-items:center}.com-risk-list-wrapper[data-v-7d3c3028] .van-cell-group--inset .van-cell:after{width:9.6rem}.com-risk-list-wrapper[data-v-7d3c3028] .van-cell-group--inset .van-cell .van-checkbox__icon .van-icon{height:.42667rem;width:.42667rem;border-radius:.05333rem;line-height:.42667rem;font-size:.32rem}.com-risk-list-wrapper .cell-title[data-v-7d3c3028]{display:flex;flex-direction:column}.com-risk-list-wrapper .cell-title .title-desc[data-v-7d3c3028]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .footer-bar[data-v-7d3c3028]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.com-personal-info-wrapper .placeholder[data-v-b6a7c104]{color:#99a9c0}:root{--van-stepper-background-color: var(--van-active-color);--van-stepper-button-icon-color: var(--van-text-color);--van-stepper-button-disabled-color: var(--van-background-color);--van-stepper-button-disabled-icon-color: var(--van-gray-5);--van-stepper-button-round-theme-color: var(--van-danger-color);--van-stepper-input-width: 32px;--van-stepper-input-height: 28px;--van-stepper-input-font-size: var(--van-font-size-md);--van-stepper-input-line-height: normal;--van-stepper-input-text-color: var(--van-text-color);--van-stepper-input-disabled-text-color: var(--van-text-color-3);--van-stepper-input-disabled-background-color: var(--van-active-color);--van-stepper-border-radius: var(--van-border-radius-md)}.van-stepper{display:inline-block;-webkit-user-select:none;user-select:none}.van-stepper__minus,.van-stepper__plus{position:relative;box-sizing:border-box;width:var(--van-stepper-input-height);height:var(--van-stepper-input-height);margin:0;padding:0;color:var(--van-stepper-button-icon-color);vertical-align:middle;background:var(--van-stepper-background-color);border:0}.van-stepper__minus:before,.van-stepper__plus:before{width:50%;height:1px}.van-stepper__minus:after,.van-stepper__plus:after{width:1px;height:50%}.van-stepper__minus:before,.van-stepper__plus:before,.van-stepper__minus:after,.van-stepper__plus:after{position:absolute;top:50%;left:50%;background-color:currentColor;transform:translate(-50%,-50%);content:""}.van-stepper__minus--disabled,.van-stepper__plus--disabled{color:var(--van-stepper-button-disabled-icon-color);background-color:var(--van-stepper-button-disabled-color);cursor:not-allowed}.van-stepper__minus{border-radius:var(--van-stepper-border-radius) 0 0 var(--van-stepper-border-radius)}.van-stepper__minus:after{display:none}.van-stepper__plus{border-radius:0 var(--van-stepper-border-radius) var(--van-stepper-border-radius) 0}.van-stepper__input{box-sizing:border-box;width:var(--van-stepper-input-width);height:var(--van-stepper-input-height);margin:0 2px;padding:0;color:var(--van-stepper-input-text-color);font-size:var(--van-stepper-input-font-size);line-height:var(--van-stepper-input-line-height);text-align:center;vertical-align:middle;background:var(--van-stepper-background-color);border:0;border-width:1px 0;border-radius:0;-webkit-appearance:none}.van-stepper__input:disabled{color:var(--van-stepper-input-disabled-text-color);background-color:var(--van-stepper-input-disabled-background-color);-webkit-text-fill-color:var(--van-stepper-input-disabled-text-color);opacity:1}.van-stepper__input:read-only{cursor:default}.van-stepper--round .van-stepper__input{background-color:transparent}.van-stepper--round .van-stepper__plus,.van-stepper--round .van-stepper__minus{border-radius:100%}.van-stepper--round .van-stepper__plus--disabled,.van-stepper--round .van-stepper__minus--disabled{opacity:.3;cursor:not-allowed}.van-stepper--round .van-stepper__plus{color:var(--van-white);background:var(--van-stepper-button-round-theme-color)}.van-stepper--round .van-stepper__minus{color:var(--van-stepper-button-round-theme-color);background-color:var(--van-background-color-light);border:1px solid var(--van-stepper-button-round-theme-color)}.risk-responsibility .title[data-v-27faf794]{font-size:.34667rem;font-weight:500;color:#393d46;padding:.26667rem 0;padding-left:var(--van-cell-horizontal-padding);overflow:hidden}.risk-responsibility .responsibility-content[data-v-27faf794]{position:relative;padding-left:var(--zaui-page-border);font-size:.37333rem;color:#aab9d0;overflow:hidden}.risk-responsibility .responsibility-content li[data-v-27faf794]{display:flex;align-items:center;height:.77333rem;font-size:.34667rem}.risk-responsibility .responsibility-content li .responsibility-sign[data-v-27faf794]{width:.37333rem;height:.37333rem;line-height:.37333rem;text-align:center;border:1px solid #99a9c0;border-radius:50%;margin-right:.18667rem}.risk-responsibility .responsibility-content .show-button[data-v-27faf794]{position:absolute;left:50%;bottom:0;width:100%;height:1.17333rem;line-height:1.17333rem;background-color:#fff;text-align:center;transform:translate(-50%)}.com-risk-card-wrapper.part-card[data-v-3b9c2786]{background-color:#fff;border-bottom:.26667rem solid var(--zaui-global-bg, #f2f5fc)}.com-risk-card-wrapper .delete-risk[data-v-3b9c2786]{display:flex;align-items:center;justify-content:center;margin-top:.06667rem}.com-risk-card-wrapper .delete-risk .svg-icon[data-v-3b9c2786]{font-size:.42667rem}.com-risk-card-wrapper .custom-field[data-v-3b9c2786]{display:flex;flex-direction:column}.com-risk-card-wrapper .custom-field .field-tip[data-v-3b9c2786]{font-size:.32rem;font-weight:400;color:#99a9c0;line-height:1;margin:0 0 .10667rem}.risk-list-wrapper[data-v-4b309d85]{margin-bottom:3.13333rem}.risk-list-wrapper .add-rider-risk[data-v-4b309d85]{background-color:#fff;margin-top:-.26667rem;height:1.41333rem;display:flex;align-items:center;justify-content:space-between;padding:var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding)}.risk-list-wrapper .add-rider-risk .left-part[data-v-4b309d85]{font-weight:400;color:#99a9c0;font-size:.4rem}.risk-list-wrapper .add-rider-risk .btn-rider-risk[data-v-4b309d85]{border:none;display:flex;align-items:center}.risk-list-wrapper .add-rider-risk .btn-rider-risk .btn-plus[data-v-4b309d85]{font-size:.58667rem;margin:0 .10667rem .13333rem}\n',document.head.appendChild(e),System.register(["./index-legacy-991c023d.js","./trial-legacy-bb2044a0.js","./useDicData-legacy-abb668b3.js"],(function(e){"use strict";var i,a,o,t,l,r,n,d,s,u,m,p,c,v,f,b,g,y,k,h,V,I,L,D,C,w,x,_,O,R,A,P,T,M,F,U,N,q,S,E,Y,$,z,j,B,G,H,K,W,J,X,Z,Q,ee,ie,ae,oe,te,le,re,ne,de,se,ue,me,pe,ce,ve,fe,be,ge,ye,ke,he,Ve,Ie;return{setters:[function(e){i=e.av,a=e.d,o=e.r,t=e.E,l=e.ax,r=e.b9,n=e.am,d=e.aw,s=e.f,u=e.A,m=e.a4,p=e.aZ,c=e.b1,v=e.ba,f=e.aV,b=e.ay,g=e.bb,y=e.bc,k=e.b2,h=e.bd,V=e.be,I=e.bf,L=e.bg,D=e.aB,C=e._,w=e.J,x=e.o,_=e.c,O=e.g,R=e.w,A=e.i,P=e.F,T=e.h,M=e.e,F=e.k,U=e.t,N=e.m,q=e.n,S=e.v,E=e.C,Y=e.q,$=e.x,z=e.B,j=e.a$,B=e.X,G=e.Y,H=e.S,K=e.bh,W=e.ac,J=e.j,X=e.aL,Z=e.aE,Q=e.b5,ee=e.y,ie=e.l,ae=e.b6,oe=e.bi,te=e.bj,le=e.G,re=e.bk,ne=e.W,de=e.V,se=e.aD,ue=e.b4,me=e.ao,pe=e.ai,ce=e.aF},function(e){ve=e.S,fe=e.d,be=e.e,ge=e.f,ye=e.A,ke=e.g,he=e.L,Ve=e.h},function(e){Ie=e.u}],execute:function(){const[Le,De]=i("stepper"),Ce=(e,i)=>String(e)===String(i),we={min:v(1),max:v(1/0),name:v(""),step:v(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:f,showMinus:f,showInput:f,longPress:f,allowEmpty:Boolean,modelValue:b,inputWidth:b,buttonSize:b,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:v(1),decimalLength:b};var xe=a({name:Le,props:we,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:i}){const a=i=>{const{min:a,max:o,allowEmpty:t,decimalLength:l}=e;return t&&""===i||(i=""===(i=g(String(i),!e.integer))?0:+i,i=Number.isNaN(i)?+a:i,i=Math.max(Math.min(+o,i),+a),y(l)&&(i=i.toFixed(+l))),i};let v;const f=o(),b=o((()=>{var o;const t=null!=(o=e.modelValue)?o:e.defaultValue,l=a(t);return Ce(l,e.modelValue)||i("update:modelValue",l),l})()),D=t((()=>e.disabled||e.disableMinus||b.value<=+e.min)),C=t((()=>e.disabled||e.disablePlus||b.value>=+e.max)),w=t((()=>({width:l(e.inputWidth),height:l(e.buttonSize)}))),x=t((()=>r(e.buttonSize))),_=i=>{e.beforeChange?I(e.beforeChange,{args:[i],done(){b.value=i}}):b.value=i},O=()=>{if("plus"===v&&C.value||"minus"===v&&D.value)return void i("overlimit",v);const o="minus"===v?-e.step:+e.step,t=a(L(+b.value,o));_(t),i(v)},R=i=>{const a=i.target,{value:o}=a,{decimalLength:t}=e;let l=g(String(o),!e.integer);if(y(t)&&l.includes(".")){const e=l.split(".");l=`${e[0]}.${e[1].slice(0,+t)}`}e.beforeChange?a.value=String(b.value):Ce(o,l)||(a.value=l);const r=l===String(+l);_(r?+l:l)},A=a=>{var o;e.disableInput?null==(o=f.value)||o.blur():i("focus",a)},P=e=>{const o=e.target,t=a(o.value);o.value=String(t),b.value=t,k((()=>{i("blur",e),h()}))};let T,M;const F=()=>{M=setTimeout((()=>{O(),F()}),200)},U=i=>{e.longPress&&(clearTimeout(M),T&&V(i))},N=i=>{e.disableInput&&V(i)},q=i=>({onClick:e=>{V(e),v=i,O()},onTouchstartPassive:()=>{v=i,e.longPress&&(T=!1,clearTimeout(M),M=setTimeout((()=>{T=!0,O(),F()}),600))},onTouchend:U,onTouchcancel:U});return n((()=>[e.max,e.min,e.integer,e.decimalLength]),(()=>{const e=a(b.value);Ce(e,b.value)||(b.value=e)})),n((()=>e.modelValue),(e=>{Ce(e,b.value)||(b.value=a(e))})),n(b,(a=>{i("update:modelValue",a),i("change",a,{name:e.name})})),d((()=>e.modelValue)),()=>s("div",{role:"group",class:De([e.theme])},[u(s("button",p({type:"button",style:x.value,class:[De("minus",{disabled:D.value}),{[c]:!D.value}],"aria-disabled":D.value||void 0},q("minus")),null),[[m,e.showMinus]]),u(s("input",{ref:f,type:e.integer?"tel":"text",role:"spinbutton",class:De("input"),value:b.value,style:w.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":b.value,onBlur:P,onInput:R,onFocus:A,onMousedown:N},null),[[m,e.showInput]]),u(s("button",p({type:"button",style:x.value,class:[De("plus",{disabled:C.value}),{[c]:!C.value}],"aria-disabled":C.value||void 0},q("plus")),null),[[m,e.showPlus]])])}});const _e=D(xe);const Oe={class:"com-risk-list-wrapper"},Re=(e=>(B("data-v-7d3c3028"),e=e(),G(),e))((()=>A("div",{class:"popup-title"},"选择附加险",-1))),Ae={class:"risk-list"},Pe={class:"cell-title"},Te={class:"title"},Me={class:"footer-button"},Fe=q("确认"),Ue=a({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const a=e,t=o([]),l=o([]),r=o([...a.disabled]),d=w({show:a.show,currentChecked:[...a.modelValue]}),u=e=>{var i,o,l;if(r.value.includes(e))return;((e,i)=>{if(!a.collocationList.length)return i?void(d.currentChecked=[]):void d.currentChecked.push(e);let o=d.currentChecked,t=r.value;i?(a.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?o=o.filter((a=>a!==i.collocationRiskId||a!==e)):3===i.collocationType?(o=o.filter((i=>i!==e)),t=t.filter((e=>e!==i.collocationRiskId))):o=o.filter((i=>i!==e)))})),d.currentChecked=o,r.value=t):(a.collocationList.forEach((a=>{e===a.riskId&&(i||(2===a.collocationType?o.push(a.collocationRiskId):3===a.collocationType&&t.push(a.collocationRiskId),o.push(e)))})),d.currentChecked.push(...o),r.value=t)})(e,d.currentChecked.includes(e)),null==t||null===(i=t.value)||void 0===i||null===(o=i[e])||void 0===o||null===(l=o.toggle)||void 0===l||l.call(o)},m=()=>{i("close")},p=()=>{const e=a.riskList.filter((e=>d.currentChecked.includes(e.id)));i("update:modelValue",[...new Set(l.value)]),i("finished",e,r.value),i("close")};return x((()=>{t.value=[]})),n((()=>d.currentChecked),(e=>{l.value=e}),{deep:!0,immediate:!0}),n((()=>a.modelValue),(e=>{l.value=e||[],r.value.push(...e||[])}),{deep:!0,immediate:!0}),(i,a)=>{const o=S,n=E,c=Y,v=$,f=z,b=j;return _(),O("div",Oe,[s(b,{show:N(d).show,"onUpdate:show":a[1]||(a[1]=e=>N(d).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:m},{default:R((()=>[Re,A("div",Ae,[s(v,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e)},{default:R((()=>[s(c,{inset:""},{default:R((()=>[(_(!0),O(P,null,T(e.riskList,(e=>(_(),M(n,{key:e.id,title:e.riskName,disabled:r.value.includes(e.id),onClick:i=>u(e.id)},{"right-icon":R((()=>[s(o,{ref_for:!0,ref:i=>t.value[e.id]=i,shape:"square",disabled:r.value.includes(e.id),name:e.id,onClick:F((i=>u(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:R((()=>[A("div",Pe,[A("div",Te,U(e.riskName),1)])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),A("div",Me,[s(f,{type:"primary",disabled:!N(d).currentChecked.length,block:"",onClick:p},{default:R((()=>[Fe])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var Ne=e("R",C(Ue,[["__scopeId","data-v-7d3c3028"]]));const qe={class:"com-personal-info-wrapper"},Se={class:"pro-radio-wrap"},Ee={class:"pro-radio-wrap"};e("P",C(a({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(e,{expose:i}){var a,l;const r=e,n=Ie(`${null===(a=r.insuredCode)||void 0===a||null===(l=a.toLocaleUpperCase)||void 0===l?void 0:l.call(a)}_OCCUPATION`),[d,u]=H(),m=o(),p=K("source")||{},c=w({formInfo:r.formInfo,occupationalText:"",occupationCodeList:[]}),v=t((()=>{const e=(e=>{const i=e||[];for(let a=0,o=i.length;a<o;a++)for(let e=a+1;e<o;e++){const o=i[a].split("_"),t=i[e].split("_"),l=i[a];o[0]===t[0]?o>t&&(i[a]=i[e],i[e]=l):"age"===o[0]&&(i[a]=i[e],i[e]=l)}return i})(null==r?void 0:r.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],a=i(e[0]),o=i(e[e.length-1]),t=W().subtract(a[0],"age"===a[1]?"year":"day").format("YYYY-MM-DD");let l=W().subtract(o[0],"age"===o[1]?"year":"day").format("YYYY-MM-DD");return W(l).subtract(1,"year").isBefore(t)&&(l=W(l).subtract(1,"year").add(1,"day").format("YYYY-MM-DD")),{minAge:new Date(l),maxAge:new Date(t)}}));return i({validateForm:()=>new Promise(((e,i)=>{var a;null===(a=m.value)||void 0===a||a.validate().then((()=>{e("")}),(e=>{var a;null===(a=m.value)||void 0===a||a.scrollToField(null==e?void 0:e[0].name),i()}))})),ageRangeObj:v.value}),(i,a)=>{const o=ee,t=ie,l=ae,r=oe,f=j;return _(),O("div",qe,[s(l,{ref_key:"formRef",ref:m,"input-align":"right","error-message-align":"right"},{default:R((()=>["proposal"===N(p).type&&("add"===N(p).type||"repeatAdd"===N(p).type)||"proposal"!==N(p).type&&(e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY"))?(_(),M(o,{key:0,modelValue:N(c).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>N(c).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink",readonly:"","is-link":"",formatter:e=>e?N(W)(e).format("YYYY-MM-DD"):e,placeholder:"请选择",onClick:a[1]||(a[1]=e=>N(u)(!0))},null,8,["modelValue","formatter"])):J("",!0),"proposal"===N(p).type&&("add"===N(p).type||"repeatAdd"===N(p).type)||"proposal"!==N(p).type&&(e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER"))?(_(),M(o,{key:1,modelValue:N(c).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>N(c).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:R((()=>[A("div",Se,[s(t,{modelValue:N(c).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>N(c).formInfo.gender=e),options:N(X)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):J("",!0),e.factorList.includes("SOCIAL_INS")||e.factorList.includes("APPLICANT.SOCIAL_INS")?(_(),M(o,{key:2,modelValue:N(c).formInfo.socialFlag,"onUpdate:modelValue":a[5]||(a[5]=e=>N(c).formInfo.socialFlag=e),name:"socialFlag",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:R((()=>[A("div",Ee,[s(t,{modelValue:N(c).formInfo.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=e=>N(c).formInfo.socialFlag=e),options:N(ve)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):J("",!0),e.factorList.includes("OCCUPATION_CATEGORY")||e.factorList.includes("APPLICANT.OCCUPATION_CATEGORY")?(_(),M(Z,{key:3,modelValue:N(c).formInfo.occupationCodeList[0],"onUpdate:modelValue":a[6]||(a[6]=e=>N(c).formInfo.occupationCodeList[0]=e),field0:N(c).formInfo.occupationCodeList[0],"onUpdate:field0":a[7]||(a[7]=e=>N(c).formInfo.occupationCodeList[0]=e),field1:N(c).formInfo.occupationCodeList[1],"onUpdate:field1":a[8]||(a[8]=e=>N(c).formInfo.occupationCodeList[1]=e),field2:N(c).formInfo.occupationCodeList[2],"onUpdate:field2":a[9]||(a[9]=e=>N(c).formInfo.occupationCodeList[2]=e),required:"",name:"occupationCodeList",label:"职业类型","data-source":N(n),mapping:{label:"value",value:"code",children:"children"},"show-full-value":"","need-key":"name"},null,8,["modelValue","field0","field1","field2","data-source"])):J("",!0)])),_:1},512),s(f,{show:N(d),"onUpdate:show":a[12]||(a[12]=e=>Q(d)?d.value=e:null),position:"bottom"},{default:R((()=>[s(r,{type:"date","min-date":N(v).minAge,"max-date":N(v).maxAge,onConfirm:a[10]||(a[10]=e=>{N(c).formInfo.birthday=N(W)(e).format("YYYY-MM-DD"),N(u)(!1)}),onCancel:a[11]||(a[11]=e=>N(u)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-b6a7c104"]]));const Ye={class:"risk-responsibility"},$e={class:"title"},ze={class:"content"},je=a({props:{modelValue:Boolean,title:{type:String,default:""},minHeight:{type:[Number,String],default:80},maxHeight:{type:[Number,String],default:200}},emits:["update:modelValue"],setup(e,{emit:i}){const a=e;te();const l=o();le((()=>{l.value=a.modelValue}));const r=t((()=>l.value?`${a.maxHeight}px`:`${a.minHeight}px`)),n=()=>{l.value=!l.value,i("update:modelValue",l.value)};return(i,a)=>{const o=de;return _(),O("div",Ye,[A("div",$e,U(e.title),1),A("div",{class:"responsibility-content",style:ne({height:N(r)})},[A("div",ze,[re(i.$slots,"default",{},void 0,!0)]),A("div",{class:"show-button",onClick:n},[A("span",null,U(l.value?"收起":"展开"),1),s(o,{style:{width:"20px",height:"20px"},name:l.value?"arrow-up":"arrow-down"},null,8,["name"])])],4)])}}});var Be=C(je,[["__scopeId","data-v-27faf794"]]);const Ge={class:"com-risk-card-wrapper part-card"},He={class:"custom-field"},Ke={class:"field-tip"},We={class:"custom-field"},Je={class:"field-tip"},Xe={class:"custom-field"},Ze={class:"field-tip"},Qe={class:"pro-radio-wrap"},ei={class:"pro-radio-wrap"},ii={class:"pro-radio-wrap"},ai={class:"pro-radio-wrap"},oi={class:"pro-radio-wrap"},ti={key:0},li={key:1,class:"pro-radio-wrap"},ri={key:9,class:"liab-desc"},ni=a({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(e){const i=e,a=o({}),l=K("premium")||{};a.value=K("enumList")||{};const r=o({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),d=w({formInfo:i.formInfo}),u=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"[object Object]"==={}.toString.call(e)&&Object.keys(e).length),m=(e,i,a={})=>{let o=i;return Array.isArray(i)||(o=[`${o}`]),(e||[]).filter((e=>o.includes(`${e.value}`)||o.includes(e.value)))},p=t((()=>{var e,a,o,t,l,r,n,d;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?m(i.enums.RISK_INSURANCE_PERIOD,(null===(r=i.originData.riskInsureLimitVO)||void 0===r?void 0:r.insurancePeriodValueList)||[]):2===(null===(a=i.originData)||void 0===a?void 0:a.periodType)?m([{value:"year_1",name:"1年"}],["year_1"]):1===(null===(o=i.originData)||void 0===o?void 0:o.exemptFlag)?m(fe,[`${null==i||null===(n=i.originData)||void 0===n||null===(d=n.riskInsureLimitVO)||void 0===d?void 0:d.insurancePeriodRule}`]):m(null===(t=i.enums)||void 0===t?void 0:t.RISK_INSURANCE_PERIOD,(null===(l=i.mainRiskData.riskInsureLimitVO)||void 0===l?void 0:l.insurancePeriodValueList)||[])})),c=t((()=>{var e,a,o,t,l,r,n,d;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?m(null==i||null===(l=i.enums)||void 0===l?void 0:l.RISK_PAYMENT_PERIOD,(null===(r=i.originData.riskInsureLimitVO)||void 0===r?void 0:r.paymentPeriodValueList)||[]):1===(null===(a=i.originData)||void 0===a?void 0:a.exemptFlag)?m(be,[`${null==i||null===(n=i.originData)||void 0===n||null===(d=n.riskInsureLimitVO)||void 0===d?void 0:d.paymentPeriodRule}`]):2===(null===(o=i.originData)||void 0===o?void 0:o.periodType)?m([{value:"year_1",name:"1年交"}],["year_1"]):m(i.enums.RISK_PAYMENT_PERIOD,(null===(t=i.mainRiskData.riskInsureLimitVO)||void 0===t?void 0:t.paymentPeriodValueList)||[])})),v=t((()=>{var e,a,o,t,l;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?m(ge,(null===(t=i.originData.riskInsureLimitVO)||void 0===t?void 0:t.paymentFrequencyList)||[]):1===(null===(a=i.originData.riskInsureLimitVO)||void 0===a?void 0:a.paymentTypeRule)?m(ge,(null===(l=i.mainRiskData.riskInsureLimitVO)||void 0===l?void 0:l.paymentFrequencyList)||[]):m(ge,(null===(o=i.mainRiskData.riskInsureLimitVO)||void 0===o?void 0:o.paymentFrequencyList)||[])})),f=t((()=>{var e,a;let o=0,t=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(o=e.minAmount,t=e.maxAmount),o>e.minAmount&&(o=e.minAmount),t<e.maxAmount&&(t=e.maxAmount)})),d.formInfo.amount=d.formInfo.amount||o,{min:o,max:t||1/0}})),b=t((()=>{var e,a;let o=0,t=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(o=e.minPremium,t=e.maxPremium),o>e.minPremium&&(o=e.minPremium),t<e.maxPremium&&(t=e.maxPremium)})),d.formInfo.premium=d.formInfo.premium||o,{min:o,max:t||1/0}})),g=t((()=>{var e,a,o,t;const l=(null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.minCopy)||1,r=null===(o=i.originData)||void 0===o||null===(t=o.riskCalcMethodInfoVO)||void 0===t?void 0:t.maxCopy;return d.formInfo.copy=`${d.formInfo.copy||l||1}`,{min:l,max:r}})),y=(e,a,o)=>{var t,l;const r=(null===(t=i.originData)||void 0===t||null===(l=t.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1;if("sumInsured"===o){if(f.value.max&&+e>f.value.max)return`金额最大${f.value.max}元`;if(+e<f.value.min)return`金额最小${f.value.min}元`}else{if(b.value.max&&+e>b.value.max)return`金额最大${b.value.max}元`;if(+e<b.value.min)return`金额最小${b.value.min}元`}return+e%r==0?"":`金额必须是${r}的倍数`},k=e=>{var i;const a=((null===(i=d.formInfo)||void 0===i?void 0:i.liabilityVOList)||[]).find((i=>i.liabilityCode===e.liabilityCode));return a?a.liabilityAttributeValue?a.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return se((()=>{var e,a,o,t;const l={riskType:i.originData.riskType,riskId:i.originData.id,riskName:i.originData.riskName,riskCode:i.originData.riskCode,amount:d.formInfo.amount,mainRiskCode:1!==i.originData.riskType?null===(e=i.mainRiskData)||void 0===e?void 0:e.riskCode:void 0,mainRiskId:1!==i.originData.riskType?null===(a=i.mainRiskData)||void 0===a?void 0:a.id:void 0,exemptFlag:i.originData.exemptFlag,exemptType:i.originData.exemptType,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType,liabilityAttributeValue:k(e)})))};[1].includes((null===(o=i.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.saleMethod)||0)&&1!==(null===(t=i.originData)||void 0===t?void 0:t.exemptFlag)||!i.originData.riskCalcMethodInfoVO.fixedAmount||(l.amount=i.originData.riskCalcMethodInfoVO.fixedAmount),Object.assign(d.formInfo,l)})),n((()=>{var e;return null===(e=d.formInfo)||void 0===e?void 0:e.paymentFrequency}),((e=0)=>{var a,o,t;[3].includes((null===(a=i.originData.riskCalcMethodInfoVO)||void 0===a?void 0:a.saleMethod)||0)&&((null===(o=i.originData)||void 0===o||null===(t=o.riskCalcMethodInfoVO)||void 0===t?void 0:t.paymentMethodLimitList)||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(d.formInfo,{amount:i.perCopyAmount,premium:i.perCopyPremium})}));1==+e&&"single"!==d.formInfo.chargePeriod&&(d.formInfo.chargePeriod="single")})),n((()=>{var e;return null===(e=d.formInfo)||void 0===e?void 0:e.copy}),(e=>{var a,o;4===(null===(a=i.originData.riskCalcMethodInfoVO)||void 0===a?void 0:a.saleMethod)&&(d.formInfo.amount=null===(o=i.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.fixedAmount)})),n((()=>{var e;return null===(e=d.formInfo)||void 0===e?void 0:e.chargePeriod}),(e=>{"single"===e&&1!=+(d.formInfo.paymentFrequency||0)&&(d.formInfo.paymentFrequency=1)})),n((()=>null==i?void 0:i.mainRiskInfo),(e=>{var a,o,t,l,n,s;e&&2===i.originData.riskType&&(1===(null===(a=i.originData)||void 0===a||null===(o=a.riskInsureLimitVO)||void 0===o?void 0:o.insurancePeriodRule)&&(e.coveragePeriod?r.value.coveragePeriod.disabled=!0:r.value.coveragePeriod.prevent=!0,d.formInfo.coveragePeriod=e.coveragePeriod||""),1===(null===(t=i.originData)||void 0===t||null===(l=t.riskInsureLimitVO)||void 0===l?void 0:l.paymentPeriodRule)&&(e.chargePeriod?r.value.chargePeriod.disabled=!0:r.value.chargePeriod.prevent=!0,d.formInfo.chargePeriod=e.chargePeriod||""),1===(null===(n=i.originData)||void 0===n||null===(s=n.riskInsureLimitVO)||void 0===s?void 0:s.paymentTypeRule)&&(e.paymentFrequency?r.value.paymentFrequency.disabled=!0:r.value.paymentFrequency.prevent=!0,d.formInfo.paymentFrequency=e.paymentFrequency||0))}),{immediate:!0,deep:!0}),(i,a)=>{var o,t,n,k,h,V,I,L,D,C,w,x,F,q,S,E,Y,$,z,j,B,G,H,K,W,X,Z,Q,ae,oe;const te=de,le=ue,re=_e,ne=ee,se=ie,pe=me;return _(),O("div",Ge,[s(le,{"risk-type":e.originData.riskType,title:e.originData.riskName},{default:R((()=>[e.removeRiskList.includes(e.originData.id)?(_(),O("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=i=>e.removeRisk(e.originData.id))},[s(te,{name:"img-lajitong",color:"#0d6efe"})])):J("",!0)])),_:1},8,["risk-type","title"]),1===(null===(o=e.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.saleMethod)&&2===e.originData.exemptFlag?(_(),M(ne,{key:0,modelValue:N(d).formInfo.amount,"onUpdate:modelValue":a[2]||(a[2]=e=>N(d).formInfo.amount=e),label:"保额",name:"amount",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>y(...e,"sumInsured")}]},{input:R((()=>{var i,o;return[A("div",He,[s(re,{modelValue:N(d).formInfo.amount,"onUpdate:modelValue":a[1]||(a[1]=e=>N(d).formInfo.amount=e),"input-width":"64px",min:N(f).min,step:(null===(i=e.originData.riskCalcMethodInfoVO)||void 0===i?void 0:i.increaseDecreaseNum)||1,max:N(f).max},null,8,["modelValue","min","step","max"]),A("span",Ke,U(`金额最低${N(f).min}元，为${(null===(o=e.originData.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):J("",!0),2===(null===(t=e.originData)||void 0===t||null===(n=t.riskCalcMethodInfoVO)||void 0===n?void 0:n.saleMethod)?(_(),M(ne,{key:1,modelValue:N(d).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>N(d).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>y(...e,"premium")}]},{input:R((()=>{var i,o,t,l;return[A("div",We,[s(re,{modelValue:N(d).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>N(d).formInfo.premium=e),step:(null===(i=e.originData)||void 0===i||null===(o=i.riskCalcMethodInfoVO)||void 0===o?void 0:o.increaseDecreaseNum)||1,min:N(b).min,"input-width":"64px",max:N(b).max},null,8,["modelValue","step","min","max"]),A("span",Je,U(`金额最低${N(b).min}元，为${(null===(t=e.originData)||void 0===t||null===(l=t.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1}的倍数`),1)])]})),_:1},8,["modelValue","rules"])):J("",!0),3===(null===(k=e.originData)||void 0===k||null===(h=k.riskCalcMethodInfoVO)||void 0===h?void 0:h.saleMethod)||4===(null===(V=e.originData)||void 0===V||null===(I=V.riskCalcMethodInfoVO)||void 0===I?void 0:I.saleMethod)&&(null!==(L=e.originData)&&void 0!==L&&null!==(D=L.riskCalcMethodInfoVO)&&void 0!==D&&D.minCopy||null!==(C=e.originData)&&void 0!==C&&null!==(w=C.riskCalcMethodInfoVO)&&void 0!==w&&w.maxCopy)?(_(),M(ne,{key:2,modelValue:N(d).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>N(d).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:R((()=>[A("div",Xe,[s(re,{modelValue:N(d).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>N(d).formInfo.copy=e),step:1,min:N(g).min,max:N(g).max},null,8,["modelValue","min","max"]),A("span",Ze,U(`${N(g).min}份起购，最多购买${N(g).max}份`),1)])])),_:1},8,["modelValue"])):J("",!0),[1].includes((null===(x=e.originData.riskCalcMethodInfoVO)||void 0===x?void 0:x.saleMethod)||0)&&1!==(null===(F=e.originData)||void 0===F?void 0:F.exemptFlag)||!(e.originData.riskCalcMethodInfoVO.fixedAmount||null!==(q=N(l))&&void 0!==q&&q[null===(S=e.originData)||void 0===S?void 0:S.riskCode])?J("",!0):(_(),M(ne,{key:3,label:"保额"},{input:R((()=>{var i,a,o,t;return[A("div",null,U((null===(i=e.originData.riskCalcMethodInfoVO)||void 0===i?void 0:i.fixedAmount)||(null===(a=N(l))||void 0===a||null===(o=a[null===(t=e.originData)||void 0===t?void 0:t.riskCode])||void 0===o?void 0:o.amount)),1)]})),_:1})),u(null===(E=e.originData)||void 0===E||null===(Y=E.riskInsureLimitVO)||void 0===Y?void 0:Y.insurancePeriodValueList)&&u(null===($=e.originData)||void 0===$||null===(z=$.riskInsureLimitVO)||void 0===z?void 0:z.insurancePeriodRule)?J("",!0):(_(),M(pe,{key:4,modelValue:N(d).formInfo.coveragePeriod,"onUpdate:modelValue":a[8]||(a[8]=e=>N(d).formInfo.coveragePeriod=e),label:"保障期间",name:"coveragePeriod",rules:[{required:!0,message:"请选择保障期间"}]},{input:R((()=>[A("div",Qe,[s(se,{modelValue:N(d).formInfo.coveragePeriod,"onUpdate:modelValue":a[7]||(a[7]=e=>N(d).formInfo.coveragePeriod=e),disabled:r.value.coveragePeriod.disabled,prevent:r.value.coveragePeriod.prevent?"请先选择主险保障期间":"",options:N(p),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),u(null===(j=e.originData)||void 0===j||null===(B=j.riskInsureLimitVO)||void 0===B?void 0:B.paymentPeriodValueList)&&u(null===(G=e.originData)||void 0===G||null===(H=G.riskInsureLimitVO)||void 0===H?void 0:H.paymentPeriodRule)?J("",!0):(_(),M(pe,{key:5,modelValue:N(d).formInfo.chargePeriod,"onUpdate:modelValue":a[10]||(a[10]=e=>N(d).formInfo.chargePeriod=e),label:"交费期间",name:"chargePeriod",rules:[{required:!0,message:"请选择交费期间"}]},{input:R((()=>[A("div",ei,[s(se,{modelValue:N(d).formInfo.chargePeriod,"onUpdate:modelValue":a[9]||(a[9]=e=>N(d).formInfo.chargePeriod=e),disabled:r.value.chargePeriod.disabled,prevent:r.value.chargePeriod.prevent?"请先选择主险交费期间":"",options:N(c),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),u(null===(K=e.originData.riskInsureLimitVO)||void 0===K?void 0:K.paymentFrequencyList)&&u(null===(W=e.originData.riskInsureLimitVO)||void 0===W?void 0:W.paymentPeriodRule)?J("",!0):(_(),M(pe,{key:6,modelValue:N(d).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>N(d).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:R((()=>[A("div",ii,[s(se,{modelValue:N(d).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>N(d).formInfo.paymentFrequency=e),disabled:r.value.paymentFrequency.disabled,prevent:r.value.paymentFrequency.prevent?"请先选择主险交费方式":"",options:N(v)},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),u(null===(X=e.originData)||void 0===X||null===(Z=X.riskInsureLimitVO)||void 0===Z?void 0:Z.annuityDrawValueList)?J("",!0):(_(),M(pe,{key:7,modelValue:N(d).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>N(d).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate"},{input:R((()=>{var i;return[A("div",ai,[s(se,{modelValue:N(d).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>N(d).formInfo.annuityDrawDate=e),options:m(N(ye),(null===(i=e.originData.riskInsureLimitVO)||void 0===i?void 0:i.annuityDrawValueList)||[])},null,8,["modelValue","options"])])]})),_:1},8,["modelValue"])),u(null===(Q=e.originData)||void 0===Q||null===(ae=Q.riskInsureLimitVO)||void 0===ae?void 0:ae.annuityDrawFrequencyList)?J("",!0):(_(),M(pe,{key:8,modelValue:N(d).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>N(d).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType"},{input:R((()=>{var i;return[A("div",oi,[s(se,{modelValue:N(d).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>N(d).formInfo.annuityDrawType=e),options:m(N(ke),(null===(i=e.originData.riskInsureLimitVO)||void 0===i?void 0:i.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])])]})),_:1},8,["modelValue"])),(_(!0),O(P,null,T(e.originData.riskLiabilityInfoVOList||[],((i,a)=>(_(),O(P,{key:a},[1!==i.optionalFlag||u(i.liabilityAttributeValueList)?J("",!0):(_(),M(ne,{key:0,modelValue:N(d).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>N(d).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:R((()=>{var o,t;return[A("div",null,[u(i.liabilityAttributeValueList)?(_(),O("span",ti,"50万")):(_(),O("div",li,[s(se,{modelValue:N(d).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>N(d).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:m(N(he),null===(o=e.originData.riskLiabilityInfoVOList)||void 0===o||null===(t=o[a])||void 0===t?void 0:t.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"])]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])),1!==i.optionalFlag?(_(),M(ne,{key:1,modelValue:N(d).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>N(d).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:R((()=>{var o,t;return[A("div",null,[u(i.liabilityAttributeValueList)?(_(),M(se,{key:0,modelValue:N(d).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>N(d).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:N(Ve)},null,8,["modelValue","onUpdate:modelValue","options"])):(_(),M(se,{key:1,modelValue:N(d).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>N(d).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:m(N(he),null===(o=e.originData.riskLiabilityInfoVOList)||void 0===o||null===(t=o[a])||void 0===t?void 0:t.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]})),_:2},1032,["modelValue","onUpdate:modelValue","label"])):J("",!0)],64)))),128)),null!==(oe=e.originData)&&void 0!==oe&&oe.relationDesc?(_(),O("div",ri,[s(Be,{title:"责任投保说明"},{default:R((()=>[A("div",null,U(e.originData.relationDesc),1)])),_:1})])):J("",!0)])}}});var di=C(ni,[["__scopeId","data-v-3b9c2786"]]);const si={class:"risk-list-wrapper"},ui={key:0,class:"add-rider-risk"},mi={class:"left-part"},pi=(e=>(B("data-v-4b309d85"),e=e(),G(),e))((()=>A("span",{class:"btn-plus"},"+",-1))),ci=q(" 附加险"),vi=a({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(e){const i=e,a=K("source")||{},[t,l]=H(!1);o(null),o(null);const r=w({mainRiskInfo:i.riskInfo,riskInfo:i.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),d=(e,i)=>{r.currentRiskList=r.currentRiskList.concat(e),r.disabledList=i},u=e=>{pe.confirm({message:"确定要删除附加险么？",confirmButtonText:"删除"}).then((()=>{var i;const a=[e];((null===(i=r.mainRiskData)||void 0===i?void 0:i.collocationVOList)||[]).forEach((i=>{e!==i.riskId||2!==i.collocationType&&3!==i.collocationType||a.push(i.collocationRiskId)})),r.checkedList=r.checkedList.filter((e=>!a.includes(e))),r.currentRiskList=r.currentRiskList.filter((e=>!a.includes(e.id)||(Object.assign(r.riskInfo,{[e.id]:void 0}),!1))),r.disabledList=r.disabledList.filter((e=>!a.includes(e)))})).catch((()=>{}))},m=(e,i)=>{var a,o;const t=((null===(a=r.riskInfo)||void 0===a||null===(o=a[i])||void 0===o?void 0:o.liabilityVOList)||[]).find((i=>i.liabilityCode===e.liabilityCode));return t?t.liabilityAttributeValue?t.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return n((()=>r.currentRiskList),(e=>{const a=[r.mainRiskData,...e];let o=[],t=[];const l=[];a.forEach(((e,i)=>{var a,r,n;const d=(null==e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.riskFactorRelationList)||[];o=o.concat(d.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),t=t.concat(d.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),l.push(null==e||null===(r=e.riskInsureLimitVO)||void 0===r?void 0:r.minHolderAge,null==e||null===(n=e.riskInsureLimitVO)||void 0===n?void 0:n.maxHolderAge)})),(e||[]).forEach((e=>{var a,o;const t={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,riskName:e.riskName,mainRiskCode:1!==e.riskType?null===(a=r.mainRiskData)||void 0===a?void 0:a.riskCode:void 0,mainRiskId:1!==e.riskType?null===(o=r.mainRiskData)||void 0===o?void 0:o.id:void 0,riskCategory:e.riskCategory,exemptFlag:i.originData.exemptFlag,exemptType:i.originData.exemptType,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((i=>({...i,liabilityAttributeCode:i.liabilityAttributeType,liabilityCode:i.liabilityCode,liabilityRateType:i.liabilityRateType,liabilityAttributeValue:m(i,e.id)})))};r.riskInfo[e.id]||Object.assign(r.riskInfo,{[e.id]:t})})),i.pickFactor({insuredFactorList:[...new Set(o)],holderFactorList:[...new Set(t)],ageRange:l})}),{deep:!0,immediate:!0}),n((()=>i.riskInfo),(e=>{r.mainRiskInfo=Object.values(e||{}).find((e=>1===(null==e?void 0:e.riskType)))||{}}),{deep:!0,immediate:!0}),n((()=>i.originData),(e=>{let i=[];const o=[];"proposal"===a.origin&&"add"!==a.type&&"repeatAdd"!==a.type?((e||[]).forEach((e=>{1===e.riskType&&(r.mainRiskData=e),i.push(e)})),i=i.filter((e=>a.showRiskList.includes(e.id)))):(e||[]).forEach((e=>{1===e.riskType?(r.mainRiskData=e,i.push(e)):2===e.collocationType?i.push(e):o.push(e)})),r.riderRiskList=o,r.currentRiskList=i}),{deep:!0,immediate:!0}),(i,o)=>{var n,m,p;const c=ce;return _(),O("div",si,[(_(!0),O(P,null,T(N(r).currentRiskList,((i,a)=>(_(),M(di,{key:i.id,"form-info":N(r).riskInfo[i.id],index:a,enums:e.enums,"main-risk-data":N(r).mainRiskData,"main-risk-info":N(r).mainRiskInfo,"origin-data":i,"remove-risk":u,"remove-risk-list":N(r).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),(null===(n=N(r).riderRiskList)||void 0===n?void 0:n.length)-(null===(m=N(r).checkedList)||void 0===m?void 0:m.length)&&"proposal"!==N(a).origin?(_(),O("div",ui,[A("span",mi,U(`共有${N(r).riderRiskList.length-N(r).checkedList.length}款附加险可以添加`),1),s(c,{activated:"",class:"btn-rider-risk",onClick:o[0]||(o[0]=e=>N(l)(!0))},{default:R((()=>[pi,ci])),_:1})])):J("",!0),N(t)?(_(),M(Ne,{key:1,modelValue:N(r).checkedList,"onUpdate:modelValue":o[1]||(o[1]=e=>N(r).checkedList=e),show:N(t),disabled:N(r).disabledList,"risk-list":N(r).riderRiskList,"collocation-list":(null===(p=N(r).mainRiskData)||void 0===p?void 0:p.collocationVOList)||[],onFinished:d,onClose:o[2]||(o[2]=e=>N(l)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):J("",!0)])}}});e("a",C(vi,[["__scopeId","data-v-4b309d85"]]))}}}))}();

import{a$ as e,y as a,C as t,aQ as r,Z as n,$ as o,aR as i,S as l,G as s,d as u,c as d,A as c,E as m,a5 as p,b0 as f,aS as v,z as N,L as y,R as b,a1 as h,e as C,ao as g,w as A,i as E,g as O,V as I,k as T,as as V,at as _,f as S,a9 as w,aM as $,az as P,F as R,b1 as M,b2 as x,aP as D,an as k,j as B,b3 as L,b4 as j,aa as F}from"./index-92579fc8.js";import{s as H}from"./phoneVerify-977dc10c.js";import{s as Z,u as U,a as z,g as G,c as K,k as Y,d as q,m as W,v as X,l as J,p as Q,h as ee,w as ae,x as te,q as re,S as ne,y as oe,z as ie}from"./_initCloneObject-0663309f.js";import{i as le,b as se,a as ue}from"./isObjectLike-a9798079.js";const de=async({mobile:e},a)=>{const t=await H(e),{code:r}=t;"10000"===r&&"function"==typeof a&&a()},ce="ProFieldV2",me="ProDatePickerV2",pe="ProPickerV2",fe="ProRadioV2",ve="ProCheckboxV2",Ne="ProSwitchV2",ye="ProCascaderV2",be="ProBank",he="ProAddress",Ce="ProUploadV2",ge="ProStepperV2",Ae="ProSMSCode",Ee="ProOccupation",Oe="ProIDCardUploadV2",Ie=18,Te=20,Ve=50,_e="name",Se="external",we="email",$e="zipCode",Pe="tel",Re="mobile",Me="zhCN",xe="notZhCN",De="normalChar",ke="alphabetNumber",Be="cert",Le="houseHold",je="birth",Fe="passport",He="otherCert",Ze="militaryCard",Ue="solider",ze="hongkongMacao",Ge="taiwanTravel",Ke="foreignPermanent",Ye="HKMacaoResidencePermit",qe="taiwanResidencePermit",We="socialCreditCode",Xe="OCC",Je="businessLicense",Qe="bandCard",ea={NAME:{maxlength:25,ruleType:_e},MOBILE:{type:"digit",ruleType:Re,maxlength:11},AGE:{type:"digit",maxlength:3},HEIGHT_WEIGHT:{type:"number",precision:1,maxlength:5},INCOME:{type:"number",precision:2,unit:"万元",isPrecisionCompleted:!0},ZIP_CODE:{type:"digit",ruleType:$e,maxlength:6},CONTENT:{maxlength:200},GAS_NUMBER:{maxlength:Te},BANK:{type:"digit",maxlength:Te},ADDRESS:{dictCode:e.NATIONAL_REGION_CODE,customFieldName:{text:"name",value:"code",children:"children"}},COUNTRY:{dictCode:e.NATIONALITY,customFieldName:{text:"name",value:"code",children:"children"}}},aa=[{code:"input",name:"单行文本",value:1,componentName:ce},{code:"textarea",name:"多行文本",value:2,type:"textarea",componentName:ce},{code:"number",name:"数字输入框",value:3,componentName:ce},{code:"date",name:"日期",value:4,componentName:me},{code:"select",name:"下拉框",value:5,componentName:pe},{code:"radio",name:"单选框",value:6,componentName:fe},{code:"checkbox",name:"多选框",value:7,componentName:ve},{code:"switch",name:"switch开关",value:8,componentName:Ne},{code:"cascader",name:"级联选择",value:9,componentName:ye},{code:"bank",name:"银行卡",value:10,componentName:be},{code:"address",name:"地址",value:11,componentName:he},{code:"upload",name:"文件上传",value:12,componentName:Ce},{code:"stepper",name:"步进器",value:13,componentName:ge}],ta={BANK_CARD_NO:"bankCardNo",ACCOUNT_NAME:"accountName",PAY_BANK:"payBank",BANK_CARD_IMAGE:"bankCardImage",MOBILE:"mobile",VERIFICATION_CODE:"verificationCode"};Object.values(ta);const ra={bankCardNo:{...ea.BANK,name:ta.BANK_CARD_NO,componentName:ce},accountName:{...ea.NAME,name:ta.ACCOUNT_NAME,componentName:ce},payBank:{name:ta.PAY_BANK,dictCode:e.BANK,componentName:pe},bankCardImage:{maxCount:2,subLabel:"（需上传正反两面）",name:ta.BANK_CARD_IMAGE,componentName:Ce},mobile:{...ea.MOBILE,name:ta.MOBILE,componentName:ce},verificationCode:{...ea.ZIP_CODE,sendSMSCode:de,name:ta.VERIFICATION_CODE,relatedName:ta.MOBILE,componentName:Ae}},na={certType:{[t.CERT]:[Be],[t.HOUSE_HOLD]:[Le],[t.MILITARY_CARD]:[Ze],[t.PASSPORT]:[Fe],[t.HONGKONG_MACAO]:[ze],[t.OTHER]:[He],[t.SOLIDER]:[Ue],[t.BIRTH]:[je],[t.TAIWAN_TRAVEL]:[Ge],[t.FOREIGN_PERMANENT]:[Ke],[t.HK_MACAO_RESIDENCE_PERMIT]:[Ye],[t.TAIWAN_RESIDENCE_PERMIT]:[qe],[t.SOCIAL_CREDIT_CODE]:[We]}},oa={INSURE_AREA:"insureArea",RESIDENCE:"residence",LONG_AREA:"longArea",WORK_ADDRESS:"workAddress"};Object.values(oa);const ia=[{key:oa.INSURE_AREA},{key:oa.RESIDENCE},{key:oa.LONG_AREA},{key:oa.WORK_ADDRESS}].reduce(((e,{key:a})=>(e[a]=ea.ADDRESS,e)),{}),la={name:ea.NAME,certNo:{relatedName:"certType",maxlength:Ie},certType:{relatedName:"certNo"},mobile:ea.MOBILE,age:ea.AGE,height:{...ea.HEIGHT_WEIGHT,unit:"cm"},weight:{...ea.HEIGHT_WEIGHT,unit:"kg"},email:{ruleType:we},personalAnnualIncome:ea.INCOME,familyAnnualIncome:ea.INCOME,workZipCode:ea.ZIP_CODE,homePostalCode:ea.ZIP_CODE,workContent:ea.CONTENT,gasNumberCollection:{...ea.GAS_NUMBER,ruleType:xe},verificationCode:{sendSMSCode:de,componentName:Ae,...ea.ZIP_CODE},...ia,nationalityCode:{...ea.COUNTRY},certEndDate:{minDate:new Date,maxDate:a().add(100,"year").toDate()},companyName:{maxlength:Ve},occupationCodeList:{componentName:Ee,dictCode:(sa=(window.location.search.match(/&insurerCode=([^&]*)&/)||[])[1]||"",(sa?`${sa.toUpperCase()}_`:"")+"OCCUPATION")},certImage:{componentName:Oe}};var sa;const ua=2,da={1:"holder",2:"insured",3:"beneficiary",4:"payInfo",5:"signInfo"},ca=Symbol("VAN_PRO_FORM_KEY"),ma=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/,pa=e=>{if(!ma.test(e))return!1;if(18!==e.length)return!1;const a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];let t=0;for(let o=0;o<17;o++)t+=e.substring(o,o+1)*a[o];const r=t%11,n=e.substring(17);return 2===r?"X"===n.toUpperCase():Number(n)===[1,0,10,9,8,7,6,5,4,3,2][r]},fa={isName:e=>/^[\u4e00-\u9fa5a-z].{0,23}[\u4e00-\u9fa5a-z]/i.test(e),isExternal:e=>/^(https?:|mailto:|tel:)/.test(e),isEmail:e=>/^[A-Za-z0-9]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(e),isZipCode:e=>/^[0-9]{6,6}$/.test(e),isTel:e=>/0\d{2,3}-\d{7,8}/.test(e),isPhone:e=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(e),isZhCN:e=>/^[\u4e00-\u9fa5]+$/.test(e),isNotZhCN:e=>/^[^\u4e00-\u9fa5]+$/.test(e),isCommonChar:e=>/^[\w_]{6,20}$/.test(e),isNormalChar:e=>/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(e),isAlphabetNumber:e=>/^[a-z0-9]+$/i.test(e),isAlphabetNumberOrSpecial:e=>/^[a-z0-9`~!@#$%^&*()_\-+=<>?:"{}|,./;'\\[\]·~！@#￥¥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]+$/i.test(e),isIdCardNo:e=>pa(e),isHouseHold:e=>pa(e),isBirthType:e=>/^[a-zA-Z]\d{9}$/.test(e),isPassword:e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,20}$/.test(e),isPassportType:e=>e.length>=5&&/^[^\u4e00-\u9fa5]+$/.test(e),isMilitaryCard:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isSolider:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isHongkongMacaoTravel:e=>/^[C]\d{8}$|^[C][a-hA-Hj-nJ-Np-zP-Z][0-9]{7}$/.test(e),isTaiwanTravel:e=>/^[L]\d{8}$/.test(e),isForeignPermanent:e=>/^[A-Z]{3}[0-9]{12}$/.test(e),isHKMacaoResidencePermit:e=>/^8[12]0000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isTaiwanResidencePermit:e=>/^830000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isUSCC:e=>/^[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}$/.test(e),isUSCCPolicy:e=>/^[A-Z0-9]{18}$/.test(e),isOCC:e=>/^[A-Z0-9]{8}-[A-Z0-9]{1}$/.test(e),isBusinessLicense:e=>/(^\d{15}$)|(^[A-Z0-9]{18}$)/.test(e),isBandcard:e=>/^\d{12,20}$/g.test(e),isOtherCert:e=>/^.{1,18}$/.test(e)},va={[_e]:[fa.isName],[Se]:[fa.isExternal],[we]:[fa.isEmail],[$e]:[fa.isZipCode],[Pe]:[fa.isTel],[Re]:[fa.isPhone],[Me]:[fa.isZhCN],[xe]:[fa.isNotZhCN],[De]:[fa.isNormalChar],[ke]:[fa.isAlphabetNumber],[Be]:[fa.isIdCardNo],[Le]:[fa.isHouseHold],[je]:[fa.isBirthType],[Fe]:[fa.isPassportType],[Ze]:[fa.isMilitaryCard],[Ue]:[fa.isSolider],[ze]:[fa.isHongkongMacaoTravel],[Ge]:[fa.isTaiwanTravel],[Ke]:[fa.isForeignPermanent],[Ye]:[fa.isHKMacaoResidencePermit],[qe]:[fa.isTaiwanResidencePermit],[We]:[fa.isUSCCPolicy],[Xe]:[fa.isOCC],[Je]:[fa.isBusinessLicense],[Qe]:[fa.isBandcard],[He]:[fa.isOtherCert]};function Na(e,a,t){(void 0!==t&&!Z(e[a],t)||void 0===t&&!(a in e))&&U(e,a,t)}var ya,ba=function(e,a,t){for(var r=-1,n=Object(e),o=t(e),i=o.length;i--;){var l=o[ya?i:++r];if(!1===a(n[l],l,n))break}return e};var ha=Function.prototype,Ca=Object.prototype,ga=ha.toString,Aa=Ca.hasOwnProperty,Ea=ga.call(Object);function Oa(e,a){if(("constructor"!==a||"function"!=typeof e[a])&&"__proto__"!=a)return e[a]}function Ia(e,a,t,r,n,o,i){var l=Oa(e,t),s=Oa(a,t),u=i.get(s);if(u)Na(e,t,u);else{var d,c=o?o(l,s,t+"",e,a,i):void 0,m=void 0===c;if(m){var p=q(s),f=!p&&W(s),v=!p&&!f&&X(s);c=s,p||f||v?q(l)?c=l:le(d=l)&&z(d)?c=J(l):f?(m=!1,c=Q(s,!0)):v?(m=!1,c=ee(s,!0)):c=[]:function(e){if(!le(e)||"[object Object]"!=se(e))return!1;var a=G(e);if(null===a)return!0;var t=Aa.call(a,"constructor")&&a.constructor;return"function"==typeof t&&t instanceof t&&ga.call(t)==Ea}(s)||ae(s)?(c=l,ae(l)?c=function(e){return K(e,Y(e))}(l):ue(l)&&!te(l)||(c=re(s))):m=!1}m&&(i.set(s,c),n(c,s,r,o,i),i.delete(s)),Na(e,t,c)}}function Ta(e,a,t,r,n){e!==a&&ba(a,(function(o,i){if(n||(n=new ne),ue(o))Ia(e,a,i,t,Ta,r,n);else{var l=r?r(Oa(e,i),o,i+"",e,a,n):void 0;void 0===l&&(l=o),Na(e,i,l)}}),Y)}function Va(e){return e}function _a(e,a,t){switch(t.length){case 0:return e.call(a);case 1:return e.call(a,t[0]);case 2:return e.call(a,t[0],t[1]);case 3:return e.call(a,t[0],t[1],t[2])}return e.apply(a,t)}var Sa=Math.max;var wa=oe?function(e,a){return oe(e,"toString",{configurable:!0,enumerable:!1,value:(t=a,function(){return t}),writable:!0});var t}:Va,$a=wa,Pa=Date.now;var Ra,Ma,xa,Da=(Ra=$a,Ma=0,xa=0,function(){var e=Pa(),a=16-(e-xa);if(xa=e,a>0){if(++Ma>=800)return arguments[0]}else Ma=0;return Ra.apply(void 0,arguments)});function ka(e,a){return Da(function(e,a,t){return a=Sa(void 0===a?e.length-1:a,0),function(){for(var r=arguments,n=-1,o=Sa(r.length-a,0),i=Array(o);++n<o;)i[n]=r[a+n];n=-1;for(var l=Array(a+1);++n<a;)l[n]=r[n];return l[a]=t(i),_a(e,this,l)}}(e,a,Va),e+"")}var Ba,La=(Ba=function(e,a,t){Ta(e,a,t)},ka((function(e,a){var t=-1,r=a.length,n=r>1?a[r-1]:void 0,o=r>2?a[2]:void 0;for(n=Ba.length>3&&"function"==typeof n?(r--,n):void 0,o&&function(e,a,t){if(!ue(t))return!1;var r=typeof a;return!!("number"==r?z(t)&&ie(a,t.length):"string"==r&&a in t)&&Z(t[a],e)}(a[0],a[1],o)&&(n=r<3?void 0:n,r=1),e=Object(e);++t<r;){var i=a[t];i&&Ba(e,i,t,n)}return e})));function ja(e){return null==e}const Fa=["v-model","label","name","id","type","size","maxlength","placeholder","border","disabled","readonly","colon","required","center","clearable","clear-icon","clear-trigger","clickable","is-link","autofocus","show-word-limit","error","error-message","error-message-align","formatter","format-trigger","arrow-direction","label-class","label-width","label-align","input-align","autosize","left-icon","right-icon","icon-prefix","rules","autocomplete","enterkeyhint","visible"],Ha=["label","input","left-icon","right-icon","button","error-message","extra","value-view"],Za={autocomplete:"off"},Ua=e=>console.log(`%c🔥 ${e}`,"color:#1989fa;background:#5e4;padding:3px 5px;"),za=e=>{const{trialFactorCodes:a,personVO:t}=e||{};return!r(a)||!a.some((e=>{const a=t[e];return ja(a)||""===a||Array.isArray(a)&&!a.length}))},Ga=(e,a,t)=>{var n;return t&&!r(a)?Promise.resolve():null==(n=e.value)?void 0:n.validate(t?a:void 0)},Ka=(e,a="children")=>r(e)?e.map((({[`${a}`]:e,...t})=>{const n={};return r(e)&&(n.children=Ka(e)),{...t,...n}})):[],Ya=(e,a=0,t="children")=>{const n=(e,o=1)=>r(e)?e.map((({[`${t}`]:e,...i})=>{const l={};return(!a||a&&a>o)&&r(e)&&(l.children=n(e,o+1)),{...i,...l}})):[];return n(e)},qa=(e,a,t={})=>{const n=Object.keys(e);return r(n)?n.reduce(((t,r)=>{const n=a.includes(r);return t[Number(!n)][r]=e[r],t}),[{...t},{}]):[{...t},{}]},Wa=e=>{if("certType"!==(null==e?void 0:e.name))return!1;const{columns:a,title:n}=e||{};return r(a)&&1===a.length&&a.findIndex((e=>e.code===t.CERT))>-1},Xa=(e,a)=>{let t=[];const o=[];return r(e)&&(t=e.map((e=>{const{code:a,name:t,value:r,componentName:l,...s}=aa.find((a=>`${a.value}`==`${e.displayType}`))||{};e.isCalculationFactor===n.YES&&o.push(e.code);const u={},{componentName:d,...c}=la[e.code]||{},m=d||l||"ProFieldV2";2===e.moduleType&&(u.isSelfInsuredNeed=e.isSelfInsuredNeed);const p={...s,...u,customFieldName:{text:"value",value:"code",children:"children"},label:e.title,name:e.code,componentName:m,required:1===e.isMustInput,nanoid:i(),...c},f={...p,attributeValueList:e.attributeValueList,columns:p.dictCode?[]:e.attributeValueList||[]};return Wa(f)&&(f.visible=!1),f}))),a.push(...o),{schema:t,trialFactorCodes:o}},Ja=(e,a={isTrial:!1})=>{const t={};if(!e)return t;const o=Object.keys(e)||[];if(!r(o))return t;const i=[],l={hasTrialFactorCodes:!1,isSpouseInsured:!1,multiInsuredSupportFlag:a.multiInsuredSupportFlag===n.YES,multiInsuredMaxNum:a.multiInsuredNum,multiInsuredMinNum:1,multiBeneficiaryMaxNum:a.multiBeneficiaryMaxNum||5},s=o.reduce(((t,n)=>(t[da[n]]=r(e[n])?e[n].filter((e=>{const{subModuleType:t,code:n,attributeValueList:o}=e;if(t===ua&&"relationToMainInsured"===n){r(o)&&1===o.length&&o.findIndex((e=>"2"===e.code))>-1&&Object.assign(l,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0})}return!a.isTrial||1===e.isCalculationFactor})):[],t)),{}),u=((e,a)=>{if(!r(e.insured))return[];const t=r(e.holder)?e.holder.map((e=>e.code)):[];return e.insured.reduce(((e,n)=>{const{code:o,subModuleType:i,attributeValueList:l}=n;return i===ua?("relationToMainInsured"===o&&r(l)&&1===l.length&&l.findIndex((e=>"2"===e.code))>-1&&Object.assign(a,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0}),e[1].push({...n,isSelfInsuredNeed:!t.includes(o)})):e[0].push({...n,isSelfInsuredNeed:!t.includes(o)}),e}),[[],[]]).filter((e=>r(e)))})(s,l),d=Object.keys(s).reduce(((e,t)=>{if("insured"!==t){const n=s[t],o="holder"===t;e[t]=Xa(o&&r(a.holderFactorCodes)?n.filter((e=>a.holderFactorCodes.includes(e.code))):n,i)}else e[t]=r(u)?u.map((e=>Xa(r(a.insuredFactorCodes)?e.filter((e=>a.insuredFactorCodes.includes(e.code))):e,i))):[];return e}),{});return d.config={...l,hasTrialFactorCodes:r(i)},d},Qa=(e=!1)=>a=>{if("string"==typeof a&&a){const t=["toLowerCase","toUpperCase"][Number(e)];return`${a[0][t]()}${a.substring(1)}`}return""},et=Qa(!0),at=Qa(),tt=(e,a={})=>Object.keys(e).reduce(((e,t)=>(e[a[t]||t]=t,e)),{}),rt=e=>{const a={gender:"",birthday:"",age:""};if("string"==typeof e&&e&&pa(e)){const t={15:[6,12],18:[6,14]};a.birthday=e.slice(...t[e.length]).replace(/(.{4})(.{2})/,"$1-$2-"),a.gender=[l.FEMALE,l.MALE][Number(e.slice(-2,-1))%2],a.age=a.birthday&&`${(e=>{const a=new Date,t=new Date(e);let r=a.getFullYear()-t.getFullYear();const n=a.getMonth()-t.getMonth();return(n<0||0===n&&a.getDate()<t.getDate())&&(r-=1),r})(a.birthday)}`}return a},nt=e=>{const a=![t.CERT,t.HOUSE_HOLD].includes(String(e));return{gender:{visible:a},birthday:{visible:a}}},ot={certNo:{onChangeEffect:(e,a)=>{Object.assign(a.formData,{certNo:"",gender:"",birthday:""}),o((()=>{La(a.config,nt(a.formData.certType))}))}},certType:{extraAttrs:{4:{maxlength:10}},onChangeEffect:(e,a)=>{if([t.CERT,t.HOUSE_HOLD].includes(String(a.formData.certType))){const t=rt(e);Object.assign(a.formData,t)}}}};var it=function(e){return null==e};var lt=function(e){var a=typeof e;return null!=e&&("object"==a||"function"==a)};const st={class:"value-view-wrap"};var ut=s(u({__name:"ValueView",props:{value:{type:String,default:""},isView:{type:Boolean,default:!1}},setup:e=>(a,t)=>(d(),c("span",st,m(e.value||"-"),1))}),[["__scopeId","data-v-505dc7b6"]]);const dt={class:"com-van-field-unit"},ct=u({inheritAttrs:!1,__name:"ProFieldV2",props:{ruleType:{type:String,default:""},modelValue:{type:[String,Number,Object,Array,Boolean],default:""},isView:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:Array,default:()=>[]},relatedName:{type:String,default:""},precision:{type:Number,default:0},isPrecisionCompleted:{type:Boolean,default:!1},unit:{type:String,default:""}},emits:["update:model-value","blur"],setup(e,{emit:a}){const t=e,n=p(),o=f(),{formState:i,markRequired:l}=v(ca)||{},s=N({modelValue:""}),u=y((()=>{const e=tt(o,n.slots),{extra:a,...r}=e;return t.unit?r:e})),c=y((()=>n.placeholder||`请输入${n.label||""}`)),P=y((()=>`${s.modelValue||""}`)),R=y((()=>{var e,a;if(t.ruleType)return t.ruleType;if(t.relatedName){const r=null==(e=null==i?void 0:i.formData)?void 0:e[t.relatedName];if(r)return null==(a=na[t.relatedName])?void 0:a[r]}return""})),M=e=>it(e)||""===e||Array.isArray(e)&&!e.length||lt(e)&&Object.keys(e).some((e=>M(e))),x=y((()=>r(t.rules)?t.rules:[{required:t.required,validator:e=>{if(t.required&&M(e))return n.placeholder;if(R.value){const[a]=va[R.value]||[];if("function"!=typeof a)return console.warn(`%c 字段 ${n.label} 的规则 ${R} 校验函数不存在，请先确认～`,"color: #3e7;"),"";if(!a(e))return`请输入正确的${n.label}`}return""}}])),D=y((()=>"number"===n.type&&t.precision)),k=e=>D.value&&e?e.replace(/^(0)\d+$/g,"$1").replace(new RegExp(`^(\\d+\\.\\d{${t.precision}})\\d+$`,"g"),"$1"):e,B=y((()=>{var e;if(t.relatedName){const{extraAttrs:a}=ot[t.relatedName]||{},r=null==(e=null==i?void 0:i.formData)?void 0:e[t.relatedName];if(a&&!it(r)&&""!==r)return a[r]||{}}return{}})),L=(e,a)=>{if(t.relatedName&&e){const r=(ot[t.relatedName]||{})[`${e}Effect`];"function"==typeof r&&r(a,i)}},j=e=>{L("onChange",e),s.modelValue=e,a("update:model-value",e)},F=e=>{let r=s.modelValue;D.value&&r&&t.isPrecisionCompleted&&(r=Number(r).toFixed(t.precision),j(r)),L("onBlur",r),a("blur",e)};return b((()=>t.modelValue),(e=>{s.modelValue=e}),{immediate:!0,deep:!0}),b((()=>{var e;return null==(e=null==i?void 0:i.formData)?void 0:e[n.name]}),(e=>{s.modelValue=e}),{immediate:!0,deep:!0}),h((()=>{n.name&&(null==i?void 0:i.nameList)&&i.nameList.push(n.name)})),(a,t)=>{const r=$;return d(),C(r,w({"model-value":O(s).modelValue,class:`com-van-field ${O(l)?"":"field-mark--hidden"} ${!1===O(n).visible?"com-van-field--hidden":""}`,autocomplete:"off",formatter:k},{maxlength:25,...a.$attrs,placeholder:O(c),required:e.required,rules:O(x),...O(B)},{onBlur:F,"onUpdate:modelValue":j}),g({_:2},[e.isView?{name:"input",fn:A((()=>[E(ut,{value:O(P)},null,8,["value"])])),key:"0"}:void 0,I(Object.keys(O(u)),(e=>({name:e,fn:A((t=>{var r;return[T(a.$slots,null==(r=O(u))?void 0:r[e],V(_(t||{})))]}))}))),e.unit?{name:"extra",fn:A((()=>[S("div",dt,m(e.unit),1)])),key:"1"}:void 0]),1040,["model-value","class"])}}}),mt={input:"请输入",select:"请选择"};function pt({placeholderType:e}={placeholderType:"select"}){const a=p(),t=f(),r=N({filedAttrs:{},filedSlots:{},attrs:{},slots:{}});return b((()=>a),(()=>{const[t,n]=(e=>qa(e,Fa,Za))(a);r.filedAttrs={...t,placeholder:a.placeholder||`${mt[e]}${a.label||""}`},r.attrs={title:`请选择${t.label}`,...n}}),{deep:!0,immediate:!0}),b([()=>t,()=>a.slots],(e=>{const[n,o]=(e=>qa(e,Ha))(tt(t,a.slots));r.filedSlots=n||{},r.slots=o||{}}),{deep:!0,immediate:!0}),r}const ft={class:"custom-input-wrap"},vt={key:1,class:"placeholder"},Nt=u({inheritAttrs:!1,__name:"CustomInput",props:{fieldValueView:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const a=e;return p(),v(ca),P((()=>a.modelValue)),(a,t)=>(d(),c("div",ft,[e.fieldValueView||e.isView?T(a.$slots,"value-view",{key:0,value:e.fieldValueView},(()=>[E(ut,{value:e.fieldValueView},null,8,["value"])])):(d(),c("span",vt,m(a.$attrs.placeholder),1))]))}});const yt=u({name:"ProFormItem"}),bt=u({...yt,props:{fieldValueView:{type:String,default:""},name:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const a=f(),t=y((()=>Object.keys(a).filter((e=>"value-view"!==e))));return(a,r)=>(d(),C(ct,{class:R({"com-form-item":!0,"com-form-item--view":e.isView}),"is-link":!e.isView},g({input:A((()=>[E(Nt,{name:e.name,"model-value":e.modelValue,"is-view":e.isView,"field-value-view":e.fieldValueView,placeholder:a.$attrs.placeholder},{"value-view":A((e=>[T(a.$slots,"value-view",V(_(e||{})))])),_:3},8,["name","model-value","is-view","field-value-view","placeholder"])])),_:2},[I(O(t),(e=>({name:e,fn:A((t=>[T(a.$slots,e,V(_(t||{})))]))})))]),1032,["class","is-link"]))}});const ht={class:"sub-label"},Ct={class:"com-image-upload"},gt={class:"upload-item"};var At=s(u({__name:"ProUploadV2",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},subLabel:{type:String,default:""},uploadType:{type:String,default:M.OTHER},category:{type:Number,default:x.OTHER},objectType:{type:Number,default:D.HOLDER},isView:{type:Boolean,default:!1}},emits:["update:modelValue","onUploaded"],setup(e,{emit:a}){const t=e,{filedAttrs:r,filedSlots:n,attrs:o,slots:i}=k(pt()),{formState:l,objectType:s}=v(ca)||{},u=y((()=>Object.keys(i).filter((e=>"default"!==e)))),c=N({modelValue:[]}),p=y((()=>(c.modelValue||[]).map((({url:e})=>({url:e})))));P((()=>c.modelValue));const f=e=>{L(e.file,t.uploadType).then((e=>{const{code:r,data:n}=e||{};"10000"===r&&n.url&&(c.modelValue.push({url:n.url,category:t.category,objectType:t.objectType||s}),a("onUploaded",n))}))},h=(e,a)=>{const{index:t}=a;c.modelValue.splice(t,1)};return b((()=>c.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),b((()=>t.modelValue),(e=>{Array.isArray(c.modelValue)&&(c.modelValue=e)}),{deep:!0,immediate:!0}),(a,t)=>{const n=j,o=bt;return d(),C(o,{class:R({"com-van-upload-wrap":!0,"com-van-upload-wrap-view":e.isView}),"model-value":O(c).modelValue},g({input:A((()=>[S("div",Ct,[E(n,{"model-value":O(p),"after-read":f,"max-count":e.maxCount,"before-delete":h,disabled:e.isView},g({default:A((()=>[T(a.$slots,"default",{},(()=>[S("div",gt,[E(F,{name:"image-upload",class:"icon"})])]),!0)])),_:2},[I(O(u),(e=>({name:e,fn:A((t=>[T(a.$slots,e,V(_(t||{})),void 0,!0)]))})))]),1032,["model-value","max-count","disabled"])])])),_:2},[e.subLabel?{name:"label",fn:A((()=>[B(m(O(r).label),1),S("span",ht,m(e.subLabel),1)])),key:"0"}:void 0]),1032,["class","model-value"])}}}),[["__scopeId","data-v-29c0026a"]]);export{ra as P,ca as V,ct as _,Ga as a,ja as b,Ua as c,ut as d,Ka as e,bt as f,nt as g,Ya as h,Wa as i,et as j,At as k,at as l,La as m,ot as r,Ja as t,pt as u,za as v};

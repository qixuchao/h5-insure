import{_ as e,d as a,cq as t,i as s,h as r,ag as o,j as c,aG as i,o as n,c as d,a as l,u as p,F as u,b as y,f,m as v,w as m,a8 as N,cz as b,cA as T,ae as h,ai as j,aE as I,aF as g}from"./index-674cff0a.js";import{P as w}from"./constants-4b08cf92.js";const C=e=>(I("data-v-016d4863"),e=e(),g(),e),_={class:"page-verify-face"},q={class:"result-content"},z=C((()=>l("h4",null,"人脸识别验证失败",-1))),F=C((()=>l("p",{class:"desc"},"请保持在检测框内",-1))),k={class:"operate-btn"},x={key:1},E=a({name:"verifyFace"});var P=e(a({...E,setup(e){const a=t(),I=s(),g=r(),{isFirst:C,tenantId:E,objectType:P,orderNo:U,biz_id:S,nextPageCode:A}=I.query,L=a.get(`${o}_orderDetail`),$=c(),D=c(!0),G=()=>{const{userName:e,certiNo:a,certType:t}=$.value,s={tenantId:E,faceAuthMode:"TENCENT",callbackUrl:window.location.href.replace("isFirst=1","isFirst=0"),bizNo:U,userName:e,certiNo:a,certType:t};b(s).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))};return i((()=>{const{holder:e,insuredList:a}=L;if("holder"===P){const{name:a,certNo:t,certType:s,id:r}=e;$.value={userName:a,certiNo:t,certType:s,objectId:r}}else{const{name:e,certNo:t,certType:s,id:r}=(null==a?void 0:a[0])||{};$.value={userName:e,certiNo:t,certType:s,objectId:r}}"1"===C&&G(),S&&(()=>{const{userName:e,objectId:a,certType:t}=$.value,s={bizId:S,certType:t,objectId:a,objectType:`${P}`.toLocaleUpperCase(),orderNo:U,tenantId:E};T(s).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status?(delete I.query.biz_id,delete I.query.nextPageCode,g.push({path:w.infoPreview,query:I.query})):D.value=!1}))})()})),(e,a)=>{const t=h,s=j;return n(),d("div",_,[l("div",q,[p(D)?f("",!0):(n(),d(u,{key:0},[y(t,{name:"wrong","font-size":"52px",color:"var(--van-primary-color)"}),z],64)),F]),l("div",k,[p(D)?(n(),d("span",x,"人脸识别中...")):(n(),v(s,{key:0,type:"primary",onClick:G},{default:m((()=>[N("再试一次")])),_:1}))])])}}}),[["__scopeId","data-v-016d4863"]]);export{P as default};

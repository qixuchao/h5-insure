!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.page-trial-wrapper[data-v-ed02a4de]{background-color:#f2f5fc}.page-trial-wrapper .part-card[data-v-ed02a4de]{background-color:#fff;margin-bottom:.26667rem}.page-trial-wrapper .risk-content[data-v-ed02a4de] .van-collapse-item__title--expanded{padding:0 .4rem 0 0;display:flex;align-items:center}.page-trial-wrapper .risk-content[data-v-ed02a4de] .van-collapse-item__content{padding:0}.page-trial-wrapper .plan-risk[data-v-ed02a4de] .van-tabs__line{display:none}.page-trial-wrapper .footer-bar[data-v-ed02a4de]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:.4rem;display:flex;justify-content:space-between;align-items:center;border-top:1px solid #efeff4}.page-trial-wrapper .footer-bar .trial-result[data-v-ed02a4de]{width:5.86667rem;color:#ff5840;font-size:.32rem;font-weight:600}.page-trial-wrapper .footer-bar .trial-result .result-num[data-v-ed02a4de]{font-size:.61333rem;font-weight:500;margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate button[data-v-ed02a4de]{width:3.73333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-ed02a4de]{position:absolute;z-index:122;height:.56rem;border-radius:1.33333rem;background-color:#ff5840;font-size:.34667rem;font-family:PingFangSC-Regular,PingFang SC,sans-serif;font-weight:400;color:#fff;line-height:.49333rem;padding:.04rem .28rem .02667rem .26667rem;right:.4rem;top:-.46667rem;display:flex;align-items:center}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip .close-icon[data-v-ed02a4de]{margin-left:.17333rem}.page-trial-wrapper .footer-bar .trial-operate .retrial-tip[data-v-ed02a4de]:after{content:" ";position:absolute;z-index:11;width:0;height:0;border:.13333rem solid transparent;border-top:.13333rem solid #ff5840;border-right:.13333rem solid #ff5840;right:.49333rem;bottom:-.16rem}\n',document.head.appendChild(e),System.register(["./vendor-legacy-7d0032ff.js","./index-legacy-51e49526.js","./trial-legacy-21c07e69.js","./index-legacy-5b2e37da.js","./useStorage-legacy-486b044b.js","./index-legacy-264a62e0.js","./trial-legacy-53b10c6d.js"],(function(e){"use strict";var a,r,t,i,n,l,o,s,d,u,c,p,f,g,m,v,k,y,h,b,V,O,P,L,C,_,R,I,T,F,w,D;return{setters:[function(e){a=e.g,r=e.af,t=e.Q,i=e.C,n=e.L,l=e.a3,o=e.X,s=e.o,d=e.r,u=e.h,c=e.j,p=e.k,f=e.z,g=e.m,m=e.n,v=e.s,k=e.y,y=e.F,h=e.E,b=e.I,V=e.B},function(e){O=e.P,P=e.R},function(e){L=e.i,C=e.p},function(e){_=e.n,R=e.g},function(e){I=e.u},function(e){T=e._,F=e.P},function(e){w=e.P,D=e.I}],execute:function(){const j={key:0,class:"part-card"},x={key:1,class:"part-card"},A={class:"risk-content"},N={key:0,class:"risk"},B={key:1,class:"plan-risk"},S={class:"footer-bar"},E={class:"trial-result"},z={class:"result-num"},q=V(" 元起 "),U={class:"trial-operate"},M={key:0,class:"retrial-tip"},H=V(" 条件更改后，需要重新试算 "),J=V("去试算"),K=V("立即投保"),X=a({setup(e){const a=r(),V=t(),{productCode:T="MMBBSF",templateId:X=1,agentCode:$="test",agencyCode:Q="",tenantId:W=9991000007,venderCode:Y="99"}=V.query,G=i({personVO:{}}),Z=i({insuredCode:"",personVO:{}}),ee=i({}),ae=i({}),re=i({}),te=i({}),ie=i({}),ne=n({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0,retrialTip:!1,enumList:{},ageRange:[],collapseName:["1"],insuredRiskList:[]});l("premium",ie.value),l("source",""),I().get("userInfo");const le="premiumTrial",oe=()=>{ne.retrialTip=!1},se=()=>{_({agencyId:Q,saleUserId:$,tenantId:W,venderCode:Y,orderDataSource:1,pageCode:le,extInfo:{templateId:+(X||1),pageCode:le},tenantOrderHolder:{},tenantOrderInsuredList:[{tenantOrderProductList:[{productCode:ne.riskBaseInfo.productCode||"",productName:ne.riskBaseInfo.productName||"",premium:ne.trialResult.premium||0,tenantOrderRiskList:ne.insuredRiskList}]}]}).then((({code:e,data:r})=>{"10000"===e&&"jumpToPage"===r.pageAction.pageAction&&a.push({path:F[r.pageAction.data.nextPageCode],query:{...V.query,orderNo:r.pageAction.data.orderNo}})}))},de=()=>{const e=JSON.parse(JSON.stringify(ee.value[ne.currentPlan])),a=Object.values(e.riderRiskVOList).map((e=>{const a=e;if("3"===a.chargePeriod){const e=(ee.value[ne.currentPlan].chargePeriod||"").split("_");e[1]&&(e[1]-=1),a.chargePeriod=e.join("_")}return a.liabilityVOList=(a.liabilityVOList||[]).filter((e=>e.liabilityAttributeValue&&"-1"!==e.liabilityAttributeValue)).map((e=>{const a=e;return"0"===a.liabilityAttributeValue&&(a.liabilityAttributeValue=""),a})),a}));e.liabilityVOList=e.liabilityVOList.filter((e=>!["-1"].includes(e.liabilityAttributeValue))).map((e=>{const a=e;return"0"===a.liabilityAttributeValue&&(a.liabilityAttributeValue=""),a}));const r={holder:{personVO:{...G.value.personVO,birthday:G.value.personVO.birthday?`${G.value.personVO.birthday} 00:00:00`:""}},productCode:ne.riskBaseInfo.productCode,insuredVOList:[{...Z.value,personVO:{...Z.value.personVO,birthday:Z.value.personVO.birthday&&`${Z.value.personVO.birthday} 00:00:00`},productPlanVOList:[{planCode:ne.currentPlan||"",riskVOList:[{...e,riderRiskVOList:a}]}]}]};C({...r}).then((({code:e,data:a})=>{if("10000"===e){ne.retrialTip=!1,ne.trialResult=a,ne.canTrial=!1;const e={},t=(a=[])=>{a.forEach((a=>{var r;e[a.riskCode]=a,null!==(r=a.riskPremiumDetailVOList)&&void 0!==r&&r.length&&t(a.riskPremiumDetailVOList)}))};t(a.riskPremiumDetailVOList),((e,a)=>{const r=[],t=e=>{e.forEach((e=>{var i,n,l;const o={initialAmount:null===(i=a[e.riskCode])||void 0===i?void 0:i.amount,paymentFrequency:e.paymentFrequency,paymentPeriod:e.chargePeriod.split("_")[1],paymentPeriodType:w[e.chargePeriod.split("_")[0]],insurancePeriodType:D[e.coveragePeriod.split("_")[0]],insurancePeriodValue:e.coveragePeriod.split("_")[1],riskCode:e.riskCode,riskType:e.riskType,initialPremium:null===(n=a[e.riskCode])||void 0===n?void 0:n.premium};r.push(o),null!==(l=e.riderRiskVOList)&&void 0!==l&&l.length&&t(e.riderRiskVOList)}))};t(e),ne.insuredRiskList=r})(r.insuredVOList[0].productPlanVOList[0].riskVOList,e),Object.assign(ie.value,e)}}))},ue=()=>{var e,a,r,t,i;Promise.all([null===(e=ae.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e),null===(r=re.value)||void 0===r||null===(t=r.validateForm)||void 0===t?void 0:t.call(r),null===(i=te.value)||void 0===i?void 0:i.validate()]).then((()=>{de()}))},ce=e=>{ne.holderFactor=e.holderFactorList,ne.insuredFactor=e.insuredFactorList,ne.ageRange=e.ageRange};return o([()=>ee.value,()=>G.value,()=>Z.value],(e=>{e&&!ne.canTrial&&(ne.canTrial=!0,ne.retrialTip=!0)}),{deep:!0}),s((()=>{L({productCode:T,source:1}).then((({code:e,data:a})=>{"10000"===e&&(ne.riskBaseInfo=null==a?void 0:a.productBasicInfoVO,((null==a?void 0:a.productRelationPlanVOList)||(null==a?void 0:a.riskDetailVOList)||[]).forEach(((e,a)=>{0===a&&(ne.currentPlan=e.planCode||"0"),Object.assign(ee.value,{[e.planCode||a]:{liabilityVOList:[],riderRiskVOList:{}}})})),ne.riskData=a.riskDetailVOList||[],ne.riskPlanData=a.productRelationPlanVOList||[])})).finally((()=>{})),R({dictCodeList:["RISK_PAYMENT_PERIOD","RISK_INSURANCE_PERIOD"]}).then((({code:e,data:a})=>{if("10000"===e){const e={};a.forEach((a=>{e[a.dictCode]=a.dictItemList})),ne.enumList=e}}))})),(e,a)=>{const r=d("ProTitle"),t=d("VanForm"),i=d("ProTabButton"),n=d("VanTab"),l=d("VanTabs"),o=d("van-collapse-item"),s=d("van-collapse"),V=d("VanButton"),L=d("ProPageWrap");return u(),c(L,{class:"page-trial-wrapper"},{default:p((()=>{var e,d,L;return[f(ne).holderFactor.length?(u(),g("div",j,[m(r,{title:"投保人"}),m(O,{ref_key:"holderRef",ref:ae,"insured-code":null===(e=f(ne).riskBaseInfo)||void 0===e?void 0:e.insurerCode,"form-info":G.value.personVO,"factor-list":f(ne).holderFactor,"age-range":f(ne).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):v("",!0),f(ne).insuredFactor.length?(u(),g("div",x,[m(r,{title:"被保人"}),m(O,{ref_key:"insuredRef",ref:re,"insured-code":null===(d=f(ne).riskBaseInfo)||void 0===d?void 0:d.insurerCode,"form-info":Z.value.personVO,"factor-list":f(ne).insuredFactor,"age-range":f(ne).ageRange},null,8,["insured-code","form-info","factor-list","age-range"])])):v("",!0),k("div",A,[m(s,{modelValue:f(ne).collapseName,"onUpdate:modelValue":a[1]||(a[1]=e=>f(ne).collapseName=e)},{default:p((()=>[m(o,{name:"1"},{title:p((()=>[m(r,{title:"投保方案"})])),default:p((()=>[f(ne).riskData.length?(u(),g("div",N,[m(t,{ref_key:"riskFormRef",ref:te,"input-align":"right","error-message-align":"right"},{default:p((()=>[m(P,{"risk-info":ee.value[0],enums:f(ne).enumList,"origin-data":f(ne).riskData,"pick-factor":ce},null,8,["risk-info","enums","origin-data"])])),_:1},512)])):v("",!0),f(ne).riskPlanData.length?(u(),g("div",B,[m(t,{ref_key:"riskFormRef",ref:te,"input-align":"right","error-message-align":"right"},{default:p((()=>[m(l,{active:f(ne).currentPlan,"onUpdate:active":a[0]||(a[0]=e=>f(ne).currentPlan=e)},{default:p((()=>[(u(!0),g(y,null,h(f(ne).riskPlanData,(e=>(u(),c(n,{key:e.planCode,name:e.planCode,title:e.planName},{title:p((()=>[m(i,{title:e.planName,active:f(ne).currentPlan===e.planCode},null,8,["title","active"])])),default:p((()=>[e.planCode===f(ne).currentPlan?(u(),c(P,{key:0,"risk-info":ee.value[e.planCode],enums:f(ne).enumList,"origin-data":e.riskDetailVOList,"pick-factor":ce},null,8,["risk-info","enums","origin-data"])):v("",!0)])),_:2},1032,["name","title"])))),128))])),_:1},8,["active"])])),_:1},512)])):v("",!0)])),_:1})])),_:1},8,["modelValue"])]),k("div",S,[k("span",E,[k("span",z,b((f(ne).retrialTip?"0":(null===(L=f(ne).trialResult)||void 0===L?void 0:L.premium)||"0").toLocaleString()),1),q]),k("div",U,[f(ne).retrialTip?(u(),g("div",M,[H,k("span",{class:"close-icon",onClick:oe},"X")])):v("",!0),f(ne).canTrial?(u(),c(V,{key:1,type:"primary",onClick:ue},{default:p((()=>[J])),_:1})):(u(),c(V,{key:2,type:"primary",onClick:se},{default:p((()=>[K])),_:1}))])])]})),_:1})}}});e("default",T(X,[["__scopeId","data-v-ed02a4de"]]))}}}))}();

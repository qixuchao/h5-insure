var X=Object.defineProperty;var L=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var J=(i,n,t)=>n in i?X(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t,j=(i,n)=>{for(var t in n||(n={}))H.call(n,t)&&J(i,t,n[t]);if(L)for(var t of L(n))K.call(n,t)&&J(i,t,n[t]);return i};import{g as N,Q as Y,C as F,X as Z,ag as ee,r as c,h as s,j as f,k as l,n as g,m as $,E as M,y as P,I as W,F as R,s as x,ah as te,z as h,B,T as ne,ak as oe,G as se,x as q,M as z,af as ue,L as re}from"./vendor-d47732e4.js";import{_ as O,h as ae,j as ie}from"./index-db87a2a1.js";import{w as le,n as ce}from"./pdf.worker.entry-a71eaebc.js";import{p as G}from"./pdf_viewer-d9329e60.js";import{a as de}from"./index-fe2b9b8d.js";import{g as pe,s as _e}from"./inform-0b497aca.js";import{s as me}from"./useStorage-7a965023.js";const fe={class:"problem"},ve={class:"footer-button"},ge=B("\u63D0\u4EA4"),ye=N({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const t=i,C=Y(),r=F([]),{questionnaireType:d}=C.query,E={"1":"\u6295\u4FDD\u4EBA","2":"\u88AB\u4FDD\u4EBA","3":"\u4EE3\u7406\u4EBA"},b=F([]),I=e=>{r.value[e].toggle()},p=e=>e?JSON.parse(e).map(u=>({title:u.value,value:u.uid})):[];Z(()=>t.currentPageInfo,e=>{b.value=e.map((u,_)=>u.questionType===2?j({multipleChoose:[]},u):j({singleAnswer:u.questionType===3?0:""},u))},{deep:!0,immediate:!0});const y=()=>{b.value.some(u=>{var _;return["undefined",""].includes(u.singleAnswer)||((_=u.multipleChoose)==null?void 0:_.length)===0})?ne("\u8BF7\u5B8C\u6210\u6240\u6709\u9898\u76EE\u8FDB\u884C\u4E0B\u4E00\u6B65"):n("onSubmitCurrentStatus",1,JSON.stringify(b.value))};return ee(()=>{r.value=[]}),(e,u)=>{const _=c("van-radio"),A=c("van-cell"),k=c("van-cell-group"),v=c("van-radio-group"),Q=c("van-checkbox"),a=c("van-checkbox-group"),w=c("van-field"),T=c("van-button"),S=c("ProPageWrap");return s(),f(S,{class:"com-question"},{default:l(()=>[g(ie,{title:`${E[h(d)]}\u5065\u5EB7\u544A\u77E5\u4E66`},{default:l(()=>[(s(!0),$(R,null,M(b.value,(o,V)=>(s(),$("div",{key:V,class:"question-item"},[P("div",fe,W(V+1)+". "+W(o.title),1),o.questionType===1?(s(),f(v,{key:0,modelValue:o.singleAnswer,"onUpdate:modelValue":m=>o.singleAnswer=m},{default:l(()=>[g(k,{inset:""},{default:l(()=>[(s(!0),$(R,null,M(p(o.options),(m,D)=>(s(),f(A,{key:D,title:m.title,clickable:"",onClick:U=>o.singleAnswer=D},{"right-icon":l(()=>[g(_,{name:D},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):x("",!0),o.questionType===2?(s(),f(a,{key:1,modelValue:o.multipleChoose,"onUpdate:modelValue":m=>o.multipleChoose=m},{default:l(()=>[g(k,{inset:""},{default:l(()=>[(s(!0),$(R,null,M(p(o.options),(m,D)=>(s(),f(A,{key:m.uid,clickable:"",title:m.title,onClick:U=>I(D)},{"right-icon":l(()=>[g(Q,{ref_for:!0,ref:U=>r.value[D]=U,shape:"square",name:D,onClick:u[0]||(u[0]=te(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])):x("",!0),o.questionType===3?(s(),f(ae,{key:2,modelValue:o.singleAnswer,"onUpdate:modelValue":m=>o.singleAnswer=m,options:[{label:"\u662F",value:"Y"},{label:"\u5426",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):x("",!0),o.questionType===4?(s(),f(k,{key:3,inset:""},{default:l(()=>[g(w,{modelValue:o.singleAnswer,"onUpdate:modelValue":m=>o.singleAnswer=m,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):x("",!0)]))),128))]),_:1},8,["title"]),P("div",ve,[g(T,{type:"primary",block:"",onClick:y},{default:l(()=>[ge]),_:1})])]),_:1})}}});var he=O(ye,[["__scopeId","data-v-03b9c164"]]);const Ce={class:"title"},be={class:"content"},ke={class:"footer-button"},Se=B("\u4E86\u89E3\u5E76\u7EE7\u7EED"),Ee=N({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const t=i;return(C,r)=>{const d=c("van-button"),E=c("ProPageWrap"),b=oe("dompurify-html");return s(),f(E,{class:"com-document"},{default:l(()=>{var I,p;return[P("div",Ce,W((I=t.currentPageInfo[0])==null?void 0:I.title),1),se(P("div",be,null,512),[[b,(p=t.currentPageInfo[0])==null?void 0:p.content]]),P("div",ke,[g(d,{type:"primary",onClick:r[0]||(r[0]=y=>n("onSubmitCurrentStatus",1))},{default:l(()=>[Se]),_:1})])]}),_:1})}}});var Ie=O(Ee,[["__scopeId","data-v-27a7d770"]]);const we={class:"com-pdf-viewer"},Te=["id","isee_pdf"],$e={class:"footer-button"},xe=B("\u90E8\u5206\u4E3A\u662F"),Pe=B("\u4EE5\u4E0A\u7686\u5426"),Ae=N({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const t=i;G.exports.GlobalWorkerOptions.workerSrc=le;const C=ce(),r=F(!1),d=F(!0),E=q(()=>["png","jpg","jpeg"].some(p=>t.url.includes(p))),b=()=>{const p=document.getElementById(C);if(p.hasChildNodes()){d.value=!1;return}G.exports.getDocument({url:t.url}).promise.then(e=>{const u=e.numPages;for(let _=1;_<=u;_++)e.getPage(_).then(A=>{const k=A.getViewport({scale:1}),v=document.createElement("canvas"),Q=v.getContext("2d");v.width=k.width,v.height=k.height,v.style.width="100%",p.append(v);const a={canvasContext:Q,viewport:k};A.render(a),d.value=!1})})},I=async()=>{r.value=!0,setTimeout(()=>{b()},0)};return z(()=>{I()}),(p,y)=>{const e=c("van-image"),u=c("van-button");return s(),$("div",we,[h(E)?(s(),f(e,{key:0,width:"100%",height:"80vh",fit:"contain",src:t.url},null,8,["src"])):(s(),$("div",{key:1,id:h(C),isee_pdf:p.pdfUrl,class:"pdf-wapper"},null,8,Te)),P("div",$e,[g(u,{plain:"",type:"primary",onClick:y[0]||(y[0]=_=>n("onSubmitCurrentStatus",2))},{default:l(()=>[xe]),_:1}),g(u,{type:"primary",onClick:y[1]||(y[1]=_=>n("onSubmitCurrentStatus",1))},{default:l(()=>[Pe]),_:1})])])}}});var Ve=O(Ae,[["__scopeId","data-v-4c70488e"]]);const De={class:"iframe-wrap"},Be=["src"],Qe={class:"footer-button"},qe=B("\u90E8\u5206\u4E3A\u662F"),Ne=B("\u4EE5\u4E0A\u7686\u5426"),Fe=N({props:{url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(i,{emit:n}){const t=i;return(C,r)=>{const d=c("van-button");return s(),$("div",De,[P("iframe",{src:t.url,frameborder:"0"},null,8,Be),P("div",Qe,[g(d,{plain:"",type:"primary",onClick:r[0]||(r[0]=E=>n("onSubmitCurrentStatus",2))},{default:l(()=>[qe]),_:1}),g(d,{type:"primary",onClick:r[1]||(r[1]=E=>n("onSubmitCurrentStatus",1))},{default:l(()=>[Ne]),_:1})])])}}});var Oe=O(Fe,[["__scopeId","data-v-1ac7e729"]]);const Ue={1:4,2:5,3:9},je={class:"com-health-notice"},Xe=N({setup(i){const n=ue(),t=Y(),C=me.get("questionData"),{questionnaireType:r}=t.query,{orderNo:d="2022021815432987130620",productCode:E="CQ75CQ76",templateId:b=1,agentCode:I="65434444",orderId:p=13005,tenantId:y=9991000007}=t.query,e=re({pageData:{},currentQuestionInfo:[]}),u=q(()=>r==="2"),_=q(()=>{var a;return r==="1"&&[1].includes((a=e.currentQuestionInfo[0])==null?void 0:a.textType)}),A=q(()=>{var a;return r==="1"&&[2].includes((a=e.currentQuestionInfo[0])==null?void 0:a.textType)}),k=q(()=>{var a;return r==="1"&&[3].includes((a=e.currentQuestionInfo[0])==null?void 0:a.textType)}),v=(a,w)=>{var o;const{id:T,objectType:S}=C;_e({content:w||((o=e.currentQuestionInfo[0])==null?void 0:o.content),contentType:r,isDone:a,noticeType:Ue[S],objectId:T,objectType:S,orderId:e.pageData.id,orderNo:d,tenantId:9991000007}).then(({code:V,data:m})=>{console.log(V),V==="10000"&&n.go(-1)})},Q=()=>{de({orderNo:d,saleUserId:I,tenantId:y}).then(({code:a,data:w})=>{a==="10000"&&Object.assign(e.pageData,w)})};return z(()=>{Q();const{insurerCode:a,id:w,objectType:T,productCategory:S}=C;pe({insurerCode:a,id:w,objectType:T,productCategory:S,orderNo:d,tenantId:y}).then(({code:o,data:V})=>{o==="10000"&&(e.currentQuestionInfo=V)})}),(a,w)=>{var T,S;return s(),$("div",je,[h(u)?(s(),f(he,{key:0,"current-page-info":h(e).currentQuestionInfo,onOnSubmitCurrentStatus:v},null,8,["current-page-info"])):x("",!0),h(A)?(s(),f(Ie,{key:1,"current-page-info":h(e).currentQuestionInfo,onOnSubmitCurrentStatus:v},null,8,["current-page-info"])):x("",!0),h(_)?(s(),f(Ve,{key:2,url:(T=h(e).currentQuestionInfo[0])==null?void 0:T.content,onOnSubmitCurrentStatus:v},null,8,["url"])):x("",!0),h(k)?(s(),f(Oe,{key:3,url:(S=h(e).currentQuestionInfo[0])==null?void 0:S.content,onOnSubmitCurrentStatus:v},null,8,["url"])):x("",!0)])}}});export{Xe as default};

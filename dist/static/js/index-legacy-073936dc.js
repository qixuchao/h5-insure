!function(){var e=document.createElement("style");e.innerHTML=".page-salesman-inform .van-cell[data-v-6f1bc28e]{display:flex;align-items:center;padding:.4rem 0}.page-salesman-inform .van-cell[data-v-6f1bc28e] .van-cell__title{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:var(--zaui-aide-text-stress, #0d6efe);line-height:.56rem}.page-salesman-inform .van-cell[data-v-6f1bc28e] .van-cell__value{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#99a9c0;line-height:.56rem}.page-salesman-inform .van-cell .active[data-v-6f1bc28e],.page-salesman-inform[data-v-6f1bc28e] .is-active .van-cell__value span{color:var(--van-primary-color, var(--zaui-brand))}.page-salesman-inform .resign[data-v-6f1bc28e]{font-size:.37333rem;color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .date[data-v-6f1bc28e]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-salesman-inform .inform-file[data-v-6f1bc28e]{display:flex;position:absolute;bottom:2.33333rem;padding:0 .4rem}.page-salesman-inform .inform-file .tips[data-v-6f1bc28e]{margin-left:.29333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#393d46;line-height:.53333rem}.page-salesman-inform .inform-file .tips>span[data-v-6f1bc28e]{color:var(--zaui-aide-text-stress, #0d6efe)}.page-salesman-inform .inform-file .next-btn[data-v-6f1bc28e]{padding:.4rem 0}.page-salesman-inform .inform-file .next-btn .van-button[data-v-6f1bc28e]{border-radius:.10667rem}\n",document.head.appendChild(e),System.register(["./index-legacy-fcf08e87.js","./inform-legacy-fdbf9dce.js","./verify-legacy-c3035bcd.js","./notice-legacy-6932be1e.js","./pdfh5-legacy-9f98dc45.js"],(function(e){"use strict";var a,t,n,i,o,l,r,s,c,d,u,f,g,p,v,m,y,h,b,C,T,x,_,k,j,D,I,L,q,N,P,S,z,F,A,E,w,M,R,B,G;return{setters:[function(e){a=e._,t=e.d,n=e.u,i=e.a,o=e.r,l=e.ac,r=e.J,s=e.G,c=e.C,d=e.v,u=e.b,f=e.c,g=e.e,p=e.w,v=e.f,m=e.g,y=e.h,h=e.L,b=e.m,C=e.F,T=e.P,x=e.i,_=e.t,k=e.a9,j=e.n,D=e.p,I=e.aj,L=e.ak,q=e.H,N=e.T,P=e.M,S=e.N,z=e.O,F=e.ae,A=e.B},function(e){E=e.l,w=e.g},function(e){M=e.s},function(e){R=e.d,B=e.A,G=e.e},function(){}],execute:function(){const Y={class:"date"},O={class:"inform-file"},U={class:"tips"},V=j(" 您的签名将被用于"),H=j("文件 "),$={class:"footer-button"},J=j("下一步"),W=t({setup(e){const a=n(),t=i(),{productCode:j="MMBBSF",agentCode:W="65434444",tenantId:K="9991000007",agencyCode:Q="3311222",insurerCode:X="zhongan",productCategory:Z=1,templateId:ee=1,orderNo:ae="2022080217103534947"}=t.query,te=o(null),ne=o(!1),ie=l().format("YYYY-MM-DD"),oe=o(""),le=o(),re=()=>{var e;null===(e=te.value)||void 0===e||e.clear()},se=r({noticeType:"",materialSource:"",noticeList:[],pageData:{}});s((()=>{D({orderNo:ae,saleUserId:W,tenantId:K}).then((({code:e,data:a})=>{"10000"===e&&(Object.assign(se.pageData,a),a.tenantOrderAttachmentList.forEach((e=>{e.category===I.ELECTRIC_SIGN&&e.objectType===L.AGENT&&te.value.setDataURL(e.fileBase64)})))})),E({insurerCode:X,orderNo:ae,productCategory:Z,tenantId:K,noticeType:B,objectType:G}).then((({code:e,data:a})=>{"10000"===e&&(se.noticeList=[...se.noticeList,...a])}))}));const ce=()=>{var e,n;if(!(se.noticeList&&se.noticeList.every((e=>1===e.isDone))))return void N("请完成所有告知进行下一步");if(null!==(e=te.value)&&void 0!==e&&e.isEmpty())return void N("请完成代理人签字进行下一步");if(!ne.value)return void N("请勾选同意签名");const i=null===(n=te.value)||void 0===n?void 0:n.save();M("AGENT",i,se.pageData.id,K).then((e=>{e&&P({...se.pageData,extInfo:{...se.pageData.extInfo,templateId:ee,pageCode:"salesNotice",buttonCode:S.salesNotice},venderCode:X}).then((({code:e,data:n})=>{"10000"===e&&"jumpToPage"===n.pageAction.pageAction&&a.push({path:z[n.pageAction.data.nextPageCode],query:{...t.query}})}))}))};return(e,n)=>{const i=c,o=F,l=d,r=A,s=u("ProPageWrap");return f(),g(s,{class:"page-salesman-inform"},{default:p((()=>[v(T,{title:"营销员告知书"},{default:p((()=>[(f(!0),m(C,null,y(b(se).noticeList,(e=>(f(),g(i,{key:e.id,class:h({"is-active":2===e.isDone}),title:`《${e.title}》`,"is-link":"",value:""+(1===e.isDone?"已完成":"去完成"),onClick:n=>{return i=e,q.set("questionData",i),void a.push({path:"/healthNotice",query:{questionnaireType:i.questionnaireType,...t.query}});var i}},null,8,["class","title","value","onClick"])))),128))])),_:1}),v(T,{title:"营销员签字","show-divider":!1,"show-line":!1},{extra:p((()=>[x("div",{class:"resign",onClick:re},"重签")])),default:p((()=>[v(o,{ref_key:"agentSignRef",ref:te,selector:"sign2"},null,512),x("div",Y,"签名日期： "+_(b(ie)),1)])),_:1}),x("div",O,[v(l,{modelValue:ne.value,"onUpdate:modelValue":n[0]||(n[0]=e=>ne.value=e),shape:"square"},null,8,["modelValue"]),x("p",U,[V,(f(!0),m(C,null,y(b(se).noticeList,((e,a)=>(f(),g(k,{key:a,class:"file",title:`《${e.title}》`,content:le.value,type:oe.value,onClick:a=>(e=>{const{id:a,objectType:t}=e,n={1:"pdf",2:"richText",3:"link"};w({insurerCode:X,id:a,objectType:t,productCategory:Z,orderNo:ae,tenantId:K}).then((({code:e,data:a})=>{"10000"===e&&((null==a?void 0:a[0].questionType)===R?(oe.value="question",le.value=a):(1===(null==a?void 0:a[0].textType)&&null!=a&&a[0].content.includes("png")?oe.value="picture":oe.value=n[null==a?void 0:a[0].textType],le.value=null==a?void 0:a[0].content))}))})(e)},null,8,["title","content","type","onClick"])))),128)),H])]),x("div",$,[v(r,{type:"primary",block:"",onClick:ce},{default:p((()=>[J])),_:1})])])),_:1})}}});e("default",a(W,[["__scopeId","data-v-6f1bc28e"]]))}}}))}();

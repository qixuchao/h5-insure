import{d as e,u as n,r as o,A as s,a6 as i,L as t,Z as a,cg as r,b as l,c as u,e as d,w as c,f as p,i as f,h as g,b2 as m,j as v,E as C,a0 as y,$ as w,G as h,W as k,B as b,aH as R,_}from"./index-330ed3b8.js";import{b as I}from"./product-a661e759.js";import{u as L}from"./useThread-c502137a.js";const S={key:0,class:"header"},j=["src"],x={key:1,class:"statement up"},T={key:3,class:"statement"},U={class:"footer"},E={key:0},D={class:"review-pdf"},N=e({name:"preNotice"});var O=h(e({...N,props:{productDetail:{default:()=>({})}},setup(e){const h=e,N=n(),{tenantId:O="",productCode:q,preview:A}=N.query,B=o(),G=s({insureConfig:{logoLocation:void 0,logoUrl:"",readingReminder:"",acceptReminder:"",readingSeconds:0,buttonTitle:"我知道了"}}),H=o(!1),P=o(!1),W=new i({source:"sessionStorage"});let Z;const $=o({title:"",link:""}),z=o(),F=t((()=>{if($.value.link){const e=($.value.link||"").split("?"),n=(e[0]||"").substr(e[0].lastIndexOf(".")+1);return console.log("urlList",n),"pdf"===n?"pdf":"picture"}return"link"})),J=()=>{H.value=!1};return a((()=>{!A&&(async()=>{const{code:e,data:n}=await I({insureCode:h.productDetail.insurerCode,productCode:q,tenantId:O});"10000"===e&&(G.insureConfig=n,z.value=G.insureConfig.readingSeconds||0,Z=L({start:()=>{console.log("开始轮询"),z.value-=1},stop:()=>{console.log("结束轮询"),W.set("PRENOTICE-isShow","1")},time:1e3,number:G.insureConfig.readingSeconds||0}),k((()=>{Z.run()}))),H.value=!0})()})),(e,n)=>{var o;const s=b,i=R,t=_,a=r("dompurify-html");return l(),u(w,null,[d(i,{class:"pre-notice-wrap",show:p(H),closeable:!1,height:"auto",style:{"padding-bottom":"30px"}},{default:c((()=>[p(G).insureConfig.logoUrl?(l(),u("div",S,[f("img",{src:p(G).insureConfig.logoUrl},null,8,j)])):g("",!0),1===p(G).insureConfig.logoLocation&&p(G).insureConfig.acceptReminder?m((l(),u("div",x,null,512)),[[a,p(G).insureConfig.acceptReminder]]):g("",!0),p(G).insureConfig.readingReminder?(l(),u("div",{key:2,ref_key:"noticeRef",ref:B,class:"content"},[m(f("div",null,null,512),[[a,p(G).insureConfig.readingReminder]])],512)):g("",!0),2===p(G).insureConfig.logoLocation&&p(G).insureConfig.acceptReminder?m((l(),u("div",T,null,512)),[[a,p(G).insureConfig.acceptReminder]]):g("",!0),f("div",U,[d(s,{type:"primary",block:"",round:"",onClick:J},{default:c((()=>[v(C(p(G).insureConfig.buttonTitle)+" ",1),p(z)?(l(),u("span",E,C(p(z))+"s",1)):g("",!0)])),_:1})])])),_:1},8,["show"]),d(i,{show:p(P),"onUpdate:show":n[0]||(n[0]=e=>y(P)?P.value=e:null),class:"pre-notice-wrap",title:null==(o=p($))?void 0:o.title,position:"bottom",style:{overflow:"hidden"}},{default:c((()=>{var e;return[f("div",D,[d(t,{content:null==(e=p($))?void 0:e.link,type:p(F)},null,8,["content","type"])])]})),_:1},8,["show","title"])],64)}}}),[["__scopeId","data-v-6a828666"]]);export{O as default};

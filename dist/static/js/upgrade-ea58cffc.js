import{_ as e,q as a,H as t,aI as l,a as n,u as o,T as s,aF as r,aO as d}from"./index-d66a20d8.js";import{defineAsyncComponent as c,ref as i,reactive as u,computed as v,onMounted as p}from"vue";import{c as m}from"./cloneDeep-6abacc69.js";import{p as f}from"./product-d1af8bd8.js";import{e as h,i as V,g as N,s as E,f as _,E as b}from"./trial-0ac61dce.js";import{a as y,t as g,c as x,s as k,b as A,d as I}from"./utils-57fec98c.js";import{_ as w}from"./index-448eed68.js";import{P as O}from"./index-88613e6f.js";import{_ as B}from"./PersonalInfo-4143a04f.js";import"./pdfh5-e588f83d.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";import"./_getTag-d5b47d26.js";import"./infoCollection-e6a8a0ee.js";import"./trial-b3f7bf73.js";/* empty css              */import"./useDicData-b539129e.js";const C=e=>(vue.pushScopeId("data-v-103c4f03"),e=e(),vue.popScopeId(),e),D={key:0},P=[C((()=>vue.createElementVNode("div",{class:"__skeleton_upgrade_content__"},[vue.createElementVNode("div",{class:"van-config-provider router-view sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[vue.createElementVNode("div",{class:"page-upgrade-product-detail"},[vue.createElementVNode("div",{class:"van-image banner",style:{width:"375px",height:"338px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[vue.createElementVNode("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20230131/7f6e6d1d087a4ced909e9daa18754592/%E5%8D%87%E7%BA%A7%E4%BA%A7%E5%93%81.png?Expires=1676282742&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=B0kGphaHBL5OfHyaMj1ktm9FJvM%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),vue.createElementVNode("div",{class:"page-info-wrapper"},[vue.createElementVNode("div",{class:"com-form-wrapper","show-error":"","show-error-message":"false"},[vue.createElementVNode("form",{class:"van-form"},[vue.createElementVNode("div",{class:"com-card"},[vue.createElementVNode("div",{class:"com-card-wrap"},[vue.createElementVNode("div",{class:"header"},[vue.createElementVNode("div",{class:"title-wrapper"},[vue.createElementVNode("div",{class:"title showIcon"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"33.33%","--sp":"66.67%","--lh":"45px"}},"投保信息")])])]),vue.createElementVNode("div",{class:"body",style:{height:"auto"}},[vue.createElementVNode("div",{class:"com-personal-wrapper"},[vue.createElementVNode("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[vue.createElementVNode("div",{class:"van-cell__title van-field__label van-field__label--left"},[vue.createElementVNode("label",{id:"van-field-2-label",for:"van-field-2-input"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"姓名")])]),vue.createElementVNode("div",{class:"van-cell__value van-field__value"},[vue.createElementVNode("div",{class:"van-field__body"},[vue.createElementVNode("input",{type:"text",id:"van-field-2-input",name:"insure_name",class:"van-field__control van-field__control--right sk-input",readonly:"",placeholder:"请输入姓名",autocomplete:"off","aria-labelledby":"van-field-2-label"}),vue.createElementVNode("div",{class:"van-field__right-icon"})])])]),vue.createElementVNode("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[vue.createElementVNode("div",{class:"van-cell__title van-field__label van-field__label--left"},[vue.createElementVNode("label",{id:"van-field-3-label",for:"van-field-3-input"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"身份证号")])]),vue.createElementVNode("div",{class:"van-cell__value van-field__value"},[vue.createElementVNode("div",{class:"van-field__body"},[vue.createElementVNode("input",{type:"text",id:"van-field-3-input",name:"insure_certNo",class:"van-field__control van-field__control--right sk-input",readonly:"",placeholder:"请输入身份证号",autocomplete:"off","aria-labelledby":"van-field-3-label"}),vue.createElementVNode("div",{class:"van-field__right-icon"})])])])]),vue.createElementVNode("div",{class:"van-cell van-field van-field--label-left com-pro-field"},[vue.createElementVNode("div",{class:"van-cell__title van-field__label van-field__label--left"},[vue.createElementVNode("label",{id:"van-field-4-label",for:"van-field-4-input"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"社保")])]),vue.createElementVNode("div",{class:"van-cell__value van-field__value"},[vue.createElementVNode("div",{class:"van-field__body"},[vue.createElementVNode("div",{class:"van-field__control van-field__control--right van-field__control--custom"},[vue.createElementVNode("div",{class:"com-radio-btn-wrap"},[vue.createElementVNode("div",{class:"radio-btn"},[vue.createElementVNode("div",{class:"btn-wrapper"},[vue.createElementVNode("div",{class:"com-check-btn activated-disabled"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"22.92%","--sp":"77.08%","--lh":"24px"}}," 有（含农村合作医疗）")])]),vue.createElementVNode("div",{class:"btn-wrapper"},[vue.createElementVNode("div",{class:"com-check-btn disabled sk-border"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"22.92%","--sp":"77.08%","--lh":"24px"}}," 无")])])])])]),vue.createElementVNode("div",{class:"van-field__right-icon"})])])])])])])])])]),vue.createElementVNode("div",{class:"van-cell van-field com-pro-field"},[vue.createElementVNode("div",{class:"van-cell__title van-field__label"},[vue.createElementVNode("label",{id:"van-field-5-label",for:"van-field-5-input"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"21px"}},"每月保费")])]),vue.createElementVNode("div",{class:"van-cell__value van-field__value"},[vue.createElementVNode("div",{class:"van-field__body"},[vue.createElementVNode("input",{type:"text",id:"van-field-5-input",name:"insuredBeneficiaryType",class:"van-field__control van-field__control--right sk-input",placeholder:"请输入每月保费",autocomplete:"off","aria-labelledby":"van-field-5-label"}),vue.createElementVNode("div",{class:"van-field__right-icon"})])])]),vue.createElementVNode("div",{class:"com-attachment-list attachment-bg"},[vue.createElementVNode("span",null,[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}},"请阅读")]),vue.createElementVNode("span",{class:"attachment-item"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《责任免除说明书》 ")]),vue.createElementVNode("span",{class:"attachment-item"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《投保须知》 ")]),vue.createElementVNode("span",{class:"attachment-item"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《重要提示》 ")]),vue.createElementVNode("span",{class:"attachment-item"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《特别约定》 ")]),vue.createElementVNode("span",{class:"attachment-item"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"16.67%","--sp":"83.33%","--lh":"18px"}}," 《条款》 ")])]),vue.createElementVNode("div",{class:"footer-area sk-border"},[vue.createElementVNode("div",{class:"upgrade-submit"},[vue.createElementVNode("div",{class:"price"},[vue.createElementVNode("span",{class:"num"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"18.200139999999998px"}},"49")]),vue.createElementVNode("span",{class:"unit"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"18.200139999999998px"}},"元/月")])]),vue.createElementVNode("div",{class:"pro-shadow-button right"},[vue.createElementVNode("button",{type:"button",class:"van-button van-button--primary van-button--normal van-button--block van-button--round shadow-button sk-button"},[vue.createElementVNode("div",{class:"van-button__content"},[vue.createElementVNode("span",{class:"van-button__text"},[vue.createElementVNode("span",{class:"sk-text",style:{"--fp":"8.33%","--sp":"91.67%","--lh":"19.2002px"}},"升级保障")])])])])])])])])],-1)))],F={key:1,"data-skeleton-root":"UPGRADE",class:"page-upgrade-product-detail"},j={class:"footer-area"},L=C((()=>vue.createElementVNode("span",null,"分享",-1))),S={class:"upgrade-submit"},U={class:"price"},R={class:"num"},T=C((()=>vue.createElementVNode("span",{class:"unit"},"元/月",-1)));var z=e(vue.defineComponent({__name:"upgrade",setup(e){const C=c((()=>a((()=>import("./index-37ac1006.js")),["static/js/index-37ac1006.js","static/css/index-4640d9aa.css"]))),z=c((()=>a((()=>import("./index-4bd92c7d.js")),["static/js/index-4bd92c7d.js","static/css/index-fa4edf2a.css","static/js/index-d66a20d8.js","static/css/index-5064de6f.css","static/js/pdfh5-e588f83d.js","static/js/theme-65292714.js","static/js/index-88613e6f.js","static/css/index-827a8544.css","static/js/utils-57fec98c.js","static/js/infoCollection-e6a8a0ee.js","static/js/trial-b3f7bf73.js"]))),H=t(),$=l(),G=n(),J=o(),{productCode:M="ZXYS2023",orderNo:q="",agencyCode:K="",tenantId:Q="",saleChannelId:Z="",extraInfo:W}=J.query;let X={};try{X=JSON.parse(decodeURIComponent(W))}catch(ye){console.log(ye)}const{openId:Y,indirectCode:ee="",agentCode:ae}=X,te=i(!0),le=i(),ne=i();i(),i();const oe=i(),se=i(),re=i(),de=i(0),ce=i();i(!1),i(!1),i(0);const ie=i(""),ue=i(!0),ve=i(),pe=u({isOnlyView:!0,activeIndex:0,showFilePreview:!1}),me=i({imgUrl:"",desc:"",title:"",link:window.location.href}),fe=()=>{pe.showFilePreview=!1,pe.isOnlyView=!0},he=v((()=>`${de.value}元/月`)),Ve=e=>{var a;const t=null==(a=e.tenantOrderPaymentInfoList)?void 0:a.pop();return t?t.paymentMethod:3},Ne=async e=>{const a=A({tenantId:Q,premium:de.value,orderDetail:re.value,productDetail:oe.value,insureDetail:se.value,successJumpUrl:`${d}/baseInsurance/orderDetail?tenantId=${Q}&orderNo=${ie.value}`,iseeBizNo:le.value}),t=await b({orderNo:e,...a}),{code:l,data:n}=t;"10000"===l&&G.push(`/baseInsurance/orderDetail?tenantId=${Q}&orderNo=${ie.value}`)},Ee=async e=>{try{s.loading({forbidClick:!0,message:"升级中",duration:0});const e=await(async()=>{var e,a,t;const l=y({tenantId:Q,templateId:re.value.tenantOrderInsuredList[0].templateId,applicationNo:re.value.applicationNo,policyNo:re.value.policyNo,saleUserId:ae,saleChannelId:re.value.saleChannelId,orderStatus:r.UP_PROCESSING,orderTopStatus:"-1",orderCategory:2,detail:oe.value,insureDetail:se.value,paymentMethod:Ve(re.value),renewalDK:null==(a=null==(e=re.value.extInfo)?void 0:e.extraInfo)?void 0:a.renewalDK,iseeBizNo:le.value,expiryDate:re.value.expiryDate,successJumpUrl:"",premium:de.value,holder:{...re.value.tenantOrderHolder,extInfo:ve.value,socialFlag:ve.value.hasSocialInsurance},insured:{...re.value.tenantOrderInsuredList[0],socialFlag:re.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance},tenantOrderRiskList:g({tenantId:Q,riskList:x(k(se.value.productRiskVoList[0].riskDetailVOList),oe.value),riskPremium:{},productId:null==(t=oe.value)?void 0:t.id},!0)}),n=await E(l),{code:o,data:s}=n;return"10000"===o?s.data:""})();await h({tenantId:Q,applicationNo:re.value.applicationNo});if(ie.value=e,console.log(ie.value,"orderNoUp.value===",e),ce.value){const e=encodeURIComponent(encodeURIComponent(window.location.href)),a=`${ce.value}&failUrl=${e}`;window.location.href=a,s.clear()}else Ne(e)}catch(a){console.log(a),s.clear()}},_e=async e=>{Ee()},be=()=>{const e=f({productCode:M,withInsureInfo:!0,tenantId:Q}),a=V({productCode:M}),t=N({orderNo:q,tenantId:Q});Promise.all([e,a,t]).then((([e,a,t])=>{var l,n,o;if("10000"===e.code){oe.value=e.data,document.title=(null==(l=e.data)?void 0:l.productFullName)||"";const{title:a,desc:t,image:s}=(null==(n=e.data)?void 0:n.showConfigVO)||{};o={title:a,desc:t,image:s},me.value={desc:o.desc||"你好，这里是描述",imgUrl:o.image,title:o.title,link:window.location.href}}"10000"===a.code&&(se.value=a.data,["1","2","3"].forEach((e=>{var a,t,l,n;se.value.productFactor[e]=(null==(l=(null==(t=null==(a=se.value)?void 0:a.productFactor)?void 0:t[e])||[])?void 0:l.some((e=>1===e.isDisplay)))?null==(n=se.value.productFactor)?void 0:n[e]:[]}))),"10000"===t.code&&(re.value=t.data,ve.value=m(re.value.tenantOrderHolder.extInfo),re.value.tenantOrderHolder.extInfo=re.value.tenantOrderInsuredList[0].extInfo),te.value=!1,(async()=>{s.loading({forbidClick:!0,duration:0,message:"试算中"});try{const e=A({tenantId:Q,premium:de.value,orderDetail:re.value,productDetail:oe.value,insureDetail:se.value,successJumpUrl:""},I),a=await _(e),{code:t,data:l,message:n}=a;"10000"===t?(de.value=l.installmentPremium,ce.value=l.signUrl,ue.value=!1):"已升级成功"===n&&(ue.value=!0)}catch(e){console.log(e),ue.value=!0}finally{setTimeout((()=>{s.clear()}),ue.value?2e3:0)}})(),(()=>{var e;let a={};if(a=(null==(e=oe.value.tenantProductInsureVO.planInsureVO)?void 0:e.attachmentVOList)||[],!a)return void(ne.value=[]);const t={2:"richText",3:"link"};ne.value=Object.keys(a).map((e=>(a[e].forEach((e=>{if("1"===e.attachmentType){const a=e.attachmentUri.split("?"),t=a[0].substr(a[0].lastIndexOf(".")+1);e.attachmentType="pdf"===t?"pdf":"picture"}else e.attachmentType=t[e.attachmentType]})),{attachmentName:e,attachmentList:a[e]})))||[]})()}))};return p((()=>{be(),setTimeout((async()=>{le.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{var t,l,n,o;const s=vue.resolveComponent("ProField"),r=vue.resolveComponent("ProSvg"),d=vue.resolveComponent("ProShare");return vue.openBlock(),vue.createElementBlock(vue.Fragment,null,[vue.unref(te)?(vue.openBlock(),vue.createElementBlock("div",D,P)):(vue.openBlock(),vue.createElementBlock("div",F,[vue.createVNode(w,{"data-skeleton-type":"img",url:null==(l=null==(t=vue.unref(oe))?void 0:t.tenantProductInsureVO)?void 0:l.banner[0]},null,8,["url"]),(null==(n=vue.unref(se))?void 0:n.productFactor)?(vue.openBlock(),vue.createBlock(B,{key:0,ref:"personalInfoRef",modelValue:vue.unref(re),"onUpdate:modelValue":a[0]||(a[0]=e=>vue.isRef(re)?re.value=e:null),"product-factor":vue.unref(se).productFactor,"multi-insured-config":null==(o=vue.unref(se))?void 0:o.multiInsuredConfigVO},null,8,["modelValue","product-factor","multi-insured-config"])):vue.createCommentVNode("",!0),vue.createVNode(s,{modelValue:vue.unref(he),"onUpdate:modelValue":a[1]||(a[1]=e=>vue.isRef(he)?he.value=e:null),"input-align":"right",label:"每月保费",name:"insuredBeneficiaryType"},null,8,["modelValue"]),vue.unref(ne)&&vue.unref(ne).length>0?(vue.openBlock(),vue.createBlock(vue.unref(C),{key:1,class:"attachment-bg","attachment-list":vue.unref(ne),"has-bg-color":!1,"pre-text":"请阅读",onPreviewFile:a[2]||(a[2]=e=>(e=>{pe.isOnlyView=!0,pe.activeIndex=e,pe.showFilePreview=!0})(e))},null,8,["attachment-list"])):vue.createCommentVNode("",!0),vue.createElementVNode("div",j,[vue.unref(H)?(vue.openBlock(),vue.createBlock(d,vue.mergeProps({key:0},vue.unref(me),{class:"share-btn"}),{default:vue.withCtx((()=>[vue.createVNode(r,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),L])),_:1},16)):vue.createCommentVNode("",!0),vue.createElementVNode("div",S,[vue.createElementVNode("div",U,[vue.createElementVNode("span",R,vue.toDisplayString(vue.unref(de)),1),T]),vue.createVNode(O,{shadow:!1,disabled:vue.unref(ue),"theme-vars":vue.unref($),class:"right",text:"升级保障",onClick:_e},{default:vue.withCtx((()=>[vue.createTextVNode(vue.toDisplayString("升级保障"))])),_:1},8,["disabled","theme-vars"])])])])),vue.unref(pe).showFilePreview&&0!==vue.unref(ne).length?(vue.openBlock(),vue.createBlock(vue.unref(z),{key:2,show:vue.unref(pe).showFilePreview,"onUpdate:show":a[3]||(a[3]=e=>vue.unref(pe).showFilePreview=e),"content-list":vue.unref(ne),"is-only-view":vue.unref(pe).isOnlyView,"active-index":vue.unref(pe).activeIndex,text:vue.unref(pe).isOnlyView?"关闭":"我已逐页阅读上述内容并同意","force-read-count":0,"on-close-file-preview":"",onSubmit:Ee,onOnCloseFilePreview:fe},null,8,["show","content-list","is-only-view","active-index","text"])):vue.createCommentVNode("",!0)],64)}}}),[["__scopeId","data-v-103c4f03"]]);export{z as default};

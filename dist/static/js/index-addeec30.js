import{_ as e,d as t,bj as a,c as n,h as r,t as o,k as d,g as l,bk as s,j as u,a as i,u as c,r as p,G as v,p as f,B as I,e as m,w as C,f as y,ad as b,F as g,i as k,n as _,l as O,b as L,aj as N,T as P,ai as h,cE as S}from"./index-e28abb00.js";import{d as Y}from"./order-f4d72bfa.js";import{O as j,b as T}from"./order-d37871fd.js";import{I as D}from"./InsuredPart-30229d72.js";import"./pdfh5-008ca364.js";import"./trial-3cd3261f.js";const x={class:"com-field-info"},G={key:0,class:"label"},E={class:"content"};var B=e(t({__name:"fieldInfo",props:{label:{type:String,default:""},content:{type:String,default:""}},setup(e){const t=a();return(a,i)=>(n(),r("div",x,[e.label?(n(),r("div",G,o(e.label),1)):d("",!0),l(t).label?s(a.$slots,"label",{key:1},void 0,!0):d("",!0),u("div",E,o(e.content),1),l(t).content?s(a.$slots,"content",{key:2},void 0,!0):d("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const H={key:0,class:"page-order-detail"},M={class:"card"},U={class:"header"},W={class:"product-name"},q={class:"company-name"},A={class:"status"},F={key:0,class:"footer-button"},X={key:1,class:"footer-button"},Z={key:2,class:"footer-button"};var $=e(t({__name:"index",setup(e){const t=i(),a=c(),s=p(),{query:{orderNo:x,agentCode:G,tenantId:E,abbreviation:$,productCategory:w}}=t,z=()=>{N.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{s.value&&Y(s.value.id,s.value.orderStatus).then((e=>{const{code:t,data:a}=e;"10000"===t&&P.success("删除成功")}))}))},J=()=>{var e,t;if(!s.value)return!1;const{agencyId:n,saleChannelId:r,orderTopStatus:o}=s.value,d=null==(t=null==(e=s.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;if(!(T.PENDING!==o&&T.PAYING!==o||d!==S.ZXYS&&d!==S.BWYL)){const e={[S.ZXYS]:"/internet/productDetail/package",[S.BWYL]:"/internet/productDetail"};return a.push({path:e[d],query:{productCode:d,saleChannelId:r,agentCode:G,tenantId:E,agencyCode:n,orderNo:x}}),!0}return!1},K=()=>{var e,t;if(s.value){if(J())return;const{id:a,extInfo:{templateId:n,pageCode:r},agencyId:o,venderCode:d}=s.value,l=null==(t=null==(e=s.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;h(r,{productCode:l,orderNo:x,orderId:a,agentCode:G,templateId:n,tenantId:E,productCategory:w,insurerCode:d,agencyCode:o,isFromOrderList:"1"})}},Q=()=>{var e,t;if(s.value){if(J())return;const{id:a,saleUserId:n,extInfo:{templateId:r},agencyId:o,venderCode:d}=s.value,l=null==(t=null==(e=s.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;h("payInfo",{productCode:l,orderNo:x,orderId:a,saleUserId:n,templateId:r,tenantId:E,productCategory:w,insurerCode:d,agencyCode:o})}};return v((()=>{f({orderNo:x,agentCode:G,tenantId:E}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(s.value=a)}))})),(e,t)=>{const a=I,i=L("ProPageWrap");return n(),m(i,null,{default:C((()=>{var e,t,i,c,p,v,f,I,L,N,P;return[l(s)?(n(),r("div",H,[u("div",M,[y(B,null,{label:C((()=>{var e,t,a,n;return[u("div",U,[u("div",W,o(null==(a=null==(t=null==(e=l(s))?void 0:e.tenantOrderInsuredList[0])?void 0:t.tenantOrderProductList[0])?void 0:a.productName),1),u("div",q,o(((null==(n=l(s))?void 0:n.abbreviation)||"").substring(0,6)),1)])]})),content:C((()=>{var e;return[u("div",A,o(l(s)?l(j)[null==(e=l(s))?void 0:e.orderStatus]:""),1)]})),_:1}),y(B,{label:"投保单号",content:null==(e=l(s))?void 0:e.orderNo},null,8,["content"]),y(B,{label:"创建时间",content:l(b)(null==(t=l(s))?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),y(B,{label:"投保人",content:null==(c=null==(i=l(s))?void 0:i.tenantOrderHolder)?void 0:c.name},null,8,["content"]),(n(!0),r(g,null,k((null==(p=l(s))?void 0:p.tenantOrderInsuredList)||[],((e,t)=>(n(),m(B,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),y(D,{"product-data":null==(I=null==(f=null==(v=l(s))?void 0:v.tenantOrderInsuredList[0])?void 0:f.tenantOrderProductList)?void 0:I[0],class:"insure-info"},null,8,["product-data"]),(null==(L=l(s))?void 0:L.orderTopStatus)===l(T).PENDING?(n(),r("div",F,[y(a,{type:"primary",onClick:O(z,["stop"])},{default:C((()=>[_("删除")])),_:1},8,["onClick"]),y(a,{type:"primary",onClick:O(K,["stop"])},{default:C((()=>[_("去处理")])),_:1},8,["onClick"])])):d("",!0),(null==(N=l(s))?void 0:N.orderTopStatus)===l(T).PAYING?(n(),r("div",X,[y(a,{type:"primary",onClick:O(z,["stop"])},{default:C((()=>[_("删除")])),_:1},8,["onClick"]),y(a,{type:"primary",onClick:O(Q,["stop"])},{default:C((()=>[_("去支付")])),_:1},8,["onClick"])])):d("",!0),(null==(P=l(s))?void 0:P.orderTopStatus)===l(T).TIMEOUT?(n(),r("div",Z,[y(a,{type:"primary",onClick:O(z,["stop"])},{default:C((()=>[_("删除")])),_:1},8,["onClick"])])):d("",!0)])):d("",!0)]})),_:1})}}}),[["__scopeId","data-v-2e576ed4"]]);export{$ as default};

import{_ as a,d as e,r as s,a as t,G as l,b as r,c as o,e as d,w as n,i as u,t as c,m as i,A as v,aS as p,L as m,f,n as I,p as b,ah as h,T as y,B as _,X as C,Y as N}from"./index-5239afda.js";import{s as j,c as E}from"./phoneVerify-b2ad2b56.js";import{c as P}from"./format-12461bbc.js";import{a as S}from"./order-305ca51f.js";import"./pdfh5-008ca364.js";const U={class:"page-phone-verify"},g=(a=>(C("data-v-29510ea1"),a=a(),N(),a))((()=>u("div",{class:"title"},"通过投保人手机号验证后，可进行投保信息预",-1))),q={class:"phone"},w={class:"input-wrapper"},A=I("下一步");var D=a(e({setup(a){const e=s(""),I=s(""),C=s(0);let N;const D=t(),{agentCode:G,tenantId:R,templateId:T,productCode:k,insurerCode:x,orderNo:L}=D.query,V=()=>{j(e.value).then((({code:a})=>{"10000"===a&&(C.value=60,N=setInterval((()=>{C.value-=1,C.value<=0&&clearInterval(N)}),1e3))}))},W=()=>{E(e.value,I.value).then((({code:a,data:e})=>{"10000"===a&&e?(y.success("验证成功"),h("infoPreview",D.query)):y.fail("验证失败")}))};return l((()=>{b({orderNo:L,saleUserId:G,tenantId:R}).then((a=>{var s;const{code:t,data:l}=a;"10000"===t&&([S.PENDING,S.PAYMENT_FAILED,S.UNDER_WRITING_SUCCESS].includes(l.orderStatus)?e.value=null==(s=null==l?void 0:l.tenantOrderHolder)?void 0:s.mobile:h("paymentResult",D.query))}))})),(a,s)=>{const t=_,l=r("ProPageWrap");return o(),d(l,null,{default:n((()=>[u("div",U,[g,u("div",q,c(i(P)(e.value)),1),u("div",w,[v(u("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>I.value=a),placeholder:"请输入验证码",class:"input"},null,512),[[p,I.value]]),u("div",{class:m(["btn",{second:C.value}]),onClick:V},c(C.value?`${C.value}s`:"发送验证码"),3)]),f(t,{type:"primary",class:"submit-btn",onClick:W},{default:n((()=>[A])),_:1})])])),_:1})}}}),[["__scopeId","data-v-29510ea1"]]);export{D as default};

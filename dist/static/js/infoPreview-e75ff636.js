import{d as e,o as a,c as t,b as o,w as n,F as s,n as r,l as i,a as l,u as c,a6 as d,q as u,bW as p,aE as m,a4 as f,a5 as y,h,g as j,r as v,i as b,av as k,m as g,ac as I,a0 as _,aw as w,ad as P,f as C,a8 as L,aC as x,aB as D,aa as E,ap as S,ae as V}from"./index-a701edf7.js";import{t as N}from"./index-873f5512.js";import{_ as O}from"./PayInfo-01655823.js";import{g as R,m as A}from"./trial-be4721b4.js";import{n as q}from"./nextStep-53012c09.js";import{c as F}from"./product-ad97da6e.js";import{u as T}from"./useOrder-0f74fb68.js";import{P as U,a as M}from"./constants-71331306.js";import{P as Y}from"./index-cbfdf47e.js";import{P as $}from"./index-04ea7ba0.js";import{R as J,c as W}from"./trial-d97dbb4f.js";import{a as z}from"./utils-0af605ab.js";import"./keysIn-131bbce9.js";import"./isObjectLike-a9798079.js";import"./_getTag-0507d0b1.js";import"./debounce-6981b306.js";import"./phoneVerify-307a6997.js";import"./merge-e7788e50.js";import"./index-f8d021e2.js";import"./useDicData-c5252af3.js";import"./bankCard-3afe4cad.js";import"./core-2f757857.js";import"./constant-8927d485.js";import"./index-c039885c.js";import"./empth-c0adfdba.js";import"./cloneDeep-5d541e55.js";import"./lodash-572ef11f.js";import"./infoCollection-c01830c2.js";import"./index-2f3f02a6.js";import"./search-ff683ccf.js";const B={class:"com-insured-part-wrapper"},G={class:"content-wrapper"},K={class:"risk-item"},H=e({__name:"InsureInfo",props:{productData:{default:()=>[]},totalPremium:{default:0}},setup:e=>(e,f)=>{const y=p,h=m;return a(),t("div",B,[o(h,{title:"保障信息","show-icon":!1},{default:n((()=>[(a(!0),t(s,null,r(e.productData,(e=>(a(),t(s,{key:e.productCode},[(a(!0),t(s,null,r(e.riskList,(e=>(a(),i(h,{key:e.riskCode,title:e.riskName},{default:n((()=>{var n;return[l("div",G,[l("div",K,[e.riskType===c(J).MAIN_RISK?(a(),t(s,{key:0},[o(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])],64)):(a(),t(s,{key:1},[o(y,{title:e.riskName,content:"投保"},null,8,["title"]),e.exemptFlag===c(d).YES?(a(),i(y,{key:0,title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])):(null==(n=e.liabilityList)?void 0:n.length)?(a(),t(s,{key:1},[o(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"]),o(y,{title:"交费方式",content:c(W)[e.paymentFrequency]},null,8,["content"])],64)):u("",!0)],64)),o(y,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(y,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])]})),_:2},1032,["title"])))),128))],64)))),128))])),_:1})])}});const Q={class:"long-info-preview"},X={class:"footer-btn"},Z=l("span",null,"分享",-1),ee=e({__name:"infoPreview",setup(e){const d=f((()=>y((()=>import("./index-90cacb9b.js")),["static/js/index-90cacb9b.js","static/css/index-fa4edf2a.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css","static/js/theme-94cf7d00.js","static/js/index-04ea7ba0.js","static/css/index-bbfdd7ec.css","static/js/utils-e08fe015.js","static/js/infoCollection-c01830c2.js","static/js/trial-d97dbb4f.js"])));f((()=>y((()=>import("./index-9d595f9b.js")),["static/js/index-9d595f9b.js","static/css/index-cb73c937.css","static/js/index-a701edf7.js","static/css/index-c3745f58.css"])));const p=h(),J=j(),W=T(),B={1:M.holderSign,2:M.insuredSign,3:M.agentSign},{productCode:G="",tenantId:K,agentCode:ee="",agencyCode:ae,saleChannelId:te,isShare:oe,orderNo:ne,extraInfo:se,insurerCode:re,objectType:ie="1",preview:le}=p.query;let ce={};try{ce=JSON.parse(decodeURIComponent(se))}catch(_e){}const de=v({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),ue=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,pe=b({imgUrl:"",desc:"",title:"",link:ue}),me=b(),fe=b(),ye=b(!1);b(0);const he=b(!1),je=b(),ve=()=>{q(W.value,((e,a)=>{a===x.JUMP_PAGE&&je.value.handleShare()}))},be=async()=>{le?D(U.INFO_PREVIEW,p.query):J.push({path:B[ie],query:p.query})},ke=b(),ge=b(),Ie=b([]);return k((()=>{(async()=>{let e={};const{code:a,data:t}=await R({orderNo:ne,tenantId:K});"10000"===a&&(Object.assign(W.value,t),e=z(t.insuredList[0].productList),ke.value=t,he.value=!0),F(e).then((({code:e,data:a})=>{var t,o;"10000"===e&&(Ie.value=null==(o=null==(t=a.riskMaterialList)?void 0:t[0])?void 0:o.productMaterialList)})),A(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:t}=e;ge.value=t;const{payInfo:o}=N(t);de.payInfo={...de.payInfo,...o}}}))})()})),(e,p)=>{var f,y;const h=E,j=S,v=m,b=V;return a(),t("div",Q,[o(h),o(H,{"product-data":null==(y=null==(f=c(W).insuredList)?void 0:f[0])?void 0:y.productList},null,8,["product-data"]),c(ge)?(a(),i(Y,{key:0,ref_key:"personalInfoRef",ref:fe,modelValue:c(ke),"onUpdate:modelValue":p[0]||(p[0]=e=>g(ke)?ke.value=e:null),"product-factor":c(ge),"is-view":""},null,8,["modelValue","product-factor"])):u("",!0),c(de).payInfo.schema.length?(a(),i(c(O),{key:1,ref_key:"payInfoRef",ref:me,modelValue:c(W).tenantOrderPayInfoList,"onUpdate:modelValue":p[1]||(p[1]=e=>c(W).tenantOrderPayInfoList=e),schema:c(de).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):u("",!0),o(v,{title:"产品资料","show-line":!1,"show-icon":!1},{default:n((()=>[(a(!0),t(s,null,r(c(Ie),((e,t)=>(a(),i(j,{key:t,"is-link":"",label:e.materialName,onClick:e=>{ye.value=!0}},null,8,["label","onClick"])))),128))])),_:1}),l("div",X,[!c(oe)&&c(pe).isShare&&c(I)()?(a(),i(P,_({key:0},c(pe),{class:"share-btn",onClick:w(ve,["stop"])}),{default:n((()=>[o(b,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),Z])),_:1},16,["onClick"])):u("",!0),o($,{shadow:!1,onClick:be},{default:n((()=>[C(e.$slots,"default",{},(()=>[L("下一步")]))])),_:3})]),o(c(d))])}}});export{ee as default};

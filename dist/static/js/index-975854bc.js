import{d as e,u as a,a as t,r,aj as n,c as o,g as d,ar as s,i as c}from"./index-8f47c774.js";import{l as i}from"./index-c6b2b786.js";import{f as p,P as l}from"./infoCollection-4a054aed.js";import{q as u}from"./trial-3ef3f449.js";import"./pdfh5-e5c0db2a.js";const f={class:"page-middle-wrapper"},C=[c("h4",null,null,-1)],I=e({setup(e){const c=a(),I=t(),g=r(""),{extraInfo:m,agencyCode:y,templateId:h,pageCode:b,insurerCode:x,productCode:$,agentCode:j,saleChannelId:R,code:U}=I.query;let v={};try{v=JSON.parse(decodeURIComponent(m))}catch(D){}const{templateId:w,openId:N,tenantId:q,orderNo:E}=v,O=()=>{try{const e=N?h:w;if(e)return`/baseInsurance/${p[e]}`;switch(b){case l.FREE:return`/chuangxin/baigebao/${b}`;case l.COMMON:return"/internet/productDetail";case l.UPGRADE:return"/internet/guaranteeUpgrade";case l.PACKAGE:return"/internet/productDetail/package";default:return""}}catch(e){return""}},A=e=>{s({param:e}).then((({code:a,data:t})=>{if("10000"===a&&t)if(N){const a=O();c.replace(encodeURI(`${a}?${e}`))}else(e=>{var a;if("4"===w&&E){const e={insurerCode:x,productCode:$,tenantId:q||(null==(a=I.query)?void 0:a.tenantId),agencyCode:y,agentCode:j,orderNo:E,saleChannelId:R};return e.extraInfo=decodeURIComponent(JSON.stringify({...v,templateId:w})),void c.push(`/baseInsurance/upgrade?${i.stringify(e)}`)}let t=e;const r=O();r&&(t=r),c.replace(encodeURI(`${t}?${i.stringify(I.query)}`))})();else g.value="验证失败"}))};return n((()=>{N?(async()=>{const{code:e,data:a}=await u({insurerCode:x,productCode:$,tenantId:q,agencyCode:y,extraMap:{...v,templateId:h}});"10000"===e&&A((a||"").split("?")[1])})():A(window.location.search.replace("?",""))})),(e,a)=>(o(),d("div",f,C))}});export{I as default};

import{h as O,at as T,r as P,N,$ as H,m as I,s as C,B as a,C as t,t as p,Z as U,a5 as K,a6 as Y,aa as q,P as L,j as M,k as Q,n as W,p as b,H as j,F as k}from"./vendor-d350434b.js";import{P as E}from"./index-11bb4112.js";import{B as z}from"./index-27230d63.js";import{_ as J}from"./index-55a4003d.js";import{a as X,s as G}from"./phoneVerify-2115d51e.js";import{_ as x}from"./index-3cda190c.js";import{p as Z,g as $}from"./product-76b90724.js";import{i as ee,t as te,n as oe}from"./trial-d10f442f.js";import{f as re}from"./utils-ce533f5b.js";import{u as se}from"./theme-e4a7893d.js";import"./check-detail-60b0cbde.js";import"./infoCollection-a3c0529c.js";import"./relativeTime-35039168.js";import"./useDicData-b9d06d36.js";import"./trial-38a8e06c.js";var R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAAeCAYAAAC2Xen2AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAVqADAAQAAAABAAAAHgAAAABxFx1vAAABtUlEQVRoBe2ZP06EUBDGv2eWdTtbay9goZ2FlYmVra0a9AbrIfQGuqK9nTeQxE6LvcDWtnSrCDhDsgQR2LcbpuBlSDYM84bv2/ll+JNgsGT79rFHJe+Vsv3hBB+VnMhhX/03RGioKBSs0BAoWAUrREBIVidWwQoREJLViVWwQgSEZHViFawQASFZnVgFK0RASFYnVsEKERCS1YlVsEIEhGR1YoXAmi8fNwYYd6mfAbebE1zbaLrqT0wB+vwR0O7cBoRFzSN9trmwqCtKXPTPbwVehEuT4aXodM2ANVhr1dNd9M/BmmckgwSnBCRcFUqpPmQN1irlrEIX/fNbwaL77ApbcYZXZNhd5Kz2BlPP4NDcIbKqbyhyyf8PWO43O8N2PMAbhTsN/VfTM+8HB+YJn9WFdY5d8c9vBWUADChNcURP9qWguIZru4LK/8MV/39gublRgJlJcUxh26UdcQ3X8jldbi7414JlSMMAU3rKn1A4r4E25zWuqVnrJNV3/0awTMd7QJia/G2h/KRPOMdrnRBsEemzfytY7nl0T++3Bn7RP8V5rkjIBs77xz7G/JPF2KzeN/9fBin2izf9UfQAAAAASUVORK5CYII=";const ae=n=>(K("data-v-dcd9ca58"),n=n(),Y(),n),ne={class:"free-crad"},le={class:"container"},ie={class:"title"},de=["src"],ue=ae(()=>a("span",null,"\u6700\u540E\u4E00\u6B65 \u586B\u5199\u4FE1\u606F",-1)),ce=["src"],Ae=O({props:{colors:{type:Array,default:()=>["#CDDFFE","#F1F7FE"]},detail:{type:Object,default:()=>{}},isFirst:{type:Boolean,default:!0},insureDetail:{type:Object,default:()=>{}}},setup(n){const o=n;T(r=>({"06237d6f":o.colors[0],"06237d8e":o.colors[1]}));const f=P(),u=N({factorObj:{1:[{attributeValues:null,code:"mobile",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u624B\u673A\u53F7"},{attributeValues:null,code:"verificationCode",datasource:null,defaultValue:null,displayType:null,factorId:null,factorScript:null,hasDefaultValue:1,id:8249,isDisplay:1,isHidden:1,isMustInput:2,isReadOnly:null,moduleType:1,placeholder:null,planCode:null,position:null,productCode:"lin23323",productId:null,title:"\u9A8C\u8BC1\u7801"}],2:[],3:[]},isFirst:!0}),m=()=>{var r;u.factorObj=(r=o.insureDetail)==null?void 0:r.productFactor,console.log(o.insureDetail,"detail====")},g=async(r,i)=>{const _=await(o.isFirst?X:G)(r),{code:e,data:w}=_;console.log(f.value.validateForm(),"slslslw=="),e==="10000"&&(i==null||i())};return H(()=>o.isFirst,()=>{o.isFirst||m()}),(r,i)=>(I(),C("div",ne,[a("div",le,[a("div",ie,[a("img",{src:t(R)},null,8,de),ue,a("img",{src:t(R)},null,8,ce)]),p(J,{ref_key:"formRef",ref:f,"send-sms-code":g,"form-info":n.detail,"factor-object":t(u).factorObj},null,8,["form-info","factor-object"]),U(r.$slots,"default",{},void 0,!0)])]))}});var pe=x(Ae,[["__scopeId","data-v-dcd9ca58"]]);const fe={class:"page-free-product-detail"},me={class:"product-desc"},_e=["src"],he={class:"page-free-footer"},Be=O({setup(n){T(c=>({"7cbd9f2e":t(e).colors[1]}));const o=se();q();const f=L(),{productCode:u="BWYL2021",openId:m="oKugN52glZx_hhg7liu0WpWcmD5o",tenantId:g="9991000001",indirectCode:r="123",saleUserId:i="",saleChannelId:D=""}=f.query;console.log("-----themeVars",o);let _="";const e=N({colors:["#fff"],detail:{},order:{tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{occupationCodeList:[]},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}},banner:"",productDesc:[],newAuth:!0,insureDetail:{}}),w=async()=>{const c=Z({productCode:u,withInsureInfo:!0,tenantId:0}),s=ee({productCode:u}),d=$({openId:m});await Promise.all([c,s,d]).then(([A,h,y])=>{var F,V;if(A.code==="10000"){e.detail=A.data,e.banner=(F=e.detail.tenantProductInsureVO)==null?void 0:F.banner[0];const{colorEnd:l,colorStart:B}=e.detail.tenantProductInsureVO.backgroundInsureVO;e.colors=[B,l],e.productDesc=e.detail.tenantProductInsureVO.spec||[],document.title=e.detail.productFullName||""}h.code==="10000"&&(e.insureDetail=h.data,e.insureDetail.productFactor[2]=(V=e.insureDetail.productFactor)==null?void 0:V[2].map(l=>{var B,v;return l.code==="relationToHolder"&&l.isDisplay===1&&(l.title="\u88AB\u4FDD\u4EBA",e.order.tenantOrderInsuredList[0].relationToHolder=((v=(B=l.attributeValueList)==null?void 0:B[0])==null?void 0:v.code)||""),l})),y.code==="10000"&&(e.newAuth=!y.data)})},S=async()=>{const c=e.newAuth?te:oe;let s={loginType:"2",openId:m,thirdUserType:"XINAO_WECHAT",indirectCode:r};e.newAuth?(s.loginName=e.order.tenantOrderHolder.mobile,s.password=e.order.tenantOrderHolder.verificationCode):s=re({order:e.order,tenantId:g,detail:e.detail,insureDetail:e.insureDetail,iseeBizNo:_,saleUserId:i,saleChannelId:D,pageCode:"infoCollection",buttonCode:"EVENT_FREE_multiIssuePolicy"}),console.log("params",s);try{const{code:d,data:A}=await c(s);d==="10000"&&(e.newAuth=!1)}catch{console.log("e")}};return M(()=>{w(),setTimeout(async()=>{_=window.getIseeBiz&&await window.getIseeBiz()},1500)}),(c,s)=>{const d=Q("van-config-provider");return I(),W(d,{"theme-vars":t(o)},{default:b(()=>[a("div",fe,[p(z,{url:t(e).banner},null,8,["url"]),p(pe,{"is-first":t(e).newAuth,"insure-detail":t(e).insureDetail,detail:t(e).order,colors:t(e).colors},{default:b(()=>[p(E,{text:t(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C",onClick:S},null,8,["text"])]),_:1},8,["is-first","insure-detail","detail","colors"]),a("div",me,[(I(!0),C(k,null,j(t(e).productDesc,(A,h)=>(I(),C("img",{key:h,src:A},null,8,_e))),128))]),a("footer",he,[p(E,{text:t(e).newAuth?"\u7ACB\u5373\u9886\u53D6":"\u6FC0\u6D3B\u4FDD\u969C"},null,8,["text"])])])]),_:1},8,["theme-vars"])}}});var xe=x(Be,[["__scopeId","data-v-b242b83e"]]);export{xe as default};

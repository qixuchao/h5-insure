import{d as e,ce as a,k as t,o as l,c as s,b as o,w as i,F as n,s as r,u as d,p as c,v as u,e as p,b2 as v,n as m,f,a as h,bA as g,bz as I,dP as A,aV as y,aW as b,dh as k,h as x,i as _,ad as w,af as C,j as E,r as L,aY as O,dG as S,E as P,be as B,M as D,bO as T,dI as V,bc as R,l as N,cs as j,q as F,c9 as U,cn as M,bf as q,T as $,ao as H,bi as Y,cc as z,aZ as G,aX as Q,b1 as Z,am as K,dK as W,bk as J,b9 as X,dH as ee,c5 as ae}from"./index-12cd3482.js";import{a as te}from"./PolicyInfo-869fc4ac.js";import{_ as le}from"./AgentInfo-45f9280e.js";import{c as se}from"./cloneDeep-18be4447.js";import{i as oe,p as ie,s as ne,g as re}from"./trial-a0522283.js";import{a as de,c as ce}from"./product-1ea1ab1c.js";import{n as ue}from"./nextStep-90de1dac.js";import{e as pe,f as ve,S as me}from"./infoCollection-ad3178e1.js";import{P as fe}from"./index-36bc6269.js";import{v as he,g as ge,r as Ie}from"./utils-d0314071.js";import Ae from"./index-a70072ce.js";import ye from"./Video-5987a330.js";import be from"./index-9abc0b62.js";import ke from"./index-ddc34bf0.js";import xe from"./index-7fc8e176.js";import{u as _e}from"./useOrder-a269d385.js";import{_ as we}from"./TrialButton-75f9f94d.js";import{u as Ce}from"./useAttachment-7cb1a04e.js";import{p as Ee,t as Le}from"./utils-01c97fdd.js";import{P as Oe}from"./constants-6c7c253a.js";import{u as Se,q as Pe,a as Be}from"./core-1b8467fd.js";import"./questionnaire-42dcb602.js";import"./util-4af0f12b.js";import"./trial-3870dabe.js";import"./index-cfca3a37.js";import"./index-70844056.js";import"./useThread-637a02aa.js";import"./index-5ba2b19c.js";import"./format-31cde443.js";import"./createProposal-ee2b7ef5.js";const De={class:"refueling-package-com"},Te=h("div",{class:"title"},"加油包",-1),Ve=e({name:"package"}),Re=e({...Ve,props:{packageProductList:{default:()=>[]},isShowClose:{type:Boolean,default:!1},count:{default:3}},setup(e){const h=e,[y,b]=a(!1),k=t((()=>h.packageProductList.length>h.count&&(!!h.isShowClose||!y.value))),x=()=>{b()},_=t((()=>h.packageProductList.length<=h.count||y.value?h.packageProductList:h.packageProductList.slice(0,h.count)));return(e,a)=>{const t=g,h=I,b=A;return l(),s("div",De,[Te,o(b,{ref:"formRef"},{default:i((()=>[(l(!0),s(n,null,r(d(_),((e,a)=>(l(),c(h,{key:`${e.value}_${a}`,modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,label:e.packageName,required:"",placeholder:"请选择"},{input:i((()=>[o(t,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,options:d(pe),disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","options","disabled"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])))),128)),d(k)?(l(),s("div",{key:0,class:"show-more",onClick:x},[u(p(d(y)?"收起":"查看更多")+" ",1),o(v,{name:"down",class:m(["icon",{showMore:d(y)}])},null,8,["class"])])):f("",!0)])),_:1},512)])}}});const Ne={key:0},je=[h("div",{class:"__skeleton_short_content__"},[h("div",{class:"van-config-provider sk",style:{"--van-primary-color":"#0d6efe","--van-primary-color-light8":"#0d6efe80","--van-primary-color-light1":"#0d6efe10","--van-primary-color-light2":"#0d6efe20","--van-danger-color":"#FF3C10","--van-primary-background-color":"#0d6efe20","--van-button-primary-background-color":"#0d6efe","--van-button-primary-border-color":"#0d6efe","--van-checkbox-checked-bg-color":"#0d6efe10","--van-switch-on-background-color":"#0d6efe","--van-toast-default-padding":"14px","--van-linear-bg":"linear-gradient(to right, #0d6efe, rgba(13,150,254,1))","--van-popup-close-icon-margin":"20px","--van-popup-round-border-radius":"20px","--van-card-title":"#0d6efe","--van-card-cell-color":"#0d6efe80","--van-radio-checked-icon-color":"#0d6efe","--van-pro-check-radius":"40px"}},[h("div",{class:"page-internet-product-detail"},[h("div",{class:"info"},[h("div",{class:"van-image banner",style:{width:"100%",height:"223px"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},[h("img",{class:"van-image__img","data-src":"https://zatech-aquarius-v2-private-test.oss-cn-hangzhou.aliyuncs.com/common/20221222/e3719801cf6546449e18e06f3bbe8416/%E5%B0%8A%E4%BA%ABe%E7%94%9F.png?Expires=1676527379&OSSAccessKeyId=LTAI5t9uBW78vZ4sm5i3oQ5C&Signature=tkscLe6oOZYjnRIA%2B7AiMS3bOs0%3D",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",lazy:"loaded",style:{background:"rgb(238, 238, 238)"}})]),h("div")]),h("div",{class:"guarantee-list"},[h("div",{class:"header"},[h("span",null,[h("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"保障计划")]),h("span",null,[h("span",{class:"sk-text",style:{"--fp":"14.86%","--sp":"85.14%","--lh":"18.4999px"}},"查看详情")])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"一般医疗保险金")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高300万")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"重大疾病医疗保险金")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤质子重离子医疗")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤院外特定药品费用医疗")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高600万")])])]),h("div",{class:"common-cell-wrapper com-cell-wrapper guarantee-item"},[h("div",{class:"cell-container"},[h("div",{class:"left-part large"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"恶性肿瘤特定器械耗材费用医疗责任 （适用于女性被保险人）")]),h("div",{class:"divider"}),h("div",{class:"right-part"},[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"最高100万")])])]),h("div",{class:"show-more"},[h("span",{class:"sk-text",style:{"--fp":"14.29%","--sp":"85.71%","--lh":"16.799999999999997px"}},"查看更多 "),h("svg",{class:"svg-icon icon-arrow-down-dobule icon icon"},[h("use",{"xlink:href":"#icon-arrow-down-dobule"})])]),h("div",{class:"feerate-view sk-border"},[h("span",null,[h("span",{class:"sk-text",style:{"--fp":"15.00%","--sp":"85.00%","--lh":"19.9999px"}},"142.00元/年起")])])]),h("div",{class:"com-divider"}),h("div",{class:"tabs",sticky:"",scrollspy:""},[h("div",null,[h("div",{class:"van-sticky"},[h("div",{class:"van-tabs"},[h("div",{id:"tab-list",class:"tab-list"},[h("a",{class:"tab-title active",title:"产品亮点"},[h("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"产品亮点")]),h("a",{class:"tab-title",title:"理赔说明"},[h("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"理赔说明")]),h("a",{class:"tab-title",title:"我要投保"},[h("span",{class:"sk-text",style:{"--fp":"31.82%","--sp":"68.18%","--lh":"43.9999px"}},"我要投保")])])])])]),h("div",{class:"tab-content"},[h("div",{id:"tab1"},[h("div",{class:"spec"},[h("div",{class:"van-image detail-img",style:{width:"100%"}},[h("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",class:"van-image__img",style:{background:"rgb(238, 238, 238)"}})])])])])])])])],-1)],Fe=["theme-vars"],Ue={class:"info"},Me={class:"custom-page-form"},qe=h("div",{id:"xinaoDialog"},null,-1),$e=e({name:"InsuranceShort"}),He=e({...$e,setup(e){const a=y((()=>b((()=>import("./index-61f00cef.js")),["static/js/index-61f00cef.js","static/css/index-fa4edf2a.css","static/js/index-12cd3482.js","static/css/index-0e0d41bb.css","static/js/theme-94cf7d00.js","static/js/index-5ba2b19c.js","static/css/index-bbfdd7ec.css","static/js/utils-d0314071.js","static/js/infoCollection-ad3178e1.js","static/js/trial-3870dabe.js"]))),r=y((()=>b((()=>import("./index-3daac52c.js")),["static/js/index-3daac52c.js","static/css/index-c1e75aab.css","static/js/index-12cd3482.js","static/css/index-0e0d41bb.css"]))),v=y((()=>b((()=>import("./index-2c2dd36e.js")),["static/js/index-2c2dd36e.js","static/css/index-deee25e7.css","static/js/index-12cd3482.js","static/css/index-0e0d41bb.css","static/js/index-a4e3ac92.js","static/css/index-fc267eaa.css","static/js/infoCollection-ad3178e1.js","static/js/trial-3870dabe.js","static/js/format-31cde443.js"]))),m=y((()=>b((()=>import("./index-5b0cfbc4.js")),["static/js/index-5b0cfbc4.js","static/css/index-eabeb59f.css","static/js/index-12cd3482.js","static/css/index-0e0d41bb.css"])));y((()=>b((()=>import("./index-4de6a217.js")),["static/js/index-4de6a217.js","static/css/index-4822eb94.css","static/js/index-12cd3482.js","static/css/index-0e0d41bb.css"])));const g=y((()=>b((()=>import("./index-df0a5afc.js")),["static/js/index-df0a5afc.js","static/css/index-90a5175b.css","static/js/index-12cd3482.js","static/css/index-0e0d41bb.css","static/js/validator-6eb2e74e.js"]))),{VITE_BASE:I}={VITE_BASE:"/h5insure/",VITE_API_BASEURL:"/h5insure/",VITE_APP_TITLE:"投保流程",VITE_THEME_COLOR:"#C41E21",VITE_APP_DESCRIPTION:"一种互联网投保的快速落地实现方案",BASE_URL:"/h5insure/",MODE:"production",DEV:!1,PROD:!0},A=k(),pe=x(),De=_();Se();const{productCode:Te="",orderNo:Ve,proposalId:$e,tenantId:He,extraInfo:Ye,insurerCode:ze,preview:Ge,isShare:Qe,agentCode:Ze,templateId:Ke,proposalInsuredId:We,policyNo:Je}=De.query,{agentCode:Xe}=w.get(`${C}_userInfo`)||{},ea=E(),aa=E(),ta=E(),la=E(),sa=E(!1),oa=E({}),ia=E({}),na=E(!1),ra=E(!1),da=E(0),ca=E(!1);E({});const ua=E(!0),pa=E(!0),va=E(""),ma=E([]),fa=E({}),ha=E({}),ga=E([]),Ia=E(),Aa=L({submitData:{},riskVOList:[{}],userData:{},ifPersonalInfoSuccess:!1,trialMsg:"",trialResult:{},isFirst:!0,policyInfo:{schema:[],config:[],formData:{}}}),ya=E(),ba=E({}),ka=E({imgUrl:"",desc:"",title:"",link:`${window.location.href}&isShare=true`}),xa=_e({extInfo:{templateId:Ke,iseeBizNo:"",renewFlag:Je?O.YES:O.NO},periodType:S.short}),_a=E(),wa=E(),Ca=E(),Ea=E(!1),La=E(),Oa=E(!1);E(!1);const Sa=E({}),Pa=t((()=>!!Ge)),Ba=E([]),Da=E(),Ta=E(!0),Va=E(!1),Ra=async()=>{de({productCode:Te}).then((({data:e,code:a})=>{"10000"===a&&(oa.value=e,U(e.BASIC_INFO.title||""),oa.BASIC_INFO=e.BASIC_INFO,e.BASIC_INFO&&e.BASIC_INFO.themeType&&M(e.BASIC_INFO.themeType))})),await oe({productCode:Te,isTenant:!Ge}).then((({data:e,code:a})=>{var t;"10000"===a&&(ca.value=!0,ia.value=e,fa.value=null==(t=e.productPlanInsureVOList)?void 0:t[0],ga.value=(e.productPlanInsureVOList||[]).filter((e=>e.planCode)).map((e=>({planName:e.planName,planCode:e.planCode}))))})),$e?Ee({proposalId:$e,productCode:Te,tenantId:He,proposalInsuredId:We},(e=>{K("计划书查询参数"),Aa.userData=e,Ta.value=!1})):Ta.value=!1,pa.value=!1,ce({productCode:Te}).then((({code:e,data:a})=>{var t,l,s,o;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:i}=a;Da.value=e||[];const{basicInfo:{questionnaireType:n},questions:r,questionnaireName:d}=(null==(t=null==i?void 0:i[0])?void 0:t.questionnaireDetailResponseVO)||{basicInfo:{}};n&&(Ba.value=2===n?[{attachmentName:d,attachmentUri:r,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(l=null==r?void 0:r[0])?void 0:l.content,attachmentType:ge(String(null==(s=null==r?void 0:r[0])?void 0:s.textType),null==(o=null==r?void 0:r[0])?void 0:o.content)}])}D((()=>{Aa.isFirst=!1}))}))},Na=E([]);P((()=>Sa.value.planCode),(e=>{fa.value=(ia.value.productPlanInsureVOList||[]).find((a=>a.planCode===e))}));const ja=()=>{la.value.handleClickTab()("tab3")},Fa=E("");E(0);const Ua=()=>{const e=[];return ma.value.filter((e=>e.value===ve.INSURE)).forEach((a=>{e.push(...a.productRiskVoList)})),e},Ma=()=>{var e;const{insuranceEndDate:a,insuranceStartDate:t}=Sa.value;Object.assign(Aa.submitData,{...Aa.userData,tenantId:He,productCode:Te,productName:ia.value.productName,commencementTime:t,expiryDate:a,renewFlag:Je?O.YES:O.NO}),Aa.riskList=(()=>{const{chargePeriod:e,coveragePeriod:a,paymentFrequency:t,insuranceEndDate:l,insuranceStartDate:s}=Sa.value;return Ie([...Na.value,...Ua()]).map((l=>({...l,paymentFrequency:t,chargePeriod:e,coveragePeriod:a})))})();const l=Aa.submitData;return(null==(e=l.insuredList)?void 0:e.length)&&(l.insuredList=l.insuredList.map((e=>({...e,planCode:fa.value.planCode,productList:[{insurerCode:ze,productName:ia.value.productName,productCode:Te,productClass:ia.value.productClass,riskList:Aa.riskList}]})))),l},qa=E(),$a=async()=>{if(Pa.value)window.location.href=`${window.location.origin}${I}baseInsurance/orderDetail?orderNo=mockOrderNo&tenantId=${He}&ISEE_BIZ=${va}&productCode=${Te}&preview=true&templateView=${Ke}`;else try{const e=Le(Ma(),Aa.trialResult,{...xa.value,extInfo:{...xa.value.extInfo,iseeBizNo:va.value,autoRenewalInfo:Ia.value,buttonCode:W.short.saveOrUpdate,pageCode:"productInfo"},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}});ue(e,(async(e,a,t)=>{a===J.JUMP_PAGE&&pe.push({path:Oe[e.nextPageCode],query:De.query})}))}catch(e){console.log(e)}},{fileList:Ha,mustReadFileCount:Ya,popupFileList:za}=Ce(fa,Da),Ga=()=>{var e;za.value.length>0?(ua.value=!1,e=0,da.value=e,ra.value=!0):Ba.value.length>0?na.value=!0:$a()},Qa=()=>{na.value=!1,ra.value=!1,ua.value=!0},Za=E(""),Ka=(e,a)=>{if(e){const t=["birthday","age","gender","id"];a.includes("occupationCodeList")&&t.push("occupationClass"),Object.keys(e).forEach((l=>{[...a,...t].includes(l)||(e[l]=null)}))}},Wa=(e,a=(e=>!0))=>H(e)?e.filter(a).map((e=>e.code)):[],Ja=B((async(e=!1)=>{console.log(">>>>>调用试算<<<<<");const a=Ma();(Aa.ifPersonalInfoSuccess||ta.value.canTrail())&&(console.log(">>>数据构建<<<",Aa.submitData),await(async(e,a=!1)=>{Aa.trialMsg="试算中...",Aa.trialResult={},ie(e).then((a=>{var t,l;a.data&&a.code===q?(Za.value="",(null==(t=null==a?void 0:a.data)?void 0:t.errorInfo)&&$(`${null==(l=null==a?void 0:a.data)?void 0:l.errorInfo}`),qa.value=e,Aa.trialMsg="",Aa.trialResult=a.data):(Aa.trialMsg="",Za.value=a.message||"不符合投保条件")})).finally((()=>{Aa.isFirst=!1}))})(a,e))}),300),Xa=async(e,a=!1)=>{(e=>{const{holder:a,insuredList:t}=e||{};a&&(Aa.submitData.holder=a),t&&t.length>0&&t.forEach(((e,a)=>{var t;Aa.submitData.insuredList&&Aa.submitData.insuredList.length>a?Aa.submitData.insuredList[a]=e:((null==(t=Aa.submitData)?void 0:t.insuredList)||(Aa.submitData.insuredList=[]),Aa.submitData.insuredList.push(e))}))})(e),Aa.ifPersonalInfoSuccess=!0,console.log("投被保险人的信息回传 ",e),Ja()},et=async()=>{var e;if(Aa.isFirst=!1,Pa.value)Ga();else{if(!Qe)return void(()=>{const e=Le(Ma(),Aa.trialResult,{...xa.value,extInfo:{...xa.value.extInfo,iseeBizNo:va.value,autoRenewalInfo:Ia.value},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}});ne(e).then((({code:e,data:a})=>{if("10000"===e){const e={...De.query,isShare:1,orderNo:a,agentCode:Xe,expiryDate:X().format("YYYY-MM-DD")};ba.value={title:"标题",desc:"描述",imageUrl:ee,link:`${window.location.origin}${window.location.pathname}?${ae.stringify(e)}`,url:`${window.location.origin}${window.location.pathname}?${ae.stringify(e)}`},ya.value.handleShare(ba.value)}}))})();Ia.value=await aa.value.validate(),Promise.all([null==(e=_a.value)?void 0:e.validate(),ta.value.validate()]).then((async e=>{if(Za.value)return void $(Za.value);const a=await he(Aa.userData);console.log("result:",a),Ze===wa.value.agentCode?$a():Y.alert({message:"销售人员工号有误，请核对后重新录入",confirmButtonText:"我知道了"})})).catch((e=>{z(".page-internet-product-detail",".van-field--error")}))}},at=B((()=>{console.log("----监听事件变化，重新触发试算------",ta.value.validateTrialFields()),ta.value.validateTrialFields()&&Xa(Aa.userData)}),400);P((()=>xa.value.insuredList[0].relationToHolder),((e,a)=>{e!==a&&ma.value&&ma.value.forEach((e=>{e.value=ve.UN_INSURE})),D((()=>{const{certType:e,extInfo:a}=xa.value.insuredList[0];a&&!a.hasSocialInsurance&&(xa.value.insuredList[0].extInfo.hasSocialInsurance=me.HAS)}))}),{deep:!0,immediate:!0}),P([()=>fa.value,()=>Sa.value,()=>ma.value],(()=>{Aa.isFirst||at()}),{deep:!0,immediate:!0}),P((()=>fa.value),((e,a)=>{const{oilPackageProductVOList:t,planCode:l,insureProductRiskVOList:s,productFactor:o}=e||{};Sa.value.planCode=l,Na.value=s;const{agent:i,other:n}=T(o);Ca.value=null==i?void 0:i.schema,Aa.policyInfo={...Aa.policyInfo,...n},ha.value=(s||[]).find((e=>e.mainRiskFlag===O.YES)),ma.value=(t||[]).map((e=>({...e,value:ve.UN_INSURE}))),l!==(null==a?void 0:a.planCode)&&(null==a?void 0:a.planCode)&&Object.assign(Aa.userData,(()=>{console.log("--current plan = ",fa.value),console.log("---current submit = ",Aa.submitData);const e=se(Aa.userData),{1:a,2:t,3:l}=fa.value.productFactor||{};if(e.holder&&Ka(e.holder,Wa(a)),e.insuredList){const a=["productList","beneficiaryList"],s=Wa(t,(e=>"2"!==String(e.subModuleType))),o=Wa(t,(e=>"2"===String(e.subModuleType))),i=H(o),n=Wa(l),r=H(n);e.insuredList.forEach(((e,t)=>{var l;Ka(e,[...t>=1&&i?o:s,...a,...r?["insuredBeneficiaryType"]:[]]),(null==(l=e.beneficiaryList)?void 0:l.length)>0&&(r?e.beneficiaryList.forEach((e=>Ka(e,n))):e.beneficiaryList.length=0),e.planCode=fa.value.planCode}))}return e})())}),{deep:!0,immediate:!0});const tt=V(ea);D((()=>{G(ea,(([{isIntersecting:e}])=>{(e=>{tt.bottom.value<0||tt.top.value<0?sa.value=!e:sa.value=!1})(e)}))})),R((()=>{}));const lt=()=>{Pe({tenantId:He,saleUserId:Ze}).then((({code:e,data:a})=>{"10000"===e&&(La.value=a.agentCode,wa.value={...a,agentCode:""},w.set(`${C}_userInfo`,a),re({orderNo:Ve,tenantId:He}).then((async({code:e,data:a})=>{var t,l,s,o,i,n,r,d,c;if("10000"===e){xa.value=a,(null==(t=a.extInfo)?void 0:t.openId)||(console.log("await useOpenId()",await Be()),xa.value.extInfo.openId=await Be()),Oa.value=(null==(s=null==(l=a.insuredList)?void 0:l[0])?void 0:s.faceAuthFlag)===O.YES;const e=(null==(i=null==(o=xa.value.insuredList)?void 0:o[0])?void 0:i.planCode)||"";e&&(fa.value=(null==(n=ia.value.productPlanInsureVOList)?void 0:n.find((a=>a.planCode===e)))||(null==(d=null==(r=fa.value)?void 0:r.productPlanInsureVOList)?void 0:d[0])),Ea.value=!!(null==(c=a.holder)?void 0:c.name),Object.assign(Aa.userData,{...a,holder:{...a.holder,config:{name:{isView:Ea.value}}}}),Ea.value&&(wa.value.agentCode=La.value),Ta.value=!1}})))}))};return N((()=>{pa.value=!0,Ze&&lt(),Ra(),setTimeout((async()=>{va.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),j((()=>{})),(e,t)=>{var I,y,b,k,x,_,w,C,E,L,O,S,P,B,D,T,V,R;const N=le,j=te,U=Q,M=Z;return l(),s(n,null,[d(pa)?(l(),s("div",Ne,je)):(l(),s("div",{key:1,"data-skeleton-root":"SHORT","theme-vars":d(A),class:"page-internet-product-detail"},[h("div",Ue,[1==(null==(y=null==(I=d(oa))?void 0:I.BASIC_INFO)?void 0:y.bannerType)&&(null==(k=null==(b=d(oa))?void 0:b.BASIC_INFO)?void 0:k.banner.length)?(l(),c(Ae,{key:0,"data-skeleton-type":"img","indicator-color":"#ddd",images:null==(x=d(oa))?void 0:x.BASIC_INFO.banner},null,8,["images"])):f("",!0),2==(null==(w=null==(_=d(oa))?void 0:_.BASIC_INFO)?void 0:w.bannerType)&&(null==(E=null==(C=d(oa))?void 0:C.BASIC_INFO)?void 0:E.video.length)?(l(),c(ye,{key:1,"data-skeleton-type":"img",src:null==(L=d(oa))?void 0:L.BASIC_INFO.video[0]},null,8,["src"])):f("",!0),(null==(P=null==(S=null==(O=d(oa))?void 0:O.BASIC_INFO)?void 0:S.bannerMove)?void 0:P.length)?(l(),c(Ae,{key:2,url:null==(T=null==(D=null==(B=d(oa))?void 0:B.BASIC_INFO)?void 0:D.bannerMove)?void 0:T[0],onClick:ja},null,8,["url"])):f("",!0),h("div",{ref_key:"root",ref:ea},null,512)]),(null==(V=d(oa))?void 0:V.GUARANTEE)?(l(),c(be,{key:0,"show-service-config":"","data-source":d(oa),"plan-list":d(ga)},null,8,["data-source","plan-list"])):f("",!0),o(xe,{ref_key:"detailScrollRef",ref:la,"order-detail":d(xa),"data-source":d(oa)},{form:i((()=>{var e,a,s,i,n,r;return[h("div",Me,[d(Qe)?(l(),c(N,{key:0,ref_key:"agentRef",ref:_a,modelValue:d(wa),"onUpdate:modelValue":t[0]||(t[0]=e=>F(wa)?wa.value=e:null),"is-view":"",config:{agentCode:{isView:d(Ea)}},schema:d(Ca)},null,8,["modelValue","config","schema"])):f("",!0),(l(),c(fe,{key:d(fa).planCode,ref_key:"personalInfoRef",ref:ta,modelValue:d(Aa).userData,"onUpdate:modelValue":t[1]||(t[1]=e=>d(Aa).userData=e),"is-view":d(Va),"product-factor":null==(e=d(fa))?void 0:e.productFactor,"multi-insured-config":null==(a=d(fa))?void 0:a.multiInsuredConfigVO,onTrailChange:Xa},null,8,["modelValue","is-view","product-factor","multi-insured-config"])),(null==(i=null==(s=d(Aa).policyInfo)?void 0:s.schema)?void 0:i.length)?(l(),c(j,{key:1,modelValue:d(xa).extInfo,"onUpdate:modelValue":t[2]||(t[2]=e=>d(xa).extInfo=e),schema:d(Aa).policyInfo.schema},null,8,["modelValue","schema"])):f("",!0)]),o(d(v),{"form-info":d(Sa),"risk-info":d(ha),"tenant-product-detail":d(oa).PREMIUM,"plan-list":d(ga),"premium-info":{premium:null==(n=d(Aa).trialResult)?void 0:n.initialPremium,premiumLoadingText:d(Fa)}},null,8,["form-info","risk-info","tenant-product-detail","plan-list","premium-info"]),d(ma).length>0?(l(),c(Re,{key:0,"package-product-list":d(ma)},null,8,["package-product-list"])):f("",!0),o(d(g),{ref_key:"autoRenewRef",ref:aa,"ext-info":d(xa).extInfo,"product-factor":null==(r=d(fa))?void 0:r.productFactor},null,8,["ext-info","product-factor"])]})),_:1},8,["order-detail","data-source"]),o(U,null,{default:i((()=>{var e,a,t;return[(null==(e=d(oa).SIGNATURE)?void 0:e.inscribedContent)?(l(),c(d(m),{key:0,"inscribed-content":null==(t=null==(a=d(oa))?void 0:a.SIGNATURE)?void 0:t.inscribedContent},null,8,["inscribed-content"])):f("",!0)]})),_:1}),o(we,{premium:null==(R=d(Aa).trialResult)?void 0:R.initialPremium,"share-info":d(ka),"loading-text":d(Aa).trialMsg,"plan-code":d(Sa).planCode,"payment-frequency":d(Sa).paymentFrequency,"tenant-product-detail":d(oa),onHandleClick:et},{default:i((()=>[u(p(d(Qe)?"立即投保":"立即分享"),1)])),_:1},8,["premium","share-info","loading-text","plan-code","payment-frequency","tenant-product-detail"])],8,Fe)),o(M,{ref_key:"shareRef",ref:ya},null,512),d(ca)?(l(),c(ke,{key:2,"product-detail":d(oa)},null,8,["product-detail"])):f("",!0),qe,o(d(r),{show:d(na),"onUpdate:show":t[3]||(t[3]=e=>F(na)?na.value=e:null),"content-list":d(Ba),"active-index":0,onOnConfirmHealth:e.onCloseHealth,onOnCloseHealthByMask:Qa},null,8,["show","content-list","onOnConfirmHealth"]),d(ra)?(l(),c(d(a),{key:3,show:d(ra),"onUpdate:show":t[4]||(t[4]=e=>F(ra)?ra.value=e:null),"content-list":d(ua)?d(Ha):d(za),"is-only-view":d(ua),"active-index":d(da),text:d(ua)?"关闭":"我已逐页阅读并确认告知内容","force-read-count":d(ua)?0:d(Ya),onSubmit:e.onSubmit,onOnCloseFilePreviewByMask:Qa},null,8,["show","content-list","is-only-view","active-index","text","force-read-count","onSubmit"])):f("",!0)],64)}}});export{He as default};

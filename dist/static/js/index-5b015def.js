import{_ as e,d as a,a as s,r as t,J as o,E as l,cd as r,an as i,c as n,h as d,f as u,g as c,F as p,i as m,e as f,aE as v,G as h,w as k,k as g,y as I,A as y,j as b,n as V,t as O,a4 as C,bB as _,a7 as x,V as R,B as L,bE as S,bF as F,X as j,Y as w,b4 as T,a8 as N}from"./index-4edd55c0.js";import"./index-1d476210.js";import{I as D}from"./index-3ec48f63.js";import{l as P}from"./ProAddress.vue_vue_type_style_index_0_scoped_true_lang-9cb21fc0.js";import{c as U,t as E,_ as B}from"./index-3a3dffd7.js";import{f as H}from"./trial-fff0defb.js";import{_ as M}from"./TrialButton-fc636b08.js";import{S as q}from"./index-6faf7142.js";import{S as z,_ as W}from"./box-title-21893e1d.js";import{_ as A}from"./index-00cb93c9.js";import{T as Z}from"./Table-94bc36e5.js";import"./pdfh5-008ca364.js";import"./isObjectLike-f858f31d.js";import"./_nodeUtil-ef4cea77.js";import"./index-23711a8d.js";import"./echarts-5af64754.js";import"./empty-ae586b6c.js";var $=e(a({__name:"PersonalInfo",props:{productFactor:{default:()=>({})},modelValue:{default:()=>({})}},emits:["update:modelValue","trailChange"],setup(e,{expose:a,emit:v}){const h=e,{query:{insurerCode:k}={}}=s(),g=t(null),I=t(null),y=o({validated:!1,holder:{personVO:{},schema:[],trialFactorCodes:[],config:{occupation:{dictCode:U(k)}}},insured:{schema:[],trialFactorCodes:[],config:{occupation:{dictCode:U(k)}},insuredVOList:[{personVO:{}}]}}),b=l((()=>r(y.holder.schema)!==r(y.insured.schema))),V=()=>{var e,a;const s=null==(e=I.value)?void 0:e.map((e=>null==e?void 0:e.validate()));return Promise.all([null==(a=g.value)?void 0:a.validate(),...s])};return i((()=>h.productFactor),(()=>{const[e,a]=E(h.productFactor,!0);Object.assign(y.holder,e),Object.assign(y.insured,a)}),{deep:!0,immediate:!0}),i([()=>y.holder.personVO,()=>y.insured.insuredVOList],(()=>{const e={holder:y.holder.personVO,insuredVOList:y.insured.insuredVOList};v("update:modelValue",e),(()=>{const e=!!r(y.holder.trialFactorCodes)&&y.holder.trialFactorCodes.some((e=>{const a=y.holder.personVO[e];return P.exports.isNil(a)||""===a})),a=!!r(y.insured.trialFactorCodes)&&y.insured.trialFactorCodes.some((e=>y.insured.insuredVOList.some((a=>{const s=a.personVO[e];return P.exports.isNil(s)||""===s}))));return e||a})()||V().then((()=>{y.validated=!0,v("trailChange",e)})).catch((()=>{y.validated=!1}))}),{deep:!0}),a({validate:V}),(e,a)=>(n(),d(p,null,[u(c(B),{ref_key:"holderInfoRef",ref:g,title:c(b)?"":"投保人信息",class:"trail-personal-info",model:c(y).holder.personVO,schema:c(y).holder.schema,config:c(y).holder.config},null,8,["title","model","schema","config"]),(n(!0),d(p,null,m(c(y).insured.insuredVOList,((e,a)=>(n(),f(c(B),{ref_for:!0,ref_key:"insuredFormRef",ref:I,key:a,class:"trail-personal-info",title:c(b)?"":"被保人信息",model:e.personVO,schema:c(y).insured.schema,config:c(y).insured.config},null,8,["title","model","schema","config"])))),128))],64))}}),[["__scopeId","data-v-a2c06736"]]);const G={key:0},J={key:0,class:"risk2-field"};var X=e(a({__name:"index",props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:""})},showMainRisk:{type:Boolean,default:()=>!0}},emits:["trialChange"],setup(e,{emit:a}){const s=e;console.log("pop data source = ",s.dataSource);const l=o({loading:!1,show:!0,select:{},list:[],userData:{},riskIsInsure:{},submitData:{}}),r=t(),f=t({tenantId:"9991000007",productCode:"BDFZCHUN",holder:{personVO:{extInfo:{},certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456"}},insuredVOList:[{insuredCode:"",relationToHolder:"1",personVO:{extInfo:{hasSocialInsurance:"1"},relationToHolder:"1",certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456",socialFlag:"1"},productPlanVOList:[{insurerCode:"zhongan",planCode:"",riskVOList:[{amount:"6000000",chargePeriod:"year_5",copy:1,coveragePeriod:"to_68",paymentFrequency:"2",riskCategory:4,riskCode:"CBE00CHUN",riskName:"(勿动)利益演示测试",riskId:10325,riskType:1}]}]}]}),y=e=>{};return v((()=>{(()=>{l.riskIsInsure={};let e=null;s.dataSource.insureProductRiskVOList.forEach((a=>{const t=1!==a.mainRiskFlag?s.dataSource.productRiskRelationVOList.find((e=>e.collocationRiskId===a.riskId)):{};1===a.mainRiskFlag&&(e=a),l.riskIsInsure[a.riskId]={selected:"2",data:null,relation:t,isMust:!1}})),e&&s.dataSource.productRiskRelationVOList.filter((a=>a.riskId===e.riskId)).forEach((e=>{2===e.collocationType&&(l.riskIsInsure[e.collocationRiskId].selected="1",l.riskIsInsure[e.collocationRiskId].isMust=!0)}))})()})),h((()=>{l.loading=!0,H(f.value).then((e=>{r.value=e.data})).finally((()=>{l.loading=!1}))})),i((()=>l.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(a,t)=>{const o=q,r=I;return n(!0),d(p,null,m(e.dataSource.insureProductRiskVOList,(a=>(n(),d(p,{key:a.riskCode},[(!e.showMainRisk&&1!==a.mainRiskFlag||e.showMainRisk)&&c(l).riskIsInsure[a.riskId].relation?(n(),d("div",G,[u(r,{modelValue:c(l).riskIsInsure[a.riskId].selected,"onUpdate:modelValue":e=>c(l).riskIsInsure[a.riskId].selected=e,label:a.riskName,name:"selected","label-width":"50%",border:!1,class:"risk-select-field"},{input:k((()=>[u(o,{modelValue:c(l).riskIsInsure[a.riskId].selected,"onUpdate:modelValue":e=>c(l).riskIsInsure[a.riskId].selected=e,"active-value":"1","inactive-value":"2",size:"26px",disabled:c(l).riskIsInsure[a.riskId].isMust,onChange:e=>{return t=a,console.log("----data = ",t),void s.dataSource.productRiskRelationVOList.forEach((e=>{}));var t}},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"]),"1"===c(l).riskIsInsure[a.riskId].selected?(n(),d("div",J,[u(D,{modelValue:c(l).riskIsInsure[a.riskId].data,"onUpdate:modelValue":e=>c(l).riskIsInsure[a.riskId].data=e,"origin-data":a,"product-factor":e.dataSource.productFactor,onTrialChange:y},null,8,["modelValue","onUpdate:modelValue","origin-data","product-factor"])])):g("",!0)])):g("",!0)],64)))),128)}}}),[["__scopeId","data-v-ba49fd2c"]]);const Y={class:"benefit-table"},K=a({__name:"Table",props:{dataSource:null},setup(e){const a=e,s=l((()=>{const e=a.dataSource.headers.length,s=12*a.dataSource.headers.join("").length+20*a.dataSource.headers.length;return a.dataSource.headers.map(((a,t)=>{const o=s>320?12*a.length+20:Math.max(12*a.length+20,320/e);return console.log("totalWordWidth:",s,"titleWidth:",o,"word-width:",12*a.length+20),{title:a,key:`header_${t}`,fixed:t<2,minWidth:o}}))})),t=l((()=>a.dataSource.dataList.map((e=>{const a={};return e.forEach(((e,s)=>{a[`header_${s}`]=e})),a}))));return h((()=>{})),(e,a)=>(n(),d("div",Y,[u(Z,{"top-height":400,columns:c(s),data:c(t),"is-clone":!0},null,8,["columns","data"])]))}});const Q=e=>(j("data-v-da5503ea"),e=e(),w(),e),ee={class:"benefit-container"},ae={key:0,class:"benefit"},se=Q((()=>b("div",{class:"line"},null,-1))),te={class:"box-title box-title-chart"},oe=Q((()=>b("img",{class:"tl",src:W,alt:""},null,-1))),le=Q((()=>b("img",{class:"transform-z180 tr",src:W,alt:""},null,-1))),re={key:0},ie={class:"box"},ne={class:"box-title"},de=Q((()=>b("img",{class:"tl",src:W,alt:""},null,-1))),ue=Q((()=>b("img",{class:"transform-z180 tr",src:W,alt:""},null,-1))),ce={class:"box-price"},pe={class:"text1"},me={class:"text2"},fe={key:1},ve={key:2,style:{width:"100%, minWidth: 338px"}},he={class:"slider"},ke={style:{flex:"1",margin:"0px 5px"}},ge={class:"custom-button"},Ie=Q((()=>b("p",{class:"slider-dec"},"拖动按钮查看不同年龄保障",-1))),ye={class:"btn-two"};var be=e(a({__name:"index",props:{dataSource:{default:()=>[{}]},showTypeList:{default:()=>["1"]}},setup(e){const a=e,s="1",o="2",l="3",r=t(0),v=t(0),h=t(0),I=t(),j=t(0),w=t("3"),T=t(),N=e=>{if(!(null==e?void 0:e.benefitRiskResultVOList))return;const a=null==e?void 0:e.benefitRiskResultVOList[r.value];v.value=a.ageBegin+1,j.value=a.ageBegin+1,h.value=a.ageEnd},D=()=>{var e,s,t,o,l;const i=null==(s=null==(e=a.dataSource)?void 0:e.benefitRiskResultVOList)?void 0:s[r.value];T.value=null==(o=null==(t=a.dataSource)?void 0:t.benefitRiskResultVOList)?void 0:o[r.value].benefitRiskTableResultVOList[0];const{a:n,year:d}=((e,a)=>{const s=[],t=[];for(let o=e,l=0;o<=a;o++,l++)s.push(o.toString()),t.push(l+1);return{a:s,year:t}})(v.value,h.value),u={index:n.indexOf(j.value.toString()),age:n,year:d,result:null==(l=null==i?void 0:i.benefitRiskItemResultVOList)?void 0:l[0]};I.value=u},P=()=>{j.value>h.value-1||(j.value+=1,D())},U=()=>{j.value>v.value&&(j.value-=1,D())},E=e=>{r.value=e.name,N(a.dataSource),D()};return i((()=>a.dataSource),(e=>{e&&(N(e),D())}),{deep:!0,immediate:!0}),i(j,(()=>{D()})),(e,t)=>{const i=R,N=z,D=L,B=S,H=F;return n(),d("div",ee,[u(H,{active:c(r),onClickTab:E},{default:k((()=>{var e;return[(n(!0),d(p,null,m(null==(e=a.dataSource)?void 0:e.benefitRiskResultVOList,((e,a)=>(n(),f(B,{key:a,name:a,title:e.riskName},{default:k((()=>{var e,R,L,S,F,E,B,H,M,q,z,W,Z,$,G,J;return[a==c(r)?(n(),d("div",ae,[se,y(b("p",te,[oe,V(" 保单年度"),b("span",null,O(null==(L=null==(e=c(I))?void 0:e.year)?void 0:L[null==(R=c(I))?void 0:R.index]),1),V("年度，被保人"),b("span",null,O(null==(E=null==(S=c(I))?void 0:S.age)?void 0:E[null==(F=c(I))?void 0:F.index]),1),V("岁时 "),le],512),[[C,c(w)===o]]),c(w)===l?(n(),d("div",re,[b("div",ie,[b("p",ne,[de,V(" 保单年度"),b("span",null,O(null==(M=null==(B=c(I))?void 0:B.year)?void 0:M[null==(H=c(I))?void 0:H.index]),1),V("年度，被保人"),b("span",null,O(null==(W=null==(q=c(I))?void 0:q.age)?void 0:W[null==(z=c(I))?void 0:z.index]),1),V("岁时 "),ue]),b("div",ce,[(n(!0),d(p,null,m(null==($=null==(Z=c(I))?void 0:Z.result)?void 0:$.headers,((e,a)=>{var s,t,o,l,r;return n(),d("div",{key:a,style:{width:"33%"}},[b("p",pe,O(c(_)(Number(null==(r=null==(l=null==(t=null==(s=c(I))?void 0:s.result)?void 0:t.dataList)?void 0:l[null==(o=c(I))?void 0:o.index])?void 0:r[a]))),1),b("p",me,O(e)+"(元）",1)])})),128))])])])):g("",!0),c(w)===s?(n(),d("div",fe,[u(K,{"data-source":c(T)},null,8,["data-source"])])):g("",!0),c(w)==o?(n(),d("div",ve,[u(A,{min:c(v),max:c(h),current:c(j),data:null==(J=null==(G=c(I))?void 0:G.result)?void 0:J.benefitRiskItemList},null,8,["min","max","current","data"])])):g("",!0),b("div",he,[b("div",{class:"opt lf",onClick:U},[u(i,{name:"minus"})]),b("div",ke,[c(v)?(n(),f(N,{key:0,modelValue:c(j),"onUpdate:modelValue":t[0]||(t[0]=e=>x(j)?j.value=e:null),min:c(v),max:c(h),"bar-height":"8px"},{button:k((()=>[b("div",ge,O(c(j))+" 岁",1)])),_:1},8,["modelValue","min","max"])):g("",!0)]),b("div",{class:"opt rg",onClick:P},[u(i,{name:"plus"})])]),Ie,b("div",ye,[u(D,{round:"",plain:c(w)!==l,type:"primary",class:"btn",onClick:t[1]||(t[1]=e=>w.value=l)},{default:k((()=>[V("图表展示")])),_:1},8,["plain"]),u(D,{round:"",plain:c(w)!==o,type:"primary",class:"btn",onClick:t[2]||(t[2]=e=>w.value=o)},{default:k((()=>[V("趋势展示")])),_:1},8,["plain"]),u(D,{round:"",plain:c(w)!==s,type:"primary",class:"btn",onClick:t[3]||(t[3]=e=>w.value=s)},{default:k((()=>[V("表格展示")])),_:1},8,["plain"])])])):g("",!0)]})),_:2},1032,["name","title"])))),128))]})),_:1},8,["active"])])}}}),[["__scopeId","data-v-da5503ea"]]);const Ve={class:"trial-button"},Oe={class:"com-body"},Ce={class:"header"},_e=(e=>(j("data-v-39eeff69"),e=e(),w(),e))((()=>b("span",null,"算一算保费",-1))),xe={class:"container"};var Re=e(a({__name:"index",props:{dataSource:{type:Array,default:()=>[]},productInfo:{type:Object,default:()=>({productCode:"",productName:""})}},setup(e,{expose:a}){const s=e,l=t(null);console.log("pop data source = ",s.dataSource);const r=o({loading:!1,show:!0,select:{},list:[],userData:{},riskIsInsure:{},submitData:{}}),m=()=>{var e;null==(e=l.value)||e.validate().then((()=>{console.log("---- validate success ----")})),r.loading=!1,r.show=!0},I=()=>{r.show=!1,r.loading=!1},y=t(),O=t({tenantId:"9991000007",productCode:"BDFZCHUN",holder:{personVO:{extInfo:{},certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456"}},insuredVOList:[{insuredCode:"",relationToHolder:"1",personVO:{extInfo:{hasSocialInsurance:"1"},relationToHolder:"1",certType:"1",name:"春春",certNo:"320682199503303592",gender:"2",birthday:"1995-03-30",mobile:"13262279098",verificationCode:"123456",socialFlag:"1"},productPlanVOList:[{insurerCode:"zhongan",planCode:"",riskVOList:[{amount:"6000000",chargePeriod:"year_5",copy:1,coveragePeriod:"to_68",paymentFrequency:"2",riskCategory:4,riskCode:"CBE00CHUN",riskName:"(勿动)利益演示测试",riskId:10325,riskType:1}]}]}]}),C=()=>{r.riskIsInsure={},s.dataSource.insureProductRiskVOList.forEach((e=>{const a=s.dataSource.productRiskRelationVOList.find((a=>a.collocationRiskId===e.riskId));r.riskIsInsure[e.riskCode]={selected:"2",data:null,relation:a}}))},_=e=>{const{holder:a,insuredVOList:s}=e;a&&(r.submitData.holder={personVO:a}),s&&s.length>0&&s.forEach(((e,a)=>{r.submitData.insuredVOList&&r.submitData.insuredVOList.length>a?r.submitData.insuredVOList[a].personVO=e.personVO:r.submitData.insuredVOList=[{personVO:e.personVO}]})),console.log("投被保人的信息回传 ",r.submitData)},x=e=>{console.log("标准险种的信息回传",e)},R=e=>{};return v((()=>{C()})),h((()=>{r.loading=!0,H(O.value).then((e=>{y.value=e.data})).finally((()=>{r.loading=!1}))})),i((()=>r.show),(e=>{e&&C()})),a({open:()=>{r.show=!0}}),i((()=>r.riskIsInsure),(e=>{}),{deep:!0,immediate:!0}),(a,s)=>{const t=L,o=T,i=N;return n(),d(p,null,[b("div",Ve,[u(t,{type:"primary",onClick:s[0]||(s[0]=e=>c(r).show=!0)},{default:k((()=>[V("立即投保")])),_:1})]),u(i,{class:"com-trial-wrap",style:{height:"620px"},show:c(r).show,closeable:!1,onClose:I},{default:k((()=>[b("div",Oe,[b("div",Ce,[_e,u(o,{name:"cross",onClick:s[1]||(s[1]=e=>c(r).show=!1)})]),b("div",xe,[u(be,{"data-source":y.value},null,8,["data-source"]),e.dataSource.productFactor?(n(),f(c($),{key:0,ref:"personalInfoRef",modelValue:c(r).userData,"onUpdate:modelValue":s[2]||(s[2]=e=>c(r).userData=e),"product-factor":e.dataSource.productFactor,onTrailChange:_},null,8,["modelValue","product-factor"])):g("",!0),u(D,{ref_key:"insureInfosRef",ref:l,"origin-data":e.dataSource.insureProductRiskVOList[0],"product-factor":e.dataSource.productFactor,onTrialChange:x},null,8,["origin-data","product-factor"]),u(X,{"data-source":e.dataSource,"show-main-risk":!1,onTrialChange:R},null,8,["data-source"])]),u(M,{"is-share":!1,premium:100,"loading-text":"试算中...","plan-code":"todo计划的code","payment-frequency":"guaranteeObj.paymentFrequency","tenant-product-detail":"tenantProductDetail",onClick:m},{default:k((()=>[V("立即投保")])),_:1},8,["loading-text","payment-frequency"])])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-39eeff69"]]);export{Re as default};

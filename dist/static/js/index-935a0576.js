import{l as e}from"./ProAddress.vue_vue_type_style_index_0_scoped_true_lang-d5d6e075.js";import{_ as a,d as l,r as i,E as t,G as o,an as u,c as s,h as n,e as r,w as d,j as m,f as c,g as p,k as v,t as y,y as V,m as k,ap as g,i as b,F as f,a2 as h,bT as L,J as C,b8 as x}from"./index-24ce1811.js";import{S as D}from"./index-5441d9bd.js";import{S as O}from"./index-843be0fd.js";import{c as _}from"./trial-d2429143.js";function w(e){return Object.keys(e)}const I={key:0},S={class:"custom-field"},U={key:1,class:"flex-field"},K={class:"pro-radio-wrap"},A={key:2},F={class:"pro-radio-wrap"},P={class:"custom-field"},T={key:1},R={key:3},j={class:"custom-field"},E={key:1};var N=a(l({__name:"index",props:{originData:{default:()=>({})},modelValue:{default:()=>({})}},emits:["update:modelValue","trialChange"],setup(e,{emit:a}){const l=e;console.log("baoebaofei  = ",l.originData);const b=i(l.originData),f=i(l.modelValue),h=i(1),L=()=>{const{displayType:e,requireCopies:a}=b.value;1===e?h.value=1:3===e&&2===a?h.value=2:3===e&&1===a?(h.value=3,b.value.minCopiesValue===b.value.maxCopiesValue&&(f.value.copy=b.value.minCopiesValue)):2===e&&(h.value=4,b.value.minCopiesValue===b.value.maxCopiesValue&&(f.value.copy=b.value.minCopiesValue))},C=t((()=>2===b.value.saleMethod?{label:"保费",key:"premium"}:{label:"保额",key:"amount"})),x=t((()=>{if(b.value.displayValues){const e=(2===b.value.saleMethod?{label:"保费",key:"premium"}:{label:"保额",key:"amount"}).key;return 1===b.value.displayValues.length&&(f.value[e]=b.value.displayValues[0].value),b.value.displayValues.map((e=>({label:e.value,value:e.code})))}return[]})),O=()=>{console.log("-------------------",f.value,b.value.displayValues)};return o((()=>{L(),a("update:modelValue",f.value)})),u((()=>b),(e=>{L()}),{deep:!0}),u((()=>f.value),(e=>{a("update:modelValue",e),a("trialChange",e)}),{deep:!0,immediate:!0}),(a,l)=>{const i=D,t=V,o=k,u=g;return 1===h.value?(s(),n("div",I,[1===e.originData.saleMethod?(s(),r(t,{key:0,label:`基本${p(C).label}`,name:p(C).key,class:"risk-select-field"},{input:d((()=>[m("div",S,[c(i,{modelValue:f.value[p(C).key],"onUpdate:modelValue":l[0]||(l[0]=e=>f.value[p(C).key]=e),"input-width":"80px","default-value":e.originData.minStepValue,min:e.originData.minStepValue,step:e.originData.stepValue,max:e.originData.maxStepValue},null,8,["modelValue","default-value","min","step","max"])])])),_:1},8,["label","name"])):v("",!0)])):2===h.value?(s(),n("div",U,[c(u,{modelValue:f.value[p(C).key],"onUpdate:modelValue":l[2]||(l[2]=e=>f.value[p(C).key]=e),label:`基本${p(C).label}`,name:p(C).key,class:"risk-select-field"},{input:d((()=>[m("div",K,[c(o,{modelValue:f.value[p(C).key],"onUpdate:modelValue":l[1]||(l[1]=e=>f.value[p(C).key]=e),options:p(x),onclick:O},null,8,["modelValue","options"])])])),_:1},8,["modelValue","label","name"])])):3===h.value?(s(),n("div",A,[c(u,{modelValue:f.value[p(C).key],"onUpdate:modelValue":l[4]||(l[4]=e=>f.value[p(C).key]=e),label:`基本${p(C).label}`,name:p(C).key,class:"risk-select-field"},{input:d((()=>[m("div",F,[c(o,{modelValue:f.value[p(C).key],"onUpdate:modelValue":l[3]||(l[3]=e=>f.value[p(C).key]=e),options:p(x),onclick:O},null,8,["modelValue","options"])])])),_:1},8,["modelValue","label","name"]),c(t,{modelValue:f.value.copy,"onUpdate:modelValue":l[6]||(l[6]=e=>f.value.copy=e),label:"份数",name:"copy",class:"risk-select-field"},{input:d((()=>[m("div",P,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(s(),r(i,{key:0,modelValue:f.value.copy,"onUpdate:modelValue":l[5]||(l[5]=e=>f.value.copy=e),"input-width":"80px","default-value":e.originData.minCopiesValue,min:e.originData.minCopiesValue,step:1,max:e.originData.maxCopiesValue},null,8,["modelValue","default-value","min","max"])):(s(),n("span",T,y(e.originData.minCopiesValue),1))])])),_:1},8,["modelValue"])])):4===h.value?(s(),n("div",R,[c(t,{modelValue:f.value.copy,"onUpdate:modelValue":l[8]||(l[8]=e=>f.value.copy=e),label:"份数",name:"copy",class:"risk-select-field"},{input:d((()=>[m("div",j,[e.originData.minCopiesValue!==e.originData.maxCopiesValue?(s(),r(i,{key:0,modelValue:f.value.copy,"onUpdate:modelValue":l[7]||(l[7]=e=>f.value.copy=e),"input-width":"64px","default-value":e.originData.minCopiesValue,min:e.originData.minCopiesValue,step:1,max:e.originData.maxCopiesValue},null,8,["modelValue","default-value","min","max"])):(s(),n("span",E,y(e.originData.minCopiesValue),1))])])),_:1},8,["modelValue"])])):v("",!0)}}}),[["__scopeId","data-v-691215ff"]]);const q=[{name:"年金领取期间",type:"checkbox",configKey:["annuityDrawValueList"],valueKey:"annuityDrawDate"},{name:"领取频率",type:"checkbox",configKey:["annuityDrawFrequencyList"],valueKey:"annuityDrawType"},{name:"交费方式",type:"checkbox",configKey:["paymentFrequencyList"],valueKey:"paymentFrequency"},{name:"交费期间",type:"checkbox",configKey:["paymentPeriodValueList"],valueKey:"chargePeriod"},{name:"保障期间",type:"checkbox",configKey:["insurancePeriodValueList"],valueKey:"coveragePeriod"}];const M={class:"pro-radio-wrap"};var $=a(l({__name:"index",props:{originData:{default:()=>({})},modelValue:{default:()=>({})},riskCode:{default:""}},emits:["trialChange"],setup(a,{emit:l}){const t=a,y=i(t.originData),V=i(t.modelValue);i(1);const h=()=>{q.forEach((a=>{const l=e.exports.get(t.originData,a.configKey);"checkbox"===a.type&&l&&l.length>0&&(V.value[a.valueKey]=l[0].code)}))};return o((()=>{h()})),u((()=>y.value),(e=>{h()}),{deep:!0,immediate:!0}),u((()=>V.value),(e=>{l("trialChange",e)}),{deep:!0,immediate:!0}),(l,i)=>{const o=k,u=g;return s(!0),n(f,null,b(p(q),(l=>(s(),n(f,null,[p(e.exports.get)(a.originData,l.configKey)?(s(),n("div",{key:a.riskCode+"_"+l.name},["checkbox"===l.type?(s(),r(u,{key:0,modelValue:V.value[l.valueKey],"onUpdate:modelValue":e=>V.value[l.valueKey]=e,label:l.name,name:l.valueKey,class:"risk-select-field"},{input:d((()=>{return[m("div",M,[c(o,{modelValue:V.value[l.valueKey],"onUpdate:modelValue":e=>V.value[l.valueKey]=e,options:(a=l.configKey,e.exports.get(t.originData,a).map((e=>({label:e.value,value:e.code}))))},null,8,["modelValue","onUpdate:modelValue","options"])])];var a})),_:2},1032,["modelValue","onUpdate:modelValue","label","name"])):v("",!0)])):v("",!0)],64)))),256)}}}),[["__scopeId","data-v-4dfdb9b1"]]);const J={class:"com-risk-liabilityinfo"},z={class:"item-wrap"},G={key:0},B=m("div",{class:"cell-content"},null,-1),H=l({__name:"index",props:{dataSource:{default:()=>({})},modelValue:{default:()=>({})},dataSourceFolmulate:{default:()=>({})},params:{default:()=>({amountUnit:"",basicsAmount:"",basicsPremium:"",riskId:""})}},emits:["trialChange"],setup(e,{emit:a}){const l=e,t=i({formInfo:l.dataSource,isCheckList:[],checkValueList:[],liabilityVOList:[]});return u((()=>l.dataSourceFolmulate),(e=>{var a,i;const t=null==(a=l.dataSourceFolmulate)?void 0:a.amount,o=null==(i=l.dataSourceFolmulate)?void 0:i.premium;console.log("props.amount-----------------",t);const u={amountUnit:l.params.amountUnit,basicsAmount:t,basicsPremium:o,riskId:l.params.riskId},s=l.dataSource.riskLiabilityInfoVOList.map((async e=>{if(e.formula.length>0&&(t||o)){const{code:a,data:l}=await _({...u,riskLiabilities:[e]});return"10000"===a?(e.liabilityAttributeValueList=l[0].formulaResult,{...e,liabilityAttributeValueList:l[0]}):e}}));console.log("liabilityItem>>>>>>",s),console.log("riskLiabilityInfoVOList>>>>>>",l.dataSource.riskLiabilityInfoVOList)}),{deep:!0,immediate:!0}),u((()=>t.value.liabilityVOList),(e=>{const l=t.value.liabilityVOList.filter((e=>"1"===e.isSwitchOn)).map((e=>({...e.liabilityValue})));a("trialChange",l)}),{deep:!0,immediate:!0}),o((()=>{l.dataSource.riskLiabilityInfoVOList.map(((e,a)=>(e.liabilityAttributeValueList.length>0&&e.liabilityAttributeValueList[0].actualValue,1!=+e.showFlag&&t.value.liabilityVOList.push({liabilityValue:e,key:a,isSwitchOn:"1"}),null)))})),(a,l)=>{const i=O,o=g,u=h,y=L;return s(),r(y,null,{default:d((()=>[m("div",J,[m("div",z,[(s(!0),n(f,null,b(e.dataSource.riskLiabilityInfoVOList,((e,a)=>(s(),n("div",{key:a},[1==+e.showFlag?(s(),n("div",G,[c(o,{label:`${e.liabilityName}`,"label-width":"40%",name:"insuredRelation"},{input:d((()=>[1==+e.insureFlag?(s(),r(i,{key:0,modelValue:p(t).isCheckList[a],"onUpdate:modelValue":e=>p(t).isCheckList[a]=e,"active-value":"1","inactive-value":"2",size:"26px",onClick:l=>((e,a)=>{const l=t.value.liabilityVOList.map((e=>e.key)),i=0===e.liabilityAttributeValueList.length&&0===e.formula.length,o=t.value.isCheckList[a];console.log("key---------",l),console.log("(key_list).indexOf(index)",l.indexOf(a)),i&&-1===l.indexOf(a)&&o&&t.value.liabilityVOList.push({liabilityValue:e,key:a,isSwitchOn:t.value.isCheckList[a]}),-1!==l.indexOf(a)&&t.value.liabilityVOList.forEach((e=>{e.key===a&&(e.isSwitchOn=t.value.isCheckList[a])}))})(e,a,p(t).isCheckList[a])},null,8,["modelValue","onUpdate:modelValue","onClick"])):v("",!0)])),_:2},1032,["label"]),1==+p(t).isCheckList[a]||1===e.attributeFlag&&2===e.insureFlag?(s(),r(o,{key:0,label:e.liabilityAttributeTypeDesc,"label-width":"40%",name:"insuredRelation"},{input:d((()=>[c(k,{modelValue:p(t).checkValueList[a],"onUpdate:modelValue":e=>p(t).checkValueList[a]=e,prop:{label:"displayValue",value:"actualValue"},options:(e.formula.length,e.liabilityAttributeValueList),onClick:l=>((e,a)=>{console.log("keykeykey>>>>>>",a);const l=e.liabilityAttributeValueList.filter((e=>e.actualValue===t.value.checkValueList[a])),i=JSON.parse(JSON.stringify(l))[0],o={...e,liabilityValue:i};t.value.liabilityVOList.length>0&&Object.keys(t.value.checkValueList).indexOf(a)&&(t.value.liabilityVOList=t.value.liabilityVOList.filter((e=>e.key!==a))),t.value.liabilityVOList.push({liabilityValue:o,key:a,isSwitchOn:"1"}),console.log("state.liabilityVOList>>>>>>",t.value.liabilityVOList)})(e,a)},null,8,["modelValue","onUpdate:modelValue","options","onClick"])])),_:2},1032,["label"])):v("",!0)])):v("",!0)])))),128))])]),B,c(u)])),_:1})}}});var Q=a(l({__name:"index",props:{originData:{default:()=>({})},modelValue:{default:()=>({})}},emits:["trialChange"],setup(a,{expose:l,emit:t}){const u=a,r=C({personalInfo:{},basicsAmount:"",basicsPremium:""}),d=i(null),m=i({}),v=i({});x("premium"),v.value=x("enumList")||{},o((()=>{console.log("--------origin data = ",u.originData)}));const y=e.exports.debounce((()=>{u.originData.mainRiskFlag,m.value.riskCategory=u.originData.riskCategory,m.value.riskCode=u.originData.riskCode,m.value.riskId=u.originData.riskId,m.value.riskType=u.originData.riskType,m.value.riskName=u.originData.riskName,m.value.riskType=u.originData.riskType,t("trialChange",m.value)}),300),V=e=>{w(e).forEach((a=>{m.value[a]=e[a]})),console.log("toubaoxinxi change: ",m.value),y()},k=e=>{var a,l;1==+(null==(l=null==(a=u.originData)?void 0:a.productRiskInsureLimitVO)?void 0:l.amountPremiumConfigVO.saleMethod)?r.basicsAmount=null==e?void 0:e.amount:r.basicsAmount=null==e?void 0:e.premium,w(e).forEach((a=>{m.value[a]=e[a]})),console.log("baoebaofei change ",m.value),y()},g=e=>{console.log("handleRiskLiabilityChange change ",e),m.value.liabilityVOList=e,y()};return l({validate:async()=>{var e;await(null==(e=d.value)?void 0:e.validate())}}),(e,l)=>{var i,t,o,u,d;return s(),n(f,null,[c(p(N),{"v-model":p(m),"origin-data":null==(t=null==(i=a.originData)?void 0:i.productRiskInsureLimitVO)?void 0:t.amountPremiumConfigVO,onTrialChange:k},null,8,["v-model","origin-data"]),c(p($),{"v-model":p(m),"origin-data":a.originData.productRiskInsureLimitVO,"risk-code":a.originData.riskCode,onTrialChange:V},null,8,["v-model","origin-data","risk-code"]),c(p(H),{"data-source-folmulate":p(m),"data-source":a.originData,params:{amountUnit:null==(u=null==(o=a.originData)?void 0:o.productRiskInsureLimitVO)?void 0:u.amountPremiumConfigVO.displayUnit,basicsAmount:p(r).basicsAmount,basicsPremium:p(r).basicsPremium,riskId:null==(d=a.originData)?void 0:d.riskId},onTrialChange:g},null,8,["data-source-folmulate","data-source","params"])],64)}}}),[["__scopeId","data-v-20030026"]]);export{Q as I};

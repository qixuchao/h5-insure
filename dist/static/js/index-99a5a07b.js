var K=Object.defineProperty,X=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var b=(u,n,o)=>n in u?K(u,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[n]=o,c=(u,n)=>{for(var o in n||(n={}))w.call(n,o)&&b(u,o,n[o]);if(x)for(var o of x(n))ee.call(n,o)&&b(u,o,n[o]);return u},r=(u,n)=>X(u,Z(n));import{h as te,aa as ae,P as ne,G as _,j as oe,r as f,k as i,m as p,n as N,s as S,p as D,H as T,M as y,B as l,F as g,A as se,E as ue,T as le}from"./vendor-b80b3531.js";import{l as q}from"./inform-ef9360d6.js";import{_ as ie,g as ce,n as re,b as de}from"./index-87f330cd.js";import{Q as v,a as C,I as M,H as _e,b as $,c as pe}from"./notice-8f6df5db.js";import{s as ve}from"./useStorage-df1715de.js";import{g as R}from"./verify-8e2b9560.js";const Ce={class:"footer-button"},Be=ue("\u4E0B\u4E00\u6B65"),me=te({setup(u){const n=ae(),o=ne(),{productCode:j="MMBBSF",agentCode:Q="65434444",tenantId:k=9991000007,agencyCode:Ee="3311222",insurerCode:F="zhongan",productCategory:L=1,templateId:fe=1,orderNo:h="2022080217103534947"}=o.query,H=1,Y=1,B=_([]),d=_({});_(!1);const I=_([]),O=_([]),U=t=>B.value.filter(a=>a.objectType===t),V=()=>{ce({orderNo:h,saleUserId:Q,tenantId:k}).then(({code:t,data:a})=>{t==="10000"&&Object.assign(d.value,a)})},z=()=>{const t={orderNo:h,productCode:j,tenantId:k,objectType:$};R(c({},t)).then(({code:a,data:s})=>{a==="10000"&&(O.value=s||[])}),R(r(c({},t),{objectType:M})).then(({code:a,data:s})=>{a==="10000"&&(I.value=s||[])})},G=()=>{const t={insurerCode:F,orderNo:h,productCategory:L,tenantId:k};Promise.all([q(r(c({},t),{noticeType:_e,objectType:$})),q(r(c({},t),{noticeType:pe,objectType:M}))]).then(([{code:a,data:s},{code:E,data:P}])=>{a==="10000"&&E==="10000"&&(B.value=[...s,...P])})},m=t=>{var a;ve.set("questionData",t),n.push({path:"/healthNotice",query:c({materialType:(t==null?void 0:t.materialSource)?"product":"question",questionnaireType:(t==null?void 0:t.materialSource)?Y:t.questionnaireType,orderId:(a=d.value)==null?void 0:a.id},o.query)})},J=()=>{if(![...I.value,...O.value,...B.value].every(a=>a.isDone===H)){le("\u8BF7\u5B8C\u6210\u6240\u6709\u544A\u77E5\u8FDB\u884C\u4E0B\u4E00\u6B65");return}Object.assign(d.value,{pageCode:"questionNotice",tenantOrderNoticeList:B.value}),re(r(c({},d.value),{extInfo:r(c({},d.value.extInfo),{pageCode:"questionNotice"}),venderCode:F})).then(({code:a,data:s})=>{a==="10000"&&s.pageAction.pageAction==="jumpToPage"&&n.push({path:de[s.pageAction.data.nextPageCode],query:o.query})})};return oe(()=>{G(),z(),V()}),(t,a)=>{const s=f("van-cell"),E=f("ProCard"),P=f("van-button"),W=f("ProPageWrap");return i(),p(W,{class:"page-question-notice"},{default:N(()=>[S(E,{title:"\u6295\u4FDD\u4EBA"},{default:N(()=>[(i(!0),D(g,null,T(U(l(C)),e=>(i(),p(s,{key:e.id,class:y({"is-active":e.isDone===l(v)}),title:`\u300A${e.title}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:A=>m(e)},null,8,["class","title","value","onClick"]))),128)),(i(!0),D(g,null,T(O.value,e=>(i(),p(s,{key:e.id,class:y({"is-active":e.isDone===l(v)}),title:`\u300A${e.materialName}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:A=>m(e)},null,8,["class","title","value","onClick"]))),128))]),_:1}),S(E,{title:"\u88AB\u4FDD\u4EBA"},{default:N(()=>[(i(!0),D(g,null,T(U(l(v)),e=>(i(),p(s,{key:e.id,class:y({"is-active":e.isDone===l(v)}),title:`\u300A${e.title}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:A=>m(e)},null,8,["class","title","value","onClick"]))),128)),(i(!0),D(g,null,T(I.value,e=>(i(),p(s,{key:e.id,class:y({"is-active":e.isDone===l(v)}),title:`\u300A${e.materialName}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:A=>m(e)},null,8,["class","title","value","onClick"]))),128))]),_:1}),se("div",Ce,[S(P,{type:"primary",onClick:J},{default:N(()=>[Be]),_:1})])]),_:1})}}});var Ie=ie(me,[["__scopeId","data-v-41cd2673"]]);export{Ie as default};

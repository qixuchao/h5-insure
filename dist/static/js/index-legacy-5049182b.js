!function(){var e=document.createElement("style");e.innerHTML=".com-field-info[data-v-35c1ec17]{display:flex;align-items:center;justify-content:space-between;height:1.41333rem;border-top:1px solid #eeeff4}.com-field-info .title[data-v-35c1ec17]{flex:0 0 3.33333rem;font-size:.4rem;font-weight:600;color:#393d46}.com-field-info .desc[data-v-35c1ec17]{flex:1;text-align:right;font-size:.4rem;color:#515865;line-height:.56rem}\n",document.head.appendChild(e),System.register(["./vendor-legacy-1e86c4b9.js","./index-legacy-76bf2e6e.js","./trial-legacy-6fe469af.js","./product-legacy-0842b432.js","./trial-legacy-367e4e73.js"],(function(e){"use strict";var t,r,n,d,i,a,o,s,l,u,c,y,p,m,v,I,O,f,L,g,b,h,k,N,C,T,P,H;return{setters:[function(e){t=e.g,r=e.j,n=e.n,d=e.z,i=e.J,a=e.a9,o=e.O,s=e.E,l=e.h,u=e.r,c=e.p,y=e.m,p=e.A,m=e.C,v=e.T},function(e){I=e._,O=e.l,f=e.G},function(e){L=e.i,g=e.a,b=e.s,h=e.e,k=e.E},function(e){N=e.p},function(e){C=e.e,T=e.i,P=e.P,H=e.I}],execute:function(){const _={class:"com-field-info"},D={class:"title"},w={class:"desc"};var S=I(t({props:{title:{type:String,default:""},desc:{type:String,default:""}},setup:e=>(t,a)=>(r(),n("div",_,[d("div",D,i(e.title),1),d("div",w,i(e.desc),1)]))}),[["__scopeId","data-v-35c1ec17"]]);const V={class:"page-product-detail"},x={class:"footer-button"},R={class:"price"},q=m(" 总保费"),A=m("升级保障");e("default",t({setup(e){a();const t=o(),{productCode:m,orderId:I,tenantId:_}=t.query;s();const D=s(),w=s(),F=s(),j=s(),E=e=>{const t=e.find((e=>e.riskType===C.MAIN_RISK));return e.map((e=>{var r;const{riskInsureLimitVO:n,riskCategory:d,id:i,riskType:a,riskName:o,riskCode:s,riskLiabilityInfoVOList:l,riskCalcMethodInfoVO:u}=e,{insurancePeriodType:c,insurancePeriodValueList:y,paymentFrequencyList:p,paymentPeriodValueList:m,paymentPeriodType:v,annuityDrawFrequencyList:I,annuityDrawValueList:O,insurancePeriodRule:f,paymentPeriodRule:L}=n,{fixedAmount:g,minCopy:b}=u,h={amount:g,riskCode:s,riskId:i,riskName:o,chargePeriod:null==m?void 0:m[0],annuityDrawDate:null==O?void 0:O[0],riskType:a,annuityDrawFrequency:null==I?void 0:I[0],copy:b,coveragePeriod:null==y?void 0:y[0],insuredCode:null===(r=D.value)||void 0===r?void 0:r.insurerCode,liabilityVOList:l.filter((e=>1===e.optionalFlag)),paymentFrequency:null==p?void 0:p[0],riskCategory:d};return a===C.MAIN_RISK?h:(f===T.ONE_YEAR&&(h.coveragePeriod="year_1"),L===T.ONE_YEAR&&(h.chargePeriod="year_1"),{...h,mainRiskId:null==t?void 0:t.id,mainRiskCode:null==t?void 0:t.riskCode})}))},M=(e,t)=>e.map((e=>{var r,n;return{tenantId:_,amountUnit:1,annuityDrawFrequency:e.annuityDrawDate,annuityDrawType:e.annuityDrawType,paymentFrequency:e.paymentFrequency,paymentPeriod:e.chargePeriod.split("_")[1],paymentPeriodType:P[e.chargePeriod.split("_")[0]],insurancePeriodType:H["to_life"===e.coveragePeriod?"to_life":e.coveragePeriod.split("_")[0]],insurancePeriodValue:Number.isNaN(+e.coveragePeriod.split("_")[1])?0:e.coveragePeriod.split("_")[1],riskCode:e.riskCode,riskType:e.riskType,extInfo:{riskId:e.riskId,copy:e.copy},initialPremium:null===(r=t[e.riskCode])||void 0===r?void 0:r.premium,liabilityDetails:e.liabilityVOList.map((e=>({liabilityCode:e.liabilityCode,liabilityName:e.liabilityName,refundMethod:e.liabilityAttributeValue}))),productId:null===(n=D.value)||void 0===n?void 0:n.id}})),B=async()=>{const e=(()=>{const e=E(w.value.productRiskVoList[0].riskDetailVOList),t=M(e,{}),r=F.value;return{tenantId:_,venderCode:r.venderCode,orderDataSource:r.orderDataSource,tenantOrderHolder:{tenantId:r.tenantOrderHolder.tenantId,name:r.tenantOrderHolder.name,certType:r.tenantOrderHolder.certType,certNo:r.tenantOrderHolder.certNo,mobile:r.tenantOrderHolder.mobile,birthday:r.tenantOrderHolder.birthday,gender:r.tenantOrderHolder.gender},extInfo:r.extInfo.extraInfo,tenantOrderInsuredList:[{tenantId:r.tenantOrderInsuredList[0].tenantId,relationToHolder:r.tenantOrderInsuredList[0].relationToHolder,insuredBeneficiaryType:r.tenantOrderInsuredList[0].insuredBeneficiaryType,name:r.tenantOrderInsuredList[0].name,hasSocialInsurance:r.tenantOrderInsuredList[0].hasSocialInsurance,certType:r.tenantOrderInsuredList[0].certType,certNo:r.tenantOrderInsuredList[0].certNo,mobile:r.tenantOrderInsuredList[0].mobile,birthday:r.tenantOrderInsuredList[0].birthday,gender:r.tenantOrderInsuredList[0].gender,tenantOrderProductList:[{tenantId:r.tenantOrderInsuredList[0].tenantOrderProductList[0].tenantId,productCode:D.value.productCode,productName:D.value.productName,premium:j.value,tenantOrderRiskList:t}]}]}})(),t=await b(e),{code:r,data:n}=t;return"10000"===r?n.data:""},z=()=>{const e=F.value;return{agencyId:e.agencyId,venderCode:e.venderCode,applicationNo:e.applicationNo,orderDataSource:e.orderDataSource,orderNo:e.orderNo,orderStatus:e.orderStatus,policyNo:e.policyNo,tenantId:_,orderAmount:j.value,tenantOrderHolder:{tenantId:e.tenantOrderHolder.tenantId,name:e.tenantOrderHolder.name,certType:e.tenantOrderHolder.certType,certNo:e.tenantOrderHolder.certNo,mobile:e.tenantOrderHolder.mobile,birthday:e.tenantOrderHolder.birthday,gender:e.tenantOrderHolder.gender},tenantOrderInsuredList:[{premium:j.value,tenantId:e.tenantOrderInsuredList[0].tenantId,relationToHolder:e.tenantOrderInsuredList[0].relationToHolder,insuredBeneficiaryType:e.tenantOrderInsuredList[0].insuredBeneficiaryType,name:e.tenantOrderInsuredList[0].name,hasSocialInsurance:e.tenantOrderInsuredList[0].hasSocialInsurance||1,certType:e.tenantOrderInsuredList[0].certType,certNo:e.tenantOrderInsuredList[0].certNo,mobile:e.tenantOrderInsuredList[0].mobile||"13061958179",birthday:e.tenantOrderInsuredList[0].birthday,gender:e.tenantOrderInsuredList[0].gender,tenantOrderProductList:[{tenantId:e.tenantOrderInsuredList[0].tenantOrderProductList[0].tenantId,productCode:D.value.productCode,productName:D.value.productName,tenantOrderRiskList:M(E(w.value.productRiskVoList[0].riskDetailVOList),{})}]}]}},K=async()=>{const e=z(),t=await h(e),{code:r,data:n}=t;"10000"===r&&(j.value=n.installmentPremium)},Y=async e=>{await K();(async e=>{const t=z(),r=await k({id:e,...t}),{code:n,data:d}=r;"10000"===n&&v("保障升级成功")})(await B())};return l((()=>{(()=>{const e=N({productCode:m,withInsureInfo:!0}),t=L({productCode:m}),r=g({id:I,tenantId:_});Promise.all([e,t,r]).then((([e,t,r])=>{"10000"===e.code&&(D.value=e.data),"10000"===t.code&&(w.value=t.data),"10000"===r.code&&(F.value=r.data),K()}))})()})),(e,t)=>{const a=u("van-button");return r(),n("div",V,[c(O,null,{default:y((()=>{var e,t,r,n,d,i,a,o;return[c(S,{title:"姓名",desc:null===(e=F.value)||void 0===e||null===(t=e.tenantOrderInsuredList)||void 0===t?void 0:t[0].name},null,8,["desc"]),c(S,{title:"证件号码",desc:null===(r=F.value)||void 0===r||null===(n=r.tenantOrderInsuredList)||void 0===n?void 0:n[0].certNo},null,8,["desc"]),c(S,{title:"手机号码",desc:null===(d=F.value)||void 0===d||null===(i=d.tenantOrderInsuredList)||void 0===i?void 0:i[0].mobile},null,8,["desc"]),c(S,{title:"有无社保",desc:null===(a=F.value)||void 0===a||null===(o=a.tenantOrderInsuredList)||void 0===o?void 0:o[0].hasSocialInsurance},null,8,["desc"])]})),_:1}),d("div",x,[d("div",R,[q,d("span",null,"￥"+i(p(f)(j.value))+"/月",1)]),c(a,{type:"primary",class:"right",onClick:Y},{default:y((()=>[A])),_:1})])])}}}))}}}))}();

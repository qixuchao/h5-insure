import{r as w,g as F,h as W,o as _,i as I,j as t,k as e,m as Ce,_ as A,L as H,A as v,t as d,J as D,G as x,F as R,a1 as ye,p as te,$ as O,O as M,B as g,U as $,a2 as Ie,P as X,Q as J,H as E,z as G,E as U,W as ke,R as ee,K as Le,v as Pe,X as Te}from"./vendor-8d9a202a.js";import{_ as q,j as be}from"./index-e25d276f.js";import{P as Se,b as Ne,a as $e}from"./da-cc90ce4d.js";import{q as De}from"./index-06a2eef5.js";import{u as we,P as Be}from"./index-f9e2becf.js";import{q as Ve}from"./proposalList-6f5261a6.js";import"./index-9df3dcd0.js";import"./trial-05013f8e.js";import"./trial-192d1d4c.js";import"./useStorage-74d60773.js";function xe(s=!1){const l=w(s);return{isPopShow:l,openPop:a=>{a instanceof Function&&a(),l.value=!0},closePop:a=>{l.value=!1,a instanceof Function&&a()}}}const Fe=["xlink:href"],Ee=F({props:{name:{type:String,required:!0},color:{type:String,default:""}},setup(s){const l=s,r=W(()=>`#icon-${l.name}`),i=W(()=>l.name?`svg-icon icon-${l.name}`:"svg-icon");return(a,C)=>(_(),I("svg",Ce({class:e(i)},a.$attrs,{style:{color:s.color}}),[t("use",{"xlink:href":e(r)},null,8,Fe)],16))}});const Oe={class:"com-product-item"},Me={class:"content-wrap"},Ue={class:"product-image"},Ae={class:"insure-name"},Re={class:"product-info"},qe={class:"title"},ze={class:"description"},je={class:"tags"},We=F({props:{productInfo:{default:()=>({})}},setup(s){const l=s,{productInfo:r}=A(l),i=H({checked:!1});return A(i),(a,C)=>{const L=v("van-image");return _(),I("div",Oe,[t("div",Me,[t("div",Ue,[d(L,{src:e(r).fileUrl},null,8,["src"]),t("p",Ae,D(e(r).insurerName),1)]),t("div",Re,[t("p",qe,D(e(r).title),1),t("p",ze,D(e(r).text),1),t("p",je,[(_(!0),I(x,null,R(e(r).tags,(h,p)=>(_(),I("span",{key:p,class:"tag"},D(h),1))),128))])]),ye(a.$slots,"checkedProduct",{},void 0,!0)])])}}});var Ge=q(We,[["__scopeId","data-v-ecb0026c"]]);const K=s=>(X("data-v-06a1a284"),s=s(),J(),s),He={class:"com-tab-filter"},Xe={class:"article-mid"},Je={class:"article-tag"},Ke=["onClick"],Qe={class:"trianele-out"},Ye=K(()=>t("span",null,null,-1)),Ze=K(()=>t("div",{class:"text"},"\u7B5B\u9009",-1)),et={class:"popup-inner"},tt=K(()=>t("div",{class:"popup-title"},"\u4FDD\u9669\u516C\u53F8",-1)),ot={class:"footer-button"},st=E("\u91CD\u7F6E"),lt=E("\u786E\u5B9A"),at=F({props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(s,{emit:l}){const{isPopShow:r,openPop:i,closePop:a}=xe(!1),C=H({insureList:[],checkedInsure:[]}),{insureList:L,checkedInsure:h}=A(C),p=w(""),c=(T,f)=>{p.value=f,l("onSelectInsure",{selectInsureCode:h.value,selectCategory:p.value})},k=()=>{h.value=[]},P=()=>{l("onSelectInsure",{selectInsureCode:h.value,selectCategory:p.value}),a()};return te(()=>{De().then(T=>{const{code:f,data:b}=T;f==="10000"&&(L.value=b==null?void 0:b.map(S=>({label:S.abbreviation,value:S.insurerCode})))})}),(T,f)=>{const b=v("van-button"),S=v("van-popup");return _(),I("div",He,[t("div",Xe,[t("div",Je,[(_(!0),I(x,null,R(e(be),(u,y)=>(_(),I("div",{key:y,class:O(["tag-item",{checked:p.value==y}]),onClick:B=>c(u==null?void 0:u.value,y)},[t("div",{class:O(["tag-out",{checked:p.value==y}])},[t("div",{class:O(["tag-item-text",{checked:p.value==y}])},D(u.label),3)],2),t("div",Qe,[t("div",{class:O({triangle:p.value==y})},null,2)])],10,Ke))),128))]),s.filter?(_(),I("div",{key:0,class:"filter",onClick:f[0]||(f[0]=(...u)=>e(i)&&e(i)(...u))},[Ye,Ze,d(Ee,{name:"filter"})])):M("",!0),d(S,{show:e(r),position:"right","close-on-click-overlay":"",style:Ie(s.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:e(a)},{default:g(()=>[t("div",et,[tt,d(Se,{modelValue:e(h),"onUpdate:modelValue":f[1]||(f[1]=u=>$(h)?h.value=u:null),options:e(L)},null,8,["modelValue","options"])]),t("div",ot,[d(b,{plain:"",type:"primary",onClick:k},{default:g(()=>[st]),_:1}),d(b,{type:"primary",onClick:P},{default:g(()=>[lt]),_:1})])]),_:1},8,["show","style","onClickOverlay"])])])}}});var ut=q(at,[["__scopeId","data-v-06a1a284"]]);const nt={data:[{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1013001,code:"code1013001",labelCategoryName:"\u91CD\u75BE",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-06-29T23:49:26.000+08:00",gmtModified:"2022-06-30T17:34:38.000+08:00",modifier:"\u5434\u8D85"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1013004,code:"code1013004",labelCategoryName:"\u610F\u5916",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-06-29T23:49:50.000+08:00",gmtModified:"2022-06-29T23:49:50.000+08:00",modifier:"52041001002174"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1013007,code:"code1013007",labelCategoryName:"\u533B\u7597",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-06-29T23:53:28.000+08:00",gmtModified:"2022-06-29T23:53:28.000+08:00",modifier:"52041001002174"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1013010,code:"code1013010",labelCategoryName:"edward08",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-06-29T23:55:28.000+08:00",gmtModified:"2022-06-30T17:05:19.000+08:00",modifier:"\u5434\u8D85"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1018001,code:"code1018001",labelCategoryName:"\u5065\u5EB7",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-07-08T17:14:44.000+08:00",gmtModified:"2022-07-08T17:16:59.000+08:00",modifier:"\u5510\u6B22\u4E13\u7528\u8D26\u53F7"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1019001,code:"code1019001",labelCategoryName:"\u6807\u7B7E\u5206\u7C7B22",authStatus:"1",authStatusName:null,sort:1,infoLabelDTOList:null,gmtCreated:"2022-07-13T17:49:54.000+08:00",gmtModified:"2022-07-13T17:50:01.000+08:00",modifier:"\u5C0F\u90ED"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1012001,code:"code1012001",labelCategoryName:"\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D",authStatus:"1",authStatusName:null,sort:3,infoLabelDTOList:null,gmtCreated:"2022-06-29T20:55:07.000+08:00",gmtModified:"2022-07-02T20:05:45.000+08:00",modifier:"\u5C0F\u90ED"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1005001,code:"code1005001",labelCategoryName:"rrr",authStatus:"1",authStatusName:null,sort:4,infoLabelDTOList:null,gmtCreated:"2022-06-23T17:06:25.000+08:00",gmtModified:"2022-06-24T09:40:48.000+08:00",modifier:"52041001002366"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1009001,code:"code1009001",labelCategoryName:"\u6807\u7B7E\u5206\u7C7B01",authStatus:"1",authStatusName:null,sort:10,infoLabelDTOList:null,gmtCreated:"2022-06-28T10:10:59.000+08:00",gmtModified:"2022-06-28T10:12:35.000+08:00",modifier:"107"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1017002,code:"code1017002",labelCategoryName:"\u6D4B\u8BD52222",authStatus:"1",authStatusName:null,sort:22,infoLabelDTOList:null,gmtCreated:"2022-07-02T19:59:03.000+08:00",gmtModified:"2022-07-08T14:48:33.000+08:00",modifier:"\u6C88\u666F\u6587"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1017004,code:"code1017004",labelCategoryName:"\u6D4B\u8BD522",authStatus:"1",authStatusName:null,sort:22,infoLabelDTOList:null,gmtCreated:"2022-07-02T20:00:27.000+08:00",gmtModified:"2022-07-08T14:48:26.000+08:00",modifier:"\u6C88\u666F\u6587"},{tenantId:9991000007,userId:null,userName:null,channelId:null,userType:null,systemChannel:null,id:1017003,code:"code1017003",labelCategoryName:"\u6D4B\u8BD53333",authStatus:"1",authStatusName:null,sort:33,infoLabelDTOList:null,gmtCreated:"2022-07-02T19:59:14.000+08:00",gmtModified:"2022-07-08T14:48:30.000+08:00",modifier:"\u6C88\u666F\u6587"}]};const rt=s=>(X("data-v-1c708713"),s=s(),J(),s),dt={class:"com-trial-product-wrapper"},ct={class:"container"},it=rt(()=>t("span",{class:"title"}," \u5DF2\u9009\u4EA7\u54C1 ",-1)),pt={class:"popup-body"},mt={class:"cell-title"},_t={class:"title"},ht=F({props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(s,{emit:l}){const r=s,i=w([]),a=w([]),C=w({isShow:r.isShow}),L=()=>{l("close")},h=()=>{a.value=[],l("checked",[])},p=c=>{var k,P,T;(T=(P=(k=i==null?void 0:i.value)==null?void 0:k[c])==null?void 0:P.toggle)==null||T.call(P),l("checked",a.value)};return G(()=>r.isShow,c=>{C.value.isShow=c}),G(()=>r.modalValue,(c=[])=>{a.value=c},{deep:!0,immediate:!0}),(c,k)=>{const P=v("van-checkbox"),T=v("VanCell"),f=v("van-cell-group"),b=v("van-checkbox-group"),S=v("VanPopup");return _(),I("div",dt,[d(S,{show:C.value.isShow,"onUpdate:show":k[1]||(k[1]=u=>C.value.isShow=u),position:"bottom",onClose:L},{default:g(()=>[t("div",ct,[t("div",{class:"popup-header"},[t("span",{class:"clear-all",onClick:h}," \u6E05\u7A7A\u9009\u9879 "),it,t("span",{onClick:L},"X")]),t("div",pt,[d(b,{modelValue:a.value,"onUpdate:modelValue":k[0]||(k[0]=u=>a.value=u)},{default:g(()=>[d(f,{inset:""},{default:g(()=>[(_(!0),I(x,null,R(s.proposalList,u=>(_(),U(T,{key:u.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:u.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:y=>p(u.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":g(()=>[d(P,{ref_for:!0,ref:y=>i.value[u.proposalInsuredList[0].proposalInsuredProductList[0].productId]=y,shape:"square",name:u.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:ke(y=>p(u.proposalInsuredList[0].proposalInsuredProductList[0].productId),["stop"])},null,8,["name","onClick"])]),title:g(()=>[t("div",mt,[t("div",_t,D(u.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])])])]),_:1},8,["show"])])}}});var vt=q(ht,[["__scopeId","data-v-1c708713"]]);const ft=s=>(X("data-v-3078beea"),s=s(),J(),s),gt={class:"search-wrap"},Ct={class:"page-proposal-list"},yt={class:"check-button"},It={key:0,class:"van-sticky"},kt={class:"add-plan"},Lt=E(" \u5DF2\u9009"),Pt={class:"has-select-product"},Tt=E("\u6B3E\u4EA7\u54C1 "),bt=ft(()=>t("span",{class:"icon"},null,-1)),St=E("\u6DFB\u52A0\u8BA1\u5212\u4E66"),Nt=F({props:{isCreateProposal:{type:Boolean,default:!0}},setup(s){const l=H({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0}),{searchValue:r,tagLists:i,isOpen:a,loading:C,finished:L,refreshing:h,productList:p,selectProduct:c,insurerCodeList:k,showCategory:P,productTotal:T,showFooter:f}=A(l),[b,S]=ee(),[u,y]=ee(),B=we(),z=Le(),oe=Pe(),{isCreateProposal:V}=oe.query,se=w(V?"repeatAdd":"add"),Q=()=>{Ve({title:r.value,insurerCodeList:k.value,showCategory:P.value,excludeProductIdList:B.$state.excludeProduct||[],pageNum:1,pageSize:999}).then(m=>{const{code:o,data:N,total:j}=m;o==="10000"&&(console.log(N),p.value=N==null?void 0:N.datas,T.value=j)})},le=()=>{},ae=m=>{const{selectInsureCode:o,selectCategory:N}=m;k.value=o,P.value=N,Q()},Y=()=>{h.value&&(p.value=[],h.value=!1),Q(),C.value=!1,T.value===p.value.length&&(L.value=!0)},ue=()=>{z.push({path:"historyProposalList"})},ne=W(()=>{var N;const{birthday:m,gender:o}=((N=B.$state.proposalInfo.proposalInsuredList)==null?void 0:N[0])||{};return{birthday:m,gender:o}}),re=m=>{f.value=!1,l.productId=m.productId,S(!0)},de=m=>{l.selectProduct=m},ce=()=>{const m=l.proposalList.filter(o=>l.selectProduct.includes(o.proposalInsuredList[0].proposalInsuredProductList[0].productId));B.setTrialData(m),z.push({path:"/proposal/createProposal"})},ie=()=>{S(!1)},pe=m=>{if(V){l.proposalList.push(m),f.value=!0,S(!1);return}B.setTrialData([m]),S(!1),z.push({path:"/proposal/createProposal"})},me=()=>{L.value=!0,C.value=!0,Y()};return G(()=>c,m=>{console.log("newVal",m)},{deep:!0,immediate:!0}),te(()=>{i.value=[{labelCategoryName:"\u5168\u90E8",id:""},...nt.data]}),(m,o)=>{const N=v("van-search"),j=v("van-checkbox"),_e=v("van-checkbox-group"),he=v("van-list"),ve=v("van-pull-refresh"),fe=v("van-button"),ge=v("ProPageWrap");return _(),I(x,null,[d(ge,{class:"page-proposal"},{default:g(()=>[t("div",gt,[d(N,{modelValue:e(r),"onUpdate:modelValue":o[0]||(o[0]=n=>$(r)?r.value=n:null),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",shape:"round",class:"search",onClickInput:le},null,8,["modelValue"]),d(ut,{tagList:e(i),"onUpdate:tagList":o[1]||(o[1]=n=>$(i)?i.value=n:null),filter:e(a),"onUpdate:filter":o[2]||(o[2]=n=>$(a)?a.value=n:null),"filter-class":"filter-area",onOnSelectInsure:ae},null,8,["tagList","filter"])]),t("div",Ct,[d(ve,{modelValue:e(h),"onUpdate:modelValue":o[5]||(o[5]=n=>$(h)?h.value=n:null),onRefresh:me},{default:g(()=>[d(he,{loading:e(C),"onUpdate:loading":o[4]||(o[4]=n=>$(C)?C.value=n:null),finished:e(L),"finished-text":"\u5DF2\u7ECF\u5230\u5E95\u4E86\u54E6",onLoad:Y},{default:g(()=>[(_(!0),I(x,null,R(e(p),n=>(_(),U(Ge,{key:n.id,"product-info":n==null?void 0:n.showConfig,onClick:Z=>re(n)},Te({_:2},[e(V)?{name:"checkedProduct",fn:g(()=>[t("div",yt,[d(_e,{modelValue:e(c),"onUpdate:modelValue":o[3]||(o[3]=Z=>$(c)?c.value=Z:null)},{default:g(()=>[d(j,{name:n.productId,shape:"square"},null,8,["name"])]),_:2},1032,["modelValue"])])])}:void 0]),1032,["product-info","onClick"]))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])]),e(V)&&e(f)?(_(),I("div",It,[t("div",kt,[t("p",{class:"has-select",onClick:o[6]||(o[6]=n=>e(y)(!0))},[Lt,t("span",Pt,D(e(c).length),1),Tt,bt]),d(fe,{type:"primary",disabled:!e(c).length,onClick:ce},{default:g(()=>[St]),_:1},8,["disabled"])])])):M("",!0),d(vt,{modelValue:e(c),"onUpdate:modelValue":o[7]||(o[7]=n=>$(c)?c.value=n:null),"proposal-list":e(l).proposalList,"is-show":e(u),onClose:o[8]||(o[8]=n=>e(y)(!1)),onChecked:de},null,8,["modelValue","proposal-list","is-show"]),e(b)?(_(),U(Be,{key:1,"is-show":e(b),type:se.value,insured:e(ne),"product-id":e(l).productId,onClose:ie,onFinished:pe},null,8,["is-show","type","insured","product-id"])):M("",!0)]),_:1}),e(V)?M("",!0):(_(),U($e,{key:0,"button-image":e(Ne),onClick:ue},null,8,["button-image"]))],64)}}});var Ut=q(Nt,[["__scopeId","data-v-3078beea"]]);export{Ut as default};

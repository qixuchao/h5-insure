import{_ as e,d as a,i as l,h as o,j as s,O as i,l as t,o as d,m as r,w as n,a as c,e as m,u,bV as f,b as v,V as p,W as b,ce as g,cf as h,a8 as N,cg as y,ch as _,ci as C,ag as V,aC as j,aD as k}from"./index-823d7121.js";import{g as w}from"./trial-405ebad7.js";import{c as x}from"./format-b5e9d8b9.js";import{u as U}from"./useOrder-1f868a24.js";import{f as I}from"./verify-20c6a354.js";const O=e=>(j("data-v-627424d7"),e=e(),k(),e),P={class:"page-phone-verify"},T={class:"title"},q=O((()=>c("div",{class:"title face-title"},"人脸识别",-1))),z={class:"face-verify-img"},E=["src"],L=O((()=>c("div",{class:"face-verify-tip"},[c("div",{class:"title"},"操作时请您配合"),c("ol",null,[c("li",null,"请调亮手机屏幕亮度，确保光线充足"),c("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),c("li",null,"请确保真实本人操作")])],-1))),W={class:"tips"},$=["src"];var A=e(a({__name:"phoneVerify",setup(e){const a=U(),j=l();o();const{agentCode:k,tenantId:O,nextPageCode:A,biz_id:D,orderNo:M,objectType:R,orderCode:B}=j.query,F=s({mobile:"",verifyCode:""}),G=s(),H=()=>{var e,l;null==(l=null==(e=G.value)?void 0:e.validate)||l.call(e).then((()=>{(()=>{const{holder:e,insuredList:l}=a.value;let o={userName:e.name,certiNo:e.certNo};"insured"===R&&(o={userName:null==l?void 0:l[0].name,certiNo:null==l?void 0:l[0].certNo});const{userName:s,certiNo:i}=o,t={tenantId:O,faceAuthMode:"TENCENT",callbackUrl:window.location.href,bizNo:M,userName:s,certiNo:i};I(t).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})()}))};return i((()=>{w({orderNo:B||M,tenantId:O}).then((({code:e,data:l})=>{var o,s;"10000"===e&&(Object.assign(a.value,l),F.value.mobile="holder"===R?l.holder.mobile:null==(s=null==(o=l.insured)?void 0:o[0])?void 0:s.mobile)}))})),(e,a)=>{const l=y,o=_,s=C,i=V,j=t("ProPageWrap");return d(),r(j,null,{default:n((()=>[c("div",P,[c("div",T,m(`${u(f)[u(R).toLocaleUpperCase()]}手机号验证 ${u(x)(u(F).mobile||"")}`),1),v(s,{ref_key:"formRef",ref:G,model:u(F)},{default:n((()=>[p(v(l,{modelValue:u(F).mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>u(F).mobile=e),label:"被保人手机号",name:"mobile",maxlength:"11",required:""},null,8,["modelValue"]),[[b,!1]]),v(o,{modelValue:u(F).verifyCode,"onUpdate:modelValue":a[1]||(a[1]=e=>u(F).verifyCode=e),"related-name":"mobile",label:" ",maxlength:"6","input-align":"left",placeholder:"请输入验证码",name:"verifyCode","send-s-m-s-code":u(g),"check-s-m-s-code":u(h)},null,8,["modelValue","send-s-m-s-code","check-s-m-s-code"])])),_:1},8,["model"]),q,c("div",z,[c("img",{src:u("/static/png/face_img-4ac5b4e1.png"),alt:""},null,8,E)]),L,v(i,{type:"primary",class:"submit-btn",onClick:H},{default:n((()=>[N("开始验证")])),_:1}),c("div",W,[c("img",{src:u("/static/png/face_tip-d70e081d.png"),alt:""},null,8,$)])])])),_:1})}}}),[["__scopeId","data-v-627424d7"]]);export{A as default};

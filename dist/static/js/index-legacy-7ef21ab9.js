!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-occupational-wrapper .popup-title[data-v-1e1e74de]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-occupational-wrapper .popup-content[data-v-1e1e74de]{height:13.84rem}.com-occupational-wrapper .footer-bar[data-v-1e1e74de]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.com-risk-list-wrapper .popup-title[data-v-aeeb813a]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-risk-list-wrapper .risk-list[data-v-aeeb813a]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper .footer-bar[data-v-aeeb813a]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.risk-list-wrapper .add-rider-risk[data-v-db11c378]{display:flex;align-items:center;justify-content:space-between}@charset "UTF-8";.page-trial-wrapper[data-v-70647bb6]{padding-bottom:2rem}.page-trial-wrapper .footer-bar[data-v-70647bb6]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:.4rem;display:flex;justify-content:space-between}\n',document.head.appendChild(e),System.register(["./vendor-legacy-7e34e895.js","./index-legacy-e9b91f52.js","./index-legacy-6fee5782.js"],(function(e){"use strict";var a,i,l,o,t,r,n,d,u,s,m,c,p,f,v,y,k,V,b,g,h,I,D,L,O,C,R,_,w,q,x;return{setters:[function(e){a=e.g,i=e.L,l=e.o,o=e.$,t=e.r,r=e.k,n=e.m,d=e.n,u=e.j,s=e.y,m=e.z,c=e.a0,p=e.a1,f=e.a2,v=e.C,y=e.h,k=e.s,V=e.I,b=e.d,g=e.a3,h=e.x,I=e.F,D=e.E,L=e.a4,O=e.a5,C=e.B},function(e){R=e._,_=e.P,w=e.a},function(e){q=e.b,x=e.S}],execute:function(){const F=[{label:"男",value:"1"},{label:"女",value:"2"}],P=[{label:"有",value:"1"},{label:"无",value:"2"}],U=[{value:1,label:"第5个保单周年日"},{value:2,label:"起始领取年龄55周岁"},{value:3,label:"起始领取年龄60周岁"},{value:4,label:"起始领取年龄65周岁"},{value:5,label:"起始领取年龄70周岁"},{value:6,label:"起始领取年龄75周岁"}],T=[{value:1,label:"年领"},{value:2,label:"月领"}],A=[{label:"趸交",value:"1"},{label:"年交",value:"2"},{label:"半年交",value:"3"},{label:"季交",value:"4"},{label:"月交",value:"5"}],j=[{label:"趸交",value:"single"},{label:"1年交",value:"year_1"},{label:"5年交",value:"year_5"},{label:"10年交",value:"year_10"},{label:"15年交",value:"year_15"},{label:"20年交",value:"year_20"},{label:"25年交",value:"year_25"},{label:"30年交",value:"year_30"},{label:"35年交",value:"year_35"}],M=[{label:"7天",value:"day_7"},{label:"14天",value:"day_14"},{label:"30天",value:"day_30"},{label:"1年",value:"year_1"},{label:"3年",value:"year_3"},{label:"5年",value:"year_5"},{label:"10年",value:"year_10"},{label:"15年",value:"year_15"},{label:"20年",value:"year_20"},{label:"25年",value:"year_25"},{label:"30年",value:"year_30"},{label:"35年",value:"year_35"},{label:"终身",value:"to_life"}],S=[{label:"主险期间减1",value:"3"},{label:"无限制",value:"2"}],E=[{label:"返保额",value:1},{label:"返保费",value:2}],Y=[{label:"投保",value:1},{label:"不投保",value:2}];new x({source:"sessionStorage"});const N=new x({source:"localStorage"});new x({source:"cookie"});const B={class:"com-occupational-wrapper"},$=(e=>(c("data-v-1e1e74de"),e=e(),p(),e))((()=>s("div",{class:"popup-title"},"选择职业",-1))),G={class:"popup-content"},K=a({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(e,{emit:a}){const c=e,p=i({show:c.show,options:[],currentValue:""}),f=()=>{a("close")},v=({value:e,selectedOptions:i})=>{const l=(i||[]).map((e=>e.value)).join("/");a("update:modelValue",e),a("finish",l),f()},y=()=>{var e,a;const i=`${null===(e=c.insurerCode)||void 0===e||null===(a=e.toLocaleUpperCase)||void 0===a?void 0:a.call(e)}_OCCUPATION`,l=N.get("occupational")||{};l[i]?p.options=l[i]:((e={})=>q.post("/api/gateway/system/dict/v2/queryDictInfo",e))({dictCodeList:[i]}).then((({code:e,data:a})=>{if("10000"===e){var o;const e=(e=>{const a=e,i=e=>{e.forEach((e=>{const a=e;a.children.length?i(a.children):a.children=null}))};return i(a),a})((null==a||null===(o=a[0])||void 0===o?void 0:o.dictItemList)||[]);p.options=e,l[i]=e,N.set("occupational",l)}}))};return l((()=>{y()})),o((()=>c.modelValue),(e=>{}),{deep:!0,immediate:!0}),(e,a)=>{const i=t("van-cascader"),l=t("VanPopup");return r(),n("div",B,[d(l,{show:m(p).show,"onUpdate:show":a[1]||(a[1]=e=>m(p).show=e),"show-footer":"",position:"bottom",closeable:"",onClose:f},{default:u((()=>[$,s("div",G,[d(i,{modelValue:m(p).currentValue,"onUpdate:modelValue":a[0]||(a[0]=e=>m(p).currentValue=e),title:"请选择职业","show-header":!1,placeholder:"请选择",options:m(p).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:v},null,8,["modelValue","options"])])])),_:1},8,["show"])])}}});var z=R(K,[["__scopeId","data-v-1e1e74de"]]);const H={class:"com-personal-info-wrapper"},W=a({props:{formInfo:{type:Object,required:!0,default:()=>{}},insuredCode:{type:String,required:!0,default:""},factorList:{type:Array,required:!0,default:()=>[]}},setup(e,{expose:a}){const l=e,[o,c]=f(),[p,h]=f(),I=v(),D=i({formInfo:null==l?void 0:l.formInfo,occupationalText:""}),L=e=>{D.occupationalText=e},O=()=>{h(!1)};return a({validateForm:()=>new Promise(((e,a)=>{null==I||I.value.validate().then((()=>{e("")}),(()=>{a()}))}))}),(a,i)=>{const l=t("VanField"),f=t("VanForm"),v=t("van-datetime-picker"),C=t("van-popup");return r(),n("div",H,[d(f,{ref_key:"formRef",ref:I,"input-align":"right","error-message-align":"right"},{default:u((()=>[e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")?(r(),y(l,{key:0,modelValue:m(D).formInfo.birthday,"onUpdate:modelValue":i[0]||(i[0]=e=>m(D).formInfo.birthday=e),rules:[{required:!0,message:"请选择"}],name:"birth",label:"出生日期","is-link":"",placeholder:"请选择",onClick:i[1]||(i[1]=e=>m(c)(!0))},null,8,["modelValue"])):k("",!0),e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER")?(r(),y(l,{key:1,modelValue:m(D).formInfo.gender,"onUpdate:modelValue":i[3]||(i[3]=e=>m(D).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:m(D).formInfo.gender,"onUpdate:modelValue":i[2]||(i[2]=e=>m(D).formInfo.gender=e),options:m(F)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):k("",!0),e.factorList.includes("SOCIAL_INS")?(r(),y(l,{key:2,modelValue:m(D).formInfo.socialSecurity,"onUpdate:modelValue":i[5]||(i[5]=e=>m(D).formInfo.socialSecurity=e),name:"socialSecurity",label:"社保",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:m(D).formInfo.socialSecurity,"onUpdate:modelValue":i[4]||(i[4]=e=>m(D).formInfo.socialSecurity=e),options:m(P)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):k("",!0),e.factorList.includes("OCCUPATION_CATEGORY")?(r(),y(l,{key:3,modelValue:m(D).formInfo.occupationalClass,"onUpdate:modelValue":i[6]||(i[6]=e=>m(D).formInfo.occupationalClass=e),rules:[{required:!0,message:"请选择"}],name:"occupationalClass",label:"职业类型","is-link":"",placeholder:"请选择",onClick:i[7]||(i[7]=e=>m(h)(!0))},{input:u((()=>[s("div",null,V(m(D).occupationalText),1)])),_:1},8,["modelValue"])):k("",!0)])),_:1},512),d(C,{show:m(o),"onUpdate:show":i[10]||(i[10]=e=>g(o)?o.value=e:null),position:"bottom"},{default:u((()=>[d(v,{type:"date","min-date":new Date("1900-01-01"),"max-date":new Date,onConfirm:i[8]||(i[8]=e=>{m(D).formInfo.birthday=m(b)(e).format("YYYY-MM-DD"),m(c)(!1)}),onCancel:i[9]||(i[9]=e=>m(c)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"]),m(p)?(r(),y(z,{key:0,modelValue:m(D).formInfo.occupationalClass,"onUpdate:modelValue":i[11]||(i[11]=e=>m(D).formInfo.occupationalClass=e),show:m(p),"insured-code":"insuredCode",onFinish:L,onClose:O},null,8,["modelValue","show"])):k("",!0)])}}}),Z={class:"com-risk-card-wrapper"},J={key:0},Q={key:9,class:"liab-desc"},X=s("div",{class:"title"},"责任投保说明",-1),ee=a({props:{originData:{type:Object,required:!0,default:()=>{}},formInfo:{type:Object,required:!0,default:()=>{}},mainRiskData:{type:Object,default:()=>{}},mainRiskInfo:{type:Object,required:!1,default:()=>{}},index:{type:[Number,String],default:0,required:!0}},setup(e){const a=e,c=i({formInfo:a.formInfo}),p=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"object Object"==={}.toString.call(e)&&Object.keys(e).length),f=(e,a)=>{let i=a;return Array.isArray(a)||(i=[`${i}`]),(e||[]).filter((e=>i.includes(`${e.value}`)))},v=h((()=>{var e,i,l,o,t,r;return 1===(null===(e=a.originData)||void 0===e?void 0:e.riskType)?f(M,null==a||null===(t=a.originData)||void 0===t||null===(r=t.riskInsureLimitVO)||void 0===r?void 0:r.insurancePeriodValueList):2===(null===(i=a.originData)||void 0===i?void 0:i.periodType)?f([{value:"year_1",label:"1年"}],["year_1"]):f(M,null==a||null===(l=a.mainRiskData)||void 0===l||null===(o=l.riskInsureLimitVO)||void 0===o?void 0:o.insurancePeriodValueList)})),b=h((()=>{var e,i,l,o,t,r,n,d,u;return 1===(null===(e=a.originData)||void 0===e?void 0:e.riskType)?f(j,null==a||null===(r=a.originData)||void 0===r||null===(n=r.riskInsureLimitVO)||void 0===n?void 0:n.paymentPeriodValueList):1===(null===(i=a.originData)||void 0===i?void 0:i.exemptFlag)?f(S,null==a||null===(d=a.originData)||void 0===d||null===(u=d.riskInsureLimitVO)||void 0===u?void 0:u.paymentPeriodRule):2===(null===(l=a.originData)||void 0===l?void 0:l.periodType)?f([{value:"year_1",label:"1年交"}],["year_1"]):f(j,null==a||null===(o=a.mainRiskData)||void 0===o||null===(t=o.riskInsureLimitVO)||void 0===t?void 0:t.paymentPeriodValueList)})),g=h((()=>{var e,i,l,o,t;return 1===(null===(e=a.originData)||void 0===e?void 0:e.riskType)?f(A,null==a||null===(o=a.originData)||void 0===o||null===(t=o.riskInsureLimitVO)||void 0===t?void 0:t.paymentFrequencyList):f(A,null==a||null===(i=a.mainRiskData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.paymentFrequencyList)})),L=h((()=>{var e,i;let l=0,o=0;return((null===(e=a.originData)||void 0===e||null===(i=e.riskCalcMethodInfoVO)||void 0===i?void 0:i.paymentMethodLimitList)||[]).forEach(((e,a)=>{0===a&&(l=e.minAmount,o=e.maxAmount),l>e.minAmount&&(l=e.minAmount),o<e.maxAmount&&(o=e.maxAmount)})),c.formInfo.sumInsured=l,{min:l,max:o}})),O=h((()=>{var e,i;let l=0,o=0;return((null===(e=a.originData)||void 0===e||null===(i=e.riskCalcMethodInfoVO)||void 0===i?void 0:i.paymentMethodLimitList)||[]).forEach(((e,a)=>{0===a&&(l=e.minPremium,o=e.maxPremium),l>e.minPremium&&(l=e.minPremium),o<e.maxPremium&&(o=e.maxPremium)})),c.formInfo.premium=l,{min:l,max:o}})),C=h((()=>{var e,i,l,o;const t=null===(e=a.originData)||void 0===e||null===(i=e.riskCalcMethodInfoVO)||void 0===i?void 0:i.minCopy,r=null===(l=a.originData)||void 0===l||null===(o=l.riskCalcMethodInfoVO)||void 0===o?void 0:o.maxCopy;return c.formInfo.copy=t,{min:t,max:r}}));return l((()=>{const e={riskType:a.originData.riskType,riskId:a.originData.id,riskCode:a.originData.riskCode,mainRiskCode:a.originData.riskCode,mainRiskId:a.originData.id,riskCategory:a.originData.riskCategory,liabilityVOList:(a.originData.riskLiabilityInfoVOList||[]).map((e=>({liabilityAttributeCode:e.liabilityAttribute,liabilityAttributeValue:e.liabilityAttributeValue,liabilityCode:e.liabilityCode,liabilityId:e.id,liabilityRateType:e.liabilityRateType})))};Object.assign(null==c?void 0:c.formInfo,e)})),o((()=>a.mainRiskInfo),(e=>{}),{immediate:!0,deep:!0}),(a,i)=>{var l,o,h,R,w,q,x,F,P,A,j,M,S,N,B,$,G,K,z,H,W,ee,ae,ie,le,oe,te,re;const ne=t("VanStepper"),de=t("VanField");return r(),n("div",Z,[1===(null===(l=e.originData)||void 0===l||null===(o=l.riskCalcMethodInfoVO)||void 0===o?void 0:o.saleMethod)?(r(),y(de,{key:0,modelValue:m(c).formInfo.sumInsured,"onUpdate:modelValue":i[1]||(i[1]=e=>m(c).formInfo.sumInsured=e),label:"保额",name:"sumInsured",rules:[{required:!0,message:"请填写"}]},{input:u((()=>{var a,l;return[d(ne,{modelValue:m(c).formInfo.sumInsured,"onUpdate:modelValue":i[0]||(i[0]=e=>m(c).formInfo.sumInsured=e),min:m(L).min,step:(null===(a=e.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,max:m(L).max},null,8,["modelValue","min","step","max"])]})),_:1},8,["modelValue"])):k("",!0),2===(null===(h=e.originData)||void 0===h||null===(R=h.riskCalcMethodInfoVO)||void 0===R?void 0:R.saleMethod)?(r(),y(de,{key:1,modelValue:m(c).formInfo.premium,"onUpdate:modelValue":i[3]||(i[3]=e=>m(c).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"}]},{input:u((()=>{var a,l;return[d(ne,{modelValue:m(c).formInfo.premium,"onUpdate:modelValue":i[2]||(i[2]=e=>m(c).formInfo.premium=e),step:(null===(a=e.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,min:m(O).min,max:m(O).max},null,8,["modelValue","step","min","max"])]})),_:1},8,["modelValue"])):k("",!0),3===(null===(w=e.originData)||void 0===w||null===(q=w.riskCalcMethodInfoVO)||void 0===q?void 0:q.saleMethod)?(r(),y(de,{key:2,modelValue:m(c).formInfo.copy,"onUpdate:modelValue":i[5]||(i[5]=e=>m(c).formInfo.copy=e),label:"份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:u((()=>[d(ne,{modelValue:m(c).formInfo.copy,"onUpdate:modelValue":i[4]||(i[4]=e=>m(c).formInfo.copy=e),step:1,min:m(C).min,max:m(C).max},null,8,["modelValue","min","max"])])),_:1},8,["modelValue"])):k("",!0),2===(null===(x=e.originData)||void 0===x||null===(F=x.riskCalcMethodInfoVO)||void 0===F?void 0:F.saleMethod)&&1===(null===(P=e.originData)||void 0===P?void 0:P.riskType)?(r(),y(de,{key:3,label:"保额",name:"premium",rules:[{required:!0,message:"请填写"}]},{input:u((()=>{var a,l;return[d(ne,{modelValue:m(c).formInfo.premium,"onUpdate:modelValue":i[6]||(i[6]=e=>m(c).formInfo.premium=e),step:(null===(a=e.originData)||void 0===a||null===(l=a.riskCalcMethodInfoVO)||void 0===l?void 0:l.increaseDecreaseNum)||1,min:m(O).min,max:m(O).max},null,8,["modelValue","step","min","max"])]})),_:1})):k("",!0),p(null===(A=e.originData)||void 0===A||null===(j=A.riskInsureLimitVO)||void 0===j?void 0:j.insurancePeriodValueList)&&p(null===(M=e.originData)||void 0===M||null===(S=M.riskInsureLimitVO)||void 0===S?void 0:S.insurancePeriodRule)?k("",!0):(r(),y(de,{key:4,modelValue:m(c).formInfo.coverageYear,"onUpdate:modelValue":i[8]||(i[8]=e=>m(c).formInfo.coverageYear=e),label:"保障期间",name:"coverageYear",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:m(c).formInfo.coverageYear,"onUpdate:modelValue":i[7]||(i[7]=e=>m(c).formInfo.coverageYear=e),options:m(v)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),p(null===(N=e.originData)||void 0===N||null===(B=N.riskInsureLimitVO)||void 0===B?void 0:B.paymentPeriodValueList)&&p(null===($=e.originData)||void 0===$||null===(G=$.riskInsureLimitVO)||void 0===G?void 0:G.paymentPeriodRule)?k("",!0):(r(),y(de,{key:5,modelValue:m(c).formInfo.paymentYear,"onUpdate:modelValue":i[10]||(i[10]=e=>m(c).formInfo.paymentYear=e),label:"交费期间",name:"paymentYear",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:m(c).formInfo.paymentYear,"onUpdate:modelValue":i[9]||(i[9]=e=>m(c).formInfo.paymentYear=e),options:m(b)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),p(null===(K=e.originData)||void 0===K||null===(z=K.riskInsureLimitVO)||void 0===z?void 0:z.paymentFrequencyList)&&p(null===(H=e.originData)||void 0===H||null===(W=H.riskInsureLimitVO)||void 0===W?void 0:W.paymentTypeRule)?k("",!0):(r(),y(de,{key:6,modelValue:m(c).formInfo.paymentFrequency,"onUpdate:modelValue":i[12]||(i[12]=e=>m(c).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:m(c).formInfo.paymentFrequency,"onUpdate:modelValue":i[11]||(i[11]=e=>m(c).formInfo.paymentFrequency=e),options:m(g)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),p(null===(ee=e.originData)||void 0===ee||null===(ae=ee.riskInsureLimitVO)||void 0===ae?void 0:ae.annuityDrawTypeList)?k("",!0):(r(),y(de,{key:7,modelValue:m(c).formInfo.annuityDrawDate,"onUpdate:modelValue":i[14]||(i[14]=e=>m(c).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate",rules:[{required:!0,message:"请选择"}]},{input:u((()=>{var a,l;return[d(_,{modelValue:m(c).formInfo.annuityDrawDate,"onUpdate:modelValue":i[13]||(i[13]=e=>m(c).formInfo.annuityDrawDate=e),options:f(m(U),null===(a=e.originData)||void 0===a||null===(l=a.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawTypeList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),p(null===(ie=e.originData)||void 0===ie||null===(le=ie.riskInsureLimitVO)||void 0===le?void 0:le.annuityDrawFrequencyList)?k("",!0):(r(),y(de,{key:8,modelValue:m(c).formInfo.annuityDrawType,"onUpdate:modelValue":i[16]||(i[16]=e=>m(c).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType",rules:[{required:!0,message:"请选择"}]},{input:u((()=>{var a,l;return[d(_,{modelValue:m(c).formInfo.annuityDrawType,"onUpdate:modelValue":i[15]||(i[15]=e=>m(c).formInfo.annuityDrawType=e),options:f(m(T),null===(a=e.originData)||void 0===a||null===(l=a.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawFrequencyList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),(r(!0),n(I,null,D((null===(oe=e.originData)||void 0===oe?void 0:oe.riskLiabilityInfoVOList)||[],((e,a)=>(r(),n("div",{key:e.liabilityId},[1===e.optionalFlag?(r(),y(de,{key:0,label:e.liabilityName,name:"liabilityAttributeValue",rules:[{required:e.liabilityAttributeValue,message:"请选择"}]},{input:u((()=>[s("div",null,[e.liabilityAttributeValue?(r(),y(_,{key:1,modelValue:m(c).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(c).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:m(E)},null,8,["modelValue","onUpdate:modelValue","options"])):(r(),n("span",J,"50万"))])])),_:2},1032,["label","rules"])):(r(),y(de,{key:1,label:e.liabilityName,name:"liabilityAttributeValue",rules:[{required:1===e.optionalFlag&&e.liabilityAttributeValue,message:"请选择"}]},{input:u((()=>[s("div",null,[e.liabilityAttributeValue?(r(),y(_,{key:1,modelValue:m(c).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>m(c).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:m(E)},null,8,["modelValue","onUpdate:modelValue","options"])):(r(),y(_,{key:0,modelValue:m(c).formInfo.liabilityVOList[a].flag,"onUpdate:modelValue":e=>m(c).formInfo.liabilityVOList[a].flag=e,options:m(Y)},null,8,["modelValue","onUpdate:modelValue","options"]))])])),_:2},1032,["label","rules"]))])))),128)),null!==(te=e.originData)&&void 0!==te&&te.relationDesc?(r(),n("div",Q,[X,s("div",null,V(null===(re=e.originData)||void 0===re?void 0:re.relationDesc),1)])):k("",!0)])}}});const ae={class:"com-risk-list-wrapper"},ie=(e=>(c("data-v-aeeb813a"),e=e(),p(),e))((()=>s("div",{class:"popup-title"},"选择附加险",-1))),le={class:"risk-list"},oe={class:"footer-bar"},te=C("确认"),re=a({props:{riskList:{type:Array,required:!0,default:()=>[]},show:{type:Boolean,required:!0,default:!1},collocationList:{type:Array,default:()=>[]},disabled:{type:Array,required:!0,default:()=>[]},modelValue:{type:Array,required:!0,default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:a}){const l=e,c=v([]),p=v([]),f=v(l.disabled),k=i({show:l.show,currentChecked:[]}),V=e=>{var a,i,o;((e,a)=>{l.collocationList.forEach((i=>{e===i.riskId&&(a?1===i.collocationType?k.currentChecked=k.currentChecked.filter((a=>!(a===i.collocationRiskId||a===e))):3===i.collocationType&&f.value.filter((e=>e!==i.collocationRiskId)):1===i.collocationType?k.currentChecked.push(i.collocationRiskId,e):3===i.collocationType&&f.value.push(i.collocationRiskId))}))})(e,k.currentChecked.includes(e)),null==c||null===(a=c.value)||void 0===a||null===(i=a[e])||void 0===i||null===(o=i.toggle)||void 0===o||o.call(i)},b=()=>{a("close")},g=()=>{const e=l.riskList.filter((e=>k.currentChecked.includes(e.id)));a("update:modelValue",p),a("finished",e),a("close")};return L((()=>{c.value=[]})),o((()=>l.modelValue),(e=>{p.value=e,f.value=e}),{deep:!0,immediate:!0}),(a,i)=>{const l=t("van-checkbox"),o=t("VanCell"),v=t("van-cell-group"),h=t("van-checkbox-group"),L=t("VanButton"),C=t("VanPopup");return r(),n("div",ae,[d(C,{show:m(k).show,"onUpdate:show":i[2]||(i[2]=e=>m(k).show=e),title:"选择附加险","show-footer":"",position:"bottom",closeable:"",onClose:b},{default:u((()=>[ie,s("div",le,[d(h,{modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=e=>p.value=e)},{default:u((()=>[d(v,{inset:""},{default:u((()=>[(r(!0),n(I,null,D(e.riskList,(e=>(r(),y(o,{key:e.id,title:e.riskName,onClick:a=>V(e.id)},{"right-icon":u((()=>[d(l,{ref_for:!0,ref:a=>c.value[e.id]=a,disabled:f.value.includes(e.id),shape:"square",name:e.id,onClick:i[0]||(i[0]=O((()=>{}),["stop"]))},null,8,["disabled","name"])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),s("div",oe,[d(L,{type:"primary",disabled:!m(k).currentChecked.length,block:"",onClick:g},{default:u((()=>[te])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var ne=R(re,[["__scopeId","data-v-aeeb813a"]]);const de={class:"risk-list-wrapper"},ue={key:0,class:"add-rider-risk"},se={class:"left-part"},me=C("+ 附加险"),ce=a({props:{riskInfo:{type:Object,required:!0,default:()=>{}},originData:{type:Object,required:!0,default:()=>{}},pickFactor:{type:Function,required:!0,default:()=>{}},riskKey:{type:[String,Number],required:!0,default:0}},setup(e){var a;const t=e,[c,p]=f(!1);v(null),v(null);const b=i({mainRiskInfo:t.riskInfo,riderRiskInfo:null===(a=t.riskInfo)||void 0===a?void 0:a.riderRiskVOList,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),g=(e,a)=>{(e||[]).forEach((e=>{Object.assign(b.riderRiskInfo,{[e.id]:{}})})),b.disabledList=a,b.requiredRiderRiskData=b.requiredRiderRiskData.concat(e)};return l((()=>{b.requiredRiderRiskData})),o((()=>b.mainRiskInfo),(e=>{}),{deep:!0,immediate:!0}),o((()=>b.riderRiskInfo),(()=>{}),{deep:!0,immediate:!0}),o((()=>b.requiredRiderRiskData),(e=>{const a=[b.mainRiskData,...e];let i=[],l=[];a.forEach((e=>{var a;const o=(null==e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.riskFactorRelationList)||[];i=i.concat(o.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),l=l.concat(o.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode)))})),(e||[]).forEach((e=>{Object.assign(b.riderRiskInfo,{[e.id]:{}})})),t.pickFactor({insuredFactorList:[...new Set(i)],holderFactorList:[...new Set(l)]})}),{deep:!0,immediate:!0}),o((()=>t.originData),(e=>{(e||[]).forEach((e=>{1===e.riskType?(b.mainRiskData=e,b.requiredRiderRiskData=(null==e?void 0:e.requiredRiderRiskVOList)||[],b.riderRiskList=null==e?void 0:e.optionalRiderRiskVOList):b.riderRiskList.push(e)}))}),{deep:!0,immediate:!0}),o((()=>t.riskInfo),(()=>{}),{immediate:!0,deep:!0}),(a,i)=>(r(),n("div",de,[d(ee,{"form-info":m(b).mainRiskInfo,index:e.riskKey,"origin-data":m(b).mainRiskData},null,8,["form-info","index","origin-data"]),(r(!0),n(I,null,D(m(b).requiredRiderRiskData,((e,a)=>(r(),y(ee,{key:e.id,"form-info":m(b).riderRiskInfo[e.id],index:a,"main-risk-data":m(b).mainRiskData,"main-risk-info":m(b).mainRiskInfo,"origin-data":e},null,8,["form-info","index","main-risk-data","main-risk-info","origin-data"])))),128)),m(b).riderRiskList.length-m(b).checkedList.length?(r(),n("div",ue,[s("span",se,V(`共有${m(b).riderRiskList.length-m(b).checkedList.length}款附加险可以添加`),1),d(w,{activied:"",onClick:i[0]||(i[0]=e=>m(p)(!0))},{default:u((()=>[me])),_:1})])):k("",!0),m(c)?(r(),y(ne,{key:1,modelValue:m(b).checkedList,"onUpdate:modelValue":i[1]||(i[1]=e=>m(b).checkedList=e),show:m(c),disabled:m(b).disabledList,"risk-list":m(b).riderRiskList,"collocation-list":m(b).mainRiskData.collocationVOList||[],onFinished:g,onClose:i[2]||(i[2]=e=>m(p)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):k("",!0)]))}});var pe=R(ce,[["__scopeId","data-v-db11c378"]]);const fe=e=>(c("data-v-70647bb6"),e=e(),p(),e),ve={key:0,class:"part-card"},ye=fe((()=>s("div",{class:"part-title"},"投保人",-1))),ke={key:1,class:"part-card"},Ve=fe((()=>s("div",{class:"part-title"},"被保人",-1))),be={class:"risk-content"},ge={key:0,class:"risk"},he={key:1,class:"plan-risk"},Ie={class:"footer-bar"},De={class:"trial-result"},Le=C("去试算"),Oe=C("去投保"),Ce=a({setup(e){const a=v({personVO:{}}),c=v({insuredCode:"",personVO:{}}),p=v({}),f=v({}),b=v({}),g=v({}),h=i({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0}),L=()=>{var e,i,l;const o=Object.values(p.value[h.currentPlan].riderRiskVOList).map((e=>{const a=e;if("3"===a.paymentYear){const e=(p.value[h.currentPlan].paymentYear||"").split("_");e[1]&&(e[1]-=1),a.paymentYear=e.join("_")}return a}));((e={})=>q.post("/api/insurance/premiumCalc",e))({...{holder:{personVO:{...a.value.personVO,birthday:a.value.personVO.birthday&&`${a.value.personVO.birthday} 00:00:00`}},productCode:null==h||null===(e=h.riskBaseInfo)||void 0===e?void 0:e.productCode,insuredVOList:[{...c.value,personVO:{...c.value.personVO,birthday:c.value.personVO.birthday&&`${c.value.personVO.birthday} 00:00:00`},productPlanVOList:[{planCode:h.currentPlan||(null===(i=h.riskPlanData)||void 0===i||null===(l=i[0])||void 0===l?void 0:l.planCode),riskVOList:[{...p.value[h.currentPlan],riderRiskVOList:o}]}]}]}}).then((({code:e,data:a})=>{"10000"===e&&(h.trialResult=a,h.canTrial=!1)}))},O=()=>{var e,a,i,l,o;Promise.all([null==f||null===(e=f.value)||void 0===e||null===(a=e.validateForm)||void 0===a?void 0:a.call(e),null==b||null===(i=b.value)||void 0===i||null===(l=i.validateForm)||void 0===l?void 0:l.call(i),null==g||null===(o=g.value)||void 0===o?void 0:o.validate()]).then((()=>{L()}))},C=()=>{((e={})=>q.get(`/api/product/insureProductDetail/${null==e?void 0:e.productId}`,e))({productId:115}).then((({code:e,data:a})=>{"10000"===e&&(h.riskBaseInfo=null==a?void 0:a.productBasicInfoVO,null==a||a.productRelationPlanVOList.forEach(((e,a)=>{0===a&&(h.currentPlan=e.planCode),Object.assign(p.value,{[e.planCode]:{liabilityVOList:[],riderRiskVOList:{}}})})),h.riskData=(null==a?void 0:a.riskDetailVOList)||[],h.riskPlanData=(null==a?void 0:a.productRelationPlanVOList)||[])})).finally((()=>{}))},R=e=>{h.holderFactor=e.insuredFactorList,h.insuredFactor=e.holderFactorList};return o([()=>p.value,()=>a.value,()=>c.value],(e=>{e&&h.canTrial&&(h.canTrial=!0)}),{deep:!0}),l((()=>{C()})),(e,i)=>{const l=t("VanForm"),o=t("VanTab"),v=t("VanTabs"),L=t("VanButton"),C=t("ZaPageWrap");return r(),y(C,{class:"page-trial-wrapper"},{default:u((()=>{var e,t;return[m(h).holderFactor.length?(r(),n("div",ve,[ye,d(W,{ref_key:"holderRef",ref:f,"insured-code":null===(e=m(h).riskBaseInfo)||void 0===e?void 0:e.insuredCode,"form-info":a.value.personVO,"factor-list":m(h).holderFactor},null,8,["insured-code","form-info","factor-list"])])):k("",!0),m(h).insuredFactor.length?(r(),n("div",ke,[Ve,d(W,{ref_key:"insuredRef",ref:b,"insured-code":null===(t=m(h).riskBaseInfo)||void 0===t?void 0:t.insuredCode,"form-info":c.value.personVO,"factor-list":m(h).insuredFactor},null,8,["insured-code","form-info","factor-list"])])):k("",!0),s("div",be,[m(h).riskData.length?(r(),n("div",ge,[d(l,{ref_key:"riskFormRef",ref:g,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(pe,{"risk-info":p.value,"risk-key":0,"origin-data":m(h).riskData,"pick-factor":R},null,8,["risk-info","origin-data"])])),_:1},512)])):k("",!0),m(h).riskPlanData.length?(r(),n("div",he,[d(l,{ref_key:"riskFormRef",ref:g,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(v,{modelValue:m(h).currentPlan,"onUpdate:modelValue":i[0]||(i[0]=e=>m(h).currentPlan=e)},{default:u((()=>[(r(!0),n(I,null,D(m(h).riskPlanData,(e=>(r(),y(o,{key:e.planCode,name:e.planCode,title:e.planName},{default:u((()=>[d(pe,{"risk-info":p.value[e.planCode],"origin-data":e.riskDetailVOList,"pick-factor":R,"risk-key":e.planCode},null,8,["risk-info","origin-data","risk-key"])])),_:2},1032,["name","title"])))),128))])),_:1},8,["modelValue"])])),_:1},512)])):k("",!0)]),s("div",Ie,[s("span",De,V(m(h).trialResult.premium||0),1),m(h).canTrial?(r(),y(L,{key:0,type:"primary",onClick:O},{default:u((()=>[Le])),_:1})):(r(),y(L,{key:1,type:"primary",onClick:O},{default:u((()=>[Oe])),_:1}))])]})),_:1})}}});e("default",R(Ce,[["__scopeId","data-v-70647bb6"]]))}}}))}();

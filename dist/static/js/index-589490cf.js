import{h as G,G as N,N as H,ab as xe,$ as M,r as P,k as g,p as _,s as C,n as F,A as v,F as S,H as z,m as O,ac as Te,L as q,B as e,E as Ae,a5 as Oe,a6 as Re,R as Ee,a8 as j,z as w,d as Y,v as E,U as _e,o as Ue,D as Be}from"./vendor-4d9de129.js";import{S as Me,d as Ne,e as $e,f as W,A as we,g as qe,L as he,h as Ye}from"./trial-42e9c7ea.js";import{_ as K,L as Se,T as je}from"./index-6cd418a3.js";import{u as Ge}from"./useDicData-6e77ca44.js";const He=r=>(Oe("data-v-7d3c3028"),r=r(),Re(),r),Ke={class:"com-risk-list-wrapper"},We=He(()=>v("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),ze={class:"risk-list"},Qe={class:"cell-title"},Xe={class:"title"},Je={class:"footer-button"},Ze=Ae("\u786E\u8BA4"),ei=G({props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(r,{emit:a}){const h=r,T=N([]),b=N([]),i=N([...h.disabled]),V=H({show:h.show,currentChecked:[...h.modelValue]}),D=(p,s)=>{if(!h.collocationList.length){if(s){V.currentChecked=[];return}V.currentChecked.push(p);return}let I=V.currentChecked,c=i.value;s?(h.collocationList.forEach(n=>{p===n.riskId&&(n.collocationType===2?I=I.filter(t=>t!==n.collocationRiskId||t!==p):n.collocationType===3?(I=I.filter(t=>t!==p),c=c.filter(t=>t!==n.collocationRiskId)):I=I.filter(t=>t!==p))}),V.currentChecked=I,i.value=c):(h.collocationList.forEach(n=>{p===n.riskId&&(s||(n.collocationType===2?I.push(n.collocationRiskId):n.collocationType===3&&c.push(n.collocationRiskId),I.push(p)))}),V.currentChecked.push(...I),i.value=c)},k=p=>{var I,c,n;if(i.value.includes(p))return;const s=V.currentChecked.includes(p);D(p,s),(n=(c=(I=T==null?void 0:T.value)==null?void 0:I[p])==null?void 0:c.toggle)==null||n.call(c)},A=()=>{a("close")},y=()=>{const p=h.riskList.filter(s=>V.currentChecked.includes(s.id));a("update:modelValue",[...new Set(b.value)]),a("finished",p,i.value),a("close")};return xe(()=>{T.value=[]}),M(()=>V.currentChecked,p=>{b.value=p},{deep:!0,immediate:!0}),M(()=>h.modelValue,p=>{b.value=p||[],i.value.push(...p||[])},{deep:!0,immediate:!0}),(p,s)=>{const I=P("van-checkbox"),c=P("VanCell"),n=P("van-cell-group"),t=P("van-checkbox-group"),o=P("VanButton"),m=P("VanPopup");return g(),_("div",Ke,[C(m,{show:e(V).show,"onUpdate:show":s[1]||(s[1]=u=>e(V).show=u),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",round:"",position:"bottom",closeable:"",onClose:A},{default:F(()=>[We,v("div",ze,[C(t,{modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=u=>b.value=u)},{default:F(()=>[C(n,{inset:""},{default:F(()=>[(g(!0),_(S,null,z(r.riskList,u=>(g(),O(c,{key:u.id,title:u.riskName,disabled:i.value.includes(u.id),onClick:l=>k(u.id)},{"right-icon":F(()=>[C(I,{ref_for:!0,ref:l=>T.value[u.id]=l,shape:"square",disabled:i.value.includes(u.id),name:u.id,onClick:Te(l=>k(u.id),["stop"])},null,8,["disabled","name","onClick"])]),title:F(()=>[v("div",Qe,[v("div",Xe,q(u.riskName),1)])]),_:2},1032,["title","disabled","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),v("div",Je,[C(o,{type:"primary",disabled:!e(V).currentChecked.length,block:"",onClick:y},{default:F(()=>[Ze]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var ii=K(ei,[["__scopeId","data-v-7d3c3028"]]);const ti={class:"com-personal-info-wrapper"},oi={class:"pro-radio-wrap"},ai={class:"pro-radio-wrap"},ni=G({props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(r,{expose:a}){var s,I;const h=r,T=Ge(`${(I=(s=h.insuredCode)==null?void 0:s.toLocaleUpperCase)==null?void 0:I.call(s)}_OCCUPATION`),[b,i]=Ee(),V=N(),D=j("source")||{},k=H({formInfo:h.formInfo,occupationalText:"",occupationCodeList:[]}),A=()=>new Promise((c,n)=>{var t;(t=V.value)==null||t.validate().then(()=>{c("")},o=>{var m;(m=V.value)==null||m.scrollToField(o==null?void 0:o[0].name),n()})}),y=c=>{const n=c||[];for(let t=0;t<n.length;t++)for(let o=t+1;o<n.length;o++){const m=n[t].split("_"),u=n[o].split("_"),l=n[t];m[0]===u[0]?m>u&&(n[t]=n[o],n[o]=l):m[0]==="age"&&(n[t]=n[o],n[o]=l)}return n},p=w(()=>{const c=y(h==null?void 0:h.ageRange),n=(l="")=>{const d=+l.split("_")[1],R=l.split("_")[0];return[d,R]},t=n(c[0]),o=n(c[c.length-1]),m=Y().subtract(t[0],t[1]==="age"?"year":"day").format("YYYY-MM-DD");let u=Y().subtract(o[0],o[1]==="age"?"year":"day").format("YYYY-MM-DD");return Y(u).subtract(1,"year").isBefore(m)&&(u=Y(u).subtract(1,"year").add(1,"day").format("YYYY-MM-DD")),{minAge:new Date(u),maxAge:new Date(m)}});return a({validateForm:A,ageRangeObj:p.value}),(c,n)=>{const t=P("VanField"),o=P("ProRadioButton"),m=P("VanForm"),u=P("van-datetime-picker"),l=P("van-popup");return g(),_("div",ti,[C(m,{ref_key:"formRef",ref:V,"input-align":"right","error-message-align":"right"},{default:F(()=>[e(D).type==="proposal"&&(e(D).type==="add"||e(D).type==="repeatAdd")||e(D).type!=="proposal"&&(r.factorList.includes("APPLICANT.AGE")||r.factorList.includes("AGE")||r.factorList.includes("DAY")||r.factorList.includes("APPLICANT.DAY"))?(g(),O(t,{key:0,modelValue:e(k).formInfo.birthday,"onUpdate:modelValue":n[0]||(n[0]=d=>e(k).formInfo.birthday=d),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u51FA\u751F\u65E5\u671F"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F",class:"isLink",readonly:"","is-link":"",formatter:d=>d&&e(Y)(d).format("YYYY-MM-DD"),placeholder:"\u8BF7\u9009\u62E9",onClick:n[1]||(n[1]=d=>e(i)(!0))},null,8,["modelValue","formatter"])):E("",!0),e(D).type==="proposal"&&(e(D).type==="add"||e(D).type==="repeatAdd")||e(D).type!=="proposal"&&(r.factorList.includes("APPLICANT.GENDER")||r.factorList.includes("GENDER"))?(g(),O(t,{key:1,modelValue:e(k).formInfo.gender,"onUpdate:modelValue":n[3]||(n[3]=d=>e(k).formInfo.gender=d),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6027\u522B"}]},{input:F(()=>[v("div",oi,[C(o,{modelValue:e(k).formInfo.gender,"onUpdate:modelValue":n[2]||(n[2]=d=>e(k).formInfo.gender=d),options:e(Se)},null,8,["modelValue","options"])])]),_:1},8,["modelValue"])):E("",!0),r.factorList.includes("SOCIAL_INS")||r.factorList.includes("APPLICANT.SOCIAL_INS")?(g(),O(t,{key:2,modelValue:e(k).formInfo.socialFlag,"onUpdate:modelValue":n[5]||(n[5]=d=>e(k).formInfo.socialFlag=d),name:"socialFlag",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u793E\u4FDD"}]},{input:F(()=>[v("div",ai,[C(o,{modelValue:e(k).formInfo.socialFlag,"onUpdate:modelValue":n[4]||(n[4]=d=>e(k).formInfo.socialFlag=d),options:e(Me)},null,8,["modelValue","options"])])]),_:1},8,["modelValue"])):E("",!0),r.factorList.includes("OCCUPATION_CATEGORY")||r.factorList.includes("APPLICANT.OCCUPATION_CATEGORY")?(g(),O(je,{key:3,modelValue:e(k).formInfo.occupationCodeList[0],"onUpdate:modelValue":n[6]||(n[6]=d=>e(k).formInfo.occupationCodeList[0]=d),field0:e(k).formInfo.occupationCodeList[0],"onUpdate:field0":n[7]||(n[7]=d=>e(k).formInfo.occupationCodeList[0]=d),field1:e(k).formInfo.occupationCodeList[1],"onUpdate:field1":n[8]||(n[8]=d=>e(k).formInfo.occupationCodeList[1]=d),field2:e(k).formInfo.occupationCodeList[2],"onUpdate:field2":n[9]||(n[9]=d=>e(k).formInfo.occupationCodeList[2]=d),required:"",name:"occupationCodeList",label:"\u804C\u4E1A\u7C7B\u578B","data-source":e(T),mapping:{label:"value",value:"code",children:"children"},"show-full-value":"","need-key":"name"},null,8,["modelValue","field0","field1","field2","data-source"])):E("",!0)]),_:1},512),C(l,{show:e(b),"onUpdate:show":n[12]||(n[12]=d=>_e(b)?b.value=d:null),position:"bottom"},{default:F(()=>[C(u,{type:"date","min-date":e(p).minAge,"max-date":e(p).maxAge,onConfirm:n[10]||(n[10]=d=>{e(k).formInfo.birthday=e(Y)(d).format("YYYY-MM-DD"),e(i)(!1)}),onCancel:n[11]||(n[11]=d=>e(i)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"])])}}});var _i=K(ni,[["__scopeId","data-v-81fcd45e"]]);const ri={class:"com-risk-card-wrapper part-card"},ui={class:"custom-field"},li={class:"field-tip"},si={class:"custom-field"},di={class:"field-tip"},mi={class:"custom-field"},fi={class:"field-tip"},ci={class:"pro-radio-wrap"},pi={class:"pro-radio-wrap"},yi={class:"pro-radio-wrap"},gi={class:"pro-radio-wrap"},Ii={class:"pro-radio-wrap"},Vi={key:0},Di={key:1,class:"pro-radio-wrap"},ki={key:9,class:"liab-desc"},Li=G({props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(r){const a=r,h=N({}),T=j("premium")||{};h.value=j("enumList")||{};const b=N({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),i=H({formInfo:a.formInfo}),V=t=>typeof t!="boolean"&&!t||Array.isArray(t)&&!t.length?!0:{}.toString.call(t)==="[object Object]"?Object.keys(t).length:!1,D=(t,o,m={})=>{let u=o;return Array.isArray(o)||(u=[`${u}`]),(t||[]).filter(l=>u.includes(`${l.value}`)||u.includes(l.value))},k=w(()=>{var t,o,m,u,l,d,R,U;return((t=a.originData)==null?void 0:t.riskType)===1?D(a.enums.RISK_INSURANCE_PERIOD,((o=a.originData.riskInsureLimitVO)==null?void 0:o.insurancePeriodValueList)||[]):((m=a.originData)==null?void 0:m.periodType)===2?D([{value:"year_1",name:"1\u5E74"}],["year_1"]):((u=a.originData)==null?void 0:u.exemptFlag)===1?D(Ne,[`${(d=(l=a==null?void 0:a.originData)==null?void 0:l.riskInsureLimitVO)==null?void 0:d.insurancePeriodRule}`]):D((R=a.enums)==null?void 0:R.RISK_INSURANCE_PERIOD,((U=a.mainRiskData.riskInsureLimitVO)==null?void 0:U.insurancePeriodValueList)||[])}),A=w(()=>{var t,o,m,u,l,d,R,U;return((t=a.originData)==null?void 0:t.riskType)===1?D((o=a==null?void 0:a.enums)==null?void 0:o.RISK_PAYMENT_PERIOD,((m=a.originData.riskInsureLimitVO)==null?void 0:m.paymentPeriodValueList)||[]):((u=a.originData)==null?void 0:u.exemptFlag)===1?D($e,[`${(d=(l=a==null?void 0:a.originData)==null?void 0:l.riskInsureLimitVO)==null?void 0:d.paymentPeriodRule}`]):((R=a.originData)==null?void 0:R.periodType)===2?D([{value:"year_1",name:"1\u5E74\u4EA4"}],["year_1"]):D(a.enums.RISK_PAYMENT_PERIOD,((U=a.mainRiskData.riskInsureLimitVO)==null?void 0:U.paymentPeriodValueList)||[])}),y=w(()=>{var t,o,m,u,l;return((t=a.originData)==null?void 0:t.riskType)===1?D(W,((o=a.originData.riskInsureLimitVO)==null?void 0:o.paymentFrequencyList)||[]):((m=a.originData.riskInsureLimitVO)==null?void 0:m.paymentTypeRule)===1?D(W,((u=a.mainRiskData.riskInsureLimitVO)==null?void 0:u.paymentFrequencyList)||[]):D(W,((l=a.mainRiskData.riskInsureLimitVO)==null?void 0:l.paymentFrequencyList)||[])}),p=w(()=>{var m,u;let t=0,o=0;return(((u=(m=a.originData)==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:u.paymentMethodLimitList)||[]).forEach((l,d)=>{d===0&&(t=l.minAmount,o=l.maxAmount),t>l.minAmount&&(t=l.minAmount),o<l.maxAmount&&(o=l.maxAmount)}),i.formInfo.amount=i.formInfo.amount||t,{min:t,max:o||1/0}}),s=w(()=>{var m,u;let t=0,o=0;return(((u=(m=a.originData)==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:u.paymentMethodLimitList)||[]).forEach((l,d)=>{d===0&&(t=l.minPremium,o=l.maxPremium),t>l.minPremium&&(t=l.minPremium),o<l.maxPremium&&(o=l.maxPremium)}),i.formInfo.premium=i.formInfo.premium||t,{min:t,max:o||1/0}}),I=w(()=>{var m,u,l,d;const t=((u=(m=a.originData)==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:u.minCopy)||1,o=(d=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:d.maxCopy;return i.formInfo.copy=`${i.formInfo.copy||t||1}`,{min:t,max:o}}),c=(t,o,m)=>{var l,d;const u=((d=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:d.increaseDecreaseNum)||1;if(m==="sumInsured"){if(p.value.max&&+t>p.value.max)return`\u91D1\u989D\u6700\u5927${p.value.max}\u5143`;if(+t<p.value.min)return`\u91D1\u989D\u6700\u5C0F${p.value.min}\u5143`}else{if(s.value.max&&+t>s.value.max)return`\u91D1\u989D\u6700\u5927${s.value.max}\u5143`;if(+t<s.value.min)return`\u91D1\u989D\u6700\u5C0F${s.value.min}\u5143`}return+t%u===0?"":`\u91D1\u989D\u5FC5\u987B\u662F${u}\u7684\u500D\u6570`},n=t=>{var m;const o=(((m=i.formInfo)==null?void 0:m.liabilityVOList)||[]).find(u=>u.liabilityCode===t.liabilityCode);return o?o.liabilityAttributeValue?o.liabilityAttributeValue:t.optionalFlag!==1?"0":"-1":""};return Ue(()=>{var o,m,u,l;const t={riskType:a.originData.riskType,riskId:a.originData.id,riskName:a.originData.riskName,riskCode:a.originData.riskCode,amount:i.formInfo.amount,mainRiskCode:a.originData.riskType!==1?(o=a.mainRiskData)==null?void 0:o.riskCode:void 0,mainRiskId:a.originData.riskType!==1?(m=a.mainRiskData)==null?void 0:m.id:void 0,exemptFlag:a.originData.exemptFlag,exemptType:a.originData.exemptType,riskCategory:a.originData.riskCategory,liabilityVOList:(a.originData.riskLiabilityInfoVOList||[]).map(d=>({...d,liabilityAttributeCode:d.liabilityAttributeType,liabilityCode:d.liabilityCode,liabilityRateType:d.liabilityRateType,liabilityAttributeValue:n(d)}))};(![1].includes(((u=a.originData.riskCalcMethodInfoVO)==null?void 0:u.saleMethod)||0)||((l=a.originData)==null?void 0:l.exemptFlag)===1)&&a.originData.riskCalcMethodInfoVO.fixedAmount&&(t.amount=a.originData.riskCalcMethodInfoVO.fixedAmount),Object.assign(i.formInfo,t)}),M(()=>{var t;return(t=i.formInfo)==null?void 0:t.paymentFrequency},(t=0)=>{var o,m,u;[3].includes(((o=a.originData.riskCalcMethodInfoVO)==null?void 0:o.saleMethod)||0)&&(((u=(m=a.originData)==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:u.paymentMethodLimitList)||[]).forEach(l=>{+l.paymentFrequency==+t&&Object.assign(i.formInfo,{amount:l.perCopyAmount,premium:l.perCopyPremium})}),+t==1&&i.formInfo.chargePeriod!=="single"&&(i.formInfo.chargePeriod="single")}),M(()=>{var t;return(t=i.formInfo)==null?void 0:t.copy},t=>{var o,m;((o=a.originData.riskCalcMethodInfoVO)==null?void 0:o.saleMethod)===4&&(i.formInfo.amount=(m=a.originData.riskCalcMethodInfoVO)==null?void 0:m.fixedAmount)}),M(()=>{var t;return(t=i.formInfo)==null?void 0:t.chargePeriod},t=>{t==="single"&&+(i.formInfo.paymentFrequency||0)!=1&&(i.formInfo.paymentFrequency=1)}),M(()=>a==null?void 0:a.mainRiskInfo,t=>{var o,m,u,l,d,R;t&&a.originData.riskType===2&&(((m=(o=a.originData)==null?void 0:o.riskInsureLimitVO)==null?void 0:m.insurancePeriodRule)===1&&(t.coveragePeriod?b.value.coveragePeriod.disabled=!0:b.value.coveragePeriod.prevent=!0,i.formInfo.coveragePeriod=t.coveragePeriod||""),((l=(u=a.originData)==null?void 0:u.riskInsureLimitVO)==null?void 0:l.paymentPeriodRule)===1&&(t.chargePeriod?b.value.chargePeriod.disabled=!0:b.value.chargePeriod.prevent=!0,i.formInfo.chargePeriod=t.chargePeriod||""),((R=(d=a.originData)==null?void 0:d.riskInsureLimitVO)==null?void 0:R.paymentTypeRule)===1&&(t.paymentFrequency?b.value.paymentFrequency.disabled=!0:b.value.paymentFrequency.prevent=!0,i.formInfo.paymentFrequency=t.paymentFrequency||0))},{immediate:!0,deep:!0}),(t,o)=>{var Q,X,J,Z,ee,ie,te,oe,ae,ne,re,ue,le,se,de,me,fe,ce,pe,ye,ge,Ie,Ve,De,ke,Le,be,ve,Fe,Ce;const m=P("ProSvg"),u=P("ProTitle"),l=P("VanStepper"),d=P("VanField"),R=P("ProRadioButton"),U=P("ProField"),Pe=P("ProExpand");return g(),_("div",ri,[C(u,{"risk-type":r.originData.riskType,title:r.originData.riskName},{default:F(()=>[r.removeRiskList.includes(r.originData.id)?(g(),_("div",{key:0,class:"delete-risk",onClick:o[0]||(o[0]=f=>r.removeRisk(r.originData.id))},[C(m,{name:"img-lajitong",color:"#0d6efe"})])):E("",!0)]),_:1},8,["risk-type","title"]),((Q=r.originData.riskCalcMethodInfoVO)==null?void 0:Q.saleMethod)===1&&r.originData.exemptFlag===2?(g(),O(d,{key:0,modelValue:e(i).formInfo.amount,"onUpdate:modelValue":o[2]||(o[2]=f=>e(i).formInfo.amount=f),label:"\u4FDD\u989D",name:"amount",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...f)=>c(...f,"sumInsured")}]},{input:F(()=>{var f,L;return[v("div",ui,[C(l,{modelValue:e(i).formInfo.amount,"onUpdate:modelValue":o[1]||(o[1]=x=>e(i).formInfo.amount=x),"input-width":"64px",min:e(p).min,step:((f=r.originData.riskCalcMethodInfoVO)==null?void 0:f.increaseDecreaseNum)||1,max:e(p).max},null,8,["modelValue","min","step","max"]),v("span",li,q(`\u91D1\u989D\u6700\u4F4E${e(p).min}\u5143\uFF0C\u4E3A${((L=r.originData.riskCalcMethodInfoVO)==null?void 0:L.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):E("",!0),((J=(X=r.originData)==null?void 0:X.riskCalcMethodInfoVO)==null?void 0:J.saleMethod)===2?(g(),O(d,{key:1,modelValue:e(i).formInfo.premium,"onUpdate:modelValue":o[4]||(o[4]=f=>e(i).formInfo.premium=f),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"},{trigger:"onChange",validator:(...f)=>c(...f,"premium")}]},{input:F(()=>{var f,L,x,B;return[v("div",si,[C(l,{modelValue:e(i).formInfo.premium,"onUpdate:modelValue":o[3]||(o[3]=$=>e(i).formInfo.premium=$),step:((L=(f=r.originData)==null?void 0:f.riskCalcMethodInfoVO)==null?void 0:L.increaseDecreaseNum)||1,min:e(s).min,"input-width":"64px",max:e(s).max},null,8,["modelValue","step","min","max"]),v("span",di,q(`\u91D1\u989D\u6700\u4F4E${e(s).min}\u5143\uFF0C\u4E3A${((B=(x=r.originData)==null?void 0:x.riskCalcMethodInfoVO)==null?void 0:B.increaseDecreaseNum)||1}\u7684\u500D\u6570`),1)])]}),_:1},8,["modelValue","rules"])):E("",!0),((ee=(Z=r.originData)==null?void 0:Z.riskCalcMethodInfoVO)==null?void 0:ee.saleMethod)===3||((te=(ie=r.originData)==null?void 0:ie.riskCalcMethodInfoVO)==null?void 0:te.saleMethod)===4&&(((ae=(oe=r.originData)==null?void 0:oe.riskCalcMethodInfoVO)==null?void 0:ae.minCopy)||((re=(ne=r.originData)==null?void 0:ne.riskCalcMethodInfoVO)==null?void 0:re.maxCopy))?(g(),O(d,{key:2,modelValue:e(i).formInfo.copy,"onUpdate:modelValue":o[6]||(o[6]=f=>e(i).formInfo.copy=f),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:F(()=>[v("div",mi,[C(l,{modelValue:e(i).formInfo.copy,"onUpdate:modelValue":o[5]||(o[5]=f=>e(i).formInfo.copy=f),step:1,min:e(I).min,max:e(I).max},null,8,["modelValue","min","max"]),v("span",fi,q(`${e(I).min}\u4EFD\u8D77\u8D2D\uFF0C\u6700\u591A\u8D2D\u4E70${e(I).max}\u4EFD`),1)])]),_:1},8,["modelValue"])):E("",!0),(![1].includes(((ue=r.originData.riskCalcMethodInfoVO)==null?void 0:ue.saleMethod)||0)||((le=r.originData)==null?void 0:le.exemptFlag)===1)&&(r.originData.riskCalcMethodInfoVO.fixedAmount||((de=e(T))==null?void 0:de[(se=r.originData)==null?void 0:se.riskCode]))?(g(),O(d,{key:3,label:"\u4FDD\u989D"},{input:F(()=>{var f,L,x,B;return[v("div",null,q(((f=r.originData.riskCalcMethodInfoVO)==null?void 0:f.fixedAmount)||((B=(x=e(T))==null?void 0:x[(L=r.originData)==null?void 0:L.riskCode])==null?void 0:B.amount)),1)]}),_:1})):E("",!0),!V((fe=(me=r.originData)==null?void 0:me.riskInsureLimitVO)==null?void 0:fe.insurancePeriodValueList)||!V((pe=(ce=r.originData)==null?void 0:ce.riskInsureLimitVO)==null?void 0:pe.insurancePeriodRule)?(g(),O(U,{key:4,modelValue:e(i).formInfo.coveragePeriod,"onUpdate:modelValue":o[8]||(o[8]=f=>e(i).formInfo.coveragePeriod=f),label:"\u4FDD\u969C\u671F\u95F4",name:"coveragePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4FDD\u969C\u671F\u95F4"}]},{input:F(()=>[v("div",ci,[C(R,{modelValue:e(i).formInfo.coveragePeriod,"onUpdate:modelValue":o[7]||(o[7]=f=>e(i).formInfo.coveragePeriod=f),disabled:b.value.coveragePeriod.disabled,prevent:b.value.coveragePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4FDD\u969C\u671F\u95F4":"",options:e(k),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])]),_:1},8,["modelValue"])):E("",!0),!V((ge=(ye=r.originData)==null?void 0:ye.riskInsureLimitVO)==null?void 0:ge.paymentPeriodValueList)||!V((Ve=(Ie=r.originData)==null?void 0:Ie.riskInsureLimitVO)==null?void 0:Ve.paymentPeriodRule)?(g(),O(U,{key:5,modelValue:e(i).formInfo.chargePeriod,"onUpdate:modelValue":o[10]||(o[10]=f=>e(i).formInfo.chargePeriod=f),label:"\u4EA4\u8D39\u671F\u95F4",name:"chargePeriod",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u671F\u95F4"}]},{input:F(()=>[v("div",pi,[C(R,{modelValue:e(i).formInfo.chargePeriod,"onUpdate:modelValue":o[9]||(o[9]=f=>e(i).formInfo.chargePeriod=f),disabled:b.value.chargePeriod.disabled,prevent:b.value.chargePeriod.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u671F\u95F4":"",options:e(A),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])]),_:1},8,["modelValue"])):E("",!0),!V((De=r.originData.riskInsureLimitVO)==null?void 0:De.paymentFrequencyList)||!V((ke=r.originData.riskInsureLimitVO)==null?void 0:ke.paymentPeriodRule)?(g(),O(U,{key:6,modelValue:e(i).formInfo.paymentFrequency,"onUpdate:modelValue":o[12]||(o[12]=f=>e(i).formInfo.paymentFrequency=f),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA4\u8D39\u65B9\u5F0F"}]},{input:F(()=>[v("div",yi,[C(R,{modelValue:e(i).formInfo.paymentFrequency,"onUpdate:modelValue":o[11]||(o[11]=f=>e(i).formInfo.paymentFrequency=f),disabled:b.value.paymentFrequency.disabled,prevent:b.value.paymentFrequency.prevent?"\u8BF7\u5148\u9009\u62E9\u4E3B\u9669\u4EA4\u8D39\u65B9\u5F0F":"",options:e(y)},null,8,["modelValue","disabled","prevent","options"])])]),_:1},8,["modelValue"])):E("",!0),V((be=(Le=r.originData)==null?void 0:Le.riskInsureLimitVO)==null?void 0:be.annuityDrawValueList)?E("",!0):(g(),O(U,{key:7,modelValue:e(i).formInfo.annuityDrawDate,"onUpdate:modelValue":o[14]||(o[14]=f=>e(i).formInfo.annuityDrawDate=f),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate"},{input:F(()=>{var f;return[v("div",gi,[C(R,{modelValue:e(i).formInfo.annuityDrawDate,"onUpdate:modelValue":o[13]||(o[13]=L=>e(i).formInfo.annuityDrawDate=L),options:D(e(we),((f=r.originData.riskInsureLimitVO)==null?void 0:f.annuityDrawValueList)||[])},null,8,["modelValue","options"])])]}),_:1},8,["modelValue"])),V((Fe=(ve=r.originData)==null?void 0:ve.riskInsureLimitVO)==null?void 0:Fe.annuityDrawFrequencyList)?E("",!0):(g(),O(U,{key:8,modelValue:e(i).formInfo.annuityDrawType,"onUpdate:modelValue":o[16]||(o[16]=f=>e(i).formInfo.annuityDrawType=f),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType"},{input:F(()=>{var f;return[v("div",Ii,[C(R,{modelValue:e(i).formInfo.annuityDrawType,"onUpdate:modelValue":o[15]||(o[15]=L=>e(i).formInfo.annuityDrawType=L),options:D(e(qe),((f=r.originData.riskInsureLimitVO)==null?void 0:f.annuityDrawFrequencyList)||[])},null,8,["modelValue","options"])])]}),_:1},8,["modelValue"])),(g(!0),_(S,null,z(r.originData.riskLiabilityInfoVOList||[],(f,L)=>(g(),_(S,{key:L},[f.optionalFlag===1&&!V(f.liabilityAttributeValueList)?(g(),O(d,{key:0,modelValue:e(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":x=>e(i).formInfo.liabilityVOList[L].liabilityAttributeValue=x,label:f.liabilityName,name:"liabilityAttributeValue",rules:[{required:f.liabilityAttributeValue,message:`\u8BF7\u9009\u62E9${f.liabilityName}`}]},{input:F(()=>{var x,B;return[v("div",null,[V(f.liabilityAttributeValueList)?(g(),_("span",Vi,"50\u4E07")):(g(),_("div",Di,[C(R,{modelValue:e(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":$=>e(i).formInfo.liabilityVOList[L].liabilityAttributeValue=$,options:D(e(he),(B=(x=r.originData.riskLiabilityInfoVOList)==null?void 0:x[L])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"])]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):E("",!0),f.optionalFlag!==1?(g(),O(d,{key:1,modelValue:e(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":x=>e(i).formInfo.liabilityVOList[L].liabilityAttributeValue=x,label:f.liabilityName,name:"liabilityAttributeValue"},{input:F(()=>{var x,B;return[v("div",null,[V(f.liabilityAttributeValueList)?(g(),O(R,{key:0,modelValue:e(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":$=>e(i).formInfo.liabilityVOList[L].liabilityAttributeValue=$,options:e(Ye)},null,8,["modelValue","onUpdate:modelValue","options"])):(g(),O(R,{key:1,modelValue:e(i).formInfo.liabilityVOList[L].liabilityAttributeValue,"onUpdate:modelValue":$=>e(i).formInfo.liabilityVOList[L].liabilityAttributeValue=$,options:D(e(he),(B=(x=r.originData.riskLiabilityInfoVOList)==null?void 0:x[L])==null?void 0:B.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])]}),_:2},1032,["modelValue","onUpdate:modelValue","label"])):E("",!0)],64))),128)),(Ce=r.originData)!=null&&Ce.relationDesc?(g(),_("div",ki,[C(Pe,{title:"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E"},{default:F(()=>[v("div",null,q(r.originData.relationDesc),1)]),_:1})])):E("",!0)])}}});var bi=K(Li,[["__scopeId","data-v-6d150150"]]);const vi=r=>(Oe("data-v-4b309d85"),r=r(),Re(),r),Fi={class:"risk-list-wrapper"},Ci={key:0,class:"add-rider-risk"},hi={class:"left-part"},Ai=vi(()=>v("span",{class:"btn-plus"},"+",-1)),Oi=Ae(" \u9644\u52A0\u9669"),Ri=G({props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(r){const a=r,h=j("source")||{},[T,b]=Ee(!1);N(null),N(null);const i=H({mainRiskInfo:a.riskInfo,riskInfo:a.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),V=(A,y)=>{i.currentRiskList=i.currentRiskList.concat(A),i.disabledList=y},D=A=>{Be.confirm({message:"\u786E\u5B9A\u8981\u5220\u9664\u9644\u52A0\u9669\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{var p;const y=[A];(((p=i.mainRiskData)==null?void 0:p.collocationVOList)||[]).forEach(s=>{A===s.riskId&&(s.collocationType===2||s.collocationType===3)&&y.push(s.collocationRiskId)}),i.checkedList=i.checkedList.filter(s=>!y.includes(s)),i.currentRiskList=i.currentRiskList.filter(s=>y.includes(s.id)?(Object.assign(i.riskInfo,{[s.id]:void 0}),!1):!0),i.disabledList=i.disabledList.filter(s=>!y.includes(s))}).catch(()=>{})},k=(A,y)=>{var s,I;const p=(((I=(s=i.riskInfo)==null?void 0:s[y])==null?void 0:I.liabilityVOList)||[]).find(c=>c.liabilityCode===A.liabilityCode);return p?p.liabilityAttributeValue?p.liabilityAttributeValue:A.optionalFlag!==1?"0":"-1":""};return M(()=>i.currentRiskList,A=>{const y=[i.mainRiskData,...A];let p=[],s=[];const I=[];y.forEach((c,n)=>{var o,m,u;const t=((o=c==null?void 0:c.riskCalcMethodInfoVO)==null?void 0:o.riskFactorRelationList)||[];p=p.concat(t.filter(l=>l.factorObject==="insured").map(l=>l.factorCode)),s=s.concat(t.filter(l=>l.factorObject==="holder").map(l=>l.factorCode)),I.push((m=c==null?void 0:c.riskInsureLimitVO)==null?void 0:m.minHolderAge,(u=c==null?void 0:c.riskInsureLimitVO)==null?void 0:u.maxHolderAge)}),(A||[]).forEach(c=>{var t,o;const n={riskType:c.riskType,riskId:c.id,riskCode:c.riskCode,riskName:c.riskName,mainRiskCode:c.riskType!==1?(t=i.mainRiskData)==null?void 0:t.riskCode:void 0,mainRiskId:c.riskType!==1?(o=i.mainRiskData)==null?void 0:o.id:void 0,riskCategory:c.riskCategory,exemptFlag:a.originData.exemptFlag,exemptType:a.originData.exemptType,liabilityVOList:(c.riskLiabilityInfoVOList||[]).map(m=>({...m,liabilityAttributeCode:m.liabilityAttributeType,liabilityCode:m.liabilityCode,liabilityRateType:m.liabilityRateType,liabilityAttributeValue:k(m,c.id)}))};i.riskInfo[c.id]||Object.assign(i.riskInfo,{[c.id]:n})}),a.pickFactor({insuredFactorList:[...new Set(p)],holderFactorList:[...new Set(s)],ageRange:I})},{deep:!0,immediate:!0}),M(()=>a.riskInfo,A=>{i.mainRiskInfo=Object.values(A||{}).find(y=>(y==null?void 0:y.riskType)===1)||{}},{deep:!0,immediate:!0}),M(()=>a.originData,A=>{let y=[];const p=[];h.origin==="proposal"&&!(h.type==="add"||h.type==="repeatAdd")?((A||[]).forEach(s=>{s.riskType===1&&(i.mainRiskData=s),y.push(s)}),y=y.filter(s=>h.showRiskList.includes(s.id))):(A||[]).forEach(s=>{s.riskType===1?(i.mainRiskData=s,y.push(s)):s.collocationType===2?y.push(s):p.push(s)}),i.riderRiskList=p,i.currentRiskList=y},{deep:!0,immediate:!0}),(A,y)=>{var s,I,c;const p=P("ProCheckButton");return g(),_("div",Fi,[(g(!0),_(S,null,z(e(i).currentRiskList,(n,t)=>(g(),O(bi,{key:n.id,"form-info":e(i).riskInfo[n.id],index:t,enums:r.enums,"main-risk-data":e(i).mainRiskData,"main-risk-info":e(i).mainRiskInfo,"origin-data":n,"remove-risk":D,"remove-risk-list":e(i).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"]))),128)),((s=e(i).riderRiskList)==null?void 0:s.length)-((I=e(i).checkedList)==null?void 0:I.length)&&e(h).origin!=="proposal"?(g(),_("div",Ci,[v("span",hi,q(`\u5171\u6709${e(i).riderRiskList.length-e(i).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),C(p,{activated:"",class:"btn-rider-risk",onClick:y[0]||(y[0]=n=>e(b)(!0))},{default:F(()=>[Ai,Oi]),_:1})])):E("",!0),e(T)?(g(),O(ii,{key:1,modelValue:e(i).checkedList,"onUpdate:modelValue":y[1]||(y[1]=n=>e(i).checkedList=n),show:e(T),disabled:e(i).disabledList,"risk-list":e(i).riderRiskList,"collocation-list":((c=e(i).mainRiskData)==null?void 0:c.collocationVOList)||[],onFinished:V,onClose:y[2]||(y[2]=n=>e(b)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):E("",!0)])}}});var Ui=K(Ri,[["__scopeId","data-v-4b309d85"]]);export{_i as P,ii as R,Ui as a};

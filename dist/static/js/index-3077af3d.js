var lt=Object.defineProperty,rt=Object.defineProperties;var it=Object.getOwnPropertyDescriptors;var we=Object.getOwnPropertySymbols;var dt=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var Ie=(l,r,o)=>r in l?lt(l,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[r]=o,re=(l,r)=>{for(var o in r||(r={}))dt.call(r,o)&&Ie(l,o,r[o]);if(we)for(var o of we(r))ct.call(r,o)&&Ie(l,o,r[o]);return l},ie=(l,r)=>rt(l,it(r));import{g as X,Q as Oe,E as y,y as J,j as s,n as D,z as a,J as V,p as d,L as ce,A as e,B as mt,a4 as me,a5 as pe,F as W,G as z,k as B,C as S,t as Q,_ as se,r as k,m as h,M as Le,ar as pt,h as Ue,a9 as _t,O as ft,af as vt,H as ht,l as Dt,T as Be}from"./vendor-06835924.js";import{_ as oe,d as Ft,e as Me,V as fe,i as de,S as Ct,C as be,a as ve,j as yt,a2 as Ae,$ as Et,m as gt,G as Pe,a1 as ke}from"./index-f6751754.js";import{P as wt}from"./index-1d894fd5.js";import{c as It}from"./close-df102554.js";import{i as Re,a as qe,e as Bt,p as $e,s as bt,u as At,b as Pt}from"./trial-38bbdb94.js";import{a as He,b as kt,n as Ve,i as Ne,m as $t,c as Se,t as Vt,g as Nt}from"./utils-44c5956a.js";import{p as Ke}from"./product-da3f960f.js";import{t as Ce}from"./theme-eeb93d73.js";import{R as De,S as Te,a as St,f as he}from"./infoCollection-b0426750.js";import{A as Tt}from"./bankCard-b0679059.js";import{b as Fe,v as xt}from"./validator-ebd71d12.js";import{a as xe}from"./order-b675ac95.js";import"./trial-d4371d12.js";const Ot=l=>(me("data-v-47f4f4ca"),l=l(),pe(),l),Lt={class:"com-question-item"},Ut={class:"question"},Mt=Ot(()=>a("div",{class:"icon"},V("?"),-1)),Rt={class:"title"},qt=X({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(l){const[r,o]=Oe(!1),g=y(),p=()=>{o()},t=J(()=>r.value?Ft(g.value):0);return(N,P)=>(s(),D("div",Lt,[a("div",Ut,[Mt,a("div",Rt,V(l.question),1),d(Me,{name:"down",class:ce(["arrow-icon",{show:e(r)}]),onClick:p},null,8,["class"])]),a("div",{ref_key:"answerDom",ref:g,class:"answer",style:mt({height:`${e(t)}px`})},V(l.answer),5)]))}});var Ht=oe(qt,[["__scopeId","data-v-47f4f4ca"]]);const Kt={class:"com-question"},Yt=X({props:{list:{type:Array,default:()=>[]}},setup(l){const r=l,[o,g]=Oe(!1),p=()=>{g()},t=J(()=>r.list.length<=4||o.value?r.list:r.list.slice(0,4));return(N,P)=>(s(),D("div",Kt,[(s(!0),D(W,null,z(e(t),(w,T)=>(s(),B(Ht,{key:T,question:w.title,answer:w.desc},null,8,["question","answer"]))),128)),l.list.length>4?(s(),D("div",{key:0,class:"show-more",onClick:p},[S(V(e(o)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),d(Me,{name:"down",class:ce(["icon",{showMore:e(o)}])},null,8,["class"])])):Q("",!0)]))}});var Wt=oe(Yt,[["__scopeId","data-v-40dd0994"]]),zt="/static/assets/upgrade_bg.4a771537.png";const Ye=l=>(me("data-v-37acf7c0"),l=l(),pe(),l),jt={key:0,class:"pro-modal"},Gt=Ye(()=>a("div",{class:"pro-overlay"},null,-1)),Jt={class:"pro-modal-wrapper"},Qt=["src"],Xt={class:"pro-modal-body"},Zt={class:"pro-modal-content"},eo=Ye(()=>a("p",{class:"tips"},"\u5347\u7EA7\u540E\u7684\u4FDD\u969C\u5C06\u4E8E\u7B2C\u4E8C\u671F\u4FDD\u8D39\u6263\u8D39/\u7F34\u8D39\u6210\u529F\u540E\u751F\u6548",-1)),to={class:"pro-modal-content"},oo={class:"product-attachment-list"},ao=S(" \u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),uo={key:0,class:"dun-hao"},so=["src"],no=X({props:{orderNo:{type:String,default:""},tenantId:{type:String,default:""},isShow:{type:Boolean,default:()=>{}}},emits:["on-confirm","on-close"],setup(l,{emit:r}){const o=l,g=y(),p=y(),t=y(),N=y(),P=y([]),w="BWYL2022",T=()=>{r("on-close")},x=()=>{r("on-confirm")},O=async()=>{try{const I=kt({tenantId:o.tenantId,premium:N.value,orderDetail:t.value,productDetail:g.value,insureDetail:p.value,successJumpUrl:""}),$=await Bt(I),{code:M,data:R}=$;M==="10000"&&(N.value=R.installmentPremium)}catch(I){console.log(I)}},K=()=>{const I=Ke({productCode:w,withInsureInfo:!0,tenantId:o.tenantId}),$=Re({productCode:w}),M=qe({orderNo:o.orderNo,tenantId:o.tenantId});Promise.all([I,$,M]).then(([R,v,u])=>{R.code==="10000"&&(g.value=R.data,P.value=R.data.tenantProductInsureVO.attachmentVOList),v.code==="10000"&&(p.value=v.data),u.code==="10000"&&(t.value=u.data),O()})};return se(()=>o.isShow,I=>{I&&K()}),(I,$)=>{const M=k("ProPDFviewer");return o.isShow?(s(),D("div",jt,[Gt,a("div",Jt,[a("img",{class:"cover",src:e(zt)},null,8,Qt),a("div",Xt,[a("div",Zt,[a("p",null,"\u6BCF\u6708\u4FDD\u8D39\u4EC5\u9700"+V(e(He)(N.value||0))+"\u5143\uFF0C\u65E0\u9700\u91CD\u590D\u6295\u4FDD",1),eo]),a("div",{class:"pro-modal-btn",onClick:x},"\u4E00\u952E\u5347\u7EA7"),a("div",to,[a("div",oo,[ao,(s(!0),D(W,null,z(P.value,(R,v)=>(s(),B(M,{key:v,class:"file-name",title:`\u300A${R.attachmentName}\u300B`,content:R.attachmentUri,type:"pdf"},{default:h(()=>[v!==(P.value||[]).length-1?(s(),D("span",uo,"\u3001")):Q("",!0)]),_:2},1032,["title","content"]))),128))])])]),a("div",{class:"pro-modal-close",onClick:T},[a("img",{src:e(It)},null,8,so)])])])):Q("",!0)}}});var lo=oe(no,[["__scopeId","data-v-37acf7c0"]]);const ro={class:"list"},io={class:"item"},co={class:"footer"},mo=S("\u6211\u5DF2\u9010\u9875\u9605\u8BFB\u5E76\u786E\u8BA4\u5B8C\u5168\u7B26\u5408\u5065\u5EB7\u544A\u77E5\u5185\u5BB9"),We=X({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","submit"],setup(l,{emit:r}){const o=l,g=y(o.show),p=y(o.activeIndex),t=J(()=>o.contentList[p.value].attachmentUri),N=()=>{r("update:show",!1),r("submit")};return se(()=>o,()=>{g.value=o.show,p.value=o.activeIndex},{deep:!0,immediate:!0}),(P,w)=>{const T=k("ProTab"),x=k("ProFilePreview"),O=k("VanButton"),K=k("van-config-provider"),I=k("ProPopup");return s(),B(I,{show:g.value,"onUpdate:show":w[1]||(w[1]=$=>g.value=$),height:80,class:"file-preview-popup-wrap",closeable:!1,onClose:w[2]||(w[2]=$=>r("update:show",!1))},{default:h(()=>[d(K,{"theme-vars":e(Ce)},{default:h(()=>[d(T,{active:p.value,"onUpdate:active":w[0]||(w[0]=$=>p.value=$),list:l.contentList.map(($,M)=>({title:$.attachmentName,slotName:`guarantee-${M}`})),class:"tab"},null,8,["active","list"]),a("div",ro,[a("div",io,[(s(),B(x,{key:e(t),content:e(t),type:"pdf"},null,8,["content"]))])]),a("div",co,[d(O,{type:"primary",block:"",round:"",onClick:N},{default:h(()=>[mo]),_:1})])]),_:1},8,["theme-vars"])]),_:1},8,["show"])}}});const H=l=>(me("data-v-b473732a"),l=l(),pe(),l),po={class:"holder container"},_o=H(()=>a("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),fo={class:"insured container"},vo=H(()=>a("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),ho={class:"payment container"},Do=H(()=>a("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),Fo={class:"attachment-list"},Co={class:"product-attachment-list"},yo=S(" \u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653 "),Eo=["onClick"],go={class:"rate-attachment-list"},wo=S(" *\u4FDD\u8D39\u4E0E\u88AB\u4FDD\u4EBA\u5E74\u9F84\u3001\u533B\u4FDD\u60C5\u51B5\u76F8\u5173\uFF0C\u8BE6\u89C1 "),Io=["onClick"],Bo={key:0,id:"renewal",class:"renewal container"},bo=H(()=>a("div",{class:"title"},"\u5F00\u901A\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",-1)),Ao={class:"content"},Po={class:"pro-radio"},ko={class:"desc_arrow"},$o={key:0,class:"renewal-y-desc renewal-desc"},Vo=H(()=>a("div",{class:"sub-title"},"\u5F00\u901A\u540E\u53EF\u4EAB\u53D7\uFF1A",-1)),No=H(()=>a("div",{class:"desc"},"\u5B89\u5FC3\uFF01\u5F00\u901A\u81EA\u52A8\u7F34\u8D39\u53EF\u4F7F\u4FDD\u969C\u4E0D\u95F4\u65AD",-1)),So=H(()=>a("div",{class:"desc"},"\u7701\u5FC3\uFF01\u4E0B\u4E00\u5E74\u91CD\u65B0\u6295\u4FDD\uFF0C\u4E0D\u7528\u62C5\u5FC3\u65AD\u4FDD",-1)),To=H(()=>a("div",{class:"desc"},"\u653E\u5FC3\uFF01\u65E0\u989D\u5916\u8D39\u7528\uFF0C\u5F00\u901A\u540E\u53EF\u968F\u65F6\u53D6\u6D88",-1)),xo=H(()=>a("div",{class:"desc"},"\u63D0\u793A:\u672C\u4EA7\u54C1\u4E3A\u4E00\u5E74\u671F\u975E\u4FDD\u8BC1\u7EED\u4FDD\u4EA7\u54C1",-1)),Oo=[Vo,No,So,To,xo],Lo={key:1,class:"renewal-n-desc renewal-desc"},Uo=H(()=>a("div",{class:"sub-title"},"\u672A\u5F00\u901A\uFF0C\u4E00\u65E6\u65AD\u4FDD\u5C06\u9762\u4E34\uFF1A",-1)),Mo=H(()=>a("div",{class:"desc"},"\u65AD\u4FDD\u540E\u5C06\u5931\u53BB\u4FDD\u969C\uFF0C\u65AD\u4FDD\u671F\u95F4\u51FA\u9669\u4E0D\u53EF\u7406\u8D54",-1)),Ro=H(()=>a("div",{class:"desc"},"\u65AD\u4FDD\u540E\u91CD\u65B0\u6295\u4FDD\uFF0C\u7B49\u5F85\u671F\u5185\u51FA\u9669\u65E0\u6CD5\u7406\u8D54",-1)),qo=H(()=>a("div",{class:"desc"},"\u65AD\u4FDD\u540E\u91CD\u65B0\u6295\u4FDD\uFF0C\u9700\u6838\u5B9E\u5065\u5EB7\u72B6\u51B5\uFF0C\u53EF\u80FD\u65E0\u6CD5\u6295\u4FDD",-1)),Ho=[Uo,Mo,Ro,qo],Ko=X({props:{isCheck:{type:Boolean,default:!1},disable:{type:Boolean,default:!1},holderDisable:{type:Boolean,default:!1},paymentMethodDisable:{type:Boolean,default:!1},premium:{default:0},productDetail:{default:{}},formInfo:{default:()=>({})}},setup(l,{expose:r}){const o=l,g=y({}),p=[{value:"Y",title:"\u7533\u8BF7\u5F00\u901A"},{value:"N",title:"\u6682\u4E0D\u5F00\u901A"}],t=Le({insureDisable:!0,formInfo:o.formInfo}),N=y(!1),P=y(0),w=y(!1),T=v=>Fe(v)?!0:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u59D3\u540D",x=J(()=>{var v,u;return(u=(v=o.productDetail)==null?void 0:v.tenantProductInsureVO)==null?void 0:u.attachmentVOList.filter(F=>F.attachmentName==="\u8D39\u7387\u8868")}),O=J(()=>{var v,u;return((u=(v=o.productDetail)==null?void 0:v.tenantProductInsureVO)==null?void 0:u.attachmentVOList.filter(F=>F.attachmentName!=="\u8D39\u7387\u8868"))||[]}),K=()=>(w.value=!0,w),I=v=>{P.value=v,N.value=!0},$=()=>new Promise((v,u)=>{g==null||g.value.validate().then(()=>{v("")},()=>{u()})}),M=v=>{o.disable||(t.formInfo.renewalDK=v)},R=()=>{o.disable||(t.formInfo.renewalDK=t.formInfo.renewalDK==="Y"?"N":"Y")};return se(()=>t.formInfo.insured.relationToHolder,(v,u)=>{o.disable||v!==u&&(v.toString()===De.SELF?(t.formInfo.insured={certNo:t.formInfo.holder.certNo,name:t.formInfo.holder.name,socialFlag:t.formInfo.holder.socialFlag,relationToHolder:v},t.insureDisable=!0):(t.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:v},t.insureDisable=!1))}),se(()=>t.formInfo.holder,()=>{t.formInfo.insured.relationToHolder===De.SELF&&Object.assign(t.formInfo.insured,t.formInfo.holder)},{deep:!0,immediate:!0}),r({validateForm:$,previewFile:I,isAgreeFile:w,onSubmit:K}),(v,u)=>{const F=k("ProField"),j=k("ProRadioButton"),Z=k("ProPicker"),ae=k("ProTabButton"),ee=k("ProPDFviewer"),ne=k("ProForm"),_e=k("van-config-provider");return s(),B(_e,{"theme-vars":e(Ce)},{default:h(()=>[d(ne,{ref_key:"formRef",ref:g},{default:h(()=>[a("div",po,[_o,o.holderDisable||o.disable?(s(),B(F,{key:0,label:"\u59D3\u540D",class:"pro-field","is-view":!0},{input:h(()=>[S(V(e(Ve)(e(t).formInfo.holder.name)),1)]),_:1})):(s(),B(F,{key:1,modelValue:e(t).formInfo.holder.name,"onUpdate:modelValue":u[0]||(u[0]=n=>e(t).formInfo.holder.name=n),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D",maxlength:"10",rules:[{validator:T}]},null,8,["modelValue","rules"])),o.holderDisable||o.disable?(s(),B(F,{key:2,label:"\u8BC1\u4EF6\u53F7\u7801",class:"pro-field","is-view":!0},{input:h(()=>[S(V(e(Ne)(e(t).formInfo.holder.certNo)),1)]),_:1})):(s(),B(F,{key:3,modelValue:e(t).formInfo.holder.certNo,"onUpdate:modelValue":u[1]||(u[1]=n=>e(t).formInfo.holder.certNo=n),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[e(fe).ID_CARD]},null,8,["modelValue","validate-type"])),o.holderDisable||o.disable||o.isCheck?(s(),B(F,{key:4,label:"\u624B\u673A\u53F7",class:"pro-field","is-view":!0},{input:h(()=>[S(V(e($t)(e(t).formInfo.holder.mobile)),1)]),_:1})):(s(),B(F,{key:5,modelValue:e(t).formInfo.holder.mobile,"onUpdate:modelValue":u[2]||(u[2]=n=>e(t).formInfo.holder.mobile=n),label:"\u624B\u673A\u53F7",name:"mobile",required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",maxlength:"11","validate-type":[e(fe).PHONE]},null,8,["modelValue","validate-type"])),d(F,{modelValue:e(t).formInfo.holder.socialFlag,"onUpdate:modelValue":u[4]||(u[4]=n=>e(t).formInfo.holder.socialFlag=n),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:h(()=>[d(j,{modelValue:e(t).formInfo.holder.socialFlag,"onUpdate:modelValue":u[3]||(u[3]=n=>e(t).formInfo.holder.socialFlag=n),disabled:o.disable,options:e(Te)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),d(de),a("div",fo,[vo,d(F,{modelValue:e(t).formInfo.insured.relationToHolder,"onUpdate:modelValue":u[6]||(u[6]=n=>e(t).formInfo.insured.relationToHolder=n),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:h(()=>[d(j,{modelValue:e(t).formInfo.insured.relationToHolder,"onUpdate:modelValue":u[5]||(u[5]=n=>e(t).formInfo.insured.relationToHolder=n),disabled:o.disable,options:e(St)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"]),e(t).insureDisable||o.disable?(s(),B(F,{key:0,label:"\u59D3\u540D",class:"pro-field","is-view":!0},{input:h(()=>[S(V(e(Ve)(e(t).formInfo.insured.name)),1)]),_:1})):(s(),B(F,{key:1,modelValue:e(t).formInfo.insured.name,"onUpdate:modelValue":u[7]||(u[7]=n=>e(t).formInfo.insured.name=n),label:"\u59D3\u540D",name:"name",required:"",maxlength:"10",rules:[{validator:T}]},null,8,["modelValue","rules"])),e(t).insureDisable||o.disable?(s(),B(F,{key:2,label:"\u8BC1\u4EF6\u53F7\u7801",class:"pro-field","is-view":!0},{input:h(()=>[S(V(e(Ne)(e(t).formInfo.insured.certNo)),1)]),_:1})):(s(),B(F,{key:3,modelValue:e(t).formInfo.insured.certNo,"onUpdate:modelValue":u[8]||(u[8]=n=>e(t).formInfo.insured.certNo=n),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7",maxlength:"20","validate-type":[e(fe).ID_CARD]},null,8,["modelValue","validate-type"])),d(F,{modelValue:e(t).formInfo.insured.socialFlag,"onUpdate:modelValue":u[10]||(u[10]=n=>e(t).formInfo.insured.socialFlag=n),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:h(()=>[d(j,{modelValue:e(t).formInfo.insured.socialFlag,"onUpdate:modelValue":u[9]||(u[9]=n=>e(t).formInfo.insured.socialFlag=n),disabled:o.disable||e(t).insureDisable,options:e(Te)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),d(de),a("div",ho,[Do,d(F,{label:"\u6BCF\u6708\u4FDD\u8D39",class:"pro-field","is-view":!0},{input:h(()=>[S(V(e(He)(o.premium))+" \u5143/\u6708 \u517112\u671F",1)]),_:1}),d(Z,{modelValue:e(t).formInfo.paymentMethod,"onUpdate:modelValue":u[11]||(u[11]=n=>e(t).formInfo.paymentMethod=n),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":e(Tt),"is-view":o.disable||e(t).formInfo.paymentMethodDisable,required:""},null,8,["modelValue","data-source","is-view"]),o.isCheck?Q("",!0):(s(),B(F,{key:0,label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",class:"pro-field",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9",border:!1},{input:h(()=>[d(ae,{disabled:o.allDisabled,title:"\u514D\u8D39\u5F00\u901A",active:e(t).formInfo.renewalDK==="Y",onClick:R},null,8,["disabled","active"])]),_:1})),a("div",Fo,[a("div",Co,[yo,o.isCheck?(s(!0),D(W,{key:0},z(e(O),(n,_)=>(s(),D("span",{key:`attachment-${_}`,class:"file-name",onClick:te=>I(_)},V(`\u300A${n.attachmentName}\u300B`),9,Eo))),128)):(s(!0),D(W,{key:1},z(e(O),(n,_)=>(s(),B(ee,{key:_,class:"file-name",title:`\u300A${n.attachmentName}\u300B`,content:n.attachmentUri,type:"pdf"},null,8,["title","content"]))),128))]),a("div",go,[wo,o.isCheck?(s(!0),D(W,{key:0},z(e(x),(n,_)=>(s(),D("span",{key:`rate-${_}`,class:"file-name",onClick:te=>I(e(O).length+_)},V(`\u300A${n.attachmentName}\u300B`),9,Io))),128)):(s(!0),D(W,{key:1},z(e(x),(n,_)=>(s(),B(ee,{key:_,class:"file-name",title:`\u300A${n.attachmentName}\u300B`,content:n.attachmentUri,type:"pdf"},null,8,["title","content"]))),128))])])]),d(de),o.isCheck?(s(),D("div",Bo,[bo,a("div",Ao,[a("div",Po,[(s(),D(W,null,z(p,(n,_)=>d(ae,{key:_,title:n.title,active:e(t).formInfo.renewalDK===n.value,onClick:te=>M(n.value)},null,8,["title","active","onClick"])),64))]),a("div",ko,[a("div",{class:ce(["arrow light",{show:e(t).formInfo.renewalDK!=="N"}])},null,2),a("div",{class:ce(["arrow dark",{show:e(t).formInfo.renewalDK==="N"}])},null,2)]),e(t).formInfo.renewalDK!=="N"?(s(),D("div",$o,Oo)):(s(),D("div",Lo,Ho))])])):Q("",!0),d(de),d(We,{show:N.value,"onUpdate:show":u[12]||(u[12]=n=>N.value=n),"content-list":e(O).concat(e(x)),"active-index":P.value,onSubmit:K},null,8,["show","content-list","active-index"])]),_:1},512)]),_:1},8,["theme-vars"])}}});var Yo=oe(Ko,[["__scopeId","data-v-b473732a"]]),Wo="/static/assets/header-logo.fcc5844b.png";const zo=l=>(me("data-v-7fb2fbde"),l=l(),pe(),l),jo={class:"header"},Go=["src"],Jo={class:"content"},Qo=zo(()=>a("h4",null,"\u6E29\u99A8\u63D0\u793A\uFF0C\u60A8\u5DF2\u8FDB\u5165\u6295\u4FDD\u6D41\u7A0B\uFF1A",-1)),Xo=S(" \u8BF7\u4ED4\u7EC6\u9605\u8BFB\u514D\u8D23\u6761\u6B3E\u3001\u6295\u4FDD\u987B\u77E5\u7B49\u4FE1\u606F\uFF0C\u8BF7\u60A8\u91CD\u70B9\u9605\u8BFB\u5E76\u77E5\u6653"),Zo=S("\uFF0C\u4E3A\u7EF4\u62A4\u60A8\u7684\u5408\u6CD5\u6743\u76CA\uFF0C\u60A8\u7684\u64CD\u4F5C\u8F68\u8FF9\u5C06\u88AB\u8BB0\u5F55\u3002 "),ea={class:"footer"},ta=S(" \u597D\u7684 "),oa={key:0},aa=X({props:{productDetail:{type:Object,default:()=>{}}},setup(l){const r=l,o="PRENOTICE",g=new Ct({source:"sessionStorage"}),p=y(!1),t=pt({time:4e3,onFinish:()=>{g.set(`${o}-isShow`,"1"),p.value=!1}}),N=J(()=>{var w,T;return(T=(w=r.productDetail)==null?void 0:w.tenantProductInsureVO)==null?void 0:T.attachmentVOList.filter(x=>x.attachmentName==="\u4E2A\u4EBA\u4FE1\u606F\u4FDD\u62A4\u653F\u7B56")}),P=J(()=>t.current.value.seconds);return Ue(()=>{g.get(`${o}-isShow`)||(p.value=!0,t.start())}),(w,T)=>{const x=k("ProPDFviewer"),O=k("VanButton"),K=k("ProPopup");return s(),B(K,{class:"pre-notice-wrap",show:p.value,closeable:!1,height:45},{default:h(()=>[a("div",jo,[a("img",{src:e(Wo)},null,8,Go)]),a("div",Jo,[Qo,a("p",null,[Xo,a("span",null,[(s(!0),D(W,null,z(e(N),(I,$)=>(s(),B(x,{key:$,class:"file-name",title:`\u300A${I.attachmentName}\u300B`,content:I.attachmentUri,type:"pdf"},null,8,["title","content"]))),128))]),Zo])]),a("div",ea,[d(O,{type:"primary",block:"",round:""},{default:h(()=>[ta,e(P)?(s(),D("span",oa,V(e(P))+"s",1)):Q("",!0)]),_:1})])]),_:1},8,["show"])}}});var ua=oe(aa,[["__scopeId","data-v-7fb2fbde"]]);const sa={class:"page-product-detail"},na={class:"info"},la=["src"],ra={class:"guarantee-list"},ia={key:0,class:"basic"},da={class:"tab-1"},ca=["src"],ma={class:"footer-button"},pa={class:"price"},_a=S(" \u603B\u4FDD\u8D39"),fa={class:"guarantee-list"},va={class:"title"},ha={class:"content"},Da=X({setup(l){const r=_t(),o=ft(),{productCode:g="BWYL2021",tenantId:p,orderNo:t,phoneNo:N,agentCode:P="",saleChannelId:w,paymentMethod:T,certNo:x,name:O,pageCode:K,from:I}=o.query,$=y([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),M=y(),R=y(0),v=y(!1),u=y(),F=y(),j=y(),Z=I==="check",ae=y(!1),ee=y(!1),ne=y(0),_e=!!(O&&x&&N)||!!t,n=K==="payBack",_=Le({holder:{certNo:x,certType:be.CERT,mobile:N,name:O,socialFlag:he.HAS},insured:{certNo:x,certType:be.CERT,name:O,socialFlag:he.HAS,relationToHolder:De.SELF},paymentMethod:T,paymentMethodDisable:!!T,renewalDK:Z?"":"Y"}),te=y(!1),G=y(!1),ze=()=>{te.value=!1},je=()=>{r.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:ie(re({},o.query),{tenantId:p,productCode:"BWYL2022",orderNo:t,agentCode:P,from:I})})},Ge=()=>{v.value=!0},Je=J(()=>{var c,i;return((i=(c=u.value)==null?void 0:c.tenantProductInsureVO)==null?void 0:i.attachmentVOList.filter(m=>m.attachmentName==="\u8D39\u7387\u8868"))||[]}),Qe=J(()=>{var c,i;return((i=(c=u.value)==null?void 0:c.tenantProductInsureVO)==null?void 0:i.attachmentVOList.filter(m=>m.attachmentName!=="\u8D39\u7387\u8868"))||[]}),le=J(()=>{var c,i,m,E,b,A,L;return((m=(i=(c=u.value)==null?void 0:c.tenantProductInsureVO)==null?void 0:i.guaranteeList)==null?void 0:m.length)?(b=(E=u.value)==null?void 0:E.tenantProductInsureVO)==null?void 0:b.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(L=(A=u.value)==null?void 0:A.tenantProductInsureVO)==null?void 0:L.titleAndDescVOS}]}),ye=()=>{const{holder:{certNo:c,mobile:i,name:m,socialFlag:E},insured:{certNo:b,name:A,socialFlag:L,relationToHolder:f},paymentMethod:C}=_,Y=Pe(c)&&xt(i)&&Fe(m)&&!!E,U=Pe(b)&&Fe(A)&&!!L&&!!f;return!!(Y&&U&&!!C)},Xe=async c=>{Be.loading({message:"\u6838\u4FDD\u4E2D...",forbidClick:!0});try{const i=await At(c),{code:m}=i;if(m==="10000"){const E=await Pt({orderNo:c.orderNo,tenantId:p}),{data:b}=E;m==="10000"?window.location.href=b:G.value=!1}else G.value=!1}catch{G.value=!1}},Ze=c=>`${ke}/chuangxin/baigebao/productDetail?tenantId=${p}&productCode=${g}&orderNo=${c}&agentCode=${P}&pageCode=payBack&from=${I}`,et=c=>`${ke}/chuangxin/baigebao/payFail?tenantId=${p}&orderNo=${c}&agentCode=${P}&from=${I}`,tt=async c=>{const i=Nt({tenantId:p,saleUserId:P,saleChannelId:w,detail:u.value,insureDetail:F.value,paymentMethod:_.paymentMethod,renewalDK:_.renewalDK,successJumpUrl:"",premium:j.value,holder:_.holder,insured:_.insured,tenantOrderRiskList:c,orderStatus:"",orderTopStatus:""});try{const m=await bt(i),{code:E,data:b}=m;E==="10000"&&Xe(ie(re({},i),{orderNo:b.data,extInfo:{extraInfo:{renewalDK:_.renewalDK,paymentMethod:_.paymentMethod,successJumpUrl:Ze(b.data),failUrl:et(b.data)}}}))}catch{G.value=!1}},Ee=async()=>{const{calcData:c,riskVOList:i}=Se({holder:_.holder,insured:_.insured,tenantId:p,productDetail:u.value,insureDetail:F.value}),m=async()=>{const E=await $e(c),{code:b,data:A}=E;return b==="10000"?(j.value=A.premium,{condition:i,data:A}):{}};m(),Dt.exports.debounce(m,500,{trailing:!0})},ot=c=>{ne.value=c,ee.value=!0},at=()=>new Promise((c,i)=>{var m,E;(E=(m=M.value)==null?void 0:m.validateForm)==null||E.call(m).then(async()=>{var U,q;if(!_.renewalDK){Be("\u8BF7\u9009\u62E9\u662F\u5426\u81EA\u52A9\u91CD\u65B0\u6295\u4FDD");const ue=((U=document.getElementById("renewal"))==null?void 0:U.offsetTop)-70;document.documentElement.scrollTop=ue,document.body.scrollTop=ue,G.value=!1;return}const b=((q=M.value)==null?void 0:q.isAgreeFile)||ae.value;if(Z&&!b){ot(0),G.value=!1;return}const{calcData:A,riskVOList:L}=Se({holder:_.holder,insured:_.insured,tenantId:p,productDetail:u.value,insureDetail:F.value}),f=await $e(A),{code:C,data:Y}=f;C==="10000"?(j.value=Y.premium,c({condition:L,data:Y})):i(new Error)}).catch(()=>{G.value=!1})}),ge=async()=>{var c;if(n){r.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:ie(re({},o.query),{tenantId:p,productCode:"BWYL2022",orderNo:t,agentCode:P,from:I})});return}G.value=!0;try{const{condition:i,data:m}=await at(),E={},b=(L=[])=>{(L||[]).forEach(f=>{var C;E[f.riskCode]=f,((C=f.riskPremiumDetailVOList)==null?void 0:C.length)&&b(f.riskPremiumDetailVOList)})};b(m.riskPremiumDetailVOList);const A=Vt({tenantId:p,riskList:i,riskPremium:E,productId:(c=u.value)==null?void 0:c.id});tt(A)}catch{G.value=!1}},ut=()=>{ae.value=!0,ge()};se(()=>_,()=>{u.value&&F.value&&!n&&ye()&&Ee()},{deep:!0,immediate:!0});const st=async()=>{var E,b,A,L,f,C,Y;const c=await qe({orderNo:t,tenantId:p}),{code:i,data:m}=c;if(i==="10000"){const{tenantOrderHolder:U,tenantOrderInsuredList:q,extInfo:ue}=m;if(_.holder={certNo:U.certNo,certType:U.certType,mobile:U.mobile,name:U.name,socialFlag:he.HAS},_.insured={certNo:q==null?void 0:q[0].certNo,certType:(E=q[0])==null?void 0:E.certType,name:(b=q[0])==null?void 0:b.name,socialFlag:(L=(A=q[0])==null?void 0:A.extInfo)==null?void 0:L.hasSocialInsurance,relationToHolder:(f=q[0])==null?void 0:f.relationToHolder},_.paymentMethod=ue.extraInfo.paymentMethod,j.value=(Y=(C=q[0])==null?void 0:C.tenantOrderProductList[0])==null?void 0:Y.premium,_.renewalDK=ue.extraInfo.renewalDK,K==="productDetail")return;(m.orderStatus===xe.ACCEPT_POLICY||m.orderStatus===xe.PAYMENT_SUCCESS)&&(te.value=!0)}},nt=async()=>{const c=Ke({productCode:g,withInsureInfo:!0,tenantId:p}),i=Re({productCode:g});await Promise.all([c,i]).then(([m,E])=>{m.code==="10000"&&(u.value=m.data),E.code==="10000"&&(F.value=E.data)}),t?st():ye()&&Ee()};return Ue(()=>{nt(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(c,i)=>{const m=k("van-button"),E=k("van-config-provider"),b=vt("dompurify-html");return s(),D(W,null,[d(E,{"theme-vars":e(Ce)},{default:h(()=>{var A,L;return[a("div",sa,[a("div",na,[a("img",{src:(L=(A=u.value)==null?void 0:A.tenantProductInsureVO)==null?void 0:L.banner[0],class:"banner"},null,8,la),a("div",ra,[d(ve,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:Ge},{default:h(()=>{var f,C,Y;return[u.value&&((f=u.value)==null?void 0:f.tenantProductInsureVO)?(s(),D("div",ia,[(s(!0),D(W,null,z((Y=(C=e(le))==null?void 0:C[R.value])==null?void 0:Y.titleAndDescVOS,(U,q)=>(s(),B(yt,{key:q,class:"guarantee-item",title:U.title,content:U.desc,border:!1},null,8,["title","content"]))),128))])):Q("",!0)]}),_:1})])]),d(Ae,{class:"tabs",list:$.value,sticky:"",scrollspy:""},{tab1:h(()=>[d(Yo,{ref_key:"formRef",ref:M,"is-check":Z,"holder-disable":e(_e),disable:n,"form-info":e(_),premium:j.value,"product-detail":u.value},null,8,["holder-disable","form-info","premium","product-detail"])]),tab2:h(()=>{var f,C;return[a("div",da,[(s(!0),D(W,null,z(((C=(f=u.value)==null?void 0:f.tenantProductInsureVO)==null?void 0:C.spec)||[],(Y,U)=>(s(),D("img",{key:U,src:Y,class:"detail-img"},null,8,ca))),128))])]}),tab3:h(()=>[d(ve,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:h(()=>{var f,C;return[d(wt,{list:(C=(f=u.value)==null?void 0:f.tenantProductInsureVO)==null?void 0:C.settlementProcessList},null,8,["list"])]}),_:1}),d(ve,{title:"\u5E38\u89C1\u95EE\u9898"},{default:h(()=>{var f,C;return[d(Wt,{list:(C=(f=u.value)==null?void 0:f.tenantProductInsureVO)==null?void 0:C.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),a("div",ma,[a("div",pa,[_a,a("span",null,"\uFFE5"+V(e(Et)(j.value))+"/\u6708",1)]),d(m,{type:"primary",class:"right",disabled:G.value,onClick:ge},{default:h(()=>[S(V(n?"\u5347\u7EA7\u4FDD\u969C":"\u7ACB\u5373\u6295\u4FDD"),1)]),_:1},8,["disabled"])])]),Z&&e(K)!=="payBack"?(s(),B(ua,{key:0,"product-detail":u.value},null,8,["product-detail"])):Q("",!0),d(gt,{show:v.value,"onUpdate:show":i[0]||(i[0]=f=>v.value=f),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:h(()=>[e(le).length>1?(s(),B(Ae,{key:0,list:e(le).map((f,C)=>({title:f.guaranteeType,slotName:`guarantee-${C}`})),class:"tab"},null,8,["list"])):Q("",!0),a("div",fa,[(s(!0),D(W,null,z(e(le)[R.value].titleAndDescVOS,(f,C)=>(s(),D("div",{key:C,class:"guarantee-item"},[a("div",va,V(f.title),1),ht(a("div",ha,null,512),[[b,f.content]])]))),128))])]),_:1},8,["show"]),d(lo,{"order-no":e(t),"tenant-id":e(p),"is-show":te.value,onOnConfirm:je,onOnClose:ze},null,8,["order-no","tenant-id","is-show"])]}),_:1},8,["theme-vars"]),d(We,{show:ee.value,"onUpdate:show":i[1]||(i[1]=A=>ee.value=A),"content-list":e(Qe).concat(e(Je)),"active-index":ne.value,onSubmit:ut},null,8,["show","content-list","active-index"])],64)}}});var Na=oe(Da,[["__scopeId","data-v-522481d6"]]);export{Na as default};

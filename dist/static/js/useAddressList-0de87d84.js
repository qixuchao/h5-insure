import{_ as e}from"./index-06b07b70.js";import{h as a,k as t,l,m as s,s as n,N as o,r as i,L as r,j as c,y as u,Q as d,n as v,z as p,A as m,I as h,F as f,C as y,E as b,J as C,x as w,Z as g,ae as k,G as x,o as _}from"./vendor-75ce3ac1.js";import{q as P,a as N}from"./product-cec5c2ea.js";import{P as I}from"./index-610b1a11.js";import{u as T}from"./theme-1f207c56.js";import{o as R}from"./utils-771f5611.js";var j=e(a({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""}},setup(e){const a=e;return(e,o)=>{const i=t("van-image");return a.url?(l(),s(i,{key:0,width:"100%",class:"banner","lazy-load":"",src:a.url},null,8,["src"])):n("",!0)}}}),[["__scopeId","data-v-34cbd784"]]);const B={class:"pre-body"},D={class:"header"},S=["src"],L={class:"company-name"},O={class:"content"},U=y(" 为了更好地保护您的个人信息，请在使用前点击阅读、充分理解"),A=y("相关内容，我们对您使用过程中可能出现的个人信息收集、使用、共享和保护等情况进行了详细说明。 您已进入投保流程，请仔细阅读"),F=y("、投保须知、保险条款等信息，为维护您的合法权益，您的操作轨迹将被记录。 "),$={class:"footer"};var E=e(a({props:{productDetail:{type:Object,default:()=>{}}},setup(e){const a=e,s=o(),{tenantId:n=""}=s.query,y=i(!1),b=i(!1),C=r({insureConfig:{insureName:"",tenantName:""}}),w=i({title:"",link:""}),g=(e,a)=>{var t;b.value=!b.value,w.value.link=null==(t=C.insureConfig)?void 0:t[a].link,w.value.title=e.target.innerText};return c((()=>{(async()=>{const{code:e,data:t}=await P({insureCode:a.productDetail.insurerCode,tenantId:n});"10000"===e&&(C.insureConfig=t),y.value=!0})()})),(e,a)=>{var s;const n=t("ProPopup"),o=t("ProFilePreview");return l(),u(f,null,[d(n,{class:"pre-notice-wrap","close-on-click-overlay":!1,show:y.value,closeable:!1,height:"395px"},{default:v((()=>[p("div",B,[p("div",D,[p("img",{src:m("/static/assets/logo.65e1895e.png")},null,8,S),p("div",L," 由"+h(m(C).insureConfig.tenantName)+"提供保险经纪服务，"+h(m(C).insureConfig.insureName)+"承保 ",1)]),p("div",O,[U,p("span",{onClick:a[0]||(a[0]=e=>g(e,"privacyAgreement"))},"《用户隐私协议》"),A,p("span",{onClick:a[1]||(a[1]=e=>g(e,"notification"))},"《客户告知书》"),F]),p("div",$,[d(I,{shadow:!1,text:"我知道了",onClick:a[2]||(a[2]=e=>y.value=!1)})])])])),_:1},8,["show"]),d(n,{show:b.value,"onUpdate:show":a[3]||(a[3]=e=>b.value=e),class:"pre-notice-wrap",title:null==(s=w.value)?void 0:s.title,position:"bottom",style:{height:"600px"}},{default:v((()=>{var e;return[d(o,{content:null==(e=w.value)?void 0:e.link,type:"link"},null,8,["content"])]})),_:1},8,["show","title"])],64)}}}),[["__scopeId","data-v-79a863b0"]]);const q=["onClick"];var z=e(a({props:{preText:{type:String,default:""},hasBgColor:{type:Boolean,default:!0},attachementList:{type:Object,default:()=>{}}},emits:["preview-file"],setup:(e,{emit:a})=>(t,s)=>(l(),u("div",{class:C({"com-attachment-list":!0,"has-bg":e.hasBgColor})},[p("span",null,h(e.preText),1),(l(!0),u(f,null,b(e.attachementList||[],((e,t)=>(l(),u("span",{key:t,class:"attachment-item",onClick:e=>(e=>{a("preview-file",e)})(t)}," 《"+h(e.attachmentName)+"》 ",9,q)))),128))],2))}),[["__scopeId","data-v-4c895668"]]);const H={key:0,class:"item"},V={key:1,class:"attachment-list"},G=["onClick"],J={class:"attachment-list-item-name"},M={class:"attachment-list-item-icon"},Q={class:"footer"},Z=a({props:{show:{type:Boolean,default:!1},contentList:{type:Array,default:()=>[]},activeIndex:{type:Number,default:0},text:{type:String,default:""},beforeReadOverText:{type:String,default:"同意，下一条"},forceReadCound:{type:Number,default:0},isOnlyView:{type:Boolean,default:!1}},emits:["update:show","submit","onCloseFilePreview"],setup(e,{emit:a}){const o=e,r=T(),c=i(o.show),y=i(o.contentList.map(((e,a)=>({...e,disabled:!0,readDisabled:!0})))),C=i(o.activeIndex),k=i(0),x=i(null),_=w((()=>{var e,a;return null==(a=null==(e=y.value)?void 0:e[C.value])?void 0:a.attachmentList})),P=w((()=>{var e;return null==(e=y.value[C.value])?void 0:e.readDisabled})),N=w((()=>!(C.value>=o.forceReadCound-1)&&(!(k.value>=o.forceReadCound)&&(k.value<o.forceReadCound&&C.value!==o.forceReadCound-1)))),j=()=>{C.value+=1},B=()=>{o.isOnlyView?a("update:show",!1):(a("update:show",!1),a("submit"))};g((()=>o),(()=>{c.value=o.show,C.value=o.activeIndex}),{deep:!0,immediate:!0});const D=e=>{e&&Math.floor(e.target.scrollHeight-e.target.scrollTop)===e.target.clientHeight&&y.value[C.value].readDisabled&&(y.value[C.value].disabled=!1,y.value[C.value].readDisabled=!1,y.value[C.value+1].disabled=!1,k.value+=1)};return g((()=>C.value),(()=>{o.show&&(k.value>=o.forceReadCound&&y.value.forEach((e=>{e.disabled=!1,e.readDisabled=!1})),x.value&&(x.value.scrollTop=0))}),{immediate:!0}),(i,w)=>{const g=t("ProTab"),k=t("ProFilePreview"),T=t("ProSvg"),S=t("van-config-provider"),L=t("ProPopup");return l(),s(L,{show:c.value,"onUpdate:show":w[1]||(w[1]=e=>c.value=e),class:"file-preview-popup-wrap",closeable:!1,onClose:w[2]||(w[2]=e=>a("onCloseFilePreview"))},{default:v((()=>[d(S,{"theme-vars":m(r),class:"custom-provider"},{default:v((()=>[c.value?(l(),s(g,{key:0,active:C.value,"onUpdate:active":w[0]||(w[0]=e=>C.value=e),list:y.value.map(((e,a)=>({title:e.attachmentName,disabled:a!=C.value&&(e.disabled||!1),slotName:`guarantee-${a}`}))),class:"tab"},null,8,["active","list"])):n("",!0),p("div",{ref_key:"previewRef",ref:x,class:"list",onScroll:D},[1===m(_).length?(l(),u("div",H,[(l(),s(k,{key:m(_)[0].attachmentName,content:m(_)[0].attachmentUri,type:m(_)[0].attachmentType,"forbid-click":!0},null,8,["content","type"]))])):(l(),u("div",V,[(l(!0),u(f,null,b(m(_),((e,a)=>(l(),u("div",{key:a,class:"attachment-list-item",onClick:a=>(e=>{const a={fileType:e.attachmentType,fileUri:e.attachmentUri};R(a)})(e)},[p("div",J,h(e.attachmentName),1),p("div",M,[d(T,{name:"arrow-right"})])],8,G)))),128))]))],544),p("div",Q,[m(N)?(l(),s(I,{key:0,shadow:!1,"theme-vars":m(r),disabled:m(P),class:"right",text:`${e.beforeReadOverText}(${C.value+1}/${e.forceReadCound})`,onClick:j},null,8,["theme-vars","disabled","text"])):(l(),s(I,{key:1,disabled:m(P),shadow:!1,"theme-vars":m(r),text:o.text,onClick:B},null,8,["disabled","theme-vars","text"]))])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});const K={class:"inscribedContent-content"},W={class:"content"};var X=e(a({props:{inscribedContent:{type:String,default:""}},setup(e){const a=e,t=i();return g((()=>a.inscribedContent),(e=>{t.value=e?e.replaceAll("\n","<br />"):""}),{immediate:!0,deep:!0}),(e,a)=>{const s=k("dompurify-html");return l(),u("div",K,[x(p("div",W,null,512),[[s,t.value]])])}}}),[["__scopeId","data-v-702b2de2"]]);const Y=(e,a,t)=>{_((()=>{(async()=>{try{const{code:t,data:l}=await N(e);if("10000"===t){const e={};l.forEach((a=>{e[a.relationCode]||(e[a.relationCode]=[]),e[a.relationCode].push(a)})),null==a||a(e)}}catch(l){null==t||t(!1)}})()}))};export{z as A,j as B,X as I,E as P,Z as _,Y as u};

import{d as e,h as r,i as a,k as o,bK as t,o as d,c as n,u as s,F as i,p as l,w as c,v as p,d3 as u,f as m,_ as y,y as h,ah as f,ar as C,aN as N,cE as I,cF as k,cG as g,dE as $}from"./index-ea829f03.js";import{c as z}from"./order-f570f80f.js";const B={class:"operate-wrap"},F=e({name:"operateBtn"});var S=y(e({...F,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:y}){const F=e,S=r(),q=a(),{tenantId:_,nextPageCode:v,isShare:w}=q.query,x=o((()=>"/orderRecordList"===q.path)),P=o((()=>{const{orderTopStatus:e,productClassFlag:r,orderStatus:a}=F.detail;return!("-1"!==e||h.orderList!==q.path||"underWritingFailed"===a&&r===f.YES||["manualUnderWriting","offlinePayment","paymentFailed"].includes(a))})),b=o((()=>{const{policyNo:e,applicationNo:r,orderStatus:a}=F.detail;return!e&&r&&"cancel"!==a})),j=o((()=>{const{orderStatus:e}=F.detail;return["offlinePayment","manualUnderWriting","paymentFailed"].includes(e)})),T=()=>{const{orderStatus:e,orderNo:r,insurerCode:a,underwriteFlag:o,templateId:t,iseeBizNo:d}=F.detail;let n=h.sign;("collectInfo"===e||"underWritingFailed"===e&&o===f.NO)&&(n=h.infoCollection),S.push({path:n,query:{...q.query,tenantId:_,orderNo:r,insurerCode:a,templateId:t,iseeBizNo:d}})},W=()=>{const{orderId:e,orderNo:r}=F.detail||{};S.push({path:"orderTrajectory",query:{...q.query,orderId:e,orderNo:r}})},D=()=>{const{orderNo:e,orderId:r}=F.detail;w?N.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{y("handleCancel")})):z({tenantId:_,orderNo:e,type:1}).then((({code:e,data:r})=>{"10000"===e&&N.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:r,holderGender:a,orderId:o,orderNo:t,insurerCode:d,iseeBizNo:n}=F.detail||{},s=r,i=`${I[a]}士`;k({shareType:0,title:`${g.cancel.title}`,desc:g.cancel.desc.replace("{name}",`${s}${i},`),url:`${window.location.href}&objectType=${e}&insurerCode=${d}&isShare=1&orderNo=${t}&iseeBizNo=${n}&orderId=${o}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:$})})("holder")}))}))},E=()=>{const{orderNo:e,orderId:r,insurerCode:a,iseeBizNo:o}=F.detail;S.push({path:h.updateBankInfo,query:{tenantId:_,orderNo:e,orderId:r,insurerCode:a,nextPageCode:"orderDetail",iseeBizNo:o}})};return(e,r)=>{const a=C,o=t;return d(),n("div",B,[s(x)?(d(),l(o,{key:1,label:"",value:"查看订单状态","is-link":"",onClick:u(W,["stop"])},null,8,["onClick"])):(d(),n(i,{key:0},[s(P)?(d(),l(a,{key:0,type:"primary",size:"small",onClick:u(T,["stop"])},{default:c((()=>[p("去处理")])),_:1},8,["onClick"])):m("",!0),s(b)?(d(),l(a,{key:1,type:"primary",plain:"",size:"small",onClick:u(D,["stop"])},{default:c((()=>[p("撤单")])),_:1},8,["onClick"])):m("",!0),s(j)?(d(),l(a,{key:2,plain:"",size:"small",onClick:u(E,["stop"])},{default:c((()=>[p("银行卡修改")])),_:1},8,["onClick"])):m("",!0)],64))])}}}),[["__scopeId","data-v-64c02a7e"]]);export{S as O};

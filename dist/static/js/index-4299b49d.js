import{G as t,d as e,b6 as a,c as n,A as o,E as l,h as r,g as s,k as d,f as i,L as u,i as c,w as p,U as v,V as f,e as m,W as y,b4 as I,u as b,a as C,r as k,a1 as g,m as h,B as N,b as L,af as _,cr as S,y as D,ah as Y,cK as P,j as x,bA as j,D as A,T,Q as G,cM as M,cL as w}from"./index-dff049ba.js";import{d as E}from"./order-45bdfb80.js";import{d as R}from"./trial-c2627279.js";import{e as q,g as W}from"./infoCollection-db6b9f17.js";import{R as B,b as O}from"./trial-d7f8e3c4.js";import"./pdfh5-008ca364.js";const U={class:"com-field-info"},$={key:0,class:"label"},H={class:"content"};var K=t(e({__name:"fieldInfo",props:{label:{type:String,default:""},content:{type:String,default:""}},setup(t){const e=a();return(a,u)=>(n(),o("div",U,[t.label?(n(),o("div",$,l(t.label),1)):r("",!0),s(e).label?d(a.$slots,"label",{key:1},void 0,!0):r("",!0),i("div",H,l(t.content),1),s(e).content?d(a.$slots,"content",{key:2},void 0,!0):r("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const X={class:"com-insured-part-wrapper"},Z={class:"content-wrapper"},F={class:"product-name"},J={class:"risk-item"};var Q=t(e({__name:"InsuredPart",props:{productData:{default:()=>({})},totalPremium:{default:0}},setup(t){const e=t,a=u((()=>{var t,a;const n={riderRiskList:[],amount:0},o=null==(t=e.productData)?void 0:t.riskList.find((t=>t.riskType===B.MAIN_RISK));return Object.assign(n,o),null==(a=e.productData)||a.riskList.forEach((t=>{n.riderRiskList.push(t.riskName||"")})),n}));return(e,r)=>{const d=y,u=I;return n(),o("div",X,[c(u,{title:"保障信息"},{default:p((()=>[i("div",Z,[i("div",F,l(t.productData.productName),1),i("div",J,[c(d,{title:"保障期间",content:s(a).coveragePeriodDesc},null,8,["content"]),c(d,{title:"交费期间",content:s(a).chargePeriodDesc},null,8,["content"]),c(d,{title:"交费方式",content:s(O)[s(a).paymentFrequency]},null,8,["content"]),(n(!0),o(v,null,f(s(a).riderRiskList,((t,e)=>(n(),m(d,{key:e,title:t,content:"投保"},null,8,["title"])))),128)),c(d,{title:"保障金额",content:(s(a).initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),c(d,{title:"首期保费",class:"price",content:(t.totalPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])])),_:1})])}}}),[["__scopeId","data-v-51eb63ba"]]);const V={key:0,class:"page-order-detail"},z={class:"card"},tt={class:"header"},et={class:"product-name"},at={class:"company-name"},nt={class:"status"},ot={key:0,class:"footer-button"},lt={key:1,class:"footer-button"},rt={key:2,class:"footer-button"};var st=t(e({__name:"index",setup(t){const e=b(),a=C(),d=k(),{query:{orderNo:u,agentCode:y,tenantId:I,abbreviation:B,productCategory:O}}=e,U=()=>{A.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{d.value&&E(d.value.id,d.value.orderStatus).then((t=>{const{code:e,data:a}=t;"10000"===e&&T.success("删除成功")}))}))},$=k(!1),H=()=>{var t,e,n,o,l;if(d.value){if((()=>{var t,e,n;if(!d.value)return!1;const{agencyId:o,saleChannelId:l,orderTopStatus:r}=d.value,s=null==(n=null==(e=null==(t=d.value.insuredList)?void 0:t[0])?void 0:e.productList[0])?void 0:n.productCode;if(!(P.PENDING!==r&&P.PAYING!==r||s!==w.ZXYS&&s!==w.BWYL)){const t={[w.ZXYS]:"/internet/productDetail/package",[w.BWYL]:"/internet/productDetail"};return a.push({path:t[s],query:{productCode:s,saleChannelId:l,agentCode:y,tenantId:I,agencyCode:o,orderNo:u}}),!0}return!1})())return;const{id:r,extInfo:{templateId:s,pageCode:i,extraInfo:c},agencyId:p,insurerCode:v,orderStatus:f}=d.value,m={insurerCode:v,productCode:null==(n=null==(e=null==(t=d.value.insuredList)?void 0:t[0])?void 0:e.productList[0])?void 0:n.productCode,tenantId:d.value.tenantId,agencyCode:d.value.agencyId,agentCode:d.value.saleUserId,saleChannelId:null==c?void 0:c.saleChannelId,extraMap:{...null==(l=null==(o=d.value)?void 0:o.extInfo)?void 0:l.extraInfo,orderNo:d.value.orderNo}};$.value=!0,R(m).then((t=>{if(console.log("投保链接==",t.data),"10000"===t.code)if([q.LONG,q.NIANJIN].includes(W(`${s}`))){const e=t.data.split("?")[1],n=G.parse(e);a.push({path:M[f],query:{...n,extraInfo:n.extraInfo,orderNo:u}})}else window.location.href=t.data}))}};return g((()=>{h({orderNo:u,agentCode:y,tenantId:I}).then((t=>{const{code:e,data:a}=t;"10000"===e&&(d.value=a)}))})),(t,e)=>{const a=N,u=L("ProPageWrap"),y=_("loading");return n(),m(u,null,{default:p((()=>{var t,e,u,I,b,C,k,g,h,N,L,_;return[s(d)?(n(),o("div",V,[i("div",z,[c(K,null,{label:p((()=>{var t,e,a,n;return[i("div",tt,[i("div",et,l(null==(a=null==(e=null==(t=s(d))?void 0:t.insuredList[0])?void 0:e.productList[0])?void 0:a.productName),1),i("div",at,l(((null==(n=s(d))?void 0:n.abbreviation)||"").substring(0,6)),1)])]})),content:p((()=>{var t;return[i("div",nt,l(s(d)?s(S)[null==(t=s(d))?void 0:t.orderStatus]:""),1)]})),_:1}),c(K,{label:"投保单号",content:null==(t=s(d))?void 0:t.orderNo},null,8,["content"]),c(K,{label:"创建时间",content:s(D)(null==(e=s(d))?void 0:e.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),c(K,{label:"投保人",content:null==(I=null==(u=s(d))?void 0:u.holder)?void 0:I.name},null,8,["content"]),(n(!0),o(v,null,f((null==(b=s(d))?void 0:b.insuredList)||[],((t,e)=>(n(),m(K,{key:e,label:"被保人",content:t.name},null,8,["content"])))),128))]),c(Q,{"product-data":null==(h=null==(g=null==(k=null==(C=s(d))?void 0:C.insuredList)?void 0:k[0])?void 0:g.productList)?void 0:h[0],"total-premium":s(d).orderAmount,class:"insure-info"},null,8,["product-data","total-premium"]),Y((n(),o("div",null,[(null==(N=s(d))?void 0:N.orderTopStatus)===s(P).PENDING?(n(),o("div",ot,[c(a,{type:"primary",onClick:j(U,["stop"])},{default:p((()=>[x("删除")])),_:1},8,["onClick"]),c(a,{type:"primary",onClick:j(H,["stop"])},{default:p((()=>[x("去处理")])),_:1},8,["onClick"])])):r("",!0),(null==(L=s(d))?void 0:L.orderTopStatus)===s(P).PAYING?(n(),o("div",lt,[c(a,{type:"primary",onClick:j(U,["stop"])},{default:p((()=>[x("删除")])),_:1},8,["onClick"]),c(a,{type:"primary",onClick:j(H,["stop"])},{default:p((()=>[x("去支付")])),_:1},8,["onClick"])])):r("",!0),(null==(_=s(d))?void 0:_.orderTopStatus)===s(P).TIMEOUT?(n(),o("div",rt,[c(a,{type:"primary",onClick:j(U,["stop"])},{default:p((()=>[x("删除")])),_:1},8,["onClick"])])):r("",!0)])),[[y,s($)]])])):r("",!0)]})),_:1})}}}),[["__scopeId","data-v-70ecbf43"]]);export{st as default};

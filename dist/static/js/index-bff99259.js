import{_ as e,d as a,aE as s,A as l,b as o,c as t,g as u,i as r,f as d,l as i,t as n,F as p,h as c,a9 as v,aF as h,r as m,z as f,aG as g,C as y,aH as k,aI as I,j as C,w as L,aJ as P,az as b,K as w,n as V,L as _,M as x,a8 as S,e as j,k as U,H as q,u as O,a as F,y as D,aK as N}from"./index-2f033305.js";import{e as T,Z as z}from"./empty-87caf224.js";import{u as A,P as B}from"./index-aea0cc9b.js";import{P as $}from"./index-9f3a84fa.js";import{q as H}from"./proposalList-82d4fb5f.js";import"./pdfdist-2833f734.js";import"./index-fa316949.js";import"./trial-d3970fda.js";import"./useDicData-da6591b6.js";import"./trial-1627f7f0.js";const K={class:"com-product-item"},E={class:"content-wrap"},G={class:"product-image"},J={class:"insure-name"},M={class:"product-info"},R={class:"title"},W={class:"description"},Z={class:"tags"};var Q=e(a({props:{productInfo:{default:()=>({})}},setup(e){const a=e,{productInfo:h}=s(a),m=l({checked:!1});return s(m),(e,a)=>{const s=o("van-image");return t(),u("div",K,[r("div",E,[r("div",G,[d(s,{src:i(h).fileUrl},null,8,["src"]),r("p",J,n(i(h).insurerName),1)]),r("div",M,[r("p",R,n(i(h).title),1),r("p",W,n(i(h).text),1),r("p",Z,[(t(!0),u(p,null,c(i(h).tags,((e,a)=>(t(),u("span",{key:a,class:"tag"},n(e),1)))),128))])]),v(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-a61e69d6"]]);const X=e=>(_("data-v-397146ec"),e=e(),x(),e),Y={class:"com-tab-filter"},ee={class:"article-mid"},ae={class:"article-tag"},se=["onClick"],le={class:"trianele-out"},oe=X((()=>r("span",null,null,-1))),te={class:"popup-inner"},ue=X((()=>r("div",{class:"popup-title"},"保险公司",-1))),re={class:"footer-button"},de=V("重置"),ie=V("确定");var ne=e(a({props:{tagList:{type:Array,default:()=>[]},filter:{type:Boolean,default:!1},popupStyle:{type:Object,default:()=>{}}},emits:["onSelectInsure"],setup(e,{emit:a}){const{isPopShow:v,openPop:V,closePop:_}=h(!1),x=l({insureList:[],checkedInsure:[]}),{insureList:S,checkedInsure:j}=s(x),U=m(""),q=()=>{j.value=[]},O=()=>{a("onSelectInsure",{selectInsureCode:j.value,selectCategory:U.value}),_()};return f((()=>{g().then((e=>{const{code:a,data:s}=e;"10000"===a&&(S.value=null==s?void 0:s.map((e=>({label:e.abbreviation,value:e.insurerCode}))))}))})),(s,l)=>{const h=o("van-button"),m=o("van-popup");return t(),u("div",Y,[r("div",ee,[r("div",ae,[(t(!0),u(p,null,c(i(k),((e,s)=>(t(),u("div",{key:s,class:y(["tag-item",{checked:U.value==e.value}]),onClick:s=>((e,s)=>{U.value=s,a("onSelectInsure",{selectInsureCode:j.value,selectCategory:U.value})})(null==e||e.value,e.value)},[r("div",{class:y(["tag-out",{checked:U.value==e.value}])},[r("div",{class:y(["tag-item-text",{checked:U.value==e.value}])},n(e.label),3)],2),r("div",le,[r("div",{class:y({triangle:U.value==e.value})},null,2)])],10,se)))),128))]),e.filter?(t(),u("div",{key:0,class:"filter",onClick:l[0]||(l[0]=(...e)=>i(V)&&i(V)(...e))},[oe,r("div",{class:y(["text",{"has-select-condition":i(j).length>0}])},"筛选",2),d(I,{name:"filter"})])):C("",!0),d(m,{show:i(v),position:"right","close-on-click-overlay":"",style:w(e.popupStyle||{width:"322px",height:"100%",padding:"0 15px"}),onClickOverlay:i(_)},{default:L((()=>[r("div",te,[ue,d(P,{modelValue:i(j),"onUpdate:modelValue":l[1]||(l[1]=e=>b(j)?j.value=e:null),options:i(S)},null,8,["modelValue","options"])]),r("div",re,[d(h,{plain:"",type:"primary",onClick:q},{default:L((()=>[de])),_:1}),d(h,{type:"primary",onClick:O},{default:L((()=>[ie])),_:1})])])),_:1},8,["show","style","onClickOverlay"])])])}}}),[["__scopeId","data-v-397146ec"]]);const pe={class:"com-trial-product-wrapper"},ce={class:"container"},ve=(e=>(_("data-v-1cf5306a"),e=e(),x(),e))((()=>r("span",{class:"title"}," 已选产品 ",-1))),he={class:"popup-body"},me={class:"cell-title"},fe={class:"title"};var ge=e(a({props:{isShow:{type:Boolean,default:!1},proposalList:{default:()=>[]},modalValue:{default:()=>[]}},emits:["close","update:modalValue","checked"],setup(e,{emit:a}){const s=e,l=m([]),i=m([]),v=m({isShow:s.isShow}),h=()=>{a("close")},f=()=>{i.value=[],a("checked",[])},g=e=>{var s,o,t;null==(t=null==(o=null==(s=null==l?void 0:l.value)?void 0:s[e])?void 0:o.toggle)||t.call(o),a("checked",i.value)};return S((()=>s.isShow),(e=>{v.value.isShow=e})),S((()=>s.modalValue),((e=[])=>{i.value=e}),{deep:!0,immediate:!0}),(a,s)=>{const m=o("van-checkbox"),y=o("VanCell"),k=o("van-cell-group"),I=o("van-checkbox-group"),C=o("VanPopup");return t(),u("div",pe,[d(C,{show:v.value.isShow,"onUpdate:show":s[1]||(s[1]=e=>v.value.isShow=e),position:"bottom",onClose:h},{default:L((()=>[r("div",ce,[r("div",{class:"popup-header"},[r("span",{class:"clear-all",onClick:f}," 清空选项 "),ve,r("span",{class:"close",onClick:h})]),r("div",he,[d(I,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=e=>i.value=e)},{default:L((()=>[d(k,{inset:""},{default:L((()=>[(t(!0),u(p,null,c(e.proposalList,(e=>(t(),j(y,{key:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,title:e.proposalInsuredList[0].proposalInsuredProductList[0].productName,onClick:a=>g(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)},{"right-icon":L((()=>[d(m,{ref_for:!0,ref:a=>l.value[e.proposalInsuredList[0].proposalInsuredProductList[0].productId]=a,shape:"square",name:e.proposalInsuredList[0].proposalInsuredProductList[0].productId,onClick:U((a=>g(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)),["stop"])},null,8,["name","onClick"])])),title:L((()=>[r("div",me,[r("div",fe,n(e.proposalInsuredList[0].proposalInsuredProductList[0].productName),1)])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])])])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-1cf5306a"]]);const ye=e=>(_("data-v-4a6b9c72"),e=e(),x(),e),ke={class:"search-wrap"},Ie={class:"page-proposal-list"},Ce={class:"check-button"},Le={key:1,class:"van-sticky"},Pe={class:"add-plan"},be=V(" 已选"),we={class:"has-select-product"},Ve=V("款产品 "),_e=ye((()=>r("span",{class:"icon"},null,-1))),xe=V("添加计划书");var Se=e(a({props:{isCreateProposal:{type:Boolean,default:!0}},setup(e){const a=l({searchValue:"",tagLists:[],isOpen:!0,loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productId:void 0,proposalList:[],showFooter:!0}),{searchValue:v,tagLists:h,isOpen:f,loading:g,finished:y,refreshing:k,productList:I,selectProduct:P,insurerCodeList:w,showCategory:V,productTotal:_,showFooter:x}=s(a),[S,U]=q(),[K,E]=q(),G=A(),J=O(),M=F(),{isCreateProposal:R}=M.query,W=m(R?"repeatAdd":"add"),Z=()=>{H({title:v.value,insurerCodeList:w.value,showCategory:V.value,excludeProductIdList:G.$state.excludeProduct||[],pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:l}=e;"10000"===a&&(I.value=null==s?void 0:s.datas,_.value=l)}))},X=e=>{Z()},Y=e=>{const{selectInsureCode:a,selectCategory:s}=e;w.value=a,V.value=s,Z()},ee=()=>{k.value&&(I.value=[],k.value=!1),Z(),g.value=!1,_.value===I.value.length&&(y.value=!0)},ae=()=>{J.push({path:"historyProposalList"})},se=D((()=>{var e;const{birthday:a,gender:s}=(null==(e=G.$state.proposalInfo.proposalInsuredList)?void 0:e[0])||{};return{birthday:a,gender:s}})),le=D((()=>I.value.length>0)),oe=e=>{a.selectProduct=e},te=()=>{const e=a.proposalList.filter((e=>a.selectProduct.includes(e.proposalInsuredList[0].proposalInsuredProductList[0].productId)));G.setTrialData(e),J.push({path:"/proposal/createProposal"})},ue=()=>{U(!1)},re=e=>{if(R)return a.proposalList.push(e),x.value=!0,a.selectProduct.push(e.proposalInsuredList[0].proposalInsuredProductList[0].productId),void U(!1);G.setTrialData([e]),U(!1),J.push({path:"/proposal/createProposal",query:M.query})},de=()=>{y.value=!0,g.value=!0,ee()};return(e,s)=>{const l=o("van-search"),h=o("van-checkbox"),m=o("van-checkbox-group"),w=o("van-list"),V=o("van-pull-refresh"),_=o("van-button"),q=o("ProPageWrap");return t(),u(p,null,[d(q,{class:"page-proposal"},{default:L((()=>[r("div",ke,[d(l,{modelValue:i(v),"onUpdate:modelValue":s[0]||(s[0]=e=>b(v)?v.value=e:null),placeholder:"搜索计划书",shape:"round",class:"search",onSearch:X},null,8,["modelValue"]),i(le)?(t(),j(ne,{key:0,filter:i(f),"onUpdate:filter":s[1]||(s[1]=e=>b(f)?f.value=e:null),"filter-class":"filter-area",onOnSelectInsure:Y},null,8,["filter"])):C("",!0)]),r("div",Ie,[d(V,{modelValue:i(k),"onUpdate:modelValue":s[4]||(s[4]=e=>b(k)?k.value=e:null),onRefresh:de},{default:L((()=>[d(w,{loading:i(g),"onUpdate:loading":s[3]||(s[3]=e=>b(g)?g.value=e:null),finished:i(y),"finished-text":i(le)?"- 已经到底了哦 -":"",onLoad:ee},{default:L((()=>[(t(!0),u(p,null,c(i(I),(e=>(t(),j(Q,{key:e.id,"product-info":null==e?void 0:e.showConfig,onClick:s=>{return l=e,x.value=!1,a.productId=l.productId,void U(!0);var l}},N({_:2},[i(R)?{name:"checkedProduct",fn:L((()=>[r("div",Ce,[d(m,{modelValue:i(P),"onUpdate:modelValue":s[2]||(s[2]=e=>b(P)?P.value=e:null)},{default:L((()=>[d(h,{name:e.productId,shape:"square"},null,8,["name"])])),_:2},1032,["modelValue"])])]))}:void 0]),1032,["product-info","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])]),i(le)?C("",!0):(t(),j(z,{key:0,"empty-img":i(T),title:"没有找到相关内容~","empty-class":"empty-select"},null,8,["empty-img"])),i(R)&&i(x)?(t(),u("div",Le,[r("div",Pe,[r("p",{class:"has-select",onClick:s[5]||(s[5]=e=>i(E)(!i(K)))},[be,r("span",we,n(i(P).length),1),Ve,_e]),d(_,{type:"primary",disabled:!i(P).length,onClick:te},{default:L((()=>[xe])),_:1},8,["disabled"])])])):C("",!0),d(ge,{modelValue:i(P),"onUpdate:modelValue":s[6]||(s[6]=e=>b(P)?P.value=e:null),"proposal-list":i(a).proposalList,"is-show":i(K),onClose:s[7]||(s[7]=e=>i(E)(!1)),onChecked:oe},null,8,["modelValue","proposal-list","is-show"]),i(S)?(t(),j(B,{key:2,"is-show":i(S),type:W.value,insured:i(se),"product-id":i(a).productId,onClose:ue,onFinished:re},null,8,["is-show","type","insured","product-id"])):C("",!0)])),_:1}),i(R)?C("",!0):(t(),j($,{key:0,"button-image":i("/h5-cloud-insure/static/assets/lishijihuashu.b3e3552e.png"),onClick:ae},null,8,["button-image"]))],64)}}}),[["__scopeId","data-v-4a6b9c72"]]);export{Se as default};

!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-navigator .btn[data-v-48192b24]{position:fixed;width:.8rem;height:2.4rem;right:0;top:50%;margin-top:-1.2rem}@charset "UTF-8";.page-verify .card .people[data-v-2a32352c]{flex:1;margin-left:.53333rem;display:flex;align-items:center}.page-verify .card .people .name[data-v-2a32352c]{font-size:.4rem;font-weight:600;color:#393d46}.page-verify .card .people .status[data-v-2a32352c]{margin-left:.26667rem;text-align:center;width:1.2rem;height:.53333rem;line-height:.53333rem;border-radius:.05333rem;border:1px solid #99a9c0;font-size:.32rem;color:#99a9c0}.page-verify .card .people .status.verified[data-v-2a32352c]{color:#0d6efe;border-color:#0d6efe}.page-verify .card .verify-item[data-v-2a32352c]{display:flex;align-items:center;height:1.41333rem;line-height:1.41333rem;font-size:.4rem;color:#393d46}.page-verify .card .verify-item .no[data-v-2a32352c]{margin-left:.64rem}.page-verify .card .verify-item .action[data-v-2a32352c]{flex:1;display:flex;align-items:center;justify-content:flex-end;color:#99a9c0}.page-verify .card .verify-item .action .icon[data-v-2a32352c]{margin-left:.13333rem;color:#99a9c0;font-size:.32rem}.page-verify .sign-card .resign[data-v-2a32352c]{font-size:.37333rem;color:#0d6efe}.page-verify .sign-card .sign-body[data-v-2a32352c]{padding-bottom:.4rem}.page-verify .sign-card .sign-body .date[data-v-2a32352c]{margin-top:.32rem;font-size:.37333rem;color:#99a9c0;line-height:.53333rem}.page-verify .sign-card .sign-body .file[data-v-2a32352c]{margin-top:.21333rem;font-size:.37333rem;color:#393d46;line-height:.53333rem}.page-verify .sign-card .sign-body .file .file-name[data-v-2a32352c]{color:#0d6efe}.page-verify .sign-card .sign-body .file .file-name .dun-hao[data-v-2a32352c]{color:#393d46}.page-verify .footer[data-v-2a32352c]{position:static;justify-content:space-between}.page-verify .footer .refresh-btn[data-v-2a32352c]{width:.66667rem;border:none;color:#0d6efe;font-size:.26667rem;line-height:.37333rem;text-align:center}.page-verify .footer .refresh-btn .text[data-v-2a32352c]{margin-top:.13333rem}.page-verify .footer .submit-btn[data-v-2a32352c]{flex:1}\n',document.head.appendChild(e),System.register(["./vendor-legacy-6b892aaa.js","./index-legacy-e0d8ab90.js","./verify-legacy-807b80a3.js","./index-legacy-8e745b7a.js"],(function(e){"use strict";var a,t,i,r,n,o,l,d,s,c,v,u,f,g,m,p,y,h,b,I,x,C,N,w,O,k,D,j,_,E,U,H,L,z,T,R,S,M,P,Y;return{setters:[function(e){a=e.g,t=e.a5,i=e.r,r=e.h,n=e.m,o=e.y,l=e.z,d=e.n,s=e.a6,c=e.Q,v=e.aj,u=e.C,f=e.d,g=e.M,m=e.j,p=e.k,y=e.I,h=e.J,b=e.s,I=e.E,x=e.F,C=e.a1,N=e.a2,w=e.B,O=e.T,k=e.D},function(e){D=e._,j=e.S,_=e.D,E=e.p,U=e.l,H=e.E,L=e.N,z=e.P},function(e){T=e.g,R=e.f,S=e.s,M=e.a},function(e){P=e.n,Y=e.a}],execute:function(){const $={class:"com-navigator"},q=["src"];var A=D(a({setup(e){const[a,c]=t(!1),v=()=>{c(!0)};return(e,t)=>{const c=i("van-popup");return r(),n("div",$,[o("img",{class:"btn",src:l("/static/assets/sidenav.5031dada.png"),onClick:v},null,8,q),d(c,{show:l(a),"onUpdate:show":t[0]||(t[0]=e=>s(a)?a.value=e:null),position:"right",style:{width:"50%",height:"100%"},"safe-area-inset-top":""},null,8,["show"])])}}}),[["__scopeId","data-v-48192b24"]]);const B=e=>(C("data-v-2a32352c"),e=e(),N(),e),F={class:"page-verify"},Q={class:"people"},J={class:"name"},W={class:"verify-item"},G=B((()=>o("div",{class:"label"},"身份证号码",-1))),K={class:"no"},V=w(" 去认证 "),X={class:"sign-body"},Z={class:"date"},ee={class:"file"},ae=w(" 签名将被用于以下文件："),te={key:0,class:"dun-hao"},ie={class:"people"},re={class:"name"},ne={class:"verify-item"},oe=B((()=>o("div",{class:"label"},"身份证号码",-1))),le={class:"no"},de=["onClick"],se=w(" 去认证 "),ce=["onClick"],ve={class:"sign-body"},ue={class:"date"},fe={class:"file"},ge=w(" 签名将被用于以下文件："),me={key:0,class:"dun-hao"},pe={class:"footer-button footer"},ye=w("提交"),he=a({setup(e){const a=1,t=c(),s=v(),{saleUserId:C="D1234567-1",tenantId:N="9991000007",templateId:D=1,productCode:$="CQ75CQ76",insurerCode:q="ancheng"}=t.query;let{orderNo:B}=t.query;"object"==typeof B&&(B=(B||[])[0]);const he=new j({source:"localStorage"}),be=u([]),Ie=u(),xe=u(),Ce=[],Ne=f().format("YYYY-MM-DD"),we=()=>{var e;null===(e=xe.value)||void 0===e||e.clear()},Oe=(e,a)=>{M({callbackUrl:window.location.href,certiNo:e,faceAuthMode:"TENCENT",userName:a,tenantId:9991000007}).then((t=>{const{code:i,data:r}=t;if("10000"===i){const{originalUrl:t,serialNo:i}=r;window.location.href=t,he.set("verifyData",{serialNo:i,certNo:e,name:a})}}))},ke=e=>{var a,t,i,r;-1===e?Oe(null===(a=Ie.value.tenantOrderHolder)||void 0===a?void 0:a.certNo,null===(t=Ie.value.tenantOrderHolder)||void 0===t?void 0:t.name):Oe(null===(i=Ie.value.tenantOrderInsuredList[e])||void 0===i?void 0:i.certNo,null===(r=Ie.value.tenantOrderInsuredList[e])||void 0===r?void 0:r.name)},De=e=>{e&&Ce.every((a=>a!==e))&&Ce.push(e)},je=()=>{var e,t,i,r;(null===(e=xe.value)||void 0===e?void 0:e.isEmpty())?O.fail("请投保人签名"):Ce.some((e=>e.isEmpty()))?O.fail("请被保人签名"):(null===(t=Ie.value.tenantOrderHolder)||void 0===t||null===(i=t.extInfo)||void 0===i?void 0:i.isCert)===a?null!==(r=Ie.value.tenantOrderInsuredList)&&void 0!==r&&r.some((e=>{var t;return(null===(t=e.extInfo)||void 0===t?void 0:t.isCert)!==a}))?O.fail("请被保人去认证"):k.confirm({title:"提示",message:"请确认信息填写无误后，再进行支付"}).then((()=>{var e,a;const t=null===(e=xe.value)||void 0===e?void 0:e.save();Promise.all([S("HOLDER",t,null===(a=Ie.value)||void 0===a?void 0:a.id,`${N}`),...Ce.map((e=>{var a;return S("INSURED",e.save(),null===(a=Ie.value)||void 0===a?void 0:a.id,`${N}`)}))]).then((()=>{P({...Ie.value,pageCode:"sign",operateOption:{withSignInfo:!0},extInfo:{pageCode:"sign",templateId:D},venderCode:"ancheng"}).then((e=>{const{code:a,data:t}=e;"10000"===a&&t.success&&s.push({path:z[t.pageAction.data.nextPageCode],query:{orderNo:B,saleUserId:C,tenantId:N}})}))}))})):O.fail("请投保人去认证")},_e=()=>{Y({orderNo:B,saleUserId:C,tenantId:N}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(Ie.value=t,setTimeout((()=>{let e=0;t.tenantOrderAttachmentList.forEach((a=>{21===a.category&&(2===a.objectType?(xe.value.clear(),xe.value.setDataURL(a.fileBase64)):1===a.objectType&&(Ce[e].clear(),Ce[e].setDataURL(a.fileBase64),e+=1))}))})))}))};return g((()=>{_e(),T({orderNo:B,productCode:$,tenantId:N}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(be.value=t||[])}));const e=he.get("verifyData");if(e){const{serialNo:a,certNo:t,name:i}=e;R({certiNo:t,orderNo:B,serialNo:a,tenantId:N,userName:i}).then((e=>{const{code:a,data:t}=e;"10000"===a&&(he.remove("verifyData"),_e())}))}})),(e,t)=>{const s=i("van-button"),c=i("ProPageWrap");return r(),m(c,null,{default:p((()=>{var e;return[o("div",F,[d(_,{type:"warning",title:"尊敬的客户，本次投保需要进行身份认证",content:"本产品投保需要对投保人、被保人进行实名认证，您购买本产品的累计总保费已超过20万，按监管要求，需要提供投保人、被保人、指定受益人证件影像，本产品非本人投保且带身故责任、需对投保人、被保人（成人）的投保意愿进行签字确认。"}),d(U,{title:"投保人",class:"card"},{extra:p((()=>{var e,t,i,r,n,l,d,s;return[o("div",Q,[o("div",J,y(null===(e=Ie.value)||void 0===e||null===(t=e.tenantOrderHolder)||void 0===t?void 0:t.name),1),o("div",{class:h(["status",{verified:(null===(i=Ie.value)||void 0===i||null===(r=i.tenantOrderHolder)||void 0===r||null===(n=r.extInfo)||void 0===n?void 0:n.isCert)===a}])},y((null===(l=Ie.value)||void 0===l||null===(d=l.tenantOrderHolder)||void 0===d||null===(s=d.extInfo)||void 0===s?void 0:s.isCert)===a?"已认证":"待认证"),3)])]})),default:p((()=>{var e,i,l,s,c;return[o("div",W,[G,o("div",K,y(null===(e=Ie.value)||void 0===e||null===(i=e.tenantOrderHolder)||void 0===i?void 0:i.certNo),1),(null===(l=Ie.value)||void 0===l||null===(s=l.tenantOrderHolder)||void 0===s||null===(c=s.extInfo)||void 0===c?void 0:c.isCert)!==a?(r(),n("div",{key:0,class:"action",onClick:t[0]||(t[0]=e=>ke(-1))},[V,d(E,{name:"right_arrow",class:"icon"})])):b("",!0)])]})),_:1}),d(U,{title:"投保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:p((()=>[o("div",{class:"resign",onClick:we},"重签")])),default:p((()=>[d(H,{ref_key:"holderSign",ref:xe,class:"sign"},null,512),o("div",X,[o("div",Z,"签名日期： "+y(l(Ne)),1),o("div",ee,[ae,(r(!0),n(x,null,I(be.value.filter((e=>e.noticeObject===l(L).HOLDER)),((e,a)=>(r(),n("span",{key:a,class:"file-name"},[w(y(`《${e.materialName}》`),1),a!==be.value.filter((e=>e.noticeObject===l(L).HOLDER)).length-1?(r(),n("span",te,"、")):b("",!0)])))),128))])])])),_:1}),(r(!0),n(x,null,I(null===(e=Ie.value)||void 0===e?void 0:e.tenantOrderInsuredList,((e,t)=>(r(),n("div",{key:t},[d(U,{title:"被保人",class:"card"},{extra:p((()=>{var t,i;return[o("div",ie,[o("div",re,y(e.name),1),o("div",{class:h(["status",{verified:(null===(t=e.extInfo)||void 0===t?void 0:t.isCert)===a}])},y((null===(i=e.extInfo)||void 0===i?void 0:i.isCert)===a?"已认证":"待认证"),3)])]})),default:p((()=>{var i;return[o("div",ne,[oe,o("div",le,y(e.certNo),1),(null===(i=e.extInfo)||void 0===i?void 0:i.isCert)!==a?(r(),n("div",{key:0,class:"action",onClick:e=>ke(t)},[se,d(E,{name:"right_arrow",class:"icon"})],8,de)):b("",!0)])]})),_:2},1024),d(U,{title:"被保人签名","show-icon":!1,class:"sign-card","show-line":!1},{extra:p((()=>[o("div",{class:"resign",onClick:e=>(e=>{Ce[e].clear()})(t)},"重签",8,ce)])),default:p((()=>[d(H,{ref_for:!0,ref:De,class:"sign"}),o("div",ve,[o("div",ue,"签名日期： "+y(l(Ne)),1),o("div",fe,[ge,(r(!0),n(x,null,I(be.value.filter((e=>e.noticeObject===l(L).INSURED)),((e,a)=>(r(),n("span",{key:a,class:"file-name"},[w(y(`《${e.materialName}》`),1),a!==be.value.filter((e=>e.noticeObject===l(L).INSURED)).length-1?(r(),n("span",me,"、")):b("",!0)])))),128))])])])),_:2},1024)])))),128)),o("div",pe,[d(s,{type:"primary",class:"submit-btn",onClick:je},{default:p((()=>[ye])),_:1})])]),d(A)]})),_:1})}}});e("default",D(he,[["__scopeId","data-v-2a32352c"]]))}}}))}();

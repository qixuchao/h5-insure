import{_ as e,d as a,ay as t,az as s,cn as i,i as l,h as o,af as r,j as c,aR as n,l as d,m as u,o as m,p,w as v,a as f,u as y,q as b,f as h,b as w,v as N,aX as T,cw as g,y as _,aI as x,b1 as I,b2 as j,cx as C}from"./index-2cd6533c.js";import{f as P}from"./face_img-b678980a.js";import z from"./index-ec801cd6.js";import{p as q}from"./policy-e45b602a.js";const F=e=>(I("data-v-65fca035"),e=e(),j(),e),U={class:"page-verify-face"},k=F((()=>f("div",{class:"title face-title"},"人脸识别",-1))),E={class:"face-verify-img"},S=["src"],B=F((()=>f("div",{class:"face-verify-tip"},[f("div",{class:"title"},"操作时请您配合"),f("ol",null,[f("li",null,"请调亮手机屏幕亮度，确保光线充足"),f("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),f("li",null,"请确保真实本人操作")])],-1))),L={class:"attachment"},V={class:"footer-button"},A=a({name:"verifyFace"});var D=e(a({...A,setup(e){const a=t((()=>s((()=>import("./index-713cfbe4.js")),["static/js/index-713cfbe4.js","static/css/index-fa4edf2a.css","static/js/index-2cd6533c.js","static/css/index-efad381f.css","static/js/theme-94cf7d00.js","static/js/index-f8ee5a93.js","static/css/index-bbfdd7ec.css","static/js/utils-2b5f715d.js","static/js/infoCollection-ee8e29ff.js","static/js/trial-ff92f49f.js"]))),I=i(),j=l(),F=o(),{isFirst:A,tenantId:D,objectType:M,orderNo:O,biz_id:R,nextPageCode:$}=j.query,W=I.get(`${r}_orderDetail`),X=c(),G=c(!0),H=c(),J=c([{attachmentName:"隐私政策",attachmentList:[{materialName:"隐私政策",materialContent:q,materialSource:"pdf"}]}]),K=c(!1),Q=()=>{H.value?(()=>{const{userName:e,certiNo:a,certType:t}=X.value,s={tenantId:D,faceAuthMode:"TENCENT",callbackUrl:window.location.href.replace("isFirst=1","isFirst=0"),bizNo:O,userName:e,certiNo:a,certType:t};C(s).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})():T.alert({message:"请先同意隐私政策",confirmButtonText:"我知道了"})};n((()=>{const{holder:e,insuredList:a}=W;if("holder"===M){const{name:a,certNo:t,certType:s,id:i}=e;X.value={userName:a,certiNo:t,certType:s,objectId:i}}else{const{name:e,certNo:t,certType:s,id:i}=(null==a?void 0:a[0])||{};X.value={userName:e,certiNo:t,certType:s,objectId:i}}R&&(()=>{const{userName:e,objectId:a,certType:t}=X.value,s={bizId:R,certType:t,objectId:a,objectType:`${M}`.toLocaleUpperCase(),orderNo:O,tenantId:D};g(s).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status?(delete j.query.biz_id,delete j.query.nextPageCode,F.push({path:_.infoPreview,query:j.query})):G.value=!1}))})()}));const Y=c();return d((()=>{setTimeout((async()=>{Y.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const s=x,i=u("ProPageWrap");return m(),p(i,null,{default:v((()=>{var e;return[f("div",U,[k,f("div",E,[f("img",{src:y(P),alt:""},null,8,S)]),B,f("div",L,[(null==(e=y(J))?void 0:e.length)?(m(),p(z,{key:0,modelValue:y(H),"onUpdate:modelValue":t[0]||(t[0]=e=>b(H)?H.value=e:null),"attachment-list":y(J),"has-bg-color":!1,"is-show-radio":"","pre-text":"本人同意利安人寿采集本人人脸信息，用于向国家法规许可的验证机构进行本人身份验证。本人已仔细阅读并知晓","suffix-text":"，并同意授权。",onPreviewFile:t[1]||(t[1]=()=>K.value=!0)},null,8,["modelValue","attachment-list"])):h("",!0)]),f("div",V,[w(s,{type:"primary",class:"submit-btn",onClick:Q},{default:v((()=>[N("同意拍摄")])),_:1})])]),y(K)?(m(),p(y(a),{key:0,show:y(K),"onUpdate:show":t[2]||(t[2]=e=>b(K)?K.value=e:null),"content-list":y(J),"is-only-view":"","active-index":0,text:"我已阅读","force-read-cound":0,onSubmit:t[3]||(t[3]=()=>K.value=!1),onOnCloseFilePreviewByMask:t[4]||(t[4]=()=>K.value=!1)},null,8,["show","content-list"])):h("",!0)]})),_:1})}}}),[["__scopeId","data-v-65fca035"]]);export{D as default};

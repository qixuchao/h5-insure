var X=Object.defineProperty,K=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var q=(u,o,n)=>o in u?X(u,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[o]=n,c=(u,o)=>{for(var n in o||(o={}))w.call(o,n)&&q(u,n,o[n]);if(F)for(var n of F(o))ee.call(o,n)&&q(u,n,o[n]);return u},r=(u,o)=>K(u,Z(o));import{h as te,aa as ae,P as oe,G as _,j as ne,r as N,k as i,m as p,n as T,s as U,p as f,H as D,M as y,B as l,F as g,A as se,E as ue,T as le}from"./vendor-b1b61443.js";import{l as x}from"./inform-23ec91fd.js";import{_ as ie,g as ce,n as re,N as de,b as _e}from"./index-92f7e5a0.js";import{Q as v,a as C,I as M,H as pe,b as $,c as ve}from"./notice-8f6df5db.js";import{s as Ce}from"./useStorage-dafe4167.js";import{g as R}from"./verify-64b1dbb0.js";const Be={class:"footer-button"},Ee=ue("\u4E0B\u4E00\u6B65"),me=te({setup(u){const o=ae(),n=oe(),{productCode:j="MMBBSF",agentCode:Q="65434444",tenantId:k=9991000007,agencyCode:Ne="3311222",insurerCode:b="zhongan",productCategory:L=1,templateId:Te=1,orderNo:h="2022080217103534947"}=n.query,H=1,Y=1,B=_([]),d=_({});_(!1);const O=_([]),I=_([]),A=t=>B.value.filter(a=>a.objectType===t),V=()=>{ce({orderNo:h,saleUserId:Q,tenantId:k}).then(({code:t,data:a})=>{t==="10000"&&Object.assign(d.value,a)})},z=()=>{const t={orderNo:h,productCode:j,tenantId:k,objectType:$};R(c({},t)).then(({code:a,data:s})=>{a==="10000"&&(I.value=s||[])}),R(r(c({},t),{objectType:M})).then(({code:a,data:s})=>{a==="10000"&&(O.value=s||[])})},G=()=>{const t={insurerCode:b,orderNo:h,productCategory:L,tenantId:k};Promise.all([x(r(c({},t),{noticeType:pe,objectType:$})),x(r(c({},t),{noticeType:ve,objectType:M}))]).then(([{code:a,data:s},{code:m,data:P}])=>{a==="10000"&&m==="10000"&&(B.value=[...s,...P])})},E=t=>{var a;Ce.set("questionData",t),o.push({path:"/healthNotice",query:c({materialType:(t==null?void 0:t.materialSource)?"product":"question",questionnaireType:(t==null?void 0:t.materialSource)?Y:t.questionnaireType,orderId:(a=d.value)==null?void 0:a.id},n.query)})},J=()=>{if(![...O.value,...I.value,...B.value].every(a=>a.isDone===H)){le("\u8BF7\u5B8C\u6210\u6240\u6709\u544A\u77E5\u8FDB\u884C\u4E0B\u4E00\u6B65");return}Object.assign(d.value,{pageCode:"questionNotice",tenantOrderNoticeList:B.value}),re(r(c({},d.value),{extInfo:r(c({},d.value.extInfo),{pageCode:"questionNotice",buttonCode:de.questionNotice}),venderCode:b})).then(({code:a,data:s})=>{a==="10000"&&s.pageAction.pageAction==="jumpToPage"&&o.push({path:_e[s.pageAction.data.nextPageCode],query:n.query})})};return ne(()=>{G(),z(),V()}),(t,a)=>{const s=N("van-cell"),m=N("ProCard"),P=N("van-button"),W=N("ProPageWrap");return i(),p(W,{class:"page-question-notice"},{default:T(()=>[U(m,{title:"\u6295\u4FDD\u4EBA"},{default:T(()=>[(i(!0),f(g,null,D(A(l(C)),e=>(i(),p(s,{key:e.id,class:y({"is-active":e.isDone===l(v)}),title:`\u300A${e.title}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:S=>E(e)},null,8,["class","title","value","onClick"]))),128)),(i(!0),f(g,null,D(I.value,e=>(i(),p(s,{key:e.id,class:y({"is-active":e.isDone===l(v)}),title:`\u300A${e.materialName}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:S=>E(e)},null,8,["class","title","value","onClick"]))),128))]),_:1}),U(m,{title:"\u88AB\u4FDD\u4EBA"},{default:T(()=>[(i(!0),f(g,null,D(A(l(v)),e=>(i(),p(s,{key:e.id,class:y({"is-active":e.isDone===l(v)}),title:`\u300A${e.title}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:S=>E(e)},null,8,["class","title","value","onClick"]))),128)),(i(!0),f(g,null,D(O.value,e=>(i(),p(s,{key:e.id,class:y({"is-active":e.isDone===l(v)}),title:`\u300A${e.materialName}\u300B`,"is-link":"",value:`${e.isDone===l(C)?"\u5DF2\u5B8C\u6210":"\u53BB\u5B8C\u6210"}`,onClick:S=>E(e)},null,8,["class","title","value","onClick"]))),128))]),_:1}),se("div",Be,[U(P,{type:"primary",onClick:J},{default:T(()=>[Ee]),_:1})])]),_:1})}}});var Ie=ie(me,[["__scopeId","data-v-946bddbc"]]);export{Ie as default};

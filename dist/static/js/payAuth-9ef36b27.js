import{_ as a,d as e,i as l,h as s,j as d,k as o,am as n,O as t,o as r,c,a as m,b as u,e as i,u as p,m as h,w as f,f as v,a8 as y,cU as b,aN as k,aa as V,cV as g,T as q,cI as w,bt as x,cs as C,ct as I,aj as N,aF as T,aG as _}from"./index-d6bee95f.js";import{g as U}from"./trial-4aaea0de.js";const j={class:"page-pay-auth-wrap"},B={class:"header"},O={class:"content"},R={class:"bank-card"},W={class:"card-content"},A={class:"main"},E={class:"bank-name"},F={class:"bank-no"},G={class:"bank-card-type"},L=(a=>(T("data-v-6c1f940c"),a=a(),_(),a))((()=>m("p",{class:"desc"},"实时单笔限额5W 实时单日限额5W",-1))),P={class:"footer-button"},z=e({name:"payAuth"});var D=a(e({...z,setup(a){const e=l(),T=s(),{orderNo:_,tenantId:z}=e.query,D=d(),H=d(),J=d({}),K=o((()=>H.value.holder.certType===n.CERT?"身份证号":"证件号")),M=(a,l)=>{b(H.value).then((({code:a,data:s})=>{"10000"===a?null==l||l():k.confirm({confirmButtonText:"银行卡修改",message:"当前暂不支持该银行，建议更换银行卡"}).then((()=>{T.push({path:V.updateBankInfo,query:e.query})}))}))},Q=()=>{D.value.validate().then((a=>{g(H.value).then((({code:a,data:e})=>{"10000"===a&&(T.back(),q("成功"))}))})).catch((a=>{console.log("e",a)}))};return t((()=>{(async()=>{await U({orderNo:_,tenantId:z}).then((({code:a,data:e})=>{"10000"===a&&(H.value=e,J.value=e.tenantOrderPayInfoList.find((a=>1===a.payInfoType)))}))})()})),(a,e)=>{const l=w,s=x,d=C,o=I,n=N;return r(),c("div",j,[m("div",B,[u(l,{type:"warning",content:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。"})]),m("div",O,[m("div",R,[m("div",W,[m("div",A,[m("span",E,i(p(J).payBank||"中国工商银行"),1),m("span",F,i(p(J).bankCardNo||"**** **** **** 3941"),1)]),m("p",G,i(p(J).bankCardType||"储蓄卡"),1),L])]),p(H)?(r(),h(o,{key:0,ref_key:"formRef",ref:D,model:p(H).holder},{default:f((()=>[u(s,{modelValue:p(H).holder.name,"onUpdate:modelValue":e[0]||(e[0]=a=>p(H).holder.name=a),label:"姓名",name:"name",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(s,{modelValue:p(H).holder.certNo,"onUpdate:modelValue":e[1]||(e[1]=a=>p(H).holder.certNo=a),label:p(K),name:"certNo",maxlength:"18","is-view":"",required:""},null,8,["modelValue","label"]),u(s,{modelValue:p(H).holder.mobile,"onUpdate:modelValue":e[2]||(e[2]=a=>p(H).holder.mobile=a),label:"银行预留手机",name:"mobile",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),u(d,{modelValue:p(H).holder.verifyCode,"onUpdate:modelValue":e[3]||(e[3]=a=>p(H).holder.verifyCode=a),label:"验证码",maxlength:"6",name:"verifyCode","related-name":"mobile","send-s-m-s-code":M,required:""},null,8,["modelValue"])])),_:1},8,["model"])):v("",!0)]),m("div",P,[u(n,{type:"primary",onClick:Q},{default:f((()=>[y("提交")])),_:1})])])}}}),[["__scopeId","data-v-6c1f940c"]]);export{D as default};

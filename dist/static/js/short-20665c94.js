import{k as e,O as t,p as n,s as a,B as r,S as i,v as s,C as l,M as o,E as u,H as c,I as d,N as m,J as g,L as p,d as v,r as f,$ as y,b as I,R as h,ag as C,y as T,t as P,G as D,a5 as O,a6 as N,Z as V,_ as k,U as A,T as S,aa as w,u as b,o as L,D as x}from"./vendor-9bab628e.js";import{d as U}from"./debounce-a0c8763d.js";import{P as R}from"./index-79ae0ed3.js";import{_ as E,e as F,i as M,a7 as q,C as B,I as Z,K as _,ac as j,a1 as Y}from"./index-246916e4.js";import{C as H,k as Q,l as G,m as K,S as J,R as W,g as X}from"./infoCollection-5ade81d8.js";import{i as z,g as $,b as ee,p as te}from"./trial-59daee7b.js";import{p as ne}from"./product-7f0e5e22.js";import{o as ae,g as re,r as ie,t as se}from"./utils-0cd37490.js";import{_ as le,n as oe}from"./nextStep-f0bd717d.js";import{u as ue,t as ce}from"./theme-467ed2f7.js";import{B as de,I as me,A as ge,P as pe,_ as ve}from"./index-fcfb97a0.js";import{P as fe}from"./index-ab965744.js";import{L as ye}from"./loading-1c9c1d7b.js";import{u as Ie}from"./useDicData-f247ae2d.js";import{s as he}from"./phoneVerify-4b75f604.js";import"./useStorage-9366facd.js";import"./trial-b78b45d7.js";import"./relativeTime-043d4e7b.js";const Ce={class:"customer-body"},Te={class:"header"},Pe={class:"conatiner"},De=["onClick"],Oe={class:"name"};var Ne=E(e({props:{userInfo:{type:Object,default:()=>({})},relationCode:{type:String,default:"1"},title:{type:String,default:"选择投保人"}},emits:["change"],setup(e,{emit:v}){let f=[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"王大啦",certNo:"110101199003078910",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"001",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"},{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"李大霄",certNo:"110101199003070193",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"002",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.054Z",gmtModified:"2022-12-01T09:24:04.054Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[{addr:[{address:"string",area:"string",areaName:"string",city:"string",cityName:"string",province:"string",provinceName:"string"}],att:[{fileType:"string",fileUrl:"string"}],birthday:"string",cert:[{certId:"string",certName:"string",certNo:"string",certStart:"string",certType:"string",certValidity:"string",createTime:"string",customerType:"string"}],companyContact:[{area:"string",certExpiryDate:"string",certNo:"string",certType:"string",city:"string",companyContactId:"string",contactEmail:"string",contactType:"string",detail:"string",mobile:"string",name:"string",officePhone:"string",province:"string",tenantId:"string"}],companyExtInfoDTO:{enterpriseJobCategoryDesc:"string",enterpriseOfficeAddress:"string",enterpriseStaffAvgAge:0,enterpriseStaffNum:0},companyType:"string",contact:[{contactId:"string",contactNo:"string",contactRemark:"string",contactTool:"string",contactType:"string",createTime:"string",customerId:"string",isDefault:"string",tenantId:0}],country:"string",customerAttrDTO:{addNumberProgress:"string",addNumberSource:"string",creator:"string",customerAttrType:"string",customerId:0,customerType:"string",degree:"string",ext1:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",height:0,id:0,isDeleted:"string",marriage:"string",modifier:"string",occupation:"string",remark:"string",salary:"string",saleSource:"string",tenantId:0,visitProgress:"string",weight:0},customerId:"string",customerMaterialDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDefault:"string",isDeleted:"string",materialName:"string",materialType:"string",materialUrl:"string",modifier:"string",parentId:0,tenantId:0}],customerName:"string",customerNo:"string",customerTagDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],customerTagRandomDTO:[{creator:"string",customerId:0,customerType:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",id:0,isDeleted:"string",modifier:"string",tagId:0,tagName:"string",tagType:"string",tenantId:0}],degree:"string",gender:"string",hasSocialInsurance:"string",healthCondition:"string",marriage:"string",memo:"string",occupation:"string",occupationDesc:"string",occupationDuty:"string",occupationType:"string",payInfo:[{accountName:"string",bankBranch:"string",gmtCreated:"2022-12-01T09:24:04.055Z",gmtModified:"2022-12-01T09:24:04.055Z",isDefault:"string",payAccount:"string",payBank:"string",paymentMethod:0}],relation:[null],relationCode:"string",routeList:[0],salary:"string",type:"string",workPlace:"string"}],relationCode:"string",salary:"string",type:"string",workPlace:"string"}];f=[...f,...f,...f];const y=t({loading:!1,select:f[0],list:f}),I=()=>{y.loading=!1,v("change",y.select)},h=()=>{y.loading=!1,(async()=>{y.loading=!0})()};return(t,v)=>{const f=n("ProSvg"),C=n("van-icon"),T=n("ProPopup");return a(),r(c,null,[i(f,{name:"customer",onClick:h}),i(T,{class:"customer-list",style:{height:"416px"},show:u(y).loading,closeable:!1},{default:s((()=>[l("div",Ce,[l("div",Te,[l("span",null,o(e.title),1),i(C,{name:u("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAuRJREFUeF7t3DtOI0EQBuDfEtImXAdyNoIEAffYkIALrFZaMu4BiAQiyOE6myARoJI8kteyx/3469FWTTxT3fVNdY/dY/cCeVAFFtRoGQwJSi6CBE1QsgA5XFZogpIFyOGyQhOULEAOlxWaoGQBcris0CCglwB+ATgEcA/gFsAXuW/W4Q4AXAOQ3P4BuAPwUNuJlgqVBgVx9XheduSztgNBzv+xxDtb689VLWoL6CuAkw0Qo6Juw5QU3wD8rLnpLaDvAI62NDIa6hympPgB4Fgb9AbA75lGRkHdhSkpSq5/tEFl8n4CsD7fjDSnlmBKYZzXPmxbhrzAlXZIHmDRHlSqfW8FHRVVFVNQekBHQ1XHZICOgmqCyQKNjmqGyQSNimqKyQaNhmqOqQEaBdUFUwvUG9UNUxPUC9UVUxvUGtUd0wLUCjUEphWoNmoYTEtQLdRQmNagbNRwmB6gLNSQmF6gvahhMT1BW1FDY3qD1qLK+fKePPSrl94FZkmy9yipupdlI6czjYV4ORgBtLRS525cCMwIQ34VqaRSN6GGwYwG2lKpoTAjgk6ojwDm5ks5T+bVi2ivqaPMoetDP0F7H/XL62vn0RzyM/C1mFOoUKhRhnwrZjjUCKAlmPnBvnBOLcGchnR+9dyBWoM5/YKv5ZrCe8s5zWvI98D0XMtRm4niAcoAYcRQwbUGZUIwY9FwLUE1ADRiduFagWomrhm7GtcC1CJhizaKcLVBLRO1bGsrriaoR4Iebf6HqwXqmZhn293/AtlU+q4JVSwDqqxSsSs0AuZ0k136wgR1SUBhvaDoab7tJBZoREyXSmWARsY0R+0FHQHTFLUHdCRMM9RW0BExTVBbQHMDAvICc26RQQbNTVzIoLnNEBk0N8Iig0q41a3a5Gfaf2t3j+n6fqdzsdtWbTrp7EnUlo9Ne5K6ThoJSnZN0AQlC5DDZYUmKFmAHC4rNEHJAuRwWaEJShYgh8sKJYN+A6+yQmSPqqjtAAAAAElFTkSuQmCC"),onClick:v[0]||(v[0]=e=>u(y).loading=!1)},null,8,["name"])]),l("div",Pe,[(a(!0),r(c,null,d(u(y).list,(e=>(a(),r("div",{key:e.customerId,class:m({item:!0,active:u(y).select.customerId===e.customerId}),onClick:t=>u(y).select=e},[l("span",Oe,o(e.cert[0].certName),1),l("span",null,o(e.cert[0].certNo),1),g(i(C,{class:"check-icon",name:u("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAn9JREFUSEvtlktIVFEcxn/XXpM6Mz5zVBzR8oFUVARRUljhItKNhZC0qVYhZjMMFIG0aFUUtijKB0GEBL02WmZqRjlbFyWSYQ+EynKyh5baNHPi3hsNtzuj89Bp44G7Oec732/u//y/c0cSQgj+w5AWwNGqevRK/eMLXD0AAx2wu47ogD8OwcVyGHmuFnSJIQrgwR5o2Avfx3ynuL5insFPmuB6NXjcPmjhDqhunSew1wO3HNB9Xtur+SVQ0wZL4+YBPPkVmvdBf7sWmrcVau7Bsnhlfm6ba/SV2kTvB7TQlcVwpB0Mxr/zkvj8VigtvqYMjKnhx/jFY2jYAxMurUfuZqi9DwaTZl4SdQWCD4NgssChFpAPP9ThvAIth8HzU7szZxPUdsBys85REsetgrFhdUGKUcKtPDGLZsfLTXTnGHSe02uzN8LRTohN8OsjiSGnoH4nuKd8goLt6tub0wPDp8ahuQqetek11g1g64LYxID71ebquw2NlSC8PqExDQ5eg6JS/WbXG7WJ3vXr17LWga0b4pJmrJivq+XM3bBpxXLpd52A8pMQs1hdG+qFyxUwPqo3zlwL9m6IT5n1mLRxummDrn9CL1vkbYP9jSpUvol+TeuNM1aD/WHQydCCvV5oqkQpfSgjvUiFmtKC3qW/QNyTUF8KL53BmVgKwd4DZktw+j8q/zfXxCc4U4yS75nGinxwyNCMkKBKcgP+53K9htNb4NuIf9PUVeB4BAmZIUNnBsurw31wtgSmx7XmKbkqNDErLOjsYFkx8AAulPm+qck5KjTJGjY0OLCsetoKd0+p+ay6BMnZEUGDB0eM0RvM7fc4hB+4AA6hWJFJfwMaXAhFHVsobQAAAABJRU5ErkJggg==")},null,8,["name"]),[[p,u(y).select.customerId===e.customerId]])],10,De)))),128))]),i(R,{shadow:!1,text:"确定",onClick:I})])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-71e988c8"]]);const Ve=(e,t="YYYY-MM-DD")=>v(e).format(t),ke=(e,t=0,n="day",a="YYYY-MM-DD")=>v(e).add(t,n).format(a);const Ae={class:"guarantee-list"},Se=(e=>(O("data-v-2da31e52"),e=e(),N(),e))((()=>l("span",null,"保障计划",-1))),we={key:0,class:"picture-payment-content"},be=["onClick"],Le=["src"],xe=["src"],Ue={key:1,class:"plan-list"},Re=["onClick"],Ee={key:2,class:"feerate-view"},Fe={class:"guarantee-detail"},Me={key:0,class:"plan-list"},qe=["onClick"],Be={key:1},Ze={class:"extinfo-info-list"},_e={class:"content"};var je=E(e({props:{dataSource:{type:Object,default:()=>{}},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{type:Number,default:5},activePlanCode:{type:String,default:""},isMultiplePlan:{type:Boolean,default:!1}},emits:["update-active-plan"],setup(e,{emit:t}){var p;const v=e,O=f(null==(p=v.dataSource)?void 0:p.planList),N=f(v.activePlanCode);y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e;v.isMultiplePlan&&(O.value=null==(e=v.dataSource)?void 0:e.planList)}),{immediate:!0});const V=f([]),k=f([]),A=f(),S=I((()=>v.isMultiplePlan?v.dataSource.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[]));y([()=>v.dataSource,()=>v.activePlanCode],(()=>{var e,t,n,a;if(N.value=v.activePlanCode,v.isMultiplePlan){if(O.value&&O.value.length>0){let e=0;const t=O.value.findIndex((e=>e.planCode===N.value));t>-1&&(e=t),V.value=O.value[e].guaranteeItemVOS,k.value=O.value[e].extInfoVOList,A.value=null==(a=O.value[e])?void 0:a.productPremiumVOList[0]}}else V.value=null==(e=v.dataSource)?void 0:e.planInsureVO.guaranteeItemVOS,k.value=null==(t=v.dataSource)?void 0:t.planInsureVO.extInfoVOList,A.value=null==(n=v.dataSource)?void 0:n.planInsureVO.productPremiumVOList[0]}),{immediate:!0,deep:!0});const w=I((()=>{var e;return(null==(e=v.dataSource)?void 0:e.rateUri)||""})),b=I((()=>!!(A.value&&A.value.paymentFrequencyValue&&A.value.premiumUnit&&w))),[L,x]=h(!1),U=I((()=>{var e;return!(!V.value||!(null==(e=V.value)?void 0:e.length))&&(V.value.length>v.count&&(!!v.isShowClose||!L.value))})),R=()=>{x()},E=I((()=>{var e;return V.value&&(null==(e=V.value)?void 0:e.length)?V.value.length<=v.count||L.value?V.value:V.value.slice(0,v.count):[]})),q=e=>{N.value=e,t("update-active-plan",e)},B=f(!1),Z=()=>{B.value=!0},_=()=>{ae({fileType:"pdf",feeFileUri:w.value})};return(t,p)=>{var v,f;const y=n("ProCell"),I=n("ProPopup"),h=C("dompurify-html");return a(),r(c,null,[l("div",Ae,[l("div",{class:"header"},[Se,l("span",{onClick:Z},"查看详情")]),e.isMultiplePlan?(a(),r(c,{key:0},[u(S).length>0?(a(),r("div",we,[(a(!0),r(c,null,d(u(S),(e=>(a(),r("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>q(e.planCode)},[N.value==e.planCode?(a(),r("img",{key:0,src:e.selectedPic},null,8,Le)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,xe))],8,be)))),128))])):(a(),r("div",Ue,[(a(!0),r(c,null,d(O.value,((e,t)=>(a(),r("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===N.value?"plan-list-item-active":"")),onClick:t=>q(e.planCode)},[l("span",null,o(e.planName),1)],10,Re)))),128))]))],64)):T("",!0),(a(!0),r(c,null,d(u(E),((e,t)=>(a(),P(y,{key:t,class:"guarantee-item",title:e.title,content:e.desc,border:!1},null,8,["title","content"])))),128)),u(U)?(a(),r("div",{key:1,class:"show-more",onClick:R},[D(o(u(L)?"收起":"查看更多")+" ",1),i(F,{name:"down",class:m(["icon",{showMore:u(L)}])},null,8,["class"])])):T("",!0),u(b)?(a(),r("div",Ee,[l("span",null,o(`${(null==(v=A.value)?void 0:v.paymentFrequencyValue)||""}${(null==(f=A.value)?void 0:f.premiumUnit)||""}`),1),u(w)?(a(),r("span",{key:0,onClick:_},"查看保费")):T("",!0)])):T("",!0)]),i(M),i(I,{show:B.value,"onUpdate:show":p[0]||(p[0]=e=>B.value=e),title:"保障详情",class:"guarantee-popup"},{default:s((()=>[l("div",Fe,[e.isMultiplePlan?(a(),r("div",Me,[(a(!0),r(c,null,d(O.value,((e,t)=>(a(),r("div",{key:`${e.planCode}_${t}`,class:m("plan-list-item "+(e.planCode===N.value?"plan-list-item-active":"")),onClick:t=>q(e.planCode)},[l("span",null,o(e.planName),1)],10,qe)))),128))])):T("",!0),k.value&&k.value.length>0?(a(),r("div",Be,[l("div",Ze,[(a(!0),r(c,null,d(k.value,((e,t)=>(a(),P(y,{key:t,title:e.name,content:e.description,border:!1,size:"small"},null,8,["title","content"])))),128))]),i(M)])):T("",!0),(a(!0),r(c,null,d(V.value,((e,t)=>(a(),r("div",{key:t,class:"guarantee-item"},[i(y,{title:e.title,content:e.desc,border:!1,size:"small"},null,8,["title","content"]),g(l("div",_e,null,512),[[h,e.content]])])))),128))])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-2da31e52"]]);const Ye={class:"com-custom-card"},He={class:"title"};var Qe=E(e({props:{title:{type:String,required:!0}},setup:e=>(t,n)=>(a(),r("div",Ye,[l("div",He,o(e.title),1),l("div",null,[V(t.$slots,"default",{},void 0,!0)])]))}),[["__scopeId","data-v-059c21ee"]]);const Ge={class:"question"},Ke={class:"title"};var Je=E(e({props:{name:{type:String,default:""},question:{type:String,default:""},answer:{type:String,default:""}},setup:e=>(t,r)=>{const u=n("ProSvg"),c=n("van-collapse-item");return a(),P(c,{name:e.name,class:"com-question-item"},{title:s((()=>[l("div",Ge,[i(u,{name:"question"}),l("div",Ke,o(e.question),1)])])),default:s((()=>[D(" "+o(e.answer),1)])),_:1},8,["name"])}}),[["__scopeId","data-v-0d7ea124"]]);const We={class:"com-question"};var Xe=E(e({props:{list:{type:Array,default:()=>[]}},setup(e){const t=e,[l,g]=h(!1),p=f([]),v=()=>{g()},y=I((()=>t.list.length<=4||l.value?t.list:t.list.slice(0,4)));return(t,g)=>{const f=n("van-collapse");return a(),r("div",We,[i(f,{modelValue:p.value,"onUpdate:modelValue":g[0]||(g[0]=e=>p.value=e)},{default:s((()=>[(a(!0),r(c,null,d(u(y),((e,t)=>(a(),P(Je,{key:t,name:t.toString(),question:e.title,answer:e.desc},null,8,["name","question","answer"])))),128))])),_:1},8,["modelValue"]),e.list.length>4?(a(),r("div",{key:0,class:"show-more",onClick:v},[D(o(u(l)?"收起":"展开")+" ",1),i(F,{name:"down",class:m(["icon",{showMore:u(l)}])},null,8,["class"])])):T("",!0)])}}}),[["__scopeId","data-v-1b7e97e9"]]);const ze={class:"spec"},$e={key:1,class:"spec"},et=["src"];var tt=E(e({props:{isCheck:{type:Boolean,default:!1},url:{type:String,default:""},detail:{type:Object,default:()=>{}}},setup(e,{expose:t}){const o=e,m=f(),g=f([{title:"产品亮点",slotName:"tab1"},{title:"理赔说明",slotName:"tab2"},{title:"我要投保",slotName:"tab3"}]),p=I((()=>{var e,t,n,a;return(null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)&&(null==(a=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:a.spec.length)>0})),v=I((()=>{var e,t,n,a,r,i,s,l,u,c,d,m,g,p;const v=null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType;return!!(v===H.WORD&&(null==(r=null==(a=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:a.settlementProcessVO)?void 0:r.settlementProcessList)&&(null==(l=null==(s=null==(i=o.detail)?void 0:i.tenantProductInsureVO)?void 0:s.settlementProcessVO)?void 0:l.settlementProcessList.length)>0||v===H.IMAGE&&(null==(d=null==(c=null==(u=o.detail)?void 0:u.tenantProductInsureVO)?void 0:c.settlementProcessVO)?void 0:d.settlementProcessPicList)&&(null==(p=null==(g=null==(m=o.detail)?void 0:m.tenantProductInsureVO)?void 0:g.settlementProcessVO)?void 0:p.settlementProcessPicList.length)>0)})),y=I((()=>{var e,t,n,a;return(null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList)&&(null==(a=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:a.questionList.length)>0})),h=I((()=>{let e=[...g.value];return p.value||(e=e.filter((e=>"tab1"!==e.slotName))),v.value||y.value||(e=e.filter((e=>"tab2"!==e.slotName))),e}));return t({handleClickTab:()=>{var e;return null==(e=m.value)?void 0:e.handleClickTab}}),(e,t)=>{const g=n("van-image");return a(),P(q,{ref_key:"scrollRef",ref:m,class:"tabs",list:u(h),sticky:"",scrollspy:""},k({tab3:s((()=>[V(e.$slots,"form",{},void 0,!0)])),_:2},[u(p)?{name:"tab1",fn:s((()=>{var e,t;return[l("div",ze,[(a(!0),r(c,null,d((null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.spec)||[],((e,t)=>(a(),P(g,{key:t,class:"detail-img",width:"100%","lazy-load":"",src:e},null,8,["src"])))),128)),i(M)])]}))}:void 0,u(v)||u(y)?{name:"tab2",fn:s((()=>{var e,t,n,l,m;return[u(v)?(a(),r(c,{key:0},[(null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO.settlementProcessType)===u(H).WORD?(a(),P(Qe,{key:0,title:"理赔流程"},{default:s((()=>{var e,t,n;return[i(fe,{list:null==(n=null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.settlementProcessVO)?void 0:n.settlementProcessList},null,8,["list"])]})),_:1})):(a(),r("div",$e,[(a(!0),r(c,null,d((null==(m=null==(l=null==(n=o.detail)?void 0:n.tenantProductInsureVO)?void 0:l.settlementProcessVO)?void 0:m.settlementProcessPicList)||[],((e,t)=>(a(),r("img",{key:t,src:e,class:"detail-img"},null,8,et)))),128))])),i(M)],64)):T("",!0),u(y)?(a(),r(c,{key:1},[i(Qe,{title:"常见问题"},{default:s((()=>{var e,t;return[i(Xe,{list:null==(t=null==(e=o.detail)?void 0:e.tenantProductInsureVO)?void 0:t.questionList},null,8,["list"])]})),_:1}),i(M)],64)):T("",!0)]}))}:void 0]),1032,["list"])}}}),[["__scopeId","data-v-72590bd3"]]);const nt={key:0,class:"page-waiting"},at=["src"],rt=(e=>(O("data-v-ead4d7ae"),e=e(),N(),e))((()=>l("div",{class:"tips"},[l("p",null,"支付成功，承保中...")],-1)));var it=E(e({props:{isShow:{type:Boolean,default:()=>{}}},setup(e){const t=e;return y((()=>t.isShow),(e=>{document.body.style.overflow=e?"hidden":"inherit"})),(e,n)=>t.isShow?(a(),r("div",nt,[l("img",{class:"loading",src:u(ye)},null,8,at),rt])):T("",!0)}}),[["__scopeId","data-v-ead4d7ae"]]);const st={class:"list"},lt=l("div",{class:"tip"},[l("span",null,[l("span",{class:"important-text"},"重要"),D(" 请确认被保险人是否存在下列问题，请如实告知，否则将对您的理赔权益或合同效力产生影响 ")])],-1),ot={class:"title"},ut={class:"item"},ct={class:"footer"},dt=D("不符合"),mt=D("符合，立即投保"),gt=e({props:{show:{type:Boolean,default:!0},activeIndex:{default:0},contentList:{default:()=>[]}},emits:["update:show","onConfirmHealth","onCloseHealth"],setup(e,{emit:t}){const r=e,c=ue(),d=f(r.show),m=f(r.activeIndex),g=I((()=>{var e;return null==(e=r.contentList[m.value])?void 0:e.attachmentUri})),p=I((()=>{var e;return null==(e=r.contentList[m.value])?void 0:e.attachmentType})),v=f(!0),h=e=>{"allFalse"===e&&(v.value=!1,t("update:show",!1)),t("onConfirmHealth",e)};return y((()=>r),(()=>{d.value=r.show,m.value=r.activeIndex}),{deep:!0,immediate:!0}),(r,m)=>{const f=n("ProFilePreview"),y=n("VanButton"),I=n("van-config-provider"),C=n("ProPopup");return a(),P(C,{show:d.value,"onUpdate:show":m[2]||(m[2]=e=>d.value=e),height:80,class:"health-notice-preview-popup-wrap",closeable:!1,onClose:m[3]||(m[3]=e=>{v.value&&t("onCloseHealth")})},{default:s((()=>[i(I,{"theme-vars":u(c),class:"custom-provider"},{default:s((()=>[l("div",st,[lt,l("div",ot,o(e.contentList[0].attachmentName),1),l("div",ut,[(a(),P(f,{key:u(g),content:u(g),type:u(p)},null,8,["content","type"]))])]),l("div",ct,[i(y,{block:"",round:"",class:"left",onClick:m[0]||(m[0]=e=>h("N"))},{default:s((()=>[dt])),_:1}),i(y,{type:"primary",plain:"",block:"",round:"",onClick:m[1]||(m[1]=e=>h("allFalse"))},{default:s((()=>[mt])),_:1})])])),_:1},8,["theme-vars"])])),_:1},8,["show"])}}});const pt=e=>(O("data-v-00ff7c41"),e=e(),N(),e),vt={class:"com-period-cell"},ft={key:0,class:"custom-cell check-btn-cell"},yt=pt((()=>l("div",{class:"cell-label"},"保障期间",-1))),It={class:"cell-content"},ht=pt((()=>l("div",{class:"cell-label"},"生效日期",-1))),Ct={class:"cell-content"},Tt={key:2,class:"custom-cell common-cell"},Pt=pt((()=>l("div",{class:"cell-label"},"保障期限",-1))),Dt={class:"cell-content"};var Ot=E(e({props:{formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:d,emit:m}){const g=e;f({});const p=(e,t)=>"year"===e?`${t}年`:"month"===e?`${t}月`:"day"===e?`${t}日`:t,C=f(new Date),P=Ie("RISK_INSURANCE_PERIOD"),D=t({formInfo:g.formInfo});y((()=>D.formInfo.insuranceStartDate),(e=>{e&&"string"==typeof e&&(C.value=new Date(e))}));const O=f(),N=f([]);y([()=>g.insureDetail,()=>D.formInfo.activePlanCode],(()=>{var e;if(D.formInfo.insurancePeriodValue="",D.formInfo.insuranceStartDate="",D.formInfo.insuranceEndDate="",D.formInfo.commencementTime="",g.insureDetail)if(g.insureDetail.productRelationPlanVOList&&g.insureDetail.productRelationPlanVOList.length>0){let t=0;const n=g.insureDetail.productRelationPlanVOList.findIndex((e=>e.planCode===D.formInfo.activePlanCode));n>-1&&(t=n);const a=((null==(e=g.insureDetail.productRelationPlanVOList[t])?void 0:e.productRiskVoList[0].riskDetailVOList)||[]).find((e=>1===e.riskType));a&&(O.value=a)}else{const e=(g.insureDetail.productRiskVoList[0].riskDetailVOList||[]).find((e=>1===e.riskType));e&&(O.value=e)}}),{deep:!0,immediate:!0}),y([()=>O.value,()=>P.value],(()=>{N.value=[],Array.isArray(P.value)&&P.value.length>1&&O.value&&(N.value=(O.value.riskInsureLimitVO.insurancePeriodValueList||[]).map((e=>{const t=P.value.find((t=>t.value===e));return t?{label:t.name,value:t.value}:null})).filter((e=>!!e))),N.value.length>0&&(D.formInfo.insurancePeriodValue=N.value[0].value)}),{deep:!0,immediate:!0});const V=I((()=>{var e,t;return(null==(e=O.value)?void 0:e.riskInsureLimitVO.guaranteeStartDate)?String(null==(t=O.value)?void 0:t.riskInsureLimitVO.guaranteeStartDate):Q.CURRENT_DAY})),[k,S]=h(!1),w=()=>{S(!0)},b=new Date(ke(new Date,1,"day")),L=I((()=>{var e;if(V.value===Q.CUSTOM_DAY){const t=null==(e=O.value)?void 0:e.riskInsureLimitVO.maxInsuranceDay;if(!t)return new Date;const n=ke(new Date,Number(t),"day");return new Date(n)}return new Date})),x=e=>{D.formInfo.insuranceStartDate=`${Ve(e)} 00:00:00`,S(!1)},U=()=>{S(!1)},R=I((()=>{}));return y([()=>V.value,()=>R.value,()=>D.formInfo.insurancePeriodValue,()=>D.formInfo.insuranceStartDate],(()=>{if(!D.formInfo.insurancePeriodValue)return;const[e,t]=D.formInfo.insurancePeriodValue.split("_");if(D.formInfo.insuranceStartDate||(V.value===Q.CUSTOM_DAY||V.value===Q.NEXT_DAY?D.formInfo.insuranceStartDate=`${ke(new Date,1,"day")} 00:00:00`:D.formInfo.insuranceStartDate=`${Ve(new Date)} 00:00:00`),"to"!==e){const n=`${((e,t=0,n="day",a="YYYY-MM-DD")=>v(e).subtract(t,n).format(a))(D.formInfo.insuranceStartDate,1,"day")} 00:00:00`;D.formInfo.insuranceEndDate=`${ke(n,Number(t),e)} 23:59:59`}else D.formInfo.tenantOrderInsuredList[0].birthday,D.formInfo.tenantOrderInsuredList[0].certType===B.CERT&&D.formInfo.tenantOrderInsuredList[0].certNo&&Z(D.formInfo.tenantOrderInsuredList[0].certNo)&&_(D.formInfo.tenantOrderInsuredList[0].certNo),"single"===t&&(D.formInfo.insuranceEndDate="9999-99-99 23:59:59"),D.formInfo.insuranceEndDate=`${ke(D.formInfo.insuranceStartDate,Number(t)-1,e)} 23:59:59`}),{immediate:!0}),d({}),(e,t)=>{const d=n("ProRadioButton"),m=n("van-config-provider"),g=n("van-datetime-picker"),v=n("ProPopup");return a(),r(c,null,[i(m,{"theme-vars":u(ce)},{default:s((()=>[l("div",vt,[N.value.length>1?(a(),r("div",ft,[yt,l("div",It,[i(d,{modelValue:u(D).formInfo.insurancePeriodValue,"onUpdate:modelValue":t[0]||(t[0]=e=>u(D).formInfo.insurancePeriodValue=e),options:N.value},null,8,["modelValue","options"])])])):T("",!0),u(V)===u(Q).CUSTOM_DAY?(a(),r("div",{key:1,class:"custom-cell common-cell",onClick:w},[ht,l("div",Ct,o(u(D).formInfo.insuranceStartDate),1)])):T("",!0),u(V)!==u(Q).CUSTOM_DAY?(a(),r("div",Tt,[Pt,l("div",Dt,o(u(D).formInfo.insuranceStartDate?u(Ve)(u(D).formInfo.insuranceStartDate):"")+" - "+o(u(D).formInfo.insuranceEndDate?u(Ve)(u(D).formInfo.insuranceEndDate):""),1)])):T("",!0)])])),_:1},8,["theme-vars"]),i(v,{show:u(k),"onUpdate:show":t[2]||(t[2]=e=>A(k)?k.value=e:null),height:40,closeable:!1},{default:s((()=>[i(g,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),type:"date",title:"选择年月","min-date":u(b),"max-date":u(L),formatter:p,onConfirm:x,onCancel:U},null,8,["modelValue","min-date","max-date"])])),_:1},8,["show"])],64)}}}),[["__scopeId","data-v-00ff7c41"]]);const Nt=e=>(O("data-v-0daa05e6"),e=e(),N(),e),Vt={class:"com-payment-type"},kt={class:"title"},At={key:0,class:"picture-payment-content"},St=["onClick"],wt=["src"],bt=["src"],Lt={key:1,class:"custom-cell check-btn-cell"},xt=Nt((()=>l("div",{class:"cell-label"},"保障方案",-1))),Ut={class:"cell-content"},Rt={key:0,class:"picture-payment-content"},Et=["onClick"],Ft=["src"],Mt=["src"],qt={key:1,class:"default-payment-content"},Bt=[Nt((()=>l("div",{class:"pay-method"},[l("span",{class:"method"},o("按月交费")),l("span",{class:"acount"},o("共12期"))],-1)))],Zt=[Nt((()=>l("div",null,[l("div",{class:"tip"},[l("span",null,o("比按月支付最高省")),D(),l("span",null,"16%")]),l("div",{class:"triangle"}),l("div",{class:"pay-method"},[l("span",{class:"method"},o("一次交清")),l("span",{class:"acount"},o("比月交保费省最高2014元"))])],-1)))],_t={key:2,class:"custom-cell check-btn-cell"},jt=Nt((()=>l("div",{class:"cell-label"},"交费方式",-1))),Yt={class:"cell-content"},Ht={class:"custom-cell common-cell"},Qt=Nt((()=>l("div",{class:"cell-label"},"实付保费",-1))),Gt={class:"cell-content actual-premium"},Kt={key:0,class:"feerate-explain"},Jt={class:"content"},Wt=Nt((()=>l("div",{class:"triangle-top"},null,-1)));var Xt=E(e({props:{showConfig:{type:Object,default:()=>{}},formInfo:{type:Object,default:()=>{}},insureDetail:{type:Object,default:()=>{}},configDetail:{type:Object,default:()=>{}},isMultiplePlan:{type:Boolean,default:!1},premium:{type:[Number||null],default:null}},emits:["onReset","onUpdate","onVerify"],setup(e,{expose:g,emit:p}){const v=e;f({});const h=t({formInfo:v.formInfo}),C=f([]),D=f(),O=f(),N=I((()=>{var e;return"1"===String(null==(e=D.value)?void 0:e.paymentFrequencyFlag)})),V=I((()=>{var e;return null==(e=O.value)?void 0:e.productPremiumVOList.find((e=>e.paymentFrequency===h.formInfo.paymentFrequency))})),k=I((()=>v.premium&&V.value?`${v.premium}${V.value.premiumUnit||""}`:V.value?`${V.value.paymentFrequencyValue||""}${V.value.premiumUnit||""}`:"")),A=I((()=>{if(O){const{premiumExplain:e,premiumExplainViewName:t,premiumExplainUri:n}=O.value||{};return{premiumExplain:e,premiumExplainUri:n,premiumExplainViewName:t}}return null}));y((()=>v.configDetail),(()=>{var e;v.isMultiplePlan&&v.configDetail&&(C.value=null==(e=v.configDetail.tenantProductInsureVO)?void 0:e.planList)}),{immediate:!0,deep:!0}),y([()=>v.configDetail,()=>v.isMultiplePlan,()=>h.formInfo.activePlanCode],(()=>{if(v.configDetail)if(v.isMultiplePlan){let e=0;const t=v.configDetail.tenantProductInsureVO.planList.findIndex((e=>e.planCode===h.formInfo.activePlanCode));t>-1&&(e=t),D.value=v.configDetail.tenantProductInsureVO.planList[e].productPlanInsureConditionVO,O.value=v.configDetail.tenantProductInsureVO.planList[e]}else D.value=v.configDetail.tenantProductInsureVO.planInsureVO.productPlanInsureConditionVO,O.value=v.configDetail.tenantProductInsureVO.planInsureVO}),{deep:!0,immediate:!0});const w=I((()=>{var e;if(D.value&&D.value.paymentFrequency){return((null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[]).length>1}return!1})),b=f(!1);y((()=>D.value),(()=>{var e;if(D.value){const t=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];if(1===t.length)return h.formInfo.paymentFrequency=D.value.paymentFrequency,void(b.value=!1);if(2===t.length&&t.filter((e=>![G.SINGLE,G.MONTH].includes(e))).length<1)return void(b.value=!0);b.value=!1}}),{immediate:!0,deep:!0});const L=I((()=>{var e;return D.value?null==(e=D.value.paymentFrequencyList||[])?void 0:e.map((e=>({...e,paymentFrequency:e.skinValue}))):[]})),x=I((()=>L.value.length>0)),U=I((()=>v.isMultiplePlan?v.configDetail.tenantProductInsureVO.planList.map((e=>e.planPicList?{...e.planPicList,planCode:e.planCode,planName:e.planName}:null)).filter((e=>!!e)):[])),R=I((()=>{var e,t;if(D.value){const n=(null==(e=D.value.paymentFrequency)?void 0:e.split(","))||[];return 1===n.length&&(h.formInfo.paymentFrequency=n[0]),null==(t=n||[])?void 0:t.map((e=>({label:K[e],value:e})))}return[]})),E=e=>{h.formInfo.paymentFrequency=e},F=()=>{var e,t;(null==(e=A.value)?void 0:e.premiumExplainUri)?ae({fileType:"pdf",fileUri:null==(t=A.value)?void 0:t.premiumExplainUri}):S("无费率文件！")};return g({}),(t,g)=>{const p=n("ProRadioButton"),v=n("templat"),f=n("ProDivider"),y=n("van-config-provider");return a(),P(y,{"theme-vars":u(ce)},{default:s((()=>[l("div",Vt,[l("div",kt,o(u(w)?"交费方式":"保障计划"),1),e.isMultiplePlan?(a(),r(c,{key:0},[u(U).length>0?(a(),r("div",At,[(a(!0),r(c,null,d(u(U),(e=>(a(),r("div",{key:e.planCode,class:m("picture-payment-item"),onClick:t=>{return n=e.planCode,void(h.formInfo.activePlanCode=n);var n}},[u(h).formInfo.activePlanCode==e.planCode?(a(),r("img",{key:0,src:e.selectedPic},null,8,wt)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,bt))],8,St)))),128))])):(a(),r("div",Lt,[xt,l("div",Ut,[i(p,{modelValue:u(h).formInfo.activePlanCode,"onUpdate:modelValue":g[0]||(g[0]=e=>u(h).formInfo.activePlanCode=e),options:C.value,prop:{value:"planCode",label:"planName"}},null,8,["modelValue","options"])])]))],64)):T("",!0),u(N)?(a(),P(v,{key:1},{default:s((()=>[u(x)&&u(L).length>1?(a(),r("div",Rt,[(a(!0),r(c,null,d(u(L),(e=>(a(),r("div",{key:e.paymentFrequency,class:m("picture-payment-item"),onClick:t=>E(e.paymentFrequency)},[u(h).formInfo.paymentFrequency==e.paymentFrequency?(a(),r("img",{key:0,src:e.selectedPic},null,8,Ft)):(a(),r("img",{key:1,src:e.unSelectedPic},null,8,Mt))],8,Et)))),128))])):b.value?(a(),r("div",qt,[l("div",{class:m("com-payment-type-item "+(u(h).formInfo.paymentFrequency==u(G).MONTH?"active":"")),onClick:g[1]||(g[1]=e=>E(u(G).MONTH))},Bt,2),l("div",{class:m("com-payment-type-item "+(u(h).formInfo.paymentFrequency==u(G).SINGLE?"active":"")),onClick:g[2]||(g[2]=e=>E(u(G).SINGLE))},Zt,2)])):u(R).length>1?(a(),r("div",_t,[jt,l("div",Yt,[i(p,{modelValue:u(h).formInfo.paymentFrequency,"onUpdate:modelValue":g[3]||(g[3]=e=>u(h).formInfo.paymentFrequency=e),options:u(R)},null,8,["modelValue","options"])])])):T("",!0)])),_:1})):T("",!0),i(Ot,{"form-info":u(h).formInfo,"insure-detail":e.insureDetail,"config-detail":e.configDetail},null,8,["form-info","insure-detail","config-detail"]),u(V)&&u(V).premiumUnit?(a(),r(c,{key:2},[l("div",Ht,[Qt,l("div",Gt,o(u(k)),1)]),u(A)&&u(A).premiumExplain&&u(A).premiumExplainViewName?(a(),r("div",Kt,[l("div",Jt,[Wt,l("div",null,[l("span",null,o(u(A).premiumExplain||""),1),l("span",{class:"file-name",onClick:F},"《"+o(u(A).premiumExplainViewName||"")+"》",1)])])])):T("",!0)],64)):T("",!0)]),i(f)])),_:1},8,["theme-vars"])}}}),[["__scopeId","data-v-0daa05e6"]]);const zt={class:"page-internet-product-detail"},$t={class:"info"},en={class:"footer-area"},tn={class:"price"},nn=D(" 总保费"),an=D(o("立即投保"));var rn=E(e({setup(e){var d,m;const g=ue();w();const p=b(),{openId:v,productCode:h="BWYL2021",tenantId:C,phoneNo:D,agentCode:O="",saleChannelId:N,paymentMethod:V,certNo:k,name:A,templateId:E,pageCode:F,from:M,extraInfo:q,insurerCode:Z}=p.query;let _={};try{_=JSON.parse(decodeURIComponent(q))}catch(Ge){}const H=f({certNo:k,openId:v,tenantId:C,mobile:D}),Q=f(),K=f(),ae=f(),ce=f(),fe=f(),ye=f(!1),Ie=f(!1),Ce=f(0),Te=f(!1);f(!1);const Pe=f(!1),De=f();let Oe="";const ke=f(!0),Ae="alert",Se="jumpToPage";t({holder:{certNo:k,certType:B.CERT,mobile:D,name:A,socialFlag:J.HAS,extInfo:{hasSocialInsurance:J.HAS}},insured:{certNo:k,certType:B.CERT,name:A,socialFlag:J.HAS,relationToHolder:W.SELF},paymentMethod:V,renewalDK:"Y",packageProductList:[],mobileSmsCode:"",activePlanCode:"",paymentFrequency:G.YEAR,insurancePeriodValue:"",commencementTime:Ve(new Date)});const we=f({tenantId:C,agencyId:O,orderCategory:1,saleUserId:N,saleChannelId:N,venderCode:Z,insuranceStartDate:null,insuranceEndDate:null,activePlanCode:"",paymentFrequency:G.YEAR,insurancePeriodValue:"",commencementTime:"",tenantOrderHolder:{socialFlag:J.HAS,extInfo:{hasSocialInsurance:J.HAS}},tenantOrderInsuredList:[{socialFlag:J.HAS,relationToHolder:W.SELF,extInfo:{occupationCodeList:[],hasSocialInsurance:J.HAS},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{occupationCodeList:[]}}],tenantOrderProductList:[{tenantId:C,productCode:null==(d=ae.value)?void 0:d.productCode,productName:null==(m=ae.value)?void 0:m.productName,premium:fe.value||0}]}],extInfo:{buttonCode:"EVENT_SHORT_saveOrder",successJumpUrl:"",pageCode:"productInfo",extraInfo:_,templateId:null==_?void 0:_.templateId},operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0}}),be=I((()=>{var e,t,n,a,r,i;return!!ae.value&&!!((null==(t=null==(e=ae.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList)&&Array.isArray(null==(a=null==(n=ae.value)?void 0:n.tenantProductInsureVO)?void 0:a.planList)&&(null==(i=null==(r=ae.value)?void 0:r.tenantProductInsureVO)?void 0:i.planList.length)>0)})),Le=I((()=>{var e,t,n;if(be.value){if(we.value.activePlanCode)return(null==(e=ce.value)?void 0:e.planFactor[we.value.activePlanCode])||{}}else if(null==(t=ce.value)?void 0:t.productFactor)return null==(n=ce.value)?void 0:n.productFactor;return{}}));I((()=>{if(Le.value){return!!Le.value.find((e=>"verificationCode"===e.code&&1===e.isDisplay))}return!1})),y((()=>be.value),(()=>{var e,t;be.value&&(we.value.activePlanCode=null==(t=null==(e=ae.value)?void 0:e.tenantProductInsureVO)?void 0:t.planList[0].planCode)}),{immediate:!0});const xe=I((()=>{var e,t,n;return be.value?(null==(t=null==(e=ce.value)?void 0:e.productRelationPlanVOList.find((e=>e.planCode===we.value.activePlanCode)))?void 0:t.productRiskVoList)||[]:(null==(n=ce.value)?void 0:n.productRiskVoList)||[]})),Ue=e=>{we.value.activePlanCode=e},Re=I((()=>{var e,t,n;if((null==(e=ce.value)?void 0:e.productQuestionnaireVOList)&&(null==(t=ce.value)?void 0:t.productQuestionnaireVOList.length)>0){const e=null==(n=ce.value)?void 0:n.productQuestionnaireVOList[0];if(e){const{basicInfo:{questionnaireType:t},questions:n}=e.questionnaireDetailResponseVO||{};return 2===t?[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:n,attachmentType:"question"}]:[{attachmentName:null==e?void 0:e.questionnaireName,attachmentUri:n[0].content,attachmentType:re(String(t),n[0].content)}]}}return[]})),Ee=f();y([()=>be.value,()=>we.value.activePlanCode,()=>ae.value],(()=>{var e,t;let n=null;if(be.value&&ae.value){const t=null==(e=ae.value)?void 0:e.tenantProductInsureVO.planList.find((e=>e.planCode===(we.value.activePlanCode||"")));t&&(n=null==t?void 0:t.attachmentVOList)}else ae.value&&(n=null==(t=ae.value)?void 0:t.tenantProductInsureVO.planInsureVO.attachmentVOList);Ee.value=n?Object.keys(n).map((e=>(n[e].forEach((e=>{e.attachmentType=re(String(e.attachmentType),e.attachmentUri)})),{attachmentName:e,attachmentList:n[e]}))):[]}),{immediate:!0});const Fe=async(e,t)=>{const n=await he(e),{code:a,data:r}=n;"10000"===a&&(null==t||t())},Me=()=>{K.value.handleClickTab()("tab3")},qe=e=>{Ce.value=e,Ie.value=!0},Be=async()=>{const{code:e,data:t}=await $({orderNo:De.value,tenantId:C});"10000"===e&&(t.extInfo={...t.extInfo,buttonCode:"EVENT_SHORT_underWrite"},await oe(t))},Ze=async()=>{await oe(((e={},t={},n={})=>{var a;const r={...n},i={tenantId:C,riskList:(null==(a=r.tenantOrderInsuredList[0])?void 0:a.tenantOrderProductList[0].riskVOList)||[],riskPremium:t,productId:null==e?void 0:e.productBasicInfoVO.id};return r.extInfo.iseeBizNo=Oe,r.commencementTime=r.insuranceStartDate,r.expiryDate=r.insuranceEndDate,r.tenantOrderInsuredList=r.tenantOrderInsuredList.map((e=>({...e,planCode:we.value.activePlanCode?we.value.activePlanCode:null}))),r.tenantOrderInsuredList[0].tenantOrderProductList[0]={premium:"",productCode:e.productBasicInfoVO.productCode,productName:e.productBasicInfoVO.productName,planCode:we.value.activePlanCode?we.value.activePlanCode:null,tenantOrderRiskList:se(i)},r})(ce.value,{},we.value),(async(e,t)=>{t===Se&&(null==e?void 0:e.orderNo)&&(De.value=null==e?void 0:e.orderNo,Ee.value.length>0?(ke.value=!1,qe(0)):Re.value.length>0?ye.value=!0:await Be())}))},_e=async(e,t,n,a=!0)=>{var r,i;const s=ie(n).map((t=>({...t,paymentFrequency:e.paymentFrequency,insurancePeriodValue:e.insurancePeriodValue}))),l={tenantId:C,productCode:null==(r=ae.value)?void 0:r.productCode,insuranceStartDate:e.insuranceStartDate,insuranceEndDate:e.insuranceEndDate,commencementTime:e.insuranceStartDate,expiryDate:e.insuranceEndDate,holder:{personVO:{...e.tenantOrderHolder,socialFlag:e.tenantOrderHolder.extInfo.hasSocialInsurance}},insuredVOList:e.tenantOrderInsuredList.map((e=>({insuredCode:"",relationToHolder:e.relationToHolder,personVO:{...e,socialFlag:e.extInfo.hasSocialInsurance},productPlanVOList:[{insurerCode:t.productBasicInfoVO.insurerCode,planCode:we.value.activePlanCode?we.value.activePlanCode:null,riskVOList:s}]})))},{code:o,message:u}=await ee(l);if("10000"===o){const{code:e,data:t}=await te(l);if("10000"===e){const{pageAction:e,message:n,data:r}=t.pageAction||{};if(e===Ae)return void S(n);we.value.tenantOrderInsuredList[0].tenantOrderProductList=null==(i=l.insuredVOList[0])?void 0:i.productPlanVOList,fe.value=t.premium,we.value.orderAmount=t.premium,we.value.orderRealAmount=t.premium,a||Ze()}}else S(u)},Ye=async()=>{try{await _e(we.value,ce.value,xe.value,!1)}catch(e){}},He=e=>{"allFalse"===e?(ye.value=!1,Be()):x.confirm({message:"被保人不符合健康要求，很抱歉暂时无法投保该产品",confirmButtonText:"选错了",cancelButtonText:"为其他人投保"}).then((()=>{})).catch((()=>{ye.value=!1}))},Qe=()=>{Ie.value=!1,Re.value.length<1?Be():ye.value=!0};y([()=>we.value.tenantOrderInsuredList[0].birth,()=>we.value.tenantOrderInsuredList[0].gender,()=>we.value.tenantOrderInsuredList[0].extInfo.hasSocialInsurance],U((async()=>{const{birth:e,gender:t,extInfo:{hasSocialInsurance:n}}=we.value.tenantOrderInsuredList[0];e&&t&&n&&await _e(we.value,ce.value,xe.value)}),500),{deep:!0,immediate:!0});return j(),L((()=>{(async()=>{var e;const t=await ne({productCode:h,withInsureInfo:!0,tenantId:C});"10000"===t.code&&(Pe.value=!0,ae.value={...t.data},document.title=(null==(e=t.data)?void 0:e.productFullName)||"");const n=await z({productCode:h});"10000"===n.code&&(ce.value=n.data)})(),setTimeout((async()=>{Oe=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,t)=>{const d=n("van-config-provider");return a(),r(c,null,[i(d,{"theme-vars":u(g)},{default:s((()=>{var n,r,c,d,m,p,v,f,y;return[l("div",zt,[l("div",$t,[i(de,{url:null==(r=null==(n=ae.value)?void 0:n.tenantProductInsureVO)?void 0:r.banner[0]},null,8,["url"]),(null==(d=null==(c=ae.value)?void 0:c.tenantProductInsureVO)?void 0:d.bannerMove)?(a(),P(de,{key:0,url:null==(p=null==(m=ae.value)?void 0:m.tenantProductInsureVO)?void 0:p.bannerMove[0],onClick:Me},null,8,["url"])):T("",!0)]),i(je,{"show-service-config":"","data-source":null==(v=ae.value)?void 0:v.tenantProductInsureVO,"is-multiple-plan":u(be),"active-plan-code":we.value.activePlanCode,onUpdateActivePlan:Ue},null,8,["data-source","is-multiple-plan","active-plan-code"]),i(tt,{ref_key:"detailScrollRef",ref:K,detail:ae.value},{form:s((()=>[i(le,{ref_key:"formRef",ref:Q,"title-collection":{HOLDER:"本人信息（投保人）",INSURER:"为谁投保（被保人）"},"form-info":we.value,"send-sms-code":Fe,"factor-object":u(Le)||{}},{holderName:s((()=>[i(Ne,{"user-info":H.value},null,8,["user-info"])])),insurerName:s((()=>[i(Ne,{title:"选择被保人","user-info":H.value},null,8,["user-info"])])),_:1},8,["form-info","factor-object"]),i(Xt,{"form-info":we.value,"insure-detail":ce.value,"config-detail":ae.value,"is-multiple-plan":u(be),"risk-info-period-list":e.riskInfoPeriodList,premium:fe.value},null,8,["form-info","insure-detail","config-detail","is-multiple-plan","risk-info-period-list","premium"])])),_:1},8,["detail"]),(null==(f=ae.value)?void 0:f.tenantProductInsureVO.inscribedContent)?(a(),P(me,{key:0,"inscribed-content":null==(y=ae.value)?void 0:y.tenantProductInsureVO.inscribedContent},null,8,["inscribed-content"])):T("",!0),Ee.value&&Ee.value.length>0?(a(),P(ge,{key:1,"attachement-list":Ee.value,"pre-text":"请阅读",onPreviewFile:t[0]||(t[0]=e=>qe(e))},null,8,["attachement-list"])):T("",!0),l("div",en,[l("div",tn,[nn,l("span",null,o(fe.value?"￥":"")+o(u(Y)(fe.value))+" "+o(fe.value?we.value.paymentFrequency==u(X).YEAR?"元/年":"元/月":""),1)]),i(R,{shadow:!1,"theme-vars":u(g),class:"right",text:"立即投保",onClick:Ye},{default:s((()=>[an])),_:1},8,["theme-vars"])])]),Pe.value?(a(),P(pe,{key:0,"product-detail":ae.value},null,8,["product-detail"])):T("",!0)]})),_:1},8,["theme-vars"]),i(gt,{show:ye.value,"onUpdate:show":t[1]||(t[1]=e=>ye.value=e),"content-list":u(Re),"active-index":0,onOnConfirmHealth:He},null,8,["show","content-list"]),Ie.value?(a(),P(ve,{key:0,show:Ie.value,"onUpdate:show":t[2]||(t[2]=e=>Ie.value=e),"content-list":Ee.value,"is-only-view":ke.value,"active-index":Ce.value,text:ke.value?"关闭":"我已逐页阅读并确认告知内容","force-read-cound":0,"on-close-file-preview":"",onSubmit:Qe},null,8,["show","content-list","is-only-view","active-index","text"])):T("",!0),i(it,{"is-show":Te.value},null,8,["is-show"])],64)}}}),[["__scopeId","data-v-312ac306"]]);export{rn as default};

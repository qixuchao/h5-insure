import{_ as e,d as a,i as t,h as l,j as o,k as s,l as i,m as r,o as d,p as n,w as c,a as u,e as m,u as p,cF as v,b as f,bg as b,bh as y,cy as h,cz as g,q as j,f as w,v as N,bi as C,bL as T,cA as x,cB as I,b3 as _,bo as V,bp as k,cL as P,y as U,cM as q}from"./index-2ac8b6d6.js";import{g as z}from"./trial-4ea734ea.js";import{c as B}from"./format-31cde443.js";import{u as L}from"./useOrder-1ad926ad.js";import{f as S}from"./face_img-b678980a.js";import $ from"./index-a2c957f7.js";import"./utils-48a9b4f8.js";import"./createProposal-1f031c3d.js";import"./trial-cb24e467.js";import"./PolicyInfo-ab4c8e92.js";import"./cloneDeep-ea85aaaa.js";const A=e=>(V("data-v-10219460"),e=e(),k(),e),F={class:"page-phone-verify"},E={class:"title"},M=A((()=>u("div",{class:"title face-title"},"人脸识别",-1))),O={class:"face-verify-img"},D=["src"],R=A((()=>u("div",{class:"face-verify-tip"},[u("div",{class:"title"},"操作时请您配合"),u("ol",null,[u("li",null,"请调亮手机屏幕亮度，确保光线充足"),u("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),u("li",null,"请确保真实本人操作")])],-1))),W={class:"attachment"},G={class:"footer-button"};var H=e(a({__name:"phoneVerify",setup(e){const a=L(),V=t(),k=l(),{agentCode:A,tenantId:H,nextPageCode:J,biz_id:K,orderNo:Q,objectType:X,orderCode:Y}=V.query,Z=o({mobile:"",verifyCode:""}),ee=o(),ae=o(),te=o(),le=o([{attachmentName:"隐私政策"}]),oe=o(!1),se=s((()=>Array.isArray(X)?`${null==X?void 0:X[0]}`.toLocaleUpperCase():`${X}`.toLocaleUpperCase())),ie=()=>{z({orderNo:Y||Q,tenantId:H}).then((({code:e,data:t})=>{if("10000"===e){Object.assign(a.value,t);const{holder:e,insuredList:l}=t;if("holder"===X){const{name:a,certNo:t,certType:l,id:o,mobile:s}=e;Z.value.mobile=s,ae.value={userName:a,certiNo:t,certType:l,objectId:o}}else{const{name:e,certNo:a,certType:t,id:o,mobile:s}=(null==l?void 0:l[0])||{};Z.value.mobile=s,ae.value={userName:e,certiNo:a,certType:t,objectId:o}}K&&(()=>{const{objectId:e,certType:a}=ae.value,t={bizId:K,certType:a,objectId:e,objectType:se.value,orderNo:Q,tenantId:H};P(t).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status&&(delete V.query.biz_id,delete V.query.nextPageCode,k.push({path:U[`${J}`],query:{...V.query,isShare:1}}))}))})()}}))},re=()=>{var e,a;null==(a=null==(e=ee.value)?void 0:e.validate)||a.call(e).then((()=>{te.value?(()=>{const{userName:e,certiNo:a,certType:t}=ae.value,l={tenantId:H,faceAuthMode:"TENCENT",callbackUrl:window.location.href,bizNo:Q,userName:e,certiNo:a,certType:t};q(l).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})():C.alert({message:"请先同意隐私政策",confirmButtonText:"我知道了"})}))};i((()=>{ie()}));const de=o();return i((()=>{setTimeout((async()=>{de.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const t=T,l=x,o=I,s=_,i=r("FilePreview"),C=r("ProPageWrap");return d(),n(C,null,{default:c((()=>{var e;return[u("div",F,[u("div",E,m(`${p(v)[p(se)]}手机号验证 ${p(B)(p(Z).mobile||"")}`),1),f(o,{ref_key:"formRef",ref:ee,"validate-method":"toast",model:p(Z)},{default:c((()=>[b(f(t,{modelValue:p(Z).mobile,"onUpdate:modelValue":a[0]||(a[0]=e=>p(Z).mobile=e),label:"被保人手机号",name:"mobile",maxlength:"11",required:""},null,8,["modelValue"]),[[y,!1]]),f(l,{modelValue:p(Z).verifyCode,"onUpdate:modelValue":a[1]||(a[1]=e=>p(Z).verifyCode=e),"related-name":"mobile",label:" ",maxlength:"6","input-align":"left",placeholder:"请输入验证码",name:"verifyCode",rules:[{required:!0,message:"请输入验证码"}],"send-s-m-s-code":p(h),"check-s-m-s-code":p(g)},null,8,["modelValue","send-s-m-s-code","check-s-m-s-code"])])),_:1},8,["model"]),M,u("div",O,[u("img",{src:p(S),alt:""},null,8,D)]),R,u("div",W,[(null==(e=p(le))?void 0:e.length)?(d(),n($,{key:0,modelValue:p(te),"onUpdate:modelValue":a[2]||(a[2]=e=>j(te)?te.value=e:null),"attachment-list":p(le),"has-bg-color":!1,"is-show-radio":"","pre-text":"本人同意利安人寿采集本人人脸信息，用于向国家法规许可的验证机构进行本人身份验证。本人已仔细阅读并知晓","suffix-text":"，并同意授权。",onPreviewFile:a[3]||(a[3]=()=>oe.value=!0)},null,8,["modelValue","attachment-list"])):w("",!0)]),u("div",G,[f(s,{type:"primary",class:"submit-btn",onClick:re},{default:c((()=>[N("同意拍摄")])),_:1})]),p(oe)?(d(),n(i,{key:0,show:p(oe),"onUpdate:show":a[4]||(a[4]=e=>j(oe)?oe.value=e:null),"content-list":p(le),"is-only-view":"","active-index":0,text:"我已阅读","force-read-cound":0,onSubmit:a[5]||(a[5]=()=>oe.value=!1),onOnCloseFilePreviewByMask:a[6]||(a[6]=()=>oe.value=!1)},null,8,["show","content-list"])):w("",!0)])]})),_:1})}}}),[["__scopeId","data-v-10219460"]]);export{H as default};

import{_ as e,d as a,cw as t,i as s,h as r,ah as o,j as c,az as i,l as n,o as d,c as l,a as u,u as p,F as y,b as v,f,p as N,w as m,a8 as w,cF as b,cG as T,aa as h,af as I,aj as j,av as g,aw as z}from"./index-e5e6a3c6.js";const C=e=>(g("data-v-7f7920c1"),e=e(),z(),e),_={class:"page-verify-face"},F={class:"result-content"},k=C((()=>u("h4",null,"人脸识别验证失败",-1))),q=C((()=>u("p",{class:"desc"},"请保持在检测框内",-1))),x={class:"operate-btn"},U={key:1},E=a({name:"verifyFace"});var P=e(a({...E,setup(e){const a=t(),g=s(),z=r(),{isFirst:C,tenantId:E,objectType:P,orderNo:S,biz_id:B,nextPageCode:L}=g.query,$=a.get(`${o}_orderDetail`),A=c(),D=c(!0),G=()=>{const{userName:e,certiNo:a,certType:t}=A.value,s={tenantId:E,faceAuthMode:"TENCENT",callbackUrl:window.location.href.replace("isFirst=1","isFirst=0"),bizNo:S,userName:e,certiNo:a,certType:t};b(s).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))};i((()=>{const{holder:e,insuredList:a}=$;if("holder"===P){const{name:a,certNo:t,certType:s,id:r}=e;A.value={userName:a,certiNo:t,certType:s,objectId:r}}else{const{name:e,certNo:t,certType:s,id:r}=(null==a?void 0:a[0])||{};A.value={userName:e,certiNo:t,certType:s,objectId:r}}"1"===C&&G(),B&&(()=>{const{userName:e,objectId:a,certType:t}=A.value,s={bizId:B,certType:t,objectId:a,objectType:`${P}`.toLocaleUpperCase(),orderNo:S,tenantId:E};T(s).then((({code:e,data:a})=>{"10000"===e&&"SUCCESS"===a.status?(delete g.query.biz_id,delete g.query.nextPageCode,z.push({path:h.infoPreview,query:g.query})):D.value=!1}))})()}));const M=c();return n((()=>{setTimeout((async()=>{M.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const t=I,s=j;return d(),l("div",_,[u("div",F,[p(D)?f("",!0):(d(),l(y,{key:0},[v(t,{name:"wrong","font-size":"52px",color:"var(--van-primary-color)"}),k],64)),q]),u("div",x,[p(D)?(d(),l("span",U,"人脸识别中...")):(d(),N(s,{key:0,type:"primary",onClick:G},{default:m((()=>[w("再试一次")])),_:1}))])])}}}),[["__scopeId","data-v-7f7920c1"]]);export{P as default};

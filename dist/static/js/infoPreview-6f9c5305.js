import{d as e,o as a,c as t,b as o,w as n,F as s,n as i,l,a as r,u as c,a6 as d,q as u,cm as m,aE as p,a4 as f,a5 as y,h,g as v,r as I,i as k,av as g,m as _,ac as j,a0 as w,cn as P,ad as C,f as L,a8 as V,aC as b,aB as D,bk as x,aa as E,aq as S,ae as N}from"./index-f919c47f.js";import{_ as R,a as q}from"./PolicyInfo-a974ff18.js";import{g as A,m as O}from"./trial-b8186cae.js";import{n as U}from"./nextStep-e377dfe1.js";import{c as F}from"./product-6a7e7612.js";import{u as M}from"./useOrder-220ede06.js";import{P as T,a as Y}from"./constants-fe95ef6f.js";import{P as $}from"./index-614dd67e.js";import{P as J}from"./index-6f2d4c5f.js";import{R as Q,c as z}from"./trial-33474385.js";import{a as B}from"./utils-394f97a4.js";import{I as G}from"./insuranceNotificationInformation-0f85dda7.js";import"./core-3a48e1af.js";import"./cloneDeep-38d03c69.js";import"./lodash-b211663e.js";import"./infoCollection-a69ca12a.js";import"./questionnaire-62331097.js";import"./util-332338db.js";import"./index-c449646c.js";import"./index-6eca66f3.js";const K={class:"com-insured-part-wrapper"},W={class:"content-wrapper"},H={class:"risk-item"},X=e({__name:"InsureInfo",props:{productData:{default:()=>[]},totalPremium:{default:0}},setup:e=>(e,f)=>{const y=m,h=p;return a(),t("div",K,[o(h,{title:"保障信息","show-icon":!1},{default:n((()=>[(a(!0),t(s,null,i(e.productData,(e=>(a(),t(s,{key:e.productCode},[(a(!0),t(s,null,i(e.riskList,(e=>(a(),l(h,{key:e.riskCode,title:e.riskName},{default:n((()=>{var n;return[r("div",W,[r("div",H,[e.riskType===c(Q).MAIN_RISK?(a(),t(s,{key:0},[o(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])],64)):(a(),t(s,{key:1},[o(y,{title:e.riskName,content:"投保"},null,8,["title"]),e.exemptFlag===c(d).YES?(a(),l(y,{key:0,title:"交费期间",content:e.chargePeriodDesc},null,8,["content"])):(null==(n=e.liabilityList)?void 0:n.length)?(a(),t(s,{key:1},[o(y,{title:"保障期间",content:e.coveragePeriodDesc},null,8,["content"]),o(y,{title:"交费期间",content:e.chargePeriodDesc},null,8,["content"]),o(y,{title:"交费方式",content:c(z)[e.paymentFrequency]},null,8,["content"])],64)):u("",!0)],64)),o(y,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(y,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])])]})),_:2},1032,["title"])))),128))],64)))),128))])),_:1})])}});const Z={class:"long-info-preview"},ee={class:"insurance-notification-information card"},ae={class:"footer-btn"},te=r("span",null,"分享",-1),oe=e({__name:"infoPreview",setup(e){const d=f((()=>y((()=>import("./index-fd3d64e2.js")),["static/js/index-fd3d64e2.js","static/css/index-fa4edf2a.css","static/js/index-f919c47f.js","static/css/index-3d26afdd.css","static/js/theme-94cf7d00.js","static/js/index-6f2d4c5f.js","static/css/index-bbfdd7ec.css","static/js/utils-f772ac3e.js","static/js/infoCollection-a69ca12a.js","static/js/trial-33474385.js"])));f((()=>y((()=>import("./index-ad77a56d.js")),["static/js/index-ad77a56d.js","static/css/index-cb73c937.css","static/js/index-f919c47f.js","static/css/index-3d26afdd.css"])));const m=h(),Q=v(),z=M(),K={holder:T.holderSign,insured:T.insuredSign,agent:T.agentSign},{productCode:W="",tenantId:H,agentCode:oe="",agencyCode:ne,saleChannelId:se,isShare:ie,orderNo:le,extraInfo:re,insurerCode:ce,objectType:de="1",preview:ue}=m.query;let me={};try{me=JSON.parse(decodeURIComponent(re))}catch(Le){}const pe=I({isView:!1,personalInfo:{},policyInfo:{schema:[],config:[],formData:{}},payInfo:{schema:[],config:[],formData:[]},customerQuestions:[]}),fe=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,ye=k({imgUrl:"",desc:"",title:"",link:fe}),he=k(),ve=k(),Ie=k(!1);k(0);const ke=k(!1),ge=k(),_e=()=>{U(z.value,((e,a)=>{a===b.JUMP_PAGE&&ge.value.handleShare()}))},je=async()=>{ue?D(Y.INFO_PREVIEW,m.query):Q.push({path:K[de],query:m.query})},we=k(),Pe=k(),Ce=k([]);return g((()=>{(async()=>{let e={};const{code:a,data:t}=await A({orderNo:le,tenantId:H});"10000"===a&&(Object.assign(z.value,t),e=B(t.insuredList[0].productList),we.value=t,ke.value=!0),F(e).then((({code:e,data:a})=>{var t,o;"10000"===e&&(Ce.value=null==(o=null==(t=a.riskMaterialList)?void 0:t[0])?void 0:o.productMaterialList)})),O(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:t}=e;Pe.value=t;const{payInfo:o,other:n}=x(t);pe.payInfo={...pe.payInfo,...o},pe.policyInfo={...pe.policyInfo,...n}}}))})()})),(e,m)=>{var f,y;const h=E,v=S,I=p,k=N;return a(),t("div",Z,[o(h),o(X,{"product-data":null==(y=null==(f=c(z).insuredList)?void 0:f[0])?void 0:y.productList},null,8,["product-data"]),c(Pe)?(a(),l($,{key:0,ref_key:"personalInfoRef",ref:ve,modelValue:c(we),"onUpdate:modelValue":m[0]||(m[0]=e=>_(we)?we.value=e:null),"product-factor":c(Pe),"is-view":""},null,8,["modelValue","product-factor"])):u("",!0),c(pe).payInfo.schema.length?(a(),l(c(R),{key:1,ref_key:"payInfoRef",ref:he,modelValue:c(z).tenantOrderPayInfoList,"onUpdate:modelValue":m[1]||(m[1]=e=>c(z).tenantOrderPayInfoList=e),schema:c(pe).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):u("",!0),c(pe).policyInfo.schema.length?(a(),l(c(q),{key:2,modelValue:c(z),"onUpdate:modelValue":m[2]||(m[2]=e=>_(z)?z.value=e:null),schema:c(pe).policyInfo.schema,"is-view":""},null,8,["modelValue","schema"])):u("",!0),r("div",ee,[o(G,{title:"投保告知信息",data:c(pe).customerQuestions||[]},null,8,["data"])]),o(I,{title:"产品资料","show-line":!1,"show-icon":!1},{default:n((()=>[(a(!0),t(s,null,i(c(Ce),((e,t)=>(a(),l(v,{key:t,"is-link":"",label:e.materialName,onClick:e=>{Ie.value=!0}},null,8,["label","onClick"])))),128))])),_:1}),r("div",ae,[!c(ie)&&c(ye).isShare&&c(j)()?(a(),l(C,w({key:0},c(ye),{class:"share-btn",onClick:P(_e,["stop"])}),{default:n((()=>[o(k,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),te])),_:1},16,["onClick"])):u("",!0),o(J,{shadow:!1,onClick:je},{default:n((()=>[L(e.$slots,"default",{},(()=>[V("下一步")]))])),_:3})]),o(c(d))])}}});export{oe as default};

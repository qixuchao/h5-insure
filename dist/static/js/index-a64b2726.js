var G=Object.defineProperty;var z=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var J=(e,s,n)=>s in e?G(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,H=(e,s)=>{for(var n in s||(s={}))K.call(s,n)&&J(e,n,s[n]);if(z)for(var n of z(s))Q.call(s,n)&&J(e,n,s[n]);return e};import{g as W,r as u,k as l,m as p,y as o,B as E,I as F,z as X,d as M,n as r,s as Y,h as C,a2 as x,a3 as ee,C as d,a0 as ae,ag as se,a4 as U,M as te,j as g,G as m,H as y,F as A,E as O,J as q}from"./vendor-e9263418.js";import{S as ne,f as le,b as ie,u as oe}from"./index-b8742a0a.js";import{_ as de}from"./index-006f34ce.js";import{_ as ue}from"./index-e4c11be9.js";import{_ as re}from"./index-a8989421.js";import{W as ce,T as me}from"./index-efd240d0.js";import{Z as ye,g as ve,a as pe,b as he}from"./daily-f7fbbe99.js";import{_ as R}from"./plugin-vue_export-helper-46f75680.js";import{_ as ge}from"./index-654379f5.js";import"./select-105475a6.js";import"./play-93cba0e9.js";import"./record-2e0ec2a3.js";import"./jsbridge-7ca0f033.js";const fe=e=>(x("data-v-764003ac"),e=e(),ee(),e),ke={class:"date"},_e=fe(()=>o("div",{class:"dot"},null,-1)),De={class:"body"},we={key:0,class:"dash"},Ce={key:1,class:"content"},Te={class:"van-multi-ellipsis--l2"},Se=W({props:{date:{type:String,default:""},content:{type:Array,default:()=>[]},voice:{type:Array,default:()=>[]},showDash:{type:Boolean,default:!0}},emits:["click"],setup(e,{emit:s}){const n=()=>{s("click")};return(T,S)=>{const _=u("ZaSvg");return l(),p("div",{class:"com-daily-item",onClick:n},[o("div",ke,[_e,E(" "+F(X(M)(e.date).format("YYYY-MM-DD"))+" ",1),r(_,{name:"right_arrow",class:"arrow-icon"})]),o("div",De,[e.showDash?(l(),p("div",we)):Y("",!0),e.content&&e.content[0]?(l(),p("div",Ce,[o("div",Te,F(e.content[0]),1)])):Y("",!0),e.voice&&e.voice[0]?(l(),C(ye,{key:2,url:e.voice[0].voiceUrl,duration:e.voice[0].voiceDuration},null,8,["url","duration"])):Y("",!0)])])}}});var Ie=R(Se,[["__scopeId","data-v-764003ac"]]);const $e={class:"com-team-person-item"},be={class:"left"},Le={class:"name"},Pe={key:0,class:"short-code"},Ne={class:"right"},Fe={class:"progress"},Ee=E(" \u5DF2\u5B8C\u6210 "),Be={class:"days"},Ve=E(" \u5929 "),Ze=W({props:{teamName:{type:String,default:""},userName:{type:String,default:""},levelUs:{type:String,default:""},nvm:{type:Number,default:0}},setup(e){return(s,n)=>(l(),p("div",$e,[o("div",be,[o("div",Le,F(e.userName),1),e.levelUs?(l(),p("div",Pe,F(e.levelUs),1)):Y("",!0)]),o("div",Ne,[o("div",Fe,[Ee,o("span",Be,F(e.nvm),1),Ve])])]))}});var Ue=R(Ze,[["__scopeId","data-v-2fb9d8cc"]]);const Ye=new ne({source:"localStorage"}),j=le(),v=Ye.get("userInfo")||{},Ae=W({components:{ZaTab:de,ZaSvg:ie,ZaLoading:ge,ZaAgencySelect:re,WeekChange:ce,PersonalDailyItem:Ie,TeamDailyItem:me,TeamPersonItem:Ue,ZaEmpty:ue},beforeRouteEnter(e,s){["/addDaily","/teamDaily"].includes(s.path)||j.dailyWeekRangeReset()},setup(){const{getIconUrl:e}=oe(),s=d(!1),n=d(!1),T=d([]),S=d([]),_=d([]),I=ae(),D=d("daily"),{dailyWeekRange:i}=se(j),w=d(0),$=d({}),f=d(!1),h=d(!1),b=d(!1);let L=1;const B=d(!1);let k=1;const V=d(!1),a=sessionStorage.getItem("daily_week");a&&(i.value=JSON.parse(a),sessionStorage.removeItem("daily_week"));const P=d([{slotName:"1",title:"\u4E2A\u4EBA"},{slotName:"2",title:"\u56E2\u961F"}]),Z=t=>{t===1&&(h.value=!0),t?L=t:L+=1,ve({pageNum:L,pageSize:5,queryBean:{beginTime:i.value[0],endTime:i.value[1]}}).then(c=>{T.value=L===1?c.data.data.list:[...T.value,...c.data.data.list],b.value=T.value.length>=c.data.data.total}).finally(()=>{f.value=!1,h.value=!1})},N=t=>{t===1&&(h.value=!0),t?k=t:k+=1,D.value==="person"?pe({pageNum:k,pageSize:5,queryBean:{beginTime:i.value[0],endTime:i.value[1],agencyId:$.value.agencyId}}).then(c=>{S.value=k===1?c.data.data.list:[...S.value,...c.data.data.list],V.value=S.value.length>=c.data.data.total}).finally(()=>{f.value=!1,h.value=!1}):he({pageNum:k,pageSize:5,queryBean:{beginTime:i.value[0],endTime:i.value[1],agencyId:$.value.agencyId}}).then(c=>{_.value=k===1?c.data.data.list:[..._.value,...c.data.data.list],B.value=_.value.length>=c.data.data.total}).finally(()=>{f.value=!1,h.value=!1})};return U(()=>i.value,t=>{w.value===0?Z(1):N(1)}),U(()=>D.value,()=>{N(1)}),U(()=>$.value,()=>{N(1)}),te(()=>{(v==null?void 0:v.userType)==="I"||(v==null?void 0:v.userType)==="O"&&(v==null?void 0:v.agentLevel)<=80?P.value.splice(0,0):P.value.splice(1,1),n.value=window.location.host.includes("localhost"),Z(1)}),U(()=>w.value,t=>{t===0?Z(1):N(1)}),{groupSelectVisible:s,showHeader:n,personalList:T,teamPersonalList:S,teamDailyList:_,teamViewType:D,week:i,activeTabIndex:w,tabList:P,loading:f,firLoading:h,personDailyFinished:b,teamDailyFinished:B,teamPersonFinished:V,handleSearchClick:()=>{s.value=!0},handleAgencySubmit:t=>{$.value=H({},t[0])},handleTabClick:t=>{w.value=t.name},addDaily:()=>{I.push(`/addDaily?userId=${v.userId}`)},handleViewTypeClick:()=>{D.value=D.value==="person"?"daily":"person"},handlePersonDailyItemClick:t=>{sessionStorage.setItem("daily_week",JSON.stringify(i.value)),I.push(`/editDaily?id=${t.dailyId}&date=${M(t.workDay).format("YYYY-MM-DD")}&userId=${t.userId}&isPersonal=true`)},handleTeamDailyClick:t=>{sessionStorage.setItem("daily_week",JSON.stringify(i.value)),I.push(`/editDaily?id=${t.dailyId}&isView=1&userId=${t.userId}&userName=${t.userName}&date=${M(t.workDay).format("YYYY-MM-DD")}`)},handleTeamPersonClick:t=>{sessionStorage.setItem("daily_week",JSON.stringify(i.value)),I.push(`/teamDaily?id=${t.userId}&userName=${t.userName}&teamName=${t.teamName}&startTime=${i.value[0]}&endTime=${i.value[1]}`)},getIconUrl:e,getPersonData:Z,getTeamData:N}}}),Oe={class:"tab-wrapper"},Me={class:"personal-list-wrapper"},We=E("\u586B\u5199\u5DE5\u4F5C\u65E5\u5FD7"),Re={class:"footer"},ze=E("\u586B\u5199\u5DE5\u4F5C\u65E5\u5FD7"),Je=["src"],He={class:"team-list-wrapper"},qe={class:"team-list-wrapper"};function je(e,s,n,T,S,_){const I=u("WeekChange"),D=u("ZaSvg"),i=u("ZaAgencySelect"),w=u("ZaLoading"),$=u("PersonalDailyItem"),f=u("van-list"),h=u("van-button"),b=u("ZaEmpty"),L=u("TeamDailyItem"),B=u("TeamPersonItem"),k=u("ZaTab"),V=u("ZaPageWrap");return l(),C(V,{"main-class":"page-daily","footer-class":"page-daily-footer"},{default:g(()=>[r(I,{modelValue:e.week,"onUpdate:modelValue":s[0]||(s[0]=a=>e.week=a)},null,8,["modelValue"]),o("div",Oe,[m(r(D,{name:"search_new",class:"search",onClick:e.handleSearchClick},null,8,["onClick"]),[[y,e.activeTabIndex===1]]),r(i,{visible:e.groupSelectVisible,"onUpdate:visible":s[1]||(s[1]=a=>e.groupSelectVisible=a),mode:"single",onOnSubmit:e.handleAgencySubmit},null,8,["visible","onOnSubmit"]),r(k,{tablist:e.tabList,shrink:"",sticky:"",animated:"",onOnTabClick:e.handleTabClick},{"1":g(()=>[e.firLoading?(l(),C(w,{key:0,vertical:!0})):(l(),p("div",{key:1,class:q(["personal",{"show-header":e.showHeader}])},[o("div",Me,[m(r(f,{loading:e.loading,"onUpdate:loading":s[2]||(s[2]=a=>e.loading=a),class:"personal-list",finished:e.personDailyFinished,"immediate-check":!1,onLoad:e.getPersonData},{default:g(()=>[(l(!0),p(A,null,O(e.personalList,a=>(l(),C($,{key:a.dailyId,date:a.workDay,content:a.textList,voice:a.voiceDTOList,"show-dash":e.personalList.length>1,onClick:P=>e.handlePersonDailyItemClick(a)},null,8,["date","content","voice","show-dash","onClick"]))),128))]),_:1},8,["loading","finished","onLoad"]),[[y,e.personalList.length>0]]),m(r(b,{title:"\u6682\u65E0\u5DE5\u4F5C\u65E5\u5FD7",desc:"\u60F3\u5199\u70B9\u4EC0\u4E48\uFF1F\u70B9\u51FB\u586B\u5199\u8BB0\u5F55\u4E0B\u6765",class:"empty"},{emptyBtn:g(()=>[r(h,{class:"empty-btn",round:"",onClick:e.addDaily},{default:g(()=>[We]),_:1},8,["onClick"])]),_:1},512),[[y,e.personalList.length===0]])]),m(o("div",Re,[r(h,{class:"btn",onClick:e.addDaily},{default:g(()=>[ze]),_:1},8,["onClick"])],512),[[y,e.personalList.length>0]])],2))]),"2":g(()=>[e.firLoading?(l(),C(w,{key:0,vertical:!0})):(l(),p("div",{key:1,class:q(["team",{"show-header":e.showHeader}])},[o("div",{class:"view-type",onClick:s[3]||(s[3]=(...a)=>e.handleViewTypeClick&&e.handleViewTypeClick(...a))},[o("img",{src:e.teamViewType==="person"?e.getIconUrl("daily.viewTypeDailyImage"):e.getIconUrl("daily.viewTypePersonImage")},null,8,Je)]),m(o("div",He,[m(r(f,{loading:e.loading,"onUpdate:loading":s[4]||(s[4]=a=>e.loading=a),class:"team-list",finished:e.teamDailyFinished,"immediate-check":!1,onLoad:e.getTeamData},{default:g(()=>[(l(!0),p(A,null,O(e.teamDailyList,a=>(l(),C(L,{key:a.dailyId,"work-day":a.workDay,"modify-time":a.gmtModified,"user-name":a.userName,"team-name":a.teamName,content:a.textList,voice:a.voiceDTOList,"show-dash":e.teamDailyList.length>1,onClick:P=>e.handleTeamDailyClick(a)},null,8,["work-day","modify-time","user-name","team-name","content","voice","show-dash","onClick"]))),128))]),_:1},8,["loading","finished","onLoad"]),[[y,e.teamDailyList.length>0]]),m(r(b,{title:"\u6682\u65E0\u5DE5\u4F5C\u65E5\u5FD7",class:"empty"},null,512),[[y,e.teamDailyList.length===0]])],512),[[y,e.teamViewType==="daily"]]),m(o("div",qe,[m(r(f,{loading:e.loading,"onUpdate:loading":s[5]||(s[5]=a=>e.loading=a),class:"team-list",finished:e.teamPersonFinished,"immediate-check":!1,onLoad:e.getTeamData},{default:g(()=>[(l(!0),p(A,null,O(e.teamPersonalList,a=>(l(),C(B,{key:a.userId,"team-name":a.teamName,nvm:a.nvm,"user-name":a.userName,"level-us":a.levelUs,onClick:P=>e.handleTeamPersonClick(a)},null,8,["team-name","nvm","user-name","level-us","onClick"]))),128))]),_:1},8,["loading","finished","onLoad"]),[[y,e.teamPersonalList.length>0]]),m(r(b,{title:"\u6682\u65E0\u5DE5\u4F5C\u65E5\u5FD7",class:"empty"},null,512),[[y,e.teamPersonalList.length===0]])],512),[[y,e.teamViewType==="person"]])],2))]),_:1},8,["tablist","onOnTabClick"])])]),_:1})}var ga=R(Ae,[["render",je],["__scopeId","data-v-4c2c8aae"]]);export{ga as default};

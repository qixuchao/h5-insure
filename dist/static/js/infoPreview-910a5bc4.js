import{G as e,d as t,c as a,A as n,i as o,w as r,f as s,U as i,V as l,E as d,g as c,e as u,W as p,bl as f,X as m,Y as I,u as y,z as v,r as h,L as O,Z as P,o as _,b,h as j,aV as g,aW as V,a9 as L,by as C,k as w,j as x,P as k,n as E,p as S,a3 as N,aa as R}from"./index-866b20e6.js";import{t as A}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-670693a2.js";/* empty css              */import"./bankCard-2324425a.js";import{_ as T}from"./PayInfo-0082abba.js";import{g as q,i as F}from"./trial-1741ac66.js";import{n as U}from"./nextStep-1f2af9ab.js";import{u as D}from"./useAttachment-d02ba101.js";import{a as W,q as $}from"./product-fa59502f.js";import{g as B}from"./utils-52dd3fc3.js";import{u as Y}from"./useOrder-dbb3169a.js";import{P as G,B as J}from"./constants-7afb7c3d.js";import{a as M}from"./index-a67cbea3.js";import{P as z}from"./index-788578e1.js";import{I as H,P as X,d as Q}from"./trial-2758f0e6.js";import"./pdfh5-008ca364.js";import"./phoneVerify-80387f1c.js";import"./_initCloneObject-0663309f.js";import"./isObjectLike-a9798079.js";import"./debounce-eed12388.js";import"./index-cf8e535d.js";import"./index-80f42e74.js";import"./core-c47b508f.js";import"./constant-8927d485.js";import"./infoCollection-1b3da20a.js";import"./cloneDeep-1de8e9b0.js";const Z={class:"com-insured-part-wrapper"},K={class:"content-wrapper"};var ee=e(t({__name:"InsureInfo",props:{productData:{default:()=>({})}},setup(e){const t=(e,t)=>-1!==t.indexOf("$")?t.replace("$",`${e}`):`${e||""}${t}`;return(m,I)=>{const y=p,v=f;return a(),n("div",Z,[o(v,{title:"保障信息"},{default:r((()=>{var r;return[s("div",K,[(a(!0),n(i,null,l((null==(r=e.productData)?void 0:r.tenantOrderRiskList)||[],((e,r)=>(a(),n("div",{key:r,class:"risk-item"},[s("p",null,d(e.riskName),1),o(y,{title:"保障期间",content:t(e.insurancePeriodValue,c(H)[e.insurancePeriodType])},null,8,["content"]),o(y,{title:"交费期间",content:t(e.paymentPeriod,c(X)[e.paymentPeriodType])},null,8,["content"]),o(y,{title:"交费方式",content:c(Q)[e.paymentFrequency]},null,8,["content"]),(a(!0),n(i,null,l(e.liabilityDetails,((e,t)=>(a(),u(y,{key:t,title:e.liabilityName,content:"投保"},null,8,["title"])))),128)),o(y,{title:"保障金额",content:(e.initialAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(y,{title:"首期保费",class:"price",content:(e.initialPremium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])))),128))])]})),_:1})])}}}),[["__scopeId","data-v-4bdbacf9"]]);const te={class:"long-info-preview"},ae={class:"footer-btn"},ne=s("span",null,"分享",-1),oe=t({__name:"infoPreview",setup(e){m((()=>I((()=>import("./index-3fd20e0b.js")),["static/js/index-3fd20e0b.js","static/css/index-fa4edf2a.css","static/js/index-866b20e6.js","static/css/index-491aafee.css","static/js/pdfh5-008ca364.js","static/js/index-788578e1.js","static/css/index-827a8544.css","static/js/utils-52dd3fc3.js","static/js/infoCollection-1b3da20a.js","static/js/trial-2758f0e6.js"]))),m((()=>I((()=>import("./index-884af5f2.js")),["static/js/index-884af5f2.js","static/css/index-3329e46f.css","static/js/index-866b20e6.js","static/css/index-491aafee.css","static/js/pdfh5-008ca364.js"])));const t=y(),n=Y(),{productCode:i="",tenantId:l,agentCode:d="",agencyCode:p,saleChannelId:f,isShare:H,orderNo:X,extraInfo:Q,insurerCode:Z,preview:K}=t.query;let oe={};try{oe=JSON.parse(decodeURIComponent(Q))}catch(_e){}const re=v({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),se=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,ie=h({imgUrl:"",desc:"",title:"",link:se}),le=h(),de=h(),ce=h({}),ue=h({}),pe=h([]),fe=h(),me=h({});h(!1),h(!1),h(0),h(!0),D(me,fe),h(!1);const Ie=h(!1);h(),O((()=>{var e,t;const{insureProductRiskVOList:a}=(null==(t=null==(e=ue.value)?void 0:e.productPlanInsureVOList)?void 0:t[0])||{};return(a||[]).find((e=>e.mainRiskFlag===P.YES))}));const ye=h(),ve=()=>{U(n.value,((e,t)=>{t===k.JUMP_PAGE&&ye.value.handleShare()}))},he=async()=>{K?E(G.INFO_PREVIEW,t.query):(Object.assign(n.value,{extInfo:{...n.value.extInfo,buttonCode:J.INFO_PREVIEW,pageCode:G.INFO_PREVIEW}}),U(n.value,((e,a)=>{a===k.JUMP_PAGE&&S(e.nextPageCode,t.query)})))},Oe=v({tenantOrderPayInfoList:[]}),Pe=async()=>{W({productCode:i,tenantId:l}).then((({data:e,code:t})=>{if("10000"===t){ce.value=e;const{wxShareConfig:t,showWXShare:a,title:n,desc:o,image:r}=(null==e?void 0:e.PRODUCT_LIST)||{};a?Object.assign(ie.value,{...t,isShare:a}):Object.assign(ie.value,{title:n,desc:o,image:r,isShare:a}),N(e.BASIC_INFO.themeType)}})),X&&q({orderNo:X,tenantId:l}).then((({code:e,data:t})=>{"10000"===e&&(Oe.tenantOrderPayInfoList=t.tenantOrderPayInfoList,Object.assign(n.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),(()=>{const e={},{tenantOrderHolder:t,tenantOrderInsuredList:a}=n.value;e.holder={personVO:{...t,...t.extInfo}},e.insuredVOList=(a||[]).map((e=>({personVO:{...e,...e.extInfo,beneficiaryList:e.tenantOrderBeneficiaryList.map((e=>({personVO:e})))}}))),re.personalInfo=e})(),Ie.value=!0)})),$({productCode:i}).then((({code:e,data:t})=>{var a,n,o,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:s}=t;fe.value=e||[];const{basicInfo:{questionnaireType:i},questions:l,questionnaireName:d}=(null==(a=null==s?void 0:s[0])?void 0:a.questionnaireDetailResponseVO)||{basicInfo:{}};i&&(pe.value=2===i?[{attachmentName:d,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(n=null==l?void 0:l[0])?void 0:n.content,attachmentType:B(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(r=null==l?void 0:l[0])?void 0:r.content)}])}})),await F({productCode:i,isTenant:!K}).then((({data:e,code:t})=>{var a,n;if("10000"===t){ue.value=e,me.value=(null==(a=e.productPlanInsureVOList)?void 0:a[0])||{};const{payInfo:t}=A(null==(n=me.value)?void 0:n.productFactor);re.payInfo={...re.payInfo,...t}}}))};return _((()=>{Pe()})),(e,t)=>{const i=R,l=b("ProPageWrap");return a(),u(l,null,{default:r((()=>{var l,d,p,f,m,I;return[s("div",te,[o(ee,{"product-data":null==(p=null==(d=null==(l=c(n).tenantOrderInsuredList)?void 0:l[0])?void 0:d.tenantOrderProductList)?void 0:p[0]},null,8,["product-data"]),(null==(f=c(me))?void 0:f.productFactor)?(a(),u(c(M),{key:0,ref_key:"personalInfoRef",ref:de,modelValue:c(re).personalInfo,"onUpdate:modelValue":t[0]||(t[0]=e=>c(re).personalInfo=e),"product-factor":null==(m=c(me))?void 0:m.productFactor,"multi-insured-config":null==(I=c(me))?void 0:I.multiInsuredConfigVO,"is-view":""},null,8,["modelValue","product-factor","multi-insured-config"])):j("",!0),c(re).payInfo.schema.length?(a(),u(c(T),{key:1,ref_key:"payInfoRef",ref:le,modelValue:c(Oe).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>c(Oe).tenantOrderPayInfoList=e),schema:c(re).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):j("",!0),s("div",ae,[!c(H)&&c(ie).isShare&&c(g)()?(a(),u(V,L({key:0},c(ie),{class:"share-btn",onClick:C(ve,["stop"])}),{default:r((()=>[o(i,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),ne])),_:1},16,["onClick"])):j("",!0),o(z,{shadow:!1,onClick:he},{default:r((()=>[w(e.$slots,"default",{},(()=>[x("下一步")]))])),_:3})])])]})),_:3})}}});export{oe as default};

!function(){var e=document.createElement("style");e.innerHTML=".com-product-list-wrapper .content[data-v-cd47605e]{padding:0 var(--zaui-card-border, .4rem)}.com-product-list-wrapper .premium-total[data-v-cd47605e]{padding:0 var(--zaui-card-border, .4rem);font-size:.34667rem;font-weight:400;color:#333;margin:.26667rem 0 .4rem}.com-product-list-wrapper .premium-total .premium[data-v-cd47605e]{color:var(--zaui-price, #ff5840);font-weight:600}.com-product-list-wrapper .risk-item-wrapper[data-v-cd47605e]{margin:var(--zaui-card-border, .4rem);background-color:#f6f6fa;border-radius:.26667rem}.com-product-list-wrapper .risk-item-wrapper[data-v-cd47605e] .card-title .van-cell{background-color:#f6f6fa;padding-bottom:0;border-radius:.26667rem}.com-product-list-wrapper .risk-item-wrapper[data-v-cd47605e] .card-title:after{display:none}.com-product-list-wrapper .risk-item-wrapper .premium[data-v-cd47605e]{color:var(--zaui-price, #ff5840);font-weight:600}.com-product-list-wrapper .risk-item-wrapper .risk-premium[data-v-cd47605e]{color:#333;font-weight:400;font-size:.34667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor[data-v-cd47605e]{display:flex;justify-content:space-between;margin-bottom:.26667rem;border-bottom:1px dashed #EEEFF4}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor[data-v-cd47605e]{display:flex;flex-direction:column;align-items:center;padding:.37333rem 0 .26667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor .factor-value[data-v-cd47605e]{width:100%;text-align:center;font-size:.37333rem;font-family:Arial-BoldMT,Arial,self;font-weight:400;color:#393d46;line-height:.42667rem;margin-bottom:.10667rem}.com-product-list-wrapper .risk-item-wrapper .risk-factor .factor .factor-name[data-v-cd47605e]{width:100%;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC,serif;font-weight:400;color:#99a9c0;line-height:.44rem}.com-product-list-wrapper .risk-item-wrapper .operate-bar[data-v-cd47605e]{display:flex;align-content:center;justify-content:flex-end;padding-bottom:.26667rem}.com-product-list-wrapper .risk-item-wrapper .operate-bar .border[data-v-cd47605e]{border:.02667rem solid #e6e6eb}.com-product-list-wrapper .risk-item-wrapper .operate-bar[data-v-cd47605e] .com-check-btn{margin-left:.21333rem;background-color:#fff}.com-product-list-wrapper .risk-item-wrapper .operate-bar .btn-rider-risk[data-v-cd47605e]{display:flex;align-items:center}.com-product-list-wrapper .risk-item-wrapper .operate-bar .btn-rider-risk .btn-plus[data-v-cd47605e]{font-size:.48rem;margin:0 .13333rem .13333rem}.page-create-wrapper[data-v-4f24fb6d]{background-color:var(--zaui-global-bg, #f2f5fc)}.page-create-wrapper .border-radius[data-v-4f24fb6d]{border-radius:var(--zaui-border-radius-card, .26667rem)}.page-create-wrapper .border-radius .plan-name[data-v-4f24fb6d]{font-weight:600}.page-create-wrapper[data-v-4f24fb6d] .com-card-wrap{border-radius:var(--zaui-border-radius-card, .26667rem)}.page-create-wrapper[data-v-4f24fb6d] .com-card-wrap .body{padding:0}.page-create-wrapper .container[data-v-4f24fb6d]{padding:.4rem .4rem 2.4rem}.page-create-wrapper .container .operate-bar[data-v-4f24fb6d]{width:100%;justify-content:center;display:flex;margin-top:.26667rem}.page-create-wrapper .container .operate-bar[data-v-4f24fb6d] .com-check-btn{height:.90667rem;width:3.2rem}.page-create-wrapper .footer-bar[data-v-4f24fb6d]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:var(--zaui-card-border, .4rem);display:flex;justify-content:space-between;align-items:center;border-top:1px solid #EEEFF4}.page-create-wrapper .footer-bar .trial-result[data-v-4f24fb6d]{width:5.86667rem;font-size:.45333rem;font-weight:400}.page-create-wrapper .footer-bar .trial-result .result-num[data-v-4f24fb6d]{margin-left:.21333rem;color:var(--zaui-price, #ff5840);font-weight:600}.page-create-wrapper .footer-bar .trial-operate button[data-v-4f24fb6d]{width:3.73333rem}\n",document.head.appendChild(e),System.register(["./vendor-legacy-acf899d3.js","./index-legacy-bc7a3b8c.js","./createProposal-legacy-75f5148a.js","./index-legacy-c3d9d445.js","./index-legacy-7e09fe60.js","./useDicData-legacy-549b966e.js","./trial-legacy-c8c1c036.js","./trial-legacy-d5c5aa16.js"],(function(e){"use strict";var r,a,t,o,d,i,s,l,p,u,c,n,m,v,f,k,g,b,h,I,w,L,y,P,R,V,C,_,j,D,x,z,O,E,T;return{setters:[function(e){r=e.g,a=e.Q,t=e.E,o=e.y,d=e._,i=e.r,s=e.j,l=e.n,p=e.F,u=e.G,c=e.z,n=e.p,m=e.J,v=e.A,f=e.k,k=e.m,g=e.t,b=e.C,h=e.a4,I=e.a5,w=e.a9,L=e.O,y=e.o,P=e.R,R=e.D},function(e){V=e.u,C=e.P},function(e){_=e.q,j=e.a,D=e.b},function(e){x=e._,z=e.R,O=e.L},function(e){E=e.R},function(e){T=e.u},function(){},function(){}],execute:function(){const F=e=>(h("data-v-cd47605e"),e=e(),I(),e),S={class:"com-product-list-wrapper"},N={class:"risk-item-wrapper"},U={class:"content"},$={class:"risk-premium"},q=b(" 保费:"),A={class:"premium"},B={class:"risk-factor"},H={class:"factor"},M={class:"factor-value"},K=F((()=>c("span",{class:"factor-name"}," 保额(元) ",-1))),G={class:"factor"},J={class:"factor-value"},Q=F((()=>c("span",{class:"factor-name"}," 保障期间 ",-1))),W={class:"factor"},Y={class:"factor-value"},X=F((()=>c("span",{class:"factor-name"}," 缴费期间 ",-1))),Z={class:"operate-bar"},ee=b("删除"),re=F((()=>c("span",{class:"btn-plus"},"+",-1))),ae=b(" 附加险"),te=b("修改"),oe={key:0,class:"premium-total"},de=b(" 保费: "),ie={class:"premium"};var se=x(r({props:{productRiskList:{default:()=>[]},productInfo:{default:()=>({})},productData:{default:()=>({})},pickProductPremium:{type:Function,default:()=>{}},productNum:{default:0}},emits:["deleteRisk","updateRisk","addRiderRisk"],setup(e,{emit:r}){const b=e,[h,I]=a(),w=t({checkedList:[],disabledList:[],riderRiskList:[],mainRiskData:{},totalPremium:0,currentRiskRecord:{},productRiskList:[]}),L=T("RISK_PAYMENT_PERIOD"),y=T("RISK_INSURANCE_PERIOD"),P=o((()=>{var e,r;return(null===(e=b.productData)||void 0===e||null===(r=e.productRiskVoList)||void 0===r?void 0:r[0].riskDetailVOList.filter((e=>1===e.collocationType)))||[]})),R=o((()=>{var e,r;const a=b.productRiskList.map((e=>e.riskId)),t=((null===(e=b.productData)||void 0===e||null===(r=e.productRiskVoList)||void 0===r?void 0:r[0].riskDetailVOList)||[]).filter((e=>a.includes(e.id)&&1===e.collocationType));return P.value.length-t.length})),V=o((()=>e=>{var r,a;const t=(null===(r=b.productData)||void 0===r||null===(a=r.productRiskVoList)||void 0===a?void 0:a[0].riskDetailVOList.find((r=>r.id!==e)))||{};let o=!1;return o=!!b.productNum||2===t.riskType&&1===t.collocationType,o})),C=o((()=>{var e,r;return(null===(e=b.productData)||void 0===e||null===(r=e.productRiskVoList)||void 0===r?void 0:r[0].riskDetailVOList.find((e=>1===e.riskType)))||{}})),_=o((()=>C.value.collocationVOList||[])),j=(e,a)=>{const t=e.map((e=>e.id)).filter((e=>!w.value.disabledList.includes(e)));r("addRiderRisk",t,b.productInfo)};return d((()=>b.productInfo),(e=>{var r;let a=0;(e.proposalProductRiskList||[]).forEach((e=>{a+=e.premium})),null===(r=b.pickProductPremium)||void 0===r||r.call(b,{[`${e.productId}`]:a}),w.value.totalPremium=a}),{deep:!0,immediate:!0}),d((()=>b.productRiskList),(e=>{const r=[],a=[],t=[];(e||[]).forEach((e=>{1===e.riskType?r.unshift(e):(a.push(e.riskId),t.push(e.riskId),r.push(e))})),w.value.disabledList=a,w.value.checkedList=t,w.value.productRiskList=r}),{deep:!0,immediate:!0}),(e,a)=>{const t=i("ProTitle"),o=i("ProCheckButton");return s(),l("div",S,[(s(!0),l(p,null,u(w.value.productRiskList,(e=>{var a,d;return s(),l("div",{key:e.riskId},[c("div",N,[n(t,{"risk-type":e.riskType,title:e.riskName,class:"no-border"},null,8,["risk-type","title"]),c("div",U,[c("div",$,[q,c("span",A,"￥"+m(null===(a=e.premium)||void 0===a?void 0:a.toLocaleString()),1)]),c("div",B,[c("div",H,[c("span",M,m(null===(d=e.amount)||void 0===d?void 0:d.toLocaleString()),1),K]),c("div",G,[c("span",J,m(v(z)(v(y),e.coveragePeriod)),1),Q]),c("div",W,[c("span",Y,m(v(z)(v(L),e.chargePeriod)),1),X])]),c("div",Z,[v(V)(e.riskId)?(s(),f(o,{key:0,round:32,class:"border",onClick:a=>{r("deleteRisk",e,b.productInfo)}},{default:k((()=>[ee])),_:2},1032,["onClick"])):g("",!0),v(R)?(s(),f(o,{key:1,activated:"",round:32,class:"btn-rider-risk",onClick:r=>{return a=e,I(!0),void(w.value.currentRiskRecord=a);var a}},{default:k((()=>[re,ae])),_:2},1032,["onClick"])):g("",!0),n(o,{activated:"",round:32,onClick:a=>{r("updateRisk",e,b.productInfo)}},{default:k((()=>[te])),_:2},1032,["onClick"])])])])])})),128)),w.value.productRiskList.length>1?(s(),l("div",oe,[de,c("span",ie,"￥"+m(w.value.totalPremium.toLocaleString()),1)])):g("",!0),v(h)?(s(),f(E,{key:1,modelValue:w.value.checkedList,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value.checkedList=e),show:v(h),disabled:w.value.disabledList,"risk-list":v(P),"collocation-list":v(_),onFinished:j,onClose:a[1]||(a[1]=e=>v(I)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):g("",!0)])}}}),[["__scopeId","data-v-cd47605e"]]);const le={class:"container"},pe=(e=>(h("data-v-4f24fb6d"),e=e(),I(),e))((()=>c("span",{class:"plan-name"},"计划书名称",-1))),ue={class:"operate-bar"},ce=b("添加主险"),ne={class:"footer-bar"},me={class:"trial-result"},ve=b("总保费"),fe={class:"result-num"},ke={class:"trial-operate"},ge=b("保存并预览"),be=r({setup(e){const r=[{name:"保存修改"},{name:"另存为新计划书"}],[b,h]=a(),[I,x]=a(),z=t({proposalHolder:{},proposalInsuredList:[{name:"",gender:"",birthday:"",proposalInsuredProductList:[]}],proposalName:"",totalPremium:0,relationUserType:2}),E=w(),T=L(),F=V(),{id:S,type:N="add",isCreateProposal:U}=T.query,$=t({productId:0,productCollection:{},productInfo:{},productPremium:{},riderRisk:{},type:"add",currentRisk:[]}),q=t();t({}),t([]),o((()=>({min:"",max:""})));const A=()=>{q.value.validate().then((()=>{D(z.value).then((({code:e,data:r})=>{"10000"===e&&(F.$reset(),F.proposalId=r,E.push({path:"/compositionProposal",query:{id:r}}))}))}))},B=()=>{!S&&F.proposalId?x(!0):A()},H=(e,r)=>{r&&(z.value.id=null),A()},M=(e,r,a)=>r?/^.{1,20}$/.test(r)?"":`${e}不能超过20个字符`:"",K=(e={})=>{Object.assign($.value.productPremium,e),z.value.totalPremium=Object.values($.value.productPremium).reduce(((e,r)=>e+r),0)},G=(e,r)=>{const a=r;R.confirm({message:"确认删除该险种？"}).then((()=>{1===e.riskType?(z.value.proposalInsuredList[0].proposalInsuredProductList=z.value.proposalInsuredList[0].proposalInsuredProductList.filter((e=>e.productId!==a.productId)),K({[a.productId]:0})):a.proposalProductRiskList=a.proposalProductRiskList.filter((r=>r.riskId!==e.riskId))}))},J=(e,r)=>{$.value.productId=r.productId,$.value.productInfo=r,$.value.type="edit",$.value.currentRisk=[e.riskId],h(!0)},Q=(e,r)=>{$.value.productId=r.productId,$.value.productInfo=r,$.value.type="addRiderRisk",$.value.currentRisk=e,h(!0)},W=e=>{z.value.proposalInsuredList[0].proposalInsuredProductList=z.value.proposalInsuredList[0].proposalInsuredProductList.map((r=>{let a=r;return r.productId===e.proposalInsuredList[0].proposalInsuredProductList[0].productId&&(a={...e.proposalInsuredList[0].proposalInsuredProductList[0]}),a})),h(!1)},Y=()=>{F.setProposalInfo(z.value),F.setTrialData([]),F.setExcludeProduct(Object.keys($.value.productCollection)),E.push({path:"/proposalList",query:{isCreateProposal:"1",...T.query}})},X=()=>{h(!1)};return y((()=>{const e=F.$state.trialData,r=F.$state.proposalInfo,a=F.$state.proposalId;S&&!U||a?(((e={})=>{_(e).then((({code:e,data:r})=>{"10000"===e&&Object.assign(z.value,r)}))})({id:S||a}),F.$reset()):!Object.keys(r).length&&e.length?Object.assign(z.value,e[0]):Object.keys(r).length&&e.length?(r.proposalInsuredList[0].proposalInsuredProductList.push(...e[0].proposalInsuredList[0].proposalInsuredProductList),z.value=r):Object.keys(r).length&&!e.length&&(z.value=r),F.setTrialData([])})),d((()=>{var e;return null===(e=z.value.proposalInsuredList[0].proposalInsuredProductList)||void 0===e?void 0:e.length}),(()=>{const e=z.value.proposalInsuredList[0].proposalInsuredProductList.map((e=>({productId:e.productId,source:2})));j({voList:e}).then((({code:e,data:r})=>{"10000"===e&&($.value.productCollection=r)})).finally((()=>{}))})),(e,a)=>{const t=i("VanField"),o=i("ProCard"),d=i("ProDatePicker"),h=i("ProRadioButton"),w=i("VanForm"),L=i("ProCheckButton"),y=i("VanButton"),R=i("VanActionSheet"),V=i("ProPageWrap");return s(),f(V,{class:"page-create-wrapper"},{default:k((()=>{var e;return[c("div",le,[n(w,{ref_key:"formRef",ref:q,"input-align":"right","error-message-align":"right"},{default:k((()=>[n(o,{"show-line":!1},{default:k((()=>[n(t,{modelValue:z.value.proposalName,"onUpdate:modelValue":a[0]||(a[0]=e=>z.value.proposalName=e),class:"border-radius",name:"proposalName",placeholder:"请输入计划书名称",rules:[{validator:(...e)=>M("计划书名称",...e)}]},{label:k((()=>[pe])),_:1},8,["modelValue","rules"])])),_:1}),n(o,{title:"被保人信息"},{default:k((()=>[n(t,{modelValue:z.value.proposalInsuredList[0].name,"onUpdate:modelValue":a[1]||(a[1]=e=>z.value.proposalInsuredList[0].name=e),name:"name",label:"姓名",rules:[{validator:(...e)=>M("姓名",...e)}],placeholder:"请输入（选填）"},null,8,["modelValue","rules"]),n(d,{modelValue:z.value.proposalInsuredList[0].birthday,"onUpdate:modelValue":a[2]||(a[2]=e=>z.value.proposalInsuredList[0].birthday=e),name:"birthday",label:"出生日期",type:"date","is-link":"",readonly:"",placeholder:"请选择",rules:[{required:!0,message:"请选择"}]},null,8,["modelValue"]),n(t,{modelValue:z.value.proposalInsuredList[0].gender,"onUpdate:modelValue":a[4]||(a[4]=e=>z.value.proposalInsuredList[0].gender=e),name:"gender",label:"性别",class:"border-radius",rules:[{required:!0,message:"请选择"}]},{input:k((()=>[n(h,{modelValue:z.value.proposalInsuredList[0].gender,"onUpdate:modelValue":a[3]||(a[3]=e=>z.value.proposalInsuredList[0].gender=e),options:v(O)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])])),_:1})])),_:1},512),(s(!0),l(p,null,u(z.value.proposalInsuredList[0].proposalInsuredProductList||[],(e=>(s(),f(o,{key:e.productId,"show-line":!1},{default:k((()=>{var r,a;return[n(se,{"product-risk-list":e.proposalProductRiskList,"product-info":e,"product-num":(null===(r=z.value.proposalInsuredList[0])||void 0===r||null===(a=r.proposalInsuredProductList)||void 0===a?void 0:a.length)-1,"product-data":$.value.productCollection[e.productId],"pick-product-premium":K,onAddRiderRisk:Q,onUpdateRisk:J,onDeleteRisk:G},null,8,["product-risk-list","product-info","product-num","product-data"])]})),_:2},1024)))),128)),c("div",ue,[n(L,{activated:"",round:34,onClick:Y},{default:k((()=>[ce])),_:1})])]),c("div",ne,[c("span",me,[ve,c("span",fe,"￥"+m(z.value.totalPremium.toLocaleString()),1)]),c("div",ke,[n(y,{type:"primary",onClick:B},{default:k((()=>[ge])),_:1})])]),v(b)?(s(),f(C,{key:0,"is-show":v(b),type:$.value.type,"rider-risk":(null===(e=$.value.riderRisk)||void 0===e?void 0:e[$.value.productId])||[],"product-data":$.value.productCollection[$.value.productId],"form-info":$.value.productInfo,holder:z.value.proposalHolder,insured:z.value.proposalInsuredList[0],"current-risk":$.value.currentRisk,onClose:X,onFinished:W},null,8,["is-show","type","rider-risk","product-data","form-info","holder","insured","current-risk"])):g("",!0),n(R,{show:v(I),"onUpdate:show":a[5]||(a[5]=e=>P(I)?I.value=e:null),actions:r,"cancel-text":"取消","close-on-click-action":"",onCancel:a[6]||(a[6]=e=>v(x)(!1)),onSelect:H},null,8,["show"])]})),_:1})}}});e("default",x(be,[["__scopeId","data-v-4f24fb6d"]]))}}}))}();

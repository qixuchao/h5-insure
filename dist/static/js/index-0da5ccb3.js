import{m as e,A as t,t as a,C as n,N as o,z as r,F as d,_ as l,E as s,u,ab as i,r as c,o as v,s as p,v as I,x as m,U as C,I as f,J as y,ad as b,H as g,d as k,D as O,T as L}from"./vendor-533c215b.js";import{d as N}from"./order-e6621e00.js";import{_,g as P,s as S,ak as Y}from"./index-3ce9a118.js";import{O as h,b as D}from"./order-6a2712b5.js";import{I as T}from"./InsuredPart-20845a45.js";import"./trial-618f0ef0.js";const j={class:"com-field-info"},x={key:0,class:"label"},E={class:"content"};var G=_(e({props:{label:{type:String,default:""},content:{type:String,default:""}},setup(e){const u=t();return(t,i)=>(a(),n("div",j,[e.label?(a(),n("div",x,o(e.label),1)):r("",!0),d(u).label?l(t.$slots,"label",{key:1},void 0,!0):r("",!0),s("div",E,o(e.content),1),d(u).content?l(t.$slots,"content",{key:2},void 0,!0):r("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const H={key:0,class:"page-order-detail"},U={class:"card"},A={class:"header"},M={class:"product-name"},W={class:"company-name"},q={class:"status"},B={key:0,class:"footer-button"},F=g("删除"),X=g("去处理"),Z={key:1,class:"footer-button"},$=g("删除"),z=g("去支付"),J={key:2,class:"footer-button"},w=g("删除");var K=_(e({setup(e){const t=u(),l=i(),g=c(),{query:{orderNo:_,agentCode:j,tenantId:x,abbreviation:E,productCategory:K}}=t,Q=()=>{O.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{g.value&&N(g.value.id,g.value.orderStatus).then((e=>{const{code:t,data:a}=e;"10000"===t&&L.success("删除成功")}))}))},R=()=>{var e,t;if(!g.value)return!1;const{agencyId:a,saleChannelId:n,orderTopStatus:o}=g.value,r=null==(t=null==(e=g.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;if(!(D.PENDING!==o&&D.PAYING!==o||r!==Y.ZXYS&&r!==Y.BWYL)){const e={[Y.ZXYS]:"/internet/productDetail/package",[Y.BWYL]:"/internet/productDetail"};return l.push({path:e[r],query:{productCode:r,saleChannelId:n,agentCode:j,tenantId:x,agencyCode:a,orderNo:_}}),!0}return!1},V=()=>{var e,t;if(g.value){if(R())return;const{id:a,extInfo:{templateId:n,pageCode:o},agencyId:r,venderCode:d}=g.value,l=null==(t=null==(e=g.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;S(o,{productCode:l,orderNo:_,orderId:a,agentCode:j,templateId:n,tenantId:x,productCategory:K,insurerCode:d,agencyCode:r,isFromOrderList:"1"})}},ee=()=>{var e,t;if(g.value){if(R())return;const{id:a,saleUserId:n,extInfo:{templateId:o},agencyId:r,venderCode:d}=g.value,l=null==(t=null==(e=g.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;S("payInfo",{productCode:l,orderNo:_,orderId:a,saleUserId:n,templateId:o,tenantId:x,productCategory:K,insurerCode:d,agencyCode:r})}};return v((()=>{P({orderNo:_,agentCode:j,tenantId:x}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(g.value=a)}))})),(e,t)=>{const l=p("van-button"),u=p("ProPageWrap");return a(),I(u,null,{default:m((()=>{var e,t,u,i,c,v,p,O,L,N,_;return[g.value?(a(),n("div",H,[s("div",U,[C(G,null,{label:m((()=>{var e,t,a,n;return[s("div",A,[s("div",M,o(null==(a=null==(t=null==(e=g.value)?void 0:e.tenantOrderInsuredList[0])?void 0:t.tenantOrderProductList[0])?void 0:a.productName),1),s("div",W,o(null==(n=g.value)?void 0:n.abbreviation),1)])]})),content:m((()=>{var e;return[s("div",q,o(g.value?d(h)[null==(e=g.value)?void 0:e.orderStatus]:""),1)]})),_:1}),C(G,{label:"投保单号",content:null==(e=g.value)?void 0:e.orderNo},null,8,["content"]),C(G,{label:"创建时间",content:d(k)(null==(t=g.value)?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),C(G,{label:"投保人",content:null==(i=null==(u=g.value)?void 0:u.tenantOrderHolder)?void 0:i.name},null,8,["content"]),(a(!0),n(f,null,y((null==(c=g.value)?void 0:c.tenantOrderInsuredList)||[],((e,t)=>(a(),I(G,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),C(T,{"product-data":null==(O=null==(p=null==(v=g.value)?void 0:v.tenantOrderInsuredList[0])?void 0:p.tenantOrderProductList)?void 0:O[0],class:"insure-info"},null,8,["product-data"]),(null==(L=g.value)?void 0:L.orderTopStatus)===d(D).PENDING?(a(),n("div",B,[C(l,{type:"primary",onClick:b(Q,["stop"])},{default:m((()=>[F])),_:1},8,["onClick"]),C(l,{type:"primary",onClick:b(V,["stop"])},{default:m((()=>[X])),_:1},8,["onClick"])])):r("",!0),(null==(N=g.value)?void 0:N.orderTopStatus)===d(D).PAYING?(a(),n("div",Z,[C(l,{type:"primary",onClick:b(Q,["stop"])},{default:m((()=>[$])),_:1},8,["onClick"]),C(l,{type:"primary",onClick:b(ee,["stop"])},{default:m((()=>[z])),_:1},8,["onClick"])])):r("",!0),(null==(_=g.value)?void 0:_.orderTopStatus)===d(D).TIMEOUT?(a(),n("div",J,[C(l,{type:"primary",onClick:b(Q,["stop"])},{default:m((()=>[w])),_:1},8,["onClick"])])):r("",!0)])):r("",!0)]})),_:1})}}}),[["__scopeId","data-v-719e96a1"]]);export{K as default};

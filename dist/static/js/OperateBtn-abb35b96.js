import{d as e,h as a,i as r,k as t,aj as o,o as n,c as d,u as s,m as i,w as l,a8 as c,cZ as p,f as u,_ as m,aa as y,a6 as h,aD as C,cx as f,cy as I,cz as g,ec as N}from"./index-1e2bc5d8.js";import{c as k}from"./order-01057b74.js";const $={class:"operate-wrap"},S=e({name:"operateBtn"});var x=m(e({...S,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:m}){const S=e,x=a(),F=r(),{tenantId:_,nextPageCode:b,isShare:w}=F.query,P=t((()=>{const{orderTopStatus:e,productClassFlag:a,orderStatus:r}=S.detail;return!("-1"!==e||y.orderList!==F.path||"underWritingFailed"===r&&a===h.YES||["manualUnderWriting","offlinePayment","paymentFailed"].includes(r))})),j=t((()=>{const{policyNo:e,applicationNo:a,orderStatus:r}=S.detail;return!e&&a&&"cancel"!==r})),q=t((()=>{const{orderStatus:e}=S.detail;return["offlinePayment","manualUnderWriting","paymentFailed"].includes(e)})),z=()=>{const{orderStatus:e,orderNo:a,insurerCode:r,underwriteFlag:t,templateId:o}=S.detail;let n=y.sign;("collectInfo"===e||"underWritingFailed"===e&&t===h.NO)&&(n=y.infoCollection),x.push({path:n,query:{...F.query,tenantId:_,orderNo:a,insurerCode:r,templateId:o}})},D=()=>{const{orderNo:e,orderId:a}=S.detail;w?C.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{m("handleCancel")})):k({tenantId:_,orderNo:e,type:1}).then((({code:e,data:a})=>{"10000"===e&&C.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:a,holderGender:r,orderId:t,orderNo:o,insurerCode:n}=S.detail||{},d=a,s=`${f[r]}士`;I({shareType:0,title:`${g.cancel.title}`,desc:g.cancel.desc.replace("{name}",`${d}${s},`),url:`${window.location.href}&objectType=${e}&insurerCode=${n}&isShare=1&orderNo=${o}&orderId=${t}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:N})})("holder")}))}))},W=()=>{const{orderNo:e,orderId:a,insurerCode:r}=S.detail;x.push({path:y.updateBankInfo,query:{tenantId:_,orderNo:e,orderId:a,insurerCode:r,nextPageCode:"orderDetail"}})};return(e,a)=>{const r=o;return n(),d("div",$,[s(P)?(n(),i(r,{key:0,type:"primary",size:"small",onClick:p(z,["stop"])},{default:l((()=>[c("去处理")])),_:1},8,["onClick"])):u("",!0),s(j)?(n(),i(r,{key:1,type:"primary",plain:"",size:"small",onClick:p(D,["stop"])},{default:l((()=>[c("撤单")])),_:1},8,["onClick"])):u("",!0),s(q)?(n(),i(r,{key:2,plain:"",size:"small",onClick:p(W,["stop"])},{default:l((()=>[c("银行卡修改")])),_:1},8,["onClick"])):u("",!0)])}}}),[["__scopeId","data-v-0d089db2"]]);export{x as O};

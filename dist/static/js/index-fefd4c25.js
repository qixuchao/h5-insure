var Ne=Object.defineProperty,Me=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var Fe=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Oe=(o,a,p)=>a in o?Ne(o,a,{enumerable:!0,configurable:!0,writable:!0,value:p}):o[a]=p,S=(o,a)=>{for(var p in a||(a={}))je.call(a,p)&&Oe(o,p,a[p]);if(Fe)for(var p of Fe(a))Ge.call(a,p)&&Oe(o,p,a[p]);return o},G=(o,a)=>Me(o,Ye(a));import{g as $,L as M,o as Z,$ as x,r as h,k as c,m as B,n as v,j as k,y as A,z as t,a0 as $e,a1 as Se,a2 as J,C as P,h as D,s as F,I as q,d as Ze,a3 as We,J as ze,a4 as Qe,x as N,F as W,E as z,a5 as Je,a6 as Xe,B as Q,V as He,Q as Ke,a7 as et}from"./vendor-0f9b8289.js";import{_ as Y,P as w,a as tt}from"./index-4fe83c5a.js";import{b as X,S as H}from"./index-172f2552.js";const at=[{label:"\u7537",value:"1"},{label:"\u5973",value:"2"}],it=[{label:"\u6709",value:"1"},{label:"\u65E0",value:"2"}],ot=[{value:1,label:"\u7B2C5\u4E2A\u4FDD\u5355\u5468\u5E74\u65E5"},{value:2,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8455\u5468\u5C81"},{value:3,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8460\u5468\u5C81"},{value:4,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8465\u5468\u5C81"},{value:5,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8470\u5468\u5C81"},{value:6,label:"\u8D77\u59CB\u9886\u53D6\u5E74\u9F8475\u5468\u5C81"}],lt=[{value:1,label:"\u5E74\u9886"},{value:2,label:"\u6708\u9886"}],Ae=[{label:"\u8DB8\u4EA4",value:"1"},{label:"\u5E74\u4EA4",value:"2"},{label:"\u534A\u5E74\u4EA4",value:"3"},{label:"\u5B63\u4EA4",value:"4"},{label:"\u6708\u4EA4",value:"5"}],Re=[{label:"\u8DB8\u4EA4",value:"single"},{label:"1\u5E74\u4EA4",value:"year_1"},{label:"5\u5E74\u4EA4",value:"year_5"},{label:"10\u5E74\u4EA4",value:"year_10"},{label:"15\u5E74\u4EA4",value:"year_15"},{label:"20\u5E74\u4EA4",value:"year_20"},{label:"25\u5E74\u4EA4",value:"year_25"},{label:"30\u5E74\u4EA4",value:"year_30"},{label:"35\u5E74\u4EA4",value:"year_35"}],Be=[{label:"7\u5929",value:"day_7"},{label:"14\u5929",value:"day_14"},{label:"30\u5929",value:"day_30"},{label:"1\u5E74",value:"year_1"},{label:"3\u5E74",value:"year_3"},{label:"5\u5E74",value:"year_5"},{label:"10\u5E74",value:"year_10"},{label:"15\u5E74",value:"year_15"},{label:"20\u5E74",value:"year_20"},{label:"25\u5E74",value:"year_25"},{label:"30\u5E74",value:"year_30"},{label:"35\u5E74",value:"year_35"},{label:"\u7EC8\u8EAB",value:"to_life"}],nt=[{label:"\u540C\u4E3B\u9669\u671F\u95F4\u51CF1",value:"3"},{label:"\u65E0\u9650\u5236",value:"2"}],Pe=[{label:"\u8FD4\u4FDD\u989D",value:1},{label:"\u8FD4\u4FDD\u8D39",value:2}],ut=[{label:"\u6295\u4FDD",value:"0"},{label:"\u4E0D\u6295\u4FDD",value:"-1"}],rt=(o={})=>X.post("/api/gateway/system/dict/v2/queryDictInfo",o);new H({source:"sessionStorage"});const Te=new H({source:"localStorage"});new H({source:"cookie"});const st=o=>($e("data-v-1e1e74de"),o=o(),Se(),o),dt={class:"com-occupational-wrapper"},mt=st(()=>A("div",{class:"popup-title"},"\u9009\u62E9\u804C\u4E1A",-1)),ct={class:"popup-content"},ft=$({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(o,{emit:a}){const p=o,i=M({show:p.show,options:[],currentValue:""}),s=()=>{a("close")},I=({value:d,selectedOptions:r})=>{console.log(d,r);const C=(r||[]).map(V=>V.value).join("/");a("update:modelValue",d),a("finish",C),s()},L=d=>{const r=d,C=V=>{V.forEach(u=>{const e=u;e.children.length?C(e.children):e.children=null})};return C(r),r},g=()=>{var C,V;const d=`${(V=(C=p.insurerCode)==null?void 0:C.toLocaleUpperCase)==null?void 0:V.call(C)}_OCCUPATION`,r=Te.get("occupational")||{};if(r[d]){i.options=r[d];return}rt({dictCodeList:[d]}).then(({code:u,data:e})=>{var l;if(u==="10000"){const n=L(((l=e==null?void 0:e[0])==null?void 0:l.dictItemList)||[]);i.options=n,r[d]=n,Te.set("occupational",r)}})};return Z(()=>{g()}),x(()=>p.modelValue,d=>{},{deep:!0,immediate:!0}),(d,r)=>{const C=h("van-cascader"),V=h("VanPopup");return c(),B("div",dt,[v(V,{show:t(i).show,"onUpdate:show":r[1]||(r[1]=u=>t(i).show=u),"show-footer":"",position:"bottom",closeable:"",onClose:s},{default:k(()=>[mt,A("div",ct,[v(C,{modelValue:t(i).currentValue,"onUpdate:modelValue":r[0]||(r[0]=u=>t(i).currentValue=u),title:"\u8BF7\u9009\u62E9\u804C\u4E1A","show-header":!1,placeholder:"\u8BF7\u9009\u62E9",options:t(i).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:I},null,8,["modelValue","options"])])]),_:1},8,["show"])])}}});var pt=Y(ft,[["__scopeId","data-v-1e1e74de"]]);const yt={class:"com-personal-info-wrapper"},we=$({props:{formInfo:{type:Object,required:!0,default:()=>{}},insuredCode:{type:String,required:!0,default:""},factorList:{type:Array,required:!0,default:()=>[]}},setup(o,{expose:a}){const p=o,[i,s]=J(),[I,L]=J(),g=P(),d=M({formInfo:p==null?void 0:p.formInfo,occupationalText:""}),r=u=>{d.occupationalText=u},C=()=>{L(!1)};return a({validateForm:()=>new Promise((u,e)=>{g==null||g.value.validate().then(()=>{u("")},()=>{e()})})}),(u,e)=>{const l=h("VanField"),n=h("VanForm"),m=h("van-datetime-picker"),b=h("van-popup");return c(),B("div",yt,[v(n,{ref_key:"formRef",ref:g,"input-align":"right","error-message-align":"right"},{default:k(()=>[o.factorList.includes("APPLICANT.AGE")||o.factorList.includes("AGE")?(c(),D(l,{key:0,modelValue:t(d).formInfo.birthday,"onUpdate:modelValue":e[0]||(e[0]=y=>t(d).formInfo.birthday=y),rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],name:"birth",label:"\u51FA\u751F\u65E5\u671F","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[1]||(e[1]=y=>t(s)(!0))},null,8,["modelValue"])):F("",!0),o.factorList.includes("APPLICANT.GENDER")||o.factorList.includes("GENDER")?(c(),D(l,{key:1,modelValue:t(d).formInfo.gender,"onUpdate:modelValue":e[3]||(e[3]=y=>t(d).formInfo.gender=y),name:"gender",label:"\u6027\u522B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:k(()=>[v(w,{modelValue:t(d).formInfo.gender,"onUpdate:modelValue":e[2]||(e[2]=y=>t(d).formInfo.gender=y),options:t(at)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):F("",!0),o.factorList.includes("SOCIAL_INS")?(c(),D(l,{key:2,modelValue:t(d).formInfo.socialSecurity,"onUpdate:modelValue":e[5]||(e[5]=y=>t(d).formInfo.socialSecurity=y),name:"socialSecurity",label:"\u793E\u4FDD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:k(()=>[v(w,{modelValue:t(d).formInfo.socialSecurity,"onUpdate:modelValue":e[4]||(e[4]=y=>t(d).formInfo.socialSecurity=y),options:t(it)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):F("",!0),o.factorList.includes("OCCUPATION_CATEGORY")?(c(),D(l,{key:3,modelValue:t(d).formInfo.occupationalClass,"onUpdate:modelValue":e[6]||(e[6]=y=>t(d).formInfo.occupationalClass=y),rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],name:"occupationalClass",label:"\u804C\u4E1A\u7C7B\u578B","is-link":"",placeholder:"\u8BF7\u9009\u62E9",onClick:e[7]||(e[7]=y=>t(L)(!0))},{input:k(()=>[A("div",null,q(t(d).occupationalText),1)]),_:1},8,["modelValue"])):F("",!0)]),_:1},512),v(b,{show:t(i),"onUpdate:show":e[10]||(e[10]=y=>We(i)?i.value=y:null),position:"bottom"},{default:k(()=>[v(m,{type:"date","min-date":new Date("1900-01-01"),"max-date":new Date,onConfirm:e[8]||(e[8]=y=>{t(d).formInfo.birthday=t(Ze)(y).format("YYYY-MM-DD"),t(s)(!1)}),onCancel:e[9]||(e[9]=y=>t(s)(!1))},null,8,["min-date","max-date"])]),_:1},8,["show"]),t(I)?(c(),D(pt,{key:0,modelValue:t(d).formInfo.occupationalClass,"onUpdate:modelValue":e[11]||(e[11]=y=>t(d).formInfo.occupationalClass=y),show:t(I),"insured-code":"insuredCode",onFinish:r,onClose:C},null,8,["modelValue","show"])):F("",!0)])}}});const Vt={class:"risk-title"},kt={class:"left-content"},vt=$({props:{riskType:{type:Number,default:1},name:{type:String,default:()=>""}},setup(o){return(a,p)=>{const i=h("ZaSvg"),s=h("VanCell");return c(),B("div",Vt,[v(s,null,{title:k(()=>[A("div",kt,[A("div",{class:ze(o.riskType===1?"main-risk":"minor-risk")},q(o.riskType===1?"\u4E3B":"\u9644"),3),A("h4",null,q(o.name),1)]),o.riskType===2?(c(),D(i,{key:0,style:{width:"18px",height:"18px"},name:"delete",color:"var(--van-primary-color)"})):F("",!0)]),_:1})])}}});var bt=Y(vt,[["__scopeId","data-v-ac366f06"]]);const It={class:"com-risk-card-wrapper"},Dt={key:0},gt={key:9,class:"liab-desc"},_t=A("div",{class:"title"},"\u8D23\u4EFB\u6295\u4FDD\u8BF4\u660E",-1),xe=$({props:{originData:{type:Object,required:!0,default:()=>{}},formInfo:{type:Object,required:!0,default:()=>{}},mainRiskData:{type:Object,default:()=>{}},mainRiskInfo:{type:Object,required:!1,default:()=>{}},index:{type:[Number,String],default:0,required:!0}},setup(o){const a=o,p=Qe("premium"),i=M({formInfo:a.formInfo}),s=u=>typeof u!="boolean"&&!u||Array.isArray(u)&&!u.length?!0:{}.toString.call(u)==="object Object"?Object.keys(u).length:!1,I=(u,e)=>{let l=e;return Array.isArray(e)||(l=[`${l}`]),(u||[]).filter(n=>l.includes(`${n.value}`)||l.includes(n.value))},L=N(()=>{var u,e,l,n,m,b;return((u=a.originData)==null?void 0:u.riskType)===1?I(Be,(l=(e=a==null?void 0:a.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:l.insurancePeriodValueList):((n=a.originData)==null?void 0:n.periodType)===2?I([{value:"year_1",label:"1\u5E74"}],["year_1"]):I(Be,(b=(m=a==null?void 0:a.mainRiskData)==null?void 0:m.riskInsureLimitVO)==null?void 0:b.insurancePeriodValueList)}),g=N(()=>{var u,e,l,n,m,b,y,_,R;return((u=a.originData)==null?void 0:u.riskType)===1?I(Re,(l=(e=a==null?void 0:a.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:l.paymentPeriodValueList):((n=a.originData)==null?void 0:n.exemptFlag)===1?I(nt,(b=(m=a==null?void 0:a.originData)==null?void 0:m.riskInsureLimitVO)==null?void 0:b.paymentPeriodRule):((y=a.originData)==null?void 0:y.periodType)===2?I([{value:"year_1",label:"1\u5E74\u4EA4"}],["year_1"]):I(Re,(R=(_=a==null?void 0:a.mainRiskData)==null?void 0:_.riskInsureLimitVO)==null?void 0:R.paymentPeriodValueList)}),d=N(()=>{var u,e,l,n,m;return((u=a.originData)==null?void 0:u.riskType)===1?I(Ae,(l=(e=a==null?void 0:a.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:l.paymentFrequencyList):I(Ae,(m=(n=a==null?void 0:a.mainRiskData)==null?void 0:n.riskInsureLimitVO)==null?void 0:m.paymentFrequencyList)}),r=N(()=>{var l,n;let u=0,e=0;return(((n=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:n.paymentMethodLimitList)||[]).forEach((m,b)=>{b===0&&(u=m.minAmount,e=m.maxAmount),u>m.minAmount&&(u=m.minAmount),e<m.maxAmount&&(e=m.maxAmount)}),i.formInfo.sumInsured=u,{min:u,max:e}}),C=N(()=>{var l,n;let u=0,e=0;return(((n=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:n.paymentMethodLimitList)||[]).forEach((m,b)=>{b===0&&(u=m.minPremium,e=m.maxPremium),u>m.minPremium&&(u=m.minPremium),e<m.maxPremium&&(e=m.maxPremium)}),i.formInfo.premium=u,{min:u,max:e}}),V=N(()=>{var l,n,m,b;const u=((n=(l=a.originData)==null?void 0:l.riskCalcMethodInfoVO)==null?void 0:n.minCopy)||1,e=(b=(m=a.originData)==null?void 0:m.riskCalcMethodInfoVO)==null?void 0:b.maxCopy;return i.formInfo.copy=u,{min:u,max:e}});return Z(()=>{var e,l;const u={riskType:a.originData.riskType,riskId:a.originData.id,riskCode:a.originData.riskCode,mainRiskCode:(e=a==null?void 0:a.mainRiskData)==null?void 0:e.riskCode,mainRiskId:(l=a==null?void 0:a.mainRiskData)==null?void 0:l.id,riskCategory:a.originData.riskCategory,liabilityVOList:(a.originData.riskLiabilityInfoVOList||[]).map(n=>({liabilityAttributeCode:n.liabilityAttribute,liabilityAttributeValue:n.liabilityAttributeValue,liabilityCode:n.liabilityCode,liabilityId:n.id,liabilityRateType:n.liabilityRateType}))};Object.assign(i==null?void 0:i.formInfo,u)}),x(()=>{var u;return(u=i.formInfo)==null?void 0:u.paymentFrequency},u=>{var e,l,n,m;[3,4].includes((l=(e=a.originData)==null?void 0:e.riskCalcMethodInfoVO)==null?void 0:l.saleMethod)&&(((m=(n=a.originData)==null?void 0:n.riskCalcMethodInfoVO)==null?void 0:m.paymentMethodLimitList)||[]).forEach(b=>{+b.paymentFrequency==+u&&Object.assign(i.formInfo,{sumInsured:b.perCopyAmount,premium:b.perCopyPremium})})}),x(()=>a==null?void 0:a.mainRiskInfo,u=>{var e,l,n,m;u&&a.originData.riskType===2&&(((l=(e=a.originData)==null?void 0:e.riskInsureLimitVO)==null?void 0:l.insurancePeriodRule)===1&&(i.formInfo.coverageYear=u.coverageYear),((m=(n=a.originData)==null?void 0:n.riskInsureLimitVO)==null?void 0:m.insurancePeriodRule)===1&&(i.formInfo.coverageYear=u.coverageYear))},{immediate:!0,deep:!0}),(u,e)=>{var m,b,y,_,R,U,j,T,K,ee,te,ae,ie,oe,le,ne,ue,re,se,de,me,ce,fe,pe,ye,Ve,ke,ve,be,Ie,De,ge,_e,Ce,Le,Ee,he;const l=h("VanStepper"),n=h("VanField");return c(),B("div",It,[v(bt,{"risk-type":(m=o.originData)==null?void 0:m.riskType,name:(b=o.originData)==null?void 0:b.riskName},null,8,["risk-type","name"]),((_=(y=o.originData)==null?void 0:y.riskCalcMethodInfoVO)==null?void 0:_.saleMethod)===1?(c(),D(n,{key:0,modelValue:t(i).formInfo.sumInsured,"onUpdate:modelValue":e[1]||(e[1]=f=>t(i).formInfo.sumInsured=f),label:"\u4FDD\u989D",name:"sumInsured",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:k(()=>{var f,E;return[v(l,{modelValue:t(i).formInfo.sumInsured,"onUpdate:modelValue":e[0]||(e[0]=O=>t(i).formInfo.sumInsured=O),min:t(r).min,step:((E=(f=o.originData)==null?void 0:f.riskCalcMethodInfoVO)==null?void 0:E.increaseDecreaseNum)||1,max:t(r).max},null,8,["modelValue","min","step","max"])]}),_:1},8,["modelValue"])):F("",!0),((U=(R=o.originData)==null?void 0:R.riskCalcMethodInfoVO)==null?void 0:U.saleMethod)===2?(c(),D(n,{key:1,modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[3]||(e[3]=f=>t(i).formInfo.premium=f),label:"\u4FDD\u8D39",name:"premium",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:k(()=>{var f,E;return[v(l,{modelValue:t(i).formInfo.premium,"onUpdate:modelValue":e[2]||(e[2]=O=>t(i).formInfo.premium=O),step:((E=(f=o.originData)==null?void 0:f.riskCalcMethodInfoVO)==null?void 0:E.increaseDecreaseNum)||1,min:t(C).min,max:t(C).max},null,8,["modelValue","step","min","max"])]}),_:1},8,["modelValue"])):F("",!0),((T=(j=o.originData)==null?void 0:j.riskCalcMethodInfoVO)==null?void 0:T.saleMethod)===3||((ee=(K=o.originData)==null?void 0:K.riskCalcMethodInfoVO)==null?void 0:ee.saleMethod)===4&&(((ae=(te=o.originData)==null?void 0:te.riskCalcMethodInfoVO)==null?void 0:ae.minCopy)||((oe=(ie=o.originData)==null?void 0:ie.riskCalcMethodInfoVO)==null?void 0:oe.maxCopy))?(c(),D(n,{key:2,modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[5]||(e[5]=f=>t(i).formInfo.copy=f),label:"\u6295\u4FDD\u4EFD\u6570",name:"copy",rules:[{required:!0,message:"\u8BF7\u586B\u5199"}]},{input:k(()=>[v(l,{modelValue:t(i).formInfo.copy,"onUpdate:modelValue":e[4]||(e[4]=f=>t(i).formInfo.copy=f),step:1,min:t(V).min,max:t(V).max},null,8,["modelValue","min","max"])]),_:1},8,["modelValue"])):F("",!0),((ne=(le=o.originData)==null?void 0:le.riskCalcMethodInfoVO)==null?void 0:ne.saleMethod)!==1&&((re=t(p))==null?void 0:re[(ue=o.originData)==null?void 0:ue.riskCode])?(c(),D(n,{key:3,label:"\u4FDD\u989D"},{input:k(()=>{var f,E,O;return[A("div",null,q((O=(E=t(p))==null?void 0:E[(f=o.originData)==null?void 0:f.riskCode])==null?void 0:O.amount),1)]}),_:1})):F("",!0),!s((de=(se=o.originData)==null?void 0:se.riskInsureLimitVO)==null?void 0:de.insurancePeriodValueList)||!s((ce=(me=o.originData)==null?void 0:me.riskInsureLimitVO)==null?void 0:ce.insurancePeriodRule)?(c(),D(n,{key:4,modelValue:t(i).formInfo.coverageYear,"onUpdate:modelValue":e[7]||(e[7]=f=>t(i).formInfo.coverageYear=f),label:"\u4FDD\u969C\u671F\u95F4",name:"coverageYear",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:k(()=>[v(w,{modelValue:t(i).formInfo.coverageYear,"onUpdate:modelValue":e[6]||(e[6]=f=>t(i).formInfo.coverageYear=f),options:t(L)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):F("",!0),!s((pe=(fe=o.originData)==null?void 0:fe.riskInsureLimitVO)==null?void 0:pe.paymentPeriodValueList)||!s((Ve=(ye=o.originData)==null?void 0:ye.riskInsureLimitVO)==null?void 0:Ve.paymentPeriodRule)?(c(),D(n,{key:5,modelValue:t(i).formInfo.paymentYear,"onUpdate:modelValue":e[9]||(e[9]=f=>t(i).formInfo.paymentYear=f),label:"\u4EA4\u8D39\u671F\u95F4",name:"paymentYear",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:k(()=>[v(w,{modelValue:t(i).formInfo.paymentYear,"onUpdate:modelValue":e[8]||(e[8]=f=>t(i).formInfo.paymentYear=f),options:t(g)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):F("",!0),!s((ve=(ke=o.originData)==null?void 0:ke.riskInsureLimitVO)==null?void 0:ve.paymentFrequencyList)||!s((Ie=(be=o.originData)==null?void 0:be.riskInsureLimitVO)==null?void 0:Ie.paymentTypeRule)?(c(),D(n,{key:6,modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[11]||(e[11]=f=>t(i).formInfo.paymentFrequency=f),label:"\u4EA4\u8D39\u65B9\u5F0F",name:"paymentFrequency",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:k(()=>[v(w,{modelValue:t(i).formInfo.paymentFrequency,"onUpdate:modelValue":e[10]||(e[10]=f=>t(i).formInfo.paymentFrequency=f),options:t(d)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])):F("",!0),s((ge=(De=o.originData)==null?void 0:De.riskInsureLimitVO)==null?void 0:ge.annuityDrawTypeList)?F("",!0):(c(),D(n,{key:7,modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[13]||(e[13]=f=>t(i).formInfo.annuityDrawDate=f),label:"\u9886\u53D6\u65F6\u95F4",name:"annuityDrawDate",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:k(()=>{var f,E;return[v(w,{modelValue:t(i).formInfo.annuityDrawDate,"onUpdate:modelValue":e[12]||(e[12]=O=>t(i).formInfo.annuityDrawDate=O),options:I(t(ot),(E=(f=o.originData)==null?void 0:f.riskInsureLimitVO)==null?void 0:E.annuityDrawTypeList)},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),s((Ce=(_e=o.originData)==null?void 0:_e.riskInsureLimitVO)==null?void 0:Ce.annuityDrawFrequencyList)?F("",!0):(c(),D(n,{key:8,modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[15]||(e[15]=f=>t(i).formInfo.annuityDrawType=f),label:"\u9886\u53D6\u65B9\u5F0F",name:"annuityDrawType",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]},{input:k(()=>{var f,E;return[v(w,{modelValue:t(i).formInfo.annuityDrawType,"onUpdate:modelValue":e[14]||(e[14]=O=>t(i).formInfo.annuityDrawType=O),options:I(t(lt),(E=(f=o.originData)==null?void 0:f.riskInsureLimitVO)==null?void 0:E.annuityDrawFrequencyList)},null,8,["modelValue","options"])]}),_:1},8,["modelValue"])),(c(!0),B(W,null,z(((Le=o.originData)==null?void 0:Le.riskLiabilityInfoVOList)||[],(f,E)=>(c(),B("div",{key:f.liabilityId},[f.optionalFlag===1?(c(),D(n,{key:0,modelValue:t(i).formInfo.liabilityVOList[E].liabilityAttributeValue,"onUpdate:modelValue":O=>t(i).formInfo.liabilityVOList[E].liabilityAttributeValue=O,label:f.liabilityName,name:"liabilityAttributeValue",rules:[{required:f.liabilityAttributeValue,message:"\u8BF7\u9009\u62E9"}]},{input:k(()=>[A("div",null,[f.liabilityAttributeValue?(c(),D(w,{key:1,modelValue:t(i).formInfo.liabilityVOList[E].liabilityAttributeValue,"onUpdate:modelValue":O=>t(i).formInfo.liabilityVOList[E].liabilityAttributeValue=O,options:t(Pe)},null,8,["modelValue","onUpdate:modelValue","options"])):(c(),B("span",Dt,"50\u4E07"))])]),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])):(c(),D(n,{key:1,modelValue:t(i).formInfo.liabilityVOList[E].liabilityAttributeValue,"onUpdate:modelValue":O=>t(i).formInfo.liabilityVOList[E].liabilityAttributeValue=O,label:f.liabilityName,name:"liabilityAttributeValue"},{input:k(()=>[A("div",null,[f.liabilityAttributeValue?(c(),D(w,{key:1,modelValue:t(i).formInfo.liabilityVOList[E].liabilityAttributeValue,"onUpdate:modelValue":O=>t(i).formInfo.liabilityVOList[E].liabilityAttributeValue=O,options:t(Pe)},null,8,["modelValue","onUpdate:modelValue","options"])):(c(),D(w,{key:0,modelValue:t(i).formInfo.liabilityVOList[E].liabilityAttributeValue,"onUpdate:modelValue":O=>t(i).formInfo.liabilityVOList[E].liabilityAttributeValue=O,options:t(ut)},null,8,["modelValue","onUpdate:modelValue","options"]))])]),_:2},1032,["modelValue","onUpdate:modelValue","label"]))]))),128)),((Ee=o.originData)==null?void 0:Ee.relationDesc)?(c(),B("div",gt,[_t,A("div",null,q((he=o.originData)==null?void 0:he.relationDesc),1)])):F("",!0)])}}});const Ct=o=>($e("data-v-aeeb813a"),o=o(),Se(),o),Lt={class:"com-risk-list-wrapper"},Et=Ct(()=>A("div",{class:"popup-title"},"\u9009\u62E9\u9644\u52A0\u9669",-1)),ht={class:"risk-list"},Ft={class:"footer-bar"},Ot=Q("\u786E\u8BA4"),At=$({props:{riskList:{type:Array,required:!0,default:()=>[]},show:{type:Boolean,required:!0,default:!1},collocationList:{type:Array,default:()=>[]},disabled:{type:Array,required:!0,default:()=>[]},modelValue:{type:Array,required:!0,default:()=>[]}},emits:["finished","close","update:modelValue"],setup(o,{emit:a}){const p=o,i=P([]),s=P([]),I=P(p.disabled),L=M({show:p.show,currentChecked:[]}),g=(V,u)=>{p.collocationList.forEach(e=>{V===e.riskId&&(u?e.collocationType===1?L.currentChecked=L.currentChecked.filter(l=>!(l===e.collocationRiskId||l===V)):e.collocationType===3&&I.value.filter(l=>l!==e.collocationRiskId):e.collocationType===1?L.currentChecked.push(e.collocationRiskId,V):e.collocationType===3&&I.value.push(e.collocationRiskId))})},d=V=>{var e,l,n;const u=L.currentChecked.includes(V);console.log("status",u),g(V,u),(n=(l=(e=i==null?void 0:i.value)==null?void 0:e[V])==null?void 0:l.toggle)==null||n.call(l)},r=()=>{a("close")},C=()=>{const V=p.riskList.filter(u=>L.currentChecked.includes(u.id));a("update:modelValue",s),a("finished",V),a("close")};return Je(()=>{i.value=[]}),x(()=>p.modelValue,V=>{s.value=V,I.value=V},{deep:!0,immediate:!0}),(V,u)=>{const e=h("van-checkbox"),l=h("VanCell"),n=h("van-cell-group"),m=h("van-checkbox-group"),b=h("VanButton"),y=h("VanPopup");return c(),B("div",Lt,[v(y,{show:t(L).show,"onUpdate:show":u[2]||(u[2]=_=>t(L).show=_),title:"\u9009\u62E9\u9644\u52A0\u9669","show-footer":"",position:"bottom",closeable:"",onClose:r},{default:k(()=>[Et,A("div",ht,[v(m,{modelValue:s.value,"onUpdate:modelValue":u[1]||(u[1]=_=>s.value=_)},{default:k(()=>[v(n,{inset:""},{default:k(()=>[(c(!0),B(W,null,z(o.riskList,_=>(c(),D(l,{key:_.id,title:_.riskName,onClick:R=>d(_.id)},{"right-icon":k(()=>[v(e,{ref_for:!0,ref:R=>i.value[_.id]=R,disabled:I.value.includes(_.id),shape:"square",name:_.id,onClick:u[0]||(u[0]=Xe(()=>{},["stop"]))},null,8,["disabled","name"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])]),A("div",Ft,[v(b,{type:"primary",disabled:!t(L).currentChecked.length,block:"",onClick:C},{default:k(()=>[Ot]),_:1},8,["disabled"])])]),_:1},8,["show"])])}}});var Rt=Y(At,[["__scopeId","data-v-aeeb813a"]]);const Bt={class:"risk-list-wrapper"},Pt={key:0,class:"add-rider-risk"},Tt={class:"left-part"},wt=Q("+ \u9644\u52A0\u9669"),xt=$({props:{riskInfo:{type:Object,required:!0,default:()=>{}},originData:{type:Object,required:!0,default:()=>{}},pickFactor:{type:Function,required:!0,default:()=>{}}},setup(o){var L;const a=o,[p,i]=J(!1);P(null),P(null);const s=M({mainRiskInfo:a.riskInfo,riderRiskInfo:(L=a.riskInfo)==null?void 0:L.riderRiskVOList,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),I=(g,d)=>{(g||[]).forEach(r=>{Object.assign(s.riderRiskInfo,{[r.id]:{}})}),s.disabledList=d,s.requiredRiderRiskData=s.requiredRiderRiskData.concat(g)};return Z(()=>{s.requiredRiderRiskData}),x(()=>s.mainRiskInfo,g=>{},{deep:!0,immediate:!0}),x(()=>s.riderRiskInfo,()=>{},{deep:!0,immediate:!0}),x(()=>s.requiredRiderRiskData,g=>{const d=[s.mainRiskData,...g];let r=[],C=[];d.forEach(V=>{var e;const u=((e=V==null?void 0:V.riskCalcMethodInfoVO)==null?void 0:e.riskFactorRelationList)||[];r=r.concat(u.filter(l=>l.factorObject==="insured").map(l=>l.factorCode)),C=C.concat(u.filter(l=>l.factorObject==="holder").map(l=>l.factorCode))}),(g||[]).forEach(V=>{Object.assign(s.riderRiskInfo,{[V.id]:{}})}),a.pickFactor({insuredFactorList:[...new Set(r)],holderFactorList:[...new Set(C)]})},{deep:!0,immediate:!0}),x(()=>a.originData,g=>{(g||[]).forEach(d=>{d.riskType===1?(s.mainRiskData=d,s.requiredRiderRiskData=(d==null?void 0:d.requiredRiderRiskVOList)||[],s.riderRiskList=d==null?void 0:d.optionalRiderRiskVOList):s.riderRiskList.push(d)})},{deep:!0,immediate:!0}),x(()=>a.riskInfo,()=>{},{immediate:!0,deep:!0}),(g,d)=>{var r,C,V,u;return c(),B("div",Bt,[v(xe,{"form-info":t(s).mainRiskInfo,"origin-data":t(s).mainRiskData},null,8,["form-info","origin-data"]),(c(!0),B(W,null,z(t(s).requiredRiderRiskData,(e,l)=>(c(),D(xe,{key:e.id,"form-info":t(s).riderRiskInfo[e.id],index:l,"main-risk-data":t(s).mainRiskData,"main-risk-info":t(s).mainRiskInfo,"origin-data":e},null,8,["form-info","index","main-risk-data","main-risk-info","origin-data"]))),128)),((C=(r=t(s))==null?void 0:r.riderRiskList)==null?void 0:C.length)-((u=(V=t(s))==null?void 0:V.checkedList)==null?void 0:u.length)?(c(),B("div",Pt,[A("span",Tt,q(`\u5171\u6709${t(s).riderRiskList.length-t(s).checkedList.length}\u6B3E\u9644\u52A0\u9669\u53EF\u4EE5\u6DFB\u52A0`),1),v(tt,{activied:"",onClick:d[0]||(d[0]=e=>t(i)(!0))},{default:k(()=>[wt]),_:1})])):F("",!0),t(p)?(c(),D(Rt,{key:1,modelValue:t(s).checkedList,"onUpdate:modelValue":d[1]||(d[1]=e=>t(s).checkedList=e),show:t(p),disabled:t(s).disabledList,"risk-list":t(s).riderRiskList,"collocation-list":t(s).mainRiskData.collocationVOList||[],onFinished:I,onClose:d[2]||(d[2]=e=>t(i)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):F("",!0)])}}});var qe=Y(xt,[["__scopeId","data-v-684d31e2"]]);const qt=(o={})=>X.get(`/api/product/insureProductDetail/${o==null?void 0:o.productId}`,o),Ut=(o={})=>X.post("/api/insurance/premiumCalc",o);const $t={class:"card-title"},St=$({props:{title:{type:String,default:()=>""},collapse:{type:Boolean,default:!1}},setup(o){const a=P(["1"]);return(p,i)=>{const s=h("ZaSvg"),I=h("VanCell"),L=h("VanCollapseItem"),g=h("VanCollapse");return c(),B("div",$t,[o.collapse?(c(),D(g,{key:1,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=d=>a.value=d)},{default:k(()=>[v(L,{name:"1"},{title:k(()=>[v(s,{name:"line",color:"var(--van-primary-color)"}),A("h4",null,q(o.title),1)]),default:k(()=>[o.collapse?He(p.$slots,"default",{key:0},void 0,!0):F("",!0)]),_:3})]),_:3},8,["modelValue"])):(c(),D(I,{key:0},{title:k(()=>[v(s,{name:"line",color:"var(--van-primary-color)"}),A("h4",null,q(o.title),1)]),_:1}))])}}});var Ue=Y(St,[["__scopeId","data-v-1d07f5e2"]]);const Nt={key:0,class:"part-card"},Mt={key:1,class:"part-card"},Yt={class:"risk-content"},jt={key:0,class:"risk"},Gt={key:1,class:"plan-risk"},Zt={class:"footer-bar"},Wt={class:"trial-result"},zt=Q("\u53BB\u8BD5\u7B97"),Qt=Q("\u53BB\u6295\u4FDD"),Jt=$({setup(o){const{id:a=115}=Ke().query,p=P({personVO:{}}),i=P({insuredCode:"",personVO:{}}),s=P({}),I=P({}),L=P({}),g=P({}),d=P({});et("premium",d.value);const r=M({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0}),C=()=>{var b;const l=Object.values(s.value[r.currentPlan].riderRiskVOList).map(y=>{const _=y;if(_.paymentYear==="3"){const R=(s.value[r.currentPlan].paymentYear||"").split("_");R[1]&&(R[1]-=1),_.paymentYear=R.join("_")}return _.liabilityVOList=_.liabilityVOList.filter(R=>!["-1"].includes(R.liabilityAttributeValue)),_}),n=s.value[r.currentPlan];n.liabilityVOList=n.liabilityVOList.filter(y=>!["-1"].includes(y.liabilityAttributeValue));const m={holder:{personVO:G(S({},p.value.personVO),{birthday:p.value.personVO.birthday&&`${p.value.personVO.birthday} 00:00:00`})},productCode:(b=r==null?void 0:r.riskBaseInfo)==null?void 0:b.productCode,insuredVOList:[G(S({},i.value),{personVO:G(S({},i.value.personVO),{birthday:i.value.personVO.birthday&&`${i.value.personVO.birthday} 00:00:00`}),productPlanVOList:[{planCode:r.currentPlan||"",riskVOList:[G(S({},n),{riderRiskVOList:l})]}]})]};Ut(S({},m)).then(({code:y,data:_})=>{if(y==="10000"){r.trialResult=_,r.canTrial=!1;const R={};(_.riskPremiumDetailVOList||[]).forEach(U=>{R[U.riskCode]=U}),Object.assign(d.value,R),console.log(d.value)}})},V=()=>{var l,n,m,b,y;Promise.all([(n=(l=I==null?void 0:I.value)==null?void 0:l.validateForm)==null?void 0:n.call(l),(b=(m=L==null?void 0:L.value)==null?void 0:m.validateForm)==null?void 0:b.call(m),(y=g==null?void 0:g.value)==null?void 0:y.validate()]).then(()=>{C()})},u=()=>{qt({productId:a}).then(({code:l,data:n})=>{l==="10000"&&(r.riskBaseInfo=n==null?void 0:n.productBasicInfoVO,((n==null?void 0:n.productRelationPlanVOList)||(n==null?void 0:n.riskDetailVOList)||[]).forEach((m,b)=>{b===0&&(r.currentPlan=m.planCode||0),Object.assign(s.value,{[m.planCode||b]:{liabilityVOList:[],riderRiskVOList:{}}})}),r.riskData=(n==null?void 0:n.riskDetailVOList)||[],r.riskPlanData=(n==null?void 0:n.productRelationPlanVOList)||[])}).finally(()=>{})},e=l=>{r.holderFactor=l.insuredFactorList,r.insuredFactor=l.holderFactorList};return x([()=>s.value,()=>p.value,()=>i.value],l=>{l&&r.canTrial&&(r.canTrial=!0)},{deep:!0}),Z(()=>{u()}),(l,n)=>{const m=h("VanForm"),b=h("VanTab"),y=h("VanTabs"),_=h("VanButton"),R=h("ZaPageWrap");return c(),D(R,{class:"page-trial-wrapper"},{default:k(()=>{var U,j;return[t(r).holderFactor.length?(c(),B("div",Nt,[v(Ue,{title:"\u6295\u4FDD\u4EBA"}),v(we,{ref_key:"holderRef",ref:I,"insured-code":(U=t(r).riskBaseInfo)==null?void 0:U.insuredCode,"form-info":p.value.personVO,"factor-list":t(r).holderFactor},null,8,["insured-code","form-info","factor-list"])])):F("",!0),t(r).insuredFactor.length?(c(),B("div",Mt,[v(Ue,{title:"\u88AB\u4FDD\u4EBA"}),v(we,{ref_key:"insuredRef",ref:L,"insured-code":(j=t(r).riskBaseInfo)==null?void 0:j.insuredCode,"form-info":i.value.personVO,"factor-list":t(r).insuredFactor},null,8,["insured-code","form-info","factor-list"])])):F("",!0),A("div",Yt,[t(r).riskData.length?(c(),B("div",jt,[v(m,{ref_key:"riskFormRef",ref:g,"input-align":"right","error-message-align":"right"},{default:k(()=>[v(qe,{"risk-info":s.value[0],"origin-data":t(r).riskData,"pick-factor":e},null,8,["risk-info","origin-data"])]),_:1},512)])):F("",!0),t(r).riskPlanData.length?(c(),B("div",Gt,[v(m,{ref_key:"riskFormRef",ref:g,"input-align":"right","error-message-align":"right"},{default:k(()=>[v(y,{active:t(r).currentPlan,"onUpdate:active":n[0]||(n[0]=T=>t(r).currentPlan=T),type:"card"},{default:k(()=>[(c(!0),B(W,null,z(t(r).riskPlanData,T=>(c(),D(b,{key:T.planCode,name:T.planCode,title:T.planName},{default:k(()=>[T.planCode===t(r).currentPlan?(c(),D(qe,{key:0,"risk-info":s.value[T.planCode],"origin-data":T.riskDetailVOList,"pick-factor":e},null,8,["risk-info","origin-data"])):F("",!0)]),_:2},1032,["name","title"]))),128))]),_:1},8,["active"])]),_:1},512)])):F("",!0)]),A("div",Zt,[A("span",Wt,q(t(r).trialResult.premium||0),1),t(r).canTrial?(c(),D(_,{key:0,type:"primary",onClick:V},{default:k(()=>[zt]),_:1})):(c(),D(_,{key:1,type:"primary",onClick:V},{default:k(()=>[Qt]),_:1}))])]}),_:1})}}});var ta=Y(Jt,[["__scopeId","data-v-55c1bbc8"]]);export{ta as default};

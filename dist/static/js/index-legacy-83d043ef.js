!function(){var e=document.createElement("style");e.innerHTML=".com-risk-list-wrapper .risk-list[data-v-7d3c3028]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper[data-v-7d3c3028] .van-cell-group--inset{border-bottom:0;border-radius:0;margin:0}.com-risk-list-wrapper[data-v-7d3c3028] .van-cell-group--inset .van-cell{padding:.42667rem .53333rem;align-items:center}.com-risk-list-wrapper[data-v-7d3c3028] .van-cell-group--inset .van-cell:after{width:9.6rem}.com-risk-list-wrapper[data-v-7d3c3028] .van-cell-group--inset .van-cell .van-checkbox__icon .van-icon{height:.42667rem;width:.42667rem;border-radius:.05333rem;line-height:.42667rem;font-size:.32rem}.com-risk-list-wrapper .cell-title[data-v-7d3c3028]{display:flex;flex-direction:column}.com-risk-list-wrapper .cell-title .title-desc[data-v-7d3c3028]{font-size:.32rem;font-weight:400;color:#99a9c0}.com-risk-list-wrapper .footer-bar[data-v-7d3c3028]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.com-personal-info-wrapper .placeholder[data-v-b6a7c104]{color:#99a9c0}.risk-responsibility .title[data-v-27faf794]{font-size:.34667rem;font-weight:500;color:#393d46;padding:.26667rem 0;padding-left:var(--van-cell-horizontal-padding);overflow:hidden}.risk-responsibility .responsibility-content[data-v-27faf794]{position:relative;padding-left:var(--zaui-page-border);font-size:.37333rem;color:#aab9d0;overflow:hidden}.risk-responsibility .responsibility-content li[data-v-27faf794]{display:flex;align-items:center;height:.77333rem;font-size:.34667rem}.risk-responsibility .responsibility-content li .responsibility-sign[data-v-27faf794]{width:.37333rem;height:.37333rem;line-height:.37333rem;text-align:center;border:1px solid #99a9c0;border-radius:50%;margin-right:.18667rem}.risk-responsibility .responsibility-content .show-button[data-v-27faf794]{position:absolute;left:50%;bottom:0;width:100%;height:1.17333rem;line-height:1.17333rem;background-color:#fff;text-align:center;transform:translate(-50%)}.com-risk-card-wrapper.part-card[data-v-3b9c2786]{background-color:#fff;border-bottom:.26667rem solid var(--zaui-global-bg, #f2f5fc)}.com-risk-card-wrapper .delete-risk[data-v-3b9c2786]{display:flex;align-items:center;justify-content:center;margin-top:.06667rem}.com-risk-card-wrapper .delete-risk .svg-icon[data-v-3b9c2786]{font-size:.42667rem}.com-risk-card-wrapper .custom-field[data-v-3b9c2786]{display:flex;flex-direction:column}.com-risk-card-wrapper .custom-field .field-tip[data-v-3b9c2786]{font-size:.32rem;font-weight:400;color:#99a9c0;line-height:1;margin:0 0 .10667rem}.risk-list-wrapper[data-v-4b309d85]{margin-bottom:3.13333rem}.risk-list-wrapper .add-rider-risk[data-v-4b309d85]{background-color:#fff;margin-top:-.26667rem;height:1.41333rem;display:flex;align-items:center;justify-content:space-between;padding:var(--van-cell-vertical-padding) var(--van-cell-horizontal-padding)}.risk-list-wrapper .add-rider-risk .left-part[data-v-4b309d85]{font-weight:400;color:#99a9c0;font-size:.4rem}.risk-list-wrapper .add-rider-risk .btn-rider-risk[data-v-4b309d85]{border:none;display:flex;align-items:center}.risk-list-wrapper .add-rider-risk .btn-rider-risk .btn-plus[data-v-4b309d85]{font-size:.58667rem;margin:0 .10667rem .13333rem}\n",document.head.appendChild(e),System.register(["./index-legacy-dee7ea74.js","./trial-legacy-e0b107af.js","./useDicData-legacy-8b445045.js"],(function(e){"use strict";var i,a,t,o,r,l,n,s,d,u,m,c,p,f,y,k,g,b,V,I,h,v,L,D,C,O,w,x,R,A,P,_,T,F,M,U,N,q,E,Y,S,$,j,z;return{setters:[function(e){i=e._,a=e.d,t=e.r,o=e.z,r=e.o,l=e.aa,n=e.b,s=e.c,d=e.h,u=e.f,m=e.w,c=e.j,p=e.g,f=e.X,y=e.F,k=e.i,g=e.e,b=e.l,V=e.t,I=e.n,h=e.K,v=e.L,L=e.G,D=e.ay,C=e.x,O=e.a0,w=e.k,x=e.ar,R=e.az,A=e.aA,P=e.y,_=e.aB,T=e.J,F=e.al,M=e.a6},function(e){U=e.S,N=e.d,q=e.e,E=e.f,Y=e.A,S=e.g,$=e.L,j=e.h},function(e){z=e.u}],execute:function(){const B={class:"com-risk-list-wrapper"},G=(e=>(h("data-v-7d3c3028"),e=e(),v(),e))((()=>c("div",{class:"popup-title"},"选择附加险",-1))),H={class:"risk-list"},K={class:"cell-title"},J={class:"title"},X={class:"footer-button"},Q=a({__name:"index",props:{riskList:{default:()=>[]},show:{type:Boolean,default:!1},collocationList:{default:()=>[]},disabled:{default:()=>[]},modelValue:{default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const a=e,h=t([]),v=t([]),L=t([...a.disabled]),D=o({show:a.show,currentChecked:[...a.modelValue]}),C=e=>{if(L.value.includes(e))return;((e,i)=>{if(!a.collocationList.length)return i?void(D.currentChecked=[]):void D.currentChecked.push(e);let t=D.currentChecked,o=L.value;i?(a.collocationList.forEach((i=>{e===i.riskId&&(2===i.collocationType?t=t.filter((a=>a!==i.collocationRiskId||a!==e)):3===i.collocationType?(t=t.filter((i=>i!==e)),o=o.filter((e=>e!==i.collocationRiskId))):t=t.filter((i=>i!==e)))})),D.currentChecked=t,L.value=o):(a.collocationList.forEach((a=>{e===a.riskId&&(i||(2===a.collocationType?t.push(a.collocationRiskId):3===a.collocationType&&o.push(a.collocationRiskId),t.push(e)))})),D.currentChecked.push(...t),L.value=o)})(e,D.currentChecked.includes(e)),h?.value?.[e]?.toggle?.()},O=()=>{i("close")},w=()=>{const e=a.riskList.filter((e=>D.currentChecked.includes(e.id)));i("update:modelValue",[...new Set(v.value)]),i("finished",e,L.value),i("close")};return r((()=>{h.value=[]})),l((()=>D.currentChecked),(e=>{v.value=e}),{deep:!0,immediate:!0}),l((()=>a.modelValue),(e=>{v.value=e||[],L.value.push(...e||[])}),{deep:!0,immediate:!0}),(i,a)=>{const t=n("van-checkbox"),o=n("VanCell"),r=n("van-cell-group"),l=n("van-checkbox-group"),x=n("VanButton"),R=n("VanPopup");return s(),d("div",B,[u(R,{show:p(D).show,"onUpdate:show":a[1]||(a[1]=e=>p(D).show=e),title:"选择附加险","show-footer":"",round:"",position:"bottom",closeable:"",onClose:O},{default:m((()=>[G,c("div",H,[u(l,{modelValue:p(v),"onUpdate:modelValue":a[0]||(a[0]=e=>f(v)?v.value=e:null)},{default:m((()=>[u(r,{inset:""},{default:m((()=>[(s(!0),d(y,null,k(e.riskList,(e=>(s(),g(o,{key:e.id,title:e.riskName,disabled:p(L).includes(e.id),onClick:i=>C(e.id)},{"right-icon":m((()=>[u(t,{ref_for:!0,ref:i=>p(h)[e.id]=i,shape:"square",disabled:p(L).includes(e.id),name:e.id,onClick:b((i=>C(e.id)),["stop"])},null,8,["disabled","name","onClick"])])),title:m((()=>[c("div",K,[c("div",J,V(e.riskName),1)])])),_:2},1032,["title","disabled","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),c("div",X,[u(x,{type:"primary",disabled:!p(D).currentChecked.length,block:"",onClick:w},{default:m((()=>[I("确认")])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var W=e("R",i(Q,[["__scopeId","data-v-7d3c3028"]]));const Z={class:"com-personal-info-wrapper"},ee={class:"pro-radio-wrap"},ie={class:"pro-radio-wrap"};e("P",i(a({__name:"index",props:{formInfo:{default:()=>({})},insuredCode:{default:""},factorList:{default:()=>[]},ageRange:{default:()=>[]}},setup(e,{expose:i}){const a=e,r=z(`${a.insuredCode?.toLocaleUpperCase?.()}_OCCUPATION`),[l,y]=L(),k=t(),b=D("source")||{},V=o({formInfo:a.formInfo,occupationalText:"",occupationCodeList:[]}),I=C((()=>{const e=(e=>{const i=e||[];for(let a=0,t=i.length;a<t;a++)for(let e=a+1;e<t;e++){const t=i[a].split("_"),o=i[e].split("_"),r=i[a];t[0]===o[0]?t>o&&(i[a]=i[e],i[e]=r):"age"===t[0]&&(i[a]=i[e],i[e]=r)}return i})(a?.ageRange),i=(e="")=>[+e.split("_")[1],e.split("_")[0]],t=i(e[0]),o=i(e[e.length-1]),r=O().subtract(t[0],"age"===t[1]?"year":"day").format("YYYY-MM-DD");let l=O().subtract(o[0],"age"===o[1]?"year":"day").format("YYYY-MM-DD");return O(l).subtract(1,"year").isBefore(r)&&(l=O(l).subtract(1,"year").add(1,"day").format("YYYY-MM-DD")),{minAge:new Date(l),maxAge:new Date(r)}}));return i({validateForm:()=>new Promise(((e,i)=>{k.value?.validate().then((()=>{e("")}),(e=>{k.value?.scrollToField(e?.[0].name),i()}))})),ageRangeObj:I.value}),(i,a)=>{const t=n("VanField"),o=n("ProRadioButton"),h=n("VanForm"),v=n("van-datetime-picker"),L=n("van-popup");return s(),d("div",Z,[u(h,{ref_key:"formRef",ref:k,"input-align":"right","error-message-align":"right"},{default:m((()=>["proposal"===p(b).type&&("add"===p(b).type||"repeatAdd"===p(b).type)||"proposal"!==p(b).type&&(e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")||e.factorList.includes("DAY")||e.factorList.includes("APPLICANT.DAY"))?(s(),g(t,{key:0,modelValue:p(V).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>p(V).formInfo.birthday=e),rules:[{required:!0,message:"请选择出生日期"}],name:"birth",label:"出生日期",class:"isLink",readonly:"","is-link":"",formatter:e=>e?p(O)(e).format("YYYY-MM-DD"):e,placeholder:"请选择",onClick:a[1]||(a[1]=e=>p(y)(!0))},null,8,["modelValue","formatter"])):w("",!0),"proposal"===p(b).type&&("add"===p(b).type||"repeatAdd"===p(b).type)||"proposal"!==p(b).type&&(e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER"))?(s(),g(t,{key:1,modelValue:p(V).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>p(V).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择性别"}]},{input:m((()=>[c("div",ee,[u(o,{modelValue:p(V).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>p(V).formInfo.gender=e),options:p(x)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):w("",!0),e.factorList.includes("SOCIAL_INS")||e.factorList.includes("APPLICANT.SOCIAL_INS")?(s(),g(t,{key:2,modelValue:p(V).formInfo.socialFlag,"onUpdate:modelValue":a[5]||(a[5]=e=>p(V).formInfo.socialFlag=e),name:"socialFlag",label:"社保",rules:[{required:!0,message:"请选择社保"}]},{input:m((()=>[c("div",ie,[u(o,{modelValue:p(V).formInfo.socialFlag,"onUpdate:modelValue":a[4]||(a[4]=e=>p(V).formInfo.socialFlag=e),options:p(U)},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])):w("",!0),e.factorList.includes("OCCUPATION_CATEGORY")||e.factorList.includes("APPLICANT.OCCUPATION_CATEGORY")?(s(),g(R,{key:3,modelValue:p(V).formInfo.occupationCodeList[0],"onUpdate:modelValue":a[6]||(a[6]=e=>p(V).formInfo.occupationCodeList[0]=e),field0:p(V).formInfo.occupationCodeList[0],"onUpdate:field0":a[7]||(a[7]=e=>p(V).formInfo.occupationCodeList[0]=e),field1:p(V).formInfo.occupationCodeList[1],"onUpdate:field1":a[8]||(a[8]=e=>p(V).formInfo.occupationCodeList[1]=e),field2:p(V).formInfo.occupationCodeList[2],"onUpdate:field2":a[9]||(a[9]=e=>p(V).formInfo.occupationCodeList[2]=e),required:"",name:"occupationCodeList",label:"职业类型","data-source":p(r),mapping:{label:"value",value:"code",children:"children"},"show-full-value":"","need-key":"name"},null,8,["modelValue","field0","field1","field2","data-source"])):w("",!0)])),_:1},512),u(L,{show:p(l),"onUpdate:show":a[12]||(a[12]=e=>f(l)?l.value=e:null),position:"bottom"},{default:m((()=>[u(v,{type:"date","min-date":p(I).minAge,"max-date":p(I).maxAge,onConfirm:a[10]||(a[10]=e=>{p(V).formInfo.birthday=p(O)(e).format("YYYY-MM-DD"),p(y)(!1)}),onCancel:a[11]||(a[11]=e=>p(y)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-b6a7c104"]]));const ae={class:"risk-responsibility"},te={class:"title"},oe={class:"content"},re=a({__name:"index",props:{modelValue:Boolean,title:{type:String,default:""},minHeight:{type:[Number,String],default:80},maxHeight:{type:[Number,String],default:200}},emits:["update:modelValue"],setup(e,{emit:i}){const a=e;A();const o=t();P((()=>{o.value=a.modelValue}));const r=C((()=>o.value?`${a.maxHeight}px`:`${a.minHeight}px`)),l=()=>{o.value=!o.value,i("update:modelValue",o.value)};return(i,a)=>{const t=n("ProSvg");return s(),d("div",ae,[c("div",te,V(e.title),1),c("div",{class:"responsibility-content",style:T({height:p(r)})},[c("div",oe,[_(i.$slots,"default",{},void 0,!0)]),c("div",{class:"show-button",onClick:l},[c("span",null,V(p(o)?"收起":"展开"),1),u(t,{style:{width:"20px",height:"20px"},name:p(o)?"arrow-up":"arrow-down"},null,8,["name"])])],4)])}}});var le=i(re,[["__scopeId","data-v-27faf794"]]);const ne={class:"com-risk-card-wrapper part-card"},se={class:"custom-field"},de={class:"field-tip"},ue={class:"custom-field"},me={class:"field-tip"},ce={class:"custom-field"},pe={class:"field-tip"},fe={class:"pro-radio-wrap"},ye={class:"pro-radio-wrap"},ke={class:"pro-radio-wrap"},ge={class:"pro-radio-wrap"},be={class:"pro-radio-wrap"},Ve={key:0},Ie={key:1,class:"pro-radio-wrap"},he={key:9,class:"liab-desc"};var ve=i(a({__name:"index",props:{originData:{default:()=>({})},formInfo:{default:()=>({})},mainRiskData:{default:()=>({})},mainRiskInfo:{default:()=>({})},index:{default:0},removeRisk:{type:Function,default:()=>{}},removeRiskList:{default:()=>[]},enums:{default:()=>({})}},setup(e){const i=e,a=t({}),r=D("premium")||{};a.value=D("enumList")||{};const f=t({chargePeriod:{disabled:!1,prevent:!1},coveragePeriod:{disabled:!1,prevent:!1},paymentFrequency:{disabled:!1,prevent:!1}}),b=o({formInfo:i.formInfo}),I=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"[object Object]"==={}.toString.call(e)&&Object.keys(e).length),h=(e,i,a={})=>{let t=i;return Array.isArray(i)||(t=[`${t}`]),(e||[]).filter((e=>t.includes(`${e.value}`)||t.includes(e.value)))},v=C((()=>1===i.originData?.riskType?h(i.enums.RISK_INSURANCE_PERIOD,i.originData.riskInsureLimitVO?.insurancePeriodValueList||[]):2===i.originData?.periodType?h([{value:"year_1",name:"1年"}],["year_1"]):1===i.originData?.exemptFlag?h(N,[`${i?.originData?.riskInsureLimitVO?.insurancePeriodRule}`]):h(i.enums?.RISK_INSURANCE_PERIOD,i.mainRiskData.riskInsureLimitVO?.insurancePeriodValueList||[]))),L=C((()=>1===i.originData?.riskType?h(i?.enums?.RISK_PAYMENT_PERIOD,i.originData.riskInsureLimitVO?.paymentPeriodValueList||[]):1===i.originData?.exemptFlag?h(q,[`${i?.originData?.riskInsureLimitVO?.paymentPeriodRule}`]):2===i.originData?.periodType?h([{value:"year_1",name:"1年交"}],["year_1"]):h(i.enums.RISK_PAYMENT_PERIOD,i.mainRiskData.riskInsureLimitVO?.paymentPeriodValueList||[]))),O=C((()=>1===i.originData?.riskType?h(E,i.originData.riskInsureLimitVO?.paymentFrequencyList||[]):(i.originData.riskInsureLimitVO?.paymentTypeRule,h(E,i.mainRiskData.riskInsureLimitVO?.paymentFrequencyList||[])))),x=C((()=>{let e=0,a=0;return(i.originData?.riskCalcMethodInfoVO?.paymentMethodLimitList||[]).forEach(((i,t)=>{0===t&&(e=i.minAmount,a=i.maxAmount),e>i.minAmount&&(e=i.minAmount),a<i.maxAmount&&(a=i.maxAmount)})),b.formInfo.amount=b.formInfo.amount||e,{min:e,max:a||1/0}})),R=C((()=>{let e=0,a=0;return(i.originData?.riskCalcMethodInfoVO?.paymentMethodLimitList||[]).forEach(((i,t)=>{0===t&&(e=i.minPremium,a=i.maxPremium),e>i.minPremium&&(e=i.minPremium),a<i.maxPremium&&(a=i.maxPremium)})),b.formInfo.premium=b.formInfo.premium||e,{min:e,max:a||1/0}})),A=C((()=>{const e=i.originData?.riskCalcMethodInfoVO?.minCopy||1,a=i.originData?.riskCalcMethodInfoVO?.maxCopy;return b.formInfo.copy=`${b.formInfo.copy||e||1}`,{min:e,max:a}})),P=(e,a,t)=>{const o=i.originData?.riskCalcMethodInfoVO?.increaseDecreaseNum||1;if("sumInsured"===t){if(x.value.max&&+e>x.value.max)return`金额最大${x.value.max}元`;if(+e<x.value.min)return`金额最小${x.value.min}元`}else{if(R.value.max&&+e>R.value.max)return`金额最大${R.value.max}元`;if(+e<R.value.min)return`金额最小${R.value.min}元`}return+e%o==0?"":`金额必须是${o}的倍数`},_=e=>{const i=(b.formInfo?.liabilityVOList||[]).find((i=>i.liabilityCode===e.liabilityCode));return i?i.liabilityAttributeValue?i.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return F((()=>{const e={riskType:i.originData.riskType,riskId:i.originData.id,riskName:i.originData.riskName,riskCode:i.originData.riskCode,amount:b.formInfo.amount,mainRiskCode:1!==i.originData.riskType?i.mainRiskData?.riskCode:void 0,mainRiskId:1!==i.originData.riskType?i.mainRiskData?.id:void 0,exemptFlag:i.originData.exemptFlag,exemptType:i.originData.exemptType,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({...e,liabilityAttributeCode:e.liabilityAttributeType,liabilityCode:e.liabilityCode,liabilityRateType:e.liabilityRateType,liabilityAttributeValue:_(e)})))};[1].includes(i.originData.riskCalcMethodInfoVO?.saleMethod||0)&&1!==i.originData?.exemptFlag||!i.originData.riskCalcMethodInfoVO.fixedAmount||(e.amount=i.originData.riskCalcMethodInfoVO.fixedAmount),Object.assign(b.formInfo,e)})),l((()=>b.formInfo?.paymentFrequency),((e=0)=>{[3].includes(i.originData.riskCalcMethodInfoVO?.saleMethod||0)&&(i.originData?.riskCalcMethodInfoVO?.paymentMethodLimitList||[]).forEach((i=>{+i.paymentFrequency==+e&&Object.assign(b.formInfo,{amount:i.perCopyAmount,premium:i.perCopyPremium})})),1==+e&&"single"!==b.formInfo.chargePeriod&&(b.formInfo.chargePeriod="single")})),l((()=>b.formInfo?.copy),(e=>{4===i.originData.riskCalcMethodInfoVO?.saleMethod&&(b.formInfo.amount=i.originData.riskCalcMethodInfoVO?.fixedAmount)})),l((()=>b.formInfo?.chargePeriod),(e=>{"single"===e&&1!=+(b.formInfo.paymentFrequency||0)&&(b.formInfo.paymentFrequency=1)})),l((()=>i?.mainRiskInfo),(e=>{e&&2===i.originData.riskType&&(1===i.originData?.riskInsureLimitVO?.insurancePeriodRule&&(e.coveragePeriod?f.value.coveragePeriod.disabled=!0:f.value.coveragePeriod.prevent=!0,b.formInfo.coveragePeriod=e.coveragePeriod||""),1===i.originData?.riskInsureLimitVO?.paymentPeriodRule&&(e.chargePeriod?f.value.chargePeriod.disabled=!0:f.value.chargePeriod.prevent=!0,b.formInfo.chargePeriod=e.chargePeriod||""),1===i.originData?.riskInsureLimitVO?.paymentTypeRule&&(e.paymentFrequency?f.value.paymentFrequency.disabled=!0:f.value.paymentFrequency.prevent=!0,b.formInfo.paymentFrequency=e.paymentFrequency||0))}),{immediate:!0,deep:!0}),(i,a)=>{const t=n("ProSvg"),o=n("ProTitle"),l=n("VanStepper"),D=n("VanField"),C=n("ProRadioButton"),_=n("ProField");return s(),d("div",ne,[u(o,{"risk-type":e.originData.riskType,title:e.originData.riskName},{default:m((()=>[e.removeRiskList.includes(e.originData.id)?(s(),d("div",{key:0,class:"delete-risk",onClick:a[0]||(a[0]=i=>e.removeRisk(e.originData.id))},[u(t,{name:"img-lajitong",color:"#0d6efe"})])):w("",!0)])),_:1},8,["risk-type","title"]),1===e.originData.riskCalcMethodInfoVO?.saleMethod&&2===e.originData.exemptFlag?(s(),g(D,{key:0,modelValue:p(b).formInfo.amount,"onUpdate:modelValue":a[2]||(a[2]=e=>p(b).formInfo.amount=e),label:"保额",name:"amount",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>P(...e,"sumInsured")}]},{input:m((()=>[c("div",se,[u(l,{modelValue:p(b).formInfo.amount,"onUpdate:modelValue":a[1]||(a[1]=e=>p(b).formInfo.amount=e),"input-width":"64px",min:p(x).min,step:e.originData.riskCalcMethodInfoVO?.increaseDecreaseNum||1,max:p(x).max},null,8,["modelValue","min","step","max"]),c("span",de,V(`金额最低${p(x).min}元，为${e.originData.riskCalcMethodInfoVO?.increaseDecreaseNum||1}的倍数`),1)])])),_:1},8,["modelValue","rules"])):w("",!0),2===e.originData?.riskCalcMethodInfoVO?.saleMethod?(s(),g(D,{key:1,modelValue:p(b).formInfo.premium,"onUpdate:modelValue":a[4]||(a[4]=e=>p(b).formInfo.premium=e),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"},{trigger:"onChange",validator:(...e)=>P(...e,"premium")}]},{input:m((()=>[c("div",ue,[u(l,{modelValue:p(b).formInfo.premium,"onUpdate:modelValue":a[3]||(a[3]=e=>p(b).formInfo.premium=e),step:e.originData?.riskCalcMethodInfoVO?.increaseDecreaseNum||1,min:p(R).min,"input-width":"64px",max:p(R).max},null,8,["modelValue","step","min","max"]),c("span",me,V(`金额最低${p(R).min}元，为${e.originData?.riskCalcMethodInfoVO?.increaseDecreaseNum||1}的倍数`),1)])])),_:1},8,["modelValue","rules"])):w("",!0),3===e.originData?.riskCalcMethodInfoVO?.saleMethod||4===e.originData?.riskCalcMethodInfoVO?.saleMethod&&(e.originData?.riskCalcMethodInfoVO?.minCopy||e.originData?.riskCalcMethodInfoVO?.maxCopy)?(s(),g(D,{key:2,modelValue:p(b).formInfo.copy,"onUpdate:modelValue":a[6]||(a[6]=e=>p(b).formInfo.copy=e),label:"投保份数",name:"copy",rules:[{required:!0,message:"请填写"}]},{input:m((()=>[c("div",ce,[u(l,{modelValue:p(b).formInfo.copy,"onUpdate:modelValue":a[5]||(a[5]=e=>p(b).formInfo.copy=e),step:1,min:p(A).min,max:p(A).max},null,8,["modelValue","min","max"]),c("span",pe,V(`${p(A).min}份起购，最多购买${p(A).max}份`),1)])])),_:1},8,["modelValue"])):w("",!0),[1].includes(e.originData.riskCalcMethodInfoVO?.saleMethod||0)&&1!==e.originData?.exemptFlag||!e.originData.riskCalcMethodInfoVO.fixedAmount&&!p(r)?.[e.originData?.riskCode]?w("",!0):(s(),g(D,{key:3,label:"保额"},{input:m((()=>[c("div",null,V(e.originData.riskCalcMethodInfoVO?.fixedAmount||p(r)?.[e.originData?.riskCode]?.amount),1)])),_:1})),I(e.originData?.riskInsureLimitVO?.insurancePeriodValueList)&&I(e.originData?.riskInsureLimitVO?.insurancePeriodRule)?w("",!0):(s(),g(_,{key:4,modelValue:p(b).formInfo.coveragePeriod,"onUpdate:modelValue":a[8]||(a[8]=e=>p(b).formInfo.coveragePeriod=e),label:"保障期间",name:"coveragePeriod",rules:[{required:!0,message:"请选择保障期间"}]},{input:m((()=>[c("div",fe,[u(C,{modelValue:p(b).formInfo.coveragePeriod,"onUpdate:modelValue":a[7]||(a[7]=e=>p(b).formInfo.coveragePeriod=e),disabled:p(f).coveragePeriod.disabled,prevent:p(f).coveragePeriod.prevent?"请先选择主险保障期间":"",options:p(v),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),I(e.originData?.riskInsureLimitVO?.paymentPeriodValueList)&&I(e.originData?.riskInsureLimitVO?.paymentPeriodRule)?w("",!0):(s(),g(_,{key:5,modelValue:p(b).formInfo.chargePeriod,"onUpdate:modelValue":a[10]||(a[10]=e=>p(b).formInfo.chargePeriod=e),label:"交费期间",name:"chargePeriod",rules:[{required:!0,message:"请选择交费期间"}]},{input:m((()=>[c("div",ye,[u(C,{modelValue:p(b).formInfo.chargePeriod,"onUpdate:modelValue":a[9]||(a[9]=e=>p(b).formInfo.chargePeriod=e),disabled:p(f).chargePeriod.disabled,prevent:p(f).chargePeriod.prevent?"请先选择主险交费期间":"",options:p(L),prop:{label:"name",value:"value"}},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),I(e.originData.riskInsureLimitVO?.paymentFrequencyList)&&I(e.originData.riskInsureLimitVO?.paymentPeriodRule)?w("",!0):(s(),g(_,{key:6,modelValue:p(b).formInfo.paymentFrequency,"onUpdate:modelValue":a[12]||(a[12]=e=>p(b).formInfo.paymentFrequency=e),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择交费方式"}]},{input:m((()=>[c("div",ke,[u(C,{modelValue:p(b).formInfo.paymentFrequency,"onUpdate:modelValue":a[11]||(a[11]=e=>p(b).formInfo.paymentFrequency=e),disabled:p(f).paymentFrequency.disabled,prevent:p(f).paymentFrequency.prevent?"请先选择主险交费方式":"",options:p(O)},null,8,["modelValue","disabled","prevent","options"])])])),_:1},8,["modelValue"])),I(e.originData?.riskInsureLimitVO?.annuityDrawValueList)?w("",!0):(s(),g(_,{key:7,modelValue:p(b).formInfo.annuityDrawDate,"onUpdate:modelValue":a[14]||(a[14]=e=>p(b).formInfo.annuityDrawDate=e),label:"领取时间",name:"annuityDrawDate"},{input:m((()=>[c("div",ge,[u(C,{modelValue:p(b).formInfo.annuityDrawDate,"onUpdate:modelValue":a[13]||(a[13]=e=>p(b).formInfo.annuityDrawDate=e),options:h(p(Y),e.originData.riskInsureLimitVO?.annuityDrawValueList||[])},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])),I(e.originData?.riskInsureLimitVO?.annuityDrawFrequencyList)?w("",!0):(s(),g(_,{key:8,modelValue:p(b).formInfo.annuityDrawType,"onUpdate:modelValue":a[16]||(a[16]=e=>p(b).formInfo.annuityDrawType=e),label:"领取方式",name:"annuityDrawType"},{input:m((()=>[c("div",be,[u(C,{modelValue:p(b).formInfo.annuityDrawType,"onUpdate:modelValue":a[15]||(a[15]=e=>p(b).formInfo.annuityDrawType=e),options:h(p(S),e.originData.riskInsureLimitVO?.annuityDrawFrequencyList||[])},null,8,["modelValue","options"])])])),_:1},8,["modelValue"])),(s(!0),d(y,null,k(e.originData.riskLiabilityInfoVOList||[],((i,a)=>(s(),d(y,{key:a},[1!==i.optionalFlag||I(i.liabilityAttributeValueList)?w("",!0):(s(),g(D,{key:0,modelValue:p(b).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(b).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:i.liabilityAttributeValue,message:`请选择${i.liabilityName}`}]},{input:m((()=>[c("div",null,[I(i.liabilityAttributeValueList)?(s(),d("span",Ve,"50万")):(s(),d("div",Ie,[u(C,{modelValue:p(b).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(b).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:h(p($),e.originData.riskLiabilityInfoVOList?.[a]?.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"])]))])])),_:2},1032,["modelValue","onUpdate:modelValue","label","rules"])),1!==i.optionalFlag?(s(),g(D,{key:1,modelValue:p(b).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(b).formInfo.liabilityVOList[a].liabilityAttributeValue=e,label:i.liabilityName,name:"liabilityAttributeValue"},{input:m((()=>[c("div",null,[I(i.liabilityAttributeValueList)?(s(),g(C,{key:0,modelValue:p(b).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(b).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:p(j)},null,8,["modelValue","onUpdate:modelValue","options"])):(s(),g(C,{key:1,modelValue:p(b).formInfo.liabilityVOList[a].liabilityAttributeValue,"onUpdate:modelValue":e=>p(b).formInfo.liabilityVOList[a].liabilityAttributeValue=e,options:h(p($),e.originData.riskLiabilityInfoVOList?.[a]?.liabilityAttributeValueList)},null,8,["modelValue","onUpdate:modelValue","options"]))])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])):w("",!0)],64)))),128)),e.originData?.relationDesc?(s(),d("div",he,[u(le,{title:"责任投保说明"},{default:m((()=>[c("div",null,V(e.originData.relationDesc),1)])),_:1})])):w("",!0)])}}}),[["__scopeId","data-v-3b9c2786"]]);const Le={class:"risk-list-wrapper"},De={key:0,class:"add-rider-risk"},Ce={class:"left-part"},Oe=(e=>(h("data-v-4b309d85"),e=e(),v(),e))((()=>c("span",{class:"btn-plus"},"+",-1)));e("a",i(a({__name:"index",props:{riskInfo:{default:()=>({})},originData:{default:()=>[]},pickFactor:{type:Function,default:()=>{}},enums:{default:()=>{}}},setup(e){const i=e,a=D("source")||{},[r,f]=L(!1);t(null),t(null);const b=o({mainRiskInfo:i.riskInfo,riskInfo:i.riskInfo,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[],currentRiskList:[]}),h=(e,i)=>{b.currentRiskList=b.currentRiskList.concat(e),b.disabledList=i},v=e=>{M.confirm({message:"确定要删除附加险么？",confirmButtonText:"删除"}).then((()=>{const i=[e];(b.mainRiskData?.collocationVOList||[]).forEach((a=>{e!==a.riskId||2!==a.collocationType&&3!==a.collocationType||i.push(a.collocationRiskId)})),b.checkedList=b.checkedList.filter((e=>!i.includes(e))),b.currentRiskList=b.currentRiskList.filter((e=>!i.includes(e.id)||(Object.assign(b.riskInfo,{[e.id]:void 0}),!1))),b.disabledList=b.disabledList.filter((e=>!i.includes(e)))})).catch((()=>{}))},C=(e,i)=>{const a=(b.riskInfo?.[i]?.liabilityVOList||[]).find((i=>i.liabilityCode===e.liabilityCode));return a?a.liabilityAttributeValue?a.liabilityAttributeValue:1!==e.optionalFlag?"0":"-1":""};return l((()=>b.currentRiskList),(e=>{const a=[b.mainRiskData,...e];let t=[],o=[];const r=[];a.forEach(((e,i)=>{const a=e?.riskCalcMethodInfoVO?.riskFactorRelationList||[];t=t.concat(a.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),o=o.concat(a.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode))),r.push(e?.riskInsureLimitVO?.minHolderAge,e?.riskInsureLimitVO?.maxHolderAge)})),(e||[]).forEach((e=>{const a={riskType:e.riskType,riskId:e.id,riskCode:e.riskCode,riskName:e.riskName,mainRiskCode:1!==e.riskType?b.mainRiskData?.riskCode:void 0,mainRiskId:1!==e.riskType?b.mainRiskData?.id:void 0,riskCategory:e.riskCategory,exemptFlag:i.originData.exemptFlag,exemptType:i.originData.exemptType,liabilityVOList:(e.riskLiabilityInfoVOList||[]).map((i=>({...i,liabilityAttributeCode:i.liabilityAttributeType,liabilityCode:i.liabilityCode,liabilityRateType:i.liabilityRateType,liabilityAttributeValue:C(i,e.id)})))};b.riskInfo[e.id]||Object.assign(b.riskInfo,{[e.id]:a})})),i.pickFactor({insuredFactorList:[...new Set(t)],holderFactorList:[...new Set(o)],ageRange:r})}),{deep:!0,immediate:!0}),l((()=>i.riskInfo),(e=>{b.mainRiskInfo=Object.values(e||{}).find((e=>1===e?.riskType))||{}}),{deep:!0,immediate:!0}),l((()=>i.originData),(e=>{let i=[];const t=[];"proposal"===a.origin&&"add"!==a.type&&"repeatAdd"!==a.type?((e||[]).forEach((e=>{1===e.riskType&&(b.mainRiskData=e),i.push(e)})),i=i.filter((e=>a.showRiskList.includes(e.id)))):(e||[]).forEach((e=>{1===e.riskType?(b.mainRiskData=e,i.push(e)):2===e.collocationType?i.push(e):t.push(e)})),b.riderRiskList=t,b.currentRiskList=i}),{deep:!0,immediate:!0}),(i,t)=>{const o=n("ProCheckButton");return s(),d("div",Le,[(s(!0),d(y,null,k(p(b).currentRiskList,((i,a)=>(s(),g(ve,{key:i.id,"form-info":p(b).riskInfo[i.id],index:a,enums:e.enums,"main-risk-data":p(b).mainRiskData,"main-risk-info":p(b).mainRiskInfo,"origin-data":i,"remove-risk":v,"remove-risk-list":p(b).checkedList},null,8,["form-info","index","enums","main-risk-data","main-risk-info","origin-data","remove-risk-list"])))),128)),p(b).riderRiskList?.length-p(b).checkedList?.length&&"proposal"!==p(a).origin?(s(),d("div",De,[c("span",Ce,V(`共有${p(b).riderRiskList.length-p(b).checkedList.length}款附加险可以添加`),1),u(o,{activated:"",class:"btn-rider-risk",onClick:t[0]||(t[0]=e=>p(f)(!0))},{default:m((()=>[Oe,I(" 附加险")])),_:1})])):w("",!0),p(r)?(s(),g(W,{key:1,modelValue:p(b).checkedList,"onUpdate:modelValue":t[1]||(t[1]=e=>p(b).checkedList=e),show:p(r),disabled:p(b).disabledList,"risk-list":p(b).riderRiskList,"collocation-list":p(b).mainRiskData?.collocationVOList||[],onFinished:h,onClose:t[2]||(t[2]=e=>p(f)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):w("",!0)])}}}),[["__scopeId","data-v-4b309d85"]]))}}}))}();

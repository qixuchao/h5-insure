import{_ as e,d as t,u as n,a,r as o,o as r,b as l,c as u,e as i,w as s,f as d,g as c,h as p,i as m,t as f,F as v,j as y,k as g,P as C,l as b,m as S,n as I,T as k,p as h,q as _,s as T,v as w,x as q,y as j,z as V,A as N}from"./index-86f73ada.js";import{p as Q}from"./pdfdist-c7cc8cdf.js";/* empty css                   */import{s as x,g as P}from"./inform-4888f3a4.js";import{s as O}from"./useStorage-cba2ee04.js";import{N as A}from"./notice-a4a1c218.js";const U={class:"problem"},D={class:"footer-button"},J=I("提交");var W=e(t({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const I=e;n();const _=a(),T=o([]),{questionnaireType:w}=_.query,{orderNo:q="2022021815432987130620",productCode:j="CQ75CQ76",templateId:V=1,agentCode:N="65434444",orderId:Q=13005,tenantId:x=9991000007}=_.query,P={1:"投保人",2:"被保人",3:"代理人"},O=o([]),A=e=>e?JSON.parse(e).map((e=>({title:e.value,value:e.uid}))):[],W=()=>{(O.value||[]).filter((e=>{var t;return 0===e.singleAnswer||e.singleAnswer||(null==(t=e.multipleChoose)?void 0:t.length)})).length!==O.value.length?k("请完成所有题目进行下一步"):t("onSubmitCurrentStatus",1,JSON.stringify(O.value))},E=()=>{h({orderNo:q,saleUserId:N,tenantId:x}).then((({code:e,data:t})=>{if("10000"===e){const e=t.tenantOrderNoticeList.findIndex((e=>1===e.isDone&&+e.objectId===I.currentPageInfo[0].questionnaireId));O.value=-1!==e?(e=>JSON.parse(e))(t.tenantOrderNoticeList[e].content):I.currentPageInfo.map((e=>2===e.questionType?{multipleChoose:[],...e}:{singleAnswer:3===e.questionType?0:"",...e}))}}))};return r((()=>{T.value=[],E()})),(e,t)=>{const n=l("van-radio"),a=l("van-cell"),o=l("van-cell-group"),r=l("van-radio-group"),I=l("van-checkbox"),k=l("van-checkbox-group"),h=l("van-field"),_=l("van-button"),q=l("ProPageWrap");return u(),i(q,{class:"com-question"},{default:s((()=>[d(S,{title:`${P[b(w)]}健康告知书`},{default:s((()=>[(u(!0),c(v,null,p(O.value,((e,l)=>(u(),c("div",{key:l,class:"question-item"},[m("div",U,f(l+1)+". "+f(e.title),1),1===e.questionType?(u(),i(r,{key:0,modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t},{default:s((()=>[d(o,{inset:""},{default:s((()=>[(u(!0),c(v,null,p(A(e.options),((t,o)=>(u(),i(a,{key:o,title:t.title,clickable:"",onClick:t=>e.singleAnswer=o},{"right-icon":s((()=>[d(n,{name:o},null,8,["name"])])),_:2},1032,["title","onClick"])))),128))])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])):y("",!0),2===e.questionType?(u(),i(k,{key:1,modelValue:e.multipleChoose,"onUpdate:modelValue":t=>e.multipleChoose=t},{default:s((()=>[d(o,{inset:""},{default:s((()=>[(u(!0),c(v,null,p(A(e.options),((e,n)=>(u(),i(a,{key:e.uid,clickable:"",title:e.title,onClick:e=>(e=>{T.value[e].toggle()})(n)},{"right-icon":s((()=>[d(I,{ref_for:!0,ref:e=>T.value[n]=e,shape:"square",name:n,onClick:t[0]||(t[0]=g((()=>{}),["stop"]))},null,8,["name"])])),_:2},1032,["title","onClick"])))),128))])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])):y("",!0),3===e.questionType?(u(),i(C,{key:2,modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t,options:[{label:"是",value:"Y"},{label:"否",value:"N"}]},null,8,["modelValue","onUpdate:modelValue"])):y("",!0),4===e.questionType?(u(),i(o,{key:3,inset:""},{default:s((()=>[d(h,{modelValue:e.singleAnswer,"onUpdate:modelValue":t=>e.singleAnswer=t,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)):y("",!0)])))),128))])),_:1},8,["title"]),m("div",D,[d(_,{type:"primary",block:"",onClick:W},{default:s((()=>[J])),_:1})])])),_:1})}}}),[["__scopeId","data-v-43eb6cf6"]]);const E={class:"com-document"},L={class:"title"},z={class:"content"},B={class:"footer-button"},F=I("了解并继续");var G=e(t({props:{currentPageInfo:{default:()=>[]}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e;return(e,a)=>{const o=l("van-button"),r=l("ProPageWrap"),c=_("dompurify-html");return u(),i(r,null,{default:s((()=>{var e,r;return[m("div",E,[m("div",L,f(null==(e=n.currentPageInfo[0])?void 0:e.title),1),T(m("div",z,null,512),[[c,null==(r=n.currentPageInfo[0])?void 0:r.content]]),m("div",B,[d(o,{type:"primary",onClick:a[0]||(a[0]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[F])),_:1})])])]})),_:1})}}}),[["__scopeId","data-v-6e53a5c6"]]);const Y={class:"com-pdf-viewer"},$=["id","isee_pdf"],H={key:2,class:"footer-button"},K=I("部分为是"),M=I("以上皆否"),R={key:3,class:"footer-button"},X=I("了解并继续");var Z=e(t({props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e;Q.exports.GlobalWorkerOptions.workerSrc=w;const a=q(),r=o(!1),p=o(!0),m=j((()=>["png","jpg","jpeg"].some((e=>n.url.includes(e))))),f=async()=>{r.value=!0,setTimeout((()=>{(()=>{const e=document.getElementById(a);if(e.hasChildNodes())return void(p.value=!1);Q.exports.getDocument({url:n.url}).promise.then((t=>{const n=t.numPages;for(let a=1;a<=n;a++)t.getPage(a).then((t=>{const n=t.getViewport({scale:1}),a=document.createElement("canvas"),o=a.getContext("2d");a.width=n.width,a.height=n.height,a.style.width="100%",e.append(a);const r={canvasContext:o,viewport:n};t.render(r),p.value=!1}))}))})()}),0)};return V((()=>{f()})),(e,o)=>{const r=l("van-image"),p=l("van-button");return u(),c("div",Y,[b(m)?(u(),i(r,{key:0,width:"100%",height:"80vh",fit:"contain",src:n.url},null,8,["src"])):(u(),c("div",{key:1,id:b(a),isee_pdf:e.pdfUrl,class:"pdf-wapper"},null,8,$)),"question"===n.materialType?(u(),c("div",H,[d(p,{plain:"",type:"primary",onClick:o[0]||(o[0]=e=>t("onSubmitCurrentStatus",2))},{default:s((()=>[K])),_:1}),d(p,{type:"primary",onClick:o[1]||(o[1]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[M])),_:1})])):(u(),c("div",R,[d(p,{type:"primary",onClick:o[2]||(o[2]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[X])),_:1})]))])}}}),[["__scopeId","data-v-a4e458ca"]]);const ee={class:"iframe-wrap"},te=["src"],ne={key:0,class:"footer-button"},ae=I("部分为是"),oe=I("以上皆否"),re={key:1,class:"footer-button"},le=I("了解并继续");var ue=e(t({props:{materialType:{type:String,default:""},url:{type:String,default:""}},emits:["onSubmitCurrentStatus"],setup(e,{emit:t}){const n=e;return(e,a)=>{const o=l("van-button");return u(),c("div",ee,[m("iframe",{src:n.url,frameborder:"0"},null,8,te),"question"===n.materialType?(u(),c("div",ne,[d(o,{plain:"",type:"primary",onClick:a[0]||(a[0]=e=>t("onSubmitCurrentStatus",2))},{default:s((()=>[ae])),_:1}),d(o,{type:"primary",onClick:a[1]||(a[1]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[oe])),_:1})])):(u(),c("div",re,[d(o,{type:"primary",onClick:a[2]||(a[2]=e=>t("onSubmitCurrentStatus",1))},{default:s((()=>[le])),_:1})]))])}}}),[["__scopeId","data-v-1fc4d3ec"]]);const ie={class:"com-health-notice"},se=t({setup(e){const t=n(),o=a(),r=O.get("questionData"),{materialType:l="question",questionnaireType:s="1",orderNo:d="2022021815432987130620",productCode:p="CQ75CQ76",templateId:m=1,agentCode:f="65434444",orderId:v=13005,tenantId:g=9991000007}=o.query&&o.query,C=N({pageData:{},currentQuestionInfo:[]}),S=j((()=>"2"===s)),I=j((()=>{var e;return"1"===s&&([1].includes(null==(e=C.currentQuestionInfo[0])?void 0:e.textType)||1===(null==r?void 0:r.materialSource))})),k=j((()=>{var e;return"1"===s&&([2].includes(null==(e=C.currentQuestionInfo[0])?void 0:e.textType)||2===(null==r?void 0:r.materialSource))})),_=j((()=>{var e;return"1"===s&&([3].includes(null==(e=C.currentQuestionInfo[0])?void 0:e.textType)||3===(null==r?void 0:r.materialSource))})),T=(e,n)=>{var a;const{id:o,objectType:l,noticeObject:u,materialSource:i}=r;x({content:n||(null==(a=C.currentQuestionInfo[0])?void 0:a.content),contentType:s||"3",isDone:e,noticeType:A[l]||"99",objectId:o,objectType:l||u,orderId:C.pageData.id,orderNo:d,tenantId:g}).then((({code:e,data:n})=>{"10000"===e&&t.go(-1)}))};return V((()=>{h({orderNo:d,saleUserId:f,tenantId:g}).then((({code:e,data:t})=>{"10000"===e&&Object.assign(C.pageData,t)})),(null==r?void 0:r.materialSource)?C.currentQuestionInfo=[{...null==r?void 0:r.materialSource,title:null==r?void 0:r.materialName,content:null==r?void 0:r.materialContent}]:(()=>{const{insurerCode:e,id:t,objectType:n,productCategory:a}=r;P({insurerCode:e,id:t,objectType:n,productCategory:a,orderNo:d,tenantId:g}).then((({code:e,data:t})=>{"10000"===e&&(C.currentQuestionInfo=t)}))})()})),(e,t)=>{var n,a;return u(),c("div",ie,[b(S)?(u(),i(W,{key:0,"current-page-info":b(C).currentQuestionInfo,onOnSubmitCurrentStatus:T},null,8,["current-page-info"])):y("",!0),b(k)?(u(),i(G,{key:1,"material-type":b(l),"current-page-info":b(C).currentQuestionInfo,onOnSubmitCurrentStatus:T},null,8,["material-type","current-page-info"])):y("",!0),b(I)?(u(),i(Z,{key:2,"material-type":b(l),url:null==(n=b(C).currentQuestionInfo[0])?void 0:n.content,onOnSubmitCurrentStatus:T},null,8,["material-type","url"])):y("",!0),b(_)?(u(),i(ue,{key:3,"material-type":b(l),url:null==(a=b(C).currentQuestionInfo[0])?void 0:a.content,onOnSubmitCurrentStatus:T},null,8,["material-type","url"])):y("",!0)])}}});export{se as default};

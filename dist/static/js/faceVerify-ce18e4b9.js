import{_ as e,d as a,i as t,h as o,j as s,k as r,l as i,m as l,o as c,p as n,w as d,a as u,u as m,q as p,f,b as v,v as b,aW as y,aH as h,b0 as j,b1 as g,cM as N,cL as T}from"./index-30b22004.js";import{g as w}from"./trial-e70e30f0.js";import{u as I}from"./useOrder-77a8b5ae.js";import{f as C}from"./face_img-b678980a.js";import{P}from"./constants-6c7c253a.js";import{P as _}from"./constants-b39aa53b.js";import{T as x}from"./infoCollection-0f251605.js";import q from"./index-e87c59a8.js";import"./utils-16c99290.js";import"./createProposal-9c7d425e.js";import"./trial-13ff4969.js";import"./PolicyInfo-6053d6e9.js";const z=e=>(j("data-v-6b3599ed"),e=e(),g(),e),U={class:"page-phone-verify"},E=z((()=>u("div",{class:"title face-title"},"人脸识别",-1))),k={class:"face-verify-img"},L=["src"],V=z((()=>u("div",{class:"face-verify-tip"},[u("div",{class:"title"},"操作时请您配合"),u("ol",null,[u("li",null,"请调亮手机屏幕亮度，确保光线充足"),u("li",null,"请保持正脸对准屏幕，确保人脸完整清晰"),u("li",null,"请确保真实本人操作")])],-1))),A={class:"attachment"},B={class:"footer-button"};var F=e(a({__name:"faceVerify",setup(e){const a=I(),j=t(),g=o(),{agentCode:z,origin:F,tenantId:S,nextPageCode:M,templateId:O,biz_id:W,orderNo:$,objectType:H,orderCode:R}=j.query,D=s({mobile:"",verifyCode:""});s();const G=s(),J=s(),K=s([{attachmentName:"隐私政策"}]),Q=r((()=>Array.isArray(H)?`${null==H?void 0:H[0]}`.toLocaleUpperCase():`${H}`.toLocaleUpperCase())),X=()=>{w({orderNo:R||$,tenantId:S}).then((({code:e,data:t})=>{if("10000"===e){Object.assign(a.value,t);const{holder:e,insuredList:o}=t;if("holder"===H){const{name:a,certNo:t,certType:o,id:s,mobile:r}=e;D.value.mobile=r,G.value={userName:a,certiNo:t,certType:o,objectId:s}}else{const{name:e,certNo:a,certType:t,id:s,mobile:r}=(null==o?void 0:o[0])||{};D.value.mobile=r,G.value={userName:e,certiNo:a,certType:t,objectId:s}}W&&(()=>{const{objectId:e,certType:a}=G.value,t={bizId:W,certType:a,objectId:e,objectType:Q.value,orderNo:$,tenantId:S};N(t).then((({code:e,data:a})=>{if("10000"===e&&"SUCCESS"===a.status)if(delete j.query.biz_id,delete j.query.nextPageCode,O===x.FREE)g.push({path:_.infoPreview,query:j.query});else{const e=P.insuredInfoPreview;g.push({path:e,query:{...j.query,pageType:"confirm"===F}})}}))})()}}))},Y=()=>{J.value?(()=>{const{userName:e,certiNo:a,certType:t}=G.value,o={tenantId:S,faceAuthMode:"TENCENT",callbackUrl:window.location.href,bizNo:$,userName:e,certiNo:a,certType:t};T(o).then((({code:e,data:a})=>{"10000"===e&&(window.location.href=a.originalUrl)}))})():y.alert({message:"请先同意隐私政策",confirmButtonText:"我知道了"})};i((()=>{X()}));const Z=s();return i((()=>{setTimeout((async()=>{Z.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const t=h,o=l("ProPageWrap");return c(),n(o,null,{default:d((()=>{var o;return[u("div",U,[E,u("div",k,[u("img",{src:m(C),alt:""},null,8,L)]),V,u("div",A,[(null==(o=m(K))?void 0:o.length)?(c(),n(q,{key:0,modelValue:m(J),"onUpdate:modelValue":a[0]||(a[0]=e=>p(J)?J.value=e:null),"attachment-list":m(K),"has-bg-color":!1,"is-show-radio":"","pre-text":"本人同意利安人寿采集本人人脸信息，用于向国家法规许可的验证机构进行本人身份验证。本人已仔细阅读并知晓","suffix-text":"，并同意授权。",onPreviewFile:a[1]||(a[1]=a=>e.previewFile(a))},null,8,["modelValue","attachment-list"])):f("",!0)]),u("div",B,[v(t,{type:"primary",class:"submit-btn",onClick:Y},{default:d((()=>[b("开始验证")])),_:1})])])]})),_:1})}}}),[["__scopeId","data-v-6b3599ed"]]);export{F as default};

!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.com-occupational-wrapper .popup-title[data-v-1e1e74de]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-occupational-wrapper .popup-content[data-v-1e1e74de]{height:13.84rem}.com-occupational-wrapper .footer-bar[data-v-1e1e74de]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.com-risk-list-wrapper .popup-title[data-v-aeeb813a]{height:1.38667rem;display:flex;align-items:center;justify-content:center;padding:0 .85333rem}.com-risk-list-wrapper .risk-list[data-v-aeeb813a]{height:13.84rem;padding-bottom:2rem}.com-risk-list-wrapper .footer-bar[data-v-aeeb813a]{padding:0 .53333rem;position:absolute;width:100%;height:2rem;bottom:0;display:flex;align-items:center;justify-content:center}.risk-list-wrapper .add-rider-risk[data-v-f37289bc]{display:flex;align-items:center;justify-content:space-between}@charset "UTF-8";.page-trial-wrapper[data-v-ca9a3e7e]{padding-bottom:2rem}.page-trial-wrapper .footer-bar[data-v-ca9a3e7e]{position:fixed;width:100%;bottom:0;left:0;background-color:#fff;height:2rem;padding:.4rem;display:flex;justify-content:space-between}\n',document.head.appendChild(e),System.register(["./vendor-legacy-7e34e895.js","./index-legacy-686da59e.js","./index-legacy-40c97b6a.js"],(function(e){"use strict";var i,a,l,o,n,t,r,d,u,s,c,m,p,v,f,y,k,V,b,g,I,h,L,D,O,C,R,_,w,x,q;return{setters:[function(e){i=e.g,a=e.L,l=e.o,o=e.$,n=e.r,t=e.k,r=e.m,d=e.n,u=e.j,s=e.y,c=e.z,m=e.a0,p=e.a1,v=e.a2,f=e.C,y=e.h,k=e.s,V=e.I,b=e.d,g=e.a3,I=e.x,h=e.F,L=e.E,D=e.a4,O=e.a5,C=e.B},function(e){R=e._,_=e.P,w=e.a},function(e){x=e.b,q=e.S}],execute:function(){const T=[{label:"男",value:"1"},{label:"女",value:"2"}],F=[{label:"有",value:"1"},{label:"无",value:"2"}],P=[{value:1,label:"第5个保单周年日"},{value:2,label:"起始领取年龄55周岁"},{value:3,label:"起始领取年龄60周岁"},{value:4,label:"起始领取年龄65周岁"},{value:5,label:"起始领取年龄70周岁"},{value:6,label:"起始领取年龄75周岁"}],U=[{value:1,label:"年领"},{value:2,label:"月领"}],A=[{label:"趸交",value:"1"},{label:"年交",value:"2"},{label:"半年交",value:"3"},{label:"季交",value:"4"},{label:"月交",value:"5"}],j=[{label:"趸交",value:"single"},{label:"1年交",value:"year_1"},{label:"5年交",value:"year_5"},{label:"10年交",value:"year_10"},{label:"15年交",value:"year_15"},{label:"20年交",value:"year_20"},{label:"25年交",value:"year_25"},{label:"30年交",value:"year_30"},{label:"35年交",value:"year_35"}],S=[{label:"7天",value:"day_7"},{label:"14天",value:"day_14"},{label:"30天",value:"day_30"},{label:"1年",value:"year_1"},{label:"3年",value:"year_3"},{label:"5年",value:"year_5"},{label:"10年",value:"year_10"},{label:"15年",value:"year_15"},{label:"20年",value:"year_20"},{label:"25年",value:"year_25"},{label:"30年",value:"year_30"},{label:"35年",value:"year_35"},{label:"终身",value:"to_life"}],E=[{label:"主险保障期间减1",value:"3"},{label:"无限制",value:"2"}],Y=[{label:"返保额",value:1},{label:"返保费",value:2}],N=[{label:"投保",value:1},{label:"不投保",value:2}],B=(e={})=>x.post("/api/gateway/system/dict/v2/queryDictInfo",e);new q({source:"sessionStorage"});const M=new q({source:"localStorage"});new q({source:"cookie"});const $={class:"com-occupational-wrapper"},G=(e=>(m("data-v-1e1e74de"),e=e(),p(),e))((()=>s("div",{class:"popup-title"},"选择职业",-1))),K={class:"popup-content"},z=i({props:{modelValue:{type:Array,required:!0,default:()=>[]},insuredCode:{type:String,required:!0,default:""},show:{type:Boolean,required:!0,default:!1}},emits:["finish","close","update:modelValue"],setup(e,{emit:i}){const m=e,p=a({show:m.show,options:[],currentValue:""}),v=()=>{i("close")},f=({value:e,selectedOptions:a})=>{const l=(a||[]).map((e=>e.value)).join("/");i("update:modelValue",e),i("finish",l),v()};return l((()=>{(()=>{var e,i;const a=`${null===(e=m.insurerCode)||void 0===e||null===(i=e.toLocaleUpperCase)||void 0===i?void 0:i.call(e)}_OCCUPATION`,l=M.get("occupational")||{};l[a]?p.options=l[a]:B({dictCodeList:[a]}).then((({code:e,data:i})=>{if("10000"===e){var o;const e=(e=>{const i=e,a=e=>{e.forEach((e=>{const i=e;i.children.length?a(i.children):i.children=null}))};return a(i),i})((null==i||null===(o=i[0])||void 0===o?void 0:o.dictItemList)||[]);p.options=e,l[a]=e,M.set("occupational",l)}}))})()})),o((()=>m.modelValue),(e=>{}),{deep:!0,immediate:!0}),(e,i)=>{const a=n("van-cascader"),l=n("VanPopup");return t(),r("div",$,[d(l,{show:c(p).show,"onUpdate:show":i[1]||(i[1]=e=>c(p).show=e),"show-footer":"",position:"bottom",closeable:"",onClose:v},{default:u((()=>[G,s("div",K,[d(a,{modelValue:c(p).currentValue,"onUpdate:modelValue":i[0]||(i[0]=e=>c(p).currentValue=e),title:"请选择职业","show-header":!1,placeholder:"请选择",options:c(p).options,"active-color":"#0d6efe","field-names":{text:"value",value:"code",children:"children"},onFinish:f},null,8,["modelValue","options"])])])),_:1},8,["show"])])}}});var H=R(z,[["__scopeId","data-v-1e1e74de"]]);const W={class:"com-personal-info-wrapper"},Z=i({props:{formInfo:{type:Object,required:!0,default:()=>{}},insuredCode:{type:String,required:!0,default:""},factorList:{type:Array,required:!0,default:()=>[]}},setup(e,{expose:i}){const l=e,[o,m]=v(),[p,I]=v(),h=f(),L=a({formInfo:null==l?void 0:l.formInfo,occupationalText:""}),D=e=>{L.occupationalText=e},O=()=>{I(!1)};return i({validateForm:()=>new Promise(((e,i)=>{null==h||h.value.validate().then((()=>{e("")}),(()=>{i()}))}))}),(i,a)=>{const l=n("VanField"),v=n("VanForm"),f=n("van-datetime-picker"),C=n("van-popup");return t(),r("div",W,[d(v,{ref_key:"formRef",ref:h,"input-align":"right","error-message-align":"right"},{default:u((()=>[e.factorList.includes("APPLICANT.AGE")||e.factorList.includes("AGE")?(t(),y(l,{key:0,modelValue:c(L).formInfo.birthday,"onUpdate:modelValue":a[0]||(a[0]=e=>c(L).formInfo.birthday=e),rules:[{required:!0,message:"请选择"}],name:"birth",label:"出生日期","is-link":"",placeholder:"请选择",onClick:a[1]||(a[1]=e=>c(m)(!0))},null,8,["modelValue"])):k("",!0),e.factorList.includes("APPLICANT.GENDER")||e.factorList.includes("GENDER")?(t(),y(l,{key:1,modelValue:c(L).formInfo.gender,"onUpdate:modelValue":a[3]||(a[3]=e=>c(L).formInfo.gender=e),name:"gender",label:"性别",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:c(L).formInfo.gender,"onUpdate:modelValue":a[2]||(a[2]=e=>c(L).formInfo.gender=e),options:c(T)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):k("",!0),e.factorList.includes("SOCIAL_INS")?(t(),y(l,{key:2,modelValue:c(L).formInfo.socialSecurity,"onUpdate:modelValue":a[5]||(a[5]=e=>c(L).formInfo.socialSecurity=e),name:"socialSecurity",label:"社保",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:c(L).formInfo.socialSecurity,"onUpdate:modelValue":a[4]||(a[4]=e=>c(L).formInfo.socialSecurity=e),options:c(F)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])):k("",!0),e.factorList.includes("OCCUPATION_CATEGORY")?(t(),y(l,{key:3,modelValue:c(L).formInfo.occupationalClass,"onUpdate:modelValue":a[6]||(a[6]=e=>c(L).formInfo.occupationalClass=e),rules:[{required:!0,message:"请选择"}],name:"occupationalClass",label:"职业类型","is-link":"",placeholder:"请选择",onClick:a[7]||(a[7]=e=>c(I)(!0))},{input:u((()=>[s("div",null,V(c(L).occupationalText),1)])),_:1},8,["modelValue"])):k("",!0)])),_:1},512),d(C,{show:c(o),"onUpdate:show":a[10]||(a[10]=e=>g(o)?o.value=e:null),position:"bottom"},{default:u((()=>[d(f,{type:"date","min-date":new Date("1900-01-01"),"max-date":new Date,onConfirm:a[8]||(a[8]=e=>{c(L).formInfo.birthday=c(b)(e).format("YYYY-MM-DD"),c(m)(!1)}),onCancel:a[9]||(a[9]=e=>c(m)(!1))},null,8,["min-date","max-date"])])),_:1},8,["show"]),c(p)?(t(),y(H,{key:0,modelValue:c(L).formInfo.occupationalClass,"onUpdate:modelValue":a[11]||(a[11]=e=>c(L).formInfo.occupationalClass=e),show:c(p),"insured-code":"insuredCode",onFinish:D,onClose:O},null,8,["modelValue","show"])):k("",!0)])}}}),J={class:"com-risk-card-wrapper"},Q={key:0},X={key:0},ee={key:1},ie={key:7,class:"liab-desc"},ae=s("div",{class:"title"},"责任投保说明",-1),le=i({props:{originData:{type:Object,required:!0,default:()=>{}},formInfo:{type:Object,required:!0,default:()=>{}},mainRiskData:{type:Object,default:()=>{}},index:{type:[Number,String],default:0,required:!0}},setup(e){const i=e,m=a({formInfo:i.formInfo}),p=e=>"boolean"!=typeof e&&!e||(!(!Array.isArray(e)||e.length)||"object Object"==={}.toString.call(e)&&Object.keys(e).length),v=(e,i)=>{let a=i;return Array.isArray(i)||(a=[`${a}`]),(e||[]).filter((e=>a.includes(`${e.value}`)))},f=I((()=>{var e,a,l,o,n,t,r,d;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?v(S,null==i||null===(n=i.originData)||void 0===n||null===(t=n.riskInsureLimitVO)||void 0===t?void 0:t.insurancePeriodValueList):2===(null===(a=i.originData)||void 0===a?void 0:a.periodType)?v([{value:"4",label:"1年"}],null==i||null===(r=i.originData)||void 0===r||null===(d=r.riskInsureLimitVO)||void 0===d?void 0:d.insurancePeriodRule):v(S,null==i||null===(l=i.mainRiskData)||void 0===l||null===(o=l.riskInsureLimitVO)||void 0===o?void 0:o.insurancePeriodValueList)})),b=I((()=>{var e,a,l,o,n,t,r,d,u,s,c;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?v(j,null==i||null===(t=i.originData)||void 0===t||null===(r=t.riskInsureLimitVO)||void 0===r?void 0:r.paymentPeriodValueList):1===(null===(a=i.originData)||void 0===a?void 0:a.exemptFlag)?v(E,null==i||null===(d=i.originData)||void 0===d||null===(u=d.riskInsureLimitVO)||void 0===u?void 0:u.paymentPeriodRule):2===(null===(l=i.originData)||void 0===l?void 0:l.periodType)?v([{value:"4",label:"1年交"}],null==i||null===(s=i.originData)||void 0===s||null===(c=s.riskInsureLimitVO)||void 0===c?void 0:c.paymentPeriodRule):v(j,null==i||null===(o=i.mainRiskData)||void 0===o||null===(n=o.riskInsureLimitVO)||void 0===n?void 0:n.paymentPeriodValueList)})),g=I((()=>{var e,a,l,o,n;return 1===(null===(e=i.originData)||void 0===e?void 0:e.riskType)?v(A,null==i||null===(o=i.originData)||void 0===o||null===(n=o.riskInsureLimitVO)||void 0===n?void 0:n.paymentFrequencyList):v(A,null==i||null===(a=i.mainRiskData)||void 0===a||null===(l=a.riskInsureLimitVO)||void 0===l?void 0:l.paymentFrequencyList)})),D=I((()=>{var e,a;let l=0,o=0;return((null===(e=i.originData)||void 0===e||null===(a=e.riskCalcMethodInfoVO)||void 0===a?void 0:a.paymentMethodLimitList)||[]).forEach(((e,i)=>{0===i&&(l=e.minAmount,o=e.maxAmount),l>e.minAmount&&(l=e.minAmount),o<e.maxAmount&&(o=e.maxAmount)})),m.formInfo[i.index].sumInsured=l,{min:l,max:o}}));return l((()=>{var e;const a={riskType:i.originData.riskType,riskId:i.originData.id,riskCode:i.originData.riskCode,mainRiskCode:i.originData.riskCode,mainRiskId:i.originData.id,riskCategory:i.originData.riskCategory,liabilityVOList:(i.originData.riskLiabilityInfoVOList||[]).map((e=>({liabilityAttributeCode:e.liabilityAttribute,liabilityAttributeValue:e.liabilityAttributeValue,liabilityCode:e.liabilityCode,liabilityId:e.id,liabilityRateType:e.liabilityRateType})))};Object.assign(null==m||null===(e=m.formInfo)||void 0===e?void 0:e[i.index],a)})),o((()=>i.originData),(()=>{}),{immediate:!0,deep:!0}),(i,a)=>{var l,o,I,O,C,R,w,x,q,T,F,A,j,S,E,B,M,$,G,K,z,H,W;const Z=n("VanStepper"),le=n("VanField");return t(),r("div",J,[1===(null===(l=e.originData)||void 0===l||null===(o=l.riskCalcMethodInfoVO)||void 0===o?void 0:o.saleMethod)?(t(),y(le,{key:0,modelValue:c(m).formInfo[e.index].sumInsured,"onUpdate:modelValue":a[1]||(a[1]=i=>c(m).formInfo[e.index].sumInsured=i),label:"保额",name:"sumInsured",rules:[{required:!0,message:"请填写"}]},{input:u((()=>[d(Z,{modelValue:c(m).formInfo[e.index].sumInsured,"onUpdate:modelValue":a[0]||(a[0]=i=>c(m).formInfo[e.index].sumInsured=i),min:c(D).min,max:c(D).max},null,8,["modelValue","min","max"])])),_:1},8,["modelValue"])):k("",!0),2===(null===(I=e.originData)||void 0===I||null===(O=I.riskCalcMethodInfoVO)||void 0===O?void 0:O.saleMethod)?(t(),y(le,{key:1,modelValue:c(m).formInfo[e.index].premium,"onUpdate:modelValue":a[3]||(a[3]=i=>c(m).formInfo[e.index].premium=i),label:"保费",name:"premium",rules:[{required:!0,message:"请填写"}]},{input:u((()=>[d(Z,{modelValue:c(m).formInfo[e.index].premium,"onUpdate:modelValue":a[2]||(a[2]=i=>c(m).formInfo[e.index].premium=i)},null,8,["modelValue"])])),_:1},8,["modelValue"])):k("",!0),p(null===(C=e.originData)||void 0===C||null===(R=C.riskInsureLimitVO)||void 0===R?void 0:R.insurancePeriodValueList)&&p(null===(w=e.originData)||void 0===w||null===(x=w.riskInsureLimitVO)||void 0===x?void 0:x.insurancePeriodRule)?k("",!0):(t(),y(le,{key:2,modelValue:c(m).formInfo[e.index].coverageYear,"onUpdate:modelValue":a[5]||(a[5]=i=>c(m).formInfo[e.index].coverageYear=i),label:"保障期间",name:"coverageYear",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:c(m).formInfo[e.index].coverageYear,"onUpdate:modelValue":a[4]||(a[4]=i=>c(m).formInfo[e.index].coverageYear=i),options:c(f)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),p(null===(q=e.originData)||void 0===q||null===(T=q.riskInsureLimitVO)||void 0===T?void 0:T.paymentPeriodValueList)&&p(null===(F=e.originData)||void 0===F||null===(A=F.riskInsureLimitVO)||void 0===A?void 0:A.paymentPeriodRule)?k("",!0):(t(),y(le,{key:3,modelValue:c(m).formInfo[e.index].paymentYear,"onUpdate:modelValue":a[7]||(a[7]=i=>c(m).formInfo[e.index].paymentYear=i),label:"交费期间",name:"paymentYear",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:c(m).formInfo[e.index].paymentYear,"onUpdate:modelValue":a[6]||(a[6]=i=>c(m).formInfo[e.index].paymentYear=i),options:c(b)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),p(null===(j=e.originData)||void 0===j||null===(S=j.riskInsureLimitVO)||void 0===S?void 0:S.paymentFrequencyList)&&p(null===(E=e.originData)||void 0===E||null===(B=E.riskInsureLimitVO)||void 0===B?void 0:B.paymentTypeRule)?k("",!0):(t(),y(le,{key:4,modelValue:c(m).formInfo[e.index].paymentFrequency,"onUpdate:modelValue":a[9]||(a[9]=i=>c(m).formInfo[e.index].paymentFrequency=i),label:"交费方式",name:"paymentFrequency",rules:[{required:!0,message:"请选择"}]},{input:u((()=>[d(_,{modelValue:c(m).formInfo[e.index].paymentFrequency,"onUpdate:modelValue":a[8]||(a[8]=i=>c(m).formInfo[e.index].paymentFrequency=i),options:c(g)},null,8,["modelValue","options"])])),_:1},8,["modelValue"])),p(null===(M=e.originData)||void 0===M||null===($=M.riskInsureLimitVO)||void 0===$?void 0:$.annuityDrawTypeList)?k("",!0):(t(),y(le,{key:5,modelValue:c(m).formInfo[e.index].annuityDrawDate,"onUpdate:modelValue":a[11]||(a[11]=i=>c(m).formInfo[e.index].annuityDrawDate=i),label:"领取时间",name:"annuityDrawDate",rules:[{required:!0,message:"请选择"}]},{input:u((()=>{var i,l;return[d(_,{modelValue:c(m).formInfo[e.index].annuityDrawDate,"onUpdate:modelValue":a[10]||(a[10]=i=>c(m).formInfo[e.index].annuityDrawDate=i),options:v(c(P),null===(i=e.originData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawTypeList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),p(null===(G=e.originData)||void 0===G||null===(K=G.riskInsureLimitVO)||void 0===K?void 0:K.annuityDrawFrequencyList)?k("",!0):(t(),y(le,{key:6,modelValue:c(m).formInfo[e.index].annuityDrawType,"onUpdate:modelValue":a[13]||(a[13]=i=>c(m).formInfo[e.index].annuityDrawType=i),label:"领取方式",name:"annuityDrawType",rules:[{required:!0,message:"请选择"}]},{input:u((()=>{var i,l;return[d(_,{modelValue:c(m).formInfo[e.index].annuityDrawType,"onUpdate:modelValue":a[12]||(a[12]=i=>c(m).formInfo[e.index].annuityDrawType=i),options:v(c(U),null===(i=e.originData)||void 0===i||null===(l=i.riskInsureLimitVO)||void 0===l?void 0:l.annuityDrawFrequencyList)},null,8,["modelValue","options"])]})),_:1},8,["modelValue"])),(t(!0),r(h,null,L((null===(z=e.originData)||void 0===z?void 0:z.riskLiabilityInfoVOList)||[],(i=>(t(),y(le,{key:i.liabilityId,label:i.liabilityName,name:"liabilityAttributeValue",rules:[{required:1===i.optionalFlag&&i.liabilityAttributeValue,message:"请选择"}]},{input:u((()=>[1===i.optionalFlag?(t(),r("div",Q,[i.liabilityAttributeValue?(t(),y(_,{key:1,modelValue:c(m).formInfo[e.index].liabilityVOList,"onUpdate:modelValue":a[14]||(a[14]=i=>c(m).formInfo[e.index].liabilityVOList=i),options:c(Y)},null,8,["modelValue","options"])):(t(),r("span",X,"50万"))])):(t(),r("div",ee,[i.liabilityAttributeValue?(t(),y(_,{key:1,modelValue:c(m).formInfo[e.index].liabilityVOList,"onUpdate:modelValue":a[16]||(a[16]=i=>c(m).formInfo[e.index].liabilityVOList=i),options:c(Y)},null,8,["modelValue","options"])):(t(),y(_,{key:0,modelValue:c(m).formInfo[e.index].liabilityVOList,"onUpdate:modelValue":a[15]||(a[15]=i=>c(m).formInfo[e.index].liabilityVOList=i),options:c(N)},null,8,["modelValue","options"]))]))])),_:2},1032,["label","rules"])))),128)),null!==(H=e.originData)&&void 0!==H&&H.relationDesc?(t(),r("div",ie,[ae,s("div",null,V(null===(W=e.originData)||void 0===W?void 0:W.relationDesc),1)])):k("",!0)])}}});const oe={class:"com-risk-list-wrapper"},ne=(e=>(m("data-v-aeeb813a"),e=e(),p(),e))((()=>s("div",{class:"popup-title"},"选择附加险",-1))),te={class:"risk-list"},re={class:"footer-bar"},de=C("确认"),ue=i({props:{riskList:{type:Array,required:!0,default:()=>[]},show:{type:Boolean,required:!0,default:!1},collocationList:{type:Array,default:()=>[]},disabled:{type:Array,required:!0,default:()=>[]},modelValue:{type:Array,required:!0,default:()=>[]}},emits:["finished","close","update:modelValue"],setup(e,{emit:i}){const l=e,m=f([]),p=f([]),v=f(l.disabled),k=a({show:l.show,currentChecked:[]}),V=e=>{var i,a,o;((e,i)=>{l.collocationList.forEach((a=>{e===a.riskId&&(i?1===a.collocationType?k.currentChecked=k.currentChecked.filter((i=>!(i===a.collocationRiskId||i===e))):3===a.collocationType&&v.value.filter((e=>e!==a.collocationRiskId)):1===a.collocationType?k.currentChecked.push(a.collocationRiskId,e):3===a.collocationType&&v.value.push(a.collocationRiskId))}))})(e,k.currentChecked.includes(e)),null==m||null===(i=m.value)||void 0===i||null===(a=i[e])||void 0===a||null===(o=a.toggle)||void 0===o||o.call(a)},b=()=>{i("close")},g=()=>{const e=l.riskList.filter((e=>k.currentChecked.includes(e.id)));i("update:modelValue",p),i("finished",e),i("close")};return D((()=>{m.value=[]})),o((()=>l.modelValue),(e=>{p.value=e,v.value=e}),{deep:!0,immediate:!0}),(i,a)=>{const l=n("van-checkbox"),o=n("VanCell"),f=n("van-cell-group"),I=n("van-checkbox-group"),D=n("VanButton"),C=n("VanPopup");return t(),r("div",oe,[d(C,{show:c(k).show,"onUpdate:show":a[2]||(a[2]=e=>c(k).show=e),title:"选择附加险","show-footer":"",position:"bottom",closeable:"",onClose:b},{default:u((()=>[ne,s("div",te,[d(I,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e)},{default:u((()=>[d(f,{inset:""},{default:u((()=>[(t(!0),r(h,null,L(e.riskList,(e=>(t(),y(o,{key:e.id,title:e.riskName,onClick:i=>V(e.id)},{"right-icon":u((()=>[d(l,{ref_for:!0,ref:i=>m.value[e.id]=i,disabled:v.value.includes(e.id),shape:"square",name:e.id,onClick:a[0]||(a[0]=O((()=>{}),["stop"]))},null,8,["disabled","name"])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])]),s("div",re,[d(D,{type:"primary",disabled:!c(k).currentChecked.length,block:"",onClick:g},{default:u((()=>[de])),_:1},8,["disabled"])])])),_:1},8,["show"])])}}});var se=R(ue,[["__scopeId","data-v-aeeb813a"]]);const ce={class:"risk-list-wrapper"},me={key:0,class:"add-rider-risk"},pe={class:"left-part"},ve=C("+ 附加险"),fe=i({props:{riskInfo:{type:Object,required:!0,default:()=>{}},originData:{type:Object,required:!0,default:()=>{}},pickFactor:{type:Function,required:!0,default:()=>{}}},setup(e){const i=e,[l,n]=v(!1);f(null),f(null);const m=a({mainRiskInfo:i.riskInfo,riderRiskInfo:i.riskInfo[0].riderRiskVOList,requiredRiderRiskData:[],mainRiskData:{},riderRiskList:[],checkedList:[],relationListNum:0,disabledList:[]}),p=(e,i)=>{m.riderRiskInfo.push({}),m.disabledList=i,m.requiredRiderRiskData=m.requiredRiderRiskData.concat(e)};return o((()=>m.mainRiskInfo),(()=>{}),{deep:!0,immediate:!0}),o((()=>m.riderRiskInfo),(()=>{}),{deep:!0,immediate:!0}),o((()=>m.requiredRiderRiskData),(e=>{const a=[m.mainRiskData,...e];let l=[],o=[];a.forEach((e=>{var i;const a=(null==e||null===(i=e.riskCalcMethodInfoVO)||void 0===i?void 0:i.riskFactorRelationList)||[];l=l.concat(a.filter((e=>"insured"===e.factorObject)).map((e=>e.factorCode))),o=o.concat(a.filter((e=>"holder"===e.factorObject)).map((e=>e.factorCode)))})),i.pickFactor({insuredFactorList:[...new Set(l)],holderFactorList:[...new Set(o)]})}),{deep:!0,immediate:!0}),o((()=>i.originData),(e=>{(e||[]).forEach((e=>{1===e.riskType?(m.mainRiskData=e,m.requiredRiderRiskData=(null==e?void 0:e.requiredRiderRiskVOList)||[],m.riderRiskList=null==e?void 0:e.optionalRiderRiskVOList):m.riderRiskList.push(e)}))}),{deep:!0,immediate:!0}),(e,i)=>(t(),r("div",ce,[d(le,{"form-info":c(m).mainRiskInfo,index:0,"origin-data":c(m).mainRiskData},null,8,["form-info","origin-data"]),(t(!0),r(h,null,L(c(m).requiredRiderRiskData,((e,i)=>(t(),y(le,{key:e.id,"form-info":c(m).riderRiskInfo,index:i,"main-risk-data":c(m).mainRiskData,"origin-data":e},null,8,["form-info","index","main-risk-data","origin-data"])))),128)),c(m).riderRiskList.length-c(m).checkedList.length?(t(),r("div",me,[s("span",pe,V(`共有${c(m).riderRiskList.length-c(m).checkedList.length}款附加险可以添加`),1),d(w,{activied:"",onClick:i[0]||(i[0]=e=>c(n)(!0))},{default:u((()=>[ve])),_:1})])):k("",!0),c(l)?(t(),y(se,{key:1,modelValue:c(m).checkedList,"onUpdate:modelValue":i[1]||(i[1]=e=>c(m).checkedList=e),show:c(l),disabled:c(m).disabledList,"risk-list":c(m).riderRiskList,"collocation-list":c(m).mainRiskData.collocationVOList||[],onFinished:p,onClose:i[2]||(i[2]=e=>c(n)(!1))},null,8,["modelValue","show","disabled","risk-list","collocation-list"])):k("",!0)]))}});var ye=R(fe,[["__scopeId","data-v-f37289bc"]]);const ke=e=>(m("data-v-ca9a3e7e"),e=e(),p(),e),Ve={key:0,class:"part-card"},be=ke((()=>s("div",{class:"part-title"},"投保人",-1))),ge={key:1,class:"part-card"},Ie=ke((()=>s("div",{class:"part-title"},"被保人",-1))),he={class:"risk-content"},Le={key:0,class:"risk"},De={key:1,class:"plan-risk"},Oe={class:"footer-bar"},Ce={class:"trial-result"},Re=C("去试算"),_e=C("去投保");e("default",R(i({setup(e){const i=f({personVO:{}}),m=f({insuredCode:"",personVO:{}}),p=f([{liabilityVOList:[],riderRiskVOList:[{}]}]),v=f({}),b=f({}),g=f({}),I=a({currentPlan:"",riskBaseInfo:{},holderFactor:[],insuredFactor:[],riskData:[],riskPlanData:[],trialResult:{},canTrial:!0}),D=()=>{var e,a,l;((e={})=>x.post("/api/insurance/premiumCalc",e))({...{holder:{personVO:{...i.value.personVO,birthday:i.value.personVO.birthday&&`${i.value.personVO.birthday} 00:00:00`}},productCode:null==I||null===(e=I.riskBaseInfo)||void 0===e?void 0:e.productCode,insuredVOList:[{...m.value,personVO:{...m.value.personVO,birthday:m.value.personVO.birthday&&`${m.value.personVO.birthday} 00:00:00`},productPlanVOList:[{planCode:I.currentPlan||(null===(a=I.riskPlanData)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.planCode),riskVOList:p.value}]}]}}).then((({code:e,data:i})=>{"10000"===e&&(I.trialResult=i,I.canTrial=!1)}))},O=()=>{var e,i,a,l,o;Promise.all([null==v||null===(e=v.value)||void 0===e||null===(i=e.validateForm)||void 0===i?void 0:i.call(e),null==b||null===(a=b.value)||void 0===a||null===(l=a.validateForm)||void 0===l?void 0:l.call(a),null==g||null===(o=g.value)||void 0===o?void 0:o.validate()]).then((()=>{D()}))},C=()=>{((e={})=>x.get(`/api/product/insureProductDetail/${null==e?void 0:e.productId}`,e))({productId:115}).then((({code:e,data:i})=>{"10000"===e&&(I.riskBaseInfo=null==i?void 0:i.productBasicInfoVO,I.riskData=(null==i?void 0:i.riskDetailVOList)||[],I.riskPlanData=(null==i?void 0:i.productRelationPlanVOList)||[],(async()=>{var e,i,a;const l=["RISK_PAYMENT_PERIOD","RISK_INSURANCE_PERIOD","LIABILITY_ATTRIBUTE_TYPE",`${null==I||null===(e=I.riskBaseInfo)||void 0===e||null===(i=e.insurerCode)||void 0===i||null===(a=i.toLocaleUpperCase)||void 0===a?void 0:a.call(i)}_OCCUPATION`];await B({dictCodeList:l})})())})).finally((()=>{}))},R=e=>{I.holderFactor=e.insuredFactorList,I.insuredFactor=e.holderFactorList};return o([()=>p.value,()=>i.value,()=>m.value],(e=>{e&&I.canTrial&&(I.canTrial=!0)}),{deep:!0}),l((()=>{C()})),(e,a)=>{const l=n("VanForm"),o=n("VanTab"),f=n("VanTabs"),D=n("VanButton"),C=n("ZaPageWrap");return t(),y(C,{class:"page-trial-wrapper"},{default:u((()=>{var e,n;return[c(I).holderFactor.length?(t(),r("div",Ve,[be,d(Z,{ref_key:"holderRef",ref:v,"insured-code":null===(e=c(I).riskBaseInfo)||void 0===e?void 0:e.insuredCode,"form-info":i.value.personVO,"factor-list":c(I).holderFactor},null,8,["insured-code","form-info","factor-list"])])):k("",!0),c(I).insuredFactor.length?(t(),r("div",ge,[Ie,d(Z,{ref_key:"insuredRef",ref:b,"insured-code":null===(n=c(I).riskBaseInfo)||void 0===n?void 0:n.insuredCode,"form-info":m.value.personVO,"factor-list":c(I).insuredFactor},null,8,["insured-code","form-info","factor-list"])])):k("",!0),s("div",he,[c(I).riskData.length?(t(),r("div",Le,[d(l,{ref_key:"riskFormRef",ref:g,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(ye,{"risk-info":p.value,"origin-data":c(I).riskData,"pick-factor":R},null,8,["risk-info","origin-data"])])),_:1},512)])):k("",!0),c(I).riskPlanData.length?(t(),r("div",De,[d(l,{ref_key:"riskFormRef",ref:g,"input-align":"right","error-message-align":"right"},{default:u((()=>[d(f,{modelValue:c(I).currentPlan,"onUpdate:modelValue":a[0]||(a[0]=e=>c(I).currentPlan=e)},{default:u((()=>[(t(!0),r(h,null,L(c(I).riskPlanData,(e=>(t(),y(o,{key:e.planCode,name:e.planCode,title:e.planName},{default:u((()=>[d(ye,{"risk-info":p.value,"origin-data":e.riskDetailVOList,"pick-factor":R},null,8,["risk-info","origin-data"])])),_:2},1032,["name","title"])))),128))])),_:1},8,["modelValue"])])),_:1},512)])):k("",!0)]),s("div",Oe,[s("span",Ce,V(c(I).trialResult.premium),1),c(I).canTrial?(t(),y(D,{key:0,type:"primary",onClick:O},{default:u((()=>[Re])),_:1})):(t(),y(D,{key:1,type:"primary",onClick:O},{default:u((()=>[_e])),_:1}))])]})),_:1})}}}),[["__scopeId","data-v-ca9a3e7e"]]))}}}))}();

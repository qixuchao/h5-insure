import{i as e,aa as t,P as a,R as n,r,N as i,A as o,o as d,l as s,m as l,n as u,p as f,C as c,t as p,x as I,s as v,F as m,H as y,B as O,L,G as b}from"./vendor-86ac9d42.js";import{h as C,s as g,n as x,b as h,g as T,N as E,A as P,t as R}from"./index-0db00022.js";import{a as B,B as H}from"./infoCollection-4b71a25b.js";import{_ as V}from"./index-808025b7.js";import{I as A}from"./InsuredPart-8e8f2ec3.js";import{u as _}from"./useDicData-9109b518.js";import"./relativeTime-66b9eb0d.js";import"./trial-4bcd5b24.js";const j={key:0,class:"beneficiary-part"},w={class:"part-title"},N={class:"title"},U={class:"radio-item-wrapper"},k={class:"name"},D={class:"hone"},S={class:"address"},F={class:"footer-button"},q=b("下一步"),$=e({setup(e){const b=t(),$=a(),{templateId:G=1,orderNo:Y="2022072710380711215",tenantId:W="9991000007",isShare:z,sharePageCode:J}=$.query;n();const K="/infoPreview"===$.path?"infoPreview":"infoCollection",M=r({}),Q=_("NATIONAL_REGION_CODE"),X=r({extInfo:{pageCode:K},tenantOrderHolder:{extInfo:{}},tenantOrderInsuredList:[{relationToHolder:"0",extInfo:{},insuredBeneficiaryType:"1",tenantOrderBeneficiaryList:[{beneficiaryId:0,extInfo:{}}]}],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0}}),Z=r(null),ee=r([]),te=r([]),ae=r([]),ne=r([]),re=r([]),ie=i({beneficiaryId:0,addressList:[],nextPage:"",currentAddress:null,isLoading:!0}),oe=o((()=>{var e,t;return(null==(t=null==(e=X.value.extInfo)?void 0:e.contactInfo)?void 0:t[0])||{}})),de=()=>{z?g(`${J}`,$.query):x(X.value).then((({code:e,data:t})=>{"10000"===e&&"jumpToPage"===t.pageAction.pageAction&&b.push({path:h[t.pageAction.data.nextPageCode],query:$.query})}))};return d((()=>{T({orderNo:Y,tenantId:W}).then((({code:e,data:t})=>{if("10000"===e){const e=t;e.extInfo={...e.extInfo,pageCode:K,templateId:G,buttonCode:E.infoPreview},e.tenantOrderHolder=e.tenantOrderHolder||{},e.tenantOrderHolder.extInfo=e.tenantOrderHolder.extInfo||{occupationCodeList:[]},e.tenantOrderInsuredList[0].extInfo=e.tenantOrderInsuredList[0].extInfo||{occupationCodeList:[]},e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList=e.tenantOrderInsuredList[0].tenantOrderBeneficiaryList.map((e=>{const t=e;return t.extInfo=t.extInfo||{},t})),e.tenantOrderAttachmentList.forEach((e=>{e.category===P.OBVERSE_CERT?e.objectType===R.HOLDER?(ee.value[0]=e.uri,ae.value[0]=e.id):e.objectType===R.INSURED&&(te.value[0]=e.uri,ne.value[0]=e.id):e.category===P.REVERSE_CERT&&(e.objectType===R.HOLDER?(ee.value[1]=e.uri,ae.value[1]=e.id):e.objectType===R.INSURED&&(te.value[1]=e.uri,ae.value[1]=e.id))})),Object.assign(X.value,e)}})).finally((()=>{ie.isLoading=!1})),C({pageCode:"infoCollection",templateId:G}).then((({code:e,data:t})=>{if("10000"===e){const e={BENEFICIARY:[],INSURER:[],HOLDER:[]};t.productInsureFactorList.forEach((t=>{(e[t.moduleType]=e[t.moduleType]||[]).push(t)})),M.value=e}}))})),(e,t)=>{const a=s("ProCard"),n=s("ProRadioButton"),r=s("ProField"),i=s("ProCascader"),o=s("van-cell"),d=s("ProForm"),b=s("VanButton"),C=s("ProPageWrap");return l(),u(C,{class:"page-info-wrapper"},{default:f((()=>[c(ie).isLoading?I("",!0):(l(),u(d,{key:0,ref_key:"formRef",ref:Z,"is-view":""},{default:f((()=>{var e;return[p(A,{"product-data":null==(e=X.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0]},null,8,["product-data"]),p(a,{title:"投保人"},{default:f((()=>[p(V,{images:ee.value,"onUpdate:images":t[0]||(t[0]=e=>ee.value=e),"form-info":X.value.tenantOrderHolder,"factor-list":M.value.HOLDER,"is-view":""},null,8,["images","form-info","factor-list"])])),_:1}),p(a,{title:"被保人"},{default:f((()=>[p(r,{modelValue:X.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[2]||(t[2]=e=>X.value.tenantOrderInsuredList[0].relationToHolder=e),label:"为谁保单",name:"relationToHolder",placeholder:"请选择"},{input:f((()=>[p(n,{modelValue:X.value.tenantOrderInsuredList[0].relationToHolder,"onUpdate:modelValue":t[1]||(t[1]=e=>X.value.tenantOrderInsuredList[0].relationToHolder=e),options:c(B),"is-view":""},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),1!=+X.value.tenantOrderInsuredList[0].relationToHolder?(l(),u(V,{key:0,images:te.value,"onUpdate:images":t[3]||(t[3]=e=>te.value=e),"form-info":X.value.tenantOrderInsuredList[0],"factor-list":M.value.INSURER||[],"is-view":""},null,8,["images","form-info","factor-list"])):I("",!0),p(i,{modelValue:X.value.tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:modelValue":t[4]||(t[4]=e=>X.value.tenantOrderInsuredList[0].extInfo.insureAreaCode=e),field1:X.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode,"onUpdate:field1":t[5]||(t[5]=e=>X.value.tenantOrderInsuredList[0].extInfo.insureProvinceCode=e),field2:X.value.tenantOrderInsuredList[0].extInfo.insureCityCode,"onUpdate:field2":t[6]||(t[6]=e=>X.value.tenantOrderInsuredList[0].extInfo.insureCityCode=e),field3:X.value.tenantOrderInsuredList[0].extInfo.insureAreaCode,"onUpdate:field3":t[7]||(t[7]=e=>X.value.tenantOrderInsuredList[0].extInfo.insureAreaCode=e),label:"投保地区",name:"insureProvinceCode",placeholder:"请选择","is-link":"",required:"","data-source":c(Q),mapping:{label:"name",value:"code",children:"children"}},null,8,["modelValue","field1","field2","field3","data-source"])])),_:1}),p(a,{title:"受益人"},{default:f((()=>[p(r,{modelValue:X.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[9]||(t[9]=e=>X.value.tenantOrderInsuredList[0].insuredBeneficiaryType=e),label:"受益人类型",name:"insuredBeneficiaryType",placeholder:"请选择"},{input:f((()=>[p(n,{modelValue:X.value.tenantOrderInsuredList[0].insuredBeneficiaryType,"onUpdate:modelValue":t[8]||(t[8]=e=>X.value.tenantOrderInsuredList[0].insuredBeneficiaryType=e),options:c(H),"is-view":""},null,8,["modelValue","options"])])),_:1},8,["modelValue"]),2==X.value.tenantOrderInsuredList[0].insuredBeneficiaryType?(l(),v("div",j,[(l(!0),v(m,null,y(X.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList,((e,a)=>(l(),v("div",{key:e.beneficiaryId,class:"beneficiary-item"},[O("div",w,[O("span",N,L(`受益人${a+1}`),1)]),p(V,{images:re.value,"onUpdate:images":t[10]||(t[10]=e=>re.value=e),"form-info":e,"factor-list":M.value.BENEFICIARY||[],prefix:`beneficiary-${a}`,"is-view":"","beneficiary-list":X.value.tenantOrderInsuredList[0].tenantOrderBeneficiaryList},null,8,["images","form-info","factor-list","prefix","beneficiary-list"])])))),128))])):I("",!0)])),_:1}),p(a,{title:"保单通讯信息"},{default:f((()=>[Object.keys(c(oe)).length?(l(),u(o,{key:0,title:"单元格"},{title:f((()=>[O("div",U,[O("p",null,[O("span",k,L(c(oe).contactName),1),O("span",D,L(c(oe).contactPhoneNo),1)]),O("p",S,L(c(oe).contactAddress),1)])])),_:1})):I("",!0)])),_:1})]})),_:1},512)),O("div",F,[p(b,{block:"",type:"primary",onClick:de},{default:f((()=>[q])),_:1})])])),_:1})}}});export{$ as default};

var Ue=Object.defineProperty,Me=Object.defineProperties;var He=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var _e=(a,u,o)=>u in a?Ue(a,u,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[u]=o,L=(a,u)=>{for(var o in u||(u={}))Re.call(u,o)&&_e(a,o,u[o]);if(pe)for(var o of pe(u))qe.call(u,o)&&_e(a,o,u[o]);return a},U=(a,u)=>Me(a,He(u));import{g as Q,Q as Ee,E as B,y as se,j as h,n as V,z as d,J as S,p as r,L as we,A as t,B as $e,a4 as re,a5 as ue,F as M,G as Y,k as K,C as z,t as G,M as Ce,_ as le,r as O,m as b,a9 as Ye,O as Ke,h as ze,af as We,D as Je,H as je,T as Ge,l as Qe}from"./vendor-667a94d7.js";import{_ as X,u as Xe,q as Ve,a2 as ve,x as te,l as j,y as he,G as Ze,z as et,Q as De,A as tt,a3 as Ie}from"./index-a0b73b03.js";import{P as ot}from"./index-ed9bae2d.js";import{p as be,i as at,a as lt,s as nt,u as st,b as rt}from"./trial-67fe491f.js";import{p as ut}from"./product-6a3bb421.js";import{a as oe}from"./order-b675ac95.js";import{a as ne,S as ge,R as it,f as ae}from"./infoCollection-242da9b6.js";import{A as dt}from"./bankCard-b0679059.js";import{g as ct,l as mt,b as Fe,t as ft,a as pt}from"./utils-69a1d834.js";import"./trial-c49ed419.js";const _t=a=>(re("data-v-47f4f4ca"),a=a(),ue(),a),vt={class:"com-question-item"},ht={class:"question"},Dt=_t(()=>d("div",{class:"icon"},S("?"),-1)),It={class:"title"},bt=Q({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(a){const[u,o]=Ee(!1),w=B(),e=()=>{o()},A=se(()=>u.value?Xe(w.value):0);return(H,C)=>(h(),V("div",vt,[d("div",ht,[Dt,d("div",It,S(a.question),1),r(Ve,{name:"down",class:we(["arrow-icon",{show:t(u)}]),onClick:e},null,8,["class"])]),d("div",{ref_key:"answerDom",ref:w,class:"answer",style:$e({height:`${t(A)}px`})},S(a.answer),5)]))}});var gt=X(bt,[["__scopeId","data-v-47f4f4ca"]]);const Ft={class:"com-question"},yt=Q({props:{list:{type:Array,default:()=>[]}},setup(a){const u=a,[o,w]=Ee(!1),e=()=>{w()},A=se(()=>u.list.length<=4||o.value?u.list:u.list.slice(0,4));return(H,C)=>(h(),V("div",Ft,[(h(!0),V(M,null,Y(t(A),(l,g)=>(h(),K(gt,{key:g,question:l.title,answer:l.desc},null,8,["question","answer"]))),128)),a.list.length>4?(h(),V("div",{key:0,class:"show-more",onClick:e},[z(S(t(o)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),r(Ve,{name:"down",class:we(["icon",{showMore:t(o)}])},null,8,["class"])])):G("",!0)]))}});var Et=X(yt,[["__scopeId","data-v-40dd0994"]]);const ie=a=>(re("data-v-7dff4b7c"),a=a(),ue(),a),wt=ie(()=>d("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),Ct=ie(()=>d("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),Vt=ie(()=>d("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),Pt=Q({props:{disable:{type:Boolean,default:!1},holderDisable:{type:Boolean,default:!1},paymentMethodDisable:{type:Boolean,default:!1},premium:{default:0},formInfo:{default:()=>({})}},setup(a,{expose:u}){const o=a,w=B({}),e=Ce({insureDisable:!0,formInfo:o.formInfo}),A=()=>new Promise((C,l)=>{w==null||w.value.validate().then(()=>{C("")},()=>{l()})}),H=()=>{o.disable||(e.formInfo.renewalDK=!e.formInfo.renewalDK)};return le(()=>e.formInfo.insured.relationToHolder,(C,l)=>{o.disable||C!==l&&(C.toString()===ne.SELF?(e.formInfo.insured={certNo:e.formInfo.holder.certNo,name:e.formInfo.holder.name,socialFlag:e.formInfo.holder.socialFlag,relationToHolder:C},e.insureDisable=!0):(e.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:C},e.insureDisable=!1))}),le(()=>e.formInfo.holder,()=>{e.formInfo.insured.relationToHolder===ne.SELF&&Object.assign(e.formInfo.insured,e.formInfo.holder)},{deep:!0,immediate:!0}),u({validateForm:A}),(C,l)=>{const g=O("ProField"),k=O("ProRadioButton"),R=O("ProPicker"),q=O("ProTabButton"),Z=O("ProForm");return h(),K(Z,{ref_key:"formRef",ref:w},{default:b(()=>[d("div",null,[wt,r(g,{modelValue:t(e).formInfo.holder.name,"onUpdate:modelValue":l[0]||(l[0]=n=>t(e).formInfo.holder.name=n),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D","is-view":o.holderDisable||o.disable},null,8,["modelValue","is-view"]),r(g,{modelValue:t(e).formInfo.holder.certNo,"onUpdate:modelValue":l[1]||(l[1]=n=>t(e).formInfo.holder.certNo=n),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","validate-type":[t(ve).ID_CARD],"is-view":o.holderDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),r(g,{modelValue:t(e).formInfo.holder.mobile,"onUpdate:modelValue":l[2]||(l[2]=n=>t(e).formInfo.holder.mobile=n),label:"\u624B\u673A\u53F7",name:"mobile",required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7","is-view":o.holderDisable||o.disable},null,8,["modelValue","is-view"]),r(g,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":l[4]||(l[4]=n=>t(e).formInfo.holder.socialFlag=n),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:b(()=>[r(k,{modelValue:t(e).formInfo.holder.socialFlag,"onUpdate:modelValue":l[3]||(l[3]=n=>t(e).formInfo.holder.socialFlag=n),disabled:o.disable,options:t(ge)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),r(te),d("div",null,[Ct,r(g,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":l[6]||(l[6]=n=>t(e).formInfo.insured.relationToHolder=n),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:b(()=>[r(k,{modelValue:t(e).formInfo.insured.relationToHolder,"onUpdate:modelValue":l[5]||(l[5]=n=>t(e).formInfo.insured.relationToHolder=n),disabled:o.disable,options:t(it)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"]),r(g,{modelValue:t(e).formInfo.insured.name,"onUpdate:modelValue":l[7]||(l[7]=n=>t(e).formInfo.insured.name=n),label:"\u59D3\u540D",name:"name",required:"","is-view":t(e).insureDisable||o.disable},null,8,["modelValue","is-view"]),r(g,{modelValue:t(e).formInfo.insured.certNo,"onUpdate:modelValue":l[8]||(l[8]=n=>t(e).formInfo.insured.certNo=n),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","validate-type":[t(ve).ID_CARD],"is-view":t(e).insureDisable||o.disable},null,8,["modelValue","validate-type","is-view"]),r(g,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":l[10]||(l[10]=n=>t(e).formInfo.insured.socialFlag=n),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:b(()=>[r(k,{modelValue:t(e).formInfo.insured.socialFlag,"onUpdate:modelValue":l[9]||(l[9]=n=>t(e).formInfo.insured.socialFlag=n),disabled:o.disable||t(e).insureDisable,options:t(ge)},null,8,["modelValue","disabled","options"])]),_:1},8,["modelValue"])]),r(te),d("div",null,[Vt,r(g,{label:"\u6BCF\u6708\u4FDD\u8D39","is-view":!0},{input:b(()=>[z(S(o.premium)+" /\u6708 \u517112\u671F",1)]),_:1}),r(R,{modelValue:t(e).formInfo.paymentMethod,"onUpdate:modelValue":l[11]||(l[11]=n=>t(e).formInfo.paymentMethod=n),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":t(dt),"is-view":o.disable||t(e).formInfo.paymentMethodDisable,required:""},null,8,["modelValue","data-source","is-view"]),r(g,{label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9"},{input:b(()=>[r(q,{disabled:o.allDisabled,title:"\u514D\u8D39\u5F00\u901A",active:t(e).formInfo.renewalDK,onClick:H},null,8,["disabled","active"])]),_:1})]),r(te)]),_:1},512)}}});var Bt=X(Pt,[["__scopeId","data-v-7dff4b7c"]]);const Tt=a=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(a),ye=a=>/\W/.test(a);const St=a=>(re("data-v-19ca1624"),a=a(),ue(),a),At={class:"page-product-detail"},Nt={class:"info"},Ot=["src"],kt=["src"],xt={class:"guarantee-list"},Lt={key:0,class:"basic"},Ut={class:"tab-1"},Mt=["src"],Ht=St(()=>d("div",{class:"sub-title"},"*\u4EA7\u54C1\u8D44\u6599\u6587\u4EF6\u8BE6\u60C5\u53EF\u624B\u52A8\u653E\u5927\uFF0C\u4EE5\u4FBF\u60A8\u66F4\u6E05\u6670\u67E5\u9605\u5185\u5BB9\u3002",-1)),Rt={class:"tab-1-content"},qt=z(" \u8BF7\u67E5\u770B "),$t={key:0,class:"dun-hao"},Yt={class:"footer-button"},Kt={class:"price"},zt=z(" \u603B\u4FDD\u8D39"),Wt={class:"guarantee-list"},Jt={class:"title"},jt={class:"content"},Gt=Q({setup(a){const u=Ye(),o=Ke(),{productCode:w="BWYL2021",tenantId:e,extInfo:A,orderId:H}=o.query,C=ct(A),{phoneNo:l,saleChannelId:g,paymentMethod:k,certNo:R,name:q,orderId:Z}=C,n=H||Z,Pe=B([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),de=B(),ce=B(0),ee=B(!1),D=B(),W=B(),x=B(),Be=!!(q&&R&&l),Te=!!n,I=Ce({holder:{certNo:R,certType:De.CERT,mobile:l,name:q,socialFlag:ae.HAS},insured:{certNo:R,certType:De.CERT,name:q,socialFlag:ae.HAS,relationToHolder:ne.SELF},paymentMethod:k,paymentMethodDisable:!!k,renewalDK:!0}),Se=()=>{ee.value=!0},J=se(()=>{var f,i,m,p,_,v,F;return((m=(i=(f=D.value)==null?void 0:f.tenantProductInsureVO)==null?void 0:i.guaranteeList)==null?void 0:m.length)?(_=(p=D.value)==null?void 0:p.tenantProductInsureVO)==null?void 0:_.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(F=(v=D.value)==null?void 0:v.tenantProductInsureVO)==null?void 0:F.titleAndDescVOS}]}),me=()=>{const{holder:{certNo:f,mobile:i,name:m,socialFlag:p},insured:{certNo:_,name:v,socialFlag:F,relationToHolder:s},paymentMethod:c}=I,y=Ie(f)&&Tt(i)&&ye(m)&&!!p,E=Ie(_)&&ye(v)&&!!F&&!!s;return!!(y&&E&&!!c)},Ae=async f=>{try{const i=await st(f),{code:m}=i;if(m==="10000"){const p=await rt({id:f.id,tenantId:e}),{data:_}=p;window.location.href=_}}catch{}},Ne=f=>`https://planet-h5-insure-test.zhongan.io/activity/productDetail?tenantId=${e}&productCode=${w}&orderId=${f}`,Oe=async f=>{const i=pt({tenantId:e,saleChannelId:g,detail:D.value,paymentMethod:I.paymentMethod,renewalDK:I.renewalDK?"Y":"N",successJumpUrl:"",premium:x.value,holder:I.holder,insured:I.insured,tenantOrderRiskList:f,orderStatus:oe.UP_PROCESSING,orderTopStatus:"-1"}),m=await nt(i),{code:p,data:_}=m;p==="10000"&&(Ge.loading({forbidClick:!0,message:"\u6838\u4FDD\u4E2D..."}),Ae(U(L({},i),{id:_.data,extInfo:{extraInfo:{renewalDK:I.renewalDK||"N",paymentMethod:I.paymentMethod,successJumpUrl:Ne(_.data)}}})))},fe=async()=>{const{calcData:f,riskVOList:i}=Fe({holder:I.holder,insured:I.insured,tenantId:e,productDetail:D.value,insureDetail:W.value}),m=async()=>{const p=await be(f),{code:_,data:v}=p;return _==="10000"?(x.value=v.premium,{condition:i,data:v}):{}};m(),Qe.exports.debounce(m,500,{trailing:!0})},ke=()=>new Promise(f=>{var i,m;(m=(i=de.value)==null?void 0:i.validateForm)==null||m.call(i).then(async()=>{const{calcData:p,riskVOList:_}=Fe({holder:I.holder,insured:I.insured,tenantId:e,productDetail:D.value,insureDetail:W.value}),v=await be(p),{code:F,data:s}=v;F==="10000"&&(x.value=s.premium,f({condition:_,data:s})),f({})})}),xe=async()=>{var v;if(n){u.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:U(L({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify(U(L({},C),{orderId:n}))})});return}const{condition:f,data:i}=await ke(),m={},p=(F=[])=>{(F||[]).forEach(s=>{var c;m[s.riskCode]=s,((c=s.riskPremiumDetailVOList)==null?void 0:c.length)&&p(s.riskPremiumDetailVOList)})};p(i.riskPremiumDetailVOList);const _=ft({tenantId:e,riskList:f,riskPremium:m,productId:(v=D.value)==null?void 0:v.id});Oe(_)};le(()=>I,()=>{D.value&&W.value&&me()&&fe()},{deep:!0,immediate:!0});const Le=async()=>{var m,p,_,v,F,s,c;const f=ut({productCode:w,withInsureInfo:!0}),i=at({productCode:w});if(await Promise.all([f,i]).then(([y,E])=>{y.code==="10000"&&(D.value=y.data),E.code==="10000"&&(W.value=E.data)}),n){const y=await lt({id:n,tenantId:e}),{code:E,data:T}=y;if(E==="10000"){const{tenantOrderHolder:N,tenantOrderInsuredList:P,extInfo:$}=T;I.holder={certNo:N.certNo,certType:N.certType,mobile:N.mobile,name:N.name,socialFlag:ae.HAS},I.insured={certNo:P==null?void 0:P[0].certNo,certType:(m=P[0])==null?void 0:m.certType,name:(p=P[0])==null?void 0:p.name,socialFlag:(v=(_=P[0])==null?void 0:_.extInfo)==null?void 0:v.hasSocialInsurance,relationToHolder:(F=P[0])==null?void 0:F.relationToHolder},I.paymentMethod=$.extraInfo.paymentMethod,x.value=(c=(s=P[0])==null?void 0:s.tenantOrderProductList[0])==null?void 0:c.premium,I.renewalDK=$.extraInfo.renewalDK==="Y",(T.orderStatus===oe.ACCEPT_POLICY||T.orderStatus===oe.PAYMENT_SUCCESS)&&Je.confirm({title:"\u6807\u9898",message:"\u5347\u7EA7\u4FDD\u969C\u5417"}).then(()=>{u.push({path:"/chuangxin/baigebao/guaranteeUpgrade",query:U(L({},o.query),{tenantId:e,productCode:"BWYL2022",extInfo:JSON.stringify(U(L({},C),{orderId:n}))})})}).catch(()=>{})}}else me()&&fe()};return ze(()=>{Le(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(f,i)=>{var v,F;const m=O("ProPDFviewer"),p=O("van-button"),_=We("dompurify-html");return h(),V(M,null,[d("div",null,[d("div",At,[d("div",Nt,[d("img",{class:"logo",src:t(mt)},null,8,Ot),d("img",{src:(F=(v=D.value)==null?void 0:v.tenantProductInsureVO)==null?void 0:F.banner[0],class:"banner"},null,8,kt),d("div",xt,[r(j,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:Se},{default:b(()=>{var s,c,y;return[D.value&&((s=D.value)==null?void 0:s.tenantProductInsureVO)?(h(),V("div",Lt,[(h(!0),V(M,null,Y((y=(c=t(J))==null?void 0:c[ce.value])==null?void 0:y.titleAndDescVOS,(E,T)=>(h(),K(tt,{key:T,class:"guarantee-item",title:E.title,content:E.desc,border:!1},null,8,["title","content"]))),128))])):G("",!0)]}),_:1})])]),r(he,{class:"tabs",list:Pe.value,sticky:"",scrollspy:""},{tab1:b(()=>[r(Bt,{ref_key:"formRef",ref:de,"holder-disable":Be,disable:Te,"form-info":t(I),premium:x.value},null,8,["form-info","premium"])]),tab2:b(()=>{var s,c;return[d("div",Ut,[(h(!0),V(M,null,Y(((c=(s=D.value)==null?void 0:s.tenantProductInsureVO)==null?void 0:c.spec)||[],(y,E)=>(h(),V("img",{key:E,src:y,class:"detail-img"},null,8,Mt))),128)),r(j,{title:"\u4EA7\u54C1\u8D44\u6599"},{subTitle:b(()=>[Ht]),default:b(()=>{var y,E;return[d("div",Rt,[qt,(h(!0),V(M,null,Y(((E=(y=D.value)==null?void 0:y.tenantProductInsureVO)==null?void 0:E.attachmentVOList)||[],(T,N)=>(h(),K(m,{key:N,class:"file-name",title:`\u300A${T.attachmentName}\u300B`,content:T.attachmentUri,type:"pdf"},{default:b(()=>{var P,$;return[N!==((($=(P=D.value)==null?void 0:P.tenantProductInsureVO)==null?void 0:$.attachmentVOList)||[]).length-1?(h(),V("span",$t,"\u3001")):G("",!0)]}),_:2},1032,["title","content"]))),128))])]}),_:1})])]}),tab3:b(()=>[r(j,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:b(()=>{var s,c;return[r(ot,{list:(c=(s=D.value)==null?void 0:s.tenantProductInsureVO)==null?void 0:c.settlementProcessList},null,8,["list"])]}),_:1}),r(j,{title:"\u5E38\u89C1\u95EE\u9898"},{default:b(()=>{var s,c;return[r(Et,{list:(c=(s=D.value)==null?void 0:s.tenantProductInsureVO)==null?void 0:c.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),d("div",Yt,[d("div",Kt,[zt,d("span",null,"\uFFE5"+S(t(Ze)(x.value))+"/\u6708",1)]),r(p,{type:"primary",class:"right",onClick:xe},{default:b(()=>[z(S(t(n)?"\u5347\u7EA7\u4FDD\u969C":"\u7ACB\u5373\u6295\u4FDD"),1)]),_:1})])])]),r(et,{show:ee.value,"onUpdate:show":i[0]||(i[0]=s=>ee.value=s),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:b(()=>[t(J).length>1?(h(),K(he,{key:0,list:t(J).map((s,c)=>({title:s.guaranteeType,slotName:`guarantee-${c}`})),class:"tab"},null,8,["list"])):G("",!0),d("div",Wt,[(h(!0),V(M,null,Y(t(J)[ce.value].titleAndDescVOS,(s,c)=>(h(),V("div",{key:c,class:"guarantee-item"},[d("div",Jt,S(s.title),1),je(d("div",jt,null,512),[[_,s.content]])]))),128))])]),_:1},8,["show"])],64)}}});var uo=X(Gt,[["__scopeId","data-v-19ca1624"]]);export{uo as default};

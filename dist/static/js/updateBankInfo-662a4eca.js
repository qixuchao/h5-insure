import{_ as e,d as a,i as t,h as s,j as o,bc as n,l as r,o as i,c as d,u as c,p as l,q as u,f as p,a as f,b as m,w as v,v as y,ba as I,bk as g,aZ as h,d3 as b,aX as j,bb as P,bO as _,b3 as w,cD as N,cE as k,cG as x}from"./index-121bf526.js";import{P as C}from"./PolicyInfo-e1f51472.js";import{u as O}from"./useOrder-781fc7b6.js";import{p as $}from"./utils-295d78a4.js";import{g as E,m as L}from"./trial-e605cc4c.js";import{n as T}from"./nextStep-3d9e719c.js";import"./cloneDeep-acf86ae5.js";import"./utils-168a2c14.js";import"./createProposal-3ae5f689.js";import"./trial-3edb45f3.js";import"./utils-862d51c0.js";import"./infoCollection-d8102ce1.js";import"./core-537e5dcf.js";const A={class:"bank-info-wrap"},B={class:"footer-button"},D=a({name:"updateBankInfo"});var G=e(a({...D,setup(e){const a=t(),D=s(),{orderNo:G,isShare:U,tenantId:S,nextPageCode:V}=a.query,q=O(),z=o({schema:[],config:[],formData:[]}),F=o(!!U),M=o(),R=o(),J=()=>{D.back()},K=()=>{M.value&&M.value.validate(!1).then((e=>{e&&(q.value.tenantOrderPayInfoList=R,U?(q.value.extInfo.buttonCode=I.UPDATE_BANK_INFO_HOLDER,T(q.value,((e,t)=>{t===g.JUMP_PAGE&&h(e.nextPageCode,a.query)}),a)):(q.value.extInfo.buttonCode=I.UPDATE_BANK_INFO_AGENT,T(q.value,((e,a)=>{a===g.JUMP_PAGE&&((e,a)=>{const{holder:t,insuredList:s}=q.value;let o={name:t.name,gender:`${N[t.gender]}士`};"insured"===e&&(o={name:null==s?void 0:s[0].name,gender:`${N[null==s?void 0:s[0].gender]}士`}),k({shareType:0,title:`${x[a].title}`,desc:x[a].desc.replace("{name}",`${o.name}${o.gender}`),url:`${window.location.href}&objectType=${e}&isShare=1&nextPageCode=updateBankInfo`.replace("/updateBankInfo","/phoneVerify"),imageUrl:"https://aquarius-v100-test.oss-cn-hangzhou.aliyuncs.com/MyPicture/asdad.png"})})("holder","pay")}),a)))}))};n((()=>{(async()=>{let e={};b({orderNo:G,tenantId:S}).then((({code:e,data:a})=>{if("10000"===e){R.value=a.tenantOrderPayInfoList;const e=[];a.tenantOrderPayInfoList.forEach(((a,t)=>{`${a.paymentType}`==`${j.NO}`&&(e[t]={paymentType:{isView:!0}})})),z.value.config=e}}));const{code:a,data:t}=await E({orderNo:G,tenantId:S});"10000"===a&&(Object.assign(q.value,t,{extInfo:{...t.extInfo,buttonCode:I.SIGN,pageCode:P.SIGN}}),e=$(t.insuredList[0].productList)),L(e).then((({data:e,code:a})=>{if("10000"===a){const{productDetailResList:a,productFactor:t}=e,{payInfo:s}=_(t);z.value={...z.value,...s}}}))})()}));const H=o();return r((()=>{setTimeout((async()=>{H.value=window.getIseeBiz&&await window.getIseeBiz()}),1500)})),(e,a)=>{const t=w;return i(),d("div",A,[c(z).schema.length&&c(R)?(i(),l(C,{key:0,ref_key:"payInfoRef",ref:M,modelValue:c(R),"onUpdate:modelValue":a[0]||(a[0]=e=>u(R)?R.value=e:null),schema:c(z).schema,config:c(z).config,"is-view":c(F),"user-data":c(q)},null,8,["modelValue","schema","config","is-view","user-data"])):p("",!0),f("div",B,[m(t,{type:"primary",plain:"",onClick:J},{default:v((()=>[y("取消")])),_:1}),m(t,{type:"primary",onClick:K},{default:v((()=>[y("确认")])),_:1})])])}}}),[["__scopeId","data-v-01a0eb96"]]);export{G as default};

import{g as Y,a9 as L,r as U,j as v,n as F,z as t,J as m,A as D,d as G,p as g,m as C,ab as B,t as P,a4 as W,a5 as w,C as k,D as V,T as j,E as b,y as q,_ as H,h as $,k as A,G as z,F as J}from"./vendor-17026bfd.js";import{_ as O,b as x,ae as f,k as X,s as Z}from"./index-3fb0ff1d.js";import{d as K,g as Q}from"./order-2b9f9500.js";import{O as ee,b as S}from"./order-20a02a13.js";const M=e=>(W("data-v-b27e4180"),e=e(),w(),e),te={class:"com-order-item"},ae={class:"header"},se={class:"product-name"},oe={class:"company-name"},de={class:"status"},ne={class:"info"},ue={class:"info-item"},ie=M(()=>t("div",{class:"label"},"\u6295\u4FDD\u4EBA",-1)),re={class:"desc"},le={class:"info-item"},ce=M(()=>t("div",{class:"label"},"\u521B\u5EFA\u65F6\u95F4",-1)),_e={class:"desc"},pe={class:"footer"},ve={class:"fee"},he=k(" \u4FDD\u8D39\uFF1A"),me={class:"money"},fe={key:0,class:"buttons"},ge=k("\u5220\u9664"),Ce=k("\u53BB\u5904\u7406"),ye={key:1,class:"buttons"},Ie=k("\u53BB\u652F\u4ED8"),De={key:2,class:"buttons"},be=k("\u5220\u9664"),Se=Y({props:{detail:{type:Object,default:()=>{}}},emits:["afterDelete"],setup(e,{emit:y}){const s=e,_=L(),I=()=>{V.confirm({title:"",message:"\u786E\u8BA4\u8981\u5220\u9664\u8BE5\u8BA2\u5355\u4E48\uFF1F",confirmButtonText:"\u5220\u9664"}).then(()=>{K(s.detail.id,s.detail.orderStatus).then(o=>{const{code:a,data:d}=o;a==="10000"&&(j.success("\u5220\u9664\u6210\u529F"),y("afterDelete"))})})},l=()=>{const{goodsCode:o,orderNo:a,id:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyId:i,saleChannelId:h,orderTopStatus:T}=s.detail;if((S.PENDING===T||S.PAYING===T)&&[f.ZXYS,f.BWYL,f.BWYLUP].includes(o)){const R={[f.ZXYS]:"/internet/productDetail/package",[f.BWYL]:"/internet/productDetail",[f.BWYLUP]:"/internet/guaranteeUpgrade"};return _.push({path:R[o],query:{productCode:o,saleChannelId:h,agentCode:p,tenantId:n,agencyCode:i,orderNo:a}}),!0}return!1},E=()=>{const{goodsCode:o,orderNo:a,id:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyId:i}=s.detail;l()||_.push({path:x.payInfo,query:{productCode:o,orderNo:a,orderId:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyCode:i}})},N=()=>{const{goodsCode:o,orderNo:a,id:d,saleUserId:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyId:i,saleChannelId:h,orderStatus:T}=s.detail;l()||_.push({path:x[s.detail.pageCode],query:{productCode:o,orderNo:a,orderId:d,agentCode:p,templateId:r,tenantId:n,insurerCode:u,productCategory:c,agencyCode:i,isFromOrderList:"1"}})};return(o,a)=>{const d=U("van-button");return v(),F("div",te,[t("div",ae,[t("div",se,m(e.detail.goodsName),1),t("div",oe,m(e.detail.abbreviation),1),t("div",de,m(D(ee)[e.detail.orderStatus]),1)]),t("div",ne,[t("div",ue,[ie,t("div",re,m(e.detail.policyHolder),1)]),t("div",le,[ce,t("div",_e,m(D(G)(e.detail.orderStartDate).format("YYYY-MM-DD HH:mm:ss")),1)])]),t("div",pe,[t("div",ve,[he,t("span",me,"\uFFE5"+m(e.detail.prem),1)]),e.detail.orderTopStatus===D(S).PENDING?(v(),F("div",fe,[g(d,{class:"button",onClick:B(I,["stop"])},{default:C(()=>[ge]),_:1},8,["onClick"]),g(d,{class:"button primary",onClick:B(N,["stop"])},{default:C(()=>[Ce]),_:1},8,["onClick"])])):P("",!0),e.detail.orderTopStatus===D(S).PAYING?(v(),F("div",ye,[g(d,{class:"button primary",onClick:B(E,["stop"])},{default:C(()=>[Ie]),_:1},8,["onClick"])])):P("",!0),e.detail.orderTopStatus===D(S).TIMEOUT?(v(),F("div",De,[g(d,{class:"button",onClick:B(I,["stop"])},{default:C(()=>[be]),_:1},8,["onClick"])])):P("",!0)])])}}});var Fe=O(Se,[["__scopeId","data-v-b27e4180"]]);const ke={class:"page-order"},Ee=Y({setup(e){L();const y=b(0),s=b(1),_=b(!1),I=b(!1),l=b([]),E=[{title:"\u5168\u90E8",status:""},{title:"\u5F85\u5904\u7406",status:"-1"},{title:"\u5F85\u652F\u4ED8",status:"0"},{title:"\u5DF2\u5B8C\u6210",status:"1"},{title:"\u5DF2\u5931\u6548",status:"2"}],N=q(()=>E[y.value].status),o=r=>{const{orderNo:n,saleUserId:u,tenantId:c,abbreviation:i,productCategory:h}=r;Z("orderDetail",{orderNo:n,agentCode:u,tenantId:c,abbreviation:i,productCategory:h})},a=()=>{_.value=!0,Q({condition:{orderTopStatus:N.value},pageSize:10,pageNum:s.value}).then(r=>{_.value=!1;const{code:n,data:u}=r;n==="10000"&&(s.value===1?l.value=u.datas:l.value=[...l.value,...u.datas]),I.value=l.value.length>=u.total})},d=()=>{s.value+=1,a()},p=()=>{s.value=1,a()};return H(N,()=>{s.value=1,a()}),$(()=>{a()}),(r,n)=>{const u=U("van-list"),c=U("ProPageWrap");return v(),A(c,{"main-class":"page-order-list"},{default:C(()=>[t("div",ke,[g(X,{active:y.value,"onUpdate:active":n[0]||(n[0]=i=>y.value=i),list:E,"small-gap":"",class:"tab"},null,8,["active"]),g(u,{class:"body",loading:_.value,finished:I.value,onLoad:d},{default:C(()=>[(v(!0),F(J,null,z(l.value,(i,h)=>(v(),A(Fe,{key:h,detail:i,onClick:T=>o(i),onAfterDelete:p},null,8,["detail","onClick"]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var Ue=O(Ee,[["__scopeId","data-v-5f493360"]]);export{Ue as default};

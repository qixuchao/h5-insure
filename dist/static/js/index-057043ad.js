var ce=Object.defineProperty,ve=Object.defineProperties;var Ee=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var ue=(e,n,r)=>n in e?ce(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,m=(e,n)=>{for(var r in n||(n={}))ye.call(n,r)&&ue(e,r,n[r]);if(ae)for(var r of ae(n))fe.call(n,r)&&ue(e,r,n[r]);return e},y=(e,n)=>ve(e,Ee(n));import{g as te,E as k,X as le,y as be,j as s,n as z,k as c,A as I,t as D,m as C,p as b,a1 as Ie,a2 as De,z as N,C as Q,Q as Re,aj as ke,h as Ce,r as W,G as Te,F as ge,T as Fe,L as Ae,J as Be}from"./vendor-c15a8cf7.js";import{_ as oe,Y as ne,h as O,H as L,U as _e,m as Ve,I as F,J as f,K,l as P,P as Se}from"./index-65c2c0e4.js";import{c as x}from"./utils-b6782348.js";import{u as he}from"./useDicData-477fa77c.js";import{P as Ne}from"./index-3fd257be.js";import{c as Le,a as Oe,n as xe}from"./index-a36096a8.js";var J=(e=>(e[e.REAL_TIME=1]="REAL_TIME",e[e.BATCH=2]="BATCH",e))(J||{});const U=[{value:1,label:"\u5B9E\u65F6\u8F6C\u8D26"},{value:2,label:"\u6279\u91CF\u6263\u6B3E"}];x(U);var Z=(e=>(e[e.DEBIT=1]="DEBIT",e[e.CREDIT=2]="CREDIT",e[e.PRE_PAY=3]="PRE_PAY",e[e.PRE_CREDIT=4]="PRE_CREDIT",e[e.OTHER=5]="OTHER",e))(Z||{});const re=[{value:1,label:"\u501F\u8BB0\u5361"},{value:2,label:"\u8D37\u8BB0\u5361"},{value:3,label:"\u9884\u4ED8\u8D39\u5361"},{value:4,label:"\u51C6\u8D37\u8BB0\u5361"},{value:5,label:"\u5176\u4ED6"}];x(re);var V=(e=>(e[e.FIRST_TERM=1]="FIRST_TERM",e[e.RENEW_TERM=2]="RENEW_TERM",e[e.REPRISE=3]="REPRISE",e[e.OTHER=4]="OTHER",e))(V||{});const de=[{value:1,label:"\u9996\u671F\u652F\u4ED8"},{value:2,label:"\u7EED\u671F\u652F\u4ED8"},{value:3,label:"\u5E74\u91D1\u9886\u53D6"},{value:4,label:"\u5176\u4ED6"}];x(de);var A=(e=>(e[e.FIRST_SAME=1]="FIRST_SAME",e[e.RENEW_SAME=2]="RENEW_SAME",e[e.OTHER=3]="OTHER",e))(A||{});const we=[{value:1,label:"\u540C\u9996\u671F"},{value:2,label:"\u540C\u7EED\u671F"},{value:3,label:"\u5176\u4ED6"}];x(de);var se=(e=>(e[e.AUTOMATIC_PADDING=1]="AUTOMATIC_PADDING",e[e.CANCEL=2]="CANCEL",e))(se||{});const ie=[{value:1,label:"\u81EA\u52A8\u57AB\u4ED8"},{value:2,label:"\u4E2D\u6B62\u5408\u540C"}];x(ie);const Ge=e=>(Ie("data-v-5f24f9c5"),e=e(),De(),e),We={class:"com-bank-card-info"},je=Ge(()=>N("span",{class:"field-title"},[Q("\u94F6\u884C\u5361\u7167\u7247 "),N("span",{class:"sub-title"},"(\u9700\u4E0A\u4F20\u6B63\u53CD\u4E24\u9762)")],-1)),He=te({props:{modelValue:{type:Object,default:()=>{}},holderName:{type:String,default:""},factor:{type:Object,default:()=>{}}},emits:["update:modelValue"],setup(e,{emit:n}){const r=e,j=he("BANK"),p=k({bankCardType:Z.DEBIT,bankCardNo:"",accountName:"",payBank:"",mobile:"",images:[]}),B=d=>r.factor&&r.factor[d]&&r.factor[d].isDisplay===ne.YES,w=d=>d&&d.length===2?!0:"\u8BF7\u4E0A\u4F20\u94F6\u884C\u5361\u6B63\u53CD\u9762\u7167\u7247";le(()=>r.modelValue,d=>{p.value=d},{immediate:!0}),le(p,d=>{n("update:modelValue",d)});const S=be(()=>j.value.map(d=>({label:d.name,value:d.code})));return(d,i)=>(s(),z("div",We,[B("cardType")?(s(),c(O,{key:0,modelValue:p.value.bankCardType,"onUpdate:modelValue":i[0]||(i[0]=l=>p.value.bankCardType=l),label:"\u5361\u7247\u7C7B\u578B",name:"bankCardType","data-source":I(re),"is-view":""},null,8,["modelValue","data-source"])):D("",!0),B("bankCardNumber")?(s(),c(L,{key:1,modelValue:p.value.bankCardNo,"onUpdate:modelValue":i[1]||(i[1]=l=>p.value.bankCardNo=l),label:"\u94F6\u884C\u5361\u53F7",name:"bankCardNo",type:"number",required:""},null,8,["modelValue"])):D("",!0),B("cardHolder")?(s(),c(L,{key:2,"model-value":e.holderName,label:"\u6301\u5361\u4EBA",name:"accountName","is-view":""},null,8,["model-value"])):D("",!0),B("bank")?(s(),c(O,{key:3,modelValue:p.value.payBank,"onUpdate:modelValue":i[2]||(i[2]=l=>p.value.payBank=l),name:"payBank",label:"\u5F00\u6237\u94F6\u884C","data-source":I(S),required:""},null,8,["modelValue","data-source"])):D("",!0),B("bankCardAttachment")?(s(),c(L,{key:4,label:"\u94F6\u884C\u5361\u7167\u7247",block:"","label-width":"100%",name:"images",rules:[{validator:w}]},{label:C(()=>[je]),input:C(()=>[b(Ve,{modelValue:p.value.images,"onUpdate:modelValue":i[3]||(i[3]=l=>p.value.images=l),"max-count":2,"upload-type":I(_e).BANK_CARD},null,8,["modelValue","upload-type"])]),_:1},8,["rules"])):D("",!0),B("bankPreMobile")?(s(),c(L,{key:5,modelValue:p.value.mobile,"onUpdate:modelValue":i[4]||(i[4]=l=>p.value.mobile=l),label:"\u9884\u7559\u624B\u673A\u53F7",type:"number",required:"",name:"mobile","validate-type":["phone"]},null,8,["modelValue"])):D("",!0)]))}});var $=oe(He,[["__scopeId","data-v-5f24f9c5"]]),qe="/static/assets/bank.588e555f.pdf";const Me={class:"page-bank-card"},Ke={class:"reprise-card-list"},Pe=["onClick"],$e={class:"agree"},ze=Q(" \u6295\u4FDD\u4EBA\u9605\u8BFB\u5E76\u63A5\u53D7 "),Je={class:"footer-button footer"},Ue=Q("\u4E0B\u4E00\u6B65"),Qe=te({setup(e){const n=Re(),r=ke(),{orderNo:j="2022072710380711215",agentCode:p="D1234567-1",tenantId:B="9991000007",templateId:w=1}=n.query,S={bankCardType:Z.DEBIT};let d={};const i=k(""),l=k({payMethod:J.REAL_TIME,bankData:y(m({},S),{imagesId:[],images:[]})}),o=k({payMethod:J.REAL_TIME,expiryMethod:se.AUTOMATIC_PADDING,bankData:y(m({},S),{imagesId:[],images:[]}),payInfoType:A.FIRST_SAME}),R=k({bankData:y(m({},S),{imagesId:[],images:[]})}),h=k(A.FIRST_SAME),T=k({}),H=k(!1),X=k(),Y=k(),ee=k(),pe=v=>{h.value=v},G=(v,u)=>(console.log("factor",T.value),T.value&&T.value[u]&&T.value[u][v]&&T.value[u][v].isDisplay===ne.YES),me=()=>{var v,u,E;if(!H.value){Fe.fail("\u8BF7\u52FE\u9009\u540C\u610F\u94F6\u884C\u8F6C\u8D26\u6388\u6743");return}Promise.all([(v=X.value)==null?void 0:v.validate(),(u=Y.value)==null?void 0:u.validate(),(E=ee.value)==null?void 0:E.validate()]).then(a=>{const g=[y(m({},a[0]),{id:l.value.id,paymentType:V.FIRST_TERM}),y(m({},a[1]),{id:o.value.id,paymentType:V.RENEW_TERM}),y(m({},a[2]),{id:R.value.id,paymentType:V.REPRISE,payInfoType:h.value})],_=[{category:f.OBVERSE_BANK_CARD,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:F.INIT_SIGN,type:"png",uri:a[0].images[0],id:l.value.bankData.imagesId[0]},{category:f.REVERSE_BANK_CARD,name:"\u9996\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:F.INIT_SIGN,type:"png",uri:a[0].images[1],id:l.value.bankData.imagesId[1]}];o.value.payInfoType===A.OTHER&&(_.push({category:f.OBVERSE_BANK_CARD,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:F.RENEWAL_SIGN,type:"png",uri:a[1].images[0],id:o.value.bankData.imagesId[0]}),_.push({category:f.REVERSE_BANK_CARD,name:"\u7EED\u671F\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:F.RENEWAL_SIGN,type:"png",uri:a[1].images[1],id:o.value.bankData.imagesId[1]})),h.value===A.OTHER&&(_.push({category:f.OBVERSE_BANK_CARD,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u6B63\u9762",objectType:F.ANNUAL_SIGN,type:"png",uri:a[2].images[0],id:R.value.bankData.imagesId[0]}),_.push({category:f.REVERSE_BANK_CARD,name:"\u5E74\u91D1\u7B7E\u7EA6\u94F6\u884C\u5361\u80CC\u9762",objectType:F.ANNUAL_SIGN,type:"png",uri:a[2].images[1],id:R.value.bankData.imagesId[1]})),xe(y(m({},d),{pageCode:"payInfo",tenantOrderPayInfoList:g,extInfo:y(m({},d.extInfo),{templateId:w,pageCode:"payInfo"}),operateOption:{withPayInfo:!0,withAttachmentInfo:!0},tenantOrderAttachmentList:_})).then(t=>{const{code:q,data:M}=t;q==="10000"&&M.success&&r.push({path:Se[M.pageAction.data.nextPageCode],query:n.query})})})};return Ce(()=>{Le({pageCode:"payInfo",templateId:w}).then(v=>{const{code:u,data:E}=v;if(u==="10000"){const a={};E.productInsureFactorList.forEach(g=>{a[g.moduleType]||(a[g.moduleType]={}),a[g.moduleType][g.code]=g}),T.value=a}}),Oe({orderNo:j,saleUserId:p,tenantId:B}).then(v=>{const{code:u,data:E}=v;u==="10000"&&E&&(d=E,i.value=E.tenantOrderHolder.name,E.tenantOrderPayInfoList.forEach(a=>{a.paymentType===V.FIRST_TERM?(l.value=a,l.value.bankData=y(m(m({},S),a),{images:[],imagesId:[]})):a.paymentType===V.RENEW_TERM?(o.value=a,o.value.bankData=y(m({},a),{images:[],imagesId:[]})):a.paymentType===V.REPRISE&&(R.value=a,R.value.bankData=y(m({},a),{images:[],imagesId:[]}),h.value=a.payInfoType)}),E.tenantOrderAttachmentList.forEach(a=>{a.objectType===F.INIT_SIGN?(a.category===f.OBVERSE_BANK_CARD&&(l.value.bankData.images[0]=a.uri,l.value.bankData.imagesId[0]=a.id),a.category===f.REVERSE_BANK_CARD&&(l.value.bankData.images[1]=a.uri,l.value.bankData.imagesId[1]=a.id)):a.objectType===F.RENEWAL_SIGN?(a.category===f.OBVERSE_BANK_CARD&&(o.value.bankData.images[0]=a.uri,o.value.bankData.imagesId[0]=a.id),a.category===f.REVERSE_BANK_CARD&&(o.value.bankData.images[1]=a.uri,o.value.bankData.imagesId[1]=a.id)):a.objectType===F.ANNUAL_SIGN&&(a.category===f.OBVERSE_BANK_CARD&&(R.value.bankData.images[0]=a.uri,R.value.bankData.imagesId[0]=a.id),a.category===f.REVERSE_BANK_CARD&&(R.value.bankData.images[1]=a.uri,R.value.bankData.imagesId[1]=a.id))}))})}),(v,u)=>{const E=W("van-switch"),a=W("van-checkbox"),g=W("van-button"),_=W("ProPageWrap");return s(),c(_,null,{default:C(()=>[N("div",Me,[b(P,{title:"\u9996\u671F\u652F\u4ED8"},{default:C(()=>[b(K,{ref_key:"form1",ref:X},{default:C(()=>[G("paymentMethod","INIT")?(s(),c(O,{key:0,modelValue:l.value.payMethod,"onUpdate:modelValue":u[0]||(u[0]=t=>l.value.payMethod=t),name:"payMethod",required:"",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":I(U)},null,8,["modelValue","data-source"])):D("",!0),b($,{modelValue:l.value.bankData,"onUpdate:modelValue":u[1]||(u[1]=t=>l.value.bankData=t),"holder-name":i.value,factor:T.value.INIT},null,8,["modelValue","holder-name","factor"])]),_:1},512)]),_:1}),b(P,{title:"\u7EED\u671F\u652F\u4ED8"},{default:C(()=>[b(K,{ref_key:"form2",ref:Y},{default:C(()=>[G("sameAsInit","RENEWAL")?(s(),c(L,{key:0,label:"\u540C\u9996\u671F",name:"payInfoType"},{input:C(()=>[b(E,{modelValue:o.value.payInfoType,"onUpdate:modelValue":u[2]||(u[2]=t=>o.value.payInfoType=t),size:"22","active-value":I(A).FIRST_SAME,"inactive-value":I(A).OTHER},null,8,["modelValue","active-value","inactive-value"])]),_:1})):D("",!0),G("paymentMethod","RENEWAL")?(s(),c(O,{key:1,modelValue:o.value.payMethod,"onUpdate:modelValue":u[3]||(u[3]=t=>o.value.payMethod=t),name:"payMethod",label:"\u652F\u4ED8\u65B9\u5F0F","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":I(U),required:""},null,8,["modelValue","data-source"])):D("",!0),G("overduePayment","RENEWAL")?(s(),c(O,{key:2,modelValue:o.value.expiryMethod,"onUpdate:modelValue":u[4]||(u[4]=t=>o.value.expiryMethod=t),name:"expiryMethod",label:"\u4FDD\u8D39\u903E\u671F\u672A\u652F\u4ED8","is-link":"",placeholder:"\u8BF7\u9009\u62E9","data-source":I(ie),required:"","label-width":"200"},null,8,["modelValue","data-source"])):D("",!0),o.value.payInfoType!==I(A).FIRST_SAME?(s(),c($,{key:3,modelValue:o.value.bankData,"onUpdate:modelValue":u[5]||(u[5]=t=>o.value.bankData=t),"holder-name":i.value,factor:T.value.RENEWAL},null,8,["modelValue","holder-name","factor"])):D("",!0)]),_:1},512)]),_:1}),b(P,{title:"\u5E74\u91D1\u9886\u53D6\u94F6\u884C\u5361",class:"reprise-card","show-divider":!1},{default:C(()=>[N("div",Ke,[(s(!0),z(ge,null,Te(I(we),(t,q)=>(s(),z("div",{key:q,class:Ae(["reprise-card-item",{selected:h.value===t.value}]),onClick:M=>pe(t.value)},Be(t.label),11,Pe))),128))]),b(K,{ref_key:"form3",ref:ee},{default:C(()=>[h.value===I(A).OTHER?(s(),c($,{key:0,modelValue:R.value.bankData,"onUpdate:modelValue":u[6]||(u[6]=t=>R.value.bankData=t),"holder-name":i.value,factor:T.value.ANNUITY},null,8,["modelValue","holder-name","factor"])):D("",!0)]),_:1},512)]),_:1}),N("div",$e,[b(a,{modelValue:H.value,"onUpdate:modelValue":u[7]||(u[7]=t=>H.value=t),class:"checkbox",shape:"square","icon-size":16},null,8,["modelValue"]),ze,b(Ne,{class:"file",title:"\u300A\u94F6\u884C\u8F6C\u8D26\u6388\u6743\u300B",url:I(qe)},null,8,["url"])]),N("div",Je,[b(g,{type:"primary",onClick:me},{default:C(()=>[Ue]),_:1})])])]),_:1})}}});var ta=oe(Qe,[["__scopeId","data-v-73c67a3f"]]);export{ta as default};

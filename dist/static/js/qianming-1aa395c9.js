import{d as e,aV as i,aW as s,j as a,k as l,b9 as n,E as t,o,c as r,b as d,w as c,a as v,e as u,u as g,n as f,aY as m,f as p,v as y,p as h,q as S,ah as w,b2 as _,ar as k}from"./index-114ccce9.js";import{S as b}from"./index-f073dcb3.js";const x={class:"com-sign-part"},E={class:"people"},V={class:"name"},C={key:0,class:"verify-item"},Y=v("div",{class:"label"},"证件号码",-1),j={class:"no"},I={class:"sign-status"},P=["src"],L={key:1,class:"sign-desc"},B={class:"sign-body"},T={class:"date"},D={class:"file"},R=e({name:"signPart"}),$=e({...R,props:{signString:{default:()=>[]},personalInfo:{default:()=>({})},fileList:{},title:{default:""},showSign:{type:Boolean,default:!1},showVerify:{type:Boolean,default:!1},showShareSign:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},compositionSign:{default:""}},emits:["handleVerify","handleSign"],setup(e,{expose:R,emit:$}){const q=e,M=i((()=>s((()=>import("./index-fabc6ed8.js")),["static/js/index-fabc6ed8.js","static/css/index-4822eb94.css","static/js/index-114ccce9.js","static/css/index-53ee4d9d.css"]))),N=i((()=>s((()=>import("./index-521f70c5.js")),["static/js/index-521f70c5.js","static/css/index-fa4edf2a.css","static/js/index-114ccce9.js","static/css/index-53ee4d9d.css","static/js/theme-94cf7d00.js","static/js/index-113e1f8a.js","static/css/index-bbfdd7ec.css","static/js/utils-d5b6d04c.js","static/js/infoCollection-5941fb7b.js","static/js/trial-ae1b3ae0.js"]))),O=a({}),A=a([]);a([]),a({}),a(!0);const F=a(!1),U=a(0),W=e=>`${e}`===w.CERT,z=l((()=>n().format("YYYY-MM-DD"))),G=()=>{var e,i;$("handleVerify",null==(e=O.value)?void 0:e.name,null==(i=O.value)?void 0:i.certNo)},H=()=>{F.value=!1},J=a(),K=()=>{J.value&&J.value.openSign(!0)},Q=()=>{q.disabled||J.value&&J.value.openSign()},X=e=>{$("handleSign",e)};return R({validateSign:()=>new Promise(((e,i)=>{var s;(null==(s=A.value)?void 0:s.length)?e(!0):i(new Error(`请先完成${q.title}签名`))})),validateVerify:()=>new Promise(((e,i)=>{var s;(null==(s=q.personalInfo)?void 0:s.isCert)!==m.YES?i(new Error(`请${q.title}完成认证`)):e(!0)}))}),t((()=>q.signString),(()=>{A.value=q.signString}),{immediate:!0,deep:!0}),t((()=>q.personalInfo),(()=>{O.value=q.personalInfo}),{deep:!0,immediate:!0}),(e,i)=>{const s=_,a=k;return o(),r("div",x,[d(a,{title:e.title,class:"card"},{extra:c((()=>{var i,s,a,l;return[v("div",E,[v("div",V,u(null==(i=g(O))?void 0:i.name),1),e.showVerify&&W(null==(s=g(O))?void 0:s.certType)?(o(),r("div",{key:0,class:f(["status",{verified:(null==(a=g(O))?void 0:a.isCert)===g(m).YES}])},u((null==(l=g(O))?void 0:l.isCert)===g(m).YES?"已认证":"待认证"),3)):p("",!0)])]})),default:c((()=>{var i,a,l,n;return[e.showVerify&&(null==(i=g(O))?void 0:i.certNo)?(o(),r("div",C,[Y,v("div",j,u(null==(a=g(O))?void 0:a.certNo),1),(null==(l=g(O))?void 0:l.isCert)!==g(m).YES&&W(null==(n=g(O))?void 0:n.certType)?(o(),r("div",{key:0,class:"action",onClick:G},[y(" 去认证 "),d(s,{name:"right_arrow",class:"icon"})])):p("",!0)])):p("",!0)]})),_:1},8,["title"]),e.showSign?(o(),h(a,{key:0,title:`${e.title}签名`,"show-icon":!1,class:"sign-card","show-line":!1},{extra:c((()=>[v("div",I,[e.disabled?p("",!0):(o(),r("div",{key:0,class:"resign",onClick:K},"重签"))])])),default:c((()=>{var s,a;return[d(b,{ref_key:"signRef",ref:J,modelValue:g(A),"onUpdate:modelValue":i[0]||(i[0]=e=>S(A)?A.value=e:null),"sign-string":(null==(s=g(O))?void 0:s.name)||"",class:"sign",onSubmitSign:X},{signImg:c((({data:i})=>[v("div",{class:"sign-board",onClick:Q},[e.compositionSign?(o(),r("img",{key:0,src:e.compositionSign,class:"sign-img",alt:""},null,8,P)):(o(),r("span",L,"请签名"))])])),_:1},8,["modelValue","sign-string"]),v("div",B,[v("div",T,"签名日期： "+u(g(z)),1),v("div",D,[(null==(a=e.fileList)?void 0:a.length)?(o(),h(g(M),{key:0,"attachment-list":e.fileList,"pre-text":"签名将被用于以下文件：",onPreviewFile:i[1]||(i[1]=e=>(e=>{U.value=e,F.value=!0})(e))},null,8,["attachment-list"])):p("",!0)])])]})),_:1},8,["title"])):p("",!0),g(F)?(o(),h(g(N),{key:1,show:g(F),"onUpdate:show":i[2]||(i[2]=e=>S(F)?F.value=e:null),"content-list":e.fileList,"is-only-view":"","active-index":g(U),text:"关闭",onOnCloseFilePreviewByMask:H},null,8,["show","content-list","active-index"])):p("",!0)])}}});var q="/h5insure/static/jpg/qianming-c0092beb.jpg";export{$ as _,q};

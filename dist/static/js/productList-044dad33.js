import{d as e,t as a,r as s,o,c as t,a as l,b as r,u as d,e as i,F as c,f as u,g as n,_ as p,I as g,h as f,i as m,j as v,k as h,l as C,m as L,n as y,w as k,p as w,P,q as x,s as _,T as b}from"./index-dc5ec44c.js";import{P as j}from"./index-3b7ac796.js";import{L as V}from"./index-d2b11f4e.js";import{_ as I}from"./index-661fbf7f.js";import{S as M}from"./index-92719e63.js";import{_ as U}from"./empty-ae586b6c.js";import{u as T}from"./createProposal-e42ed19f.js";import{q}from"./proposalList-925434c1.js";const F={class:"com-product-item"},N={class:"content-wrap"},S={class:"product-image"},A={class:"insure-name"},z={class:"product-info"},R={class:"title"},W={class:"description"},$={class:"tags"};var B=p(e({__name:"productItem",props:{productInfo:{default:()=>({})},errorMsg:{default:""}},setup(e){const p=e,{productInfo:f}=a(p),m=s({checked:!1});return a(m),(e,a)=>{var s,p,m,v,h;const C=g;return o(),t("div",F,[l("div",N,[l("div",S,[r(C,{src:(null==(s=d(f).showConfig)?void 0:s.fileThumbnailUrl)||(null==(p=d(f).showConfig)?void 0:p.fileUrl)},null,8,["src"]),l("p",A,i((d(f).insurerName||"").substring(0,6)),1)]),l("div",z,[l("p",R,i(null==(m=d(f).showConfig)?void 0:m.title),1),l("p",W,i(null==(v=d(f).showConfig)?void 0:v.text),1),l("p",$,[(o(!0),t(c,null,u(null==(h=d(f).showConfig)?void 0:h.tags,((e,a)=>(o(),t("span",{key:a,class:"tag"},i(e),1)))),128))])]),n(e.$slots,"checkedProduct",{},void 0,!0)])])}}}),[["__scopeId","data-v-4717ba08"]]);const D={class:"search-wrap"},E={class:"article-tag"},G=["onClick"],H={class:"page-proposal-list"},J=e({name:"productList"});var K=p(e({...J,setup(e){T();const n=f();m();const p=s({searchValue:"",tagLists:[],loading:!1,finished:!1,refreshing:!1,productList:[],selectProduct:[],insurerCodeList:[],showCategory:"",productTotal:0,checked:"",productCode:void 0,proposalList:[],showFooter:!0,productName:"",productCodeList:[],errorMsgMap:{},excludeProductCodeList:[],isCreateProposal:!1,selectedProductList:[],firstLoading:!0}),{searchValue:g,tagLists:F,loading:N,finished:S,refreshing:A,productList:z,selectProduct:R,insurerCodeList:W,showCategory:$,productTotal:J,showFooter:K}=a(p);v(),v();const O=()=>{const{excludeProductCodeList:e}=p;p.firstLoading&&b.loading("加载中..."),q({title:g.value,insurerCodeList:W.value,showCategory:$.value,excludeProductCodeList:Array.isArray(e)?e:[],pageNum:1,pageSize:999}).then((e=>{const{code:a,data:s,total:o}=e;"10000"===a&&(z.value=null==s?void 0:s.datas,J.value=o)})).finally((()=>{b.clear(),p.firstLoading=!1}))},Q=e=>{O()},X=h(0),Y=()=>{A.value&&(z.value=[],A.value=!1),O(),N.value=!1,J.value===z.value.length&&(S.value=!0)},Z=C((()=>z.value.length>0)),ee=()=>{S.value=!0,N.value=!0,Y()};return(e,a)=>{const s=M,f=I,m=V,v=j,h=L("ProPageWrap");return o(),y(h,{class:"page-proposal"},{default:k((()=>[l("div",D,[r(s,{modelValue:d(g),"onUpdate:modelValue":a[0]||(a[0]=e=>w(g)?g.value=e:null),placeholder:"请输入产品名称进行搜索",shape:"round",class:"search","clear-trigger":"always","show-action":"",clearable:"",onSearch:Q},null,8,["modelValue"]),l("div",E,[(o(!0),t(c,null,u(d(P),((e,a)=>(o(),t("div",{key:a,class:x(["tag-item",{checked:d(X)===a}]),onClick:s=>((e,a)=>{X.value=a,$.value=e,O()})(e.value,a)},[l("div",{class:x(["tag-out",{checked:d(X)==a}])},[l("div",{class:x(["tag-item-text",{checked:d(X)==a}])},i(e.label),3)],2)],10,G)))),128))])]),d(Z)||d(p).firstLoading?_("",!0):(o(),y(f,{key:0,"empty-img":d(U),title:"暂无产品","empty-class":"empty-select"},null,8,["empty-img"])),l("div",H,[r(v,{modelValue:d(A),"onUpdate:modelValue":a[2]||(a[2]=e=>w(A)?A.value=e:null),onRefresh:ee},{default:k((()=>[r(m,{loading:d(N),"onUpdate:loading":a[1]||(a[1]=e=>w(N)?N.value=e:null),finished:d(S),"finished-text":d(Z)?"- 已经到底了哦 -":"",onLoad:Y},{default:k((()=>[(o(!0),t(c,null,u(d(z),(e=>(o(),y(B,{key:e.id,"product-info":e,"error-msg":d(p).errorMsgMap[e.productCode],onClick:a=>(({productCode:e})=>{n.push({path:"/proposal/createProposal",query:{productCode:e}})})(e)},null,8,["product-info","error-msg","onClick"])))),128))])),_:1},8,["loading","finished","finished-text"])])),_:1},8,["modelValue"])])])),_:1})}}}),[["__scopeId","data-v-5378cd31"]]);export{K as default};

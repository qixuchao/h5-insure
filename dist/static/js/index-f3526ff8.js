import{g as b,M as I,E as g,x as R,aj as T,r as v,j as y,k as M,m as p,p as l,A as C,a6 as S,z as _,n as k,G as U,F as j,J as x,C as h,D as q,T as z}from"./vendor-d0978379.js";import{_ as W,A as G}from"./index-dac51a6e.js";import{P as H}from"./index-a0ad4774.js";import{h as J,d as O}from"./proposalList-e861ca55.js";const K=m=>{const s=m,[r,a]=s.split("_"),n={year:"\u5E74",month:"\u6708",day:"\u5929",to:"\u5C81"};return s==="to_life"?"\u4FDD\u7EC8\u751F":`${a}${n[r]}`},Q=m=>{const s=m,[r,a]=s.split("_"),n={year:"\u5E74\u4EA4",month:"\u6708\u4EA4",day:"\u5929",to:"\u5C81"};return s==="single"?"\u8DB8\u7F34":n[r]==="to"?`\u4EA4\u81F3${a}\u5C81`:`${a}${n[r]}`};const X={class:"proposal-content"},Y={class:"title"},Z={class:"premium"},w=h(" \u4FDD\u8D39\uFF1A"),ee={class:"operate-btn"},te=h("\u5220\u9664"),ae=h("\u7F16\u8F91"),oe=h("\u9884\u89C8"),se=b({setup(m){const s=[{title:"\u9669\u79CD\u540D\u79F0",dataIndex:"riskName",width:180},{title:"\u4FDD\u969C\u671F\u95F4",dataIndex:"coveragePeriod",render:e=>K(e==null?void 0:e.coveragePeriod)},{title:"\u7F34\u8D39\u671F\u95F4",dataIndex:"chargePeriod",width:110,render:e=>Q(e==null?void 0:e.chargePeriod)},{title:"\u4FDD\u8D39",dataIndex:"premium",width:120}],r=I({historyList:[],searchValue:""}),a=g(!1),n=g(!1),i=g(1),{historyList:c,searchValue:d}=R(r),D=T(),f=()=>{J({name:d.value,pageNum:i.value,pageSize:20,relationUserType:2}).then(e=>{const{code:o,data:u}=e;o==="10000"&&(i.value===1?c.value=u.datas||[]:c.value=c.value.concat(u.datas),i.value+=1,a.value=!1,n.value=c.value.length>=u.total)})},E=()=>{f()},A=e=>{d.value=e,i.value=1,f()},B=e=>{q.confirm({message:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8BA1\u5212\u4E66\uFF1F"}).then(()=>{O(e).then(o=>{const{code:u}=o;u==="10000"&&(z.success("\u5220\u9664\u6210\u529F"),i.value=1,f())})}).catch(()=>{})},V=e=>{D.push({path:"compositionProposal",query:{id:e}})},L=e=>{D.push({path:"/proposal/createProposal",query:{id:e}})};return(e,o)=>{const u=v("van-search"),F=v("van-button"),$=v("van-list"),N=v("ProPageWrap");return y(),M(N,{class:"page-history-proposal"},{default:p(()=>[l(u,{modelValue:C(d),"onUpdate:modelValue":o[0]||(o[0]=t=>S(d)?d.value=t:null),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u8BCD",shape:"round",class:"search",onSearch:A},null,8,["modelValue"]),_("div",X,[l($,{loading:a.value,"onUpdate:loading":o[1]||(o[1]=t=>a.value=t),finished:n.value,"finished-text":"- \u6CA1\u6709\u66F4\u591A\u4E86 -",onLoad:E},{default:p(()=>[(y(!0),k(j,null,U(C(c),t=>(y(),k("div",{key:t.id,class:"proposal-item"},[_("div",Y,x(t.proposalName),1),_("p",Z,[w,_("span",null,"\xA5"+x(C(G)(t.totalPremium)),1)]),l(H,{columns:s,class:"table","data-source":t.proposalProductRiskVOList},null,8,["data-source"]),_("div",ee,[l(F,{plain:"",round:"",type:"primary",class:"del-btn",onClick:P=>B(t.id)},{default:p(()=>[te]),_:2},1032,["onClick"]),l(F,{plain:"",round:"",type:"primary",onClick:P=>L(t.id)},{default:p(()=>[ae]),_:2},1032,["onClick"]),l(F,{plain:"",round:"",type:"primary",onClick:P=>V(t.id)},{default:p(()=>[oe]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["loading","finished"])])]),_:1})}}});var ie=W(se,[["__scopeId","data-v-5f363c3e"]]);export{ie as default};

import{h as e,t,l as a,y as n,I as o,s as r,A as d,X as l,z as s,N as u,a8 as i,r as c,j as v,k as p,m as I,n as m,Q as C,F as y,E as f,aa as b,C as g,d as k,D as O,T as L}from"./vendor-372f2d73.js";import{d as N}from"./order-679dd558.js";import{_ as P,g as _,s as S,ak as Y}from"./index-cc115f6e.js";import{O as h,b as j}from"./order-be8ec3c6.js";import{I as D}from"./InsuredPart-6c61cb51.js";import"./trial-8d51d385.js";const T={class:"com-field-info"},x={key:0,class:"label"},E={class:"content"};var G=P(e({props:{label:{type:String,default:""},content:{type:String,default:""}},setup(e){const u=t();return(t,i)=>(a(),n("div",T,[e.label?(a(),n("div",x,o(e.label),1)):r("",!0),d(u).label?l(t.$slots,"label",{key:1},void 0,!0):r("",!0),s("div",E,o(e.content),1),d(u).content?l(t.$slots,"content",{key:2},void 0,!0):r("",!0)]))}}),[["__scopeId","data-v-d673262c"]]);const A={key:0,class:"page-order-detail"},H={class:"card"},M={class:"header"},U={class:"product-name"},W={class:"company-name"},X={class:"status"},q={key:0,class:"footer-button"},B=g("删除"),F=g("去处理"),Z={key:1,class:"footer-button"},$=g("删除"),z=g("去支付"),Q={key:2,class:"footer-button"},w=g("删除");var J=P(e({setup(e){const t=u(),l=i(),g=c(),{query:{orderNo:P,agentCode:T,tenantId:x,abbreviation:E,productCategory:J}}=t,K=()=>{O.confirm({title:"确认",message:"确认删除订单？"}).then((()=>{g.value&&N(g.value.id,g.value.orderStatus).then((e=>{const{code:t,data:a}=e;"10000"===t&&L.success("删除成功")}))}))},R=()=>{var e,t;if(!g.value)return!1;const{agencyId:a,saleChannelId:n,orderTopStatus:o}=g.value,r=null==(t=null==(e=g.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;if(!(j.PENDING!==o&&j.PAYING!==o||r!==Y.ZXYS&&r!==Y.BWYL)){const e={[Y.ZXYS]:"/internet/productDetail/package",[Y.BWYL]:"/internet/productDetail"};return l.push({path:e[r],query:{productCode:r,saleChannelId:n,agentCode:T,tenantId:x,agencyCode:a,orderNo:P}}),!0}return!1},V=()=>{var e,t;if(g.value){if(R())return;const{id:a,extInfo:{templateId:n,pageCode:o},agencyId:r,venderCode:d}=g.value,l=null==(t=null==(e=g.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;S(o,{productCode:l,orderNo:P,orderId:a,agentCode:T,templateId:n,tenantId:x,productCategory:J,insurerCode:d,agencyCode:r,isFromOrderList:"1"})}},ee=()=>{var e,t;if(g.value){if(R())return;const{id:a,saleUserId:n,extInfo:{templateId:o},agencyId:r,venderCode:d}=g.value,l=null==(t=null==(e=g.value.tenantOrderInsuredList[0])?void 0:e.tenantOrderProductList[0])?void 0:t.productCode;S("payInfo",{productCode:l,orderNo:P,orderId:a,saleUserId:n,templateId:o,tenantId:x,productCategory:J,insurerCode:d,agencyCode:r})}};return v((()=>{_({orderNo:P,agentCode:T,tenantId:x}).then((e=>{const{code:t,data:a}=e;"10000"===t&&(g.value=a)}))})),(e,t)=>{const l=p("van-button"),u=p("ProPageWrap");return a(),I(u,null,{default:m((()=>{var e,t,u,i,c,v,p,O,L,N,P;return[g.value?(a(),n("div",A,[s("div",H,[C(G,null,{label:m((()=>{var e,t,a,n;return[s("div",M,[s("div",U,o(null==(a=null==(t=null==(e=g.value)?void 0:e.tenantOrderInsuredList[0])?void 0:t.tenantOrderProductList[0])?void 0:a.productName),1),s("div",W,o(null==(n=g.value)?void 0:n.abbreviation),1)])]})),content:m((()=>{var e;return[s("div",X,o(g.value?d(h)[null==(e=g.value)?void 0:e.orderStatus]:""),1)]})),_:1}),C(G,{label:"投保单号",content:null==(e=g.value)?void 0:e.orderNo},null,8,["content"]),C(G,{label:"创建时间",content:d(k)(null==(t=g.value)?void 0:t.gmtCreated).format("YYYY-MM-DD HH:mm:ss")},null,8,["content"]),C(G,{label:"投保人",content:null==(i=null==(u=g.value)?void 0:u.tenantOrderHolder)?void 0:i.name},null,8,["content"]),(a(!0),n(y,null,f((null==(c=g.value)?void 0:c.tenantOrderInsuredList)||[],((e,t)=>(a(),I(G,{key:t,label:"被保人",content:e.name},null,8,["content"])))),128))]),C(D,{"product-data":null==(O=null==(p=null==(v=g.value)?void 0:v.tenantOrderInsuredList[0])?void 0:p.tenantOrderProductList)?void 0:O[0],class:"insure-info"},null,8,["product-data"]),(null==(L=g.value)?void 0:L.orderTopStatus)===d(j).PENDING?(a(),n("div",q,[C(l,{type:"primary",onClick:b(K,["stop"])},{default:m((()=>[B])),_:1},8,["onClick"]),C(l,{type:"primary",onClick:b(V,["stop"])},{default:m((()=>[F])),_:1},8,["onClick"])])):r("",!0),(null==(N=g.value)?void 0:N.orderTopStatus)===d(j).PAYING?(a(),n("div",Z,[C(l,{type:"primary",onClick:b(K,["stop"])},{default:m((()=>[$])),_:1},8,["onClick"]),C(l,{type:"primary",onClick:b(ee,["stop"])},{default:m((()=>[z])),_:1},8,["onClick"])])):r("",!0),(null==(P=g.value)?void 0:P.orderTopStatus)===d(j).TIMEOUT?(a(),n("div",Q,[C(l,{type:"primary",onClick:b(K,["stop"])},{default:m((()=>[w])),_:1},8,["onClick"])])):r("",!0)])):r("",!0)]})),_:1})}}}),[["__scopeId","data-v-719e96a1"]]);export{J as default};

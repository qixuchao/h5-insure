import{bq as e,z as a,C as t,aQ as o,Z as l,$ as r,aR as n,S as s,G as i,d,b as u,c,E as m,a5 as p,b6 as f,aS as y,A as N,L as b,R as C,a1 as g,g as h,ao as v,w as A,e as E,f as T,V as I,k as O,as as V,at as _,i as S,a9 as $,aM as w,az as R,F as P,bg as x,an as M,bm as D,bo as k,aa as B,bh as L,j}from"./index-fc789839.js";import{s as H}from"./phoneVerify-3ff4d1b1.js";import{m as F}from"./merge-e7788e50.js";const Z=async({mobile:e},a)=>{const t=await H(e),{code:o}=t;"10000"===o&&"function"==typeof a&&a()},U="ProFieldV2",K="ProDatePickerV2",z="ProPickerV2",G="ProRadioV2",Y="ProCheckboxV2",q="ProSwitchV2",W="ProCascaderV2",X="ProBank",J="ProAddress",Q="ProUploadV2",ee="ProStepperV2",ae="ProSMSCode",te="ProOccupation",oe="ProIDCardUploadV2",le="ProBankUpload",re=18,ne=20,se=50,ie="name",de="external",ue="email",ce="zipCode",me="tel",pe="mobile",fe="zhCN",ye="notZhCN",Ne="normalChar",be="alphabetNumber",Ce="cert",ge="houseHold",he="birth",ve="passport",Ae="otherCert",Ee="militaryCard",Te="solider",Ie="hongkongMacao",Oe="taiwanTravel",Ve="foreignPermanent",_e="HKMacaoResidencePermit",Se="taiwanResidencePermit",$e="socialCreditCode",we="OCC",Re="businessLicense",Pe="bandCard",xe={NAME:{maxlength:25,ruleType:ie},MOBILE:{type:"digit",ruleType:pe,maxlength:11},AGE:{type:"digit",maxlength:3},HEIGHT_WEIGHT:{type:"number",precision:1,maxlength:5},INCOME:{type:"number",precision:2,unit:"万元",isPrecisionCompleted:!0},ZIP_CODE:{type:"digit",ruleType:ce,maxlength:6},CONTENT:{maxlength:200},GAS_NUMBER:{maxlength:ne},BANK:{type:"digit",maxlength:ne},ADDRESS:{dictCode:e.NATIONAL_REGION_CODE,customFieldName:{text:"name",value:"code",children:"children"}},COUNTRY:{dictCode:e.NATIONALITY,customFieldName:{text:"name",value:"code",children:"children"}}},Me=[{code:"input",name:"单行文本",value:1,componentName:U},{code:"textarea",name:"多行文本",value:2,type:"textarea",componentName:U},{code:"number",name:"数字输入框",value:3,componentName:U},{code:"date",name:"日期",value:4,componentName:K},{code:"select",name:"下拉框",value:5,componentName:z},{code:"radio",name:"单选框",value:6,componentName:G},{code:"checkbox",name:"多选框",value:7,componentName:Y},{code:"switch",name:"switch开关",value:8,componentName:q},{code:"cascader",name:"级联选择",value:9,componentName:W},{code:"bank",name:"银行卡",value:10,componentName:X},{code:"address",name:"地址",value:11,componentName:J},{code:"upload",name:"文件上传",value:12,componentName:Q},{code:"stepper",name:"步进器",value:13,componentName:ee}],De={BANK_CARD_NO:"bankCardNo",ACCOUNT_NAME:"accountName",PAY_BANK:"payBank",BANK_CARD_IMAGE:"bankCardImage",MOBILE:"mobile",VERIFICATION_CODE:"verificationCode"},ke=Object.values(De),Be={bankCardNo:{...xe.BANK,name:De.BANK_CARD_NO,componentName:U},accountName:{...xe.NAME,name:De.ACCOUNT_NAME,componentName:U},payBank:{name:De.PAY_BANK,dictCode:e.BANK,componentName:z},bankCardImage:{maxCount:2,subLabel:"（需上传正反两面）",name:De.BANK_CARD_IMAGE,componentName:le},mobile:{...xe.MOBILE,name:De.MOBILE,componentName:U},verificationCode:{...xe.ZIP_CODE,sendSMSCode:Z,name:De.VERIFICATION_CODE,relatedName:De.MOBILE,componentName:ae}},Le={certType:{[t.CERT]:[Ce],[t.HOUSE_HOLD]:[ge],[t.MILITARY_CARD]:[Ee],[t.PASSPORT]:[ve],[t.HONGKONG_MACAO]:[Ie],[t.OTHER]:[Ae],[t.SOLIDER]:[Te],[t.BIRTH]:[he],[t.TAIWAN_TRAVEL]:[Oe],[t.FOREIGN_PERMANENT]:[Ve],[t.HK_MACAO_RESIDENCE_PERMIT]:[_e],[t.TAIWAN_RESIDENCE_PERMIT]:[Se],[t.SOCIAL_CREDIT_CODE]:[$e]}},je={INSURE_AREA:"insureArea",RESIDENCE:"residence",LONG_AREA:"longArea",WORK_ADDRESS:"workAddress"};Object.values(je);const He=[{key:je.INSURE_AREA},{key:je.RESIDENCE},{key:je.LONG_AREA},{key:je.WORK_ADDRESS}].reduce(((e,{key:a})=>(e[a]=xe.ADDRESS,e)),{}),Fe={name:xe.NAME,certNo:{relatedName:"certType",maxlength:re},certType:{relatedName:"certNo"},birthday:{relatedName:"age"},mobile:xe.MOBILE,age:xe.AGE,height:{...xe.HEIGHT_WEIGHT,unit:"cm"},weight:{...xe.HEIGHT_WEIGHT,unit:"kg"},email:{ruleType:ue},personalAnnualIncome:xe.INCOME,familyAnnualIncome:xe.INCOME,workZipCode:xe.ZIP_CODE,homePostalCode:xe.ZIP_CODE,workContent:xe.CONTENT,gasNumberCollection:{...xe.GAS_NUMBER,ruleType:ye},verificationCode:{sendSMSCode:Z,componentName:ae,...xe.ZIP_CODE},...He,nationalityCode:{...xe.COUNTRY},certEndDate:{minDate:new Date,maxDate:a().add(100,"year").toDate()},companyName:{maxlength:se},occupationCodeList:{componentName:te,dictCode:(Ze=(window.location.search.match(/&insurerCode=([^&]*)&/)||[])[1]||"",(Ze?`${Ze.toUpperCase()}_`:"")+"OCCUPATION")},certImage:{componentName:oe},benefitRate:{...xe.AGE,unit:"%"}};var Ze;const Ue=2,Ke={1:"holder",2:"insured",3:"beneficiary",4:"payInfo",5:"signInfo"},ze=Symbol("VAN_PRO_FORM_KEY"),Ge=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/,Ye=e=>{if(!Ge.test(e))return!1;if(18!==e.length)return!1;const a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];let t=0;for(let r=0;r<17;r++)t+=e.substring(r,r+1)*a[r];const o=t%11,l=e.substring(17);return 2===o?"X"===l.toUpperCase():Number(l)===[1,0,10,9,8,7,6,5,4,3,2][o]},qe={isName:e=>/^[\u4e00-\u9fa5a-z].{0,23}[\u4e00-\u9fa5a-z]/i.test(e),isExternal:e=>/^(https?:|mailto:|tel:)/.test(e),isEmail:e=>/^[A-Za-z0-9]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(e),isZipCode:e=>/^[0-9]{6,6}$/.test(e),isTel:e=>/0\d{2,3}-\d{7,8}/.test(e),isPhone:e=>/^1(3|4|5|6|7|8|9)\d{9}$/.test(e),isZhCN:e=>/^[\u4e00-\u9fa5]+$/.test(e),isNotZhCN:e=>/^[^\u4e00-\u9fa5]+$/.test(e),isCommonChar:e=>/^[\w_]{6,20}$/.test(e),isNormalChar:e=>/^[\u4e00-\u9fa5a-zA-Z0-9]+$/.test(e),isAlphabetNumber:e=>/^[a-z0-9]+$/i.test(e),isAlphabetNumberOrSpecial:e=>/^[a-z0-9`~!@#$%^&*()_\-+=<>?:"{}|,./;'\\[\]·~！@#￥¥%……&*（）——\-+={}|《》？：“”【】、；‘'，。、]+$/i.test(e),isIdCardNo:e=>Ye(e),isHouseHold:e=>Ye(e),isBirthType:e=>/^[a-zA-Z]\d{9}$/.test(e),isPassword:e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,20}$/.test(e),isPassportType:e=>e.length>=5&&/^[^\u4e00-\u9fa5]+$/.test(e),isMilitaryCard:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isSolider:e=>/^[\u4E00-\u9FA5](字第)([0-9a-zA-Z]{4,8})(号?)$/.test(e),isHongkongMacaoTravel:e=>/^[C]\d{8}$|^[C][a-hA-Hj-nJ-Np-zP-Z][0-9]{7}$/.test(e),isTaiwanTravel:e=>/^[L]\d{8}$/.test(e),isForeignPermanent:e=>/^[A-Z]{3}[0-9]{12}$/.test(e),isHKMacaoResidencePermit:e=>/^8[12]0000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isTaiwanResidencePermit:e=>/^830000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX]$/.test(e),isUSCC:e=>/^[^_IOZSVa-z\W]{2}\d{6}[^_IOZSVa-z\W]{10}$/.test(e),isUSCCPolicy:e=>/^[A-Z0-9]{18}$/.test(e),isOCC:e=>/^[A-Z0-9]{8}-[A-Z0-9]{1}$/.test(e),isBusinessLicense:e=>/(^\d{15}$)|(^[A-Z0-9]{18}$)/.test(e),isBandcard:e=>/^\d{12,20}$/g.test(e),isOtherCert:e=>/^.{1,18}$/.test(e)},We={[ie]:[qe.isName],[de]:[qe.isExternal],[ue]:[qe.isEmail],[ce]:[qe.isZipCode],[me]:[qe.isTel],[pe]:[qe.isPhone],[fe]:[qe.isZhCN],[ye]:[qe.isNotZhCN],[Ne]:[qe.isNormalChar],[be]:[qe.isAlphabetNumber],[Ce]:[qe.isIdCardNo],[ge]:[qe.isHouseHold],[he]:[qe.isBirthType],[ve]:[qe.isPassportType],[Ee]:[qe.isMilitaryCard],[Te]:[qe.isSolider],[Ie]:[qe.isHongkongMacaoTravel],[Oe]:[qe.isTaiwanTravel],[Ve]:[qe.isForeignPermanent],[_e]:[qe.isHKMacaoResidencePermit],[Se]:[qe.isTaiwanResidencePermit],[$e]:[qe.isUSCCPolicy],[we]:[qe.isOCC],[Re]:[qe.isBusinessLicense],[Pe]:[qe.isBandcard],[Ae]:[qe.isOtherCert]};function Xe(e){return null==e}const Je=["v-model","label","name","id","type","size","maxlength","placeholder","border","disabled","readonly","colon","required","center","clearable","clear-icon","clear-trigger","clickable","is-link","autofocus","show-word-limit","error","error-message","error-message-align","formatter","format-trigger","arrow-direction","label-class","label-width","label-align","input-align","autosize","left-icon","right-icon","icon-prefix","rules","autocomplete","enterkeyhint","visible"],Qe=["label","input","left-icon","right-icon","button","error-message","extra","value-view"],ea={autocomplete:"off"},aa=e=>console.log(`%c🔥 ${e}`,"color:#1989fa;background:#5e4;padding:3px 5px;"),ta=e=>{const{trialFactorCodes:a,personVO:t}=e||{};return!o(a)||!a.some((e=>{const a=t[e];return Xe(a)||""===a||Array.isArray(a)&&!a.length}))},oa=(e,a,t)=>{var l;return t&&!o(a)?Promise.resolve():null==(l=e.value)?void 0:l.validate(t?a:void 0)},la=(e,a="children")=>o(e)?e.map((({[`${a}`]:e,...t})=>{const l={};return o(e)&&(l.children=la(e)),{...t,...l}})):[],ra=(e,a=0,t="children")=>{const l=(e,r=1)=>o(e)?e.map((({[`${t}`]:e,...n})=>{const s={};return(!a||a&&a>r)&&o(e)&&(s.children=l(e,r+1)),{...n,...s}})):[];return l(e)},na=(e,a,t={})=>{const l=Object.keys(e);return o(l)?l.reduce(((t,o)=>{const l=a.includes(o);return t[Number(!l)][o]=e[o],t}),[{...t},{}]):[{...t},{}]},sa=e=>{if("certType"!==(null==e?void 0:e.name))return!1;const{columns:a,title:l}=e||{};return o(a)&&1===a.length&&a.findIndex((e=>e.code===t.CERT))>-1},ia=e=>o(e)&&e.some((e=>"birthday"===(e.code||e.name))),da=(e,a)=>{let t=[];const r=[];if(o(e)){const a=ia(e);t=e.map((e=>{const{code:t,name:o,value:s,componentName:i,...d}=Me.find((a=>`${a.value}`==`${e.displayType}`))||{};e.isCalculationFactor===l.YES&&r.push(e.code);const u={},{componentName:c,...m}=Fe[e.code]||{},p=c||i||"ProFieldV2";2===e.moduleType&&(u.isSelfInsuredNeed=e.isSelfInsuredNeed),"age"===e.code&&(u.visible=!a);const f={...d,...u,customFieldName:{text:"value",value:"code",children:"children"},label:e.title,name:e.code,componentName:p,required:1===e.isMustInput,nanoid:n(),...m},y={...f,attributeValueList:e.attributeValueList,columns:f.dictCode?[]:e.attributeValueList||[]};return sa(y)&&(y.visible=!1),y}))}return a.push(...r),{schema:t,trialFactorCodes:r}},ua=(e,a={isTrial:!1})=>{const t={};if(!e)return t;const r=Object.keys(e)||[];if(!o(r))return t;const n=[],s=a.multiInsuredSupportFlag===l.YES,i={hasTrialFactorCodes:!1,isSpouseInsured:!1,multiInsuredSupportFlag:s,multiInsuredMaxNum:s?a.multiInsuredNum||Number.MAX_SAFE_INTEGER:1,multiInsuredMinNum:1,multiBeneficiaryMaxNum:a.multiBeneficiaryMaxNum||5},d=r.reduce(((t,l)=>(t[Ke[l]]=o(e[l])?e[l].filter((e=>{const{subModuleType:t,code:l,attributeValueList:r}=e;if(t===Ue&&"relationToMainInsured"===l){o(r)&&1===r.length&&r.findIndex((e=>"2"===e.code))>-1&&Object.assign(i,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0})}return!a.isTrial||1===e.isCalculationFactor})):[],t)),{}),u=((e,a)=>{if(!o(e.insured))return[];const t=o(e.holder)?e.holder.map((e=>e.code)):[];return e.insured.reduce(((e,l)=>{const{code:r,subModuleType:n,attributeValueList:s}=l;return n===Ue?("relationToMainInsured"===r&&o(s)&&1===s.length&&s.findIndex((e=>"2"===e.code))>-1&&Object.assign(a,{multiInsuredMaxNum:2,multiInsuredMinNum:2,isSpouseInsured:!0}),e[1].push({...l,isSelfInsuredNeed:!t.includes(r)})):e[0].push({...l,isSelfInsuredNeed:!t.includes(r)}),e}),[[],[]]).filter((e=>o(e)))})(d,i),c=Object.keys(d).reduce(((e,t)=>{if("insured"!==t){const l=d[t],r="holder"===t;e[t]=da(r&&o(a.holderFactorCodes)?l.filter((e=>a.holderFactorCodes.includes(e.code))):l,n)}else e[t]=o(u)?u.map((e=>da(o(a.insuredFactorCodes)?e.filter((e=>a.insuredFactorCodes.includes(e.code))):e,n))):[];return e}),{});return c.config={...i,hasTrialFactorCodes:o(n)},c},ca=(e=!1)=>a=>{if("string"==typeof a&&a){const t=["toLowerCase","toUpperCase"][Number(e)];return`${a[0][t]()}${a.substring(1)}`}return""},ma=ca(!0),pa=ca(),fa=(e,a={})=>Object.keys(e).reduce(((e,t)=>(e[a[t]||t]=t,e)),{}),ya=e=>{const a=new Date,t=new Date(e);let o=a.getFullYear()-t.getFullYear();const l=a.getMonth()-t.getMonth();return(l<0||0===l&&a.getDate()<t.getDate())&&(o-=1),o},Na=(e,a=(e=>!0))=>{if(!e)return{};return Object.keys(e).filter((e=>"function"!=typeof a||a(e))).reduce(((a,t)=>(a[t]={Object:{},Array:[]}[Object.prototype.toString.call(e[t]).slice(8,-1)]||null,a)),{})},ba=(e,a)=>{const o=![t.CERT,t.HOUSE_HOLD].includes(String(e)),l=ia(a)?{age:{visible:!1}}:{};return{...["gender","birthday","age"].reduce(((e,a)=>(e[a]={visible:o},e)),{}),...l}},Ca=(e,a)=>{const t={},{relationToHolder:o,certType:l}=a||{},r="3"===String(o),n=null==e?void 0:e.find((e=>"certType"===e.name)),s=sa(n||{});return s&&(t.certNo={label:"身份证号"+(r?"\n(户口簿)":"")}),n&&F(t,ba(l,e)),[s,t]},ga={certNo:{onChangeEffect:(e,a)=>{Object.assign(a.formData,{certNo:null,gender:null,birthday:null,age:null}),r((()=>{F(a.config,ba(a.formData.certType,a.schema))}))}},certType:{extraAttrs:{4:{maxlength:10}},onChangeEffect:(e,a)=>{if([t.CERT,t.HOUSE_HOLD].includes(String(a.formData.certType))){const t=(e=>{const a={gender:null,birthday:null,age:null};if("string"==typeof e&&e&&Ye(e)){const t={15:[6,12],18:[6,14]};a.birthday=e.slice(...t[e.length]).replace(/(.{4})(.{2})/,"$1-$2-"),a.gender=[s.FEMALE,s.MALE][Number(e.slice(-2,-1))%2],a.age=a.birthday&&`${ya(a.birthday)}`}return a})(e);Object.assign(a.formData,t)}}},age:{onChangeEffect:(e,a)=>{if(![t.CERT,t.HOUSE_HOLD].includes(String(a.formData.certType))){const t=e?ya(e):null;Object.assign(a.formData,{age:t})}}}};var ha=function(e){return null==e};var va=function(e){var a=typeof e;return null!=e&&("object"==a||"function"==a)};const Aa={class:"value-view-wrap"};var Ea=i(d({__name:"ValueView",props:{value:{type:String,default:""},isView:{type:Boolean,default:!1}},setup:e=>(a,t)=>(u(),c("span",Aa,m(e.value||"-"),1))}),[["__scopeId","data-v-505dc7b6"]]);const Ta={class:"com-van-field-unit"},Ia=d({inheritAttrs:!1,__name:"ProFieldV2",props:{ruleType:{type:String,default:""},modelValue:{type:[String,Number,Object,Array,Boolean],default:""},isView:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rules:{type:Array,default:()=>[]},relatedName:{type:String,default:""},precision:{type:Number,default:0},isPrecisionCompleted:{type:Boolean,default:!1},unit:{type:String,default:""}},emits:["update:model-value","blur"],setup(e,{emit:a}){const t=e,l=p(),r=f(),{formState:n,markRequired:s}=y(ze)||{},i=N({modelValue:""}),d=b((()=>{const e=fa(r,l.slots),{extra:a,...o}=e;return t.unit?o:e})),c=b((()=>l.placeholder||`请输入${l.label||""}`)),R=b((()=>`${i.modelValue||""}`)),P=b((()=>{var e,a;if(t.ruleType)return t.ruleType;if(t.relatedName){const o=null==(e=null==n?void 0:n.formData)?void 0:e[t.relatedName];if(o)return null==(a=Le[t.relatedName])?void 0:a[o]}return""})),x=e=>ha(e)||""===e||Array.isArray(e)&&!e.length||va(e)&&Object.keys(e).some((e=>x(e))),M=b((()=>o(t.rules)?t.rules:[{required:t.required,validator:e=>{if(t.required&&x(e))return l.placeholder;if(P.value){const[a]=We[P.value]||[];if("function"!=typeof a)return console.warn(`%c 字段 ${l.label} 的规则 ${P} 校验函数不存在，请先确认～`,"color: #3e7;"),"";if(!x(e)&&!a(e))return`请输入正确的${l.label}`}return""}}])),D=b((()=>"number"===l.type&&t.precision)),k=e=>D.value&&e?e.replace(/^(0)\d+$/g,"$1").replace(new RegExp(`^(\\d+\\.\\d{${t.precision}})\\d+$`,"g"),"$1"):e,B=b((()=>{var e;if(t.relatedName){const{extraAttrs:a}=ga[t.relatedName]||{},o=null==(e=null==n?void 0:n.formData)?void 0:e[t.relatedName];if(a&&!ha(o)&&""!==o)return a[o]||{}}return{}})),L=(e,a)=>{if(t.relatedName&&e){const o=(ga[t.relatedName]||{})[`${e}Effect`];"function"==typeof o&&o(a,n)}},j=e=>{L("onChange",e),i.modelValue=e,a("update:model-value",e)},H=e=>{let o=i.modelValue;D.value&&o&&t.isPrecisionCompleted&&(o=Number(o).toFixed(t.precision),j(o)),L("onBlur",o),a("blur",e)};return C((()=>t.modelValue),(e=>{i.modelValue=e}),{immediate:!0,deep:!0}),g((()=>{l.name&&(null==n?void 0:n.nameList)&&n.nameList.push(l.name)})),(a,t)=>{const o=w;return u(),h(o,$({"model-value":T(i).modelValue,class:`com-van-field ${T(s)?"":"field-mark--hidden"} ${!1===T(l).visible?"com-van-field--hidden":""}`,autocomplete:"off",formatter:k},{maxlength:25,...a.$attrs,placeholder:T(c),required:e.required,rules:T(M),...T(B)},{onBlur:H,"onUpdate:modelValue":j}),v({_:2},[e.isView?{name:"input",fn:A((()=>[E(Ea,{value:T(R)},null,8,["value"])])),key:"0"}:void 0,I(Object.keys(T(d)),(e=>({name:e,fn:A((t=>{var o;return[O(a.$slots,null==(o=T(d))?void 0:o[e],V(_(t||{})))]}))}))),e.unit?{name:"extra",fn:A((()=>[S("div",Ta,m(e.unit),1)])),key:"1"}:void 0]),1040,["model-value","class"])}}}),Oa={input:"请输入",select:"请选择"};function Va({placeholderType:e}={placeholderType:"select"}){const a=p(),t=f(),o=N({filedAttrs:{},filedSlots:{},attrs:{},slots:{}});return C((()=>a),(()=>{const[t,l]=(e=>na(e,Je,ea))(a);o.filedAttrs={...t,placeholder:a.placeholder||`${Oa[e]}${a.label||""}`},o.attrs={title:`请选择${t.label}`,...l}}),{deep:!0,immediate:!0}),C([()=>t,()=>a.slots],(e=>{const[l,r]=(e=>na(e,Qe))(fa(t,a.slots));o.filedSlots=l||{},o.slots=r||{}}),{deep:!0,immediate:!0}),o}const _a={class:"custom-input-wrap"},Sa={key:1,class:"placeholder"},$a=d({inheritAttrs:!1,__name:"CustomInput",props:{fieldValueView:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const a=e;return p(),y(ze),R((()=>a.modelValue)),(a,t)=>(u(),c("div",_a,[e.fieldValueView||e.isView?O(a.$slots,"value-view",{key:0,value:e.fieldValueView},(()=>[E(Ea,{value:e.fieldValueView},null,8,["value"])])):(u(),c("span",Sa,m(a.$attrs.placeholder),1))]))}});const wa=d({name:"ProFormItem"}),Ra=d({...wa,props:{fieldValueView:{type:String,default:""},name:{type:String,default:""},isView:{type:Boolean,default:!1},modelValue:{type:[String,Boolean,Object,Number],default:""}},setup(e){const a=f(),t=b((()=>Object.keys(a).filter((e=>"value-view"!==e))));return(a,o)=>(u(),h(Ia,{class:P({"com-form-item":!0,"com-form-item--view":e.isView}),"is-link":!e.isView},v({input:A((()=>[E($a,{name:e.name,"model-value":e.modelValue,"is-view":e.isView,"field-value-view":e.fieldValueView,placeholder:a.$attrs.placeholder},{"value-view":A((e=>[O(a.$slots,"value-view",V(_(e||{})))])),_:3},8,["name","model-value","is-view","field-value-view","placeholder"])])),_:2},[I(T(t),(e=>({name:e,fn:A((t=>[O(a.$slots,e,V(_(t||{})))]))})))]),1032,["class","is-link"]))}});const Pa={class:"com-image-upload"},xa={class:"upload-item"};var Ma=i(d({__name:"ProBaseUpload",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},uploadType:{type:String,default:x.OTHER},category:{type:Number,default:null},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","update:ossKeyList","onUploaded"],setup(e,{emit:a}){const t=e,{slots:l}=M(Va()),{objectType:r}=y(ze)||{},n=b((()=>Object.keys(l).filter((e=>"default"!==e)))),s=N({modelValue:[],ossKeyList:[]}),i=e=>{D(e.file,t.uploadType).then((e=>{const{code:o,data:l}=e||{};"10000"===o&&l.url&&(s.modelValue.push({url:l.url,category:t.category,objectType:t.objectType||r}),s.ossKeyList.push(l.ossKey),a("onUploaded",l))}))},d=(e,a)=>{const{index:t}=a;s.modelValue.splice(t,1),s.ossKeyList.splice(t,1)};return C((()=>s.ossKeyList),(e=>{a("update:ossKeyList",e)}),{deep:!0,immediate:!0}),C((()=>t.modelValue),(e=>{console.log("1111111cest"),o(e)?s.modelValue=e:s.modelValue=[]}),{deep:!0,immediate:!0}),(a,t)=>{const o=k;return u(),c("div",Pa,[E(o,{"model-value":T(s).modelValue,"after-read":i,"max-count":e.maxCount,"before-delete":d,disabled:e.isView},v({default:A((()=>[O(a.$slots,"default",{},(()=>[S("div",xa,[E(B,{name:"image-upload",class:"icon"})])]),!0)])),_:2},[I(T(n),(e=>({name:e,fn:A((t=>[O(a.$slots,e,V(_(t||{})),void 0,!0)]))})))]),1032,["model-value","max-count","disabled"])])}}}),[["__scopeId","data-v-bad4730a"]]);const Da={class:"sub-label"},ka={class:"com-image-upload"},Ba={class:"upload-item"};var La=i(d({__name:"ProUploadV2",props:{modelValue:{type:Array,default:()=>[]},maxCount:{type:Number,default:1},subLabel:{type:String,default:""},uploadType:{type:String,default:x.OTHER},category:{type:Number,default:L.OTHER},objectType:{type:Number,default:null},isView:{type:Boolean,default:!1}},emits:["update:modelValue","onUploaded"],setup(e,{emit:a}){const t=e,{filedAttrs:o,filedSlots:l,attrs:r,slots:n}=M(Va()),{formState:s,objectType:i,objectId:d}=y(ze)||{},c=b((()=>Object.keys(n).filter((e=>"default"!==e)))),p=N({modelValue:[]}),f=b((()=>(p.modelValue||[]).map((({uri:e})=>({url:e})))));R((()=>p.modelValue));const g=e=>{D(e.file,t.uploadType).then((e=>{const{code:o,data:l}=e||{};"10000"===o&&l.url&&(p.modelValue.push({objectId:d,uri:l.url,category:t.category,objectType:t.objectType||i}),a("onUploaded",l))}))},$=(e,a)=>{const{index:t}=a;p.modelValue.splice(t,1)};return C((()=>p.modelValue),(e=>{a("update:modelValue",e)}),{deep:!0,immediate:!0}),C((()=>t.modelValue),(e=>{Array.isArray(p.modelValue)&&(p.modelValue=e)}),{deep:!0,immediate:!0}),(a,t)=>{const l=k,r=Ra;return u(),h(r,{class:P({"com-van-upload-wrap":!0,"com-van-upload-wrap-view":e.isView}),"model-value":T(p).modelValue},v({input:A((()=>[S("div",ka,[E(l,{"model-value":T(f),"after-read":g,"max-count":e.maxCount,"before-delete":$,disabled:e.isView},v({default:A((()=>[O(a.$slots,"default",{},(()=>[S("div",Ba,[E(B,{name:"image-upload",class:"icon"})])]),!0)])),_:2},[I(T(c),(e=>({name:e,fn:A((t=>[O(a.$slots,e,V(_(t||{})),void 0,!0)]))})))]),1032,["model-value","max-count","disabled"])])])),_:2},[e.subLabel?{name:"label",fn:A((()=>[j(m(T(o).label),1),S("span",Da,m(e.subLabel),1)])),key:"0"}:void 0]),1032,["class","model-value"])}}}),[["__scopeId","data-v-28ffa94a"]]);export{ke as B,Be as P,ze as V,Ia as _,oa as a,Ea as b,aa as c,la as d,Ra as e,ga as f,Ca as g,ra as h,Xe as i,ma as j,Ma as k,La as l,pa as m,Na as r,ua as t,Va as u,ta as v};

!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.page-businessOpportunity{--van-tab-font-size:$zaui-font-size-md2}.page-businessOpportunity .van-search__content{background:#f3f3f3}.page-businessOpportunity .van-list__finished-text{text-align:center;line-height:none;font-size:.34667rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#d7d7d7;margin-top:.69333rem}.page-businessOpportunity .van-tabs__wrap{height:1.33333rem}.page-businessOpportunity .empty-class{margin-top:2.66667rem}.page-businessOpportunity .top{display:flex;align-items:center;padding-left:.4rem}.page-businessOpportunity .top .top-left{display:flex;align-items:center}.page-businessOpportunity .top .top-left .text{width:1.06667rem;height:.56rem;font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#616161;line-height:.56rem;margin-right:.05333rem}.page-businessOpportunity .top .top-left img{width:.26667rem;height:.2rem;transition:transform .5s}.page-businessOpportunity .top .top-left img.active{transform:rotate(180deg)}.page-businessOpportunity .top .top-right{width:100%}.page-businessOpportunity .choose-date .date-item{font-size:.4rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#616161;line-height:.56rem;width:100%;height:1.2rem;background:#FFFFFF;border-radius:.02667rem;display:flex;align-items:center;justify-content:center}.page-businessOpportunity .choose-date .date-item.activited{color:#ff2b1f}.page-businessOpportunity .choose-date .date-item img{margin-left:.24rem;width:.30667rem;height:.18667rem}.page-businessOpportunity .choose-date .date-item:first-child{border-bottom:1px solid #f2f2f2}.page-businessOpportunity .mid .card-list{padding:.4rem;background:#f4f5f7;min-height:calc(100vh - 3.78667rem)}.page-businessOpportunity .mid .card-list .list-item{background-repeat:no-repeat;background-size:100% 100%;-moz-background-size:100% 100%;padding:.4rem;margin-bottom:.33333rem}.page-businessOpportunity .mid .card-list .list-item .item-top{position:relative;margin-bottom:.66667rem}.page-businessOpportunity .mid .card-list .list-item .item-top .text{font-size:.37333rem;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;color:#343434;line-height:.58667rem}.page-businessOpportunity .mid .card-list .list-item .item-top .text.active{display:-webkit-box;text-overflow:ellipsis;overflow:hidden;width:100%;-webkit-line-clamp:2;-webkit-box-orient:vertical}.page-businessOpportunity .mid .card-list .list-item .item-top .show-more-out{position:absolute;right:0;bottom:-20}.page-businessOpportunity .mid .card-list .list-item .item-top .show-more-out .show-more{display:flex;align-items:center;height:.44rem;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#b38e57;line-height:.44rem;margin-right:.06667rem}.page-businessOpportunity .mid .card-list .list-item .item-top .show-more-out .show-more img{width:.32rem;height:.2rem;transition:transform .5s}.page-businessOpportunity .mid .card-list .list-item .item-top .show-more-out .show-more img.active{transform:rotate(180deg)}.page-businessOpportunity .mid .card-list .list-item .item-bottom{display:flex;align-items:center;justify-content:space-between}.page-businessOpportunity .mid .card-list .list-item .item-bottom .bottom-left{display:flex;align-items:center}.page-businessOpportunity .mid .card-list .list-item .item-bottom .bottom-left .userful-area{display:flex;align-items:center;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#b38e57;line-height:.44rem;margin-right:.06667rem}.page-businessOpportunity .mid .card-list .list-item .item-bottom .bottom-left .userful-area img{width:.45333rem;height:.42667rem}.page-businessOpportunity .mid .card-list .list-item .item-bottom .bottom-left .userful-area:first-child{margin-right:.4rem}.page-businessOpportunity .mid .card-list .list-item .item-bottom .bottom-right{display:flex;align-items:center}.page-businessOpportunity .mid .card-list .list-item .item-bottom .bottom-right .call{display:flex;align-items:center;padding:0 .29333rem;height:.8rem;border-radius:.4rem;border:.02667rem solid #FF2B1F;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#ff2b1f;line-height:.53333rem;margin-right:.18667rem}.page-businessOpportunity .mid .card-list .list-item .item-bottom .bottom-right .call img{margin-left:.13333rem;width:.32rem;height:.32rem}.page-businessOpportunity .mid .card-list .list-item .item-bottom .bottom-right .visit{margin-right:.18667rem;display:flex;align-items:center;padding:0 .29333rem;height:.8rem;border-radius:.4rem;border:.02667rem solid #FF2B1F;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#ff2b1f;line-height:.53333rem}.page-businessOpportunity .mid .card-list .list-item .item-bottom .bottom-right .customerInfo{height:.8rem;background:#FF2B1F;border-radius:.4rem;border:.02667rem solid #FF2B1F;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#fff;line-height:.53333rem;padding:.10667rem .29333rem 0;margin-right:-.13333rem}\n',document.head.appendChild(e),System.register(["./vendor-legacy-f56233fa.js","./businessOpportunity-legacy-c0354cb5.js","./index-legacy-4c8de798.js","./index-legacy-32e69765.js","./index-legacy-9604cbf9.js"],(function(e){"use strict";var t,i,s,a,l,n,o,r,u,m,d,c,g,p,h,f,v,b,y,Y,D,C,O,k,M,F,w,I,x,S,P;return{setters:[function(e){t=e.g,i=e.a0,s=e.C,a=e.L,l=e.M,n=e.d,o=e.h,r=e.j,u=e.r,m=e.k,d=e.y,c=e.I,g=e.z,p=e.J,h=e.n,f=e.G,v=e.H,b=e.m,y=e.E,Y=e.B,D=e.F,C=e.A,O=e.T,k=e.D},function(e){M=e.q,F=e.u,w=e.g,I=e.a},function(e){x=e._},function(e){S=e._},function(e){P=e.u}],execute:function(){const z={class:"top"},T={class:"text"},_=["src"],j={class:"top-right"},U={class:"choose-date"},V=["onClick"],B=["src"],R={class:"mid"},L={class:"card-list"},q={class:"item-top"},E=["onClick"],N={class:"show-more"},$=["src"],W={class:"item-bottom"},H={class:"bottom-left"},A=["onClick"],G=["src"],J=Y(" 有用 "),Z=["onClick"],K=["src"],Q=Y(" 无用 "),X={class:"bottom-right"},ee=["onClick"],te=Y(" 电话"),ie=["src"],se=["onClick"],ae=["onClick"],le={class:"card-list"},ne={class:"item-top"},oe=["onClick"],re={class:"show-more"},ue=["src"],me={class:"item-bottom"},de={class:"bottom-left"},ce=["onClick"],ge=["src"],pe=Y(" 有用 "),he=["onClick"],fe=["src"],ve=Y(" 无用 "),be={class:"bottom-right"},ye=["onClick"],Ye=Y(" 电话"),De=["src"],Ce=["onClick"],Oe=["onClick"];e("default",t({setup(e){const{getIconUrl:t}=P(),ke=i(),Me=s(!1),Fe=s(""),we=s(0),Ie=s(!1),xe=[{text:"今天",value:0},{text:"近一周",value:1}],Se=s(0),Pe=a([]),ze=a([]),Te=a([]),_e=()=>{Ie.value=!Ie.value},je=e=>{Te.includes(e)?Te.splice(Te.indexOf(e),1):Te.push(e)},Ue=e=>{M({agentCustomerId:e.agentCustomerId,customerType:e.customerType,businessType:"22",nicheIds:e.nicheIds,useType:"TEL",startDate:0===we.value?n().format("YYYY-MM-DD"):n().subtract(7,"day").format("YYYY-MM-DD"),endDate:n().format("YYYY-MM-DD")}).then((e=>{window.location.href=`tel:${e.data.data}`})).catch((e=>{O("获取电话失败")}))},Ve=e=>{F({nicheIds:e.nicheIds,nicheUseType:"VST",startDate:0===we.value?n().format("YYYY-MM-DD"):n().subtract(7,"day").format("YYYY-MM-DD"),endDate:n().format("YYYY-MM-DD")}).then((t=>{ke.push({name:"customerDetail",query:{agentCustomerId:e.agentCustomerId,customerType:e.customerType},hash:"#2"})}))},Be=e=>{F({nicheIds:e.nicheIds,nicheUseType:"CLI",startDate:0===we.value?n().format("YYYY-MM-DD"):n().subtract(7,"day").format("YYYY-MM-DD"),endDate:n().format("YYYY-MM-DD")}).then((t=>{ke.push({name:"customerDetail",query:{agentCustomerId:e.agentCustomerId,customerType:e.customerType}})}))},Re=s(!1),Le=s(!1),qe=s(!1),Ee=s(0),Ne=s(!1),$e=s(!1),We=s(!1),He=s(0),Ae=e=>{"nouse"===e&&(qe.value&&(Pe.splice(0,Pe.length),qe.value=!1),Ee.value+=1,1===Ee.value&&(Me.value=!0),w({pageNum:Ee.value,pageSize:10,queryBean:{endDate:n().format("YYYY-MM-DD"),startDate:0===we.value?n().format("YYYY-MM-DD"):n().subtract(7,"day").format("YYYY-MM-DD"),usageStatus:"N",keyWords:Fe.value||""}}).then((e=>{null!==e.data.data&&0!==e.data.data.length||(Re.value=!1,Le.value=!0),null!==e.data.data&&Pe.push(...e.data.data),Re.value=!1,Me.value=!1})).catch((e=>{Me.value=!1}))),"used"===e&&(We.value&&(ze.splice(0,ze.length),We.value=!1),He.value+=1,1===He.value&&(Me.value=!0),w({pageNum:He.value,pageSize:10,queryBean:{endDate:n().format("YYYY-MM-DD"),startDate:0===we.value?n().format("YYYY-MM-DD"):n().subtract(7,"day").format("YYYY-MM-DD"),usageStatus:"Y",keyWords:Fe.value||""}}).then((e=>{null!==e.data.data&&0!==e.data.data.length||(Ne.value=!1,$e.value=!0),null!==e.data.data&&ze.push(...e.data.data),Ne.value=!1,Me.value=!1})).catch((e=>{Me.value=!1})))},Ge=e=>{"nouse"===e&&(Le.value=!1,Re.value=!0,Ee.value=0,Ae("nouse")),"used"===e&&($e.value=!1,Ne.value=!0,He.value=0,Ae("used"))},Je=e=>{k.confirm({message:"确认删除此条商机吗？",theme:"round-button"}).then((()=>{I({nicheIds:e.nicheIds,feedBack:"N",startDate:0===we.value?n().format("YYYY-MM-DD"):n().subtract(7,"day").format("YYYY-MM-DD"),endDate:n().format("YYYY-MM-DD")}).then((e=>{0===Se.value?(Pe.splice(0),Ge("nouse")):(ze.splice(0),Ge("used"))}))})).catch((()=>{}))},Ze=(e,t)=>{"Y"!==e.useFlag&&I({nicheIds:e.nicheIds,feedBack:"Y",startDate:0===we.value?n().format("YYYY-MM-DD"):n().subtract(7,"day").format("YYYY-MM-DD"),endDate:n().format("YYYY-MM-DD")}).then((e=>{0===Se.value?Pe.forEach(((e,i)=>{i===t&&(e.useFlag="Y")})):ze.forEach(((e,i)=>{i===t&&(e.useFlag="Y")}))}))},Ke=({name:e})=>{Te.splice(0),0===e?(Pe.splice(0),Ge("nouse")):(ze.splice(0),Ge("used"))},Qe=()=>{0===Se.value?(Pe.splice(0),Ge("nouse")):(ze.splice(0),Ge("used"))},Xe=()=>{0===Se.value?(Pe.splice(0),Ge("nouse")):(ze.splice(0),Ge("used"))};return l((()=>{Ge("nouse")})),(e,i)=>{const s=u("van-search"),a=u("van-list"),l=u("van-pull-refresh"),n=u("van-tab"),O=u("van-tabs"),k=u("ZaPageWrap");return m(),o(k,{id:"outer","main-class":"page-businessOpportunity"},{default:r((()=>[d("div",z,[d("div",{class:"top-left",onClick:_e},[d("div",T,c(0===we.value?"今天":"近7天"),1),d("img",{src:g(t)("businessOpportunity.chooseImg"),alt:"",class:p({active:Ie.value})},null,10,_)]),d("div",j,[h(s,{modelValue:Fe.value,"onUpdate:modelValue":i[0]||(i[0]=e=>Fe.value=e),placeholder:"请输入姓名、手机号查询",shape:"round","left-icon":g(t)("target.searchImg"),onSearch:Qe,onClear:Xe},null,8,["modelValue","left-icon"])])]),f(d("div",U,[(m(),b(D,null,y(xe,((e,i)=>d("div",{key:i,class:p(["date-item",{activited:we.value===i}]),onClick:t=>{return i=e,we.value=i.value,Ie.value=!Ie.value,void(0===Se.value?(Pe.splice(0),Ge("nouse")):(ze.splice(0),Ge("used")));var i}},[Y(c(e.text)+" ",1),f(d("img",{src:g(t)("businessOpportunity.chosedImg"),alt:""},null,8,B),[[v,we.value===i]])],10,V))),64))],512),[[v,Ie.value]]),d("div",R,[h(O,{active:Se.value,"onUpdate:active":i[9]||(i[9]=e=>Se.value=e),onClickTab:Ke},{default:r((()=>[h(n,{title:"未使用"},{default:r((()=>[f(d("div",L,[h(l,{modelValue:qe.value,"onUpdate:modelValue":i[3]||(i[3]=e=>qe.value=e),onRefresh:i[4]||(i[4]=e=>Ge("nouse"))},{default:r((()=>[h(a,{loading:Re.value,"onUpdate:loading":i[1]||(i[1]=e=>Re.value=e),finished:Le.value,"finished-text":"- 已经到底了哦 -",onLoad:i[2]||(i[2]=e=>Ae("nouse"))},{default:r((()=>[(m(!0),b(D,null,y(g(Pe),((e,i)=>{var s;return m(),b("div",{key:i,class:"list-item",style:C({backgroundImage:`url(${g(t)("businessOpportunity.itembj")})`})},[d("div",q,[d("div",{id:"textTitle",class:p(["text",{active:!g(Te).includes(i)}])},c(e.message),3),f(d("div",{class:"show-more-out",onClick:e=>je(i)},[d("div",N,[Y(c(g(Te).includes(i)?"收起":"展开"),1),d("img",{src:g(t)("businessOpportunity.showImg"),alt:"",class:p({active:g(Te).includes(i)})},null,10,$)])],8,E),[[v,(null===(s=e.message)||void 0===s?void 0:s.length)>40]])]),d("div",W,[d("div",H,[d("div",{class:"userful-area",onClick:t=>Ze(e,i)},[d("img",{src:"Y"===e.useFlag?g(t)("businessOpportunity.usefulImg"):g(t)("businessOpportunity.usefuldarkImg"),alt:""},null,8,G),J],8,A),d("div",{class:"userful-area",onClick:t=>Je(e)},[d("img",{src:g(t)("businessOpportunity.uselessImg"),alt:""},null,8,K),Q],8,Z)]),d("div",X,[d("div",{class:"call",onClick:t=>Ue(e)},[te,d("img",{src:g(t)("businessOpportunity.callImg"),alt:""},null,8,ie)],8,ee),d("div",{class:"visit",onClick:t=>Ve(e)},"拜访",8,se),d("div",{class:"customerInfo",onClick:t=>Be(e)},"客户信息",8,ae)])])],4)})),128))])),_:1},8,["loading","finished"])])),_:1},8,["modelValue"])],512),[[v,0!==g(Pe).length&&!Me.value]]),f(h(S,{vertical:!0},null,512),[[v,Me.value]]),f(h(x,{title:"暂无商机",class:"empty-class"},null,512),[[v,0===g(Pe).length&&!Me.value]])])),_:1}),h(n,{title:"已使用"},{default:r((()=>[f(d("div",le,[h(l,{modelValue:We.value,"onUpdate:modelValue":i[7]||(i[7]=e=>We.value=e),onRefresh:i[8]||(i[8]=e=>Ge("used"))},{default:r((()=>[h(a,{loading:Ne.value,"onUpdate:loading":i[5]||(i[5]=e=>Ne.value=e),finished:$e.value,"finished-text":"- 已经到底了哦 -",onLoad:i[6]||(i[6]=e=>Ae("used"))},{default:r((()=>[(m(!0),b(D,null,y(g(ze),((e,i)=>{var s;return m(),b("div",{key:i,class:"list-item",style:C({backgroundImage:`url(${g(t)("businessOpportunity.itembj")})`})},[d("div",ne,[d("div",{id:"textTitle",class:p(["text",{active:!g(Te).includes(i)}])},c(e.message),3),f(d("div",{class:"show-more-out",onClick:e=>je(i)},[d("div",re,[Y(c(g(Te).includes(i)?"收起":"展开"),1),d("img",{src:g(t)("businessOpportunity.showImg"),alt:"",class:p({active:g(Te).includes(i)})},null,10,ue)])],8,oe),[[v,(null===(s=e.message)||void 0===s?void 0:s.length)>40]])]),d("div",me,[d("div",de,[d("div",{class:"userful-area",onClick:t=>Ze(e,i)},[d("img",{src:"Y"===e.useFlag?g(t)("businessOpportunity.usefulImg"):g(t)("businessOpportunity.usefuldarkImg"),alt:""},null,8,ge),pe],8,ce),d("div",{class:"userful-area",onClick:t=>Je(e)},[d("img",{src:g(t)("businessOpportunity.uselessImg"),alt:""},null,8,fe),ve],8,he)]),d("div",be,[d("div",{class:"call",onClick:t=>Ue(e)},[Ye,d("img",{src:g(t)("businessOpportunity.callImg"),alt:""},null,8,De)],8,ye),d("div",{class:"visit",onClick:t=>Ve(e)},"拜访",8,Ce),d("div",{class:"customerInfo",onClick:t=>Be(e)},"客户信息",8,Oe)])])],4)})),128))])),_:1},8,["loading","finished"])])),_:1},8,["modelValue"])],512),[[v,0!==g(ze).length&&!Me.value]]),f(h(S,{vertical:!0},null,512),[[v,Me.value]]),f(h(x,{title:"暂无商机",class:"empty-class"},null,512),[[v,0===g(ze).length&&!Me.value]])])),_:1})])),_:1},8,["active"])])])),_:1})}}}))}}}))}();

import{d as e,h as r,i as a,k as o,aj as t,by as d,o as n,c as s,u as i,F as l,p as c,w as p,a8 as u,cZ as m,f as y,_ as h,aa as C,a6 as N,aD as f,cx as I,cy as k,cz as g,ec as z}from"./index-86787787.js";import{c as $}from"./order-b1e14b26.js";const B={class:"operate-wrap"},S=e({name:"operateBtn"});var F=h(e({...S,props:{detail:{default:()=>({})}},emits:["handleCancel"],setup(e,{emit:h}){const S=e,F=r(),b=a(),{tenantId:q,nextPageCode:x,isShare:_}=b.query,j=o((()=>"/orderRecordList"===b.path)),w=o((()=>{const{orderTopStatus:e,productClassFlag:r,orderStatus:a}=S.detail;return!("-1"!==e||C.orderList!==b.path||"underWritingFailed"===a&&r===N.YES||["manualUnderWriting","offlinePayment","paymentFailed"].includes(a))})),P=o((()=>{const{policyNo:e,applicationNo:r,orderStatus:a}=S.detail;return!e&&r&&"cancel"!==a})),v=o((()=>{const{orderStatus:e}=S.detail;return["offlinePayment","manualUnderWriting","paymentFailed"].includes(e)})),D=()=>{const{orderStatus:e,orderNo:r,insurerCode:a,underwriteFlag:o,templateId:t,iseeBizNo:d}=S.detail;let n=C.sign;("collectInfo"===e||"underWritingFailed"===e&&o===N.NO)&&(n=C.infoCollection),F.push({path:n,query:{...b.query,tenantId:q,orderNo:r,insurerCode:a,templateId:t,iseeBizNo:d}})},T=()=>{const{orderId:e,orderNo:r}=S.detail||{};F.push({path:"orderTrajectory",query:{...b.query,orderId:e,orderNo:r}})},W=()=>{const{orderNo:e,orderId:r}=S.detail;_?f.confirm({message:"撤单后将无法恢复，请您确认是否撤销本次投保"}).then((()=>{h("handleCancel")})):$({tenantId:q,orderNo:e,type:1}).then((({code:e,data:r})=>{"10000"===e&&f.confirm({message:"确认取消当前订单？"}).then((()=>{(e=>{const{holderName:r,holderGender:a,orderId:o,orderNo:t,insurerCode:d,iseeBizNo:n}=S.detail||{},s=r,i=`${I[a]}士`;k({shareType:0,title:`${g.cancel.title}`,desc:g.cancel.desc.replace("{name}",`${s}${i},`),url:`${window.location.href}&objectType=${e}&insurerCode=${d}&isShare=1&orderNo=${t}&iseeBizNo=${n}&orderId=${o}&nextPageCode=orderDetail`.replace(/\/orderDetail|\/order/,"/baseInsurance/long/phoneVerify"),imageUrl:z})})("holder")}))}))},U=()=>{const{orderNo:e,orderId:r,insurerCode:a,iseeBizNo:o}=S.detail;F.push({path:C.updateBankInfo,query:{tenantId:q,orderNo:e,orderId:r,insurerCode:a,nextPageCode:"orderDetail",iseeBizNo:o}})};return(e,r)=>{const a=t,o=d;return n(),s("div",B,[i(j)?(n(),c(o,{key:1,label:"",value:"查看订单状态","is-link":"",onClick:m(T,["stop"])},null,8,["onClick"])):(n(),s(l,{key:0},[i(w)?(n(),c(a,{key:0,type:"primary",size:"small",onClick:m(D,["stop"])},{default:p((()=>[u("去处理")])),_:1},8,["onClick"])):y("",!0),i(P)?(n(),c(a,{key:1,type:"primary",plain:"",size:"small",onClick:m(W,["stop"])},{default:p((()=>[u("撤单")])),_:1},8,["onClick"])):y("",!0),i(v)?(n(),c(a,{key:2,plain:"",size:"small",onClick:m(U,["stop"])},{default:p((()=>[u("银行卡修改")])),_:1},8,["onClick"])):y("",!0)],64))])}}}),[["__scopeId","data-v-64c02a7e"]]);export{F as O};

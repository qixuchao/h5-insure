import{_ as a,d as e,h as l,g as d,i as o,j as s,aj as n,O as r,o as t,c,a as m,b as i,e as u,u as p,l as v,w as h,q as f,a8 as b,T as y,ce as V,c6 as k,c7 as g,c8 as w,ag as C,at as q,au as x}from"./index-529aa61b.js";import{g as N}from"./trial-5f7c8aaa.js";import{c as _,e as j}from"./verify-b1ffbcf0.js";const I={class:"page-pay-auth-wrap"},T={class:"header"},U={class:"content"},O={class:"bank-card"},R={class:"card-content"},W={class:"main"},A={class:"bank-name"},B={class:"bank-no"},E={class:"bank-card-type"},L=(a=>(q("data-v-7568e6d7"),a=a(),x(),a))((()=>m("p",{class:"desc"},"实时单笔限额5W 实时单日限额5W",-1))),P={class:"footer-button"},z=e({name:"payAuth"});var D=a(e({...z,setup(a){const e=l(),q=d(),{orderNo:x,tenantId:z}=e.query,D=o(),F=o(),G=o({}),H=s((()=>F.value.holder.certType===n.CERT?"身份证号":"证件号")),J=(a,e)=>{_(F.value).then((({code:a,data:l})=>{"10000"===a&&(null==e||e())}))},K=()=>{D.value.validate().then((a=>{j(F.value).then((({code:a,data:e})=>{"10000"===a&&(q.back(),y("成功"))}))})).catch((a=>{console.log("e",a)}))};return r((()=>{(async()=>{await N({orderNo:x,tenantId:z}).then((({code:a,data:e})=>{"10000"===a&&(F.value=e,G.value=e.tenantOrderPayInfoList.find((a=>1===a.payInfoType)))}))})()})),(a,e)=>{const l=V,d=k,o=g,s=w,n=C;return t(),c("div",I,[m("div",T,[i(l,{type:"warning",content:"根据央行发布《关于规范支付创新业务的通知》，明确代收服务机构应当要求收款人事先与付款人签订收款协议，取得持卡人授权，并在代收交易处理中验证协议关系，银行与持卡人的直接授权。"})]),m("div",U,[m("div",O,[m("div",R,[m("div",W,[m("span",A,u(p(G).payBank||"中国工商银行"),1),m("span",B,u(p(G).bankCardNo||"**** **** **** 3941"),1)]),m("p",E,u(p(G).bankCardType||"储蓄卡"),1),L])]),p(F)?(t(),v(s,{key:0,ref_key:"formRef",ref:D,model:p(F).holder},{default:h((()=>[i(d,{modelValue:p(F).holder.name,"onUpdate:modelValue":e[0]||(e[0]=a=>p(F).holder.name=a),label:"姓名",name:"name",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),i(d,{modelValue:p(F).holder.certNo,"onUpdate:modelValue":e[1]||(e[1]=a=>p(F).holder.certNo=a),label:p(H),name:"certNo",maxlength:"18","is-view":"",required:""},null,8,["modelValue","label"]),i(d,{modelValue:p(F).holder.mobile,"onUpdate:modelValue":e[2]||(e[2]=a=>p(F).holder.mobile=a),label:"银行预留手机",name:"mobile",maxlength:"11","is-view":"",required:""},null,8,["modelValue"]),i(o,{modelValue:p(F).holder.verifyCode,"onUpdate:modelValue":e[3]||(e[3]=a=>p(F).holder.verifyCode=a),label:"验证码",maxlength:"6",name:"verifyCode","related-name":"mobile","send-s-m-s-code":J,required:""},null,8,["modelValue"])])),_:1},8,["model"])):f("",!0)]),m("div",P,[i(n,{type:"primary",onClick:K},{default:h((()=>[b("提交")])),_:1})])])}}}),[["__scopeId","data-v-7568e6d7"]]);export{D as default};

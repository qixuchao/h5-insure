import{d as a,j as e,k as l,E as n,az as t,dB as s,o as i,c as o,a as u,b as d,w as r,e as v,u as p,F as c,s as f,n as m,f as C,p as y,aU as k,q as g,aZ as h,_ as b,ar as S}from"./index-ecfbfc6d.js";import{C as _}from"./index-93fdf1f0.js";import{o as j}from"./utils-6b1044bf.js";import{C as w}from"./index-251a0c35.js";import"./infoCollection-9eb10417.js";import"./trial-91f90222.js";const U={class:"guarantee-list"},x={key:0,class:"plan-list"},A=["onClick"],L={class:"guarantee-detail"},V={class:"content"},$={key:1,class:"feerate-view"},E=a({name:"guarantee"});var q=b(a({...E,props:{dataSource:{default:()=>({})},showServiceConfig:{type:Boolean,default:!1},isShowClose:{type:Boolean,default:!1},count:{default:5},planList:{default:()=>[]}},emits:["updateActivePlan"],setup(a,{emit:b}){var E,q;const B=a;e("");const F=b,I=e((null==(q=null==(E=B.planList)?void 0:E[0])?void 0:q.planCode)||void 0),N=e(),P=e([]);e([]);const R=e(),T=l((()=>!!B.planList.length)),z=e(null),G=e([]),O=l((()=>{var a,e;return(null==(a=G.value)?void 0:a.length)===(null==(e=P.value)?void 0:e.length)})),Y=()=>{var a,e;null==(e=null==(a=z.value)?void 0:a.toggleAll)||e.call(a,!O.value)};n([()=>B.dataSource,()=>I.value],(()=>{var a,e;P.value=((null==(e=((null==(a=B.dataSource)?void 0:a.GUARANTEE)||[]).find((a=>a.planCode===I.value)))?void 0:e.data)||[]).filter((a=>a.isShowOn===`${t.YES}`))}),{immediate:!0,deep:!0});const Z=l((()=>{var a;return(null==(a=B.dataSource)?void 0:a.rateUri)||""})),D=l((()=>!!(R.value&&R.value.paymentFrequencyValue&&R.value.premiumUnit&&Z))),H=()=>{j({fileType:"pdf",fileUri:Z.value})};return(a,e)=>{var l,n;const t=S,b=_,j=w,E=s("dompurify-html");return i(),o(c,null,[u("div",U,[d(t,{title:"保障详情","show-line":!1,"show-divider":!1},{extra:r((()=>[u("span",{onClick:Y},v(p(O)?"收起全部":"展开全部"),1)])),_:1}),p(T)?(i(),o("div",x,[(i(!0),o(c,null,f(a.planList,((a,e)=>(i(),o("div",{key:`${a.planCode}_${e}`,class:m("plan-list-item "+(a.planCode===p(I)?"plan-list-item-active":"")),onClick:e=>{return l=a.planCode,I.value=l,N.value=B.planList.findIndex((a=>a.planCode===l)),void F("updateActivePlan",l);var l}},[u("span",null,v(a.planName),1)],10,A)))),128))])):C("",!0),u("div",L,[d(j,{ref_key:"collapseRef",ref:z,modelValue:p(G),"onUpdate:modelValue":e[0]||(e[0]=a=>g(G)?G.value=a:null),border:!1},{default:r((()=>[(i(!0),o(c,null,f(p(P),((a,e)=>(i(),y(b,{key:e,title:a.title,value:a.desc,name:e,border:!1,class:"guarantee-item"},{default:r((()=>[k(u("div",V,null,512),[[E,a.tips]])])),_:2},1032,["title","value","name"])))),128))])),_:1},8,["modelValue"])]),p(D)?(i(),o("div",$,[u("span",null,v(`${(null==(l=p(R))?void 0:l.paymentFrequencyValue)||""}${(null==(n=p(R))?void 0:n.premiumUnit)||""}`),1),p(Z)?(i(),o("span",{key:0,onClick:H},"查看保费")):C("",!0)])):C("",!0)]),d(h)],64)}}}),[["__scopeId","data-v-eba9291c"]]);export{q as default};

import{E as e,d as t,c as n,y as a,i as o,w as r,f as s,R as i,U as l,z as d,g as c,e as u,V as p,bf as f,W as m,X as I,u as v,x as y,r as h,K as b,Y as O,o as _,b as P,h as j,aS as g,aw as C,bs as L,k as V,j as w,P as x,a2 as k,a9 as S}from"./index-bf17f989.js";import{t as E}from"./ProRenderFormWithCard.vue_vue_type_style_index_0_scoped_true_lang-09a6fb28.js";/* empty css              */import"./bankCard-10de4350.js";import{_ as R}from"./PayInfo-470ae8b1.js";import{c as N,i as T}from"./trial-f91688d4.js";import{n as A}from"./nextStep-43951d85.js";import{u as D}from"./useAttachment-55e1db24.js";import{a as U,q as F}from"./product-b493cfce.js";import{g as q}from"./utils-5375db12.js";import{u as $}from"./useOrder-45623aca.js";import{p as W}from"./pageJump-ff857477.js";import{B,P as J}from"./constants-7afb7c3d.js";import{P as Y}from"./index-7a665ebb.js";import"./infoCollection-55387911.js";import{P as M}from"./index-5c5a7d11.js";import{I as z,P as G,b as H}from"./trial-3d5b5b01.js";import"./pdfh5-008ca364.js";import"./phoneVerify-9f3ebc29.js";import"./_initCloneObject-0663309f.js";import"./isObjectLike-a9798079.js";import"./index-5e800625.js";import"./debounce-eed12388.js";import"./index-6a1bdd89.js";import"./core-e4a822ce.js";import"./constant-8927d485.js";import"./cloneDeep-1de8e9b0.js";const X={class:"com-insured-part-wrapper"},K={class:"content-wrapper"};var Q=e(t({__name:"InsureInfo",props:{productData:{default:()=>({})}},setup(e){const t=(e,t)=>-1!==t.indexOf("$")?t.replace("$",`${e}`):`${e||""}${t}`;return(m,I)=>{const v=p,y=f;return n(),a("div",X,[o(y,{title:"保障信息"},{default:r((()=>{var r;return[s("div",K,[(n(!0),a(i,null,l((null==(r=e.productData)?void 0:r.tenantOrderRiskList)||[],((r,p)=>(n(),a("div",{key:p,class:"risk-item"},[s("p",null,d(r.riskName),1),o(v,{title:"保障期间",content:t(r.insurancePeriodValue,c(z)[r.insurancePeriodType])},null,8,["content"]),o(v,{title:"交费期间",content:t(r.paymentPeriod,c(G)[r.paymentPeriodType])},null,8,["content"]),o(v,{title:"交费方式",content:c(H)[r.paymentFrequency]},null,8,["content"]),(n(!0),a(i,null,l(r.liabilityDetails,((e,t)=>(n(),u(v,{key:t,title:e.liabilityName,content:"投保"},null,8,["title"])))),128)),o(v,{title:"保障金额",content:(r.currentAmount||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"]),o(v,{title:"首期保费",class:"price",content:(e.productData.premium||0).toLocaleString("hanidec",{style:"currency",currency:"CNY"})},null,8,["content"])])))),128))])]})),_:1})])}}}),[["__scopeId","data-v-3733d720"]]);const Z={class:"long-info-preview"},ee={class:"footer-btn"},te=s("span",null,"分享",-1),ne=t({__name:"infoPreview",setup(e){m((()=>I((()=>import("./index-fb55dad6.js")),["static/js/index-fb55dad6.js","static/css/index-fa4edf2a.css","static/js/index-bf17f989.js","static/css/index-df1cf75e.css","static/js/pdfh5-008ca364.js","static/js/index-5c5a7d11.js","static/css/index-827a8544.css","static/js/utils-5375db12.js","static/js/infoCollection-55387911.js","static/js/trial-3d5b5b01.js"]))),m((()=>I((()=>import("./index-bb258dbb.js")),["static/js/index-bb258dbb.js","static/css/index-3329e46f.css","static/js/index-bf17f989.js","static/css/index-df1cf75e.css","static/js/pdfh5-008ca364.js"])));const t=v(),a=$(),{productCode:i="",tenantId:l,agentCode:d="",agencyCode:p,saleChannelId:f,isShare:z,orderNo:G,extraInfo:H,insurerCode:X,preview:K}=t.query;let ne={};try{ne=JSON.parse(decodeURIComponent(H))}catch(be){}const ae=y({isView:!1,personalInfo:{},payInfo:{schema:[],config:[],formData:[]}}),oe=`${window.origin}/baseInsurance/long/phoneVerify${window.location.search}`,re=h({imgUrl:"",desc:"",title:"",link:oe}),se=h(),ie=h(),le=h({}),de=h({}),ce=h([]),ue=h(),pe=h({});h(!1),h(!1),h(0),h(!0),D(pe,ue),h(!1);const fe=h(!1);h(),b((()=>{var e,t;const{insureProductRiskVOList:n}=(null==(t=null==(e=de.value)?void 0:e.productPlanInsureVOList)?void 0:t[0])||{};return(n||[]).find((e=>e.mainRiskFlag===O.YES))}));const me=h(),Ie=()=>{A(a.value,((e,t)=>{t===x.JUMP_PAGE&&me.value.handleShare()}))},ve=async()=>{Object.assign(a.value,{extInfo:{...a.value.extInfo,buttonCode:B.INFO_PREVIEW,pageCode:J.INFO_PREVIEW}}),A(a.value,((e,n)=>{n===x.JUMP_PAGE&&W(e.nextPageCode,t.query)}))},ye=y({tenantOrderPayInfoList:[]}),he=async()=>{U({productCode:i,tenantId:l}).then((({data:e,code:t})=>{if("10000"===t){le.value=e,document.title=e.BASIC_INFO.title||"";let t={};const{wxShareConfig:n,showWXShare:a}=(null==e?void 0:e.PRODUCT_LIST)||{};if(n){const{title:e,desc:o,image:r}=n||{},[s=""]=r||[];t={title:e,desc:o,image:s,isShare:a}}else{const{title:n,desc:a,image:o}=(null==e?void 0:e.PRODUCT_LIST)||{};t={title:n,desc:a,image:o,isShare:!1}}k(e.BASIC_INFO.themeType),Object.assign(re.value,t)}})),N({orderNo:G,tenantId:l}).then((({code:e,data:t})=>{"10000"===e&&(ye.tenantOrderPayInfoList=t.tenantOrderPayInfoList,Object.assign(a.value,t,{tenantOrderPayInfoList:t.tenantOrderPayInfoList||[],operateOption:{withBeneficiaryInfo:!0,withHolderInfo:!0,withInsuredInfo:!0,withAttachmentInfo:!0,withProductInfo:!0,withPayInfo:!0}}),(()=>{const e={},{tenantOrderHolder:t,tenantOrderInsuredList:n}=a.value;e.holder={personVO:{...t,...t.extInfo}},e.insuredVOList=(n||[]).map((e=>({personVO:{...e,...e.extInfo,beneficiaryList:e.tenantOrderBeneficiaryList.map((e=>({personVO:e})))}}))),ae.personalInfo=e})(),fe.value=!0)})),F({productCode:i}).then((({code:e,data:t})=>{var n,a,o,r;if("10000"===e){const{productMaterialPlanVOList:e,productQuestionnaireVOList:s}=t;ue.value=e||[];const{basicInfo:{questionnaireType:i},questions:l,questionnaireName:d}=(null==(n=null==s?void 0:s[0])?void 0:n.questionnaireDetailResponseVO)||{basicInfo:{}};i&&(ce.value=2===i?[{attachmentName:d,attachmentUri:l,attachmentType:"question"}]:[{attachmentName:d,attachmentUri:null==(a=null==l?void 0:l[0])?void 0:a.content,attachmentType:q(String(null==(o=null==l?void 0:l[0])?void 0:o.textType),null==(r=null==l?void 0:l[0])?void 0:r.content)}])}})),await T({productCode:i,isTenant:!K}).then((({data:e,code:t})=>{var n,a;if("10000"===t){de.value=e,pe.value=(null==(n=e.productPlanInsureVOList)?void 0:n[0])||{};const{payInfo:t}=E(null==(a=pe.value)?void 0:a.productFactor);ae.payInfo={...ae.payInfo,...t}}}))};return _((()=>{he()})),(e,t)=>{const i=S,l=P("ProPageWrap");return n(),u(l,null,{default:r((()=>{var l,d,p,f,m,I;return[s("div",Z,[o(Q,{"product-data":null==(p=null==(d=null==(l=c(a).tenantOrderInsuredList)?void 0:l[0])?void 0:d.tenantOrderProductList)?void 0:p[0]},null,8,["product-data"]),(null==(f=c(pe))?void 0:f.productFactor)?(n(),u(c(Y),{key:0,ref_key:"personalInfoRef",ref:ie,modelValue:c(ae).personalInfo,"onUpdate:modelValue":t[0]||(t[0]=e=>c(ae).personalInfo=e),"product-factor":null==(m=c(pe))?void 0:m.productFactor,"multi-insured-config":null==(I=c(pe))?void 0:I.multiInsuredConfigVO,"is-view":""},null,8,["modelValue","product-factor","multi-insured-config"])):j("",!0),c(ae).payInfo.schema.length?(n(),u(c(R),{key:1,ref_key:"payInfoRef",ref:se,modelValue:c(ye).tenantOrderPayInfoList,"onUpdate:modelValue":t[1]||(t[1]=e=>c(ye).tenantOrderPayInfoList=e),schema:c(ae).payInfo.schema,"is-view":""},null,8,["modelValue","schema"])):j("",!0),s("div",ee,[!c(z)&&c(re).isShare?(n(),u(g,C({key:0},c(re),{class:"share-btn",onClick:L(Ie,["stop"])}),{default:r((()=>[o(i,{name:"share-icon","font-size":"24px",color:"#AEAEAE"}),te])),_:1},16,["onClick"])):j("",!0),o(M,{shadow:!1,onClick:ve},{default:r((()=>[V(e.$slots,"default",{},(()=>[w("下一步")]))])),_:3})])])]})),_:3})}}});export{ne as default};

!function(){var e=document.createElement("style");e.innerHTML='@charset "UTF-8";.page-relatedCustomers .visitor-tabs{--van-tab-font-size: .4rem;--van-tab-text-color:#969696;font-weight:600}.page-relatedCustomers .visitor-tabs .van-tabs__wrap{width:100%;height:1.33333rem}.page-relatedCustomers .van-cell{padding-left:0}.page-relatedCustomers .van-cell:after{border-bottom:1px solid #f4f5f7}.page-relatedCustomers .list .relatedCustomers-empty{margin-top:2.66667rem}.page-relatedCustomers .list .total-people{height:.53333rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#616161;line-height:.53333rem;margin:.4rem}.page-relatedCustomers .list .van-index-bar .index-bar-title .van-index-anchor{line-height:.64rem;color:#969696;background:#f4f5f7;font-size:.32rem}.page-relatedCustomers .list .van-index-bar .van-index-bar__sidebar{background:#F2F2F2;border-radius:.2rem;padding:.26667rem .08rem;top:58%}.page-relatedCustomers .list .van-index-bar .van-index-bar__sidebar .van-index-bar__index{font-size:.26667rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#969696;line-height:.46667rem;padding:0}.page-relatedCustomers .list .cell-item{display:flex;justify-content:space-between;align-items:center;padding:.26667rem .4rem .26667rem 0}.page-relatedCustomers .list .cell-item .cell-item-left{display:flex;align-items:center}.page-relatedCustomers .list .cell-item .cell-item-left .sexImg{width:1.06667rem;height:1.06667rem;margin-right:.4rem;border-radius:50%;margin-left:.4rem;box-shadow:0 .05333rem .16rem #dadbe3}.page-relatedCustomers .list .cell-item .cell-item-left .left-text .text-top{display:flex}.page-relatedCustomers .list .cell-item .cell-item-left .left-text .text-top .name-div{height:.56rem;font-size:.37333rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#343434;line-height:.56rem;margin-right:.26667rem}.page-relatedCustomers .list .cell-item .cell-item-left .left-text .text-top .tag-out{height:.53333rem;background:#ffeee7;border-radius:.10667rem;padding:.06667rem .16rem}.page-relatedCustomers .list .cell-item .cell-item-left .left-text .text-top .tag-out .tag-text{height:.4rem;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#f60;line-height:.4rem}.page-relatedCustomers .list .cell-item .cell-item-left .left-text .text-bottom{display:flex;margin-top:.08rem}.page-relatedCustomers .list .cell-item .cell-item-left .left-text .text-bottom .weixinImg-out{background:#dffae9;border-radius:.08rem;width:.4rem;height:.4rem;margin-right:.16rem;display:flex;align-items:center;justify-content:center}.page-relatedCustomers .list .cell-item .cell-item-left .left-text .text-bottom .weixinImg-out .weixinImg{width:.30667rem;height:.28rem}.page-relatedCustomers .list .cell-item .cell-item-left .left-text .text-bottom .weixin-text{height:.44rem;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#b6b6b6;line-height:.44rem}.page-relatedCustomers .list .cell-item .cell-item-right{background:rgba(255,43,31,.08);border-radius:.10667rem;padding:.12rem .33333rem;display:flex;align-items:center;font-size:.32rem;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:var(--van-primary-color);line-height:.44rem}.page-relatedCustomers .list .cell-item .cell-item-right img{width:.45333rem;height:.45333rem;margin-right:.09333rem}\n',document.head.appendChild(e),System.register(["./vendor-legacy-f56233fa.js","./visit-legacy-99c3022e.js","./index-legacy-32e69765.js","./index-legacy-4c8de798.js","./index-legacy-9604cbf9.js"],(function(e){"use strict";var t,a,l,i,s,r,n,o,m,c,d,u,g,v,f,p,h,x,b,y,C,I,w,k,F,T,_,S,$;return{setters:[function(e){t=e.g,a=e.Q,l=e.a0,i=e.C,s=e.M,r=e.h,n=e.j,o=e.r,m=e.k,c=e.y,d=e.n,u=e.m,g=e.I,v=e.F,f=e.E,p=e.G,h=e.H,x=e.z,b=e.A,y=e.B,C=e.s,I=e.D,w=e.T},function(e){k=e.q,F=e.u,T=e.c},function(e){_=e._},function(e){S=e._},function(e){$=e.u}],execute:function(){const P={class:"list-head"},R={key:0,class:"list"},z={class:"total-people"},B={class:"cell-item"},j={class:"cell-item-left"},E=["src"],L={class:"left-text"},Y={class:"text-top"},q={class:"name-div"},M={class:"text-bottom"},N={class:"weixinImg-out"},U=["src"],D=c("div",{class:"weixin-text"},"微信用户",-1),V=["onClick"],A=["src"],H={key:0,class:"list"},G={class:"total-people"},Q={class:"cell-item"},W={class:"cell-item-left"},Z=["src"],J={class:"left-text"},K={class:"text-top"},O={class:"name-div"},X={class:"text-bottom"},ee={class:"weixinImg-out"},te=["src"],ae=c("div",{class:"weixin-text"},"微信用户",-1),le=["onClick"],ie=["src"];e("default",t({setup(e){const{getIconUrl:t}=$(),se=a(),re=l(),ne=i(!1),oe=i(0);i(!0);const me=i(!1),ce=i(""),de=i(!1),ue=i(0),ge=i({}),ve=i(0),fe=i({}),pe=i("02"),he=(e,t)=>"接触面谈"===e?"background"===t?"#FFEEE7":"#FF6600":"需求分析"===e||"呈现促成"===e?"background"===t?"rgba(0, 175, 255, 0.08)":"#00AFFF":"客户获取"===e?"background"===t?"rgba(115, 76, 255, 0.1)":"#947FE1":"电话邀约"===e?"background"===t?"rgba(255, 141, 30, 0.1)":"#FF8D1E":"保单服务"===e?"background"===t?"rgba(27, 205, 145, 0.1)":"#1BCD91":"转介绍"===e?"background"===t?"rgba(255, 43, 31, 0.06)":"$primary-color":null,xe=()=>{ne.value=!0,k({pageNum:"1",pageSize:"999",queryBean:{orderBy:"firstLetter",customerListType:pe.value}}).then((e=>{ne.value=!1,"02"===pe.value&&(ue.value=e.data.data.count||0,ge.value=e.data.data.customerMaps||{}),"03"===pe.value&&(ve.value=e.data.data.count||0,fe.value=e.data.data.customerMaps||{})})).catch((e=>{ne.value=!1}))},be=e=>{"Y"===e.isRelative?I.confirm({message:"该客户已关联过其他微信客户，变更关联后原微信访客关联关系将被解除，您确认要变更关联信息吗？",confirmButtonText:"变更",theme:"round-button"}).then((()=>{F({agentCustomerId:e.agentCustomerId,relId:e.id,tenantId:e.tenantId,userId:e.userId,visitorId:se.query.visitId,customerId:e.customerId,customerType:pe.value}).then((e=>{"关联成功"===e.data.data&&(w.success("变更成功"),re.go(-1))}))})).catch((()=>{})):I.confirm({theme:"round-button",message:`确定要关联客户“${e.customerName}”吗？`,confirmButtonText:"关联"}).then((()=>{T({visitorId:se.query.visitId,agentCustomerId:e.agentCustomerId,customerType:pe.value}).then((e=>{"关联成功"===e.data.data&&(w.success("关联成功"),re.go(-1))})).catch((e=>{w.fail("关联失败")}))})).catch((()=>{}))},ye=e=>{"准客户"===e.title?pe.value="02":"承保客户"===e.title&&(pe.value="03"),xe()},Ce=()=>{me.value=!0},Ie=e=>{k(e).then((e=>{"02"===pe.value&&(ue.value=e.data.data.count||0,ge.value=e.data.data.customerMaps||{}),"03"===pe.value&&(ve.value=e.data.data.count||0,fe.value=e.data.data.customerMaps||{})})).catch((e=>{w.fail("查询列表失败")}))},we=e=>{de.value=!0;const t={pageNum:"1",pageSize:"999",queryBean:{orderBy:"firstLetter",customerListType:pe.value,keyword:e}};Ie(t)},ke=()=>{me.value=!1,de.value=!1,Ie({pageNum:"1",pageSize:"999",queryBean:{orderBy:"firstLetter",customerListType:pe.value}})};return s((()=>{xe()})),(e,a)=>{const l=o("van-search"),i=o("van-index-anchor"),s=o("van-cell"),I=o("van-index-bar"),w=o("van-tab"),k=o("van-tabs"),F=o("ZaPageWrap");return m(),r(F,{"main-class":"page-relatedCustomers"},{default:n((()=>[c("div",null,[c("div",P,[d(l,{modelValue:ce.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ce.value=e),class:"search-area",shape:"round",placeholder:"请输入姓名、手机号查询","show-action":me.value,onSearch:we,onCancel:ke,onFocus:Ce},null,8,["modelValue","show-action"])]),d(k,{active:oe.value,"onUpdate:active":a[1]||(a[1]=e=>oe.value=e),class:"visitor-tabs",onClickTab:ye},{default:n((()=>[d(w,{title:"准客户"},{default:n((()=>[c("div",null,[ne.value?C("",!0):(m(),u("div",R,[c("div",z,g(`共${ue.value}人`),1),d(I,null,{default:n((()=>[(m(!0),u(v,null,f(ge.value,((e,a,l)=>p((m(),u("div",{key:`${e}-${l}`},[d(i,{index:a,class:"index-bar-title"},null,8,["index"]),(m(!0),u(v,null,f(e,((e,a)=>(m(),r(s,{key:`${e}-${a}`,class:"cell-visit-customer"},{default:n((()=>[c("div",B,[c("div",j,[c("img",{src:"男"===e.gender?x(t)("visitor.manImg"):x(t)("visitor.womenImg"),alt:"",class:"sexImg"},null,8,E),c("div",L,[c("div",Y,[c("div",q,g(e.customerName),1),p(c("div",{class:"tag-out",style:b(`background:${he(e.visitTag,"background")}`)},[c("div",{class:"tag-text",style:b(`color:${he(e.visitTag,"text")}`)},g(e.visitTag),5)],4),[[h,e.visitTag]])]),p(c("div",M,[c("div",N,[c("img",{src:x(t)("visitor.weixinImg"),alt:"",class:"weixinImg"},null,8,U)]),D],512),[[h,"Y"===e.isRelative]])])]),c("div",{class:"cell-item-right",onClick:t=>be(e)},[c("img",{src:"Y"===e.isRelative?x(t)("visitor.changeImg"):x(t)("visitor.connectImg"),alt:""},null,8,A),y(" "+g("Y"===e.isRelative?"变更":"关联"),1)],8,V)])])),_:2},1024)))),128))])),[[h,e.length]]))),128))])),_:1}),p(d(S,{class:"relatedCustomers-empty",title:"暂无准客户","empyt-img":x(t)("customer.empty2")},null,8,["empyt-img"]),[[h,0===ue.value]])])),ne.value?(m(),r(_,{key:1,vertical:!0})):C("",!0)])])),_:1}),d(w,{title:"承保客户"},{default:n((()=>[c("div",null,[ne.value?C("",!0):(m(),u("div",H,[c("div",G,g(`共${ve.value}人`),1),d(I,null,{default:n((()=>[(m(!0),u(v,null,f(fe.value,((e,a,l)=>p((m(),u("div",{key:`${e}-${l}`},[d(i,{index:a,class:"index-bar-title"},null,8,["index"]),(m(!0),u(v,null,f(e,((e,a)=>(m(),r(s,{key:`${e}-${a}`,class:"cell-visit-customer"},{default:n((()=>[c("div",Q,[c("div",W,[c("img",{src:"男"===e.gender?x(t)("visitor.manImg"):x(t)("visitor.womenImg"),alt:"",class:"sexImg"},null,8,Z),c("div",J,[c("div",K,[c("div",O,g(e.customerName),1),p(c("div",{class:"tag-out",style:b(`background:${he(e.visitTag,"background")}`)},[c("div",{class:"tag-text",style:b(`color:${he(e.visitTag,"text")}`)},g(e.visitTag),5)],4),[[h,e.visitTag]])]),p(c("div",X,[c("div",ee,[c("img",{src:x(t)("visitor.weixinImg"),alt:"",class:"weixinImg"},null,8,te)]),ae],512),[[h,"Y"===e.isRelative]])])]),c("div",{class:"cell-item-right",onClick:t=>be(e)},[c("img",{src:"Y"===e.isRelative?x(t)("visitor.changeImg"):x(t)("visitor.connectImg"),alt:""},null,8,ie),y(" "+g("Y"===e.isRelative?"变更":"关联"),1)],8,le)])])),_:2},1024)))),128))])),[[h,e.length]]))),128))])),_:1}),p(d(S,{class:"relatedCustomers-empty",title:"暂无承保客户","empyt-img":x(t)("customer.empty2")},null,8,["empyt-img"]),[[h,0===ve.value]])])),ne.value?(m(),r(_,{key:1,vertical:!0})):C("",!0)])])),_:1})])),_:1},8,["active"])])])),_:1})}}}))}}}))}();

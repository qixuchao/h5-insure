import{d as e,h as t,g as a,i as o,av as n,o as s,c as i,b as r,u as d,l as u,w as c,a as l,a8 as p,bO as m,q as I,bP as f,bQ as y,aa as q,an as v,aC as b,aD as N,a9 as T}from"./index-2b9d0680.js";import{g as j}from"./utils-e47be992.js";import{n as O}from"./nextStep-7750099b.js";import{u as C}from"./useOrder-ad5f75e9.js";import{P as h,B as g}from"./constants-71331306.js";import"./infoCollection-0e6a7bcb.js";import"./trial-564daf23.js";import"./core-1c9da9f8.js";import"./constant-8927d485.js";const x=1;const _={class:"long-health-notice-wrap"},E={class:"footer-btn"},w=e({__name:"healthNotice",setup(e){const w=t(),P=a(),Q=C();console.log("route",w);const{productCode:S,orderNo:U,templateId:$,tenantId:k,preview:D,questionnaireId:V}=w.query,A=o({}),B=o(),G=o(),J={objectId:123,noticeType:1,orderNo:"2023083017475048217",tenantId:9991000011},L=()=>{B.value?P.push({path:`${w.path}/${B.value}`,query:{...w.query,questionnaireId:B.value}}):D?b(h.QUESTION_NOTICE,w.query):O(Q.value,((e,t)=>{t===N.JUMP_PAGE&&T(e.nextPageCode,w.query)}))};return n((()=>{!D&&(async()=>{const{code:e,data:t}=await y({orderNo:U,tenantId:k});"10000"===e&&Object.assign(Q.value,t,{extInfo:{...t.extInfo,templateId:$,pageCode:h.QUESTION_NOTICE,buttonCode:g.QUESTION_NOTICE}})})(),(async()=>{var e;const{code:t,data:a}=await f({productCode:S,orderNo:U,tenantId:k,questionnaireId:V});if("10000"===t){const{productQuestionnaireVOList:t}=a||{};let o=t[0]||{};if((null==t?void 0:t.length)>1)if(V){const e=t.findIndex((e=>`${e.id}`===V));t[e]&&(o=t[e]),t[e+1]&&(B.value=t[e+1].id)}else B.value=null==(e=t[1])?void 0:e.id;const{questionnaireDetailResponseVO:n,questionnaireId:s,questionnaireName:i}=o||{},{questions:r,basicInfo:d}=n||{},{objectType:u,questionnaireType:c}=d||{};if(G.value=u,c===x){const{content:e,textType:t}=(null==r?void 0:r[0])||{};A.value={content:e,contentType:j(`${t}`,e),questionnaireId:s,questionnaireName:i}}else A.value={...n,contentType:"question",questionnaireId:s,questionnaireName:i}}})()})),(e,t)=>{const a=q,o=v;return s(),i("div",_,[r(a),d(A)?(s(),u(m,{key:0,type:d(A).contentType,content:d(A),params:J,"success-callback":L},{footer:c((()=>[l("div",E,[r(o,{round:"",type:"primary",block:"","native-type":"submit"},{default:c((()=>[p(" 提交 ")])),_:1})])])),_:1},8,["type","content"])):I("",!0)])}}});export{w as default};

var qe=Object.defineProperty,Ye=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var ve=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var ye=(l,c,m)=>c in l?qe(l,c,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[c]=m,ae=(l,c)=>{for(var m in c||(c={}))ze.call(c,m)&&ye(l,m,c[m]);if(ve)for(var m of ve(c))Ge.call(c,m)&&ye(l,m,c[m]);return l},re=(l,c)=>Ye(l,Ke(c));import{g as Q,Q as Pe,E as N,y as se,j as v,n as F,z as f,J as T,p as u,L as ue,A as e,B as je,a4 as ie,a5 as de,F as O,G as R,k as H,C as M,t as $,M as Ce,_ as Qe,r as k,m as I,a9 as We,O as Je,h as Xe,af as Ze,D as et,H as tt}from"./vendor-667a94d7.js";import{_ as W,u as ot,q as Ve,a2 as he,x as ne,Q as le,l as z,y as Ie,G as at,z as rt,a5 as G,a4 as j,A as nt,O as lt}from"./index-d15b54a1.js";import{P as st}from"./index-95c4876b.js";import{p as ut,i as it,a as dt,s as ct,u as mt,b as pt}from"./trial-6131197b.js";import{p as ft}from"./product-c436ec1d.js";import{a as be,S as De,R as _t,f as ge}from"./infoCollection-242da9b6.js";import{A as vt,P as yt}from"./bankCard-b9d5732e.js";import{e as Fe,i as Ee,P as ht,I as It}from"./trial-de752cfb.js";import"./utils-b6782348.js";const Dt=l=>(ie("data-v-7a8bf142"),l=l(),de(),l),gt={class:"com-question-item"},Ft={class:"question"},Et=Dt(()=>f("div",{class:"icon"},T("?"),-1)),Pt={class:"title"},Ct=Q({props:{question:{type:String,default:""},answer:{type:String,default:""}},setup(l){const[c,m]=Pe(!1),E=N(),t=()=>{m()},V=se(()=>c.value?ot(E.value):0);return(C,o)=>(v(),F("div",gt,[f("div",Ft,[Et,f("div",Pt,T(l.question),1),u(Ve,{name:"down",class:ue(["arrow-icon",{show:e(c)}]),onClick:t},null,8,["class"])]),f("div",{ref_key:"answerDom",ref:E,class:"answer",style:je({height:`${e(V)}px`})},T(l.answer),5)]))}});var Vt=W(Ct,[["__scopeId","data-v-7a8bf142"]]);const bt={class:"com-question"},wt=Q({props:{list:{type:Array,default:()=>[]}},setup(l){const c=l,[m,E]=Pe(!1),t=()=>{E()},V=se(()=>c.list.length<=4||m.value?c.list:c.list.slice(0,4));return(C,o)=>(v(),F("div",bt,[(v(!0),F(O,null,R(e(V),(P,A)=>(v(),H(Vt,{key:A,question:P.title,answer:P.desc},null,8,["question","answer"]))),128)),l.list.length>4?(v(),F("div",{key:0,class:"show-more",onClick:t},[M(T(e(m)?"\u6536\u8D77":"\u5C55\u5F00")+" ",1),u(Ve,{name:"down",class:ue(["icon",{showMore:e(m)}])},null,8,["class"])])):$("",!0)]))}});var Nt=W(wt,[["__scopeId","data-v-22ede01f"]]);const ce=l=>(ie("data-v-07078e81"),l=l(),de(),l),Tt=ce(()=>f("div",{class:"title"},"\u6295\u4FDD\u4EBA",-1)),At=ce(()=>f("div",{class:"title"},"\u4E3A\u8C01\u6295\u4FDD",-1)),Bt=ce(()=>f("div",{class:"title"},"\u4FDD\u8D39\u652F\u4ED8",-1)),Ot=M("\u514D\u8D39\u5F00\u901A"),kt=Q({props:{disabled:{type:Boolean,default:!1},formInfo:{default:()=>({})}},setup(l,{expose:c}){const m=l,E=N({}),t=Ce({disabled:m.disabled,insureDisable:!0,formInfo:m.formInfo}),V=()=>new Promise((C,o)=>{E==null||E.value.validate().then(()=>{C("")},()=>{o()})});return Qe(()=>t.formInfo.insured.relationToHolder,(C,o)=>{C!==o&&(C.toString()===be.SELF?(t.formInfo.insured={certNo:t.formInfo.holder.certNo,name:t.formInfo.holder.name,socialFlag:t.formInfo.holder.socialFlag,relationToHolder:C},t.insureDisable=!0):(t.formInfo.insured={certNo:"",name:"",socialFlag:1,relationToHolder:C},t.insureDisable=!1))}),c({validateForm:V}),(C,o)=>{const P=k("ProField"),A=k("ProRadioButton"),J=k("ProPicker"),q=k("van-checkbox"),X=k("ProForm");return v(),H(X,{ref_key:"formRef",ref:E},{default:I(()=>[f("div",null,[Tt,u(P,{modelValue:e(t).formInfo.holder.name,"onUpdate:modelValue":o[0]||(o[0]=s=>e(t).formInfo.holder.name=s),label:"\u59D3\u540D",name:"name",required:"",placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D","is-view":m.disabled},null,8,["modelValue","is-view"]),u(P,{modelValue:e(t).formInfo.holder.certNo,"onUpdate:modelValue":o[1]||(o[1]=s=>e(t).formInfo.holder.certNo=s),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","is-view":m.disabled,"validate-type":[e(he).ID_CARD]},null,8,["modelValue","is-view","validate-type"]),u(P,{modelValue:e(t).formInfo.holder.mobile,"onUpdate:modelValue":o[2]||(o[2]=s=>e(t).formInfo.holder.mobile=s),label:"\u624B\u673A\u53F7",name:"mobile","is-view":m.disabled,required:"",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue","is-view"]),u(P,{modelValue:e(t).formInfo.holder.socialFlag,"onUpdate:modelValue":o[4]||(o[4]=s=>e(t).formInfo.holder.socialFlag=s),label:"\u6709\u65E0\u793E\u4FDD",name:"socialFlag",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:I(()=>[u(A,{modelValue:e(t).formInfo.holder.socialFlag,"onUpdate:modelValue":o[3]||(o[3]=s=>e(t).formInfo.holder.socialFlag=s),options:e(De)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])]),u(ne),f("div",null,[At,u(P,{modelValue:e(t).formInfo.insured.relationToHolder,"onUpdate:modelValue":o[6]||(o[6]=s=>e(t).formInfo.insured.relationToHolder=s),class:"relation-to-Holder",label:"",name:"relationToHolder",placeholder:"\u8BF7\u9009\u62E9"},{input:I(()=>[u(A,{modelValue:e(t).formInfo.insured.relationToHolder,"onUpdate:modelValue":o[5]||(o[5]=s=>e(t).formInfo.insured.relationToHolder=s),options:e(_t)},null,8,["modelValue","options"])]),_:1},8,["modelValue"]),u(P,{modelValue:e(t).formInfo.insured.name,"onUpdate:modelValue":o[7]||(o[7]=s=>e(t).formInfo.insured.name=s),label:"\u59D3\u540D",name:"name",required:"","is-view":e(t).insureDisable},null,8,["modelValue","is-view"]),u(P,{modelValue:e(t).formInfo.insured.certNo,"onUpdate:modelValue":o[8]||(o[8]=s=>e(t).formInfo.insured.certNo=s),label:"\u8BC1\u4EF6\u53F7\u7801",name:"certNo",required:"",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u4EFD\u8BC1\u53F7","validate-type":[e(he).ID_CARD],"is-view":e(t).insureDisable},null,8,["modelValue","validate-type","is-view"]),u(P,{modelValue:e(t).formInfo.insured.socialFlag,"onUpdate:modelValue":o[10]||(o[10]=s=>e(t).formInfo.insured.socialFlag=s),label:"\u6709\u65E0\u793E\u4FDD",name:"name",required:"",placeholder:"\u8BF7\u9009\u62E9"},{input:I(()=>[u(A,{modelValue:e(t).formInfo.insured.socialFlag,"onUpdate:modelValue":o[9]||(o[9]=s=>e(t).formInfo.insured.socialFlag=s),options:e(De)},null,8,["modelValue","options"])]),_:1},8,["modelValue"])]),u(ne),f("div",null,[Bt,u(P,{modelValue:e(t).formInfo.premium,"onUpdate:modelValue":o[11]||(o[11]=s=>e(t).formInfo.premium=s),label:"\u6BCF\u6708\u4FDD\u8D39","is-view":!0},{input:I(()=>[M(T(e(t).formInfo.premium)+" /\u6708 \u517112\u671F",1)]),_:1},8,["modelValue"]),u(J,{modelValue:e(t).formInfo.paymentMethod,"onUpdate:modelValue":o[12]||(o[12]=s=>e(t).formInfo.paymentMethod=s),name:"paymentMethod",label:"\u652F\u4ED8\u65B9\u5F0F",placeholder:"\u8BF7\u9009\u62E9","data-source":e(vt),required:""},null,8,["modelValue","data-source"]),u(P,{label:"\u5F00\u901A\u4E0B\u4E00\u5E74\u81EA\u4E3B\u91CD\u65B0\u6295\u4FDD",name:"renewalDK",placeholder:"\u8BF7\u9009\u62E9"},{input:I(()=>[u(q,{modelValue:e(t).formInfo.renewalDK,"onUpdate:modelValue":o[13]||(o[13]=s=>e(t).formInfo.renewalDK=s)},{default:I(()=>[Ot]),_:1},8,["modelValue"])]),_:1})]),u(ne)]),_:1},512)}}});var St=W(kt,[["__scopeId","data-v-07078e81"]]);const Ut=l=>(ie("data-v-5a467597"),l=l(),de(),l),Lt={class:"page-product-detail"},Rt={class:"info"},Mt=["src"],xt={class:"guarantee-list"},$t={key:0,class:"plan"},Ht=["onClick"],qt={key:0,class:"basic"},Yt={class:"tab-1"},Kt=["src"],zt=Ut(()=>f("div",{class:"sub-title"},"*\u4EA7\u54C1\u8D44\u6599\u6587\u4EF6\u8BE6\u60C5\u53EF\u624B\u52A8\u653E\u5927\uFF0C\u4EE5\u4FBF\u60A8\u66F4\u6E05\u6670\u67E5\u9605\u5185\u5BB9\u3002",-1)),Gt={class:"tab-1-content"},jt=M(" \u8BF7\u67E5\u770B "),Qt={key:0,class:"dun-hao"},Wt={class:"footer-button"},Jt={class:"price"},Xt=M(" \u603B\u4FDD\u8D39"),Zt=M("\u7ACB\u5373\u6295\u4FDD"),eo={class:"guarantee-list"},to={class:"title"},oo={class:"content"},ao=Q({setup(l){const c=We(),m=Je(),{productCode:E,name:t,certNo:V,mobile:C,tenantId:o="9991000007",saleUserId:P="65434444",saleChannelId:A="123131321231",agencyId:J="3311222",orderId:q}=m.query,X=N([{title:"\u6211\u8981\u6295\u4FDD",slotName:"tab1"},{title:"\u4EA7\u54C1\u7279\u8272",slotName:"tab2"},{title:"\u7406\u8D54\u6D41\u7A0B",slotName:"tab3"}]),s=N(),Y=N(0),Z=N(!1),D=N(),me=N(),ee=N(),we=!!(t&&V&&C),r=Ce({holder:{certNo:V,certType:le.CERT,mobile:C,name:t,socialFlag:ge.HAS},insured:{certNo:V,certType:le.CERT,name:t,socialFlag:ge.HAS,relationToHolder:be.SELF},paymentMethod:yt.ALIPAY,premium:0,renewalDK:"Y"}),Ne=d=>{Y.value=d},Te=()=>{Z.value=!0},B=se(()=>{var d,n,a,_,h,g,y;return((a=(n=(d=D.value)==null?void 0:d.tenantProductInsureVO)==null?void 0:n.guaranteeList)==null?void 0:a.length)?(h=(_=D.value)==null?void 0:_.tenantProductInsureVO)==null?void 0:h.guaranteeList:[{guaranteeType:"\u5355\u8BA1\u5212",titleAndDescVOS:(y=(g=D.value)==null?void 0:g.tenantProductInsureVO)==null?void 0:y.titleAndDescVOS}]}),Ae=d=>{const n=d.find(a=>a.riskType===Fe.MAIN_RISK);return d.map(a=>{var fe;const{riskInsureLimitVO:_,riskCategory:h,id:g,riskType:y,riskName:i,riskCode:p,riskLiabilityInfoVOList:b,riskCalcMethodInfoVO:w}=a,{insurancePeriodType:x,insurancePeriodValueList:S,paymentFrequencyList:U,paymentPeriodValueList:L,paymentPeriodType:ro,annuityDrawFrequencyList:te,annuityDrawValueList:oe,insurancePeriodRule:Me,paymentPeriodRule:xe}=_,{fixedAmount:$e,minCopy:He}=w,K={amount:$e,riskCode:p,riskId:g,riskName:i,chargePeriod:L==null?void 0:L[0],annuityDrawDate:oe==null?void 0:oe[0],riskType:y,annuityDrawFrequency:te==null?void 0:te[0],copy:He,coveragePeriod:S==null?void 0:S[0],insuredCode:(fe=D.value)==null?void 0:fe.insurerCode,liabilityVOList:b.filter(_e=>_e.optionalFlag===1&&_e.liabilityCode!=="FXG086"),paymentFrequency:U==null?void 0:U[0],riskCategory:h};return y===Fe.MAIN_RISK?K:(Me===Ee.ONE_YEAR&&(K.coveragePeriod="year_1"),xe===Ee.ONE_YEAR&&(K.chargePeriod="year_1"),re(ae({},K),{mainRiskId:n==null?void 0:n.id,mainRiskCode:n==null?void 0:n.riskCode}))})},Be=async d=>{const n=await mt(d),{code:a}=n;if(a==="10000"){const _=await pt({id:d.id,tenantId:o}),{data:h}=_;window.location.href=h}},Oe=(d,n)=>d.map(a=>{var h,g;return{tenantId:o,amountUnit:1,annuityDrawFrequency:a.annuityDrawDate,annuityDrawType:a.annuityDrawType,paymentFrequency:a.paymentFrequency,paymentPeriod:a.chargePeriod.split("_")[1],paymentPeriodType:ht[a.chargePeriod.split("_")[0]],insurancePeriodType:It[a.coveragePeriod==="to_life"?"to_life":a.coveragePeriod.split("_")[0]],insurancePeriodValue:Number.isNaN(+a.coveragePeriod.split("_")[1])?0:a.coveragePeriod.split("_")[1],riskCode:a.riskCode,riskType:a.riskType,extInfo:{riskId:a.riskId,copy:a.copy},initialPremium:(h=n[a.riskCode])==null?void 0:h.premium,liabilityDetails:a.liabilityVOList.map(y=>({liabilityCode:y.liabilityCode,liabilityName:y.liabilityName,refundMethod:y.liabilityAttributeValue})),productId:(g=D.value)==null?void 0:g.id,currantAmount:3e4,initAmount:3e4}}),ke=d=>`${lt}/activity/guaranteeUpgrade?tenantId=${o}&productCode=${E}&orderId=${d}`,Se=d=>{var a,_;return{tenantId:o,venderCode:(a=D.value)==null?void 0:a.insurerCode,orderDataSource:"1",saleChannelId:A,saleUserId:P,agencyId:J,tenantOrderHolder:{tenantId:o,name:r.holder.name,certType:1,certNo:r.holder.certNo,mobile:r.holder.mobile,birthday:G(r.holder.certNo),gender:j(r.holder.certNo)},extInfo:{extraInfo:{renewalDK:r.renewalDK||"N",paymentMethod:r.paymentMethod,jumpUrl:""}},tenantOrderInsuredList:[{tenantId:o,relationToHolder:r.insured.relationToHolder,insuredBeneficiaryType:r.insured.relationToHolder,name:r.insured.name,certType:le.CERT,certNo:r.insured.certNo,birthday:G(r.insured.certNo),gender:j(r.insured.certNo),extInfo:{hasSocialInsurance:r.insured.socialFlag},tenantOrderProductList:[{tenantId:o,productCode:E,productName:(_=D.value)==null?void 0:_.productName,premium:ee.value,tenantOrderRiskList:d}]}]}},Ue=async d=>{const n=Se(d),a=await ct(n),{code:_,data:h}=a;if(_==="10000"){const g=ke(h.data);Be(re(ae({id:h.data},n),{extInfo:{extraInfo:{renewalDK:r.renewalDK||"N",paymentMethod:r.paymentMethod,jumpUrl:g}}}))}},pe=()=>new Promise(d=>{var n,a;(a=(n=s.value)==null?void 0:n.validateForm)==null||a.call(n).then(async()=>{var p;const _=Ae(me.value.productRiskVoList[0].riskDetailVOList),h={holder:{personVO:{birthday:G(r.holder.certNo),certType:r.holder.certType,certNo:r.holder.certNo,gender:Number(j(r.holder.certNo)),mobile:r.holder.mobile,name:r.holder.name,socialFlag:r.holder.socialFlag}},insuredVOList:[{insuredCode:(p=D.value)==null?void 0:p.insurerCode,relationToHolder:r.insured.relationToHolder,personVO:{birthday:G(r.insured.certNo),certType:r.insured.certType,certNo:r.insured.certNo,gender:Number(j(r.insured.certNo)),name:r.insured.name,socialFlag:r.insured.socialFlag},productPlanVOList:[{riskVOList:_}]}],productCode:E,tenantId:o},g=await ut(h),{code:y,data:i}=g;y==="10000"&&(ee.value=i.premium,r.premium=i.premium,d({condition:_,data:i}))})}),Le=async()=>{const{condition:d,data:n}=await pe();console.log(d,n);const a={},_=(g=[])=>{(g||[]).forEach(y=>{var i;a[y.riskCode]=y,((i=y.riskPremiumDetailVOList)==null?void 0:i.length)&&_(y.riskPremiumDetailVOList)})};_(n.riskPremiumDetailVOList);const h=Oe(d,a);Ue(h)},Re=async()=>{const d=ft({productCode:E,withInsureInfo:!0}),n=it({productCode:E});if(await Promise.all([d,n]).then(([a,_])=>{a.code==="10000"&&(D.value=a.data),_.code==="10000"&&(me.value=_.data)}),pe(),q){const a=await dt({id:q,tenantId:o});a.code==="10000"&&(console.log(a.data.orderStatus),a.data.orderStatus==="acceptPolicy"&&et.confirm({title:"\u6807\u9898",message:"\u5347\u7EA7\u4FDD\u969C"}).then(()=>{c.push({path:"/activity/productDetail",query:{productCode:"BWYL2022",name:t,certNo:V,mobile:C}})}).catch(()=>{}))}};return Xe(()=>{Re(),setTimeout(()=>{window.getIseeBiz&&window.getIseeBiz()},1500)}),(d,n)=>{var g,y;const a=k("ProPDFviewer"),_=k("van-button"),h=Ze("dompurify-html");return v(),F(O,null,[f("div",null,[f("div",Lt,[f("div",Rt,[f("img",{src:(y=(g=D.value)==null?void 0:g.tenantProductInsureVO)==null?void 0:y.banner[0],class:"banner"},null,8,Mt),f("div",xt,[e(B).length>1?(v(),F("div",$t,[(v(!0),F(O,null,R(e(B),(i,p)=>(v(),F("div",{key:p,class:ue(["plan-item",`length-${e(B).length}`,{active:Y.value===p}]),onClick:b=>Ne(p)},T(i),11,Ht))),128))])):$("",!0),u(z,{title:"\u4FDD\u969C\u5185\u5BB9",link:"\u67E5\u770B\u8BE6\u60C5","show-divider":!1,"show-icon":!1,onLinkClick:Te},{default:I(()=>{var i,p,b;return[D.value&&((i=D.value)==null?void 0:i.tenantProductInsureVO)?(v(),F("div",qt,[(v(!0),F(O,null,R((b=(p=e(B))==null?void 0:p[Y.value])==null?void 0:b.titleAndDescVOS,(w,x)=>(v(),H(nt,{key:x,class:"guarantee-item",title:w.title,content:w.desc,border:!1},null,8,["title","content"]))),128))])):$("",!0)]}),_:1})])]),u(Ie,{class:"tabs",list:X.value,sticky:"",scrollspy:""},{tab1:I(()=>[u(St,{ref_key:"formRef",ref:s,disabled:we,"form-info":e(r)},null,8,["form-info"])]),tab2:I(()=>{var i,p;return[f("div",Yt,[(v(!0),F(O,null,R(((p=(i=D.value)==null?void 0:i.tenantProductInsureVO)==null?void 0:p.spec)||[],(b,w)=>(v(),F("img",{key:w,src:b,class:"detail-img"},null,8,Kt))),128)),u(z,{title:"\u4EA7\u54C1\u8D44\u6599"},{subTitle:I(()=>[zt]),default:I(()=>{var b,w;return[f("div",Gt,[jt,(v(!0),F(O,null,R(((w=(b=D.value)==null?void 0:b.tenantProductInsureVO)==null?void 0:w.attachmentVOList)||[],(x,S)=>(v(),H(a,{key:S,class:"file-name",title:`\u300A${x.attachmentName}\u300B`,content:x.attachmentUri,type:"pdf"},{default:I(()=>{var U,L;return[S!==(((L=(U=D.value)==null?void 0:U.tenantProductInsureVO)==null?void 0:L.attachmentVOList)||[]).length-1?(v(),F("span",Qt,"\u3001")):$("",!0)]}),_:2},1032,["title","content"]))),128))])]}),_:1})])]}),tab3:I(()=>[u(z,{title:"\u7406\u8D54\u6D41\u7A0B"},{default:I(()=>{var i,p;return[u(st,{list:(p=(i=D.value)==null?void 0:i.tenantProductInsureVO)==null?void 0:p.settlementProcessList},null,8,["list"])]}),_:1}),u(z,{title:"\u5E38\u89C1\u95EE\u9898"},{default:I(()=>{var i,p;return[u(Nt,{list:(p=(i=D.value)==null?void 0:i.tenantProductInsureVO)==null?void 0:p.questionList},null,8,["list"])]}),_:1})]),_:1},8,["list"]),f("div",Wt,[f("div",Jt,[Xt,f("span",null,"\uFFE5"+T(e(at)(ee.value))+"/\u6708",1)]),u(_,{type:"primary",class:"right",onClick:Le},{default:I(()=>[Zt]),_:1})])])]),u(rt,{show:Z.value,"onUpdate:show":n[0]||(n[0]=i=>Z.value=i),title:"\u4FDD\u969C\u8BE6\u60C5",class:"guarantee-popup"},{default:I(()=>[e(B).length>1?(v(),H(Ie,{key:0,list:e(B).map((i,p)=>({title:i.guaranteeType,slotName:`guarantee-${p}`})),class:"tab"},null,8,["list"])):$("",!0),f("div",eo,[(v(!0),F(O,null,R(e(B)[Y.value].titleAndDescVOS,(i,p)=>(v(),F("div",{key:p,class:"guarantee-item"},[f("div",to,T(i.title),1),tt(f("div",oo,null,512),[[h,i.content]])]))),128))])]),_:1},8,["show"])],64)}}});var vo=W(ao,[["__scopeId","data-v-5a467597"]]);export{vo as default};

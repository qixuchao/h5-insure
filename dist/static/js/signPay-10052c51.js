var b=Object.defineProperty;var y=(s,t,e)=>t in s?b(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var a=(s,t,e)=>(y(s,typeof t!="symbol"?t+"":t,e),e);import{h as B,P as f,r as A,j as T,D as g,k as i,m as r,n as w,p as h,s as d,B as u,t as c,G as x}from"./vendor-902054a7.js";import{i as k,u as _,b as C}from"./core-616c6d04.js";import"./index-84e52064.js";const p=()=>{};class P{constructor(t){a(this,"params");a(this,"time",1e3);a(this,"total",0);a(this,"timer");this.params=this.init(t)}init(t){const e={start:t.start||p,stop:t.stop||p,number:t.number?Math.abs(t.number):0,time:t.time?Math.abs(t.time):300};return this.time=t.time,e}run(){this.timer=setTimeout(this.runTime.bind(this),this.time)}stop(){clearTimeout(this.timer),this.params.stop()}runTime(){try{this.params.start()}finally{if(this.params.number>0){if(this.total>=this.params.number){this.params.stop(),clearTimeout(this.timer);return}this.total||(this.total=1),this.total+=1}clearTimeout(this.timer)}this.timer=setTimeout(this.runTime.bind(this),this.time)}}var N=s=>new P(s);const I={key:0,class:"result-view"},V={class:"content-box"},M=u("div",{class:"content"},"\u5F00\u901A\u6210\u529F\uFF0C\u6B63\u5728\u4E3A\u60A8\u751F\u6210\u4FDD\u5355...",-1),R=u("div",{class:"tip"},"\u8BF7\u52FF\u8FD4\u56DE\u6216\u9000\u51FA",-1),W={key:1,class:"sign-view"},q={class:"content-box"},S=u("div",{class:"content"},"\u60A8\u5DF2\u9009\u62E9\u6309\u6708\u652F\u4ED8\uFF0C\u8BF7\u5F00\u901A\u81EA\u52A8\u7EED\u8D39",-1),$=u("div",{class:"tip"},"\u786E\u4FDD\u60A8\u7684\u4FDD\u969C\u6309\u6708\u751F\u6548",-1),j=x(" \u524D\u5F80\u5FAE\u4FE1\u5F00\u901A "),H=B({setup(s){const t=f().query,e=A(!1),F=async()=>{_(t)};let n;const E=()=>{C({tenantId:t.tenantId,orderNo:t.orderNo}).then(m=>{const{code:l,data:o}=m;l==="10000"&&+o.status==1&&(n.stop(),window.location.href=`/baseInsurance/orderDetail?orderNo=${t.businessTradeNo||t.orderNo}&tenantId=${t.tenantId}`)}).catch()};return n=N({start:()=>{console.log("\u5F00\u59CB\u8F6E\u8BE2"),E()},stop:()=>{console.log("\u7ED3\u675F\u8F6E\u8BE2")},time:1e3,number:10}),T(async()=>{+t.from_wxpay==1?(e.value=!0,n.run()):k&&g.alert({title:"\u53BB\u5FAE\u4FE1\u5F00\u901A\u6309\u6708\u7F34\u8D39",confirmButtonText:"\u597D\u7684\uFF0C\u6211\u77E5\u9053\u4E86"}).then(()=>{_(t)})}),(m,l)=>{const o=i("van-icon"),v=i("VanButton"),D=i("ProPageWrap");return r(),w(D,{"main-class":"page-sign-pay"},{default:h(()=>[e.value?(r(),d("div",I,[u("div",V,[c(o,{name:"checked",class:"large-icon"}),M,R])])):(r(),d("div",W,[u("div",q,[c(o,{name:"wechat-pay",class:"large-icon"}),S,$]),c(v,{size:"large",block:"",class:"btn-go-wx",onClick:F},{default:h(()=>[j]),_:1})]))]),_:1})}}});export{H as default};

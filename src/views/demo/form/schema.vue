<template>
  <van-divider content-position="left">ProForm schema</van-divider>
  <ProForm ref="schemaFormRef" class="schema-form" :model="state.formData" :schema="schema"> </ProForm>

  <!-- van-form æ¨¡ç‰ˆå†™æ³• -->
  <van-form @submit="onSubmit">
    <ProField name="name" label="å§“å" />
    <ProPicker name="certType" label="è¯ä»¶ç±»å‹" :columns="CERT_TYPE" />
    <ProField name="cardNo" label="è¯ä»¶å·ç " />
    <ProDatePicker name="birthday" label="å‡ºç”Ÿæ—¥æœŸ" />
    <ProDatePicker v-model="month" type="month-day" name="monthday" label="æœˆæ—¥" />
    <ProDatePicker type="time" name="birthday" label="æ—¶é—´" />
    <ProField name="phone" label="æ‰‹æœºå·ç " />
    <ProField name="address" label="çœå¸‚åŒº" />
    <ProField name="address" label="è¯¦ç»†åœ°å€" />

    <ProFieldset title="è¢«ä¿äºº">
      <ProField name="address" label="ä¸æŠ•ä¿äººå…³ç³»" />
    </ProFieldset>

    <div style="margin: 16px">
      <van-button round block type="primary" native-type="submit"> æäº¤ </van-button>
    </div>
  </van-form>
</template>
<script lang="ts" setup>
import { ProField, ProCalendar, ProDatePicker, ProPicker, transformToSchema, ProForm } from '@/components/RenderForm';
import { isNotEmptyArray } from '@/common/constants/utils';
import { data, schema } from './data';

const schemaFormRef = ref(null);

const month = ref('01-01');

const CERT_TYPE = [
  { label: 'ä¸­å›½', value: 'cn' },
  { label: 'ç¾å›½', value: 'us' },
];

const state = reactive({
  formData: {},
  date: '',
  tel: '',
  birthday: '03:11',
  show: false,
});

// const schema = computed(() => {
//   return transformToSchema(data);
// });

const onSubmit = (values) => {
  console.log(111111, schemaFormRef?.value, values, state.date);
};

watch(
  () => state.formData,
  () => {
    console.log('%cğŸ”¥ è¡¨å•æ•°æ®æ”¹åŠ¨äº†', 'color:#1989fa;background:#5e4;padding:3px 5px;');
  },
  {
    immediate: true,
    deep: true,
  },
);
</script>
<style lang="scss" scoped>
.com-form-wrapper {
}
</style>
